"use strict";(self.fjf2z1c8il8=self.fjf2z1c8il8||[]).push([[28,29],{14175:(g,i,a)=>{var n=a(12392),L=a(12292),d=a(12324),b=a(12422),k=a(12354),e=a(12403);k.d.prototype._partialLoadFile=function(g,i,a,n){let L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._loadFile(g,(g=>{a[i]=g,a._internalCount++,6===a._internalCount&&n(a)}),void 0,void 0,!0,((g,i)=>{L&&g&&L(g.status+" "+g.statusText,i)}))},k.d.prototype._cascadeLoadFiles=function(g,i,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const L=[];L._internalCount=0;for(let d=0;d<6;d++)this._partialLoadFile(a[d],d,L,i,n)},k.d.prototype._cascadeLoadImgs=function(g,i,a,n){let L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=arguments.length>5?arguments[5]:void 0;const b=[];b._internalCount=0;for(let k=0;k<6;k++)this._partialLoadImg(n[k],k,b,g,i,a,L,d)},k.d.prototype._partialLoadImg=function(g,i,a,n,L,k){let e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,N=arguments.length>7?arguments[7]:void 0;const F=(0,b.d)();(0,d.m)(g,(g=>{a[i]=g,a._internalCount++,n&&n.removePendingData(F),6===a._internalCount&&k&&k(L,a)}),((g,i)=>{n&&n.removePendingData(F),e&&e(g,i)}),n?n.offlineProvider:null,N),n&&n.addPendingData(F)},k.d.prototype.createCubeTextureBase=function(g,i,a,d){let b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,N=arguments.length>6?arguments[6]:void 0,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,I=arguments.length>8&&void 0!==arguments[8]&&arguments[8],j=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,B=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,c=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,D=arguments.length>13&&void 0!==arguments[13]?arguments[13]:null,p=arguments.length>14&&void 0!==arguments[14]&&arguments[14],R=arguments.length>15&&void 0!==arguments[15]?arguments[15]:null;const x=B||new n.d(this,7);x.isCube=!0,x.url=g,x.generateMipMaps=!d,x._lodGenerationScale=j,x._lodGenerationOffset=y,x._useSRGBBuffer=!!p&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!d),x!==B&&(x.label=g.substring(0,60)),this._doNotHandleContextLost||(x._extension=F,x._files=a,x._buffer=R);const E=g;this._transformTextureUrl&&!B&&(g=this._transformTextureUrl(g));const X=F??function(g){const i=g.split("?")[0],a=i.lastIndexOf(".");return a>-1?i.substring(a).toLowerCase():""}(g),v=(0,e.c)(X),P=(g,i)=>{x.dispose(),k?k(g,i):g&&L.b.Warn(g)},Y=(n,k)=>{g===E?n&&P(n.status+" "+n.statusText,k):(L.b.Warn(`Failed to load ${g}, falling back to the ${E}`),this.createCubeTextureBase(E,i,a,!!d,b,P,N,F,I,j,y,x,c,D,p,R))};if(v)v.then((n=>{const L=g=>{c&&c(x,g),n.loadCubeData(g,x,I,b,((g,i)=>{P(g,i)}))};R?L(R):a&&6===a.length?n.supportCascades?this._cascadeLoadFiles(i,(g=>L(g.map((g=>new Uint8Array(g))))),a,P):P("Textures type does not support cascades."):this._loadFile(g,(g=>L(new Uint8Array(g))),void 0,void 0,!0,Y)}));else{if(!a||0===a.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(i,x,((g,i)=>{D&&D(g,i)}),a,P)}return this._internalTexturesCache.push(x),x}},14978:(g,i,a)=>{a.r(i),a.d(i,{_DDSTextureLoader:()=>d});var n=a(12648),L=a(14987);class d{constructor(){this.supportCascades=!0}loadCubeData(g,i,a,d){const b=i.getEngine();let k,e=!1,N=1e3;if(Array.isArray(g))for(let n=0;n<g.length;n++){const a=g[n];k=L.DDSTools.GetDDSInfo(a),i.width=k.width,i.height=k.height,e=(k.isRGB||k.isLuminance||k.mipmapCount>1)&&i.generateMipMaps,b._unpackFlipY(k.isCompressed),L.DDSTools.UploadDDSLevels(b,i,a,k,e,6,-1,n),k.isFourCC||1!==k.mipmapCount?N=k.mipmapCount-1:b.generateMipMapsForCubemap(i)}else{const d=g;k=L.DDSTools.GetDDSInfo(d),i.width=k.width,i.height=k.height,a&&(k.sphericalPolynomial=new n.c),e=(k.isRGB||k.isLuminance||k.mipmapCount>1)&&i.generateMipMaps,b._unpackFlipY(k.isCompressed),L.DDSTools.UploadDDSLevels(b,i,d,k,e,6),k.isFourCC||1!==k.mipmapCount?N=k.mipmapCount-1:b.generateMipMapsForCubemap(i,!1)}b._setCubeMapTextureParams(i,e,N),i.isReady=!0,i.onLoadedObservable.notifyObservers(i),i.onLoadedObservable.clear(),d&&d({isDDS:!0,width:i.width,info:k,data:g,texture:i})}loadData(g,i,a){const n=L.DDSTools.GetDDSInfo(g),d=(n.isRGB||n.isLuminance||n.mipmapCount>1)&&i.generateMipMaps&&Math.max(n.width,n.height)>>n.mipmapCount-1===1;a(n.width,n.height,d,n.isFourCC,(()=>{L.DDSTools.UploadDDSLevels(i.getEngine(),i,g,n,d,1)}))}}},12989:(g,i,a)=>{a.d(i,{c:()=>N});var n=a(12452),L=a(12466),d=a(12648),b=a(12454),k=a(12496);class e{constructor(g,i,a,n){this.name=g,this.worldAxisForNormal=i,this.worldAxisForFileX=a,this.worldAxisForFileY=n}}class N{static ConvertCubeMapTextureToSphericalPolynomial(g){var i;if(!g.isCube)return null;null===(i=g.Pg())||void 0===i||i.getEngine().flushFramebuffer();const a=g.getSize().width,n=g.readPixels(0,void 0,void 0,!1),L=g.readPixels(1,void 0,void 0,!1);let d,b;g.isRenderTarget?(d=g.readPixels(3,void 0,void 0,!1),b=g.readPixels(2,void 0,void 0,!1)):(d=g.readPixels(2,void 0,void 0,!1),b=g.readPixels(3,void 0,void 0,!1));const k=g.readPixels(4,void 0,void 0,!1),e=g.readPixels(5,void 0,void 0,!1),N=g.gammaSpace;let F=0;return 1!=g.textureType&&2!=g.textureType||(F=1),new Promise((g=>{Promise.all([L,n,d,b,k,e]).then((i=>{let[n,L,d,b,k,e]=i;const I={size:a,right:L,left:n,up:d,down:b,front:k,back:e,format:5,type:F,gammaSpace:N};g(this.ConvertCubeMapToSphericalPolynomial(I))}))}))}static _AreaElement(g,i){return Math.atan2(g*i,Math.sqrt(g*g+i*i+1))}static ConvertCubeMapToSphericalPolynomial(g){const i=new d.b;let a=0;const n=2/g.size,e=n,N=.5*n,F=N-1;for(let d=0;d<6;d++){const I=this._FileFaces[d],j=g[I.name];let y=F;const B=5===g.format?4:3;for(let d=0;d<g.size;d++){let c=F;for(let e=0;e<g.size;e++){const F=I.worldAxisForFileX.scale(c).add(I.worldAxisForFileY.scale(y)).add(I.worldAxisForNormal);F.normalize();const D=this._AreaElement(c-N,y-N)-this._AreaElement(c-N,y+N)-this._AreaElement(c+N,y-N)+this._AreaElement(c+N,y+N);let p=j[d*g.size*B+e*B+0],R=j[d*g.size*B+e*B+1],x=j[d*g.size*B+e*B+2];isNaN(p)&&(p=0),isNaN(R)&&(R=0),isNaN(x)&&(x=0),0===g.type&&(p/=255,R/=255,x/=255),g.gammaSpace&&(p=Math.pow((0,L.Clamp)(p),b.l),R=Math.pow((0,L.Clamp)(R),b.l),x=Math.pow((0,L.Clamp)(x),b.l));const E=this.MAX_HDRI_VALUE;if(this.PRESERVE_CLAMPED_COLORS){const g=Math.max(p,R,x);if(g>E){const i=E/g;p*=i,R*=i,x*=i}}else p=(0,L.Clamp)(p,0,E),R=(0,L.Clamp)(R,0,E),x=(0,L.Clamp)(x,0,E);const X=new k.Ri(p,R,x);i.addLight(F,X,D),a+=D,c+=n}y+=e}}const I=6*(4*Math.PI)/6/a;return i.scaleInPlace(I),i.convertIncidentRadianceToIrradiance(),i.convertIrradianceToLambertianRadiance(),d.c.FromHarmonics(i)}}N._FileFaces=[new e("right",new n.Bi(1,0,0),new n.Bi(0,0,-1),new n.Bi(0,-1,0)),new e("left",new n.Bi(-1,0,0),new n.Bi(0,0,1),new n.Bi(0,-1,0)),new e("up",new n.Bi(0,1,0),new n.Bi(1,0,0),new n.Bi(0,0,1)),new e("down",new n.Bi(0,-1,0),new n.Bi(1,0,0),new n.Bi(0,0,-1)),new e("front",new n.Bi(0,0,1),new n.Bi(1,0,0),new n.Bi(0,-1,0)),new e("back",new n.Bi(0,0,-1),new n.Bi(-1,0,0),new n.Bi(0,-1,0))],N.MAX_HDRI_VALUE=4096,N.PRESERVE_CLAMPED_COLORS=!1},14987:(g,i,a)=>{a.d(i,{DDSTools:()=>B});var n=a(12466),L=a(12292),d=a(12989),b=a(12684);a(14175);const k=131072,e=131072;function N(g){return g.charCodeAt(0)+(g.charCodeAt(1)<<8)+(g.charCodeAt(2)<<16)+(g.charCodeAt(3)<<24)}const F=N("DXT1"),I=N("DXT3"),j=N("DXT5"),y=N("DX10");class B{static GetDDSInfo(g){const i=new Int32Array(g.buffer,g.byteOffset,31),a=new Int32Array(g.buffer,g.byteOffset,35);let n=1;i[2]&k&&(n=Math.max(1,i[7]));const L=i[21],d=L===y?a[32]:0;let b=0;switch(L){case 113:b=2;break;case 116:b=1;break;case y:if(10===d){b=2;break}if(2===d){b=1;break}}return{width:i[4],height:i[3],mipmapCount:n,isFourCC:4===(4&i[20]),isRGB:64===(64&i[20]),isLuminance:(i[20]&e)===e,isCube:512===(512&i[28]),isCompressed:L===F||L===I||L===j,dxgiFormat:d,textureType:b}}static _GetHalfFloatAsFloatRGBAArrayBuffer(g,i,a,n,L,d){const k=new Float32Array(n),e=new Uint16Array(L,a);let N=0;for(let F=0;F<i;F++)for(let i=0;i<g;i++){const a=4*(i+F*g);k[N]=(0,b.h)(e[a]),k[N+1]=(0,b.h)(e[a+1]),k[N+2]=(0,b.h)(e[a+2]),B.StoreLODInAlphaChannel?k[N+3]=d:k[N+3]=(0,b.h)(e[a+3]),N+=4}return k}static _GetHalfFloatRGBAArrayBuffer(g,i,a,n,L,d){if(B.StoreLODInAlphaChannel){const k=new Uint16Array(n),e=new Uint16Array(L,a);let N=0;for(let a=0;a<i;a++)for(let i=0;i<g;i++){const n=4*(i+a*g);k[N]=e[n],k[N+1]=e[n+1],k[N+2]=e[n+2],k[N+3]=(0,b.p)(d),N+=4}return k}return new Uint16Array(L,a,n)}static _GetFloatRGBAArrayBuffer(g,i,a,n,L,d){if(B.StoreLODInAlphaChannel){const b=new Float32Array(n),k=new Float32Array(L,a);let e=0;for(let a=0;a<i;a++)for(let i=0;i<g;i++){const n=4*(i+a*g);b[e]=k[n],b[e+1]=k[n+1],b[e+2]=k[n+2],b[e+3]=d,e+=4}return b}return new Float32Array(L,a,n)}static _GetFloatAsHalfFloatRGBAArrayBuffer(g,i,a,n,L,d){const k=new Uint16Array(n),e=new Float32Array(L,a);let N=0;for(let F=0;F<i;F++)for(let i=0;i<g;i++)k[N]=(0,b.p)(e[N]),k[N+1]=(0,b.p)(e[N+1]),k[N+2]=(0,b.p)(e[N+2]),B.StoreLODInAlphaChannel?k[N+3]=(0,b.p)(d):k[N+3]=(0,b.p)(e[N+3]),N+=4;return k}static _GetFloatAsUIntRGBAArrayBuffer(g,i,a,L,d,b){const k=new Uint8Array(L),e=new Float32Array(d,a);let N=0;for(let F=0;F<i;F++)for(let i=0;i<g;i++){const a=4*(i+F*g);k[N]=255*(0,n.Clamp)(e[a]),k[N+1]=255*(0,n.Clamp)(e[a+1]),k[N+2]=255*(0,n.Clamp)(e[a+2]),B.StoreLODInAlphaChannel?k[N+3]=b:k[N+3]=255*(0,n.Clamp)(e[a+3]),N+=4}return k}static _GetHalfFloatAsUIntRGBAArrayBuffer(g,i,a,L,d,k){const e=new Uint8Array(L),N=new Uint16Array(d,a);let F=0;for(let I=0;I<i;I++)for(let i=0;i<g;i++){const a=4*(i+I*g);e[F]=255*(0,n.Clamp)((0,b.h)(N[a])),e[F+1]=255*(0,n.Clamp)((0,b.h)(N[a+1])),e[F+2]=255*(0,n.Clamp)((0,b.h)(N[a+2])),B.StoreLODInAlphaChannel?e[F+3]=k:e[F+3]=255*(0,n.Clamp)((0,b.h)(N[a+3])),F+=4}return e}static _GetRGBAArrayBuffer(g,i,a,n,L,d,b,k,e){const N=new Uint8Array(n),F=new Uint8Array(L,a);let I=0;for(let j=0;j<i;j++)for(let i=0;i<g;i++){const a=4*(i+j*g);N[I]=F[a+d],N[I+1]=F[a+b],N[I+2]=F[a+k],N[I+3]=F[a+e],I+=4}return N}static _ExtractLongWordOrder(g){return 0===g||255===g||-16777216===g?0:1+B._ExtractLongWordOrder(g>>8)}static _GetRGBArrayBuffer(g,i,a,n,L,d,b,k){const e=new Uint8Array(n),N=new Uint8Array(L,a);let F=0;for(let I=0;I<i;I++)for(let i=0;i<g;i++){const a=3*(i+I*g);e[F]=N[a+d],e[F+1]=N[a+b],e[F+2]=N[a+k],F+=3}return e}static _GetLuminanceArrayBuffer(g,i,a,n,L){const d=new Uint8Array(n),b=new Uint8Array(L,a);let k=0;for(let e=0;e<i;e++)for(let i=0;i<g;i++){const a=i+e*g;d[k]=b[a],k++}return d}static UploadDDSLevels(g,i,a,n,b,e){let N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,c=arguments.length>7?arguments[7]:void 0,D=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],p=null;n.sphericalPolynomial&&(p=[]);const R=!!g.getCaps().s3tc;i.generateMipMaps=b;const x=new Int32Array(a.buffer,a.byteOffset,31);let E,X,v,P,Y,f,C,U=0,S=0,V=1;if(542327876!==x[0])return void L.b.Error("Invalid magic number in DDS header");if(!n.isFourCC&&!n.isRGB&&!n.isLuminance)return void L.b.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");if(n.isCompressed&&!R)return void L.b.Error("Compressed textures are not supported on this platform.");let K=x[22];P=x[1]+4;let T=!1;if(n.isFourCC)switch(E=x[21],E){case F:V=8,S=33777;break;case I:V=16,S=33778;break;case j:V=16,S=33779;break;case 113:T=!0,K=64;break;case 116:T=!0,K=128;break;case y:{P+=20;let g=!1;switch(n.dxgiFormat){case 10:T=!0,K=64,g=!0;break;case 2:T=!0,K=128,g=!0;break;case 88:n.isRGB=!0,n.isFourCC=!1,K=32,g=!0}if(g)break}default:return void L.b.Error(["Unsupported FourCC code:",(l=E,String.fromCharCode(255&l,l>>8&255,l>>16&255,l>>24&255))])}var l;const Z=B._ExtractLongWordOrder(x[23]),h=B._ExtractLongWordOrder(x[24]),w=B._ExtractLongWordOrder(x[25]),t=B._ExtractLongWordOrder(x[26]);T&&(S=g._getRGBABufferInternalSizedFormat(n.textureType)),f=1,x[2]&k&&!1!==b&&(f=Math.max(1,x[7]));const A=c||0,O=g.getCaps();for(let L=A;L<e;L++){for(X=x[4],v=x[3],C=0;C<f;++C){if(-1===N||N===C){const d=-1===N?C:0;if(!n.isCompressed&&n.isFourCC){i.format=5,U=X*v*4;let n=null;if(g._badOS||g._badDesktopOS||!O.textureHalfFloat&&!O.textureFloat)128===K?(n=B._GetFloatAsUIntRGBAArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,d),p&&0==d&&p.push(B._GetFloatRGBAArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,d))):64===K&&(n=B._GetHalfFloatAsUIntRGBAArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,d),p&&0==d&&p.push(B._GetHalfFloatAsFloatRGBAArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,d))),i.type=0;else{const g=O.textureFloat&&(D&&O.textureFloatLinearFiltering||!D),L=O.textureHalfFloat&&(D&&O.textureHalfFloatLinearFiltering||!D),b=(128===K||64===K&&!L)&&g?1:(64===K||128===K&&!g)&&L?2:0;let k,e=null;if(128===K)switch(b){case 1:k=B._GetFloatRGBAArrayBuffer,e=null;break;case 2:k=B._GetFloatAsHalfFloatRGBAArrayBuffer,e=B._GetFloatRGBAArrayBuffer;break;case 0:k=B._GetFloatAsUIntRGBAArrayBuffer,e=B._GetFloatRGBAArrayBuffer}else switch(b){case 1:k=B._GetHalfFloatAsFloatRGBAArrayBuffer,e=null;break;case 2:k=B._GetHalfFloatRGBAArrayBuffer,e=B._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:k=B._GetHalfFloatAsUIntRGBAArrayBuffer,e=B._GetHalfFloatAsFloatRGBAArrayBuffer}i.type=b,n=k(X,v,a.byteOffset+P,U,a.buffer,d),p&&0==d&&p.push(e?e(X,v,a.byteOffset+P,U,a.buffer,d):n)}n&&g._uploadDataToTextureDirectly(i,n,L,d)}else if(n.isRGB)i.type=0,24===K?(i.format=4,U=X*v*3,Y=B._GetRGBArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,Z,h,w),g._uploadDataToTextureDirectly(i,Y,L,d)):(i.format=5,U=X*v*4,Y=B._GetRGBAArrayBuffer(X,v,a.byteOffset+P,U,a.buffer,Z,h,w,t),g._uploadDataToTextureDirectly(i,Y,L,d));else if(n.isLuminance){const n=g._getUnpackAlignement(),b=X;U=Math.floor((X+n-1)/n)*n*(v-1)+b,Y=B._GetLuminanceArrayBuffer(X,v,a.byteOffset+P,U,a.buffer),i.format=1,i.type=0,g._uploadDataToTextureDirectly(i,Y,L,d)}else U=Math.max(4,X)/4*Math.max(4,v)/4*V,Y=new Uint8Array(a.buffer,a.byteOffset+P,U),i.type=0,g._uploadCompressedDataToTextureDirectly(i,S,X,v,Y,L,d)}P+=K?X*v*(K/8):U,X*=.5,v*=.5,X=Math.max(1,X),v=Math.max(1,v)}if(void 0!==c)break}p&&p.length>0?n.sphericalPolynomial=d.c.ConvertCubeMapToSphericalPolynomial({size:x[4],right:p[0],left:p[1],up:p[2],down:p[3],front:p[4],back:p[5],format:5,type:1,gammaSpace:!1}):n.sphericalPolynomial=void 0}}B.StoreLODInAlphaChannel=!1}}]);