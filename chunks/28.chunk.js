"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[28],{13200:(z,u,Y)=>{Y.r(u),Y.d(u,{_IESTextureLoader:()=>T});var H=Y(10937);function E(z){return z.split(" ").filter((z=>""!==z)).map((z=>parseFloat(z)))}function J(z,u,Y){for(;Y.length!==u;){const u=E(z.lines[z.index++]);Y.push(...u)}}function l(z,u,Y){let E=0,J=0,l=0,T=0,b=0,L=0;for(let H=0;H<z.numberOfHorizontalAngles-1;H++)if(Y<z.horizontalAngles[H+1]||H===z.numberOfHorizontalAngles-2){J=H,l=z.horizontalAngles[H],T=z.horizontalAngles[H+1];break}for(let H=0;H<z.numberOfVerticalAngles-1;H++)if(u<z.verticalAngles[H+1]||H===z.numberOfVerticalAngles-2){E=H,b=z.verticalAngles[H],L=z.verticalAngles[H+1];break}const D=T-l,g=L-b;if(0===g)return 0;const M=0===D?0:(Y-l)/D,q=(u-b)/g,C=0===D?J:J+1,K=(0,H.Lerp)(z.candelaValues[J][E],z.candelaValues[C][E],M),h=(0,H.Lerp)(z.candelaValues[J][E+1],z.candelaValues[C][E+1],M);return(0,H.Lerp)(K,h,q)}class T{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(z,u,Y){const H=function(z){const u={lines:new TextDecoder("utf-8").decode(z).split("\n"),index:0},Y={version:u.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(u.index=1;u.lines.length>0&&!u.lines[u.index].includes("TILT=");)u.index++;u.lines[u.index].includes("INCLUDE"),u.index++;const H=E(u.lines[u.index++]);Y.numberOfLights=H[0],Y.lumensPerLamp=H[1],Y.candelaMultiplier=H[2],Y.numberOfVerticalAngles=H[3],Y.numberOfHorizontalAngles=H[4],Y.photometricType=H[5],Y.unitsType=H[6],Y.width=H[7],Y.length=H[8],Y.height=H[9];const T=E(u.lines[u.index++]);Y.ballastFactor=T[0],Y.fileGenerationType=T[1],Y.inputWatts=T[2];for(let E=0;E<Y.numberOfHorizontalAngles;E++)Y.candelaValues[E]=[];J(u,Y.numberOfVerticalAngles,Y.verticalAngles),J(u,Y.numberOfHorizontalAngles,Y.horizontalAngles);for(let E=0;E<Y.numberOfHorizontalAngles;E++)J(u,Y.numberOfVerticalAngles,Y.candelaValues[E]);let b=-1;for(let E=0;E<Y.numberOfHorizontalAngles;E++)for(let z=0;z<Y.numberOfVerticalAngles;z++)Y.candelaValues[E][z]*=Y.candelaValues[E][z]*Y.candelaMultiplier*Y.ballastFactor*Y.fileGenerationType,b=Math.max(b,Y.candelaValues[E][z]);if(b>0)for(let E=0;E<Y.numberOfHorizontalAngles;E++)for(let z=0;z<Y.numberOfVerticalAngles;z++)Y.candelaValues[E][z]/=b;const L=180,D=360,g=new Float32Array(64800),M=Y.horizontalAngles[0],q=Y.horizontalAngles[Y.numberOfHorizontalAngles-1];for(let E=0;E<64800;E++){let z=E%D;const u=Math.floor(E/D);q-M!==0&&(z<M||z>=q)&&(z%=2*q,z>q&&(z=2*q-z)),g[u+z*L]=l(Y,u,z)}return{width:180,height:1,data:g}}(new Uint8Array(z.buffer,z.byteOffset,z.byteLength));Y(H.width,H.height,!1,!1,(()=>{const z=u.getEngine();u.type=1,u.format=6,u._gammaSpace=!1,z._uploadDataToTextureDirectly(u,H.data)}))}}}}]);