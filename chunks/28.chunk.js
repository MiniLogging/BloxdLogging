"use strict";(self.irtrrknfyfo=self.irtrrknfyfo||[]).push([[28,29],{13069:(B,E,v)=>{var z=v(11323),o=v(11213),q=v(11249),c=v(11351),S=v(11282),x=v(11334);S.b.prototype._partialLoadFile=function(B,E,v,z){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._loadFile(B,(B=>{v[E]=B,v._internalCount++,6===v._internalCount&&z(v)}),void 0,void 0,!0,((B,E)=>{o&&B&&o(B.status+" "+B.statusText,E)}))},S.b.prototype._cascadeLoadFiles=function(B,E,v){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=[];o._internalCount=0;for(let q=0;q<6;q++)this._partialLoadFile(v[q],q,o,E,z)},S.b.prototype._cascadeLoadImgs=function(B,E,v,z){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,q=arguments.length>5?arguments[5]:void 0;const c=[];c._internalCount=0;for(let S=0;S<6;S++)this._partialLoadImg(z[S],S,c,B,E,v,o,q)},S.b.prototype._partialLoadImg=function(B,E,v,z,o,S){let x=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,D=arguments.length>7?arguments[7]:void 0;const h=(0,c.c)();(0,q.t)(B,(B=>{v[E]=B,v._internalCount++,z&&z.removePendingData(h),6===v._internalCount&&S&&S(o,v)}),((B,E)=>{z&&z.removePendingData(h),x&&x(B,E)}),z?z.offlineProvider:null,D),z&&z.addPendingData(h)},S.b.prototype.createCubeTextureBase=function(B,E,v,q){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,D=arguments.length>6?arguments[6]:void 0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],Q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,P=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,G=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Y=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,a=arguments.length>13&&void 0!==arguments[13]?arguments[13]:null,m=arguments.length>14&&void 0!==arguments[14]&&arguments[14],g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:null;const V=G||new z.b(this,7);V.isCube=!0,V.url=B,V.generateMipMaps=!q,V._lodGenerationScale=Q,V._lodGenerationOffset=P,V._useSRGBBuffer=!!m&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!q),V!==G&&(V.label=B.substring(0,60)),this._doNotHandleContextLost||(V._extension=h,V._files=v,V._buffer=g);const T=B;this._transformTextureUrl&&!G&&(B=this._transformTextureUrl(B));const N=h??function(B){const E=B.split("?")[0],v=E.lastIndexOf(".");return v>-1?E.substring(v).toLowerCase():""}(B),X=(0,x.e)(N),r=(B,E)=>{V.dispose(),S?S(B,E):B&&o.c.Warn(B)},i=(z,S)=>{B===T?z&&r(z.status+" "+z.statusText,S):(o.c.Warn(`Failed to load ${B}, falling back to the ${T}`),this.createCubeTextureBase(T,E,v,!!q,c,r,D,h,y,Q,P,V,Y,a,m,g))};if(X)X.then((z=>{const o=B=>{Y&&Y(V,B),z.loadCubeData(B,V,y,c,((B,E)=>{r(B,E)}))};g?o(g):v&&6===v.length?z.supportCascades?this._cascadeLoadFiles(E,(B=>o(B.map((B=>new Uint8Array(B))))),v,r):r("Textures type does not support cascades."):this._loadFile(B,(B=>o(new Uint8Array(B))),void 0,void 0,!0,i)}));else{if(!v||0===v.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(E,V,((B,E)=>{a&&a(B,E)}),v,r)}return this._internalTexturesCache.push(V),V}},13801:(B,E,v)=>{v.r(E),v.d(E,{_DDSTextureLoader:()=>q});var z=v(11552),o=v(13806);class q{constructor(){this.supportCascades=!0}loadCubeData(B,E,v,q){const c=E.getEngine();let S,x=!1,D=1e3;if(Array.isArray(B))for(let z=0;z<B.length;z++){const v=B[z];S=o.DDSTools.GetDDSInfo(v),E.width=S.width,E.height=S.height,x=(S.isRGB||S.isLuminance||S.mipmapCount>1)&&E.generateMipMaps,c._unpackFlipY(S.isCompressed),o.DDSTools.UploadDDSLevels(c,E,v,S,x,6,-1,z),S.isFourCC||1!==S.mipmapCount?D=S.mipmapCount-1:c.generateMipMapsForCubemap(E)}else{const q=B;S=o.DDSTools.GetDDSInfo(q),E.width=S.width,E.height=S.height,v&&(S.sphericalPolynomial=new z.g),x=(S.isRGB||S.isLuminance||S.mipmapCount>1)&&E.generateMipMaps,c._unpackFlipY(S.isCompressed),o.DDSTools.UploadDDSLevels(c,E,q,S,x,6),S.isFourCC||1!==S.mipmapCount?D=S.mipmapCount-1:c.generateMipMapsForCubemap(E,!1)}c._setCubeMapTextureParams(E,x,D),E.isReady=!0,E.onLoadedObservable.notifyObservers(E),E.onLoadedObservable.clear(),q&&q({isDDS:!0,width:E.width,info:S,data:B,texture:E})}loadData(B,E,v){const z=o.DDSTools.GetDDSInfo(B),q=(z.isRGB||z.isLuminance||z.mipmapCount>1)&&E.generateMipMaps&&Math.max(z.width,z.height)>>z.mipmapCount-1===1;v(z.width,z.height,q,z.isFourCC,(()=>{o.DDSTools.UploadDDSLevels(E.getEngine(),E,B,z,q,1)}))}}},11901:(B,E,v)=>{v.d(E,{d:()=>D});var z=v(11380),o=v(11394),q=v(11552),c=v(11382),S=v(11417);class x{constructor(B,E,v,z){this.name=B,this.worldAxisForNormal=E,this.worldAxisForFileX=v,this.worldAxisForFileY=z}}class D{static ConvertCubeMapTextureToSphericalPolynomial(B){var E;if(!B.isCube)return null;null===(E=B.rB())||void 0===E||E.getEngine().flushFramebuffer();const v=B.getSize().width,z=B.readPixels(0,void 0,void 0,!1),o=B.readPixels(1,void 0,void 0,!1);let q,c;B.isRenderTarget?(q=B.readPixels(3,void 0,void 0,!1),c=B.readPixels(2,void 0,void 0,!1)):(q=B.readPixels(2,void 0,void 0,!1),c=B.readPixels(3,void 0,void 0,!1));const S=B.readPixels(4,void 0,void 0,!1),x=B.readPixels(5,void 0,void 0,!1),D=B.gammaSpace;let h=0;return 1!=B.textureType&&2!=B.textureType||(h=1),new Promise((B=>{Promise.all([o,z,q,c,S,x]).then((E=>{let[z,o,q,c,S,x]=E;const y={size:v,right:o,left:z,up:q,down:c,front:S,back:x,format:5,type:h,gammaSpace:D};B(this.ConvertCubeMapToSphericalPolynomial(y))}))}))}static _AreaElement(B,E){return Math.atan2(B*E,Math.sqrt(B*B+E*E+1))}static ConvertCubeMapToSphericalPolynomial(B){const E=new q.d;let v=0;const z=2/B.size,x=z,D=.5*z,h=D-1;for(let q=0;q<6;q++){const y=this._FileFaces[q],Q=B[y.name];let P=h;const G=5===B.format?4:3;for(let q=0;q<B.size;q++){let Y=h;for(let x=0;x<B.size;x++){const h=y.worldAxisForFileX.scale(Y).add(y.worldAxisForFileY.scale(P)).add(y.worldAxisForNormal);h.normalize();const a=this._AreaElement(Y-D,P-D)-this._AreaElement(Y-D,P+D)-this._AreaElement(Y+D,P-D)+this._AreaElement(Y+D,P+D);let m=Q[q*B.size*G+x*G+0],g=Q[q*B.size*G+x*G+1],V=Q[q*B.size*G+x*G+2];isNaN(m)&&(m=0),isNaN(g)&&(g=0),isNaN(V)&&(V=0),0===B.type&&(m/=255,g/=255,V/=255),B.gammaSpace&&(m=Math.pow((0,o.Clamp)(m),c.j),g=Math.pow((0,o.Clamp)(g),c.j),V=Math.pow((0,o.Clamp)(V),c.j));const T=this.MAX_HDRI_VALUE;if(this.PRESERVE_CLAMPED_COLORS){const B=Math.max(m,g,V);if(B>T){const E=T/B;m*=E,g*=E,V*=E}}else m=(0,o.Clamp)(m,0,T),g=(0,o.Clamp)(g,0,T),V=(0,o.Clamp)(V,0,T);const N=new S.gE(m,g,V);E.addLight(h,N,a),v+=a,Y+=z}P+=x}}const y=6*(4*Math.PI)/6/v;return E.scaleInPlace(y),E.convertIncidentRadianceToIrradiance(),E.convertIrradianceToLambertianRadiance(),q.g.FromHarmonics(E)}}D._FileFaces=[new x("right",new z.GE(1,0,0),new z.GE(0,0,-1),new z.GE(0,-1,0)),new x("left",new z.GE(-1,0,0),new z.GE(0,0,1),new z.GE(0,-1,0)),new x("up",new z.GE(0,1,0),new z.GE(1,0,0),new z.GE(0,0,1)),new x("down",new z.GE(0,-1,0),new z.GE(1,0,0),new z.GE(0,0,-1)),new x("front",new z.GE(0,0,1),new z.GE(1,0,0),new z.GE(0,-1,0)),new x("back",new z.GE(0,0,-1),new z.GE(-1,0,0),new z.GE(0,-1,0))],D.MAX_HDRI_VALUE=4096,D.PRESERVE_CLAMPED_COLORS=!1},13806:(B,E,v)=>{v.d(E,{DDSTools:()=>G});var z=v(11394),o=v(11213),q=v(11901),c=v(11594);v(13069);const S=131072,x=131072;function D(B){return B.charCodeAt(0)+(B.charCodeAt(1)<<8)+(B.charCodeAt(2)<<16)+(B.charCodeAt(3)<<24)}const h=D("DXT1"),y=D("DXT3"),Q=D("DXT5"),P=D("DX10");class G{static GetDDSInfo(B){const E=new Int32Array(B.buffer,B.byteOffset,31),v=new Int32Array(B.buffer,B.byteOffset,35);let z=1;E[2]&S&&(z=Math.max(1,E[7]));const o=E[21],q=o===P?v[32]:0;let c=0;switch(o){case 113:c=2;break;case 116:c=1;break;case P:if(10===q){c=2;break}if(2===q){c=1;break}}return{width:E[4],height:E[3],mipmapCount:z,isFourCC:4===(4&E[20]),isRGB:64===(64&E[20]),isLuminance:(E[20]&x)===x,isCube:512===(512&E[28]),isCompressed:o===h||o===y||o===Q,dxgiFormat:q,textureType:c}}static _GetHalfFloatAsFloatRGBAArrayBuffer(B,E,v,z,o,q){const S=new Float32Array(z),x=new Uint16Array(o,v);let D=0;for(let h=0;h<E;h++)for(let E=0;E<B;E++){const v=4*(E+h*B);S[D]=(0,c.e)(x[v]),S[D+1]=(0,c.e)(x[v+1]),S[D+2]=(0,c.e)(x[v+2]),G.StoreLODInAlphaChannel?S[D+3]=q:S[D+3]=(0,c.e)(x[v+3]),D+=4}return S}static _GetHalfFloatRGBAArrayBuffer(B,E,v,z,o,q){if(G.StoreLODInAlphaChannel){const S=new Uint16Array(z),x=new Uint16Array(o,v);let D=0;for(let v=0;v<E;v++)for(let E=0;E<B;E++){const z=4*(E+v*B);S[D]=x[z],S[D+1]=x[z+1],S[D+2]=x[z+2],S[D+3]=(0,c.j)(q),D+=4}return S}return new Uint16Array(o,v,z)}static _GetFloatRGBAArrayBuffer(B,E,v,z,o,q){if(G.StoreLODInAlphaChannel){const c=new Float32Array(z),S=new Float32Array(o,v);let x=0;for(let v=0;v<E;v++)for(let E=0;E<B;E++){const z=4*(E+v*B);c[x]=S[z],c[x+1]=S[z+1],c[x+2]=S[z+2],c[x+3]=q,x+=4}return c}return new Float32Array(o,v,z)}static _GetFloatAsHalfFloatRGBAArrayBuffer(B,E,v,z,o,q){const S=new Uint16Array(z),x=new Float32Array(o,v);let D=0;for(let h=0;h<E;h++)for(let E=0;E<B;E++)S[D]=(0,c.j)(x[D]),S[D+1]=(0,c.j)(x[D+1]),S[D+2]=(0,c.j)(x[D+2]),G.StoreLODInAlphaChannel?S[D+3]=(0,c.j)(q):S[D+3]=(0,c.j)(x[D+3]),D+=4;return S}static _GetFloatAsUIntRGBAArrayBuffer(B,E,v,o,q,c){const S=new Uint8Array(o),x=new Float32Array(q,v);let D=0;for(let h=0;h<E;h++)for(let E=0;E<B;E++){const v=4*(E+h*B);S[D]=255*(0,z.Clamp)(x[v]),S[D+1]=255*(0,z.Clamp)(x[v+1]),S[D+2]=255*(0,z.Clamp)(x[v+2]),G.StoreLODInAlphaChannel?S[D+3]=c:S[D+3]=255*(0,z.Clamp)(x[v+3]),D+=4}return S}static _GetHalfFloatAsUIntRGBAArrayBuffer(B,E,v,o,q,S){const x=new Uint8Array(o),D=new Uint16Array(q,v);let h=0;for(let y=0;y<E;y++)for(let E=0;E<B;E++){const v=4*(E+y*B);x[h]=255*(0,z.Clamp)((0,c.e)(D[v])),x[h+1]=255*(0,z.Clamp)((0,c.e)(D[v+1])),x[h+2]=255*(0,z.Clamp)((0,c.e)(D[v+2])),G.StoreLODInAlphaChannel?x[h+3]=S:x[h+3]=255*(0,z.Clamp)((0,c.e)(D[v+3])),h+=4}return x}static _GetRGBAArrayBuffer(B,E,v,z,o,q,c,S,x){const D=new Uint8Array(z),h=new Uint8Array(o,v);let y=0;for(let Q=0;Q<E;Q++)for(let E=0;E<B;E++){const v=4*(E+Q*B);D[y]=h[v+q],D[y+1]=h[v+c],D[y+2]=h[v+S],D[y+3]=h[v+x],y+=4}return D}static _ExtractLongWordOrder(B){return 0===B||255===B||-16777216===B?0:1+G._ExtractLongWordOrder(B>>8)}static _GetRGBArrayBuffer(B,E,v,z,o,q,c,S){const x=new Uint8Array(z),D=new Uint8Array(o,v);let h=0;for(let y=0;y<E;y++)for(let E=0;E<B;E++){const v=3*(E+y*B);x[h]=D[v+q],x[h+1]=D[v+c],x[h+2]=D[v+S],h+=3}return x}static _GetLuminanceArrayBuffer(B,E,v,z,o){const q=new Uint8Array(z),c=new Uint8Array(o,v);let S=0;for(let x=0;x<E;x++)for(let E=0;E<B;E++){const v=E+x*B;q[S]=c[v],S++}return q}static UploadDDSLevels(B,E,v,z,c,x){let D=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,Y=arguments.length>7?arguments[7]:void 0,a=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],m=null;z.sphericalPolynomial&&(m=[]);const g=!!B.getCaps().s3tc;E.generateMipMaps=c;const V=new Int32Array(v.buffer,v.byteOffset,31);let T,N,X,r,i,u,I,K=0,C=0,f=1;if(542327876!==V[0])return void o.c.Error("Invalid magic number in DDS header");if(!z.isFourCC&&!z.isRGB&&!z.isLuminance)return void o.c.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");if(z.isCompressed&&!g)return void o.c.Error("Compressed textures are not supported on this platform.");let A=V[22];r=V[1]+4;let l=!1;if(z.isFourCC)switch(T=V[21],T){case h:f=8,C=33777;break;case y:f=16,C=33778;break;case Q:f=16,C=33779;break;case 113:l=!0,A=64;break;case 116:l=!0,A=128;break;case P:{r+=20;let B=!1;switch(z.dxgiFormat){case 10:l=!0,A=64,B=!0;break;case 2:l=!0,A=128,B=!0;break;case 88:z.isRGB=!0,z.isFourCC=!1,A=32,B=!0}if(B)break}default:return void o.c.Error(["Unsupported FourCC code:",(d=T,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))])}var d;const t=G._ExtractLongWordOrder(V[23]),p=G._ExtractLongWordOrder(V[24]),H=G._ExtractLongWordOrder(V[25]),j=G._ExtractLongWordOrder(V[26]);l&&(C=B._getRGBABufferInternalSizedFormat(z.textureType)),u=1,V[2]&S&&!1!==c&&(u=Math.max(1,V[7]));const R=Y||0,b=B.getCaps();for(let o=R;o<x;o++){for(N=V[4],X=V[3],I=0;I<u;++I){if(-1===D||D===I){const q=-1===D?I:0;if(!z.isCompressed&&z.isFourCC){E.format=5,K=N*X*4;let z=null;if(B._badOS||B._badDesktopOS||!b.textureHalfFloat&&!b.textureFloat)128===A?(z=G._GetFloatAsUIntRGBAArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,q),m&&0==q&&m.push(G._GetFloatRGBAArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,q))):64===A&&(z=G._GetHalfFloatAsUIntRGBAArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,q),m&&0==q&&m.push(G._GetHalfFloatAsFloatRGBAArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,q))),E.type=0;else{const B=b.textureFloat&&(a&&b.textureFloatLinearFiltering||!a),o=b.textureHalfFloat&&(a&&b.textureHalfFloatLinearFiltering||!a),c=(128===A||64===A&&!o)&&B?1:(64===A||128===A&&!B)&&o?2:0;let S,x=null;if(128===A)switch(c){case 1:S=G._GetFloatRGBAArrayBuffer,x=null;break;case 2:S=G._GetFloatAsHalfFloatRGBAArrayBuffer,x=G._GetFloatRGBAArrayBuffer;break;case 0:S=G._GetFloatAsUIntRGBAArrayBuffer,x=G._GetFloatRGBAArrayBuffer}else switch(c){case 1:S=G._GetHalfFloatAsFloatRGBAArrayBuffer,x=null;break;case 2:S=G._GetHalfFloatRGBAArrayBuffer,x=G._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:S=G._GetHalfFloatAsUIntRGBAArrayBuffer,x=G._GetHalfFloatAsFloatRGBAArrayBuffer}E.type=c,z=S(N,X,v.byteOffset+r,K,v.buffer,q),m&&0==q&&m.push(x?x(N,X,v.byteOffset+r,K,v.buffer,q):z)}z&&B._uploadDataToTextureDirectly(E,z,o,q)}else if(z.isRGB)E.type=0,24===A?(E.format=4,K=N*X*3,i=G._GetRGBArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,t,p,H),B._uploadDataToTextureDirectly(E,i,o,q)):(E.format=5,K=N*X*4,i=G._GetRGBAArrayBuffer(N,X,v.byteOffset+r,K,v.buffer,t,p,H,j),B._uploadDataToTextureDirectly(E,i,o,q));else if(z.isLuminance){const z=B._getUnpackAlignement(),c=N;K=Math.floor((N+z-1)/z)*z*(X-1)+c,i=G._GetLuminanceArrayBuffer(N,X,v.byteOffset+r,K,v.buffer),E.format=1,E.type=0,B._uploadDataToTextureDirectly(E,i,o,q)}else K=Math.max(4,N)/4*Math.max(4,X)/4*f,i=new Uint8Array(v.buffer,v.byteOffset+r,K),E.type=0,B._uploadCompressedDataToTextureDirectly(E,C,N,X,i,o,q)}r+=A?N*X*(A/8):K,N*=.5,X*=.5,N=Math.max(1,N),X=Math.max(1,X)}if(void 0!==Y)break}m&&m.length>0?z.sphericalPolynomial=q.d.ConvertCubeMapToSphericalPolynomial({size:V[4],right:m[0],left:m[1],up:m[2],down:m[3],front:m[4],back:m[5],format:5,type:1,gammaSpace:!1}):z.sphericalPolynomial=void 0}}G.StoreLODInAlphaChannel=!1}}]);