"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[28],{13622:(w,p,e)=>{e.r(p),e.d(p,{_IESTextureLoader:()=>q});var r=e(11063);function I(w){return w.split(" ").filter((w=>""!==w)).map((w=>parseFloat(w)))}function d(w,p,e){for(;e.length!==p;){const p=I(w.lines[w.index++]);e.push(...p)}}function f(w,p,e){let I=0,d=0,f=0,q=0,E=0,j=0;for(let r=0;r<w.numberOfHorizontalAngles-1;r++)if(e<w.horizontalAngles[r+1]||r===w.numberOfHorizontalAngles-2){d=r,f=w.horizontalAngles[r],q=w.horizontalAngles[r+1];break}for(let r=0;r<w.numberOfVerticalAngles-1;r++)if(p<w.verticalAngles[r+1]||r===w.numberOfVerticalAngles-2){I=r,E=w.verticalAngles[r],j=w.verticalAngles[r+1];break}const X=q-f,k=j-E;if(0===k)return 0;const m=0===X?0:(e-f)/X,J=(p-E)/k,K=0===X?d:d+1,y=(0,r.Lerp)(w.candelaValues[d][I],w.candelaValues[K][I],m),c=(0,r.Lerp)(w.candelaValues[d][I+1],w.candelaValues[K][I+1],m);return(0,r.Lerp)(y,c,J)}class q{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(w,p,e){const r=function(w){const p={lines:new TextDecoder("utf-8").decode(w).split("\n"),index:0},e={version:p.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(p.index=1;p.lines.length>0&&!p.lines[p.index].includes("TILT=");)p.index++;p.lines[p.index].includes("INCLUDE"),p.index++;const r=I(p.lines[p.index++]);e.numberOfLights=r[0],e.lumensPerLamp=r[1],e.candelaMultiplier=r[2],e.numberOfVerticalAngles=r[3],e.numberOfHorizontalAngles=r[4],e.photometricType=r[5],e.unitsType=r[6],e.width=r[7],e.length=r[8],e.height=r[9];const q=I(p.lines[p.index++]);e.ballastFactor=q[0],e.fileGenerationType=q[1],e.inputWatts=q[2];for(let I=0;I<e.numberOfHorizontalAngles;I++)e.candelaValues[I]=[];d(p,e.numberOfVerticalAngles,e.verticalAngles),d(p,e.numberOfHorizontalAngles,e.horizontalAngles);for(let I=0;I<e.numberOfHorizontalAngles;I++)d(p,e.numberOfVerticalAngles,e.candelaValues[I]);let E=-1;for(let I=0;I<e.numberOfHorizontalAngles;I++)for(let w=0;w<e.numberOfVerticalAngles;w++)e.candelaValues[I][w]*=e.candelaValues[I][w]*e.candelaMultiplier*e.ballastFactor*e.fileGenerationType,E=Math.max(E,e.candelaValues[I][w]);if(E>0)for(let I=0;I<e.numberOfHorizontalAngles;I++)for(let w=0;w<e.numberOfVerticalAngles;w++)e.candelaValues[I][w]/=E;const j=180,X=360,k=new Float32Array(64800),m=e.horizontalAngles[0],J=e.horizontalAngles[e.numberOfHorizontalAngles-1];for(let I=0;I<64800;I++){let w=I%X;const p=Math.floor(I/X);J-m!==0&&(w<m||w>=J)&&(w%=2*J,w>J&&(w=2*J-w)),k[p+w*j]=f(e,p,w)}return{width:180,height:1,data:k}}(new Uint8Array(w.buffer,w.byteOffset,w.byteLength));e(r.width,r.height,!1,!1,(()=>{const w=p.getEngine();p.type=1,p.format=6,p._gammaSpace=!1,w._uploadDataToTextureDirectly(p,r.data)}))}}}}]);