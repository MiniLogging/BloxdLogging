"use strict";(self.rsqbdnwe5e=self.rsqbdnwe5e||[]).push([[28,29],{14051:(N,p,T)=>{var A=T(12302),a=T(12205),C=T(12240),U=T(12333),X=T(12270),y=T(12314);X.c.prototype._partialLoadFile=function(N,p,T,A){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._loadFile(N,(N=>{T[p]=N,T._internalCount++,6===T._internalCount&&A(T)}),void 0,void 0,!0,((N,p)=>{a&&N&&a(N.status+" "+N.statusText,p)}))},X.c.prototype._cascadeLoadFiles=function(N,p,T){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const a=[];a._internalCount=0;for(let C=0;C<6;C++)this._partialLoadFile(T[C],C,a,p,A)},X.c.prototype._cascadeLoadImgs=function(N,p,T,A){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,C=arguments.length>5?arguments[5]:void 0;const U=[];U._internalCount=0;for(let X=0;X<6;X++)this._partialLoadImg(A[X],X,U,N,p,T,a,C)},X.c.prototype._partialLoadImg=function(N,p,T,A,a,X){let y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,e=arguments.length>7?arguments[7]:void 0;const H=(0,U.b)();(0,C.q)(N,(N=>{T[p]=N,T._internalCount++,A&&A.removePendingData(H),6===T._internalCount&&X&&X(a,T)}),((N,p)=>{A&&A.removePendingData(H),y&&y(N,p)}),A?A.offlineProvider:null,e),A&&A.addPendingData(H)},X.c.prototype.createCubeTextureBase=function(N,p,T,C){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,e=arguments.length>6?arguments[6]:void 0,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,M=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,k=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,x=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13&&void 0!==arguments[13]?arguments[13]:null,L=arguments.length>14&&void 0!==arguments[14]&&arguments[14],n=arguments.length>15&&void 0!==arguments[15]?arguments[15]:null;const w=k||new A.d(this,7);w.isCube=!0,w.url=N,w.generateMipMaps=!C,w._lodGenerationScale=b,w._lodGenerationOffset=l,w._useSRGBBuffer=!!L&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!C),w!==k&&(w.label=N.substring(0,60)),this._doNotHandleContextLost||(w._extension=H,w._files=T,w._buffer=n);const g=N;this._transformTextureUrl&&!k&&(N=this._transformTextureUrl(N));const P=H??function(N){const p=N.split("?")[0],T=p.lastIndexOf(".");return T>-1?p.substring(T).toLowerCase():""}(N),i=(0,y.e)(P),K=(N,p)=>{w.dispose(),X?X(N,p):N&&a.d.Warn(N)},F=(A,X)=>{N===g?A&&K(A.status+" "+A.statusText,X):(a.d.Warn(`Failed to load ${N}, falling back to the ${g}`),this.createCubeTextureBase(g,p,T,!!C,U,K,e,H,M,b,l,w,x,I,L,n))};if(i)i.then((A=>{const a=N=>{x&&x(w,N),A.loadCubeData(N,w,M,U,((N,p)=>{K(N,p)}))};n?a(n):T&&6===T.length?A.supportCascades?this._cascadeLoadFiles(p,(N=>a(N.map((N=>new Uint8Array(N))))),T,K):K("Textures type does not support cascades."):this._loadFile(N,(N=>a(new Uint8Array(N))),void 0,void 0,!0,F)}));else{if(!T||0===T.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(p,w,((N,p)=>{I&&I(N,p)}),T,K)}return this._internalTexturesCache.push(w),w}},14788:(N,p,T)=>{T.r(p),T.d(p,{_DDSTextureLoader:()=>C});var A=T(12564),a=T(14790);class C{constructor(){this.supportCascades=!0}loadCubeData(N,p,T,C){const U=p.getEngine();let X,y=!1,e=1e3;if(Array.isArray(N))for(let A=0;A<N.length;A++){const T=N[A];X=a.DDSTools.GetDDSInfo(T),p.width=X.width,p.height=X.height,y=(X.isRGB||X.isLuminance||X.mipmapCount>1)&&p.generateMipMaps,U._unpackFlipY(X.isCompressed),a.DDSTools.UploadDDSLevels(U,p,T,X,y,6,-1,A),X.isFourCC||1!==X.mipmapCount?e=X.mipmapCount-1:U.generateMipMapsForCubemap(p)}else{const C=N;X=a.DDSTools.GetDDSInfo(C),p.width=X.width,p.height=X.height,T&&(X.sphericalPolynomial=new A.f),y=(X.isRGB||X.isLuminance||X.mipmapCount>1)&&p.generateMipMaps,U._unpackFlipY(X.isCompressed),a.DDSTools.UploadDDSLevels(U,p,C,X,y,6),X.isFourCC||1!==X.mipmapCount?e=X.mipmapCount-1:U.generateMipMapsForCubemap(p,!1)}U._setCubeMapTextureParams(p,y,e),p.isReady=!0,p.onLoadedObservable.notifyObservers(p),p.onLoadedObservable.clear(),C&&C({isDDS:!0,width:p.width,info:X,data:N,texture:p})}loadData(N,p,T){const A=a.DDSTools.GetDDSInfo(N),C=(A.isRGB||A.isLuminance||A.mipmapCount>1)&&p.generateMipMaps&&Math.max(A.width,A.height)>>A.mipmapCount-1===1;T(A.width,A.height,C,A.isFourCC,(()=>{a.DDSTools.UploadDDSLevels(p.getEngine(),p,N,A,C,1)}))}}},12906:(N,p,T)=>{T.d(p,{b:()=>e});var A=T(12371),a=T(12390),C=T(12564),U=T(12376),X=T(12421);class y{constructor(N,p,T,A){this.name=N,this.worldAxisForNormal=p,this.worldAxisForFileX=T,this.worldAxisForFileY=A}}class e{static ConvertCubeMapTextureToSphericalPolynomial(N){var p;if(!N.isCube)return null;null===(p=N.KN())||void 0===p||p.getEngine().flushFramebuffer();const T=N.getSize().width,A=N.readPixels(0,void 0,void 0,!1),a=N.readPixels(1,void 0,void 0,!1);let C,U;N.isRenderTarget?(C=N.readPixels(3,void 0,void 0,!1),U=N.readPixels(2,void 0,void 0,!1)):(C=N.readPixels(2,void 0,void 0,!1),U=N.readPixels(3,void 0,void 0,!1));const X=N.readPixels(4,void 0,void 0,!1),y=N.readPixels(5,void 0,void 0,!1),e=N.gammaSpace;let H=0;return 1!=N.textureType&&2!=N.textureType||(H=1),new Promise((N=>{Promise.all([a,A,C,U,X,y]).then((p=>{let[A,a,C,U,X,y]=p;const M={size:T,right:a,left:A,up:C,down:U,front:X,back:y,format:5,type:H,gammaSpace:e};N(this.ConvertCubeMapToSphericalPolynomial(M))}))}))}static _AreaElement(N,p){return Math.atan2(N*p,Math.sqrt(N*N+p*p+1))}static ConvertCubeMapToSphericalPolynomial(N){const p=new C.d;let T=0;const A=2/N.size,y=A,e=.5*A,H=e-1;for(let C=0;C<6;C++){const M=this._FileFaces[C],b=N[M.name];let l=H;const k=5===N.format?4:3;for(let C=0;C<N.size;C++){let x=H;for(let y=0;y<N.size;y++){const H=M.worldAxisForFileX.scale(x).add(M.worldAxisForFileY.scale(l)).add(M.worldAxisForNormal);H.normalize();const I=this._AreaElement(x-e,l-e)-this._AreaElement(x-e,l+e)-this._AreaElement(x+e,l-e)+this._AreaElement(x+e,l+e);let L=b[C*N.size*k+y*k+0],n=b[C*N.size*k+y*k+1],w=b[C*N.size*k+y*k+2];isNaN(L)&&(L=0),isNaN(n)&&(n=0),isNaN(w)&&(w=0),0===N.type&&(L/=255,n/=255,w/=255),N.gammaSpace&&(L=Math.pow((0,a.Clamp)(L),U.k),n=Math.pow((0,a.Clamp)(n),U.k),w=Math.pow((0,a.Clamp)(w),U.k));const g=this.MAX_HDRI_VALUE;if(this.PRESERVE_CLAMPED_COLORS){const N=Math.max(L,n,w);if(N>g){const p=g/N;L*=p,n*=p,w*=p}}else L=(0,a.Clamp)(L,0,g),n=(0,a.Clamp)(n,0,g),w=(0,a.Clamp)(w,0,g);const P=new X.wp(L,n,w);p.addLight(H,P,I),T+=I,x+=A}l+=y}}const M=6*(4*Math.PI)/6/T;return p.scaleInPlace(M),p.convertIncidentRadianceToIrradiance(),p.convertIrradianceToLambertianRadiance(),C.f.FromHarmonics(p)}}e._FileFaces=[new y("right",new A.xp(1,0,0),new A.xp(0,0,-1),new A.xp(0,-1,0)),new y("left",new A.xp(-1,0,0),new A.xp(0,0,1),new A.xp(0,-1,0)),new y("up",new A.xp(0,1,0),new A.xp(1,0,0),new A.xp(0,0,1)),new y("down",new A.xp(0,-1,0),new A.xp(1,0,0),new A.xp(0,0,-1)),new y("front",new A.xp(0,0,1),new A.xp(1,0,0),new A.xp(0,-1,0)),new y("back",new A.xp(0,0,-1),new A.xp(-1,0,0),new A.xp(0,-1,0))],e.MAX_HDRI_VALUE=4096,e.PRESERVE_CLAMPED_COLORS=!1},14790:(N,p,T)=>{T.d(p,{DDSTools:()=>k});var A=T(12390),a=T(12205),C=T(12906),U=T(12608);T(14051);const X=131072,y=131072;function e(N){return N.charCodeAt(0)+(N.charCodeAt(1)<<8)+(N.charCodeAt(2)<<16)+(N.charCodeAt(3)<<24)}const H=e("DXT1"),M=e("DXT3"),b=e("DXT5"),l=e("DX10");class k{static GetDDSInfo(N){const p=new Int32Array(N.buffer,N.byteOffset,31),T=new Int32Array(N.buffer,N.byteOffset,35);let A=1;p[2]&X&&(A=Math.max(1,p[7]));const a=p[21],C=a===l?T[32]:0;let U=0;switch(a){case 113:U=2;break;case 116:U=1;break;case l:if(10===C){U=2;break}if(2===C){U=1;break}}return{width:p[4],height:p[3],mipmapCount:A,isFourCC:4===(4&p[20]),isRGB:64===(64&p[20]),isLuminance:(p[20]&y)===y,isCube:512===(512&p[28]),isCompressed:a===H||a===M||a===b,dxgiFormat:C,textureType:U}}static _GetHalfFloatAsFloatRGBAArrayBuffer(N,p,T,A,a,C){const X=new Float32Array(A),y=new Uint16Array(a,T);let e=0;for(let H=0;H<p;H++)for(let p=0;p<N;p++){const T=4*(p+H*N);X[e]=(0,U.c)(y[T]),X[e+1]=(0,U.c)(y[T+1]),X[e+2]=(0,U.c)(y[T+2]),k.StoreLODInAlphaChannel?X[e+3]=C:X[e+3]=(0,U.c)(y[T+3]),e+=4}return X}static _GetHalfFloatRGBAArrayBuffer(N,p,T,A,a,C){if(k.StoreLODInAlphaChannel){const X=new Uint16Array(A),y=new Uint16Array(a,T);let e=0;for(let T=0;T<p;T++)for(let p=0;p<N;p++){const A=4*(p+T*N);X[e]=y[A],X[e+1]=y[A+1],X[e+2]=y[A+2],X[e+3]=(0,U.n)(C),e+=4}return X}return new Uint16Array(a,T,A)}static _GetFloatRGBAArrayBuffer(N,p,T,A,a,C){if(k.StoreLODInAlphaChannel){const U=new Float32Array(A),X=new Float32Array(a,T);let y=0;for(let T=0;T<p;T++)for(let p=0;p<N;p++){const A=4*(p+T*N);U[y]=X[A],U[y+1]=X[A+1],U[y+2]=X[A+2],U[y+3]=C,y+=4}return U}return new Float32Array(a,T,A)}static _GetFloatAsHalfFloatRGBAArrayBuffer(N,p,T,A,a,C){const X=new Uint16Array(A),y=new Float32Array(a,T);let e=0;for(let H=0;H<p;H++)for(let p=0;p<N;p++)X[e]=(0,U.n)(y[e]),X[e+1]=(0,U.n)(y[e+1]),X[e+2]=(0,U.n)(y[e+2]),k.StoreLODInAlphaChannel?X[e+3]=(0,U.n)(C):X[e+3]=(0,U.n)(y[e+3]),e+=4;return X}static _GetFloatAsUIntRGBAArrayBuffer(N,p,T,a,C,U){const X=new Uint8Array(a),y=new Float32Array(C,T);let e=0;for(let H=0;H<p;H++)for(let p=0;p<N;p++){const T=4*(p+H*N);X[e]=255*(0,A.Clamp)(y[T]),X[e+1]=255*(0,A.Clamp)(y[T+1]),X[e+2]=255*(0,A.Clamp)(y[T+2]),k.StoreLODInAlphaChannel?X[e+3]=U:X[e+3]=255*(0,A.Clamp)(y[T+3]),e+=4}return X}static _GetHalfFloatAsUIntRGBAArrayBuffer(N,p,T,a,C,X){const y=new Uint8Array(a),e=new Uint16Array(C,T);let H=0;for(let M=0;M<p;M++)for(let p=0;p<N;p++){const T=4*(p+M*N);y[H]=255*(0,A.Clamp)((0,U.c)(e[T])),y[H+1]=255*(0,A.Clamp)((0,U.c)(e[T+1])),y[H+2]=255*(0,A.Clamp)((0,U.c)(e[T+2])),k.StoreLODInAlphaChannel?y[H+3]=X:y[H+3]=255*(0,A.Clamp)((0,U.c)(e[T+3])),H+=4}return y}static _GetRGBAArrayBuffer(N,p,T,A,a,C,U,X,y){const e=new Uint8Array(A),H=new Uint8Array(a,T);let M=0;for(let b=0;b<p;b++)for(let p=0;p<N;p++){const T=4*(p+b*N);e[M]=H[T+C],e[M+1]=H[T+U],e[M+2]=H[T+X],e[M+3]=H[T+y],M+=4}return e}static _ExtractLongWordOrder(N){return 0===N||255===N||-16777216===N?0:1+k._ExtractLongWordOrder(N>>8)}static _GetRGBArrayBuffer(N,p,T,A,a,C,U,X){const y=new Uint8Array(A),e=new Uint8Array(a,T);let H=0;for(let M=0;M<p;M++)for(let p=0;p<N;p++){const T=3*(p+M*N);y[H]=e[T+C],y[H+1]=e[T+U],y[H+2]=e[T+X],H+=3}return y}static _GetLuminanceArrayBuffer(N,p,T,A,a){const C=new Uint8Array(A),U=new Uint8Array(a,T);let X=0;for(let y=0;y<p;y++)for(let p=0;p<N;p++){const T=p+y*N;C[X]=U[T],X++}return C}static UploadDDSLevels(N,p,T,A,U,y){let e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,x=arguments.length>7?arguments[7]:void 0,I=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],L=null;A.sphericalPolynomial&&(L=[]);const n=!!N.getCaps().s3tc;p.generateMipMaps=U;const w=new Int32Array(T.buffer,T.byteOffset,31);let g,P,i,K,F,v,W,z=0,R=0,J=1;if(542327876!==w[0])return void a.d.Error("Invalid magic number in DDS header");if(!A.isFourCC&&!A.isRGB&&!A.isLuminance)return void a.d.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");if(A.isCompressed&&!n)return void a.d.Error("Compressed textures are not supported on this platform.");let f=w[22];K=w[1]+4;let G=!1;if(A.isFourCC)switch(g=w[21],g){case H:J=8,R=33777;break;case M:J=16,R=33778;break;case b:J=16,R=33779;break;case 113:G=!0,f=64;break;case 116:G=!0,f=128;break;case l:{K+=20;let N=!1;switch(A.dxgiFormat){case 10:G=!0,f=64,N=!0;break;case 2:G=!0,f=128,N=!0;break;case 88:A.isRGB=!0,A.isFourCC=!1,f=32,N=!0}if(N)break}default:return void a.d.Error(["Unsupported FourCC code:",(o=g,String.fromCharCode(255&o,o>>8&255,o>>16&255,o>>24&255))])}var o;const Z=k._ExtractLongWordOrder(w[23]),mN=k._ExtractLongWordOrder(w[24]),q=k._ExtractLongWordOrder(w[25]),h=k._ExtractLongWordOrder(w[26]);G&&(R=N._getRGBABufferInternalSizedFormat(A.textureType)),v=1,w[2]&X&&!1!==U&&(v=Math.max(1,w[7]));const j=x||0,V=N.getCaps();for(let a=j;a<y;a++){for(P=w[4],i=w[3],W=0;W<v;++W){if(-1===e||e===W){const C=-1===e?W:0;if(!A.isCompressed&&A.isFourCC){p.format=5,z=P*i*4;let A=null;if(N._badOS||N._badDesktopOS||!V.textureHalfFloat&&!V.textureFloat)128===f?(A=k._GetFloatAsUIntRGBAArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,C),L&&0==C&&L.push(k._GetFloatRGBAArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,C))):64===f&&(A=k._GetHalfFloatAsUIntRGBAArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,C),L&&0==C&&L.push(k._GetHalfFloatAsFloatRGBAArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,C))),p.type=0;else{const N=V.textureFloat&&(I&&V.textureFloatLinearFiltering||!I),a=V.textureHalfFloat&&(I&&V.textureHalfFloatLinearFiltering||!I),U=(128===f||64===f&&!a)&&N?1:(64===f||128===f&&!N)&&a?2:0;let X,y=null;if(128===f)switch(U){case 1:X=k._GetFloatRGBAArrayBuffer,y=null;break;case 2:X=k._GetFloatAsHalfFloatRGBAArrayBuffer,y=k._GetFloatRGBAArrayBuffer;break;case 0:X=k._GetFloatAsUIntRGBAArrayBuffer,y=k._GetFloatRGBAArrayBuffer}else switch(U){case 1:X=k._GetHalfFloatAsFloatRGBAArrayBuffer,y=null;break;case 2:X=k._GetHalfFloatRGBAArrayBuffer,y=k._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:X=k._GetHalfFloatAsUIntRGBAArrayBuffer,y=k._GetHalfFloatAsFloatRGBAArrayBuffer}p.type=U,A=X(P,i,T.byteOffset+K,z,T.buffer,C),L&&0==C&&L.push(y?y(P,i,T.byteOffset+K,z,T.buffer,C):A)}A&&N._uploadDataToTextureDirectly(p,A,a,C)}else if(A.isRGB)p.type=0,24===f?(p.format=4,z=P*i*3,F=k._GetRGBArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,Z,mN,q),N._uploadDataToTextureDirectly(p,F,a,C)):(p.format=5,z=P*i*4,F=k._GetRGBAArrayBuffer(P,i,T.byteOffset+K,z,T.buffer,Z,mN,q,h),N._uploadDataToTextureDirectly(p,F,a,C));else if(A.isLuminance){const A=N._getUnpackAlignement(),U=P;z=Math.floor((P+A-1)/A)*A*(i-1)+U,F=k._GetLuminanceArrayBuffer(P,i,T.byteOffset+K,z,T.buffer),p.format=1,p.type=0,N._uploadDataToTextureDirectly(p,F,a,C)}else z=Math.max(4,P)/4*Math.max(4,i)/4*J,F=new Uint8Array(T.buffer,T.byteOffset+K,z),p.type=0,N._uploadCompressedDataToTextureDirectly(p,R,P,i,F,a,C)}K+=f?P*i*(f/8):z,P*=.5,i*=.5,P=Math.max(1,P),i=Math.max(1,i)}if(void 0!==x)break}L&&L.length>0?A.sphericalPolynomial=C.b.ConvertCubeMapToSphericalPolynomial({size:w[4],right:L[0],left:L[1],up:L[2],down:L[3],front:L[4],back:L[5],format:5,type:1,gammaSpace:!1}):A.sphericalPolynomial=void 0}}k.StoreLODInAlphaChannel=!1}}]);