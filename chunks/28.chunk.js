"use strict";(self.hmihoa2fs98=self.hmihoa2fs98||[]).push([[28,29],{13341:(b,d,P)=>{var G=P(11619),W=P(11504),i=P(11539),q=P(11643),C=P(11574),J=P(11631);C.e.prototype._partialLoadFile=function(b,d,P,G){let W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._loadFile(b,(b=>{P[d]=b,P._internalCount++,6===P._internalCount&&G(P)}),void 0,void 0,!0,((b,d)=>{W&&b&&W(b.status+" "+b.statusText,d)}))},C.e.prototype._cascadeLoadFiles=function(b,d,P){let G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const W=[];W._internalCount=0;for(let i=0;i<6;i++)this._partialLoadFile(P[i],i,W,d,G)},C.e.prototype._cascadeLoadImgs=function(b,d,P,G){let W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5?arguments[5]:void 0;const q=[];q._internalCount=0;for(let C=0;C<6;C++)this._partialLoadImg(G[C],C,q,b,d,P,W,i)},C.e.prototype._partialLoadImg=function(b,d,P,G,W,C){let J=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,L=arguments.length>7?arguments[7]:void 0;const x=(0,q.e)();(0,i.r)(b,(b=>{P[d]=b,P._internalCount++,G&&G.removePendingData(x),6===P._internalCount&&C&&C(W,P)}),((b,d)=>{G&&G.removePendingData(x),J&&J(b,d)}),G?G.offlineProvider:null,L),G&&G.addPendingData(x)},C.e.prototype.createCubeTextureBase=function(b,d,P,i){let q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,L=arguments.length>6?arguments[6]:void 0,x=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,Y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,E=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,w=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,t=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,r=arguments.length>13&&void 0!==arguments[13]?arguments[13]:null,B=arguments.length>14&&void 0!==arguments[14]&&arguments[14],n=arguments.length>15&&void 0!==arguments[15]?arguments[15]:null;const Z=w||new G.e(this,7);Z.isCube=!0,Z.url=b,Z.generateMipMaps=!i,Z._lodGenerationScale=s,Z._lodGenerationOffset=E,Z._useSRGBBuffer=!!B&&this._caps.supportSRGBBuffers&&(this.version>1||this.isWebGPU||!!i),Z!==w&&(Z.label=b.substring(0,60)),this._doNotHandleContextLost||(Z._extension=x,Z._files=P,Z._buffer=n);const o=b;this._transformTextureUrl&&!w&&(b=this._transformTextureUrl(b));const A=x??function(b){const d=b.split("?")[0],P=d.lastIndexOf(".");return P>-1?d.substring(P).toLowerCase():""}(b),f=(0,J.c)(A),g=(b,d)=>{Z.dispose(),C?C(b,d):b&&W.e.Warn(b)},X=(G,C)=>{b===o?G&&g(G.status+" "+G.statusText,C):(W.e.Warn(`Failed to load ${b}, falling back to the ${o}`),this.createCubeTextureBase(o,d,P,!!i,q,g,L,x,Y,s,E,Z,t,r,B,n))};if(f)f.then((G=>{const W=b=>{t&&t(Z,b),G.loadCubeData(b,Z,Y,q,((b,d)=>{g(b,d)}))};n?W(n):P&&6===P.length?G.supportCascades?this._cascadeLoadFiles(d,(b=>W(b.map((b=>new Uint8Array(b))))),P,g):g("Textures type does not support cascades."):this._loadFile(b,(b=>W(new Uint8Array(b))),void 0,void 0,!0,X)}));else{if(!P||0===P.length)throw new Error("Cannot load cubemap because files were not defined, or the correct loader was not found.");this._cascadeLoadImgs(d,Z,((b,d)=>{r&&r(b,d)}),P,g)}return this._internalTexturesCache.push(Z),Z}},14084:(b,d,P)=>{P.r(d),P.d(d,{_DDSTextureLoader:()=>i});var G=P(11858),W=P(14089);class i{constructor(){this.supportCascades=!0}loadCubeData(b,d,P,i){const q=d.getEngine();let C,J=!1,L=1e3;if(Array.isArray(b))for(let G=0;G<b.length;G++){const P=b[G];C=W.DDSTools.GetDDSInfo(P),d.width=C.width,d.height=C.height,J=(C.isRGB||C.isLuminance||C.mipmapCount>1)&&d.generateMipMaps,q._unpackFlipY(C.isCompressed),W.DDSTools.UploadDDSLevels(q,d,P,C,J,6,-1,G),C.isFourCC||1!==C.mipmapCount?L=C.mipmapCount-1:q.generateMipMapsForCubemap(d)}else{const i=b;C=W.DDSTools.GetDDSInfo(i),d.width=C.width,d.height=C.height,P&&(C.sphericalPolynomial=new G.g),J=(C.isRGB||C.isLuminance||C.mipmapCount>1)&&d.generateMipMaps,q._unpackFlipY(C.isCompressed),W.DDSTools.UploadDDSLevels(q,d,i,C,J,6),C.isFourCC||1!==C.mipmapCount?L=C.mipmapCount-1:q.generateMipMapsForCubemap(d,!1)}q._setCubeMapTextureParams(d,J,L),d.isReady=!0,d.onLoadedObservable.notifyObservers(d),d.onLoadedObservable.clear(),i&&i({isDDS:!0,width:d.width,info:C,data:b,texture:d})}loadData(b,d,P){const G=W.DDSTools.GetDDSInfo(b),i=(G.isRGB||G.isLuminance||G.mipmapCount>1)&&d.generateMipMaps&&Math.max(G.width,G.height)>>G.mipmapCount-1===1;P(G.width,G.height,i,G.isFourCC,(()=>{W.DDSTools.UploadDDSLevels(d.getEngine(),d,b,G,i,1)}))}}},12198:(b,d,P)=>{P.d(d,{e:()=>L});var G=P(11681),W=P(11700),i=P(11858),q=P(11688),C=P(11725);class J{constructor(b,d,P,G){this.name=b,this.worldAxisForNormal=d,this.worldAxisForFileX=P,this.worldAxisForFileY=G}}class L{static ConvertCubeMapTextureToSphericalPolynomial(b){var d;if(!b.isCube)return null;null===(d=b.Xb())||void 0===d||d.getEngine().flushFramebuffer();const P=b.getSize().width,G=b.readPixels(0,void 0,void 0,!1),W=b.readPixels(1,void 0,void 0,!1);let i,q;b.isRenderTarget?(i=b.readPixels(3,void 0,void 0,!1),q=b.readPixels(2,void 0,void 0,!1)):(i=b.readPixels(2,void 0,void 0,!1),q=b.readPixels(3,void 0,void 0,!1));const C=b.readPixels(4,void 0,void 0,!1),J=b.readPixels(5,void 0,void 0,!1),L=b.gammaSpace;let x=0;return 1!=b.textureType&&2!=b.textureType||(x=1),new Promise((b=>{Promise.all([W,G,i,q,C,J]).then((d=>{let[G,W,i,q,C,J]=d;const Y={size:P,right:W,left:G,up:i,down:q,front:C,back:J,format:5,type:x,gammaSpace:L};b(this.ConvertCubeMapToSphericalPolynomial(Y))}))}))}static _AreaElement(b,d){return Math.atan2(b*d,Math.sqrt(b*b+d*d+1))}static ConvertCubeMapToSphericalPolynomial(b){const d=new i.c;let P=0;const G=2/b.size,J=G,L=.5*G,x=L-1;for(let i=0;i<6;i++){const Y=this._FileFaces[i],s=b[Y.name];let E=x;const w=5===b.format?4:3;for(let i=0;i<b.size;i++){let t=x;for(let J=0;J<b.size;J++){const x=Y.worldAxisForFileX.scale(t).add(Y.worldAxisForFileY.scale(E)).add(Y.worldAxisForNormal);x.normalize();const r=this._AreaElement(t-L,E-L)-this._AreaElement(t-L,E+L)-this._AreaElement(t+L,E-L)+this._AreaElement(t+L,E+L);let B=s[i*b.size*w+J*w+0],n=s[i*b.size*w+J*w+1],Z=s[i*b.size*w+J*w+2];isNaN(B)&&(B=0),isNaN(n)&&(n=0),isNaN(Z)&&(Z=0),0===b.type&&(B/=255,n/=255,Z/=255),b.gammaSpace&&(B=Math.pow((0,W.Clamp)(B),q.j),n=Math.pow((0,W.Clamp)(n),q.j),Z=Math.pow((0,W.Clamp)(Z),q.j));const o=this.MAX_HDRI_VALUE;if(this.PRESERVE_CLAMPED_COLORS){const b=Math.max(B,n,Z);if(b>o){const d=o/b;B*=d,n*=d,Z*=d}}else B=(0,W.Clamp)(B,0,o),n=(0,W.Clamp)(n,0,o),Z=(0,W.Clamp)(Z,0,o);const A=new C.Nd(B,n,Z);d.addLight(x,A,r),P+=r,t+=G}E+=J}}const Y=6*(4*Math.PI)/6/P;return d.scaleInPlace(Y),d.convertIncidentRadianceToIrradiance(),d.convertIrradianceToLambertianRadiance(),i.g.FromHarmonics(d)}}L._FileFaces=[new J("right",new G.ed(1,0,0),new G.ed(0,0,-1),new G.ed(0,-1,0)),new J("left",new G.ed(-1,0,0),new G.ed(0,0,1),new G.ed(0,-1,0)),new J("up",new G.ed(0,1,0),new G.ed(1,0,0),new G.ed(0,0,1)),new J("down",new G.ed(0,-1,0),new G.ed(1,0,0),new G.ed(0,0,-1)),new J("front",new G.ed(0,0,1),new G.ed(1,0,0),new G.ed(0,-1,0)),new J("back",new G.ed(0,0,-1),new G.ed(-1,0,0),new G.ed(0,-1,0))],L.MAX_HDRI_VALUE=4096,L.PRESERVE_CLAMPED_COLORS=!1},14089:(b,d,P)=>{P.d(d,{DDSTools:()=>w});var G=P(11700),W=P(11504),i=P(12198),q=P(11898);P(13341);const C=131072,J=131072;function L(b){return b.charCodeAt(0)+(b.charCodeAt(1)<<8)+(b.charCodeAt(2)<<16)+(b.charCodeAt(3)<<24)}const x=L("DXT1"),Y=L("DXT3"),s=L("DXT5"),E=L("DX10");class w{static GetDDSInfo(b){const d=new Int32Array(b.buffer,b.byteOffset,31),P=new Int32Array(b.buffer,b.byteOffset,35);let G=1;d[2]&C&&(G=Math.max(1,d[7]));const W=d[21],i=W===E?P[32]:0;let q=0;switch(W){case 113:q=2;break;case 116:q=1;break;case E:if(10===i){q=2;break}if(2===i){q=1;break}}return{width:d[4],height:d[3],mipmapCount:G,isFourCC:4===(4&d[20]),isRGB:64===(64&d[20]),isLuminance:(d[20]&J)===J,isCube:512===(512&d[28]),isCompressed:W===x||W===Y||W===s,dxgiFormat:i,textureType:q}}static _GetHalfFloatAsFloatRGBAArrayBuffer(b,d,P,G,W,i){const C=new Float32Array(G),J=new Uint16Array(W,P);let L=0;for(let x=0;x<d;x++)for(let d=0;d<b;d++){const P=4*(d+x*b);C[L]=(0,q.c)(J[P]),C[L+1]=(0,q.c)(J[P+1]),C[L+2]=(0,q.c)(J[P+2]),w.StoreLODInAlphaChannel?C[L+3]=i:C[L+3]=(0,q.c)(J[P+3]),L+=4}return C}static _GetHalfFloatRGBAArrayBuffer(b,d,P,G,W,i){if(w.StoreLODInAlphaChannel){const C=new Uint16Array(G),J=new Uint16Array(W,P);let L=0;for(let P=0;P<d;P++)for(let d=0;d<b;d++){const G=4*(d+P*b);C[L]=J[G],C[L+1]=J[G+1],C[L+2]=J[G+2],C[L+3]=(0,q.h)(i),L+=4}return C}return new Uint16Array(W,P,G)}static _GetFloatRGBAArrayBuffer(b,d,P,G,W,i){if(w.StoreLODInAlphaChannel){const q=new Float32Array(G),C=new Float32Array(W,P);let J=0;for(let P=0;P<d;P++)for(let d=0;d<b;d++){const G=4*(d+P*b);q[J]=C[G],q[J+1]=C[G+1],q[J+2]=C[G+2],q[J+3]=i,J+=4}return q}return new Float32Array(W,P,G)}static _GetFloatAsHalfFloatRGBAArrayBuffer(b,d,P,G,W,i){const C=new Uint16Array(G),J=new Float32Array(W,P);let L=0;for(let x=0;x<d;x++)for(let d=0;d<b;d++)C[L]=(0,q.h)(J[L]),C[L+1]=(0,q.h)(J[L+1]),C[L+2]=(0,q.h)(J[L+2]),w.StoreLODInAlphaChannel?C[L+3]=(0,q.h)(i):C[L+3]=(0,q.h)(J[L+3]),L+=4;return C}static _GetFloatAsUIntRGBAArrayBuffer(b,d,P,W,i,q){const C=new Uint8Array(W),J=new Float32Array(i,P);let L=0;for(let x=0;x<d;x++)for(let d=0;d<b;d++){const P=4*(d+x*b);C[L]=255*(0,G.Clamp)(J[P]),C[L+1]=255*(0,G.Clamp)(J[P+1]),C[L+2]=255*(0,G.Clamp)(J[P+2]),w.StoreLODInAlphaChannel?C[L+3]=q:C[L+3]=255*(0,G.Clamp)(J[P+3]),L+=4}return C}static _GetHalfFloatAsUIntRGBAArrayBuffer(b,d,P,W,i,C){const J=new Uint8Array(W),L=new Uint16Array(i,P);let x=0;for(let Y=0;Y<d;Y++)for(let d=0;d<b;d++){const P=4*(d+Y*b);J[x]=255*(0,G.Clamp)((0,q.c)(L[P])),J[x+1]=255*(0,G.Clamp)((0,q.c)(L[P+1])),J[x+2]=255*(0,G.Clamp)((0,q.c)(L[P+2])),w.StoreLODInAlphaChannel?J[x+3]=C:J[x+3]=255*(0,G.Clamp)((0,q.c)(L[P+3])),x+=4}return J}static _GetRGBAArrayBuffer(b,d,P,G,W,i,q,C,J){const L=new Uint8Array(G),x=new Uint8Array(W,P);let Y=0;for(let s=0;s<d;s++)for(let d=0;d<b;d++){const P=4*(d+s*b);L[Y]=x[P+i],L[Y+1]=x[P+q],L[Y+2]=x[P+C],L[Y+3]=x[P+J],Y+=4}return L}static _ExtractLongWordOrder(b){return 0===b||255===b||-16777216===b?0:1+w._ExtractLongWordOrder(b>>8)}static _GetRGBArrayBuffer(b,d,P,G,W,i,q,C){const J=new Uint8Array(G),L=new Uint8Array(W,P);let x=0;for(let Y=0;Y<d;Y++)for(let d=0;d<b;d++){const P=3*(d+Y*b);J[x]=L[P+i],J[x+1]=L[P+q],J[x+2]=L[P+C],x+=3}return J}static _GetLuminanceArrayBuffer(b,d,P,G,W){const i=new Uint8Array(G),q=new Uint8Array(W,P);let C=0;for(let J=0;J<d;J++)for(let d=0;d<b;d++){const P=d+J*b;i[C]=q[P],C++}return i}static UploadDDSLevels(b,d,P,G,q,J){let L=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1,t=arguments.length>7?arguments[7]:void 0,r=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],B=null;G.sphericalPolynomial&&(B=[]);const n=!!b.getCaps().s3tc;d.generateMipMaps=q;const Z=new Int32Array(P.buffer,P.byteOffset,31);let o,A,f,g,X,u,M,e=0,R=0,U=1;if(542327876!==Z[0])return void W.e.Error("Invalid magic number in DDS header");if(!G.isFourCC&&!G.isRGB&&!G.isLuminance)return void W.e.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");if(G.isCompressed&&!n)return void W.e.Error("Compressed textures are not supported on this platform.");let H=Z[22];g=Z[1]+4;let p=!1;if(G.isFourCC)switch(o=Z[21],o){case x:U=8,R=33777;break;case Y:U=16,R=33778;break;case s:U=16,R=33779;break;case 113:p=!0,H=64;break;case 116:p=!0,H=128;break;case E:{g+=20;let b=!1;switch(G.dxgiFormat){case 10:p=!0,H=64,b=!0;break;case 2:p=!0,H=128,b=!0;break;case 88:G.isRGB=!0,G.isFourCC=!1,H=32,b=!0}if(b)break}default:return void W.e.Error(["Unsupported FourCC code:",(S=o,String.fromCharCode(255&S,S>>8&255,S>>16&255,S>>24&255))])}var S;const l=w._ExtractLongWordOrder(Z[23]),N=w._ExtractLongWordOrder(Z[24]),j=w._ExtractLongWordOrder(Z[25]),a=w._ExtractLongWordOrder(Z[26]);p&&(R=b._getRGBABufferInternalSizedFormat(G.textureType)),u=1,Z[2]&C&&!1!==q&&(u=Math.max(1,Z[7]));const O=t||0,V=b.getCaps();for(let W=O;W<J;W++){for(A=Z[4],f=Z[3],M=0;M<u;++M){if(-1===L||L===M){const i=-1===L?M:0;if(!G.isCompressed&&G.isFourCC){d.format=5,e=A*f*4;let G=null;if(b._badOS||b._badDesktopOS||!V.textureHalfFloat&&!V.textureFloat)128===H?(G=w._GetFloatAsUIntRGBAArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,i),B&&0==i&&B.push(w._GetFloatRGBAArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,i))):64===H&&(G=w._GetHalfFloatAsUIntRGBAArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,i),B&&0==i&&B.push(w._GetHalfFloatAsFloatRGBAArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,i))),d.type=0;else{const b=V.textureFloat&&(r&&V.textureFloatLinearFiltering||!r),W=V.textureHalfFloat&&(r&&V.textureHalfFloatLinearFiltering||!r),q=(128===H||64===H&&!W)&&b?1:(64===H||128===H&&!b)&&W?2:0;let C,J=null;if(128===H)switch(q){case 1:C=w._GetFloatRGBAArrayBuffer,J=null;break;case 2:C=w._GetFloatAsHalfFloatRGBAArrayBuffer,J=w._GetFloatRGBAArrayBuffer;break;case 0:C=w._GetFloatAsUIntRGBAArrayBuffer,J=w._GetFloatRGBAArrayBuffer}else switch(q){case 1:C=w._GetHalfFloatAsFloatRGBAArrayBuffer,J=null;break;case 2:C=w._GetHalfFloatRGBAArrayBuffer,J=w._GetHalfFloatAsFloatRGBAArrayBuffer;break;case 0:C=w._GetHalfFloatAsUIntRGBAArrayBuffer,J=w._GetHalfFloatAsFloatRGBAArrayBuffer}d.type=q,G=C(A,f,P.byteOffset+g,e,P.buffer,i),B&&0==i&&B.push(J?J(A,f,P.byteOffset+g,e,P.buffer,i):G)}G&&b._uploadDataToTextureDirectly(d,G,W,i)}else if(G.isRGB)d.type=0,24===H?(d.format=4,e=A*f*3,X=w._GetRGBArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,l,N,j),b._uploadDataToTextureDirectly(d,X,W,i)):(d.format=5,e=A*f*4,X=w._GetRGBAArrayBuffer(A,f,P.byteOffset+g,e,P.buffer,l,N,j,a),b._uploadDataToTextureDirectly(d,X,W,i));else if(G.isLuminance){const G=b._getUnpackAlignement(),q=A;e=Math.floor((A+G-1)/G)*G*(f-1)+q,X=w._GetLuminanceArrayBuffer(A,f,P.byteOffset+g,e,P.buffer),d.format=1,d.type=0,b._uploadDataToTextureDirectly(d,X,W,i)}else e=Math.max(4,A)/4*Math.max(4,f)/4*U,X=new Uint8Array(P.buffer,P.byteOffset+g,e),d.type=0,b._uploadCompressedDataToTextureDirectly(d,R,A,f,X,W,i)}g+=H?A*f*(H/8):e,A*=.5,f*=.5,A=Math.max(1,A),f=Math.max(1,f)}if(void 0!==t)break}B&&B.length>0?G.sphericalPolynomial=i.e.ConvertCubeMapToSphericalPolynomial({size:Z[4],right:B[0],left:B[1],up:B[2],down:B[3],front:B[4],back:B[5],format:5,type:1,gammaSpace:!1}):G.sphericalPolynomial=void 0}}w.StoreLODInAlphaChannel=!1}}]);