"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[28],{13411:(q,f,j)=>{j.r(f),j.d(f,{_IESTextureLoader:()=>Q});var d=j(10985);function g(q){return q.split(" ").filter((q=>""!==q)).map((q=>parseFloat(q)))}function h(q,f,j){for(;j.length!==f;){const f=g(q.lines[q.index++]);j.push(...f)}}function L(q,f,j){let g=0,h=0,L=0,Q=0,H=0,r=0;for(let d=0;d<q.numberOfHorizontalAngles-1;d++)if(j<q.horizontalAngles[d+1]||d===q.numberOfHorizontalAngles-2){h=d,L=q.horizontalAngles[d],Q=q.horizontalAngles[d+1];break}for(let d=0;d<q.numberOfVerticalAngles-1;d++)if(f<q.verticalAngles[d+1]||d===q.numberOfVerticalAngles-2){g=d,H=q.verticalAngles[d],r=q.verticalAngles[d+1];break}const u=Q-L,X=r-H;if(0===X)return 0;const z=0===u?0:(j-L)/u,B=(f-H)/X,D=0===u?h:h+1,i=(0,d.Lerp)(q.candelaValues[h][g],q.candelaValues[D][g],z),t=(0,d.Lerp)(q.candelaValues[h][g+1],q.candelaValues[D][g+1],z);return(0,d.Lerp)(i,t,B)}class Q{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(q,f,j){const d=function(q){const f={lines:new TextDecoder("utf-8").decode(q).split("\n"),index:0},j={version:f.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(f.index=1;f.lines.length>0&&!f.lines[f.index].includes("TILT=");)f.index++;f.lines[f.index].includes("INCLUDE"),f.index++;const d=g(f.lines[f.index++]);j.numberOfLights=d[0],j.lumensPerLamp=d[1],j.candelaMultiplier=d[2],j.numberOfVerticalAngles=d[3],j.numberOfHorizontalAngles=d[4],j.photometricType=d[5],j.unitsType=d[6],j.width=d[7],j.length=d[8],j.height=d[9];const Q=g(f.lines[f.index++]);j.ballastFactor=Q[0],j.fileGenerationType=Q[1],j.inputWatts=Q[2];for(let g=0;g<j.numberOfHorizontalAngles;g++)j.candelaValues[g]=[];h(f,j.numberOfVerticalAngles,j.verticalAngles),h(f,j.numberOfHorizontalAngles,j.horizontalAngles);for(let g=0;g<j.numberOfHorizontalAngles;g++)h(f,j.numberOfVerticalAngles,j.candelaValues[g]);let H=-1;for(let g=0;g<j.numberOfHorizontalAngles;g++)for(let q=0;q<j.numberOfVerticalAngles;q++)j.candelaValues[g][q]*=j.candelaValues[g][q]*j.candelaMultiplier*j.ballastFactor*j.fileGenerationType,H=Math.max(H,j.candelaValues[g][q]);if(H>0)for(let g=0;g<j.numberOfHorizontalAngles;g++)for(let q=0;q<j.numberOfVerticalAngles;q++)j.candelaValues[g][q]/=H;const r=180,u=360,X=new Float32Array(64800),z=j.horizontalAngles[0],B=j.horizontalAngles[j.numberOfHorizontalAngles-1];for(let g=0;g<64800;g++){let q=g%u;const f=Math.floor(g/u);B-z!==0&&(q<z||q>=B)&&(q%=2*B,q>B&&(q=2*B-q)),X[f+q*r]=L(j,f,q)}return{width:180,height:1,data:X}}(new Uint8Array(q.buffer,q.byteOffset,q.byteLength));j(d.width,d.height,!1,!1,(()=>{const q=f.getEngine();f.type=1,f.format=6,f._gammaSpace=!1,q._uploadDataToTextureDirectly(f,d.data)}))}}}}]);