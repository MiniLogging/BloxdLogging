"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[28],{13566:(Z,c,L)=>{L.r(c),L.d(c,{_IESTextureLoader:()=>V});var k=L(11032);function N(Z){return Z.split(" ").filter((Z=>""!==Z)).map((Z=>parseFloat(Z)))}function R(Z,c,L){for(;L.length!==c;){const c=N(Z.lines[Z.index++]);L.push(...c)}}function G(Z,c,L){let N=0,R=0,G=0,V=0,p=0,J=0;for(let k=0;k<Z.numberOfHorizontalAngles-1;k++)if(L<Z.horizontalAngles[k+1]||k===Z.numberOfHorizontalAngles-2){R=k,G=Z.horizontalAngles[k],V=Z.horizontalAngles[k+1];break}for(let k=0;k<Z.numberOfVerticalAngles-1;k++)if(c<Z.verticalAngles[k+1]||k===Z.numberOfVerticalAngles-2){N=k,p=Z.verticalAngles[k],J=Z.verticalAngles[k+1];break}const z=V-G,i=J-p;if(0===i)return 0;const t=0===z?0:(L-G)/z,E=(c-p)/i,x=0===z?R:R+1,q=(0,k.Lerp)(Z.candelaValues[R][N],Z.candelaValues[x][N],t),O=(0,k.Lerp)(Z.candelaValues[R][N+1],Z.candelaValues[x][N+1],t);return(0,k.Lerp)(q,O,E)}class V{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(Z,c,L){const k=function(Z){const c={lines:new TextDecoder("utf-8").decode(Z).split("\n"),index:0},L={version:c.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(c.index=1;c.lines.length>0&&!c.lines[c.index].includes("TILT=");)c.index++;c.lines[c.index].includes("INCLUDE"),c.index++;const k=N(c.lines[c.index++]);L.numberOfLights=k[0],L.lumensPerLamp=k[1],L.candelaMultiplier=k[2],L.numberOfVerticalAngles=k[3],L.numberOfHorizontalAngles=k[4],L.photometricType=k[5],L.unitsType=k[6],L.width=k[7],L.length=k[8],L.height=k[9];const V=N(c.lines[c.index++]);L.ballastFactor=V[0],L.fileGenerationType=V[1],L.inputWatts=V[2];for(let N=0;N<L.numberOfHorizontalAngles;N++)L.candelaValues[N]=[];R(c,L.numberOfVerticalAngles,L.verticalAngles),R(c,L.numberOfHorizontalAngles,L.horizontalAngles);for(let N=0;N<L.numberOfHorizontalAngles;N++)R(c,L.numberOfVerticalAngles,L.candelaValues[N]);let p=-1;for(let N=0;N<L.numberOfHorizontalAngles;N++)for(let Z=0;Z<L.numberOfVerticalAngles;Z++)L.candelaValues[N][Z]*=L.candelaValues[N][Z]*L.candelaMultiplier*L.ballastFactor*L.fileGenerationType,p=Math.max(p,L.candelaValues[N][Z]);if(p>0)for(let N=0;N<L.numberOfHorizontalAngles;N++)for(let Z=0;Z<L.numberOfVerticalAngles;Z++)L.candelaValues[N][Z]/=p;const J=180,z=360,i=new Float32Array(64800),t=L.horizontalAngles[0],E=L.horizontalAngles[L.numberOfHorizontalAngles-1];for(let N=0;N<64800;N++){let Z=N%z;const c=Math.floor(N/z);E-t!==0&&(Z<t||Z>=E)&&(Z%=2*E,Z>E&&(Z=2*E-Z)),i[c+Z*J]=G(L,c,Z)}return{width:180,height:1,data:i}}(new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength));L(k.width,k.height,!1,!1,(()=>{const Z=c.getEngine();c.type=1,c.format=6,c._gammaSpace=!1,Z._uploadDataToTextureDirectly(c,k.data)}))}}}}]);