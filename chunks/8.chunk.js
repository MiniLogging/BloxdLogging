"use strict";(self.yg1iw12lizp=self.yg1iw12lizp||[]).push([[8],{12479:(L,U,x)=>{x.d(U,{e:()=>q});var mL=x(12440),p=x(12406),G=x(12487),F=x(12515),a=x(12420);class o{constructor(){let L=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,L&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(L){this._zOffset!==L&&(this._zOffset=L,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(L){this._zOffsetUnits!==L&&(this._zOffsetUnits=L,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(L){this._cullFace!==L&&(this._cullFace=L,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(L){this._cull!==L&&(this._cull=L,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(L){this._depthFunc!==L&&(this._depthFunc=L,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(L){this._depthMask!==L&&(this._depthMask=L,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(L){this._depthTest!==L&&(this._depthTest=L,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(L){this._frontFace!==L&&(this._frontFace=L,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(L){this.isDirty&&(this._isCullDirty&&(this.cull?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(L.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(L.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(L.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(L.enable(L.POLYGON_OFFSET_FILL),L.polygonOffset(this.zOffset,this.zOffsetUnits)):L.disable(L.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(L.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class A{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(L){this._func!==L&&(this._func=L,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(L){this._funcRef!==L&&(this._funcRef=L,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(L){this._funcMask!==L&&(this._funcMask=L,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(L){this._opStencilFail!==L&&(this._opStencilFail=L,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(L){this._opDepthFail!==L&&(this._opDepthFail=L,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(L){this._opStencilDepthPass!==L&&(this._opStencilDepthPass=L,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(L){this._mask!==L&&(this._mask=L,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(L){this._enabled!==L&&(this._enabled=L,this._isStencilTestDirty=!0)}constructor(){let L=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,L&&this.reset()}reset(){var L;this.stencilMaterial=void 0,null===(L=this.stencilGlobal)||void 0===L||L.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(L){var U;if(!L)return;const x=!this.useStencilGlobalOnly&&!(null===(U=this.stencilMaterial)||void 0===U||!U.enabled);this.enabled=x?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=x?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=x?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=x?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=x?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=x?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=x?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=x?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(L.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(L.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(L.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class r{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=r.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=r.KEEP,this.opDepthFail=r.KEEP,this.opStencilDepthPass=r.REPLACE}get stencilFunc(){return this.func}set stencilFunc(L){this.func=L}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(L){this.funcRef=L}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(L){this.funcMask=L}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(L){this.opStencilFail=L}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(L){this.opDepthFail=L}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(L){this.opStencilDepthPass=L}get stencilMask(){return this.mask}set stencilMask(L){this.mask=L}get stencilTest(){return this.enabled}set stencilTest(L){this.enabled=L}}r.ALWAYS=519,r.KEEP=7680,r.REPLACE=7681;class h{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(L){this._alphaBlend!==L&&(this._alphaBlend=L,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(L,U,x,mL){this._blendConstants[0]===L&&this._blendConstants[1]===U&&this._blendConstants[2]===x&&this._blendConstants[3]===mL||(this._blendConstants[0]=L,this._blendConstants[1]=U,this._blendConstants[2]=x,this._blendConstants[3]=mL,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(L,U,x,mL){this._blendFunctionParameters[0]===L&&this._blendFunctionParameters[1]===U&&this._blendFunctionParameters[2]===x&&this._blendFunctionParameters[3]===mL||(this._blendFunctionParameters[0]=L,this._blendFunctionParameters[1]=U,this._blendFunctionParameters[2]=x,this._blendFunctionParameters[3]=mL,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(L,U){this._blendEquationParameters[0]===L&&this._blendEquationParameters[1]===U||(this._blendEquationParameters[0]=L,this._blendEquationParameters[1]=U,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(L){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?L.enable(L.BLEND):L.disable(L.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(L.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(L.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(L.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var b=x(12426),E=x(12521),Y=x(12397),S=x(12391),V=x(12469),H=x(12532);function Q(L,U){if((0,Y.j)()){const{requestAnimationFrame:x}=U||window;if("function"===typeof x)return x(L)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(L);return setTimeout(L,16)}class q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(L){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Ga(){return this._useReverseDepthBuffer}set Ga(L){L!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=L,this._depthCullingState.depthFunc=L?518:515)}setColorWrite(L){L!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=L)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(L){if(L)return this.isNDCHalfZRange?L.IS_NDC_HALF_ZRANGE="":delete L.IS_NDC_HALF_ZRANGE,this.Ga?L.USE_REVERSE_DEPTHBUFFER="":delete L.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?L.USE_EXACT_SRGB_CONVERSIONS="":delete L.USE_EXACT_SRGB_CONVERSIONS);{let L="";return this.isNDCHalfZRange&&(L+="#define IS_NDC_HALF_ZRANGE"),this.Ga&&(L&&(L+="\n"),L+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(L&&(L+="\n"),L+="#define USE_EXACT_SRGB_CONVERSIONS"),L}}_rebuildInternalTextures(){const L=this._internalTexturesCache.slice();for(const U of L)U._rebuild()}_rebuildRenderTargetWrappers(){const L=this._renderTargetWrapperCache.slice();for(const U of L)U._rebuild()}_rebuildEffects(){for(const L in this._compiledEffects){const U=this._compiledEffects[L];U._pipelineContext=null,U._prepareEffect()}G.Effect.ResetCache()}_rebuildGraphicsResources(){var L;this.wipeCaches(!0),this._rebuildEffects(),null===(L=this._rebuildComputeEffects)||void 0===L||L.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){p.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(L){setTimeout((()=>{this._clearEmptyResources();const U=this._depthCullingState.depthTest,x=this._depthCullingState.depthFunc,mL=this._depthCullingState.depthMask,p=this._stencilState.stencilTest;L(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=U,this._depthCullingState.depthFunc=x,this._depthCullingState.depthMask=mL,this._stencilState.stencilTest=p,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(L){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(L){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const L=new Uint8Array(4),U=[L,L,L,L,L,L];this._emptyCubeTexture=this.createRawCubeTexture(U,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(L){if(!L)return this._activeRenderLoops.length=0,void this._cancelFrame();const U=this._activeRenderLoops.indexOf(L);U>=0&&(this._activeRenderLoops.splice(U,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const L=this._frameHandler;if(this._frameHandler=0,(0,Y.j)()){const{cancelAnimationFrame:U}=this.getHostWindow()||window;if("function"===typeof U)return U(L)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(L);return clearTimeout(L)}}Fa(){this.onBeginFrameObservable.notifyObservers(this)}aa(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(L){this._maxFPS=L,void 0!==L&&(this._minFrameTime=L<=0?Number.MAX_VALUE:1e3/L)}_isOverFrameTime(L){if(!L||void 0===this._maxFPS)return!1;const U=L-this._lastFrameTime;return this._lastFrameTime=L,this._renderAccumulator+=U,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(L){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(L)){let L=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(L=!1),L&&(this.Fa(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.aa())}}_renderLoop(L){this._processFrame(L),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let L=0;L<this._activeRenderLoops.length;L++){(0,this._activeRenderLoops[L])()}}_renderViews(){return!1}_queueNewFrame(L,U){return Q(L,U)}runRenderLoop(L){-1===this._activeRenderLoops.indexOf(L)&&(this._activeRenderLoops.push(L),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(L){this._depthCullingState.depthTest=L}setZOffset(L){this._depthCullingState.zOffset=this.Ga?-L:L}getZOffset(){const L=this._depthCullingState.zOffset;return this.Ga?-L:L}setZOffsetUnits(L){this._depthCullingState.zOffsetUnits=this.Ga?-L:L}getZOffsetUnits(){const L=this._depthCullingState.zOffsetUnits;return this.Ga?-L:L}getHostWindow(){return(0,Y.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(L){this._compatibilityMode=!0}_rebuildTextures(){for(const L of this.scenes)L._rebuildTextures();for(const L of this._virtualScenes)L._rebuildTextures()}_releaseRenderTargetWrapper(L){const U=this._renderTargetWrapperCache.indexOf(L);-1!==U&&this._renderTargetWrapperCache.splice(U,1)}get currentViewport(){return this._cachedViewport}setViewport(L,U,x){const mL=U||this.getRenderWidth(),p=x||this.getRenderHeight(),G=L.x||0,F=L.y||0;this._cachedViewport=L,this._viewport(G*mL,F*p,mL*L.width,p*L.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(L){return new Path2D(L)}get description(){let L=this.name+this.version;return this._caps.parallelShaderCompile&&(L+=" - Parallel shader compilation"),L}_createTextureBase(L,U,x,G){let F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,A=arguments.length>7?arguments[7]:void 0,r=arguments.length>8?arguments[8]:void 0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,b=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,Y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,S=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,V=arguments.length>13?arguments[13]:void 0,Q=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0;const v="data:"===(L=L||"").substring(0,5),D="blob:"===L.substring(0,5),P=v&&-1!==L.indexOf(";base64,"),d=b||new E.d(this,1);d!==b&&(d.label=L.substring(0,60));const K=L;!this._transformTextureUrl||P||b||h||(L=this._transformTextureUrl(L)),K!==L&&(d._originalUrl=K);const l=L.lastIndexOf(".");let i=S||(l>-1?L.substring(l).toLowerCase():"");i.indexOf("?")>-1&&(i=i.split("?")[0]);const X=(0,H.d)(i,V);G&&G.addPendingData(d),d.url=L,d.generateMipMaps=!U,d.samplingMode=F,d.invertY=x,d._useSRGBBuffer=this._getUseSRGBBuffer(!!f,U),this._doNotHandleContextLost||(d._buffer=h);let t=null;a&&!b&&(t=d.onLoadedObservable.add(a)),b||this._internalTexturesCache.push(d);const y=(x,b)=>{G&&G.removePendingData(d),L===K?(t&&d.onLoadedObservable.remove(t),mL.c.UseFallbackTexture&&L!==mL.c.FallbackTexture&&this._createTextureBase(mL.c.FallbackTexture,U,d.invertY,G,F,null,o,A,r,h,d),x=(x||"Unknown error")+(mL.c.UseFallbackTexture?" - Fallback texture was used":""),d.onErrorObservable.notifyObservers({message:x,exception:b}),o&&o(x,b)):(p.c.Warn(`Failed to load ${L}, falling back to ${K}`),this._createTextureBase(K,U,d.invertY,G,F,a,o,A,r,h,d,Y,S,V,Q,f))};if(X){const U=async L=>{(await X).loadData(L,d,((L,U,x,mL,p,a)=>{a?y("TextureLoader failed to load data"):A(d,i,G,{width:L,height:U},d.invertY,!x,mL,(()=>(p(),!1)),F)}),Q)};h?h instanceof ArrayBuffer?U(new Uint8Array(h)):ArrayBuffer.isView(h)?U(h):o&&o("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(L,(L=>{U(new Uint8Array(L))}),void 0,G?G.offlineProvider:void 0,!0,((L,U)=>{y("Unable to load "+(L&&L.responseURL,U))}))}else{const x=L=>{D&&!this._doNotHandleContextLost&&(d._buffer=L),A(d,i,G,L,d.invertY,U,!1,r,F)};!v||P?h&&("string"===typeof h.decoding||h.close)?x(h):q._FileToolsLoadImage(L||"",x,y,G?G.offlineProvider:null,V,d.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof h||h instanceof ArrayBuffer||ArrayBuffer.isView(h)||h instanceof Blob?q._FileToolsLoadImage(h,x,y,G?G.offlineProvider:null,V,d.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):h&&x(h)}return d}_rebuildBuffers(){for(const L of this._uniformBuffers)L._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,Y.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const L in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,L)&&(this._boundTexturesCache[L]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(L){this._name=L}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(L){this._hardwareScalingLevel=L,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(L){this._doNotHandleContextLost=L}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(L,U,x){var p,G;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new o,this._stencilStateComposer=new A,this._stencilState=new r,this._alphaState=new h,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new S.c,this.onCanvasFocusObservable=new S.c,this.onNewSceneAddedObservable=new S.c,this.onResizeObservable=new S.c,this.onCanvasPointerOutObservable=new S.c,this.onEffectErrorObservable=new S.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new S.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=L=>this._renderLoop(L),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new S.c,this.onAfterShaderCompilationObservable=new S.c,this.onBeginFrameObservable=new S.c,this.onEndFrameObservable=new S.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new S.c,this.onContextRestoredObservable=new S.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.oa=new S.c,this.onReleaseEffectsObservable=new S.c,mL.c.Instances.push(this),this.startTime=a.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,F.d.SetMatrixPrecision(!!U.useHighPrecisionMatrix),(0,Y.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=x??!1,U.antialias=L??U.antialias,U.deterministicLockstep=U.deterministicLockstep??!1,U.lockstepMaxSteps=U.lockstepMaxSteps??4,U.timeStep=U.timeStep??1/60,U.Aa=U.Aa??!0,this._audioContext=(null===(p=U.audioEngineOptions)||void 0===p?void 0:p.audioContext)??null,this._audioDestination=(null===(G=U.audioEngineOptions)||void 0===G?void 0:G.audioDestination)??null,this.premultipliedAlpha=U.premultipliedAlpha??!0,this._doNotHandleContextLost=!!U.doNotHandleContextLost,this._isStencilEnable=!!U.Aa,this.useExactSrgbConversions=U.useExactSrgbConversions??!1;const b=(0,Y.j)()&&window.devicePixelRatio||1,E=U.limitDeviceRatio||b;x=x||U.adaptToDeviceRatio||!1,this._hardwareScalingLevel=x?1/Math.min(E,b):1,this._lastDevicePixelRatio=b,this._creationOptions=U}resize(){let L,U,x=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const L=(0,Y.j)()&&window.devicePixelRatio||1,U=this._lastDevicePixelRatio/L;this._lastDevicePixelRatio=L,this._hardwareScalingLevel*=U}if((0,Y.j)()&&(0,Y.d)())if(this._renderingCanvas){var mL,p;const x=null===(mL=(p=this._renderingCanvas).getBoundingClientRect)||void 0===mL?void 0:mL.call(p);L=this._renderingCanvas.clientWidth||(null===x||void 0===x?void 0:x.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,U=this._renderingCanvas.clientHeight||(null===x||void 0===x?void 0:x.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else L=window.innerWidth,U=window.innerHeight;else L=this._renderingCanvas?this._renderingCanvas.width:100,U=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(L/this._hardwareScalingLevel,U/this._hardwareScalingLevel,x)}setSize(L,U){let x=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(L|=0,U|=0,!x&&this._renderingCanvas.width===L&&this._renderingCanvas.height===U)return!1;if(this._renderingCanvas.width=L,this._renderingCanvas.height=U,this.scenes){for(let L=0;L<this.scenes.length;L++){const U=this.scenes[L];for(let L=0;L<U.cameras.length;L++){U.cameras[L]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(L,U,x,mL,p,G,F,a,o,A,r){throw(0,b.c)("engine.rawTexture")}createRawCubeTexture(L,U,x,mL,p,G,F,a){throw(0,b.c)("engine.rawTexture")}createRawTexture3D(L,U,x,mL,p,G,F,a,o,A,r){throw(0,b.c)("engine.rawTexture")}createRawTexture2DArray(L,U,x,mL,p,G,F,a,o,A,r){throw(0,b.c)("engine.rawTexture")}_sharedInit(L){this._renderingCanvas=L}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const L=navigator.userAgent;this.hostInformation.isMobile=-1!==L.indexOf("Mobile")||-1!==L.indexOf("Mac")&&(0,Y.d)()&&"ontouchend"in document},this._checkForMobile(),(0,Y.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(L){return document.createElement("video")}_reportDrawCall(){var L;let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(L=this._drawCalls)||void 0===L||L.addCount(U,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(L,U){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(L,U){return createImageBitmap(L,U)}resizeImageBitmap(L,U,x){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(L){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(L,U){if("undefined"===typeof document)return new OffscreenCanvas(L,U);const x=document.createElement("canvas");return x.width=L,x.height=U,x}createCanvas(L,U){return q._CreateCanvas(L,U)}static _FileToolsLoadImage(L,U,x,mL,p,G,F){throw(0,b.c)("FileTools")}_loadFile(L,U,x,mL,p,G){const F=(0,V.m)(L,U,x,mL,p,G);return this._activeRequests.push(F),F.onCompleteObservable.add((()=>{const L=this._activeRequests.indexOf(F);-1!==L&&this._activeRequests.splice(L,1)})),F}static _FileToolsLoadFile(L,U,x,mL,p,G){if(V.c.loadFile)return V.c.loadFile(L,U,x,mL,p,G);throw(0,b.c)("FileTools")}dispose(){var L;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(L=this.releaseComputeEffects)||void 0===L||L.call(this),G.Effect.ResetCache();for(const x of this._activeRequests)x.abort();this._boundRenderFunction=null,this.oa.notifyObservers(this),this.oa.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,Y.j)()&&window.removeEventListener("resize",this._checkForMobile);const U=mL.c.Instances.indexOf(this);U>=0&&mL.c.Instances.splice(U,1),mL.c.Instances.length||(mL.c.OnEnginesDisposedObservable.notifyObservers(this),mL.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(L){throw(0,b.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(L,U){for(let x=0;x<mL.c.Instances.length;x++){const p=mL.c.Instances[x];for(let x=0;x<p.scenes.length;x++)p.scenes[x].markAllMaterialsAsDirty(L,U)}}}q._RenderPassIdCounter=0,q._RescalePostProcessFactory=null,q.CollisionsEpsilon=.001,q.QueueNewFrame=Q},12440:(L,U,x)=>{x.d(U,{c:()=>p});var mL=x(12391);class p{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}p.Instances=[],p.OnEnginesDisposedObservable=new mL.c,p._LastCreatedScene=null,p.UseFallbackTexture=!0,p.FallbackTexture=""},12515:(L,U,x)=>{x.d(U,{d:()=>mL});class mL{static SetMatrixPrecision(L){if(mL.MatrixTrackPrecisionChange=!1,L&&!mL.MatrixUse64Bits&&mL.MatrixTrackedMatrices)for(let U=0;U<mL.MatrixTrackedMatrices.length;++U){const L=mL.MatrixTrackedMatrices[U],x=L.ra;L.ra=new Array(16);for(let U=0;U<16;++U)L.ra[U]=x[U]}mL.MatrixUse64Bits=L,mL.MatrixCurrentType=mL.MatrixUse64Bits?Array:Float32Array,mL.MatrixTrackedMatrices=null}}mL.MatrixUse64Bits=!1,mL.MatrixTrackPrecisionChange=!0,mL.MatrixCurrentType=Float32Array,mL.MatrixTrackedMatrices=[]},12532:(L,U,x)=>{x.d(U,{d:()=>F});var mL=x(12406);const p=new Map;function G(L,U){(function(L){return p.delete(L)})(L)&&mL.c.Warn(`Extension with the name '${L}' already exists`),p.set(L,U)}function F(L,U){"image/ktx"!==U&&"image/ktx2"!==U||(L=".ktx"),p.has(L)||(L.endsWith(".ies")&&G(".ies",(async()=>await x.e(15).then(x.bind(x,15047)).then((L=>new L._IESTextureLoader)))),L.endsWith(".dds")&&G(".dds",(async()=>await Promise.all([x.e(14),x.e(17),x.e(13),x.e(19),x.e(18),x.e(28)]).then(x.bind(x,15056)).then((L=>new L._DDSTextureLoader)))),L.endsWith(".basis")&&G(".basis",(async()=>await Promise.all([x.e(14),x.e(17),x.e(13),x.e(47)]).then(x.bind(x,15067)).then((L=>new L._BasisTextureLoader)))),L.endsWith(".env")&&G(".env",(async()=>await Promise.all([x.e(14),x.e(17),x.e(13),x.e(19),x.e(18),x.e(23),x.e(21),x.e(45),x.e(48)]).then(x.bind(x,15071)).then((L=>new L._ENVTextureLoader)))),L.endsWith(".hdr")&&G(".hdr",(async()=>await Promise.all([x.e(14),x.e(49)]).then(x.bind(x,15080)).then((L=>new L._HDRTextureLoader)))),(L.endsWith(".ktx")||L.endsWith(".ktx2"))&&(G(".ktx",(async()=>await x.e(30).then(x.bind(x,15089)).then((L=>new L._KTXTextureLoader)))),G(".ktx2",(async()=>await x.e(30).then(x.bind(x,15089)).then((L=>new L._KTXTextureLoader))))),L.endsWith(".tga")&&G(".tga",(async()=>await x.e(50).then(x.bind(x,15097)).then((L=>new L._TGATextureLoader)))),L.endsWith(".exr")&&G(".exr",(async()=>await x.e(16).then(x.bind(x,15099)).then((L=>new L._ExrTextureLoader)))));const mL=p.get(L);return mL?Promise.resolve(mL(U)):null}},12521:(L,U,x)=>{x.d(U,{d:()=>F});var mL,p=x(12391),G=x(12529);!function(L){L[L.Unknown=0]="Unknown",L[L.Url=1]="Url",L[L.Temp=2]="Temp",L[L.Raw=3]="Raw",L[L.Dynamic=4]="Dynamic",L[L.RenderTarget=5]="RenderTarget",L[L.MultiRenderTarget=6]="MultiRenderTarget",L[L.Cube=7]="Cube",L[L.CubeRaw=8]="CubeRaw",L[L.CubePrefiltered=9]="CubePrefiltered",L[L.Raw3D=10]="Raw3D",L[L.Raw2DArray=11]="Raw2DArray",L[L.DepthStencil=12]="DepthStencil",L[L.CubeRawRGBD=13]="CubeRawRGBD",L[L.Depth=14]="Depth"}(mL||(mL={}));class F extends G.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(L){this.generateMipMaps=L}get uniqueId(){return this._uniqueId}_setUniqueId(L){this._uniqueId=L}getEngine(){return this._engine}get source(){return this._source}constructor(L,U){let x=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new p.c,this.onErrorObservable=new p.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=L,this._source=U,this._uniqueId=F._Counter++,x||(this._hardwareTexture=L._createHardwareTexture())}incrementReferences(){this._references++}updateSize(L,U){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,L,U,x),this.width=L,this.height=U,this.depth=x,this.baseWidth=L,this.baseHeight=U,this.baseDepth=x,this._size=L*U*x}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const L=this.onRebuildCallback(this),U=U=>{U._swapAndDie(this,!1),this.isReady=L.isReady};return void(L.isAsync?L.proxy.then(U):U(L.proxy))}let L;switch(this.source){case 2:case 12:case 14:break;case 1:return void(L=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(L=>{L._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:L=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),L._swapAndDie(this,!1),this.isReady=!0;break;case 10:L=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),L._swapAndDie(this,!1),this.isReady=!0;break;case 11:L=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),L._swapAndDie(this,!1),this.isReady=!0;break;case 4:L=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),L._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(L=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{L._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:L=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),L._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return L=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(L=>{L&&L._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(L._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(L){var U;let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(U=this._hardwareTexture)||void 0===U||U.setUsage(L._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),L._hardwareTexture=this._hardwareTexture,x&&(L._isRGBD=this._isRGBD),this._lodTextureHigh&&(L._lodTextureHigh&&L._lodTextureHigh.dispose(),L._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(L._lodTextureMid&&L._lodTextureMid.dispose(),L._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(L._lodTextureLow&&L._lodTextureLow.dispose(),L._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(L._irradianceTexture&&L._irradianceTexture.dispose(),L._irradianceTexture=this._irradianceTexture);const mL=this._engine.getLoadedTexturesCache();let p=mL.indexOf(this);-1!==p&&mL.splice(p,1),p=mL.indexOf(L),-1===p&&mL.push(L)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}F._Counter=0},12529:(L,U,x)=>{x.d(U,{c:()=>mL});class mL{get wrapU(){return this._cachedWrapU}set wrapU(L){this._cachedWrapU=L}get wrapV(){return this._cachedWrapV}set wrapV(L){this._cachedWrapV=L}get wrapR(){return this._cachedWrapR}set wrapR(L){this._cachedWrapR=L}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(L){this._cachedAnisotropicFilteringLevel=L}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(L){this._comparisonFunction=L}get useMipMaps(){return this._useMipMaps}set useMipMaps(L){this._useMipMaps=L}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,mL=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=L,this._cachedWrapV=U,this._cachedWrapR=x,this._cachedAnisotropicFilteringLevel=mL,this.samplingMode=p,this._comparisonFunction=G,this}compareSampler(L){return this._cachedWrapU===L._cachedWrapU&&this._cachedWrapV===L._cachedWrapV&&this._cachedWrapR===L._cachedWrapR&&this._cachedAnisotropicFilteringLevel===L._cachedAnisotropicFilteringLevel&&this.samplingMode===L.samplingMode&&this._comparisonFunction===L._comparisonFunction&&this._useMipMaps===L._useMipMaps}}},12414:(L,U,x)=>{x.d(U,{b:()=>G});var mL=x(12406);const p=(L,U,x)=>L?L.getClassName&&"Mesh"===L.getClassName()?null:!L.getClassName||"SubMesh"!==L.getClassName()&&"PhysicsBody"!==L.getClassName()?L.clone?L.clone():Array.isArray(L)?L.slice():x&&"object"===typeof L?{...L}:null:L.clone(U):null;class G{static DeepCopy(L,U,x,G){let F=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=function(L){const U=[];do{const x=Object.getOwnPropertyNames(L);for(const L of x)-1===U.indexOf(L)&&U.push(L)}while(L=Object.getPrototypeOf(L));return U}(L);for(const A of a){if("_"===A[0]&&(!G||-1===G.indexOf(A)))continue;if(A.endsWith("Observable"))continue;if(x&&-1!==x.indexOf(A))continue;const a=L[A],r=typeof a;if("function"!==r)try{if("object"===r)if(a instanceof Uint8Array)U[A]=Uint8Array.from(a);else if(a instanceof Array){if(U[A]=[],a.length>0)if("object"==typeof a[0])for(let L=0;L<a.length;L++){const x=p(a[L],U,F);-1===U[A].indexOf(x)&&U[A].push(x)}else U[A]=a.slice(0)}else U[A]=p(a,U,F);else U[A]=a}catch(o){mL.c.Warn(o.message)}}}}},12452:(L,U,x)=>{x.d(U,{e:()=>mL,h:()=>p,i:()=>G});class mL extends Error{}mL._setPrototypeOf=Object.setPrototypeOf||((L,U)=>(L.__proto__=U,L));const p={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class G extends mL{constructor(L,U,x){super(L),this.errorCode=U,this.innerError=x,this.name="RuntimeError",mL._setPrototypeOf(this,G.prototype)}}},12448:(L,U,x)=>{x.d(U,{b:()=>y,e:()=>q,f:()=>l,i:()=>X,o:()=>d,l:()=>V,q:()=>D,u:()=>P,v:()=>K,w:()=>f});var mL=x(12434),p=x(12397),G=x(12391);class F{}F.FilesToLoad={};var a=x(12452),o=x(12457),A=x(12464),r=x(12440),h=x(12406),b=x(12475),E=x(12469),Y=x(12479);const S=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class V extends a.i{constructor(L,U){super(L,a.h.LoadFileError),this.name="LoadFileError",a.e._setPrototypeOf(this,V.prototype),U instanceof mL.e?this.request=U:this.file=U}}class H extends a.i{constructor(L,U){super(L,a.h.RequestFileError),this.request=U,this.name="RequestFileError",a.e._setPrototypeOf(this,H.prototype)}}class Q extends a.i{constructor(L,U){super(L,a.h.ReadFileError),this.file=U,this.name="ReadFileError",a.e._setPrototypeOf(this,Q.prototype)}}const q={DefaultRetryStrategy:class{static ExponentialBackoff(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(x,mL,p)=>0!==mL.status||p>=L||-1!==x.indexOf("file:")?-1:Math.pow(2,p)*U}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:L=>L,ScriptBaseUrl:"",ScriptPreprocessUrl:L=>L,CleanUrl:L=>L=L.replace(/#/gm,"%23")},f=(L,U)=>{if((!L||0!==L.indexOf("data:"))&&q.CorsBehavior)if("string"===typeof q.CorsBehavior||q.CorsBehavior instanceof String)U.crossOrigin=q.CorsBehavior;else{const x=q.CorsBehavior(L);x&&(U.crossOrigin=x)}},v={getRequiredSize:null},D=function(L,U,x,p){let G,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",A=arguments.length>5?arguments[5]:void 0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===h||void 0===h||!h._features.forceBitmapOverHTMLImageElement))return x("LoadImage is only supported in web or BabylonNative environments."),null;let b=!1;L instanceof ArrayBuffer||ArrayBuffer.isView(L)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(G=URL.createObjectURL(new Blob([L],{type:a})),b=!0):G=`data:${a};base64,`+(0,o.k)(L):L instanceof Blob?(G=URL.createObjectURL(L),b=!0):(G=q.CleanUrl(L),G=q.PreprocessUrl(G));const E=U=>{if(x){const mL=G||L.toString();x(`Error while trying to load image: ${0===mL.indexOf("http")||mL.length<=128?mL:mL.slice(0,128)+"..."}`,U)}};if(null!==h&&void 0!==h&&h._features.forceBitmapOverHTMLImageElement)return d(G,(mL=>{h.createImageBitmap(new Blob([mL],{type:a}),{premultiplyAlpha:"none",...A}).then((L=>{U(L),b&&URL.revokeObjectURL(G)})).catch((U=>{x&&x("Error while trying to load image: "+L,U)}))}),void 0,p||void 0,!0,((L,U)=>{E(U)})),null;const Y=new Image;if(v.getRequiredSize){const U=v.getRequiredSize(L);U.width&&(Y.width=U.width),U.height&&(Y.height=U.height)}f(G,Y);const S=[],V=()=>{for(const L of S)L.target.removeEventListener(L.name,L.handler);S.length=0};S.push({target:Y,name:"load",handler:()=>{V(),U(Y),b&&Y.src&&URL.revokeObjectURL(Y.src)}}),S.push({target:Y,name:"error",handler:L=>{V(),E(L),b&&Y.src&&URL.revokeObjectURL(Y.src)}}),S.push({target:document,name:"securitypolicyviolation",handler:L=>{if(L.blockedURI!==Y.src||"ha"===L.disposition)return;V();const U=new Error(`CSP violation of policy ${L.effectiveDirective} ${L.blockedURI}. Current policy is ${L.originalPolicy}`);r.c.UseFallbackTexture=!1,E(U),b&&Y.src&&URL.revokeObjectURL(Y.src),Y.src=""}}),(()=>{for(const L of S)L.target.addEventListener(L.name,L.handler)})();const H="blob:"===G.substring(0,5),Q="data:"===G.substring(0,5),D=()=>{H||Q||!mL.e.IsCustomRequestAvailable?Y.src=G:d(G,((L,U,x)=>{const mL=new Blob([L],{type:!a&&x?x:a}),p=URL.createObjectURL(mL);b=!0,Y.src=p}),void 0,p||void 0,!0,((L,U)=>{E(U)}))},P=()=>{p&&p.loadImage(G,Y)};if(!H&&!Q&&p&&p.enableTexturesOffline)p.open(P,D);else{if(-1!==G.indexOf("file:")){const L=decodeURIComponent(G.substring(5).toLowerCase());if(F.FilesToLoad[L]&&"undefined"!==typeof URL){try{let U;try{U=URL.createObjectURL(F.FilesToLoad[L])}catch(K){U=URL.createObjectURL(F.FilesToLoad[L])}Y.src=U,b=!0}catch(l){Y.src=""}return Y}}D()}return Y},P=(L,U,x,mL,p)=>{const F=new FileReader,a={onCompleteObservable:new G.c,abort:()=>F.abort()};return F.onloadend=()=>a.onCompleteObservable.notifyObservers(a),p&&(F.onerror=()=>{p(new Q(`Unable to read ${L.name}`,L))}),F.onload=L=>{U(L.target.result)},x&&(F.onprogress=x),mL?F.readAsArrayBuffer(L):F.readAsText(L),a},d=(L,U,x,mL,p,o,A)=>{if(L.name)return P(L,U,x,p,o?L=>{o(void 0,L)}:void 0);const r=L;if(-1!==r.indexOf("file:")){let L=decodeURIComponent(r.substring(5).toLowerCase());0===L.indexOf("./")&&(L=L.substring(2));const mL=F.FilesToLoad[L];if(mL)return P(mL,U,x,p,o?L=>o(void 0,new V(L.message,L.file)):void 0)}const{match:E,type:Y}=t(r);if(E){const L={onCompleteObservable:new G.c,abort:()=>()=>{}};try{const L=p?y(r):n(r);U(L,void 0,Y)}catch(a){o?o(void 0,a):h.c.Error(a.message||"Failed to parse the Data URL")}return b.e.SetImmediate((()=>{L.onCompleteObservable.notifyObservers(L)})),L}return K(r,((L,x)=>{U(L,null===x||void 0===x?void 0:x.responseURL,null===x||void 0===x?void 0:x.getResponseHeader("content-type"))}),x,mL,p,o?L=>{o(L.request,new V(L.message,L.request))}:void 0,A)},K=(L,U,x,F,a,o,A)=>{L=q.CleanUrl(L),L=q.PreprocessUrl(L);const r=q.BaseUrl+L;let b=!1;const E={onCompleteObservable:new G.c,abort:()=>b=!0},Y=()=>{let L,G=new mL.e,F=null;const Y=()=>{G&&(x&&G.removeEventListener("progress",x),L&&G.removeEventListener("readystatechange",L),G.removeEventListener("loadend",S))};let S=()=>{Y(),E.onCompleteObservable.notifyObservers(E),E.onCompleteObservable.clear(),x=void 0,L=null,S=null,o=void 0,A=void 0,U=void 0};E.abort=()=>{b=!0,S&&S(),G&&G.readyState!==(XMLHttpRequest.DONE||4)&&G.abort(),null!==F&&(clearTimeout(F),F=null),G=null};const V=L=>{const U=L.message||"Unknown error";o&&G?o(new H(U,G)):h.c.Error(U)},Q=h=>{if(G){if(G.open("GET",r),A)try{A(G)}catch(E){return void V(E)}a&&(G.responseType="arraybuffer"),x&&G.addEventListener("progress",x),S&&G.addEventListener("loadend",S),L=()=>{if(!b&&G&&G.readyState===(XMLHttpRequest.DONE||4)){if(L&&G.removeEventListener("readystatechange",L),G.status>=200&&G.status<300||0===G.status&&(!(0,p.j)()||i())){const L=a?G.response:G.responseText;if(null!==L){try{U&&U(L,G)}catch(E){V(E)}return}}const x=q.DefaultRetryStrategy;if(x){const L=x(r,G,h);if(-1!==L)return Y(),G=new mL.e,void(F=setTimeout((()=>Q(h+1)),L))}const A=new H("Error status: "+G.status+" "+G.statusText+" - Unable to load "+r,G);o&&o(A)}},G.addEventListener("readystatechange",L),G.send()}};Q(0)};if(F&&F.enableSceneOffline){const mL=L=>{L&&L.status>400?o&&o(L):Y()},p=()=>{F&&F.loadFile(q.BaseUrl+L,(L=>{!b&&U&&U(L),E.onCompleteObservable.notifyObservers(E)}),x?L=>{!b&&x&&x(L)}:void 0,mL,a)};F.open(p,mL)}else Y();return E},l=L=>{const{match:U,type:x}=t(L);if(U)return x||void 0;const mL=L.lastIndexOf(".");switch(L.substring(mL+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ba":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},i=()=>"undefined"!==typeof location&&"file:"===location.protocol,X=L=>S.test(L),t=L=>{const U=S.exec(L);if(null===U||0===U.length)return{match:!1,type:""};return{match:!0,type:U[0].replace("data:","").replace("base64,","")}};function y(L){return(0,o.d)(L.split(",")[1])}const n=L=>(0,o.f)(L.split(",")[1]);let N;Y.e._FileToolsLoadImage=D,E.c.loadFile=d,A.m.loadFile=d;((L,U,x,mL,p,G,F,a,o,A)=>{N={DecodeBase64UrlToBinary:L,DecodeBase64UrlToString:U,DefaultRetryStrategy:x.DefaultRetryStrategy,BaseUrl:x.BaseUrl,CorsBehavior:x.CorsBehavior,PreprocessUrl:x.PreprocessUrl,IsBase64DataUrl:mL,IsFileURL:p,LoadFile:G,LoadImage:F,ReadFile:a,RequestFile:o,SetCorsBehavior:A},Object.defineProperty(N,"DefaultRetryStrategy",{get:function(){return x.DefaultRetryStrategy},set:function(L){x.DefaultRetryStrategy=L}}),Object.defineProperty(N,"BaseUrl",{get:function(){return x.BaseUrl},set:function(L){x.BaseUrl=L}}),Object.defineProperty(N,"PreprocessUrl",{get:function(){return x.PreprocessUrl},set:function(L){x.PreprocessUrl=L}}),Object.defineProperty(N,"CorsBehavior",{get:function(){return x.CorsBehavior},set:function(L){x.CorsBehavior=L}})})(y,n,q,X,i,d,D,P,K,f)},12550:(L,U,x)=>{function mL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(L=>{const U=16*Math.random()|0;return("x"===L?U:3&U|8).toString(16)}))}x.d(U,{b:()=>mL})},12540:(L,U,x)=>{x.d(U,{e:()=>G});var mL=x(12406),p=x(12547);class G{static Instantiate(L){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[L])return this.RegisteredExternalClasses[L];const U=(0,p.b)(L);if(U)return U;mL.c.Warn(L+" not found, you may have missed an import.");const x=L.split(".");let G=window||this;for(let mL=0,p=x.length;mL<p;mL++)G=G[x[mL]];return"function"!==typeof G?null:G}}G.RegisteredExternalClasses={}},12420:(L,U,x)=>{x.d(U,{e:()=>p});var mL=x(12397);class p{static get Now(){return(0,mL.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12457:(L,U,x)=>{x.d(U,{d:()=>F,f:()=>G,j:()=>mL,k:()=>p});const mL=L=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(L);let U="";for(let x=0;x<L.byteLength;x++)U+=String.fromCharCode(L[x]);return U},p=L=>{const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let x,mL,p,G,F,a,o,A="",r=0;const h=ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength):new Uint8Array(L);for(;r<h.length;)x=h[r++],mL=r<h.length?h[r++]:Number.NaN,p=r<h.length?h[r++]:Number.NaN,G=x>>2,F=(3&x)<<4|mL>>4,a=(15&mL)<<2|p>>6,o=63&p,isNaN(mL)?a=o=64:isNaN(p)&&(o=64),A+=U.charAt(G)+U.charAt(F)+U.charAt(a)+U.charAt(o);return A},G=L=>atob(L),F=L=>{const U=G(L),x=U.length,mL=new Uint8Array(new ArrayBuffer(x));for(let p=0;p<x;p++)mL[p]=U.charCodeAt(p);return mL.buffer}},12557:(L,U,x)=>{function mL(L){let U=1;do{U*=2}while(U<L);return U===L}function p(L,U,x){return L*(1-x)+U*x}function G(L){const U=F(L),x=a(L);return U-L>L-x?x:U}function F(L){return L--,L|=L>>1,L|=L>>2,L|=L>>4,L|=L>>8,L|=L>>16,++L}function a(L){return L|=L>>1,L|=L>>2,L|=L>>4,L|=L>>8,(L|=L>>16)-(L>>1)}function o(L,U){let x;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:x=a(L);break;case 2:x=G(L);break;default:x=F(L)}return Math.min(x,U)}x.d(U,{b:()=>a,c:()=>o,f:()=>mL,i:()=>p,j:()=>G})},12382:(L,U,x)=>{x.r(U),x.d(U,{AsyncLoop:()=>Q,Tools:()=>V,className:()=>H});var mL=x(12391),p=x(12397),G=x(12406),F=x(12414),a=x(12420),o=x(12426),A=x(12434),r=x(12440),h=x(12448),b=x(12475),E=x(12540),Y=x(12550),S=x(12557);class V{static get BaseUrl(){return h.e.BaseUrl}static set BaseUrl(L){h.e.BaseUrl=L}static get CleanUrl(){return h.e.CleanUrl}static set CleanUrl(L){h.e.CleanUrl=L}static IsAbsoluteUrl(L){return 0===L.indexOf("//")||-1!==L.indexOf("://")&&(-1!==L.indexOf(".")&&(-1!==L.indexOf("/")&&(!(L.indexOf(":")>L.indexOf("/"))&&(L.indexOf("://")<L.indexOf(".")||(0===L.indexOf("data:")||0===L.indexOf("blob:"))))))}static set ScriptBaseUrl(L){h.e.ScriptBaseUrl=L}static get ScriptBaseUrl(){return h.e.ScriptBaseUrl}static set CDNBaseUrl(L){V.ScriptBaseUrl=L,V.AssetBaseUrl=L}static set ScriptPreprocessUrl(L){h.e.ScriptPreprocessUrl=L}static get ScriptPreprocessUrl(){return h.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return h.e.DefaultRetryStrategy}static set DefaultRetryStrategy(L){h.e.DefaultRetryStrategy=L}static get CorsBehavior(){return h.e.CorsBehavior}static set CorsBehavior(L){h.e.CorsBehavior=L}static get UseFallbackTexture(){return r.c.UseFallbackTexture}static set UseFallbackTexture(L){r.c.UseFallbackTexture=L}static get RegisteredExternalClasses(){return E.e.RegisteredExternalClasses}static set RegisteredExternalClasses(L){E.e.RegisteredExternalClasses=L}static get fallbackTexture(){return r.c.FallbackTexture}static set fallbackTexture(L){r.c.FallbackTexture=L}static FetchToRef(L,U,x,mL,p,G){const F=4*((Math.abs(L)*x%x|0)+(Math.abs(U)*mL%mL|0)*x);G.r=p[F]/255,G.g=p[F+1]/255,G.b=p[F+2]/255,G.a=p[F+3]/255}static Mix(L,U,x){return 0}static Instantiate(L){return E.e.Instantiate(L)}static SetImmediate(L){b.e.SetImmediate(L)}static IsExponentOfTwo(L){return!0}static FloatRound(L){return Math.fround(L)}static GetFilename(L){const U=L.lastIndexOf("/");return U<0?L:L.substring(U+1)}static GetFolderPath(L){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const x=L.lastIndexOf("/");return x<0?U?L:"":L.substring(0,x+1)}static ToDegrees(L){return 180*L/Math.PI}static ToRadians(L){return L*Math.PI/180}static SmoothAngleChange(L,U){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const mL=this.ToRadians(L),p=this.ToRadians(U);return this.ToDegrees(Math.atan2((1-x)*Math.sin(p)+x*Math.sin(mL),(1-x)*Math.cos(p)+x*Math.cos(mL)))}static MakeArray(L,U){return!0===U||void 0!==L&&null!=L?Array.isArray(L)?L:[L]:null}static GetPointerPrefix(L){return(0,p.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(L,U){(0,h.w)(L,U)}static SetReferrerPolicyBehavior(L,U){U.referrerPolicy=L}static get PreprocessUrl(){return h.e.PreprocessUrl}static set PreprocessUrl(L){h.e.PreprocessUrl=L}static LoadImage(L,U,x,mL,p,G){return(0,h.q)(L,U,x,mL,p,G)}static LoadFile(L,U,x,mL,p,G){return(0,h.o)(L,U,x,mL,p,G)}static async LoadFileAsync(L){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((x,mL)=>{(0,h.o)(L,(L=>{x(L)}),void 0,void 0,U,((L,U)=>{mL(U)}))}))}static GetAssetUrl(L){if(!L)return"";if(V.AssetBaseUrl&&L.startsWith(V._DefaultAssetsUrl)){const U="/"===V.AssetBaseUrl[V.AssetBaseUrl.length-1]?V.AssetBaseUrl.substring(0,V.AssetBaseUrl.length-1):V.AssetBaseUrl;return L.replace(V._DefaultAssetsUrl,U)}return L}static GetBabylonScriptURL(L,U){if(!L)return"";if(V.ScriptBaseUrl&&L.startsWith(V._DefaultCdnUrl)){const U="/"===V.ScriptBaseUrl[V.ScriptBaseUrl.length-1]?V.ScriptBaseUrl.substring(0,V.ScriptBaseUrl.length-1):V.ScriptBaseUrl;L=L.replace(V._DefaultCdnUrl,U)}return L=V.ScriptPreprocessUrl(L),U&&(L=V.GetAbsoluteUrl(L)),L}static LoadBabylonScript(L,U,x,mL){L=V.GetBabylonScriptURL(L),V.LoadScript(L,U,x)}static async LoadBabylonScriptAsync(L){return L=V.GetBabylonScriptURL(L),await V.LoadScriptAsync(L)}static LoadScript(L,U,x,mL){let G=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(L),U&&U()}catch(o){null===x||void 0===x||x(`Unable to load script '${L}' in worker`,o)}return}if(!(0,p.j)())return void(null===x||void 0===x||x(`Cannot load script '${L}' outside of a window or a worker`));const F=document.getElementsByTagName("head")[0],a=document.createElement("script");G?(a.setAttribute("type","module"),a.innerText=L):(a.setAttribute("type","text/javascript"),a.setAttribute("src",L)),mL&&(a.id=mL),a.onload=()=>{U&&U()},a.onerror=U=>{x&&x(`Unable to load script '${L}'`,U)},F.appendChild(a)}static async LoadScriptAsync(L,U){return await new Promise(((x,mL)=>{this.LoadScript(L,(()=>{x()}),((L,U)=>{mL(U||new Error(L))}),U)}))}static ReadFileAsDataURL(L,U,x){const p=new FileReader,G={onCompleteObservable:new mL.c,abort:()=>p.abort()};return p.onloadend=()=>{G.onCompleteObservable.notifyObservers(G)},p.onload=L=>{U(L.target.result)},p.onprogress=x,p.readAsDataURL(L),G}static ReadFile(L,U,x,mL,p){return(0,h.u)(L,U,x,mL,p)}static FileAsURL(L){const U=new Blob([L]);return window.URL.createObjectURL(U)}static Format(L){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return L.toFixed(U)}static DeepCopy(L,U,x,mL){F.b.DeepCopy(L,U,x,mL)}static IsEmpty(L){for(const U in L)if(Object.prototype.hasOwnProperty.call(L,U))return!1;return!0}static RegisterTopRootEvents(L,U){for(let mL=0;mL<U.length;mL++){const p=U[mL];L.addEventListener(p.name,p.handler,!1);try{window.parent&&window.parent.addEventListener(p.name,p.handler,!1)}catch(x){}}}static UnregisterTopRootEvents(L,U){for(let mL=0;mL<U.length;mL++){const p=U[mL];L.removeEventListener(p.name,p.handler);try{L.parent&&L.parent.removeEventListener(p.name,p.handler)}catch(x){}}}static async DumpFramebuffer(L,U,x,mL){throw(0,o.c)("DumpTools")}static DumpData(L,U,x,mL){throw(0,o.c)("DumpTools")}static async DumpDataAsync(L,U,x){throw(0,o.c)("DumpTools")}static _IsOffScreenCanvas(L){return void 0!==L.convertToBlob}static ToBlob(L,U){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",mL=arguments.length>3?arguments[3]:void 0;V._IsOffScreenCanvas(L)||L.toBlob||(L.toBlob=function(L,U,x){setTimeout((()=>{const mL=atob(this.toDataURL(U,x).split(",")[1]),p=mL.length,G=new Uint8Array(p);for(let L=0;L<p;L++)G[L]=mL.charCodeAt(L);L(new Blob([G]))}))}),V._IsOffScreenCanvas(L)?L.convertToBlob({type:x,quality:mL}).then((L=>U(L))):L.toBlob((function(L){U(L)}),x,mL)}static DownloadBlob(L,U){if("download"in document.createElement("a")){if(!U){const L=new Date;U="screenshot_"+((L.getFullYear()+"-"+(L.getMonth()+1)).slice(2)+"-"+L.getDate()+"_"+L.getHours()+"-"+("0"+L.getMinutes()).slice(-2))+".png"}V.Download(L,U)}else if(L&&"undefined"!==typeof URL){const U=URL.createObjectURL(L),x=window.open("");if(!x)return;const mL=x.document.createElement("img");mL.onload=function(){URL.revokeObjectURL(U)},mL.src=U,x.document.body.appendChild(mL)}}static EncodeScreenshotCanvasData(L,U){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",mL=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0;if("string"!==typeof mL&&U){if(U){if(V._IsOffScreenCanvas(L))return void L.convertToBlob({type:x,quality:p}).then((L=>{const x=new FileReader;x.readAsDataURL(L),x.onloadend=()=>{const L=x.result;U(L)}}));const mL=L.toDataURL(x,p);U(mL)}}else this.ToBlob(L,(function(L){L&&V.DownloadBlob(L,mL),U&&U("")}),x,p)}static Download(L,U){if("undefined"===typeof URL)return;const x=window.URL.createObjectURL(L),mL=document.createElement("a");document.body.appendChild(mL),mL.style.display="none",mL.href=x,mL.download=U,mL.addEventListener("click",(()=>{mL.parentElement&&mL.parentElement.removeChild(mL)})),mL.click(),window.URL.revokeObjectURL(x)}static BackCompatCameraNoPreventDefault(L){return"boolean"===typeof L[0]?L[0]:"boolean"===typeof L[1]&&L[1]}static CreateScreenshot(L,U,x,mL){throw(0,o.c)("ScreenshotTools")}static async CreateScreenshotAsync(L,U,x){throw(0,o.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(L,U,x,mL){throw(0,o.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(L,U,x){throw(0,o.c)("ScreenshotTools")}static RandomId(){return(0,Y.b)()}static IsBase64(L){return(0,h.i)(L)}static DecodeBase64(L){return(0,h.b)(L)}static get errorsCount(){return G.c.errorsCount}static Log(L){G.c.Log(L)}static Warn(L){G.c.Warn(L)}static Error(L){G.c.Error(L)}static get LogCache(){return G.c.LogCache}static ClearLogCache(){G.c.ClearLogCache()}static set LogLevels(L){G.c.LogLevels=L}static set PerformanceLogLevel(L){return(L&V.PerformanceUserMarkLogLevel)===V.PerformanceUserMarkLogLevel?(V.StartPerformanceCounter=V._StartUserMark,void(V.EndPerformanceCounter=V._EndUserMark)):(L&V.PerformanceConsoleLogLevel)===V.PerformanceConsoleLogLevel?(V.StartPerformanceCounter=V._StartPerformanceConsole,void(V.EndPerformanceCounter=V._EndPerformanceConsole)):(V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,void(V.EndPerformanceCounter=V._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(L,U){}static _EndPerformanceCounterDisabled(L,U){}static _StartUserMark(L){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!V._Performance){if(!(0,p.j)())return;V._Performance=window.performance}U&&V._Performance.mark&&V._Performance.mark(L+"-Begin")}static _EndUserMark(L){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&V._Performance.mark&&(V._Performance.mark(L+"-End"),V._Performance.measure(L,L+"-Begin",L+"-End"))}static _StartPerformanceConsole(L){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(V._StartUserMark(L,U),console.time&&console.time(L))}static _EndPerformanceConsole(L){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(V._EndUserMark(L,U),console.timeEnd(L))}static get Now(){return a.e.Now}static GetClassName(L){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=null;if(!U&&L.getClassName)x=L.getClassName();else{if(L instanceof Object){x=(U?L:Object.getPrototypeOf(L)).constructor.__bjsclassName__}x||(x=typeof L)}return x}static First(L,U){for(const x of L)if(U(x))return x;return null}static getFullClassName(L){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],x=null,mL=null;if(!U&&L.getClassName)x=L.getClassName();else{if(L instanceof Object){const p=U?L:Object.getPrototypeOf(L);x=p.constructor.__bjsclassName__,mL=p.constructor.__bjsmoduleName__}x||(x=typeof L)}return x?(null!=mL?mL+".":"")+x:null}static async DelayAsync(L){await new Promise((U=>{setTimeout((()=>{U()}),L)}))}static IsSafari(){return!!(0,p.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function H(L,U){return x=>{x.__bjsclassName__=L,x.__bjsmoduleName__=null!=U?U:null}}V.AssetBaseUrl="",V.UseCustomRequestHeaders=!1,V.CustomRequestHeaders=A.e.CustomRequestHeaders,V.GetDOMTextContent=p.b,V._DefaultCdnUrl="https://cdn.babylonjs.com",V._DefaultAssetsUrl="https://assets.babylonjs.com/core",V.GetAbsoluteUrl="object"===typeof document?L=>{const U=document.createElement("a");return U.href=L,U.href}:"function"===typeof URL&&"object"===typeof location?L=>new URL(L,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},V.NoneLogLevel=G.c.NoneLogLevel,V.MessageLogLevel=G.c.MessageLogLevel,V.WarningLogLevel=G.c.WarningLogLevel,V.ErrorLogLevel=G.c.ErrorLogLevel,V.AllLogLevel=G.c.AllLogLevel,V.IsWindowObjectExist=p.j,V.PerformanceNoneLogLevel=0,V.PerformanceUserMarkLogLevel=1,V.PerformanceConsoleLogLevel=2,V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,V.EndPerformanceCounter=V._EndPerformanceCounterDisabled;class Q{constructor(L,U,x){let mL=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=L,this.index=mL-1,this._done=!1,this._fn=U,this._successCallback=x}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(L,U,x){const mL=new Q(L,U,x,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return mL.executeNext(),mL}static SyncAsyncForLoop(L,U,x,mL,p){let G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Q.Run(Math.ceil(L/U),(mL=>{p&&p()?mL.breakLoop():setTimeout((()=>{for(let G=0;G<U;++G){const F=mL.index*U+G;if(F>=L)break;if(x(F),p&&p()){mL.breakLoop();break}}mL.executeNext()}),G)}),mL)}}V.Mix=S.i,V.IsExponentOfTwo=S.f,r.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12547:(L,U,x)=>{x.d(U,{b:()=>G,d:()=>p});const mL={};function p(L,U){mL[L]=U}function G(L){return mL[L]}},12434:(L,U,x)=>{x.d(U,{e:()=>mL});class mL{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(mL.CustomRequestHeaders).length>0||mL.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const L in mL.CustomRequestHeaders){const U=mL.CustomRequestHeaders[L];U&&this._xhr.setRequestHeader(L,U)}}_shouldSkipRequestModifications(L){return mL.SkipRequestModificationForBabylonCDN&&(L.includes("preview.babylonjs.com")||L.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(L){this._xhr.onprogress=L}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(L){this._xhr.responseType=L}get timeout(){return this._xhr.timeout}set timeout(L){this._xhr.timeout=L}addEventListener(L,U,x){this._xhr.addEventListener(L,U,x)}removeEventListener(L,U,x){this._xhr.removeEventListener(L,U,x)}abort(){this._xhr.abort()}send(L){mL.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(L)}open(L,U){for(const x of mL.CustomRequestModifiers){if(this._shouldSkipRequestModifications(U))return;U=x(this._xhr,U)||U}U=(U=U.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=U,this._xhr.open(L,U,!0)}setRequestHeader(L,U){this._xhr.setRequestHeader(L,U)}getResponseHeader(L){return this._xhr.getResponseHeader(L)}}mL.CustomRequestHeaders={},mL.CustomRequestModifiers=new Array,mL.SkipRequestModificationForBabylonCDN=!0}}]);