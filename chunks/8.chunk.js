"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[8],{12721:(a,c,o)=>{o.d(c,{b:()=>n});var s=o(12680),q=o(12649),t=o(12728),i=o(12751),p=o(12661);class G{constructor(){let a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,a&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(a){this._zOffset!==a&&(this._zOffset=a,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(a){this._zOffsetUnits!==a&&(this._zOffsetUnits=a,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(a){this._cullFace!==a&&(this._cullFace=a,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(a){this._cull!==a&&(this._cull=a,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(a){this._depthFunc!==a&&(this._depthFunc=a,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(a){this._depthMask!==a&&(this._depthMask=a,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(a){this._depthTest!==a&&(this._depthTest=a,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(a){this._frontFace!==a&&(this._frontFace=a,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(a){this.isDirty&&(this._isCullDirty&&(this.cull?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(a.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(a.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(a.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(this.zOffset,this.zOffsetUnits)):a.disable(a.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(a.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class T{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(a){this._func!==a&&(this._func=a,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(a){this._funcRef!==a&&(this._funcRef=a,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(a){this._funcMask!==a&&(this._funcMask=a,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(a){this._opStencilFail!==a&&(this._opStencilFail=a,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(a){this._opDepthFail!==a&&(this._opDepthFail=a,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(a){this._opStencilDepthPass!==a&&(this._opStencilDepthPass=a,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(a){this._mask!==a&&(this._mask=a,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(a){this._enabled!==a&&(this._enabled=a,this._isStencilTestDirty=!0)}constructor(){let a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,a&&this.reset()}reset(){var a;this.stencilMaterial=void 0,null===(a=this.stencilGlobal)||void 0===a||a.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(a){var c;if(!a)return;const o=!this.useStencilGlobalOnly&&!(null===(c=this.stencilMaterial)||void 0===c||!c.enabled);this.enabled=o?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=o?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=o?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=o?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=o?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=o?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=o?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=o?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(a.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(a.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(a.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class C{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=C.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=C.KEEP,this.opDepthFail=C.KEEP,this.opStencilDepthPass=C.REPLACE}get stencilFunc(){return this.func}set stencilFunc(a){this.func=a}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(a){this.funcRef=a}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(a){this.funcMask=a}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(a){this.opStencilFail=a}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(a){this.opDepthFail=a}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(a){this.opStencilDepthPass=a}get stencilMask(){return this.mask}set stencilMask(a){this.mask=a}get stencilTest(){return this.enabled}set stencilTest(a){this.enabled=a}}C.ALWAYS=519,C.KEEP=7680,C.REPLACE=7681;class j{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(a){this._alphaBlend!==a&&(this._alphaBlend=a,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(a,c,o,s){this._blendConstants[0]===a&&this._blendConstants[1]===c&&this._blendConstants[2]===o&&this._blendConstants[3]===s||(this._blendConstants[0]=a,this._blendConstants[1]=c,this._blendConstants[2]=o,this._blendConstants[3]=s,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(a,c,o,s){this._blendFunctionParameters[0]===a&&this._blendFunctionParameters[1]===c&&this._blendFunctionParameters[2]===o&&this._blendFunctionParameters[3]===s||(this._blendFunctionParameters[0]=a,this._blendFunctionParameters[1]=c,this._blendFunctionParameters[2]=o,this._blendFunctionParameters[3]=s,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(a,c){this._blendEquationParameters[0]===a&&this._blendEquationParameters[1]===c||(this._blendEquationParameters[0]=a,this._blendEquationParameters[1]=c,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(a){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?a.enable(a.BLEND):a.disable(a.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(a.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(a.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(a.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var L=o(12667),e=o(12757),g=o(12642),M=o(12639),N=o(12706),y=o(12768);function k(a,c){if((0,g.k)()){const{requestAnimationFrame:o}=c||window;if("function"===typeof o)return o(a)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(a);return setTimeout(a,16)}class n{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(a){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(a){a!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=a,this._depthCullingState.depthFunc=a?518:515)}setColorWrite(a){a!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=a)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(a){if(a)return this.isNDCHalfZRange?a.IS_NDC_HALF_ZRANGE="":delete a.IS_NDC_HALF_ZRANGE,this.o?a.USE_REVERSE_DEPTHBUFFER="":delete a.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?a.USE_EXACT_SRGB_CONVERSIONS="":delete a.USE_EXACT_SRGB_CONVERSIONS);{let a="";return this.isNDCHalfZRange&&(a+="#define IS_NDC_HALF_ZRANGE"),this.o&&(a&&(a+="\n"),a+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(a&&(a+="\n"),a+="#define USE_EXACT_SRGB_CONVERSIONS"),a}}_rebuildInternalTextures(){const a=this._internalTexturesCache.slice();for(const c of a)c._rebuild()}_rebuildRenderTargetWrappers(){const a=this._renderTargetWrapperCache.slice();for(const c of a)c._rebuild()}_rebuildEffects(){for(const a in this._compiledEffects){const c=this._compiledEffects[a];c._pipelineContext=null,c._prepareEffect()}t.Effect.ResetCache()}_rebuildGraphicsResources(){var a;this.wipeCaches(!0),this._rebuildEffects(),null===(a=this._rebuildComputeEffects)||void 0===a||a.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){q.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(a){setTimeout((()=>{this._clearEmptyResources();const c=this._depthCullingState.depthTest,o=this._depthCullingState.depthFunc,s=this._depthCullingState.depthMask,q=this._stencilState.stencilTest;a(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=c,this._depthCullingState.depthFunc=o,this._depthCullingState.depthMask=s,this._stencilState.stencilTest=q,this._flagContextRestored()}),0)}get L(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(a){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(a){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const a=new Uint8Array(4),c=[a,a,a,a,a,a];this._emptyCubeTexture=this.createRawCubeTexture(c,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(a){if(!a)return this._activeRenderLoops.length=0,void this._cancelFrame();const c=this._activeRenderLoops.indexOf(a);c>=0&&(this._activeRenderLoops.splice(c,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const a=this._frameHandler;if(this._frameHandler=0,(0,g.k)()){const{cancelAnimationFrame:c}=this.getHostWindow()||window;if("function"===typeof c)return c(a)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(a);return clearTimeout(a)}}Lc(){this.onBeginFrameObservable.notifyObservers(this)}ec(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(a){this._maxFPS=a,void 0!==a&&(this._minFrameTime=a<=0?Number.MAX_VALUE:1e3/a)}_isOverFrameTime(a){if(!a||void 0===this._maxFPS)return!1;const c=a-this._lastFrameTime;return this._lastFrameTime=a,this._renderAccumulator+=c,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(a){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(a)){let a=!0;(this.L||!this.renderEvenInBackground&&this._windowIsBackground)&&(a=!1),a&&(this.Lc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ec())}}_renderLoop(a){this._processFrame(a),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let a=0;a<this._activeRenderLoops.length;a++){(0,this._activeRenderLoops[a])()}}_renderViews(){return!1}_queueNewFrame(a,c){return k(a,c)}runRenderLoop(a){-1===this._activeRenderLoops.indexOf(a)&&(this._activeRenderLoops.push(a),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(a){this._depthCullingState.depthTest=a}setZOffset(a){this._depthCullingState.zOffset=this.o?-a:a}getZOffset(){const a=this._depthCullingState.zOffset;return this.o?-a:a}setZOffsetUnits(a){this._depthCullingState.zOffsetUnits=this.o?-a:a}getZOffsetUnits(){const a=this._depthCullingState.zOffsetUnits;return this.o?-a:a}getHostWindow(){return(0,g.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(a){this._compatibilityMode=!0}_rebuildTextures(){for(const a of this.scenes)a._rebuildTextures();for(const a of this._virtualScenes)a._rebuildTextures()}_releaseRenderTargetWrapper(a){const c=this._renderTargetWrapperCache.indexOf(a);-1!==c&&this._renderTargetWrapperCache.splice(c,1)}get currentViewport(){return this._cachedViewport}setViewport(a,c,o){const s=c||this.getRenderWidth(),q=o||this.getRenderHeight(),t=a.x||0,i=a.y||0;this._cachedViewport=a,this._viewport(t*s,i*q,s*a.width,q*a.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(a){return new Path2D(a)}get description(){let a=this.name+this.version;return this._caps.parallelShaderCompile&&(a+=" - Parallel shader compilation"),a}_createTextureBase(a,c,o,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,T=arguments.length>7?arguments[7]:void 0,C=arguments.length>8?arguments[8]:void 0,j=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,L=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,g=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,M=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,N=arguments.length>13?arguments[13]:void 0,k=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0;const J="data:"===(a=a||"").substring(0,5),w="blob:"===a.substring(0,5),Z=J&&-1!==a.indexOf(";base64,"),h=L||new e.b(this,1);h!==L&&(h.label=a.substring(0,60));const U=a;!this._transformTextureUrl||Z||L||j||(a=this._transformTextureUrl(a)),U!==a&&(h._originalUrl=U);const S=a.lastIndexOf(".");let r=M||(S>-1?a.substring(S).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const x=(0,y.e)(r,N);t&&t.addPendingData(h),h.url=a,h.generateMipMaps=!c,h.samplingMode=i,h.invertY=o,h._useSRGBBuffer=this._getUseSRGBBuffer(!!f,c),this._doNotHandleContextLost||(h._buffer=j);let R=null;p&&!L&&(R=h.onLoadedObservable.add(p)),L||this._internalTexturesCache.push(h);const d=(o,L)=>{t&&t.removePendingData(h),a===U?(R&&h.onLoadedObservable.remove(R),s.b.UseFallbackTexture&&a!==s.b.FallbackTexture&&this._createTextureBase(s.b.FallbackTexture,c,h.invertY,t,i,null,G,T,C,j,h),o=(o||"Unknown error")+(s.b.UseFallbackTexture?" - Fallback texture was used":""),h.onErrorObservable.notifyObservers({message:o,exception:L}),G&&G(o,L)):(q.c.Warn(`Failed to load ${a}, falling back to ${U}`),this._createTextureBase(U,c,h.invertY,t,i,p,G,T,C,j,h,g,M,N,k,f))};if(x){const c=async a=>{(await x).loadData(a,h,((a,c,o,s,q,p)=>{p?d("TextureLoader failed to load data"):T(h,r,t,{width:a,height:c},h.invertY,!o,s,(()=>(q(),!1)),i)}),k)};j?j instanceof ArrayBuffer?c(new Uint8Array(j)):ArrayBuffer.isView(j)?c(j):G&&G("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(a,(a=>{c(new Uint8Array(a))}),void 0,t?t.offlineProvider:void 0,!0,((a,c)=>{d("Unable to load "+(a&&a.responseURL,c))}))}else{const o=a=>{w&&!this._doNotHandleContextLost&&(h._buffer=a),T(h,r,t,a,h.invertY,c,!1,C,i)};!J||Z?j&&("string"===typeof j.decoding||j.close)?o(j):n._FileToolsLoadImage(a||"",o,d,t?t.offlineProvider:null,N,h.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof j||j instanceof ArrayBuffer||ArrayBuffer.isView(j)||j instanceof Blob?n._FileToolsLoadImage(j,o,d,t?t.offlineProvider:null,N,h.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):j&&o(j)}return h}_rebuildBuffers(){for(const a of this._uniformBuffers)a._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,g.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const a in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,a)&&(this._boundTexturesCache[a]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(a){this._name=a}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(a){this._hardwareScalingLevel=a,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(a){this._doNotHandleContextLost=a}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(a,c,o){var q,t;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new G,this._stencilStateComposer=new T,this._stencilState=new C,this._alphaState=new j,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new M.d,this.onCanvasFocusObservable=new M.d,this.onNewSceneAddedObservable=new M.d,this.onResizeObservable=new M.d,this.onCanvasPointerOutObservable=new M.d,this.onEffectErrorObservable=new M.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new M.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=a=>this._renderLoop(a),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new M.d,this.onAfterShaderCompilationObservable=new M.d,this.onBeginFrameObservable=new M.d,this.onEndFrameObservable=new M.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new M.d,this.onContextRestoredObservable=new M.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.gc=new M.d,this.onReleaseEffectsObservable=new M.d,s.b.Instances.push(this),this.startTime=p.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,i.b.SetMatrixPrecision(!!c.useHighPrecisionMatrix),(0,g.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=o??!1,c.antialias=a??c.antialias,c.deterministicLockstep=c.deterministicLockstep??!1,c.lockstepMaxSteps=c.lockstepMaxSteps??4,c.timeStep=c.timeStep??1/60,c.Nc=c.Nc??!0,this._audioContext=(null===(q=c.audioEngineOptions)||void 0===q?void 0:q.audioContext)??null,this._audioDestination=(null===(t=c.audioEngineOptions)||void 0===t?void 0:t.audioDestination)??null,this.premultipliedAlpha=c.premultipliedAlpha??!0,this._doNotHandleContextLost=!!c.doNotHandleContextLost,this._isStencilEnable=!!c.Nc,this.useExactSrgbConversions=c.useExactSrgbConversions??!1;const L=(0,g.k)()&&window.devicePixelRatio||1,e=c.limitDeviceRatio||L;o=o||c.adaptToDeviceRatio||!1,this._hardwareScalingLevel=o?1/Math.min(e,L):1,this._lastDevicePixelRatio=L,this._creationOptions=c}resize(){let a,c,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const a=(0,g.k)()&&window.devicePixelRatio||1,c=this._lastDevicePixelRatio/a;this._lastDevicePixelRatio=a,this._hardwareScalingLevel*=c}if((0,g.k)()&&(0,g.d)())if(this._renderingCanvas){var s,q;const o=null===(s=(q=this._renderingCanvas).getBoundingClientRect)||void 0===s?void 0:s.call(q);a=this._renderingCanvas.clientWidth||(null===o||void 0===o?void 0:o.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,c=this._renderingCanvas.clientHeight||(null===o||void 0===o?void 0:o.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else a=window.innerWidth,c=window.innerHeight;else a=this._renderingCanvas?this._renderingCanvas.width:100,c=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(a/this._hardwareScalingLevel,c/this._hardwareScalingLevel,o)}setSize(a,c){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(a|=0,c|=0,!o&&this._renderingCanvas.width===a&&this._renderingCanvas.height===c)return!1;if(this._renderingCanvas.width=a,this._renderingCanvas.height=c,this.scenes){for(let a=0;a<this.scenes.length;a++){const c=this.scenes[a];for(let a=0;a<c.cameras.length;a++){c.cameras[a]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(a,c,o,s,q,t,i,p,G,T,C){throw(0,L.b)("engine.rawTexture")}createRawCubeTexture(a,c,o,s,q,t,i,p){throw(0,L.b)("engine.rawTexture")}createRawTexture3D(a,c,o,s,q,t,i,p,G,T,C){throw(0,L.b)("engine.rawTexture")}createRawTexture2DArray(a,c,o,s,q,t,i,p,G,T,C){throw(0,L.b)("engine.rawTexture")}_sharedInit(a){this._renderingCanvas=a}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const a=navigator.userAgent;this.hostInformation.isMobile=-1!==a.indexOf("Mobile")||-1!==a.indexOf("Mac")&&(0,g.d)()&&"ontouchend"in document},this._checkForMobile(),(0,g.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(a){return document.createElement("video")}_reportDrawCall(){var a;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(a=this._drawCalls)||void 0===a||a.addCount(c,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(a,c){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(a,c){return createImageBitmap(a,c)}resizeImageBitmap(a,c,o){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(a){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(a,c){if("undefined"===typeof document)return new OffscreenCanvas(a,c);const o=document.createElement("canvas");return o.width=a,o.height=c,o}createCanvas(a,c){return n._CreateCanvas(a,c)}static _FileToolsLoadImage(a,c,o,s,q,t,i){throw(0,L.b)("FileTools")}_loadFile(a,c,o,s,q,t){const i=(0,N.m)(a,c,o,s,q,t);return this._activeRequests.push(i),i.onCompleteObservable.add((()=>{const a=this._activeRequests.indexOf(i);-1!==a&&this._activeRequests.splice(a,1)})),i}static _FileToolsLoadFile(a,c,o,s,q,t){if(N.e.loadFile)return N.e.loadFile(a,c,o,s,q,t);throw(0,L.b)("FileTools")}dispose(){var a;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(a=this.releaseComputeEffects)||void 0===a||a.call(this),t.Effect.ResetCache();for(const o of this._activeRequests)o.abort();this._boundRenderFunction=null,this.gc.notifyObservers(this),this.gc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,g.k)()&&window.removeEventListener("resize",this._checkForMobile);const c=s.b.Instances.indexOf(this);c>=0&&s.b.Instances.splice(c,1),s.b.Instances.length||(s.b.OnEnginesDisposedObservable.notifyObservers(this),s.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(a){throw(0,L.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(a,c){for(let o=0;o<s.b.Instances.length;o++){const q=s.b.Instances[o];for(let o=0;o<q.scenes.length;o++)q.scenes[o].markAllMaterialsAsDirty(a,c)}}}n._RenderPassIdCounter=0,n._RescalePostProcessFactory=null,n.CollisionsEpsilon=.001,n.QueueNewFrame=k},12680:(a,c,o)=>{o.d(c,{b:()=>q});var s=o(12639);class q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}q.Instances=[],q.OnEnginesDisposedObservable=new s.d,q._LastCreatedScene=null,q.UseFallbackTexture=!0,q.FallbackTexture=""},12751:(a,c,o)=>{o.d(c,{b:()=>s});class s{static SetMatrixPrecision(a){if(s.MatrixTrackPrecisionChange=!1,a&&!s.MatrixUse64Bits&&s.MatrixTrackedMatrices)for(let c=0;c<s.MatrixTrackedMatrices.length;++c){const a=s.MatrixTrackedMatrices[c],o=a.yc;a.yc=new Array(16);for(let c=0;c<16;++c)a.yc[c]=o[c]}s.MatrixUse64Bits=a,s.MatrixCurrentType=s.MatrixUse64Bits?Array:Float32Array,s.MatrixTrackedMatrices=null}}s.MatrixUse64Bits=!1,s.MatrixTrackPrecisionChange=!0,s.MatrixCurrentType=Float32Array,s.MatrixTrackedMatrices=[]},12768:(a,c,o)=>{o.d(c,{e:()=>i});var s=o(12649);const q=new Map;function t(a,c){(function(a){return q.delete(a)})(a)&&s.c.Warn(`Extension with the name '${a}' already exists`),q.set(a,c)}function i(a,c){"image/ktx"!==c&&"image/ktx2"!==c||(a=".ktx"),q.has(a)||(a.endsWith(".ies")&&t(".ies",(async()=>await o.e(15).then(o.bind(o,15206)).then((a=>new a._IESTextureLoader)))),a.endsWith(".dds")&&t(".dds",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(28)]).then(o.bind(o,15209)).then((a=>new a._DDSTextureLoader)))),a.endsWith(".basis")&&t(".basis",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(47)]).then(o.bind(o,15221)).then((a=>new a._BasisTextureLoader)))),a.endsWith(".env")&&t(".env",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(23),o.e(21),o.e(45),o.e(48)]).then(o.bind(o,15224)).then((a=>new a._ENVTextureLoader)))),a.endsWith(".hdr")&&t(".hdr",(async()=>await Promise.all([o.e(14),o.e(49)]).then(o.bind(o,15233)).then((a=>new a._HDRTextureLoader)))),(a.endsWith(".ktx")||a.endsWith(".ktx2"))&&(t(".ktx",(async()=>await o.e(30).then(o.bind(o,15238)).then((a=>new a._KTXTextureLoader)))),t(".ktx2",(async()=>await o.e(30).then(o.bind(o,15238)).then((a=>new a._KTXTextureLoader))))),a.endsWith(".tga")&&t(".tga",(async()=>await o.e(50).then(o.bind(o,15240)).then((a=>new a._TGATextureLoader)))),a.endsWith(".exr")&&t(".exr",(async()=>await o.e(16).then(o.bind(o,15244)).then((a=>new a._ExrTextureLoader)))));const s=q.get(a);return s?Promise.resolve(s(c)):null}},12757:(a,c,o)=>{o.d(c,{b:()=>i});var s,q=o(12639),t=o(12763);!function(a){a[a.Unknown=0]="Unknown",a[a.Url=1]="Url",a[a.Temp=2]="Temp",a[a.Raw=3]="Raw",a[a.Dynamic=4]="Dynamic",a[a.RenderTarget=5]="RenderTarget",a[a.MultiRenderTarget=6]="MultiRenderTarget",a[a.Cube=7]="Cube",a[a.CubeRaw=8]="CubeRaw",a[a.CubePrefiltered=9]="CubePrefiltered",a[a.Raw3D=10]="Raw3D",a[a.Raw2DArray=11]="Raw2DArray",a[a.DepthStencil=12]="DepthStencil",a[a.CubeRawRGBD=13]="CubeRawRGBD",a[a.Depth=14]="Depth"}(s||(s={}));class i extends t.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(a){this.generateMipMaps=a}get uniqueId(){return this._uniqueId}_setUniqueId(a){this._uniqueId=a}getEngine(){return this._engine}get source(){return this._source}constructor(a,c){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new q.d,this.onErrorObservable=new q.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=a,this._source=c,this._uniqueId=i._Counter++,o||(this._hardwareTexture=a._createHardwareTexture())}incrementReferences(){this._references++}updateSize(a,c){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,a,c,o),this.width=a,this.height=c,this.depth=o,this.baseWidth=a,this.baseHeight=c,this.baseDepth=o,this._size=a*c*o}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const a=this.onRebuildCallback(this),c=c=>{c._swapAndDie(this,!1),this.isReady=a.isReady};return void(a.isAsync?a.proxy.then(c):c(a.proxy))}let a;switch(this.source){case 2:case 12:case 14:break;case 1:return void(a=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(a=>{a._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:a=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),a._swapAndDie(this,!1),this.isReady=!0;break;case 10:a=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),a._swapAndDie(this,!1),this.isReady=!0;break;case 11:a=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),a._swapAndDie(this,!1),this.isReady=!0;break;case 4:a=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),a._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(a=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{a._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:a=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),a._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return a=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(a=>{a&&a._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(a._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(a){var c;let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(c=this._hardwareTexture)||void 0===c||c.setUsage(a._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),a._hardwareTexture=this._hardwareTexture,o&&(a._isRGBD=this._isRGBD),this._lodTextureHigh&&(a._lodTextureHigh&&a._lodTextureHigh.dispose(),a._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(a._lodTextureMid&&a._lodTextureMid.dispose(),a._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(a._lodTextureLow&&a._lodTextureLow.dispose(),a._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(a._irradianceTexture&&a._irradianceTexture.dispose(),a._irradianceTexture=this._irradianceTexture);const s=this._engine.getLoadedTexturesCache();let q=s.indexOf(this);-1!==q&&s.splice(q,1),q=s.indexOf(a),-1===q&&s.push(a)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}i._Counter=0},12763:(a,c,o)=>{o.d(c,{b:()=>s});class s{get wrapU(){return this._cachedWrapU}set wrapU(a){this._cachedWrapU=a}get wrapV(){return this._cachedWrapV}set wrapV(a){this._cachedWrapV=a}get wrapR(){return this._cachedWrapR}set wrapR(a){this._cachedWrapR=a}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(a){this._cachedAnisotropicFilteringLevel=a}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(a){this._comparisonFunction=a}get useMipMaps(){return this._useMipMaps}set useMipMaps(a){this._useMipMaps=a}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=a,this._cachedWrapV=c,this._cachedWrapR=o,this._cachedAnisotropicFilteringLevel=s,this.samplingMode=q,this._comparisonFunction=t,this}compareSampler(a){return this._cachedWrapU===a._cachedWrapU&&this._cachedWrapV===a._cachedWrapV&&this._cachedWrapR===a._cachedWrapR&&this._cachedAnisotropicFilteringLevel===a._cachedAnisotropicFilteringLevel&&this.samplingMode===a.samplingMode&&this._comparisonFunction===a._comparisonFunction&&this._useMipMaps===a._useMipMaps}}},12657:(a,c,o)=>{o.d(c,{b:()=>t});var s=o(12649);const q=(a,c,o)=>a?a.getClassName&&"Mesh"===a.getClassName()?null:!a.getClassName||"SubMesh"!==a.getClassName()&&"PhysicsBody"!==a.getClassName()?a.clone?a.clone():Array.isArray(a)?a.slice():o&&"object"===typeof a?{...a}:null:a.clone(c):null;class t{static DeepCopy(a,c,o,t){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const p=function(a){const c=[];do{const o=Object.getOwnPropertyNames(a);for(const a of o)-1===c.indexOf(a)&&c.push(a)}while(a=Object.getPrototypeOf(a));return c}(a);for(const T of p){if("_"===T[0]&&(!t||-1===t.indexOf(T)))continue;if(T.endsWith("Observable"))continue;if(o&&-1!==o.indexOf(T))continue;const p=a[T],C=typeof p;if("function"!==C)try{if("object"===C)if(p instanceof Uint8Array)c[T]=Uint8Array.from(p);else if(p instanceof Array){if(c[T]=[],p.length>0)if("object"==typeof p[0])for(let a=0;a<p.length;a++){const o=q(p[a],c,i);-1===c[T].indexOf(o)&&c[T].push(o)}else c[T]=p.slice(0)}else c[T]=q(p,c,i);else c[T]=p}catch(G){s.c.Warn(G.message)}}}}},12691:(a,c,o)=>{o.d(c,{c:()=>s,f:()=>q,h:()=>t});class s extends Error{}s._setPrototypeOf=Object.setPrototypeOf||((a,c)=>(a.__proto__=c,a));const q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class t extends s{constructor(a,c,o){super(a),this.errorCode=c,this.innerError=o,this.name="RuntimeError",s._setPrototypeOf(this,t.prototype)}}},12689:(a,c,o)=>{o.d(c,{b:()=>d,c:()=>n,e:()=>S,h:()=>x,k:()=>h,j:()=>N,n:()=>w,r:()=>Z,v:()=>U,w:()=>f});var s=o(12672),q=o(12642),t=o(12639);class i{}i.FilesToLoad={};var p=o(12691),G=o(12695),T=o(12704),C=o(12680),j=o(12649),L=o(12712),e=o(12706),g=o(12721);const M=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class N extends p.h{constructor(a,c){super(a,p.f.LoadFileError),this.name="LoadFileError",p.c._setPrototypeOf(this,N.prototype),c instanceof s.b?this.request=c:this.file=c}}class y extends p.h{constructor(a,c){super(a,p.f.RequestFileError),this.request=c,this.name="RequestFileError",p.c._setPrototypeOf(this,y.prototype)}}class k extends p.h{constructor(a,c){super(a,p.f.ReadFileError),this.file=c,this.name="ReadFileError",p.c._setPrototypeOf(this,k.prototype)}}const n={DefaultRetryStrategy:class{static ExponentialBackoff(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(o,s,q)=>0!==s.status||q>=a||-1!==o.indexOf("file:")?-1:Math.pow(2,q)*c}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:a=>a,ScriptBaseUrl:"",ScriptPreprocessUrl:a=>a,CleanUrl:a=>a=a.replace(/#/gm,"%23")},f=(a,c)=>{if((!a||0!==a.indexOf("data:"))&&n.CorsBehavior)if("string"===typeof n.CorsBehavior||n.CorsBehavior instanceof String)c.crossOrigin=n.CorsBehavior;else{const o=n.CorsBehavior(a);o&&(c.crossOrigin=o)}},J={getRequiredSize:null},w=function(a,c,o,q){let t,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",T=arguments.length>5?arguments[5]:void 0,j=arguments.length>6&&void 0!==arguments[6]?arguments[6]:C.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===j||void 0===j||!j._features.forceBitmapOverHTMLImageElement))return o("LoadImage is only supported in web or BabylonNative environments."),null;let L=!1;a instanceof ArrayBuffer||ArrayBuffer.isView(a)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(t=URL.createObjectURL(new Blob([a],{type:p})),L=!0):t=`data:${p};base64,`+(0,G.k)(a):a instanceof Blob?(t=URL.createObjectURL(a),L=!0):(t=n.CleanUrl(a),t=n.PreprocessUrl(t));const e=c=>{if(o){const s=t||a.toString();o(`Error while trying to load image: ${0===s.indexOf("http")||s.length<=128?s:s.slice(0,128)+"..."}`,c)}};if(null!==j&&void 0!==j&&j._features.forceBitmapOverHTMLImageElement)return h(t,(s=>{j.createImageBitmap(new Blob([s],{type:p}),{premultiplyAlpha:"none",...T}).then((a=>{c(a),L&&URL.revokeObjectURL(t)})).catch((c=>{o&&o("Error while trying to load image: "+a,c)}))}),void 0,q||void 0,!0,((a,c)=>{e(c)})),null;const g=new Image;if(J.getRequiredSize){const c=J.getRequiredSize(a);c.width&&(g.width=c.width),c.height&&(g.height=c.height)}f(t,g);const M=[],N=()=>{for(const a of M)a.target.removeEventListener(a.name,a.handler);M.length=0};M.push({target:g,name:"load",handler:()=>{N(),c(g),L&&g.src&&URL.revokeObjectURL(g.src)}}),M.push({target:g,name:"error",handler:a=>{N(),e(a),L&&g.src&&URL.revokeObjectURL(g.src)}}),M.push({target:document,name:"securitypolicyviolation",handler:a=>{if(a.blockedURI!==g.src||"kc"===a.disposition)return;N();const c=new Error(`CSP violation of policy ${a.effectiveDirective} ${a.blockedURI}. Current policy is ${a.originalPolicy}`);C.b.UseFallbackTexture=!1,e(c),L&&g.src&&URL.revokeObjectURL(g.src),g.src=""}}),(()=>{for(const a of M)a.target.addEventListener(a.name,a.handler)})();const y="blob:"===t.substring(0,5),k="data:"===t.substring(0,5),w=()=>{y||k||!s.b.IsCustomRequestAvailable?g.src=t:h(t,((a,c,o)=>{const s=new Blob([a],{type:!p&&o?o:p}),q=URL.createObjectURL(s);L=!0,g.src=q}),void 0,q||void 0,!0,((a,c)=>{e(c)}))},Z=()=>{q&&q.loadImage(t,g)};if(!y&&!k&&q&&q.enableTexturesOffline)q.open(Z,w);else{if(-1!==t.indexOf("file:")){const a=decodeURIComponent(t.substring(5).toLowerCase());if(i.FilesToLoad[a]&&"undefined"!==typeof URL){try{let c;try{c=URL.createObjectURL(i.FilesToLoad[a])}catch(U){c=URL.createObjectURL(i.FilesToLoad[a])}g.src=c,L=!0}catch(S){g.src=""}return g}}w()}return g},Z=(a,c,o,s,q)=>{const i=new FileReader,p={onCompleteObservable:new t.d,abort:()=>i.abort()};return i.onloadend=()=>p.onCompleteObservable.notifyObservers(p),q&&(i.onerror=()=>{q(new k(`Unable to read ${a.name}`,a))}),i.onload=a=>{c(a.target.result)},o&&(i.onprogress=o),s?i.readAsArrayBuffer(a):i.readAsText(a),p},h=(a,c,o,s,q,G,T)=>{if(a.name)return Z(a,c,o,q,G?a=>{G(void 0,a)}:void 0);const C=a;if(-1!==C.indexOf("file:")){let a=decodeURIComponent(C.substring(5).toLowerCase());0===a.indexOf("./")&&(a=a.substring(2));const s=i.FilesToLoad[a];if(s)return Z(s,c,o,q,G?a=>G(void 0,new N(a.message,a.file)):void 0)}const{match:e,type:g}=R(C);if(e){const a={onCompleteObservable:new t.d,abort:()=>()=>{}};try{const a=q?d(C):X(C);c(a,void 0,g)}catch(p){G?G(void 0,p):j.c.Error(p.message||"Failed to parse the Data URL")}return L.d.SetImmediate((()=>{a.onCompleteObservable.notifyObservers(a)})),a}return U(C,((a,o)=>{c(a,null===o||void 0===o?void 0:o.responseURL,null===o||void 0===o?void 0:o.getResponseHeader("content-type"))}),o,s,q,G?a=>{G(a.request,new N(a.message,a.request))}:void 0,T)},U=(a,c,o,i,p,G,T)=>{a=n.CleanUrl(a),a=n.PreprocessUrl(a);const C=n.BaseUrl+a;let L=!1;const e={onCompleteObservable:new t.d,abort:()=>L=!0},g=()=>{let a,t=new s.b,i=null;const g=()=>{t&&(o&&t.removeEventListener("progress",o),a&&t.removeEventListener("readystatechange",a),t.removeEventListener("loadend",M))};let M=()=>{g(),e.onCompleteObservable.notifyObservers(e),e.onCompleteObservable.clear(),o=void 0,a=null,M=null,G=void 0,T=void 0,c=void 0};e.abort=()=>{L=!0,M&&M(),t&&t.readyState!==(XMLHttpRequest.DONE||4)&&t.abort(),null!==i&&(clearTimeout(i),i=null),t=null};const N=a=>{const c=a.message||"Unknown error";G&&t?G(new y(c,t)):j.c.Error(c)},k=j=>{if(t){if(t.open("GET",C),T)try{T(t)}catch(e){return void N(e)}p&&(t.responseType="arraybuffer"),o&&t.addEventListener("progress",o),M&&t.addEventListener("loadend",M),a=()=>{if(!L&&t&&t.readyState===(XMLHttpRequest.DONE||4)){if(a&&t.removeEventListener("readystatechange",a),t.status>=200&&t.status<300||0===t.status&&(!(0,q.k)()||r())){const a=p?t.response:t.responseText;if(null!==a){try{c&&c(a,t)}catch(e){N(e)}return}}const o=n.DefaultRetryStrategy;if(o){const a=o(C,t,j);if(-1!==a)return g(),t=new s.b,void(i=setTimeout((()=>k(j+1)),a))}const T=new y("Error status: "+t.status+" "+t.statusText+" - Unable to load "+C,t);G&&G(T)}},t.addEventListener("readystatechange",a),t.send()}};k(0)};if(i&&i.enableSceneOffline){const s=a=>{a&&a.status>400?G&&G(a):g()},q=()=>{i&&i.loadFile(n.BaseUrl+a,(a=>{!L&&c&&c(a),e.onCompleteObservable.notifyObservers(e)}),o?a=>{!L&&o&&o(a)}:void 0,s,p)};i.open(q,s)}else g();return e},S=a=>{const{match:c,type:o}=R(a);if(c)return o||void 0;const s=a.lastIndexOf(".");switch(a.substring(s+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"nc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,x=a=>M.test(a),R=a=>{const c=M.exec(a);if(null===c||0===c.length)return{match:!1,type:""};return{match:!0,type:c[0].replace("data:","").replace("base64,","")}};function d(a){return(0,G.b)(a.split(",")[1])}const X=a=>(0,G.f)(a.split(",")[1]);let W;g.b._FileToolsLoadImage=w,e.e.loadFile=h,T.s.loadFile=h;((a,c,o,s,q,t,i,p,G,T)=>{W={DecodeBase64UrlToBinary:a,DecodeBase64UrlToString:c,DefaultRetryStrategy:o.DefaultRetryStrategy,BaseUrl:o.BaseUrl,CorsBehavior:o.CorsBehavior,PreprocessUrl:o.PreprocessUrl,IsBase64DataUrl:s,IsFileURL:q,LoadFile:t,LoadImage:i,ReadFile:p,RequestFile:G,SetCorsBehavior:T},Object.defineProperty(W,"DefaultRetryStrategy",{get:function(){return o.DefaultRetryStrategy},set:function(a){o.DefaultRetryStrategy=a}}),Object.defineProperty(W,"BaseUrl",{get:function(){return o.BaseUrl},set:function(a){o.BaseUrl=a}}),Object.defineProperty(W,"PreprocessUrl",{get:function(){return o.PreprocessUrl},set:function(a){o.PreprocessUrl=a}}),Object.defineProperty(W,"CorsBehavior",{get:function(){return o.CorsBehavior},set:function(a){o.CorsBehavior=a}})})(d,X,n,x,r,h,w,Z,U,f)},12779:(a,c,o)=>{function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(a=>{const c=16*Math.random()|0;return("x"===a?c:3&c|8).toString(16)}))}o.d(c,{d:()=>s})},12770:(a,c,o)=>{o.d(c,{b:()=>t});var s=o(12649),q=o(12776);class t{static Instantiate(a){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[a])return this.RegisteredExternalClasses[a];const c=(0,q.c)(a);if(c)return c;s.c.Warn(a+" not found, you may have missed an import.");const o=a.split(".");let t=window||this;for(let s=0,q=o.length;s<q;s++)t=t[o[s]];return"function"!==typeof t?null:t}}t.RegisteredExternalClasses={}},12661:(a,c,o)=>{o.d(c,{b:()=>q});var s=o(12642);class q{static get Now(){return(0,s.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12695:(a,c,o)=>{o.d(c,{b:()=>i,f:()=>t,g:()=>s,k:()=>q});const s=a=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let c="";for(let o=0;o<a.byteLength;o++)c+=String.fromCharCode(a[o]);return c},q=a=>{const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,s,q,t,i,p,G,T="",C=0;const j=ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a);for(;C<j.length;)o=j[C++],s=C<j.length?j[C++]:Number.NaN,q=C<j.length?j[C++]:Number.NaN,t=o>>2,i=(3&o)<<4|s>>4,p=(15&s)<<2|q>>6,G=63&q,isNaN(s)?p=G=64:isNaN(q)&&(G=64),T+=c.charAt(t)+c.charAt(i)+c.charAt(p)+c.charAt(G);return T},t=a=>atob(a),i=a=>{const c=t(a),o=c.length,s=new Uint8Array(new ArrayBuffer(o));for(let q=0;q<o;q++)s[q]=c.charCodeAt(q);return s.buffer}},12787:(a,c,o)=>{function s(a){let c=1;do{c*=2}while(c<a);return c===a}function q(a,c,o){return a*(1-o)+c*o}function t(a){const c=i(a),o=p(a);return c-a>a-o?o:c}function i(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}function p(a){return a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,(a|=a>>16)-(a>>1)}function G(a,c){let o;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:o=p(a);break;case 2:o=t(a);break;default:o=i(a)}return Math.min(o,c)}o.d(c,{b:()=>p,d:()=>G,e:()=>s,f:()=>q,i:()=>t})},12637:(a,c,o)=>{o.r(c),o.d(c,{AsyncLoop:()=>k,Tools:()=>N,className:()=>y});var s=o(12639),q=o(12642),t=o(12649),i=o(12657),p=o(12661),G=o(12667),T=o(12672),C=o(12680),j=o(12689),L=o(12712),e=o(12770),g=o(12779),M=o(12787);class N{static get BaseUrl(){return j.c.BaseUrl}static set BaseUrl(a){j.c.BaseUrl=a}static get CleanUrl(){return j.c.CleanUrl}static set CleanUrl(a){j.c.CleanUrl=a}static IsAbsoluteUrl(a){return 0===a.indexOf("//")||-1!==a.indexOf("://")&&(-1!==a.indexOf(".")&&(-1!==a.indexOf("/")&&(!(a.indexOf(":")>a.indexOf("/"))&&(a.indexOf("://")<a.indexOf(".")||(0===a.indexOf("data:")||0===a.indexOf("blob:"))))))}static set ScriptBaseUrl(a){j.c.ScriptBaseUrl=a}static get ScriptBaseUrl(){return j.c.ScriptBaseUrl}static set CDNBaseUrl(a){N.ScriptBaseUrl=a,N.AssetBaseUrl=a}static set ScriptPreprocessUrl(a){j.c.ScriptPreprocessUrl=a}static get ScriptPreprocessUrl(){return j.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return j.c.DefaultRetryStrategy}static set DefaultRetryStrategy(a){j.c.DefaultRetryStrategy=a}static get CorsBehavior(){return j.c.CorsBehavior}static set CorsBehavior(a){j.c.CorsBehavior=a}static get UseFallbackTexture(){return C.b.UseFallbackTexture}static set UseFallbackTexture(a){C.b.UseFallbackTexture=a}static get RegisteredExternalClasses(){return e.b.RegisteredExternalClasses}static set RegisteredExternalClasses(a){e.b.RegisteredExternalClasses=a}static get fallbackTexture(){return C.b.FallbackTexture}static set fallbackTexture(a){C.b.FallbackTexture=a}static FetchToRef(a,c,o,s,q,t){const i=4*((Math.abs(a)*o%o|0)+(Math.abs(c)*s%s|0)*o);t.r=q[i]/255,t.g=q[i+1]/255,t.b=q[i+2]/255,t.a=q[i+3]/255}static Mix(a,c,o){return 0}static Instantiate(a){return e.b.Instantiate(a)}static SetImmediate(a){L.d.SetImmediate(a)}static IsExponentOfTwo(a){return!0}static FloatRound(a){return Math.fround(a)}static GetFilename(a){const c=a.lastIndexOf("/");return c<0?a:a.substring(c+1)}static GetFolderPath(a){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=a.lastIndexOf("/");return o<0?c?a:"":a.substring(0,o+1)}static ToDegrees(a){return 180*a/Math.PI}static ToRadians(a){return a*Math.PI/180}static SmoothAngleChange(a,c){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const s=this.ToRadians(a),q=this.ToRadians(c);return this.ToDegrees(Math.atan2((1-o)*Math.sin(q)+o*Math.sin(s),(1-o)*Math.cos(q)+o*Math.cos(s)))}static MakeArray(a,c){return!0===c||void 0!==a&&null!=a?Array.isArray(a)?a:[a]:null}static GetPointerPrefix(a){return(0,q.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(a,c){(0,j.w)(a,c)}static SetReferrerPolicyBehavior(a,c){c.referrerPolicy=a}static get PreprocessUrl(){return j.c.PreprocessUrl}static set PreprocessUrl(a){j.c.PreprocessUrl=a}static LoadImage(a,c,o,s,q,t){return(0,j.n)(a,c,o,s,q,t)}static LoadFile(a,c,o,s,q,t){return(0,j.k)(a,c,o,s,q,t)}static async LoadFileAsync(a){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((o,s)=>{(0,j.k)(a,(a=>{o(a)}),void 0,void 0,c,((a,c)=>{s(c)}))}))}static GetAssetUrl(a){if(!a)return"";if(N.AssetBaseUrl&&a.startsWith(N._DefaultAssetsUrl)){const c="/"===N.AssetBaseUrl[N.AssetBaseUrl.length-1]?N.AssetBaseUrl.substring(0,N.AssetBaseUrl.length-1):N.AssetBaseUrl;return a.replace(N._DefaultAssetsUrl,c)}return a}static GetBabylonScriptURL(a,c){if(!a)return"";if(N.ScriptBaseUrl&&a.startsWith(N._DefaultCdnUrl)){const c="/"===N.ScriptBaseUrl[N.ScriptBaseUrl.length-1]?N.ScriptBaseUrl.substring(0,N.ScriptBaseUrl.length-1):N.ScriptBaseUrl;a=a.replace(N._DefaultCdnUrl,c)}return a=N.ScriptPreprocessUrl(a),c&&(a=N.GetAbsoluteUrl(a)),a}static LoadBabylonScript(a,c,o,s){a=N.GetBabylonScriptURL(a),N.LoadScript(a,c,o)}static async LoadBabylonScriptAsync(a){return a=N.GetBabylonScriptURL(a),await N.LoadScriptAsync(a)}static LoadScript(a,c,o,s){let t=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(a),c&&c()}catch(G){null===o||void 0===o||o(`Unable to load script '${a}' in worker`,G)}return}if(!(0,q.k)())return void(null===o||void 0===o||o(`Cannot load script '${a}' outside of a window or a worker`));const i=document.getElementsByTagName("head")[0],p=document.createElement("script");t?(p.setAttribute("type","module"),p.innerText=a):(p.setAttribute("type","text/javascript"),p.setAttribute("src",a)),s&&(p.id=s),p.onload=()=>{c&&c()},p.onerror=c=>{o&&o(`Unable to load script '${a}'`,c)},i.appendChild(p)}static async LoadScriptAsync(a,c){return await new Promise(((o,s)=>{this.LoadScript(a,(()=>{o()}),((a,c)=>{s(c||new Error(a))}),c)}))}static ReadFileAsDataURL(a,c,o){const q=new FileReader,t={onCompleteObservable:new s.d,abort:()=>q.abort()};return q.onloadend=()=>{t.onCompleteObservable.notifyObservers(t)},q.onload=a=>{c(a.target.result)},q.onprogress=o,q.readAsDataURL(a),t}static ReadFile(a,c,o,s,q){return(0,j.r)(a,c,o,s,q)}static FileAsURL(a){const c=new Blob([a]);return window.URL.createObjectURL(c)}static Format(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.toFixed(c)}static DeepCopy(a,c,o,s){i.b.DeepCopy(a,c,o,s)}static IsEmpty(a){for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c))return!1;return!0}static RegisterTopRootEvents(a,c){for(let s=0;s<c.length;s++){const q=c[s];a.addEventListener(q.name,q.handler,!1);try{window.parent&&window.parent.addEventListener(q.name,q.handler,!1)}catch(o){}}}static UnregisterTopRootEvents(a,c){for(let s=0;s<c.length;s++){const q=c[s];a.removeEventListener(q.name,q.handler);try{a.parent&&a.parent.removeEventListener(q.name,q.handler)}catch(o){}}}static async DumpFramebuffer(a,c,o,s){throw(0,G.b)("DumpTools")}static DumpData(a,c,o,s){throw(0,G.b)("DumpTools")}static async DumpDataAsync(a,c,o){throw(0,G.b)("DumpTools")}static _IsOffScreenCanvas(a){return void 0!==a.convertToBlob}static ToBlob(a,c){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",s=arguments.length>3?arguments[3]:void 0;N._IsOffScreenCanvas(a)||a.toBlob||(a.toBlob=function(a,c,o){setTimeout((()=>{const s=atob(this.toDataURL(c,o).split(",")[1]),q=s.length,t=new Uint8Array(q);for(let a=0;a<q;a++)t[a]=s.charCodeAt(a);a(new Blob([t]))}))}),N._IsOffScreenCanvas(a)?a.convertToBlob({type:o,quality:s}).then((a=>c(a))):a.toBlob((function(a){c(a)}),o,s)}static DownloadBlob(a,c){if("download"in document.createElement("a")){if(!c){const a=new Date;c="screenshot_"+((a.getFullYear()+"-"+(a.getMonth()+1)).slice(2)+"-"+a.getDate()+"_"+a.getHours()+"-"+("0"+a.getMinutes()).slice(-2))+".png"}N.Download(a,c)}else if(a&&"undefined"!==typeof URL){const c=URL.createObjectURL(a),o=window.open("");if(!o)return;const s=o.document.createElement("img");s.onload=function(){URL.revokeObjectURL(c)},s.src=c,o.document.body.appendChild(s)}}static EncodeScreenshotCanvasData(a,c){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",s=arguments.length>3?arguments[3]:void 0,q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof s&&c){if(c){if(N._IsOffScreenCanvas(a))return void a.convertToBlob({type:o,quality:q}).then((a=>{const o=new FileReader;o.readAsDataURL(a),o.onloadend=()=>{const a=o.result;c(a)}}));const s=a.toDataURL(o,q);c(s)}}else this.ToBlob(a,(function(a){a&&N.DownloadBlob(a,s),c&&c("")}),o,q)}static Download(a,c){if("undefined"===typeof URL)return;const o=window.URL.createObjectURL(a),s=document.createElement("a");document.body.appendChild(s),s.style.display="none",s.href=o,s.download=c,s.addEventListener("click",(()=>{s.parentElement&&s.parentElement.removeChild(s)})),s.click(),window.URL.revokeObjectURL(o)}static BackCompatCameraNoPreventDefault(a){return"boolean"===typeof a[0]?a[0]:"boolean"===typeof a[1]&&a[1]}static CreateScreenshot(a,c,o,s){throw(0,G.b)("ScreenshotTools")}static async CreateScreenshotAsync(a,c,o){throw(0,G.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(a,c,o,s){throw(0,G.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(a,c,o){throw(0,G.b)("ScreenshotTools")}static RandomId(){return(0,g.d)()}static IsBase64(a){return(0,j.h)(a)}static DecodeBase64(a){return(0,j.b)(a)}static get errorsCount(){return t.c.errorsCount}static Log(a){t.c.Log(a)}static Warn(a){t.c.Warn(a)}static Error(a){t.c.Error(a)}static get LogCache(){return t.c.LogCache}static ClearLogCache(){t.c.ClearLogCache()}static set LogLevels(a){t.c.LogLevels=a}static set PerformanceLogLevel(a){return(a&N.PerformanceUserMarkLogLevel)===N.PerformanceUserMarkLogLevel?(N.StartPerformanceCounter=N._StartUserMark,void(N.EndPerformanceCounter=N._EndUserMark)):(a&N.PerformanceConsoleLogLevel)===N.PerformanceConsoleLogLevel?(N.StartPerformanceCounter=N._StartPerformanceConsole,void(N.EndPerformanceCounter=N._EndPerformanceConsole)):(N.StartPerformanceCounter=N._StartPerformanceCounterDisabled,void(N.EndPerformanceCounter=N._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(a,c){}static _EndPerformanceCounterDisabled(a,c){}static _StartUserMark(a){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!N._Performance){if(!(0,q.k)())return;N._Performance=window.performance}c&&N._Performance.mark&&N._Performance.mark(a+"-Begin")}static _EndUserMark(a){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&N._Performance.mark&&(N._Performance.mark(a+"-End"),N._Performance.measure(a,a+"-Begin",a+"-End"))}static _StartPerformanceConsole(a){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(N._StartUserMark(a,c),console.time&&console.time(a))}static _EndPerformanceConsole(a){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(N._EndUserMark(a,c),console.timeEnd(a))}static get Now(){return p.b.Now}static GetClassName(a){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null;if(!c&&a.getClassName)o=a.getClassName();else{if(a instanceof Object){o=(c?a:Object.getPrototypeOf(a)).constructor.__bjsclassName__}o||(o=typeof a)}return o}static First(a,c){for(const o of a)if(c(o))return o;return null}static getFullClassName(a){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null,s=null;if(!c&&a.getClassName)o=a.getClassName();else{if(a instanceof Object){const q=c?a:Object.getPrototypeOf(a);o=q.constructor.__bjsclassName__,s=q.constructor.__bjsmoduleName__}o||(o=typeof a)}return o?(null!=s?s+".":"")+o:null}static async DelayAsync(a){await new Promise((c=>{setTimeout((()=>{c()}),a)}))}static IsSafari(){return!!(0,q.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function y(a,c){return o=>{o.__bjsclassName__=a,o.__bjsmoduleName__=null!=c?c:null}}N.AssetBaseUrl="",N.UseCustomRequestHeaders=!1,N.CustomRequestHeaders=T.b.CustomRequestHeaders,N.GetDOMTextContent=q.b,N._DefaultCdnUrl="https://cdn.babylonjs.com",N._DefaultAssetsUrl="https://assets.babylonjs.com/core",N.GetAbsoluteUrl="object"===typeof document?a=>{const c=document.createElement("a");return c.href=a,c.href}:"function"===typeof URL&&"object"===typeof location?a=>new URL(a,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},N.NoneLogLevel=t.c.NoneLogLevel,N.MessageLogLevel=t.c.MessageLogLevel,N.WarningLogLevel=t.c.WarningLogLevel,N.ErrorLogLevel=t.c.ErrorLogLevel,N.AllLogLevel=t.c.AllLogLevel,N.IsWindowObjectExist=q.k,N.PerformanceNoneLogLevel=0,N.PerformanceUserMarkLogLevel=1,N.PerformanceConsoleLogLevel=2,N.StartPerformanceCounter=N._StartPerformanceCounterDisabled,N.EndPerformanceCounter=N._EndPerformanceCounterDisabled;class k{constructor(a,c,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=a,this.index=s-1,this._done=!1,this._fn=c,this._successCallback=o}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(a,c,o){const s=new k(a,c,o,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return s.executeNext(),s}static SyncAsyncForLoop(a,c,o,s,q){let t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return k.Run(Math.ceil(a/c),(s=>{q&&q()?s.breakLoop():setTimeout((()=>{for(let t=0;t<c;++t){const i=s.index*c+t;if(i>=a)break;if(o(i),q&&q()){s.breakLoop();break}}s.executeNext()}),t)}),s)}}N.Mix=M.f,N.IsExponentOfTwo=M.e,C.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12776:(a,c,o)=>{o.d(c,{c:()=>t,d:()=>q});const s={};function q(a,c){s[a]=c}function t(a){return s[a]}},12672:(a,c,o)=>{o.d(c,{b:()=>s});class s{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(s.CustomRequestHeaders).length>0||s.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const a in s.CustomRequestHeaders){const c=s.CustomRequestHeaders[a];c&&this._xhr.setRequestHeader(a,c)}}_shouldSkipRequestModifications(a){return s.SkipRequestModificationForBabylonCDN&&(a.includes("preview.babylonjs.com")||a.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(a){this._xhr.onprogress=a}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(a){this._xhr.responseType=a}get timeout(){return this._xhr.timeout}set timeout(a){this._xhr.timeout=a}addEventListener(a,c,o){this._xhr.addEventListener(a,c,o)}removeEventListener(a,c,o){this._xhr.removeEventListener(a,c,o)}abort(){this._xhr.abort()}send(a){s.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(a)}open(a,c){for(const o of s.CustomRequestModifiers){if(this._shouldSkipRequestModifications(c))return;c=o(this._xhr,c)||c}c=(c=c.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=c,this._xhr.open(a,c,!0)}setRequestHeader(a,c){this._xhr.setRequestHeader(a,c)}getResponseHeader(a){return this._xhr.getResponseHeader(a)}}s.CustomRequestHeaders={},s.CustomRequestModifiers=new Array,s.SkipRequestModificationForBabylonCDN=!0}}]);