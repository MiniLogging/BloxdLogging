"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[8],{12682:(p,b,M)=>{M.d(b,{b:()=>a});var h=M(12652),Q=M(12622),mp=M(12687),y=M(12705),P=M(12630);class w{constructor(){let p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,p&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(p){this._zOffset!==p&&(this._zOffset=p,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(p){this._zOffsetUnits!==p&&(this._zOffsetUnits=p,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(p){this._cullFace!==p&&(this._cullFace=p,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(p){this._cull!==p&&(this._cull=p,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(p){this._depthFunc!==p&&(this._depthFunc=p,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(p){this._depthMask!==p&&(this._depthMask=p,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(p){this._depthTest!==p&&(this._depthTest=p,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(p){this._frontFace!==p&&(this._frontFace=p,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(p){this.isDirty&&(this._isCullDirty&&(this.cull?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(p.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(p.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(p.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(p.enable(p.POLYGON_OFFSET_FILL),p.polygonOffset(this.zOffset,this.zOffsetUnits)):p.disable(p.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(p.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class t{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(p){this._func!==p&&(this._func=p,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(p){this._funcRef!==p&&(this._funcRef=p,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(p){this._funcMask!==p&&(this._funcMask=p,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(p){this._opStencilFail!==p&&(this._opStencilFail=p,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(p){this._opDepthFail!==p&&(this._opDepthFail=p,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(p){this._opStencilDepthPass!==p&&(this._opStencilDepthPass=p,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(p){this._mask!==p&&(this._mask=p,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(p){this._enabled!==p&&(this._enabled=p,this._isStencilTestDirty=!0)}constructor(){let p=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,p&&this.reset()}reset(){var p;this.stencilMaterial=void 0,null===(p=this.stencilGlobal)||void 0===p||p.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(p){var b;if(!p)return;const M=!this.useStencilGlobalOnly&&!(null===(b=this.stencilMaterial)||void 0===b||!b.enabled);this.enabled=M?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=M?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=M?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=M?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=M?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=M?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=M?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=M?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(p.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(p.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(p.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class z{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=z.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=z.KEEP,this.opDepthFail=z.KEEP,this.opStencilDepthPass=z.REPLACE}get stencilFunc(){return this.func}set stencilFunc(p){this.func=p}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(p){this.funcRef=p}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(p){this.funcMask=p}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(p){this.opStencilFail=p}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(p){this.opDepthFail=p}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(p){this.opStencilDepthPass=p}get stencilMask(){return this.mask}set stencilMask(p){this.mask=p}get stencilTest(){return this.enabled}set stencilTest(p){this.enabled=p}}z.ALWAYS=519,z.KEEP=7680,z.REPLACE=7681;class x{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(p){this._alphaBlend!==p&&(this._alphaBlend=p,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(p,b,M,h){this._blendConstants[0]===p&&this._blendConstants[1]===b&&this._blendConstants[2]===M&&this._blendConstants[3]===h||(this._blendConstants[0]=p,this._blendConstants[1]=b,this._blendConstants[2]=M,this._blendConstants[3]=h,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(p,b,M,h){this._blendFunctionParameters[0]===p&&this._blendFunctionParameters[1]===b&&this._blendFunctionParameters[2]===M&&this._blendFunctionParameters[3]===h||(this._blendFunctionParameters[0]=p,this._blendFunctionParameters[1]=b,this._blendFunctionParameters[2]=M,this._blendFunctionParameters[3]=h,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(p,b){this._blendEquationParameters[0]===p&&this._blendEquationParameters[1]===b||(this._blendEquationParameters[0]=p,this._blendEquationParameters[1]=b,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(p){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?p.enable(p.BLEND):p.disable(p.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(p.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(p.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(p.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var S=M(12635),X=M(12711),c=M(12620),J=M(12617),g=M(12676),f=M(12721);function Y(p,b){if((0,c.o)()){const{requestAnimationFrame:M}=b||window;if("function"===typeof M)return M(p)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(p);return setTimeout(p,16)}class a{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(p){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get zb(){return this._useReverseDepthBuffer}set zb(p){p!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=p,this._depthCullingState.depthFunc=p?518:515)}setColorWrite(p){p!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=p)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(p){if(p)return this.isNDCHalfZRange?p.IS_NDC_HALF_ZRANGE="":delete p.IS_NDC_HALF_ZRANGE,this.zb?p.USE_REVERSE_DEPTHBUFFER="":delete p.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?p.USE_EXACT_SRGB_CONVERSIONS="":delete p.USE_EXACT_SRGB_CONVERSIONS);{let p="";return this.isNDCHalfZRange&&(p+="#define IS_NDC_HALF_ZRANGE"),this.zb&&(p&&(p+="\n"),p+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(p&&(p+="\n"),p+="#define USE_EXACT_SRGB_CONVERSIONS"),p}}_rebuildInternalTextures(){const p=this._internalTexturesCache.slice();for(const b of p)b._rebuild()}_rebuildRenderTargetWrappers(){const p=this._renderTargetWrapperCache.slice();for(const b of p)b._rebuild()}_rebuildEffects(){for(const p in this._compiledEffects){const b=this._compiledEffects[p];b._pipelineContext=null,b._prepareEffect()}mp.Effect.ResetCache()}_rebuildGraphicsResources(){var p;this.wipeCaches(!0),this._rebuildEffects(),null===(p=this._rebuildComputeEffects)||void 0===p||p.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){Q.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(p){setTimeout((()=>{this._clearEmptyResources();const b=this._depthCullingState.depthTest,M=this._depthCullingState.depthFunc,h=this._depthCullingState.depthMask,Q=this._stencilState.stencilTest;p(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=b,this._depthCullingState.depthFunc=M,this._depthCullingState.depthMask=h,this._stencilState.stencilTest=Q,this._flagContextRestored()}),0)}get S(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(p){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(p){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const p=new Uint8Array(4),b=[p,p,p,p,p,p];this._emptyCubeTexture=this.createRawCubeTexture(b,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(p){if(!p)return this._activeRenderLoops.length=0,void this._cancelFrame();const b=this._activeRenderLoops.indexOf(p);b>=0&&(this._activeRenderLoops.splice(b,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const p=this._frameHandler;if(this._frameHandler=0,(0,c.o)()){const{cancelAnimationFrame:b}=this.getHostWindow()||window;if("function"===typeof b)return b(p)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(p);return clearTimeout(p)}}xb(){this.onBeginFrameObservable.notifyObservers(this)}Sb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(p){this._maxFPS=p,void 0!==p&&(this._minFrameTime=p<=0?Number.MAX_VALUE:1e3/p)}_isOverFrameTime(p){if(!p||void 0===this._maxFPS)return!1;const b=p-this._lastFrameTime;return this._lastFrameTime=p,this._renderAccumulator+=b,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(p){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(p)){let p=!0;(this.S||!this.renderEvenInBackground&&this._windowIsBackground)&&(p=!1),p&&(this.xb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Sb())}}_renderLoop(p){this._processFrame(p),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let p=0;p<this._activeRenderLoops.length;p++){(0,this._activeRenderLoops[p])()}}_renderViews(){return!1}_queueNewFrame(p,b){return Y(p,b)}runRenderLoop(p){-1===this._activeRenderLoops.indexOf(p)&&(this._activeRenderLoops.push(p),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(p){this._depthCullingState.depthTest=p}setZOffset(p){this._depthCullingState.zOffset=this.zb?-p:p}getZOffset(){const p=this._depthCullingState.zOffset;return this.zb?-p:p}setZOffsetUnits(p){this._depthCullingState.zOffsetUnits=this.zb?-p:p}getZOffsetUnits(){const p=this._depthCullingState.zOffsetUnits;return this.zb?-p:p}getHostWindow(){return(0,c.o)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(p){this._compatibilityMode=!0}_rebuildTextures(){for(const p of this.scenes)p._rebuildTextures();for(const p of this._virtualScenes)p._rebuildTextures()}_releaseRenderTargetWrapper(p){const b=this._renderTargetWrapperCache.indexOf(p);-1!==b&&this._renderTargetWrapperCache.splice(b,1)}get currentViewport(){return this._cachedViewport}setViewport(p,b,M){const h=b||this.getRenderWidth(),Q=M||this.getRenderHeight(),mp=p.x||0,y=p.y||0;this._cachedViewport=p,this._viewport(mp*h,y*Q,h*p.width,Q*p.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(p){return new Path2D(p)}get description(){let p=this.name+this.version;return this._caps.parallelShaderCompile&&(p+=" - Parallel shader compilation"),p}_createTextureBase(p,b,M,mp){let y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,P=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,t=arguments.length>7?arguments[7]:void 0,z=arguments.length>8?arguments[8]:void 0,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,S=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,c=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,J=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,g=arguments.length>13?arguments[13]:void 0,Y=arguments.length>14?arguments[14]:void 0,o=arguments.length>15?arguments[15]:void 0;const l="data:"===(p=p||"").substring(0,5),L="blob:"===p.substring(0,5),u=l&&-1!==p.indexOf(";base64,"),e=S||new X.e(this,1);e!==S&&(e.label=p.substring(0,60));const d=p;!this._transformTextureUrl||u||S||x||(p=this._transformTextureUrl(p)),d!==p&&(e._originalUrl=d);const I=p.lastIndexOf(".");let G=J||(I>-1?p.substring(I).toLowerCase():"");G.indexOf("?")>-1&&(G=G.split("?")[0]);const v=(0,f.c)(G,g);mp&&mp.addPendingData(e),e.url=p,e.generateMipMaps=!b,e.samplingMode=y,e.invertY=M,e._useSRGBBuffer=this._getUseSRGBBuffer(!!o,b),this._doNotHandleContextLost||(e._buffer=x);let Z=null;P&&!S&&(Z=e.onLoadedObservable.add(P)),S||this._internalTexturesCache.push(e);const U=(M,S)=>{mp&&mp.removePendingData(e),p===d?(Z&&e.onLoadedObservable.remove(Z),h.c.UseFallbackTexture&&p!==h.c.FallbackTexture&&this._createTextureBase(h.c.FallbackTexture,b,e.invertY,mp,y,null,w,t,z,x,e),M=(M||"Unknown error")+(h.c.UseFallbackTexture?" - Fallback texture was used":""),e.onErrorObservable.notifyObservers({message:M,exception:S}),w&&w(M,S)):(Q.d.Warn(`Failed to load ${p}, falling back to ${d}`),this._createTextureBase(d,b,e.invertY,mp,y,P,w,t,z,x,e,c,J,g,Y,o))};if(v){const b=async p=>{(await v).loadData(p,e,((p,b,M,h,Q,P)=>{P?U("TextureLoader failed to load data"):t(e,G,mp,{width:p,height:b},e.invertY,!M,h,(()=>(Q(),!1)),y)}),Y)};x?x instanceof ArrayBuffer?b(new Uint8Array(x)):ArrayBuffer.isView(x)?b(x):w&&w("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(p,(p=>{b(new Uint8Array(p))}),void 0,mp?mp.offlineProvider:void 0,!0,((p,b)=>{U("Unable to load "+(p&&p.responseURL,b))}))}else{const M=p=>{L&&!this._doNotHandleContextLost&&(e._buffer=p),t(e,G,mp,p,e.invertY,b,!1,z,y)};!l||u?x&&("string"===typeof x.decoding||x.close)?M(x):a._FileToolsLoadImage(p||"",M,U,mp?mp.offlineProvider:null,g,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof x||x instanceof ArrayBuffer||ArrayBuffer.isView(x)||x instanceof Blob?a._FileToolsLoadImage(x,M,U,mp?mp.offlineProvider:null,g,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):x&&M(x)}return e}_rebuildBuffers(){for(const p of this._uniformBuffers)p._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,c.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const p in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,p)&&(this._boundTexturesCache[p]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(p){this._name=p}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(p){this._hardwareScalingLevel=p,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(p){this._doNotHandleContextLost=p}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(p,b,M){var Q,mp;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new w,this._stencilStateComposer=new t,this._stencilState=new z,this._alphaState=new x,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new J.d,this.onCanvasFocusObservable=new J.d,this.onNewSceneAddedObservable=new J.d,this.onResizeObservable=new J.d,this.onCanvasPointerOutObservable=new J.d,this.onEffectErrorObservable=new J.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new J.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=p=>this._renderLoop(p),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new J.d,this.onAfterShaderCompilationObservable=new J.d,this.onBeginFrameObservable=new J.d,this.onEndFrameObservable=new J.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new J.d,this.onContextRestoredObservable=new J.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Xb=new J.d,this.onReleaseEffectsObservable=new J.d,h.c.Instances.push(this),this.startTime=P.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,y.d.SetMatrixPrecision(!!b.useHighPrecisionMatrix),(0,c.k)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=M??!1,b.antialias=p??b.antialias,b.deterministicLockstep=b.deterministicLockstep??!1,b.lockstepMaxSteps=b.lockstepMaxSteps??4,b.timeStep=b.timeStep??1/60,b.cb=b.cb??!0,this._audioContext=(null===(Q=b.audioEngineOptions)||void 0===Q?void 0:Q.audioContext)??null,this._audioDestination=(null===(mp=b.audioEngineOptions)||void 0===mp?void 0:mp.audioDestination)??null,this.premultipliedAlpha=b.premultipliedAlpha??!0,this._doNotHandleContextLost=!!b.doNotHandleContextLost,this._isStencilEnable=!!b.cb,this.useExactSrgbConversions=b.useExactSrgbConversions??!1;const S=(0,c.o)()&&window.devicePixelRatio||1,X=b.limitDeviceRatio||S;M=M||b.adaptToDeviceRatio||!1,this._hardwareScalingLevel=M?1/Math.min(X,S):1,this._lastDevicePixelRatio=S,this._creationOptions=b}resize(){let p,b,M=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const p=(0,c.o)()&&window.devicePixelRatio||1,b=this._lastDevicePixelRatio/p;this._lastDevicePixelRatio=p,this._hardwareScalingLevel*=b}if((0,c.o)()&&(0,c.g)())if(this._renderingCanvas){var h,Q;const M=null===(h=(Q=this._renderingCanvas).getBoundingClientRect)||void 0===h?void 0:h.call(Q);p=this._renderingCanvas.clientWidth||(null===M||void 0===M?void 0:M.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,b=this._renderingCanvas.clientHeight||(null===M||void 0===M?void 0:M.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else p=window.innerWidth,b=window.innerHeight;else p=this._renderingCanvas?this._renderingCanvas.width:100,b=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(p/this._hardwareScalingLevel,b/this._hardwareScalingLevel,M)}setSize(p,b){let M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(p|=0,b|=0,!M&&this._renderingCanvas.width===p&&this._renderingCanvas.height===b)return!1;if(this._renderingCanvas.width=p,this._renderingCanvas.height=b,this.scenes){for(let p=0;p<this.scenes.length;p++){const b=this.scenes[p];for(let p=0;p<b.cameras.length;p++){b.cameras[p]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(p,b,M,h,Q,mp,y,P,w,t,z){throw(0,S.b)("engine.rawTexture")}createRawCubeTexture(p,b,M,h,Q,mp,y,P){throw(0,S.b)("engine.rawTexture")}createRawTexture3D(p,b,M,h,Q,mp,y,P,w,t,z){throw(0,S.b)("engine.rawTexture")}createRawTexture2DArray(p,b,M,h,Q,mp,y,P,w,t,z){throw(0,S.b)("engine.rawTexture")}_sharedInit(p){this._renderingCanvas=p}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const p=navigator.userAgent;this.hostInformation.isMobile=-1!==p.indexOf("Mobile")||-1!==p.indexOf("Mac")&&(0,c.g)()&&"ontouchend"in document},this._checkForMobile(),(0,c.o)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(p){return document.createElement("video")}_reportDrawCall(){var p;let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(p=this._drawCalls)||void 0===p||p.addCount(b,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(p,b){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(p,b){return createImageBitmap(p,b)}resizeImageBitmap(p,b,M){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(p){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(p,b){if("undefined"===typeof document)return new OffscreenCanvas(p,b);const M=document.createElement("canvas");return M.width=p,M.height=b,M}createCanvas(p,b){return a._CreateCanvas(p,b)}static _FileToolsLoadImage(p,b,M,h,Q,mp,y){throw(0,S.b)("FileTools")}_loadFile(p,b,M,h,Q,mp){const y=(0,g.k)(p,b,M,h,Q,mp);return this._activeRequests.push(y),y.onCompleteObservable.add((()=>{const p=this._activeRequests.indexOf(y);-1!==p&&this._activeRequests.splice(p,1)})),y}static _FileToolsLoadFile(p,b,M,h,Q,mp){if(g.d.loadFile)return g.d.loadFile(p,b,M,h,Q,mp);throw(0,S.b)("FileTools")}dispose(){var p;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(p=this.releaseComputeEffects)||void 0===p||p.call(this),mp.Effect.ResetCache();for(const M of this._activeRequests)M.abort();this._boundRenderFunction=null,this.Xb.notifyObservers(this),this.Xb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,c.o)()&&window.removeEventListener("resize",this._checkForMobile);const b=h.c.Instances.indexOf(this);b>=0&&h.c.Instances.splice(b,1),h.c.Instances.length||(h.c.OnEnginesDisposedObservable.notifyObservers(this),h.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(p){throw(0,S.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(p,b){for(let M=0;M<h.c.Instances.length;M++){const Q=h.c.Instances[M];for(let M=0;M<Q.scenes.length;M++)Q.scenes[M].markAllMaterialsAsDirty(p,b)}}}a._RenderPassIdCounter=0,a._RescalePostProcessFactory=null,a.CollisionsEpsilon=.001,a.QueueNewFrame=Y},12652:(p,b,M)=>{M.d(b,{c:()=>Q});var h=M(12617);class Q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}Q.Instances=[],Q.OnEnginesDisposedObservable=new h.d,Q._LastCreatedScene=null,Q.UseFallbackTexture=!0,Q.FallbackTexture=""},12705:(p,b,M)=>{M.d(b,{d:()=>h});class h{static SetMatrixPrecision(p){if(h.MatrixTrackPrecisionChange=!1,p&&!h.MatrixUse64Bits&&h.MatrixTrackedMatrices)for(let b=0;b<h.MatrixTrackedMatrices.length;++b){const p=h.MatrixTrackedMatrices[b],M=p.Jb;p.Jb=new Array(16);for(let b=0;b<16;++b)p.Jb[b]=M[b]}h.MatrixUse64Bits=p,h.MatrixCurrentType=h.MatrixUse64Bits?Array:Float32Array,h.MatrixTrackedMatrices=null}}h.MatrixUse64Bits=!1,h.MatrixTrackPrecisionChange=!0,h.MatrixCurrentType=Float32Array,h.MatrixTrackedMatrices=[]},12721:(p,b,M)=>{M.d(b,{c:()=>y});var h=M(12622);const Q=new Map;function mp(p,b){(function(p){return Q.delete(p)})(p)&&h.d.Warn(`Extension with the name '${p}' already exists`),Q.set(p,b)}function y(p,b){"image/ktx"!==b&&"image/ktx2"!==b||(p=".ktx"),Q.has(p)||(p.endsWith(".ies")&&mp(".ies",(async()=>await M.e(15).then(M.bind(M,15197)).then((p=>new p._IESTextureLoader)))),p.endsWith(".dds")&&mp(".dds",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(19),M.e(18),M.e(28)]).then(M.bind(M,15201)).then((p=>new p._DDSTextureLoader)))),p.endsWith(".basis")&&mp(".basis",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(47)]).then(M.bind(M,15217)).then((p=>new p._BasisTextureLoader)))),p.endsWith(".env")&&mp(".env",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(19),M.e(18),M.e(23),M.e(21),M.e(45),M.e(48)]).then(M.bind(M,15222)).then((p=>new p._ENVTextureLoader)))),p.endsWith(".hdr")&&mp(".hdr",(async()=>await Promise.all([M.e(14),M.e(49)]).then(M.bind(M,15227)).then((p=>new p._HDRTextureLoader)))),(p.endsWith(".ktx")||p.endsWith(".ktx2"))&&(mp(".ktx",(async()=>await M.e(30).then(M.bind(M,15235)).then((p=>new p._KTXTextureLoader)))),mp(".ktx2",(async()=>await M.e(30).then(M.bind(M,15235)).then((p=>new p._KTXTextureLoader))))),p.endsWith(".tga")&&mp(".tga",(async()=>await M.e(50).then(M.bind(M,15241)).then((p=>new p._TGATextureLoader)))),p.endsWith(".exr")&&mp(".exr",(async()=>await M.e(16).then(M.bind(M,15250)).then((p=>new p._ExrTextureLoader)))));const h=Q.get(p);return h?Promise.resolve(h(b)):null}},12711:(p,b,M)=>{M.d(b,{e:()=>y});var h,Q=M(12617),mp=M(12714);!function(p){p[p.Unknown=0]="Unknown",p[p.Url=1]="Url",p[p.Temp=2]="Temp",p[p.Raw=3]="Raw",p[p.Dynamic=4]="Dynamic",p[p.RenderTarget=5]="RenderTarget",p[p.MultiRenderTarget=6]="MultiRenderTarget",p[p.Cube=7]="Cube",p[p.CubeRaw=8]="CubeRaw",p[p.CubePrefiltered=9]="CubePrefiltered",p[p.Raw3D=10]="Raw3D",p[p.Raw2DArray=11]="Raw2DArray",p[p.DepthStencil=12]="DepthStencil",p[p.CubeRawRGBD=13]="CubeRawRGBD",p[p.Depth=14]="Depth"}(h||(h={}));class y extends mp.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(p){this.generateMipMaps=p}get uniqueId(){return this._uniqueId}_setUniqueId(p){this._uniqueId=p}getEngine(){return this._engine}get source(){return this._source}constructor(p,b){let M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new Q.d,this.onErrorObservable=new Q.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=p,this._source=b,this._uniqueId=y._Counter++,M||(this._hardwareTexture=p._createHardwareTexture())}incrementReferences(){this._references++}updateSize(p,b){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,p,b,M),this.width=p,this.height=b,this.depth=M,this.baseWidth=p,this.baseHeight=b,this.baseDepth=M,this._size=p*b*M}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const p=this.onRebuildCallback(this),b=b=>{b._swapAndDie(this,!1),this.isReady=p.isReady};return void(p.isAsync?p.proxy.then(b):b(p.proxy))}let p;switch(this.source){case 2:case 12:case 14:break;case 1:return void(p=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(p=>{p._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:p=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),p._swapAndDie(this,!1),this.isReady=!0;break;case 10:p=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),p._swapAndDie(this,!1),this.isReady=!0;break;case 11:p=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),p._swapAndDie(this,!1),this.isReady=!0;break;case 4:p=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),p._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(p=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{p._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:p=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),p._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return p=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(p=>{p&&p._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(p._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(p){var b;let M=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(b=this._hardwareTexture)||void 0===b||b.setUsage(p._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),p._hardwareTexture=this._hardwareTexture,M&&(p._isRGBD=this._isRGBD),this._lodTextureHigh&&(p._lodTextureHigh&&p._lodTextureHigh.dispose(),p._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(p._lodTextureMid&&p._lodTextureMid.dispose(),p._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(p._lodTextureLow&&p._lodTextureLow.dispose(),p._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(p._irradianceTexture&&p._irradianceTexture.dispose(),p._irradianceTexture=this._irradianceTexture);const h=this._engine.getLoadedTexturesCache();let Q=h.indexOf(this);-1!==Q&&h.splice(Q,1),Q=h.indexOf(p),-1===Q&&h.push(p)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}y._Counter=0},12714:(p,b,M)=>{M.d(b,{e:()=>h});class h{get wrapU(){return this._cachedWrapU}set wrapU(p){this._cachedWrapU=p}get wrapV(){return this._cachedWrapV}set wrapV(p){this._cachedWrapV=p}get wrapR(){return this._cachedWrapR}set wrapR(p){this._cachedWrapR=p}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(p){this._cachedAnisotropicFilteringLevel=p}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(p){this._comparisonFunction=p}get useMipMaps(){return this._useMipMaps}set useMipMaps(p){this._useMipMaps=p}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,mp=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=p,this._cachedWrapV=b,this._cachedWrapR=M,this._cachedAnisotropicFilteringLevel=h,this.samplingMode=Q,this._comparisonFunction=mp,this}compareSampler(p){return this._cachedWrapU===p._cachedWrapU&&this._cachedWrapV===p._cachedWrapV&&this._cachedWrapR===p._cachedWrapR&&this._cachedAnisotropicFilteringLevel===p._cachedAnisotropicFilteringLevel&&this.samplingMode===p.samplingMode&&this._comparisonFunction===p._comparisonFunction&&this._useMipMaps===p._useMipMaps}}},12624:(p,b,M)=>{M.d(b,{b:()=>mp});var h=M(12622);const Q=(p,b,M)=>p?p.getClassName&&"Mesh"===p.getClassName()?null:!p.getClassName||"SubMesh"!==p.getClassName()&&"PhysicsBody"!==p.getClassName()?p.clone?p.clone():Array.isArray(p)?p.slice():M&&"object"===typeof p?{...p}:null:p.clone(b):null;class mp{static DeepCopy(p,b,M,mp){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const P=function(p){const b=[];do{const M=Object.getOwnPropertyNames(p);for(const p of M)-1===b.indexOf(p)&&b.push(p)}while(p=Object.getPrototypeOf(p));return b}(p);for(const t of P){if("_"===t[0]&&(!mp||-1===mp.indexOf(t)))continue;if(t.endsWith("Observable"))continue;if(M&&-1!==M.indexOf(t))continue;const P=p[t],z=typeof P;if("function"!==z)try{if("object"===z)if(P instanceof Uint8Array)b[t]=Uint8Array.from(P);else if(P instanceof Array){if(b[t]=[],P.length>0)if("object"==typeof P[0])for(let p=0;p<P.length;p++){const M=Q(P[p],b,y);-1===b[t].indexOf(M)&&b[t].push(M)}else b[t]=P.slice(0)}else b[t]=Q(P,b,y);else b[t]=P}catch(w){h.d.Warn(w.message)}}}}},12664:(p,b,M)=>{M.d(b,{e:()=>h,i:()=>Q,k:()=>mp});class h extends Error{}h._setPrototypeOf=Object.setPrototypeOf||((p,b)=>(p.__proto__=b,p));const Q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class mp extends h{constructor(p,b,M){super(p),this.errorCode=b,this.innerError=M,this.name="RuntimeError",h._setPrototypeOf(this,mp.prototype)}}},12655:(p,b,M)=>{M.d(b,{e:()=>U,g:()=>a,j:()=>I,k:()=>v,n:()=>e,m:()=>g,o:()=>L,q:()=>u,t:()=>d,u:()=>o});var h=M(12644),Q=M(12620),mp=M(12617);class y{}y.FilesToLoad={};var P=M(12664),w=M(12671),t=M(12673),z=M(12652),x=M(12622),S=M(12680),X=M(12676),c=M(12682);const J=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class g extends P.k{constructor(p,b){super(p,P.i.LoadFileError),this.name="LoadFileError",P.e._setPrototypeOf(this,g.prototype),b instanceof h.e?this.request=b:this.file=b}}class f extends P.k{constructor(p,b){super(p,P.i.RequestFileError),this.request=b,this.name="RequestFileError",P.e._setPrototypeOf(this,f.prototype)}}class Y extends P.k{constructor(p,b){super(p,P.i.ReadFileError),this.file=b,this.name="ReadFileError",P.e._setPrototypeOf(this,Y.prototype)}}const a={DefaultRetryStrategy:class{static ExponentialBackoff(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(M,h,Q)=>0!==h.status||Q>=p||-1!==M.indexOf("file:")?-1:Math.pow(2,Q)*b}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:p=>p,ScriptBaseUrl:"",ScriptPreprocessUrl:p=>p,CleanUrl:p=>p=p.replace(/#/gm,"%23")},o=(p,b)=>{if((!p||0!==p.indexOf("data:"))&&a.CorsBehavior)if("string"===typeof a.CorsBehavior||a.CorsBehavior instanceof String)b.crossOrigin=a.CorsBehavior;else{const M=a.CorsBehavior(p);M&&(b.crossOrigin=M)}},l={getRequiredSize:null},L=function(p,b,M,Q){let mp,P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",t=arguments.length>5?arguments[5]:void 0,x=arguments.length>6&&void 0!==arguments[6]?arguments[6]:z.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===x||void 0===x||!x._features.forceBitmapOverHTMLImageElement))return M("LoadImage is only supported in web or BabylonNative environments."),null;let S=!1;p instanceof ArrayBuffer||ArrayBuffer.isView(p)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(mp=URL.createObjectURL(new Blob([p],{type:P})),S=!0):mp=`data:${P};base64,`+(0,w.k)(p):p instanceof Blob?(mp=URL.createObjectURL(p),S=!0):(mp=a.CleanUrl(p),mp=a.PreprocessUrl(mp));const X=b=>{if(M){const h=mp||p.toString();M(`Error while trying to load image: ${0===h.indexOf("http")||h.length<=128?h:h.slice(0,128)+"..."}`,b)}};if(null!==x&&void 0!==x&&x._features.forceBitmapOverHTMLImageElement)return e(mp,(h=>{x.createImageBitmap(new Blob([h],{type:P}),{premultiplyAlpha:"none",...t}).then((p=>{b(p),S&&URL.revokeObjectURL(mp)})).catch((b=>{M&&M("Error while trying to load image: "+p,b)}))}),void 0,Q||void 0,!0,((p,b)=>{X(b)})),null;const c=new Image;if(l.getRequiredSize){const b=l.getRequiredSize(p);b.width&&(c.width=b.width),b.height&&(c.height=b.height)}o(mp,c);const J=[],g=()=>{for(const p of J)p.target.removeEventListener(p.name,p.handler);J.length=0};J.push({target:c,name:"load",handler:()=>{g(),b(c),S&&c.src&&URL.revokeObjectURL(c.src)}}),J.push({target:c,name:"error",handler:p=>{g(),X(p),S&&c.src&&URL.revokeObjectURL(c.src)}}),J.push({target:document,name:"securitypolicyviolation",handler:p=>{if(p.blockedURI!==c.src||"gb"===p.disposition)return;g();const b=new Error(`CSP violation of policy ${p.effectiveDirective} ${p.blockedURI}. Current policy is ${p.originalPolicy}`);z.c.UseFallbackTexture=!1,X(b),S&&c.src&&URL.revokeObjectURL(c.src),c.src=""}}),(()=>{for(const p of J)p.target.addEventListener(p.name,p.handler)})();const f="blob:"===mp.substring(0,5),Y="data:"===mp.substring(0,5),L=()=>{f||Y||!h.e.IsCustomRequestAvailable?c.src=mp:e(mp,((p,b,M)=>{const h=new Blob([p],{type:!P&&M?M:P}),Q=URL.createObjectURL(h);S=!0,c.src=Q}),void 0,Q||void 0,!0,((p,b)=>{X(b)}))},u=()=>{Q&&Q.loadImage(mp,c)};if(!f&&!Y&&Q&&Q.enableTexturesOffline)Q.open(u,L);else{if(-1!==mp.indexOf("file:")){const p=decodeURIComponent(mp.substring(5).toLowerCase());if(y.FilesToLoad[p]&&"undefined"!==typeof URL){try{let b;try{b=URL.createObjectURL(y.FilesToLoad[p])}catch(d){b=URL.createObjectURL(y.FilesToLoad[p])}c.src=b,S=!0}catch(I){c.src=""}return c}}L()}return c},u=(p,b,M,h,Q)=>{const y=new FileReader,P={onCompleteObservable:new mp.d,abort:()=>y.abort()};return y.onloadend=()=>P.onCompleteObservable.notifyObservers(P),Q&&(y.onerror=()=>{Q(new Y(`Unable to read ${p.name}`,p))}),y.onload=p=>{b(p.target.result)},M&&(y.onprogress=M),h?y.readAsArrayBuffer(p):y.readAsText(p),P},e=(p,b,M,h,Q,w,t)=>{if(p.name)return u(p,b,M,Q,w?p=>{w(void 0,p)}:void 0);const z=p;if(-1!==z.indexOf("file:")){let p=decodeURIComponent(z.substring(5).toLowerCase());0===p.indexOf("./")&&(p=p.substring(2));const h=y.FilesToLoad[p];if(h)return u(h,b,M,Q,w?p=>w(void 0,new g(p.message,p.file)):void 0)}const{match:X,type:c}=Z(z);if(X){const p={onCompleteObservable:new mp.d,abort:()=>()=>{}};try{const p=Q?U(z):q(z);b(p,void 0,c)}catch(P){w?w(void 0,P):x.d.Error(P.message||"Failed to parse the Data URL")}return S.e.SetImmediate((()=>{p.onCompleteObservable.notifyObservers(p)})),p}return d(z,((p,M)=>{b(p,null===M||void 0===M?void 0:M.responseURL,null===M||void 0===M?void 0:M.getResponseHeader("content-type"))}),M,h,Q,w?p=>{w(p.request,new g(p.message,p.request))}:void 0,t)},d=(p,b,M,y,P,w,t)=>{p=a.CleanUrl(p),p=a.PreprocessUrl(p);const z=a.BaseUrl+p;let S=!1;const X={onCompleteObservable:new mp.d,abort:()=>S=!0},c=()=>{let p,mp=new h.e,y=null;const c=()=>{mp&&(M&&mp.removeEventListener("progress",M),p&&mp.removeEventListener("readystatechange",p),mp.removeEventListener("loadend",J))};let J=()=>{c(),X.onCompleteObservable.notifyObservers(X),X.onCompleteObservable.clear(),M=void 0,p=null,J=null,w=void 0,t=void 0,b=void 0};X.abort=()=>{S=!0,J&&J(),mp&&mp.readyState!==(XMLHttpRequest.DONE||4)&&mp.abort(),null!==y&&(clearTimeout(y),y=null),mp=null};const g=p=>{const b=p.message||"Unknown error";w&&mp?w(new f(b,mp)):x.d.Error(b)},Y=x=>{if(mp){if(mp.open("GET",z),t)try{t(mp)}catch(X){return void g(X)}P&&(mp.responseType="arraybuffer"),M&&mp.addEventListener("progress",M),J&&mp.addEventListener("loadend",J),p=()=>{if(!S&&mp&&mp.readyState===(XMLHttpRequest.DONE||4)){if(p&&mp.removeEventListener("readystatechange",p),mp.status>=200&&mp.status<300||0===mp.status&&(!(0,Q.o)()||G())){const p=P?mp.response:mp.responseText;if(null!==p){try{b&&b(p,mp)}catch(X){g(X)}return}}const M=a.DefaultRetryStrategy;if(M){const p=M(z,mp,x);if(-1!==p)return c(),mp=new h.e,void(y=setTimeout((()=>Y(x+1)),p))}const t=new f("Error status: "+mp.status+" "+mp.statusText+" - Unable to load "+z,mp);w&&w(t)}},mp.addEventListener("readystatechange",p),mp.send()}};Y(0)};if(y&&y.enableSceneOffline){const h=p=>{p&&p.status>400?w&&w(p):c()},Q=()=>{y&&y.loadFile(a.BaseUrl+p,(p=>{!S&&b&&b(p),X.onCompleteObservable.notifyObservers(X)}),M?p=>{!S&&M&&M(p)}:void 0,h,P)};y.open(Q,h)}else c();return X},I=p=>{const{match:b,type:M}=Z(p);if(b)return M||void 0;const h=p.lastIndexOf(".");switch(p.substring(h+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"fb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},G=()=>"undefined"!==typeof location&&"file:"===location.protocol,v=p=>J.test(p),Z=p=>{const b=J.exec(p);if(null===b||0===b.length)return{match:!1,type:""};return{match:!0,type:b[0].replace("data:","").replace("base64,","")}};function U(p){return(0,w.d)(p.split(",")[1])}const q=p=>(0,w.h)(p.split(",")[1]);let B;c.b._FileToolsLoadImage=L,X.d.loadFile=e,t.m.loadFile=e;((p,b,M,h,Q,mp,y,P,w,t)=>{B={DecodeBase64UrlToBinary:p,DecodeBase64UrlToString:b,DefaultRetryStrategy:M.DefaultRetryStrategy,BaseUrl:M.BaseUrl,CorsBehavior:M.CorsBehavior,PreprocessUrl:M.PreprocessUrl,IsBase64DataUrl:h,IsFileURL:Q,LoadFile:mp,LoadImage:y,ReadFile:P,RequestFile:w,SetCorsBehavior:t},Object.defineProperty(B,"DefaultRetryStrategy",{get:function(){return M.DefaultRetryStrategy},set:function(p){M.DefaultRetryStrategy=p}}),Object.defineProperty(B,"BaseUrl",{get:function(){return M.BaseUrl},set:function(p){M.BaseUrl=p}}),Object.defineProperty(B,"PreprocessUrl",{get:function(){return M.PreprocessUrl},set:function(p){M.PreprocessUrl=p}}),Object.defineProperty(B,"CorsBehavior",{get:function(){return M.CorsBehavior},set:function(p){M.CorsBehavior=p}})})(U,q,a,v,G,e,L,u,d,o)},12739:(p,b,M)=>{function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(p=>{const b=16*Math.random()|0;return("x"===p?b:3&b|8).toString(16)}))}M.d(b,{c:()=>h})},12728:(p,b,M)=>{M.d(b,{b:()=>mp});var h=M(12622),Q=M(12730);class mp{static Instantiate(p){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[p])return this.RegisteredExternalClasses[p];const b=(0,Q.b)(p);if(b)return b;h.d.Warn(p+" not found, you may have missed an import.");const M=p.split(".");let mp=window||this;for(let h=0,Q=M.length;h<Q;h++)mp=mp[M[h]];return"function"!==typeof mp?null:mp}}mp.RegisteredExternalClasses={}},12630:(p,b,M)=>{M.d(b,{d:()=>Q});var h=M(12620);class Q{static get Now(){return(0,h.o)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12671:(p,b,M)=>{M.d(b,{d:()=>y,h:()=>mp,j:()=>h,k:()=>Q});const h=p=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(p);let b="";for(let M=0;M<p.byteLength;M++)b+=String.fromCharCode(p[M]);return b},Q=p=>{const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M,h,Q,mp,y,P,w,t="",z=0;const x=ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p);for(;z<x.length;)M=x[z++],h=z<x.length?x[z++]:Number.NaN,Q=z<x.length?x[z++]:Number.NaN,mp=M>>2,y=(3&M)<<4|h>>4,P=(15&h)<<2|Q>>6,w=63&Q,isNaN(h)?P=w=64:isNaN(Q)&&(w=64),t+=b.charAt(mp)+b.charAt(y)+b.charAt(P)+b.charAt(w);return t},mp=p=>atob(p),y=p=>{const b=mp(p),M=b.length,h=new Uint8Array(new ArrayBuffer(M));for(let Q=0;Q<M;Q++)h[Q]=b.charCodeAt(Q);return h.buffer}},12741:(p,b,M)=>{function h(p){let b=1;do{b*=2}while(b<p);return b===p}function Q(p,b,M){return p*(1-M)+b*M}function mp(p){const b=y(p),M=P(p);return b-p>p-M?M:b}function y(p){return p--,p|=p>>1,p|=p>>2,p|=p>>4,p|=p>>8,p|=p>>16,++p}function P(p){return p|=p>>1,p|=p>>2,p|=p>>4,p|=p>>8,(p|=p>>16)-(p>>1)}function w(p,b){let M;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:M=P(p);break;case 2:M=mp(p);break;default:M=y(p)}return Math.min(M,b)}M.d(b,{e:()=>P,i:()=>w,j:()=>h,k:()=>Q,m:()=>mp})},12608:(p,b,M)=>{M.r(b),M.d(b,{AsyncLoop:()=>Y,Tools:()=>g,className:()=>f});var h=M(12617),Q=M(12620),mp=M(12622),y=M(12624),P=M(12630),w=M(12635),t=M(12644),z=M(12652),x=M(12655),S=M(12680),X=M(12728),c=M(12739),J=M(12741);class g{static get BaseUrl(){return x.g.BaseUrl}static set BaseUrl(p){x.g.BaseUrl=p}static get CleanUrl(){return x.g.CleanUrl}static set CleanUrl(p){x.g.CleanUrl=p}static IsAbsoluteUrl(p){return 0===p.indexOf("//")||-1!==p.indexOf("://")&&(-1!==p.indexOf(".")&&(-1!==p.indexOf("/")&&(!(p.indexOf(":")>p.indexOf("/"))&&(p.indexOf("://")<p.indexOf(".")||(0===p.indexOf("data:")||0===p.indexOf("blob:"))))))}static set ScriptBaseUrl(p){x.g.ScriptBaseUrl=p}static get ScriptBaseUrl(){return x.g.ScriptBaseUrl}static set CDNBaseUrl(p){g.ScriptBaseUrl=p,g.AssetBaseUrl=p}static set ScriptPreprocessUrl(p){x.g.ScriptPreprocessUrl=p}static get ScriptPreprocessUrl(){return x.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return x.g.DefaultRetryStrategy}static set DefaultRetryStrategy(p){x.g.DefaultRetryStrategy=p}static get CorsBehavior(){return x.g.CorsBehavior}static set CorsBehavior(p){x.g.CorsBehavior=p}static get UseFallbackTexture(){return z.c.UseFallbackTexture}static set UseFallbackTexture(p){z.c.UseFallbackTexture=p}static get RegisteredExternalClasses(){return X.b.RegisteredExternalClasses}static set RegisteredExternalClasses(p){X.b.RegisteredExternalClasses=p}static get fallbackTexture(){return z.c.FallbackTexture}static set fallbackTexture(p){z.c.FallbackTexture=p}static FetchToRef(p,b,M,h,Q,mp){const y=4*((Math.abs(p)*M%M|0)+(Math.abs(b)*h%h|0)*M);mp.r=Q[y]/255,mp.g=Q[y+1]/255,mp.b=Q[y+2]/255,mp.a=Q[y+3]/255}static Mix(p,b,M){return 0}static Instantiate(p){return X.b.Instantiate(p)}static SetImmediate(p){S.e.SetImmediate(p)}static IsExponentOfTwo(p){return!0}static FloatRound(p){return Math.fround(p)}static GetFilename(p){const b=p.lastIndexOf("/");return b<0?p:p.substring(b+1)}static GetFolderPath(p){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const M=p.lastIndexOf("/");return M<0?b?p:"":p.substring(0,M+1)}static ToDegrees(p){return 180*p/Math.PI}static ToRadians(p){return p*Math.PI/180}static SmoothAngleChange(p,b){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const h=this.ToRadians(p),Q=this.ToRadians(b);return this.ToDegrees(Math.atan2((1-M)*Math.sin(Q)+M*Math.sin(h),(1-M)*Math.cos(Q)+M*Math.cos(h)))}static MakeArray(p,b){return!0===b||void 0!==p&&null!=p?Array.isArray(p)?p:[p]:null}static GetPointerPrefix(p){return(0,Q.o)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(p,b){(0,x.u)(p,b)}static SetReferrerPolicyBehavior(p,b){b.referrerPolicy=p}static get PreprocessUrl(){return x.g.PreprocessUrl}static set PreprocessUrl(p){x.g.PreprocessUrl=p}static LoadImage(p,b,M,h,Q,mp){return(0,x.o)(p,b,M,h,Q,mp)}static LoadFile(p,b,M,h,Q,mp){return(0,x.n)(p,b,M,h,Q,mp)}static async LoadFileAsync(p){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((M,h)=>{(0,x.n)(p,(p=>{M(p)}),void 0,void 0,b,((p,b)=>{h(b)}))}))}static GetAssetUrl(p){if(!p)return"";if(g.AssetBaseUrl&&p.startsWith(g._DefaultAssetsUrl)){const b="/"===g.AssetBaseUrl[g.AssetBaseUrl.length-1]?g.AssetBaseUrl.substring(0,g.AssetBaseUrl.length-1):g.AssetBaseUrl;return p.replace(g._DefaultAssetsUrl,b)}return p}static GetBabylonScriptURL(p,b){if(!p)return"";if(g.ScriptBaseUrl&&p.startsWith(g._DefaultCdnUrl)){const b="/"===g.ScriptBaseUrl[g.ScriptBaseUrl.length-1]?g.ScriptBaseUrl.substring(0,g.ScriptBaseUrl.length-1):g.ScriptBaseUrl;p=p.replace(g._DefaultCdnUrl,b)}return p=g.ScriptPreprocessUrl(p),b&&(p=g.GetAbsoluteUrl(p)),p}static LoadBabylonScript(p,b,M,h){p=g.GetBabylonScriptURL(p),g.LoadScript(p,b,M)}static async LoadBabylonScriptAsync(p){return p=g.GetBabylonScriptURL(p),await g.LoadScriptAsync(p)}static LoadScript(p,b,M,h){let mp=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(p),b&&b()}catch(w){null===M||void 0===M||M(`Unable to load script '${p}' in worker`,w)}return}if(!(0,Q.o)())return void(null===M||void 0===M||M(`Cannot load script '${p}' outside of a window or a worker`));const y=document.getElementsByTagName("head")[0],P=document.createElement("script");mp?(P.setAttribute("type","module"),P.innerText=p):(P.setAttribute("type","text/javascript"),P.setAttribute("src",p)),h&&(P.id=h),P.onload=()=>{b&&b()},P.onerror=b=>{M&&M(`Unable to load script '${p}'`,b)},y.appendChild(P)}static async LoadScriptAsync(p,b){return await new Promise(((M,h)=>{this.LoadScript(p,(()=>{M()}),((p,b)=>{h(b||new Error(p))}),b)}))}static ReadFileAsDataURL(p,b,M){const Q=new FileReader,mp={onCompleteObservable:new h.d,abort:()=>Q.abort()};return Q.onloadend=()=>{mp.onCompleteObservable.notifyObservers(mp)},Q.onload=p=>{b(p.target.result)},Q.onprogress=M,Q.readAsDataURL(p),mp}static ReadFile(p,b,M,h,Q){return(0,x.q)(p,b,M,h,Q)}static FileAsURL(p){const b=new Blob([p]);return window.URL.createObjectURL(b)}static Format(p){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return p.toFixed(b)}static DeepCopy(p,b,M,h){y.b.DeepCopy(p,b,M,h)}static IsEmpty(p){for(const b in p)if(Object.prototype.hasOwnProperty.call(p,b))return!1;return!0}static RegisterTopRootEvents(p,b){for(let h=0;h<b.length;h++){const Q=b[h];p.addEventListener(Q.name,Q.handler,!1);try{window.parent&&window.parent.addEventListener(Q.name,Q.handler,!1)}catch(M){}}}static UnregisterTopRootEvents(p,b){for(let h=0;h<b.length;h++){const Q=b[h];p.removeEventListener(Q.name,Q.handler);try{p.parent&&p.parent.removeEventListener(Q.name,Q.handler)}catch(M){}}}static async DumpFramebuffer(p,b,M,h){throw(0,w.b)("DumpTools")}static DumpData(p,b,M,h){throw(0,w.b)("DumpTools")}static async DumpDataAsync(p,b,M){throw(0,w.b)("DumpTools")}static _IsOffScreenCanvas(p){return void 0!==p.convertToBlob}static ToBlob(p,b){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",h=arguments.length>3?arguments[3]:void 0;g._IsOffScreenCanvas(p)||p.toBlob||(p.toBlob=function(p,b,M){setTimeout((()=>{const h=atob(this.toDataURL(b,M).split(",")[1]),Q=h.length,mp=new Uint8Array(Q);for(let p=0;p<Q;p++)mp[p]=h.charCodeAt(p);p(new Blob([mp]))}))}),g._IsOffScreenCanvas(p)?p.convertToBlob({type:M,quality:h}).then((p=>b(p))):p.toBlob((function(p){b(p)}),M,h)}static DownloadBlob(p,b){if("download"in document.createElement("a")){if(!b){const p=new Date;b="screenshot_"+((p.getFullYear()+"-"+(p.getMonth()+1)).slice(2)+"-"+p.getDate()+"_"+p.getHours()+"-"+("0"+p.getMinutes()).slice(-2))+".png"}g.Download(p,b)}else if(p&&"undefined"!==typeof URL){const b=URL.createObjectURL(p),M=window.open("");if(!M)return;const h=M.document.createElement("img");h.onload=function(){URL.revokeObjectURL(b)},h.src=b,M.document.body.appendChild(h)}}static EncodeScreenshotCanvasData(p,b){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",h=arguments.length>3?arguments[3]:void 0,Q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof h&&b){if(b){if(g._IsOffScreenCanvas(p))return void p.convertToBlob({type:M,quality:Q}).then((p=>{const M=new FileReader;M.readAsDataURL(p),M.onloadend=()=>{const p=M.result;b(p)}}));const h=p.toDataURL(M,Q);b(h)}}else this.ToBlob(p,(function(p){p&&g.DownloadBlob(p,h),b&&b("")}),M,Q)}static Download(p,b){if("undefined"===typeof URL)return;const M=window.URL.createObjectURL(p),h=document.createElement("a");document.body.appendChild(h),h.style.display="none",h.href=M,h.download=b,h.addEventListener("click",(()=>{h.parentElement&&h.parentElement.removeChild(h)})),h.click(),window.URL.revokeObjectURL(M)}static BackCompatCameraNoPreventDefault(p){return"boolean"===typeof p[0]?p[0]:"boolean"===typeof p[1]&&p[1]}static CreateScreenshot(p,b,M,h){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotAsync(p,b,M){throw(0,w.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(p,b,M,h){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(p,b,M){throw(0,w.b)("ScreenshotTools")}static RandomId(){return(0,c.c)()}static IsBase64(p){return(0,x.k)(p)}static DecodeBase64(p){return(0,x.e)(p)}static get errorsCount(){return mp.d.errorsCount}static Log(p){mp.d.Log(p)}static Warn(p){mp.d.Warn(p)}static Error(p){mp.d.Error(p)}static get LogCache(){return mp.d.LogCache}static ClearLogCache(){mp.d.ClearLogCache()}static set LogLevels(p){mp.d.LogLevels=p}static set PerformanceLogLevel(p){return(p&g.PerformanceUserMarkLogLevel)===g.PerformanceUserMarkLogLevel?(g.StartPerformanceCounter=g._StartUserMark,void(g.EndPerformanceCounter=g._EndUserMark)):(p&g.PerformanceConsoleLogLevel)===g.PerformanceConsoleLogLevel?(g.StartPerformanceCounter=g._StartPerformanceConsole,void(g.EndPerformanceCounter=g._EndPerformanceConsole)):(g.StartPerformanceCounter=g._StartPerformanceCounterDisabled,void(g.EndPerformanceCounter=g._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(p,b){}static _EndPerformanceCounterDisabled(p,b){}static _StartUserMark(p){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!g._Performance){if(!(0,Q.o)())return;g._Performance=window.performance}b&&g._Performance.mark&&g._Performance.mark(p+"-Begin")}static _EndUserMark(p){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&g._Performance.mark&&(g._Performance.mark(p+"-End"),g._Performance.measure(p,p+"-Begin",p+"-End"))}static _StartPerformanceConsole(p){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(g._StartUserMark(p,b),console.time&&console.time(p))}static _EndPerformanceConsole(p){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(g._EndUserMark(p,b),console.timeEnd(p))}static get Now(){return P.d.Now}static GetClassName(p){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=null;if(!b&&p.getClassName)M=p.getClassName();else{if(p instanceof Object){M=(b?p:Object.getPrototypeOf(p)).constructor.__bjsclassName__}M||(M=typeof p)}return M}static First(p,b){for(const M of p)if(b(M))return M;return null}static getFullClassName(p){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=null,h=null;if(!b&&p.getClassName)M=p.getClassName();else{if(p instanceof Object){const Q=b?p:Object.getPrototypeOf(p);M=Q.constructor.__bjsclassName__,h=Q.constructor.__bjsmoduleName__}M||(M=typeof p)}return M?(null!=h?h+".":"")+M:null}static async DelayAsync(p){await new Promise((b=>{setTimeout((()=>{b()}),p)}))}static IsSafari(){return!!(0,Q.k)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function f(p,b){return M=>{M.__bjsclassName__=p,M.__bjsmoduleName__=null!=b?b:null}}g.AssetBaseUrl="",g.UseCustomRequestHeaders=!1,g.CustomRequestHeaders=t.e.CustomRequestHeaders,g.GetDOMTextContent=Q.c,g._DefaultCdnUrl="https://cdn.babylonjs.com",g._DefaultAssetsUrl="https://assets.babylonjs.com/core",g.GetAbsoluteUrl="object"===typeof document?p=>{const b=document.createElement("a");return b.href=p,b.href}:"function"===typeof URL&&"object"===typeof location?p=>new URL(p,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},g.NoneLogLevel=mp.d.NoneLogLevel,g.MessageLogLevel=mp.d.MessageLogLevel,g.WarningLogLevel=mp.d.WarningLogLevel,g.ErrorLogLevel=mp.d.ErrorLogLevel,g.AllLogLevel=mp.d.AllLogLevel,g.IsWindowObjectExist=Q.o,g.PerformanceNoneLogLevel=0,g.PerformanceUserMarkLogLevel=1,g.PerformanceConsoleLogLevel=2,g.StartPerformanceCounter=g._StartPerformanceCounterDisabled,g.EndPerformanceCounter=g._EndPerformanceCounterDisabled;class Y{constructor(p,b,M){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=p,this.index=h-1,this._done=!1,this._fn=b,this._successCallback=M}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(p,b,M){const h=new Y(p,b,M,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return h.executeNext(),h}static SyncAsyncForLoop(p,b,M,h,Q){let mp=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Y.Run(Math.ceil(p/b),(h=>{Q&&Q()?h.breakLoop():setTimeout((()=>{for(let mp=0;mp<b;++mp){const y=h.index*b+mp;if(y>=p)break;if(M(y),Q&&Q()){h.breakLoop();break}}h.executeNext()}),mp)}),h)}}g.Mix=J.k,g.IsExponentOfTwo=J.j,z.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12730:(p,b,M)=>{M.d(b,{b:()=>mp,c:()=>Q});const h={};function Q(p,b){h[p]=b}function mp(p){return h[p]}},12644:(p,b,M)=>{M.d(b,{e:()=>h});class h{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(h.CustomRequestHeaders).length>0||h.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const p in h.CustomRequestHeaders){const b=h.CustomRequestHeaders[p];b&&this._xhr.setRequestHeader(p,b)}}_shouldSkipRequestModifications(p){return h.SkipRequestModificationForBabylonCDN&&(p.includes("preview.babylonjs.com")||p.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(p){this._xhr.onprogress=p}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(p){this._xhr.responseType=p}get timeout(){return this._xhr.timeout}set timeout(p){this._xhr.timeout=p}addEventListener(p,b,M){this._xhr.addEventListener(p,b,M)}removeEventListener(p,b,M){this._xhr.removeEventListener(p,b,M)}abort(){this._xhr.abort()}send(p){h.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(p)}open(p,b){for(const M of h.CustomRequestModifiers){if(this._shouldSkipRequestModifications(b))return;b=M(this._xhr,b)||b}b=(b=b.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=b,this._xhr.open(p,b,!0)}setRequestHeader(p,b){this._xhr.setRequestHeader(p,b)}getResponseHeader(p){return this._xhr.getResponseHeader(p)}}h.CustomRequestHeaders={},h.CustomRequestModifiers=new Array,h.SkipRequestModificationForBabylonCDN=!0}}]);