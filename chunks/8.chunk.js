"use strict";(self.qcdfysujsyf=self.qcdfysujsyf||[]).push([[8],{12604:(K,A,T)=>{T.d(A,{c:()=>D});var G=T(12565),B=T(12548),L=T(12610),f=T(12629),O=T(12553);class C{constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,K&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(K){this._zOffset!==K&&(this._zOffset=K,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(K){this._zOffsetUnits!==K&&(this._zOffsetUnits=K,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(K){this._cullFace!==K&&(this._cullFace=K,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(K){this._cull!==K&&(this._cull=K,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(K){this._depthFunc!==K&&(this._depthFunc=K,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(K){this._depthMask!==K&&(this._depthMask=K,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(K){this._depthTest!==K&&(this._depthTest=K,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(K){this._frontFace!==K&&(this._frontFace=K,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(K){this.isDirty&&(this._isCullDirty&&(this.cull?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(K.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(K.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(K.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(K.enable(K.POLYGON_OFFSET_FILL),K.polygonOffset(this.zOffset,this.zOffsetUnits)):K.disable(K.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(K.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class Q{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(K){this._func!==K&&(this._func=K,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(K){this._funcRef!==K&&(this._funcRef=K,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(K){this._funcMask!==K&&(this._funcMask=K,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(K){this._opStencilFail!==K&&(this._opStencilFail=K,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(K){this._opDepthFail!==K&&(this._opDepthFail=K,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(K){this._opStencilDepthPass!==K&&(this._opStencilDepthPass=K,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(K){this._mask!==K&&(this._mask=K,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(K){this._enabled!==K&&(this._enabled=K,this._isStencilTestDirty=!0)}constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,K&&this.reset()}reset(){var K;this.stencilMaterial=void 0,null===(K=this.stencilGlobal)||void 0===K||K.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(K){var A;if(!K)return;const T=!this.useStencilGlobalOnly&&!(null===(A=this.stencilMaterial)||void 0===A||!A.enabled);this.enabled=T?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=T?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=T?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=T?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=T?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=T?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=T?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=T?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(K.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(K.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(K.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class Y{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=Y.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=Y.KEEP,this.opDepthFail=Y.KEEP,this.opStencilDepthPass=Y.REPLACE}get stencilFunc(){return this.func}set stencilFunc(K){this.func=K}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(K){this.funcRef=K}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(K){this.funcMask=K}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(K){this.opStencilFail=K}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(K){this.opDepthFail=K}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(K){this.opStencilDepthPass=K}get stencilMask(){return this.mask}set stencilMask(K){this.mask=K}get stencilTest(){return this.enabled}set stencilTest(K){this.enabled=K}}Y.ALWAYS=519,Y.KEEP=7680,Y.REPLACE=7681;class Z{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(K){this._alphaBlend!==K&&(this._alphaBlend=K,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(K,A,T,G){this._blendConstants[0]===K&&this._blendConstants[1]===A&&this._blendConstants[2]===T&&this._blendConstants[3]===G||(this._blendConstants[0]=K,this._blendConstants[1]=A,this._blendConstants[2]=T,this._blendConstants[3]=G,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(K,A,T,G){this._blendFunctionParameters[0]===K&&this._blendFunctionParameters[1]===A&&this._blendFunctionParameters[2]===T&&this._blendFunctionParameters[3]===G||(this._blendFunctionParameters[0]=K,this._blendFunctionParameters[1]=A,this._blendFunctionParameters[2]=T,this._blendFunctionParameters[3]=G,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(K,A){this._blendEquationParameters[0]===K&&this._blendEquationParameters[1]===A||(this._blendEquationParameters[0]=K,this._blendEquationParameters[1]=A,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(K){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?K.enable(K.BLEND):K.disable(K.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(K.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(K.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(K.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var x=T(12555),J=T(12637),b=T(12540),P=T(12534),F=T(12589),d=T(12642);function N(K,A){if((0,b.i)()){const{requestAnimationFrame:T}=A||window;if("function"===typeof T)return T(K)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(K);return setTimeout(K,16)}class D{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(K){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Zf(){return this._useReverseDepthBuffer}set Zf(K){K!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=K,this._depthCullingState.depthFunc=K?518:515)}setColorWrite(K){K!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=K)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(K){if(K)return this.isNDCHalfZRange?K.IS_NDC_HALF_ZRANGE="":delete K.IS_NDC_HALF_ZRANGE,this.Zf?K.USE_REVERSE_DEPTHBUFFER="":delete K.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?K.USE_EXACT_SRGB_CONVERSIONS="":delete K.USE_EXACT_SRGB_CONVERSIONS);{let K="";return this.isNDCHalfZRange&&(K+="#define IS_NDC_HALF_ZRANGE"),this.Zf&&(K&&(K+="\n"),K+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(K&&(K+="\n"),K+="#define USE_EXACT_SRGB_CONVERSIONS"),K}}_rebuildInternalTextures(){const K=this._internalTexturesCache.slice();for(const A of K)A._rebuild()}_rebuildRenderTargetWrappers(){const K=this._renderTargetWrapperCache.slice();for(const A of K)A._rebuild()}_rebuildEffects(){for(const K in this._compiledEffects){const A=this._compiledEffects[K];A._pipelineContext=null,A._prepareEffect()}L.Effect.ResetCache()}_rebuildGraphicsResources(){var K;this.wipeCaches(!0),this._rebuildEffects(),null===(K=this._rebuildComputeEffects)||void 0===K||K.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){B.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(K){setTimeout((()=>{this._clearEmptyResources();const A=this._depthCullingState.depthTest,T=this._depthCullingState.depthFunc,G=this._depthCullingState.depthMask,B=this._stencilState.stencilTest;K(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=A,this._depthCullingState.depthFunc=T,this._depthCullingState.depthMask=G,this._stencilState.stencilTest=B,this._flagContextRestored()}),0)}get O(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(K){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(K){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const K=new Uint8Array(4),A=[K,K,K,K,K,K];this._emptyCubeTexture=this.createRawCubeTexture(A,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(K){if(!K)return this._activeRenderLoops.length=0,void this._cancelFrame();const A=this._activeRenderLoops.indexOf(K);A>=0&&(this._activeRenderLoops.splice(A,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const K=this._frameHandler;if(this._frameHandler=0,(0,b.i)()){const{cancelAnimationFrame:A}=this.getHostWindow()||window;if("function"===typeof A)return A(K)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(K);return clearTimeout(K)}}Jf(){this.onBeginFrameObservable.notifyObservers(this)}Pf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(K){this._maxFPS=K,void 0!==K&&(this._minFrameTime=K<=0?Number.MAX_VALUE:1e3/K)}_isOverFrameTime(K){if(!K||void 0===this._maxFPS)return!1;const A=K-this._lastFrameTime;return this._lastFrameTime=K,this._renderAccumulator+=A,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(K){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(K)){let K=!0;(this.O||!this.renderEvenInBackground&&this._windowIsBackground)&&(K=!1),K&&(this.Jf(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Pf())}}_renderLoop(K){this._processFrame(K),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let K=0;K<this._activeRenderLoops.length;K++){(0,this._activeRenderLoops[K])()}}_renderViews(){return!1}_queueNewFrame(K,A){return N(K,A)}runRenderLoop(K){-1===this._activeRenderLoops.indexOf(K)&&(this._activeRenderLoops.push(K),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(K){this._depthCullingState.depthTest=K}setZOffset(K){this._depthCullingState.zOffset=this.Zf?-K:K}getZOffset(){const K=this._depthCullingState.zOffset;return this.Zf?-K:K}setZOffsetUnits(K){this._depthCullingState.zOffsetUnits=this.Zf?-K:K}getZOffsetUnits(){const K=this._depthCullingState.zOffsetUnits;return this.Zf?-K:K}getHostWindow(){return(0,b.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(K){this._compatibilityMode=!0}_rebuildTextures(){for(const K of this.scenes)K._rebuildTextures();for(const K of this._virtualScenes)K._rebuildTextures()}_releaseRenderTargetWrapper(K){const A=this._renderTargetWrapperCache.indexOf(K);-1!==A&&this._renderTargetWrapperCache.splice(A,1)}get currentViewport(){return this._cachedViewport}setViewport(K,A,T){const G=A||this.getRenderWidth(),B=T||this.getRenderHeight(),L=K.x||0,f=K.y||0;this._cachedViewport=K,this._viewport(L*G,f*B,G*K.width,B*K.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(K){return new Path2D(K)}get description(){let K=this.name+this.version;return this._caps.parallelShaderCompile&&(K+=" - Parallel shader compilation"),K}_createTextureBase(K,A,T,L){let f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Q=arguments.length>7?arguments[7]:void 0,Y=arguments.length>8?arguments[8]:void 0,Z=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,x=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,P=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,F=arguments.length>13?arguments[13]:void 0,N=arguments.length>14?arguments[14]:void 0,mK=arguments.length>15?arguments[15]:void 0;const U="data:"===(K=K||"").substring(0,5),z="blob:"===K.substring(0,5),g=U&&-1!==K.indexOf(";base64,"),S=x||new J.b(this,1);S!==x&&(S.label=K.substring(0,60));const l=K;!this._transformTextureUrl||g||x||Z||(K=this._transformTextureUrl(K)),l!==K&&(S._originalUrl=l);const u=K.lastIndexOf(".");let c=P||(u>-1?K.substring(u).toLowerCase():"");c.indexOf("?")>-1&&(c=c.split("?")[0]);const n=(0,d.b)(c,F);L&&L.addPendingData(S),S.url=K,S.generateMipMaps=!A,S.samplingMode=f,S.invertY=T,S._useSRGBBuffer=this._getUseSRGBBuffer(!!mK,A),this._doNotHandleContextLost||(S._buffer=Z);let H=null;O&&!x&&(H=S.onLoadedObservable.add(O)),x||this._internalTexturesCache.push(S);const e=(T,x)=>{L&&L.removePendingData(S),K===l?(H&&S.onLoadedObservable.remove(H),G.b.UseFallbackTexture&&K!==G.b.FallbackTexture&&this._createTextureBase(G.b.FallbackTexture,A,S.invertY,L,f,null,C,Q,Y,Z,S),T=(T||"Unknown error")+(G.b.UseFallbackTexture?" - Fallback texture was used":""),S.onErrorObservable.notifyObservers({message:T,exception:x}),C&&C(T,x)):(B.d.Warn(`Failed to load ${K}, falling back to ${l}`),this._createTextureBase(l,A,S.invertY,L,f,O,C,Q,Y,Z,S,b,P,F,N,mK))};if(n){const A=async K=>{(await n).loadData(K,S,((K,A,T,G,B,O)=>{O?e("TextureLoader failed to load data"):Q(S,c,L,{width:K,height:A},S.invertY,!T,G,(()=>(B(),!1)),f)}),N)};Z?Z instanceof ArrayBuffer?A(new Uint8Array(Z)):ArrayBuffer.isView(Z)?A(Z):C&&C("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(K,(K=>{A(new Uint8Array(K))}),void 0,L?L.offlineProvider:void 0,!0,((K,A)=>{e("Unable to load "+(K&&K.responseURL,A))}))}else{const T=K=>{z&&!this._doNotHandleContextLost&&(S._buffer=K),Q(S,c,L,K,S.invertY,A,!1,Y,f)};!U||g?Z&&("string"===typeof Z.decoding||Z.close)?T(Z):D._FileToolsLoadImage(K||"",T,e,L?L.offlineProvider:null,F,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Z||Z instanceof ArrayBuffer||ArrayBuffer.isView(Z)||Z instanceof Blob?D._FileToolsLoadImage(Z,T,e,L?L.offlineProvider:null,F,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Z&&T(Z)}return S}_rebuildBuffers(){for(const K of this._uniformBuffers)K._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,b.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const K in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,K)&&(this._boundTexturesCache[K]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(K){this._name=K}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(K){this._hardwareScalingLevel=K,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(K){this._doNotHandleContextLost=K}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(K,A,T){var B,L;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new C,this._stencilStateComposer=new Q,this._stencilState=new Y,this._alphaState=new Z,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new P.e,this.onCanvasFocusObservable=new P.e,this.onNewSceneAddedObservable=new P.e,this.onResizeObservable=new P.e,this.onCanvasPointerOutObservable=new P.e,this.onEffectErrorObservable=new P.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new P.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=K=>this._renderLoop(K),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new P.e,this.onAfterShaderCompilationObservable=new P.e,this.onBeginFrameObservable=new P.e,this.onEndFrameObservable=new P.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new P.e,this.onContextRestoredObservable=new P.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Ff=new P.e,this.onReleaseEffectsObservable=new P.e,G.b.Instances.push(this),this.startTime=O.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,f.b.SetMatrixPrecision(!!A.useHighPrecisionMatrix),(0,b.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=T??!1,A.antialias=K??A.antialias,A.deterministicLockstep=A.deterministicLockstep??!1,A.lockstepMaxSteps=A.lockstepMaxSteps??4,A.timeStep=A.timeStep??1/60,A.df=A.df??!0,this._audioContext=(null===(B=A.audioEngineOptions)||void 0===B?void 0:B.audioContext)??null,this._audioDestination=(null===(L=A.audioEngineOptions)||void 0===L?void 0:L.audioDestination)??null,this.premultipliedAlpha=A.premultipliedAlpha??!0,this._doNotHandleContextLost=!!A.doNotHandleContextLost,this._isStencilEnable=!!A.df,this.useExactSrgbConversions=A.useExactSrgbConversions??!1;const x=(0,b.i)()&&window.devicePixelRatio||1,J=A.limitDeviceRatio||x;T=T||A.adaptToDeviceRatio||!1,this._hardwareScalingLevel=T?1/Math.min(J,x):1,this._lastDevicePixelRatio=x,this._creationOptions=A}resize(){let K,A,T=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const K=(0,b.i)()&&window.devicePixelRatio||1,A=this._lastDevicePixelRatio/K;this._lastDevicePixelRatio=K,this._hardwareScalingLevel*=A}if((0,b.i)()&&(0,b.d)())if(this._renderingCanvas){var G,B;const T=null===(G=(B=this._renderingCanvas).getBoundingClientRect)||void 0===G?void 0:G.call(B);K=this._renderingCanvas.clientWidth||(null===T||void 0===T?void 0:T.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,A=this._renderingCanvas.clientHeight||(null===T||void 0===T?void 0:T.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else K=window.innerWidth,A=window.innerHeight;else K=this._renderingCanvas?this._renderingCanvas.width:100,A=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(K/this._hardwareScalingLevel,A/this._hardwareScalingLevel,T)}setSize(K,A){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(K|=0,A|=0,!T&&this._renderingCanvas.width===K&&this._renderingCanvas.height===A)return!1;if(this._renderingCanvas.width=K,this._renderingCanvas.height=A,this.scenes){for(let K=0;K<this.scenes.length;K++){const A=this.scenes[K];for(let K=0;K<A.cameras.length;K++){A.cameras[K]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(K,A,T,G,B,L,f,O,C,Q,Y){throw(0,x.c)("engine.rawTexture")}createRawCubeTexture(K,A,T,G,B,L,f,O){throw(0,x.c)("engine.rawTexture")}createRawTexture3D(K,A,T,G,B,L,f,O,C,Q,Y){throw(0,x.c)("engine.rawTexture")}createRawTexture2DArray(K,A,T,G,B,L,f,O,C,Q,Y){throw(0,x.c)("engine.rawTexture")}_sharedInit(K){this._renderingCanvas=K}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const K=navigator.userAgent;this.hostInformation.isMobile=-1!==K.indexOf("Mobile")||-1!==K.indexOf("Mac")&&(0,b.d)()&&"ontouchend"in document},this._checkForMobile(),(0,b.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(K){return document.createElement("video")}_reportDrawCall(){var K;let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(K=this._drawCalls)||void 0===K||K.addCount(A,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(K,A){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(K,A){return createImageBitmap(K,A)}resizeImageBitmap(K,A,T){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(K){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(K,A){if("undefined"===typeof document)return new OffscreenCanvas(K,A);const T=document.createElement("canvas");return T.width=K,T.height=A,T}createCanvas(K,A){return D._CreateCanvas(K,A)}static _FileToolsLoadImage(K,A,T,G,B,L,f){throw(0,x.c)("FileTools")}_loadFile(K,A,T,G,B,L){const f=(0,F.l)(K,A,T,G,B,L);return this._activeRequests.push(f),f.onCompleteObservable.add((()=>{const K=this._activeRequests.indexOf(f);-1!==K&&this._activeRequests.splice(K,1)})),f}static _FileToolsLoadFile(K,A,T,G,B,L){if(F.e.loadFile)return F.e.loadFile(K,A,T,G,B,L);throw(0,x.c)("FileTools")}dispose(){var K;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(K=this.releaseComputeEffects)||void 0===K||K.call(this),L.Effect.ResetCache();for(const T of this._activeRequests)T.abort();this._boundRenderFunction=null,this.Ff.notifyObservers(this),this.Ff.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,b.i)()&&window.removeEventListener("resize",this._checkForMobile);const A=G.b.Instances.indexOf(this);A>=0&&G.b.Instances.splice(A,1),G.b.Instances.length||(G.b.OnEnginesDisposedObservable.notifyObservers(this),G.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(K){throw(0,x.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(K,A){for(let T=0;T<G.b.Instances.length;T++){const B=G.b.Instances[T];for(let T=0;T<B.scenes.length;T++)B.scenes[T].markAllMaterialsAsDirty(K,A)}}}D._RenderPassIdCounter=0,D._RescalePostProcessFactory=null,D.CollisionsEpsilon=.001,D.QueueNewFrame=N},12565:(K,A,T)=>{T.d(A,{b:()=>B});var G=T(12534);class B{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}B.Instances=[],B.OnEnginesDisposedObservable=new G.e,B._LastCreatedScene=null,B.UseFallbackTexture=!0,B.FallbackTexture=""},12629:(K,A,T)=>{T.d(A,{b:()=>G});class G{static SetMatrixPrecision(K){if(G.MatrixTrackPrecisionChange=!1,K&&!G.MatrixUse64Bits&&G.MatrixTrackedMatrices)for(let A=0;A<G.MatrixTrackedMatrices.length;++A){const K=G.MatrixTrackedMatrices[A],T=K.zf;K.zf=new Array(16);for(let A=0;A<16;++A)K.zf[A]=T[A]}G.MatrixUse64Bits=K,G.MatrixCurrentType=G.MatrixUse64Bits?Array:Float32Array,G.MatrixTrackedMatrices=null}}G.MatrixUse64Bits=!1,G.MatrixTrackPrecisionChange=!0,G.MatrixCurrentType=Float32Array,G.MatrixTrackedMatrices=[]},12642:(K,A,T)=>{T.d(A,{b:()=>f});var G=T(12548);const B=new Map;function L(K,A){(function(K){return B.delete(K)})(K)&&G.d.Warn(`Extension with the name '${K}' already exists`),B.set(K,A)}function f(K,A){"image/ktx"!==A&&"image/ktx2"!==A||(K=".ktx"),B.has(K)||(K.endsWith(".ies")&&L(".ies",(async()=>await T.e(15).then(T.bind(T,15123)).then((K=>new K._IESTextureLoader)))),K.endsWith(".dds")&&L(".dds",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(28)]).then(T.bind(T,15125)).then((K=>new K._DDSTextureLoader)))),K.endsWith(".basis")&&L(".basis",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(47)]).then(T.bind(T,15137)).then((K=>new K._BasisTextureLoader)))),K.endsWith(".env")&&L(".env",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(23),T.e(21),T.e(45),T.e(48)]).then(T.bind(T,15143)).then((K=>new K._ENVTextureLoader)))),K.endsWith(".hdr")&&L(".hdr",(async()=>await Promise.all([T.e(14),T.e(49)]).then(T.bind(T,15146)).then((K=>new K._HDRTextureLoader)))),(K.endsWith(".ktx")||K.endsWith(".ktx2"))&&(L(".ktx",(async()=>await T.e(30).then(T.bind(T,15154)).then((K=>new K._KTXTextureLoader)))),L(".ktx2",(async()=>await T.e(30).then(T.bind(T,15154)).then((K=>new K._KTXTextureLoader))))),K.endsWith(".tga")&&L(".tga",(async()=>await T.e(50).then(T.bind(T,15163)).then((K=>new K._TGATextureLoader)))),K.endsWith(".exr")&&L(".exr",(async()=>await T.e(16).then(T.bind(T,15168)).then((K=>new K._ExrTextureLoader)))));const G=B.get(K);return G?Promise.resolve(G(A)):null}},12637:(K,A,T)=>{T.d(A,{b:()=>f});var G,B=T(12534),L=T(12639);!function(K){K[K.Unknown=0]="Unknown",K[K.Url=1]="Url",K[K.Temp=2]="Temp",K[K.Raw=3]="Raw",K[K.Dynamic=4]="Dynamic",K[K.RenderTarget=5]="RenderTarget",K[K.MultiRenderTarget=6]="MultiRenderTarget",K[K.Cube=7]="Cube",K[K.CubeRaw=8]="CubeRaw",K[K.CubePrefiltered=9]="CubePrefiltered",K[K.Raw3D=10]="Raw3D",K[K.Raw2DArray=11]="Raw2DArray",K[K.DepthStencil=12]="DepthStencil",K[K.CubeRawRGBD=13]="CubeRawRGBD",K[K.Depth=14]="Depth"}(G||(G={}));class f extends L.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(K){this.generateMipMaps=K}get uniqueId(){return this._uniqueId}_setUniqueId(K){this._uniqueId=K}getEngine(){return this._engine}get source(){return this._source}constructor(K,A){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new B.e,this.onErrorObservable=new B.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=K,this._source=A,this._uniqueId=f._Counter++,T||(this._hardwareTexture=K._createHardwareTexture())}incrementReferences(){this._references++}updateSize(K,A){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,K,A,T),this.width=K,this.height=A,this.depth=T,this.baseWidth=K,this.baseHeight=A,this.baseDepth=T,this._size=K*A*T}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const K=this.onRebuildCallback(this),A=A=>{A._swapAndDie(this,!1),this.isReady=K.isReady};return void(K.isAsync?K.proxy.then(A):A(K.proxy))}let K;switch(this.source){case 2:case 12:case 14:break;case 1:return void(K=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(K=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:K=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),K._swapAndDie(this,!1),this.isReady=!0;break;case 10:K=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 11:K=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 4:K=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),K._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(K=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:K=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),K._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return K=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(K=>{K&&K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(K._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(K){var A;let T=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(A=this._hardwareTexture)||void 0===A||A.setUsage(K._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),K._hardwareTexture=this._hardwareTexture,T&&(K._isRGBD=this._isRGBD),this._lodTextureHigh&&(K._lodTextureHigh&&K._lodTextureHigh.dispose(),K._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(K._lodTextureMid&&K._lodTextureMid.dispose(),K._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(K._lodTextureLow&&K._lodTextureLow.dispose(),K._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(K._irradianceTexture&&K._irradianceTexture.dispose(),K._irradianceTexture=this._irradianceTexture);const G=this._engine.getLoadedTexturesCache();let B=G.indexOf(this);-1!==B&&G.splice(B,1),B=G.indexOf(K),-1===B&&G.push(K)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}f._Counter=0},12639:(K,A,T)=>{T.d(A,{c:()=>G});class G{get wrapU(){return this._cachedWrapU}set wrapU(K){this._cachedWrapU=K}get wrapV(){return this._cachedWrapV}set wrapV(K){this._cachedWrapV=K}get wrapR(){return this._cachedWrapR}set wrapR(K){this._cachedWrapR=K}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(K){this._cachedAnisotropicFilteringLevel=K}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(K){this._comparisonFunction=K}get useMipMaps(){return this._useMipMaps}set useMipMaps(K){this._useMipMaps=K}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=K,this._cachedWrapV=A,this._cachedWrapR=T,this._cachedAnisotropicFilteringLevel=G,this.samplingMode=B,this._comparisonFunction=L,this}compareSampler(K){return this._cachedWrapU===K._cachedWrapU&&this._cachedWrapV===K._cachedWrapV&&this._cachedWrapR===K._cachedWrapR&&this._cachedAnisotropicFilteringLevel===K._cachedAnisotropicFilteringLevel&&this.samplingMode===K.samplingMode&&this._comparisonFunction===K._comparisonFunction&&this._useMipMaps===K._useMipMaps}}},12550:(K,A,T)=>{T.d(A,{c:()=>L});var G=T(12548);const B=(K,A,T)=>K?K.getClassName&&"Mesh"===K.getClassName()?null:!K.getClassName||"SubMesh"!==K.getClassName()&&"PhysicsBody"!==K.getClassName()?K.clone?K.clone():Array.isArray(K)?K.slice():T&&"object"===typeof K?{...K}:null:K.clone(A):null;class L{static DeepCopy(K,A,T,L){let f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const O=function(K){const A=[];do{const T=Object.getOwnPropertyNames(K);for(const K of T)-1===A.indexOf(K)&&A.push(K)}while(K=Object.getPrototypeOf(K));return A}(K);for(const Q of O){if("_"===Q[0]&&(!L||-1===L.indexOf(Q)))continue;if(Q.endsWith("Observable"))continue;if(T&&-1!==T.indexOf(Q))continue;const O=K[Q],Y=typeof O;if("function"!==Y)try{if("object"===Y)if(O instanceof Uint8Array)A[Q]=Uint8Array.from(O);else if(O instanceof Array){if(A[Q]=[],O.length>0)if("object"==typeof O[0])for(let K=0;K<O.length;K++){const T=B(O[K],A,f);-1===A[Q].indexOf(T)&&A[Q].push(T)}else A[Q]=O.slice(0)}else A[Q]=B(O,A,f);else A[Q]=O}catch(C){G.d.Warn(C.message)}}}}},12573:(K,A,T)=>{T.d(A,{c:()=>G,g:()=>B,i:()=>L});class G extends Error{}G._setPrototypeOf=Object.setPrototypeOf||((K,A)=>(K.__proto__=A,K));const B={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class L extends G{constructor(K,A,T){super(K),this.errorCode=A,this.innerError=T,this.name="RuntimeError",G._setPrototypeOf(this,L.prototype)}}},12571:(K,A,T)=>{T.d(A,{d:()=>e,f:()=>D,i:()=>u,m:()=>n,s:()=>S,p:()=>F,u:()=>z,v:()=>g,w:()=>l,y:()=>mK});var G=T(12563),B=T(12540),L=T(12534);class f{}f.FilesToLoad={};var O=T(12573),C=T(12579),Q=T(12586),Y=T(12565),Z=T(12548),x=T(12596),J=T(12589),b=T(12604);const P=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class F extends O.i{constructor(K,A){super(K,O.g.LoadFileError),this.name="LoadFileError",O.c._setPrototypeOf(this,F.prototype),A instanceof G.b?this.request=A:this.file=A}}class d extends O.i{constructor(K,A){super(K,O.g.RequestFileError),this.request=A,this.name="RequestFileError",O.c._setPrototypeOf(this,d.prototype)}}class N extends O.i{constructor(K,A){super(K,O.g.ReadFileError),this.file=A,this.name="ReadFileError",O.c._setPrototypeOf(this,N.prototype)}}const D={DefaultRetryStrategy:class{static ExponentialBackoff(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(T,G,B)=>0!==G.status||B>=K||-1!==T.indexOf("file:")?-1:Math.pow(2,B)*A}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:K=>K,ScriptBaseUrl:"",ScriptPreprocessUrl:K=>K,CleanUrl:K=>K=K.replace(/#/gm,"%23")},mK=(K,A)=>{if((!K||0!==K.indexOf("data:"))&&D.CorsBehavior)if("string"===typeof D.CorsBehavior||D.CorsBehavior instanceof String)A.crossOrigin=D.CorsBehavior;else{const T=D.CorsBehavior(K);T&&(A.crossOrigin=T)}},U={getRequiredSize:null},z=function(K,A,T,B){let L,O=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",Q=arguments.length>5?arguments[5]:void 0,Z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Y.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Z||void 0===Z||!Z._features.forceBitmapOverHTMLImageElement))return T("LoadImage is only supported in web or BabylonNative environments."),null;let x=!1;K instanceof ArrayBuffer||ArrayBuffer.isView(K)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(L=URL.createObjectURL(new Blob([K],{type:O})),x=!0):L=`data:${O};base64,`+(0,C.j)(K):K instanceof Blob?(L=URL.createObjectURL(K),x=!0):(L=D.CleanUrl(K),L=D.PreprocessUrl(L));const J=A=>{if(T){const G=L||K.toString();T(`Error while trying to load image: ${0===G.indexOf("http")||G.length<=128?G:G.slice(0,128)+"..."}`,A)}};if(null!==Z&&void 0!==Z&&Z._features.forceBitmapOverHTMLImageElement)return S(L,(G=>{Z.createImageBitmap(new Blob([G],{type:O}),{premultiplyAlpha:"none",...Q}).then((K=>{A(K),x&&URL.revokeObjectURL(L)})).catch((A=>{T&&T("Error while trying to load image: "+K,A)}))}),void 0,B||void 0,!0,((K,A)=>{J(A)})),null;const b=new Image;if(U.getRequiredSize){const A=U.getRequiredSize(K);A.width&&(b.width=A.width),A.height&&(b.height=A.height)}mK(L,b);const P=[],F=()=>{for(const K of P)K.target.removeEventListener(K.name,K.handler);P.length=0};P.push({target:b,name:"load",handler:()=>{F(),A(b),x&&b.src&&URL.revokeObjectURL(b.src)}}),P.push({target:b,name:"error",handler:K=>{F(),J(K),x&&b.src&&URL.revokeObjectURL(b.src)}}),P.push({target:document,name:"securitypolicyviolation",handler:K=>{if(K.blockedURI!==b.src||"gf"===K.disposition)return;F();const A=new Error(`CSP violation of policy ${K.effectiveDirective} ${K.blockedURI}. Current policy is ${K.originalPolicy}`);Y.b.UseFallbackTexture=!1,J(A),x&&b.src&&URL.revokeObjectURL(b.src),b.src=""}}),(()=>{for(const K of P)K.target.addEventListener(K.name,K.handler)})();const d="blob:"===L.substring(0,5),N="data:"===L.substring(0,5),z=()=>{d||N||!G.b.IsCustomRequestAvailable?b.src=L:S(L,((K,A,T)=>{const G=new Blob([K],{type:!O&&T?T:O}),B=URL.createObjectURL(G);x=!0,b.src=B}),void 0,B||void 0,!0,((K,A)=>{J(A)}))},g=()=>{B&&B.loadImage(L,b)};if(!d&&!N&&B&&B.enableTexturesOffline)B.open(g,z);else{if(-1!==L.indexOf("file:")){const K=decodeURIComponent(L.substring(5).toLowerCase());if(f.FilesToLoad[K]&&"undefined"!==typeof URL){try{let A;try{A=URL.createObjectURL(f.FilesToLoad[K])}catch(l){A=URL.createObjectURL(f.FilesToLoad[K])}b.src=A,x=!0}catch(u){b.src=""}return b}}z()}return b},g=(K,A,T,G,B)=>{const f=new FileReader,O={onCompleteObservable:new L.e,abort:()=>f.abort()};return f.onloadend=()=>O.onCompleteObservable.notifyObservers(O),B&&(f.onerror=()=>{B(new N(`Unable to read ${K.name}`,K))}),f.onload=K=>{A(K.target.result)},T&&(f.onprogress=T),G?f.readAsArrayBuffer(K):f.readAsText(K),O},S=(K,A,T,G,B,C,Q)=>{if(K.name)return g(K,A,T,B,C?K=>{C(void 0,K)}:void 0);const Y=K;if(-1!==Y.indexOf("file:")){let K=decodeURIComponent(Y.substring(5).toLowerCase());0===K.indexOf("./")&&(K=K.substring(2));const G=f.FilesToLoad[K];if(G)return g(G,A,T,B,C?K=>C(void 0,new F(K.message,K.file)):void 0)}const{match:J,type:b}=H(Y);if(J){const K={onCompleteObservable:new L.e,abort:()=>()=>{}};try{const K=B?e(Y):p(Y);A(K,void 0,b)}catch(O){C?C(void 0,O):Z.d.Error(O.message||"Failed to parse the Data URL")}return x.d.SetImmediate((()=>{K.onCompleteObservable.notifyObservers(K)})),K}return l(Y,((K,T)=>{A(K,null===T||void 0===T?void 0:T.responseURL,null===T||void 0===T?void 0:T.getResponseHeader("content-type"))}),T,G,B,C?K=>{C(K.request,new F(K.message,K.request))}:void 0,Q)},l=(K,A,T,f,O,C,Q)=>{K=D.CleanUrl(K),K=D.PreprocessUrl(K);const Y=D.BaseUrl+K;let x=!1;const J={onCompleteObservable:new L.e,abort:()=>x=!0},b=()=>{let K,L=new G.b,f=null;const b=()=>{L&&(T&&L.removeEventListener("progress",T),K&&L.removeEventListener("readystatechange",K),L.removeEventListener("loadend",P))};let P=()=>{b(),J.onCompleteObservable.notifyObservers(J),J.onCompleteObservable.clear(),T=void 0,K=null,P=null,C=void 0,Q=void 0,A=void 0};J.abort=()=>{x=!0,P&&P(),L&&L.readyState!==(XMLHttpRequest.DONE||4)&&L.abort(),null!==f&&(clearTimeout(f),f=null),L=null};const F=K=>{const A=K.message||"Unknown error";C&&L?C(new d(A,L)):Z.d.Error(A)},N=Z=>{if(L){if(L.open("GET",Y),Q)try{Q(L)}catch(J){return void F(J)}O&&(L.responseType="arraybuffer"),T&&L.addEventListener("progress",T),P&&L.addEventListener("loadend",P),K=()=>{if(!x&&L&&L.readyState===(XMLHttpRequest.DONE||4)){if(K&&L.removeEventListener("readystatechange",K),L.status>=200&&L.status<300||0===L.status&&(!(0,B.i)()||c())){const K=O?L.response:L.responseText;if(null!==K){try{A&&A(K,L)}catch(J){F(J)}return}}const T=D.DefaultRetryStrategy;if(T){const K=T(Y,L,Z);if(-1!==K)return b(),L=new G.b,void(f=setTimeout((()=>N(Z+1)),K))}const Q=new d("Error status: "+L.status+" "+L.statusText+" - Unable to load "+Y,L);C&&C(Q)}},L.addEventListener("readystatechange",K),L.send()}};N(0)};if(f&&f.enableSceneOffline){const G=K=>{K&&K.status>400?C&&C(K):b()},B=()=>{f&&f.loadFile(D.BaseUrl+K,(K=>{!x&&A&&A(K),J.onCompleteObservable.notifyObservers(J)}),T?K=>{!x&&T&&T(K)}:void 0,G,O)};f.open(B,G)}else b();return J},u=K=>{const{match:A,type:T}=H(K);if(A)return T||void 0;const G=K.lastIndexOf(".");switch(K.substring(G+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Sf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},c=()=>"undefined"!==typeof location&&"file:"===location.protocol,n=K=>P.test(K),H=K=>{const A=P.exec(K);if(null===A||0===A.length)return{match:!1,type:""};return{match:!0,type:A[0].replace("data:","").replace("base64,","")}};function e(K){return(0,C.e)(K.split(",")[1])}const p=K=>(0,C.g)(K.split(",")[1]);let r;b.c._FileToolsLoadImage=z,J.e.loadFile=S,Q.o.loadFile=S;((K,A,T,G,B,L,f,O,C,Q)=>{r={DecodeBase64UrlToBinary:K,DecodeBase64UrlToString:A,DefaultRetryStrategy:T.DefaultRetryStrategy,BaseUrl:T.BaseUrl,CorsBehavior:T.CorsBehavior,PreprocessUrl:T.PreprocessUrl,IsBase64DataUrl:G,IsFileURL:B,LoadFile:L,LoadImage:f,ReadFile:O,RequestFile:C,SetCorsBehavior:Q},Object.defineProperty(r,"DefaultRetryStrategy",{get:function(){return T.DefaultRetryStrategy},set:function(K){T.DefaultRetryStrategy=K}}),Object.defineProperty(r,"BaseUrl",{get:function(){return T.BaseUrl},set:function(K){T.BaseUrl=K}}),Object.defineProperty(r,"PreprocessUrl",{get:function(){return T.PreprocessUrl},set:function(K){T.PreprocessUrl=K}}),Object.defineProperty(r,"CorsBehavior",{get:function(){return T.CorsBehavior},set:function(K){T.CorsBehavior=K}})})(e,p,D,n,c,S,z,g,l,mK)},12653:(K,A,T)=>{function G(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(K=>{const A=16*Math.random()|0;return("x"===K?A:3&A|8).toString(16)}))}T.d(A,{d:()=>G})},12649:(K,A,T)=>{T.d(A,{b:()=>L});var G=T(12548),B=T(12651);class L{static Instantiate(K){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[K])return this.RegisteredExternalClasses[K];const A=(0,B.b)(K);if(A)return A;G.d.Warn(K+" not found, you may have missed an import.");const T=K.split(".");let L=window||this;for(let G=0,B=T.length;G<B;G++)L=L[T[G]];return"function"!==typeof L?null:L}}L.RegisteredExternalClasses={}},12553:(K,A,T)=>{T.d(A,{d:()=>B});var G=T(12540);class B{static get Now(){return(0,G.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12579:(K,A,T)=>{T.d(A,{e:()=>f,g:()=>L,i:()=>G,j:()=>B});const G=K=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(K);let A="";for(let T=0;T<K.byteLength;T++)A+=String.fromCharCode(K[T]);return A},B=K=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T,G,B,L,f,O,C,Q="",Y=0;const Z=ArrayBuffer.isView(K)?new Uint8Array(K.buffer,K.byteOffset,K.byteLength):new Uint8Array(K);for(;Y<Z.length;)T=Z[Y++],G=Y<Z.length?Z[Y++]:Number.NaN,B=Y<Z.length?Z[Y++]:Number.NaN,L=T>>2,f=(3&T)<<4|G>>4,O=(15&G)<<2|B>>6,C=63&B,isNaN(G)?O=C=64:isNaN(B)&&(C=64),Q+=A.charAt(L)+A.charAt(f)+A.charAt(O)+A.charAt(C);return Q},L=K=>atob(K),f=K=>{const A=L(K),T=A.length,G=new Uint8Array(new ArrayBuffer(T));for(let B=0;B<T;B++)G[B]=A.charCodeAt(B);return G.buffer}},12661:(K,A,T)=>{function G(K){let A=1;do{A*=2}while(A<K);return A===K}function B(K,A,T){return K*(1-T)+A*T}function L(K){const A=f(K),T=O(K);return A-K>K-T?T:A}function f(K){return K--,K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,K|=K>>16,++K}function O(K){return K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,(K|=K>>16)-(K>>1)}function C(K,A){let T;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:T=O(K);break;case 2:T=L(K);break;default:T=f(K)}return Math.min(T,A)}T.d(A,{c:()=>O,f:()=>C,g:()=>G,k:()=>B,m:()=>L})},12526:(K,A,T)=>{T.r(A),T.d(A,{AsyncLoop:()=>N,Tools:()=>F,className:()=>d});var G=T(12534),B=T(12540),L=T(12548),f=T(12550),O=T(12553),C=T(12555),Q=T(12563),Y=T(12565),Z=T(12571),x=T(12596),J=T(12649),b=T(12653),P=T(12661);class F{static get BaseUrl(){return Z.f.BaseUrl}static set BaseUrl(K){Z.f.BaseUrl=K}static get CleanUrl(){return Z.f.CleanUrl}static set CleanUrl(K){Z.f.CleanUrl=K}static IsAbsoluteUrl(K){return 0===K.indexOf("//")||-1!==K.indexOf("://")&&(-1!==K.indexOf(".")&&(-1!==K.indexOf("/")&&(!(K.indexOf(":")>K.indexOf("/"))&&(K.indexOf("://")<K.indexOf(".")||(0===K.indexOf("data:")||0===K.indexOf("blob:"))))))}static set ScriptBaseUrl(K){Z.f.ScriptBaseUrl=K}static get ScriptBaseUrl(){return Z.f.ScriptBaseUrl}static set CDNBaseUrl(K){F.ScriptBaseUrl=K,F.AssetBaseUrl=K}static set ScriptPreprocessUrl(K){Z.f.ScriptPreprocessUrl=K}static get ScriptPreprocessUrl(){return Z.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Z.f.DefaultRetryStrategy}static set DefaultRetryStrategy(K){Z.f.DefaultRetryStrategy=K}static get CorsBehavior(){return Z.f.CorsBehavior}static set CorsBehavior(K){Z.f.CorsBehavior=K}static get UseFallbackTexture(){return Y.b.UseFallbackTexture}static set UseFallbackTexture(K){Y.b.UseFallbackTexture=K}static get RegisteredExternalClasses(){return J.b.RegisteredExternalClasses}static set RegisteredExternalClasses(K){J.b.RegisteredExternalClasses=K}static get fallbackTexture(){return Y.b.FallbackTexture}static set fallbackTexture(K){Y.b.FallbackTexture=K}static FetchToRef(K,A,T,G,B,L){const f=4*((Math.abs(K)*T%T|0)+(Math.abs(A)*G%G|0)*T);L.r=B[f]/255,L.g=B[f+1]/255,L.b=B[f+2]/255,L.a=B[f+3]/255}static Mix(K,A,T){return 0}static Instantiate(K){return J.b.Instantiate(K)}static SetImmediate(K){x.d.SetImmediate(K)}static IsExponentOfTwo(K){return!0}static FloatRound(K){return Math.fround(K)}static GetFilename(K){const A=K.lastIndexOf("/");return A<0?K:K.substring(A+1)}static GetFolderPath(K){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const T=K.lastIndexOf("/");return T<0?A?K:"":K.substring(0,T+1)}static ToDegrees(K){return 180*K/Math.PI}static ToRadians(K){return K*Math.PI/180}static SmoothAngleChange(K,A){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const G=this.ToRadians(K),B=this.ToRadians(A);return this.ToDegrees(Math.atan2((1-T)*Math.sin(B)+T*Math.sin(G),(1-T)*Math.cos(B)+T*Math.cos(G)))}static MakeArray(K,A){return!0===A||void 0!==K&&null!=K?Array.isArray(K)?K:[K]:null}static GetPointerPrefix(K){return(0,B.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(K,A){(0,Z.y)(K,A)}static SetReferrerPolicyBehavior(K,A){A.referrerPolicy=K}static get PreprocessUrl(){return Z.f.PreprocessUrl}static set PreprocessUrl(K){Z.f.PreprocessUrl=K}static LoadImage(K,A,T,G,B,L){return(0,Z.u)(K,A,T,G,B,L)}static LoadFile(K,A,T,G,B,L){return(0,Z.s)(K,A,T,G,B,L)}static async LoadFileAsync(K){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((T,G)=>{(0,Z.s)(K,(K=>{T(K)}),void 0,void 0,A,((K,A)=>{G(A)}))}))}static GetAssetUrl(K){if(!K)return"";if(F.AssetBaseUrl&&K.startsWith(F._DefaultAssetsUrl)){const A="/"===F.AssetBaseUrl[F.AssetBaseUrl.length-1]?F.AssetBaseUrl.substring(0,F.AssetBaseUrl.length-1):F.AssetBaseUrl;return K.replace(F._DefaultAssetsUrl,A)}return K}static GetBabylonScriptURL(K,A){if(!K)return"";if(F.ScriptBaseUrl&&K.startsWith(F._DefaultCdnUrl)){const A="/"===F.ScriptBaseUrl[F.ScriptBaseUrl.length-1]?F.ScriptBaseUrl.substring(0,F.ScriptBaseUrl.length-1):F.ScriptBaseUrl;K=K.replace(F._DefaultCdnUrl,A)}return K=F.ScriptPreprocessUrl(K),A&&(K=F.GetAbsoluteUrl(K)),K}static LoadBabylonScript(K,A,T,G){K=F.GetBabylonScriptURL(K),F.LoadScript(K,A,T)}static async LoadBabylonScriptAsync(K){return K=F.GetBabylonScriptURL(K),await F.LoadScriptAsync(K)}static LoadScript(K,A,T,G){let L=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(K),A&&A()}catch(C){null===T||void 0===T||T(`Unable to load script '${K}' in worker`,C)}return}if(!(0,B.i)())return void(null===T||void 0===T||T(`Cannot load script '${K}' outside of a window or a worker`));const f=document.getElementsByTagName("head")[0],O=document.createElement("script");L?(O.setAttribute("type","module"),O.innerText=K):(O.setAttribute("type","text/javascript"),O.setAttribute("src",K)),G&&(O.id=G),O.onload=()=>{A&&A()},O.onerror=A=>{T&&T(`Unable to load script '${K}'`,A)},f.appendChild(O)}static async LoadScriptAsync(K,A){return await new Promise(((T,G)=>{this.LoadScript(K,(()=>{T()}),((K,A)=>{G(A||new Error(K))}),A)}))}static ReadFileAsDataURL(K,A,T){const B=new FileReader,L={onCompleteObservable:new G.e,abort:()=>B.abort()};return B.onloadend=()=>{L.onCompleteObservable.notifyObservers(L)},B.onload=K=>{A(K.target.result)},B.onprogress=T,B.readAsDataURL(K),L}static ReadFile(K,A,T,G,B){return(0,Z.v)(K,A,T,G,B)}static FileAsURL(K){const A=new Blob([K]);return window.URL.createObjectURL(A)}static Format(K){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return K.toFixed(A)}static DeepCopy(K,A,T,G){f.c.DeepCopy(K,A,T,G)}static IsEmpty(K){for(const A in K)if(Object.prototype.hasOwnProperty.call(K,A))return!1;return!0}static RegisterTopRootEvents(K,A){for(let G=0;G<A.length;G++){const B=A[G];K.addEventListener(B.name,B.handler,!1);try{window.parent&&window.parent.addEventListener(B.name,B.handler,!1)}catch(T){}}}static UnregisterTopRootEvents(K,A){for(let G=0;G<A.length;G++){const B=A[G];K.removeEventListener(B.name,B.handler);try{K.parent&&K.parent.removeEventListener(B.name,B.handler)}catch(T){}}}static async DumpFramebuffer(K,A,T,G){throw(0,C.c)("DumpTools")}static DumpData(K,A,T,G){throw(0,C.c)("DumpTools")}static async DumpDataAsync(K,A,T){throw(0,C.c)("DumpTools")}static _IsOffScreenCanvas(K){return void 0!==K.convertToBlob}static ToBlob(K,A){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",G=arguments.length>3?arguments[3]:void 0;F._IsOffScreenCanvas(K)||K.toBlob||(K.toBlob=function(K,A,T){setTimeout((()=>{const G=atob(this.toDataURL(A,T).split(",")[1]),B=G.length,L=new Uint8Array(B);for(let K=0;K<B;K++)L[K]=G.charCodeAt(K);K(new Blob([L]))}))}),F._IsOffScreenCanvas(K)?K.convertToBlob({type:T,quality:G}).then((K=>A(K))):K.toBlob((function(K){A(K)}),T,G)}static DownloadBlob(K,A){if("download"in document.createElement("a")){if(!A){const K=new Date;A="screenshot_"+((K.getFullYear()+"-"+(K.getMonth()+1)).slice(2)+"-"+K.getDate()+"_"+K.getHours()+"-"+("0"+K.getMinutes()).slice(-2))+".png"}F.Download(K,A)}else if(K&&"undefined"!==typeof URL){const A=URL.createObjectURL(K),T=window.open("");if(!T)return;const G=T.document.createElement("img");G.onload=function(){URL.revokeObjectURL(A)},G.src=A,T.document.body.appendChild(G)}}static EncodeScreenshotCanvasData(K,A){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",G=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if("string"!==typeof G&&A){if(A){if(F._IsOffScreenCanvas(K))return void K.convertToBlob({type:T,quality:B}).then((K=>{const T=new FileReader;T.readAsDataURL(K),T.onloadend=()=>{const K=T.result;A(K)}}));const G=K.toDataURL(T,B);A(G)}}else this.ToBlob(K,(function(K){K&&F.DownloadBlob(K,G),A&&A("")}),T,B)}static Download(K,A){if("undefined"===typeof URL)return;const T=window.URL.createObjectURL(K),G=document.createElement("a");document.body.appendChild(G),G.style.display="none",G.href=T,G.download=A,G.addEventListener("click",(()=>{G.parentElement&&G.parentElement.removeChild(G)})),G.click(),window.URL.revokeObjectURL(T)}static BackCompatCameraNoPreventDefault(K){return"boolean"===typeof K[0]?K[0]:"boolean"===typeof K[1]&&K[1]}static CreateScreenshot(K,A,T,G){throw(0,C.c)("ScreenshotTools")}static async CreateScreenshotAsync(K,A,T){throw(0,C.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(K,A,T,G){throw(0,C.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(K,A,T){throw(0,C.c)("ScreenshotTools")}static RandomId(){return(0,b.d)()}static IsBase64(K){return(0,Z.m)(K)}static DecodeBase64(K){return(0,Z.d)(K)}static get errorsCount(){return L.d.errorsCount}static Log(K){L.d.Log(K)}static Warn(K){L.d.Warn(K)}static Error(K){L.d.Error(K)}static get LogCache(){return L.d.LogCache}static ClearLogCache(){L.d.ClearLogCache()}static set LogLevels(K){L.d.LogLevels=K}static set PerformanceLogLevel(K){return(K&F.PerformanceUserMarkLogLevel)===F.PerformanceUserMarkLogLevel?(F.StartPerformanceCounter=F._StartUserMark,void(F.EndPerformanceCounter=F._EndUserMark)):(K&F.PerformanceConsoleLogLevel)===F.PerformanceConsoleLogLevel?(F.StartPerformanceCounter=F._StartPerformanceConsole,void(F.EndPerformanceCounter=F._EndPerformanceConsole)):(F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,void(F.EndPerformanceCounter=F._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(K,A){}static _EndPerformanceCounterDisabled(K,A){}static _StartUserMark(K){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!F._Performance){if(!(0,B.i)())return;F._Performance=window.performance}A&&F._Performance.mark&&F._Performance.mark(K+"-Begin")}static _EndUserMark(K){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&F._Performance.mark&&(F._Performance.mark(K+"-End"),F._Performance.measure(K,K+"-Begin",K+"-End"))}static _StartPerformanceConsole(K){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(F._StartUserMark(K,A),console.time&&console.time(K))}static _EndPerformanceConsole(K){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(F._EndUserMark(K,A),console.timeEnd(K))}static get Now(){return O.d.Now}static GetClassName(K){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null;if(!A&&K.getClassName)T=K.getClassName();else{if(K instanceof Object){T=(A?K:Object.getPrototypeOf(K)).constructor.__bjsclassName__}T||(T=typeof K)}return T}static First(K,A){for(const T of K)if(A(T))return T;return null}static getFullClassName(K){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null,G=null;if(!A&&K.getClassName)T=K.getClassName();else{if(K instanceof Object){const B=A?K:Object.getPrototypeOf(K);T=B.constructor.__bjsclassName__,G=B.constructor.__bjsmoduleName__}T||(T=typeof K)}return T?(null!=G?G+".":"")+T:null}static async DelayAsync(K){await new Promise((A=>{setTimeout((()=>{A()}),K)}))}static IsSafari(){return!!(0,B.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function d(K,A){return T=>{T.__bjsclassName__=K,T.__bjsmoduleName__=null!=A?A:null}}F.AssetBaseUrl="",F.UseCustomRequestHeaders=!1,F.CustomRequestHeaders=Q.b.CustomRequestHeaders,F.GetDOMTextContent=B.c,F._DefaultCdnUrl="https://cdn.babylonjs.com",F._DefaultAssetsUrl="https://assets.babylonjs.com/core",F.GetAbsoluteUrl="object"===typeof document?K=>{const A=document.createElement("a");return A.href=K,A.href}:"function"===typeof URL&&"object"===typeof location?K=>new URL(K,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},F.NoneLogLevel=L.d.NoneLogLevel,F.MessageLogLevel=L.d.MessageLogLevel,F.WarningLogLevel=L.d.WarningLogLevel,F.ErrorLogLevel=L.d.ErrorLogLevel,F.AllLogLevel=L.d.AllLogLevel,F.IsWindowObjectExist=B.i,F.PerformanceNoneLogLevel=0,F.PerformanceUserMarkLogLevel=1,F.PerformanceConsoleLogLevel=2,F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,F.EndPerformanceCounter=F._EndPerformanceCounterDisabled;class N{constructor(K,A,T){let G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=K,this.index=G-1,this._done=!1,this._fn=A,this._successCallback=T}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(K,A,T){const G=new N(K,A,T,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return G.executeNext(),G}static SyncAsyncForLoop(K,A,T,G,B){let L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return N.Run(Math.ceil(K/A),(G=>{B&&B()?G.breakLoop():setTimeout((()=>{for(let L=0;L<A;++L){const f=G.index*A+L;if(f>=K)break;if(T(f),B&&B()){G.breakLoop();break}}G.executeNext()}),L)}),G)}}F.Mix=P.k,F.IsExponentOfTwo=P.g,Y.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12651:(K,A,T)=>{T.d(A,{b:()=>L,c:()=>B});const G={};function B(K,A){G[K]=A}function L(K){return G[K]}},12563:(K,A,T)=>{T.d(A,{b:()=>G});class G{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(G.CustomRequestHeaders).length>0||G.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const K in G.CustomRequestHeaders){const A=G.CustomRequestHeaders[K];A&&this._xhr.setRequestHeader(K,A)}}_shouldSkipRequestModifications(K){return G.SkipRequestModificationForBabylonCDN&&(K.includes("preview.babylonjs.com")||K.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(K){this._xhr.onprogress=K}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(K){this._xhr.responseType=K}get timeout(){return this._xhr.timeout}set timeout(K){this._xhr.timeout=K}addEventListener(K,A,T){this._xhr.addEventListener(K,A,T)}removeEventListener(K,A,T){this._xhr.removeEventListener(K,A,T)}abort(){this._xhr.abort()}send(K){G.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(K)}open(K,A){for(const T of G.CustomRequestModifiers){if(this._shouldSkipRequestModifications(A))return;A=T(this._xhr,A)||A}A=(A=A.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=A,this._xhr.open(K,A,!0)}setRequestHeader(K,A){this._xhr.setRequestHeader(K,A)}getResponseHeader(K){return this._xhr.getResponseHeader(K)}}G.CustomRequestHeaders={},G.CustomRequestModifiers=new Array,G.SkipRequestModificationForBabylonCDN=!0}}]);