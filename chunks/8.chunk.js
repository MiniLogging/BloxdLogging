"use strict";(self.bjbkv7h3qsd=self.bjbkv7h3qsd||[]).push([[8],{11120:(G,A,j)=>{j.d(A,{e:()=>n});var u=j(11085),k=j(11065),B=j(11127),x=j(11150),s=j(11072);class O{constructor(){let G=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,G&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(G){this._zOffset!==G&&(this._zOffset=G,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(G){this._zOffsetUnits!==G&&(this._zOffsetUnits=G,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(G){this._cullFace!==G&&(this._cullFace=G,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(G){this._cull!==G&&(this._cull=G,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(G){this._depthFunc!==G&&(this._depthFunc=G,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(G){this._depthMask!==G&&(this._depthMask=G,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(G){this._depthTest!==G&&(this._depthTest=G,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(G){this._frontFace!==G&&(this._frontFace=G,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(G){this.isDirty&&(this._isCullDirty&&(this.cull?G.enable(G.CULL_FACE):G.disable(G.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(G.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(G.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?G.enable(G.DEPTH_TEST):G.disable(G.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(G.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(G.enable(G.POLYGON_OFFSET_FILL),G.polygonOffset(this.zOffset,this.zOffsetUnits)):G.disable(G.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(G.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class d{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(G){this._func!==G&&(this._func=G,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(G){this._funcRef!==G&&(this._funcRef=G,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(G){this._funcMask!==G&&(this._funcMask=G,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(G){this._opStencilFail!==G&&(this._opStencilFail=G,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(G){this._opDepthFail!==G&&(this._opDepthFail=G,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(G){this._opStencilDepthPass!==G&&(this._opStencilDepthPass=G,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(G){this._mask!==G&&(this._mask=G,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(G){this._enabled!==G&&(this._enabled=G,this._isStencilTestDirty=!0)}constructor(){let G=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,G&&this.reset()}reset(){var G;this.stencilMaterial=void 0,null===(G=this.stencilGlobal)||void 0===G||G.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(G){var A;if(!G)return;const j=!this.useStencilGlobalOnly&&!(null===(A=this.stencilMaterial)||void 0===A||!A.enabled);this.enabled=j?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=j?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=j?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=j?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=j?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=j?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=j?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=j?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?G.enable(G.STENCIL_TEST):G.disable(G.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(G.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(G.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(G.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class h{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=h.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=h.KEEP,this.opDepthFail=h.KEEP,this.opStencilDepthPass=h.REPLACE}get stencilFunc(){return this.func}set stencilFunc(G){this.func=G}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(G){this.funcRef=G}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(G){this.funcMask=G}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(G){this.opStencilFail=G}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(G){this.opDepthFail=G}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(G){this.opStencilDepthPass=G}get stencilMask(){return this.mask}set stencilMask(G){this.mask=G}get stencilTest(){return this.enabled}set stencilTest(G){this.enabled=G}}h.ALWAYS=519,h.KEEP=7680,h.REPLACE=7681;class H{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(G){this._alphaBlend!==G&&(this._alphaBlend=G,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(G,A,j,u){this._blendConstants[0]===G&&this._blendConstants[1]===A&&this._blendConstants[2]===j&&this._blendConstants[3]===u||(this._blendConstants[0]=G,this._blendConstants[1]=A,this._blendConstants[2]=j,this._blendConstants[3]=u,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(G,A,j,u){this._blendFunctionParameters[0]===G&&this._blendFunctionParameters[1]===A&&this._blendFunctionParameters[2]===j&&this._blendFunctionParameters[3]===u||(this._blendFunctionParameters[0]=G,this._blendFunctionParameters[1]=A,this._blendFunctionParameters[2]=j,this._blendFunctionParameters[3]=u,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(G,A){this._blendEquationParameters[0]===G&&this._blendEquationParameters[1]===A||(this._blendEquationParameters[0]=G,this._blendEquationParameters[1]=A,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(G){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?G.enable(G.BLEND):G.disable(G.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(G.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(G.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(G.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var F=j(11075),R=j(11156),U=j(11057),S=j(11050),C=j(11112),t=j(11168);function Y(G,A){if((0,U.f)()){const{requestAnimationFrame:j}=A||window;if("function"===typeof j)return j(G)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(G);return setTimeout(G,16)}class n{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(G){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(G){G!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=G,this._depthCullingState.depthFunc=G?518:515)}setColorWrite(G){G!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=G)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(G){if(G)return this.isNDCHalfZRange?G.IS_NDC_HALF_ZRANGE="":delete G.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?G.USE_REVERSE_DEPTHBUFFER="":delete G.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?G.USE_EXACT_SRGB_CONVERSIONS="":delete G.USE_EXACT_SRGB_CONVERSIONS);{let G="";return this.isNDCHalfZRange&&(G+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(G&&(G+="\n"),G+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(G&&(G+="\n"),G+="#define USE_EXACT_SRGB_CONVERSIONS"),G}}_rebuildInternalTextures(){const G=this._internalTexturesCache.slice();for(const A of G)A._rebuild()}_rebuildRenderTargetWrappers(){const G=this._renderTargetWrapperCache.slice();for(const A of G)A._rebuild()}_rebuildEffects(){for(const G in this._compiledEffects){const A=this._compiledEffects[G];A._pipelineContext=null,A._prepareEffect()}B.Effect.ResetCache()}_rebuildGraphicsResources(){var G;this.wipeCaches(!0),this._rebuildEffects(),null===(G=this._rebuildComputeEffects)||void 0===G||G.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){k.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(G){setTimeout((()=>{this._clearEmptyResources();const A=this._depthCullingState.depthTest,j=this._depthCullingState.depthFunc,u=this._depthCullingState.depthMask,k=this._stencilState.stencilTest;G(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=A,this._depthCullingState.depthFunc=j,this._depthCullingState.depthMask=u,this._stencilState.stencilTest=k,this._flagContextRestored()}),0)}get H(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(G){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(G){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const G=new Uint8Array(4),A=[G,G,G,G,G,G];this._emptyCubeTexture=this.createRawCubeTexture(A,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(G){if(!G)return this._activeRenderLoops.length=0,void this._cancelFrame();const A=this._activeRenderLoops.indexOf(G);A>=0&&(this._activeRenderLoops.splice(A,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const G=this._frameHandler;if(this._frameHandler=0,(0,U.f)()){const{cancelAnimationFrame:A}=this.getHostWindow()||window;if("function"===typeof A)return A(G)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(G);return clearTimeout(G)}}js(){this.onBeginFrameObservable.notifyObservers(this)}us(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(G){this._maxFPS=G,void 0!==G&&(this._minFrameTime=G<=0?Number.MAX_VALUE:1e3/G)}_isOverFrameTime(G){if(!G||void 0===this._maxFPS)return!1;const A=G-this._lastFrameTime;return this._lastFrameTime=G,this._renderAccumulator+=A,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(G){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(G)){let G=!0;(this.H||!this.renderEvenInBackground&&this._windowIsBackground)&&(G=!1),G&&(this.js(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.us())}}_renderLoop(G){this._processFrame(G),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let G=0;G<this._activeRenderLoops.length;G++){(0,this._activeRenderLoops[G])()}}_renderViews(){return!1}_queueNewFrame(G,A){return Y(G,A)}runRenderLoop(G){-1===this._activeRenderLoops.indexOf(G)&&(this._activeRenderLoops.push(G),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(G){this._depthCullingState.depthTest=G}setZOffset(G){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-G:G}getZOffset(){const G=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-G:G}setZOffsetUnits(G){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-G:G}getZOffsetUnits(){const G=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-G:G}getHostWindow(){return(0,U.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(G){this._compatibilityMode=!0}_rebuildTextures(){for(const G of this.scenes)G._rebuildTextures();for(const G of this._virtualScenes)G._rebuildTextures()}_releaseRenderTargetWrapper(G){const A=this._renderTargetWrapperCache.indexOf(G);-1!==A&&this._renderTargetWrapperCache.splice(A,1)}get currentViewport(){return this._cachedViewport}setViewport(G,A,j){const u=A||this.getRenderWidth(),k=j||this.getRenderHeight(),B=G.x||0,x=G.y||0;this._cachedViewport=G,this._viewport(B*u,x*k,u*G.width,k*G.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(G){return new Path2D(G)}get description(){let G=this.name+this.version;return this._caps.parallelShaderCompile&&(G+=" - Parallel shader compilation"),G}_createTextureBase(G,A,j,B){let x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,H=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,F=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,U=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,S=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,C=arguments.length>13?arguments[13]:void 0,Y=arguments.length>14?arguments[14]:void 0,Q=arguments.length>15?arguments[15]:void 0;const X="data:"===(G=G||"").substring(0,5),I="blob:"===G.substring(0,5),D=X&&-1!==G.indexOf(";base64,"),g=F||new R.d(this,1);g!==F&&(g.label=G.substring(0,60));const c=G;!this._transformTextureUrl||D||F||H||(G=this._transformTextureUrl(G)),c!==G&&(g._originalUrl=c);const E=G.lastIndexOf(".");let r=S||(E>-1?G.substring(E).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const b=(0,t.b)(r,C);B&&B.addPendingData(g),g.url=G,g.generateMipMaps=!A,g.samplingMode=x,g.invertY=j,g._useSRGBBuffer=this._getUseSRGBBuffer(!!Q,A),this._doNotHandleContextLost||(g._buffer=H);let M=null;s&&!F&&(M=g.onLoadedObservable.add(s)),F||this._internalTexturesCache.push(g);const o=(j,F)=>{B&&B.removePendingData(g),G===c?(M&&g.onLoadedObservable.remove(M),u.d.UseFallbackTexture&&G!==u.d.FallbackTexture&&this._createTextureBase(u.d.FallbackTexture,A,g.invertY,B,x,null,O,d,h,H,g),j=(j||"Unknown error")+(u.d.UseFallbackTexture?" - Fallback texture was used":""),g.onErrorObservable.notifyObservers({message:j,exception:F}),O&&O(j,F)):(k.e.Warn(`Failed to load ${G}, falling back to ${c}`),this._createTextureBase(c,A,g.invertY,B,x,s,O,d,h,H,g,U,S,C,Y,Q))};if(b){const A=async G=>{(await b).loadData(G,g,((G,A,j,u,k,s)=>{s?o("TextureLoader failed to load data"):d(g,r,B,{width:G,height:A},g.invertY,!j,u,(()=>(k(),!1)),x)}),Y)};H?H instanceof ArrayBuffer?A(new Uint8Array(H)):ArrayBuffer.isView(H)?A(H):O&&O("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(G,(G=>{A(new Uint8Array(G))}),void 0,B?B.offlineProvider:void 0,!0,((G,A)=>{o("Unable to load "+(G&&G.responseURL,A))}))}else{const j=G=>{I&&!this._doNotHandleContextLost&&(g._buffer=G),d(g,r,B,G,g.invertY,A,!1,h,x)};!X||D?H&&("string"===typeof H.decoding||H.close)?j(H):n._FileToolsLoadImage(G||"",j,o,B?B.offlineProvider:null,C,g.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof H||H instanceof ArrayBuffer||ArrayBuffer.isView(H)||H instanceof Blob?n._FileToolsLoadImage(H,j,o,B?B.offlineProvider:null,C,g.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):H&&j(H)}return g}_rebuildBuffers(){for(const G of this._uniformBuffers)G._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,U.c)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const G in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,G)&&(this._boundTexturesCache[G]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(G){this._name=G}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(G){this._hardwareScalingLevel=G,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(G){this._doNotHandleContextLost=G}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(G,A,j){var k,B;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new O,this._stencilStateComposer=new d,this._stencilState=new h,this._alphaState=new H,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new S.b,this.onCanvasFocusObservable=new S.b,this.onNewSceneAddedObservable=new S.b,this.onResizeObservable=new S.b,this.onCanvasPointerOutObservable=new S.b,this.onEffectErrorObservable=new S.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new S.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=G=>this._renderLoop(G),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new S.b,this.onAfterShaderCompilationObservable=new S.b,this.onBeginFrameObservable=new S.b,this.onEndFrameObservable=new S.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new S.b,this.onContextRestoredObservable=new S.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.ks=new S.b,this.onReleaseEffectsObservable=new S.b,u.d.Instances.push(this),this.startTime=s.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,x.c.SetMatrixPrecision(!!A.useHighPrecisionMatrix),(0,U.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=j??!1,A.antialias=G??A.antialias,A.deterministicLockstep=A.deterministicLockstep??!1,A.lockstepMaxSteps=A.lockstepMaxSteps??4,A.timeStep=A.timeStep??1/60,A.stencil=A.stencil??!0,this._audioContext=(null===(k=A.audioEngineOptions)||void 0===k?void 0:k.audioContext)??null,this._audioDestination=(null===(B=A.audioEngineOptions)||void 0===B?void 0:B.audioDestination)??null,this.premultipliedAlpha=A.premultipliedAlpha??!0,this._doNotHandleContextLost=!!A.doNotHandleContextLost,this._isStencilEnable=!!A.stencil,this.useExactSrgbConversions=A.useExactSrgbConversions??!1;const F=(0,U.f)()&&window.devicePixelRatio||1,R=A.limitDeviceRatio||F;j=j||A.adaptToDeviceRatio||!1,this._hardwareScalingLevel=j?1/Math.min(R,F):1,this._lastDevicePixelRatio=F,this._creationOptions=A}resize(){let G,A,j=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const G=(0,U.f)()&&window.devicePixelRatio||1,A=this._lastDevicePixelRatio/G;this._lastDevicePixelRatio=G,this._hardwareScalingLevel*=A}if((0,U.f)()&&(0,U.c)())if(this._renderingCanvas){var u,k;const j=null===(u=(k=this._renderingCanvas).getBoundingClientRect)||void 0===u?void 0:u.call(k);G=this._renderingCanvas.clientWidth||(null===j||void 0===j?void 0:j.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,A=this._renderingCanvas.clientHeight||(null===j||void 0===j?void 0:j.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else G=window.innerWidth,A=window.innerHeight;else G=this._renderingCanvas?this._renderingCanvas.width:100,A=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(G/this._hardwareScalingLevel,A/this._hardwareScalingLevel,j)}setSize(G,A){let j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(G|=0,A|=0,!j&&this._renderingCanvas.width===G&&this._renderingCanvas.height===A)return!1;if(this._renderingCanvas.width=G,this._renderingCanvas.height=A,this.scenes){for(let G=0;G<this.scenes.length;G++){const A=this.scenes[G];for(let G=0;G<A.cameras.length;G++){A.cameras[G]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(G,A,j,u,k,B,x,s,O,d,h){throw(0,F.c)("engine.rawTexture")}createRawCubeTexture(G,A,j,u,k,B,x,s){throw(0,F.c)("engine.rawTexture")}createRawTexture3D(G,A,j,u,k,B,x,s,O,d,h){throw(0,F.c)("engine.rawTexture")}createRawTexture2DArray(G,A,j,u,k,B,x,s,O,d,h){throw(0,F.c)("engine.rawTexture")}_sharedInit(G){this._renderingCanvas=G}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const G=navigator.userAgent;this.hostInformation.isMobile=-1!==G.indexOf("Mobile")||-1!==G.indexOf("Mac")&&(0,U.c)()&&"ontouchend"in document},this._checkForMobile(),(0,U.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(G){return document.createElement("video")}_reportDrawCall(){var G;let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(G=this._drawCalls)||void 0===G||G.addCount(A,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(G,A){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(G,A){return createImageBitmap(G,A)}resizeImageBitmap(G,A,j){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(G){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(G,A){if("undefined"===typeof document)return new OffscreenCanvas(G,A);const j=document.createElement("canvas");return j.width=G,j.height=A,j}createCanvas(G,A){return n._CreateCanvas(G,A)}static _FileToolsLoadImage(G,A,j,u,k,B,x){throw(0,F.c)("FileTools")}_loadFile(G,A,j,u,k,B){const x=(0,C.e)(G,A,j,u,k,B);return this._activeRequests.push(x),x.onCompleteObservable.add((()=>{const G=this._activeRequests.indexOf(x);-1!==G&&this._activeRequests.splice(G,1)})),x}static _FileToolsLoadFile(G,A,j,u,k,B){if(C.b.loadFile)return C.b.loadFile(G,A,j,u,k,B);throw(0,F.c)("FileTools")}dispose(){var G;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(G=this.releaseComputeEffects)||void 0===G||G.call(this),B.Effect.ResetCache();for(const j of this._activeRequests)j.abort();this._boundRenderFunction=null,this.ks.notifyObservers(this),this.ks.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,U.f)()&&window.removeEventListener("resize",this._checkForMobile);const A=u.d.Instances.indexOf(this);A>=0&&u.d.Instances.splice(A,1),u.d.Instances.length||(u.d.OnEnginesDisposedObservable.notifyObservers(this),u.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(G){throw(0,F.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(G,A){for(let j=0;j<u.d.Instances.length;j++){const k=u.d.Instances[j];for(let j=0;j<k.scenes.length;j++)k.scenes[j].markAllMaterialsAsDirty(G,A)}}}n._RenderPassIdCounter=0,n._RescalePostProcessFactory=null,n.CollisionsEpsilon=.001,n.QueueNewFrame=Y},11085:(G,A,j)=>{j.d(A,{d:()=>k});var u=j(11050);class k{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}k.Instances=[],k.OnEnginesDisposedObservable=new u.b,k._LastCreatedScene=null,k.UseFallbackTexture=!0,k.FallbackTexture=""},11150:(G,A,j)=>{j.d(A,{c:()=>u});class u{static SetMatrixPrecision(G){if(u.MatrixTrackPrecisionChange=!1,G&&!u.MatrixUse64Bits&&u.MatrixTrackedMatrices)for(let A=0;A<u.MatrixTrackedMatrices.length;++A){const G=u.MatrixTrackedMatrices[A],j=G.Bs;G.Bs=new Array(16);for(let A=0;A<16;++A)G.Bs[A]=j[A]}u.MatrixUse64Bits=G,u.MatrixCurrentType=u.MatrixUse64Bits?Array:Float32Array,u.MatrixTrackedMatrices=null}}u.MatrixUse64Bits=!1,u.MatrixTrackPrecisionChange=!0,u.MatrixCurrentType=Float32Array,u.MatrixTrackedMatrices=[]},11168:(G,A,j)=>{j.d(A,{b:()=>x});var u=j(11065);const k=new Map;function B(G,A){(function(G){return k.delete(G)})(G)&&u.e.Warn(`Extension with the name '${G}' already exists`),k.set(G,A)}function x(G,A){"image/ktx"!==A&&"image/ktx2"!==A||(G=".ktx"),k.has(G)||(G.endsWith(".ies")&&B(".ies",(async()=>await j.e(15).then(j.bind(j,13616)).then((G=>new G._IESTextureLoader)))),G.endsWith(".dds")&&B(".dds",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(19),j.e(18),j.e(28)]).then(j.bind(j,13625)).then((G=>new G._DDSTextureLoader)))),G.endsWith(".basis")&&B(".basis",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(47)]).then(j.bind(j,13632)).then((G=>new G._BasisTextureLoader)))),G.endsWith(".env")&&B(".env",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(19),j.e(18),j.e(23),j.e(21),j.e(45),j.e(48)]).then(j.bind(j,13641)).then((G=>new G._ENVTextureLoader)))),G.endsWith(".hdr")&&B(".hdr",(async()=>await Promise.all([j.e(14),j.e(49)]).then(j.bind(j,13647)).then((G=>new G._HDRTextureLoader)))),(G.endsWith(".ktx")||G.endsWith(".ktx2"))&&(B(".ktx",(async()=>await j.e(30).then(j.bind(j,13650)).then((G=>new G._KTXTextureLoader)))),B(".ktx2",(async()=>await j.e(30).then(j.bind(j,13650)).then((G=>new G._KTXTextureLoader))))),G.endsWith(".tga")&&B(".tga",(async()=>await j.e(50).then(j.bind(j,13659)).then((G=>new G._TGATextureLoader)))),G.endsWith(".exr")&&B(".exr",(async()=>await j.e(16).then(j.bind(j,13668)).then((G=>new G._ExrTextureLoader)))));const u=k.get(G);return u?Promise.resolve(u(A)):null}},11156:(G,A,j)=>{j.d(A,{d:()=>x});var u,k=j(11050),B=j(11160);!function(G){G[G.Unknown=0]="Unknown",G[G.Url=1]="Url",G[G.Temp=2]="Temp",G[G.Raw=3]="Raw",G[G.Dynamic=4]="Dynamic",G[G.RenderTarget=5]="RenderTarget",G[G.MultiRenderTarget=6]="MultiRenderTarget",G[G.Cube=7]="Cube",G[G.CubeRaw=8]="CubeRaw",G[G.CubePrefiltered=9]="CubePrefiltered",G[G.Raw3D=10]="Raw3D",G[G.Raw2DArray=11]="Raw2DArray",G[G.DepthStencil=12]="DepthStencil",G[G.CubeRawRGBD=13]="CubeRawRGBD",G[G.Depth=14]="Depth"}(u||(u={}));class x extends B.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(G){this.generateMipMaps=G}get uniqueId(){return this._uniqueId}_setUniqueId(G){this._uniqueId=G}getEngine(){return this._engine}get source(){return this._source}constructor(G,A){let j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new k.b,this.onErrorObservable=new k.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=G,this._source=A,this._uniqueId=x._Counter++,j||(this._hardwareTexture=G._createHardwareTexture())}incrementReferences(){this._references++}updateSize(G,A){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,G,A,j),this.width=G,this.height=A,this.depth=j,this.baseWidth=G,this.baseHeight=A,this.baseDepth=j,this._size=G*A*j}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const G=this.onRebuildCallback(this),A=A=>{A._swapAndDie(this,!1),this.isReady=G.isReady};return void(G.isAsync?G.proxy.then(A):A(G.proxy))}let G;switch(this.source){case 2:case 12:case 14:break;case 1:return void(G=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(G=>{G._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:G=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),G._swapAndDie(this,!1),this.isReady=!0;break;case 10:G=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),G._swapAndDie(this,!1),this.isReady=!0;break;case 11:G=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),G._swapAndDie(this,!1),this.isReady=!0;break;case 4:G=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),G._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(G=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{G._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:G=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),G._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return G=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(G=>{G&&G._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(G._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(G){var A;let j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(A=this._hardwareTexture)||void 0===A||A.setUsage(G._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),G._hardwareTexture=this._hardwareTexture,j&&(G._isRGBD=this._isRGBD),this._lodTextureHigh&&(G._lodTextureHigh&&G._lodTextureHigh.dispose(),G._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(G._lodTextureMid&&G._lodTextureMid.dispose(),G._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(G._lodTextureLow&&G._lodTextureLow.dispose(),G._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(G._irradianceTexture&&G._irradianceTexture.dispose(),G._irradianceTexture=this._irradianceTexture);const u=this._engine.getLoadedTexturesCache();let k=u.indexOf(this);-1!==k&&u.splice(k,1),k=u.indexOf(G),-1===k&&u.push(G)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}x._Counter=0},11160:(G,A,j)=>{j.d(A,{d:()=>u});class u{get wrapU(){return this._cachedWrapU}set wrapU(G){this._cachedWrapU=G}get wrapV(){return this._cachedWrapV}set wrapV(G){this._cachedWrapV=G}get wrapR(){return this._cachedWrapR}set wrapR(G){this._cachedWrapR=G}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(G){this._cachedAnisotropicFilteringLevel=G}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(G){this._comparisonFunction=G}get useMipMaps(){return this._useMipMaps}set useMipMaps(G){this._useMipMaps=G}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=G,this._cachedWrapV=A,this._cachedWrapR=j,this._cachedAnisotropicFilteringLevel=u,this.samplingMode=k,this._comparisonFunction=B,this}compareSampler(G){return this._cachedWrapU===G._cachedWrapU&&this._cachedWrapV===G._cachedWrapV&&this._cachedWrapR===G._cachedWrapR&&this._cachedAnisotropicFilteringLevel===G._cachedAnisotropicFilteringLevel&&this.samplingMode===G.samplingMode&&this._comparisonFunction===G._comparisonFunction&&this._useMipMaps===G._useMipMaps}}},11069:(G,A,j)=>{j.d(A,{c:()=>B});var u=j(11065);const k=(G,A,j)=>G?G.getClassName&&"Mesh"===G.getClassName()?null:!G.getClassName||"SubMesh"!==G.getClassName()&&"PhysicsBody"!==G.getClassName()?G.clone?G.clone():Array.isArray(G)?G.slice():j&&"object"===typeof G?{...G}:null:G.clone(A):null;class B{static DeepCopy(G,A,j,B){let x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=function(G){const A=[];do{const j=Object.getOwnPropertyNames(G);for(const G of j)-1===A.indexOf(G)&&A.push(G)}while(G=Object.getPrototypeOf(G));return A}(G);for(const d of s){if("_"===d[0]&&(!B||-1===B.indexOf(d)))continue;if(d.endsWith("Observable"))continue;if(j&&-1!==j.indexOf(d))continue;const s=G[d],h=typeof s;if("function"!==h)try{if("object"===h)if(s instanceof Uint8Array)A[d]=Uint8Array.from(s);else if(s instanceof Array){if(A[d]=[],s.length>0)if("object"==typeof s[0])for(let G=0;G<s.length;G++){const j=k(s[G],A,x);-1===A[d].indexOf(j)&&A[d].push(j)}else A[d]=s.slice(0)}else A[d]=k(s,A,x);else A[d]=s}catch(O){u.e.Warn(O.message)}}}}},11096:(G,A,j)=>{j.d(A,{d:()=>u,h:()=>k,l:()=>B});class u extends Error{}u._setPrototypeOf=Object.setPrototypeOf||((G,A)=>(G.__proto__=A,G));const k={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class B extends u{constructor(G,A,j){super(G),this.errorCode=A,this.innerError=j,this.name="RuntimeError",u._setPrototypeOf(this,B.prototype)}}},11089:(G,A,j)=>{j.d(A,{d:()=>o,f:()=>n,j:()=>E,k:()=>b,m:()=>g,l:()=>C,o:()=>I,p:()=>D,r:()=>c,v:()=>Q});var u=j(11078),k=j(11057),B=j(11050);class x{}x.FilesToLoad={};var s=j(11096),O=j(11098),d=j(11106),h=j(11085),H=j(11065),F=j(11114),R=j(11112),U=j(11120);const S=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class C extends s.l{constructor(G,A){super(G,s.h.LoadFileError),this.name="LoadFileError",s.d._setPrototypeOf(this,C.prototype),A instanceof u.c?this.request=A:this.file=A}}class t extends s.l{constructor(G,A){super(G,s.h.RequestFileError),this.request=A,this.name="RequestFileError",s.d._setPrototypeOf(this,t.prototype)}}class Y extends s.l{constructor(G,A){super(G,s.h.ReadFileError),this.file=A,this.name="ReadFileError",s.d._setPrototypeOf(this,Y.prototype)}}const n={DefaultRetryStrategy:class{static ExponentialBackoff(){let G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(j,u,k)=>0!==u.status||k>=G||-1!==j.indexOf("file:")?-1:Math.pow(2,k)*A}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:G=>G,ScriptBaseUrl:"",ScriptPreprocessUrl:G=>G,CleanUrl:G=>G=G.replace(/#/gm,"%23")},Q=(G,A)=>{if((!G||0!==G.indexOf("data:"))&&n.CorsBehavior)if("string"===typeof n.CorsBehavior||n.CorsBehavior instanceof String)A.crossOrigin=n.CorsBehavior;else{const j=n.CorsBehavior(G);j&&(A.crossOrigin=j)}},X={getRequiredSize:null},I=function(G,A,j,k){let B,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",d=arguments.length>5?arguments[5]:void 0,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===H||void 0===H||!H._features.forceBitmapOverHTMLImageElement))return j("LoadImage is only supported in web or BabylonNative environments."),null;let F=!1;G instanceof ArrayBuffer||ArrayBuffer.isView(G)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(B=URL.createObjectURL(new Blob([G],{type:s})),F=!0):B=`data:${s};base64,`+(0,O.n)(G):G instanceof Blob?(B=URL.createObjectURL(G),F=!0):(B=n.CleanUrl(G),B=n.PreprocessUrl(B));const R=A=>{if(j){const u=B||G.toString();j(`Error while trying to load image: ${0===u.indexOf("http")||u.length<=128?u:u.slice(0,128)+"..."}`,A)}};if(null!==H&&void 0!==H&&H._features.forceBitmapOverHTMLImageElement)return g(B,(u=>{H.createImageBitmap(new Blob([u],{type:s}),{premultiplyAlpha:"none",...d}).then((G=>{A(G),F&&URL.revokeObjectURL(B)})).catch((A=>{j&&j("Error while trying to load image: "+G,A)}))}),void 0,k||void 0,!0,((G,A)=>{R(A)})),null;const U=new Image;if(X.getRequiredSize){const A=X.getRequiredSize(G);A.width&&(U.width=A.width),A.height&&(U.height=A.height)}Q(B,U);const S=[],C=()=>{for(const G of S)G.target.removeEventListener(G.name,G.handler);S.length=0};S.push({target:U,name:"load",handler:()=>{C(),A(U),F&&U.src&&URL.revokeObjectURL(U.src)}}),S.push({target:U,name:"error",handler:G=>{C(),R(G),F&&U.src&&URL.revokeObjectURL(U.src)}}),S.push({target:document,name:"securitypolicyviolation",handler:G=>{if(G.blockedURI!==U.src||"xs"===G.disposition)return;C();const A=new Error(`CSP violation of policy ${G.effectiveDirective} ${G.blockedURI}. Current policy is ${G.originalPolicy}`);h.d.UseFallbackTexture=!1,R(A),F&&U.src&&URL.revokeObjectURL(U.src),U.src=""}}),(()=>{for(const G of S)G.target.addEventListener(G.name,G.handler)})();const t="blob:"===B.substring(0,5),Y="data:"===B.substring(0,5),I=()=>{t||Y||!u.c.IsCustomRequestAvailable?U.src=B:g(B,((G,A,j)=>{const u=new Blob([G],{type:!s&&j?j:s}),k=URL.createObjectURL(u);F=!0,U.src=k}),void 0,k||void 0,!0,((G,A)=>{R(A)}))},D=()=>{k&&k.loadImage(B,U)};if(!t&&!Y&&k&&k.enableTexturesOffline)k.open(D,I);else{if(-1!==B.indexOf("file:")){const G=decodeURIComponent(B.substring(5).toLowerCase());if(x.FilesToLoad[G]&&"undefined"!==typeof URL){try{let A;try{A=URL.createObjectURL(x.FilesToLoad[G])}catch(c){A=URL.createObjectURL(x.FilesToLoad[G])}U.src=A,F=!0}catch(E){U.src=""}return U}}I()}return U},D=(G,A,j,u,k)=>{const x=new FileReader,s={onCompleteObservable:new B.b,abort:()=>x.abort()};return x.onloadend=()=>s.onCompleteObservable.notifyObservers(s),k&&(x.onerror=()=>{k(new Y(`Unable to read ${G.name}`,G))}),x.onload=G=>{A(G.target.result)},j&&(x.onprogress=j),u?x.readAsArrayBuffer(G):x.readAsText(G),s},g=(G,A,j,u,k,O,d)=>{if(G.name)return D(G,A,j,k,O?G=>{O(void 0,G)}:void 0);const h=G;if(-1!==h.indexOf("file:")){let G=decodeURIComponent(h.substring(5).toLowerCase());0===G.indexOf("./")&&(G=G.substring(2));const u=x.FilesToLoad[G];if(u)return D(u,A,j,k,O?G=>O(void 0,new C(G.message,G.file)):void 0)}const{match:R,type:U}=M(h);if(R){const G={onCompleteObservable:new B.b,abort:()=>()=>{}};try{const G=k?o(h):W(h);A(G,void 0,U)}catch(s){O?O(void 0,s):H.e.Error(s.message||"Failed to parse the Data URL")}return F.d.SetImmediate((()=>{G.onCompleteObservable.notifyObservers(G)})),G}return c(h,((G,j)=>{A(G,null===j||void 0===j?void 0:j.responseURL,null===j||void 0===j?void 0:j.getResponseHeader("content-type"))}),j,u,k,O?G=>{O(G.request,new C(G.message,G.request))}:void 0,d)},c=(G,A,j,x,s,O,d)=>{G=n.CleanUrl(G),G=n.PreprocessUrl(G);const h=n.BaseUrl+G;let F=!1;const R={onCompleteObservable:new B.b,abort:()=>F=!0},U=()=>{let G,B=new u.c,x=null;const U=()=>{B&&(j&&B.removeEventListener("progress",j),G&&B.removeEventListener("readystatechange",G),B.removeEventListener("loadend",S))};let S=()=>{U(),R.onCompleteObservable.notifyObservers(R),R.onCompleteObservable.clear(),j=void 0,G=null,S=null,O=void 0,d=void 0,A=void 0};R.abort=()=>{F=!0,S&&S(),B&&B.readyState!==(XMLHttpRequest.DONE||4)&&B.abort(),null!==x&&(clearTimeout(x),x=null),B=null};const C=G=>{const A=G.message||"Unknown error";O&&B?O(new t(A,B)):H.e.Error(A)},Y=H=>{if(B){if(B.open("GET",h),d)try{d(B)}catch(R){return void C(R)}s&&(B.responseType="arraybuffer"),j&&B.addEventListener("progress",j),S&&B.addEventListener("loadend",S),G=()=>{if(!F&&B&&B.readyState===(XMLHttpRequest.DONE||4)){if(G&&B.removeEventListener("readystatechange",G),B.status>=200&&B.status<300||0===B.status&&(!(0,k.f)()||r())){const G=s?B.response:B.responseText;if(null!==G){try{A&&A(G,B)}catch(R){C(R)}return}}const j=n.DefaultRetryStrategy;if(j){const G=j(h,B,H);if(-1!==G)return U(),B=new u.c,void(x=setTimeout((()=>Y(H+1)),G))}const d=new t("Error status: "+B.status+" "+B.statusText+" - Unable to load "+h,B);O&&O(d)}},B.addEventListener("readystatechange",G),B.send()}};Y(0)};if(x&&x.enableSceneOffline){const u=G=>{G&&G.status>400?O&&O(G):U()},k=()=>{x&&x.loadFile(n.BaseUrl+G,(G=>{!F&&A&&A(G),R.onCompleteObservable.notifyObservers(R)}),j?G=>{!F&&j&&j(G)}:void 0,u,s)};x.open(k,u)}else U();return R},E=G=>{const{match:A,type:j}=M(G);if(A)return j||void 0;const u=G.lastIndexOf(".");switch(G.substring(u+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ss":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,b=G=>S.test(G),M=G=>{const A=S.exec(G);if(null===A||0===A.length)return{match:!1,type:""};return{match:!0,type:A[0].replace("data:","").replace("base64,","")}};function o(G){return(0,O.b)(G.split(",")[1])}const W=G=>(0,O.f)(G.split(",")[1]);let J;U.e._FileToolsLoadImage=I,R.b.loadFile=g,d.l.loadFile=g;((G,A,j,u,k,B,x,s,O,d)=>{J={DecodeBase64UrlToBinary:G,DecodeBase64UrlToString:A,DefaultRetryStrategy:j.DefaultRetryStrategy,BaseUrl:j.BaseUrl,CorsBehavior:j.CorsBehavior,PreprocessUrl:j.PreprocessUrl,IsBase64DataUrl:u,IsFileURL:k,LoadFile:B,LoadImage:x,ReadFile:s,RequestFile:O,SetCorsBehavior:d},Object.defineProperty(J,"DefaultRetryStrategy",{get:function(){return j.DefaultRetryStrategy},set:function(G){j.DefaultRetryStrategy=G}}),Object.defineProperty(J,"BaseUrl",{get:function(){return j.BaseUrl},set:function(G){j.BaseUrl=G}}),Object.defineProperty(J,"PreprocessUrl",{get:function(){return j.PreprocessUrl},set:function(G){j.PreprocessUrl=G}}),Object.defineProperty(J,"CorsBehavior",{get:function(){return j.CorsBehavior},set:function(G){j.CorsBehavior=G}})})(o,W,n,b,r,g,I,D,c,Q)},11189:(G,A,j)=>{function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(G=>{const A=16*Math.random()|0;return("x"===G?A:3&A|8).toString(16)}))}j.d(A,{c:()=>u})},11174:(G,A,j)=>{j.d(A,{d:()=>B});var u=j(11065),k=j(11181);class B{static Instantiate(G){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[G])return this.RegisteredExternalClasses[G];const A=(0,k.e)(G);if(A)return A;u.e.Warn(G+" not found, you may have missed an import.");const j=G.split(".");let B=window||this;for(let u=0,k=j.length;u<k;u++)B=B[j[u]];return"function"!==typeof B?null:B}}B.RegisteredExternalClasses={}},11072:(G,A,j)=>{j.d(A,{c:()=>k});var u=j(11057);class k{static get Now(){return(0,u.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11098:(G,A,j)=>{j.d(A,{b:()=>x,f:()=>B,j:()=>u,n:()=>k});const u=G=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(G);let A="";for(let j=0;j<G.byteLength;j++)A+=String.fromCharCode(G[j]);return A},k=G=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j,u,k,B,x,s,O,d="",h=0;const H=ArrayBuffer.isView(G)?new Uint8Array(G.buffer,G.byteOffset,G.byteLength):new Uint8Array(G);for(;h<H.length;)j=H[h++],u=h<H.length?H[h++]:Number.NaN,k=h<H.length?H[h++]:Number.NaN,B=j>>2,x=(3&j)<<4|u>>4,s=(15&u)<<2|k>>6,O=63&k,isNaN(u)?s=O=64:isNaN(k)&&(O=64),d+=A.charAt(B)+A.charAt(x)+A.charAt(s)+A.charAt(O);return d},B=G=>atob(G),x=G=>{const A=B(G),j=A.length,u=new Uint8Array(new ArrayBuffer(j));for(let k=0;k<j;k++)u[k]=A.charCodeAt(k);return u.buffer}},11191:(G,A,j)=>{function u(G){let A=1;do{A*=2}while(A<G);return A===G}function k(G,A,j){return G*(1-j)+A*j}function B(G){const A=x(G),j=s(G);return A-G>G-j?j:A}function x(G){return G--,G|=G>>1,G|=G>>2,G|=G>>4,G|=G>>8,G|=G>>16,++G}function s(G){return G|=G>>1,G|=G>>2,G|=G>>4,G|=G>>8,(G|=G>>16)-(G>>1)}function O(G,A){let j;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:j=s(G);break;case 2:j=B(G);break;default:j=x(G)}return Math.min(j,A)}j.d(A,{e:()=>s,h:()=>O,l:()=>u,n:()=>k,q:()=>B})},11043:(G,A,j)=>{j.r(A),j.d(A,{AsyncLoop:()=>Y,Tools:()=>C,className:()=>t});var u=j(11050),k=j(11057),B=j(11065),x=j(11069),s=j(11072),O=j(11075),d=j(11078),h=j(11085),H=j(11089),F=j(11114),R=j(11174),U=j(11189),S=j(11191);class C{static get BaseUrl(){return H.f.BaseUrl}static set BaseUrl(G){H.f.BaseUrl=G}static get CleanUrl(){return H.f.CleanUrl}static set CleanUrl(G){H.f.CleanUrl=G}static IsAbsoluteUrl(G){return 0===G.indexOf("//")||-1!==G.indexOf("://")&&(-1!==G.indexOf(".")&&(-1!==G.indexOf("/")&&(!(G.indexOf(":")>G.indexOf("/"))&&(G.indexOf("://")<G.indexOf(".")||(0===G.indexOf("data:")||0===G.indexOf("blob:"))))))}static set ScriptBaseUrl(G){H.f.ScriptBaseUrl=G}static get ScriptBaseUrl(){return H.f.ScriptBaseUrl}static set CDNBaseUrl(G){C.ScriptBaseUrl=G,C.AssetBaseUrl=G}static set ScriptPreprocessUrl(G){H.f.ScriptPreprocessUrl=G}static get ScriptPreprocessUrl(){return H.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return H.f.DefaultRetryStrategy}static set DefaultRetryStrategy(G){H.f.DefaultRetryStrategy=G}static get CorsBehavior(){return H.f.CorsBehavior}static set CorsBehavior(G){H.f.CorsBehavior=G}static get UseFallbackTexture(){return h.d.UseFallbackTexture}static set UseFallbackTexture(G){h.d.UseFallbackTexture=G}static get RegisteredExternalClasses(){return R.d.RegisteredExternalClasses}static set RegisteredExternalClasses(G){R.d.RegisteredExternalClasses=G}static get fallbackTexture(){return h.d.FallbackTexture}static set fallbackTexture(G){h.d.FallbackTexture=G}static FetchToRef(G,A,j,u,k,B){const x=4*((Math.abs(G)*j%j|0)+(Math.abs(A)*u%u|0)*j);B.r=k[x]/255,B.g=k[x+1]/255,B.b=k[x+2]/255,B.a=k[x+3]/255}static Mix(G,A,j){return 0}static Instantiate(G){return R.d.Instantiate(G)}static SetImmediate(G){F.d.SetImmediate(G)}static IsExponentOfTwo(G){return!0}static FloatRound(G){return Math.fround(G)}static GetFilename(G){const A=G.lastIndexOf("/");return A<0?G:G.substring(A+1)}static GetFolderPath(G){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const j=G.lastIndexOf("/");return j<0?A?G:"":G.substring(0,j+1)}static ToDegrees(G){return 180*G/Math.PI}static ToRadians(G){return G*Math.PI/180}static SmoothAngleChange(G,A){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const u=this.ToRadians(G),k=this.ToRadians(A);return this.ToDegrees(Math.atan2((1-j)*Math.sin(k)+j*Math.sin(u),(1-j)*Math.cos(k)+j*Math.cos(u)))}static MakeArray(G,A){return!0===A||void 0!==G&&null!=G?Array.isArray(G)?G:[G]:null}static GetPointerPrefix(G){return(0,k.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(G,A){(0,H.v)(G,A)}static SetReferrerPolicyBehavior(G,A){A.referrerPolicy=G}static get PreprocessUrl(){return H.f.PreprocessUrl}static set PreprocessUrl(G){H.f.PreprocessUrl=G}static LoadImage(G,A,j,u,k,B){return(0,H.o)(G,A,j,u,k,B)}static LoadFile(G,A,j,u,k,B){return(0,H.m)(G,A,j,u,k,B)}static async LoadFileAsync(G){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((j,u)=>{(0,H.m)(G,(G=>{j(G)}),void 0,void 0,A,((G,A)=>{u(A)}))}))}static GetAssetUrl(G){if(!G)return"";if(C.AssetBaseUrl&&G.startsWith(C._DefaultAssetsUrl)){const A="/"===C.AssetBaseUrl[C.AssetBaseUrl.length-1]?C.AssetBaseUrl.substring(0,C.AssetBaseUrl.length-1):C.AssetBaseUrl;return G.replace(C._DefaultAssetsUrl,A)}return G}static GetBabylonScriptURL(G,A){if(!G)return"";if(C.ScriptBaseUrl&&G.startsWith(C._DefaultCdnUrl)){const A="/"===C.ScriptBaseUrl[C.ScriptBaseUrl.length-1]?C.ScriptBaseUrl.substring(0,C.ScriptBaseUrl.length-1):C.ScriptBaseUrl;G=G.replace(C._DefaultCdnUrl,A)}return G=C.ScriptPreprocessUrl(G),A&&(G=C.GetAbsoluteUrl(G)),G}static LoadBabylonScript(G,A,j,u){G=C.GetBabylonScriptURL(G),C.LoadScript(G,A,j)}static async LoadBabylonScriptAsync(G){return G=C.GetBabylonScriptURL(G),await C.LoadScriptAsync(G)}static LoadScript(G,A,j,u){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(G),A&&A()}catch(O){null===j||void 0===j||j(`Unable to load script '${G}' in worker`,O)}return}if(!(0,k.f)())return void(null===j||void 0===j||j(`Cannot load script '${G}' outside of a window or a worker`));const x=document.getElementsByTagName("head")[0],s=document.createElement("script");B?(s.setAttribute("type","module"),s.innerText=G):(s.setAttribute("type","text/javascript"),s.setAttribute("src",G)),u&&(s.id=u),s.onload=()=>{A&&A()},s.onerror=A=>{j&&j(`Unable to load script '${G}'`,A)},x.appendChild(s)}static async LoadScriptAsync(G,A){return await new Promise(((j,u)=>{this.LoadScript(G,(()=>{j()}),((G,A)=>{u(A||new Error(G))}),A)}))}static ReadFileAsDataURL(G,A,j){const k=new FileReader,B={onCompleteObservable:new u.b,abort:()=>k.abort()};return k.onloadend=()=>{B.onCompleteObservable.notifyObservers(B)},k.onload=G=>{A(G.target.result)},k.onprogress=j,k.readAsDataURL(G),B}static ReadFile(G,A,j,u,k){return(0,H.p)(G,A,j,u,k)}static FileAsURL(G){const A=new Blob([G]);return window.URL.createObjectURL(A)}static Format(G){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return G.toFixed(A)}static DeepCopy(G,A,j,u){x.c.DeepCopy(G,A,j,u)}static IsEmpty(G){for(const A in G)if(Object.prototype.hasOwnProperty.call(G,A))return!1;return!0}static RegisterTopRootEvents(G,A){for(let u=0;u<A.length;u++){const k=A[u];G.addEventListener(k.name,k.handler,!1);try{window.parent&&window.parent.addEventListener(k.name,k.handler,!1)}catch(j){}}}static UnregisterTopRootEvents(G,A){for(let u=0;u<A.length;u++){const k=A[u];G.removeEventListener(k.name,k.handler);try{G.parent&&G.parent.removeEventListener(k.name,k.handler)}catch(j){}}}static async DumpFramebuffer(G,A,j,u){throw(0,O.c)("DumpTools")}static DumpData(G,A,j,u){throw(0,O.c)("DumpTools")}static async DumpDataAsync(G,A,j){throw(0,O.c)("DumpTools")}static _IsOffScreenCanvas(G){return void 0!==G.convertToBlob}static ToBlob(G,A){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",u=arguments.length>3?arguments[3]:void 0;C._IsOffScreenCanvas(G)||G.toBlob||(G.toBlob=function(G,A,j){setTimeout((()=>{const u=atob(this.toDataURL(A,j).split(",")[1]),k=u.length,B=new Uint8Array(k);for(let G=0;G<k;G++)B[G]=u.charCodeAt(G);G(new Blob([B]))}))}),C._IsOffScreenCanvas(G)?G.convertToBlob({type:j,quality:u}).then((G=>A(G))):G.toBlob((function(G){A(G)}),j,u)}static DownloadBlob(G,A){if("download"in document.createElement("a")){if(!A){const G=new Date;A="screenshot_"+((G.getFullYear()+"-"+(G.getMonth()+1)).slice(2)+"-"+G.getDate()+"_"+G.getHours()+"-"+("0"+G.getMinutes()).slice(-2))+".png"}C.Download(G,A)}else if(G&&"undefined"!==typeof URL){const A=URL.createObjectURL(G),j=window.open("");if(!j)return;const u=j.document.createElement("img");u.onload=function(){URL.revokeObjectURL(A)},u.src=A,j.document.body.appendChild(u)}}static EncodeScreenshotCanvasData(G,A){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",u=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0;if("string"!==typeof u&&A){if(A){if(C._IsOffScreenCanvas(G))return void G.convertToBlob({type:j,quality:k}).then((G=>{const j=new FileReader;j.readAsDataURL(G),j.onloadend=()=>{const G=j.result;A(G)}}));const u=G.toDataURL(j,k);A(u)}}else this.ToBlob(G,(function(G){G&&C.DownloadBlob(G,u),A&&A("")}),j,k)}static Download(G,A){if("undefined"===typeof URL)return;const j=window.URL.createObjectURL(G),u=document.createElement("a");document.body.appendChild(u),u.style.display="none",u.href=j,u.download=A,u.addEventListener("click",(()=>{u.parentElement&&u.parentElement.removeChild(u)})),u.click(),window.URL.revokeObjectURL(j)}static BackCompatCameraNoPreventDefault(G){return"boolean"===typeof G[0]?G[0]:"boolean"===typeof G[1]&&G[1]}static CreateScreenshot(G,A,j,u){throw(0,O.c)("ScreenshotTools")}static async CreateScreenshotAsync(G,A,j){throw(0,O.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(G,A,j,u){throw(0,O.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(G,A,j){throw(0,O.c)("ScreenshotTools")}static RandomId(){return(0,U.c)()}static IsBase64(G){return(0,H.k)(G)}static DecodeBase64(G){return(0,H.d)(G)}static get errorsCount(){return B.e.errorsCount}static Log(G){B.e.Log(G)}static Warn(G){B.e.Warn(G)}static Error(G){B.e.Error(G)}static get LogCache(){return B.e.LogCache}static ClearLogCache(){B.e.ClearLogCache()}static set LogLevels(G){B.e.LogLevels=G}static set PerformanceLogLevel(G){return(G&C.PerformanceUserMarkLogLevel)===C.PerformanceUserMarkLogLevel?(C.StartPerformanceCounter=C._StartUserMark,void(C.EndPerformanceCounter=C._EndUserMark)):(G&C.PerformanceConsoleLogLevel)===C.PerformanceConsoleLogLevel?(C.StartPerformanceCounter=C._StartPerformanceConsole,void(C.EndPerformanceCounter=C._EndPerformanceConsole)):(C.StartPerformanceCounter=C._StartPerformanceCounterDisabled,void(C.EndPerformanceCounter=C._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(G,A){}static _EndPerformanceCounterDisabled(G,A){}static _StartUserMark(G){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!C._Performance){if(!(0,k.f)())return;C._Performance=window.performance}A&&C._Performance.mark&&C._Performance.mark(G+"-Begin")}static _EndUserMark(G){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&C._Performance.mark&&(C._Performance.mark(G+"-End"),C._Performance.measure(G,G+"-Begin",G+"-End"))}static _StartPerformanceConsole(G){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(C._StartUserMark(G,A),console.time&&console.time(G))}static _EndPerformanceConsole(G){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(C._EndUserMark(G,A),console.timeEnd(G))}static get Now(){return s.c.Now}static GetClassName(G){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=null;if(!A&&G.getClassName)j=G.getClassName();else{if(G instanceof Object){j=(A?G:Object.getPrototypeOf(G)).constructor.__bjsclassName__}j||(j=typeof G)}return j}static First(G,A){for(const j of G)if(A(j))return j;return null}static getFullClassName(G){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=null,u=null;if(!A&&G.getClassName)j=G.getClassName();else{if(G instanceof Object){const k=A?G:Object.getPrototypeOf(G);j=k.constructor.__bjsclassName__,u=k.constructor.__bjsmoduleName__}j||(j=typeof G)}return j?(null!=u?u+".":"")+j:null}static async DelayAsync(G){await new Promise((A=>{setTimeout((()=>{A()}),G)}))}static IsSafari(){return!!(0,k.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function t(G,A){return j=>{j.__bjsclassName__=G,j.__bjsmoduleName__=null!=A?A:null}}C.AssetBaseUrl="",C.UseCustomRequestHeaders=!1,C.CustomRequestHeaders=d.c.CustomRequestHeaders,C.GetDOMTextContent=k.b,C._DefaultCdnUrl="https://cdn.babylonjs.com",C._DefaultAssetsUrl="https://assets.babylonjs.com/core",C.GetAbsoluteUrl="object"===typeof document?G=>{const A=document.createElement("a");return A.href=G,A.href}:"function"===typeof URL&&"object"===typeof location?G=>new URL(G,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},C.NoneLogLevel=B.e.NoneLogLevel,C.MessageLogLevel=B.e.MessageLogLevel,C.WarningLogLevel=B.e.WarningLogLevel,C.ErrorLogLevel=B.e.ErrorLogLevel,C.AllLogLevel=B.e.AllLogLevel,C.IsWindowObjectExist=k.f,C.PerformanceNoneLogLevel=0,C.PerformanceUserMarkLogLevel=1,C.PerformanceConsoleLogLevel=2,C.StartPerformanceCounter=C._StartPerformanceCounterDisabled,C.EndPerformanceCounter=C._EndPerformanceCounterDisabled;class Y{constructor(G,A,j){let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=G,this.index=u-1,this._done=!1,this._fn=A,this._successCallback=j}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(G,A,j){const u=new Y(G,A,j,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return u.executeNext(),u}static SyncAsyncForLoop(G,A,j,u,k){let B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Y.Run(Math.ceil(G/A),(u=>{k&&k()?u.breakLoop():setTimeout((()=>{for(let B=0;B<A;++B){const x=u.index*A+B;if(x>=G)break;if(j(x),k&&k()){u.breakLoop();break}}u.executeNext()}),B)}),u)}}C.Mix=S.n,C.IsExponentOfTwo=S.l,h.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11181:(G,A,j)=>{j.d(A,{e:()=>B,h:()=>k});const u={};function k(G,A){u[G]=A}function B(G){return u[G]}},11078:(G,A,j)=>{j.d(A,{c:()=>u});class u{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(u.CustomRequestHeaders).length>0||u.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const G in u.CustomRequestHeaders){const A=u.CustomRequestHeaders[G];A&&this._xhr.setRequestHeader(G,A)}}_shouldSkipRequestModifications(G){return u.SkipRequestModificationForBabylonCDN&&(G.includes("preview.babylonjs.com")||G.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(G){this._xhr.onprogress=G}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(G){this._xhr.responseType=G}get timeout(){return this._xhr.timeout}set timeout(G){this._xhr.timeout=G}addEventListener(G,A,j){this._xhr.addEventListener(G,A,j)}removeEventListener(G,A,j){this._xhr.removeEventListener(G,A,j)}abort(){this._xhr.abort()}send(G){u.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(G)}open(G,A){for(const j of u.CustomRequestModifiers){if(this._shouldSkipRequestModifications(A))return;A=j(this._xhr,A)||A}A=(A=A.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=A,this._xhr.open(G,A,!0)}setRequestHeader(G,A){this._xhr.setRequestHeader(G,A)}getResponseHeader(G){return this._xhr.getResponseHeader(G)}}u.CustomRequestHeaders={},u.CustomRequestModifiers=new Array,u.SkipRequestModificationForBabylonCDN=!0}}]);