"use strict";(self.ipz2em9uj1g=self.ipz2em9uj1g||[]).push([[8],{12511:(r,O,W)=>{W.d(O,{c:()=>G});var q=W(12484),Q=W(12453),C=W(12515),T=W(12533),h=W(12465);class J{constructor(){let r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,r&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(r){this._zOffset!==r&&(this._zOffset=r,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(r){this._zOffsetUnits!==r&&(this._zOffsetUnits=r,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(r){this._cullFace!==r&&(this._cullFace=r,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(r){this._cull!==r&&(this._cull=r,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(r){this._depthFunc!==r&&(this._depthFunc=r,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(r){this._depthMask!==r&&(this._depthMask=r,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(r){this._depthTest!==r&&(this._depthTest=r,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(r){this._frontFace!==r&&(this._frontFace=r,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(r){this.isDirty&&(this._isCullDirty&&(this.cull?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(r.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(r.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(r.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(r.enable(r.POLYGON_OFFSET_FILL),r.polygonOffset(this.zOffset,this.zOffsetUnits)):r.disable(r.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(r.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class mr{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(r){this._func!==r&&(this._func=r,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(r){this._funcRef!==r&&(this._funcRef=r,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(r){this._funcMask!==r&&(this._funcMask=r,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(r){this._opStencilFail!==r&&(this._opStencilFail=r,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(r){this._opDepthFail!==r&&(this._opDepthFail=r,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(r){this._opStencilDepthPass!==r&&(this._opStencilDepthPass=r,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(r){this._mask!==r&&(this._mask=r,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(r){this._enabled!==r&&(this._enabled=r,this._isStencilTestDirty=!0)}constructor(){let r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,r&&this.reset()}reset(){var r;this.stencilMaterial=void 0,null===(r=this.stencilGlobal)||void 0===r||r.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(r){var O;if(!r)return;const W=!this.useStencilGlobalOnly&&!(null===(O=this.stencilMaterial)||void 0===O||!O.enabled);this.enabled=W?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=W?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=W?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=W?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=W?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=W?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=W?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=W?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(r.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(r.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(r.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class d{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=d.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=d.KEEP,this.opDepthFail=d.KEEP,this.opStencilDepthPass=d.REPLACE}get stencilFunc(){return this.func}set stencilFunc(r){this.func=r}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(r){this.funcRef=r}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(r){this.funcMask=r}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(r){this.opStencilFail=r}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(r){this.opDepthFail=r}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(r){this.opStencilDepthPass=r}get stencilMask(){return this.mask}set stencilMask(r){this.mask=r}get stencilTest(){return this.enabled}set stencilTest(r){this.enabled=r}}d.ALWAYS=519,d.KEEP=7680,d.REPLACE=7681;class v{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(r){this._alphaBlend!==r&&(this._alphaBlend=r,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(r,O,W,q){this._blendConstants[0]===r&&this._blendConstants[1]===O&&this._blendConstants[2]===W&&this._blendConstants[3]===q||(this._blendConstants[0]=r,this._blendConstants[1]=O,this._blendConstants[2]=W,this._blendConstants[3]=q,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(r,O,W,q){this._blendFunctionParameters[0]===r&&this._blendFunctionParameters[1]===O&&this._blendFunctionParameters[2]===W&&this._blendFunctionParameters[3]===q||(this._blendFunctionParameters[0]=r,this._blendFunctionParameters[1]=O,this._blendFunctionParameters[2]=W,this._blendFunctionParameters[3]=q,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(r,O){this._blendEquationParameters[0]===r&&this._blendEquationParameters[1]===O||(this._blendEquationParameters[0]=r,this._blendEquationParameters[1]=O,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(r){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?r.enable(r.BLEND):r.disable(r.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(r.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(r.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(r.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var g=W(12474),K=W(12540),U=W(12444),P=W(12435),b=W(12504),e=W(12551);function Y(r,O){if((0,U.l)()){const{requestAnimationFrame:W}=O||window;if("function"===typeof W)return W(r)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(r);return setTimeout(r,16)}class G{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(r){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get mh(){return this._useReverseDepthBuffer}set mh(r){r!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=r,this._depthCullingState.depthFunc=r?518:515)}setColorWrite(r){r!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=r)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(r){if(r)return this.isNDCHalfZRange?r.IS_NDC_HALF_ZRANGE="":delete r.IS_NDC_HALF_ZRANGE,this.mh?r.USE_REVERSE_DEPTHBUFFER="":delete r.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?r.USE_EXACT_SRGB_CONVERSIONS="":delete r.USE_EXACT_SRGB_CONVERSIONS);{let r="";return this.isNDCHalfZRange&&(r+="#define IS_NDC_HALF_ZRANGE"),this.mh&&(r&&(r+="\n"),r+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(r&&(r+="\n"),r+="#define USE_EXACT_SRGB_CONVERSIONS"),r}}_rebuildInternalTextures(){const r=this._internalTexturesCache.slice();for(const O of r)O._rebuild()}_rebuildRenderTargetWrappers(){const r=this._renderTargetWrapperCache.slice();for(const O of r)O._rebuild()}_rebuildEffects(){for(const r in this._compiledEffects){const O=this._compiledEffects[r];O._pipelineContext=null,O._prepareEffect()}C.Effect.ResetCache()}_rebuildGraphicsResources(){var r;this.wipeCaches(!0),this._rebuildEffects(),null===(r=this._rebuildComputeEffects)||void 0===r||r.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){Q.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(r){setTimeout((()=>{this._clearEmptyResources();const O=this._depthCullingState.depthTest,W=this._depthCullingState.depthFunc,q=this._depthCullingState.depthMask,Q=this._stencilState.stencilTest;r(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=O,this._depthCullingState.depthFunc=W,this._depthCullingState.depthMask=q,this._stencilState.stencilTest=Q,this._flagContextRestored()}),0)}get J(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(r){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(r){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const r=new Uint8Array(4),O=[r,r,r,r,r,r];this._emptyCubeTexture=this.createRawCubeTexture(O,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(r){if(!r)return this._activeRenderLoops.length=0,void this._cancelFrame();const O=this._activeRenderLoops.indexOf(r);O>=0&&(this._activeRenderLoops.splice(O,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const r=this._frameHandler;if(this._frameHandler=0,(0,U.l)()){const{cancelAnimationFrame:O}=this.getHostWindow()||window;if("function"===typeof O)return O(r)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(r);return clearTimeout(r)}}qh(){this.onBeginFrameObservable.notifyObservers(this)}Qh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(r){this._maxFPS=r,void 0!==r&&(this._minFrameTime=r<=0?Number.MAX_VALUE:1e3/r)}_isOverFrameTime(r){if(!r||void 0===this._maxFPS)return!1;const O=r-this._lastFrameTime;return this._lastFrameTime=r,this._renderAccumulator+=O,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(r){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(r)){let r=!0;(this.J||!this.renderEvenInBackground&&this._windowIsBackground)&&(r=!1),r&&(this.qh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Qh())}}_renderLoop(r){this._processFrame(r),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let r=0;r<this._activeRenderLoops.length;r++){(0,this._activeRenderLoops[r])()}}_renderViews(){return!1}_queueNewFrame(r,O){return Y(r,O)}runRenderLoop(r){-1===this._activeRenderLoops.indexOf(r)&&(this._activeRenderLoops.push(r),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(r){this._depthCullingState.depthTest=r}setZOffset(r){this._depthCullingState.zOffset=this.mh?-r:r}getZOffset(){const r=this._depthCullingState.zOffset;return this.mh?-r:r}setZOffsetUnits(r){this._depthCullingState.zOffsetUnits=this.mh?-r:r}getZOffsetUnits(){const r=this._depthCullingState.zOffsetUnits;return this.mh?-r:r}getHostWindow(){return(0,U.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(r){this._compatibilityMode=!0}_rebuildTextures(){for(const r of this.scenes)r._rebuildTextures();for(const r of this._virtualScenes)r._rebuildTextures()}_releaseRenderTargetWrapper(r){const O=this._renderTargetWrapperCache.indexOf(r);-1!==O&&this._renderTargetWrapperCache.splice(O,1)}get currentViewport(){return this._cachedViewport}setViewport(r,O,W){const q=O||this.getRenderWidth(),Q=W||this.getRenderHeight(),C=r.x||0,T=r.y||0;this._cachedViewport=r,this._viewport(C*q,T*Q,q*r.width,Q*r.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(r){return new Path2D(r)}get description(){let r=this.name+this.version;return this._caps.parallelShaderCompile&&(r+=" - Parallel shader compilation"),r}_createTextureBase(r,O,W,C){let T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,J=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,mr=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,U=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,P=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,b=arguments.length>13?arguments[13]:void 0,Y=arguments.length>14?arguments[14]:void 0,X=arguments.length>15?arguments[15]:void 0;const S="data:"===(r=r||"").substring(0,5),o="blob:"===r.substring(0,5),N=S&&-1!==r.indexOf(";base64,"),D=g||new K.e(this,1);D!==g&&(D.label=r.substring(0,60));const p=r;!this._transformTextureUrl||N||g||v||(r=this._transformTextureUrl(r)),p!==r&&(D._originalUrl=p);const z=r.lastIndexOf(".");let L=P||(z>-1?r.substring(z).toLowerCase():"");L.indexOf("?")>-1&&(L=L.split("?")[0]);const M=(0,e.c)(L,b);C&&C.addPendingData(D),D.url=r,D.generateMipMaps=!O,D.samplingMode=T,D.invertY=W,D._useSRGBBuffer=this._getUseSRGBBuffer(!!X,O),this._doNotHandleContextLost||(D._buffer=v);let k=null;h&&!g&&(k=D.onLoadedObservable.add(h)),g||this._internalTexturesCache.push(D);const s=(W,g)=>{C&&C.removePendingData(D),r===p?(k&&D.onLoadedObservable.remove(k),q.d.UseFallbackTexture&&r!==q.d.FallbackTexture&&this._createTextureBase(q.d.FallbackTexture,O,D.invertY,C,T,null,J,mr,d,v,D),W=(W||"Unknown error")+(q.d.UseFallbackTexture?" - Fallback texture was used":""),D.onErrorObservable.notifyObservers({message:W,exception:g}),J&&J(W,g)):(Q.b.Warn(`Failed to load ${r}, falling back to ${p}`),this._createTextureBase(p,O,D.invertY,C,T,h,J,mr,d,v,D,U,P,b,Y,X))};if(M){const O=async r=>{(await M).loadData(r,D,((r,O,W,q,Q,h)=>{h?s("TextureLoader failed to load data"):mr(D,L,C,{width:r,height:O},D.invertY,!W,q,(()=>(Q(),!1)),T)}),Y)};v?v instanceof ArrayBuffer?O(new Uint8Array(v)):ArrayBuffer.isView(v)?O(v):J&&J("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(r,(r=>{O(new Uint8Array(r))}),void 0,C?C.offlineProvider:void 0,!0,((r,O)=>{s("Unable to load "+(r&&r.responseURL,O))}))}else{const W=r=>{o&&!this._doNotHandleContextLost&&(D._buffer=r),mr(D,L,C,r,D.invertY,O,!1,d,T)};!S||N?v&&("string"===typeof v.decoding||v.close)?W(v):G._FileToolsLoadImage(r||"",W,s,C?C.offlineProvider:null,b,D.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof v||v instanceof ArrayBuffer||ArrayBuffer.isView(v)||v instanceof Blob?G._FileToolsLoadImage(v,W,s,C?C.offlineProvider:null,b,D.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):v&&W(v)}return D}_rebuildBuffers(){for(const r of this._uniformBuffers)r._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,U.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const r in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,r)&&(this._boundTexturesCache[r]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(r){this._name=r}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(r){this._hardwareScalingLevel=r,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(r){this._doNotHandleContextLost=r}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(r,O,W){var Q,C;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new J,this._stencilStateComposer=new mr,this._stencilState=new d,this._alphaState=new v,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new P.d,this.onCanvasFocusObservable=new P.d,this.onNewSceneAddedObservable=new P.d,this.onResizeObservable=new P.d,this.onCanvasPointerOutObservable=new P.d,this.onEffectErrorObservable=new P.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new P.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=r=>this._renderLoop(r),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new P.d,this.onAfterShaderCompilationObservable=new P.d,this.onBeginFrameObservable=new P.d,this.onEndFrameObservable=new P.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new P.d,this.onContextRestoredObservable=new P.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.mJ=new P.d,this.onReleaseEffectsObservable=new P.d,q.d.Instances.push(this),this.startTime=h.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,T.e.SetMatrixPrecision(!!O.useHighPrecisionMatrix),(0,U.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=W??!1,O.antialias=r??O.antialias,O.deterministicLockstep=O.deterministicLockstep??!1,O.lockstepMaxSteps=O.lockstepMaxSteps??4,O.timeStep=O.timeStep??1/60,O.dh=O.dh??!0,this._audioContext=(null===(Q=O.audioEngineOptions)||void 0===Q?void 0:Q.audioContext)??null,this._audioDestination=(null===(C=O.audioEngineOptions)||void 0===C?void 0:C.audioDestination)??null,this.premultipliedAlpha=O.premultipliedAlpha??!0,this._doNotHandleContextLost=!!O.doNotHandleContextLost,this._isStencilEnable=!!O.dh,this.useExactSrgbConversions=O.useExactSrgbConversions??!1;const g=(0,U.l)()&&window.devicePixelRatio||1,K=O.limitDeviceRatio||g;W=W||O.adaptToDeviceRatio||!1,this._hardwareScalingLevel=W?1/Math.min(K,g):1,this._lastDevicePixelRatio=g,this._creationOptions=O}resize(){let r,O,W=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const r=(0,U.l)()&&window.devicePixelRatio||1,O=this._lastDevicePixelRatio/r;this._lastDevicePixelRatio=r,this._hardwareScalingLevel*=O}if((0,U.l)()&&(0,U.g)())if(this._renderingCanvas){var q,Q;const W=null===(q=(Q=this._renderingCanvas).getBoundingClientRect)||void 0===q?void 0:q.call(Q);r=this._renderingCanvas.clientWidth||(null===W||void 0===W?void 0:W.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,O=this._renderingCanvas.clientHeight||(null===W||void 0===W?void 0:W.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else r=window.innerWidth,O=window.innerHeight;else r=this._renderingCanvas?this._renderingCanvas.width:100,O=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(r/this._hardwareScalingLevel,O/this._hardwareScalingLevel,W)}setSize(r,O){let W=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(r|=0,O|=0,!W&&this._renderingCanvas.width===r&&this._renderingCanvas.height===O)return!1;if(this._renderingCanvas.width=r,this._renderingCanvas.height=O,this.scenes){for(let r=0;r<this.scenes.length;r++){const O=this.scenes[r];for(let r=0;r<O.cameras.length;r++){O.cameras[r]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(r,O,W,q,Q,C,T,h,J,mr,d){throw(0,g.c)("engine.rawTexture")}createRawCubeTexture(r,O,W,q,Q,C,T,h){throw(0,g.c)("engine.rawTexture")}createRawTexture3D(r,O,W,q,Q,C,T,h,J,mr,d){throw(0,g.c)("engine.rawTexture")}createRawTexture2DArray(r,O,W,q,Q,C,T,h,J,mr,d){throw(0,g.c)("engine.rawTexture")}_sharedInit(r){this._renderingCanvas=r}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const r=navigator.userAgent;this.hostInformation.isMobile=-1!==r.indexOf("Mobile")||-1!==r.indexOf("Mac")&&(0,U.g)()&&"ontouchend"in document},this._checkForMobile(),(0,U.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(r){return document.createElement("video")}_reportDrawCall(){var r;let O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(r=this._drawCalls)||void 0===r||r.addCount(O,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(r,O){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(r,O){return createImageBitmap(r,O)}resizeImageBitmap(r,O,W){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(r){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(r,O){if("undefined"===typeof document)return new OffscreenCanvas(r,O);const W=document.createElement("canvas");return W.width=r,W.height=O,W}createCanvas(r,O){return G._CreateCanvas(r,O)}static _FileToolsLoadImage(r,O,W,q,Q,C,T){throw(0,g.c)("FileTools")}_loadFile(r,O,W,q,Q,C){const T=(0,b.k)(r,O,W,q,Q,C);return this._activeRequests.push(T),T.onCompleteObservable.add((()=>{const r=this._activeRequests.indexOf(T);-1!==r&&this._activeRequests.splice(r,1)})),T}static _FileToolsLoadFile(r,O,W,q,Q,C){if(b.d.loadFile)return b.d.loadFile(r,O,W,q,Q,C);throw(0,g.c)("FileTools")}dispose(){var r;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(r=this.releaseComputeEffects)||void 0===r||r.call(this),C.Effect.ResetCache();for(const W of this._activeRequests)W.abort();this._boundRenderFunction=null,this.mJ.notifyObservers(this),this.mJ.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,U.l)()&&window.removeEventListener("resize",this._checkForMobile);const O=q.d.Instances.indexOf(this);O>=0&&q.d.Instances.splice(O,1),q.d.Instances.length||(q.d.OnEnginesDisposedObservable.notifyObservers(this),q.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(r){throw(0,g.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(r,O){for(let W=0;W<q.d.Instances.length;W++){const Q=q.d.Instances[W];for(let W=0;W<Q.scenes.length;W++)Q.scenes[W].markAllMaterialsAsDirty(r,O)}}}G._RenderPassIdCounter=0,G._RescalePostProcessFactory=null,G.CollisionsEpsilon=.001,G.QueueNewFrame=Y},12484:(r,O,W)=>{W.d(O,{d:()=>Q});var q=W(12435);class Q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}Q.Instances=[],Q.OnEnginesDisposedObservable=new q.d,Q._LastCreatedScene=null,Q.UseFallbackTexture=!0,Q.FallbackTexture=""},12533:(r,O,W)=>{W.d(O,{e:()=>q});class q{static SetMatrixPrecision(r){if(q.MatrixTrackPrecisionChange=!1,r&&!q.MatrixUse64Bits&&q.MatrixTrackedMatrices)for(let O=0;O<q.MatrixTrackedMatrices.length;++O){const r=q.MatrixTrackedMatrices[O],W=r.gh;r.gh=new Array(16);for(let O=0;O<16;++O)r.gh[O]=W[O]}q.MatrixUse64Bits=r,q.MatrixCurrentType=q.MatrixUse64Bits?Array:Float32Array,q.MatrixTrackedMatrices=null}}q.MatrixUse64Bits=!1,q.MatrixTrackPrecisionChange=!0,q.MatrixCurrentType=Float32Array,q.MatrixTrackedMatrices=[]},12551:(r,O,W)=>{W.d(O,{c:()=>T});var q=W(12453);const Q=new Map;function C(r,O){(function(r){return Q.delete(r)})(r)&&q.b.Warn(`Extension with the name '${r}' already exists`),Q.set(r,O)}function T(r,O){"image/ktx"!==O&&"image/ktx2"!==O||(r=".ktx"),Q.has(r)||(r.endsWith(".ies")&&C(".ies",(async()=>await W.e(15).then(W.bind(W,15049)).then((r=>new r._IESTextureLoader)))),r.endsWith(".dds")&&C(".dds",(async()=>await Promise.all([W.e(14),W.e(17),W.e(13),W.e(19),W.e(18),W.e(28)]).then(W.bind(W,15053)).then((r=>new r._DDSTextureLoader)))),r.endsWith(".basis")&&C(".basis",(async()=>await Promise.all([W.e(14),W.e(17),W.e(13),W.e(47)]).then(W.bind(W,15065)).then((r=>new r._BasisTextureLoader)))),r.endsWith(".env")&&C(".env",(async()=>await Promise.all([W.e(14),W.e(17),W.e(13),W.e(19),W.e(18),W.e(23),W.e(21),W.e(45),W.e(48)]).then(W.bind(W,15070)).then((r=>new r._ENVTextureLoader)))),r.endsWith(".hdr")&&C(".hdr",(async()=>await Promise.all([W.e(14),W.e(49)]).then(W.bind(W,15077)).then((r=>new r._HDRTextureLoader)))),(r.endsWith(".ktx")||r.endsWith(".ktx2"))&&(C(".ktx",(async()=>await W.e(30).then(W.bind(W,15083)).then((r=>new r._KTXTextureLoader)))),C(".ktx2",(async()=>await W.e(30).then(W.bind(W,15083)).then((r=>new r._KTXTextureLoader))))),r.endsWith(".tga")&&C(".tga",(async()=>await W.e(50).then(W.bind(W,15086)).then((r=>new r._TGATextureLoader)))),r.endsWith(".exr")&&C(".exr",(async()=>await W.e(16).then(W.bind(W,15091)).then((r=>new r._ExrTextureLoader)))));const q=Q.get(r);return q?Promise.resolve(q(O)):null}},12540:(r,O,W)=>{W.d(O,{e:()=>T});var q,Q=W(12435),C=W(12543);!function(r){r[r.Unknown=0]="Unknown",r[r.Url=1]="Url",r[r.Temp=2]="Temp",r[r.Raw=3]="Raw",r[r.Dynamic=4]="Dynamic",r[r.RenderTarget=5]="RenderTarget",r[r.MultiRenderTarget=6]="MultiRenderTarget",r[r.Cube=7]="Cube",r[r.CubeRaw=8]="CubeRaw",r[r.CubePrefiltered=9]="CubePrefiltered",r[r.Raw3D=10]="Raw3D",r[r.Raw2DArray=11]="Raw2DArray",r[r.DepthStencil=12]="DepthStencil",r[r.CubeRawRGBD=13]="CubeRawRGBD",r[r.Depth=14]="Depth"}(q||(q={}));class T extends C.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(r){this.generateMipMaps=r}get uniqueId(){return this._uniqueId}_setUniqueId(r){this._uniqueId=r}getEngine(){return this._engine}get source(){return this._source}constructor(r,O){let W=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new Q.d,this.onErrorObservable=new Q.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=r,this._source=O,this._uniqueId=T._Counter++,W||(this._hardwareTexture=r._createHardwareTexture())}incrementReferences(){this._references++}updateSize(r,O){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,r,O,W),this.width=r,this.height=O,this.depth=W,this.baseWidth=r,this.baseHeight=O,this.baseDepth=W,this._size=r*O*W}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const r=this.onRebuildCallback(this),O=O=>{O._swapAndDie(this,!1),this.isReady=r.isReady};return void(r.isAsync?r.proxy.then(O):O(r.proxy))}let r;switch(this.source){case 2:case 12:case 14:break;case 1:return void(r=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(r=>{r._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:r=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),r._swapAndDie(this,!1),this.isReady=!0;break;case 10:r=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),r._swapAndDie(this,!1),this.isReady=!0;break;case 11:r=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),r._swapAndDie(this,!1),this.isReady=!0;break;case 4:r=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),r._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(r=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{r._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:r=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),r._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return r=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(r=>{r&&r._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(r._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(r){var O;let W=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(O=this._hardwareTexture)||void 0===O||O.setUsage(r._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),r._hardwareTexture=this._hardwareTexture,W&&(r._isRGBD=this._isRGBD),this._lodTextureHigh&&(r._lodTextureHigh&&r._lodTextureHigh.dispose(),r._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(r._lodTextureMid&&r._lodTextureMid.dispose(),r._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(r._lodTextureLow&&r._lodTextureLow.dispose(),r._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(r._irradianceTexture&&r._irradianceTexture.dispose(),r._irradianceTexture=this._irradianceTexture);const q=this._engine.getLoadedTexturesCache();let Q=q.indexOf(this);-1!==Q&&q.splice(Q,1),Q=q.indexOf(r),-1===Q&&q.push(r)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}T._Counter=0},12543:(r,O,W)=>{W.d(O,{d:()=>q});class q{get wrapU(){return this._cachedWrapU}set wrapU(r){this._cachedWrapU=r}get wrapV(){return this._cachedWrapV}set wrapV(r){this._cachedWrapV=r}get wrapR(){return this._cachedWrapR}set wrapR(r){this._cachedWrapR=r}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(r){this._cachedAnisotropicFilteringLevel=r}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(r){this._comparisonFunction=r}get useMipMaps(){return this._useMipMaps}set useMipMaps(r){this._useMipMaps=r}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=r,this._cachedWrapV=O,this._cachedWrapR=W,this._cachedAnisotropicFilteringLevel=q,this.samplingMode=Q,this._comparisonFunction=C,this}compareSampler(r){return this._cachedWrapU===r._cachedWrapU&&this._cachedWrapV===r._cachedWrapV&&this._cachedWrapR===r._cachedWrapR&&this._cachedAnisotropicFilteringLevel===r._cachedAnisotropicFilteringLevel&&this.samplingMode===r.samplingMode&&this._comparisonFunction===r._comparisonFunction&&this._useMipMaps===r._useMipMaps}}},12460:(r,O,W)=>{W.d(O,{d:()=>C});var q=W(12453);const Q=(r,O,W)=>r?r.getClassName&&"Mesh"===r.getClassName()?null:!r.getClassName||"SubMesh"!==r.getClassName()&&"PhysicsBody"!==r.getClassName()?r.clone?r.clone():Array.isArray(r)?r.slice():W&&"object"===typeof r?{...r}:null:r.clone(O):null;class C{static DeepCopy(r,O,W,C){let T=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const h=function(r){const O=[];do{const W=Object.getOwnPropertyNames(r);for(const r of W)-1===O.indexOf(r)&&O.push(r)}while(r=Object.getPrototypeOf(r));return O}(r);for(const mr of h){if("_"===mr[0]&&(!C||-1===C.indexOf(mr)))continue;if(mr.endsWith("Observable"))continue;if(W&&-1!==W.indexOf(mr))continue;const h=r[mr],d=typeof h;if("function"!==d)try{if("object"===d)if(h instanceof Uint8Array)O[mr]=Uint8Array.from(h);else if(h instanceof Array){if(O[mr]=[],h.length>0)if("object"==typeof h[0])for(let r=0;r<h.length;r++){const W=Q(h[r],O,T);-1===O[mr].indexOf(W)&&O[mr].push(W)}else O[mr]=h.slice(0)}else O[mr]=Q(h,O,T);else O[mr]=h}catch(J){q.b.Warn(J.message)}}}}},12493:(r,O,W)=>{W.d(O,{e:()=>q,i:()=>Q,k:()=>C});class q extends Error{}q._setPrototypeOf=Object.setPrototypeOf||((r,O)=>(r.__proto__=O,r));const Q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class C extends q{constructor(r,O,W){super(r),this.errorCode=O,this.innerError=W,this.name="RuntimeError",q._setPrototypeOf(this,C.prototype)}}},12486:(r,O,W)=>{W.d(O,{b:()=>s,c:()=>G,f:()=>z,g:()=>M,m:()=>D,i:()=>b,p:()=>o,r:()=>N,s:()=>p,u:()=>X});var q=W(12481),Q=W(12444),C=W(12435);class T{}T.FilesToLoad={};var h=W(12493),J=W(12497),mr=W(12501),d=W(12484),v=W(12453),g=W(12509),K=W(12504),U=W(12511);const P=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class b extends h.k{constructor(r,O){super(r,h.i.LoadFileError),this.name="LoadFileError",h.e._setPrototypeOf(this,b.prototype),O instanceof q.e?this.request=O:this.file=O}}class e extends h.k{constructor(r,O){super(r,h.i.RequestFileError),this.request=O,this.name="RequestFileError",h.e._setPrototypeOf(this,e.prototype)}}class Y extends h.k{constructor(r,O){super(r,h.i.ReadFileError),this.file=O,this.name="ReadFileError",h.e._setPrototypeOf(this,Y.prototype)}}const G={DefaultRetryStrategy:class{static ExponentialBackoff(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(W,q,Q)=>0!==q.status||Q>=r||-1!==W.indexOf("file:")?-1:Math.pow(2,Q)*O}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:r=>r,ScriptBaseUrl:"",ScriptPreprocessUrl:r=>r,CleanUrl:r=>r=r.replace(/#/gm,"%23")},X=(r,O)=>{if((!r||0!==r.indexOf("data:"))&&G.CorsBehavior)if("string"===typeof G.CorsBehavior||G.CorsBehavior instanceof String)O.crossOrigin=G.CorsBehavior;else{const W=G.CorsBehavior(r);W&&(O.crossOrigin=W)}},S={getRequiredSize:null},o=function(r,O,W,Q){let C,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",mr=arguments.length>5?arguments[5]:void 0,v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===v||void 0===v||!v._features.forceBitmapOverHTMLImageElement))return W("LoadImage is only supported in web or BabylonNative environments."),null;let g=!1;r instanceof ArrayBuffer||ArrayBuffer.isView(r)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(C=URL.createObjectURL(new Blob([r],{type:h})),g=!0):C=`data:${h};base64,`+(0,J.h)(r):r instanceof Blob?(C=URL.createObjectURL(r),g=!0):(C=G.CleanUrl(r),C=G.PreprocessUrl(C));const K=O=>{if(W){const q=C||r.toString();W(`Error while trying to load image: ${0===q.indexOf("http")||q.length<=128?q:q.slice(0,128)+"..."}`,O)}};if(null!==v&&void 0!==v&&v._features.forceBitmapOverHTMLImageElement)return D(C,(q=>{v.createImageBitmap(new Blob([q],{type:h}),{premultiplyAlpha:"none",...mr}).then((r=>{O(r),g&&URL.revokeObjectURL(C)})).catch((O=>{W&&W("Error while trying to load image: "+r,O)}))}),void 0,Q||void 0,!0,((r,O)=>{K(O)})),null;const U=new Image;if(S.getRequiredSize){const O=S.getRequiredSize(r);O.width&&(U.width=O.width),O.height&&(U.height=O.height)}X(C,U);const P=[],b=()=>{for(const r of P)r.target.removeEventListener(r.name,r.handler);P.length=0};P.push({target:U,name:"load",handler:()=>{b(),O(U),g&&U.src&&URL.revokeObjectURL(U.src)}}),P.push({target:U,name:"error",handler:r=>{b(),K(r),g&&U.src&&URL.revokeObjectURL(U.src)}}),P.push({target:document,name:"securitypolicyviolation",handler:r=>{if(r.blockedURI!==U.src||"Kh"===r.disposition)return;b();const O=new Error(`CSP violation of policy ${r.effectiveDirective} ${r.blockedURI}. Current policy is ${r.originalPolicy}`);d.d.UseFallbackTexture=!1,K(O),g&&U.src&&URL.revokeObjectURL(U.src),U.src=""}}),(()=>{for(const r of P)r.target.addEventListener(r.name,r.handler)})();const e="blob:"===C.substring(0,5),Y="data:"===C.substring(0,5),o=()=>{e||Y||!q.e.IsCustomRequestAvailable?U.src=C:D(C,((r,O,W)=>{const q=new Blob([r],{type:!h&&W?W:h}),Q=URL.createObjectURL(q);g=!0,U.src=Q}),void 0,Q||void 0,!0,((r,O)=>{K(O)}))},N=()=>{Q&&Q.loadImage(C,U)};if(!e&&!Y&&Q&&Q.enableTexturesOffline)Q.open(N,o);else{if(-1!==C.indexOf("file:")){const r=decodeURIComponent(C.substring(5).toLowerCase());if(T.FilesToLoad[r]&&"undefined"!==typeof URL){try{let O;try{O=URL.createObjectURL(T.FilesToLoad[r])}catch(p){O=URL.createObjectURL(T.FilesToLoad[r])}U.src=O,g=!0}catch(z){U.src=""}return U}}o()}return U},N=(r,O,W,q,Q)=>{const T=new FileReader,h={onCompleteObservable:new C.d,abort:()=>T.abort()};return T.onloadend=()=>h.onCompleteObservable.notifyObservers(h),Q&&(T.onerror=()=>{Q(new Y(`Unable to read ${r.name}`,r))}),T.onload=r=>{O(r.target.result)},W&&(T.onprogress=W),q?T.readAsArrayBuffer(r):T.readAsText(r),h},D=(r,O,W,q,Q,J,mr)=>{if(r.name)return N(r,O,W,Q,J?r=>{J(void 0,r)}:void 0);const d=r;if(-1!==d.indexOf("file:")){let r=decodeURIComponent(d.substring(5).toLowerCase());0===r.indexOf("./")&&(r=r.substring(2));const q=T.FilesToLoad[r];if(q)return N(q,O,W,Q,J?r=>J(void 0,new b(r.message,r.file)):void 0)}const{match:K,type:U}=k(d);if(K){const r={onCompleteObservable:new C.d,abort:()=>()=>{}};try{const r=Q?s(d):B(d);O(r,void 0,U)}catch(h){J?J(void 0,h):v.b.Error(h.message||"Failed to parse the Data URL")}return g.c.SetImmediate((()=>{r.onCompleteObservable.notifyObservers(r)})),r}return p(d,((r,W)=>{O(r,null===W||void 0===W?void 0:W.responseURL,null===W||void 0===W?void 0:W.getResponseHeader("content-type"))}),W,q,Q,J?r=>{J(r.request,new b(r.message,r.request))}:void 0,mr)},p=(r,O,W,T,h,J,mr)=>{r=G.CleanUrl(r),r=G.PreprocessUrl(r);const d=G.BaseUrl+r;let g=!1;const K={onCompleteObservable:new C.d,abort:()=>g=!0},U=()=>{let r,C=new q.e,T=null;const U=()=>{C&&(W&&C.removeEventListener("progress",W),r&&C.removeEventListener("readystatechange",r),C.removeEventListener("loadend",P))};let P=()=>{U(),K.onCompleteObservable.notifyObservers(K),K.onCompleteObservable.clear(),W=void 0,r=null,P=null,J=void 0,mr=void 0,O=void 0};K.abort=()=>{g=!0,P&&P(),C&&C.readyState!==(XMLHttpRequest.DONE||4)&&C.abort(),null!==T&&(clearTimeout(T),T=null),C=null};const b=r=>{const O=r.message||"Unknown error";J&&C?J(new e(O,C)):v.b.Error(O)},Y=v=>{if(C){if(C.open("GET",d),mr)try{mr(C)}catch(K){return void b(K)}h&&(C.responseType="arraybuffer"),W&&C.addEventListener("progress",W),P&&C.addEventListener("loadend",P),r=()=>{if(!g&&C&&C.readyState===(XMLHttpRequest.DONE||4)){if(r&&C.removeEventListener("readystatechange",r),C.status>=200&&C.status<300||0===C.status&&(!(0,Q.l)()||L())){const r=h?C.response:C.responseText;if(null!==r){try{O&&O(r,C)}catch(K){b(K)}return}}const W=G.DefaultRetryStrategy;if(W){const r=W(d,C,v);if(-1!==r)return U(),C=new q.e,void(T=setTimeout((()=>Y(v+1)),r))}const mr=new e("Error status: "+C.status+" "+C.statusText+" - Unable to load "+d,C);J&&J(mr)}},C.addEventListener("readystatechange",r),C.send()}};Y(0)};if(T&&T.enableSceneOffline){const q=r=>{r&&r.status>400?J&&J(r):U()},Q=()=>{T&&T.loadFile(G.BaseUrl+r,(r=>{!g&&O&&O(r),K.onCompleteObservable.notifyObservers(K)}),W?r=>{!g&&W&&W(r)}:void 0,q,h)};T.open(Q,q)}else U();return K},z=r=>{const{match:O,type:W}=k(r);if(O)return W||void 0;const q=r.lastIndexOf(".");switch(r.substring(q+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Uh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},L=()=>"undefined"!==typeof location&&"file:"===location.protocol,M=r=>P.test(r),k=r=>{const O=P.exec(r);if(null===O||0===O.length)return{match:!1,type:""};return{match:!0,type:O[0].replace("data:","").replace("base64,","")}};function s(r){return(0,J.d)(r.split(",")[1])}const B=r=>(0,J.e)(r.split(",")[1]);let Z;U.c._FileToolsLoadImage=o,K.d.loadFile=D,mr.n.loadFile=D;((r,O,W,q,Q,C,T,h,J,mr)=>{Z={DecodeBase64UrlToBinary:r,DecodeBase64UrlToString:O,DefaultRetryStrategy:W.DefaultRetryStrategy,BaseUrl:W.BaseUrl,CorsBehavior:W.CorsBehavior,PreprocessUrl:W.PreprocessUrl,IsBase64DataUrl:q,IsFileURL:Q,LoadFile:C,LoadImage:T,ReadFile:h,RequestFile:J,SetCorsBehavior:mr},Object.defineProperty(Z,"DefaultRetryStrategy",{get:function(){return W.DefaultRetryStrategy},set:function(r){W.DefaultRetryStrategy=r}}),Object.defineProperty(Z,"BaseUrl",{get:function(){return W.BaseUrl},set:function(r){W.BaseUrl=r}}),Object.defineProperty(Z,"PreprocessUrl",{get:function(){return W.PreprocessUrl},set:function(r){W.PreprocessUrl=r}}),Object.defineProperty(Z,"CorsBehavior",{get:function(){return W.CorsBehavior},set:function(r){W.CorsBehavior=r}})})(s,B,G,M,L,D,o,N,p,X)},12565:(r,O,W)=>{function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(r=>{const O=16*Math.random()|0;return("x"===r?O:3&O|8).toString(16)}))}W.d(O,{d:()=>q})},12554:(r,O,W)=>{W.d(O,{b:()=>C});var q=W(12453),Q=W(12560);class C{static Instantiate(r){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[r])return this.RegisteredExternalClasses[r];const O=(0,Q.b)(r);if(O)return O;q.b.Warn(r+" not found, you may have missed an import.");const W=r.split(".");let C=window||this;for(let q=0,Q=W.length;q<Q;q++)C=C[W[q]];return"function"!==typeof C?null:C}}C.RegisteredExternalClasses={}},12465:(r,O,W)=>{W.d(O,{e:()=>Q});var q=W(12444);class Q{static get Now(){return(0,q.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12497:(r,O,W)=>{W.d(O,{d:()=>T,e:()=>C,f:()=>q,h:()=>Q});const q=r=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(r);let O="";for(let W=0;W<r.byteLength;W++)O+=String.fromCharCode(r[W]);return O},Q=r=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let W,q,Q,C,T,h,J,mr="",d=0;const v=ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);for(;d<v.length;)W=v[d++],q=d<v.length?v[d++]:Number.NaN,Q=d<v.length?v[d++]:Number.NaN,C=W>>2,T=(3&W)<<4|q>>4,h=(15&q)<<2|Q>>6,J=63&Q,isNaN(q)?h=J=64:isNaN(Q)&&(J=64),mr+=O.charAt(C)+O.charAt(T)+O.charAt(h)+O.charAt(J);return mr},C=r=>atob(r),T=r=>{const O=C(r),W=O.length,q=new Uint8Array(new ArrayBuffer(W));for(let Q=0;Q<W;Q++)q[Q]=O.charCodeAt(Q);return q.buffer}},12568:(r,O,W)=>{function q(r){let O=1;do{O*=2}while(O<r);return O===r}function Q(r,O,W){return r*(1-W)+O*W}function C(r){const O=T(r),W=h(r);return O-r>r-W?W:O}function T(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,++r}function h(r){return r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,(r|=r>>16)-(r>>1)}function J(r,O){let W;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:W=h(r);break;case 2:W=C(r);break;default:W=T(r)}return Math.min(W,O)}W.d(O,{d:()=>h,h:()=>J,i:()=>q,k:()=>Q,m:()=>C})},12428:(r,O,W)=>{W.r(O),W.d(O,{AsyncLoop:()=>Y,Tools:()=>b,className:()=>e});var q=W(12435),Q=W(12444),C=W(12453),T=W(12460),h=W(12465),J=W(12474),mr=W(12481),d=W(12484),v=W(12486),g=W(12509),K=W(12554),U=W(12565),P=W(12568);class b{static get BaseUrl(){return v.c.BaseUrl}static set BaseUrl(r){v.c.BaseUrl=r}static get CleanUrl(){return v.c.CleanUrl}static set CleanUrl(r){v.c.CleanUrl=r}static IsAbsoluteUrl(r){return 0===r.indexOf("//")||-1!==r.indexOf("://")&&(-1!==r.indexOf(".")&&(-1!==r.indexOf("/")&&(!(r.indexOf(":")>r.indexOf("/"))&&(r.indexOf("://")<r.indexOf(".")||(0===r.indexOf("data:")||0===r.indexOf("blob:"))))))}static set ScriptBaseUrl(r){v.c.ScriptBaseUrl=r}static get ScriptBaseUrl(){return v.c.ScriptBaseUrl}static set CDNBaseUrl(r){b.ScriptBaseUrl=r,b.AssetBaseUrl=r}static set ScriptPreprocessUrl(r){v.c.ScriptPreprocessUrl=r}static get ScriptPreprocessUrl(){return v.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return v.c.DefaultRetryStrategy}static set DefaultRetryStrategy(r){v.c.DefaultRetryStrategy=r}static get CorsBehavior(){return v.c.CorsBehavior}static set CorsBehavior(r){v.c.CorsBehavior=r}static get UseFallbackTexture(){return d.d.UseFallbackTexture}static set UseFallbackTexture(r){d.d.UseFallbackTexture=r}static get RegisteredExternalClasses(){return K.b.RegisteredExternalClasses}static set RegisteredExternalClasses(r){K.b.RegisteredExternalClasses=r}static get fallbackTexture(){return d.d.FallbackTexture}static set fallbackTexture(r){d.d.FallbackTexture=r}static FetchToRef(r,O,W,q,Q,C){const T=4*((Math.abs(r)*W%W|0)+(Math.abs(O)*q%q|0)*W);C.r=Q[T]/255,C.g=Q[T+1]/255,C.b=Q[T+2]/255,C.a=Q[T+3]/255}static Mix(r,O,W){return 0}static Instantiate(r){return K.b.Instantiate(r)}static SetImmediate(r){g.c.SetImmediate(r)}static IsExponentOfTwo(r){return!0}static FloatRound(r){return Math.fround(r)}static GetFilename(r){const O=r.lastIndexOf("/");return O<0?r:r.substring(O+1)}static GetFolderPath(r){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const W=r.lastIndexOf("/");return W<0?O?r:"":r.substring(0,W+1)}static ToDegrees(r){return 180*r/Math.PI}static ToRadians(r){return r*Math.PI/180}static SmoothAngleChange(r,O){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const q=this.ToRadians(r),Q=this.ToRadians(O);return this.ToDegrees(Math.atan2((1-W)*Math.sin(Q)+W*Math.sin(q),(1-W)*Math.cos(Q)+W*Math.cos(q)))}static MakeArray(r,O){return!0===O||void 0!==r&&null!=r?Array.isArray(r)?r:[r]:null}static GetPointerPrefix(r){return(0,Q.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(r,O){(0,v.u)(r,O)}static SetReferrerPolicyBehavior(r,O){O.referrerPolicy=r}static get PreprocessUrl(){return v.c.PreprocessUrl}static set PreprocessUrl(r){v.c.PreprocessUrl=r}static LoadImage(r,O,W,q,Q,C){return(0,v.p)(r,O,W,q,Q,C)}static LoadFile(r,O,W,q,Q,C){return(0,v.m)(r,O,W,q,Q,C)}static async LoadFileAsync(r){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((W,q)=>{(0,v.m)(r,(r=>{W(r)}),void 0,void 0,O,((r,O)=>{q(O)}))}))}static GetAssetUrl(r){if(!r)return"";if(b.AssetBaseUrl&&r.startsWith(b._DefaultAssetsUrl)){const O="/"===b.AssetBaseUrl[b.AssetBaseUrl.length-1]?b.AssetBaseUrl.substring(0,b.AssetBaseUrl.length-1):b.AssetBaseUrl;return r.replace(b._DefaultAssetsUrl,O)}return r}static GetBabylonScriptURL(r,O){if(!r)return"";if(b.ScriptBaseUrl&&r.startsWith(b._DefaultCdnUrl)){const O="/"===b.ScriptBaseUrl[b.ScriptBaseUrl.length-1]?b.ScriptBaseUrl.substring(0,b.ScriptBaseUrl.length-1):b.ScriptBaseUrl;r=r.replace(b._DefaultCdnUrl,O)}return r=b.ScriptPreprocessUrl(r),O&&(r=b.GetAbsoluteUrl(r)),r}static LoadBabylonScript(r,O,W,q){r=b.GetBabylonScriptURL(r),b.LoadScript(r,O,W)}static async LoadBabylonScriptAsync(r){return r=b.GetBabylonScriptURL(r),await b.LoadScriptAsync(r)}static LoadScript(r,O,W,q){let C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(r),O&&O()}catch(J){null===W||void 0===W||W(`Unable to load script '${r}' in worker`,J)}return}if(!(0,Q.l)())return void(null===W||void 0===W||W(`Cannot load script '${r}' outside of a window or a worker`));const T=document.getElementsByTagName("head")[0],h=document.createElement("script");C?(h.setAttribute("type","module"),h.innerText=r):(h.setAttribute("type","text/javascript"),h.setAttribute("src",r)),q&&(h.id=q),h.onload=()=>{O&&O()},h.onerror=O=>{W&&W(`Unable to load script '${r}'`,O)},T.appendChild(h)}static async LoadScriptAsync(r,O){return await new Promise(((W,q)=>{this.LoadScript(r,(()=>{W()}),((r,O)=>{q(O||new Error(r))}),O)}))}static ReadFileAsDataURL(r,O,W){const Q=new FileReader,C={onCompleteObservable:new q.d,abort:()=>Q.abort()};return Q.onloadend=()=>{C.onCompleteObservable.notifyObservers(C)},Q.onload=r=>{O(r.target.result)},Q.onprogress=W,Q.readAsDataURL(r),C}static ReadFile(r,O,W,q,Q){return(0,v.r)(r,O,W,q,Q)}static FileAsURL(r){const O=new Blob([r]);return window.URL.createObjectURL(O)}static Format(r){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r.toFixed(O)}static DeepCopy(r,O,W,q){T.d.DeepCopy(r,O,W,q)}static IsEmpty(r){for(const O in r)if(Object.prototype.hasOwnProperty.call(r,O))return!1;return!0}static RegisterTopRootEvents(r,O){for(let q=0;q<O.length;q++){const Q=O[q];r.addEventListener(Q.name,Q.handler,!1);try{window.parent&&window.parent.addEventListener(Q.name,Q.handler,!1)}catch(W){}}}static UnregisterTopRootEvents(r,O){for(let q=0;q<O.length;q++){const Q=O[q];r.removeEventListener(Q.name,Q.handler);try{r.parent&&r.parent.removeEventListener(Q.name,Q.handler)}catch(W){}}}static async DumpFramebuffer(r,O,W,q){throw(0,J.c)("DumpTools")}static DumpData(r,O,W,q){throw(0,J.c)("DumpTools")}static async DumpDataAsync(r,O,W){throw(0,J.c)("DumpTools")}static _IsOffScreenCanvas(r){return void 0!==r.convertToBlob}static ToBlob(r,O){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",q=arguments.length>3?arguments[3]:void 0;b._IsOffScreenCanvas(r)||r.toBlob||(r.toBlob=function(r,O,W){setTimeout((()=>{const q=atob(this.toDataURL(O,W).split(",")[1]),Q=q.length,C=new Uint8Array(Q);for(let r=0;r<Q;r++)C[r]=q.charCodeAt(r);r(new Blob([C]))}))}),b._IsOffScreenCanvas(r)?r.convertToBlob({type:W,quality:q}).then((r=>O(r))):r.toBlob((function(r){O(r)}),W,q)}static DownloadBlob(r,O){if("download"in document.createElement("a")){if(!O){const r=new Date;O="screenshot_"+((r.getFullYear()+"-"+(r.getMonth()+1)).slice(2)+"-"+r.getDate()+"_"+r.getHours()+"-"+("0"+r.getMinutes()).slice(-2))+".png"}b.Download(r,O)}else if(r&&"undefined"!==typeof URL){const O=URL.createObjectURL(r),W=window.open("");if(!W)return;const q=W.document.createElement("img");q.onload=function(){URL.revokeObjectURL(O)},q.src=O,W.document.body.appendChild(q)}}static EncodeScreenshotCanvasData(r,O){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",q=arguments.length>3?arguments[3]:void 0,Q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof q&&O){if(O){if(b._IsOffScreenCanvas(r))return void r.convertToBlob({type:W,quality:Q}).then((r=>{const W=new FileReader;W.readAsDataURL(r),W.onloadend=()=>{const r=W.result;O(r)}}));const q=r.toDataURL(W,Q);O(q)}}else this.ToBlob(r,(function(r){r&&b.DownloadBlob(r,q),O&&O("")}),W,Q)}static Download(r,O){if("undefined"===typeof URL)return;const W=window.URL.createObjectURL(r),q=document.createElement("a");document.body.appendChild(q),q.style.display="none",q.href=W,q.download=O,q.addEventListener("click",(()=>{q.parentElement&&q.parentElement.removeChild(q)})),q.click(),window.URL.revokeObjectURL(W)}static BackCompatCameraNoPreventDefault(r){return"boolean"===typeof r[0]?r[0]:"boolean"===typeof r[1]&&r[1]}static CreateScreenshot(r,O,W,q){throw(0,J.c)("ScreenshotTools")}static async CreateScreenshotAsync(r,O,W){throw(0,J.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(r,O,W,q){throw(0,J.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(r,O,W){throw(0,J.c)("ScreenshotTools")}static RandomId(){return(0,U.d)()}static IsBase64(r){return(0,v.g)(r)}static DecodeBase64(r){return(0,v.b)(r)}static get errorsCount(){return C.b.errorsCount}static Log(r){C.b.Log(r)}static Warn(r){C.b.Warn(r)}static Error(r){C.b.Error(r)}static get LogCache(){return C.b.LogCache}static ClearLogCache(){C.b.ClearLogCache()}static set LogLevels(r){C.b.LogLevels=r}static set PerformanceLogLevel(r){return(r&b.PerformanceUserMarkLogLevel)===b.PerformanceUserMarkLogLevel?(b.StartPerformanceCounter=b._StartUserMark,void(b.EndPerformanceCounter=b._EndUserMark)):(r&b.PerformanceConsoleLogLevel)===b.PerformanceConsoleLogLevel?(b.StartPerformanceCounter=b._StartPerformanceConsole,void(b.EndPerformanceCounter=b._EndPerformanceConsole)):(b.StartPerformanceCounter=b._StartPerformanceCounterDisabled,void(b.EndPerformanceCounter=b._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(r,O){}static _EndPerformanceCounterDisabled(r,O){}static _StartUserMark(r){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!b._Performance){if(!(0,Q.l)())return;b._Performance=window.performance}O&&b._Performance.mark&&b._Performance.mark(r+"-Begin")}static _EndUserMark(r){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&b._Performance.mark&&(b._Performance.mark(r+"-End"),b._Performance.measure(r,r+"-Begin",r+"-End"))}static _StartPerformanceConsole(r){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(b._StartUserMark(r,O),console.time&&console.time(r))}static _EndPerformanceConsole(r){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(b._EndUserMark(r,O),console.timeEnd(r))}static get Now(){return h.e.Now}static GetClassName(r){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],W=null;if(!O&&r.getClassName)W=r.getClassName();else{if(r instanceof Object){W=(O?r:Object.getPrototypeOf(r)).constructor.__bjsclassName__}W||(W=typeof r)}return W}static First(r,O){for(const W of r)if(O(W))return W;return null}static getFullClassName(r){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],W=null,q=null;if(!O&&r.getClassName)W=r.getClassName();else{if(r instanceof Object){const Q=O?r:Object.getPrototypeOf(r);W=Q.constructor.__bjsclassName__,q=Q.constructor.__bjsmoduleName__}W||(W=typeof r)}return W?(null!=q?q+".":"")+W:null}static async DelayAsync(r){await new Promise((O=>{setTimeout((()=>{O()}),r)}))}static IsSafari(){return!!(0,Q.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function e(r,O){return W=>{W.__bjsclassName__=r,W.__bjsmoduleName__=null!=O?O:null}}b.AssetBaseUrl="",b.UseCustomRequestHeaders=!1,b.CustomRequestHeaders=mr.e.CustomRequestHeaders,b.GetDOMTextContent=Q.d,b._DefaultCdnUrl="https://cdn.babylonjs.com",b._DefaultAssetsUrl="https://assets.babylonjs.com/core",b.GetAbsoluteUrl="object"===typeof document?r=>{const O=document.createElement("a");return O.href=r,O.href}:"function"===typeof URL&&"object"===typeof location?r=>new URL(r,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},b.NoneLogLevel=C.b.NoneLogLevel,b.MessageLogLevel=C.b.MessageLogLevel,b.WarningLogLevel=C.b.WarningLogLevel,b.ErrorLogLevel=C.b.ErrorLogLevel,b.AllLogLevel=C.b.AllLogLevel,b.IsWindowObjectExist=Q.l,b.PerformanceNoneLogLevel=0,b.PerformanceUserMarkLogLevel=1,b.PerformanceConsoleLogLevel=2,b.StartPerformanceCounter=b._StartPerformanceCounterDisabled,b.EndPerformanceCounter=b._EndPerformanceCounterDisabled;class Y{constructor(r,O,W){let q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=r,this.index=q-1,this._done=!1,this._fn=O,this._successCallback=W}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(r,O,W){const q=new Y(r,O,W,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return q.executeNext(),q}static SyncAsyncForLoop(r,O,W,q,Q){let C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Y.Run(Math.ceil(r/O),(q=>{Q&&Q()?q.breakLoop():setTimeout((()=>{for(let C=0;C<O;++C){const T=q.index*O+C;if(T>=r)break;if(W(T),Q&&Q()){q.breakLoop();break}}q.executeNext()}),C)}),q)}}b.Mix=P.k,b.IsExponentOfTwo=P.i,d.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12560:(r,O,W)=>{W.d(O,{b:()=>C,e:()=>Q});const q={};function Q(r,O){q[r]=O}function C(r){return q[r]}},12481:(r,O,W)=>{W.d(O,{e:()=>q});class q{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(q.CustomRequestHeaders).length>0||q.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const r in q.CustomRequestHeaders){const O=q.CustomRequestHeaders[r];O&&this._xhr.setRequestHeader(r,O)}}_shouldSkipRequestModifications(r){return q.SkipRequestModificationForBabylonCDN&&(r.includes("preview.babylonjs.com")||r.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(r){this._xhr.onprogress=r}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(r){this._xhr.responseType=r}get timeout(){return this._xhr.timeout}set timeout(r){this._xhr.timeout=r}addEventListener(r,O,W){this._xhr.addEventListener(r,O,W)}removeEventListener(r,O,W){this._xhr.removeEventListener(r,O,W)}abort(){this._xhr.abort()}send(r){q.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(r)}open(r,O){for(const W of q.CustomRequestModifiers){if(this._shouldSkipRequestModifications(O))return;O=W(this._xhr,O)||O}O=(O=O.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=O,this._xhr.open(r,O,!0)}setRequestHeader(r,O){this._xhr.setRequestHeader(r,O)}getResponseHeader(r){return this._xhr.getResponseHeader(r)}}q.CustomRequestHeaders={},q.CustomRequestModifiers=new Array,q.SkipRequestModificationForBabylonCDN=!0}}]);