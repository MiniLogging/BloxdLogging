"use strict";(self["80dd64vgxnn"]=self["80dd64vgxnn"]||[]).push([[8],{12638:(mm,o,u)=>{u.d(o,{c:()=>Q});var f=u(12596),B=u(12565),O=u(12644),r=u(12668),w=u(12581);class p{constructor(){let mm=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,mm&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(mm){this._zOffset!==mm&&(this._zOffset=mm,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(mm){this._zOffsetUnits!==mm&&(this._zOffsetUnits=mm,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(mm){this._cullFace!==mm&&(this._cullFace=mm,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(mm){this._cull!==mm&&(this._cull=mm,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(mm){this._depthFunc!==mm&&(this._depthFunc=mm,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(mm){this._depthMask!==mm&&(this._depthMask=mm,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(mm){this._depthTest!==mm&&(this._depthTest=mm,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(mm){this._frontFace!==mm&&(this._frontFace=mm,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(mm){this.isDirty&&(this._isCullDirty&&(this.cull?mm.enable(mm.CULL_FACE):mm.disable(mm.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(mm.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(mm.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?mm.enable(mm.DEPTH_TEST):mm.disable(mm.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(mm.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(mm.enable(mm.POLYGON_OFFSET_FILL),mm.polygonOffset(this.zOffset,this.zOffsetUnits)):mm.disable(mm.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(mm.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class K{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(mm){this._func!==mm&&(this._func=mm,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(mm){this._funcRef!==mm&&(this._funcRef=mm,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(mm){this._funcMask!==mm&&(this._funcMask=mm,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(mm){this._opStencilFail!==mm&&(this._opStencilFail=mm,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(mm){this._opDepthFail!==mm&&(this._opDepthFail=mm,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(mm){this._opStencilDepthPass!==mm&&(this._opStencilDepthPass=mm,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(mm){this._mask!==mm&&(this._mask=mm,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(mm){this._enabled!==mm&&(this._enabled=mm,this._isStencilTestDirty=!0)}constructor(){let mm=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,mm&&this.reset()}reset(){var mm;this.stencilMaterial=void 0,null===(mm=this.stencilGlobal)||void 0===mm||mm.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(mm){var o;if(!mm)return;const u=!this.useStencilGlobalOnly&&!(null===(o=this.stencilMaterial)||void 0===o||!o.enabled);this.enabled=u?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=u?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=u?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=u?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=u?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=u?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=u?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=u?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?mm.enable(mm.STENCIL_TEST):mm.disable(mm.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(mm.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(mm.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(mm.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class z{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=z.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=z.KEEP,this.opDepthFail=z.KEEP,this.opStencilDepthPass=z.REPLACE}get stencilFunc(){return this.func}set stencilFunc(mm){this.func=mm}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(mm){this.funcRef=mm}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(mm){this.funcMask=mm}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(mm){this.opStencilFail=mm}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(mm){this.opDepthFail=mm}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(mm){this.opStencilDepthPass=mm}get stencilMask(){return this.mask}set stencilMask(mm){this.mask=mm}get stencilTest(){return this.enabled}set stencilTest(mm){this.enabled=mm}}z.ALWAYS=519,z.KEEP=7680,z.REPLACE=7681;class Y{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(mm){this._alphaBlend!==mm&&(this._alphaBlend=mm,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(mm,o,u,f){this._blendConstants[0]===mm&&this._blendConstants[1]===o&&this._blendConstants[2]===u&&this._blendConstants[3]===f||(this._blendConstants[0]=mm,this._blendConstants[1]=o,this._blendConstants[2]=u,this._blendConstants[3]=f,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(mm,o,u,f){this._blendFunctionParameters[0]===mm&&this._blendFunctionParameters[1]===o&&this._blendFunctionParameters[2]===u&&this._blendFunctionParameters[3]===f||(this._blendFunctionParameters[0]=mm,this._blendFunctionParameters[1]=o,this._blendFunctionParameters[2]=u,this._blendFunctionParameters[3]=f,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(mm,o){this._blendEquationParameters[0]===mm&&this._blendEquationParameters[1]===o||(this._blendEquationParameters[0]=mm,this._blendEquationParameters[1]=o,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(mm){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?mm.enable(mm.BLEND):mm.disable(mm.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(mm.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(mm.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(mm.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var q=u(12589),x=u(12675),H=u(12562),E=u(12556),M=u(12629),l=u(12687);function t(mm,o){if((0,H.j)()){const{requestAnimationFrame:u}=o||window;if("function"===typeof u)return u(mm)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(mm);return setTimeout(mm,16)}class Q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(mm){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get tf(){return this._useReverseDepthBuffer}set tf(mm){mm!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=mm,this._depthCullingState.depthFunc=mm?518:515)}setColorWrite(mm){mm!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=mm)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(mm){if(mm)return this.isNDCHalfZRange?mm.IS_NDC_HALF_ZRANGE="":delete mm.IS_NDC_HALF_ZRANGE,this.tf?mm.USE_REVERSE_DEPTHBUFFER="":delete mm.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?mm.USE_EXACT_SRGB_CONVERSIONS="":delete mm.USE_EXACT_SRGB_CONVERSIONS);{let mm="";return this.isNDCHalfZRange&&(mm+="#define IS_NDC_HALF_ZRANGE"),this.tf&&(mm&&(mm+="\n"),mm+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(mm&&(mm+="\n"),mm+="#define USE_EXACT_SRGB_CONVERSIONS"),mm}}_rebuildInternalTextures(){const mm=this._internalTexturesCache.slice();for(const o of mm)o._rebuild()}_rebuildRenderTargetWrappers(){const mm=this._renderTargetWrapperCache.slice();for(const o of mm)o._rebuild()}_rebuildEffects(){for(const mm in this._compiledEffects){const o=this._compiledEffects[mm];o._pipelineContext=null,o._prepareEffect()}O.Effect.ResetCache()}_rebuildGraphicsResources(){var mm;this.wipeCaches(!0),this._rebuildEffects(),null===(mm=this._rebuildComputeEffects)||void 0===mm||mm.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){B.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(mm){setTimeout((()=>{this._clearEmptyResources();const o=this._depthCullingState.depthTest,u=this._depthCullingState.depthFunc,f=this._depthCullingState.depthMask,B=this._stencilState.stencilTest;mm(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=o,this._depthCullingState.depthFunc=u,this._depthCullingState.depthMask=f,this._stencilState.stencilTest=B,this._flagContextRestored()}),0)}get q(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(mm){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(mm){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const mm=new Uint8Array(4),o=[mm,mm,mm,mm,mm,mm];this._emptyCubeTexture=this.createRawCubeTexture(o,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(mm){if(!mm)return this._activeRenderLoops.length=0,void this._cancelFrame();const o=this._activeRenderLoops.indexOf(mm);o>=0&&(this._activeRenderLoops.splice(o,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const mm=this._frameHandler;if(this._frameHandler=0,(0,H.j)()){const{cancelAnimationFrame:o}=this.getHostWindow()||window;if("function"===typeof o)return o(mm)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(mm);return clearTimeout(mm)}}Qf(){this.onBeginFrameObservable.notifyObservers(this)}bf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(mm){this._maxFPS=mm,void 0!==mm&&(this._minFrameTime=mm<=0?Number.MAX_VALUE:1e3/mm)}_isOverFrameTime(mm){if(!mm||void 0===this._maxFPS)return!1;const o=mm-this._lastFrameTime;return this._lastFrameTime=mm,this._renderAccumulator+=o,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(mm){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(mm)){let mm=!0;(this.q||!this.renderEvenInBackground&&this._windowIsBackground)&&(mm=!1),mm&&(this.Qf(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.bf())}}_renderLoop(mm){this._processFrame(mm),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let mm=0;mm<this._activeRenderLoops.length;mm++){(0,this._activeRenderLoops[mm])()}}_renderViews(){return!1}_queueNewFrame(mm,o){return t(mm,o)}runRenderLoop(mm){-1===this._activeRenderLoops.indexOf(mm)&&(this._activeRenderLoops.push(mm),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(mm){this._depthCullingState.depthTest=mm}setZOffset(mm){this._depthCullingState.zOffset=this.tf?-mm:mm}getZOffset(){const mm=this._depthCullingState.zOffset;return this.tf?-mm:mm}setZOffsetUnits(mm){this._depthCullingState.zOffsetUnits=this.tf?-mm:mm}getZOffsetUnits(){const mm=this._depthCullingState.zOffsetUnits;return this.tf?-mm:mm}getHostWindow(){return(0,H.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(mm){this._compatibilityMode=!0}_rebuildTextures(){for(const mm of this.scenes)mm._rebuildTextures();for(const mm of this._virtualScenes)mm._rebuildTextures()}_releaseRenderTargetWrapper(mm){const o=this._renderTargetWrapperCache.indexOf(mm);-1!==o&&this._renderTargetWrapperCache.splice(o,1)}get currentViewport(){return this._cachedViewport}setViewport(mm,o,u){const f=o||this.getRenderWidth(),B=u||this.getRenderHeight(),O=mm.x||0,r=mm.y||0;this._cachedViewport=mm,this._viewport(O*f,r*B,f*mm.width,B*mm.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(mm){return new Path2D(mm)}get description(){let mm=this.name+this.version;return this._caps.parallelShaderCompile&&(mm+=" - Parallel shader compilation"),mm}_createTextureBase(mm,o,u,O){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,K=arguments.length>7?arguments[7]:void 0,z=arguments.length>8?arguments[8]:void 0,Y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,q=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,H=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,M=arguments.length>13?arguments[13]:void 0,t=arguments.length>14?arguments[14]:void 0,b=arguments.length>15?arguments[15]:void 0;const J="data:"===(mm=mm||"").substring(0,5),N="blob:"===mm.substring(0,5),S=J&&-1!==mm.indexOf(";base64,"),P=q||new x.e(this,1);P!==q&&(P.label=mm.substring(0,60));const R=mm;!this._transformTextureUrl||S||q||Y||(mm=this._transformTextureUrl(mm)),R!==mm&&(P._originalUrl=R);const g=mm.lastIndexOf(".");let W=E||(g>-1?mm.substring(g).toLowerCase():"");W.indexOf("?")>-1&&(W=W.split("?")[0]);const F=(0,l.e)(W,M);O&&O.addPendingData(P),P.url=mm,P.generateMipMaps=!o,P.samplingMode=r,P.invertY=u,P._useSRGBBuffer=this._getUseSRGBBuffer(!!b,o),this._doNotHandleContextLost||(P._buffer=Y);let c=null;w&&!q&&(c=P.onLoadedObservable.add(w)),q||this._internalTexturesCache.push(P);const A=(u,q)=>{O&&O.removePendingData(P),mm===R?(c&&P.onLoadedObservable.remove(c),f.d.UseFallbackTexture&&mm!==f.d.FallbackTexture&&this._createTextureBase(f.d.FallbackTexture,o,P.invertY,O,r,null,p,K,z,Y,P),u=(u||"Unknown error")+(f.d.UseFallbackTexture?" - Fallback texture was used":""),P.onErrorObservable.notifyObservers({message:u,exception:q}),p&&p(u,q)):(B.e.Warn(`Failed to load ${mm}, falling back to ${R}`),this._createTextureBase(R,o,P.invertY,O,r,w,p,K,z,Y,P,H,E,M,t,b))};if(F){const o=async mm=>{(await F).loadData(mm,P,((mm,o,u,f,B,w)=>{w?A("TextureLoader failed to load data"):K(P,W,O,{width:mm,height:o},P.invertY,!u,f,(()=>(B(),!1)),r)}),t)};Y?Y instanceof ArrayBuffer?o(new Uint8Array(Y)):ArrayBuffer.isView(Y)?o(Y):p&&p("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(mm,(mm=>{o(new Uint8Array(mm))}),void 0,O?O.offlineProvider:void 0,!0,((mm,o)=>{A("Unable to load "+(mm&&mm.responseURL,o))}))}else{const u=mm=>{N&&!this._doNotHandleContextLost&&(P._buffer=mm),K(P,W,O,mm,P.invertY,o,!1,z,r)};!J||S?Y&&("string"===typeof Y.decoding||Y.close)?u(Y):Q._FileToolsLoadImage(mm||"",u,A,O?O.offlineProvider:null,M,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Y||Y instanceof ArrayBuffer||ArrayBuffer.isView(Y)||Y instanceof Blob?Q._FileToolsLoadImage(Y,u,A,O?O.offlineProvider:null,M,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Y&&u(Y)}return P}_rebuildBuffers(){for(const mm of this._uniformBuffers)mm._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,H.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const mm in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,mm)&&(this._boundTexturesCache[mm]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(mm){this._name=mm}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(mm){this._hardwareScalingLevel=mm,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(mm){this._doNotHandleContextLost=mm}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(mm,o,u){var B,O;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new p,this._stencilStateComposer=new K,this._stencilState=new z,this._alphaState=new Y,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.d,this.onCanvasFocusObservable=new E.d,this.onNewSceneAddedObservable=new E.d,this.onResizeObservable=new E.d,this.onCanvasPointerOutObservable=new E.d,this.onEffectErrorObservable=new E.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=mm=>this._renderLoop(mm),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.d,this.onAfterShaderCompilationObservable=new E.d,this.onBeginFrameObservable=new E.d,this.onEndFrameObservable=new E.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.d,this.onContextRestoredObservable=new E.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Jf=new E.d,this.onReleaseEffectsObservable=new E.d,f.d.Instances.push(this),this.startTime=w.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,r.b.SetMatrixPrecision(!!o.useHighPrecisionMatrix),(0,H.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=u??!1,o.antialias=mm??o.antialias,o.deterministicLockstep=o.deterministicLockstep??!1,o.lockstepMaxSteps=o.lockstepMaxSteps??4,o.timeStep=o.timeStep??1/60,o.Nf=o.Nf??!0,this._audioContext=(null===(B=o.audioEngineOptions)||void 0===B?void 0:B.audioContext)??null,this._audioDestination=(null===(O=o.audioEngineOptions)||void 0===O?void 0:O.audioDestination)??null,this.premultipliedAlpha=o.premultipliedAlpha??!0,this._doNotHandleContextLost=!!o.doNotHandleContextLost,this._isStencilEnable=!!o.Nf,this.useExactSrgbConversions=o.useExactSrgbConversions??!1;const q=(0,H.j)()&&window.devicePixelRatio||1,x=o.limitDeviceRatio||q;u=u||o.adaptToDeviceRatio||!1,this._hardwareScalingLevel=u?1/Math.min(x,q):1,this._lastDevicePixelRatio=q,this._creationOptions=o}resize(){let mm,o,u=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const mm=(0,H.j)()&&window.devicePixelRatio||1,o=this._lastDevicePixelRatio/mm;this._lastDevicePixelRatio=mm,this._hardwareScalingLevel*=o}if((0,H.j)()&&(0,H.e)())if(this._renderingCanvas){var f,B;const u=null===(f=(B=this._renderingCanvas).getBoundingClientRect)||void 0===f?void 0:f.call(B);mm=this._renderingCanvas.clientWidth||(null===u||void 0===u?void 0:u.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,o=this._renderingCanvas.clientHeight||(null===u||void 0===u?void 0:u.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else mm=window.innerWidth,o=window.innerHeight;else mm=this._renderingCanvas?this._renderingCanvas.width:100,o=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(mm/this._hardwareScalingLevel,o/this._hardwareScalingLevel,u)}setSize(mm,o){let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(mm|=0,o|=0,!u&&this._renderingCanvas.width===mm&&this._renderingCanvas.height===o)return!1;if(this._renderingCanvas.width=mm,this._renderingCanvas.height=o,this.scenes){for(let mm=0;mm<this.scenes.length;mm++){const o=this.scenes[mm];for(let mm=0;mm<o.cameras.length;mm++){o.cameras[mm]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(mm,o,u,f,B,O,r,w,p,K,z){throw(0,q.d)("engine.rawTexture")}createRawCubeTexture(mm,o,u,f,B,O,r,w){throw(0,q.d)("engine.rawTexture")}createRawTexture3D(mm,o,u,f,B,O,r,w,p,K,z){throw(0,q.d)("engine.rawTexture")}createRawTexture2DArray(mm,o,u,f,B,O,r,w,p,K,z){throw(0,q.d)("engine.rawTexture")}_sharedInit(mm){this._renderingCanvas=mm}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const mm=navigator.userAgent;this.hostInformation.isMobile=-1!==mm.indexOf("Mobile")||-1!==mm.indexOf("Mac")&&(0,H.e)()&&"ontouchend"in document},this._checkForMobile(),(0,H.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(mm){return document.createElement("video")}_reportDrawCall(){var mm;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(mm=this._drawCalls)||void 0===mm||mm.addCount(o,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(mm,o){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(mm,o){return createImageBitmap(mm,o)}resizeImageBitmap(mm,o,u){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(mm){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(mm,o){if("undefined"===typeof document)return new OffscreenCanvas(mm,o);const u=document.createElement("canvas");return u.width=mm,u.height=o,u}createCanvas(mm,o){return Q._CreateCanvas(mm,o)}static _FileToolsLoadImage(mm,o,u,f,B,O,r){throw(0,q.d)("FileTools")}_loadFile(mm,o,u,f,B,O){const r=(0,M.h)(mm,o,u,f,B,O);return this._activeRequests.push(r),r.onCompleteObservable.add((()=>{const mm=this._activeRequests.indexOf(r);-1!==mm&&this._activeRequests.splice(mm,1)})),r}static _FileToolsLoadFile(mm,o,u,f,B,O){if(M.e.loadFile)return M.e.loadFile(mm,o,u,f,B,O);throw(0,q.d)("FileTools")}dispose(){var mm;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(mm=this.releaseComputeEffects)||void 0===mm||mm.call(this),O.Effect.ResetCache();for(const u of this._activeRequests)u.abort();this._boundRenderFunction=null,this.Jf.notifyObservers(this),this.Jf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,H.j)()&&window.removeEventListener("resize",this._checkForMobile);const o=f.d.Instances.indexOf(this);o>=0&&f.d.Instances.splice(o,1),f.d.Instances.length||(f.d.OnEnginesDisposedObservable.notifyObservers(this),f.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(mm){throw(0,q.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(mm,o){for(let u=0;u<f.d.Instances.length;u++){const B=f.d.Instances[u];for(let u=0;u<B.scenes.length;u++)B.scenes[u].markAllMaterialsAsDirty(mm,o)}}}Q._RenderPassIdCounter=0,Q._RescalePostProcessFactory=null,Q.CollisionsEpsilon=.001,Q.QueueNewFrame=t},12596:(mm,o,u)=>{u.d(o,{d:()=>B});var f=u(12556);class B{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}B.Instances=[],B.OnEnginesDisposedObservable=new f.d,B._LastCreatedScene=null,B.UseFallbackTexture=!0,B.FallbackTexture=""},12668:(mm,o,u)=>{u.d(o,{b:()=>f});class f{static SetMatrixPrecision(mm){if(f.MatrixTrackPrecisionChange=!1,mm&&!f.MatrixUse64Bits&&f.MatrixTrackedMatrices)for(let o=0;o<f.MatrixTrackedMatrices.length;++o){const mm=f.MatrixTrackedMatrices[o],u=mm.gf;mm.gf=new Array(16);for(let o=0;o<16;++o)mm.gf[o]=u[o]}f.MatrixUse64Bits=mm,f.MatrixCurrentType=f.MatrixUse64Bits?Array:Float32Array,f.MatrixTrackedMatrices=null}}f.MatrixUse64Bits=!1,f.MatrixTrackPrecisionChange=!0,f.MatrixCurrentType=Float32Array,f.MatrixTrackedMatrices=[]},12687:(mm,o,u)=>{u.d(o,{e:()=>r});var f=u(12565);const B=new Map;function O(mm,o){(function(mm){return B.delete(mm)})(mm)&&f.e.Warn(`Extension with the name '${mm}' already exists`),B.set(mm,o)}function r(mm,o){"image/ktx"!==o&&"image/ktx2"!==o||(mm=".ktx"),B.has(mm)||(mm.endsWith(".ies")&&O(".ies",(async()=>await u.e(15).then(u.bind(u,15053)).then((mm=>new mm._IESTextureLoader)))),mm.endsWith(".dds")&&O(".dds",(async()=>await Promise.all([u.e(14),u.e(17),u.e(13),u.e(19),u.e(18),u.e(28)]).then(u.bind(u,15055)).then((mm=>new mm._DDSTextureLoader)))),mm.endsWith(".basis")&&O(".basis",(async()=>await Promise.all([u.e(14),u.e(17),u.e(13),u.e(47)]).then(u.bind(u,15068)).then((mm=>new mm._BasisTextureLoader)))),mm.endsWith(".env")&&O(".env",(async()=>await Promise.all([u.e(14),u.e(17),u.e(13),u.e(19),u.e(18),u.e(23),u.e(21),u.e(45),u.e(48)]).then(u.bind(u,15073)).then((mm=>new mm._ENVTextureLoader)))),mm.endsWith(".hdr")&&O(".hdr",(async()=>await Promise.all([u.e(14),u.e(49)]).then(u.bind(u,15077)).then((mm=>new mm._HDRTextureLoader)))),(mm.endsWith(".ktx")||mm.endsWith(".ktx2"))&&(O(".ktx",(async()=>await u.e(30).then(u.bind(u,15082)).then((mm=>new mm._KTXTextureLoader)))),O(".ktx2",(async()=>await u.e(30).then(u.bind(u,15082)).then((mm=>new mm._KTXTextureLoader))))),mm.endsWith(".tga")&&O(".tga",(async()=>await u.e(50).then(u.bind(u,15085)).then((mm=>new mm._TGATextureLoader)))),mm.endsWith(".exr")&&O(".exr",(async()=>await u.e(16).then(u.bind(u,15088)).then((mm=>new mm._ExrTextureLoader)))));const f=B.get(mm);return f?Promise.resolve(f(o)):null}},12675:(mm,o,u)=>{u.d(o,{e:()=>r});var f,B=u(12556),O=u(12680);!function(mm){mm[mm.Unknown=0]="Unknown",mm[mm.Url=1]="Url",mm[mm.Temp=2]="Temp",mm[mm.Raw=3]="Raw",mm[mm.Dynamic=4]="Dynamic",mm[mm.RenderTarget=5]="RenderTarget",mm[mm.MultiRenderTarget=6]="MultiRenderTarget",mm[mm.Cube=7]="Cube",mm[mm.CubeRaw=8]="CubeRaw",mm[mm.CubePrefiltered=9]="CubePrefiltered",mm[mm.Raw3D=10]="Raw3D",mm[mm.Raw2DArray=11]="Raw2DArray",mm[mm.DepthStencil=12]="DepthStencil",mm[mm.CubeRawRGBD=13]="CubeRawRGBD",mm[mm.Depth=14]="Depth"}(f||(f={}));class r extends O.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(mm){this.generateMipMaps=mm}get uniqueId(){return this._uniqueId}_setUniqueId(mm){this._uniqueId=mm}getEngine(){return this._engine}get source(){return this._source}constructor(mm,o){let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new B.d,this.onErrorObservable=new B.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=mm,this._source=o,this._uniqueId=r._Counter++,u||(this._hardwareTexture=mm._createHardwareTexture())}incrementReferences(){this._references++}updateSize(mm,o){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,mm,o,u),this.width=mm,this.height=o,this.depth=u,this.baseWidth=mm,this.baseHeight=o,this.baseDepth=u,this._size=mm*o*u}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const mm=this.onRebuildCallback(this),o=o=>{o._swapAndDie(this,!1),this.isReady=mm.isReady};return void(mm.isAsync?mm.proxy.then(o):o(mm.proxy))}let mm;switch(this.source){case 2:case 12:case 14:break;case 1:return void(mm=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(mm=>{mm._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:mm=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),mm._swapAndDie(this,!1),this.isReady=!0;break;case 10:mm=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),mm._swapAndDie(this,!1),this.isReady=!0;break;case 11:mm=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),mm._swapAndDie(this,!1),this.isReady=!0;break;case 4:mm=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),mm._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(mm=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{mm._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:mm=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),mm._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return mm=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(mm=>{mm&&mm._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(mm._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(mm){var o;let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(o=this._hardwareTexture)||void 0===o||o.setUsage(mm._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),mm._hardwareTexture=this._hardwareTexture,u&&(mm._isRGBD=this._isRGBD),this._lodTextureHigh&&(mm._lodTextureHigh&&mm._lodTextureHigh.dispose(),mm._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(mm._lodTextureMid&&mm._lodTextureMid.dispose(),mm._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(mm._lodTextureLow&&mm._lodTextureLow.dispose(),mm._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(mm._irradianceTexture&&mm._irradianceTexture.dispose(),mm._irradianceTexture=this._irradianceTexture);const f=this._engine.getLoadedTexturesCache();let B=f.indexOf(this);-1!==B&&f.splice(B,1),B=f.indexOf(mm),-1===B&&f.push(mm)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}r._Counter=0},12680:(mm,o,u)=>{u.d(o,{e:()=>f});class f{get wrapU(){return this._cachedWrapU}set wrapU(mm){this._cachedWrapU=mm}get wrapV(){return this._cachedWrapV}set wrapV(mm){this._cachedWrapV=mm}get wrapR(){return this._cachedWrapR}set wrapR(mm){this._cachedWrapR=mm}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(mm){this._cachedAnisotropicFilteringLevel=mm}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(mm){this._comparisonFunction=mm}get useMipMaps(){return this._useMipMaps}set useMipMaps(mm){this._useMipMaps=mm}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let mm=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=mm,this._cachedWrapV=o,this._cachedWrapR=u,this._cachedAnisotropicFilteringLevel=f,this.samplingMode=B,this._comparisonFunction=O,this}compareSampler(mm){return this._cachedWrapU===mm._cachedWrapU&&this._cachedWrapV===mm._cachedWrapV&&this._cachedWrapR===mm._cachedWrapR&&this._cachedAnisotropicFilteringLevel===mm._cachedAnisotropicFilteringLevel&&this.samplingMode===mm.samplingMode&&this._comparisonFunction===mm._comparisonFunction&&this._useMipMaps===mm._useMipMaps}}},12574:(mm,o,u)=>{u.d(o,{b:()=>O});var f=u(12565);const B=(mm,o,u)=>mm?mm.getClassName&&"Mesh"===mm.getClassName()?null:!mm.getClassName||"SubMesh"!==mm.getClassName()&&"PhysicsBody"!==mm.getClassName()?mm.clone?mm.clone():Array.isArray(mm)?mm.slice():u&&"object"===typeof mm?{...mm}:null:mm.clone(o):null;class O{static DeepCopy(mm,o,u,O){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const w=function(mm){const o=[];do{const u=Object.getOwnPropertyNames(mm);for(const mm of u)-1===o.indexOf(mm)&&o.push(mm)}while(mm=Object.getPrototypeOf(mm));return o}(mm);for(const K of w){if("_"===K[0]&&(!O||-1===O.indexOf(K)))continue;if(K.endsWith("Observable"))continue;if(u&&-1!==u.indexOf(K))continue;const w=mm[K],z=typeof w;if("function"!==z)try{if("object"===z)if(w instanceof Uint8Array)o[K]=Uint8Array.from(w);else if(w instanceof Array){if(o[K]=[],w.length>0)if("object"==typeof w[0])for(let mm=0;mm<w.length;mm++){const u=B(w[mm],o,r);-1===o[K].indexOf(u)&&o[K].push(u)}else o[K]=w.slice(0)}else o[K]=B(w,o,r);else o[K]=w}catch(p){f.e.Warn(p.message)}}}}},12610:(mm,o,u)=>{u.d(o,{e:()=>f,h:()=>B,j:()=>O});class f extends Error{}f._setPrototypeOf=Object.setPrototypeOf||((mm,o)=>(mm.__proto__=o,mm));const B={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class O extends f{constructor(mm,o,u){super(mm),this.errorCode=o,this.innerError=u,this.name="RuntimeError",f._setPrototypeOf(this,O.prototype)}}},12605:(mm,o,u)=>{u.d(o,{e:()=>A,g:()=>Q,i:()=>g,k:()=>F,p:()=>P,l:()=>M,q:()=>N,t:()=>S,x:()=>R,B:()=>b});var f=u(12594),B=u(12562),O=u(12556);class r{}r.FilesToLoad={};var w=u(12610),p=u(12617),K=u(12620),z=u(12596),Y=u(12565),q=u(12634),x=u(12629),H=u(12638);const E=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class M extends w.j{constructor(mm,o){super(mm,w.h.LoadFileError),this.name="LoadFileError",w.e._setPrototypeOf(this,M.prototype),o instanceof f.e?this.request=o:this.file=o}}class l extends w.j{constructor(mm,o){super(mm,w.h.RequestFileError),this.request=o,this.name="RequestFileError",w.e._setPrototypeOf(this,l.prototype)}}class t extends w.j{constructor(mm,o){super(mm,w.h.ReadFileError),this.file=o,this.name="ReadFileError",w.e._setPrototypeOf(this,t.prototype)}}const Q={DefaultRetryStrategy:class{static ExponentialBackoff(){let mm=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(u,f,B)=>0!==f.status||B>=mm||-1!==u.indexOf("file:")?-1:Math.pow(2,B)*o}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:mm=>mm,ScriptBaseUrl:"",ScriptPreprocessUrl:mm=>mm,CleanUrl:mm=>mm=mm.replace(/#/gm,"%23")},b=(mm,o)=>{if((!mm||0!==mm.indexOf("data:"))&&Q.CorsBehavior)if("string"===typeof Q.CorsBehavior||Q.CorsBehavior instanceof String)o.crossOrigin=Q.CorsBehavior;else{const u=Q.CorsBehavior(mm);u&&(o.crossOrigin=u)}},J={getRequiredSize:null},N=function(mm,o,u,B){let O,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",K=arguments.length>5?arguments[5]:void 0,Y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:z.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Y||void 0===Y||!Y._features.forceBitmapOverHTMLImageElement))return u("LoadImage is only supported in web or BabylonNative environments."),null;let q=!1;mm instanceof ArrayBuffer||ArrayBuffer.isView(mm)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(O=URL.createObjectURL(new Blob([mm],{type:w})),q=!0):O=`data:${w};base64,`+(0,p.i)(mm):mm instanceof Blob?(O=URL.createObjectURL(mm),q=!0):(O=Q.CleanUrl(mm),O=Q.PreprocessUrl(O));const x=o=>{if(u){const f=O||mm.toString();u(`Error while trying to load image: ${0===f.indexOf("http")||f.length<=128?f:f.slice(0,128)+"..."}`,o)}};if(null!==Y&&void 0!==Y&&Y._features.forceBitmapOverHTMLImageElement)return P(O,(f=>{Y.createImageBitmap(new Blob([f],{type:w}),{premultiplyAlpha:"none",...K}).then((mm=>{o(mm),q&&URL.revokeObjectURL(O)})).catch((o=>{u&&u("Error while trying to load image: "+mm,o)}))}),void 0,B||void 0,!0,((mm,o)=>{x(o)})),null;const H=new Image;if(J.getRequiredSize){const o=J.getRequiredSize(mm);o.width&&(H.width=o.width),o.height&&(H.height=o.height)}b(O,H);const E=[],M=()=>{for(const mm of E)mm.target.removeEventListener(mm.name,mm.handler);E.length=0};E.push({target:H,name:"load",handler:()=>{M(),o(H),q&&H.src&&URL.revokeObjectURL(H.src)}}),E.push({target:H,name:"error",handler:mm=>{M(),x(mm),q&&H.src&&URL.revokeObjectURL(H.src)}}),E.push({target:document,name:"securitypolicyviolation",handler:mm=>{if(mm.blockedURI!==H.src||"cf"===mm.disposition)return;M();const o=new Error(`CSP violation of policy ${mm.effectiveDirective} ${mm.blockedURI}. Current policy is ${mm.originalPolicy}`);z.d.UseFallbackTexture=!1,x(o),q&&H.src&&URL.revokeObjectURL(H.src),H.src=""}}),(()=>{for(const mm of E)mm.target.addEventListener(mm.name,mm.handler)})();const l="blob:"===O.substring(0,5),t="data:"===O.substring(0,5),N=()=>{l||t||!f.e.IsCustomRequestAvailable?H.src=O:P(O,((mm,o,u)=>{const f=new Blob([mm],{type:!w&&u?u:w}),B=URL.createObjectURL(f);q=!0,H.src=B}),void 0,B||void 0,!0,((mm,o)=>{x(o)}))},S=()=>{B&&B.loadImage(O,H)};if(!l&&!t&&B&&B.enableTexturesOffline)B.open(S,N);else{if(-1!==O.indexOf("file:")){const mm=decodeURIComponent(O.substring(5).toLowerCase());if(r.FilesToLoad[mm]&&"undefined"!==typeof URL){try{let o;try{o=URL.createObjectURL(r.FilesToLoad[mm])}catch(R){o=URL.createObjectURL(r.FilesToLoad[mm])}H.src=o,q=!0}catch(g){H.src=""}return H}}N()}return H},S=(mm,o,u,f,B)=>{const r=new FileReader,w={onCompleteObservable:new O.d,abort:()=>r.abort()};return r.onloadend=()=>w.onCompleteObservable.notifyObservers(w),B&&(r.onerror=()=>{B(new t(`Unable to read ${mm.name}`,mm))}),r.onload=mm=>{o(mm.target.result)},u&&(r.onprogress=u),f?r.readAsArrayBuffer(mm):r.readAsText(mm),w},P=(mm,o,u,f,B,p,K)=>{if(mm.name)return S(mm,o,u,B,p?mm=>{p(void 0,mm)}:void 0);const z=mm;if(-1!==z.indexOf("file:")){let mm=decodeURIComponent(z.substring(5).toLowerCase());0===mm.indexOf("./")&&(mm=mm.substring(2));const f=r.FilesToLoad[mm];if(f)return S(f,o,u,B,p?mm=>p(void 0,new M(mm.message,mm.file)):void 0)}const{match:x,type:H}=c(z);if(x){const mm={onCompleteObservable:new O.d,abort:()=>()=>{}};try{const mm=B?A(z):y(z);o(mm,void 0,H)}catch(w){p?p(void 0,w):Y.e.Error(w.message||"Failed to parse the Data URL")}return q.c.SetImmediate((()=>{mm.onCompleteObservable.notifyObservers(mm)})),mm}return R(z,((mm,u)=>{o(mm,null===u||void 0===u?void 0:u.responseURL,null===u||void 0===u?void 0:u.getResponseHeader("content-type"))}),u,f,B,p?mm=>{p(mm.request,new M(mm.message,mm.request))}:void 0,K)},R=(mm,o,u,r,w,p,K)=>{mm=Q.CleanUrl(mm),mm=Q.PreprocessUrl(mm);const z=Q.BaseUrl+mm;let q=!1;const x={onCompleteObservable:new O.d,abort:()=>q=!0},H=()=>{let mm,O=new f.e,r=null;const H=()=>{O&&(u&&O.removeEventListener("progress",u),mm&&O.removeEventListener("readystatechange",mm),O.removeEventListener("loadend",E))};let E=()=>{H(),x.onCompleteObservable.notifyObservers(x),x.onCompleteObservable.clear(),u=void 0,mm=null,E=null,p=void 0,K=void 0,o=void 0};x.abort=()=>{q=!0,E&&E(),O&&O.readyState!==(XMLHttpRequest.DONE||4)&&O.abort(),null!==r&&(clearTimeout(r),r=null),O=null};const M=mm=>{const o=mm.message||"Unknown error";p&&O?p(new l(o,O)):Y.e.Error(o)},t=Y=>{if(O){if(O.open("GET",z),K)try{K(O)}catch(x){return void M(x)}w&&(O.responseType="arraybuffer"),u&&O.addEventListener("progress",u),E&&O.addEventListener("loadend",E),mm=()=>{if(!q&&O&&O.readyState===(XMLHttpRequest.DONE||4)){if(mm&&O.removeEventListener("readystatechange",mm),O.status>=200&&O.status<300||0===O.status&&(!(0,B.j)()||W())){const mm=w?O.response:O.responseText;if(null!==mm){try{o&&o(mm,O)}catch(x){M(x)}return}}const u=Q.DefaultRetryStrategy;if(u){const mm=u(z,O,Y);if(-1!==mm)return H(),O=new f.e,void(r=setTimeout((()=>t(Y+1)),mm))}const K=new l("Error status: "+O.status+" "+O.statusText+" - Unable to load "+z,O);p&&p(K)}},O.addEventListener("readystatechange",mm),O.send()}};t(0)};if(r&&r.enableSceneOffline){const f=mm=>{mm&&mm.status>400?p&&p(mm):H()},B=()=>{r&&r.loadFile(Q.BaseUrl+mm,(mm=>{!q&&o&&o(mm),x.onCompleteObservable.notifyObservers(x)}),u?mm=>{!q&&u&&u(mm)}:void 0,f,w)};r.open(B,f)}else H();return x},g=mm=>{const{match:o,type:u}=c(mm);if(o)return u||void 0;const f=mm.lastIndexOf(".");switch(mm.substring(f+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Af":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},W=()=>"undefined"!==typeof location&&"file:"===location.protocol,F=mm=>E.test(mm),c=mm=>{const o=E.exec(mm);if(null===o||0===o.length)return{match:!1,type:""};return{match:!0,type:o[0].replace("data:","").replace("base64,","")}};function A(mm){return(0,p.c)(mm.split(",")[1])}const y=mm=>(0,p.e)(mm.split(",")[1]);let I;H.c._FileToolsLoadImage=N,x.e.loadFile=P,K.m.loadFile=P;((mm,o,u,f,B,O,r,w,p,K)=>{I={DecodeBase64UrlToBinary:mm,DecodeBase64UrlToString:o,DefaultRetryStrategy:u.DefaultRetryStrategy,BaseUrl:u.BaseUrl,CorsBehavior:u.CorsBehavior,PreprocessUrl:u.PreprocessUrl,IsBase64DataUrl:f,IsFileURL:B,LoadFile:O,LoadImage:r,ReadFile:w,RequestFile:p,SetCorsBehavior:K},Object.defineProperty(I,"DefaultRetryStrategy",{get:function(){return u.DefaultRetryStrategy},set:function(mm){u.DefaultRetryStrategy=mm}}),Object.defineProperty(I,"BaseUrl",{get:function(){return u.BaseUrl},set:function(mm){u.BaseUrl=mm}}),Object.defineProperty(I,"PreprocessUrl",{get:function(){return u.PreprocessUrl},set:function(mm){u.PreprocessUrl=mm}}),Object.defineProperty(I,"CorsBehavior",{get:function(){return u.CorsBehavior},set:function(mm){u.CorsBehavior=mm}})})(A,y,Q,F,W,P,N,S,R,b)},12711:(mm,o,u)=>{function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(mm=>{const o=16*Math.random()|0;return("x"===mm?o:3&o|8).toString(16)}))}u.d(o,{d:()=>f})},12693:(mm,o,u)=>{u.d(o,{e:()=>O});var f=u(12565),B=u(12702);class O{static Instantiate(mm){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[mm])return this.RegisteredExternalClasses[mm];const o=(0,B.b)(mm);if(o)return o;f.e.Warn(mm+" not found, you may have missed an import.");const u=mm.split(".");let O=window||this;for(let f=0,B=u.length;f<B;f++)O=O[u[f]];return"function"!==typeof O?null:O}}O.RegisteredExternalClasses={}},12581:(mm,o,u)=>{u.d(o,{b:()=>B});var f=u(12562);class B{static get Now(){return(0,f.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12617:(mm,o,u)=>{u.d(o,{c:()=>r,e:()=>O,h:()=>f,i:()=>B});const f=mm=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(mm);let o="";for(let u=0;u<mm.byteLength;u++)o+=String.fromCharCode(mm[u]);return o},B=mm=>{const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let u,f,B,O,r,w,p,K="",z=0;const Y=ArrayBuffer.isView(mm)?new Uint8Array(mm.buffer,mm.byteOffset,mm.byteLength):new Uint8Array(mm);for(;z<Y.length;)u=Y[z++],f=z<Y.length?Y[z++]:Number.NaN,B=z<Y.length?Y[z++]:Number.NaN,O=u>>2,r=(3&u)<<4|f>>4,w=(15&f)<<2|B>>6,p=63&B,isNaN(f)?w=p=64:isNaN(B)&&(p=64),K+=o.charAt(O)+o.charAt(r)+o.charAt(w)+o.charAt(p);return K},O=mm=>atob(mm),r=mm=>{const o=O(mm),u=o.length,f=new Uint8Array(new ArrayBuffer(u));for(let B=0;B<u;B++)f[B]=o.charCodeAt(B);return f.buffer}},12718:(mm,o,u)=>{function f(mm){let o=1;do{o*=2}while(o<mm);return o===mm}function B(mm,o,u){return mm*(1-u)+o*u}function O(mm){const o=r(mm),u=w(mm);return o-mm>mm-u?u:o}function r(mm){return mm--,mm|=mm>>1,mm|=mm>>2,mm|=mm>>4,mm|=mm>>8,mm|=mm>>16,++mm}function w(mm){return mm|=mm>>1,mm|=mm>>2,mm|=mm>>4,mm|=mm>>8,(mm|=mm>>16)-(mm>>1)}function p(mm,o){let u;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:u=w(mm);break;case 2:u=O(mm);break;default:u=r(mm)}return Math.min(u,o)}u.d(o,{b:()=>w,e:()=>p,f:()=>f,j:()=>B,m:()=>O})},12549:(mm,o,u)=>{u.r(o),u.d(o,{AsyncLoop:()=>t,Tools:()=>M,className:()=>l});var f=u(12556),B=u(12562),O=u(12565),r=u(12574),w=u(12581),p=u(12589),K=u(12594),z=u(12596),Y=u(12605),q=u(12634),x=u(12693),H=u(12711),E=u(12718);class M{static get BaseUrl(){return Y.g.BaseUrl}static set BaseUrl(mm){Y.g.BaseUrl=mm}static get CleanUrl(){return Y.g.CleanUrl}static set CleanUrl(mm){Y.g.CleanUrl=mm}static IsAbsoluteUrl(mm){return 0===mm.indexOf("//")||-1!==mm.indexOf("://")&&(-1!==mm.indexOf(".")&&(-1!==mm.indexOf("/")&&(!(mm.indexOf(":")>mm.indexOf("/"))&&(mm.indexOf("://")<mm.indexOf(".")||(0===mm.indexOf("data:")||0===mm.indexOf("blob:"))))))}static set ScriptBaseUrl(mm){Y.g.ScriptBaseUrl=mm}static get ScriptBaseUrl(){return Y.g.ScriptBaseUrl}static set CDNBaseUrl(mm){M.ScriptBaseUrl=mm,M.AssetBaseUrl=mm}static set ScriptPreprocessUrl(mm){Y.g.ScriptPreprocessUrl=mm}static get ScriptPreprocessUrl(){return Y.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Y.g.DefaultRetryStrategy}static set DefaultRetryStrategy(mm){Y.g.DefaultRetryStrategy=mm}static get CorsBehavior(){return Y.g.CorsBehavior}static set CorsBehavior(mm){Y.g.CorsBehavior=mm}static get UseFallbackTexture(){return z.d.UseFallbackTexture}static set UseFallbackTexture(mm){z.d.UseFallbackTexture=mm}static get RegisteredExternalClasses(){return x.e.RegisteredExternalClasses}static set RegisteredExternalClasses(mm){x.e.RegisteredExternalClasses=mm}static get fallbackTexture(){return z.d.FallbackTexture}static set fallbackTexture(mm){z.d.FallbackTexture=mm}static FetchToRef(mm,o,u,f,B,O){const r=4*((Math.abs(mm)*u%u|0)+(Math.abs(o)*f%f|0)*u);O.r=B[r]/255,O.g=B[r+1]/255,O.b=B[r+2]/255,O.a=B[r+3]/255}static Mix(mm,o,u){return 0}static Instantiate(mm){return x.e.Instantiate(mm)}static SetImmediate(mm){q.c.SetImmediate(mm)}static IsExponentOfTwo(mm){return!0}static FloatRound(mm){return Math.fround(mm)}static GetFilename(mm){const o=mm.lastIndexOf("/");return o<0?mm:mm.substring(o+1)}static GetFolderPath(mm){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const u=mm.lastIndexOf("/");return u<0?o?mm:"":mm.substring(0,u+1)}static ToDegrees(mm){return 180*mm/Math.PI}static ToRadians(mm){return mm*Math.PI/180}static SmoothAngleChange(mm,o){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const f=this.ToRadians(mm),B=this.ToRadians(o);return this.ToDegrees(Math.atan2((1-u)*Math.sin(B)+u*Math.sin(f),(1-u)*Math.cos(B)+u*Math.cos(f)))}static MakeArray(mm,o){return!0===o||void 0!==mm&&null!=mm?Array.isArray(mm)?mm:[mm]:null}static GetPointerPrefix(mm){return(0,B.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(mm,o){(0,Y.B)(mm,o)}static SetReferrerPolicyBehavior(mm,o){o.referrerPolicy=mm}static get PreprocessUrl(){return Y.g.PreprocessUrl}static set PreprocessUrl(mm){Y.g.PreprocessUrl=mm}static LoadImage(mm,o,u,f,B,O){return(0,Y.q)(mm,o,u,f,B,O)}static LoadFile(mm,o,u,f,B,O){return(0,Y.p)(mm,o,u,f,B,O)}static async LoadFileAsync(mm){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((u,f)=>{(0,Y.p)(mm,(mm=>{u(mm)}),void 0,void 0,o,((mm,o)=>{f(o)}))}))}static GetAssetUrl(mm){if(!mm)return"";if(M.AssetBaseUrl&&mm.startsWith(M._DefaultAssetsUrl)){const o="/"===M.AssetBaseUrl[M.AssetBaseUrl.length-1]?M.AssetBaseUrl.substring(0,M.AssetBaseUrl.length-1):M.AssetBaseUrl;return mm.replace(M._DefaultAssetsUrl,o)}return mm}static GetBabylonScriptURL(mm,o){if(!mm)return"";if(M.ScriptBaseUrl&&mm.startsWith(M._DefaultCdnUrl)){const o="/"===M.ScriptBaseUrl[M.ScriptBaseUrl.length-1]?M.ScriptBaseUrl.substring(0,M.ScriptBaseUrl.length-1):M.ScriptBaseUrl;mm=mm.replace(M._DefaultCdnUrl,o)}return mm=M.ScriptPreprocessUrl(mm),o&&(mm=M.GetAbsoluteUrl(mm)),mm}static LoadBabylonScript(mm,o,u,f){mm=M.GetBabylonScriptURL(mm),M.LoadScript(mm,o,u)}static async LoadBabylonScriptAsync(mm){return mm=M.GetBabylonScriptURL(mm),await M.LoadScriptAsync(mm)}static LoadScript(mm,o,u,f){let O=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(mm),o&&o()}catch(p){null===u||void 0===u||u(`Unable to load script '${mm}' in worker`,p)}return}if(!(0,B.j)())return void(null===u||void 0===u||u(`Cannot load script '${mm}' outside of a window or a worker`));const r=document.getElementsByTagName("head")[0],w=document.createElement("script");O?(w.setAttribute("type","module"),w.innerText=mm):(w.setAttribute("type","text/javascript"),w.setAttribute("src",mm)),f&&(w.id=f),w.onload=()=>{o&&o()},w.onerror=o=>{u&&u(`Unable to load script '${mm}'`,o)},r.appendChild(w)}static async LoadScriptAsync(mm,o){return await new Promise(((u,f)=>{this.LoadScript(mm,(()=>{u()}),((mm,o)=>{f(o||new Error(mm))}),o)}))}static ReadFileAsDataURL(mm,o,u){const B=new FileReader,O={onCompleteObservable:new f.d,abort:()=>B.abort()};return B.onloadend=()=>{O.onCompleteObservable.notifyObservers(O)},B.onload=mm=>{o(mm.target.result)},B.onprogress=u,B.readAsDataURL(mm),O}static ReadFile(mm,o,u,f,B){return(0,Y.t)(mm,o,u,f,B)}static FileAsURL(mm){const o=new Blob([mm]);return window.URL.createObjectURL(o)}static Format(mm){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return mm.toFixed(o)}static DeepCopy(mm,o,u,f){r.b.DeepCopy(mm,o,u,f)}static IsEmpty(mm){for(const o in mm)if(Object.prototype.hasOwnProperty.call(mm,o))return!1;return!0}static RegisterTopRootEvents(mm,o){for(let f=0;f<o.length;f++){const B=o[f];mm.addEventListener(B.name,B.handler,!1);try{window.parent&&window.parent.addEventListener(B.name,B.handler,!1)}catch(u){}}}static UnregisterTopRootEvents(mm,o){for(let f=0;f<o.length;f++){const B=o[f];mm.removeEventListener(B.name,B.handler);try{mm.parent&&mm.parent.removeEventListener(B.name,B.handler)}catch(u){}}}static async DumpFramebuffer(mm,o,u,f){throw(0,p.d)("DumpTools")}static DumpData(mm,o,u,f){throw(0,p.d)("DumpTools")}static async DumpDataAsync(mm,o,u){throw(0,p.d)("DumpTools")}static _IsOffScreenCanvas(mm){return void 0!==mm.convertToBlob}static ToBlob(mm,o){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",f=arguments.length>3?arguments[3]:void 0;M._IsOffScreenCanvas(mm)||mm.toBlob||(mm.toBlob=function(mm,o,u){setTimeout((()=>{const f=atob(this.toDataURL(o,u).split(",")[1]),B=f.length,O=new Uint8Array(B);for(let mm=0;mm<B;mm++)O[mm]=f.charCodeAt(mm);mm(new Blob([O]))}))}),M._IsOffScreenCanvas(mm)?mm.convertToBlob({type:u,quality:f}).then((mm=>o(mm))):mm.toBlob((function(mm){o(mm)}),u,f)}static DownloadBlob(mm,o){if("download"in document.createElement("a")){if(!o){const mm=new Date;o="screenshot_"+((mm.getFullYear()+"-"+(mm.getMonth()+1)).slice(2)+"-"+mm.getDate()+"_"+mm.getHours()+"-"+("0"+mm.getMinutes()).slice(-2))+".png"}M.Download(mm,o)}else if(mm&&"undefined"!==typeof URL){const o=URL.createObjectURL(mm),u=window.open("");if(!u)return;const f=u.document.createElement("img");f.onload=function(){URL.revokeObjectURL(o)},f.src=o,u.document.body.appendChild(f)}}static EncodeScreenshotCanvasData(mm,o){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",f=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if("string"!==typeof f&&o){if(o){if(M._IsOffScreenCanvas(mm))return void mm.convertToBlob({type:u,quality:B}).then((mm=>{const u=new FileReader;u.readAsDataURL(mm),u.onloadend=()=>{const mm=u.result;o(mm)}}));const f=mm.toDataURL(u,B);o(f)}}else this.ToBlob(mm,(function(mm){mm&&M.DownloadBlob(mm,f),o&&o("")}),u,B)}static Download(mm,o){if("undefined"===typeof URL)return;const u=window.URL.createObjectURL(mm),f=document.createElement("a");document.body.appendChild(f),f.style.display="none",f.href=u,f.download=o,f.addEventListener("click",(()=>{f.parentElement&&f.parentElement.removeChild(f)})),f.click(),window.URL.revokeObjectURL(u)}static BackCompatCameraNoPreventDefault(mm){return"boolean"===typeof mm[0]?mm[0]:"boolean"===typeof mm[1]&&mm[1]}static CreateScreenshot(mm,o,u,f){throw(0,p.d)("ScreenshotTools")}static async CreateScreenshotAsync(mm,o,u){throw(0,p.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(mm,o,u,f){throw(0,p.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(mm,o,u){throw(0,p.d)("ScreenshotTools")}static RandomId(){return(0,H.d)()}static IsBase64(mm){return(0,Y.k)(mm)}static DecodeBase64(mm){return(0,Y.e)(mm)}static get errorsCount(){return O.e.errorsCount}static Log(mm){O.e.Log(mm)}static Warn(mm){O.e.Warn(mm)}static Error(mm){O.e.Error(mm)}static get LogCache(){return O.e.LogCache}static ClearLogCache(){O.e.ClearLogCache()}static set LogLevels(mm){O.e.LogLevels=mm}static set PerformanceLogLevel(mm){return(mm&M.PerformanceUserMarkLogLevel)===M.PerformanceUserMarkLogLevel?(M.StartPerformanceCounter=M._StartUserMark,void(M.EndPerformanceCounter=M._EndUserMark)):(mm&M.PerformanceConsoleLogLevel)===M.PerformanceConsoleLogLevel?(M.StartPerformanceCounter=M._StartPerformanceConsole,void(M.EndPerformanceCounter=M._EndPerformanceConsole)):(M.StartPerformanceCounter=M._StartPerformanceCounterDisabled,void(M.EndPerformanceCounter=M._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(mm,o){}static _EndPerformanceCounterDisabled(mm,o){}static _StartUserMark(mm){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!M._Performance){if(!(0,B.j)())return;M._Performance=window.performance}o&&M._Performance.mark&&M._Performance.mark(mm+"-Begin")}static _EndUserMark(mm){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&M._Performance.mark&&(M._Performance.mark(mm+"-End"),M._Performance.measure(mm,mm+"-Begin",mm+"-End"))}static _StartPerformanceConsole(mm){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o&&(M._StartUserMark(mm,o),console.time&&console.time(mm))}static _EndPerformanceConsole(mm){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o&&(M._EndUserMark(mm,o),console.timeEnd(mm))}static get Now(){return w.b.Now}static GetClassName(mm){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=null;if(!o&&mm.getClassName)u=mm.getClassName();else{if(mm instanceof Object){u=(o?mm:Object.getPrototypeOf(mm)).constructor.__bjsclassName__}u||(u=typeof mm)}return u}static First(mm,o){for(const u of mm)if(o(u))return u;return null}static getFullClassName(mm){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=null,f=null;if(!o&&mm.getClassName)u=mm.getClassName();else{if(mm instanceof Object){const B=o?mm:Object.getPrototypeOf(mm);u=B.constructor.__bjsclassName__,f=B.constructor.__bjsmoduleName__}u||(u=typeof mm)}return u?(null!=f?f+".":"")+u:null}static async DelayAsync(mm){await new Promise((o=>{setTimeout((()=>{o()}),mm)}))}static IsSafari(){return!!(0,B.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function l(mm,o){return u=>{u.__bjsclassName__=mm,u.__bjsmoduleName__=null!=o?o:null}}M.AssetBaseUrl="",M.UseCustomRequestHeaders=!1,M.CustomRequestHeaders=K.e.CustomRequestHeaders,M.GetDOMTextContent=B.b,M._DefaultCdnUrl="https://cdn.babylonjs.com",M._DefaultAssetsUrl="https://assets.babylonjs.com/core",M.GetAbsoluteUrl="object"===typeof document?mm=>{const o=document.createElement("a");return o.href=mm,o.href}:"function"===typeof URL&&"object"===typeof location?mm=>new URL(mm,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},M.NoneLogLevel=O.e.NoneLogLevel,M.MessageLogLevel=O.e.MessageLogLevel,M.WarningLogLevel=O.e.WarningLogLevel,M.ErrorLogLevel=O.e.ErrorLogLevel,M.AllLogLevel=O.e.AllLogLevel,M.IsWindowObjectExist=B.j,M.PerformanceNoneLogLevel=0,M.PerformanceUserMarkLogLevel=1,M.PerformanceConsoleLogLevel=2,M.StartPerformanceCounter=M._StartPerformanceCounterDisabled,M.EndPerformanceCounter=M._EndPerformanceCounterDisabled;class t{constructor(mm,o,u){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=mm,this.index=f-1,this._done=!1,this._fn=o,this._successCallback=u}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(mm,o,u){const f=new t(mm,o,u,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return f.executeNext(),f}static SyncAsyncForLoop(mm,o,u,f,B){let O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return t.Run(Math.ceil(mm/o),(f=>{B&&B()?f.breakLoop():setTimeout((()=>{for(let O=0;O<o;++O){const r=f.index*o+O;if(r>=mm)break;if(u(r),B&&B()){f.breakLoop();break}}f.executeNext()}),O)}),f)}}M.Mix=E.j,M.IsExponentOfTwo=E.f,z.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12702:(mm,o,u)=>{u.d(o,{b:()=>O,c:()=>B});const f={};function B(mm,o){f[mm]=o}function O(mm){return f[mm]}},12594:(mm,o,u)=>{u.d(o,{e:()=>f});class f{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(f.CustomRequestHeaders).length>0||f.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const mm in f.CustomRequestHeaders){const o=f.CustomRequestHeaders[mm];o&&this._xhr.setRequestHeader(mm,o)}}_shouldSkipRequestModifications(mm){return f.SkipRequestModificationForBabylonCDN&&(mm.includes("preview.babylonjs.com")||mm.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(mm){this._xhr.onprogress=mm}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(mm){this._xhr.responseType=mm}get timeout(){return this._xhr.timeout}set timeout(mm){this._xhr.timeout=mm}addEventListener(mm,o,u){this._xhr.addEventListener(mm,o,u)}removeEventListener(mm,o,u){this._xhr.removeEventListener(mm,o,u)}abort(){this._xhr.abort()}send(mm){f.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(mm)}open(mm,o){for(const u of f.CustomRequestModifiers){if(this._shouldSkipRequestModifications(o))return;o=u(this._xhr,o)||o}o=(o=o.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=o,this._xhr.open(mm,o,!0)}setRequestHeader(mm,o){this._xhr.setRequestHeader(mm,o)}getResponseHeader(mm){return this._xhr.getResponseHeader(mm)}}f.CustomRequestHeaders={},f.CustomRequestModifiers=new Array,f.SkipRequestModificationForBabylonCDN=!0}}]);