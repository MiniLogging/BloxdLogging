"use strict";(self["686i8587bmi"]=self["686i8587bmi"]||[]).push([[8],{12656:(h,d,T)=>{T.d(d,{c:()=>D});var Y=T(12625),y=T(12596),C=T(12661),n=T(12676),X=T(12609);class F{constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,h&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(h){this._zOffset!==h&&(this._zOffset=h,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(h){this._zOffsetUnits!==h&&(this._zOffsetUnits=h,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(h){this._cullFace!==h&&(this._cullFace=h,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(h){this._cull!==h&&(this._cull=h,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(h){this._depthFunc!==h&&(this._depthFunc=h,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(h){this._depthMask!==h&&(this._depthMask=h,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(h){this._depthTest!==h&&(this._depthTest=h,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(h){this._frontFace!==h&&(this._frontFace=h,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(h){this.isDirty&&(this._isCullDirty&&(this.cull?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(h.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(h.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(h.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(h.enable(h.POLYGON_OFFSET_FILL),h.polygonOffset(this.zOffset,this.zOffsetUnits)):h.disable(h.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(h.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class U{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(h){this._func!==h&&(this._func=h,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(h){this._funcRef!==h&&(this._funcRef=h,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(h){this._funcMask!==h&&(this._funcMask=h,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(h){this._opStencilFail!==h&&(this._opStencilFail=h,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(h){this._opDepthFail!==h&&(this._opDepthFail=h,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(h){this._opStencilDepthPass!==h&&(this._opStencilDepthPass=h,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(h){this._mask!==h&&(this._mask=h,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(h){this._enabled!==h&&(this._enabled=h,this._isStencilTestDirty=!0)}constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,h&&this.reset()}reset(){var h;this.stencilMaterial=void 0,null===(h=this.stencilGlobal)||void 0===h||h.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(h){var d;if(!h)return;const T=!this.useStencilGlobalOnly&&!(null===(d=this.stencilMaterial)||void 0===d||!d.enabled);this.enabled=T?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=T?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=T?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=T?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=T?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=T?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=T?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=T?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(h.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(h.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(h.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class Z{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=Z.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=Z.KEEP,this.opDepthFail=Z.KEEP,this.opStencilDepthPass=Z.REPLACE}get stencilFunc(){return this.func}set stencilFunc(h){this.func=h}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(h){this.funcRef=h}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(h){this.funcMask=h}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(h){this.opStencilFail=h}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(h){this.opDepthFail=h}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(h){this.opStencilDepthPass=h}get stencilMask(){return this.mask}set stencilMask(h){this.mask=h}get stencilTest(){return this.enabled}set stencilTest(h){this.enabled=h}}Z.ALWAYS=519,Z.KEEP=7680,Z.REPLACE=7681;class S{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(h){this._alphaBlend!==h&&(this._alphaBlend=h,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(h,d,T,Y){this._blendConstants[0]===h&&this._blendConstants[1]===d&&this._blendConstants[2]===T&&this._blendConstants[3]===Y||(this._blendConstants[0]=h,this._blendConstants[1]=d,this._blendConstants[2]=T,this._blendConstants[3]=Y,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(h,d,T,Y){this._blendFunctionParameters[0]===h&&this._blendFunctionParameters[1]===d&&this._blendFunctionParameters[2]===T&&this._blendFunctionParameters[3]===Y||(this._blendFunctionParameters[0]=h,this._blendFunctionParameters[1]=d,this._blendFunctionParameters[2]=T,this._blendFunctionParameters[3]=Y,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(h,d){this._blendEquationParameters[0]===h&&this._blendEquationParameters[1]===d||(this._blendEquationParameters[0]=h,this._blendEquationParameters[1]=d,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(h){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?h.enable(h.BLEND):h.disable(h.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(h.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(h.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(h.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var r=T(12617),c=T(12684),O=T(12589),f=T(12583),J=T(12647),W=T(12701);function L(h,d){if((0,O.l)()){const{requestAnimationFrame:T}=d||window;if("function"===typeof T)return T(h)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(h);return setTimeout(h,16)}class D{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(h){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Dd(){return this._useReverseDepthBuffer}set Dd(h){h!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=h,this._depthCullingState.depthFunc=h?518:515)}setColorWrite(h){h!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=h)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(h){if(h)return this.isNDCHalfZRange?h.IS_NDC_HALF_ZRANGE="":delete h.IS_NDC_HALF_ZRANGE,this.Dd?h.USE_REVERSE_DEPTHBUFFER="":delete h.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?h.USE_EXACT_SRGB_CONVERSIONS="":delete h.USE_EXACT_SRGB_CONVERSIONS);{let h="";return this.isNDCHalfZRange&&(h+="#define IS_NDC_HALF_ZRANGE"),this.Dd&&(h&&(h+="\n"),h+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(h&&(h+="\n"),h+="#define USE_EXACT_SRGB_CONVERSIONS"),h}}_rebuildInternalTextures(){const h=this._internalTexturesCache.slice();for(const d of h)d._rebuild()}_rebuildRenderTargetWrappers(){const h=this._renderTargetWrapperCache.slice();for(const d of h)d._rebuild()}_rebuildEffects(){for(const h in this._compiledEffects){const d=this._compiledEffects[h];d._pipelineContext=null,d._prepareEffect()}C.Effect.ResetCache()}_rebuildGraphicsResources(){var h;this.wipeCaches(!0),this._rebuildEffects(),null===(h=this._rebuildComputeEffects)||void 0===h||h.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){y.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(h){setTimeout((()=>{this._clearEmptyResources();const d=this._depthCullingState.depthTest,T=this._depthCullingState.depthFunc,Y=this._depthCullingState.depthMask,y=this._stencilState.stencilTest;h(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=d,this._depthCullingState.depthFunc=T,this._depthCullingState.depthMask=Y,this._stencilState.stencilTest=y,this._flagContextRestored()}),0)}get U(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(h){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(h){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const h=new Uint8Array(4),d=[h,h,h,h,h,h];this._emptyCubeTexture=this.createRawCubeTexture(d,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(h){if(!h)return this._activeRenderLoops.length=0,void this._cancelFrame();const d=this._activeRenderLoops.indexOf(h);d>=0&&(this._activeRenderLoops.splice(d,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const h=this._frameHandler;if(this._frameHandler=0,(0,O.l)()){const{cancelAnimationFrame:d}=this.getHostWindow()||window;if("function"===typeof d)return d(h)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(h);return clearTimeout(h)}}wd(){this.onBeginFrameObservable.notifyObservers(this)}sd(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(h){this._maxFPS=h,void 0!==h&&(this._minFrameTime=h<=0?Number.MAX_VALUE:1e3/h)}_isOverFrameTime(h){if(!h||void 0===this._maxFPS)return!1;const d=h-this._lastFrameTime;return this._lastFrameTime=h,this._renderAccumulator+=d,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(h){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(h)){let h=!0;(this.U||!this.renderEvenInBackground&&this._windowIsBackground)&&(h=!1),h&&(this.wd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.sd())}}_renderLoop(h){this._processFrame(h),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let h=0;h<this._activeRenderLoops.length;h++){(0,this._activeRenderLoops[h])()}}_renderViews(){return!1}_queueNewFrame(h,d){return L(h,d)}runRenderLoop(h){-1===this._activeRenderLoops.indexOf(h)&&(this._activeRenderLoops.push(h),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(h){this._depthCullingState.depthTest=h}setZOffset(h){this._depthCullingState.zOffset=this.Dd?-h:h}getZOffset(){const h=this._depthCullingState.zOffset;return this.Dd?-h:h}setZOffsetUnits(h){this._depthCullingState.zOffsetUnits=this.Dd?-h:h}getZOffsetUnits(){const h=this._depthCullingState.zOffsetUnits;return this.Dd?-h:h}getHostWindow(){return(0,O.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(h){this._compatibilityMode=!0}_rebuildTextures(){for(const h of this.scenes)h._rebuildTextures();for(const h of this._virtualScenes)h._rebuildTextures()}_releaseRenderTargetWrapper(h){const d=this._renderTargetWrapperCache.indexOf(h);-1!==d&&this._renderTargetWrapperCache.splice(d,1)}get currentViewport(){return this._cachedViewport}setViewport(h,d,T){const Y=d||this.getRenderWidth(),y=T||this.getRenderHeight(),C=h.x||0,n=h.y||0;this._cachedViewport=h,this._viewport(C*Y,n*y,Y*h.width,y*h.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(h){return new Path2D(h)}get description(){let h=this.name+this.version;return this._caps.parallelShaderCompile&&(h+=" - Parallel shader compilation"),h}_createTextureBase(h,d,T,C){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,U=arguments.length>7?arguments[7]:void 0,Z=arguments.length>8?arguments[8]:void 0,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,r=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,O=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,J=arguments.length>13?arguments[13]:void 0,L=arguments.length>14?arguments[14]:void 0,V=arguments.length>15?arguments[15]:void 0;const i="data:"===(h=h||"").substring(0,5),w="blob:"===h.substring(0,5),s=i&&-1!==h.indexOf(";base64,"),E=r||new c.e(this,1);E!==r&&(E.label=h.substring(0,60));const z=h;!this._transformTextureUrl||s||r||S||(h=this._transformTextureUrl(h)),z!==h&&(E._originalUrl=z);const x=h.lastIndexOf(".");let g=f||(x>-1?h.substring(x).toLowerCase():"");g.indexOf("?")>-1&&(g=g.split("?")[0]);const H=(0,W.b)(g,J);C&&C.addPendingData(E),E.url=h,E.generateMipMaps=!d,E.samplingMode=n,E.invertY=T,E._useSRGBBuffer=this._getUseSRGBBuffer(!!V,d),this._doNotHandleContextLost||(E._buffer=S);let p=null;X&&!r&&(p=E.onLoadedObservable.add(X)),r||this._internalTexturesCache.push(E);const k=(T,r)=>{C&&C.removePendingData(E),h===z?(p&&E.onLoadedObservable.remove(p),Y.d.UseFallbackTexture&&h!==Y.d.FallbackTexture&&this._createTextureBase(Y.d.FallbackTexture,d,E.invertY,C,n,null,F,U,Z,S,E),T=(T||"Unknown error")+(Y.d.UseFallbackTexture?" - Fallback texture was used":""),E.onErrorObservable.notifyObservers({message:T,exception:r}),F&&F(T,r)):(y.c.Warn(`Failed to load ${h}, falling back to ${z}`),this._createTextureBase(z,d,E.invertY,C,n,X,F,U,Z,S,E,O,f,J,L,V))};if(H){const d=async h=>{(await H).loadData(h,E,((h,d,T,Y,y,X)=>{X?k("TextureLoader failed to load data"):U(E,g,C,{width:h,height:d},E.invertY,!T,Y,(()=>(y(),!1)),n)}),L)};S?S instanceof ArrayBuffer?d(new Uint8Array(S)):ArrayBuffer.isView(S)?d(S):F&&F("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(h,(h=>{d(new Uint8Array(h))}),void 0,C?C.offlineProvider:void 0,!0,((h,d)=>{k("Unable to load "+(h&&h.responseURL,d))}))}else{const T=h=>{w&&!this._doNotHandleContextLost&&(E._buffer=h),U(E,g,C,h,E.invertY,d,!1,Z,n)};!i||s?S&&("string"===typeof S.decoding||S.close)?T(S):D._FileToolsLoadImage(h||"",T,k,C?C.offlineProvider:null,J,E.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof S||S instanceof ArrayBuffer||ArrayBuffer.isView(S)||S instanceof Blob?D._FileToolsLoadImage(S,T,k,C?C.offlineProvider:null,J,E.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):S&&T(S)}return E}_rebuildBuffers(){for(const h of this._uniformBuffers)h._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,O.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const h in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,h)&&(this._boundTexturesCache[h]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(h){this._name=h}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(h){this._hardwareScalingLevel=h,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(h){this._doNotHandleContextLost=h}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(h,d,T){var y,C;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new F,this._stencilStateComposer=new U,this._stencilState=new Z,this._alphaState=new S,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new f.e,this.onCanvasFocusObservable=new f.e,this.onNewSceneAddedObservable=new f.e,this.onResizeObservable=new f.e,this.onCanvasPointerOutObservable=new f.e,this.onEffectErrorObservable=new f.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new f.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=h=>this._renderLoop(h),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new f.e,this.onAfterShaderCompilationObservable=new f.e,this.onBeginFrameObservable=new f.e,this.onEndFrameObservable=new f.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new f.e,this.onContextRestoredObservable=new f.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.zd=new f.e,this.onReleaseEffectsObservable=new f.e,Y.d.Instances.push(this),this.startTime=X.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,n.c.SetMatrixPrecision(!!d.useHighPrecisionMatrix),(0,O.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=T??!1,d.antialias=h??d.antialias,d.deterministicLockstep=d.deterministicLockstep??!1,d.lockstepMaxSteps=d.lockstepMaxSteps??4,d.timeStep=d.timeStep??1/60,d.xd=d.xd??!0,this._audioContext=(null===(y=d.audioEngineOptions)||void 0===y?void 0:y.audioContext)??null,this._audioDestination=(null===(C=d.audioEngineOptions)||void 0===C?void 0:C.audioDestination)??null,this.premultipliedAlpha=d.premultipliedAlpha??!0,this._doNotHandleContextLost=!!d.doNotHandleContextLost,this._isStencilEnable=!!d.xd,this.useExactSrgbConversions=d.useExactSrgbConversions??!1;const r=(0,O.l)()&&window.devicePixelRatio||1,c=d.limitDeviceRatio||r;T=T||d.adaptToDeviceRatio||!1,this._hardwareScalingLevel=T?1/Math.min(c,r):1,this._lastDevicePixelRatio=r,this._creationOptions=d}resize(){let h,d,T=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const h=(0,O.l)()&&window.devicePixelRatio||1,d=this._lastDevicePixelRatio/h;this._lastDevicePixelRatio=h,this._hardwareScalingLevel*=d}if((0,O.l)()&&(0,O.e)())if(this._renderingCanvas){var Y,y;const T=null===(Y=(y=this._renderingCanvas).getBoundingClientRect)||void 0===Y?void 0:Y.call(y);h=this._renderingCanvas.clientWidth||(null===T||void 0===T?void 0:T.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,d=this._renderingCanvas.clientHeight||(null===T||void 0===T?void 0:T.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else h=window.innerWidth,d=window.innerHeight;else h=this._renderingCanvas?this._renderingCanvas.width:100,d=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(h/this._hardwareScalingLevel,d/this._hardwareScalingLevel,T)}setSize(h,d){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(h|=0,d|=0,!T&&this._renderingCanvas.width===h&&this._renderingCanvas.height===d)return!1;if(this._renderingCanvas.width=h,this._renderingCanvas.height=d,this.scenes){for(let h=0;h<this.scenes.length;h++){const d=this.scenes[h];for(let h=0;h<d.cameras.length;h++){d.cameras[h]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(h,d,T,Y,y,C,n,X,F,U,Z){throw(0,r.e)("engine.rawTexture")}createRawCubeTexture(h,d,T,Y,y,C,n,X){throw(0,r.e)("engine.rawTexture")}createRawTexture3D(h,d,T,Y,y,C,n,X,F,U,Z){throw(0,r.e)("engine.rawTexture")}createRawTexture2DArray(h,d,T,Y,y,C,n,X,F,U,Z){throw(0,r.e)("engine.rawTexture")}_sharedInit(h){this._renderingCanvas=h}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const h=navigator.userAgent;this.hostInformation.isMobile=-1!==h.indexOf("Mobile")||-1!==h.indexOf("Mac")&&(0,O.e)()&&"ontouchend"in document},this._checkForMobile(),(0,O.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(h){return document.createElement("video")}_reportDrawCall(){var h;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(h=this._drawCalls)||void 0===h||h.addCount(d,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(h,d){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(h,d){return createImageBitmap(h,d)}resizeImageBitmap(h,d,T){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(h){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(h,d){if("undefined"===typeof document)return new OffscreenCanvas(h,d);const T=document.createElement("canvas");return T.width=h,T.height=d,T}createCanvas(h,d){return D._CreateCanvas(h,d)}static _FileToolsLoadImage(h,d,T,Y,y,C,n){throw(0,r.e)("FileTools")}_loadFile(h,d,T,Y,y,C){const n=(0,J.o)(h,d,T,Y,y,C);return this._activeRequests.push(n),n.onCompleteObservable.add((()=>{const h=this._activeRequests.indexOf(n);-1!==h&&this._activeRequests.splice(h,1)})),n}static _FileToolsLoadFile(h,d,T,Y,y,C){if(J.e.loadFile)return J.e.loadFile(h,d,T,Y,y,C);throw(0,r.e)("FileTools")}dispose(){var h;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(h=this.releaseComputeEffects)||void 0===h||h.call(this),C.Effect.ResetCache();for(const T of this._activeRequests)T.abort();this._boundRenderFunction=null,this.zd.notifyObservers(this),this.zd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,O.l)()&&window.removeEventListener("resize",this._checkForMobile);const d=Y.d.Instances.indexOf(this);d>=0&&Y.d.Instances.splice(d,1),Y.d.Instances.length||(Y.d.OnEnginesDisposedObservable.notifyObservers(this),Y.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(h){throw(0,r.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(h,d){for(let T=0;T<Y.d.Instances.length;T++){const y=Y.d.Instances[T];for(let T=0;T<y.scenes.length;T++)y.scenes[T].markAllMaterialsAsDirty(h,d)}}}D._RenderPassIdCounter=0,D._RescalePostProcessFactory=null,D.CollisionsEpsilon=.001,D.QueueNewFrame=L},12625:(h,d,T)=>{T.d(d,{d:()=>y});var Y=T(12583);class y{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}y.Instances=[],y.OnEnginesDisposedObservable=new Y.e,y._LastCreatedScene=null,y.UseFallbackTexture=!0,y.FallbackTexture=""},12676:(h,d,T)=>{T.d(d,{c:()=>Y});class Y{static SetMatrixPrecision(h){if(Y.MatrixTrackPrecisionChange=!1,h&&!Y.MatrixUse64Bits&&Y.MatrixTrackedMatrices)for(let d=0;d<Y.MatrixTrackedMatrices.length;++d){const h=Y.MatrixTrackedMatrices[d],T=h.kd;h.kd=new Array(16);for(let d=0;d<16;++d)h.kd[d]=T[d]}Y.MatrixUse64Bits=h,Y.MatrixCurrentType=Y.MatrixUse64Bits?Array:Float32Array,Y.MatrixTrackedMatrices=null}}Y.MatrixUse64Bits=!1,Y.MatrixTrackPrecisionChange=!0,Y.MatrixCurrentType=Float32Array,Y.MatrixTrackedMatrices=[]},12701:(h,d,T)=>{T.d(d,{b:()=>n});var Y=T(12596);const y=new Map;function C(h,d){(function(h){return y.delete(h)})(h)&&Y.c.Warn(`Extension with the name '${h}' already exists`),y.set(h,d)}function n(h,d){"image/ktx"!==d&&"image/ktx2"!==d||(h=".ktx"),y.has(h)||(h.endsWith(".ies")&&C(".ies",(async()=>await T.e(15).then(T.bind(T,15243)).then((h=>new h._IESTextureLoader)))),h.endsWith(".dds")&&C(".dds",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(28)]).then(T.bind(T,15251)).then((h=>new h._DDSTextureLoader)))),h.endsWith(".basis")&&C(".basis",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(47)]).then(T.bind(T,15260)).then((h=>new h._BasisTextureLoader)))),h.endsWith(".env")&&C(".env",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(23),T.e(21),T.e(45),T.e(48)]).then(T.bind(T,15263)).then((h=>new h._ENVTextureLoader)))),h.endsWith(".hdr")&&C(".hdr",(async()=>await Promise.all([T.e(14),T.e(49)]).then(T.bind(T,15269)).then((h=>new h._HDRTextureLoader)))),(h.endsWith(".ktx")||h.endsWith(".ktx2"))&&(C(".ktx",(async()=>await T.e(30).then(T.bind(T,15272)).then((h=>new h._KTXTextureLoader)))),C(".ktx2",(async()=>await T.e(30).then(T.bind(T,15272)).then((h=>new h._KTXTextureLoader))))),h.endsWith(".tga")&&C(".tga",(async()=>await T.e(50).then(T.bind(T,15275)).then((h=>new h._TGATextureLoader)))),h.endsWith(".exr")&&C(".exr",(async()=>await T.e(16).then(T.bind(T,15277)).then((h=>new h._ExrTextureLoader)))));const Y=y.get(h);return Y?Promise.resolve(Y(d)):null}},12684:(h,d,T)=>{T.d(d,{e:()=>n});var Y,y=T(12583),C=T(12692);!function(h){h[h.Unknown=0]="Unknown",h[h.Url=1]="Url",h[h.Temp=2]="Temp",h[h.Raw=3]="Raw",h[h.Dynamic=4]="Dynamic",h[h.RenderTarget=5]="RenderTarget",h[h.MultiRenderTarget=6]="MultiRenderTarget",h[h.Cube=7]="Cube",h[h.CubeRaw=8]="CubeRaw",h[h.CubePrefiltered=9]="CubePrefiltered",h[h.Raw3D=10]="Raw3D",h[h.Raw2DArray=11]="Raw2DArray",h[h.DepthStencil=12]="DepthStencil",h[h.CubeRawRGBD=13]="CubeRawRGBD",h[h.Depth=14]="Depth"}(Y||(Y={}));class n extends C.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(h){this.generateMipMaps=h}get uniqueId(){return this._uniqueId}_setUniqueId(h){this._uniqueId=h}getEngine(){return this._engine}get source(){return this._source}constructor(h,d){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new y.e,this.onErrorObservable=new y.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=h,this._source=d,this._uniqueId=n._Counter++,T||(this._hardwareTexture=h._createHardwareTexture())}incrementReferences(){this._references++}updateSize(h,d){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,h,d,T),this.width=h,this.height=d,this.depth=T,this.baseWidth=h,this.baseHeight=d,this.baseDepth=T,this._size=h*d*T}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const h=this.onRebuildCallback(this),d=d=>{d._swapAndDie(this,!1),this.isReady=h.isReady};return void(h.isAsync?h.proxy.then(d):d(h.proxy))}let h;switch(this.source){case 2:case 12:case 14:break;case 1:return void(h=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(h=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:h=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),h._swapAndDie(this,!1),this.isReady=!0;break;case 10:h=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 11:h=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 4:h=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),h._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(h=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:h=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),h._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return h=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(h=>{h&&h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(h._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(h){var d;let T=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(d=this._hardwareTexture)||void 0===d||d.setUsage(h._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),h._hardwareTexture=this._hardwareTexture,T&&(h._isRGBD=this._isRGBD),this._lodTextureHigh&&(h._lodTextureHigh&&h._lodTextureHigh.dispose(),h._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(h._lodTextureMid&&h._lodTextureMid.dispose(),h._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(h._lodTextureLow&&h._lodTextureLow.dispose(),h._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(h._irradianceTexture&&h._irradianceTexture.dispose(),h._irradianceTexture=this._irradianceTexture);const Y=this._engine.getLoadedTexturesCache();let y=Y.indexOf(this);-1!==y&&Y.splice(y,1),y=Y.indexOf(h),-1===y&&Y.push(h)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}n._Counter=0},12692:(h,d,T)=>{T.d(d,{b:()=>Y});class Y{get wrapU(){return this._cachedWrapU}set wrapU(h){this._cachedWrapU=h}get wrapV(){return this._cachedWrapV}set wrapV(h){this._cachedWrapV=h}get wrapR(){return this._cachedWrapR}set wrapR(h){this._cachedWrapR=h}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(h){this._cachedAnisotropicFilteringLevel=h}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(h){this._comparisonFunction=h}get useMipMaps(){return this._useMipMaps}set useMipMaps(h){this._useMipMaps=h}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=h,this._cachedWrapV=d,this._cachedWrapR=T,this._cachedAnisotropicFilteringLevel=Y,this.samplingMode=y,this._comparisonFunction=C,this}compareSampler(h){return this._cachedWrapU===h._cachedWrapU&&this._cachedWrapV===h._cachedWrapV&&this._cachedWrapR===h._cachedWrapR&&this._cachedAnisotropicFilteringLevel===h._cachedAnisotropicFilteringLevel&&this.samplingMode===h.samplingMode&&this._comparisonFunction===h._comparisonFunction&&this._useMipMaps===h._useMipMaps}}},12604:(h,d,T)=>{T.d(d,{d:()=>C});var Y=T(12596);const y=(h,d,T)=>h?h.getClassName&&"Mesh"===h.getClassName()?null:!h.getClassName||"SubMesh"!==h.getClassName()&&"PhysicsBody"!==h.getClassName()?h.clone?h.clone():Array.isArray(h)?h.slice():T&&"object"===typeof h?{...h}:null:h.clone(d):null;class C{static DeepCopy(h,d,T,C){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const X=function(h){const d=[];do{const T=Object.getOwnPropertyNames(h);for(const h of T)-1===d.indexOf(h)&&d.push(h)}while(h=Object.getPrototypeOf(h));return d}(h);for(const U of X){if("_"===U[0]&&(!C||-1===C.indexOf(U)))continue;if(U.endsWith("Observable"))continue;if(T&&-1!==T.indexOf(U))continue;const X=h[U],Z=typeof X;if("function"!==Z)try{if("object"===Z)if(X instanceof Uint8Array)d[U]=Uint8Array.from(X);else if(X instanceof Array){if(d[U]=[],X.length>0)if("object"==typeof X[0])for(let h=0;h<X.length;h++){const T=y(X[h],d,n);-1===d[U].indexOf(T)&&d[U].push(T)}else d[U]=X.slice(0)}else d[U]=y(X,d,n);else d[U]=X}catch(F){Y.c.Warn(F.message)}}}}},12629:(h,d,T)=>{T.d(d,{d:()=>Y,h:()=>y,k:()=>C});class Y extends Error{}Y._setPrototypeOf=Object.setPrototypeOf||((h,d)=>(h.__proto__=d,h));const y={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class C extends Y{constructor(h,d,T){super(h),this.errorCode=d,this.innerError=T,this.name="RuntimeError",Y._setPrototypeOf(this,C.prototype)}}},12627:(h,d,T)=>{T.d(d,{d:()=>k,h:()=>D,i:()=>x,l:()=>H,q:()=>E,o:()=>J,s:()=>w,v:()=>s,w:()=>z,x:()=>V});var Y=T(12623),y=T(12589),C=T(12583);class n{}n.FilesToLoad={};var X=T(12629),F=T(12633),U=T(12641),Z=T(12625),S=T(12596),r=T(12651),c=T(12647),O=T(12656);const f=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class J extends X.k{constructor(h,d){super(h,X.h.LoadFileError),this.name="LoadFileError",X.d._setPrototypeOf(this,J.prototype),d instanceof Y.b?this.request=d:this.file=d}}class W extends X.k{constructor(h,d){super(h,X.h.RequestFileError),this.request=d,this.name="RequestFileError",X.d._setPrototypeOf(this,W.prototype)}}class L extends X.k{constructor(h,d){super(h,X.h.ReadFileError),this.file=d,this.name="ReadFileError",X.d._setPrototypeOf(this,L.prototype)}}const D={DefaultRetryStrategy:class{static ExponentialBackoff(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(T,Y,y)=>0!==Y.status||y>=h||-1!==T.indexOf("file:")?-1:Math.pow(2,y)*d}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:h=>h,ScriptBaseUrl:"",ScriptPreprocessUrl:h=>h,CleanUrl:h=>h=h.replace(/#/gm,"%23")},V=(h,d)=>{if((!h||0!==h.indexOf("data:"))&&D.CorsBehavior)if("string"===typeof D.CorsBehavior||D.CorsBehavior instanceof String)d.crossOrigin=D.CorsBehavior;else{const T=D.CorsBehavior(h);T&&(d.crossOrigin=T)}},i={getRequiredSize:null},w=function(h,d,T,y){let C,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",U=arguments.length>5?arguments[5]:void 0,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Z.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===S||void 0===S||!S._features.forceBitmapOverHTMLImageElement))return T("LoadImage is only supported in web or BabylonNative environments."),null;let r=!1;h instanceof ArrayBuffer||ArrayBuffer.isView(h)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(C=URL.createObjectURL(new Blob([h],{type:X})),r=!0):C=`data:${X};base64,`+(0,F.g)(h):h instanceof Blob?(C=URL.createObjectURL(h),r=!0):(C=D.CleanUrl(h),C=D.PreprocessUrl(C));const c=d=>{if(T){const Y=C||h.toString();T(`Error while trying to load image: ${0===Y.indexOf("http")||Y.length<=128?Y:Y.slice(0,128)+"..."}`,d)}};if(null!==S&&void 0!==S&&S._features.forceBitmapOverHTMLImageElement)return E(C,(Y=>{S.createImageBitmap(new Blob([Y],{type:X}),{premultiplyAlpha:"none",...U}).then((h=>{d(h),r&&URL.revokeObjectURL(C)})).catch((d=>{T&&T("Error while trying to load image: "+h,d)}))}),void 0,y||void 0,!0,((h,d)=>{c(d)})),null;const O=new Image;if(i.getRequiredSize){const d=i.getRequiredSize(h);d.width&&(O.width=d.width),d.height&&(O.height=d.height)}V(C,O);const f=[],J=()=>{for(const h of f)h.target.removeEventListener(h.name,h.handler);f.length=0};f.push({target:O,name:"load",handler:()=>{J(),d(O),r&&O.src&&URL.revokeObjectURL(O.src)}}),f.push({target:O,name:"error",handler:h=>{J(),c(h),r&&O.src&&URL.revokeObjectURL(O.src)}}),f.push({target:document,name:"securitypolicyviolation",handler:h=>{if(h.blockedURI!==O.src||"od"===h.disposition)return;J();const d=new Error(`CSP violation of policy ${h.effectiveDirective} ${h.blockedURI}. Current policy is ${h.originalPolicy}`);Z.d.UseFallbackTexture=!1,c(d),r&&O.src&&URL.revokeObjectURL(O.src),O.src=""}}),(()=>{for(const h of f)h.target.addEventListener(h.name,h.handler)})();const W="blob:"===C.substring(0,5),L="data:"===C.substring(0,5),w=()=>{W||L||!Y.b.IsCustomRequestAvailable?O.src=C:E(C,((h,d,T)=>{const Y=new Blob([h],{type:!X&&T?T:X}),y=URL.createObjectURL(Y);r=!0,O.src=y}),void 0,y||void 0,!0,((h,d)=>{c(d)}))},s=()=>{y&&y.loadImage(C,O)};if(!W&&!L&&y&&y.enableTexturesOffline)y.open(s,w);else{if(-1!==C.indexOf("file:")){const h=decodeURIComponent(C.substring(5).toLowerCase());if(n.FilesToLoad[h]&&"undefined"!==typeof URL){try{let d;try{d=URL.createObjectURL(n.FilesToLoad[h])}catch(z){d=URL.createObjectURL(n.FilesToLoad[h])}O.src=d,r=!0}catch(x){O.src=""}return O}}w()}return O},s=(h,d,T,Y,y)=>{const n=new FileReader,X={onCompleteObservable:new C.e,abort:()=>n.abort()};return n.onloadend=()=>X.onCompleteObservable.notifyObservers(X),y&&(n.onerror=()=>{y(new L(`Unable to read ${h.name}`,h))}),n.onload=h=>{d(h.target.result)},T&&(n.onprogress=T),Y?n.readAsArrayBuffer(h):n.readAsText(h),X},E=(h,d,T,Y,y,F,U)=>{if(h.name)return s(h,d,T,y,F?h=>{F(void 0,h)}:void 0);const Z=h;if(-1!==Z.indexOf("file:")){let h=decodeURIComponent(Z.substring(5).toLowerCase());0===h.indexOf("./")&&(h=h.substring(2));const Y=n.FilesToLoad[h];if(Y)return s(Y,d,T,y,F?h=>F(void 0,new J(h.message,h.file)):void 0)}const{match:c,type:O}=p(Z);if(c){const h={onCompleteObservable:new C.e,abort:()=>()=>{}};try{const h=y?k(Z):o(Z);d(h,void 0,O)}catch(X){F?F(void 0,X):S.c.Error(X.message||"Failed to parse the Data URL")}return r.c.SetImmediate((()=>{h.onCompleteObservable.notifyObservers(h)})),h}return z(Z,((h,T)=>{d(h,null===T||void 0===T?void 0:T.responseURL,null===T||void 0===T?void 0:T.getResponseHeader("content-type"))}),T,Y,y,F?h=>{F(h.request,new J(h.message,h.request))}:void 0,U)},z=(h,d,T,n,X,F,U)=>{h=D.CleanUrl(h),h=D.PreprocessUrl(h);const Z=D.BaseUrl+h;let r=!1;const c={onCompleteObservable:new C.e,abort:()=>r=!0},O=()=>{let h,C=new Y.b,n=null;const O=()=>{C&&(T&&C.removeEventListener("progress",T),h&&C.removeEventListener("readystatechange",h),C.removeEventListener("loadend",f))};let f=()=>{O(),c.onCompleteObservable.notifyObservers(c),c.onCompleteObservable.clear(),T=void 0,h=null,f=null,F=void 0,U=void 0,d=void 0};c.abort=()=>{r=!0,f&&f(),C&&C.readyState!==(XMLHttpRequest.DONE||4)&&C.abort(),null!==n&&(clearTimeout(n),n=null),C=null};const J=h=>{const d=h.message||"Unknown error";F&&C?F(new W(d,C)):S.c.Error(d)},L=S=>{if(C){if(C.open("GET",Z),U)try{U(C)}catch(c){return void J(c)}X&&(C.responseType="arraybuffer"),T&&C.addEventListener("progress",T),f&&C.addEventListener("loadend",f),h=()=>{if(!r&&C&&C.readyState===(XMLHttpRequest.DONE||4)){if(h&&C.removeEventListener("readystatechange",h),C.status>=200&&C.status<300||0===C.status&&(!(0,y.l)()||g())){const h=X?C.response:C.responseText;if(null!==h){try{d&&d(h,C)}catch(c){J(c)}return}}const T=D.DefaultRetryStrategy;if(T){const h=T(Z,C,S);if(-1!==h)return O(),C=new Y.b,void(n=setTimeout((()=>L(S+1)),h))}const U=new W("Error status: "+C.status+" "+C.statusText+" - Unable to load "+Z,C);F&&F(U)}},C.addEventListener("readystatechange",h),C.send()}};L(0)};if(n&&n.enableSceneOffline){const Y=h=>{h&&h.status>400?F&&F(h):O()},y=()=>{n&&n.loadFile(D.BaseUrl+h,(h=>{!r&&d&&d(h),c.onCompleteObservable.notifyObservers(c)}),T?h=>{!r&&T&&T(h)}:void 0,Y,X)};n.open(y,Y)}else O();return c},x=h=>{const{match:d,type:T}=p(h);if(d)return T||void 0;const Y=h.lastIndexOf(".");switch(h.substring(Y+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ud":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},g=()=>"undefined"!==typeof location&&"file:"===location.protocol,H=h=>f.test(h),p=h=>{const d=f.exec(h);if(null===d||0===d.length)return{match:!1,type:""};return{match:!0,type:d[0].replace("data:","").replace("base64,","")}};function k(h){return(0,F.b)(h.split(",")[1])}const o=h=>(0,F.e)(h.split(",")[1]);let u;O.c._FileToolsLoadImage=w,c.e.loadFile=E,U.n.loadFile=E;((h,d,T,Y,y,C,n,X,F,U)=>{u={DecodeBase64UrlToBinary:h,DecodeBase64UrlToString:d,DefaultRetryStrategy:T.DefaultRetryStrategy,BaseUrl:T.BaseUrl,CorsBehavior:T.CorsBehavior,PreprocessUrl:T.PreprocessUrl,IsBase64DataUrl:Y,IsFileURL:y,LoadFile:C,LoadImage:n,ReadFile:X,RequestFile:F,SetCorsBehavior:U},Object.defineProperty(u,"DefaultRetryStrategy",{get:function(){return T.DefaultRetryStrategy},set:function(h){T.DefaultRetryStrategy=h}}),Object.defineProperty(u,"BaseUrl",{get:function(){return T.BaseUrl},set:function(h){T.BaseUrl=h}}),Object.defineProperty(u,"PreprocessUrl",{get:function(){return T.PreprocessUrl},set:function(h){T.PreprocessUrl=h}}),Object.defineProperty(u,"CorsBehavior",{get:function(){return T.CorsBehavior},set:function(h){T.CorsBehavior=h}})})(k,o,D,H,g,E,w,s,z,V)},12722:(h,d,T)=>{function Y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(h=>{const d=16*Math.random()|0;return("x"===h?d:3&d|8).toString(16)}))}T.d(d,{b:()=>Y})},12707:(h,d,T)=>{T.d(d,{c:()=>C});var Y=T(12596),y=T(12714);class C{static Instantiate(h){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[h])return this.RegisteredExternalClasses[h];const d=(0,y.d)(h);if(d)return d;Y.c.Warn(h+" not found, you may have missed an import.");const T=h.split(".");let C=window||this;for(let Y=0,y=T.length;Y<y;Y++)C=C[T[Y]];return"function"!==typeof C?null:C}}C.RegisteredExternalClasses={}},12609:(h,d,T)=>{T.d(d,{b:()=>y});var Y=T(12589);class y{static get Now(){return(0,Y.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12633:(h,d,T)=>{T.d(d,{b:()=>n,e:()=>C,f:()=>Y,g:()=>y});const Y=h=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(h);let d="";for(let T=0;T<h.byteLength;T++)d+=String.fromCharCode(h[T]);return d},y=h=>{const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T,Y,y,C,n,X,F,U="",Z=0;const S=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h);for(;Z<S.length;)T=S[Z++],Y=Z<S.length?S[Z++]:Number.NaN,y=Z<S.length?S[Z++]:Number.NaN,C=T>>2,n=(3&T)<<4|Y>>4,X=(15&Y)<<2|y>>6,F=63&y,isNaN(Y)?X=F=64:isNaN(y)&&(F=64),U+=d.charAt(C)+d.charAt(n)+d.charAt(X)+d.charAt(F);return U},C=h=>atob(h),n=h=>{const d=C(h),T=d.length,Y=new Uint8Array(new ArrayBuffer(T));for(let y=0;y<T;y++)Y[y]=d.charCodeAt(y);return Y.buffer}},12727:(h,d,T)=>{function Y(h){let d=1;do{d*=2}while(d<h);return d===h}function y(h,d,T){return h*(1-T)+d*T}function C(h){const d=n(h),T=X(h);return d-h>h-T?T:d}function n(h){return h--,h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,h|=h>>16,++h}function X(h){return h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,(h|=h>>16)-(h>>1)}function F(h,d){let T;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:T=X(h);break;case 2:T=C(h);break;default:T=n(h)}return Math.min(T,d)}T.d(d,{c:()=>X,e:()=>F,i:()=>Y,j:()=>y,l:()=>C})},12574:(h,d,T)=>{T.r(d),T.d(d,{AsyncLoop:()=>L,Tools:()=>J,className:()=>W});var Y=T(12583),y=T(12589),C=T(12596),n=T(12604),X=T(12609),F=T(12617),U=T(12623),Z=T(12625),S=T(12627),r=T(12651),c=T(12707),O=T(12722),f=T(12727);class J{static get BaseUrl(){return S.h.BaseUrl}static set BaseUrl(h){S.h.BaseUrl=h}static get CleanUrl(){return S.h.CleanUrl}static set CleanUrl(h){S.h.CleanUrl=h}static IsAbsoluteUrl(h){return 0===h.indexOf("//")||-1!==h.indexOf("://")&&(-1!==h.indexOf(".")&&(-1!==h.indexOf("/")&&(!(h.indexOf(":")>h.indexOf("/"))&&(h.indexOf("://")<h.indexOf(".")||(0===h.indexOf("data:")||0===h.indexOf("blob:"))))))}static set ScriptBaseUrl(h){S.h.ScriptBaseUrl=h}static get ScriptBaseUrl(){return S.h.ScriptBaseUrl}static set CDNBaseUrl(h){J.ScriptBaseUrl=h,J.AssetBaseUrl=h}static set ScriptPreprocessUrl(h){S.h.ScriptPreprocessUrl=h}static get ScriptPreprocessUrl(){return S.h.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return S.h.DefaultRetryStrategy}static set DefaultRetryStrategy(h){S.h.DefaultRetryStrategy=h}static get CorsBehavior(){return S.h.CorsBehavior}static set CorsBehavior(h){S.h.CorsBehavior=h}static get UseFallbackTexture(){return Z.d.UseFallbackTexture}static set UseFallbackTexture(h){Z.d.UseFallbackTexture=h}static get RegisteredExternalClasses(){return c.c.RegisteredExternalClasses}static set RegisteredExternalClasses(h){c.c.RegisteredExternalClasses=h}static get fallbackTexture(){return Z.d.FallbackTexture}static set fallbackTexture(h){Z.d.FallbackTexture=h}static FetchToRef(h,d,T,Y,y,C){const n=4*((Math.abs(h)*T%T|0)+(Math.abs(d)*Y%Y|0)*T);C.r=y[n]/255,C.g=y[n+1]/255,C.b=y[n+2]/255,C.a=y[n+3]/255}static Mix(h,d,T){return 0}static Instantiate(h){return c.c.Instantiate(h)}static SetImmediate(h){r.c.SetImmediate(h)}static IsExponentOfTwo(h){return!0}static FloatRound(h){return Math.fround(h)}static GetFilename(h){const d=h.lastIndexOf("/");return d<0?h:h.substring(d+1)}static GetFolderPath(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const T=h.lastIndexOf("/");return T<0?d?h:"":h.substring(0,T+1)}static ToDegrees(h){return 180*h/Math.PI}static ToRadians(h){return h*Math.PI/180}static SmoothAngleChange(h,d){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Y=this.ToRadians(h),y=this.ToRadians(d);return this.ToDegrees(Math.atan2((1-T)*Math.sin(y)+T*Math.sin(Y),(1-T)*Math.cos(y)+T*Math.cos(Y)))}static MakeArray(h,d){return!0===d||void 0!==h&&null!=h?Array.isArray(h)?h:[h]:null}static GetPointerPrefix(h){return(0,y.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(h,d){(0,S.x)(h,d)}static SetReferrerPolicyBehavior(h,d){d.referrerPolicy=h}static get PreprocessUrl(){return S.h.PreprocessUrl}static set PreprocessUrl(h){S.h.PreprocessUrl=h}static LoadImage(h,d,T,Y,y,C){return(0,S.s)(h,d,T,Y,y,C)}static LoadFile(h,d,T,Y,y,C){return(0,S.q)(h,d,T,Y,y,C)}static async LoadFileAsync(h){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((T,Y)=>{(0,S.q)(h,(h=>{T(h)}),void 0,void 0,d,((h,d)=>{Y(d)}))}))}static GetAssetUrl(h){if(!h)return"";if(J.AssetBaseUrl&&h.startsWith(J._DefaultAssetsUrl)){const d="/"===J.AssetBaseUrl[J.AssetBaseUrl.length-1]?J.AssetBaseUrl.substring(0,J.AssetBaseUrl.length-1):J.AssetBaseUrl;return h.replace(J._DefaultAssetsUrl,d)}return h}static GetBabylonScriptURL(h,d){if(!h)return"";if(J.ScriptBaseUrl&&h.startsWith(J._DefaultCdnUrl)){const d="/"===J.ScriptBaseUrl[J.ScriptBaseUrl.length-1]?J.ScriptBaseUrl.substring(0,J.ScriptBaseUrl.length-1):J.ScriptBaseUrl;h=h.replace(J._DefaultCdnUrl,d)}return h=J.ScriptPreprocessUrl(h),d&&(h=J.GetAbsoluteUrl(h)),h}static LoadBabylonScript(h,d,T,Y){h=J.GetBabylonScriptURL(h),J.LoadScript(h,d,T)}static async LoadBabylonScriptAsync(h){return h=J.GetBabylonScriptURL(h),await J.LoadScriptAsync(h)}static LoadScript(h,d,T,Y){let C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(h),d&&d()}catch(F){null===T||void 0===T||T(`Unable to load script '${h}' in worker`,F)}return}if(!(0,y.l)())return void(null===T||void 0===T||T(`Cannot load script '${h}' outside of a window or a worker`));const n=document.getElementsByTagName("head")[0],X=document.createElement("script");C?(X.setAttribute("type","module"),X.innerText=h):(X.setAttribute("type","text/javascript"),X.setAttribute("src",h)),Y&&(X.id=Y),X.onload=()=>{d&&d()},X.onerror=d=>{T&&T(`Unable to load script '${h}'`,d)},n.appendChild(X)}static async LoadScriptAsync(h,d){return await new Promise(((T,Y)=>{this.LoadScript(h,(()=>{T()}),((h,d)=>{Y(d||new Error(h))}),d)}))}static ReadFileAsDataURL(h,d,T){const y=new FileReader,C={onCompleteObservable:new Y.e,abort:()=>y.abort()};return y.onloadend=()=>{C.onCompleteObservable.notifyObservers(C)},y.onload=h=>{d(h.target.result)},y.onprogress=T,y.readAsDataURL(h),C}static ReadFile(h,d,T,Y,y){return(0,S.v)(h,d,T,Y,y)}static FileAsURL(h){const d=new Blob([h]);return window.URL.createObjectURL(d)}static Format(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h.toFixed(d)}static DeepCopy(h,d,T,Y){n.d.DeepCopy(h,d,T,Y)}static IsEmpty(h){for(const d in h)if(Object.prototype.hasOwnProperty.call(h,d))return!1;return!0}static RegisterTopRootEvents(h,d){for(let Y=0;Y<d.length;Y++){const y=d[Y];h.addEventListener(y.name,y.handler,!1);try{window.parent&&window.parent.addEventListener(y.name,y.handler,!1)}catch(T){}}}static UnregisterTopRootEvents(h,d){for(let Y=0;Y<d.length;Y++){const y=d[Y];h.removeEventListener(y.name,y.handler);try{h.parent&&h.parent.removeEventListener(y.name,y.handler)}catch(T){}}}static async DumpFramebuffer(h,d,T,Y){throw(0,F.e)("DumpTools")}static DumpData(h,d,T,Y){throw(0,F.e)("DumpTools")}static async DumpDataAsync(h,d,T){throw(0,F.e)("DumpTools")}static _IsOffScreenCanvas(h){return void 0!==h.convertToBlob}static ToBlob(h,d){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Y=arguments.length>3?arguments[3]:void 0;J._IsOffScreenCanvas(h)||h.toBlob||(h.toBlob=function(h,d,T){setTimeout((()=>{const Y=atob(this.toDataURL(d,T).split(",")[1]),y=Y.length,C=new Uint8Array(y);for(let h=0;h<y;h++)C[h]=Y.charCodeAt(h);h(new Blob([C]))}))}),J._IsOffScreenCanvas(h)?h.convertToBlob({type:T,quality:Y}).then((h=>d(h))):h.toBlob((function(h){d(h)}),T,Y)}static DownloadBlob(h,d){if("download"in document.createElement("a")){if(!d){const h=new Date;d="screenshot_"+((h.getFullYear()+"-"+(h.getMonth()+1)).slice(2)+"-"+h.getDate()+"_"+h.getHours()+"-"+("0"+h.getMinutes()).slice(-2))+".png"}J.Download(h,d)}else if(h&&"undefined"!==typeof URL){const d=URL.createObjectURL(h),T=window.open("");if(!T)return;const Y=T.document.createElement("img");Y.onload=function(){URL.revokeObjectURL(d)},Y.src=d,T.document.body.appendChild(Y)}}static EncodeScreenshotCanvasData(h,d){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Y=arguments.length>3?arguments[3]:void 0,y=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Y&&d){if(d){if(J._IsOffScreenCanvas(h))return void h.convertToBlob({type:T,quality:y}).then((h=>{const T=new FileReader;T.readAsDataURL(h),T.onloadend=()=>{const h=T.result;d(h)}}));const Y=h.toDataURL(T,y);d(Y)}}else this.ToBlob(h,(function(h){h&&J.DownloadBlob(h,Y),d&&d("")}),T,y)}static Download(h,d){if("undefined"===typeof URL)return;const T=window.URL.createObjectURL(h),Y=document.createElement("a");document.body.appendChild(Y),Y.style.display="none",Y.href=T,Y.download=d,Y.addEventListener("click",(()=>{Y.parentElement&&Y.parentElement.removeChild(Y)})),Y.click(),window.URL.revokeObjectURL(T)}static BackCompatCameraNoPreventDefault(h){return"boolean"===typeof h[0]?h[0]:"boolean"===typeof h[1]&&h[1]}static CreateScreenshot(h,d,T,Y){throw(0,F.e)("ScreenshotTools")}static async CreateScreenshotAsync(h,d,T){throw(0,F.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(h,d,T,Y){throw(0,F.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(h,d,T){throw(0,F.e)("ScreenshotTools")}static RandomId(){return(0,O.b)()}static IsBase64(h){return(0,S.l)(h)}static DecodeBase64(h){return(0,S.d)(h)}static get errorsCount(){return C.c.errorsCount}static Log(h){C.c.Log(h)}static Warn(h){C.c.Warn(h)}static Error(h){C.c.Error(h)}static get LogCache(){return C.c.LogCache}static ClearLogCache(){C.c.ClearLogCache()}static set LogLevels(h){C.c.LogLevels=h}static set PerformanceLogLevel(h){return(h&J.PerformanceUserMarkLogLevel)===J.PerformanceUserMarkLogLevel?(J.StartPerformanceCounter=J._StartUserMark,void(J.EndPerformanceCounter=J._EndUserMark)):(h&J.PerformanceConsoleLogLevel)===J.PerformanceConsoleLogLevel?(J.StartPerformanceCounter=J._StartPerformanceConsole,void(J.EndPerformanceCounter=J._EndPerformanceConsole)):(J.StartPerformanceCounter=J._StartPerformanceCounterDisabled,void(J.EndPerformanceCounter=J._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(h,d){}static _EndPerformanceCounterDisabled(h,d){}static _StartUserMark(h){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!J._Performance){if(!(0,y.l)())return;J._Performance=window.performance}d&&J._Performance.mark&&J._Performance.mark(h+"-Begin")}static _EndUserMark(h){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&J._Performance.mark&&(J._Performance.mark(h+"-End"),J._Performance.measure(h,h+"-Begin",h+"-End"))}static _StartPerformanceConsole(h){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(J._StartUserMark(h,d),console.time&&console.time(h))}static _EndPerformanceConsole(h){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(J._EndUserMark(h,d),console.timeEnd(h))}static get Now(){return X.b.Now}static GetClassName(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null;if(!d&&h.getClassName)T=h.getClassName();else{if(h instanceof Object){T=(d?h:Object.getPrototypeOf(h)).constructor.__bjsclassName__}T||(T=typeof h)}return T}static First(h,d){for(const T of h)if(d(T))return T;return null}static getFullClassName(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null,Y=null;if(!d&&h.getClassName)T=h.getClassName();else{if(h instanceof Object){const y=d?h:Object.getPrototypeOf(h);T=y.constructor.__bjsclassName__,Y=y.constructor.__bjsmoduleName__}T||(T=typeof h)}return T?(null!=Y?Y+".":"")+T:null}static async DelayAsync(h){await new Promise((d=>{setTimeout((()=>{d()}),h)}))}static IsSafari(){return!!(0,y.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function W(h,d){return T=>{T.__bjsclassName__=h,T.__bjsmoduleName__=null!=d?d:null}}J.AssetBaseUrl="",J.UseCustomRequestHeaders=!1,J.CustomRequestHeaders=U.b.CustomRequestHeaders,J.GetDOMTextContent=y.d,J._DefaultCdnUrl="https://cdn.babylonjs.com",J._DefaultAssetsUrl="https://assets.babylonjs.com/core",J.GetAbsoluteUrl="object"===typeof document?h=>{const d=document.createElement("a");return d.href=h,d.href}:"function"===typeof URL&&"object"===typeof location?h=>new URL(h,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},J.NoneLogLevel=C.c.NoneLogLevel,J.MessageLogLevel=C.c.MessageLogLevel,J.WarningLogLevel=C.c.WarningLogLevel,J.ErrorLogLevel=C.c.ErrorLogLevel,J.AllLogLevel=C.c.AllLogLevel,J.IsWindowObjectExist=y.l,J.PerformanceNoneLogLevel=0,J.PerformanceUserMarkLogLevel=1,J.PerformanceConsoleLogLevel=2,J.StartPerformanceCounter=J._StartPerformanceCounterDisabled,J.EndPerformanceCounter=J._EndPerformanceCounterDisabled;class L{constructor(h,d,T){let Y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=h,this.index=Y-1,this._done=!1,this._fn=d,this._successCallback=T}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(h,d,T){const Y=new L(h,d,T,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Y.executeNext(),Y}static SyncAsyncForLoop(h,d,T,Y,y){let C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return L.Run(Math.ceil(h/d),(Y=>{y&&y()?Y.breakLoop():setTimeout((()=>{for(let C=0;C<d;++C){const n=Y.index*d+C;if(n>=h)break;if(T(n),y&&y()){Y.breakLoop();break}}Y.executeNext()}),C)}),Y)}}J.Mix=f.j,J.IsExponentOfTwo=f.i,Z.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12714:(h,d,T)=>{T.d(d,{d:()=>C,e:()=>y});const Y={};function y(h,d){Y[h]=d}function C(h){return Y[h]}},12623:(h,d,T)=>{T.d(d,{b:()=>Y});class Y{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Y.CustomRequestHeaders).length>0||Y.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const h in Y.CustomRequestHeaders){const d=Y.CustomRequestHeaders[h];d&&this._xhr.setRequestHeader(h,d)}}_shouldSkipRequestModifications(h){return Y.SkipRequestModificationForBabylonCDN&&(h.includes("preview.babylonjs.com")||h.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(h){this._xhr.onprogress=h}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(h){this._xhr.responseType=h}get timeout(){return this._xhr.timeout}set timeout(h){this._xhr.timeout=h}addEventListener(h,d,T){this._xhr.addEventListener(h,d,T)}removeEventListener(h,d,T){this._xhr.removeEventListener(h,d,T)}abort(){this._xhr.abort()}send(h){Y.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(h)}open(h,d){for(const T of Y.CustomRequestModifiers){if(this._shouldSkipRequestModifications(d))return;d=T(this._xhr,d)||d}d=(d=d.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=d,this._xhr.open(h,d,!0)}setRequestHeader(h,d){this._xhr.setRequestHeader(h,d)}getResponseHeader(h){return this._xhr.getResponseHeader(h)}}Y.CustomRequestHeaders={},Y.CustomRequestModifiers=new Array,Y.SkipRequestModificationForBabylonCDN=!0}}]);