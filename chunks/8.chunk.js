"use strict";(self.fkqm0epoq5=self.fkqm0epoq5||[]).push([[8],{11613:(D,l,G)=>{G.d(l,{e:()=>x});var V=G(11571),N=G(11546),M=G(11617),b=G(11637),X=G(11554);class t{constructor(){let D=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,D&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(D){this._zOffset!==D&&(this._zOffset=D,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(D){this._zOffsetUnits!==D&&(this._zOffsetUnits=D,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(D){this._cullFace!==D&&(this._cullFace=D,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(D){this._cull!==D&&(this._cull=D,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(D){this._depthFunc!==D&&(this._depthFunc=D,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(D){this._depthMask!==D&&(this._depthMask=D,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(D){this._depthTest!==D&&(this._depthTest=D,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(D){this._frontFace!==D&&(this._frontFace=D,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(D){this.isDirty&&(this._isCullDirty&&(this.cull?D.enable(D.CULL_FACE):D.disable(D.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(D.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(D.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?D.enable(D.DEPTH_TEST):D.disable(D.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(D.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(D.enable(D.POLYGON_OFFSET_FILL),D.polygonOffset(this.zOffset,this.zOffsetUnits)):D.disable(D.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(D.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class R{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(D){this._func!==D&&(this._func=D,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(D){this._funcRef!==D&&(this._funcRef=D,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(D){this._funcMask!==D&&(this._funcMask=D,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(D){this._opStencilFail!==D&&(this._opStencilFail=D,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(D){this._opDepthFail!==D&&(this._opDepthFail=D,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(D){this._opStencilDepthPass!==D&&(this._opStencilDepthPass=D,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(D){this._mask!==D&&(this._mask=D,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(D){this._enabled!==D&&(this._enabled=D,this._isStencilTestDirty=!0)}constructor(){let D=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,D&&this.reset()}reset(){var D;this.stencilMaterial=void 0,null===(D=this.stencilGlobal)||void 0===D||D.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(D){var l;if(!D)return;const G=!this.useStencilGlobalOnly&&!(null===(l=this.stencilMaterial)||void 0===l||!l.enabled);this.enabled=G?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=G?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=G?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=G?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=G?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=G?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=G?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=G?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?D.enable(D.STENCIL_TEST):D.disable(D.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(D.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(D.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(D.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class n{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=n.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=n.KEEP,this.opDepthFail=n.KEEP,this.opStencilDepthPass=n.REPLACE}get stencilFunc(){return this.func}set stencilFunc(D){this.func=D}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(D){this.funcRef=D}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(D){this.funcMask=D}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(D){this.opStencilFail=D}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(D){this.opDepthFail=D}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(D){this.opStencilDepthPass=D}get stencilMask(){return this.mask}set stencilMask(D){this.mask=D}get stencilTest(){return this.enabled}set stencilTest(D){this.enabled=D}}n.ALWAYS=519,n.KEEP=7680,n.REPLACE=7681;class g{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(D){this._alphaBlend!==D&&(this._alphaBlend=D,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(D,l,G,V){this._blendConstants[0]===D&&this._blendConstants[1]===l&&this._blendConstants[2]===G&&this._blendConstants[3]===V||(this._blendConstants[0]=D,this._blendConstants[1]=l,this._blendConstants[2]=G,this._blendConstants[3]=V,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(D,l,G,V){this._blendFunctionParameters[0]===D&&this._blendFunctionParameters[1]===l&&this._blendFunctionParameters[2]===G&&this._blendFunctionParameters[3]===V||(this._blendFunctionParameters[0]=D,this._blendFunctionParameters[1]=l,this._blendFunctionParameters[2]=G,this._blendFunctionParameters[3]=V,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(D,l){this._blendEquationParameters[0]===D&&this._blendEquationParameters[1]===l||(this._blendEquationParameters[0]=D,this._blendEquationParameters[1]=l,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(D){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?D.enable(D.BLEND):D.disable(D.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(D.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(D.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(D.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var j=G(11563),e=G(11644),K=G(11538),F=G(11532),d=G(11603),H=G(11657);function h(D,l){if((0,K.k)()){const{requestAnimationFrame:G}=l||window;if("function"===typeof G)return G(D)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(D);return setTimeout(D,16)}class x{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(D){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(D){D!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=D,this._depthCullingState.depthFunc=D?518:515)}setColorWrite(D){D!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=D)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(D){if(D)return this.isNDCHalfZRange?D.IS_NDC_HALF_ZRANGE="":delete D.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?D.USE_REVERSE_DEPTHBUFFER="":delete D.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?D.USE_EXACT_SRGB_CONVERSIONS="":delete D.USE_EXACT_SRGB_CONVERSIONS);{let D="";return this.isNDCHalfZRange&&(D+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(D&&(D+="\n"),D+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(D&&(D+="\n"),D+="#define USE_EXACT_SRGB_CONVERSIONS"),D}}_rebuildInternalTextures(){const D=this._internalTexturesCache.slice();for(const l of D)l._rebuild()}_rebuildRenderTargetWrappers(){const D=this._renderTargetWrapperCache.slice();for(const l of D)l._rebuild()}_rebuildEffects(){for(const D in this._compiledEffects){const l=this._compiledEffects[D];l._pipelineContext=null,l._prepareEffect()}M.Effect.ResetCache()}_rebuildGraphicsResources(){var D;this.wipeCaches(!0),this._rebuildEffects(),null===(D=this._rebuildComputeEffects)||void 0===D||D.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){N.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(D){setTimeout((()=>{this._clearEmptyResources();const l=this._depthCullingState.depthTest,G=this._depthCullingState.depthFunc,V=this._depthCullingState.depthMask,N=this._stencilState.stencilTest;D(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=l,this._depthCullingState.depthFunc=G,this._depthCullingState.depthMask=V,this._stencilState.stencilTest=N,this._flagContextRestored()}),0)}get X(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(D){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(D){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const D=new Uint8Array(4),l=[D,D,D,D,D,D];this._emptyCubeTexture=this.createRawCubeTexture(l,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(D){if(!D)return this._activeRenderLoops.length=0,void this._cancelFrame();const l=this._activeRenderLoops.indexOf(D);l>=0&&(this._activeRenderLoops.splice(l,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const D=this._frameHandler;if(this._frameHandler=0,(0,K.k)()){const{cancelAnimationFrame:l}=this.getHostWindow()||window;if("function"===typeof l)return l(D)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(D);return clearTimeout(D)}}lb(){this.onBeginFrameObservable.notifyObservers(this)}Gb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(D){this._maxFPS=D,void 0!==D&&(this._minFrameTime=D<=0?Number.MAX_VALUE:1e3/D)}_isOverFrameTime(D){if(!D||void 0===this._maxFPS)return!1;const l=D-this._lastFrameTime;return this._lastFrameTime=D,this._renderAccumulator+=l,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(D){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(D)){let D=!0;(this.X||!this.renderEvenInBackground&&this._windowIsBackground)&&(D=!1),D&&(this.lb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Gb())}}_renderLoop(D){this._processFrame(D),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let D=0;D<this._activeRenderLoops.length;D++){(0,this._activeRenderLoops[D])()}}_renderViews(){return!1}_queueNewFrame(D,l){return h(D,l)}runRenderLoop(D){-1===this._activeRenderLoops.indexOf(D)&&(this._activeRenderLoops.push(D),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(D){this._depthCullingState.depthTest=D}setZOffset(D){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-D:D}getZOffset(){const D=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-D:D}setZOffsetUnits(D){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-D:D}getZOffsetUnits(){const D=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-D:D}getHostWindow(){return(0,K.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(D){this._compatibilityMode=!0}_rebuildTextures(){for(const D of this.scenes)D._rebuildTextures();for(const D of this._virtualScenes)D._rebuildTextures()}_releaseRenderTargetWrapper(D){const l=this._renderTargetWrapperCache.indexOf(D);-1!==l&&this._renderTargetWrapperCache.splice(l,1)}get currentViewport(){return this._cachedViewport}setViewport(D,l,G){const V=l||this.getRenderWidth(),N=G||this.getRenderHeight(),M=D.x||0,b=D.y||0;this._cachedViewport=D,this._viewport(M*V,b*N,V*D.width,N*D.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(D){return new Path2D(D)}get description(){let D=this.name+this.version;return this._caps.parallelShaderCompile&&(D+=" - Parallel shader compilation"),D}_createTextureBase(D,l,G,M){let b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,R=arguments.length>7?arguments[7]:void 0,n=arguments.length>8?arguments[8]:void 0,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,j=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,K=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,F=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,d=arguments.length>13?arguments[13]:void 0,h=arguments.length>14?arguments[14]:void 0,r=arguments.length>15?arguments[15]:void 0;const o="data:"===(D=D||"").substring(0,5),L="blob:"===D.substring(0,5),u=o&&-1!==D.indexOf(";base64,"),B=j||new e.b(this,1);B!==j&&(B.label=D.substring(0,60));const I=D;!this._transformTextureUrl||u||j||g||(D=this._transformTextureUrl(D)),I!==D&&(B._originalUrl=I);const W=D.lastIndexOf(".");let i=F||(W>-1?D.substring(W).toLowerCase():"");i.indexOf("?")>-1&&(i=i.split("?")[0]);const y=(0,H.c)(i,d);M&&M.addPendingData(B),B.url=D,B.generateMipMaps=!l,B.samplingMode=b,B.invertY=G,B._useSRGBBuffer=this._getUseSRGBBuffer(!!r,l),this._doNotHandleContextLost||(B._buffer=g);let S=null;X&&!j&&(S=B.onLoadedObservable.add(X)),j||this._internalTexturesCache.push(B);const O=(G,j)=>{M&&M.removePendingData(B),D===I?(S&&B.onLoadedObservable.remove(S),V.d.UseFallbackTexture&&D!==V.d.FallbackTexture&&this._createTextureBase(V.d.FallbackTexture,l,B.invertY,M,b,null,t,R,n,g,B),G=(G||"Unknown error")+(V.d.UseFallbackTexture?" - Fallback texture was used":""),B.onErrorObservable.notifyObservers({message:G,exception:j}),t&&t(G,j)):(N.d.Warn(`Failed to load ${D}, falling back to ${I}`),this._createTextureBase(I,l,B.invertY,M,b,X,t,R,n,g,B,K,F,d,h,r))};if(y){const l=async D=>{(await y).loadData(D,B,((D,l,G,V,N,X)=>{X?O("TextureLoader failed to load data"):R(B,i,M,{width:D,height:l},B.invertY,!G,V,(()=>(N(),!1)),b)}),h)};g?g instanceof ArrayBuffer?l(new Uint8Array(g)):ArrayBuffer.isView(g)?l(g):t&&t("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(D,(D=>{l(new Uint8Array(D))}),void 0,M?M.offlineProvider:void 0,!0,((D,l)=>{O("Unable to load "+(D&&D.responseURL,l))}))}else{const G=D=>{L&&!this._doNotHandleContextLost&&(B._buffer=D),R(B,i,M,D,B.invertY,l,!1,n,b)};!o||u?g&&("string"===typeof g.decoding||g.close)?G(g):x._FileToolsLoadImage(D||"",G,O,M?M.offlineProvider:null,d,B.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof g||g instanceof ArrayBuffer||ArrayBuffer.isView(g)||g instanceof Blob?x._FileToolsLoadImage(g,G,O,M?M.offlineProvider:null,d,B.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):g&&G(g)}return B}_rebuildBuffers(){for(const D of this._uniformBuffers)D._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,K.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const D in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,D)&&(this._boundTexturesCache[D]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(D){this._name=D}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(D){this._hardwareScalingLevel=D,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(D){this._doNotHandleContextLost=D}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(D,l,G){var N,M;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new t,this._stencilStateComposer=new R,this._stencilState=new n,this._alphaState=new g,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new F.e,this.onCanvasFocusObservable=new F.e,this.onNewSceneAddedObservable=new F.e,this.onResizeObservable=new F.e,this.onCanvasPointerOutObservable=new F.e,this.onEffectErrorObservable=new F.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new F.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=D=>this._renderLoop(D),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new F.e,this.onAfterShaderCompilationObservable=new F.e,this.onBeginFrameObservable=new F.e,this.onEndFrameObservable=new F.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new F.e,this.onContextRestoredObservable=new F.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Vb=new F.e,this.onReleaseEffectsObservable=new F.e,V.d.Instances.push(this),this.startTime=X.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,b.d.SetMatrixPrecision(!!l.useHighPrecisionMatrix),(0,K.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=G??!1,l.antialias=D??l.antialias,l.deterministicLockstep=l.deterministicLockstep??!1,l.lockstepMaxSteps=l.lockstepMaxSteps??4,l.timeStep=l.timeStep??1/60,l.stencil=l.stencil??!0,this._audioContext=(null===(N=l.audioEngineOptions)||void 0===N?void 0:N.audioContext)??null,this._audioDestination=(null===(M=l.audioEngineOptions)||void 0===M?void 0:M.audioDestination)??null,this.premultipliedAlpha=l.premultipliedAlpha??!0,this._doNotHandleContextLost=!!l.doNotHandleContextLost,this._isStencilEnable=!!l.stencil,this.useExactSrgbConversions=l.useExactSrgbConversions??!1;const j=(0,K.k)()&&window.devicePixelRatio||1,e=l.limitDeviceRatio||j;G=G||l.adaptToDeviceRatio||!1,this._hardwareScalingLevel=G?1/Math.min(e,j):1,this._lastDevicePixelRatio=j,this._creationOptions=l}resize(){let D,l,G=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const D=(0,K.k)()&&window.devicePixelRatio||1,l=this._lastDevicePixelRatio/D;this._lastDevicePixelRatio=D,this._hardwareScalingLevel*=l}if((0,K.k)()&&(0,K.f)())if(this._renderingCanvas){var V,N;const G=null===(V=(N=this._renderingCanvas).getBoundingClientRect)||void 0===V?void 0:V.call(N);D=this._renderingCanvas.clientWidth||(null===G||void 0===G?void 0:G.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,l=this._renderingCanvas.clientHeight||(null===G||void 0===G?void 0:G.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else D=window.innerWidth,l=window.innerHeight;else D=this._renderingCanvas?this._renderingCanvas.width:100,l=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(D/this._hardwareScalingLevel,l/this._hardwareScalingLevel,G)}setSize(D,l){let G=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(D|=0,l|=0,!G&&this._renderingCanvas.width===D&&this._renderingCanvas.height===l)return!1;if(this._renderingCanvas.width=D,this._renderingCanvas.height=l,this.scenes){for(let D=0;D<this.scenes.length;D++){const l=this.scenes[D];for(let D=0;D<l.cameras.length;D++){l.cameras[D]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(D,l,G,V,N,M,b,X,t,R,n){throw(0,j.d)("engine.rawTexture")}createRawCubeTexture(D,l,G,V,N,M,b,X){throw(0,j.d)("engine.rawTexture")}createRawTexture3D(D,l,G,V,N,M,b,X,t,R,n){throw(0,j.d)("engine.rawTexture")}createRawTexture2DArray(D,l,G,V,N,M,b,X,t,R,n){throw(0,j.d)("engine.rawTexture")}_sharedInit(D){this._renderingCanvas=D}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const D=navigator.userAgent;this.hostInformation.isMobile=-1!==D.indexOf("Mobile")||-1!==D.indexOf("Mac")&&(0,K.f)()&&"ontouchend"in document},this._checkForMobile(),(0,K.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(D){return document.createElement("video")}_reportDrawCall(){var D;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(D=this._drawCalls)||void 0===D||D.addCount(l,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(D,l){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(D,l){return createImageBitmap(D,l)}resizeImageBitmap(D,l,G){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(D){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(D,l){if("undefined"===typeof document)return new OffscreenCanvas(D,l);const G=document.createElement("canvas");return G.width=D,G.height=l,G}createCanvas(D,l){return x._CreateCanvas(D,l)}static _FileToolsLoadImage(D,l,G,V,N,M,b){throw(0,j.d)("FileTools")}_loadFile(D,l,G,V,N,M){const b=(0,d.m)(D,l,G,V,N,M);return this._activeRequests.push(b),b.onCompleteObservable.add((()=>{const D=this._activeRequests.indexOf(b);-1!==D&&this._activeRequests.splice(D,1)})),b}static _FileToolsLoadFile(D,l,G,V,N,M){if(d.c.loadFile)return d.c.loadFile(D,l,G,V,N,M);throw(0,j.d)("FileTools")}dispose(){var D;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(D=this.releaseComputeEffects)||void 0===D||D.call(this),M.Effect.ResetCache();for(const G of this._activeRequests)G.abort();this._boundRenderFunction=null,this.Vb.notifyObservers(this),this.Vb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,K.k)()&&window.removeEventListener("resize",this._checkForMobile);const l=V.d.Instances.indexOf(this);l>=0&&V.d.Instances.splice(l,1),V.d.Instances.length||(V.d.OnEnginesDisposedObservable.notifyObservers(this),V.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(D){throw(0,j.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(D,l){for(let G=0;G<V.d.Instances.length;G++){const N=V.d.Instances[G];for(let G=0;G<N.scenes.length;G++)N.scenes[G].markAllMaterialsAsDirty(D,l)}}}x._RenderPassIdCounter=0,x._RescalePostProcessFactory=null,x.CollisionsEpsilon=.001,x.QueueNewFrame=h},11571:(D,l,G)=>{G.d(l,{d:()=>N});var V=G(11532);class N{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}N.Instances=[],N.OnEnginesDisposedObservable=new V.e,N._LastCreatedScene=null,N.UseFallbackTexture=!0,N.FallbackTexture=""},11637:(D,l,G)=>{G.d(l,{d:()=>V});class V{static SetMatrixPrecision(D){if(V.MatrixTrackPrecisionChange=!1,D&&!V.MatrixUse64Bits&&V.MatrixTrackedMatrices)for(let l=0;l<V.MatrixTrackedMatrices.length;++l){const D=V.MatrixTrackedMatrices[l],G=D.Nb;D.Nb=new Array(16);for(let l=0;l<16;++l)D.Nb[l]=G[l]}V.MatrixUse64Bits=D,V.MatrixCurrentType=V.MatrixUse64Bits?Array:Float32Array,V.MatrixTrackedMatrices=null}}V.MatrixUse64Bits=!1,V.MatrixTrackPrecisionChange=!0,V.MatrixCurrentType=Float32Array,V.MatrixTrackedMatrices=[]},11657:(D,l,G)=>{G.d(l,{c:()=>b});var V=G(11546);const N=new Map;function M(D,l){(function(D){return N.delete(D)})(D)&&V.d.Warn(`Extension with the name '${D}' already exists`),N.set(D,l)}function b(D,l){"image/ktx"!==l&&"image/ktx2"!==l||(D=".ktx"),N.has(D)||(D.endsWith(".ies")&&M(".ies",(async()=>await G.e(15).then(G.bind(G,14111)).then((D=>new D._IESTextureLoader)))),D.endsWith(".dds")&&M(".dds",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(19),G.e(18),G.e(28)]).then(G.bind(G,14117)).then((D=>new D._DDSTextureLoader)))),D.endsWith(".basis")&&M(".basis",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(47)]).then(G.bind(G,14130)).then((D=>new D._BasisTextureLoader)))),D.endsWith(".env")&&M(".env",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(19),G.e(18),G.e(23),G.e(21),G.e(45),G.e(48)]).then(G.bind(G,14139)).then((D=>new D._ENVTextureLoader)))),D.endsWith(".hdr")&&M(".hdr",(async()=>await Promise.all([G.e(14),G.e(49)]).then(G.bind(G,14142)).then((D=>new D._HDRTextureLoader)))),(D.endsWith(".ktx")||D.endsWith(".ktx2"))&&(M(".ktx",(async()=>await G.e(30).then(G.bind(G,14144)).then((D=>new D._KTXTextureLoader)))),M(".ktx2",(async()=>await G.e(30).then(G.bind(G,14144)).then((D=>new D._KTXTextureLoader))))),D.endsWith(".tga")&&M(".tga",(async()=>await G.e(50).then(G.bind(G,14152)).then((D=>new D._TGATextureLoader)))),D.endsWith(".exr")&&M(".exr",(async()=>await G.e(16).then(G.bind(G,14154)).then((D=>new D._ExrTextureLoader)))));const V=N.get(D);return V?Promise.resolve(V(l)):null}},11644:(D,l,G)=>{G.d(l,{b:()=>b});var V,N=G(11532),M=G(11649);!function(D){D[D.Unknown=0]="Unknown",D[D.Url=1]="Url",D[D.Temp=2]="Temp",D[D.Raw=3]="Raw",D[D.Dynamic=4]="Dynamic",D[D.RenderTarget=5]="RenderTarget",D[D.MultiRenderTarget=6]="MultiRenderTarget",D[D.Cube=7]="Cube",D[D.CubeRaw=8]="CubeRaw",D[D.CubePrefiltered=9]="CubePrefiltered",D[D.Raw3D=10]="Raw3D",D[D.Raw2DArray=11]="Raw2DArray",D[D.DepthStencil=12]="DepthStencil",D[D.CubeRawRGBD=13]="CubeRawRGBD",D[D.Depth=14]="Depth"}(V||(V={}));class b extends M.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(D){this.generateMipMaps=D}get uniqueId(){return this._uniqueId}_setUniqueId(D){this._uniqueId=D}getEngine(){return this._engine}get source(){return this._source}constructor(D,l){let G=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new N.e,this.onErrorObservable=new N.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=D,this._source=l,this._uniqueId=b._Counter++,G||(this._hardwareTexture=D._createHardwareTexture())}incrementReferences(){this._references++}updateSize(D,l){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,D,l,G),this.width=D,this.height=l,this.depth=G,this.baseWidth=D,this.baseHeight=l,this.baseDepth=G,this._size=D*l*G}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const D=this.onRebuildCallback(this),l=l=>{l._swapAndDie(this,!1),this.isReady=D.isReady};return void(D.isAsync?D.proxy.then(l):l(D.proxy))}let D;switch(this.source){case 2:case 12:case 14:break;case 1:return void(D=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(D=>{D._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:D=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),D._swapAndDie(this,!1),this.isReady=!0;break;case 10:D=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),D._swapAndDie(this,!1),this.isReady=!0;break;case 11:D=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),D._swapAndDie(this,!1),this.isReady=!0;break;case 4:D=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),D._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(D=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{D._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:D=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),D._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return D=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(D=>{D&&D._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(D._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(D){var l;let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(l=this._hardwareTexture)||void 0===l||l.setUsage(D._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),D._hardwareTexture=this._hardwareTexture,G&&(D._isRGBD=this._isRGBD),this._lodTextureHigh&&(D._lodTextureHigh&&D._lodTextureHigh.dispose(),D._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(D._lodTextureMid&&D._lodTextureMid.dispose(),D._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(D._lodTextureLow&&D._lodTextureLow.dispose(),D._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(D._irradianceTexture&&D._irradianceTexture.dispose(),D._irradianceTexture=this._irradianceTexture);const V=this._engine.getLoadedTexturesCache();let N=V.indexOf(this);-1!==N&&V.splice(N,1),N=V.indexOf(D),-1===N&&V.push(D)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}b._Counter=0},11649:(D,l,G)=>{G.d(l,{e:()=>V});class V{get wrapU(){return this._cachedWrapU}set wrapU(D){this._cachedWrapU=D}get wrapV(){return this._cachedWrapV}set wrapV(D){this._cachedWrapV=D}get wrapR(){return this._cachedWrapR}set wrapR(D){this._cachedWrapR=D}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(D){this._cachedAnisotropicFilteringLevel=D}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(D){this._comparisonFunction=D}get useMipMaps(){return this._useMipMaps}set useMipMaps(D){this._useMipMaps=D}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=D,this._cachedWrapV=l,this._cachedWrapR=G,this._cachedAnisotropicFilteringLevel=V,this.samplingMode=N,this._comparisonFunction=M,this}compareSampler(D){return this._cachedWrapU===D._cachedWrapU&&this._cachedWrapV===D._cachedWrapV&&this._cachedWrapR===D._cachedWrapR&&this._cachedAnisotropicFilteringLevel===D._cachedAnisotropicFilteringLevel&&this.samplingMode===D.samplingMode&&this._comparisonFunction===D._comparisonFunction&&this._useMipMaps===D._useMipMaps}}},11551:(D,l,G)=>{G.d(l,{e:()=>M});var V=G(11546);const N=(D,l,G)=>D?D.getClassName&&"Mesh"===D.getClassName()?null:!D.getClassName||"SubMesh"!==D.getClassName()&&"PhysicsBody"!==D.getClassName()?D.clone?D.clone():Array.isArray(D)?D.slice():G&&"object"===typeof D?{...D}:null:D.clone(l):null;class M{static DeepCopy(D,l,G,M){let b=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const X=function(D){const l=[];do{const G=Object.getOwnPropertyNames(D);for(const D of G)-1===l.indexOf(D)&&l.push(D)}while(D=Object.getPrototypeOf(D));return l}(D);for(const R of X){if("_"===R[0]&&(!M||-1===M.indexOf(R)))continue;if(R.endsWith("Observable"))continue;if(G&&-1!==G.indexOf(R))continue;const X=D[R],n=typeof X;if("function"!==n)try{if("object"===n)if(X instanceof Uint8Array)l[R]=Uint8Array.from(X);else if(X instanceof Array){if(l[R]=[],X.length>0)if("object"==typeof X[0])for(let D=0;D<X.length;D++){const G=N(X[D],l,b);-1===l[R].indexOf(G)&&l[R].push(G)}else l[R]=X.slice(0)}else l[R]=N(X,l,b);else l[R]=X}catch(t){V.d.Warn(t.message)}}}}},11580:(D,l,G)=>{G.d(l,{b:()=>V,d:()=>N,e:()=>M});class V extends Error{}V._setPrototypeOf=Object.setPrototypeOf||((D,l)=>(D.__proto__=l,D));const N={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class M extends V{constructor(D,l,G){super(D),this.errorCode=l,this.innerError=G,this.name="RuntimeError",V._setPrototypeOf(this,M.prototype)}}},11573:(D,l,G)=>{G.d(l,{b:()=>O,f:()=>x,h:()=>W,k:()=>y,o:()=>B,n:()=>d,p:()=>L,q:()=>u,u:()=>I,x:()=>r});var V=G(11565),N=G(11538),M=G(11532);class b{}b.FilesToLoad={};var X=G(11580),t=G(11587),R=G(11595),n=G(11571),g=G(11546),j=G(11609),e=G(11603),K=G(11613);const F=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class d extends X.e{constructor(D,l){super(D,X.d.LoadFileError),this.name="LoadFileError",X.b._setPrototypeOf(this,d.prototype),l instanceof V.d?this.request=l:this.file=l}}class H extends X.e{constructor(D,l){super(D,X.d.RequestFileError),this.request=l,this.name="RequestFileError",X.b._setPrototypeOf(this,H.prototype)}}class h extends X.e{constructor(D,l){super(D,X.d.ReadFileError),this.file=l,this.name="ReadFileError",X.b._setPrototypeOf(this,h.prototype)}}const x={DefaultRetryStrategy:class{static ExponentialBackoff(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(G,V,N)=>0!==V.status||N>=D||-1!==G.indexOf("file:")?-1:Math.pow(2,N)*l}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:D=>D,ScriptBaseUrl:"",ScriptPreprocessUrl:D=>D,CleanUrl:D=>D=D.replace(/#/gm,"%23")},r=(D,l)=>{if((!D||0!==D.indexOf("data:"))&&x.CorsBehavior)if("string"===typeof x.CorsBehavior||x.CorsBehavior instanceof String)l.crossOrigin=x.CorsBehavior;else{const G=x.CorsBehavior(D);G&&(l.crossOrigin=G)}},o={getRequiredSize:null},L=function(D,l,G,N){let M,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",R=arguments.length>5?arguments[5]:void 0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===g||void 0===g||!g._features.forceBitmapOverHTMLImageElement))return G("LoadImage is only supported in web or BabylonNative environments."),null;let j=!1;D instanceof ArrayBuffer||ArrayBuffer.isView(D)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(M=URL.createObjectURL(new Blob([D],{type:X})),j=!0):M=`data:${X};base64,`+(0,t.j)(D):D instanceof Blob?(M=URL.createObjectURL(D),j=!0):(M=x.CleanUrl(D),M=x.PreprocessUrl(M));const e=l=>{if(G){const V=M||D.toString();G(`Error while trying to load image: ${0===V.indexOf("http")||V.length<=128?V:V.slice(0,128)+"..."}`,l)}};if(null!==g&&void 0!==g&&g._features.forceBitmapOverHTMLImageElement)return B(M,(V=>{g.createImageBitmap(new Blob([V],{type:X}),{premultiplyAlpha:"none",...R}).then((D=>{l(D),j&&URL.revokeObjectURL(M)})).catch((l=>{G&&G("Error while trying to load image: "+D,l)}))}),void 0,N||void 0,!0,((D,l)=>{e(l)})),null;const K=new Image;if(o.getRequiredSize){const l=o.getRequiredSize(D);l.width&&(K.width=l.width),l.height&&(K.height=l.height)}r(M,K);const F=[],d=()=>{for(const D of F)D.target.removeEventListener(D.name,D.handler);F.length=0};F.push({target:K,name:"load",handler:()=>{d(),l(K),j&&K.src&&URL.revokeObjectURL(K.src)}}),F.push({target:K,name:"error",handler:D=>{d(),e(D),j&&K.src&&URL.revokeObjectURL(K.src)}}),F.push({target:document,name:"securitypolicyviolation",handler:D=>{if(D.blockedURI!==K.src||"Mb"===D.disposition)return;d();const l=new Error(`CSP violation of policy ${D.effectiveDirective} ${D.blockedURI}. Current policy is ${D.originalPolicy}`);n.d.UseFallbackTexture=!1,e(l),j&&K.src&&URL.revokeObjectURL(K.src),K.src=""}}),(()=>{for(const D of F)D.target.addEventListener(D.name,D.handler)})();const H="blob:"===M.substring(0,5),h="data:"===M.substring(0,5),L=()=>{H||h||!V.d.IsCustomRequestAvailable?K.src=M:B(M,((D,l,G)=>{const V=new Blob([D],{type:!X&&G?G:X}),N=URL.createObjectURL(V);j=!0,K.src=N}),void 0,N||void 0,!0,((D,l)=>{e(l)}))},u=()=>{N&&N.loadImage(M,K)};if(!H&&!h&&N&&N.enableTexturesOffline)N.open(u,L);else{if(-1!==M.indexOf("file:")){const D=decodeURIComponent(M.substring(5).toLowerCase());if(b.FilesToLoad[D]&&"undefined"!==typeof URL){try{let l;try{l=URL.createObjectURL(b.FilesToLoad[D])}catch(I){l=URL.createObjectURL(b.FilesToLoad[D])}K.src=l,j=!0}catch(W){K.src=""}return K}}L()}return K},u=(D,l,G,V,N)=>{const b=new FileReader,X={onCompleteObservable:new M.e,abort:()=>b.abort()};return b.onloadend=()=>X.onCompleteObservable.notifyObservers(X),N&&(b.onerror=()=>{N(new h(`Unable to read ${D.name}`,D))}),b.onload=D=>{l(D.target.result)},G&&(b.onprogress=G),V?b.readAsArrayBuffer(D):b.readAsText(D),X},B=(D,l,G,V,N,t,R)=>{if(D.name)return u(D,l,G,N,t?D=>{t(void 0,D)}:void 0);const n=D;if(-1!==n.indexOf("file:")){let D=decodeURIComponent(n.substring(5).toLowerCase());0===D.indexOf("./")&&(D=D.substring(2));const V=b.FilesToLoad[D];if(V)return u(V,l,G,N,t?D=>t(void 0,new d(D.message,D.file)):void 0)}const{match:e,type:K}=S(n);if(e){const D={onCompleteObservable:new M.e,abort:()=>()=>{}};try{const D=N?O(n):s(n);l(D,void 0,K)}catch(X){t?t(void 0,X):g.d.Error(X.message||"Failed to parse the Data URL")}return j.d.SetImmediate((()=>{D.onCompleteObservable.notifyObservers(D)})),D}return I(n,((D,G)=>{l(D,null===G||void 0===G?void 0:G.responseURL,null===G||void 0===G?void 0:G.getResponseHeader("content-type"))}),G,V,N,t?D=>{t(D.request,new d(D.message,D.request))}:void 0,R)},I=(D,l,G,b,X,t,R)=>{D=x.CleanUrl(D),D=x.PreprocessUrl(D);const n=x.BaseUrl+D;let j=!1;const e={onCompleteObservable:new M.e,abort:()=>j=!0},K=()=>{let D,M=new V.d,b=null;const K=()=>{M&&(G&&M.removeEventListener("progress",G),D&&M.removeEventListener("readystatechange",D),M.removeEventListener("loadend",F))};let F=()=>{K(),e.onCompleteObservable.notifyObservers(e),e.onCompleteObservable.clear(),G=void 0,D=null,F=null,t=void 0,R=void 0,l=void 0};e.abort=()=>{j=!0,F&&F(),M&&M.readyState!==(XMLHttpRequest.DONE||4)&&M.abort(),null!==b&&(clearTimeout(b),b=null),M=null};const d=D=>{const l=D.message||"Unknown error";t&&M?t(new H(l,M)):g.d.Error(l)},h=g=>{if(M){if(M.open("GET",n),R)try{R(M)}catch(e){return void d(e)}X&&(M.responseType="arraybuffer"),G&&M.addEventListener("progress",G),F&&M.addEventListener("loadend",F),D=()=>{if(!j&&M&&M.readyState===(XMLHttpRequest.DONE||4)){if(D&&M.removeEventListener("readystatechange",D),M.status>=200&&M.status<300||0===M.status&&(!(0,N.k)()||i())){const D=X?M.response:M.responseText;if(null!==D){try{l&&l(D,M)}catch(e){d(e)}return}}const G=x.DefaultRetryStrategy;if(G){const D=G(n,M,g);if(-1!==D)return K(),M=new V.d,void(b=setTimeout((()=>h(g+1)),D))}const R=new H("Error status: "+M.status+" "+M.statusText+" - Unable to load "+n,M);t&&t(R)}},M.addEventListener("readystatechange",D),M.send()}};h(0)};if(b&&b.enableSceneOffline){const V=D=>{D&&D.status>400?t&&t(D):K()},N=()=>{b&&b.loadFile(x.BaseUrl+D,(D=>{!j&&l&&l(D),e.onCompleteObservable.notifyObservers(e)}),G?D=>{!j&&G&&G(D)}:void 0,V,X)};b.open(N,V)}else K();return e},W=D=>{const{match:l,type:G}=S(D);if(l)return G||void 0;const V=D.lastIndexOf(".");switch(D.substring(V+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"bb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},i=()=>"undefined"!==typeof location&&"file:"===location.protocol,y=D=>F.test(D),S=D=>{const l=F.exec(D);if(null===l||0===l.length)return{match:!1,type:""};return{match:!0,type:l[0].replace("data:","").replace("base64,","")}};function O(D){return(0,t.e)(D.split(",")[1])}const s=D=>(0,t.g)(D.split(",")[1]);let U;K.e._FileToolsLoadImage=L,e.c.loadFile=B,R.m.loadFile=B;((D,l,G,V,N,M,b,X,t,R)=>{U={DecodeBase64UrlToBinary:D,DecodeBase64UrlToString:l,DefaultRetryStrategy:G.DefaultRetryStrategy,BaseUrl:G.BaseUrl,CorsBehavior:G.CorsBehavior,PreprocessUrl:G.PreprocessUrl,IsBase64DataUrl:V,IsFileURL:N,LoadFile:M,LoadImage:b,ReadFile:X,RequestFile:t,SetCorsBehavior:R},Object.defineProperty(U,"DefaultRetryStrategy",{get:function(){return G.DefaultRetryStrategy},set:function(D){G.DefaultRetryStrategy=D}}),Object.defineProperty(U,"BaseUrl",{get:function(){return G.BaseUrl},set:function(D){G.BaseUrl=D}}),Object.defineProperty(U,"PreprocessUrl",{get:function(){return G.PreprocessUrl},set:function(D){G.PreprocessUrl=D}}),Object.defineProperty(U,"CorsBehavior",{get:function(){return G.CorsBehavior},set:function(D){G.CorsBehavior=D}})})(O,s,x,y,i,B,L,u,I,r)},11672:(D,l,G)=>{function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(D=>{const l=16*Math.random()|0;return("x"===D?l:3&l|8).toString(16)}))}G.d(l,{c:()=>V})},11661:(D,l,G)=>{G.d(l,{e:()=>M});var V=G(11546),N=G(11667);class M{static Instantiate(D){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[D])return this.RegisteredExternalClasses[D];const l=(0,N.b)(D);if(l)return l;V.d.Warn(D+" not found, you may have missed an import.");const G=D.split(".");let M=window||this;for(let V=0,N=G.length;V<N;V++)M=M[G[V]];return"function"!==typeof M?null:M}}M.RegisteredExternalClasses={}},11554:(D,l,G)=>{G.d(l,{c:()=>N});var V=G(11538);class N{static get Now(){return(0,V.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11587:(D,l,G)=>{G.d(l,{e:()=>b,g:()=>M,i:()=>V,j:()=>N});const V=D=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(D);let l="";for(let G=0;G<D.byteLength;G++)l+=String.fromCharCode(D[G]);return l},N=D=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let G,V,N,M,b,X,t,R="",n=0;const g=ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength):new Uint8Array(D);for(;n<g.length;)G=g[n++],V=n<g.length?g[n++]:Number.NaN,N=n<g.length?g[n++]:Number.NaN,M=G>>2,b=(3&G)<<4|V>>4,X=(15&V)<<2|N>>6,t=63&N,isNaN(V)?X=t=64:isNaN(N)&&(t=64),R+=l.charAt(M)+l.charAt(b)+l.charAt(X)+l.charAt(t);return R},M=D=>atob(D),b=D=>{const l=M(D),G=l.length,V=new Uint8Array(new ArrayBuffer(G));for(let N=0;N<G;N++)V[N]=l.charCodeAt(N);return V.buffer}},11675:(D,l,G)=>{function V(D){let l=1;do{l*=2}while(l<D);return l===D}function N(D,l,G){return D*(1-G)+l*G}function M(D){const l=b(D),G=X(D);return l-D>D-G?G:l}function b(D){return D--,D|=D>>1,D|=D>>2,D|=D>>4,D|=D>>8,D|=D>>16,++D}function X(D){return D|=D>>1,D|=D>>2,D|=D>>4,D|=D>>8,(D|=D>>16)-(D>>1)}function t(D,l){let G;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:G=X(D);break;case 2:G=M(D);break;default:G=b(D)}return Math.min(G,l)}G.d(l,{b:()=>X,e:()=>t,f:()=>V,g:()=>N,h:()=>M})},11530:(D,l,G)=>{G.r(l),G.d(l,{AsyncLoop:()=>h,Tools:()=>d,className:()=>H});var V=G(11532),N=G(11538),M=G(11546),b=G(11551),X=G(11554),t=G(11563),R=G(11565),n=G(11571),g=G(11573),j=G(11609),e=G(11661),K=G(11672),F=G(11675);class d{static get BaseUrl(){return g.f.BaseUrl}static set BaseUrl(D){g.f.BaseUrl=D}static get CleanUrl(){return g.f.CleanUrl}static set CleanUrl(D){g.f.CleanUrl=D}static IsAbsoluteUrl(D){return 0===D.indexOf("//")||-1!==D.indexOf("://")&&(-1!==D.indexOf(".")&&(-1!==D.indexOf("/")&&(!(D.indexOf(":")>D.indexOf("/"))&&(D.indexOf("://")<D.indexOf(".")||(0===D.indexOf("data:")||0===D.indexOf("blob:"))))))}static set ScriptBaseUrl(D){g.f.ScriptBaseUrl=D}static get ScriptBaseUrl(){return g.f.ScriptBaseUrl}static set CDNBaseUrl(D){d.ScriptBaseUrl=D,d.AssetBaseUrl=D}static set ScriptPreprocessUrl(D){g.f.ScriptPreprocessUrl=D}static get ScriptPreprocessUrl(){return g.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return g.f.DefaultRetryStrategy}static set DefaultRetryStrategy(D){g.f.DefaultRetryStrategy=D}static get CorsBehavior(){return g.f.CorsBehavior}static set CorsBehavior(D){g.f.CorsBehavior=D}static get UseFallbackTexture(){return n.d.UseFallbackTexture}static set UseFallbackTexture(D){n.d.UseFallbackTexture=D}static get RegisteredExternalClasses(){return e.e.RegisteredExternalClasses}static set RegisteredExternalClasses(D){e.e.RegisteredExternalClasses=D}static get fallbackTexture(){return n.d.FallbackTexture}static set fallbackTexture(D){n.d.FallbackTexture=D}static FetchToRef(D,l,G,V,N,M){const b=4*((Math.abs(D)*G%G|0)+(Math.abs(l)*V%V|0)*G);M.r=N[b]/255,M.g=N[b+1]/255,M.b=N[b+2]/255,M.a=N[b+3]/255}static Mix(D,l,G){return 0}static Instantiate(D){return e.e.Instantiate(D)}static SetImmediate(D){j.d.SetImmediate(D)}static IsExponentOfTwo(D){return!0}static FloatRound(D){return Math.fround(D)}static GetFilename(D){const l=D.lastIndexOf("/");return l<0?D:D.substring(l+1)}static GetFolderPath(D){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const G=D.lastIndexOf("/");return G<0?l?D:"":D.substring(0,G+1)}static ToDegrees(D){return 180*D/Math.PI}static ToRadians(D){return D*Math.PI/180}static SmoothAngleChange(D,l){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const V=this.ToRadians(D),N=this.ToRadians(l);return this.ToDegrees(Math.atan2((1-G)*Math.sin(N)+G*Math.sin(V),(1-G)*Math.cos(N)+G*Math.cos(V)))}static MakeArray(D,l){return!0===l||void 0!==D&&null!=D?Array.isArray(D)?D:[D]:null}static GetPointerPrefix(D){return(0,N.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(D,l){(0,g.x)(D,l)}static SetReferrerPolicyBehavior(D,l){l.referrerPolicy=D}static get PreprocessUrl(){return g.f.PreprocessUrl}static set PreprocessUrl(D){g.f.PreprocessUrl=D}static LoadImage(D,l,G,V,N,M){return(0,g.p)(D,l,G,V,N,M)}static LoadFile(D,l,G,V,N,M){return(0,g.o)(D,l,G,V,N,M)}static async LoadFileAsync(D){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((G,V)=>{(0,g.o)(D,(D=>{G(D)}),void 0,void 0,l,((D,l)=>{V(l)}))}))}static GetAssetUrl(D){if(!D)return"";if(d.AssetBaseUrl&&D.startsWith(d._DefaultAssetsUrl)){const l="/"===d.AssetBaseUrl[d.AssetBaseUrl.length-1]?d.AssetBaseUrl.substring(0,d.AssetBaseUrl.length-1):d.AssetBaseUrl;return D.replace(d._DefaultAssetsUrl,l)}return D}static GetBabylonScriptURL(D,l){if(!D)return"";if(d.ScriptBaseUrl&&D.startsWith(d._DefaultCdnUrl)){const l="/"===d.ScriptBaseUrl[d.ScriptBaseUrl.length-1]?d.ScriptBaseUrl.substring(0,d.ScriptBaseUrl.length-1):d.ScriptBaseUrl;D=D.replace(d._DefaultCdnUrl,l)}return D=d.ScriptPreprocessUrl(D),l&&(D=d.GetAbsoluteUrl(D)),D}static LoadBabylonScript(D,l,G,V){D=d.GetBabylonScriptURL(D),d.LoadScript(D,l,G)}static async LoadBabylonScriptAsync(D){return D=d.GetBabylonScriptURL(D),await d.LoadScriptAsync(D)}static LoadScript(D,l,G,V){let M=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(D),l&&l()}catch(t){null===G||void 0===G||G(`Unable to load script '${D}' in worker`,t)}return}if(!(0,N.k)())return void(null===G||void 0===G||G(`Cannot load script '${D}' outside of a window or a worker`));const b=document.getElementsByTagName("head")[0],X=document.createElement("script");M?(X.setAttribute("type","module"),X.innerText=D):(X.setAttribute("type","text/javascript"),X.setAttribute("src",D)),V&&(X.id=V),X.onload=()=>{l&&l()},X.onerror=l=>{G&&G(`Unable to load script '${D}'`,l)},b.appendChild(X)}static async LoadScriptAsync(D,l){return await new Promise(((G,V)=>{this.LoadScript(D,(()=>{G()}),((D,l)=>{V(l||new Error(D))}),l)}))}static ReadFileAsDataURL(D,l,G){const N=new FileReader,M={onCompleteObservable:new V.e,abort:()=>N.abort()};return N.onloadend=()=>{M.onCompleteObservable.notifyObservers(M)},N.onload=D=>{l(D.target.result)},N.onprogress=G,N.readAsDataURL(D),M}static ReadFile(D,l,G,V,N){return(0,g.q)(D,l,G,V,N)}static FileAsURL(D){const l=new Blob([D]);return window.URL.createObjectURL(l)}static Format(D){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return D.toFixed(l)}static DeepCopy(D,l,G,V){b.e.DeepCopy(D,l,G,V)}static IsEmpty(D){for(const l in D)if(Object.prototype.hasOwnProperty.call(D,l))return!1;return!0}static RegisterTopRootEvents(D,l){for(let V=0;V<l.length;V++){const N=l[V];D.addEventListener(N.name,N.handler,!1);try{window.parent&&window.parent.addEventListener(N.name,N.handler,!1)}catch(G){}}}static UnregisterTopRootEvents(D,l){for(let V=0;V<l.length;V++){const N=l[V];D.removeEventListener(N.name,N.handler);try{D.parent&&D.parent.removeEventListener(N.name,N.handler)}catch(G){}}}static async DumpFramebuffer(D,l,G,V){throw(0,t.d)("DumpTools")}static DumpData(D,l,G,V){throw(0,t.d)("DumpTools")}static async DumpDataAsync(D,l,G){throw(0,t.d)("DumpTools")}static _IsOffScreenCanvas(D){return void 0!==D.convertToBlob}static ToBlob(D,l){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0;d._IsOffScreenCanvas(D)||D.toBlob||(D.toBlob=function(D,l,G){setTimeout((()=>{const V=atob(this.toDataURL(l,G).split(",")[1]),N=V.length,M=new Uint8Array(N);for(let D=0;D<N;D++)M[D]=V.charCodeAt(D);D(new Blob([M]))}))}),d._IsOffScreenCanvas(D)?D.convertToBlob({type:G,quality:V}).then((D=>l(D))):D.toBlob((function(D){l(D)}),G,V)}static DownloadBlob(D,l){if("download"in document.createElement("a")){if(!l){const D=new Date;l="screenshot_"+((D.getFullYear()+"-"+(D.getMonth()+1)).slice(2)+"-"+D.getDate()+"_"+D.getHours()+"-"+("0"+D.getMinutes()).slice(-2))+".png"}d.Download(D,l)}else if(D&&"undefined"!==typeof URL){const l=URL.createObjectURL(D),G=window.open("");if(!G)return;const V=G.document.createElement("img");V.onload=function(){URL.revokeObjectURL(l)},V.src=l,G.document.body.appendChild(V)}}static EncodeScreenshotCanvasData(D,l){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0,N=arguments.length>4?arguments[4]:void 0;if("string"!==typeof V&&l){if(l){if(d._IsOffScreenCanvas(D))return void D.convertToBlob({type:G,quality:N}).then((D=>{const G=new FileReader;G.readAsDataURL(D),G.onloadend=()=>{const D=G.result;l(D)}}));const V=D.toDataURL(G,N);l(V)}}else this.ToBlob(D,(function(D){D&&d.DownloadBlob(D,V),l&&l("")}),G,N)}static Download(D,l){if("undefined"===typeof URL)return;const G=window.URL.createObjectURL(D),V=document.createElement("a");document.body.appendChild(V),V.style.display="none",V.href=G,V.download=l,V.addEventListener("click",(()=>{V.parentElement&&V.parentElement.removeChild(V)})),V.click(),window.URL.revokeObjectURL(G)}static BackCompatCameraNoPreventDefault(D){return"boolean"===typeof D[0]?D[0]:"boolean"===typeof D[1]&&D[1]}static CreateScreenshot(D,l,G,V){throw(0,t.d)("ScreenshotTools")}static async CreateScreenshotAsync(D,l,G){throw(0,t.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(D,l,G,V){throw(0,t.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(D,l,G){throw(0,t.d)("ScreenshotTools")}static RandomId(){return(0,K.c)()}static IsBase64(D){return(0,g.k)(D)}static DecodeBase64(D){return(0,g.b)(D)}static get errorsCount(){return M.d.errorsCount}static Log(D){M.d.Log(D)}static Warn(D){M.d.Warn(D)}static Error(D){M.d.Error(D)}static get LogCache(){return M.d.LogCache}static ClearLogCache(){M.d.ClearLogCache()}static set LogLevels(D){M.d.LogLevels=D}static set PerformanceLogLevel(D){return(D&d.PerformanceUserMarkLogLevel)===d.PerformanceUserMarkLogLevel?(d.StartPerformanceCounter=d._StartUserMark,void(d.EndPerformanceCounter=d._EndUserMark)):(D&d.PerformanceConsoleLogLevel)===d.PerformanceConsoleLogLevel?(d.StartPerformanceCounter=d._StartPerformanceConsole,void(d.EndPerformanceCounter=d._EndPerformanceConsole)):(d.StartPerformanceCounter=d._StartPerformanceCounterDisabled,void(d.EndPerformanceCounter=d._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(D,l){}static _EndPerformanceCounterDisabled(D,l){}static _StartUserMark(D){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d._Performance){if(!(0,N.k)())return;d._Performance=window.performance}l&&d._Performance.mark&&d._Performance.mark(D+"-Begin")}static _EndUserMark(D){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&d._Performance.mark&&(d._Performance.mark(D+"-End"),d._Performance.measure(D,D+"-Begin",D+"-End"))}static _StartPerformanceConsole(D){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l&&(d._StartUserMark(D,l),console.time&&console.time(D))}static _EndPerformanceConsole(D){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l&&(d._EndUserMark(D,l),console.timeEnd(D))}static get Now(){return X.c.Now}static GetClassName(D){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],G=null;if(!l&&D.getClassName)G=D.getClassName();else{if(D instanceof Object){G=(l?D:Object.getPrototypeOf(D)).constructor.__bjsclassName__}G||(G=typeof D)}return G}static First(D,l){for(const G of D)if(l(G))return G;return null}static getFullClassName(D){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],G=null,V=null;if(!l&&D.getClassName)G=D.getClassName();else{if(D instanceof Object){const N=l?D:Object.getPrototypeOf(D);G=N.constructor.__bjsclassName__,V=N.constructor.__bjsmoduleName__}G||(G=typeof D)}return G?(null!=V?V+".":"")+G:null}static async DelayAsync(D){await new Promise((l=>{setTimeout((()=>{l()}),D)}))}static IsSafari(){return!!(0,N.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function H(D,l){return G=>{G.__bjsclassName__=D,G.__bjsmoduleName__=null!=l?l:null}}d.AssetBaseUrl="",d.UseCustomRequestHeaders=!1,d.CustomRequestHeaders=R.d.CustomRequestHeaders,d.GetDOMTextContent=N.c,d._DefaultCdnUrl="https://cdn.babylonjs.com",d._DefaultAssetsUrl="https://assets.babylonjs.com/core",d.GetAbsoluteUrl="object"===typeof document?D=>{const l=document.createElement("a");return l.href=D,l.href}:"function"===typeof URL&&"object"===typeof location?D=>new URL(D,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},d.NoneLogLevel=M.d.NoneLogLevel,d.MessageLogLevel=M.d.MessageLogLevel,d.WarningLogLevel=M.d.WarningLogLevel,d.ErrorLogLevel=M.d.ErrorLogLevel,d.AllLogLevel=M.d.AllLogLevel,d.IsWindowObjectExist=N.k,d.PerformanceNoneLogLevel=0,d.PerformanceUserMarkLogLevel=1,d.PerformanceConsoleLogLevel=2,d.StartPerformanceCounter=d._StartPerformanceCounterDisabled,d.EndPerformanceCounter=d._EndPerformanceCounterDisabled;class h{constructor(D,l,G){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=D,this.index=V-1,this._done=!1,this._fn=l,this._successCallback=G}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(D,l,G){const V=new h(D,l,G,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return V.executeNext(),V}static SyncAsyncForLoop(D,l,G,V,N){let M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return h.Run(Math.ceil(D/l),(V=>{N&&N()?V.breakLoop():setTimeout((()=>{for(let M=0;M<l;++M){const b=V.index*l+M;if(b>=D)break;if(G(b),N&&N()){V.breakLoop();break}}V.executeNext()}),M)}),V)}}d.Mix=F.g,d.IsExponentOfTwo=F.f,n.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11667:(D,l,G)=>{G.d(l,{b:()=>M,c:()=>N});const V={};function N(D,l){V[D]=l}function M(D){return V[D]}},11565:(D,l,G)=>{G.d(l,{d:()=>V});class V{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(V.CustomRequestHeaders).length>0||V.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const D in V.CustomRequestHeaders){const l=V.CustomRequestHeaders[D];l&&this._xhr.setRequestHeader(D,l)}}_shouldSkipRequestModifications(D){return V.SkipRequestModificationForBabylonCDN&&(D.includes("preview.babylonjs.com")||D.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(D){this._xhr.onprogress=D}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(D){this._xhr.responseType=D}get timeout(){return this._xhr.timeout}set timeout(D){this._xhr.timeout=D}addEventListener(D,l,G){this._xhr.addEventListener(D,l,G)}removeEventListener(D,l,G){this._xhr.removeEventListener(D,l,G)}abort(){this._xhr.abort()}send(D){V.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(D)}open(D,l){for(const G of V.CustomRequestModifiers){if(this._shouldSkipRequestModifications(l))return;l=G(this._xhr,l)||l}l=(l=l.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=l,this._xhr.open(D,l,!0)}setRequestHeader(D,l){this._xhr.setRequestHeader(D,l)}getResponseHeader(D){return this._xhr.getResponseHeader(D)}}V.CustomRequestHeaders={},V.CustomRequestModifiers=new Array,V.SkipRequestModificationForBabylonCDN=!0}}]);