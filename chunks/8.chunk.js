"use strict";(self["269hv5nclphh"]=self["269hv5nclphh"]||[]).push([[8],{12296:(E,H,d)=>{d.d(H,{c:()=>e});var n=d(12268),Z=d(12237),I=d(12298),g=d(12321),l=d(12247);class r{constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,E&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(E){this._zOffset!==E&&(this._zOffset=E,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(E){this._zOffsetUnits!==E&&(this._zOffsetUnits=E,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(E){this._cullFace!==E&&(this._cullFace=E,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(E){this._cull!==E&&(this._cull=E,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(E){this._depthFunc!==E&&(this._depthFunc=E,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(E){this._depthMask!==E&&(this._depthMask=E,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(E){this._depthTest!==E&&(this._depthTest=E,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(E){this._frontFace!==E&&(this._frontFace=E,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(E){this.isDirty&&(this._isCullDirty&&(this.cull?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(E.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(E.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(E.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(E.enable(E.POLYGON_OFFSET_FILL),E.polygonOffset(this.zOffset,this.zOffsetUnits)):E.disable(E.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(E.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class t{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(E){this._func!==E&&(this._func=E,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(E){this._funcRef!==E&&(this._funcRef=E,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(E){this._funcMask!==E&&(this._funcMask=E,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(E){this._opStencilFail!==E&&(this._opStencilFail=E,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(E){this._opDepthFail!==E&&(this._opDepthFail=E,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(E){this._opStencilDepthPass!==E&&(this._opStencilDepthPass=E,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(E){this._mask!==E&&(this._mask=E,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(E){this._enabled!==E&&(this._enabled=E,this._isStencilTestDirty=!0)}constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,E&&this.reset()}reset(){var E;this.stencilMaterial=void 0,null===(E=this.stencilGlobal)||void 0===E||E.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(E){var H;if(!E)return;const d=!this.useStencilGlobalOnly&&!(null===(H=this.stencilMaterial)||void 0===H||!H.enabled);this.enabled=d?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=d?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=d?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=d?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=d?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=d?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=d?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=d?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?E.enable(E.STENCIL_TEST):E.disable(E.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(E.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(E.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(E.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class S{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=S.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=S.KEEP,this.opDepthFail=S.KEEP,this.opStencilDepthPass=S.REPLACE}get stencilFunc(){return this.func}set stencilFunc(E){this.func=E}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(E){this.funcRef=E}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(E){this.funcMask=E}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(E){this.opStencilFail=E}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(E){this.opDepthFail=E}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(E){this.opStencilDepthPass=E}get stencilMask(){return this.mask}set stencilMask(E){this.mask=E}get stencilTest(){return this.enabled}set stencilTest(E){this.enabled=E}}S.ALWAYS=519,S.KEEP=7680,S.REPLACE=7681;class M{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(E){this._alphaBlend!==E&&(this._alphaBlend=E,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(E,H,d,n){this._blendConstants[0]===E&&this._blendConstants[1]===H&&this._blendConstants[2]===d&&this._blendConstants[3]===n||(this._blendConstants[0]=E,this._blendConstants[1]=H,this._blendConstants[2]=d,this._blendConstants[3]=n,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(E,H,d,n){this._blendFunctionParameters[0]===E&&this._blendFunctionParameters[1]===H&&this._blendFunctionParameters[2]===d&&this._blendFunctionParameters[3]===n||(this._blendFunctionParameters[0]=E,this._blendFunctionParameters[1]=H,this._blendFunctionParameters[2]=d,this._blendFunctionParameters[3]=n,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(E,H){this._blendEquationParameters[0]===E&&this._blendEquationParameters[1]===H||(this._blendEquationParameters[0]=E,this._blendEquationParameters[1]=H,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(E){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?E.enable(E.BLEND):E.disable(E.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(E.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(E.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(E.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var V=d(12256),C=d(12323),w=d(12234),R=d(12230),Q=d(12283),L=d(12331);function D(E,H){if((0,w.i)()){const{requestAnimationFrame:d}=H||window;if("function"===typeof d)return d(E)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(E);return setTimeout(E,16)}class e{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(E){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(E){E!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=E,this._depthCullingState.depthFunc=E?518:515)}setColorWrite(E){E!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=E)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(E){if(E)return this.isNDCHalfZRange?E.IS_NDC_HALF_ZRANGE="":delete E.IS_NDC_HALF_ZRANGE,this.o?E.USE_REVERSE_DEPTHBUFFER="":delete E.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?E.USE_EXACT_SRGB_CONVERSIONS="":delete E.USE_EXACT_SRGB_CONVERSIONS);{let E="";return this.isNDCHalfZRange&&(E+="#define IS_NDC_HALF_ZRANGE"),this.o&&(E&&(E+="\n"),E+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(E&&(E+="\n"),E+="#define USE_EXACT_SRGB_CONVERSIONS"),E}}_rebuildInternalTextures(){const E=this._internalTexturesCache.slice();for(const H of E)H._rebuild()}_rebuildRenderTargetWrappers(){const E=this._renderTargetWrapperCache.slice();for(const H of E)H._rebuild()}_rebuildEffects(){for(const E in this._compiledEffects){const H=this._compiledEffects[E];H._pipelineContext=null,H._prepareEffect()}I.Effect.ResetCache()}_rebuildGraphicsResources(){var E;this.wipeCaches(!0),this._rebuildEffects(),null===(E=this._rebuildComputeEffects)||void 0===E||E.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){Z.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(E){setTimeout((()=>{this._clearEmptyResources();const H=this._depthCullingState.depthTest,d=this._depthCullingState.depthFunc,n=this._depthCullingState.depthMask,Z=this._stencilState.stencilTest;E(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=H,this._depthCullingState.depthFunc=d,this._depthCullingState.depthMask=n,this._stencilState.stencilTest=Z,this._flagContextRestored()}),0)}get M(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(E){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(E){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const E=new Uint8Array(4),H=[E,E,E,E,E,E];this._emptyCubeTexture=this.createRawCubeTexture(H,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(E){if(!E)return this._activeRenderLoops.length=0,void this._cancelFrame();const H=this._activeRenderLoops.indexOf(E);H>=0&&(this._activeRenderLoops.splice(H,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const E=this._frameHandler;if(this._frameHandler=0,(0,w.i)()){const{cancelAnimationFrame:H}=this.getHostWindow()||window;if("function"===typeof H)return H(E)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(E);return clearTimeout(E)}}Vd(){this.onBeginFrameObservable.notifyObservers(this)}Cd(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(E){this._maxFPS=E,void 0!==E&&(this._minFrameTime=E<=0?Number.MAX_VALUE:1e3/E)}_isOverFrameTime(E){if(!E||void 0===this._maxFPS)return!1;const H=E-this._lastFrameTime;return this._lastFrameTime=E,this._renderAccumulator+=H,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(E){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(E)){let E=!0;(this.M||!this.renderEvenInBackground&&this._windowIsBackground)&&(E=!1),E&&(this.Vd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Cd())}}_renderLoop(E){this._processFrame(E),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let E=0;E<this._activeRenderLoops.length;E++){(0,this._activeRenderLoops[E])()}}_renderViews(){return!1}_queueNewFrame(E,H){return D(E,H)}runRenderLoop(E){-1===this._activeRenderLoops.indexOf(E)&&(this._activeRenderLoops.push(E),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(E){this._depthCullingState.depthTest=E}setZOffset(E){this._depthCullingState.zOffset=this.o?-E:E}getZOffset(){const E=this._depthCullingState.zOffset;return this.o?-E:E}setZOffsetUnits(E){this._depthCullingState.zOffsetUnits=this.o?-E:E}getZOffsetUnits(){const E=this._depthCullingState.zOffsetUnits;return this.o?-E:E}getHostWindow(){return(0,w.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(E){this._compatibilityMode=!0}_rebuildTextures(){for(const E of this.scenes)E._rebuildTextures();for(const E of this._virtualScenes)E._rebuildTextures()}_releaseRenderTargetWrapper(E){const H=this._renderTargetWrapperCache.indexOf(E);-1!==H&&this._renderTargetWrapperCache.splice(H,1)}get currentViewport(){return this._cachedViewport}setViewport(E,H,d){const n=H||this.getRenderWidth(),Z=d||this.getRenderHeight(),I=E.x||0,g=E.y||0;this._cachedViewport=E,this._viewport(I*n,g*Z,n*E.width,Z*E.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(E){return new Path2D(E)}get description(){let E=this.name+this.version;return this._caps.parallelShaderCompile&&(E+=" - Parallel shader compilation"),E}_createTextureBase(E,H,d,I){let g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,t=arguments.length>7?arguments[7]:void 0,S=arguments.length>8?arguments[8]:void 0,M=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,V=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,w=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,R=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,Q=arguments.length>13?arguments[13]:void 0,D=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const i="data:"===(E=E||"").substring(0,5),p="blob:"===E.substring(0,5),f=i&&-1!==E.indexOf(";base64,"),P=V||new C.d(this,1);P!==V&&(P.label=E.substring(0,60));const j=E;!this._transformTextureUrl||f||V||M||(E=this._transformTextureUrl(E)),j!==E&&(P._originalUrl=j);const X=E.lastIndexOf(".");let W=R||(X>-1?E.substring(X).toLowerCase():"");W.indexOf("?")>-1&&(W=W.split("?")[0]);const U=(0,L.c)(W,Q);I&&I.addPendingData(P),P.url=E,P.generateMipMaps=!H,P.samplingMode=g,P.invertY=d,P._useSRGBBuffer=this._getUseSRGBBuffer(!!s,H),this._doNotHandleContextLost||(P._buffer=M);let Y=null;l&&!V&&(Y=P.onLoadedObservable.add(l)),V||this._internalTexturesCache.push(P);const c=(d,V)=>{I&&I.removePendingData(P),E===j?(Y&&P.onLoadedObservable.remove(Y),n.b.UseFallbackTexture&&E!==n.b.FallbackTexture&&this._createTextureBase(n.b.FallbackTexture,H,P.invertY,I,g,null,r,t,S,M,P),d=(d||"Unknown error")+(n.b.UseFallbackTexture?" - Fallback texture was used":""),P.onErrorObservable.notifyObservers({message:d,exception:V}),r&&r(d,V)):(Z.b.Warn(`Failed to load ${E}, falling back to ${j}`),this._createTextureBase(j,H,P.invertY,I,g,l,r,t,S,M,P,w,R,Q,D,s))};if(U){const H=async E=>{(await U).loadData(E,P,((E,H,d,n,Z,l)=>{l?c("TextureLoader failed to load data"):t(P,W,I,{width:E,height:H},P.invertY,!d,n,(()=>(Z(),!1)),g)}),D)};M?M instanceof ArrayBuffer?H(new Uint8Array(M)):ArrayBuffer.isView(M)?H(M):r&&r("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(E,(E=>{H(new Uint8Array(E))}),void 0,I?I.offlineProvider:void 0,!0,((E,H)=>{c("Unable to load "+(E&&E.responseURL,H))}))}else{const d=E=>{p&&!this._doNotHandleContextLost&&(P._buffer=E),t(P,W,I,E,P.invertY,H,!1,S,g)};!i||f?M&&("string"===typeof M.decoding||M.close)?d(M):e._FileToolsLoadImage(E||"",d,c,I?I.offlineProvider:null,Q,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof M||M instanceof ArrayBuffer||ArrayBuffer.isView(M)||M instanceof Blob?e._FileToolsLoadImage(M,d,c,I?I.offlineProvider:null,Q,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):M&&d(M)}return P}_rebuildBuffers(){for(const E of this._uniformBuffers)E._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,w.c)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const E in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,E)&&(this._boundTexturesCache[E]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(E){this._name=E}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(E){this._hardwareScalingLevel=E,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(E){this._doNotHandleContextLost=E}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(E,H,d){var Z,I;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new r,this._stencilStateComposer=new t,this._stencilState=new S,this._alphaState=new M,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new R.e,this.onCanvasFocusObservable=new R.e,this.onNewSceneAddedObservable=new R.e,this.onResizeObservable=new R.e,this.onCanvasPointerOutObservable=new R.e,this.onEffectErrorObservable=new R.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new R.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=E=>this._renderLoop(E),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new R.e,this.onAfterShaderCompilationObservable=new R.e,this.onBeginFrameObservable=new R.e,this.onEndFrameObservable=new R.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new R.e,this.onContextRestoredObservable=new R.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Qd=new R.e,this.onReleaseEffectsObservable=new R.e,n.b.Instances.push(this),this.startTime=l.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,g.b.SetMatrixPrecision(!!H.useHighPrecisionMatrix),(0,w.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=d??!1,H.antialias=E??H.antialias,H.deterministicLockstep=H.deterministicLockstep??!1,H.lockstepMaxSteps=H.lockstepMaxSteps??4,H.timeStep=H.timeStep??1/60,H.ed=H.ed??!0,this._audioContext=(null===(Z=H.audioEngineOptions)||void 0===Z?void 0:Z.audioContext)??null,this._audioDestination=(null===(I=H.audioEngineOptions)||void 0===I?void 0:I.audioDestination)??null,this.premultipliedAlpha=H.premultipliedAlpha??!0,this._doNotHandleContextLost=!!H.doNotHandleContextLost,this._isStencilEnable=!!H.ed,this.useExactSrgbConversions=H.useExactSrgbConversions??!1;const V=(0,w.i)()&&window.devicePixelRatio||1,C=H.limitDeviceRatio||V;d=d||H.adaptToDeviceRatio||!1,this._hardwareScalingLevel=d?1/Math.min(C,V):1,this._lastDevicePixelRatio=V,this._creationOptions=H}resize(){let E,H,d=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const E=(0,w.i)()&&window.devicePixelRatio||1,H=this._lastDevicePixelRatio/E;this._lastDevicePixelRatio=E,this._hardwareScalingLevel*=H}if((0,w.i)()&&(0,w.c)())if(this._renderingCanvas){var n,Z;const d=null===(n=(Z=this._renderingCanvas).getBoundingClientRect)||void 0===n?void 0:n.call(Z);E=this._renderingCanvas.clientWidth||(null===d||void 0===d?void 0:d.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,H=this._renderingCanvas.clientHeight||(null===d||void 0===d?void 0:d.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else E=window.innerWidth,H=window.innerHeight;else E=this._renderingCanvas?this._renderingCanvas.width:100,H=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(E/this._hardwareScalingLevel,H/this._hardwareScalingLevel,d)}setSize(E,H){let d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(E|=0,H|=0,!d&&this._renderingCanvas.width===E&&this._renderingCanvas.height===H)return!1;if(this._renderingCanvas.width=E,this._renderingCanvas.height=H,this.scenes){for(let E=0;E<this.scenes.length;E++){const H=this.scenes[E];for(let E=0;E<H.cameras.length;E++){H.cameras[E]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(E,H,d,n,Z,I,g,l,r,t,S){throw(0,V.c)("engine.rawTexture")}createRawCubeTexture(E,H,d,n,Z,I,g,l){throw(0,V.c)("engine.rawTexture")}createRawTexture3D(E,H,d,n,Z,I,g,l,r,t,S){throw(0,V.c)("engine.rawTexture")}createRawTexture2DArray(E,H,d,n,Z,I,g,l,r,t,S){throw(0,V.c)("engine.rawTexture")}_sharedInit(E){this._renderingCanvas=E}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const E=navigator.userAgent;this.hostInformation.isMobile=-1!==E.indexOf("Mobile")||-1!==E.indexOf("Mac")&&(0,w.c)()&&"ontouchend"in document},this._checkForMobile(),(0,w.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(E){return document.createElement("video")}_reportDrawCall(){var E;let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(E=this._drawCalls)||void 0===E||E.addCount(H,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(E,H){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(E,H){return createImageBitmap(E,H)}resizeImageBitmap(E,H,d){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(E){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(E,H){if("undefined"===typeof document)return new OffscreenCanvas(E,H);const d=document.createElement("canvas");return d.width=E,d.height=H,d}createCanvas(E,H){return e._CreateCanvas(E,H)}static _FileToolsLoadImage(E,H,d,n,Z,I,g){throw(0,V.c)("FileTools")}_loadFile(E,H,d,n,Z,I){const g=(0,Q.h)(E,H,d,n,Z,I);return this._activeRequests.push(g),g.onCompleteObservable.add((()=>{const E=this._activeRequests.indexOf(g);-1!==E&&this._activeRequests.splice(E,1)})),g}static _FileToolsLoadFile(E,H,d,n,Z,I){if(Q.b.loadFile)return Q.b.loadFile(E,H,d,n,Z,I);throw(0,V.c)("FileTools")}dispose(){var E;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(E=this.releaseComputeEffects)||void 0===E||E.call(this),I.Effect.ResetCache();for(const d of this._activeRequests)d.abort();this._boundRenderFunction=null,this.Qd.notifyObservers(this),this.Qd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,w.i)()&&window.removeEventListener("resize",this._checkForMobile);const H=n.b.Instances.indexOf(this);H>=0&&n.b.Instances.splice(H,1),n.b.Instances.length||(n.b.OnEnginesDisposedObservable.notifyObservers(this),n.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(E){throw(0,V.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(E,H){for(let d=0;d<n.b.Instances.length;d++){const Z=n.b.Instances[d];for(let d=0;d<Z.scenes.length;d++)Z.scenes[d].markAllMaterialsAsDirty(E,H)}}}e._RenderPassIdCounter=0,e._RescalePostProcessFactory=null,e.CollisionsEpsilon=.001,e.QueueNewFrame=D},12268:(E,H,d)=>{d.d(H,{b:()=>Z});var n=d(12230);class Z{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}Z.Instances=[],Z.OnEnginesDisposedObservable=new n.e,Z._LastCreatedScene=null,Z.UseFallbackTexture=!0,Z.FallbackTexture=""},12321:(E,H,d)=>{d.d(H,{b:()=>n});class n{static SetMatrixPrecision(E){if(n.MatrixTrackPrecisionChange=!1,E&&!n.MatrixUse64Bits&&n.MatrixTrackedMatrices)for(let H=0;H<n.MatrixTrackedMatrices.length;++H){const E=n.MatrixTrackedMatrices[H],d=E.sd;E.sd=new Array(16);for(let H=0;H<16;++H)E.sd[H]=d[H]}n.MatrixUse64Bits=E,n.MatrixCurrentType=n.MatrixUse64Bits?Array:Float32Array,n.MatrixTrackedMatrices=null}}n.MatrixUse64Bits=!1,n.MatrixTrackPrecisionChange=!0,n.MatrixCurrentType=Float32Array,n.MatrixTrackedMatrices=[]},12331:(E,H,d)=>{d.d(H,{c:()=>g});var n=d(12237);const Z=new Map;function I(E,H){(function(E){return Z.delete(E)})(E)&&n.b.Warn(`Extension with the name '${E}' already exists`),Z.set(E,H)}function g(E,H){"image/ktx"!==H&&"image/ktx2"!==H||(E=".ktx"),Z.has(E)||(E.endsWith(".ies")&&I(".ies",(async()=>await d.e(15).then(d.bind(d,14827)).then((E=>new E._IESTextureLoader)))),E.endsWith(".dds")&&I(".dds",(async()=>await Promise.all([d.e(14),d.e(17),d.e(13),d.e(19),d.e(18),d.e(28)]).then(d.bind(d,14830)).then((E=>new E._DDSTextureLoader)))),E.endsWith(".basis")&&I(".basis",(async()=>await Promise.all([d.e(14),d.e(17),d.e(13),d.e(47)]).then(d.bind(d,14842)).then((E=>new E._BasisTextureLoader)))),E.endsWith(".env")&&I(".env",(async()=>await Promise.all([d.e(14),d.e(17),d.e(13),d.e(19),d.e(18),d.e(23),d.e(21),d.e(45),d.e(48)]).then(d.bind(d,14849)).then((E=>new E._ENVTextureLoader)))),E.endsWith(".hdr")&&I(".hdr",(async()=>await Promise.all([d.e(14),d.e(49)]).then(d.bind(d,14851)).then((E=>new E._HDRTextureLoader)))),(E.endsWith(".ktx")||E.endsWith(".ktx2"))&&(I(".ktx",(async()=>await d.e(30).then(d.bind(d,14858)).then((E=>new E._KTXTextureLoader)))),I(".ktx2",(async()=>await d.e(30).then(d.bind(d,14858)).then((E=>new E._KTXTextureLoader))))),E.endsWith(".tga")&&I(".tga",(async()=>await d.e(50).then(d.bind(d,14867)).then((E=>new E._TGATextureLoader)))),E.endsWith(".exr")&&I(".exr",(async()=>await d.e(16).then(d.bind(d,14871)).then((E=>new E._ExrTextureLoader)))));const n=Z.get(E);return n?Promise.resolve(n(H)):null}},12323:(E,H,d)=>{d.d(H,{d:()=>g});var n,Z=d(12230),I=d(12325);!function(E){E[E.Unknown=0]="Unknown",E[E.Url=1]="Url",E[E.Temp=2]="Temp",E[E.Raw=3]="Raw",E[E.Dynamic=4]="Dynamic",E[E.RenderTarget=5]="RenderTarget",E[E.MultiRenderTarget=6]="MultiRenderTarget",E[E.Cube=7]="Cube",E[E.CubeRaw=8]="CubeRaw",E[E.CubePrefiltered=9]="CubePrefiltered",E[E.Raw3D=10]="Raw3D",E[E.Raw2DArray=11]="Raw2DArray",E[E.DepthStencil=12]="DepthStencil",E[E.CubeRawRGBD=13]="CubeRawRGBD",E[E.Depth=14]="Depth"}(n||(n={}));class g extends I.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(E){this.generateMipMaps=E}get uniqueId(){return this._uniqueId}_setUniqueId(E){this._uniqueId=E}getEngine(){return this._engine}get source(){return this._source}constructor(E,H){let d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new Z.e,this.onErrorObservable=new Z.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=E,this._source=H,this._uniqueId=g._Counter++,d||(this._hardwareTexture=E._createHardwareTexture())}incrementReferences(){this._references++}updateSize(E,H){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,E,H,d),this.width=E,this.height=H,this.depth=d,this.baseWidth=E,this.baseHeight=H,this.baseDepth=d,this._size=E*H*d}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const E=this.onRebuildCallback(this),H=H=>{H._swapAndDie(this,!1),this.isReady=E.isReady};return void(E.isAsync?E.proxy.then(H):H(E.proxy))}let E;switch(this.source){case 2:case 12:case 14:break;case 1:return void(E=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(E=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:E=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),E._swapAndDie(this,!1),this.isReady=!0;break;case 10:E=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 11:E=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 4:E=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),E._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(E=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:E=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),E._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return E=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(E=>{E&&E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(E._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(E){var H;let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(H=this._hardwareTexture)||void 0===H||H.setUsage(E._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),E._hardwareTexture=this._hardwareTexture,d&&(E._isRGBD=this._isRGBD),this._lodTextureHigh&&(E._lodTextureHigh&&E._lodTextureHigh.dispose(),E._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(E._lodTextureMid&&E._lodTextureMid.dispose(),E._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(E._lodTextureLow&&E._lodTextureLow.dispose(),E._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(E._irradianceTexture&&E._irradianceTexture.dispose(),E._irradianceTexture=this._irradianceTexture);const n=this._engine.getLoadedTexturesCache();let Z=n.indexOf(this);-1!==Z&&n.splice(Z,1),Z=n.indexOf(E),-1===Z&&n.push(E)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}g._Counter=0},12325:(E,H,d)=>{d.d(H,{b:()=>n});class n{get wrapU(){return this._cachedWrapU}set wrapU(E){this._cachedWrapU=E}get wrapV(){return this._cachedWrapV}set wrapV(E){this._cachedWrapV=E}get wrapR(){return this._cachedWrapR}set wrapR(E){this._cachedWrapR=E}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(E){this._cachedAnisotropicFilteringLevel=E}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(E){this._comparisonFunction=E}get useMipMaps(){return this._useMipMaps}set useMipMaps(E){this._useMipMaps=E}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=E,this._cachedWrapV=H,this._cachedWrapR=d,this._cachedAnisotropicFilteringLevel=n,this.samplingMode=Z,this._comparisonFunction=I,this}compareSampler(E){return this._cachedWrapU===E._cachedWrapU&&this._cachedWrapV===E._cachedWrapV&&this._cachedWrapR===E._cachedWrapR&&this._cachedAnisotropicFilteringLevel===E._cachedAnisotropicFilteringLevel&&this.samplingMode===E.samplingMode&&this._comparisonFunction===E._comparisonFunction&&this._useMipMaps===E._useMipMaps}}},12244:(E,H,d)=>{d.d(H,{b:()=>I});var n=d(12237);const Z=(E,H,d)=>E?E.getClassName&&"Mesh"===E.getClassName()?null:!E.getClassName||"SubMesh"!==E.getClassName()&&"PhysicsBody"!==E.getClassName()?E.clone?E.clone():Array.isArray(E)?E.slice():d&&"object"===typeof E?{...E}:null:E.clone(H):null;class I{static DeepCopy(E,H,d,I){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const l=function(E){const H=[];do{const d=Object.getOwnPropertyNames(E);for(const E of d)-1===H.indexOf(E)&&H.push(E)}while(E=Object.getPrototypeOf(E));return H}(E);for(const t of l){if("_"===t[0]&&(!I||-1===I.indexOf(t)))continue;if(t.endsWith("Observable"))continue;if(d&&-1!==d.indexOf(t))continue;const l=E[t],S=typeof l;if("function"!==S)try{if("object"===S)if(l instanceof Uint8Array)H[t]=Uint8Array.from(l);else if(l instanceof Array){if(H[t]=[],l.length>0)if("object"==typeof l[0])for(let E=0;E<l.length;E++){const d=Z(l[E],H,g);-1===H[t].indexOf(d)&&H[t].push(d)}else H[t]=l.slice(0)}else H[t]=Z(l,H,g);else H[t]=l}catch(r){n.b.Warn(r.message)}}}}},12275:(E,H,d)=>{d.d(H,{b:()=>n,d:()=>Z,f:()=>I});class n extends Error{}n._setPrototypeOf=Object.setPrototypeOf||((E,H)=>(E.__proto__=H,E));const Z={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class I extends n{constructor(E,H,d){super(E),this.errorCode=H,this.innerError=d,this.name="RuntimeError",n._setPrototypeOf(this,I.prototype)}}},12271:(E,H,d)=>{d.d(H,{b:()=>c,f:()=>e,g:()=>X,i:()=>U,m:()=>P,l:()=>Q,p:()=>p,t:()=>f,v:()=>j,y:()=>s});var n=d(12260),Z=d(12234),I=d(12230);class g{}g.FilesToLoad={};var l=d(12275),r=d(12279),t=d(12281),S=d(12268),M=d(12237),V=d(12287),C=d(12283),w=d(12296);const R=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class Q extends l.f{constructor(E,H){super(E,l.d.LoadFileError),this.name="LoadFileError",l.b._setPrototypeOf(this,Q.prototype),H instanceof n.b?this.request=H:this.file=H}}class L extends l.f{constructor(E,H){super(E,l.d.RequestFileError),this.request=H,this.name="RequestFileError",l.b._setPrototypeOf(this,L.prototype)}}class D extends l.f{constructor(E,H){super(E,l.d.ReadFileError),this.file=H,this.name="ReadFileError",l.b._setPrototypeOf(this,D.prototype)}}const e={DefaultRetryStrategy:class{static ExponentialBackoff(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(d,n,Z)=>0!==n.status||Z>=E||-1!==d.indexOf("file:")?-1:Math.pow(2,Z)*H}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:E=>E,ScriptBaseUrl:"",ScriptPreprocessUrl:E=>E,CleanUrl:E=>E=E.replace(/#/gm,"%23")},s=(E,H)=>{if((!E||0!==E.indexOf("data:"))&&e.CorsBehavior)if("string"===typeof e.CorsBehavior||e.CorsBehavior instanceof String)H.crossOrigin=e.CorsBehavior;else{const d=e.CorsBehavior(E);d&&(H.crossOrigin=d)}},i={getRequiredSize:null},p=function(E,H,d,Z){let I,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",t=arguments.length>5?arguments[5]:void 0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:S.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===M||void 0===M||!M._features.forceBitmapOverHTMLImageElement))return d("LoadImage is only supported in web or BabylonNative environments."),null;let V=!1;E instanceof ArrayBuffer||ArrayBuffer.isView(E)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(I=URL.createObjectURL(new Blob([E],{type:l})),V=!0):I=`data:${l};base64,`+(0,r.k)(E):E instanceof Blob?(I=URL.createObjectURL(E),V=!0):(I=e.CleanUrl(E),I=e.PreprocessUrl(I));const C=H=>{if(d){const n=I||E.toString();d(`Error while trying to load image: ${0===n.indexOf("http")||n.length<=128?n:n.slice(0,128)+"..."}`,H)}};if(null!==M&&void 0!==M&&M._features.forceBitmapOverHTMLImageElement)return P(I,(n=>{M.createImageBitmap(new Blob([n],{type:l}),{premultiplyAlpha:"none",...t}).then((E=>{H(E),V&&URL.revokeObjectURL(I)})).catch((H=>{d&&d("Error while trying to load image: "+E,H)}))}),void 0,Z||void 0,!0,((E,H)=>{C(H)})),null;const w=new Image;if(i.getRequiredSize){const H=i.getRequiredSize(E);H.width&&(w.width=H.width),H.height&&(w.height=H.height)}s(I,w);const R=[],Q=()=>{for(const E of R)E.target.removeEventListener(E.name,E.handler);R.length=0};R.push({target:w,name:"load",handler:()=>{Q(),H(w),V&&w.src&&URL.revokeObjectURL(w.src)}}),R.push({target:w,name:"error",handler:E=>{Q(),C(E),V&&w.src&&URL.revokeObjectURL(w.src)}}),R.push({target:document,name:"securitypolicyviolation",handler:E=>{if(E.blockedURI!==w.src||"fd"===E.disposition)return;Q();const H=new Error(`CSP violation of policy ${E.effectiveDirective} ${E.blockedURI}. Current policy is ${E.originalPolicy}`);S.b.UseFallbackTexture=!1,C(H),V&&w.src&&URL.revokeObjectURL(w.src),w.src=""}}),(()=>{for(const E of R)E.target.addEventListener(E.name,E.handler)})();const L="blob:"===I.substring(0,5),D="data:"===I.substring(0,5),p=()=>{L||D||!n.b.IsCustomRequestAvailable?w.src=I:P(I,((E,H,d)=>{const n=new Blob([E],{type:!l&&d?d:l}),Z=URL.createObjectURL(n);V=!0,w.src=Z}),void 0,Z||void 0,!0,((E,H)=>{C(H)}))},f=()=>{Z&&Z.loadImage(I,w)};if(!L&&!D&&Z&&Z.enableTexturesOffline)Z.open(f,p);else{if(-1!==I.indexOf("file:")){const E=decodeURIComponent(I.substring(5).toLowerCase());if(g.FilesToLoad[E]&&"undefined"!==typeof URL){try{let H;try{H=URL.createObjectURL(g.FilesToLoad[E])}catch(j){H=URL.createObjectURL(g.FilesToLoad[E])}w.src=H,V=!0}catch(X){w.src=""}return w}}p()}return w},f=(E,H,d,n,Z)=>{const g=new FileReader,l={onCompleteObservable:new I.e,abort:()=>g.abort()};return g.onloadend=()=>l.onCompleteObservable.notifyObservers(l),Z&&(g.onerror=()=>{Z(new D(`Unable to read ${E.name}`,E))}),g.onload=E=>{H(E.target.result)},d&&(g.onprogress=d),n?g.readAsArrayBuffer(E):g.readAsText(E),l},P=(E,H,d,n,Z,r,t)=>{if(E.name)return f(E,H,d,Z,r?E=>{r(void 0,E)}:void 0);const S=E;if(-1!==S.indexOf("file:")){let E=decodeURIComponent(S.substring(5).toLowerCase());0===E.indexOf("./")&&(E=E.substring(2));const n=g.FilesToLoad[E];if(n)return f(n,H,d,Z,r?E=>r(void 0,new Q(E.message,E.file)):void 0)}const{match:C,type:w}=Y(S);if(C){const E={onCompleteObservable:new I.e,abort:()=>()=>{}};try{const E=Z?c(S):u(S);H(E,void 0,w)}catch(l){r?r(void 0,l):M.b.Error(l.message||"Failed to parse the Data URL")}return V.b.SetImmediate((()=>{E.onCompleteObservable.notifyObservers(E)})),E}return j(S,((E,d)=>{H(E,null===d||void 0===d?void 0:d.responseURL,null===d||void 0===d?void 0:d.getResponseHeader("content-type"))}),d,n,Z,r?E=>{r(E.request,new Q(E.message,E.request))}:void 0,t)},j=(E,H,d,g,l,r,t)=>{E=e.CleanUrl(E),E=e.PreprocessUrl(E);const S=e.BaseUrl+E;let V=!1;const C={onCompleteObservable:new I.e,abort:()=>V=!0},w=()=>{let E,I=new n.b,g=null;const w=()=>{I&&(d&&I.removeEventListener("progress",d),E&&I.removeEventListener("readystatechange",E),I.removeEventListener("loadend",R))};let R=()=>{w(),C.onCompleteObservable.notifyObservers(C),C.onCompleteObservable.clear(),d=void 0,E=null,R=null,r=void 0,t=void 0,H=void 0};C.abort=()=>{V=!0,R&&R(),I&&I.readyState!==(XMLHttpRequest.DONE||4)&&I.abort(),null!==g&&(clearTimeout(g),g=null),I=null};const Q=E=>{const H=E.message||"Unknown error";r&&I?r(new L(H,I)):M.b.Error(H)},D=M=>{if(I){if(I.open("GET",S),t)try{t(I)}catch(C){return void Q(C)}l&&(I.responseType="arraybuffer"),d&&I.addEventListener("progress",d),R&&I.addEventListener("loadend",R),E=()=>{if(!V&&I&&I.readyState===(XMLHttpRequest.DONE||4)){if(E&&I.removeEventListener("readystatechange",E),I.status>=200&&I.status<300||0===I.status&&(!(0,Z.i)()||W())){const E=l?I.response:I.responseText;if(null!==E){try{H&&H(E,I)}catch(C){Q(C)}return}}const d=e.DefaultRetryStrategy;if(d){const E=d(S,I,M);if(-1!==E)return w(),I=new n.b,void(g=setTimeout((()=>D(M+1)),E))}const t=new L("Error status: "+I.status+" "+I.statusText+" - Unable to load "+S,I);r&&r(t)}},I.addEventListener("readystatechange",E),I.send()}};D(0)};if(g&&g.enableSceneOffline){const n=E=>{E&&E.status>400?r&&r(E):w()},Z=()=>{g&&g.loadFile(e.BaseUrl+E,(E=>{!V&&H&&H(E),C.onCompleteObservable.notifyObservers(C)}),d?E=>{!V&&d&&d(E)}:void 0,n,l)};g.open(Z,n)}else w();return C},X=E=>{const{match:H,type:d}=Y(E);if(H)return d||void 0;const n=E.lastIndexOf(".");switch(E.substring(n+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"jd":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},W=()=>"undefined"!==typeof location&&"file:"===location.protocol,U=E=>R.test(E),Y=E=>{const H=R.exec(E);if(null===H||0===H.length)return{match:!1,type:""};return{match:!0,type:H[0].replace("data:","").replace("base64,","")}};function c(E){return(0,r.e)(E.split(",")[1])}const u=E=>(0,r.g)(E.split(",")[1]);let o;w.c._FileToolsLoadImage=p,C.b.loadFile=P,t.g.loadFile=P;((E,H,d,n,Z,I,g,l,r,t)=>{o={DecodeBase64UrlToBinary:E,DecodeBase64UrlToString:H,DefaultRetryStrategy:d.DefaultRetryStrategy,BaseUrl:d.BaseUrl,CorsBehavior:d.CorsBehavior,PreprocessUrl:d.PreprocessUrl,IsBase64DataUrl:n,IsFileURL:Z,LoadFile:I,LoadImage:g,ReadFile:l,RequestFile:r,SetCorsBehavior:t},Object.defineProperty(o,"DefaultRetryStrategy",{get:function(){return d.DefaultRetryStrategy},set:function(E){d.DefaultRetryStrategy=E}}),Object.defineProperty(o,"BaseUrl",{get:function(){return d.BaseUrl},set:function(E){d.BaseUrl=E}}),Object.defineProperty(o,"PreprocessUrl",{get:function(){return d.PreprocessUrl},set:function(E){d.PreprocessUrl=E}}),Object.defineProperty(o,"CorsBehavior",{get:function(){return d.CorsBehavior},set:function(E){d.CorsBehavior=E}})})(c,u,e,U,W,P,p,f,j,s)},12350:(E,H,d)=>{function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(E=>{const H=16*Math.random()|0;return("x"===E?H:3&H|8).toString(16)}))}d.d(H,{e:()=>n})},12337:(E,H,d)=>{d.d(H,{c:()=>I});var n=d(12237),Z=d(12344);class I{static Instantiate(E){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[E])return this.RegisteredExternalClasses[E];const H=(0,Z.c)(E);if(H)return H;n.b.Warn(E+" not found, you may have missed an import.");const d=E.split(".");let I=window||this;for(let n=0,Z=d.length;n<Z;n++)I=I[d[n]];return"function"!==typeof I?null:I}}I.RegisteredExternalClasses={}},12247:(E,H,d)=>{d.d(H,{b:()=>Z});var n=d(12234);class Z{static get Now(){return(0,n.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12279:(E,H,d)=>{d.d(H,{e:()=>g,g:()=>I,h:()=>n,k:()=>Z});const n=E=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(E);let H="";for(let d=0;d<E.byteLength;d++)H+=String.fromCharCode(E[d]);return H},Z=E=>{const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let d,n,Z,I,g,l,r,t="",S=0;const M=ArrayBuffer.isView(E)?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(E);for(;S<M.length;)d=M[S++],n=S<M.length?M[S++]:Number.NaN,Z=S<M.length?M[S++]:Number.NaN,I=d>>2,g=(3&d)<<4|n>>4,l=(15&n)<<2|Z>>6,r=63&Z,isNaN(n)?l=r=64:isNaN(Z)&&(r=64),t+=H.charAt(I)+H.charAt(g)+H.charAt(l)+H.charAt(r);return t},I=E=>atob(E),g=E=>{const H=I(E),d=H.length,n=new Uint8Array(new ArrayBuffer(d));for(let Z=0;Z<d;Z++)n[Z]=H.charCodeAt(Z);return n.buffer}},12358:(E,H,d)=>{function n(E){let H=1;do{H*=2}while(H<E);return H===E}function Z(E,H,d){return E*(1-d)+H*d}function I(E){const H=g(E),d=l(E);return H-E>E-d?d:H}function g(E){return E--,E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,E|=E>>16,++E}function l(E){return E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,(E|=E>>16)-(E>>1)}function r(E,H){let d;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:d=l(E);break;case 2:d=I(E);break;default:d=g(E)}return Math.min(d,H)}d.d(H,{d:()=>l,f:()=>r,h:()=>n,l:()=>Z,n:()=>I})},12228:(E,H,d)=>{d.r(H),d.d(H,{AsyncLoop:()=>D,Tools:()=>Q,className:()=>L});var n=d(12230),Z=d(12234),I=d(12237),g=d(12244),l=d(12247),r=d(12256),t=d(12260),S=d(12268),M=d(12271),V=d(12287),C=d(12337),w=d(12350),R=d(12358);class Q{static get BaseUrl(){return M.f.BaseUrl}static set BaseUrl(E){M.f.BaseUrl=E}static get CleanUrl(){return M.f.CleanUrl}static set CleanUrl(E){M.f.CleanUrl=E}static IsAbsoluteUrl(E){return 0===E.indexOf("//")||-1!==E.indexOf("://")&&(-1!==E.indexOf(".")&&(-1!==E.indexOf("/")&&(!(E.indexOf(":")>E.indexOf("/"))&&(E.indexOf("://")<E.indexOf(".")||(0===E.indexOf("data:")||0===E.indexOf("blob:"))))))}static set ScriptBaseUrl(E){M.f.ScriptBaseUrl=E}static get ScriptBaseUrl(){return M.f.ScriptBaseUrl}static set CDNBaseUrl(E){Q.ScriptBaseUrl=E,Q.AssetBaseUrl=E}static set ScriptPreprocessUrl(E){M.f.ScriptPreprocessUrl=E}static get ScriptPreprocessUrl(){return M.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return M.f.DefaultRetryStrategy}static set DefaultRetryStrategy(E){M.f.DefaultRetryStrategy=E}static get CorsBehavior(){return M.f.CorsBehavior}static set CorsBehavior(E){M.f.CorsBehavior=E}static get UseFallbackTexture(){return S.b.UseFallbackTexture}static set UseFallbackTexture(E){S.b.UseFallbackTexture=E}static get RegisteredExternalClasses(){return C.c.RegisteredExternalClasses}static set RegisteredExternalClasses(E){C.c.RegisteredExternalClasses=E}static get fallbackTexture(){return S.b.FallbackTexture}static set fallbackTexture(E){S.b.FallbackTexture=E}static FetchToRef(E,H,d,n,Z,I){const g=4*((Math.abs(E)*d%d|0)+(Math.abs(H)*n%n|0)*d);I.r=Z[g]/255,I.g=Z[g+1]/255,I.b=Z[g+2]/255,I.a=Z[g+3]/255}static Mix(E,H,d){return 0}static Instantiate(E){return C.c.Instantiate(E)}static SetImmediate(E){V.b.SetImmediate(E)}static IsExponentOfTwo(E){return!0}static FloatRound(E){return Math.fround(E)}static GetFilename(E){const H=E.lastIndexOf("/");return H<0?E:E.substring(H+1)}static GetFolderPath(E){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const d=E.lastIndexOf("/");return d<0?H?E:"":E.substring(0,d+1)}static ToDegrees(E){return 180*E/Math.PI}static ToRadians(E){return E*Math.PI/180}static SmoothAngleChange(E,H){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const n=this.ToRadians(E),Z=this.ToRadians(H);return this.ToDegrees(Math.atan2((1-d)*Math.sin(Z)+d*Math.sin(n),(1-d)*Math.cos(Z)+d*Math.cos(n)))}static MakeArray(E,H){return!0===H||void 0!==E&&null!=E?Array.isArray(E)?E:[E]:null}static GetPointerPrefix(E){return(0,Z.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(E,H){(0,M.y)(E,H)}static SetReferrerPolicyBehavior(E,H){H.referrerPolicy=E}static get PreprocessUrl(){return M.f.PreprocessUrl}static set PreprocessUrl(E){M.f.PreprocessUrl=E}static LoadImage(E,H,d,n,Z,I){return(0,M.p)(E,H,d,n,Z,I)}static LoadFile(E,H,d,n,Z,I){return(0,M.m)(E,H,d,n,Z,I)}static async LoadFileAsync(E){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((d,n)=>{(0,M.m)(E,(E=>{d(E)}),void 0,void 0,H,((E,H)=>{n(H)}))}))}static GetAssetUrl(E){if(!E)return"";if(Q.AssetBaseUrl&&E.startsWith(Q._DefaultAssetsUrl)){const H="/"===Q.AssetBaseUrl[Q.AssetBaseUrl.length-1]?Q.AssetBaseUrl.substring(0,Q.AssetBaseUrl.length-1):Q.AssetBaseUrl;return E.replace(Q._DefaultAssetsUrl,H)}return E}static GetBabylonScriptURL(E,H){if(!E)return"";if(Q.ScriptBaseUrl&&E.startsWith(Q._DefaultCdnUrl)){const H="/"===Q.ScriptBaseUrl[Q.ScriptBaseUrl.length-1]?Q.ScriptBaseUrl.substring(0,Q.ScriptBaseUrl.length-1):Q.ScriptBaseUrl;E=E.replace(Q._DefaultCdnUrl,H)}return E=Q.ScriptPreprocessUrl(E),H&&(E=Q.GetAbsoluteUrl(E)),E}static LoadBabylonScript(E,H,d,n){E=Q.GetBabylonScriptURL(E),Q.LoadScript(E,H,d)}static async LoadBabylonScriptAsync(E){return E=Q.GetBabylonScriptURL(E),await Q.LoadScriptAsync(E)}static LoadScript(E,H,d,n){let I=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(E),H&&H()}catch(r){null===d||void 0===d||d(`Unable to load script '${E}' in worker`,r)}return}if(!(0,Z.i)())return void(null===d||void 0===d||d(`Cannot load script '${E}' outside of a window or a worker`));const g=document.getElementsByTagName("head")[0],l=document.createElement("script");I?(l.setAttribute("type","module"),l.innerText=E):(l.setAttribute("type","text/javascript"),l.setAttribute("src",E)),n&&(l.id=n),l.onload=()=>{H&&H()},l.onerror=H=>{d&&d(`Unable to load script '${E}'`,H)},g.appendChild(l)}static async LoadScriptAsync(E,H){return await new Promise(((d,n)=>{this.LoadScript(E,(()=>{d()}),((E,H)=>{n(H||new Error(E))}),H)}))}static ReadFileAsDataURL(E,H,d){const Z=new FileReader,I={onCompleteObservable:new n.e,abort:()=>Z.abort()};return Z.onloadend=()=>{I.onCompleteObservable.notifyObservers(I)},Z.onload=E=>{H(E.target.result)},Z.onprogress=d,Z.readAsDataURL(E),I}static ReadFile(E,H,d,n,Z){return(0,M.t)(E,H,d,n,Z)}static FileAsURL(E){const H=new Blob([E]);return window.URL.createObjectURL(H)}static Format(E){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return E.toFixed(H)}static DeepCopy(E,H,d,n){g.b.DeepCopy(E,H,d,n)}static IsEmpty(E){for(const H in E)if(Object.prototype.hasOwnProperty.call(E,H))return!1;return!0}static RegisterTopRootEvents(E,H){for(let n=0;n<H.length;n++){const Z=H[n];E.addEventListener(Z.name,Z.handler,!1);try{window.parent&&window.parent.addEventListener(Z.name,Z.handler,!1)}catch(d){}}}static UnregisterTopRootEvents(E,H){for(let n=0;n<H.length;n++){const Z=H[n];E.removeEventListener(Z.name,Z.handler);try{E.parent&&E.parent.removeEventListener(Z.name,Z.handler)}catch(d){}}}static async DumpFramebuffer(E,H,d,n){throw(0,r.c)("DumpTools")}static DumpData(E,H,d,n){throw(0,r.c)("DumpTools")}static async DumpDataAsync(E,H,d){throw(0,r.c)("DumpTools")}static _IsOffScreenCanvas(E){return void 0!==E.convertToBlob}static ToBlob(E,H){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=arguments.length>3?arguments[3]:void 0;Q._IsOffScreenCanvas(E)||E.toBlob||(E.toBlob=function(E,H,d){setTimeout((()=>{const n=atob(this.toDataURL(H,d).split(",")[1]),Z=n.length,I=new Uint8Array(Z);for(let E=0;E<Z;E++)I[E]=n.charCodeAt(E);E(new Blob([I]))}))}),Q._IsOffScreenCanvas(E)?E.convertToBlob({type:d,quality:n}).then((E=>H(E))):E.toBlob((function(E){H(E)}),d,n)}static DownloadBlob(E,H){if("download"in document.createElement("a")){if(!H){const E=new Date;H="screenshot_"+((E.getFullYear()+"-"+(E.getMonth()+1)).slice(2)+"-"+E.getDate()+"_"+E.getHours()+"-"+("0"+E.getMinutes()).slice(-2))+".png"}Q.Download(E,H)}else if(E&&"undefined"!==typeof URL){const H=URL.createObjectURL(E),d=window.open("");if(!d)return;const n=d.document.createElement("img");n.onload=function(){URL.revokeObjectURL(H)},n.src=H,d.document.body.appendChild(n)}}static EncodeScreenshotCanvasData(E,H){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=arguments.length>3?arguments[3]:void 0,Z=arguments.length>4?arguments[4]:void 0;if("string"!==typeof n&&H){if(H){if(Q._IsOffScreenCanvas(E))return void E.convertToBlob({type:d,quality:Z}).then((E=>{const d=new FileReader;d.readAsDataURL(E),d.onloadend=()=>{const E=d.result;H(E)}}));const n=E.toDataURL(d,Z);H(n)}}else this.ToBlob(E,(function(E){E&&Q.DownloadBlob(E,n),H&&H("")}),d,Z)}static Download(E,H){if("undefined"===typeof URL)return;const d=window.URL.createObjectURL(E),n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=d,n.download=H,n.addEventListener("click",(()=>{n.parentElement&&n.parentElement.removeChild(n)})),n.click(),window.URL.revokeObjectURL(d)}static BackCompatCameraNoPreventDefault(E){return"boolean"===typeof E[0]?E[0]:"boolean"===typeof E[1]&&E[1]}static CreateScreenshot(E,H,d,n){throw(0,r.c)("ScreenshotTools")}static async CreateScreenshotAsync(E,H,d){throw(0,r.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(E,H,d,n){throw(0,r.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(E,H,d){throw(0,r.c)("ScreenshotTools")}static RandomId(){return(0,w.e)()}static IsBase64(E){return(0,M.i)(E)}static DecodeBase64(E){return(0,M.b)(E)}static get errorsCount(){return I.b.errorsCount}static Log(E){I.b.Log(E)}static Warn(E){I.b.Warn(E)}static Error(E){I.b.Error(E)}static get LogCache(){return I.b.LogCache}static ClearLogCache(){I.b.ClearLogCache()}static set LogLevels(E){I.b.LogLevels=E}static set PerformanceLogLevel(E){return(E&Q.PerformanceUserMarkLogLevel)===Q.PerformanceUserMarkLogLevel?(Q.StartPerformanceCounter=Q._StartUserMark,void(Q.EndPerformanceCounter=Q._EndUserMark)):(E&Q.PerformanceConsoleLogLevel)===Q.PerformanceConsoleLogLevel?(Q.StartPerformanceCounter=Q._StartPerformanceConsole,void(Q.EndPerformanceCounter=Q._EndPerformanceConsole)):(Q.StartPerformanceCounter=Q._StartPerformanceCounterDisabled,void(Q.EndPerformanceCounter=Q._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(E,H){}static _EndPerformanceCounterDisabled(E,H){}static _StartUserMark(E){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Q._Performance){if(!(0,Z.i)())return;Q._Performance=window.performance}H&&Q._Performance.mark&&Q._Performance.mark(E+"-Begin")}static _EndUserMark(E){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&Q._Performance.mark&&(Q._Performance.mark(E+"-End"),Q._Performance.measure(E,E+"-Begin",E+"-End"))}static _StartPerformanceConsole(E){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(Q._StartUserMark(E,H),console.time&&console.time(E))}static _EndPerformanceConsole(E){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(Q._EndUserMark(E,H),console.timeEnd(E))}static get Now(){return l.b.Now}static GetClassName(E){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=null;if(!H&&E.getClassName)d=E.getClassName();else{if(E instanceof Object){d=(H?E:Object.getPrototypeOf(E)).constructor.__bjsclassName__}d||(d=typeof E)}return d}static First(E,H){for(const d of E)if(H(d))return d;return null}static getFullClassName(E){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=null,n=null;if(!H&&E.getClassName)d=E.getClassName();else{if(E instanceof Object){const Z=H?E:Object.getPrototypeOf(E);d=Z.constructor.__bjsclassName__,n=Z.constructor.__bjsmoduleName__}d||(d=typeof E)}return d?(null!=n?n+".":"")+d:null}static async DelayAsync(E){await new Promise((H=>{setTimeout((()=>{H()}),E)}))}static IsSafari(){return!!(0,Z.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function L(E,H){return d=>{d.__bjsclassName__=E,d.__bjsmoduleName__=null!=H?H:null}}Q.AssetBaseUrl="",Q.UseCustomRequestHeaders=!1,Q.CustomRequestHeaders=t.b.CustomRequestHeaders,Q.GetDOMTextContent=Z.b,Q._DefaultCdnUrl="https://cdn.babylonjs.com",Q._DefaultAssetsUrl="https://assets.babylonjs.com/core",Q.GetAbsoluteUrl="object"===typeof document?E=>{const H=document.createElement("a");return H.href=E,H.href}:"function"===typeof URL&&"object"===typeof location?E=>new URL(E,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},Q.NoneLogLevel=I.b.NoneLogLevel,Q.MessageLogLevel=I.b.MessageLogLevel,Q.WarningLogLevel=I.b.WarningLogLevel,Q.ErrorLogLevel=I.b.ErrorLogLevel,Q.AllLogLevel=I.b.AllLogLevel,Q.IsWindowObjectExist=Z.i,Q.PerformanceNoneLogLevel=0,Q.PerformanceUserMarkLogLevel=1,Q.PerformanceConsoleLogLevel=2,Q.StartPerformanceCounter=Q._StartPerformanceCounterDisabled,Q.EndPerformanceCounter=Q._EndPerformanceCounterDisabled;class D{constructor(E,H,d){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=E,this.index=n-1,this._done=!1,this._fn=H,this._successCallback=d}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(E,H,d){const n=new D(E,H,d,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return n.executeNext(),n}static SyncAsyncForLoop(E,H,d,n,Z){let I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return D.Run(Math.ceil(E/H),(n=>{Z&&Z()?n.breakLoop():setTimeout((()=>{for(let I=0;I<H;++I){const g=n.index*H+I;if(g>=E)break;if(d(g),Z&&Z()){n.breakLoop();break}}n.executeNext()}),I)}),n)}}Q.Mix=R.l,Q.IsExponentOfTwo=R.h,S.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12344:(E,H,d)=>{d.d(H,{c:()=>I,e:()=>Z});const n={};function Z(E,H){n[E]=H}function I(E){return n[E]}},12260:(E,H,d)=>{d.d(H,{b:()=>n});class n{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(n.CustomRequestHeaders).length>0||n.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const E in n.CustomRequestHeaders){const H=n.CustomRequestHeaders[E];H&&this._xhr.setRequestHeader(E,H)}}_shouldSkipRequestModifications(E){return n.SkipRequestModificationForBabylonCDN&&(E.includes("preview.babylonjs.com")||E.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(E){this._xhr.onprogress=E}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(E){this._xhr.responseType=E}get timeout(){return this._xhr.timeout}set timeout(E){this._xhr.timeout=E}addEventListener(E,H,d){this._xhr.addEventListener(E,H,d)}removeEventListener(E,H,d){this._xhr.removeEventListener(E,H,d)}abort(){this._xhr.abort()}send(E){n.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(E)}open(E,H){for(const d of n.CustomRequestModifiers){if(this._shouldSkipRequestModifications(H))return;H=d(this._xhr,H)||H}H=(H=H.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=H,this._xhr.open(E,H,!0)}setRequestHeader(E,H){this._xhr.setRequestHeader(E,H)}getResponseHeader(E){return this._xhr.getResponseHeader(E)}}n.CustomRequestHeaders={},n.CustomRequestModifiers=new Array,n.SkipRequestModificationForBabylonCDN=!0}}]);