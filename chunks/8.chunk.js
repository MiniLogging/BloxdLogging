"use strict";(self["6xhfpmwgjr5"]=self["6xhfpmwgjr5"]||[]).push([[8],{12323:(P,a,R)=>{R.d(a,{e:()=>k});var S=R(12277),A=R(12248),Z=R(12330),p=R(12353),j=R(12261);class U{constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,P&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(P){this._zOffset!==P&&(this._zOffset=P,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(P){this._zOffsetUnits!==P&&(this._zOffsetUnits=P,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(P){this._cullFace!==P&&(this._cullFace=P,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(P){this._cull!==P&&(this._cull=P,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(P){this._depthFunc!==P&&(this._depthFunc=P,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(P){this._depthMask!==P&&(this._depthMask=P,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(P){this._depthTest!==P&&(this._depthTest=P,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(P){this._frontFace!==P&&(this._frontFace=P,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(P){this.isDirty&&(this._isCullDirty&&(this.cull?P.enable(P.CULL_FACE):P.disable(P.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(P.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(P.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?P.enable(P.DEPTH_TEST):P.disable(P.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(P.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(P.enable(P.POLYGON_OFFSET_FILL),P.polygonOffset(this.zOffset,this.zOffsetUnits)):P.disable(P.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(P.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class Q{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(P){this._func!==P&&(this._func=P,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(P){this._funcRef!==P&&(this._funcRef=P,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(P){this._funcMask!==P&&(this._funcMask=P,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(P){this._opStencilFail!==P&&(this._opStencilFail=P,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(P){this._opDepthFail!==P&&(this._opDepthFail=P,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(P){this._opStencilDepthPass!==P&&(this._opStencilDepthPass=P,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(P){this._mask!==P&&(this._mask=P,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(P){this._enabled!==P&&(this._enabled=P,this._isStencilTestDirty=!0)}constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,P&&this.reset()}reset(){var P;this.stencilMaterial=void 0,null===(P=this.stencilGlobal)||void 0===P||P.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(P){var a;if(!P)return;const R=!this.useStencilGlobalOnly&&!(null===(a=this.stencilMaterial)||void 0===a||!a.enabled);this.enabled=R?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=R?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=R?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=R?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=R?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=R?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=R?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=R?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?P.enable(P.STENCIL_TEST):P.disable(P.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(P.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(P.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(P.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class h{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=h.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=h.KEEP,this.opDepthFail=h.KEEP,this.opStencilDepthPass=h.REPLACE}get stencilFunc(){return this.func}set stencilFunc(P){this.func=P}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(P){this.funcRef=P}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(P){this.funcMask=P}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(P){this.opStencilFail=P}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(P){this.opDepthFail=P}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(P){this.opStencilDepthPass=P}get stencilMask(){return this.mask}set stencilMask(P){this.mask=P}get stencilTest(){return this.enabled}set stencilTest(P){this.enabled=P}}h.ALWAYS=519,h.KEEP=7680,h.REPLACE=7681;class l{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(P){this._alphaBlend!==P&&(this._alphaBlend=P,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(P,a,R,S){this._blendConstants[0]===P&&this._blendConstants[1]===a&&this._blendConstants[2]===R&&this._blendConstants[3]===S||(this._blendConstants[0]=P,this._blendConstants[1]=a,this._blendConstants[2]=R,this._blendConstants[3]=S,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(P,a,R,S){this._blendFunctionParameters[0]===P&&this._blendFunctionParameters[1]===a&&this._blendFunctionParameters[2]===R&&this._blendFunctionParameters[3]===S||(this._blendFunctionParameters[0]=P,this._blendFunctionParameters[1]=a,this._blendFunctionParameters[2]=R,this._blendFunctionParameters[3]=S,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(P,a){this._blendEquationParameters[0]===P&&this._blendEquationParameters[1]===a||(this._blendEquationParameters[0]=P,this._blendEquationParameters[1]=a,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(P){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?P.enable(P.BLEND):P.disable(P.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(P.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(P.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(P.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var V=R(12266),f=R(12359),O=R(12240),q=R(12232),y=R(12314),t=R(12367);function W(P,a){if((0,O.k)()){const{requestAnimationFrame:R}=a||window;if("function"===typeof R)return R(P)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(P);return setTimeout(P,16)}class k{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(P){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Cp(){return this._useReverseDepthBuffer}set Cp(P){P!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=P,this._depthCullingState.depthFunc=P?518:515)}setColorWrite(P){P!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=P)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(P){if(P)return this.isNDCHalfZRange?P.IS_NDC_HALF_ZRANGE="":delete P.IS_NDC_HALF_ZRANGE,this.Cp?P.USE_REVERSE_DEPTHBUFFER="":delete P.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?P.USE_EXACT_SRGB_CONVERSIONS="":delete P.USE_EXACT_SRGB_CONVERSIONS);{let P="";return this.isNDCHalfZRange&&(P+="#define IS_NDC_HALF_ZRANGE"),this.Cp&&(P&&(P+="\n"),P+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(P&&(P+="\n"),P+="#define USE_EXACT_SRGB_CONVERSIONS"),P}}_rebuildInternalTextures(){const P=this._internalTexturesCache.slice();for(const a of P)a._rebuild()}_rebuildRenderTargetWrappers(){const P=this._renderTargetWrapperCache.slice();for(const a of P)a._rebuild()}_rebuildEffects(){for(const P in this._compiledEffects){const a=this._compiledEffects[P];a._pipelineContext=null,a._prepareEffect()}Z.Effect.ResetCache()}_rebuildGraphicsResources(){var P;this.wipeCaches(!0),this._rebuildEffects(),null===(P=this._rebuildComputeEffects)||void 0===P||P.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){A.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(P){setTimeout((()=>{this._clearEmptyResources();const a=this._depthCullingState.depthTest,R=this._depthCullingState.depthFunc,S=this._depthCullingState.depthMask,A=this._stencilState.stencilTest;P(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=a,this._depthCullingState.depthFunc=R,this._depthCullingState.depthMask=S,this._stencilState.stencilTest=A,this._flagContextRestored()}),0)}get U(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(P){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(P){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const P=new Uint8Array(4),a=[P,P,P,P,P,P];this._emptyCubeTexture=this.createRawCubeTexture(a,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(P){if(!P)return this._activeRenderLoops.length=0,void this._cancelFrame();const a=this._activeRenderLoops.indexOf(P);a>=0&&(this._activeRenderLoops.splice(a,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const P=this._frameHandler;if(this._frameHandler=0,(0,O.k)()){const{cancelAnimationFrame:a}=this.getHostWindow()||window;if("function"===typeof a)return a(P)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(P);return clearTimeout(P)}}zp(){this.onBeginFrameObservable.notifyObservers(this)}Kp(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(P){this._maxFPS=P,void 0!==P&&(this._minFrameTime=P<=0?Number.MAX_VALUE:1e3/P)}_isOverFrameTime(P){if(!P||void 0===this._maxFPS)return!1;const a=P-this._lastFrameTime;return this._lastFrameTime=P,this._renderAccumulator+=a,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(P){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(P)){let P=!0;(this.U||!this.renderEvenInBackground&&this._windowIsBackground)&&(P=!1),P&&(this.zp(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Kp())}}_renderLoop(P){this._processFrame(P),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let P=0;P<this._activeRenderLoops.length;P++){(0,this._activeRenderLoops[P])()}}_renderViews(){return!1}_queueNewFrame(P,a){return W(P,a)}runRenderLoop(P){-1===this._activeRenderLoops.indexOf(P)&&(this._activeRenderLoops.push(P),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(P){this._depthCullingState.depthTest=P}setZOffset(P){this._depthCullingState.zOffset=this.Cp?-P:P}getZOffset(){const P=this._depthCullingState.zOffset;return this.Cp?-P:P}setZOffsetUnits(P){this._depthCullingState.zOffsetUnits=this.Cp?-P:P}getZOffsetUnits(){const P=this._depthCullingState.zOffsetUnits;return this.Cp?-P:P}getHostWindow(){return(0,O.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(P){this._compatibilityMode=!0}_rebuildTextures(){for(const P of this.scenes)P._rebuildTextures();for(const P of this._virtualScenes)P._rebuildTextures()}_releaseRenderTargetWrapper(P){const a=this._renderTargetWrapperCache.indexOf(P);-1!==a&&this._renderTargetWrapperCache.splice(a,1)}get currentViewport(){return this._cachedViewport}setViewport(P,a,R){const S=a||this.getRenderWidth(),A=R||this.getRenderHeight(),Z=P.x||0,p=P.y||0;this._cachedViewport=P,this._viewport(Z*S,p*A,S*P.width,A*P.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(P){return new Path2D(P)}get description(){let P=this.name+this.version;return this._caps.parallelShaderCompile&&(P+=" - Parallel shader compilation"),P}_createTextureBase(P,a,R,Z){let p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Q=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,V=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,O=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,q=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,y=arguments.length>13?arguments[13]:void 0,W=arguments.length>14?arguments[14]:void 0,x=arguments.length>15?arguments[15]:void 0;const s="data:"===(P=P||"").substring(0,5),d="blob:"===P.substring(0,5),G=s&&-1!==P.indexOf(";base64,"),H=V||new f.c(this,1);H!==V&&(H.label=P.substring(0,60));const mP=P;!this._transformTextureUrl||G||V||l||(P=this._transformTextureUrl(P)),mP!==P&&(H._originalUrl=mP);const N=P.lastIndexOf(".");let D=q||(N>-1?P.substring(N).toLowerCase():"");D.indexOf("?")>-1&&(D=D.split("?")[0]);const L=(0,t.c)(D,y);Z&&Z.addPendingData(H),H.url=P,H.generateMipMaps=!a,H.samplingMode=p,H.invertY=R,H._useSRGBBuffer=this._getUseSRGBBuffer(!!x,a),this._doNotHandleContextLost||(H._buffer=l);let c=null;j&&!V&&(c=H.onLoadedObservable.add(j)),V||this._internalTexturesCache.push(H);const u=(R,V)=>{Z&&Z.removePendingData(H),P===mP?(c&&H.onLoadedObservable.remove(c),S.e.UseFallbackTexture&&P!==S.e.FallbackTexture&&this._createTextureBase(S.e.FallbackTexture,a,H.invertY,Z,p,null,U,Q,h,l,H),R=(R||"Unknown error")+(S.e.UseFallbackTexture?" - Fallback texture was used":""),H.onErrorObservable.notifyObservers({message:R,exception:V}),U&&U(R,V)):(A.c.Warn(`Failed to load ${P}, falling back to ${mP}`),this._createTextureBase(mP,a,H.invertY,Z,p,j,U,Q,h,l,H,O,q,y,W,x))};if(L){const a=async P=>{(await L).loadData(P,H,((P,a,R,S,A,j)=>{j?u("TextureLoader failed to load data"):Q(H,D,Z,{width:P,height:a},H.invertY,!R,S,(()=>(A(),!1)),p)}),W)};l?l instanceof ArrayBuffer?a(new Uint8Array(l)):ArrayBuffer.isView(l)?a(l):U&&U("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(P,(P=>{a(new Uint8Array(P))}),void 0,Z?Z.offlineProvider:void 0,!0,((P,a)=>{u("Unable to load "+(P&&P.responseURL,a))}))}else{const R=P=>{d&&!this._doNotHandleContextLost&&(H._buffer=P),Q(H,D,Z,P,H.invertY,a,!1,h,p)};!s||G?l&&("string"===typeof l.decoding||l.close)?R(l):k._FileToolsLoadImage(P||"",R,u,Z?Z.offlineProvider:null,y,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof l||l instanceof ArrayBuffer||ArrayBuffer.isView(l)||l instanceof Blob?k._FileToolsLoadImage(l,R,u,Z?Z.offlineProvider:null,y,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):l&&R(l)}return H}_rebuildBuffers(){for(const P of this._uniformBuffers)P._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,O.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const P in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,P)&&(this._boundTexturesCache[P]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(P){this._name=P}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(P){this._hardwareScalingLevel=P,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(P){this._doNotHandleContextLost=P}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(P,a,R){var A,Z;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new U,this._stencilStateComposer=new Q,this._stencilState=new h,this._alphaState=new l,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new q.b,this.onCanvasFocusObservable=new q.b,this.onNewSceneAddedObservable=new q.b,this.onResizeObservable=new q.b,this.onCanvasPointerOutObservable=new q.b,this.onEffectErrorObservable=new q.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new q.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=P=>this._renderLoop(P),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new q.b,this.onAfterShaderCompilationObservable=new q.b,this.onBeginFrameObservable=new q.b,this.onEndFrameObservable=new q.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new q.b,this.onContextRestoredObservable=new q.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Fp=new q.b,this.onReleaseEffectsObservable=new q.b,S.e.Instances.push(this),this.startTime=j.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,p.b.SetMatrixPrecision(!!a.useHighPrecisionMatrix),(0,O.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=R??!1,a.antialias=P??a.antialias,a.deterministicLockstep=a.deterministicLockstep??!1,a.lockstepMaxSteps=a.lockstepMaxSteps??4,a.timeStep=a.timeStep??1/60,a.gp=a.gp??!0,this._audioContext=(null===(A=a.audioEngineOptions)||void 0===A?void 0:A.audioContext)??null,this._audioDestination=(null===(Z=a.audioEngineOptions)||void 0===Z?void 0:Z.audioDestination)??null,this.premultipliedAlpha=a.premultipliedAlpha??!0,this._doNotHandleContextLost=!!a.doNotHandleContextLost,this._isStencilEnable=!!a.gp,this.useExactSrgbConversions=a.useExactSrgbConversions??!1;const V=(0,O.k)()&&window.devicePixelRatio||1,f=a.limitDeviceRatio||V;R=R||a.adaptToDeviceRatio||!1,this._hardwareScalingLevel=R?1/Math.min(f,V):1,this._lastDevicePixelRatio=V,this._creationOptions=a}resize(){let P,a,R=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const P=(0,O.k)()&&window.devicePixelRatio||1,a=this._lastDevicePixelRatio/P;this._lastDevicePixelRatio=P,this._hardwareScalingLevel*=a}if((0,O.k)()&&(0,O.f)())if(this._renderingCanvas){var S,A;const R=null===(S=(A=this._renderingCanvas).getBoundingClientRect)||void 0===S?void 0:S.call(A);P=this._renderingCanvas.clientWidth||(null===R||void 0===R?void 0:R.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,a=this._renderingCanvas.clientHeight||(null===R||void 0===R?void 0:R.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else P=window.innerWidth,a=window.innerHeight;else P=this._renderingCanvas?this._renderingCanvas.width:100,a=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(P/this._hardwareScalingLevel,a/this._hardwareScalingLevel,R)}setSize(P,a){let R=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(P|=0,a|=0,!R&&this._renderingCanvas.width===P&&this._renderingCanvas.height===a)return!1;if(this._renderingCanvas.width=P,this._renderingCanvas.height=a,this.scenes){for(let P=0;P<this.scenes.length;P++){const a=this.scenes[P];for(let P=0;P<a.cameras.length;P++){a.cameras[P]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(P,a,R,S,A,Z,p,j,U,Q,h){throw(0,V.c)("engine.rawTexture")}createRawCubeTexture(P,a,R,S,A,Z,p,j){throw(0,V.c)("engine.rawTexture")}createRawTexture3D(P,a,R,S,A,Z,p,j,U,Q,h){throw(0,V.c)("engine.rawTexture")}createRawTexture2DArray(P,a,R,S,A,Z,p,j,U,Q,h){throw(0,V.c)("engine.rawTexture")}_sharedInit(P){this._renderingCanvas=P}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const P=navigator.userAgent;this.hostInformation.isMobile=-1!==P.indexOf("Mobile")||-1!==P.indexOf("Mac")&&(0,O.f)()&&"ontouchend"in document},this._checkForMobile(),(0,O.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(P){return document.createElement("video")}_reportDrawCall(){var P;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(P=this._drawCalls)||void 0===P||P.addCount(a,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(P,a){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(P,a){return createImageBitmap(P,a)}resizeImageBitmap(P,a,R){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(P){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(P,a){if("undefined"===typeof document)return new OffscreenCanvas(P,a);const R=document.createElement("canvas");return R.width=P,R.height=a,R}createCanvas(P,a){return k._CreateCanvas(P,a)}static _FileToolsLoadImage(P,a,R,S,A,Z,p){throw(0,V.c)("FileTools")}_loadFile(P,a,R,S,A,Z){const p=(0,y.i)(P,a,R,S,A,Z);return this._activeRequests.push(p),p.onCompleteObservable.add((()=>{const P=this._activeRequests.indexOf(p);-1!==P&&this._activeRequests.splice(P,1)})),p}static _FileToolsLoadFile(P,a,R,S,A,Z){if(y.d.loadFile)return y.d.loadFile(P,a,R,S,A,Z);throw(0,V.c)("FileTools")}dispose(){var P;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(P=this.releaseComputeEffects)||void 0===P||P.call(this),Z.Effect.ResetCache();for(const R of this._activeRequests)R.abort();this._boundRenderFunction=null,this.Fp.notifyObservers(this),this.Fp.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,O.k)()&&window.removeEventListener("resize",this._checkForMobile);const a=S.e.Instances.indexOf(this);a>=0&&S.e.Instances.splice(a,1),S.e.Instances.length||(S.e.OnEnginesDisposedObservable.notifyObservers(this),S.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(P){throw(0,V.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(P,a){for(let R=0;R<S.e.Instances.length;R++){const A=S.e.Instances[R];for(let R=0;R<A.scenes.length;R++)A.scenes[R].markAllMaterialsAsDirty(P,a)}}}k._RenderPassIdCounter=0,k._RescalePostProcessFactory=null,k.CollisionsEpsilon=.001,k.QueueNewFrame=W},12277:(P,a,R)=>{R.d(a,{e:()=>A});var S=R(12232);class A{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}A.Instances=[],A.OnEnginesDisposedObservable=new S.b,A._LastCreatedScene=null,A.UseFallbackTexture=!0,A.FallbackTexture=""},12353:(P,a,R)=>{R.d(a,{b:()=>S});class S{static SetMatrixPrecision(P){if(S.MatrixTrackPrecisionChange=!1,P&&!S.MatrixUse64Bits&&S.MatrixTrackedMatrices)for(let a=0;a<S.MatrixTrackedMatrices.length;++a){const P=S.MatrixTrackedMatrices[a],R=P.Pj;P.Pj=new Array(16);for(let a=0;a<16;++a)P.Pj[a]=R[a]}S.MatrixUse64Bits=P,S.MatrixCurrentType=S.MatrixUse64Bits?Array:Float32Array,S.MatrixTrackedMatrices=null}}S.MatrixUse64Bits=!1,S.MatrixTrackPrecisionChange=!0,S.MatrixCurrentType=Float32Array,S.MatrixTrackedMatrices=[]},12367:(P,a,R)=>{R.d(a,{c:()=>p});var S=R(12248);const A=new Map;function Z(P,a){(function(P){return A.delete(P)})(P)&&S.c.Warn(`Extension with the name '${P}' already exists`),A.set(P,a)}function p(P,a){"image/ktx"!==a&&"image/ktx2"!==a||(P=".ktx"),A.has(P)||(P.endsWith(".ies")&&Z(".ies",(async()=>await R.e(15).then(R.bind(R,15694)).then((P=>new P._IESTextureLoader)))),P.endsWith(".dds")&&Z(".dds",(async()=>await Promise.all([R.e(14),R.e(17),R.e(13),R.e(19),R.e(18),R.e(28)]).then(R.bind(R,15696)).then((P=>new P._DDSTextureLoader)))),P.endsWith(".basis")&&Z(".basis",(async()=>await Promise.all([R.e(14),R.e(17),R.e(13),R.e(47)]).then(R.bind(R,15709)).then((P=>new P._BasisTextureLoader)))),P.endsWith(".env")&&Z(".env",(async()=>await Promise.all([R.e(14),R.e(17),R.e(13),R.e(19),R.e(18),R.e(23),R.e(21),R.e(45),R.e(48)]).then(R.bind(R,15712)).then((P=>new P._ENVTextureLoader)))),P.endsWith(".hdr")&&Z(".hdr",(async()=>await Promise.all([R.e(14),R.e(49)]).then(R.bind(R,15719)).then((P=>new P._HDRTextureLoader)))),(P.endsWith(".ktx")||P.endsWith(".ktx2"))&&(Z(".ktx",(async()=>await R.e(30).then(R.bind(R,15725)).then((P=>new P._KTXTextureLoader)))),Z(".ktx2",(async()=>await R.e(30).then(R.bind(R,15725)).then((P=>new P._KTXTextureLoader))))),P.endsWith(".tga")&&Z(".tga",(async()=>await R.e(50).then(R.bind(R,15729)).then((P=>new P._TGATextureLoader)))),P.endsWith(".exr")&&Z(".exr",(async()=>await R.e(16).then(R.bind(R,15737)).then((P=>new P._ExrTextureLoader)))));const S=A.get(P);return S?Promise.resolve(S(a)):null}},12359:(P,a,R)=>{R.d(a,{c:()=>p});var S,A=R(12232),Z=R(12365);!function(P){P[P.Unknown=0]="Unknown",P[P.Url=1]="Url",P[P.Temp=2]="Temp",P[P.Raw=3]="Raw",P[P.Dynamic=4]="Dynamic",P[P.RenderTarget=5]="RenderTarget",P[P.MultiRenderTarget=6]="MultiRenderTarget",P[P.Cube=7]="Cube",P[P.CubeRaw=8]="CubeRaw",P[P.CubePrefiltered=9]="CubePrefiltered",P[P.Raw3D=10]="Raw3D",P[P.Raw2DArray=11]="Raw2DArray",P[P.DepthStencil=12]="DepthStencil",P[P.CubeRawRGBD=13]="CubeRawRGBD",P[P.Depth=14]="Depth"}(S||(S={}));class p extends Z.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(P){this.generateMipMaps=P}get uniqueId(){return this._uniqueId}_setUniqueId(P){this._uniqueId=P}getEngine(){return this._engine}get source(){return this._source}constructor(P,a){let R=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new A.b,this.onErrorObservable=new A.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=P,this._source=a,this._uniqueId=p._Counter++,R||(this._hardwareTexture=P._createHardwareTexture())}incrementReferences(){this._references++}updateSize(P,a){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,P,a,R),this.width=P,this.height=a,this.depth=R,this.baseWidth=P,this.baseHeight=a,this.baseDepth=R,this._size=P*a*R}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const P=this.onRebuildCallback(this),a=a=>{a._swapAndDie(this,!1),this.isReady=P.isReady};return void(P.isAsync?P.proxy.then(a):a(P.proxy))}let P;switch(this.source){case 2:case 12:case 14:break;case 1:return void(P=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(P=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:P=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),P._swapAndDie(this,!1),this.isReady=!0;break;case 10:P=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 11:P=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 4:P=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),P._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(P=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:P=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),P._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return P=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(P=>{P&&P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(P._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(P){var a;let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(a=this._hardwareTexture)||void 0===a||a.setUsage(P._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),P._hardwareTexture=this._hardwareTexture,R&&(P._isRGBD=this._isRGBD),this._lodTextureHigh&&(P._lodTextureHigh&&P._lodTextureHigh.dispose(),P._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(P._lodTextureMid&&P._lodTextureMid.dispose(),P._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(P._lodTextureLow&&P._lodTextureLow.dispose(),P._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(P._irradianceTexture&&P._irradianceTexture.dispose(),P._irradianceTexture=this._irradianceTexture);const S=this._engine.getLoadedTexturesCache();let A=S.indexOf(this);-1!==A&&S.splice(A,1),A=S.indexOf(P),-1===A&&S.push(P)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}p._Counter=0},12365:(P,a,R)=>{R.d(a,{b:()=>S});class S{get wrapU(){return this._cachedWrapU}set wrapU(P){this._cachedWrapU=P}get wrapV(){return this._cachedWrapV}set wrapV(P){this._cachedWrapV=P}get wrapR(){return this._cachedWrapR}set wrapR(P){this._cachedWrapR=P}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(P){this._cachedAnisotropicFilteringLevel=P}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(P){this._comparisonFunction=P}get useMipMaps(){return this._useMipMaps}set useMipMaps(P){this._useMipMaps=P}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=P,this._cachedWrapV=a,this._cachedWrapR=R,this._cachedAnisotropicFilteringLevel=S,this.samplingMode=A,this._comparisonFunction=Z,this}compareSampler(P){return this._cachedWrapU===P._cachedWrapU&&this._cachedWrapV===P._cachedWrapV&&this._cachedWrapR===P._cachedWrapR&&this._cachedAnisotropicFilteringLevel===P._cachedAnisotropicFilteringLevel&&this.samplingMode===P.samplingMode&&this._comparisonFunction===P._comparisonFunction&&this._useMipMaps===P._useMipMaps}}},12252:(P,a,R)=>{R.d(a,{c:()=>Z});var S=R(12248);const A=(P,a,R)=>P?P.getClassName&&"Mesh"===P.getClassName()?null:!P.getClassName||"SubMesh"!==P.getClassName()&&"PhysicsBody"!==P.getClassName()?P.clone?P.clone():Array.isArray(P)?P.slice():R&&"object"===typeof P?{...P}:null:P.clone(a):null;class Z{static DeepCopy(P,a,R,Z){let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const j=function(P){const a=[];do{const R=Object.getOwnPropertyNames(P);for(const P of R)-1===a.indexOf(P)&&a.push(P)}while(P=Object.getPrototypeOf(P));return a}(P);for(const Q of j){if("_"===Q[0]&&(!Z||-1===Z.indexOf(Q)))continue;if(Q.endsWith("Observable"))continue;if(R&&-1!==R.indexOf(Q))continue;const j=P[Q],h=typeof j;if("function"!==h)try{if("object"===h)if(j instanceof Uint8Array)a[Q]=Uint8Array.from(j);else if(j instanceof Array){if(a[Q]=[],j.length>0)if("object"==typeof j[0])for(let P=0;P<j.length;P++){const R=A(j[P],a,p);-1===a[Q].indexOf(R)&&a[Q].push(R)}else a[Q]=j.slice(0)}else a[Q]=A(j,a,p);else a[Q]=j}catch(U){S.c.Warn(U.message)}}}}},12289:(P,a,R)=>{R.d(a,{e:()=>S,f:()=>A,h:()=>Z});class S extends Error{}S._setPrototypeOf=Object.setPrototypeOf||((P,a)=>(P.__proto__=a,P));const A={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class Z extends S{constructor(P,a,R){super(P),this.errorCode=a,this.innerError=R,this.name="RuntimeError",S._setPrototypeOf(this,Z.prototype)}}},12285:(P,a,R)=>{R.d(a,{d:()=>u,g:()=>k,j:()=>N,l:()=>L,p:()=>H,m:()=>y,r:()=>d,u:()=>G,y:()=>mP,B:()=>x});var S=R(12268),A=R(12240),Z=R(12232);class p{}p.FilesToLoad={};var j=R(12289),U=R(12298),Q=R(12307),h=R(12277),l=R(12248),V=R(12318),f=R(12314),O=R(12323);const q=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class y extends j.h{constructor(P,a){super(P,j.f.LoadFileError),this.name="LoadFileError",j.e._setPrototypeOf(this,y.prototype),a instanceof S.e?this.request=a:this.file=a}}class t extends j.h{constructor(P,a){super(P,j.f.RequestFileError),this.request=a,this.name="RequestFileError",j.e._setPrototypeOf(this,t.prototype)}}class W extends j.h{constructor(P,a){super(P,j.f.ReadFileError),this.file=a,this.name="ReadFileError",j.e._setPrototypeOf(this,W.prototype)}}const k={DefaultRetryStrategy:class{static ExponentialBackoff(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(R,S,A)=>0!==S.status||A>=P||-1!==R.indexOf("file:")?-1:Math.pow(2,A)*a}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:P=>P,ScriptBaseUrl:"",ScriptPreprocessUrl:P=>P,CleanUrl:P=>P=P.replace(/#/gm,"%23")},x=(P,a)=>{if((!P||0!==P.indexOf("data:"))&&k.CorsBehavior)if("string"===typeof k.CorsBehavior||k.CorsBehavior instanceof String)a.crossOrigin=k.CorsBehavior;else{const R=k.CorsBehavior(P);R&&(a.crossOrigin=R)}},s={getRequiredSize:null},d=function(P,a,R,A){let Z,j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",Q=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===l||void 0===l||!l._features.forceBitmapOverHTMLImageElement))return R("LoadImage is only supported in web or BabylonNative environments."),null;let V=!1;P instanceof ArrayBuffer||ArrayBuffer.isView(P)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(Z=URL.createObjectURL(new Blob([P],{type:j})),V=!0):Z=`data:${j};base64,`+(0,U.o)(P):P instanceof Blob?(Z=URL.createObjectURL(P),V=!0):(Z=k.CleanUrl(P),Z=k.PreprocessUrl(Z));const f=a=>{if(R){const S=Z||P.toString();R(`Error while trying to load image: ${0===S.indexOf("http")||S.length<=128?S:S.slice(0,128)+"..."}`,a)}};if(null!==l&&void 0!==l&&l._features.forceBitmapOverHTMLImageElement)return H(Z,(S=>{l.createImageBitmap(new Blob([S],{type:j}),{premultiplyAlpha:"none",...Q}).then((P=>{a(P),V&&URL.revokeObjectURL(Z)})).catch((a=>{R&&R("Error while trying to load image: "+P,a)}))}),void 0,A||void 0,!0,((P,a)=>{f(a)})),null;const O=new Image;if(s.getRequiredSize){const a=s.getRequiredSize(P);a.width&&(O.width=a.width),a.height&&(O.height=a.height)}x(Z,O);const q=[],y=()=>{for(const P of q)P.target.removeEventListener(P.name,P.handler);q.length=0};q.push({target:O,name:"load",handler:()=>{y(),a(O),V&&O.src&&URL.revokeObjectURL(O.src)}}),q.push({target:O,name:"error",handler:P=>{y(),f(P),V&&O.src&&URL.revokeObjectURL(O.src)}}),q.push({target:document,name:"securitypolicyviolation",handler:P=>{if(P.blockedURI!==O.src||"aj"===P.disposition)return;y();const a=new Error(`CSP violation of policy ${P.effectiveDirective} ${P.blockedURI}. Current policy is ${P.originalPolicy}`);h.e.UseFallbackTexture=!1,f(a),V&&O.src&&URL.revokeObjectURL(O.src),O.src=""}}),(()=>{for(const P of q)P.target.addEventListener(P.name,P.handler)})();const t="blob:"===Z.substring(0,5),W="data:"===Z.substring(0,5),d=()=>{t||W||!S.e.IsCustomRequestAvailable?O.src=Z:H(Z,((P,a,R)=>{const S=new Blob([P],{type:!j&&R?R:j}),A=URL.createObjectURL(S);V=!0,O.src=A}),void 0,A||void 0,!0,((P,a)=>{f(a)}))},G=()=>{A&&A.loadImage(Z,O)};if(!t&&!W&&A&&A.enableTexturesOffline)A.open(G,d);else{if(-1!==Z.indexOf("file:")){const P=decodeURIComponent(Z.substring(5).toLowerCase());if(p.FilesToLoad[P]&&"undefined"!==typeof URL){try{let a;try{a=URL.createObjectURL(p.FilesToLoad[P])}catch(mP){a=URL.createObjectURL(p.FilesToLoad[P])}O.src=a,V=!0}catch(N){O.src=""}return O}}d()}return O},G=(P,a,R,S,A)=>{const p=new FileReader,j={onCompleteObservable:new Z.b,abort:()=>p.abort()};return p.onloadend=()=>j.onCompleteObservable.notifyObservers(j),A&&(p.onerror=()=>{A(new W(`Unable to read ${P.name}`,P))}),p.onload=P=>{a(P.target.result)},R&&(p.onprogress=R),S?p.readAsArrayBuffer(P):p.readAsText(P),j},H=(P,a,R,S,A,U,Q)=>{if(P.name)return G(P,a,R,A,U?P=>{U(void 0,P)}:void 0);const h=P;if(-1!==h.indexOf("file:")){let P=decodeURIComponent(h.substring(5).toLowerCase());0===P.indexOf("./")&&(P=P.substring(2));const S=p.FilesToLoad[P];if(S)return G(S,a,R,A,U?P=>U(void 0,new y(P.message,P.file)):void 0)}const{match:f,type:O}=c(h);if(f){const P={onCompleteObservable:new Z.b,abort:()=>()=>{}};try{const P=A?u(h):Y(h);a(P,void 0,O)}catch(j){U?U(void 0,j):l.c.Error(j.message||"Failed to parse the Data URL")}return V.b.SetImmediate((()=>{P.onCompleteObservable.notifyObservers(P)})),P}return mP(h,((P,R)=>{a(P,null===R||void 0===R?void 0:R.responseURL,null===R||void 0===R?void 0:R.getResponseHeader("content-type"))}),R,S,A,U?P=>{U(P.request,new y(P.message,P.request))}:void 0,Q)},mP=(P,a,R,p,j,U,Q)=>{P=k.CleanUrl(P),P=k.PreprocessUrl(P);const h=k.BaseUrl+P;let V=!1;const f={onCompleteObservable:new Z.b,abort:()=>V=!0},O=()=>{let P,Z=new S.e,p=null;const O=()=>{Z&&(R&&Z.removeEventListener("progress",R),P&&Z.removeEventListener("readystatechange",P),Z.removeEventListener("loadend",q))};let q=()=>{O(),f.onCompleteObservable.notifyObservers(f),f.onCompleteObservable.clear(),R=void 0,P=null,q=null,U=void 0,Q=void 0,a=void 0};f.abort=()=>{V=!0,q&&q(),Z&&Z.readyState!==(XMLHttpRequest.DONE||4)&&Z.abort(),null!==p&&(clearTimeout(p),p=null),Z=null};const y=P=>{const a=P.message||"Unknown error";U&&Z?U(new t(a,Z)):l.c.Error(a)},W=l=>{if(Z){if(Z.open("GET",h),Q)try{Q(Z)}catch(f){return void y(f)}j&&(Z.responseType="arraybuffer"),R&&Z.addEventListener("progress",R),q&&Z.addEventListener("loadend",q),P=()=>{if(!V&&Z&&Z.readyState===(XMLHttpRequest.DONE||4)){if(P&&Z.removeEventListener("readystatechange",P),Z.status>=200&&Z.status<300||0===Z.status&&(!(0,A.k)()||D())){const P=j?Z.response:Z.responseText;if(null!==P){try{a&&a(P,Z)}catch(f){y(f)}return}}const R=k.DefaultRetryStrategy;if(R){const P=R(h,Z,l);if(-1!==P)return O(),Z=new S.e,void(p=setTimeout((()=>W(l+1)),P))}const Q=new t("Error status: "+Z.status+" "+Z.statusText+" - Unable to load "+h,Z);U&&U(Q)}},Z.addEventListener("readystatechange",P),Z.send()}};W(0)};if(p&&p.enableSceneOffline){const S=P=>{P&&P.status>400?U&&U(P):O()},A=()=>{p&&p.loadFile(k.BaseUrl+P,(P=>{!V&&a&&a(P),f.onCompleteObservable.notifyObservers(f)}),R?P=>{!V&&R&&R(P)}:void 0,S,j)};p.open(A,S)}else O();return f},N=P=>{const{match:a,type:R}=c(P);if(a)return R||void 0;const S=P.lastIndexOf(".");switch(P.substring(S+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Rj":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},D=()=>"undefined"!==typeof location&&"file:"===location.protocol,L=P=>q.test(P),c=P=>{const a=q.exec(P);if(null===a||0===a.length)return{match:!1,type:""};return{match:!0,type:a[0].replace("data:","").replace("base64,","")}};function u(P){return(0,U.e)(P.split(",")[1])}const Y=P=>(0,U.h)(P.split(",")[1]);let J;O.e._FileToolsLoadImage=d,f.d.loadFile=H,Q.o.loadFile=H;((P,a,R,S,A,Z,p,j,U,Q)=>{J={DecodeBase64UrlToBinary:P,DecodeBase64UrlToString:a,DefaultRetryStrategy:R.DefaultRetryStrategy,BaseUrl:R.BaseUrl,CorsBehavior:R.CorsBehavior,PreprocessUrl:R.PreprocessUrl,IsBase64DataUrl:S,IsFileURL:A,LoadFile:Z,LoadImage:p,ReadFile:j,RequestFile:U,SetCorsBehavior:Q},Object.defineProperty(J,"DefaultRetryStrategy",{get:function(){return R.DefaultRetryStrategy},set:function(P){R.DefaultRetryStrategy=P}}),Object.defineProperty(J,"BaseUrl",{get:function(){return R.BaseUrl},set:function(P){R.BaseUrl=P}}),Object.defineProperty(J,"PreprocessUrl",{get:function(){return R.PreprocessUrl},set:function(P){R.PreprocessUrl=P}}),Object.defineProperty(J,"CorsBehavior",{get:function(){return R.CorsBehavior},set:function(P){R.CorsBehavior=P}})})(u,Y,k,L,D,H,d,G,mP,x)},12383:(P,a,R)=>{function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(P=>{const a=16*Math.random()|0;return("x"===P?a:3&a|8).toString(16)}))}R.d(a,{b:()=>S})},12369:(P,a,R)=>{R.d(a,{d:()=>Z});var S=R(12248),A=R(12376);class Z{static Instantiate(P){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[P])return this.RegisteredExternalClasses[P];const a=(0,A.c)(P);if(a)return a;S.c.Warn(P+" not found, you may have missed an import.");const R=P.split(".");let Z=window||this;for(let S=0,A=R.length;S<A;S++)Z=Z[R[S]];return"function"!==typeof Z?null:Z}}Z.RegisteredExternalClasses={}},12261:(P,a,R)=>{R.d(a,{c:()=>A});var S=R(12240);class A{static get Now(){return(0,S.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12298:(P,a,R)=>{R.d(a,{e:()=>p,h:()=>Z,l:()=>S,o:()=>A});const S=P=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(P);let a="";for(let R=0;R<P.byteLength;R++)a+=String.fromCharCode(P[R]);return a},A=P=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let R,S,A,Z,p,j,U,Q="",h=0;const l=ArrayBuffer.isView(P)?new Uint8Array(P.buffer,P.byteOffset,P.byteLength):new Uint8Array(P);for(;h<l.length;)R=l[h++],S=h<l.length?l[h++]:Number.NaN,A=h<l.length?l[h++]:Number.NaN,Z=R>>2,p=(3&R)<<4|S>>4,j=(15&S)<<2|A>>6,U=63&A,isNaN(S)?j=U=64:isNaN(A)&&(U=64),Q+=a.charAt(Z)+a.charAt(p)+a.charAt(j)+a.charAt(U);return Q},Z=P=>atob(P),p=P=>{const a=Z(P),R=a.length,S=new Uint8Array(new ArrayBuffer(R));for(let A=0;A<R;A++)S[A]=a.charCodeAt(A);return S.buffer}},12388:(P,a,R)=>{function S(P){let a=1;do{a*=2}while(a<P);return a===P}function A(P,a,R){return P*(1-R)+a*R}function Z(P){const a=p(P),R=j(P);return a-P>P-R?R:a}function p(P){return P--,P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,P|=P>>16,++P}function j(P){return P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,(P|=P>>16)-(P>>1)}function U(P,a){let R;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:R=j(P);break;case 2:R=Z(P);break;default:R=p(P)}return Math.min(R,a)}R.d(a,{b:()=>j,f:()=>U,i:()=>S,k:()=>A,l:()=>Z})},12225:(P,a,R)=>{R.r(a),R.d(a,{AsyncLoop:()=>W,Tools:()=>y,className:()=>t});var S=R(12232),A=R(12240),Z=R(12248),p=R(12252),j=R(12261),U=R(12266),Q=R(12268),h=R(12277),l=R(12285),V=R(12318),f=R(12369),O=R(12383),q=R(12388);class y{static get BaseUrl(){return l.g.BaseUrl}static set BaseUrl(P){l.g.BaseUrl=P}static get CleanUrl(){return l.g.CleanUrl}static set CleanUrl(P){l.g.CleanUrl=P}static IsAbsoluteUrl(P){return 0===P.indexOf("//")||-1!==P.indexOf("://")&&(-1!==P.indexOf(".")&&(-1!==P.indexOf("/")&&(!(P.indexOf(":")>P.indexOf("/"))&&(P.indexOf("://")<P.indexOf(".")||(0===P.indexOf("data:")||0===P.indexOf("blob:"))))))}static set ScriptBaseUrl(P){l.g.ScriptBaseUrl=P}static get ScriptBaseUrl(){return l.g.ScriptBaseUrl}static set CDNBaseUrl(P){y.ScriptBaseUrl=P,y.AssetBaseUrl=P}static set ScriptPreprocessUrl(P){l.g.ScriptPreprocessUrl=P}static get ScriptPreprocessUrl(){return l.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return l.g.DefaultRetryStrategy}static set DefaultRetryStrategy(P){l.g.DefaultRetryStrategy=P}static get CorsBehavior(){return l.g.CorsBehavior}static set CorsBehavior(P){l.g.CorsBehavior=P}static get UseFallbackTexture(){return h.e.UseFallbackTexture}static set UseFallbackTexture(P){h.e.UseFallbackTexture=P}static get RegisteredExternalClasses(){return f.d.RegisteredExternalClasses}static set RegisteredExternalClasses(P){f.d.RegisteredExternalClasses=P}static get fallbackTexture(){return h.e.FallbackTexture}static set fallbackTexture(P){h.e.FallbackTexture=P}static FetchToRef(P,a,R,S,A,Z){const p=4*((Math.abs(P)*R%R|0)+(Math.abs(a)*S%S|0)*R);Z.r=A[p]/255,Z.g=A[p+1]/255,Z.b=A[p+2]/255,Z.a=A[p+3]/255}static Mix(P,a,R){return 0}static Instantiate(P){return f.d.Instantiate(P)}static SetImmediate(P){V.b.SetImmediate(P)}static IsExponentOfTwo(P){return!0}static FloatRound(P){return Math.fround(P)}static GetFilename(P){const a=P.lastIndexOf("/");return a<0?P:P.substring(a+1)}static GetFolderPath(P){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const R=P.lastIndexOf("/");return R<0?a?P:"":P.substring(0,R+1)}static ToDegrees(P){return 180*P/Math.PI}static ToRadians(P){return P*Math.PI/180}static SmoothAngleChange(P,a){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const S=this.ToRadians(P),A=this.ToRadians(a);return this.ToDegrees(Math.atan2((1-R)*Math.sin(A)+R*Math.sin(S),(1-R)*Math.cos(A)+R*Math.cos(S)))}static MakeArray(P,a){return!0===a||void 0!==P&&null!=P?Array.isArray(P)?P:[P]:null}static GetPointerPrefix(P){return(0,A.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(P,a){(0,l.B)(P,a)}static SetReferrerPolicyBehavior(P,a){a.referrerPolicy=P}static get PreprocessUrl(){return l.g.PreprocessUrl}static set PreprocessUrl(P){l.g.PreprocessUrl=P}static LoadImage(P,a,R,S,A,Z){return(0,l.r)(P,a,R,S,A,Z)}static LoadFile(P,a,R,S,A,Z){return(0,l.p)(P,a,R,S,A,Z)}static async LoadFileAsync(P){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((R,S)=>{(0,l.p)(P,(P=>{R(P)}),void 0,void 0,a,((P,a)=>{S(a)}))}))}static GetAssetUrl(P){if(!P)return"";if(y.AssetBaseUrl&&P.startsWith(y._DefaultAssetsUrl)){const a="/"===y.AssetBaseUrl[y.AssetBaseUrl.length-1]?y.AssetBaseUrl.substring(0,y.AssetBaseUrl.length-1):y.AssetBaseUrl;return P.replace(y._DefaultAssetsUrl,a)}return P}static GetBabylonScriptURL(P,a){if(!P)return"";if(y.ScriptBaseUrl&&P.startsWith(y._DefaultCdnUrl)){const a="/"===y.ScriptBaseUrl[y.ScriptBaseUrl.length-1]?y.ScriptBaseUrl.substring(0,y.ScriptBaseUrl.length-1):y.ScriptBaseUrl;P=P.replace(y._DefaultCdnUrl,a)}return P=y.ScriptPreprocessUrl(P),a&&(P=y.GetAbsoluteUrl(P)),P}static LoadBabylonScript(P,a,R,S){P=y.GetBabylonScriptURL(P),y.LoadScript(P,a,R)}static async LoadBabylonScriptAsync(P){return P=y.GetBabylonScriptURL(P),await y.LoadScriptAsync(P)}static LoadScript(P,a,R,S){let Z=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(P),a&&a()}catch(U){null===R||void 0===R||R(`Unable to load script '${P}' in worker`,U)}return}if(!(0,A.k)())return void(null===R||void 0===R||R(`Cannot load script '${P}' outside of a window or a worker`));const p=document.getElementsByTagName("head")[0],j=document.createElement("script");Z?(j.setAttribute("type","module"),j.innerText=P):(j.setAttribute("type","text/javascript"),j.setAttribute("src",P)),S&&(j.id=S),j.onload=()=>{a&&a()},j.onerror=a=>{R&&R(`Unable to load script '${P}'`,a)},p.appendChild(j)}static async LoadScriptAsync(P,a){return await new Promise(((R,S)=>{this.LoadScript(P,(()=>{R()}),((P,a)=>{S(a||new Error(P))}),a)}))}static ReadFileAsDataURL(P,a,R){const A=new FileReader,Z={onCompleteObservable:new S.b,abort:()=>A.abort()};return A.onloadend=()=>{Z.onCompleteObservable.notifyObservers(Z)},A.onload=P=>{a(P.target.result)},A.onprogress=R,A.readAsDataURL(P),Z}static ReadFile(P,a,R,S,A){return(0,l.u)(P,a,R,S,A)}static FileAsURL(P){const a=new Blob([P]);return window.URL.createObjectURL(a)}static Format(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return P.toFixed(a)}static DeepCopy(P,a,R,S){p.c.DeepCopy(P,a,R,S)}static IsEmpty(P){for(const a in P)if(Object.prototype.hasOwnProperty.call(P,a))return!1;return!0}static RegisterTopRootEvents(P,a){for(let S=0;S<a.length;S++){const A=a[S];P.addEventListener(A.name,A.handler,!1);try{window.parent&&window.parent.addEventListener(A.name,A.handler,!1)}catch(R){}}}static UnregisterTopRootEvents(P,a){for(let S=0;S<a.length;S++){const A=a[S];P.removeEventListener(A.name,A.handler);try{P.parent&&P.parent.removeEventListener(A.name,A.handler)}catch(R){}}}static async DumpFramebuffer(P,a,R,S){throw(0,U.c)("DumpTools")}static DumpData(P,a,R,S){throw(0,U.c)("DumpTools")}static async DumpDataAsync(P,a,R){throw(0,U.c)("DumpTools")}static _IsOffScreenCanvas(P){return void 0!==P.convertToBlob}static ToBlob(P,a){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0;y._IsOffScreenCanvas(P)||P.toBlob||(P.toBlob=function(P,a,R){setTimeout((()=>{const S=atob(this.toDataURL(a,R).split(",")[1]),A=S.length,Z=new Uint8Array(A);for(let P=0;P<A;P++)Z[P]=S.charCodeAt(P);P(new Blob([Z]))}))}),y._IsOffScreenCanvas(P)?P.convertToBlob({type:R,quality:S}).then((P=>a(P))):P.toBlob((function(P){a(P)}),R,S)}static DownloadBlob(P,a){if("download"in document.createElement("a")){if(!a){const P=new Date;a="screenshot_"+((P.getFullYear()+"-"+(P.getMonth()+1)).slice(2)+"-"+P.getDate()+"_"+P.getHours()+"-"+("0"+P.getMinutes()).slice(-2))+".png"}y.Download(P,a)}else if(P&&"undefined"!==typeof URL){const a=URL.createObjectURL(P),R=window.open("");if(!R)return;const S=R.document.createElement("img");S.onload=function(){URL.revokeObjectURL(a)},S.src=a,R.document.body.appendChild(S)}}static EncodeScreenshotCanvasData(P,a){let R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0,A=arguments.length>4?arguments[4]:void 0;if("string"!==typeof S&&a){if(a){if(y._IsOffScreenCanvas(P))return void P.convertToBlob({type:R,quality:A}).then((P=>{const R=new FileReader;R.readAsDataURL(P),R.onloadend=()=>{const P=R.result;a(P)}}));const S=P.toDataURL(R,A);a(S)}}else this.ToBlob(P,(function(P){P&&y.DownloadBlob(P,S),a&&a("")}),R,A)}static Download(P,a){if("undefined"===typeof URL)return;const R=window.URL.createObjectURL(P),S=document.createElement("a");document.body.appendChild(S),S.style.display="none",S.href=R,S.download=a,S.addEventListener("click",(()=>{S.parentElement&&S.parentElement.removeChild(S)})),S.click(),window.URL.revokeObjectURL(R)}static BackCompatCameraNoPreventDefault(P){return"boolean"===typeof P[0]?P[0]:"boolean"===typeof P[1]&&P[1]}static CreateScreenshot(P,a,R,S){throw(0,U.c)("ScreenshotTools")}static async CreateScreenshotAsync(P,a,R){throw(0,U.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(P,a,R,S){throw(0,U.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(P,a,R){throw(0,U.c)("ScreenshotTools")}static RandomId(){return(0,O.b)()}static IsBase64(P){return(0,l.l)(P)}static DecodeBase64(P){return(0,l.d)(P)}static get errorsCount(){return Z.c.errorsCount}static Log(P){Z.c.Log(P)}static Warn(P){Z.c.Warn(P)}static Error(P){Z.c.Error(P)}static get LogCache(){return Z.c.LogCache}static ClearLogCache(){Z.c.ClearLogCache()}static set LogLevels(P){Z.c.LogLevels=P}static set PerformanceLogLevel(P){return(P&y.PerformanceUserMarkLogLevel)===y.PerformanceUserMarkLogLevel?(y.StartPerformanceCounter=y._StartUserMark,void(y.EndPerformanceCounter=y._EndUserMark)):(P&y.PerformanceConsoleLogLevel)===y.PerformanceConsoleLogLevel?(y.StartPerformanceCounter=y._StartPerformanceConsole,void(y.EndPerformanceCounter=y._EndPerformanceConsole)):(y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,void(y.EndPerformanceCounter=y._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(P,a){}static _EndPerformanceCounterDisabled(P,a){}static _StartUserMark(P){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!y._Performance){if(!(0,A.k)())return;y._Performance=window.performance}a&&y._Performance.mark&&y._Performance.mark(P+"-Begin")}static _EndUserMark(P){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&y._Performance.mark&&(y._Performance.mark(P+"-End"),y._Performance.measure(P,P+"-Begin",P+"-End"))}static _StartPerformanceConsole(P){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&(y._StartUserMark(P,a),console.time&&console.time(P))}static _EndPerformanceConsole(P){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&(y._EndUserMark(P,a),console.timeEnd(P))}static get Now(){return j.c.Now}static GetClassName(P){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],R=null;if(!a&&P.getClassName)R=P.getClassName();else{if(P instanceof Object){R=(a?P:Object.getPrototypeOf(P)).constructor.__bjsclassName__}R||(R=typeof P)}return R}static First(P,a){for(const R of P)if(a(R))return R;return null}static getFullClassName(P){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],R=null,S=null;if(!a&&P.getClassName)R=P.getClassName();else{if(P instanceof Object){const A=a?P:Object.getPrototypeOf(P);R=A.constructor.__bjsclassName__,S=A.constructor.__bjsmoduleName__}R||(R=typeof P)}return R?(null!=S?S+".":"")+R:null}static async DelayAsync(P){await new Promise((a=>{setTimeout((()=>{a()}),P)}))}static IsSafari(){return!!(0,A.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function t(P,a){return R=>{R.__bjsclassName__=P,R.__bjsmoduleName__=null!=a?a:null}}y.AssetBaseUrl="",y.UseCustomRequestHeaders=!1,y.CustomRequestHeaders=Q.e.CustomRequestHeaders,y.GetDOMTextContent=A.d,y._DefaultCdnUrl="https://cdn.babylonjs.com",y._DefaultAssetsUrl="https://assets.babylonjs.com/core",y.GetAbsoluteUrl="object"===typeof document?P=>{const a=document.createElement("a");return a.href=P,a.href}:"function"===typeof URL&&"object"===typeof location?P=>new URL(P,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},y.NoneLogLevel=Z.c.NoneLogLevel,y.MessageLogLevel=Z.c.MessageLogLevel,y.WarningLogLevel=Z.c.WarningLogLevel,y.ErrorLogLevel=Z.c.ErrorLogLevel,y.AllLogLevel=Z.c.AllLogLevel,y.IsWindowObjectExist=A.k,y.PerformanceNoneLogLevel=0,y.PerformanceUserMarkLogLevel=1,y.PerformanceConsoleLogLevel=2,y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,y.EndPerformanceCounter=y._EndPerformanceCounterDisabled;class W{constructor(P,a,R){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=P,this.index=S-1,this._done=!1,this._fn=a,this._successCallback=R}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(P,a,R){const S=new W(P,a,R,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return S.executeNext(),S}static SyncAsyncForLoop(P,a,R,S,A){let Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return W.Run(Math.ceil(P/a),(S=>{A&&A()?S.breakLoop():setTimeout((()=>{for(let Z=0;Z<a;++Z){const p=S.index*a+Z;if(p>=P)break;if(R(p),A&&A()){S.breakLoop();break}}S.executeNext()}),Z)}),S)}}y.Mix=q.k,y.IsExponentOfTwo=q.i,h.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12376:(P,a,R)=>{R.d(a,{c:()=>Z,d:()=>A});const S={};function A(P,a){S[P]=a}function Z(P){return S[P]}},12268:(P,a,R)=>{R.d(a,{e:()=>S});class S{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(S.CustomRequestHeaders).length>0||S.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const P in S.CustomRequestHeaders){const a=S.CustomRequestHeaders[P];a&&this._xhr.setRequestHeader(P,a)}}_shouldSkipRequestModifications(P){return S.SkipRequestModificationForBabylonCDN&&(P.includes("preview.babylonjs.com")||P.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(P){this._xhr.onprogress=P}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(P){this._xhr.responseType=P}get timeout(){return this._xhr.timeout}set timeout(P){this._xhr.timeout=P}addEventListener(P,a,R){this._xhr.addEventListener(P,a,R)}removeEventListener(P,a,R){this._xhr.removeEventListener(P,a,R)}abort(){this._xhr.abort()}send(P){S.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(P)}open(P,a){for(const R of S.CustomRequestModifiers){if(this._shouldSkipRequestModifications(a))return;a=R(this._xhr,a)||a}a=(a=a.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=a,this._xhr.open(P,a,!0)}setRequestHeader(P,a){this._xhr.setRequestHeader(P,a)}getResponseHeader(P){return this._xhr.getResponseHeader(P)}}S.CustomRequestHeaders={},S.CustomRequestModifiers=new Array,S.SkipRequestModificationForBabylonCDN=!0}}]);