"use strict";(self.a14qw1h7fq=self.a14qw1h7fq||[]).push([[8],{11094:(R,J,B)=>{B.d(J,{c:()=>f});var Q=B(11065),h=B(11043),y=B(11098),N=B(11117),r=B(11047);class q{constructor(){let R=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,R&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(R){this._zOffset!==R&&(this._zOffset=R,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(R){this._zOffsetUnits!==R&&(this._zOffsetUnits=R,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(R){this._cullFace!==R&&(this._cullFace=R,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(R){this._cull!==R&&(this._cull=R,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(R){this._depthFunc!==R&&(this._depthFunc=R,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(R){this._depthMask!==R&&(this._depthMask=R,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(R){this._depthTest!==R&&(this._depthTest=R,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(R){this._frontFace!==R&&(this._frontFace=R,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(R){this.isDirty&&(this._isCullDirty&&(this.cull?R.enable(R.CULL_FACE):R.disable(R.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(R.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(R.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?R.enable(R.DEPTH_TEST):R.disable(R.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(R.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(R.enable(R.POLYGON_OFFSET_FILL),R.polygonOffset(this.zOffset,this.zOffsetUnits)):R.disable(R.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(R.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class e{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(R){this._func!==R&&(this._func=R,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(R){this._funcRef!==R&&(this._funcRef=R,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(R){this._funcMask!==R&&(this._funcMask=R,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(R){this._opStencilFail!==R&&(this._opStencilFail=R,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(R){this._opDepthFail!==R&&(this._opDepthFail=R,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(R){this._opStencilDepthPass!==R&&(this._opStencilDepthPass=R,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(R){this._mask!==R&&(this._mask=R,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(R){this._enabled!==R&&(this._enabled=R,this._isStencilTestDirty=!0)}constructor(){let R=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,R&&this.reset()}reset(){var R;this.stencilMaterial=void 0,null===(R=this.stencilGlobal)||void 0===R||R.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(R){var J;if(!R)return;const B=!this.useStencilGlobalOnly&&!(null===(J=this.stencilMaterial)||void 0===J||!J.enabled);this.enabled=B?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=B?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=B?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=B?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=B?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=B?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=B?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=B?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?R.enable(R.STENCIL_TEST):R.disable(R.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(R.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(R.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(R.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class D{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=D.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=D.KEEP,this.opDepthFail=D.KEEP,this.opStencilDepthPass=D.REPLACE}get stencilFunc(){return this.func}set stencilFunc(R){this.func=R}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(R){this.funcRef=R}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(R){this.funcMask=R}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(R){this.opStencilFail=R}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(R){this.opDepthFail=R}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(R){this.opStencilDepthPass=R}get stencilMask(){return this.mask}set stencilMask(R){this.mask=R}get stencilTest(){return this.enabled}set stencilTest(R){this.enabled=R}}D.ALWAYS=519,D.KEEP=7680,D.REPLACE=7681;class l{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(R){this._alphaBlend!==R&&(this._alphaBlend=R,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(R,J,B,Q){this._blendConstants[0]===R&&this._blendConstants[1]===J&&this._blendConstants[2]===B&&this._blendConstants[3]===Q||(this._blendConstants[0]=R,this._blendConstants[1]=J,this._blendConstants[2]=B,this._blendConstants[3]=Q,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(R,J,B,Q){this._blendFunctionParameters[0]===R&&this._blendFunctionParameters[1]===J&&this._blendFunctionParameters[2]===B&&this._blendFunctionParameters[3]===Q||(this._blendFunctionParameters[0]=R,this._blendFunctionParameters[1]=J,this._blendFunctionParameters[2]=B,this._blendFunctionParameters[3]=Q,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(R,J){this._blendEquationParameters[0]===R&&this._blendEquationParameters[1]===J||(this._blendEquationParameters[0]=R,this._blendEquationParameters[1]=J,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(R){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?R.enable(R.BLEND):R.disable(R.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(R.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(R.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(R.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var E=B(11056),O=B(11124),n=B(11039),P=B(11032),A=B(11086),u=B(11133);function S(R,J){if((0,n.h)()){const{requestAnimationFrame:B}=J||window;if("function"===typeof B)return B(R)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(R);return setTimeout(R,16)}class f{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(R){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(R){R!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=R,this._depthCullingState.depthFunc=R?518:515)}setColorWrite(R){R!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=R)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(R){if(R)return this.isNDCHalfZRange?R.IS_NDC_HALF_ZRANGE="":delete R.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?R.USE_REVERSE_DEPTHBUFFER="":delete R.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?R.USE_EXACT_SRGB_CONVERSIONS="":delete R.USE_EXACT_SRGB_CONVERSIONS);{let R="";return this.isNDCHalfZRange&&(R+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(R&&(R+="\n"),R+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(R&&(R+="\n"),R+="#define USE_EXACT_SRGB_CONVERSIONS"),R}}_rebuildInternalTextures(){const R=this._internalTexturesCache.slice();for(const J of R)J._rebuild()}_rebuildRenderTargetWrappers(){const R=this._renderTargetWrapperCache.slice();for(const J of R)J._rebuild()}_rebuildEffects(){for(const R in this._compiledEffects){const J=this._compiledEffects[R];J._pipelineContext=null,J._prepareEffect()}y.Effect.ResetCache()}_rebuildGraphicsResources(){var R;this.wipeCaches(!0),this._rebuildEffects(),null===(R=this._rebuildComputeEffects)||void 0===R||R.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){h.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(R){setTimeout((()=>{this._clearEmptyResources();const J=this._depthCullingState.depthTest,B=this._depthCullingState.depthFunc,Q=this._depthCullingState.depthMask,h=this._stencilState.stencilTest;R(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=J,this._depthCullingState.depthFunc=B,this._depthCullingState.depthMask=Q,this._stencilState.stencilTest=h,this._flagContextRestored()}),0)}get D(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(R){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(R){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const R=new Uint8Array(4),J=[R,R,R,R,R,R];this._emptyCubeTexture=this.createRawCubeTexture(J,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(R){if(!R)return this._activeRenderLoops.length=0,void this._cancelFrame();const J=this._activeRenderLoops.indexOf(R);J>=0&&(this._activeRenderLoops.splice(J,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const R=this._frameHandler;if(this._frameHandler=0,(0,n.h)()){const{cancelAnimationFrame:J}=this.getHostWindow()||window;if("function"===typeof J)return J(R)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(R);return clearTimeout(R)}}o(){this.onBeginFrameObservable.notifyObservers(this)}qh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(R){this._maxFPS=R,void 0!==R&&(this._minFrameTime=R<=0?Number.MAX_VALUE:1e3/R)}_isOverFrameTime(R){if(!R||void 0===this._maxFPS)return!1;const J=R-this._lastFrameTime;return this._lastFrameTime=R,this._renderAccumulator+=J,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(R){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(R)){let R=!0;(this.D||!this.renderEvenInBackground&&this._windowIsBackground)&&(R=!1),R&&(this.o(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.qh())}}_renderLoop(R){this._processFrame(R),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let R=0;R<this._activeRenderLoops.length;R++){(0,this._activeRenderLoops[R])()}}_renderViews(){return!1}_queueNewFrame(R,J){return S(R,J)}runRenderLoop(R){-1===this._activeRenderLoops.indexOf(R)&&(this._activeRenderLoops.push(R),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(R){this._depthCullingState.depthTest=R}setZOffset(R){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-R:R}getZOffset(){const R=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-R:R}setZOffsetUnits(R){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-R:R}getZOffsetUnits(){const R=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-R:R}getHostWindow(){return(0,n.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(R){this._compatibilityMode=!0}_rebuildTextures(){for(const R of this.scenes)R._rebuildTextures();for(const R of this._virtualScenes)R._rebuildTextures()}_releaseRenderTargetWrapper(R){const J=this._renderTargetWrapperCache.indexOf(R);-1!==J&&this._renderTargetWrapperCache.splice(J,1)}get currentViewport(){return this._cachedViewport}setViewport(R,J,B){const Q=J||this.getRenderWidth(),h=B||this.getRenderHeight(),y=R.x||0,N=R.y||0;this._cachedViewport=R,this._viewport(y*Q,N*h,Q*R.width,h*R.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(R){return new Path2D(R)}get description(){let R=this.name+this.version;return this._caps.parallelShaderCompile&&(R+=" - Parallel shader compilation"),R}_createTextureBase(R,J,B,y){let N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,e=arguments.length>7?arguments[7]:void 0,D=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,E=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,n=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,P=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,A=arguments.length>13?arguments[13]:void 0,S=arguments.length>14?arguments[14]:void 0,a=arguments.length>15?arguments[15]:void 0;const s="data:"===(R=R||"").substring(0,5),x="blob:"===R.substring(0,5),I=s&&-1!==R.indexOf(";base64,"),V=E||new O.c(this,1);V!==E&&(V.label=R.substring(0,60));const M=R;!this._transformTextureUrl||I||E||l||(R=this._transformTextureUrl(R)),M!==R&&(V._originalUrl=M);const H=R.lastIndexOf(".");let d=P||(H>-1?R.substring(H).toLowerCase():"");d.indexOf("?")>-1&&(d=d.split("?")[0]);const X=(0,u.c)(d,A);y&&y.addPendingData(V),V.url=R,V.generateMipMaps=!J,V.samplingMode=N,V.invertY=B,V._useSRGBBuffer=this._getUseSRGBBuffer(!!a,J),this._doNotHandleContextLost||(V._buffer=l);let c=null;r&&!E&&(c=V.onLoadedObservable.add(r)),E||this._internalTexturesCache.push(V);const z=(B,E)=>{y&&y.removePendingData(V),R===M?(c&&V.onLoadedObservable.remove(c),Q.e.UseFallbackTexture&&R!==Q.e.FallbackTexture&&this._createTextureBase(Q.e.FallbackTexture,J,V.invertY,y,N,null,q,e,D,l,V),B=(B||"Unknown error")+(Q.e.UseFallbackTexture?" - Fallback texture was used":""),V.onErrorObservable.notifyObservers({message:B,exception:E}),q&&q(B,E)):(h.d.Warn(`Failed to load ${R}, falling back to ${M}`),this._createTextureBase(M,J,V.invertY,y,N,r,q,e,D,l,V,n,P,A,S,a))};if(X){const J=async R=>{(await X).loadData(R,V,((R,J,B,Q,h,r)=>{r?z("TextureLoader failed to load data"):e(V,d,y,{width:R,height:J},V.invertY,!B,Q,(()=>(h(),!1)),N)}),S)};l?l instanceof ArrayBuffer?J(new Uint8Array(l)):ArrayBuffer.isView(l)?J(l):q&&q("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(R,(R=>{J(new Uint8Array(R))}),void 0,y?y.offlineProvider:void 0,!0,((R,J)=>{z("Unable to load "+(R&&R.responseURL,J))}))}else{const B=R=>{x&&!this._doNotHandleContextLost&&(V._buffer=R),e(V,d,y,R,V.invertY,J,!1,D,N)};!s||I?l&&("string"===typeof l.decoding||l.close)?B(l):f._FileToolsLoadImage(R||"",B,z,y?y.offlineProvider:null,A,V.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof l||l instanceof ArrayBuffer||ArrayBuffer.isView(l)||l instanceof Blob?f._FileToolsLoadImage(l,B,z,y?y.offlineProvider:null,A,V.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):l&&B(l)}return V}_rebuildBuffers(){for(const R of this._uniformBuffers)R._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,n.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const R in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,R)&&(this._boundTexturesCache[R]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(R){this._name=R}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(R){this._hardwareScalingLevel=R,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(R){this._doNotHandleContextLost=R}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(R,J,B){var h,y;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new q,this._stencilStateComposer=new e,this._stencilState=new D,this._alphaState=new l,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new P.e,this.onCanvasFocusObservable=new P.e,this.onNewSceneAddedObservable=new P.e,this.onResizeObservable=new P.e,this.onCanvasPointerOutObservable=new P.e,this.onEffectErrorObservable=new P.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new P.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=R=>this._renderLoop(R),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new P.e,this.onAfterShaderCompilationObservable=new P.e,this.onBeginFrameObservable=new P.e,this.onEndFrameObservable=new P.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new P.e,this.onContextRestoredObservable=new P.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.eh=new P.e,this.onReleaseEffectsObservable=new P.e,Q.e.Instances.push(this),this.startTime=r.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,N.e.SetMatrixPrecision(!!J.useHighPrecisionMatrix),(0,n.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=B??!1,J.antialias=R??J.antialias,J.deterministicLockstep=J.deterministicLockstep??!1,J.lockstepMaxSteps=J.lockstepMaxSteps??4,J.timeStep=J.timeStep??1/60,J.stencil=J.stencil??!0,this._audioContext=(null===(h=J.audioEngineOptions)||void 0===h?void 0:h.audioContext)??null,this._audioDestination=(null===(y=J.audioEngineOptions)||void 0===y?void 0:y.audioDestination)??null,this.premultipliedAlpha=J.premultipliedAlpha??!0,this._doNotHandleContextLost=!!J.doNotHandleContextLost,this._isStencilEnable=!!J.stencil,this.useExactSrgbConversions=J.useExactSrgbConversions??!1;const E=(0,n.h)()&&window.devicePixelRatio||1,O=J.limitDeviceRatio||E;B=B||J.adaptToDeviceRatio||!1,this._hardwareScalingLevel=B?1/Math.min(O,E):1,this._lastDevicePixelRatio=E,this._creationOptions=J}resize(){let R,J,B=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const R=(0,n.h)()&&window.devicePixelRatio||1,J=this._lastDevicePixelRatio/R;this._lastDevicePixelRatio=R,this._hardwareScalingLevel*=J}if((0,n.h)()&&(0,n.f)())if(this._renderingCanvas){var Q,h;const B=null===(Q=(h=this._renderingCanvas).getBoundingClientRect)||void 0===Q?void 0:Q.call(h);R=this._renderingCanvas.clientWidth||(null===B||void 0===B?void 0:B.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,J=this._renderingCanvas.clientHeight||(null===B||void 0===B?void 0:B.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else R=window.innerWidth,J=window.innerHeight;else R=this._renderingCanvas?this._renderingCanvas.width:100,J=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(R/this._hardwareScalingLevel,J/this._hardwareScalingLevel,B)}setSize(R,J){let B=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(R|=0,J|=0,!B&&this._renderingCanvas.width===R&&this._renderingCanvas.height===J)return!1;if(this._renderingCanvas.width=R,this._renderingCanvas.height=J,this.scenes){for(let R=0;R<this.scenes.length;R++){const J=this.scenes[R];for(let R=0;R<J.cameras.length;R++){J.cameras[R]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(R,J,B,Q,h,y,N,r,q,e,D){throw(0,E.c)("engine.rawTexture")}createRawCubeTexture(R,J,B,Q,h,y,N,r){throw(0,E.c)("engine.rawTexture")}createRawTexture3D(R,J,B,Q,h,y,N,r,q,e,D){throw(0,E.c)("engine.rawTexture")}createRawTexture2DArray(R,J,B,Q,h,y,N,r,q,e,D){throw(0,E.c)("engine.rawTexture")}_sharedInit(R){this._renderingCanvas=R}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const R=navigator.userAgent;this.hostInformation.isMobile=-1!==R.indexOf("Mobile")||-1!==R.indexOf("Mac")&&(0,n.f)()&&"ontouchend"in document},this._checkForMobile(),(0,n.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(R){return document.createElement("video")}_reportDrawCall(){var R;let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(R=this._drawCalls)||void 0===R||R.addCount(J,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(R,J){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(R,J){return createImageBitmap(R,J)}resizeImageBitmap(R,J,B){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(R){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(R,J){if("undefined"===typeof document)return new OffscreenCanvas(R,J);const B=document.createElement("canvas");return B.width=R,B.height=J,B}createCanvas(R,J){return f._CreateCanvas(R,J)}static _FileToolsLoadImage(R,J,B,Q,h,y,N){throw(0,E.c)("FileTools")}_loadFile(R,J,B,Q,h,y){const N=(0,A.h)(R,J,B,Q,h,y);return this._activeRequests.push(N),N.onCompleteObservable.add((()=>{const R=this._activeRequests.indexOf(N);-1!==R&&this._activeRequests.splice(R,1)})),N}static _FileToolsLoadFile(R,J,B,Q,h,y){if(A.c.loadFile)return A.c.loadFile(R,J,B,Q,h,y);throw(0,E.c)("FileTools")}dispose(){var R;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(R=this.releaseComputeEffects)||void 0===R||R.call(this),y.Effect.ResetCache();for(const B of this._activeRequests)B.abort();this._boundRenderFunction=null,this.eh.notifyObservers(this),this.eh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,n.h)()&&window.removeEventListener("resize",this._checkForMobile);const J=Q.e.Instances.indexOf(this);J>=0&&Q.e.Instances.splice(J,1),Q.e.Instances.length||(Q.e.OnEnginesDisposedObservable.notifyObservers(this),Q.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(R){throw(0,E.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(R,J){for(let B=0;B<Q.e.Instances.length;B++){const h=Q.e.Instances[B];for(let B=0;B<h.scenes.length;B++)h.scenes[B].markAllMaterialsAsDirty(R,J)}}}f._RenderPassIdCounter=0,f._RescalePostProcessFactory=null,f.CollisionsEpsilon=.001,f.QueueNewFrame=S},11065:(R,J,B)=>{B.d(J,{e:()=>h});var Q=B(11032);class h{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}h.Instances=[],h.OnEnginesDisposedObservable=new Q.e,h._LastCreatedScene=null,h.UseFallbackTexture=!0,h.FallbackTexture=""},11117:(R,J,B)=>{B.d(J,{e:()=>Q});class Q{static SetMatrixPrecision(R){if(Q.MatrixTrackPrecisionChange=!1,R&&!Q.MatrixUse64Bits&&Q.MatrixTrackedMatrices)for(let J=0;J<Q.MatrixTrackedMatrices.length;++J){const R=Q.MatrixTrackedMatrices[J],B=R.nh;R.nh=new Array(16);for(let J=0;J<16;++J)R.nh[J]=B[J]}Q.MatrixUse64Bits=R,Q.MatrixCurrentType=Q.MatrixUse64Bits?Array:Float32Array,Q.MatrixTrackedMatrices=null}}Q.MatrixUse64Bits=!1,Q.MatrixTrackPrecisionChange=!0,Q.MatrixCurrentType=Float32Array,Q.MatrixTrackedMatrices=[]},11133:(R,J,B)=>{B.d(J,{c:()=>N});var Q=B(11043);const h=new Map;function y(R,J){(function(R){return h.delete(R)})(R)&&Q.d.Warn(`Extension with the name '${R}' already exists`),h.set(R,J)}function N(R,J){"image/ktx"!==J&&"image/ktx2"!==J||(R=".ktx"),h.has(R)||(R.endsWith(".ies")&&y(".ies",(async()=>await B.e(15).then(B.bind(B,13626)).then((R=>new R._IESTextureLoader)))),R.endsWith(".dds")&&y(".dds",(async()=>await Promise.all([B.e(14),B.e(17),B.e(13),B.e(19),B.e(18),B.e(28)]).then(B.bind(B,13630)).then((R=>new R._DDSTextureLoader)))),R.endsWith(".basis")&&y(".basis",(async()=>await Promise.all([B.e(14),B.e(17),B.e(13),B.e(47)]).then(B.bind(B,13646)).then((R=>new R._BasisTextureLoader)))),R.endsWith(".env")&&y(".env",(async()=>await Promise.all([B.e(14),B.e(17),B.e(13),B.e(19),B.e(18),B.e(23),B.e(21),B.e(45),B.e(48)]).then(B.bind(B,13652)).then((R=>new R._ENVTextureLoader)))),R.endsWith(".hdr")&&y(".hdr",(async()=>await Promise.all([B.e(14),B.e(49)]).then(B.bind(B,13654)).then((R=>new R._HDRTextureLoader)))),(R.endsWith(".ktx")||R.endsWith(".ktx2"))&&(y(".ktx",(async()=>await B.e(30).then(B.bind(B,13659)).then((R=>new R._KTXTextureLoader)))),y(".ktx2",(async()=>await B.e(30).then(B.bind(B,13659)).then((R=>new R._KTXTextureLoader))))),R.endsWith(".tga")&&y(".tga",(async()=>await B.e(50).then(B.bind(B,13666)).then((R=>new R._TGATextureLoader)))),R.endsWith(".exr")&&y(".exr",(async()=>await B.e(16).then(B.bind(B,13668)).then((R=>new R._ExrTextureLoader)))));const Q=h.get(R);return Q?Promise.resolve(Q(J)):null}},11124:(R,J,B)=>{B.d(J,{c:()=>N});var Q,h=B(11032),y=B(11128);!function(R){R[R.Unknown=0]="Unknown",R[R.Url=1]="Url",R[R.Temp=2]="Temp",R[R.Raw=3]="Raw",R[R.Dynamic=4]="Dynamic",R[R.RenderTarget=5]="RenderTarget",R[R.MultiRenderTarget=6]="MultiRenderTarget",R[R.Cube=7]="Cube",R[R.CubeRaw=8]="CubeRaw",R[R.CubePrefiltered=9]="CubePrefiltered",R[R.Raw3D=10]="Raw3D",R[R.Raw2DArray=11]="Raw2DArray",R[R.DepthStencil=12]="DepthStencil",R[R.CubeRawRGBD=13]="CubeRawRGBD",R[R.Depth=14]="Depth"}(Q||(Q={}));class N extends y.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(R){this.generateMipMaps=R}get uniqueId(){return this._uniqueId}_setUniqueId(R){this._uniqueId=R}getEngine(){return this._engine}get source(){return this._source}constructor(R,J){let B=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new h.e,this.onErrorObservable=new h.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=R,this._source=J,this._uniqueId=N._Counter++,B||(this._hardwareTexture=R._createHardwareTexture())}incrementReferences(){this._references++}updateSize(R,J){let B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,R,J,B),this.width=R,this.height=J,this.depth=B,this.baseWidth=R,this.baseHeight=J,this.baseDepth=B,this._size=R*J*B}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const R=this.onRebuildCallback(this),J=J=>{J._swapAndDie(this,!1),this.isReady=R.isReady};return void(R.isAsync?R.proxy.then(J):J(R.proxy))}let R;switch(this.source){case 2:case 12:case 14:break;case 1:return void(R=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(R=>{R._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:R=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),R._swapAndDie(this,!1),this.isReady=!0;break;case 10:R=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),R._swapAndDie(this,!1),this.isReady=!0;break;case 11:R=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),R._swapAndDie(this,!1),this.isReady=!0;break;case 4:R=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),R._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(R=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{R._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:R=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),R._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return R=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(R=>{R&&R._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(R._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(R){var J;let B=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(J=this._hardwareTexture)||void 0===J||J.setUsage(R._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),R._hardwareTexture=this._hardwareTexture,B&&(R._isRGBD=this._isRGBD),this._lodTextureHigh&&(R._lodTextureHigh&&R._lodTextureHigh.dispose(),R._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(R._lodTextureMid&&R._lodTextureMid.dispose(),R._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(R._lodTextureLow&&R._lodTextureLow.dispose(),R._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(R._irradianceTexture&&R._irradianceTexture.dispose(),R._irradianceTexture=this._irradianceTexture);const Q=this._engine.getLoadedTexturesCache();let h=Q.indexOf(this);-1!==h&&Q.splice(h,1),h=Q.indexOf(R),-1===h&&Q.push(R)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}N._Counter=0},11128:(R,J,B)=>{B.d(J,{d:()=>Q});class Q{get wrapU(){return this._cachedWrapU}set wrapU(R){this._cachedWrapU=R}get wrapV(){return this._cachedWrapV}set wrapV(R){this._cachedWrapV=R}get wrapR(){return this._cachedWrapR}set wrapR(R){this._cachedWrapR=R}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(R){this._cachedAnisotropicFilteringLevel=R}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(R){this._comparisonFunction=R}get useMipMaps(){return this._useMipMaps}set useMipMaps(R){this._useMipMaps=R}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=R,this._cachedWrapV=J,this._cachedWrapR=B,this._cachedAnisotropicFilteringLevel=Q,this.samplingMode=h,this._comparisonFunction=y,this}compareSampler(R){return this._cachedWrapU===R._cachedWrapU&&this._cachedWrapV===R._cachedWrapV&&this._cachedWrapR===R._cachedWrapR&&this._cachedAnisotropicFilteringLevel===R._cachedAnisotropicFilteringLevel&&this.samplingMode===R.samplingMode&&this._comparisonFunction===R._comparisonFunction&&this._useMipMaps===R._useMipMaps}}},11045:(R,J,B)=>{B.d(J,{d:()=>y});var Q=B(11043);const h=(R,J,B)=>R?R.getClassName&&"Mesh"===R.getClassName()?null:!R.getClassName||"SubMesh"!==R.getClassName()&&"PhysicsBody"!==R.getClassName()?R.clone?R.clone():Array.isArray(R)?R.slice():B&&"object"===typeof R?{...R}:null:R.clone(J):null;class y{static DeepCopy(R,J,B,y){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=function(R){const J=[];do{const B=Object.getOwnPropertyNames(R);for(const R of B)-1===J.indexOf(R)&&J.push(R)}while(R=Object.getPrototypeOf(R));return J}(R);for(const e of r){if("_"===e[0]&&(!y||-1===y.indexOf(e)))continue;if(e.endsWith("Observable"))continue;if(B&&-1!==B.indexOf(e))continue;const r=R[e],D=typeof r;if("function"!==D)try{if("object"===D)if(r instanceof Uint8Array)J[e]=Uint8Array.from(r);else if(r instanceof Array){if(J[e]=[],r.length>0)if("object"==typeof r[0])for(let R=0;R<r.length;R++){const B=h(r[R],J,N);-1===J[e].indexOf(B)&&J[e].push(B)}else J[e]=r.slice(0)}else J[e]=h(r,J,N);else J[e]=r}catch(q){Q.d.Warn(q.message)}}}}},11077:(R,J,B)=>{B.d(J,{d:()=>Q,e:()=>h,i:()=>y});class Q extends Error{}Q._setPrototypeOf=Object.setPrototypeOf||((R,J)=>(R.__proto__=J,R));const h={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class y extends Q{constructor(R,J,B){super(R),this.errorCode=J,this.innerError=B,this.name="RuntimeError",Q._setPrototypeOf(this,y.prototype)}}},11073:(R,J,B)=>{B.d(J,{d:()=>z,e:()=>f,i:()=>H,j:()=>X,n:()=>V,k:()=>A,q:()=>x,r:()=>I,s:()=>M,u:()=>a});var Q=B(11060),h=B(11039),y=B(11032);class N{}N.FilesToLoad={};var r=B(11077),q=B(11079),e=B(11081),D=B(11065),l=B(11043),E=B(11090),O=B(11086),n=B(11094);const P=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class A extends r.i{constructor(R,J){super(R,r.e.LoadFileError),this.name="LoadFileError",r.d._setPrototypeOf(this,A.prototype),J instanceof Q.c?this.request=J:this.file=J}}class u extends r.i{constructor(R,J){super(R,r.e.RequestFileError),this.request=J,this.name="RequestFileError",r.d._setPrototypeOf(this,u.prototype)}}class S extends r.i{constructor(R,J){super(R,r.e.ReadFileError),this.file=J,this.name="ReadFileError",r.d._setPrototypeOf(this,S.prototype)}}const f={DefaultRetryStrategy:class{static ExponentialBackoff(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(B,Q,h)=>0!==Q.status||h>=R||-1!==B.indexOf("file:")?-1:Math.pow(2,h)*J}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:R=>R,ScriptBaseUrl:"",ScriptPreprocessUrl:R=>R,CleanUrl:R=>R=R.replace(/#/gm,"%23")},a=(R,J)=>{if((!R||0!==R.indexOf("data:"))&&f.CorsBehavior)if("string"===typeof f.CorsBehavior||f.CorsBehavior instanceof String)J.crossOrigin=f.CorsBehavior;else{const B=f.CorsBehavior(R);B&&(J.crossOrigin=B)}},s={getRequiredSize:null},x=function(R,J,B,h){let y,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",e=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:D.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===l||void 0===l||!l._features.forceBitmapOverHTMLImageElement))return B("LoadImage is only supported in web or BabylonNative environments."),null;let E=!1;R instanceof ArrayBuffer||ArrayBuffer.isView(R)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(y=URL.createObjectURL(new Blob([R],{type:r})),E=!0):y=`data:${r};base64,`+(0,q.j)(R):R instanceof Blob?(y=URL.createObjectURL(R),E=!0):(y=f.CleanUrl(R),y=f.PreprocessUrl(y));const O=J=>{if(B){const Q=y||R.toString();B(`Error while trying to load image: ${0===Q.indexOf("http")||Q.length<=128?Q:Q.slice(0,128)+"..."}`,J)}};if(null!==l&&void 0!==l&&l._features.forceBitmapOverHTMLImageElement)return V(y,(Q=>{l.createImageBitmap(new Blob([Q],{type:r}),{premultiplyAlpha:"none",...e}).then((R=>{J(R),E&&URL.revokeObjectURL(y)})).catch((J=>{B&&B("Error while trying to load image: "+R,J)}))}),void 0,h||void 0,!0,((R,J)=>{O(J)})),null;const n=new Image;if(s.getRequiredSize){const J=s.getRequiredSize(R);J.width&&(n.width=J.width),J.height&&(n.height=J.height)}a(y,n);const P=[],A=()=>{for(const R of P)R.target.removeEventListener(R.name,R.handler);P.length=0};P.push({target:n,name:"load",handler:()=>{A(),J(n),E&&n.src&&URL.revokeObjectURL(n.src)}}),P.push({target:n,name:"error",handler:R=>{A(),O(R),E&&n.src&&URL.revokeObjectURL(n.src)}}),P.push({target:document,name:"securitypolicyviolation",handler:R=>{if(R.blockedURI!==n.src||"uh"===R.disposition)return;A();const J=new Error(`CSP violation of policy ${R.effectiveDirective} ${R.blockedURI}. Current policy is ${R.originalPolicy}`);D.e.UseFallbackTexture=!1,O(J),E&&n.src&&URL.revokeObjectURL(n.src),n.src=""}}),(()=>{for(const R of P)R.target.addEventListener(R.name,R.handler)})();const u="blob:"===y.substring(0,5),S="data:"===y.substring(0,5),x=()=>{u||S||!Q.c.IsCustomRequestAvailable?n.src=y:V(y,((R,J,B)=>{const Q=new Blob([R],{type:!r&&B?B:r}),h=URL.createObjectURL(Q);E=!0,n.src=h}),void 0,h||void 0,!0,((R,J)=>{O(J)}))},I=()=>{h&&h.loadImage(y,n)};if(!u&&!S&&h&&h.enableTexturesOffline)h.open(I,x);else{if(-1!==y.indexOf("file:")){const R=decodeURIComponent(y.substring(5).toLowerCase());if(N.FilesToLoad[R]&&"undefined"!==typeof URL){try{let J;try{J=URL.createObjectURL(N.FilesToLoad[R])}catch(M){J=URL.createObjectURL(N.FilesToLoad[R])}n.src=J,E=!0}catch(H){n.src=""}return n}}x()}return n},I=(R,J,B,Q,h)=>{const N=new FileReader,r={onCompleteObservable:new y.e,abort:()=>N.abort()};return N.onloadend=()=>r.onCompleteObservable.notifyObservers(r),h&&(N.onerror=()=>{h(new S(`Unable to read ${R.name}`,R))}),N.onload=R=>{J(R.target.result)},B&&(N.onprogress=B),Q?N.readAsArrayBuffer(R):N.readAsText(R),r},V=(R,J,B,Q,h,q,e)=>{if(R.name)return I(R,J,B,h,q?R=>{q(void 0,R)}:void 0);const D=R;if(-1!==D.indexOf("file:")){let R=decodeURIComponent(D.substring(5).toLowerCase());0===R.indexOf("./")&&(R=R.substring(2));const Q=N.FilesToLoad[R];if(Q)return I(Q,J,B,h,q?R=>q(void 0,new A(R.message,R.file)):void 0)}const{match:O,type:n}=c(D);if(O){const R={onCompleteObservable:new y.e,abort:()=>()=>{}};try{const R=h?z(D):p(D);J(R,void 0,n)}catch(r){q?q(void 0,r):l.d.Error(r.message||"Failed to parse the Data URL")}return E.d.SetImmediate((()=>{R.onCompleteObservable.notifyObservers(R)})),R}return M(D,((R,B)=>{J(R,null===B||void 0===B?void 0:B.responseURL,null===B||void 0===B?void 0:B.getResponseHeader("content-type"))}),B,Q,h,q?R=>{q(R.request,new A(R.message,R.request))}:void 0,e)},M=(R,J,B,N,r,q,e)=>{R=f.CleanUrl(R),R=f.PreprocessUrl(R);const D=f.BaseUrl+R;let E=!1;const O={onCompleteObservable:new y.e,abort:()=>E=!0},n=()=>{let R,y=new Q.c,N=null;const n=()=>{y&&(B&&y.removeEventListener("progress",B),R&&y.removeEventListener("readystatechange",R),y.removeEventListener("loadend",P))};let P=()=>{n(),O.onCompleteObservable.notifyObservers(O),O.onCompleteObservable.clear(),B=void 0,R=null,P=null,q=void 0,e=void 0,J=void 0};O.abort=()=>{E=!0,P&&P(),y&&y.readyState!==(XMLHttpRequest.DONE||4)&&y.abort(),null!==N&&(clearTimeout(N),N=null),y=null};const A=R=>{const J=R.message||"Unknown error";q&&y?q(new u(J,y)):l.d.Error(J)},S=l=>{if(y){if(y.open("GET",D),e)try{e(y)}catch(O){return void A(O)}r&&(y.responseType="arraybuffer"),B&&y.addEventListener("progress",B),P&&y.addEventListener("loadend",P),R=()=>{if(!E&&y&&y.readyState===(XMLHttpRequest.DONE||4)){if(R&&y.removeEventListener("readystatechange",R),y.status>=200&&y.status<300||0===y.status&&(!(0,h.h)()||d())){const R=r?y.response:y.responseText;if(null!==R){try{J&&J(R,y)}catch(O){A(O)}return}}const B=f.DefaultRetryStrategy;if(B){const R=B(D,y,l);if(-1!==R)return n(),y=new Q.c,void(N=setTimeout((()=>S(l+1)),R))}const e=new u("Error status: "+y.status+" "+y.statusText+" - Unable to load "+D,y);q&&q(e)}},y.addEventListener("readystatechange",R),y.send()}};S(0)};if(N&&N.enableSceneOffline){const Q=R=>{R&&R.status>400?q&&q(R):n()},h=()=>{N&&N.loadFile(f.BaseUrl+R,(R=>{!E&&J&&J(R),O.onCompleteObservable.notifyObservers(O)}),B?R=>{!E&&B&&B(R)}:void 0,Q,r)};N.open(h,Q)}else n();return O},H=R=>{const{match:J,type:B}=c(R);if(J)return B||void 0;const Q=R.lastIndexOf(".");switch(R.substring(Q+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"xh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},d=()=>"undefined"!==typeof location&&"file:"===location.protocol,X=R=>P.test(R),c=R=>{const J=P.exec(R);if(null===J||0===J.length)return{match:!1,type:""};return{match:!0,type:J[0].replace("data:","").replace("base64,","")}};function z(R){return(0,q.b)(R.split(",")[1])}const p=R=>(0,q.e)(R.split(",")[1]);let i;n.c._FileToolsLoadImage=x,O.c.loadFile=V,e.j.loadFile=V;((R,J,B,Q,h,y,N,r,q,e)=>{i={DecodeBase64UrlToBinary:R,DecodeBase64UrlToString:J,DefaultRetryStrategy:B.DefaultRetryStrategy,BaseUrl:B.BaseUrl,CorsBehavior:B.CorsBehavior,PreprocessUrl:B.PreprocessUrl,IsBase64DataUrl:Q,IsFileURL:h,LoadFile:y,LoadImage:N,ReadFile:r,RequestFile:q,SetCorsBehavior:e},Object.defineProperty(i,"DefaultRetryStrategy",{get:function(){return B.DefaultRetryStrategy},set:function(R){B.DefaultRetryStrategy=R}}),Object.defineProperty(i,"BaseUrl",{get:function(){return B.BaseUrl},set:function(R){B.BaseUrl=R}}),Object.defineProperty(i,"PreprocessUrl",{get:function(){return B.PreprocessUrl},set:function(R){B.PreprocessUrl=R}}),Object.defineProperty(i,"CorsBehavior",{get:function(){return B.CorsBehavior},set:function(R){B.CorsBehavior=R}})})(z,p,f,X,d,V,x,I,M,a)},11148:(R,J,B)=>{function Q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(R=>{const J=16*Math.random()|0;return("x"===R?J:3&J|8).toString(16)}))}B.d(J,{c:()=>Q})},11138:(R,J,B)=>{B.d(J,{c:()=>y});var Q=B(11043),h=B(11142);class y{static Instantiate(R){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[R])return this.RegisteredExternalClasses[R];const J=(0,h.e)(R);if(J)return J;Q.d.Warn(R+" not found, you may have missed an import.");const B=R.split(".");let y=window||this;for(let Q=0,h=B.length;Q<h;Q++)y=y[B[Q]];return"function"!==typeof y?null:y}}y.RegisteredExternalClasses={}},11047:(R,J,B)=>{B.d(J,{c:()=>h});var Q=B(11039);class h{static get Now(){return(0,Q.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11079:(R,J,B)=>{B.d(J,{b:()=>N,e:()=>y,i:()=>Q,j:()=>h});const Q=R=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(R);let J="";for(let B=0;B<R.byteLength;B++)J+=String.fromCharCode(R[B]);return J},h=R=>{const J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let B,Q,h,y,N,r,q,e="",D=0;const l=ArrayBuffer.isView(R)?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):new Uint8Array(R);for(;D<l.length;)B=l[D++],Q=D<l.length?l[D++]:Number.NaN,h=D<l.length?l[D++]:Number.NaN,y=B>>2,N=(3&B)<<4|Q>>4,r=(15&Q)<<2|h>>6,q=63&h,isNaN(Q)?r=q=64:isNaN(h)&&(q=64),e+=J.charAt(y)+J.charAt(N)+J.charAt(r)+J.charAt(q);return e},y=R=>atob(R),N=R=>{const J=y(R),B=J.length,Q=new Uint8Array(new ArrayBuffer(B));for(let h=0;h<B;h++)Q[h]=J.charCodeAt(h);return Q.buffer}},11150:(R,J,B)=>{function Q(R){let J=1;do{J*=2}while(J<R);return J===R}function h(R,J,B){return R*(1-B)+J*B}function y(R){const J=N(R),B=r(R);return J-R>R-B?B:J}function N(R){return R--,R|=R>>1,R|=R>>2,R|=R>>4,R|=R>>8,R|=R>>16,++R}function r(R){return R|=R>>1,R|=R>>2,R|=R>>4,R|=R>>8,(R|=R>>16)-(R>>1)}function q(R,J){let B;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:B=r(R);break;case 2:B=y(R);break;default:B=N(R)}return Math.min(B,J)}B.d(J,{d:()=>r,e:()=>q,g:()=>Q,k:()=>h,l:()=>y})},11030:(R,J,B)=>{B.r(J),B.d(J,{AsyncLoop:()=>S,Tools:()=>A,className:()=>u});var Q=B(11032),h=B(11039),y=B(11043),N=B(11045),r=B(11047),q=B(11056),e=B(11060),D=B(11065),l=B(11073),E=B(11090),O=B(11138),n=B(11148),P=B(11150);class A{static get BaseUrl(){return l.e.BaseUrl}static set BaseUrl(R){l.e.BaseUrl=R}static get CleanUrl(){return l.e.CleanUrl}static set CleanUrl(R){l.e.CleanUrl=R}static IsAbsoluteUrl(R){return 0===R.indexOf("//")||-1!==R.indexOf("://")&&(-1!==R.indexOf(".")&&(-1!==R.indexOf("/")&&(!(R.indexOf(":")>R.indexOf("/"))&&(R.indexOf("://")<R.indexOf(".")||(0===R.indexOf("data:")||0===R.indexOf("blob:"))))))}static set ScriptBaseUrl(R){l.e.ScriptBaseUrl=R}static get ScriptBaseUrl(){return l.e.ScriptBaseUrl}static set CDNBaseUrl(R){A.ScriptBaseUrl=R,A.AssetBaseUrl=R}static set ScriptPreprocessUrl(R){l.e.ScriptPreprocessUrl=R}static get ScriptPreprocessUrl(){return l.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return l.e.DefaultRetryStrategy}static set DefaultRetryStrategy(R){l.e.DefaultRetryStrategy=R}static get CorsBehavior(){return l.e.CorsBehavior}static set CorsBehavior(R){l.e.CorsBehavior=R}static get UseFallbackTexture(){return D.e.UseFallbackTexture}static set UseFallbackTexture(R){D.e.UseFallbackTexture=R}static get RegisteredExternalClasses(){return O.c.RegisteredExternalClasses}static set RegisteredExternalClasses(R){O.c.RegisteredExternalClasses=R}static get fallbackTexture(){return D.e.FallbackTexture}static set fallbackTexture(R){D.e.FallbackTexture=R}static FetchToRef(R,J,B,Q,h,y){const N=4*((Math.abs(R)*B%B|0)+(Math.abs(J)*Q%Q|0)*B);y.r=h[N]/255,y.g=h[N+1]/255,y.b=h[N+2]/255,y.a=h[N+3]/255}static Mix(R,J,B){return 0}static Instantiate(R){return O.c.Instantiate(R)}static SetImmediate(R){E.d.SetImmediate(R)}static IsExponentOfTwo(R){return!0}static FloatRound(R){return Math.fround(R)}static GetFilename(R){const J=R.lastIndexOf("/");return J<0?R:R.substring(J+1)}static GetFolderPath(R){let J=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const B=R.lastIndexOf("/");return B<0?J?R:"":R.substring(0,B+1)}static ToDegrees(R){return 180*R/Math.PI}static ToRadians(R){return R*Math.PI/180}static SmoothAngleChange(R,J){let B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Q=this.ToRadians(R),h=this.ToRadians(J);return this.ToDegrees(Math.atan2((1-B)*Math.sin(h)+B*Math.sin(Q),(1-B)*Math.cos(h)+B*Math.cos(Q)))}static MakeArray(R,J){return!0===J||void 0!==R&&null!=R?Array.isArray(R)?R:[R]:null}static GetPointerPrefix(R){return(0,h.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(R,J){(0,l.u)(R,J)}static SetReferrerPolicyBehavior(R,J){J.referrerPolicy=R}static get PreprocessUrl(){return l.e.PreprocessUrl}static set PreprocessUrl(R){l.e.PreprocessUrl=R}static LoadImage(R,J,B,Q,h,y){return(0,l.q)(R,J,B,Q,h,y)}static LoadFile(R,J,B,Q,h,y){return(0,l.n)(R,J,B,Q,h,y)}static async LoadFileAsync(R){let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((B,Q)=>{(0,l.n)(R,(R=>{B(R)}),void 0,void 0,J,((R,J)=>{Q(J)}))}))}static GetAssetUrl(R){if(!R)return"";if(A.AssetBaseUrl&&R.startsWith(A._DefaultAssetsUrl)){const J="/"===A.AssetBaseUrl[A.AssetBaseUrl.length-1]?A.AssetBaseUrl.substring(0,A.AssetBaseUrl.length-1):A.AssetBaseUrl;return R.replace(A._DefaultAssetsUrl,J)}return R}static GetBabylonScriptURL(R,J){if(!R)return"";if(A.ScriptBaseUrl&&R.startsWith(A._DefaultCdnUrl)){const J="/"===A.ScriptBaseUrl[A.ScriptBaseUrl.length-1]?A.ScriptBaseUrl.substring(0,A.ScriptBaseUrl.length-1):A.ScriptBaseUrl;R=R.replace(A._DefaultCdnUrl,J)}return R=A.ScriptPreprocessUrl(R),J&&(R=A.GetAbsoluteUrl(R)),R}static LoadBabylonScript(R,J,B,Q){R=A.GetBabylonScriptURL(R),A.LoadScript(R,J,B)}static async LoadBabylonScriptAsync(R){return R=A.GetBabylonScriptURL(R),await A.LoadScriptAsync(R)}static LoadScript(R,J,B,Q){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(R),J&&J()}catch(q){null===B||void 0===B||B(`Unable to load script '${R}' in worker`,q)}return}if(!(0,h.h)())return void(null===B||void 0===B||B(`Cannot load script '${R}' outside of a window or a worker`));const N=document.getElementsByTagName("head")[0],r=document.createElement("script");y?(r.setAttribute("type","module"),r.innerText=R):(r.setAttribute("type","text/javascript"),r.setAttribute("src",R)),Q&&(r.id=Q),r.onload=()=>{J&&J()},r.onerror=J=>{B&&B(`Unable to load script '${R}'`,J)},N.appendChild(r)}static async LoadScriptAsync(R,J){return await new Promise(((B,Q)=>{this.LoadScript(R,(()=>{B()}),((R,J)=>{Q(J||new Error(R))}),J)}))}static ReadFileAsDataURL(R,J,B){const h=new FileReader,y={onCompleteObservable:new Q.e,abort:()=>h.abort()};return h.onloadend=()=>{y.onCompleteObservable.notifyObservers(y)},h.onload=R=>{J(R.target.result)},h.onprogress=B,h.readAsDataURL(R),y}static ReadFile(R,J,B,Q,h){return(0,l.r)(R,J,B,Q,h)}static FileAsURL(R){const J=new Blob([R]);return window.URL.createObjectURL(J)}static Format(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return R.toFixed(J)}static DeepCopy(R,J,B,Q){N.d.DeepCopy(R,J,B,Q)}static IsEmpty(R){for(const J in R)if(Object.prototype.hasOwnProperty.call(R,J))return!1;return!0}static RegisterTopRootEvents(R,J){for(let Q=0;Q<J.length;Q++){const h=J[Q];R.addEventListener(h.name,h.handler,!1);try{window.parent&&window.parent.addEventListener(h.name,h.handler,!1)}catch(B){}}}static UnregisterTopRootEvents(R,J){for(let Q=0;Q<J.length;Q++){const h=J[Q];R.removeEventListener(h.name,h.handler);try{R.parent&&R.parent.removeEventListener(h.name,h.handler)}catch(B){}}}static async DumpFramebuffer(R,J,B,Q){throw(0,q.c)("DumpTools")}static DumpData(R,J,B,Q){throw(0,q.c)("DumpTools")}static async DumpDataAsync(R,J,B){throw(0,q.c)("DumpTools")}static _IsOffScreenCanvas(R){return void 0!==R.convertToBlob}static ToBlob(R,J){let B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0;A._IsOffScreenCanvas(R)||R.toBlob||(R.toBlob=function(R,J,B){setTimeout((()=>{const Q=atob(this.toDataURL(J,B).split(",")[1]),h=Q.length,y=new Uint8Array(h);for(let R=0;R<h;R++)y[R]=Q.charCodeAt(R);R(new Blob([y]))}))}),A._IsOffScreenCanvas(R)?R.convertToBlob({type:B,quality:Q}).then((R=>J(R))):R.toBlob((function(R){J(R)}),B,Q)}static DownloadBlob(R,J){if("download"in document.createElement("a")){if(!J){const R=new Date;J="screenshot_"+((R.getFullYear()+"-"+(R.getMonth()+1)).slice(2)+"-"+R.getDate()+"_"+R.getHours()+"-"+("0"+R.getMinutes()).slice(-2))+".png"}A.Download(R,J)}else if(R&&"undefined"!==typeof URL){const J=URL.createObjectURL(R),B=window.open("");if(!B)return;const Q=B.document.createElement("img");Q.onload=function(){URL.revokeObjectURL(J)},Q.src=J,B.document.body.appendChild(Q)}}static EncodeScreenshotCanvasData(R,J){let B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Q&&J){if(J){if(A._IsOffScreenCanvas(R))return void R.convertToBlob({type:B,quality:h}).then((R=>{const B=new FileReader;B.readAsDataURL(R),B.onloadend=()=>{const R=B.result;J(R)}}));const Q=R.toDataURL(B,h);J(Q)}}else this.ToBlob(R,(function(R){R&&A.DownloadBlob(R,Q),J&&J("")}),B,h)}static Download(R,J){if("undefined"===typeof URL)return;const B=window.URL.createObjectURL(R),Q=document.createElement("a");document.body.appendChild(Q),Q.style.display="none",Q.href=B,Q.download=J,Q.addEventListener("click",(()=>{Q.parentElement&&Q.parentElement.removeChild(Q)})),Q.click(),window.URL.revokeObjectURL(B)}static BackCompatCameraNoPreventDefault(R){return"boolean"===typeof R[0]?R[0]:"boolean"===typeof R[1]&&R[1]}static CreateScreenshot(R,J,B,Q){throw(0,q.c)("ScreenshotTools")}static async CreateScreenshotAsync(R,J,B){throw(0,q.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(R,J,B,Q){throw(0,q.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(R,J,B){throw(0,q.c)("ScreenshotTools")}static RandomId(){return(0,n.c)()}static IsBase64(R){return(0,l.j)(R)}static DecodeBase64(R){return(0,l.d)(R)}static get errorsCount(){return y.d.errorsCount}static Log(R){y.d.Log(R)}static Warn(R){y.d.Warn(R)}static Error(R){y.d.Error(R)}static get LogCache(){return y.d.LogCache}static ClearLogCache(){y.d.ClearLogCache()}static set LogLevels(R){y.d.LogLevels=R}static set PerformanceLogLevel(R){return(R&A.PerformanceUserMarkLogLevel)===A.PerformanceUserMarkLogLevel?(A.StartPerformanceCounter=A._StartUserMark,void(A.EndPerformanceCounter=A._EndUserMark)):(R&A.PerformanceConsoleLogLevel)===A.PerformanceConsoleLogLevel?(A.StartPerformanceCounter=A._StartPerformanceConsole,void(A.EndPerformanceCounter=A._EndPerformanceConsole)):(A.StartPerformanceCounter=A._StartPerformanceCounterDisabled,void(A.EndPerformanceCounter=A._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(R,J){}static _EndPerformanceCounterDisabled(R,J){}static _StartUserMark(R){let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!A._Performance){if(!(0,h.h)())return;A._Performance=window.performance}J&&A._Performance.mark&&A._Performance.mark(R+"-Begin")}static _EndUserMark(R){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&A._Performance.mark&&(A._Performance.mark(R+"-End"),A._Performance.measure(R,R+"-Begin",R+"-End"))}static _StartPerformanceConsole(R){let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];J&&(A._StartUserMark(R,J),console.time&&console.time(R))}static _EndPerformanceConsole(R){let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];J&&(A._EndUserMark(R,J),console.timeEnd(R))}static get Now(){return r.c.Now}static GetClassName(R){let J=arguments.length>1&&void 0!==arguments[1]&&arguments[1],B=null;if(!J&&R.getClassName)B=R.getClassName();else{if(R instanceof Object){B=(J?R:Object.getPrototypeOf(R)).constructor.__bjsclassName__}B||(B=typeof R)}return B}static First(R,J){for(const B of R)if(J(B))return B;return null}static getFullClassName(R){let J=arguments.length>1&&void 0!==arguments[1]&&arguments[1],B=null,Q=null;if(!J&&R.getClassName)B=R.getClassName();else{if(R instanceof Object){const h=J?R:Object.getPrototypeOf(R);B=h.constructor.__bjsclassName__,Q=h.constructor.__bjsmoduleName__}B||(B=typeof R)}return B?(null!=Q?Q+".":"")+B:null}static async DelayAsync(R){await new Promise((J=>{setTimeout((()=>{J()}),R)}))}static IsSafari(){return!!(0,h.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function u(R,J){return B=>{B.__bjsclassName__=R,B.__bjsmoduleName__=null!=J?J:null}}A.AssetBaseUrl="",A.UseCustomRequestHeaders=!1,A.CustomRequestHeaders=e.c.CustomRequestHeaders,A.GetDOMTextContent=h.e,A._DefaultCdnUrl="https://cdn.babylonjs.com",A._DefaultAssetsUrl="https://assets.babylonjs.com/core",A.GetAbsoluteUrl="object"===typeof document?R=>{const J=document.createElement("a");return J.href=R,J.href}:"function"===typeof URL&&"object"===typeof location?R=>new URL(R,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},A.NoneLogLevel=y.d.NoneLogLevel,A.MessageLogLevel=y.d.MessageLogLevel,A.WarningLogLevel=y.d.WarningLogLevel,A.ErrorLogLevel=y.d.ErrorLogLevel,A.AllLogLevel=y.d.AllLogLevel,A.IsWindowObjectExist=h.h,A.PerformanceNoneLogLevel=0,A.PerformanceUserMarkLogLevel=1,A.PerformanceConsoleLogLevel=2,A.StartPerformanceCounter=A._StartPerformanceCounterDisabled,A.EndPerformanceCounter=A._EndPerformanceCounterDisabled;class S{constructor(R,J,B){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=R,this.index=Q-1,this._done=!1,this._fn=J,this._successCallback=B}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(R,J,B){const Q=new S(R,J,B,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Q.executeNext(),Q}static SyncAsyncForLoop(R,J,B,Q,h){let y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return S.Run(Math.ceil(R/J),(Q=>{h&&h()?Q.breakLoop():setTimeout((()=>{for(let y=0;y<J;++y){const N=Q.index*J+y;if(N>=R)break;if(B(N),h&&h()){Q.breakLoop();break}}Q.executeNext()}),y)}),Q)}}A.Mix=P.k,A.IsExponentOfTwo=P.g,D.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11142:(R,J,B)=>{B.d(J,{e:()=>y,h:()=>h});const Q={};function h(R,J){Q[R]=J}function y(R){return Q[R]}},11060:(R,J,B)=>{B.d(J,{c:()=>Q});class Q{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Q.CustomRequestHeaders).length>0||Q.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const R in Q.CustomRequestHeaders){const J=Q.CustomRequestHeaders[R];J&&this._xhr.setRequestHeader(R,J)}}_shouldSkipRequestModifications(R){return Q.SkipRequestModificationForBabylonCDN&&(R.includes("preview.babylonjs.com")||R.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(R){this._xhr.onprogress=R}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(R){this._xhr.responseType=R}get timeout(){return this._xhr.timeout}set timeout(R){this._xhr.timeout=R}addEventListener(R,J,B){this._xhr.addEventListener(R,J,B)}removeEventListener(R,J,B){this._xhr.removeEventListener(R,J,B)}abort(){this._xhr.abort()}send(R){Q.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(R)}open(R,J){for(const B of Q.CustomRequestModifiers){if(this._shouldSkipRequestModifications(J))return;J=B(this._xhr,J)||J}J=(J=J.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=J,this._xhr.open(R,J,!0)}setRequestHeader(R,J){this._xhr.setRequestHeader(R,J)}getResponseHeader(R){return this._xhr.getResponseHeader(R)}}Q.CustomRequestHeaders={},Q.CustomRequestModifiers=new Array,Q.SkipRequestModificationForBabylonCDN=!0}}]);