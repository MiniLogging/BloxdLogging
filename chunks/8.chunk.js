"use strict";(self.uji65st81d=self.uji65st81d||[]).push([[8],{12331:(V,h,mV)=>{mV.d(h,{b:()=>z});var t=mV(12300),L=mV(12264),N=mV(12338),A=mV(12352),k=mV(12280);class C{constructor(){let V=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,V&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(V){this._zOffset!==V&&(this._zOffset=V,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(V){this._zOffsetUnits!==V&&(this._zOffsetUnits=V,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(V){this._cullFace!==V&&(this._cullFace=V,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(V){this._cull!==V&&(this._cull=V,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(V){this._depthFunc!==V&&(this._depthFunc=V,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(V){this._depthMask!==V&&(this._depthMask=V,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(V){this._depthTest!==V&&(this._depthTest=V,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(V){this._frontFace!==V&&(this._frontFace=V,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(V){this.isDirty&&(this._isCullDirty&&(this.cull?V.enable(V.CULL_FACE):V.disable(V.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(V.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(V.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?V.enable(V.DEPTH_TEST):V.disable(V.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(V.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(V.enable(V.POLYGON_OFFSET_FILL),V.polygonOffset(this.zOffset,this.zOffsetUnits)):V.disable(V.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(V.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class K{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(V){this._func!==V&&(this._func=V,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(V){this._funcRef!==V&&(this._funcRef=V,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(V){this._funcMask!==V&&(this._funcMask=V,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(V){this._opStencilFail!==V&&(this._opStencilFail=V,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(V){this._opDepthFail!==V&&(this._opDepthFail=V,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(V){this._opStencilDepthPass!==V&&(this._opStencilDepthPass=V,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(V){this._mask!==V&&(this._mask=V,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(V){this._enabled!==V&&(this._enabled=V,this._isStencilTestDirty=!0)}constructor(){let V=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,V&&this.reset()}reset(){var V;this.stencilMaterial=void 0,null===(V=this.stencilGlobal)||void 0===V||V.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(V){var h;if(!V)return;const mV=!this.useStencilGlobalOnly&&!(null===(h=this.stencilMaterial)||void 0===h||!h.enabled);this.enabled=mV?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=mV?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=mV?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=mV?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=mV?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=mV?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=mV?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=mV?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?V.enable(V.STENCIL_TEST):V.disable(V.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(V.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(V.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(V.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class o{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=o.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=o.KEEP,this.opDepthFail=o.KEEP,this.opStencilDepthPass=o.REPLACE}get stencilFunc(){return this.func}set stencilFunc(V){this.func=V}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(V){this.funcRef=V}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(V){this.funcMask=V}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(V){this.opStencilFail=V}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(V){this.opDepthFail=V}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(V){this.opStencilDepthPass=V}get stencilMask(){return this.mask}set stencilMask(V){this.mask=V}get stencilTest(){return this.enabled}set stencilTest(V){this.enabled=V}}o.ALWAYS=519,o.KEEP=7680,o.REPLACE=7681;class n{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(V){this._alphaBlend!==V&&(this._alphaBlend=V,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(V,h,mV,t){this._blendConstants[0]===V&&this._blendConstants[1]===h&&this._blendConstants[2]===mV&&this._blendConstants[3]===t||(this._blendConstants[0]=V,this._blendConstants[1]=h,this._blendConstants[2]=mV,this._blendConstants[3]=t,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(V,h,mV,t){this._blendFunctionParameters[0]===V&&this._blendFunctionParameters[1]===h&&this._blendFunctionParameters[2]===mV&&this._blendFunctionParameters[3]===t||(this._blendFunctionParameters[0]=V,this._blendFunctionParameters[1]=h,this._blendFunctionParameters[2]=mV,this._blendFunctionParameters[3]=t,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(V,h){this._blendEquationParameters[0]===V&&this._blendEquationParameters[1]===h||(this._blendEquationParameters[0]=V,this._blendEquationParameters[1]=h,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(V){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?V.enable(V.BLEND):V.disable(V.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(V.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(V.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(V.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var q=mV(12288),x=mV(12359),R=mV(12261),d=mV(12258),s=mV(12320),M=mV(12371);function c(V,h){if((0,R.k)()){const{requestAnimationFrame:mV}=h||window;if("function"===typeof mV)return mV(V)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(V);return setTimeout(V,16)}class z{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(V){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get bh(){return this._useReverseDepthBuffer}set bh(V){V!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=V,this._depthCullingState.depthFunc=V?518:515)}setColorWrite(V){V!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=V)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(V){if(V)return this.isNDCHalfZRange?V.IS_NDC_HALF_ZRANGE="":delete V.IS_NDC_HALF_ZRANGE,this.bh?V.USE_REVERSE_DEPTHBUFFER="":delete V.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?V.USE_EXACT_SRGB_CONVERSIONS="":delete V.USE_EXACT_SRGB_CONVERSIONS);{let V="";return this.isNDCHalfZRange&&(V+="#define IS_NDC_HALF_ZRANGE"),this.bh&&(V&&(V+="\n"),V+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(V&&(V+="\n"),V+="#define USE_EXACT_SRGB_CONVERSIONS"),V}}_rebuildInternalTextures(){const V=this._internalTexturesCache.slice();for(const h of V)h._rebuild()}_rebuildRenderTargetWrappers(){const V=this._renderTargetWrapperCache.slice();for(const h of V)h._rebuild()}_rebuildEffects(){for(const V in this._compiledEffects){const h=this._compiledEffects[V];h._pipelineContext=null,h._prepareEffect()}N.Effect.ResetCache()}_rebuildGraphicsResources(){var V;this.wipeCaches(!0),this._rebuildEffects(),null===(V=this._rebuildComputeEffects)||void 0===V||V.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){L.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(V){setTimeout((()=>{this._clearEmptyResources();const h=this._depthCullingState.depthTest,mV=this._depthCullingState.depthFunc,t=this._depthCullingState.depthMask,L=this._stencilState.stencilTest;V(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=h,this._depthCullingState.depthFunc=mV,this._depthCullingState.depthMask=t,this._stencilState.stencilTest=L,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(V){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(V){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const V=new Uint8Array(4),h=[V,V,V,V,V,V];this._emptyCubeTexture=this.createRawCubeTexture(h,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(V){if(!V)return this._activeRenderLoops.length=0,void this._cancelFrame();const h=this._activeRenderLoops.indexOf(V);h>=0&&(this._activeRenderLoops.splice(h,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const V=this._frameHandler;if(this._frameHandler=0,(0,R.k)()){const{cancelAnimationFrame:h}=this.getHostWindow()||window;if("function"===typeof h)return h(V)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(V);return clearTimeout(V)}}lt(){this.onBeginFrameObservable.notifyObservers(this)}gt(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(V){this._maxFPS=V,void 0!==V&&(this._minFrameTime=V<=0?Number.MAX_VALUE:1e3/V)}_isOverFrameTime(V){if(!V||void 0===this._maxFPS)return!1;const h=V-this._lastFrameTime;return this._lastFrameTime=V,this._renderAccumulator+=h,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(V){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(V)){let V=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(V=!1),V&&(this.lt(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.gt())}}_renderLoop(V){this._processFrame(V),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let V=0;V<this._activeRenderLoops.length;V++){(0,this._activeRenderLoops[V])()}}_renderViews(){return!1}_queueNewFrame(V,h){return c(V,h)}runRenderLoop(V){-1===this._activeRenderLoops.indexOf(V)&&(this._activeRenderLoops.push(V),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(V){this._depthCullingState.depthTest=V}setZOffset(V){this._depthCullingState.zOffset=this.bh?-V:V}getZOffset(){const V=this._depthCullingState.zOffset;return this.bh?-V:V}setZOffsetUnits(V){this._depthCullingState.zOffsetUnits=this.bh?-V:V}getZOffsetUnits(){const V=this._depthCullingState.zOffsetUnits;return this.bh?-V:V}getHostWindow(){return(0,R.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(V){this._compatibilityMode=!0}_rebuildTextures(){for(const V of this.scenes)V._rebuildTextures();for(const V of this._virtualScenes)V._rebuildTextures()}_releaseRenderTargetWrapper(V){const h=this._renderTargetWrapperCache.indexOf(V);-1!==h&&this._renderTargetWrapperCache.splice(h,1)}get currentViewport(){return this._cachedViewport}setViewport(V,h,mV){const t=h||this.getRenderWidth(),L=mV||this.getRenderHeight(),N=V.x||0,A=V.y||0;this._cachedViewport=V,this._viewport(N*t,A*L,t*V.width,L*V.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(V){return new Path2D(V)}get description(){let V=this.name+this.version;return this._caps.parallelShaderCompile&&(V+=" - Parallel shader compilation"),V}_createTextureBase(V,h,mV,N){let A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,K=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,n=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,q=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,R=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,d=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,s=arguments.length>13?arguments[13]:void 0,c=arguments.length>14?arguments[14]:void 0,Q=arguments.length>15?arguments[15]:void 0;const J="data:"===(V=V||"").substring(0,5),v="blob:"===V.substring(0,5),D=J&&-1!==V.indexOf(";base64,"),H=q||new x.d(this,1);H!==q&&(H.label=V.substring(0,60));const j=V;!this._transformTextureUrl||D||q||n||(V=this._transformTextureUrl(V)),j!==V&&(H._originalUrl=j);const l=V.lastIndexOf(".");let G=d||(l>-1?V.substring(l).toLowerCase():"");G.indexOf("?")>-1&&(G=G.split("?")[0]);const y=(0,M.b)(G,s);N&&N.addPendingData(H),H.url=V,H.generateMipMaps=!h,H.samplingMode=A,H.invertY=mV,H._useSRGBBuffer=this._getUseSRGBBuffer(!!Q,h),this._doNotHandleContextLost||(H._buffer=n);let O=null;k&&!q&&(O=H.onLoadedObservable.add(k)),q||this._internalTexturesCache.push(H);const I=(mV,q)=>{N&&N.removePendingData(H),V===j?(O&&H.onLoadedObservable.remove(O),t.b.UseFallbackTexture&&V!==t.b.FallbackTexture&&this._createTextureBase(t.b.FallbackTexture,h,H.invertY,N,A,null,C,K,o,n,H),mV=(mV||"Unknown error")+(t.b.UseFallbackTexture?" - Fallback texture was used":""),H.onErrorObservable.notifyObservers({message:mV,exception:q}),C&&C(mV,q)):(L.e.Warn(`Failed to load ${V}, falling back to ${j}`),this._createTextureBase(j,h,H.invertY,N,A,k,C,K,o,n,H,R,d,s,c,Q))};if(y){const h=async V=>{(await y).loadData(V,H,((V,h,mV,t,L,k)=>{k?I("TextureLoader failed to load data"):K(H,G,N,{width:V,height:h},H.invertY,!mV,t,(()=>(L(),!1)),A)}),c)};n?n instanceof ArrayBuffer?h(new Uint8Array(n)):ArrayBuffer.isView(n)?h(n):C&&C("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(V,(V=>{h(new Uint8Array(V))}),void 0,N?N.offlineProvider:void 0,!0,((V,h)=>{I("Unable to load "+(V&&V.responseURL,h))}))}else{const mV=V=>{v&&!this._doNotHandleContextLost&&(H._buffer=V),K(H,G,N,V,H.invertY,h,!1,o,A)};!J||D?n&&("string"===typeof n.decoding||n.close)?mV(n):z._FileToolsLoadImage(V||"",mV,I,N?N.offlineProvider:null,s,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof n||n instanceof ArrayBuffer||ArrayBuffer.isView(n)||n instanceof Blob?z._FileToolsLoadImage(n,mV,I,N?N.offlineProvider:null,s,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):n&&mV(n)}return H}_rebuildBuffers(){for(const V of this._uniformBuffers)V._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,R.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const V in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,V)&&(this._boundTexturesCache[V]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(V){this._name=V}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(V){this._hardwareScalingLevel=V,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(V){this._doNotHandleContextLost=V}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(V,h,mV){var L,N;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new C,this._stencilStateComposer=new K,this._stencilState=new o,this._alphaState=new n,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new d.d,this.onCanvasFocusObservable=new d.d,this.onNewSceneAddedObservable=new d.d,this.onResizeObservable=new d.d,this.onCanvasPointerOutObservable=new d.d,this.onEffectErrorObservable=new d.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new d.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=V=>this._renderLoop(V),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new d.d,this.onAfterShaderCompilationObservable=new d.d,this.onBeginFrameObservable=new d.d,this.onEndFrameObservable=new d.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new d.d,this.onContextRestoredObservable=new d.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.XL=new d.d,this.onReleaseEffectsObservable=new d.d,t.b.Instances.push(this),this.startTime=k.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,A.e.SetMatrixPrecision(!!h.useHighPrecisionMatrix),(0,R.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=mV??!1,h.antialias=V??h.antialias,h.deterministicLockstep=h.deterministicLockstep??!1,h.lockstepMaxSteps=h.lockstepMaxSteps??4,h.timeStep=h.timeStep??1/60,h.Ck=h.Ck??!0,this._audioContext=(null===(L=h.audioEngineOptions)||void 0===L?void 0:L.audioContext)??null,this._audioDestination=(null===(N=h.audioEngineOptions)||void 0===N?void 0:N.audioDestination)??null,this.premultipliedAlpha=h.premultipliedAlpha??!0,this._doNotHandleContextLost=!!h.doNotHandleContextLost,this._isStencilEnable=!!h.Ck,this.useExactSrgbConversions=h.useExactSrgbConversions??!1;const q=(0,R.k)()&&window.devicePixelRatio||1,x=h.limitDeviceRatio||q;mV=mV||h.adaptToDeviceRatio||!1,this._hardwareScalingLevel=mV?1/Math.min(x,q):1,this._lastDevicePixelRatio=q,this._creationOptions=h}resize(){let V,h,mV=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const V=(0,R.k)()&&window.devicePixelRatio||1,h=this._lastDevicePixelRatio/V;this._lastDevicePixelRatio=V,this._hardwareScalingLevel*=h}if((0,R.k)()&&(0,R.f)())if(this._renderingCanvas){var t,L;const mV=null===(t=(L=this._renderingCanvas).getBoundingClientRect)||void 0===t?void 0:t.call(L);V=this._renderingCanvas.clientWidth||(null===mV||void 0===mV?void 0:mV.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,h=this._renderingCanvas.clientHeight||(null===mV||void 0===mV?void 0:mV.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else V=window.innerWidth,h=window.innerHeight;else V=this._renderingCanvas?this._renderingCanvas.width:100,h=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(V/this._hardwareScalingLevel,h/this._hardwareScalingLevel,mV)}setSize(V,h){let mV=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(V|=0,h|=0,!mV&&this._renderingCanvas.width===V&&this._renderingCanvas.height===h)return!1;if(this._renderingCanvas.width=V,this._renderingCanvas.height=h,this.scenes){for(let V=0;V<this.scenes.length;V++){const h=this.scenes[V];for(let V=0;V<h.cameras.length;V++){h.cameras[V]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(V,h,mV,t,L,N,A,k,C,K,o){throw(0,q.c)("engine.rawTexture")}createRawCubeTexture(V,h,mV,t,L,N,A,k){throw(0,q.c)("engine.rawTexture")}createRawTexture3D(V,h,mV,t,L,N,A,k,C,K,o){throw(0,q.c)("engine.rawTexture")}createRawTexture2DArray(V,h,mV,t,L,N,A,k,C,K,o){throw(0,q.c)("engine.rawTexture")}_sharedInit(V){this._renderingCanvas=V}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const V=navigator.userAgent;this.hostInformation.isMobile=-1!==V.indexOf("Mobile")||-1!==V.indexOf("Mac")&&(0,R.f)()&&"ontouchend"in document},this._checkForMobile(),(0,R.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(V){return document.createElement("video")}_reportDrawCall(){var V;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(V=this._drawCalls)||void 0===V||V.addCount(h,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(V,h){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(V,h){return createImageBitmap(V,h)}resizeImageBitmap(V,h,mV){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(V){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(V,h){if("undefined"===typeof document)return new OffscreenCanvas(V,h);const mV=document.createElement("canvas");return mV.width=V,mV.height=h,mV}createCanvas(V,h){return z._CreateCanvas(V,h)}static _FileToolsLoadImage(V,h,mV,t,L,N,A){throw(0,q.c)("FileTools")}_loadFile(V,h,mV,t,L,N){const A=(0,s.k)(V,h,mV,t,L,N);return this._activeRequests.push(A),A.onCompleteObservable.add((()=>{const V=this._activeRequests.indexOf(A);-1!==V&&this._activeRequests.splice(V,1)})),A}static _FileToolsLoadFile(V,h,mV,t,L,N){if(s.d.loadFile)return s.d.loadFile(V,h,mV,t,L,N);throw(0,q.c)("FileTools")}dispose(){var V;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(V=this.releaseComputeEffects)||void 0===V||V.call(this),N.Effect.ResetCache();for(const mV of this._activeRequests)mV.abort();this._boundRenderFunction=null,this.XL.notifyObservers(this),this.XL.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,R.k)()&&window.removeEventListener("resize",this._checkForMobile);const h=t.b.Instances.indexOf(this);h>=0&&t.b.Instances.splice(h,1),t.b.Instances.length||(t.b.OnEnginesDisposedObservable.notifyObservers(this),t.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(V){throw(0,q.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(V,h){for(let mV=0;mV<t.b.Instances.length;mV++){const L=t.b.Instances[mV];for(let mV=0;mV<L.scenes.length;mV++)L.scenes[mV].markAllMaterialsAsDirty(V,h)}}}z._RenderPassIdCounter=0,z._RescalePostProcessFactory=null,z.CollisionsEpsilon=.001,z.QueueNewFrame=c},12300:(V,h,mV)=>{mV.d(h,{b:()=>L});var t=mV(12258);class L{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}L.Instances=[],L.OnEnginesDisposedObservable=new t.d,L._LastCreatedScene=null,L.UseFallbackTexture=!0,L.FallbackTexture=""},12352:(V,h,mV)=>{mV.d(h,{e:()=>t});class t{static SetMatrixPrecision(V){if(t.MatrixTrackPrecisionChange=!1,V&&!t.MatrixUse64Bits&&t.MatrixTrackedMatrices)for(let h=0;h<t.MatrixTrackedMatrices.length;++h){const V=t.MatrixTrackedMatrices[h],mV=V.Kk;V.Kk=new Array(16);for(let h=0;h<16;++h)V.Kk[h]=mV[h]}t.MatrixUse64Bits=V,t.MatrixCurrentType=t.MatrixUse64Bits?Array:Float32Array,t.MatrixTrackedMatrices=null}}t.MatrixUse64Bits=!1,t.MatrixTrackPrecisionChange=!0,t.MatrixCurrentType=Float32Array,t.MatrixTrackedMatrices=[]},12371:(V,h,mV)=>{mV.d(h,{b:()=>A});var t=mV(12264);const L=new Map;function N(V,h){(function(V){return L.delete(V)})(V)&&t.e.Warn(`Extension with the name '${V}' already exists`),L.set(V,h)}function A(V,h){"image/ktx"!==h&&"image/ktx2"!==h||(V=".ktx"),L.has(V)||(V.endsWith(".ies")&&N(".ies",(async()=>await mV.e(15).then(mV.bind(mV,14810)).then((V=>new V._IESTextureLoader)))),V.endsWith(".dds")&&N(".dds",(async()=>await Promise.all([mV.e(14),mV.e(17),mV.e(13),mV.e(19),mV.e(18),mV.e(28)]).then(mV.bind(mV,14812)).then((V=>new V._DDSTextureLoader)))),V.endsWith(".basis")&&N(".basis",(async()=>await Promise.all([mV.e(14),mV.e(17),mV.e(13),mV.e(47)]).then(mV.bind(mV,14818)).then((V=>new V._BasisTextureLoader)))),V.endsWith(".env")&&N(".env",(async()=>await Promise.all([mV.e(14),mV.e(17),mV.e(13),mV.e(19),mV.e(18),mV.e(23),mV.e(21),mV.e(45),mV.e(48)]).then(mV.bind(mV,14825)).then((V=>new V._ENVTextureLoader)))),V.endsWith(".hdr")&&N(".hdr",(async()=>await Promise.all([mV.e(14),mV.e(49)]).then(mV.bind(mV,14828)).then((V=>new V._HDRTextureLoader)))),(V.endsWith(".ktx")||V.endsWith(".ktx2"))&&(N(".ktx",(async()=>await mV.e(30).then(mV.bind(mV,14834)).then((V=>new V._KTXTextureLoader)))),N(".ktx2",(async()=>await mV.e(30).then(mV.bind(mV,14834)).then((V=>new V._KTXTextureLoader))))),V.endsWith(".tga")&&N(".tga",(async()=>await mV.e(50).then(mV.bind(mV,14839)).then((V=>new V._TGATextureLoader)))),V.endsWith(".exr")&&N(".exr",(async()=>await mV.e(16).then(mV.bind(mV,14847)).then((V=>new V._ExrTextureLoader)))));const t=L.get(V);return t?Promise.resolve(t(h)):null}},12359:(V,h,mV)=>{mV.d(h,{d:()=>A});var t,L=mV(12258),N=mV(12366);!function(V){V[V.Unknown=0]="Unknown",V[V.Url=1]="Url",V[V.Temp=2]="Temp",V[V.Raw=3]="Raw",V[V.Dynamic=4]="Dynamic",V[V.RenderTarget=5]="RenderTarget",V[V.MultiRenderTarget=6]="MultiRenderTarget",V[V.Cube=7]="Cube",V[V.CubeRaw=8]="CubeRaw",V[V.CubePrefiltered=9]="CubePrefiltered",V[V.Raw3D=10]="Raw3D",V[V.Raw2DArray=11]="Raw2DArray",V[V.DepthStencil=12]="DepthStencil",V[V.CubeRawRGBD=13]="CubeRawRGBD",V[V.Depth=14]="Depth"}(t||(t={}));class A extends N.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(V){this.generateMipMaps=V}get uniqueId(){return this._uniqueId}_setUniqueId(V){this._uniqueId=V}getEngine(){return this._engine}get source(){return this._source}constructor(V,h){let mV=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new L.d,this.onErrorObservable=new L.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=V,this._source=h,this._uniqueId=A._Counter++,mV||(this._hardwareTexture=V._createHardwareTexture())}incrementReferences(){this._references++}updateSize(V,h){let mV=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,V,h,mV),this.width=V,this.height=h,this.depth=mV,this.baseWidth=V,this.baseHeight=h,this.baseDepth=mV,this._size=V*h*mV}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const V=this.onRebuildCallback(this),h=h=>{h._swapAndDie(this,!1),this.isReady=V.isReady};return void(V.isAsync?V.proxy.then(h):h(V.proxy))}let V;switch(this.source){case 2:case 12:case 14:break;case 1:return void(V=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(V=>{V._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:V=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),V._swapAndDie(this,!1),this.isReady=!0;break;case 10:V=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),V._swapAndDie(this,!1),this.isReady=!0;break;case 11:V=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),V._swapAndDie(this,!1),this.isReady=!0;break;case 4:V=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),V._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(V=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{V._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:V=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),V._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return V=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(V=>{V&&V._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(V._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(V){var h;let mV=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(h=this._hardwareTexture)||void 0===h||h.setUsage(V._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),V._hardwareTexture=this._hardwareTexture,mV&&(V._isRGBD=this._isRGBD),this._lodTextureHigh&&(V._lodTextureHigh&&V._lodTextureHigh.dispose(),V._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(V._lodTextureMid&&V._lodTextureMid.dispose(),V._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(V._lodTextureLow&&V._lodTextureLow.dispose(),V._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(V._irradianceTexture&&V._irradianceTexture.dispose(),V._irradianceTexture=this._irradianceTexture);const t=this._engine.getLoadedTexturesCache();let L=t.indexOf(this);-1!==L&&t.splice(L,1),L=t.indexOf(V),-1===L&&t.push(V)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}A._Counter=0},12366:(V,h,mV)=>{mV.d(h,{d:()=>t});class t{get wrapU(){return this._cachedWrapU}set wrapU(V){this._cachedWrapU=V}get wrapV(){return this._cachedWrapV}set wrapV(V){this._cachedWrapV=V}get wrapR(){return this._cachedWrapR}set wrapR(V){this._cachedWrapR=V}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(V){this._cachedAnisotropicFilteringLevel=V}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(V){this._comparisonFunction=V}get useMipMaps(){return this._useMipMaps}set useMipMaps(V){this._useMipMaps=V}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,mV=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=V,this._cachedWrapV=h,this._cachedWrapR=mV,this._cachedAnisotropicFilteringLevel=t,this.samplingMode=L,this._comparisonFunction=N,this}compareSampler(V){return this._cachedWrapU===V._cachedWrapU&&this._cachedWrapV===V._cachedWrapV&&this._cachedWrapR===V._cachedWrapR&&this._cachedAnisotropicFilteringLevel===V._cachedAnisotropicFilteringLevel&&this.samplingMode===V.samplingMode&&this._comparisonFunction===V._comparisonFunction&&this._useMipMaps===V._useMipMaps}}},12272:(V,h,mV)=>{mV.d(h,{b:()=>N});var t=mV(12264);const L=(V,h,mV)=>V?V.getClassName&&"Mesh"===V.getClassName()?null:!V.getClassName||"SubMesh"!==V.getClassName()&&"PhysicsBody"!==V.getClassName()?V.clone?V.clone():Array.isArray(V)?V.slice():mV&&"object"===typeof V?{...V}:null:V.clone(h):null;class N{static DeepCopy(V,h,mV,N){let A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const k=function(V){const h=[];do{const mV=Object.getOwnPropertyNames(V);for(const V of mV)-1===h.indexOf(V)&&h.push(V)}while(V=Object.getPrototypeOf(V));return h}(V);for(const K of k){if("_"===K[0]&&(!N||-1===N.indexOf(K)))continue;if(K.endsWith("Observable"))continue;if(mV&&-1!==mV.indexOf(K))continue;const k=V[K],o=typeof k;if("function"!==o)try{if("object"===o)if(k instanceof Uint8Array)h[K]=Uint8Array.from(k);else if(k instanceof Array){if(h[K]=[],k.length>0)if("object"==typeof k[0])for(let V=0;V<k.length;V++){const mV=L(k[V],h,A);-1===h[K].indexOf(mV)&&h[K].push(mV)}else h[K]=k.slice(0)}else h[K]=L(k,h,A);else h[K]=k}catch(C){t.e.Warn(C.message)}}}}},12305:(V,h,mV)=>{mV.d(h,{b:()=>t,c:()=>L,d:()=>N});class t extends Error{}t._setPrototypeOf=Object.setPrototypeOf||((V,h)=>(V.__proto__=h,V));const L={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class N extends t{constructor(V,h,mV){super(V),this.errorCode=h,this.innerError=mV,this.name="RuntimeError",t._setPrototypeOf(this,N.prototype)}}},12303:(V,h,mV)=>{mV.d(h,{e:()=>I,i:()=>z,j:()=>l,n:()=>y,v:()=>H,r:()=>s,x:()=>v,y:()=>D,C:()=>j,E:()=>Q});var t=mV(12292),L=mV(12261),N=mV(12258);class A{}A.FilesToLoad={};var k=mV(12305),C=mV(12309),K=mV(12315),o=mV(12300),n=mV(12264),q=mV(12322),x=mV(12320),R=mV(12331);const d=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class s extends k.d{constructor(V,h){super(V,k.c.LoadFileError),this.name="LoadFileError",k.b._setPrototypeOf(this,s.prototype),h instanceof t.e?this.request=h:this.file=h}}class M extends k.d{constructor(V,h){super(V,k.c.RequestFileError),this.request=h,this.name="RequestFileError",k.b._setPrototypeOf(this,M.prototype)}}class c extends k.d{constructor(V,h){super(V,k.c.ReadFileError),this.file=h,this.name="ReadFileError",k.b._setPrototypeOf(this,c.prototype)}}const z={DefaultRetryStrategy:class{static ExponentialBackoff(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(mV,t,L)=>0!==t.status||L>=V||-1!==mV.indexOf("file:")?-1:Math.pow(2,L)*h}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:V=>V,ScriptBaseUrl:"",ScriptPreprocessUrl:V=>V,CleanUrl:V=>V=V.replace(/#/gm,"%23")},Q=(V,h)=>{if((!V||0!==V.indexOf("data:"))&&z.CorsBehavior)if("string"===typeof z.CorsBehavior||z.CorsBehavior instanceof String)h.crossOrigin=z.CorsBehavior;else{const mV=z.CorsBehavior(V);mV&&(h.crossOrigin=mV)}},J={getRequiredSize:null},v=function(V,h,mV,L){let N,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",K=arguments.length>5?arguments[5]:void 0,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===n||void 0===n||!n._features.forceBitmapOverHTMLImageElement))return mV("LoadImage is only supported in web or BabylonNative environments."),null;let q=!1;V instanceof ArrayBuffer||ArrayBuffer.isView(V)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(N=URL.createObjectURL(new Blob([V],{type:k})),q=!0):N=`data:${k};base64,`+(0,C.i)(V):V instanceof Blob?(N=URL.createObjectURL(V),q=!0):(N=z.CleanUrl(V),N=z.PreprocessUrl(N));const x=h=>{if(mV){const t=N||V.toString();mV(`Error while trying to load image: ${0===t.indexOf("http")||t.length<=128?t:t.slice(0,128)+"..."}`,h)}};if(null!==n&&void 0!==n&&n._features.forceBitmapOverHTMLImageElement)return H(N,(t=>{n.createImageBitmap(new Blob([t],{type:k}),{premultiplyAlpha:"none",...K}).then((V=>{h(V),q&&URL.revokeObjectURL(N)})).catch((h=>{mV&&mV("Error while trying to load image: "+V,h)}))}),void 0,L||void 0,!0,((V,h)=>{x(h)})),null;const R=new Image;if(J.getRequiredSize){const h=J.getRequiredSize(V);h.width&&(R.width=h.width),h.height&&(R.height=h.height)}Q(N,R);const d=[],s=()=>{for(const V of d)V.target.removeEventListener(V.name,V.handler);d.length=0};d.push({target:R,name:"load",handler:()=>{s(),h(R),q&&R.src&&URL.revokeObjectURL(R.src)}}),d.push({target:R,name:"error",handler:V=>{s(),x(V),q&&R.src&&URL.revokeObjectURL(R.src)}}),d.push({target:document,name:"securitypolicyviolation",handler:V=>{if(V.blockedURI!==R.src||"nk"===V.disposition)return;s();const h=new Error(`CSP violation of policy ${V.effectiveDirective} ${V.blockedURI}. Current policy is ${V.originalPolicy}`);o.b.UseFallbackTexture=!1,x(h),q&&R.src&&URL.revokeObjectURL(R.src),R.src=""}}),(()=>{for(const V of d)V.target.addEventListener(V.name,V.handler)})();const M="blob:"===N.substring(0,5),c="data:"===N.substring(0,5),v=()=>{M||c||!t.e.IsCustomRequestAvailable?R.src=N:H(N,((V,h,mV)=>{const t=new Blob([V],{type:!k&&mV?mV:k}),L=URL.createObjectURL(t);q=!0,R.src=L}),void 0,L||void 0,!0,((V,h)=>{x(h)}))},D=()=>{L&&L.loadImage(N,R)};if(!M&&!c&&L&&L.enableTexturesOffline)L.open(D,v);else{if(-1!==N.indexOf("file:")){const V=decodeURIComponent(N.substring(5).toLowerCase());if(A.FilesToLoad[V]&&"undefined"!==typeof URL){try{let h;try{h=URL.createObjectURL(A.FilesToLoad[V])}catch(j){h=URL.createObjectURL(A.FilesToLoad[V])}R.src=h,q=!0}catch(l){R.src=""}return R}}v()}return R},D=(V,h,mV,t,L)=>{const A=new FileReader,k={onCompleteObservable:new N.d,abort:()=>A.abort()};return A.onloadend=()=>k.onCompleteObservable.notifyObservers(k),L&&(A.onerror=()=>{L(new c(`Unable to read ${V.name}`,V))}),A.onload=V=>{h(V.target.result)},mV&&(A.onprogress=mV),t?A.readAsArrayBuffer(V):A.readAsText(V),k},H=(V,h,mV,t,L,C,K)=>{if(V.name)return D(V,h,mV,L,C?V=>{C(void 0,V)}:void 0);const o=V;if(-1!==o.indexOf("file:")){let V=decodeURIComponent(o.substring(5).toLowerCase());0===V.indexOf("./")&&(V=V.substring(2));const t=A.FilesToLoad[V];if(t)return D(t,h,mV,L,C?V=>C(void 0,new s(V.message,V.file)):void 0)}const{match:x,type:R}=O(o);if(x){const V={onCompleteObservable:new N.d,abort:()=>()=>{}};try{const V=L?I(o):r(o);h(V,void 0,R)}catch(k){C?C(void 0,k):n.e.Error(k.message||"Failed to parse the Data URL")}return q.b.SetImmediate((()=>{V.onCompleteObservable.notifyObservers(V)})),V}return j(o,((V,mV)=>{h(V,null===mV||void 0===mV?void 0:mV.responseURL,null===mV||void 0===mV?void 0:mV.getResponseHeader("content-type"))}),mV,t,L,C?V=>{C(V.request,new s(V.message,V.request))}:void 0,K)},j=(V,h,mV,A,k,C,K)=>{V=z.CleanUrl(V),V=z.PreprocessUrl(V);const o=z.BaseUrl+V;let q=!1;const x={onCompleteObservable:new N.d,abort:()=>q=!0},R=()=>{let V,N=new t.e,A=null;const R=()=>{N&&(mV&&N.removeEventListener("progress",mV),V&&N.removeEventListener("readystatechange",V),N.removeEventListener("loadend",d))};let d=()=>{R(),x.onCompleteObservable.notifyObservers(x),x.onCompleteObservable.clear(),mV=void 0,V=null,d=null,C=void 0,K=void 0,h=void 0};x.abort=()=>{q=!0,d&&d(),N&&N.readyState!==(XMLHttpRequest.DONE||4)&&N.abort(),null!==A&&(clearTimeout(A),A=null),N=null};const s=V=>{const h=V.message||"Unknown error";C&&N?C(new M(h,N)):n.e.Error(h)},c=n=>{if(N){if(N.open("GET",o),K)try{K(N)}catch(x){return void s(x)}k&&(N.responseType="arraybuffer"),mV&&N.addEventListener("progress",mV),d&&N.addEventListener("loadend",d),V=()=>{if(!q&&N&&N.readyState===(XMLHttpRequest.DONE||4)){if(V&&N.removeEventListener("readystatechange",V),N.status>=200&&N.status<300||0===N.status&&(!(0,L.k)()||G())){const V=k?N.response:N.responseText;if(null!==V){try{h&&h(V,N)}catch(x){s(x)}return}}const mV=z.DefaultRetryStrategy;if(mV){const V=mV(o,N,n);if(-1!==V)return R(),N=new t.e,void(A=setTimeout((()=>c(n+1)),V))}const K=new M("Error status: "+N.status+" "+N.statusText+" - Unable to load "+o,N);C&&C(K)}},N.addEventListener("readystatechange",V),N.send()}};c(0)};if(A&&A.enableSceneOffline){const t=V=>{V&&V.status>400?C&&C(V):R()},L=()=>{A&&A.loadFile(z.BaseUrl+V,(V=>{!q&&h&&h(V),x.onCompleteObservable.notifyObservers(x)}),mV?V=>{!q&&mV&&mV(V)}:void 0,t,k)};A.open(L,t)}else R();return x},l=V=>{const{match:h,type:mV}=O(V);if(h)return mV||void 0;const t=V.lastIndexOf(".");switch(V.substring(t+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"qk":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},G=()=>"undefined"!==typeof location&&"file:"===location.protocol,y=V=>d.test(V),O=V=>{const h=d.exec(V);if(null===h||0===h.length)return{match:!1,type:""};return{match:!0,type:h[0].replace("data:","").replace("base64,","")}};function I(V){return(0,C.b)(V.split(",")[1])}const r=V=>(0,C.d)(V.split(",")[1]);let T;R.b._FileToolsLoadImage=v,x.d.loadFile=H,K.l.loadFile=H;((V,h,mV,t,L,N,A,k,C,K)=>{T={DecodeBase64UrlToBinary:V,DecodeBase64UrlToString:h,DefaultRetryStrategy:mV.DefaultRetryStrategy,BaseUrl:mV.BaseUrl,CorsBehavior:mV.CorsBehavior,PreprocessUrl:mV.PreprocessUrl,IsBase64DataUrl:t,IsFileURL:L,LoadFile:N,LoadImage:A,ReadFile:k,RequestFile:C,SetCorsBehavior:K},Object.defineProperty(T,"DefaultRetryStrategy",{get:function(){return mV.DefaultRetryStrategy},set:function(V){mV.DefaultRetryStrategy=V}}),Object.defineProperty(T,"BaseUrl",{get:function(){return mV.BaseUrl},set:function(V){mV.BaseUrl=V}}),Object.defineProperty(T,"PreprocessUrl",{get:function(){return mV.PreprocessUrl},set:function(V){mV.PreprocessUrl=V}}),Object.defineProperty(T,"CorsBehavior",{get:function(){return mV.CorsBehavior},set:function(V){mV.CorsBehavior=V}})})(I,r,z,y,G,H,v,D,j,Q)},12393:(V,h,mV)=>{function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(V=>{const h=16*Math.random()|0;return("x"===V?h:3&h|8).toString(16)}))}mV.d(h,{b:()=>t})},12380:(V,h,mV)=>{mV.d(h,{c:()=>N});var t=mV(12264),L=mV(12388);class N{static Instantiate(V){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[V])return this.RegisteredExternalClasses[V];const h=(0,L.e)(V);if(h)return h;t.e.Warn(V+" not found, you may have missed an import.");const mV=V.split(".");let N=window||this;for(let t=0,L=mV.length;t<L;t++)N=N[mV[t]];return"function"!==typeof N?null:N}}N.RegisteredExternalClasses={}},12280:(V,h,mV)=>{mV.d(h,{e:()=>L});var t=mV(12261);class L{static get Now(){return(0,t.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12309:(V,h,mV)=>{mV.d(h,{b:()=>A,d:()=>N,f:()=>t,i:()=>L});const t=V=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(V);let h="";for(let mV=0;mV<V.byteLength;mV++)h+=String.fromCharCode(V[mV]);return h},L=V=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let mV,t,L,N,A,k,C,K="",o=0;const n=ArrayBuffer.isView(V)?new Uint8Array(V.buffer,V.byteOffset,V.byteLength):new Uint8Array(V);for(;o<n.length;)mV=n[o++],t=o<n.length?n[o++]:Number.NaN,L=o<n.length?n[o++]:Number.NaN,N=mV>>2,A=(3&mV)<<4|t>>4,k=(15&t)<<2|L>>6,C=63&L,isNaN(t)?k=C=64:isNaN(L)&&(C=64),K+=h.charAt(N)+h.charAt(A)+h.charAt(k)+h.charAt(C);return K},N=V=>atob(V),A=V=>{const h=N(V),mV=h.length,t=new Uint8Array(new ArrayBuffer(mV));for(let L=0;L<mV;L++)t[L]=h.charCodeAt(L);return t.buffer}},12400:(V,h,mV)=>{function t(V){let h=1;do{h*=2}while(h<V);return h===V}function L(V,h,mV){return V*(1-mV)+h*mV}function N(V){const h=A(V),mV=k(V);return h-V>V-mV?mV:h}function A(V){return V--,V|=V>>1,V|=V>>2,V|=V>>4,V|=V>>8,V|=V>>16,++V}function k(V){return V|=V>>1,V|=V>>2,V|=V>>4,V|=V>>8,(V|=V>>16)-(V>>1)}function C(V,h){let mV;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:mV=k(V);break;case 2:mV=N(V);break;default:mV=A(V)}return Math.min(mV,h)}mV.d(h,{c:()=>k,e:()=>C,h:()=>t,j:()=>L,l:()=>N})},12253:(V,h,mV)=>{mV.r(h),mV.d(h,{AsyncLoop:()=>c,Tools:()=>s,className:()=>M});var t=mV(12258),L=mV(12261),N=mV(12264),A=mV(12272),k=mV(12280),C=mV(12288),K=mV(12292),o=mV(12300),n=mV(12303),q=mV(12322),x=mV(12380),R=mV(12393),d=mV(12400);class s{static get BaseUrl(){return n.i.BaseUrl}static set BaseUrl(V){n.i.BaseUrl=V}static get CleanUrl(){return n.i.CleanUrl}static set CleanUrl(V){n.i.CleanUrl=V}static IsAbsoluteUrl(V){return 0===V.indexOf("//")||-1!==V.indexOf("://")&&(-1!==V.indexOf(".")&&(-1!==V.indexOf("/")&&(!(V.indexOf(":")>V.indexOf("/"))&&(V.indexOf("://")<V.indexOf(".")||(0===V.indexOf("data:")||0===V.indexOf("blob:"))))))}static set ScriptBaseUrl(V){n.i.ScriptBaseUrl=V}static get ScriptBaseUrl(){return n.i.ScriptBaseUrl}static set CDNBaseUrl(V){s.ScriptBaseUrl=V,s.AssetBaseUrl=V}static set ScriptPreprocessUrl(V){n.i.ScriptPreprocessUrl=V}static get ScriptPreprocessUrl(){return n.i.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return n.i.DefaultRetryStrategy}static set DefaultRetryStrategy(V){n.i.DefaultRetryStrategy=V}static get CorsBehavior(){return n.i.CorsBehavior}static set CorsBehavior(V){n.i.CorsBehavior=V}static get UseFallbackTexture(){return o.b.UseFallbackTexture}static set UseFallbackTexture(V){o.b.UseFallbackTexture=V}static get RegisteredExternalClasses(){return x.c.RegisteredExternalClasses}static set RegisteredExternalClasses(V){x.c.RegisteredExternalClasses=V}static get fallbackTexture(){return o.b.FallbackTexture}static set fallbackTexture(V){o.b.FallbackTexture=V}static FetchToRef(V,h,mV,t,L,N){const A=4*((Math.abs(V)*mV%mV|0)+(Math.abs(h)*t%t|0)*mV);N.r=L[A]/255,N.g=L[A+1]/255,N.b=L[A+2]/255,N.a=L[A+3]/255}static Mix(V,h,mV){return 0}static Instantiate(V){return x.c.Instantiate(V)}static SetImmediate(V){q.b.SetImmediate(V)}static IsExponentOfTwo(V){return!0}static FloatRound(V){return Math.fround(V)}static GetFilename(V){const h=V.lastIndexOf("/");return h<0?V:V.substring(h+1)}static GetFolderPath(V){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const mV=V.lastIndexOf("/");return mV<0?h?V:"":V.substring(0,mV+1)}static ToDegrees(V){return 180*V/Math.PI}static ToRadians(V){return V*Math.PI/180}static SmoothAngleChange(V,h){let mV=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const t=this.ToRadians(V),L=this.ToRadians(h);return this.ToDegrees(Math.atan2((1-mV)*Math.sin(L)+mV*Math.sin(t),(1-mV)*Math.cos(L)+mV*Math.cos(t)))}static MakeArray(V,h){return!0===h||void 0!==V&&null!=V?Array.isArray(V)?V:[V]:null}static GetPointerPrefix(V){return(0,L.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(V,h){(0,n.E)(V,h)}static SetReferrerPolicyBehavior(V,h){h.referrerPolicy=V}static get PreprocessUrl(){return n.i.PreprocessUrl}static set PreprocessUrl(V){n.i.PreprocessUrl=V}static LoadImage(V,h,mV,t,L,N){return(0,n.x)(V,h,mV,t,L,N)}static LoadFile(V,h,mV,t,L,N){return(0,n.v)(V,h,mV,t,L,N)}static async LoadFileAsync(V){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((mV,t)=>{(0,n.v)(V,(V=>{mV(V)}),void 0,void 0,h,((V,h)=>{t(h)}))}))}static GetAssetUrl(V){if(!V)return"";if(s.AssetBaseUrl&&V.startsWith(s._DefaultAssetsUrl)){const h="/"===s.AssetBaseUrl[s.AssetBaseUrl.length-1]?s.AssetBaseUrl.substring(0,s.AssetBaseUrl.length-1):s.AssetBaseUrl;return V.replace(s._DefaultAssetsUrl,h)}return V}static GetBabylonScriptURL(V,h){if(!V)return"";if(s.ScriptBaseUrl&&V.startsWith(s._DefaultCdnUrl)){const h="/"===s.ScriptBaseUrl[s.ScriptBaseUrl.length-1]?s.ScriptBaseUrl.substring(0,s.ScriptBaseUrl.length-1):s.ScriptBaseUrl;V=V.replace(s._DefaultCdnUrl,h)}return V=s.ScriptPreprocessUrl(V),h&&(V=s.GetAbsoluteUrl(V)),V}static LoadBabylonScript(V,h,mV,t){V=s.GetBabylonScriptURL(V),s.LoadScript(V,h,mV)}static async LoadBabylonScriptAsync(V){return V=s.GetBabylonScriptURL(V),await s.LoadScriptAsync(V)}static LoadScript(V,h,mV,t){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(V),h&&h()}catch(C){null===mV||void 0===mV||mV(`Unable to load script '${V}' in worker`,C)}return}if(!(0,L.k)())return void(null===mV||void 0===mV||mV(`Cannot load script '${V}' outside of a window or a worker`));const A=document.getElementsByTagName("head")[0],k=document.createElement("script");N?(k.setAttribute("type","module"),k.innerText=V):(k.setAttribute("type","text/javascript"),k.setAttribute("src",V)),t&&(k.id=t),k.onload=()=>{h&&h()},k.onerror=h=>{mV&&mV(`Unable to load script '${V}'`,h)},A.appendChild(k)}static async LoadScriptAsync(V,h){return await new Promise(((mV,t)=>{this.LoadScript(V,(()=>{mV()}),((V,h)=>{t(h||new Error(V))}),h)}))}static ReadFileAsDataURL(V,h,mV){const L=new FileReader,N={onCompleteObservable:new t.d,abort:()=>L.abort()};return L.onloadend=()=>{N.onCompleteObservable.notifyObservers(N)},L.onload=V=>{h(V.target.result)},L.onprogress=mV,L.readAsDataURL(V),N}static ReadFile(V,h,mV,t,L){return(0,n.y)(V,h,mV,t,L)}static FileAsURL(V){const h=new Blob([V]);return window.URL.createObjectURL(h)}static Format(V){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return V.toFixed(h)}static DeepCopy(V,h,mV,t){A.b.DeepCopy(V,h,mV,t)}static IsEmpty(V){for(const h in V)if(Object.prototype.hasOwnProperty.call(V,h))return!1;return!0}static RegisterTopRootEvents(V,h){for(let t=0;t<h.length;t++){const L=h[t];V.addEventListener(L.name,L.handler,!1);try{window.parent&&window.parent.addEventListener(L.name,L.handler,!1)}catch(mV){}}}static UnregisterTopRootEvents(V,h){for(let t=0;t<h.length;t++){const L=h[t];V.removeEventListener(L.name,L.handler);try{V.parent&&V.parent.removeEventListener(L.name,L.handler)}catch(mV){}}}static async DumpFramebuffer(V,h,mV,t){throw(0,C.c)("DumpTools")}static DumpData(V,h,mV,t){throw(0,C.c)("DumpTools")}static async DumpDataAsync(V,h,mV){throw(0,C.c)("DumpTools")}static _IsOffScreenCanvas(V){return void 0!==V.convertToBlob}static ToBlob(V,h){let mV=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",t=arguments.length>3?arguments[3]:void 0;s._IsOffScreenCanvas(V)||V.toBlob||(V.toBlob=function(V,h,mV){setTimeout((()=>{const t=atob(this.toDataURL(h,mV).split(",")[1]),L=t.length,N=new Uint8Array(L);for(let V=0;V<L;V++)N[V]=t.charCodeAt(V);V(new Blob([N]))}))}),s._IsOffScreenCanvas(V)?V.convertToBlob({type:mV,quality:t}).then((V=>h(V))):V.toBlob((function(V){h(V)}),mV,t)}static DownloadBlob(V,h){if("download"in document.createElement("a")){if(!h){const V=new Date;h="screenshot_"+((V.getFullYear()+"-"+(V.getMonth()+1)).slice(2)+"-"+V.getDate()+"_"+V.getHours()+"-"+("0"+V.getMinutes()).slice(-2))+".png"}s.Download(V,h)}else if(V&&"undefined"!==typeof URL){const h=URL.createObjectURL(V),mV=window.open("");if(!mV)return;const t=mV.document.createElement("img");t.onload=function(){URL.revokeObjectURL(h)},t.src=h,mV.document.body.appendChild(t)}}static EncodeScreenshotCanvasData(V,h){let mV=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",t=arguments.length>3?arguments[3]:void 0,L=arguments.length>4?arguments[4]:void 0;if("string"!==typeof t&&h){if(h){if(s._IsOffScreenCanvas(V))return void V.convertToBlob({type:mV,quality:L}).then((V=>{const mV=new FileReader;mV.readAsDataURL(V),mV.onloadend=()=>{const V=mV.result;h(V)}}));const t=V.toDataURL(mV,L);h(t)}}else this.ToBlob(V,(function(V){V&&s.DownloadBlob(V,t),h&&h("")}),mV,L)}static Download(V,h){if("undefined"===typeof URL)return;const mV=window.URL.createObjectURL(V),t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=mV,t.download=h,t.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),t.click(),window.URL.revokeObjectURL(mV)}static BackCompatCameraNoPreventDefault(V){return"boolean"===typeof V[0]?V[0]:"boolean"===typeof V[1]&&V[1]}static CreateScreenshot(V,h,mV,t){throw(0,C.c)("ScreenshotTools")}static async CreateScreenshotAsync(V,h,mV){throw(0,C.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(V,h,mV,t){throw(0,C.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(V,h,mV){throw(0,C.c)("ScreenshotTools")}static RandomId(){return(0,R.b)()}static IsBase64(V){return(0,n.n)(V)}static DecodeBase64(V){return(0,n.e)(V)}static get errorsCount(){return N.e.errorsCount}static Log(V){N.e.Log(V)}static Warn(V){N.e.Warn(V)}static Error(V){N.e.Error(V)}static get LogCache(){return N.e.LogCache}static ClearLogCache(){N.e.ClearLogCache()}static set LogLevels(V){N.e.LogLevels=V}static set PerformanceLogLevel(V){return(V&s.PerformanceUserMarkLogLevel)===s.PerformanceUserMarkLogLevel?(s.StartPerformanceCounter=s._StartUserMark,void(s.EndPerformanceCounter=s._EndUserMark)):(V&s.PerformanceConsoleLogLevel)===s.PerformanceConsoleLogLevel?(s.StartPerformanceCounter=s._StartPerformanceConsole,void(s.EndPerformanceCounter=s._EndPerformanceConsole)):(s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,void(s.EndPerformanceCounter=s._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(V,h){}static _EndPerformanceCounterDisabled(V,h){}static _StartUserMark(V){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s._Performance){if(!(0,L.k)())return;s._Performance=window.performance}h&&s._Performance.mark&&s._Performance.mark(V+"-Begin")}static _EndUserMark(V){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&s._Performance.mark&&(s._Performance.mark(V+"-End"),s._Performance.measure(V,V+"-Begin",V+"-End"))}static _StartPerformanceConsole(V){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(s._StartUserMark(V,h),console.time&&console.time(V))}static _EndPerformanceConsole(V){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(s._EndUserMark(V,h),console.timeEnd(V))}static get Now(){return k.e.Now}static GetClassName(V){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],mV=null;if(!h&&V.getClassName)mV=V.getClassName();else{if(V instanceof Object){mV=(h?V:Object.getPrototypeOf(V)).constructor.__bjsclassName__}mV||(mV=typeof V)}return mV}static First(V,h){for(const mV of V)if(h(mV))return mV;return null}static getFullClassName(V){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],mV=null,t=null;if(!h&&V.getClassName)mV=V.getClassName();else{if(V instanceof Object){const L=h?V:Object.getPrototypeOf(V);mV=L.constructor.__bjsclassName__,t=L.constructor.__bjsmoduleName__}mV||(mV=typeof V)}return mV?(null!=t?t+".":"")+mV:null}static async DelayAsync(V){await new Promise((h=>{setTimeout((()=>{h()}),V)}))}static IsSafari(){return!!(0,L.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function M(V,h){return mV=>{mV.__bjsclassName__=V,mV.__bjsmoduleName__=null!=h?h:null}}s.AssetBaseUrl="",s.UseCustomRequestHeaders=!1,s.CustomRequestHeaders=K.e.CustomRequestHeaders,s.GetDOMTextContent=L.c,s._DefaultCdnUrl="https://cdn.babylonjs.com",s._DefaultAssetsUrl="https://assets.babylonjs.com/core",s.GetAbsoluteUrl="object"===typeof document?V=>{const h=document.createElement("a");return h.href=V,h.href}:"function"===typeof URL&&"object"===typeof location?V=>new URL(V,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},s.NoneLogLevel=N.e.NoneLogLevel,s.MessageLogLevel=N.e.MessageLogLevel,s.WarningLogLevel=N.e.WarningLogLevel,s.ErrorLogLevel=N.e.ErrorLogLevel,s.AllLogLevel=N.e.AllLogLevel,s.IsWindowObjectExist=L.k,s.PerformanceNoneLogLevel=0,s.PerformanceUserMarkLogLevel=1,s.PerformanceConsoleLogLevel=2,s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,s.EndPerformanceCounter=s._EndPerformanceCounterDisabled;class c{constructor(V,h,mV){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=V,this.index=t-1,this._done=!1,this._fn=h,this._successCallback=mV}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(V,h,mV){const t=new c(V,h,mV,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return t.executeNext(),t}static SyncAsyncForLoop(V,h,mV,t,L){let N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return c.Run(Math.ceil(V/h),(t=>{L&&L()?t.breakLoop():setTimeout((()=>{for(let N=0;N<h;++N){const A=t.index*h+N;if(A>=V)break;if(mV(A),L&&L()){t.breakLoop();break}}t.executeNext()}),N)}),t)}}s.Mix=d.j,s.IsExponentOfTwo=d.h,o.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12388:(V,h,mV)=>{mV.d(h,{e:()=>N,i:()=>L});const t={};function L(V,h){t[V]=h}function N(V){return t[V]}},12292:(V,h,mV)=>{mV.d(h,{e:()=>t});class t{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(t.CustomRequestHeaders).length>0||t.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const V in t.CustomRequestHeaders){const h=t.CustomRequestHeaders[V];h&&this._xhr.setRequestHeader(V,h)}}_shouldSkipRequestModifications(V){return t.SkipRequestModificationForBabylonCDN&&(V.includes("preview.babylonjs.com")||V.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(V){this._xhr.onprogress=V}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(V){this._xhr.responseType=V}get timeout(){return this._xhr.timeout}set timeout(V){this._xhr.timeout=V}addEventListener(V,h,mV){this._xhr.addEventListener(V,h,mV)}removeEventListener(V,h,mV){this._xhr.removeEventListener(V,h,mV)}abort(){this._xhr.abort()}send(V){t.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(V)}open(V,h){for(const mV of t.CustomRequestModifiers){if(this._shouldSkipRequestModifications(h))return;h=mV(this._xhr,h)||h}h=(h=h.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=h,this._xhr.open(V,h,!0)}setRequestHeader(V,h){this._xhr.setRequestHeader(V,h)}getResponseHeader(V){return this._xhr.getResponseHeader(V)}}t.CustomRequestHeaders={},t.CustomRequestModifiers=new Array,t.SkipRequestModificationForBabylonCDN=!0}}]);