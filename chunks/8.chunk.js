"use strict";(self.hwpa2z1pqte=self.hwpa2z1pqte||[]).push([[8],{12797:(h,R,l)=>{l.d(R,{c:()=>T});var j=l(12749),a=l(12711),D=l(12799),U=l(12829),F=l(12724);class w{constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,h&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(h){this._zOffset!==h&&(this._zOffset=h,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(h){this._zOffsetUnits!==h&&(this._zOffsetUnits=h,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(h){this._cullFace!==h&&(this._cullFace=h,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(h){this._cull!==h&&(this._cull=h,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(h){this._depthFunc!==h&&(this._depthFunc=h,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(h){this._depthMask!==h&&(this._depthMask=h,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(h){this._depthTest!==h&&(this._depthTest=h,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(h){this._frontFace!==h&&(this._frontFace=h,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(h){this.isDirty&&(this._isCullDirty&&(this.cull?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(h.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(h.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(h.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(h.enable(h.POLYGON_OFFSET_FILL),h.polygonOffset(this.zOffset,this.zOffsetUnits)):h.disable(h.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(h.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class mh{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(h){this._func!==h&&(this._func=h,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(h){this._funcRef!==h&&(this._funcRef=h,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(h){this._funcMask!==h&&(this._funcMask=h,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(h){this._opStencilFail!==h&&(this._opStencilFail=h,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(h){this._opDepthFail!==h&&(this._opDepthFail=h,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(h){this._opStencilDepthPass!==h&&(this._opStencilDepthPass=h,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(h){this._mask!==h&&(this._mask=h,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(h){this._enabled!==h&&(this._enabled=h,this._isStencilTestDirty=!0)}constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,h&&this.reset()}reset(){var h;this.stencilMaterial=void 0,null===(h=this.stencilGlobal)||void 0===h||h.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(h){var R;if(!h)return;const l=!this.useStencilGlobalOnly&&!(null===(R=this.stencilMaterial)||void 0===R||!R.enabled);this.enabled=l?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=l?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=l?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=l?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=l?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=l?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=l?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=l?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(h.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(h.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(h.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class u{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=u.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=u.KEEP,this.opDepthFail=u.KEEP,this.opStencilDepthPass=u.REPLACE}get stencilFunc(){return this.func}set stencilFunc(h){this.func=h}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(h){this.funcRef=h}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(h){this.funcMask=h}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(h){this.opStencilFail=h}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(h){this.opDepthFail=h}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(h){this.opStencilDepthPass=h}get stencilMask(){return this.mask}set stencilMask(h){this.mask=h}get stencilTest(){return this.enabled}set stencilTest(h){this.enabled=h}}u.ALWAYS=519,u.KEEP=7680,u.REPLACE=7681;class c{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(h){this._alphaBlend!==h&&(this._alphaBlend=h,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(h,R,l,j){this._blendConstants[0]===h&&this._blendConstants[1]===R&&this._blendConstants[2]===l&&this._blendConstants[3]===j||(this._blendConstants[0]=h,this._blendConstants[1]=R,this._blendConstants[2]=l,this._blendConstants[3]=j,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(h,R,l,j){this._blendFunctionParameters[0]===h&&this._blendFunctionParameters[1]===R&&this._blendFunctionParameters[2]===l&&this._blendFunctionParameters[3]===j||(this._blendFunctionParameters[0]=h,this._blendFunctionParameters[1]=R,this._blendFunctionParameters[2]=l,this._blendFunctionParameters[3]=j,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(h,R){this._blendEquationParameters[0]===h&&this._blendEquationParameters[1]===R||(this._blendEquationParameters[0]=h,this._blendEquationParameters[1]=R,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(h){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?h.enable(h.BLEND):h.disable(h.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(h.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(h.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(h.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var J=l(12733),q=l(12835),Q=l(12705),Y=l(12696),s=l(12787),t=l(12842);function f(h,R){if((0,Q.n)()){const{requestAnimationFrame:l}=R||window;if("function"===typeof l)return l(h)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(h);return setTimeout(h,16)}class T{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(h){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get UF(){return this._useReverseDepthBuffer}set UF(h){h!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=h,this._depthCullingState.depthFunc=h?518:515)}setColorWrite(h){h!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=h)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(h){if(h)return this.isNDCHalfZRange?h.IS_NDC_HALF_ZRANGE="":delete h.IS_NDC_HALF_ZRANGE,this.UF?h.USE_REVERSE_DEPTHBUFFER="":delete h.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?h.USE_EXACT_SRGB_CONVERSIONS="":delete h.USE_EXACT_SRGB_CONVERSIONS);{let h="";return this.isNDCHalfZRange&&(h+="#define IS_NDC_HALF_ZRANGE"),this.UF&&(h&&(h+="\n"),h+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(h&&(h+="\n"),h+="#define USE_EXACT_SRGB_CONVERSIONS"),h}}_rebuildInternalTextures(){const h=this._internalTexturesCache.slice();for(const R of h)R._rebuild()}_rebuildRenderTargetWrappers(){const h=this._renderTargetWrapperCache.slice();for(const R of h)R._rebuild()}_rebuildEffects(){for(const h in this._compiledEffects){const R=this._compiledEffects[h];R._pipelineContext=null,R._prepareEffect()}D.Effect.ResetCache()}_rebuildGraphicsResources(){var h;this.wipeCaches(!0),this._rebuildEffects(),null===(h=this._rebuildComputeEffects)||void 0===h||h.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){a.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(h){setTimeout((()=>{this._clearEmptyResources();const R=this._depthCullingState.depthTest,l=this._depthCullingState.depthFunc,j=this._depthCullingState.depthMask,a=this._stencilState.stencilTest;h(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=R,this._depthCullingState.depthFunc=l,this._depthCullingState.depthMask=j,this._stencilState.stencilTest=a,this._flagContextRestored()}),0)}get mh(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(h){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(h){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const h=new Uint8Array(4),R=[h,h,h,h,h,h];this._emptyCubeTexture=this.createRawCubeTexture(R,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(h){if(!h)return this._activeRenderLoops.length=0,void this._cancelFrame();const R=this._activeRenderLoops.indexOf(h);R>=0&&(this._activeRenderLoops.splice(R,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const h=this._frameHandler;if(this._frameHandler=0,(0,Q.n)()){const{cancelAnimationFrame:R}=this.getHostWindow()||window;if("function"===typeof R)return R(h)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(h);return clearTimeout(h)}}FF(){this.onBeginFrameObservable.notifyObservers(this)}wF(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(h){this._maxFPS=h,void 0!==h&&(this._minFrameTime=h<=0?Number.MAX_VALUE:1e3/h)}_isOverFrameTime(h){if(!h||void 0===this._maxFPS)return!1;const R=h-this._lastFrameTime;return this._lastFrameTime=h,this._renderAccumulator+=R,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(h){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(h)){let h=!0;(this.mh||!this.renderEvenInBackground&&this._windowIsBackground)&&(h=!1),h&&(this.FF(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.wF())}}_renderLoop(h){this._processFrame(h),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let h=0;h<this._activeRenderLoops.length;h++){(0,this._activeRenderLoops[h])()}}_renderViews(){return!1}_queueNewFrame(h,R){return f(h,R)}runRenderLoop(h){-1===this._activeRenderLoops.indexOf(h)&&(this._activeRenderLoops.push(h),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(h){this._depthCullingState.depthTest=h}setZOffset(h){this._depthCullingState.zOffset=this.UF?-h:h}getZOffset(){const h=this._depthCullingState.zOffset;return this.UF?-h:h}setZOffsetUnits(h){this._depthCullingState.zOffsetUnits=this.UF?-h:h}getZOffsetUnits(){const h=this._depthCullingState.zOffsetUnits;return this.UF?-h:h}getHostWindow(){return(0,Q.n)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(h){this._compatibilityMode=!0}_rebuildTextures(){for(const h of this.scenes)h._rebuildTextures();for(const h of this._virtualScenes)h._rebuildTextures()}_releaseRenderTargetWrapper(h){const R=this._renderTargetWrapperCache.indexOf(h);-1!==R&&this._renderTargetWrapperCache.splice(R,1)}get currentViewport(){return this._cachedViewport}setViewport(h,R,l){const j=R||this.getRenderWidth(),a=l||this.getRenderHeight(),D=h.x||0,U=h.y||0;this._cachedViewport=h,this._viewport(D*j,U*a,j*h.width,a*h.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(h){return new Path2D(h)}get description(){let h=this.name+this.version;return this._caps.parallelShaderCompile&&(h+=" - Parallel shader compilation"),h}_createTextureBase(h,R,l,D){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,F=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,mh=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,J=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,Q=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Y=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,s=arguments.length>13?arguments[13]:void 0,f=arguments.length>14?arguments[14]:void 0,E=arguments.length>15?arguments[15]:void 0;const x="data:"===(h=h||"").substring(0,5),G="blob:"===h.substring(0,5),p=x&&-1!==h.indexOf(";base64,"),O=J||new q.e(this,1);O!==J&&(O.label=h.substring(0,60));const y=h;!this._transformTextureUrl||p||J||c||(h=this._transformTextureUrl(h)),y!==h&&(O._originalUrl=y);const v=h.lastIndexOf(".");let b=Y||(v>-1?h.substring(v).toLowerCase():"");b.indexOf("?")>-1&&(b=b.split("?")[0]);const I=(0,t.e)(b,s);D&&D.addPendingData(O),O.url=h,O.generateMipMaps=!R,O.samplingMode=U,O.invertY=l,O._useSRGBBuffer=this._getUseSRGBBuffer(!!E,R),this._doNotHandleContextLost||(O._buffer=c);let L=null;F&&!J&&(L=O.onLoadedObservable.add(F)),J||this._internalTexturesCache.push(O);const n=(l,J)=>{D&&D.removePendingData(O),h===y?(L&&O.onLoadedObservable.remove(L),j.b.UseFallbackTexture&&h!==j.b.FallbackTexture&&this._createTextureBase(j.b.FallbackTexture,R,O.invertY,D,U,null,w,mh,u,c,O),l=(l||"Unknown error")+(j.b.UseFallbackTexture?" - Fallback texture was used":""),O.onErrorObservable.notifyObservers({message:l,exception:J}),w&&w(l,J)):(a.c.Warn(`Failed to load ${h}, falling back to ${y}`),this._createTextureBase(y,R,O.invertY,D,U,F,w,mh,u,c,O,Q,Y,s,f,E))};if(I){const R=async h=>{(await I).loadData(h,O,((h,R,l,j,a,F)=>{F?n("TextureLoader failed to load data"):mh(O,b,D,{width:h,height:R},O.invertY,!l,j,(()=>(a(),!1)),U)}),f)};c?c instanceof ArrayBuffer?R(new Uint8Array(c)):ArrayBuffer.isView(c)?R(c):w&&w("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(h,(h=>{R(new Uint8Array(h))}),void 0,D?D.offlineProvider:void 0,!0,((h,R)=>{n("Unable to load "+(h&&h.responseURL,R))}))}else{const l=h=>{G&&!this._doNotHandleContextLost&&(O._buffer=h),mh(O,b,D,h,O.invertY,R,!1,u,U)};!x||p?c&&("string"===typeof c.decoding||c.close)?l(c):T._FileToolsLoadImage(h||"",l,n,D?D.offlineProvider:null,s,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof c||c instanceof ArrayBuffer||ArrayBuffer.isView(c)||c instanceof Blob?T._FileToolsLoadImage(c,l,n,D?D.offlineProvider:null,s,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):c&&l(c)}return O}_rebuildBuffers(){for(const h of this._uniformBuffers)h._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,Q.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const h in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,h)&&(this._boundTexturesCache[h]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(h){this._name=h}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(h){this._hardwareScalingLevel=h,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(h){this._doNotHandleContextLost=h}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(h,R,l){var a,D;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new w,this._stencilStateComposer=new mh,this._stencilState=new u,this._alphaState=new c,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new Y.d,this.onCanvasFocusObservable=new Y.d,this.onNewSceneAddedObservable=new Y.d,this.onResizeObservable=new Y.d,this.onCanvasPointerOutObservable=new Y.d,this.onEffectErrorObservable=new Y.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new Y.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=h=>this._renderLoop(h),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new Y.d,this.onAfterShaderCompilationObservable=new Y.d,this.onBeginFrameObservable=new Y.d,this.onEndFrameObservable=new Y.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new Y.d,this.onContextRestoredObservable=new Y.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.mw=new Y.d,this.onReleaseEffectsObservable=new Y.d,j.b.Instances.push(this),this.startTime=F.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,U.c.SetMatrixPrecision(!!R.useHighPrecisionMatrix),(0,Q.l)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=l??!1,R.antialias=h??R.antialias,R.deterministicLockstep=R.deterministicLockstep??!1,R.lockstepMaxSteps=R.lockstepMaxSteps??4,R.timeStep=R.timeStep??1/60,R.uF=R.uF??!0,this._audioContext=(null===(a=R.audioEngineOptions)||void 0===a?void 0:a.audioContext)??null,this._audioDestination=(null===(D=R.audioEngineOptions)||void 0===D?void 0:D.audioDestination)??null,this.premultipliedAlpha=R.premultipliedAlpha??!0,this._doNotHandleContextLost=!!R.doNotHandleContextLost,this._isStencilEnable=!!R.uF,this.useExactSrgbConversions=R.useExactSrgbConversions??!1;const J=(0,Q.n)()&&window.devicePixelRatio||1,q=R.limitDeviceRatio||J;l=l||R.adaptToDeviceRatio||!1,this._hardwareScalingLevel=l?1/Math.min(q,J):1,this._lastDevicePixelRatio=J,this._creationOptions=R}resize(){let h,R,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const h=(0,Q.n)()&&window.devicePixelRatio||1,R=this._lastDevicePixelRatio/h;this._lastDevicePixelRatio=h,this._hardwareScalingLevel*=R}if((0,Q.n)()&&(0,Q.h)())if(this._renderingCanvas){var j,a;const l=null===(j=(a=this._renderingCanvas).getBoundingClientRect)||void 0===j?void 0:j.call(a);h=this._renderingCanvas.clientWidth||(null===l||void 0===l?void 0:l.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,R=this._renderingCanvas.clientHeight||(null===l||void 0===l?void 0:l.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else h=window.innerWidth,R=window.innerHeight;else h=this._renderingCanvas?this._renderingCanvas.width:100,R=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(h/this._hardwareScalingLevel,R/this._hardwareScalingLevel,l)}setSize(h,R){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(h|=0,R|=0,!l&&this._renderingCanvas.width===h&&this._renderingCanvas.height===R)return!1;if(this._renderingCanvas.width=h,this._renderingCanvas.height=R,this.scenes){for(let h=0;h<this.scenes.length;h++){const R=this.scenes[h];for(let h=0;h<R.cameras.length;h++){R.cameras[h]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(h,R,l,j,a,D,U,F,w,mh,u){throw(0,J.b)("engine.rawTexture")}createRawCubeTexture(h,R,l,j,a,D,U,F){throw(0,J.b)("engine.rawTexture")}createRawTexture3D(h,R,l,j,a,D,U,F,w,mh,u){throw(0,J.b)("engine.rawTexture")}createRawTexture2DArray(h,R,l,j,a,D,U,F,w,mh,u){throw(0,J.b)("engine.rawTexture")}_sharedInit(h){this._renderingCanvas=h}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const h=navigator.userAgent;this.hostInformation.isMobile=-1!==h.indexOf("Mobile")||-1!==h.indexOf("Mac")&&(0,Q.h)()&&"ontouchend"in document},this._checkForMobile(),(0,Q.n)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(h){return document.createElement("video")}_reportDrawCall(){var h;let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(h=this._drawCalls)||void 0===h||h.addCount(R,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(h,R){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(h,R){return createImageBitmap(h,R)}resizeImageBitmap(h,R,l){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(h){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(h,R){if("undefined"===typeof document)return new OffscreenCanvas(h,R);const l=document.createElement("canvas");return l.width=h,l.height=R,l}createCanvas(h,R){return T._CreateCanvas(h,R)}static _FileToolsLoadImage(h,R,l,j,a,D,U){throw(0,J.b)("FileTools")}_loadFile(h,R,l,j,a,D){const U=(0,s.j)(h,R,l,j,a,D);return this._activeRequests.push(U),U.onCompleteObservable.add((()=>{const h=this._activeRequests.indexOf(U);-1!==h&&this._activeRequests.splice(h,1)})),U}static _FileToolsLoadFile(h,R,l,j,a,D){if(s.b.loadFile)return s.b.loadFile(h,R,l,j,a,D);throw(0,J.b)("FileTools")}dispose(){var h;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(h=this.releaseComputeEffects)||void 0===h||h.call(this),D.Effect.ResetCache();for(const l of this._activeRequests)l.abort();this._boundRenderFunction=null,this.mw.notifyObservers(this),this.mw.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,Q.n)()&&window.removeEventListener("resize",this._checkForMobile);const R=j.b.Instances.indexOf(this);R>=0&&j.b.Instances.splice(R,1),j.b.Instances.length||(j.b.OnEnginesDisposedObservable.notifyObservers(this),j.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(h){throw(0,J.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(h,R){for(let l=0;l<j.b.Instances.length;l++){const a=j.b.Instances[l];for(let l=0;l<a.scenes.length;l++)a.scenes[l].markAllMaterialsAsDirty(h,R)}}}T._RenderPassIdCounter=0,T._RescalePostProcessFactory=null,T.CollisionsEpsilon=.001,T.QueueNewFrame=f},12749:(h,R,l)=>{l.d(R,{b:()=>a});var j=l(12696);class a{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}a.Instances=[],a.OnEnginesDisposedObservable=new j.d,a._LastCreatedScene=null,a.UseFallbackTexture=!0,a.FallbackTexture=""},12829:(h,R,l)=>{l.d(R,{c:()=>j});class j{static SetMatrixPrecision(h){if(j.MatrixTrackPrecisionChange=!1,h&&!j.MatrixUse64Bits&&j.MatrixTrackedMatrices)for(let R=0;R<j.MatrixTrackedMatrices.length;++R){const h=j.MatrixTrackedMatrices[R],l=h.cF;h.cF=new Array(16);for(let R=0;R<16;++R)h.cF[R]=l[R]}j.MatrixUse64Bits=h,j.MatrixCurrentType=j.MatrixUse64Bits?Array:Float32Array,j.MatrixTrackedMatrices=null}}j.MatrixUse64Bits=!1,j.MatrixTrackPrecisionChange=!0,j.MatrixCurrentType=Float32Array,j.MatrixTrackedMatrices=[]},12842:(h,R,l)=>{l.d(R,{e:()=>U});var j=l(12711);const a=new Map;function D(h,R){(function(h){return a.delete(h)})(h)&&j.c.Warn(`Extension with the name '${h}' already exists`),a.set(h,R)}function U(h,R){"image/ktx"!==R&&"image/ktx2"!==R||(h=".ktx"),a.has(h)||(h.endsWith(".ies")&&D(".ies",(async()=>await l.e(15).then(l.bind(l,15349)).then((h=>new h._IESTextureLoader)))),h.endsWith(".dds")&&D(".dds",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(19),l.e(18),l.e(28)]).then(l.bind(l,15352)).then((h=>new h._DDSTextureLoader)))),h.endsWith(".basis")&&D(".basis",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(47)]).then(l.bind(l,15369)).then((h=>new h._BasisTextureLoader)))),h.endsWith(".env")&&D(".env",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(19),l.e(18),l.e(23),l.e(21),l.e(45),l.e(48)]).then(l.bind(l,15376)).then((h=>new h._ENVTextureLoader)))),h.endsWith(".hdr")&&D(".hdr",(async()=>await Promise.all([l.e(14),l.e(49)]).then(l.bind(l,15381)).then((h=>new h._HDRTextureLoader)))),(h.endsWith(".ktx")||h.endsWith(".ktx2"))&&(D(".ktx",(async()=>await l.e(30).then(l.bind(l,15385)).then((h=>new h._KTXTextureLoader)))),D(".ktx2",(async()=>await l.e(30).then(l.bind(l,15385)).then((h=>new h._KTXTextureLoader))))),h.endsWith(".tga")&&D(".tga",(async()=>await l.e(50).then(l.bind(l,15388)).then((h=>new h._TGATextureLoader)))),h.endsWith(".exr")&&D(".exr",(async()=>await l.e(16).then(l.bind(l,15397)).then((h=>new h._ExrTextureLoader)))));const j=a.get(h);return j?Promise.resolve(j(R)):null}},12835:(h,R,l)=>{l.d(R,{e:()=>U});var j,a=l(12696),D=l(12837);!function(h){h[h.Unknown=0]="Unknown",h[h.Url=1]="Url",h[h.Temp=2]="Temp",h[h.Raw=3]="Raw",h[h.Dynamic=4]="Dynamic",h[h.RenderTarget=5]="RenderTarget",h[h.MultiRenderTarget=6]="MultiRenderTarget",h[h.Cube=7]="Cube",h[h.CubeRaw=8]="CubeRaw",h[h.CubePrefiltered=9]="CubePrefiltered",h[h.Raw3D=10]="Raw3D",h[h.Raw2DArray=11]="Raw2DArray",h[h.DepthStencil=12]="DepthStencil",h[h.CubeRawRGBD=13]="CubeRawRGBD",h[h.Depth=14]="Depth"}(j||(j={}));class U extends D.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(h){this.generateMipMaps=h}get uniqueId(){return this._uniqueId}_setUniqueId(h){this._uniqueId=h}getEngine(){return this._engine}get source(){return this._source}constructor(h,R){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new a.d,this.onErrorObservable=new a.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=h,this._source=R,this._uniqueId=U._Counter++,l||(this._hardwareTexture=h._createHardwareTexture())}incrementReferences(){this._references++}updateSize(h,R){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,h,R,l),this.width=h,this.height=R,this.depth=l,this.baseWidth=h,this.baseHeight=R,this.baseDepth=l,this._size=h*R*l}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const h=this.onRebuildCallback(this),R=R=>{R._swapAndDie(this,!1),this.isReady=h.isReady};return void(h.isAsync?h.proxy.then(R):R(h.proxy))}let h;switch(this.source){case 2:case 12:case 14:break;case 1:return void(h=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(h=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:h=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),h._swapAndDie(this,!1),this.isReady=!0;break;case 10:h=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 11:h=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 4:h=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),h._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(h=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:h=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),h._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return h=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(h=>{h&&h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(h._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(h){var R;let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(R=this._hardwareTexture)||void 0===R||R.setUsage(h._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),h._hardwareTexture=this._hardwareTexture,l&&(h._isRGBD=this._isRGBD),this._lodTextureHigh&&(h._lodTextureHigh&&h._lodTextureHigh.dispose(),h._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(h._lodTextureMid&&h._lodTextureMid.dispose(),h._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(h._lodTextureLow&&h._lodTextureLow.dispose(),h._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(h._irradianceTexture&&h._irradianceTexture.dispose(),h._irradianceTexture=this._irradianceTexture);const j=this._engine.getLoadedTexturesCache();let a=j.indexOf(this);-1!==a&&j.splice(a,1),a=j.indexOf(h),-1===a&&j.push(h)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}U._Counter=0},12837:(h,R,l)=>{l.d(R,{d:()=>j});class j{get wrapU(){return this._cachedWrapU}set wrapU(h){this._cachedWrapU=h}get wrapV(){return this._cachedWrapV}set wrapV(h){this._cachedWrapV=h}get wrapR(){return this._cachedWrapR}set wrapR(h){this._cachedWrapR=h}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(h){this._cachedAnisotropicFilteringLevel=h}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(h){this._comparisonFunction=h}get useMipMaps(){return this._useMipMaps}set useMipMaps(h){this._useMipMaps=h}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=h,this._cachedWrapV=R,this._cachedWrapR=l,this._cachedAnisotropicFilteringLevel=j,this.samplingMode=a,this._comparisonFunction=D,this}compareSampler(h){return this._cachedWrapU===h._cachedWrapU&&this._cachedWrapV===h._cachedWrapV&&this._cachedWrapR===h._cachedWrapR&&this._cachedAnisotropicFilteringLevel===h._cachedAnisotropicFilteringLevel&&this.samplingMode===h.samplingMode&&this._comparisonFunction===h._comparisonFunction&&this._useMipMaps===h._useMipMaps}}},12718:(h,R,l)=>{l.d(R,{e:()=>D});var j=l(12711);const a=(h,R,l)=>h?h.getClassName&&"Mesh"===h.getClassName()?null:!h.getClassName||"SubMesh"!==h.getClassName()&&"PhysicsBody"!==h.getClassName()?h.clone?h.clone():Array.isArray(h)?h.slice():l&&"object"===typeof h?{...h}:null:h.clone(R):null;class D{static DeepCopy(h,R,l,D){let U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const F=function(h){const R=[];do{const l=Object.getOwnPropertyNames(h);for(const h of l)-1===R.indexOf(h)&&R.push(h)}while(h=Object.getPrototypeOf(h));return R}(h);for(const mh of F){if("_"===mh[0]&&(!D||-1===D.indexOf(mh)))continue;if(mh.endsWith("Observable"))continue;if(l&&-1!==l.indexOf(mh))continue;const F=h[mh],u=typeof F;if("function"!==u)try{if("object"===u)if(F instanceof Uint8Array)R[mh]=Uint8Array.from(F);else if(F instanceof Array){if(R[mh]=[],F.length>0)if("object"==typeof F[0])for(let h=0;h<F.length;h++){const l=a(F[h],R,U);-1===R[mh].indexOf(l)&&R[mh].push(l)}else R[mh]=F.slice(0)}else R[mh]=a(F,R,U);else R[mh]=F}catch(w){j.c.Warn(w.message)}}}}},12766:(h,R,l)=>{l.d(R,{e:()=>j,f:()=>a,g:()=>D});class j extends Error{}j._setPrototypeOf=Object.setPrototypeOf||((h,R)=>(h.__proto__=R,h));const a={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class D extends j{constructor(h,R,l){super(h),this.errorCode=R,this.innerError=l,this.name="RuntimeError",j._setPrototypeOf(this,D.prototype)}}},12758:(h,R,l)=>{l.d(R,{e:()=>n,g:()=>T,h:()=>v,i:()=>I,k:()=>O,j:()=>s,l:()=>G,n:()=>p,r:()=>y,v:()=>E});var j=l(12741),a=l(12705),D=l(12696);class U{}U.FilesToLoad={};var F=l(12766),w=l(12774),mh=l(12781),u=l(12749),c=l(12711),J=l(12790),q=l(12787),Q=l(12797);const Y=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class s extends F.g{constructor(h,R){super(h,F.f.LoadFileError),this.name="LoadFileError",F.e._setPrototypeOf(this,s.prototype),R instanceof j.b?this.request=R:this.file=R}}class t extends F.g{constructor(h,R){super(h,F.f.RequestFileError),this.request=R,this.name="RequestFileError",F.e._setPrototypeOf(this,t.prototype)}}class f extends F.g{constructor(h,R){super(h,F.f.ReadFileError),this.file=R,this.name="ReadFileError",F.e._setPrototypeOf(this,f.prototype)}}const T={DefaultRetryStrategy:class{static ExponentialBackoff(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(l,j,a)=>0!==j.status||a>=h||-1!==l.indexOf("file:")?-1:Math.pow(2,a)*R}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:h=>h,ScriptBaseUrl:"",ScriptPreprocessUrl:h=>h,CleanUrl:h=>h=h.replace(/#/gm,"%23")},E=(h,R)=>{if((!h||0!==h.indexOf("data:"))&&T.CorsBehavior)if("string"===typeof T.CorsBehavior||T.CorsBehavior instanceof String)R.crossOrigin=T.CorsBehavior;else{const l=T.CorsBehavior(h);l&&(R.crossOrigin=l)}},x={getRequiredSize:null},G=function(h,R,l,a){let D,F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",mh=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===c||void 0===c||!c._features.forceBitmapOverHTMLImageElement))return l("LoadImage is only supported in web or BabylonNative environments."),null;let J=!1;h instanceof ArrayBuffer||ArrayBuffer.isView(h)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(D=URL.createObjectURL(new Blob([h],{type:F})),J=!0):D=`data:${F};base64,`+(0,w.m)(h):h instanceof Blob?(D=URL.createObjectURL(h),J=!0):(D=T.CleanUrl(h),D=T.PreprocessUrl(D));const q=R=>{if(l){const j=D||h.toString();l(`Error while trying to load image: ${0===j.indexOf("http")||j.length<=128?j:j.slice(0,128)+"..."}`,R)}};if(null!==c&&void 0!==c&&c._features.forceBitmapOverHTMLImageElement)return O(D,(j=>{c.createImageBitmap(new Blob([j],{type:F}),{premultiplyAlpha:"none",...mh}).then((h=>{R(h),J&&URL.revokeObjectURL(D)})).catch((R=>{l&&l("Error while trying to load image: "+h,R)}))}),void 0,a||void 0,!0,((h,R)=>{q(R)})),null;const Q=new Image;if(x.getRequiredSize){const R=x.getRequiredSize(h);R.width&&(Q.width=R.width),R.height&&(Q.height=R.height)}E(D,Q);const Y=[],s=()=>{for(const h of Y)h.target.removeEventListener(h.name,h.handler);Y.length=0};Y.push({target:Q,name:"load",handler:()=>{s(),R(Q),J&&Q.src&&URL.revokeObjectURL(Q.src)}}),Y.push({target:Q,name:"error",handler:h=>{s(),q(h),J&&Q.src&&URL.revokeObjectURL(Q.src)}}),Y.push({target:document,name:"securitypolicyviolation",handler:h=>{if(h.blockedURI!==Q.src||"JF"===h.disposition)return;s();const R=new Error(`CSP violation of policy ${h.effectiveDirective} ${h.blockedURI}. Current policy is ${h.originalPolicy}`);u.b.UseFallbackTexture=!1,q(R),J&&Q.src&&URL.revokeObjectURL(Q.src),Q.src=""}}),(()=>{for(const h of Y)h.target.addEventListener(h.name,h.handler)})();const t="blob:"===D.substring(0,5),f="data:"===D.substring(0,5),G=()=>{t||f||!j.b.IsCustomRequestAvailable?Q.src=D:O(D,((h,R,l)=>{const j=new Blob([h],{type:!F&&l?l:F}),a=URL.createObjectURL(j);J=!0,Q.src=a}),void 0,a||void 0,!0,((h,R)=>{q(R)}))},p=()=>{a&&a.loadImage(D,Q)};if(!t&&!f&&a&&a.enableTexturesOffline)a.open(p,G);else{if(-1!==D.indexOf("file:")){const h=decodeURIComponent(D.substring(5).toLowerCase());if(U.FilesToLoad[h]&&"undefined"!==typeof URL){try{let R;try{R=URL.createObjectURL(U.FilesToLoad[h])}catch(y){R=URL.createObjectURL(U.FilesToLoad[h])}Q.src=R,J=!0}catch(v){Q.src=""}return Q}}G()}return Q},p=(h,R,l,j,a)=>{const U=new FileReader,F={onCompleteObservable:new D.d,abort:()=>U.abort()};return U.onloadend=()=>F.onCompleteObservable.notifyObservers(F),a&&(U.onerror=()=>{a(new f(`Unable to read ${h.name}`,h))}),U.onload=h=>{R(h.target.result)},l&&(U.onprogress=l),j?U.readAsArrayBuffer(h):U.readAsText(h),F},O=(h,R,l,j,a,w,mh)=>{if(h.name)return p(h,R,l,a,w?h=>{w(void 0,h)}:void 0);const u=h;if(-1!==u.indexOf("file:")){let h=decodeURIComponent(u.substring(5).toLowerCase());0===h.indexOf("./")&&(h=h.substring(2));const j=U.FilesToLoad[h];if(j)return p(j,R,l,a,w?h=>w(void 0,new s(h.message,h.file)):void 0)}const{match:q,type:Q}=L(u);if(q){const h={onCompleteObservable:new D.d,abort:()=>()=>{}};try{const h=a?n(u):r(u);R(h,void 0,Q)}catch(F){w?w(void 0,F):c.c.Error(F.message||"Failed to parse the Data URL")}return J.b.SetImmediate((()=>{h.onCompleteObservable.notifyObservers(h)})),h}return y(u,((h,l)=>{R(h,null===l||void 0===l?void 0:l.responseURL,null===l||void 0===l?void 0:l.getResponseHeader("content-type"))}),l,j,a,w?h=>{w(h.request,new s(h.message,h.request))}:void 0,mh)},y=(h,R,l,U,F,w,mh)=>{h=T.CleanUrl(h),h=T.PreprocessUrl(h);const u=T.BaseUrl+h;let J=!1;const q={onCompleteObservable:new D.d,abort:()=>J=!0},Q=()=>{let h,D=new j.b,U=null;const Q=()=>{D&&(l&&D.removeEventListener("progress",l),h&&D.removeEventListener("readystatechange",h),D.removeEventListener("loadend",Y))};let Y=()=>{Q(),q.onCompleteObservable.notifyObservers(q),q.onCompleteObservable.clear(),l=void 0,h=null,Y=null,w=void 0,mh=void 0,R=void 0};q.abort=()=>{J=!0,Y&&Y(),D&&D.readyState!==(XMLHttpRequest.DONE||4)&&D.abort(),null!==U&&(clearTimeout(U),U=null),D=null};const s=h=>{const R=h.message||"Unknown error";w&&D?w(new t(R,D)):c.c.Error(R)},f=c=>{if(D){if(D.open("GET",u),mh)try{mh(D)}catch(q){return void s(q)}F&&(D.responseType="arraybuffer"),l&&D.addEventListener("progress",l),Y&&D.addEventListener("loadend",Y),h=()=>{if(!J&&D&&D.readyState===(XMLHttpRequest.DONE||4)){if(h&&D.removeEventListener("readystatechange",h),D.status>=200&&D.status<300||0===D.status&&(!(0,a.n)()||b())){const h=F?D.response:D.responseText;if(null!==h){try{R&&R(h,D)}catch(q){s(q)}return}}const l=T.DefaultRetryStrategy;if(l){const h=l(u,D,c);if(-1!==h)return Q(),D=new j.b,void(U=setTimeout((()=>f(c+1)),h))}const mh=new t("Error status: "+D.status+" "+D.statusText+" - Unable to load "+u,D);w&&w(mh)}},D.addEventListener("readystatechange",h),D.send()}};f(0)};if(U&&U.enableSceneOffline){const j=h=>{h&&h.status>400?w&&w(h):Q()},a=()=>{U&&U.loadFile(T.BaseUrl+h,(h=>{!J&&R&&R(h),q.onCompleteObservable.notifyObservers(q)}),l?h=>{!J&&l&&l(h)}:void 0,j,F)};U.open(a,j)}else Q();return q},v=h=>{const{match:R,type:l}=L(h);if(R)return l||void 0;const j=h.lastIndexOf(".");switch(h.substring(j+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"qF":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},b=()=>"undefined"!==typeof location&&"file:"===location.protocol,I=h=>Y.test(h),L=h=>{const R=Y.exec(h);if(null===R||0===R.length)return{match:!1,type:""};return{match:!0,type:R[0].replace("data:","").replace("base64,","")}};function n(h){return(0,w.e)(h.split(",")[1])}const r=h=>(0,w.g)(h.split(",")[1]);let P;Q.c._FileToolsLoadImage=G,q.b.loadFile=O,mh.n.loadFile=O;((h,R,l,j,a,D,U,F,w,mh)=>{P={DecodeBase64UrlToBinary:h,DecodeBase64UrlToString:R,DefaultRetryStrategy:l.DefaultRetryStrategy,BaseUrl:l.BaseUrl,CorsBehavior:l.CorsBehavior,PreprocessUrl:l.PreprocessUrl,IsBase64DataUrl:j,IsFileURL:a,LoadFile:D,LoadImage:U,ReadFile:F,RequestFile:w,SetCorsBehavior:mh},Object.defineProperty(P,"DefaultRetryStrategy",{get:function(){return l.DefaultRetryStrategy},set:function(h){l.DefaultRetryStrategy=h}}),Object.defineProperty(P,"BaseUrl",{get:function(){return l.BaseUrl},set:function(h){l.BaseUrl=h}}),Object.defineProperty(P,"PreprocessUrl",{get:function(){return l.PreprocessUrl},set:function(h){l.PreprocessUrl=h}}),Object.defineProperty(P,"CorsBehavior",{get:function(){return l.CorsBehavior},set:function(h){l.CorsBehavior=h}})})(n,r,T,I,b,O,G,p,y,E)},12855:(h,R,l)=>{function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(h=>{const R=16*Math.random()|0;return("x"===h?R:3&R|8).toString(16)}))}l.d(R,{e:()=>j})},12849:(h,R,l)=>{l.d(R,{e:()=>D});var j=l(12711),a=l(12852);class D{static Instantiate(h){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[h])return this.RegisteredExternalClasses[h];const R=(0,a.e)(h);if(R)return R;j.c.Warn(h+" not found, you may have missed an import.");const l=h.split(".");let D=window||this;for(let j=0,a=l.length;j<a;j++)D=D[l[j]];return"function"!==typeof D?null:D}}D.RegisteredExternalClasses={}},12724:(h,R,l)=>{l.d(R,{e:()=>a});var j=l(12705);class a{static get Now(){return(0,j.n)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12774:(h,R,l)=>{l.d(R,{e:()=>U,g:()=>D,j:()=>j,m:()=>a});const j=h=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(h);let R="";for(let l=0;l<h.byteLength;l++)R+=String.fromCharCode(h[l]);return R},a=h=>{const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l,j,a,D,U,F,w,mh="",u=0;const c=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h);for(;u<c.length;)l=c[u++],j=u<c.length?c[u++]:Number.NaN,a=u<c.length?c[u++]:Number.NaN,D=l>>2,U=(3&l)<<4|j>>4,F=(15&j)<<2|a>>6,w=63&a,isNaN(j)?F=w=64:isNaN(a)&&(w=64),mh+=R.charAt(D)+R.charAt(U)+R.charAt(F)+R.charAt(w);return mh},D=h=>atob(h),U=h=>{const R=D(h),l=R.length,j=new Uint8Array(new ArrayBuffer(l));for(let a=0;a<l;a++)j[a]=R.charCodeAt(a);return j.buffer}},12858:(h,R,l)=>{function j(h){let R=1;do{R*=2}while(R<h);return R===h}function a(h,R,l){return h*(1-l)+R*l}function D(h){const R=U(h),l=F(h);return R-h>h-l?l:R}function U(h){return h--,h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,h|=h>>16,++h}function F(h){return h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,(h|=h>>16)-(h>>1)}function w(h,R){let l;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:l=F(h);break;case 2:l=D(h);break;default:l=U(h)}return Math.min(l,R)}l.d(R,{c:()=>F,f:()=>w,i:()=>j,m:()=>a,o:()=>D})},12689:(h,R,l)=>{l.r(R),l.d(R,{AsyncLoop:()=>f,Tools:()=>s,className:()=>t});var j=l(12696),a=l(12705),D=l(12711),U=l(12718),F=l(12724),w=l(12733),mh=l(12741),u=l(12749),c=l(12758),J=l(12790),q=l(12849),Q=l(12855),Y=l(12858);class s{static get BaseUrl(){return c.g.BaseUrl}static set BaseUrl(h){c.g.BaseUrl=h}static get CleanUrl(){return c.g.CleanUrl}static set CleanUrl(h){c.g.CleanUrl=h}static IsAbsoluteUrl(h){return 0===h.indexOf("//")||-1!==h.indexOf("://")&&(-1!==h.indexOf(".")&&(-1!==h.indexOf("/")&&(!(h.indexOf(":")>h.indexOf("/"))&&(h.indexOf("://")<h.indexOf(".")||(0===h.indexOf("data:")||0===h.indexOf("blob:"))))))}static set ScriptBaseUrl(h){c.g.ScriptBaseUrl=h}static get ScriptBaseUrl(){return c.g.ScriptBaseUrl}static set CDNBaseUrl(h){s.ScriptBaseUrl=h,s.AssetBaseUrl=h}static set ScriptPreprocessUrl(h){c.g.ScriptPreprocessUrl=h}static get ScriptPreprocessUrl(){return c.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return c.g.DefaultRetryStrategy}static set DefaultRetryStrategy(h){c.g.DefaultRetryStrategy=h}static get CorsBehavior(){return c.g.CorsBehavior}static set CorsBehavior(h){c.g.CorsBehavior=h}static get UseFallbackTexture(){return u.b.UseFallbackTexture}static set UseFallbackTexture(h){u.b.UseFallbackTexture=h}static get RegisteredExternalClasses(){return q.e.RegisteredExternalClasses}static set RegisteredExternalClasses(h){q.e.RegisteredExternalClasses=h}static get fallbackTexture(){return u.b.FallbackTexture}static set fallbackTexture(h){u.b.FallbackTexture=h}static FetchToRef(h,R,l,j,a,D){const U=4*((Math.abs(h)*l%l|0)+(Math.abs(R)*j%j|0)*l);D.r=a[U]/255,D.g=a[U+1]/255,D.b=a[U+2]/255,D.a=a[U+3]/255}static Mix(h,R,l){return 0}static Instantiate(h){return q.e.Instantiate(h)}static SetImmediate(h){J.b.SetImmediate(h)}static IsExponentOfTwo(h){return!0}static FloatRound(h){return Math.fround(h)}static GetFilename(h){const R=h.lastIndexOf("/");return R<0?h:h.substring(R+1)}static GetFolderPath(h){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=h.lastIndexOf("/");return l<0?R?h:"":h.substring(0,l+1)}static ToDegrees(h){return 180*h/Math.PI}static ToRadians(h){return h*Math.PI/180}static SmoothAngleChange(h,R){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const j=this.ToRadians(h),a=this.ToRadians(R);return this.ToDegrees(Math.atan2((1-l)*Math.sin(a)+l*Math.sin(j),(1-l)*Math.cos(a)+l*Math.cos(j)))}static MakeArray(h,R){return!0===R||void 0!==h&&null!=h?Array.isArray(h)?h:[h]:null}static GetPointerPrefix(h){return(0,a.n)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(h,R){(0,c.v)(h,R)}static SetReferrerPolicyBehavior(h,R){R.referrerPolicy=h}static get PreprocessUrl(){return c.g.PreprocessUrl}static set PreprocessUrl(h){c.g.PreprocessUrl=h}static LoadImage(h,R,l,j,a,D){return(0,c.l)(h,R,l,j,a,D)}static LoadFile(h,R,l,j,a,D){return(0,c.k)(h,R,l,j,a,D)}static async LoadFileAsync(h){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((l,j)=>{(0,c.k)(h,(h=>{l(h)}),void 0,void 0,R,((h,R)=>{j(R)}))}))}static GetAssetUrl(h){if(!h)return"";if(s.AssetBaseUrl&&h.startsWith(s._DefaultAssetsUrl)){const R="/"===s.AssetBaseUrl[s.AssetBaseUrl.length-1]?s.AssetBaseUrl.substring(0,s.AssetBaseUrl.length-1):s.AssetBaseUrl;return h.replace(s._DefaultAssetsUrl,R)}return h}static GetBabylonScriptURL(h,R){if(!h)return"";if(s.ScriptBaseUrl&&h.startsWith(s._DefaultCdnUrl)){const R="/"===s.ScriptBaseUrl[s.ScriptBaseUrl.length-1]?s.ScriptBaseUrl.substring(0,s.ScriptBaseUrl.length-1):s.ScriptBaseUrl;h=h.replace(s._DefaultCdnUrl,R)}return h=s.ScriptPreprocessUrl(h),R&&(h=s.GetAbsoluteUrl(h)),h}static LoadBabylonScript(h,R,l,j){h=s.GetBabylonScriptURL(h),s.LoadScript(h,R,l)}static async LoadBabylonScriptAsync(h){return h=s.GetBabylonScriptURL(h),await s.LoadScriptAsync(h)}static LoadScript(h,R,l,j){let D=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(h),R&&R()}catch(w){null===l||void 0===l||l(`Unable to load script '${h}' in worker`,w)}return}if(!(0,a.n)())return void(null===l||void 0===l||l(`Cannot load script '${h}' outside of a window or a worker`));const U=document.getElementsByTagName("head")[0],F=document.createElement("script");D?(F.setAttribute("type","module"),F.innerText=h):(F.setAttribute("type","text/javascript"),F.setAttribute("src",h)),j&&(F.id=j),F.onload=()=>{R&&R()},F.onerror=R=>{l&&l(`Unable to load script '${h}'`,R)},U.appendChild(F)}static async LoadScriptAsync(h,R){return await new Promise(((l,j)=>{this.LoadScript(h,(()=>{l()}),((h,R)=>{j(R||new Error(h))}),R)}))}static ReadFileAsDataURL(h,R,l){const a=new FileReader,D={onCompleteObservable:new j.d,abort:()=>a.abort()};return a.onloadend=()=>{D.onCompleteObservable.notifyObservers(D)},a.onload=h=>{R(h.target.result)},a.onprogress=l,a.readAsDataURL(h),D}static ReadFile(h,R,l,j,a){return(0,c.n)(h,R,l,j,a)}static FileAsURL(h){const R=new Blob([h]);return window.URL.createObjectURL(R)}static Format(h){let R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h.toFixed(R)}static DeepCopy(h,R,l,j){U.e.DeepCopy(h,R,l,j)}static IsEmpty(h){for(const R in h)if(Object.prototype.hasOwnProperty.call(h,R))return!1;return!0}static RegisterTopRootEvents(h,R){for(let j=0;j<R.length;j++){const a=R[j];h.addEventListener(a.name,a.handler,!1);try{window.parent&&window.parent.addEventListener(a.name,a.handler,!1)}catch(l){}}}static UnregisterTopRootEvents(h,R){for(let j=0;j<R.length;j++){const a=R[j];h.removeEventListener(a.name,a.handler);try{h.parent&&h.parent.removeEventListener(a.name,a.handler)}catch(l){}}}static async DumpFramebuffer(h,R,l,j){throw(0,w.b)("DumpTools")}static DumpData(h,R,l,j){throw(0,w.b)("DumpTools")}static async DumpDataAsync(h,R,l){throw(0,w.b)("DumpTools")}static _IsOffScreenCanvas(h){return void 0!==h.convertToBlob}static ToBlob(h,R){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0;s._IsOffScreenCanvas(h)||h.toBlob||(h.toBlob=function(h,R,l){setTimeout((()=>{const j=atob(this.toDataURL(R,l).split(",")[1]),a=j.length,D=new Uint8Array(a);for(let h=0;h<a;h++)D[h]=j.charCodeAt(h);h(new Blob([D]))}))}),s._IsOffScreenCanvas(h)?h.convertToBlob({type:l,quality:j}).then((h=>R(h))):h.toBlob((function(h){R(h)}),l,j)}static DownloadBlob(h,R){if("download"in document.createElement("a")){if(!R){const h=new Date;R="screenshot_"+((h.getFullYear()+"-"+(h.getMonth()+1)).slice(2)+"-"+h.getDate()+"_"+h.getHours()+"-"+("0"+h.getMinutes()).slice(-2))+".png"}s.Download(h,R)}else if(h&&"undefined"!==typeof URL){const R=URL.createObjectURL(h),l=window.open("");if(!l)return;const j=l.document.createElement("img");j.onload=function(){URL.revokeObjectURL(R)},j.src=R,l.document.body.appendChild(j)}}static EncodeScreenshotCanvasData(h,R){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if("string"!==typeof j&&R){if(R){if(s._IsOffScreenCanvas(h))return void h.convertToBlob({type:l,quality:a}).then((h=>{const l=new FileReader;l.readAsDataURL(h),l.onloadend=()=>{const h=l.result;R(h)}}));const j=h.toDataURL(l,a);R(j)}}else this.ToBlob(h,(function(h){h&&s.DownloadBlob(h,j),R&&R("")}),l,a)}static Download(h,R){if("undefined"===typeof URL)return;const l=window.URL.createObjectURL(h),j=document.createElement("a");document.body.appendChild(j),j.style.display="none",j.href=l,j.download=R,j.addEventListener("click",(()=>{j.parentElement&&j.parentElement.removeChild(j)})),j.click(),window.URL.revokeObjectURL(l)}static BackCompatCameraNoPreventDefault(h){return"boolean"===typeof h[0]?h[0]:"boolean"===typeof h[1]&&h[1]}static CreateScreenshot(h,R,l,j){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotAsync(h,R,l){throw(0,w.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(h,R,l,j){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(h,R,l){throw(0,w.b)("ScreenshotTools")}static RandomId(){return(0,Q.e)()}static IsBase64(h){return(0,c.i)(h)}static DecodeBase64(h){return(0,c.e)(h)}static get errorsCount(){return D.c.errorsCount}static Log(h){D.c.Log(h)}static Warn(h){D.c.Warn(h)}static Error(h){D.c.Error(h)}static get LogCache(){return D.c.LogCache}static ClearLogCache(){D.c.ClearLogCache()}static set LogLevels(h){D.c.LogLevels=h}static set PerformanceLogLevel(h){return(h&s.PerformanceUserMarkLogLevel)===s.PerformanceUserMarkLogLevel?(s.StartPerformanceCounter=s._StartUserMark,void(s.EndPerformanceCounter=s._EndUserMark)):(h&s.PerformanceConsoleLogLevel)===s.PerformanceConsoleLogLevel?(s.StartPerformanceCounter=s._StartPerformanceConsole,void(s.EndPerformanceCounter=s._EndPerformanceConsole)):(s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,void(s.EndPerformanceCounter=s._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(h,R){}static _EndPerformanceCounterDisabled(h,R){}static _StartUserMark(h){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s._Performance){if(!(0,a.n)())return;s._Performance=window.performance}R&&s._Performance.mark&&s._Performance.mark(h+"-Begin")}static _EndUserMark(h){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&s._Performance.mark&&(s._Performance.mark(h+"-End"),s._Performance.measure(h,h+"-Begin",h+"-End"))}static _StartPerformanceConsole(h){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R&&(s._StartUserMark(h,R),console.time&&console.time(h))}static _EndPerformanceConsole(h){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R&&(s._EndUserMark(h,R),console.timeEnd(h))}static get Now(){return F.e.Now}static GetClassName(h){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null;if(!R&&h.getClassName)l=h.getClassName();else{if(h instanceof Object){l=(R?h:Object.getPrototypeOf(h)).constructor.__bjsclassName__}l||(l=typeof h)}return l}static First(h,R){for(const l of h)if(R(l))return l;return null}static getFullClassName(h){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null,j=null;if(!R&&h.getClassName)l=h.getClassName();else{if(h instanceof Object){const a=R?h:Object.getPrototypeOf(h);l=a.constructor.__bjsclassName__,j=a.constructor.__bjsmoduleName__}l||(l=typeof h)}return l?(null!=j?j+".":"")+l:null}static async DelayAsync(h){await new Promise((R=>{setTimeout((()=>{R()}),h)}))}static IsSafari(){return!!(0,a.l)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function t(h,R){return l=>{l.__bjsclassName__=h,l.__bjsmoduleName__=null!=R?R:null}}s.AssetBaseUrl="",s.UseCustomRequestHeaders=!1,s.CustomRequestHeaders=mh.b.CustomRequestHeaders,s.GetDOMTextContent=a.e,s._DefaultCdnUrl="https://cdn.babylonjs.com",s._DefaultAssetsUrl="https://assets.babylonjs.com/core",s.GetAbsoluteUrl="object"===typeof document?h=>{const R=document.createElement("a");return R.href=h,R.href}:"function"===typeof URL&&"object"===typeof location?h=>new URL(h,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},s.NoneLogLevel=D.c.NoneLogLevel,s.MessageLogLevel=D.c.MessageLogLevel,s.WarningLogLevel=D.c.WarningLogLevel,s.ErrorLogLevel=D.c.ErrorLogLevel,s.AllLogLevel=D.c.AllLogLevel,s.IsWindowObjectExist=a.n,s.PerformanceNoneLogLevel=0,s.PerformanceUserMarkLogLevel=1,s.PerformanceConsoleLogLevel=2,s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,s.EndPerformanceCounter=s._EndPerformanceCounterDisabled;class f{constructor(h,R,l){let j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=h,this.index=j-1,this._done=!1,this._fn=R,this._successCallback=l}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(h,R,l){const j=new f(h,R,l,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return j.executeNext(),j}static SyncAsyncForLoop(h,R,l,j,a){let D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return f.Run(Math.ceil(h/R),(j=>{a&&a()?j.breakLoop():setTimeout((()=>{for(let D=0;D<R;++D){const U=j.index*R+D;if(U>=h)break;if(l(U),a&&a()){j.breakLoop();break}}j.executeNext()}),D)}),j)}}s.Mix=Y.m,s.IsExponentOfTwo=Y.i,u.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12852:(h,R,l)=>{l.d(R,{e:()=>D,f:()=>a});const j={};function a(h,R){j[h]=R}function D(h){return j[h]}},12741:(h,R,l)=>{l.d(R,{b:()=>j});class j{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(j.CustomRequestHeaders).length>0||j.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const h in j.CustomRequestHeaders){const R=j.CustomRequestHeaders[h];R&&this._xhr.setRequestHeader(h,R)}}_shouldSkipRequestModifications(h){return j.SkipRequestModificationForBabylonCDN&&(h.includes("preview.babylonjs.com")||h.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(h){this._xhr.onprogress=h}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(h){this._xhr.responseType=h}get timeout(){return this._xhr.timeout}set timeout(h){this._xhr.timeout=h}addEventListener(h,R,l){this._xhr.addEventListener(h,R,l)}removeEventListener(h,R,l){this._xhr.removeEventListener(h,R,l)}abort(){this._xhr.abort()}send(h){j.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(h)}open(h,R){for(const l of j.CustomRequestModifiers){if(this._shouldSkipRequestModifications(R))return;R=l(this._xhr,R)||R}R=(R=R.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=R,this._xhr.open(h,R,!0)}setRequestHeader(h,R){this._xhr.setRequestHeader(h,R)}getResponseHeader(h){return this._xhr.getResponseHeader(h)}}j.CustomRequestHeaders={},j.CustomRequestModifiers=new Array,j.SkipRequestModificationForBabylonCDN=!0}}]);