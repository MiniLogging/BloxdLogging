"use strict";(self.lfntwv94xlc=self.lfntwv94xlc||[]).push([[8],{11229:(m,S,h)=>{h.d(S,{b:()=>U});var l=h(11196),M=h(11173),O=h(11238),u=h(11259),b=h(11183);class q{constructor(){let m=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,m&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(m){this._zOffset!==m&&(this._zOffset=m,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(m){this._zOffsetUnits!==m&&(this._zOffsetUnits=m,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(m){this._cullFace!==m&&(this._cullFace=m,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(m){this._cull!==m&&(this._cull=m,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(m){this._depthFunc!==m&&(this._depthFunc=m,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(m){this._depthMask!==m&&(this._depthMask=m,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(m){this._depthTest!==m&&(this._depthTest=m,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(m){this._frontFace!==m&&(this._frontFace=m,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(m){this.isDirty&&(this._isCullDirty&&(this.cull?m.enable(m.CULL_FACE):m.disable(m.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(m.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(m.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(m.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(m.enable(m.POLYGON_OFFSET_FILL),m.polygonOffset(this.zOffset,this.zOffsetUnits)):m.disable(m.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(m.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class Y{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(m){this._func!==m&&(this._func=m,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(m){this._funcRef!==m&&(this._funcRef=m,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(m){this._funcMask!==m&&(this._funcMask=m,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(m){this._opStencilFail!==m&&(this._opStencilFail=m,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(m){this._opDepthFail!==m&&(this._opDepthFail=m,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(m){this._opStencilDepthPass!==m&&(this._opStencilDepthPass=m,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(m){this._mask!==m&&(this._mask=m,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(m){this._enabled!==m&&(this._enabled=m,this._isStencilTestDirty=!0)}constructor(){let m=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,m&&this.reset()}reset(){var m;this.stencilMaterial=void 0,null===(m=this.stencilGlobal)||void 0===m||m.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(m){var S;if(!m)return;const h=!this.useStencilGlobalOnly&&!(null===(S=this.stencilMaterial)||void 0===S||!S.enabled);this.enabled=h?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=h?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=h?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=h?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=h?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=h?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=h?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=h?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?m.enable(m.STENCIL_TEST):m.disable(m.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(m.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(m.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(m.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class V{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=V.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=V.KEEP,this.opDepthFail=V.KEEP,this.opStencilDepthPass=V.REPLACE}get stencilFunc(){return this.func}set stencilFunc(m){this.func=m}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(m){this.funcRef=m}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(m){this.funcMask=m}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(m){this.opStencilFail=m}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(m){this.opDepthFail=m}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(m){this.opStencilDepthPass=m}get stencilMask(){return this.mask}set stencilMask(m){this.mask=m}get stencilTest(){return this.enabled}set stencilTest(m){this.enabled=m}}V.ALWAYS=519,V.KEEP=7680,V.REPLACE=7681;class I{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(m){this._alphaBlend!==m&&(this._alphaBlend=m,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(m,S,h,l){this._blendConstants[0]===m&&this._blendConstants[1]===S&&this._blendConstants[2]===h&&this._blendConstants[3]===l||(this._blendConstants[0]=m,this._blendConstants[1]=S,this._blendConstants[2]=h,this._blendConstants[3]=l,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(m,S,h,l){this._blendFunctionParameters[0]===m&&this._blendFunctionParameters[1]===S&&this._blendFunctionParameters[2]===h&&this._blendFunctionParameters[3]===l||(this._blendFunctionParameters[0]=m,this._blendFunctionParameters[1]=S,this._blendFunctionParameters[2]=h,this._blendFunctionParameters[3]=l,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(m,S){this._blendEquationParameters[0]===m&&this._blendEquationParameters[1]===S||(this._blendEquationParameters[0]=m,this._blendEquationParameters[1]=S,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(m){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?m.enable(m.BLEND):m.disable(m.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(m.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(m.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(m.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var Z=h(11189),C=h(11262),B=h(11169),D=h(11161),E=h(11224),n=h(11278);function L(m,S){if((0,B.m)()){const{requestAnimationFrame:h}=S||window;if("function"===typeof h)return h(m)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(m);return setTimeout(m,16)}class U{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(m){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(m){m!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=m,this._depthCullingState.depthFunc=m?518:515)}setColorWrite(m){m!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=m)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(m){if(m)return this.isNDCHalfZRange?m.IS_NDC_HALF_ZRANGE="":delete m.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?m.USE_REVERSE_DEPTHBUFFER="":delete m.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?m.USE_EXACT_SRGB_CONVERSIONS="":delete m.USE_EXACT_SRGB_CONVERSIONS);{let m="";return this.isNDCHalfZRange&&(m+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(m&&(m+="\n"),m+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(m&&(m+="\n"),m+="#define USE_EXACT_SRGB_CONVERSIONS"),m}}_rebuildInternalTextures(){const m=this._internalTexturesCache.slice();for(const S of m)S._rebuild()}_rebuildRenderTargetWrappers(){const m=this._renderTargetWrapperCache.slice();for(const S of m)S._rebuild()}_rebuildEffects(){for(const m in this._compiledEffects){const S=this._compiledEffects[m];S._pipelineContext=null,S._prepareEffect()}O.Effect.ResetCache()}_rebuildGraphicsResources(){var m;this.wipeCaches(!0),this._rebuildEffects(),null===(m=this._rebuildComputeEffects)||void 0===m||m.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){M.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(m){setTimeout((()=>{this._clearEmptyResources();const S=this._depthCullingState.depthTest,h=this._depthCullingState.depthFunc,l=this._depthCullingState.depthMask,M=this._stencilState.stencilTest;m(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=S,this._depthCullingState.depthFunc=h,this._depthCullingState.depthMask=l,this._stencilState.stencilTest=M,this._flagContextRestored()}),0)}get u(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(m){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(m){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const m=new Uint8Array(4),S=[m,m,m,m,m,m];this._emptyCubeTexture=this.createRawCubeTexture(S,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(m){if(!m)return this._activeRenderLoops.length=0,void this._cancelFrame();const S=this._activeRenderLoops.indexOf(m);S>=0&&(this._activeRenderLoops.splice(S,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const m=this._frameHandler;if(this._frameHandler=0,(0,B.m)()){const{cancelAnimationFrame:S}=this.getHostWindow()||window;if("function"===typeof S)return S(m)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(m);return clearTimeout(m)}}eh(){this.onBeginFrameObservable.notifyObservers(this)}xh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(m){this._maxFPS=m,void 0!==m&&(this._minFrameTime=m<=0?Number.MAX_VALUE:1e3/m)}_isOverFrameTime(m){if(!m||void 0===this._maxFPS)return!1;const S=m-this._lastFrameTime;return this._lastFrameTime=m,this._renderAccumulator+=S,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(m){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(m)){let m=!0;(this.u||!this.renderEvenInBackground&&this._windowIsBackground)&&(m=!1),m&&(this.eh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.xh())}}_renderLoop(m){this._processFrame(m),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let m=0;m<this._activeRenderLoops.length;m++){(0,this._activeRenderLoops[m])()}}_renderViews(){return!1}_queueNewFrame(m,S){return L(m,S)}runRenderLoop(m){-1===this._activeRenderLoops.indexOf(m)&&(this._activeRenderLoops.push(m),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(m){this._depthCullingState.depthTest=m}setZOffset(m){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-m:m}getZOffset(){const m=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-m:m}setZOffsetUnits(m){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-m:m}getZOffsetUnits(){const m=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-m:m}getHostWindow(){return(0,B.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(m){this._compatibilityMode=!0}_rebuildTextures(){for(const m of this.scenes)m._rebuildTextures();for(const m of this._virtualScenes)m._rebuildTextures()}_releaseRenderTargetWrapper(m){const S=this._renderTargetWrapperCache.indexOf(m);-1!==S&&this._renderTargetWrapperCache.splice(S,1)}get currentViewport(){return this._cachedViewport}setViewport(m,S,h){const l=S||this.getRenderWidth(),M=h||this.getRenderHeight(),O=m.x||0,u=m.y||0;this._cachedViewport=m,this._viewport(O*l,u*M,l*m.width,M*m.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(m){return new Path2D(m)}get description(){let m=this.name+this.version;return this._caps.parallelShaderCompile&&(m+=" - Parallel shader compilation"),m}_createTextureBase(m,S,h,O){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Y=arguments.length>7?arguments[7]:void 0,V=arguments.length>8?arguments[8]:void 0,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,Z=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,B=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,D=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,E=arguments.length>13?arguments[13]:void 0,L=arguments.length>14?arguments[14]:void 0,H=arguments.length>15?arguments[15]:void 0;const R="data:"===(m=m||"").substring(0,5),y="blob:"===m.substring(0,5),o=R&&-1!==m.indexOf(";base64,"),s=Z||new C.d(this,1);s!==Z&&(s.label=m.substring(0,60));const v=m;!this._transformTextureUrl||o||Z||I||(m=this._transformTextureUrl(m)),v!==m&&(s._originalUrl=v);const T=m.lastIndexOf(".");let X=D||(T>-1?m.substring(T).toLowerCase():"");X.indexOf("?")>-1&&(X=X.split("?")[0]);const g=(0,n.c)(X,E);O&&O.addPendingData(s),s.url=m,s.generateMipMaps=!S,s.samplingMode=u,s.invertY=h,s._useSRGBBuffer=this._getUseSRGBBuffer(!!H,S),this._doNotHandleContextLost||(s._buffer=I);let G=null;b&&!Z&&(G=s.onLoadedObservable.add(b)),Z||this._internalTexturesCache.push(s);const e=(h,Z)=>{O&&O.removePendingData(s),m===v?(G&&s.onLoadedObservable.remove(G),l.d.UseFallbackTexture&&m!==l.d.FallbackTexture&&this._createTextureBase(l.d.FallbackTexture,S,s.invertY,O,u,null,q,Y,V,I,s),h=(h||"Unknown error")+(l.d.UseFallbackTexture?" - Fallback texture was used":""),s.onErrorObservable.notifyObservers({message:h,exception:Z}),q&&q(h,Z)):(M.e.Warn(`Failed to load ${m}, falling back to ${v}`),this._createTextureBase(v,S,s.invertY,O,u,b,q,Y,V,I,s,B,D,E,L,H))};if(g){const S=async m=>{(await g).loadData(m,s,((m,S,h,l,M,b)=>{b?e("TextureLoader failed to load data"):Y(s,X,O,{width:m,height:S},s.invertY,!h,l,(()=>(M(),!1)),u)}),L)};I?I instanceof ArrayBuffer?S(new Uint8Array(I)):ArrayBuffer.isView(I)?S(I):q&&q("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(m,(m=>{S(new Uint8Array(m))}),void 0,O?O.offlineProvider:void 0,!0,((m,S)=>{e("Unable to load "+(m&&m.responseURL,S))}))}else{const h=m=>{y&&!this._doNotHandleContextLost&&(s._buffer=m),Y(s,X,O,m,s.invertY,S,!1,V,u)};!R||o?I&&("string"===typeof I.decoding||I.close)?h(I):U._FileToolsLoadImage(m||"",h,e,O?O.offlineProvider:null,E,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof I||I instanceof ArrayBuffer||ArrayBuffer.isView(I)||I instanceof Blob?U._FileToolsLoadImage(I,h,e,O?O.offlineProvider:null,E,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):I&&h(I)}return s}_rebuildBuffers(){for(const m of this._uniformBuffers)m._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,B.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const m in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,m)&&(this._boundTexturesCache[m]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(m){this._name=m}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(m){this._hardwareScalingLevel=m,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(m){this._doNotHandleContextLost=m}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(m,S,h){var M,O;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new q,this._stencilStateComposer=new Y,this._stencilState=new V,this._alphaState=new I,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new D.e,this.onCanvasFocusObservable=new D.e,this.onNewSceneAddedObservable=new D.e,this.onResizeObservable=new D.e,this.onCanvasPointerOutObservable=new D.e,this.onEffectErrorObservable=new D.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new D.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=m=>this._renderLoop(m),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new D.e,this.onAfterShaderCompilationObservable=new D.e,this.onBeginFrameObservable=new D.e,this.onEndFrameObservable=new D.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new D.e,this.onContextRestoredObservable=new D.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Jh=new D.e,this.onReleaseEffectsObservable=new D.e,l.d.Instances.push(this),this.startTime=b.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,u.d.SetMatrixPrecision(!!S.useHighPrecisionMatrix),(0,B.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=h??!1,S.antialias=m??S.antialias,S.deterministicLockstep=S.deterministicLockstep??!1,S.lockstepMaxSteps=S.lockstepMaxSteps??4,S.timeStep=S.timeStep??1/60,S.stencil=S.stencil??!0,this._audioContext=(null===(M=S.audioEngineOptions)||void 0===M?void 0:M.audioContext)??null,this._audioDestination=(null===(O=S.audioEngineOptions)||void 0===O?void 0:O.audioDestination)??null,this.premultipliedAlpha=S.premultipliedAlpha??!0,this._doNotHandleContextLost=!!S.doNotHandleContextLost,this._isStencilEnable=!!S.stencil,this.useExactSrgbConversions=S.useExactSrgbConversions??!1;const Z=(0,B.m)()&&window.devicePixelRatio||1,C=S.limitDeviceRatio||Z;h=h||S.adaptToDeviceRatio||!1,this._hardwareScalingLevel=h?1/Math.min(C,Z):1,this._lastDevicePixelRatio=Z,this._creationOptions=S}resize(){let m,S,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const m=(0,B.m)()&&window.devicePixelRatio||1,S=this._lastDevicePixelRatio/m;this._lastDevicePixelRatio=m,this._hardwareScalingLevel*=S}if((0,B.m)()&&(0,B.f)())if(this._renderingCanvas){var l,M;const h=null===(l=(M=this._renderingCanvas).getBoundingClientRect)||void 0===l?void 0:l.call(M);m=this._renderingCanvas.clientWidth||(null===h||void 0===h?void 0:h.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,S=this._renderingCanvas.clientHeight||(null===h||void 0===h?void 0:h.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else m=window.innerWidth,S=window.innerHeight;else m=this._renderingCanvas?this._renderingCanvas.width:100,S=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(m/this._hardwareScalingLevel,S/this._hardwareScalingLevel,h)}setSize(m,S){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(m|=0,S|=0,!h&&this._renderingCanvas.width===m&&this._renderingCanvas.height===S)return!1;if(this._renderingCanvas.width=m,this._renderingCanvas.height=S,this.scenes){for(let m=0;m<this.scenes.length;m++){const S=this.scenes[m];for(let m=0;m<S.cameras.length;m++){S.cameras[m]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(m,S,h,l,M,O,u,b,q,Y,V){throw(0,Z.c)("engine.rawTexture")}createRawCubeTexture(m,S,h,l,M,O,u,b){throw(0,Z.c)("engine.rawTexture")}createRawTexture3D(m,S,h,l,M,O,u,b,q,Y,V){throw(0,Z.c)("engine.rawTexture")}createRawTexture2DArray(m,S,h,l,M,O,u,b,q,Y,V){throw(0,Z.c)("engine.rawTexture")}_sharedInit(m){this._renderingCanvas=m}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const m=navigator.userAgent;this.hostInformation.isMobile=-1!==m.indexOf("Mobile")||-1!==m.indexOf("Mac")&&(0,B.f)()&&"ontouchend"in document},this._checkForMobile(),(0,B.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(m){return document.createElement("video")}_reportDrawCall(){var m;let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(m=this._drawCalls)||void 0===m||m.addCount(S,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(m,S){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(m,S){return createImageBitmap(m,S)}resizeImageBitmap(m,S,h){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(m){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(m,S){if("undefined"===typeof document)return new OffscreenCanvas(m,S);const h=document.createElement("canvas");return h.width=m,h.height=S,h}createCanvas(m,S){return U._CreateCanvas(m,S)}static _FileToolsLoadImage(m,S,h,l,M,O,u){throw(0,Z.c)("FileTools")}_loadFile(m,S,h,l,M,O){const u=(0,E.k)(m,S,h,l,M,O);return this._activeRequests.push(u),u.onCompleteObservable.add((()=>{const m=this._activeRequests.indexOf(u);-1!==m&&this._activeRequests.splice(m,1)})),u}static _FileToolsLoadFile(m,S,h,l,M,O){if(E.d.loadFile)return E.d.loadFile(m,S,h,l,M,O);throw(0,Z.c)("FileTools")}dispose(){var m;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(m=this.releaseComputeEffects)||void 0===m||m.call(this),O.Effect.ResetCache();for(const h of this._activeRequests)h.abort();this._boundRenderFunction=null,this.Jh.notifyObservers(this),this.Jh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,B.m)()&&window.removeEventListener("resize",this._checkForMobile);const S=l.d.Instances.indexOf(this);S>=0&&l.d.Instances.splice(S,1),l.d.Instances.length||(l.d.OnEnginesDisposedObservable.notifyObservers(this),l.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(m){throw(0,Z.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(m,S){for(let h=0;h<l.d.Instances.length;h++){const M=l.d.Instances[h];for(let h=0;h<M.scenes.length;h++)M.scenes[h].markAllMaterialsAsDirty(m,S)}}}U._RenderPassIdCounter=0,U._RescalePostProcessFactory=null,U.CollisionsEpsilon=.001,U.QueueNewFrame=L},11196:(m,S,h)=>{h.d(S,{d:()=>M});var l=h(11161);class M{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}M.Instances=[],M.OnEnginesDisposedObservable=new l.e,M._LastCreatedScene=null,M.UseFallbackTexture=!0,M.FallbackTexture=""},11259:(m,S,h)=>{h.d(S,{d:()=>l});class l{static SetMatrixPrecision(m){if(l.MatrixTrackPrecisionChange=!1,m&&!l.MatrixUse64Bits&&l.MatrixTrackedMatrices)for(let S=0;S<l.MatrixTrackedMatrices.length;++S){const m=l.MatrixTrackedMatrices[S],h=m.ph;m.ph=new Array(16);for(let S=0;S<16;++S)m.ph[S]=h[S]}l.MatrixUse64Bits=m,l.MatrixCurrentType=l.MatrixUse64Bits?Array:Float32Array,l.MatrixTrackedMatrices=null}}l.MatrixUse64Bits=!1,l.MatrixTrackPrecisionChange=!0,l.MatrixCurrentType=Float32Array,l.MatrixTrackedMatrices=[]},11278:(m,S,h)=>{h.d(S,{c:()=>u});var l=h(11173);const M=new Map;function O(m,S){(function(m){return M.delete(m)})(m)&&l.e.Warn(`Extension with the name '${m}' already exists`),M.set(m,S)}function u(m,S){"image/ktx"!==S&&"image/ktx2"!==S||(m=".ktx"),M.has(m)||(m.endsWith(".ies")&&O(".ies",(async()=>await h.e(15).then(h.bind(h,13813)).then((m=>new m._IESTextureLoader)))),m.endsWith(".dds")&&O(".dds",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(28)]).then(h.bind(h,13817)).then((m=>new m._DDSTextureLoader)))),m.endsWith(".basis")&&O(".basis",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(47)]).then(h.bind(h,13827)).then((m=>new m._BasisTextureLoader)))),m.endsWith(".env")&&O(".env",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(23),h.e(21),h.e(45),h.e(48)]).then(h.bind(h,13831)).then((m=>new m._ENVTextureLoader)))),m.endsWith(".hdr")&&O(".hdr",(async()=>await Promise.all([h.e(14),h.e(49)]).then(h.bind(h,13837)).then((m=>new m._HDRTextureLoader)))),(m.endsWith(".ktx")||m.endsWith(".ktx2"))&&(O(".ktx",(async()=>await h.e(30).then(h.bind(h,13844)).then((m=>new m._KTXTextureLoader)))),O(".ktx2",(async()=>await h.e(30).then(h.bind(h,13844)).then((m=>new m._KTXTextureLoader))))),m.endsWith(".tga")&&O(".tga",(async()=>await h.e(50).then(h.bind(h,13847)).then((m=>new m._TGATextureLoader)))),m.endsWith(".exr")&&O(".exr",(async()=>await h.e(16).then(h.bind(h,13855)).then((m=>new m._ExrTextureLoader)))));const l=M.get(m);return l?Promise.resolve(l(S)):null}},11262:(m,S,h)=>{h.d(S,{d:()=>u});var l,M=h(11161),O=h(11270);!function(m){m[m.Unknown=0]="Unknown",m[m.Url=1]="Url",m[m.Temp=2]="Temp",m[m.Raw=3]="Raw",m[m.Dynamic=4]="Dynamic",m[m.RenderTarget=5]="RenderTarget",m[m.MultiRenderTarget=6]="MultiRenderTarget",m[m.Cube=7]="Cube",m[m.CubeRaw=8]="CubeRaw",m[m.CubePrefiltered=9]="CubePrefiltered",m[m.Raw3D=10]="Raw3D",m[m.Raw2DArray=11]="Raw2DArray",m[m.DepthStencil=12]="DepthStencil",m[m.CubeRawRGBD=13]="CubeRawRGBD",m[m.Depth=14]="Depth"}(l||(l={}));class u extends O.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(m){this.generateMipMaps=m}get uniqueId(){return this._uniqueId}_setUniqueId(m){this._uniqueId=m}getEngine(){return this._engine}get source(){return this._source}constructor(m,S){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new M.e,this.onErrorObservable=new M.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=m,this._source=S,this._uniqueId=u._Counter++,h||(this._hardwareTexture=m._createHardwareTexture())}incrementReferences(){this._references++}updateSize(m,S){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,m,S,h),this.width=m,this.height=S,this.depth=h,this.baseWidth=m,this.baseHeight=S,this.baseDepth=h,this._size=m*S*h}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const m=this.onRebuildCallback(this),S=S=>{S._swapAndDie(this,!1),this.isReady=m.isReady};return void(m.isAsync?m.proxy.then(S):S(m.proxy))}let m;switch(this.source){case 2:case 12:case 14:break;case 1:return void(m=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(m=>{m._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:m=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),m._swapAndDie(this,!1),this.isReady=!0;break;case 10:m=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),m._swapAndDie(this,!1),this.isReady=!0;break;case 11:m=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),m._swapAndDie(this,!1),this.isReady=!0;break;case 4:m=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),m._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(m=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{m._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:m=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),m._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return m=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(m=>{m&&m._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(m._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(m){var S;let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(S=this._hardwareTexture)||void 0===S||S.setUsage(m._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),m._hardwareTexture=this._hardwareTexture,h&&(m._isRGBD=this._isRGBD),this._lodTextureHigh&&(m._lodTextureHigh&&m._lodTextureHigh.dispose(),m._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(m._lodTextureMid&&m._lodTextureMid.dispose(),m._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(m._lodTextureLow&&m._lodTextureLow.dispose(),m._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(m._irradianceTexture&&m._irradianceTexture.dispose(),m._irradianceTexture=this._irradianceTexture);const l=this._engine.getLoadedTexturesCache();let M=l.indexOf(this);-1!==M&&l.splice(M,1),M=l.indexOf(m),-1===M&&l.push(m)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}u._Counter=0},11270:(m,S,h)=>{h.d(S,{b:()=>l});class l{get wrapU(){return this._cachedWrapU}set wrapU(m){this._cachedWrapU=m}get wrapV(){return this._cachedWrapV}set wrapV(m){this._cachedWrapV=m}get wrapR(){return this._cachedWrapR}set wrapR(m){this._cachedWrapR=m}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(m){this._cachedAnisotropicFilteringLevel=m}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(m){this._comparisonFunction=m}get useMipMaps(){return this._useMipMaps}set useMipMaps(m){this._useMipMaps=m}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=m,this._cachedWrapV=S,this._cachedWrapR=h,this._cachedAnisotropicFilteringLevel=l,this.samplingMode=M,this._comparisonFunction=O,this}compareSampler(m){return this._cachedWrapU===m._cachedWrapU&&this._cachedWrapV===m._cachedWrapV&&this._cachedWrapR===m._cachedWrapR&&this._cachedAnisotropicFilteringLevel===m._cachedAnisotropicFilteringLevel&&this.samplingMode===m.samplingMode&&this._comparisonFunction===m._comparisonFunction&&this._useMipMaps===m._useMipMaps}}},11179:(m,S,h)=>{h.d(S,{e:()=>O});var l=h(11173);const M=(m,S,h)=>m?m.getClassName&&"Mesh"===m.getClassName()?null:!m.getClassName||"SubMesh"!==m.getClassName()&&"PhysicsBody"!==m.getClassName()?m.clone?m.clone():Array.isArray(m)?m.slice():h&&"object"===typeof m?{...m}:null:m.clone(S):null;class O{static DeepCopy(m,S,h,O){let u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const b=function(m){const S=[];do{const h=Object.getOwnPropertyNames(m);for(const m of h)-1===S.indexOf(m)&&S.push(m)}while(m=Object.getPrototypeOf(m));return S}(m);for(const Y of b){if("_"===Y[0]&&(!O||-1===O.indexOf(Y)))continue;if(Y.endsWith("Observable"))continue;if(h&&-1!==h.indexOf(Y))continue;const b=m[Y],V=typeof b;if("function"!==V)try{if("object"===V)if(b instanceof Uint8Array)S[Y]=Uint8Array.from(b);else if(b instanceof Array){if(S[Y]=[],b.length>0)if("object"==typeof b[0])for(let m=0;m<b.length;m++){const h=M(b[m],S,u);-1===S[Y].indexOf(h)&&S[Y].push(h)}else S[Y]=b.slice(0)}else S[Y]=M(b,S,u);else S[Y]=b}catch(q){l.e.Warn(q.message)}}}}},11210:(m,S,h)=>{h.d(S,{b:()=>l,d:()=>M,e:()=>O});class l extends Error{}l._setPrototypeOf=Object.setPrototypeOf||((m,S)=>(m.__proto__=S,m));const M={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class O extends l{constructor(m,S,h){super(m),this.errorCode=S,this.innerError=h,this.name="RuntimeError",l._setPrototypeOf(this,O.prototype)}}},11205:(m,S,h)=>{h.d(S,{c:()=>e,d:()=>U,h:()=>T,k:()=>g,q:()=>s,o:()=>E,u:()=>y,x:()=>o,z:()=>v,D:()=>H});var l=h(11191),M=h(11169),O=h(11161);class u{}u.FilesToLoad={};var b=h(11210),q=h(11216),Y=h(11221),V=h(11196),I=h(11173),Z=h(11226),C=h(11224),B=h(11229);const D=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class E extends b.e{constructor(m,S){super(m,b.d.LoadFileError),this.name="LoadFileError",b.b._setPrototypeOf(this,E.prototype),S instanceof l.b?this.request=S:this.file=S}}class n extends b.e{constructor(m,S){super(m,b.d.RequestFileError),this.request=S,this.name="RequestFileError",b.b._setPrototypeOf(this,n.prototype)}}class L extends b.e{constructor(m,S){super(m,b.d.ReadFileError),this.file=S,this.name="ReadFileError",b.b._setPrototypeOf(this,L.prototype)}}const U={DefaultRetryStrategy:class{static ExponentialBackoff(){let m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(h,l,M)=>0!==l.status||M>=m||-1!==h.indexOf("file:")?-1:Math.pow(2,M)*S}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:m=>m,ScriptBaseUrl:"",ScriptPreprocessUrl:m=>m,CleanUrl:m=>m=m.replace(/#/gm,"%23")},H=(m,S)=>{if((!m||0!==m.indexOf("data:"))&&U.CorsBehavior)if("string"===typeof U.CorsBehavior||U.CorsBehavior instanceof String)S.crossOrigin=U.CorsBehavior;else{const h=U.CorsBehavior(m);h&&(S.crossOrigin=h)}},R={getRequiredSize:null},y=function(m,S,h,M){let O,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",Y=arguments.length>5?arguments[5]:void 0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:V.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===I||void 0===I||!I._features.forceBitmapOverHTMLImageElement))return h("LoadImage is only supported in web or BabylonNative environments."),null;let Z=!1;m instanceof ArrayBuffer||ArrayBuffer.isView(m)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(O=URL.createObjectURL(new Blob([m],{type:b})),Z=!0):O=`data:${b};base64,`+(0,q.g)(m):m instanceof Blob?(O=URL.createObjectURL(m),Z=!0):(O=U.CleanUrl(m),O=U.PreprocessUrl(O));const C=S=>{if(h){const l=O||m.toString();h(`Error while trying to load image: ${0===l.indexOf("http")||l.length<=128?l:l.slice(0,128)+"..."}`,S)}};if(null!==I&&void 0!==I&&I._features.forceBitmapOverHTMLImageElement)return s(O,(l=>{I.createImageBitmap(new Blob([l],{type:b}),{premultiplyAlpha:"none",...Y}).then((m=>{S(m),Z&&URL.revokeObjectURL(O)})).catch((S=>{h&&h("Error while trying to load image: "+m,S)}))}),void 0,M||void 0,!0,((m,S)=>{C(S)})),null;const B=new Image;if(R.getRequiredSize){const S=R.getRequiredSize(m);S.width&&(B.width=S.width),S.height&&(B.height=S.height)}H(O,B);const D=[],E=()=>{for(const m of D)m.target.removeEventListener(m.name,m.handler);D.length=0};D.push({target:B,name:"load",handler:()=>{E(),S(B),Z&&B.src&&URL.revokeObjectURL(B.src)}}),D.push({target:B,name:"error",handler:m=>{E(),C(m),Z&&B.src&&URL.revokeObjectURL(B.src)}}),D.push({target:document,name:"securitypolicyviolation",handler:m=>{if(m.blockedURI!==B.src||"kh"===m.disposition)return;E();const S=new Error(`CSP violation of policy ${m.effectiveDirective} ${m.blockedURI}. Current policy is ${m.originalPolicy}`);V.d.UseFallbackTexture=!1,C(S),Z&&B.src&&URL.revokeObjectURL(B.src),B.src=""}}),(()=>{for(const m of D)m.target.addEventListener(m.name,m.handler)})();const n="blob:"===O.substring(0,5),L="data:"===O.substring(0,5),y=()=>{n||L||!l.b.IsCustomRequestAvailable?B.src=O:s(O,((m,S,h)=>{const l=new Blob([m],{type:!b&&h?h:b}),M=URL.createObjectURL(l);Z=!0,B.src=M}),void 0,M||void 0,!0,((m,S)=>{C(S)}))},o=()=>{M&&M.loadImage(O,B)};if(!n&&!L&&M&&M.enableTexturesOffline)M.open(o,y);else{if(-1!==O.indexOf("file:")){const m=decodeURIComponent(O.substring(5).toLowerCase());if(u.FilesToLoad[m]&&"undefined"!==typeof URL){try{let S;try{S=URL.createObjectURL(u.FilesToLoad[m])}catch(v){S=URL.createObjectURL(u.FilesToLoad[m])}B.src=S,Z=!0}catch(T){B.src=""}return B}}y()}return B},o=(m,S,h,l,M)=>{const u=new FileReader,b={onCompleteObservable:new O.e,abort:()=>u.abort()};return u.onloadend=()=>b.onCompleteObservable.notifyObservers(b),M&&(u.onerror=()=>{M(new L(`Unable to read ${m.name}`,m))}),u.onload=m=>{S(m.target.result)},h&&(u.onprogress=h),l?u.readAsArrayBuffer(m):u.readAsText(m),b},s=(m,S,h,l,M,q,Y)=>{if(m.name)return o(m,S,h,M,q?m=>{q(void 0,m)}:void 0);const V=m;if(-1!==V.indexOf("file:")){let m=decodeURIComponent(V.substring(5).toLowerCase());0===m.indexOf("./")&&(m=m.substring(2));const l=u.FilesToLoad[m];if(l)return o(l,S,h,M,q?m=>q(void 0,new E(m.message,m.file)):void 0)}const{match:C,type:B}=G(V);if(C){const m={onCompleteObservable:new O.e,abort:()=>()=>{}};try{const m=M?e(V):a(V);S(m,void 0,B)}catch(b){q?q(void 0,b):I.e.Error(b.message||"Failed to parse the Data URL")}return Z.c.SetImmediate((()=>{m.onCompleteObservable.notifyObservers(m)})),m}return v(V,((m,h)=>{S(m,null===h||void 0===h?void 0:h.responseURL,null===h||void 0===h?void 0:h.getResponseHeader("content-type"))}),h,l,M,q?m=>{q(m.request,new E(m.message,m.request))}:void 0,Y)},v=(m,S,h,u,b,q,Y)=>{m=U.CleanUrl(m),m=U.PreprocessUrl(m);const V=U.BaseUrl+m;let Z=!1;const C={onCompleteObservable:new O.e,abort:()=>Z=!0},B=()=>{let m,O=new l.b,u=null;const B=()=>{O&&(h&&O.removeEventListener("progress",h),m&&O.removeEventListener("readystatechange",m),O.removeEventListener("loadend",D))};let D=()=>{B(),C.onCompleteObservable.notifyObservers(C),C.onCompleteObservable.clear(),h=void 0,m=null,D=null,q=void 0,Y=void 0,S=void 0};C.abort=()=>{Z=!0,D&&D(),O&&O.readyState!==(XMLHttpRequest.DONE||4)&&O.abort(),null!==u&&(clearTimeout(u),u=null),O=null};const E=m=>{const S=m.message||"Unknown error";q&&O?q(new n(S,O)):I.e.Error(S)},L=I=>{if(O){if(O.open("GET",V),Y)try{Y(O)}catch(C){return void E(C)}b&&(O.responseType="arraybuffer"),h&&O.addEventListener("progress",h),D&&O.addEventListener("loadend",D),m=()=>{if(!Z&&O&&O.readyState===(XMLHttpRequest.DONE||4)){if(m&&O.removeEventListener("readystatechange",m),O.status>=200&&O.status<300||0===O.status&&(!(0,M.m)()||X())){const m=b?O.response:O.responseText;if(null!==m){try{S&&S(m,O)}catch(C){E(C)}return}}const h=U.DefaultRetryStrategy;if(h){const m=h(V,O,I);if(-1!==m)return B(),O=new l.b,void(u=setTimeout((()=>L(I+1)),m))}const Y=new n("Error status: "+O.status+" "+O.statusText+" - Unable to load "+V,O);q&&q(Y)}},O.addEventListener("readystatechange",m),O.send()}};L(0)};if(u&&u.enableSceneOffline){const l=m=>{m&&m.status>400?q&&q(m):B()},M=()=>{u&&u.loadFile(U.BaseUrl+m,(m=>{!Z&&S&&S(m),C.onCompleteObservable.notifyObservers(C)}),h?m=>{!Z&&h&&h(m)}:void 0,l,b)};u.open(M,l)}else B();return C},T=m=>{const{match:S,type:h}=G(m);if(S)return h||void 0;const l=m.lastIndexOf(".");switch(m.substring(l+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"th":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},X=()=>"undefined"!==typeof location&&"file:"===location.protocol,g=m=>D.test(m),G=m=>{const S=D.exec(m);if(null===S||0===S.length)return{match:!1,type:""};return{match:!0,type:S[0].replace("data:","").replace("base64,","")}};function e(m){return(0,q.b)(m.split(",")[1])}const a=m=>(0,q.d)(m.split(",")[1]);let x;B.b._FileToolsLoadImage=y,C.d.loadFile=s,Y.l.loadFile=s;((m,S,h,l,M,O,u,b,q,Y)=>{x={DecodeBase64UrlToBinary:m,DecodeBase64UrlToString:S,DefaultRetryStrategy:h.DefaultRetryStrategy,BaseUrl:h.BaseUrl,CorsBehavior:h.CorsBehavior,PreprocessUrl:h.PreprocessUrl,IsBase64DataUrl:l,IsFileURL:M,LoadFile:O,LoadImage:u,ReadFile:b,RequestFile:q,SetCorsBehavior:Y},Object.defineProperty(x,"DefaultRetryStrategy",{get:function(){return h.DefaultRetryStrategy},set:function(m){h.DefaultRetryStrategy=m}}),Object.defineProperty(x,"BaseUrl",{get:function(){return h.BaseUrl},set:function(m){h.BaseUrl=m}}),Object.defineProperty(x,"PreprocessUrl",{get:function(){return h.PreprocessUrl},set:function(m){h.PreprocessUrl=m}}),Object.defineProperty(x,"CorsBehavior",{get:function(){return h.CorsBehavior},set:function(m){h.CorsBehavior=m}})})(e,a,U,g,X,s,y,o,v,H)},11302:(m,S,h)=>{function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(m=>{const S=16*Math.random()|0;return("x"===m?S:3&S|8).toString(16)}))}h.d(S,{b:()=>l})},11285:(m,S,h)=>{h.d(S,{e:()=>O});var l=h(11173),M=h(11293);class O{static Instantiate(m){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[m])return this.RegisteredExternalClasses[m];const S=(0,M.d)(m);if(S)return S;l.e.Warn(m+" not found, you may have missed an import.");const h=m.split(".");let O=window||this;for(let l=0,M=h.length;l<M;l++)O=O[h[l]];return"function"!==typeof O?null:O}}O.RegisteredExternalClasses={}},11183:(m,S,h)=>{h.d(S,{b:()=>M});var l=h(11169);class M{static get Now(){return(0,l.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11216:(m,S,h)=>{h.d(S,{b:()=>u,d:()=>O,f:()=>l,g:()=>M});const l=m=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(m);let S="";for(let h=0;h<m.byteLength;h++)S+=String.fromCharCode(m[h]);return S},M=m=>{const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h,l,M,O,u,b,q,Y="",V=0;const I=ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength):new Uint8Array(m);for(;V<I.length;)h=I[V++],l=V<I.length?I[V++]:Number.NaN,M=V<I.length?I[V++]:Number.NaN,O=h>>2,u=(3&h)<<4|l>>4,b=(15&l)<<2|M>>6,q=63&M,isNaN(l)?b=q=64:isNaN(M)&&(q=64),Y+=S.charAt(O)+S.charAt(u)+S.charAt(b)+S.charAt(q);return Y},O=m=>atob(m),u=m=>{const S=O(m),h=S.length,l=new Uint8Array(new ArrayBuffer(h));for(let M=0;M<h;M++)l[M]=S.charCodeAt(M);return l.buffer}},11305:(m,S,h)=>{function l(m){let S=1;do{S*=2}while(S<m);return S===m}function M(m,S,h){return m*(1-h)+S*h}function O(m){const S=u(m),h=b(m);return S-m>m-h?h:S}function u(m){return m--,m|=m>>1,m|=m>>2,m|=m>>4,m|=m>>8,m|=m>>16,++m}function b(m){return m|=m>>1,m|=m>>2,m|=m>>4,m|=m>>8,(m|=m>>16)-(m>>1)}function q(m,S){let h;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:h=b(m);break;case 2:h=O(m);break;default:h=u(m)}return Math.min(h,S)}h.d(S,{c:()=>b,e:()=>q,f:()=>l,h:()=>M,l:()=>O})},11156:(m,S,h)=>{h.r(S),h.d(S,{AsyncLoop:()=>L,Tools:()=>E,className:()=>n});var l=h(11161),M=h(11169),O=h(11173),u=h(11179),b=h(11183),q=h(11189),Y=h(11191),V=h(11196),I=h(11205),Z=h(11226),C=h(11285),B=h(11302),D=h(11305);class E{static get BaseUrl(){return I.d.BaseUrl}static set BaseUrl(m){I.d.BaseUrl=m}static get CleanUrl(){return I.d.CleanUrl}static set CleanUrl(m){I.d.CleanUrl=m}static IsAbsoluteUrl(m){return 0===m.indexOf("//")||-1!==m.indexOf("://")&&(-1!==m.indexOf(".")&&(-1!==m.indexOf("/")&&(!(m.indexOf(":")>m.indexOf("/"))&&(m.indexOf("://")<m.indexOf(".")||(0===m.indexOf("data:")||0===m.indexOf("blob:"))))))}static set ScriptBaseUrl(m){I.d.ScriptBaseUrl=m}static get ScriptBaseUrl(){return I.d.ScriptBaseUrl}static set CDNBaseUrl(m){E.ScriptBaseUrl=m,E.AssetBaseUrl=m}static set ScriptPreprocessUrl(m){I.d.ScriptPreprocessUrl=m}static get ScriptPreprocessUrl(){return I.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return I.d.DefaultRetryStrategy}static set DefaultRetryStrategy(m){I.d.DefaultRetryStrategy=m}static get CorsBehavior(){return I.d.CorsBehavior}static set CorsBehavior(m){I.d.CorsBehavior=m}static get UseFallbackTexture(){return V.d.UseFallbackTexture}static set UseFallbackTexture(m){V.d.UseFallbackTexture=m}static get RegisteredExternalClasses(){return C.e.RegisteredExternalClasses}static set RegisteredExternalClasses(m){C.e.RegisteredExternalClasses=m}static get fallbackTexture(){return V.d.FallbackTexture}static set fallbackTexture(m){V.d.FallbackTexture=m}static FetchToRef(m,S,h,l,M,O){const u=4*((Math.abs(m)*h%h|0)+(Math.abs(S)*l%l|0)*h);O.r=M[u]/255,O.g=M[u+1]/255,O.b=M[u+2]/255,O.a=M[u+3]/255}static Mix(m,S,h){return 0}static Instantiate(m){return C.e.Instantiate(m)}static SetImmediate(m){Z.c.SetImmediate(m)}static IsExponentOfTwo(m){return!0}static FloatRound(m){return Math.fround(m)}static GetFilename(m){const S=m.lastIndexOf("/");return S<0?m:m.substring(S+1)}static GetFolderPath(m){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const h=m.lastIndexOf("/");return h<0?S?m:"":m.substring(0,h+1)}static ToDegrees(m){return 180*m/Math.PI}static ToRadians(m){return m*Math.PI/180}static SmoothAngleChange(m,S){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const l=this.ToRadians(m),M=this.ToRadians(S);return this.ToDegrees(Math.atan2((1-h)*Math.sin(M)+h*Math.sin(l),(1-h)*Math.cos(M)+h*Math.cos(l)))}static MakeArray(m,S){return!0===S||void 0!==m&&null!=m?Array.isArray(m)?m:[m]:null}static GetPointerPrefix(m){return(0,M.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(m,S){(0,I.D)(m,S)}static SetReferrerPolicyBehavior(m,S){S.referrerPolicy=m}static get PreprocessUrl(){return I.d.PreprocessUrl}static set PreprocessUrl(m){I.d.PreprocessUrl=m}static LoadImage(m,S,h,l,M,O){return(0,I.u)(m,S,h,l,M,O)}static LoadFile(m,S,h,l,M,O){return(0,I.q)(m,S,h,l,M,O)}static async LoadFileAsync(m){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((h,l)=>{(0,I.q)(m,(m=>{h(m)}),void 0,void 0,S,((m,S)=>{l(S)}))}))}static GetAssetUrl(m){if(!m)return"";if(E.AssetBaseUrl&&m.startsWith(E._DefaultAssetsUrl)){const S="/"===E.AssetBaseUrl[E.AssetBaseUrl.length-1]?E.AssetBaseUrl.substring(0,E.AssetBaseUrl.length-1):E.AssetBaseUrl;return m.replace(E._DefaultAssetsUrl,S)}return m}static GetBabylonScriptURL(m,S){if(!m)return"";if(E.ScriptBaseUrl&&m.startsWith(E._DefaultCdnUrl)){const S="/"===E.ScriptBaseUrl[E.ScriptBaseUrl.length-1]?E.ScriptBaseUrl.substring(0,E.ScriptBaseUrl.length-1):E.ScriptBaseUrl;m=m.replace(E._DefaultCdnUrl,S)}return m=E.ScriptPreprocessUrl(m),S&&(m=E.GetAbsoluteUrl(m)),m}static LoadBabylonScript(m,S,h,l){m=E.GetBabylonScriptURL(m),E.LoadScript(m,S,h)}static async LoadBabylonScriptAsync(m){return m=E.GetBabylonScriptURL(m),await E.LoadScriptAsync(m)}static LoadScript(m,S,h,l){let O=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(m),S&&S()}catch(q){null===h||void 0===h||h(`Unable to load script '${m}' in worker`,q)}return}if(!(0,M.m)())return void(null===h||void 0===h||h(`Cannot load script '${m}' outside of a window or a worker`));const u=document.getElementsByTagName("head")[0],b=document.createElement("script");O?(b.setAttribute("type","module"),b.innerText=m):(b.setAttribute("type","text/javascript"),b.setAttribute("src",m)),l&&(b.id=l),b.onload=()=>{S&&S()},b.onerror=S=>{h&&h(`Unable to load script '${m}'`,S)},u.appendChild(b)}static async LoadScriptAsync(m,S){return await new Promise(((h,l)=>{this.LoadScript(m,(()=>{h()}),((m,S)=>{l(S||new Error(m))}),S)}))}static ReadFileAsDataURL(m,S,h){const M=new FileReader,O={onCompleteObservable:new l.e,abort:()=>M.abort()};return M.onloadend=()=>{O.onCompleteObservable.notifyObservers(O)},M.onload=m=>{S(m.target.result)},M.onprogress=h,M.readAsDataURL(m),O}static ReadFile(m,S,h,l,M){return(0,I.x)(m,S,h,l,M)}static FileAsURL(m){const S=new Blob([m]);return window.URL.createObjectURL(S)}static Format(m){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m.toFixed(S)}static DeepCopy(m,S,h,l){u.e.DeepCopy(m,S,h,l)}static IsEmpty(m){for(const S in m)if(Object.prototype.hasOwnProperty.call(m,S))return!1;return!0}static RegisterTopRootEvents(m,S){for(let l=0;l<S.length;l++){const M=S[l];m.addEventListener(M.name,M.handler,!1);try{window.parent&&window.parent.addEventListener(M.name,M.handler,!1)}catch(h){}}}static UnregisterTopRootEvents(m,S){for(let l=0;l<S.length;l++){const M=S[l];m.removeEventListener(M.name,M.handler);try{m.parent&&m.parent.removeEventListener(M.name,M.handler)}catch(h){}}}static async DumpFramebuffer(m,S,h,l){throw(0,q.c)("DumpTools")}static DumpData(m,S,h,l){throw(0,q.c)("DumpTools")}static async DumpDataAsync(m,S,h){throw(0,q.c)("DumpTools")}static _IsOffScreenCanvas(m){return void 0!==m.convertToBlob}static ToBlob(m,S){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",l=arguments.length>3?arguments[3]:void 0;E._IsOffScreenCanvas(m)||m.toBlob||(m.toBlob=function(m,S,h){setTimeout((()=>{const l=atob(this.toDataURL(S,h).split(",")[1]),M=l.length,O=new Uint8Array(M);for(let m=0;m<M;m++)O[m]=l.charCodeAt(m);m(new Blob([O]))}))}),E._IsOffScreenCanvas(m)?m.convertToBlob({type:h,quality:l}).then((m=>S(m))):m.toBlob((function(m){S(m)}),h,l)}static DownloadBlob(m,S){if("download"in document.createElement("a")){if(!S){const m=new Date;S="screenshot_"+((m.getFullYear()+"-"+(m.getMonth()+1)).slice(2)+"-"+m.getDate()+"_"+m.getHours()+"-"+("0"+m.getMinutes()).slice(-2))+".png"}E.Download(m,S)}else if(m&&"undefined"!==typeof URL){const S=URL.createObjectURL(m),h=window.open("");if(!h)return;const l=h.document.createElement("img");l.onload=function(){URL.revokeObjectURL(S)},l.src=S,h.document.body.appendChild(l)}}static EncodeScreenshotCanvasData(m,S){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",l=arguments.length>3?arguments[3]:void 0,M=arguments.length>4?arguments[4]:void 0;if("string"!==typeof l&&S){if(S){if(E._IsOffScreenCanvas(m))return void m.convertToBlob({type:h,quality:M}).then((m=>{const h=new FileReader;h.readAsDataURL(m),h.onloadend=()=>{const m=h.result;S(m)}}));const l=m.toDataURL(h,M);S(l)}}else this.ToBlob(m,(function(m){m&&E.DownloadBlob(m,l),S&&S("")}),h,M)}static Download(m,S){if("undefined"===typeof URL)return;const h=window.URL.createObjectURL(m),l=document.createElement("a");document.body.appendChild(l),l.style.display="none",l.href=h,l.download=S,l.addEventListener("click",(()=>{l.parentElement&&l.parentElement.removeChild(l)})),l.click(),window.URL.revokeObjectURL(h)}static BackCompatCameraNoPreventDefault(m){return"boolean"===typeof m[0]?m[0]:"boolean"===typeof m[1]&&m[1]}static CreateScreenshot(m,S,h,l){throw(0,q.c)("ScreenshotTools")}static async CreateScreenshotAsync(m,S,h){throw(0,q.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(m,S,h,l){throw(0,q.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(m,S,h){throw(0,q.c)("ScreenshotTools")}static RandomId(){return(0,B.b)()}static IsBase64(m){return(0,I.k)(m)}static DecodeBase64(m){return(0,I.c)(m)}static get errorsCount(){return O.e.errorsCount}static Log(m){O.e.Log(m)}static Warn(m){O.e.Warn(m)}static Error(m){O.e.Error(m)}static get LogCache(){return O.e.LogCache}static ClearLogCache(){O.e.ClearLogCache()}static set LogLevels(m){O.e.LogLevels=m}static set PerformanceLogLevel(m){return(m&E.PerformanceUserMarkLogLevel)===E.PerformanceUserMarkLogLevel?(E.StartPerformanceCounter=E._StartUserMark,void(E.EndPerformanceCounter=E._EndUserMark)):(m&E.PerformanceConsoleLogLevel)===E.PerformanceConsoleLogLevel?(E.StartPerformanceCounter=E._StartPerformanceConsole,void(E.EndPerformanceCounter=E._EndPerformanceConsole)):(E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,void(E.EndPerformanceCounter=E._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(m,S){}static _EndPerformanceCounterDisabled(m,S){}static _StartUserMark(m){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._Performance){if(!(0,M.m)())return;E._Performance=window.performance}S&&E._Performance.mark&&E._Performance.mark(m+"-Begin")}static _EndUserMark(m){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&E._Performance.mark&&(E._Performance.mark(m+"-End"),E._Performance.measure(m,m+"-Begin",m+"-End"))}static _StartPerformanceConsole(m){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(E._StartUserMark(m,S),console.time&&console.time(m))}static _EndPerformanceConsole(m){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(E._EndUserMark(m,S),console.timeEnd(m))}static get Now(){return b.b.Now}static GetClassName(m){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null;if(!S&&m.getClassName)h=m.getClassName();else{if(m instanceof Object){h=(S?m:Object.getPrototypeOf(m)).constructor.__bjsclassName__}h||(h=typeof m)}return h}static First(m,S){for(const h of m)if(S(h))return h;return null}static getFullClassName(m){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null,l=null;if(!S&&m.getClassName)h=m.getClassName();else{if(m instanceof Object){const M=S?m:Object.getPrototypeOf(m);h=M.constructor.__bjsclassName__,l=M.constructor.__bjsmoduleName__}h||(h=typeof m)}return h?(null!=l?l+".":"")+h:null}static async DelayAsync(m){await new Promise((S=>{setTimeout((()=>{S()}),m)}))}static IsSafari(){return!!(0,M.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function n(m,S){return h=>{h.__bjsclassName__=m,h.__bjsmoduleName__=null!=S?S:null}}E.AssetBaseUrl="",E.UseCustomRequestHeaders=!1,E.CustomRequestHeaders=Y.b.CustomRequestHeaders,E.GetDOMTextContent=M.e,E._DefaultCdnUrl="https://cdn.babylonjs.com",E._DefaultAssetsUrl="https://assets.babylonjs.com/core",E.GetAbsoluteUrl="object"===typeof document?m=>{const S=document.createElement("a");return S.href=m,S.href}:"function"===typeof URL&&"object"===typeof location?m=>new URL(m,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},E.NoneLogLevel=O.e.NoneLogLevel,E.MessageLogLevel=O.e.MessageLogLevel,E.WarningLogLevel=O.e.WarningLogLevel,E.ErrorLogLevel=O.e.ErrorLogLevel,E.AllLogLevel=O.e.AllLogLevel,E.IsWindowObjectExist=M.m,E.PerformanceNoneLogLevel=0,E.PerformanceUserMarkLogLevel=1,E.PerformanceConsoleLogLevel=2,E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,E.EndPerformanceCounter=E._EndPerformanceCounterDisabled;class L{constructor(m,S,h){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=m,this.index=l-1,this._done=!1,this._fn=S,this._successCallback=h}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(m,S,h){const l=new L(m,S,h,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return l.executeNext(),l}static SyncAsyncForLoop(m,S,h,l,M){let O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return L.Run(Math.ceil(m/S),(l=>{M&&M()?l.breakLoop():setTimeout((()=>{for(let O=0;O<S;++O){const u=l.index*S+O;if(u>=m)break;if(h(u),M&&M()){l.breakLoop();break}}l.executeNext()}),O)}),l)}}E.Mix=D.h,E.IsExponentOfTwo=D.f,V.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11293:(m,S,h)=>{h.d(S,{d:()=>O,e:()=>M});const l={};function M(m,S){l[m]=S}function O(m){return l[m]}},11191:(m,S,h)=>{h.d(S,{b:()=>l});class l{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(l.CustomRequestHeaders).length>0||l.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const m in l.CustomRequestHeaders){const S=l.CustomRequestHeaders[m];S&&this._xhr.setRequestHeader(m,S)}}_shouldSkipRequestModifications(m){return l.SkipRequestModificationForBabylonCDN&&(m.includes("preview.babylonjs.com")||m.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(m){this._xhr.onprogress=m}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(m){this._xhr.responseType=m}get timeout(){return this._xhr.timeout}set timeout(m){this._xhr.timeout=m}addEventListener(m,S,h){this._xhr.addEventListener(m,S,h)}removeEventListener(m,S,h){this._xhr.removeEventListener(m,S,h)}abort(){this._xhr.abort()}send(m){l.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(m)}open(m,S){for(const h of l.CustomRequestModifiers){if(this._shouldSkipRequestModifications(S))return;S=h(this._xhr,S)||S}S=(S=S.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=S,this._xhr.open(m,S,!0)}setRequestHeader(m,S){this._xhr.setRequestHeader(m,S)}getResponseHeader(m){return this._xhr.getResponseHeader(m)}}l.CustomRequestHeaders={},l.CustomRequestModifiers=new Array,l.SkipRequestModificationForBabylonCDN=!0}}]);