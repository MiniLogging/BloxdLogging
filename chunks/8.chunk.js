"use strict";(self.nyfa010khv=self.nyfa010khv||[]).push([[8],{12037:(L,r,p)=>{p.d(r,{e:()=>h});var J=p(12009),i=p(11975),n=p(12043),j=p(12055),z=p(11988);class G{constructor(){let L=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,L&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(L){this._zOffset!==L&&(this._zOffset=L,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(L){this._zOffsetUnits!==L&&(this._zOffsetUnits=L,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(L){this._cullFace!==L&&(this._cullFace=L,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(L){this._cull!==L&&(this._cull=L,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(L){this._depthFunc!==L&&(this._depthFunc=L,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(L){this._depthMask!==L&&(this._depthMask=L,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(L){this._depthTest!==L&&(this._depthTest=L,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(L){this._frontFace!==L&&(this._frontFace=L,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(L){this.isDirty&&(this._isCullDirty&&(this.cull?L.enable(L.CULL_FACE):L.disable(L.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(L.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(L.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?L.enable(L.DEPTH_TEST):L.disable(L.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(L.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(L.enable(L.POLYGON_OFFSET_FILL),L.polygonOffset(this.zOffset,this.zOffsetUnits)):L.disable(L.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(L.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class C{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(L){this._func!==L&&(this._func=L,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(L){this._funcRef!==L&&(this._funcRef=L,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(L){this._funcMask!==L&&(this._funcMask=L,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(L){this._opStencilFail!==L&&(this._opStencilFail=L,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(L){this._opDepthFail!==L&&(this._opDepthFail=L,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(L){this._opStencilDepthPass!==L&&(this._opStencilDepthPass=L,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(L){this._mask!==L&&(this._mask=L,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(L){this._enabled!==L&&(this._enabled=L,this._isStencilTestDirty=!0)}constructor(){let L=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,L&&this.reset()}reset(){var L;this.stencilMaterial=void 0,null===(L=this.stencilGlobal)||void 0===L||L.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(L){var r;if(!L)return;const p=!this.useStencilGlobalOnly&&!(null===(r=this.stencilMaterial)||void 0===r||!r.enabled);this.enabled=p?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=p?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=p?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=p?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=p?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=p?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=p?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=p?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?L.enable(L.STENCIL_TEST):L.disable(L.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(L.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(L.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(L.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class t{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=t.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=t.KEEP,this.opDepthFail=t.KEEP,this.opStencilDepthPass=t.REPLACE}get stencilFunc(){return this.func}set stencilFunc(L){this.func=L}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(L){this.funcRef=L}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(L){this.funcMask=L}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(L){this.opStencilFail=L}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(L){this.opDepthFail=L}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(L){this.opStencilDepthPass=L}get stencilMask(){return this.mask}set stencilMask(L){this.mask=L}get stencilTest(){return this.enabled}set stencilTest(L){this.enabled=L}}t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681;class E{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(L){this._alphaBlend!==L&&(this._alphaBlend=L,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(L,r,p,J){this._blendConstants[0]===L&&this._blendConstants[1]===r&&this._blendConstants[2]===p&&this._blendConstants[3]===J||(this._blendConstants[0]=L,this._blendConstants[1]=r,this._blendConstants[2]=p,this._blendConstants[3]=J,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(L,r,p,J){this._blendFunctionParameters[0]===L&&this._blendFunctionParameters[1]===r&&this._blendFunctionParameters[2]===p&&this._blendFunctionParameters[3]===J||(this._blendFunctionParameters[0]=L,this._blendFunctionParameters[1]=r,this._blendFunctionParameters[2]=p,this._blendFunctionParameters[3]=J,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(L,r){this._blendEquationParameters[0]===L&&this._blendEquationParameters[1]===r||(this._blendEquationParameters[0]=L,this._blendEquationParameters[1]=r,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(L){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?L.enable(L.BLEND):L.disable(L.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(L.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(L.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(L.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var x=p(11996),w=p(12060),g=p(11971),b=p(11964),c=p(12028),P=p(12077);function O(L,r){if((0,g.k)()){const{requestAnimationFrame:p}=r||window;if("function"===typeof p)return p(L)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(L);return setTimeout(L,16)}class h{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(L){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(L){L!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=L,this._depthCullingState.depthFunc=L?518:515)}setColorWrite(L){L!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=L)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(L){if(L)return this.isNDCHalfZRange?L.IS_NDC_HALF_ZRANGE="":delete L.IS_NDC_HALF_ZRANGE,this.o?L.USE_REVERSE_DEPTHBUFFER="":delete L.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?L.USE_EXACT_SRGB_CONVERSIONS="":delete L.USE_EXACT_SRGB_CONVERSIONS);{let L="";return this.isNDCHalfZRange&&(L+="#define IS_NDC_HALF_ZRANGE"),this.o&&(L&&(L+="\n"),L+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(L&&(L+="\n"),L+="#define USE_EXACT_SRGB_CONVERSIONS"),L}}_rebuildInternalTextures(){const L=this._internalTexturesCache.slice();for(const r of L)r._rebuild()}_rebuildRenderTargetWrappers(){const L=this._renderTargetWrapperCache.slice();for(const r of L)r._rebuild()}_rebuildEffects(){for(const L in this._compiledEffects){const r=this._compiledEffects[L];r._pipelineContext=null,r._prepareEffect()}n.Effect.ResetCache()}_rebuildGraphicsResources(){var L;this.wipeCaches(!0),this._rebuildEffects(),null===(L=this._rebuildComputeEffects)||void 0===L||L.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){i.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(L){setTimeout((()=>{this._clearEmptyResources();const r=this._depthCullingState.depthTest,p=this._depthCullingState.depthFunc,J=this._depthCullingState.depthMask,i=this._stencilState.stencilTest;L(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=r,this._depthCullingState.depthFunc=p,this._depthCullingState.depthMask=J,this._stencilState.stencilTest=i,this._flagContextRestored()}),0)}get P(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(L){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(L){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const L=new Uint8Array(4),r=[L,L,L,L,L,L];this._emptyCubeTexture=this.createRawCubeTexture(r,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(L){if(!L)return this._activeRenderLoops.length=0,void this._cancelFrame();const r=this._activeRenderLoops.indexOf(L);r>=0&&(this._activeRenderLoops.splice(r,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const L=this._frameHandler;if(this._frameHandler=0,(0,g.k)()){const{cancelAnimationFrame:r}=this.getHostWindow()||window;if("function"===typeof r)return r(L)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(L);return clearTimeout(L)}}pi(){this.onBeginFrameObservable.notifyObservers(this)}ni(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(L){this._maxFPS=L,void 0!==L&&(this._minFrameTime=L<=0?Number.MAX_VALUE:1e3/L)}_isOverFrameTime(L){if(!L||void 0===this._maxFPS)return!1;const r=L-this._lastFrameTime;return this._lastFrameTime=L,this._renderAccumulator+=r,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(L){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(L)){let L=!0;(this.P||!this.renderEvenInBackground&&this._windowIsBackground)&&(L=!1),L&&(this.pi(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ni())}}_renderLoop(L){this._processFrame(L),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let L=0;L<this._activeRenderLoops.length;L++){(0,this._activeRenderLoops[L])()}}_renderViews(){return!1}_queueNewFrame(L,r){return O(L,r)}runRenderLoop(L){-1===this._activeRenderLoops.indexOf(L)&&(this._activeRenderLoops.push(L),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(L){this._depthCullingState.depthTest=L}setZOffset(L){this._depthCullingState.zOffset=this.o?-L:L}getZOffset(){const L=this._depthCullingState.zOffset;return this.o?-L:L}setZOffsetUnits(L){this._depthCullingState.zOffsetUnits=this.o?-L:L}getZOffsetUnits(){const L=this._depthCullingState.zOffsetUnits;return this.o?-L:L}getHostWindow(){return(0,g.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(L){this._compatibilityMode=!0}_rebuildTextures(){for(const L of this.scenes)L._rebuildTextures();for(const L of this._virtualScenes)L._rebuildTextures()}_releaseRenderTargetWrapper(L){const r=this._renderTargetWrapperCache.indexOf(L);-1!==r&&this._renderTargetWrapperCache.splice(r,1)}get currentViewport(){return this._cachedViewport}setViewport(L,r,p){const J=r||this.getRenderWidth(),i=p||this.getRenderHeight(),n=L.x||0,j=L.y||0;this._cachedViewport=L,this._viewport(n*J,j*i,J*L.width,i*L.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(L){return new Path2D(L)}get description(){let L=this.name+this.version;return this._caps.parallelShaderCompile&&(L+=" - Parallel shader compilation"),L}_createTextureBase(L,r,p,n){let j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,C=arguments.length>7?arguments[7]:void 0,t=arguments.length>8?arguments[8]:void 0,E=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,x=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,g=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,b=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,c=arguments.length>13?arguments[13]:void 0,O=arguments.length>14?arguments[14]:void 0,U=arguments.length>15?arguments[15]:void 0;const W="data:"===(L=L||"").substring(0,5),B="blob:"===L.substring(0,5),F=W&&-1!==L.indexOf(";base64,"),Q=x||new w.b(this,1);Q!==x&&(Q.label=L.substring(0,60));const e=L;!this._transformTextureUrl||F||x||E||(L=this._transformTextureUrl(L)),e!==L&&(Q._originalUrl=e);const v=L.lastIndexOf(".");let y=b||(v>-1?L.substring(v).toLowerCase():"");y.indexOf("?")>-1&&(y=y.split("?")[0]);const A=(0,P.d)(y,c);n&&n.addPendingData(Q),Q.url=L,Q.generateMipMaps=!r,Q.samplingMode=j,Q.invertY=p,Q._useSRGBBuffer=this._getUseSRGBBuffer(!!U,r),this._doNotHandleContextLost||(Q._buffer=E);let u=null;z&&!x&&(u=Q.onLoadedObservable.add(z)),x||this._internalTexturesCache.push(Q);const a=(p,x)=>{n&&n.removePendingData(Q),L===e?(u&&Q.onLoadedObservable.remove(u),J.c.UseFallbackTexture&&L!==J.c.FallbackTexture&&this._createTextureBase(J.c.FallbackTexture,r,Q.invertY,n,j,null,G,C,t,E,Q),p=(p||"Unknown error")+(J.c.UseFallbackTexture?" - Fallback texture was used":""),Q.onErrorObservable.notifyObservers({message:p,exception:x}),G&&G(p,x)):(i.d.Warn(`Failed to load ${L}, falling back to ${e}`),this._createTextureBase(e,r,Q.invertY,n,j,z,G,C,t,E,Q,g,b,c,O,U))};if(A){const r=async L=>{(await A).loadData(L,Q,((L,r,p,J,i,z)=>{z?a("TextureLoader failed to load data"):C(Q,y,n,{width:L,height:r},Q.invertY,!p,J,(()=>(i(),!1)),j)}),O)};E?E instanceof ArrayBuffer?r(new Uint8Array(E)):ArrayBuffer.isView(E)?r(E):G&&G("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(L,(L=>{r(new Uint8Array(L))}),void 0,n?n.offlineProvider:void 0,!0,((L,r)=>{a("Unable to load "+(L&&L.responseURL,r))}))}else{const p=L=>{B&&!this._doNotHandleContextLost&&(Q._buffer=L),C(Q,y,n,L,Q.invertY,r,!1,t,j)};!W||F?E&&("string"===typeof E.decoding||E.close)?p(E):h._FileToolsLoadImage(L||"",p,a,n?n.offlineProvider:null,c,Q.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof E||E instanceof ArrayBuffer||ArrayBuffer.isView(E)||E instanceof Blob?h._FileToolsLoadImage(E,p,a,n?n.offlineProvider:null,c,Q.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):E&&p(E)}return Q}_rebuildBuffers(){for(const L of this._uniformBuffers)L._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,g.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const L in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,L)&&(this._boundTexturesCache[L]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(L){this._name=L}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(L){this._hardwareScalingLevel=L,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(L){this._doNotHandleContextLost=L}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(L,r,p){var i,n;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new G,this._stencilStateComposer=new C,this._stencilState=new t,this._alphaState=new E,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new b.c,this.onCanvasFocusObservable=new b.c,this.onNewSceneAddedObservable=new b.c,this.onResizeObservable=new b.c,this.onCanvasPointerOutObservable=new b.c,this.onEffectErrorObservable=new b.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new b.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=L=>this._renderLoop(L),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new b.c,this.onAfterShaderCompilationObservable=new b.c,this.onBeginFrameObservable=new b.c,this.onEndFrameObservable=new b.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new b.c,this.onContextRestoredObservable=new b.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.ji=new b.c,this.onReleaseEffectsObservable=new b.c,J.c.Instances.push(this),this.startTime=z.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,j.e.SetMatrixPrecision(!!r.useHighPrecisionMatrix),(0,g.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=p??!1,r.antialias=L??r.antialias,r.deterministicLockstep=r.deterministicLockstep??!1,r.lockstepMaxSteps=r.lockstepMaxSteps??4,r.timeStep=r.timeStep??1/60,r.ti=r.ti??!0,this._audioContext=(null===(i=r.audioEngineOptions)||void 0===i?void 0:i.audioContext)??null,this._audioDestination=(null===(n=r.audioEngineOptions)||void 0===n?void 0:n.audioDestination)??null,this.premultipliedAlpha=r.premultipliedAlpha??!0,this._doNotHandleContextLost=!!r.doNotHandleContextLost,this._isStencilEnable=!!r.ti,this.useExactSrgbConversions=r.useExactSrgbConversions??!1;const x=(0,g.k)()&&window.devicePixelRatio||1,w=r.limitDeviceRatio||x;p=p||r.adaptToDeviceRatio||!1,this._hardwareScalingLevel=p?1/Math.min(w,x):1,this._lastDevicePixelRatio=x,this._creationOptions=r}resize(){let L,r,p=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const L=(0,g.k)()&&window.devicePixelRatio||1,r=this._lastDevicePixelRatio/L;this._lastDevicePixelRatio=L,this._hardwareScalingLevel*=r}if((0,g.k)()&&(0,g.e)())if(this._renderingCanvas){var J,i;const p=null===(J=(i=this._renderingCanvas).getBoundingClientRect)||void 0===J?void 0:J.call(i);L=this._renderingCanvas.clientWidth||(null===p||void 0===p?void 0:p.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,r=this._renderingCanvas.clientHeight||(null===p||void 0===p?void 0:p.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else L=window.innerWidth,r=window.innerHeight;else L=this._renderingCanvas?this._renderingCanvas.width:100,r=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(L/this._hardwareScalingLevel,r/this._hardwareScalingLevel,p)}setSize(L,r){let p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(L|=0,r|=0,!p&&this._renderingCanvas.width===L&&this._renderingCanvas.height===r)return!1;if(this._renderingCanvas.width=L,this._renderingCanvas.height=r,this.scenes){for(let L=0;L<this.scenes.length;L++){const r=this.scenes[L];for(let L=0;L<r.cameras.length;L++){r.cameras[L]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(L,r,p,J,i,n,j,z,G,C,t){throw(0,x.d)("engine.rawTexture")}createRawCubeTexture(L,r,p,J,i,n,j,z){throw(0,x.d)("engine.rawTexture")}createRawTexture3D(L,r,p,J,i,n,j,z,G,C,t){throw(0,x.d)("engine.rawTexture")}createRawTexture2DArray(L,r,p,J,i,n,j,z,G,C,t){throw(0,x.d)("engine.rawTexture")}_sharedInit(L){this._renderingCanvas=L}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const L=navigator.userAgent;this.hostInformation.isMobile=-1!==L.indexOf("Mobile")||-1!==L.indexOf("Mac")&&(0,g.e)()&&"ontouchend"in document},this._checkForMobile(),(0,g.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(L){return document.createElement("video")}_reportDrawCall(){var L;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(L=this._drawCalls)||void 0===L||L.addCount(r,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(L,r){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(L,r){return createImageBitmap(L,r)}resizeImageBitmap(L,r,p){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(L){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(L,r){if("undefined"===typeof document)return new OffscreenCanvas(L,r);const p=document.createElement("canvas");return p.width=L,p.height=r,p}createCanvas(L,r){return h._CreateCanvas(L,r)}static _FileToolsLoadImage(L,r,p,J,i,n,j){throw(0,x.d)("FileTools")}_loadFile(L,r,p,J,i,n){const j=(0,c.i)(L,r,p,J,i,n);return this._activeRequests.push(j),j.onCompleteObservable.add((()=>{const L=this._activeRequests.indexOf(j);-1!==L&&this._activeRequests.splice(L,1)})),j}static _FileToolsLoadFile(L,r,p,J,i,n){if(c.c.loadFile)return c.c.loadFile(L,r,p,J,i,n);throw(0,x.d)("FileTools")}dispose(){var L;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(L=this.releaseComputeEffects)||void 0===L||L.call(this),n.Effect.ResetCache();for(const p of this._activeRequests)p.abort();this._boundRenderFunction=null,this.ji.notifyObservers(this),this.ji.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,g.k)()&&window.removeEventListener("resize",this._checkForMobile);const r=J.c.Instances.indexOf(this);r>=0&&J.c.Instances.splice(r,1),J.c.Instances.length||(J.c.OnEnginesDisposedObservable.notifyObservers(this),J.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(L){throw(0,x.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(L,r){for(let p=0;p<J.c.Instances.length;p++){const i=J.c.Instances[p];for(let p=0;p<i.scenes.length;p++)i.scenes[p].markAllMaterialsAsDirty(L,r)}}}h._RenderPassIdCounter=0,h._RescalePostProcessFactory=null,h.CollisionsEpsilon=.001,h.QueueNewFrame=O},12009:(L,r,p)=>{p.d(r,{c:()=>i});var J=p(11964);class i{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}i.Instances=[],i.OnEnginesDisposedObservable=new J.c,i._LastCreatedScene=null,i.UseFallbackTexture=!0,i.FallbackTexture=""},12055:(L,r,p)=>{p.d(r,{e:()=>J});class J{static SetMatrixPrecision(L){if(J.MatrixTrackPrecisionChange=!1,L&&!J.MatrixUse64Bits&&J.MatrixTrackedMatrices)for(let r=0;r<J.MatrixTrackedMatrices.length;++r){const L=J.MatrixTrackedMatrices[r],p=L.ai;L.ai=new Array(16);for(let r=0;r<16;++r)L.ai[r]=p[r]}J.MatrixUse64Bits=L,J.MatrixCurrentType=J.MatrixUse64Bits?Array:Float32Array,J.MatrixTrackedMatrices=null}}J.MatrixUse64Bits=!1,J.MatrixTrackPrecisionChange=!0,J.MatrixCurrentType=Float32Array,J.MatrixTrackedMatrices=[]},12077:(L,r,p)=>{p.d(r,{d:()=>j});var J=p(11975);const i=new Map;function n(L,r){(function(L){return i.delete(L)})(L)&&J.d.Warn(`Extension with the name '${L}' already exists`),i.set(L,r)}function j(L,r){"image/ktx"!==r&&"image/ktx2"!==r||(L=".ktx"),i.has(L)||(L.endsWith(".ies")&&n(".ies",(async()=>await p.e(15).then(p.bind(p,14585)).then((L=>new L._IESTextureLoader)))),L.endsWith(".dds")&&n(".dds",(async()=>await Promise.all([p.e(14),p.e(17),p.e(13),p.e(19),p.e(18),p.e(28)]).then(p.bind(p,14592)).then((L=>new L._DDSTextureLoader)))),L.endsWith(".basis")&&n(".basis",(async()=>await Promise.all([p.e(14),p.e(17),p.e(13),p.e(47)]).then(p.bind(p,14597)).then((L=>new L._BasisTextureLoader)))),L.endsWith(".env")&&n(".env",(async()=>await Promise.all([p.e(14),p.e(17),p.e(13),p.e(19),p.e(18),p.e(23),p.e(21),p.e(45),p.e(48)]).then(p.bind(p,14602)).then((L=>new L._ENVTextureLoader)))),L.endsWith(".hdr")&&n(".hdr",(async()=>await Promise.all([p.e(14),p.e(49)]).then(p.bind(p,14606)).then((L=>new L._HDRTextureLoader)))),(L.endsWith(".ktx")||L.endsWith(".ktx2"))&&(n(".ktx",(async()=>await p.e(30).then(p.bind(p,14614)).then((L=>new L._KTXTextureLoader)))),n(".ktx2",(async()=>await p.e(30).then(p.bind(p,14614)).then((L=>new L._KTXTextureLoader))))),L.endsWith(".tga")&&n(".tga",(async()=>await p.e(50).then(p.bind(p,14621)).then((L=>new L._TGATextureLoader)))),L.endsWith(".exr")&&n(".exr",(async()=>await p.e(16).then(p.bind(p,14624)).then((L=>new L._ExrTextureLoader)))));const J=i.get(L);return J?Promise.resolve(J(r)):null}},12060:(L,r,p)=>{p.d(r,{b:()=>j});var J,i=p(11964),n=p(12068);!function(L){L[L.Unknown=0]="Unknown",L[L.Url=1]="Url",L[L.Temp=2]="Temp",L[L.Raw=3]="Raw",L[L.Dynamic=4]="Dynamic",L[L.RenderTarget=5]="RenderTarget",L[L.MultiRenderTarget=6]="MultiRenderTarget",L[L.Cube=7]="Cube",L[L.CubeRaw=8]="CubeRaw",L[L.CubePrefiltered=9]="CubePrefiltered",L[L.Raw3D=10]="Raw3D",L[L.Raw2DArray=11]="Raw2DArray",L[L.DepthStencil=12]="DepthStencil",L[L.CubeRawRGBD=13]="CubeRawRGBD",L[L.Depth=14]="Depth"}(J||(J={}));class j extends n.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(L){this.generateMipMaps=L}get uniqueId(){return this._uniqueId}_setUniqueId(L){this._uniqueId=L}getEngine(){return this._engine}get source(){return this._source}constructor(L,r){let p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new i.c,this.onErrorObservable=new i.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=L,this._source=r,this._uniqueId=j._Counter++,p||(this._hardwareTexture=L._createHardwareTexture())}incrementReferences(){this._references++}updateSize(L,r){let p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,L,r,p),this.width=L,this.height=r,this.depth=p,this.baseWidth=L,this.baseHeight=r,this.baseDepth=p,this._size=L*r*p}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const L=this.onRebuildCallback(this),r=r=>{r._swapAndDie(this,!1),this.isReady=L.isReady};return void(L.isAsync?L.proxy.then(r):r(L.proxy))}let L;switch(this.source){case 2:case 12:case 14:break;case 1:return void(L=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(L=>{L._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:L=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),L._swapAndDie(this,!1),this.isReady=!0;break;case 10:L=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),L._swapAndDie(this,!1),this.isReady=!0;break;case 11:L=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),L._swapAndDie(this,!1),this.isReady=!0;break;case 4:L=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),L._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(L=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{L._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:L=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),L._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return L=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(L=>{L&&L._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(L._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(L){var r;let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(r=this._hardwareTexture)||void 0===r||r.setUsage(L._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),L._hardwareTexture=this._hardwareTexture,p&&(L._isRGBD=this._isRGBD),this._lodTextureHigh&&(L._lodTextureHigh&&L._lodTextureHigh.dispose(),L._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(L._lodTextureMid&&L._lodTextureMid.dispose(),L._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(L._lodTextureLow&&L._lodTextureLow.dispose(),L._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(L._irradianceTexture&&L._irradianceTexture.dispose(),L._irradianceTexture=this._irradianceTexture);const J=this._engine.getLoadedTexturesCache();let i=J.indexOf(this);-1!==i&&J.splice(i,1),i=J.indexOf(L),-1===i&&J.push(L)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}j._Counter=0},12068:(L,r,p)=>{p.d(r,{d:()=>J});class J{get wrapU(){return this._cachedWrapU}set wrapU(L){this._cachedWrapU=L}get wrapV(){return this._cachedWrapV}set wrapV(L){this._cachedWrapV=L}get wrapR(){return this._cachedWrapR}set wrapR(L){this._cachedWrapR=L}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(L){this._cachedAnisotropicFilteringLevel=L}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(L){this._comparisonFunction=L}get useMipMaps(){return this._useMipMaps}set useMipMaps(L){this._useMipMaps=L}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=L,this._cachedWrapV=r,this._cachedWrapR=p,this._cachedAnisotropicFilteringLevel=J,this.samplingMode=i,this._comparisonFunction=n,this}compareSampler(L){return this._cachedWrapU===L._cachedWrapU&&this._cachedWrapV===L._cachedWrapV&&this._cachedWrapR===L._cachedWrapR&&this._cachedAnisotropicFilteringLevel===L._cachedAnisotropicFilteringLevel&&this.samplingMode===L.samplingMode&&this._comparisonFunction===L._comparisonFunction&&this._useMipMaps===L._useMipMaps}}},11979:(L,r,p)=>{p.d(r,{b:()=>n});var J=p(11975);const i=(L,r,p)=>L?L.getClassName&&"Mesh"===L.getClassName()?null:!L.getClassName||"SubMesh"!==L.getClassName()&&"PhysicsBody"!==L.getClassName()?L.clone?L.clone():Array.isArray(L)?L.slice():p&&"object"===typeof L?{...L}:null:L.clone(r):null;class n{static DeepCopy(L,r,p,n){let j=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const z=function(L){const r=[];do{const p=Object.getOwnPropertyNames(L);for(const L of p)-1===r.indexOf(L)&&r.push(L)}while(L=Object.getPrototypeOf(L));return r}(L);for(const C of z){if("_"===C[0]&&(!n||-1===n.indexOf(C)))continue;if(C.endsWith("Observable"))continue;if(p&&-1!==p.indexOf(C))continue;const z=L[C],t=typeof z;if("function"!==t)try{if("object"===t)if(z instanceof Uint8Array)r[C]=Uint8Array.from(z);else if(z instanceof Array){if(r[C]=[],z.length>0)if("object"==typeof z[0])for(let L=0;L<z.length;L++){const p=i(z[L],r,j);-1===r[C].indexOf(p)&&r[C].push(p)}else r[C]=z.slice(0)}else r[C]=i(z,r,j);else r[C]=z}catch(G){J.d.Warn(G.message)}}}}},12016:(L,r,p)=>{p.d(r,{d:()=>J,f:()=>i,h:()=>n});class J extends Error{}J._setPrototypeOf=Object.setPrototypeOf||((L,r)=>(L.__proto__=r,L));const i={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class n extends J{constructor(L,r,p){super(L),this.errorCode=r,this.innerError=p,this.name="RuntimeError",J._setPrototypeOf(this,n.prototype)}}},12014:(L,r,p)=>{p.d(r,{e:()=>a,g:()=>h,i:()=>v,j:()=>A,p:()=>Q,m:()=>c,t:()=>B,u:()=>F,w:()=>e,x:()=>U});var J=p(12004),i=p(11971),n=p(11964);class j{}j.FilesToLoad={};var z=p(12016),G=p(12019),C=p(12025),t=p(12009),E=p(11975),x=p(12032),w=p(12028),g=p(12037);const b=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class c extends z.h{constructor(L,r){super(L,z.f.LoadFileError),this.name="LoadFileError",z.d._setPrototypeOf(this,c.prototype),r instanceof J.b?this.request=r:this.file=r}}class P extends z.h{constructor(L,r){super(L,z.f.RequestFileError),this.request=r,this.name="RequestFileError",z.d._setPrototypeOf(this,P.prototype)}}class O extends z.h{constructor(L,r){super(L,z.f.ReadFileError),this.file=r,this.name="ReadFileError",z.d._setPrototypeOf(this,O.prototype)}}const h={DefaultRetryStrategy:class{static ExponentialBackoff(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(p,J,i)=>0!==J.status||i>=L||-1!==p.indexOf("file:")?-1:Math.pow(2,i)*r}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:L=>L,ScriptBaseUrl:"",ScriptPreprocessUrl:L=>L,CleanUrl:L=>L=L.replace(/#/gm,"%23")},U=(L,r)=>{if((!L||0!==L.indexOf("data:"))&&h.CorsBehavior)if("string"===typeof h.CorsBehavior||h.CorsBehavior instanceof String)r.crossOrigin=h.CorsBehavior;else{const p=h.CorsBehavior(L);p&&(r.crossOrigin=p)}},W={getRequiredSize:null},B=function(L,r,p,i){let n,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",C=arguments.length>5?arguments[5]:void 0,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===E||void 0===E||!E._features.forceBitmapOverHTMLImageElement))return p("LoadImage is only supported in web or BabylonNative environments."),null;let x=!1;L instanceof ArrayBuffer||ArrayBuffer.isView(L)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(n=URL.createObjectURL(new Blob([L],{type:z})),x=!0):n=`data:${z};base64,`+(0,G.m)(L):L instanceof Blob?(n=URL.createObjectURL(L),x=!0):(n=h.CleanUrl(L),n=h.PreprocessUrl(n));const w=r=>{if(p){const J=n||L.toString();p(`Error while trying to load image: ${0===J.indexOf("http")||J.length<=128?J:J.slice(0,128)+"..."}`,r)}};if(null!==E&&void 0!==E&&E._features.forceBitmapOverHTMLImageElement)return Q(n,(J=>{E.createImageBitmap(new Blob([J],{type:z}),{premultiplyAlpha:"none",...C}).then((L=>{r(L),x&&URL.revokeObjectURL(n)})).catch((r=>{p&&p("Error while trying to load image: "+L,r)}))}),void 0,i||void 0,!0,((L,r)=>{w(r)})),null;const g=new Image;if(W.getRequiredSize){const r=W.getRequiredSize(L);r.width&&(g.width=r.width),r.height&&(g.height=r.height)}U(n,g);const b=[],c=()=>{for(const L of b)L.target.removeEventListener(L.name,L.handler);b.length=0};b.push({target:g,name:"load",handler:()=>{c(),r(g),x&&g.src&&URL.revokeObjectURL(g.src)}}),b.push({target:g,name:"error",handler:L=>{c(),w(L),x&&g.src&&URL.revokeObjectURL(g.src)}}),b.push({target:document,name:"securitypolicyviolation",handler:L=>{if(L.blockedURI!==g.src||"fi"===L.disposition)return;c();const r=new Error(`CSP violation of policy ${L.effectiveDirective} ${L.blockedURI}. Current policy is ${L.originalPolicy}`);t.c.UseFallbackTexture=!1,w(r),x&&g.src&&URL.revokeObjectURL(g.src),g.src=""}}),(()=>{for(const L of b)L.target.addEventListener(L.name,L.handler)})();const P="blob:"===n.substring(0,5),O="data:"===n.substring(0,5),B=()=>{P||O||!J.b.IsCustomRequestAvailable?g.src=n:Q(n,((L,r,p)=>{const J=new Blob([L],{type:!z&&p?p:z}),i=URL.createObjectURL(J);x=!0,g.src=i}),void 0,i||void 0,!0,((L,r)=>{w(r)}))},F=()=>{i&&i.loadImage(n,g)};if(!P&&!O&&i&&i.enableTexturesOffline)i.open(F,B);else{if(-1!==n.indexOf("file:")){const L=decodeURIComponent(n.substring(5).toLowerCase());if(j.FilesToLoad[L]&&"undefined"!==typeof URL){try{let r;try{r=URL.createObjectURL(j.FilesToLoad[L])}catch(e){r=URL.createObjectURL(j.FilesToLoad[L])}g.src=r,x=!0}catch(v){g.src=""}return g}}B()}return g},F=(L,r,p,J,i)=>{const j=new FileReader,z={onCompleteObservable:new n.c,abort:()=>j.abort()};return j.onloadend=()=>z.onCompleteObservable.notifyObservers(z),i&&(j.onerror=()=>{i(new O(`Unable to read ${L.name}`,L))}),j.onload=L=>{r(L.target.result)},p&&(j.onprogress=p),J?j.readAsArrayBuffer(L):j.readAsText(L),z},Q=(L,r,p,J,i,G,C)=>{if(L.name)return F(L,r,p,i,G?L=>{G(void 0,L)}:void 0);const t=L;if(-1!==t.indexOf("file:")){let L=decodeURIComponent(t.substring(5).toLowerCase());0===L.indexOf("./")&&(L=L.substring(2));const J=j.FilesToLoad[L];if(J)return F(J,r,p,i,G?L=>G(void 0,new c(L.message,L.file)):void 0)}const{match:w,type:g}=u(t);if(w){const L={onCompleteObservable:new n.c,abort:()=>()=>{}};try{const L=i?a(t):q(t);r(L,void 0,g)}catch(z){G?G(void 0,z):E.d.Error(z.message||"Failed to parse the Data URL")}return x.d.SetImmediate((()=>{L.onCompleteObservable.notifyObservers(L)})),L}return e(t,((L,p)=>{r(L,null===p||void 0===p?void 0:p.responseURL,null===p||void 0===p?void 0:p.getResponseHeader("content-type"))}),p,J,i,G?L=>{G(L.request,new c(L.message,L.request))}:void 0,C)},e=(L,r,p,j,z,G,C)=>{L=h.CleanUrl(L),L=h.PreprocessUrl(L);const t=h.BaseUrl+L;let x=!1;const w={onCompleteObservable:new n.c,abort:()=>x=!0},g=()=>{let L,n=new J.b,j=null;const g=()=>{n&&(p&&n.removeEventListener("progress",p),L&&n.removeEventListener("readystatechange",L),n.removeEventListener("loadend",b))};let b=()=>{g(),w.onCompleteObservable.notifyObservers(w),w.onCompleteObservable.clear(),p=void 0,L=null,b=null,G=void 0,C=void 0,r=void 0};w.abort=()=>{x=!0,b&&b(),n&&n.readyState!==(XMLHttpRequest.DONE||4)&&n.abort(),null!==j&&(clearTimeout(j),j=null),n=null};const c=L=>{const r=L.message||"Unknown error";G&&n?G(new P(r,n)):E.d.Error(r)},O=E=>{if(n){if(n.open("GET",t),C)try{C(n)}catch(w){return void c(w)}z&&(n.responseType="arraybuffer"),p&&n.addEventListener("progress",p),b&&n.addEventListener("loadend",b),L=()=>{if(!x&&n&&n.readyState===(XMLHttpRequest.DONE||4)){if(L&&n.removeEventListener("readystatechange",L),n.status>=200&&n.status<300||0===n.status&&(!(0,i.k)()||y())){const L=z?n.response:n.responseText;if(null!==L){try{r&&r(L,n)}catch(w){c(w)}return}}const p=h.DefaultRetryStrategy;if(p){const L=p(t,n,E);if(-1!==L)return g(),n=new J.b,void(j=setTimeout((()=>O(E+1)),L))}const C=new P("Error status: "+n.status+" "+n.statusText+" - Unable to load "+t,n);G&&G(C)}},n.addEventListener("readystatechange",L),n.send()}};O(0)};if(j&&j.enableSceneOffline){const J=L=>{L&&L.status>400?G&&G(L):g()},i=()=>{j&&j.loadFile(h.BaseUrl+L,(L=>{!x&&r&&r(L),w.onCompleteObservable.notifyObservers(w)}),p?L=>{!x&&p&&p(L)}:void 0,J,z)};j.open(i,J)}else g();return w},v=L=>{const{match:r,type:p}=u(L);if(r)return p||void 0;const J=L.lastIndexOf(".");switch(L.substring(J+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"di":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},y=()=>"undefined"!==typeof location&&"file:"===location.protocol,A=L=>b.test(L),u=L=>{const r=b.exec(L);if(null===r||0===r.length)return{match:!1,type:""};return{match:!0,type:r[0].replace("data:","").replace("base64,","")}};function a(L){return(0,G.c)(L.split(",")[1])}const q=L=>(0,G.g)(L.split(",")[1]);let Z;g.e._FileToolsLoadImage=B,w.c.loadFile=Q,C.n.loadFile=Q;((L,r,p,J,i,n,j,z,G,C)=>{Z={DecodeBase64UrlToBinary:L,DecodeBase64UrlToString:r,DefaultRetryStrategy:p.DefaultRetryStrategy,BaseUrl:p.BaseUrl,CorsBehavior:p.CorsBehavior,PreprocessUrl:p.PreprocessUrl,IsBase64DataUrl:J,IsFileURL:i,LoadFile:n,LoadImage:j,ReadFile:z,RequestFile:G,SetCorsBehavior:C},Object.defineProperty(Z,"DefaultRetryStrategy",{get:function(){return p.DefaultRetryStrategy},set:function(L){p.DefaultRetryStrategy=L}}),Object.defineProperty(Z,"BaseUrl",{get:function(){return p.BaseUrl},set:function(L){p.BaseUrl=L}}),Object.defineProperty(Z,"PreprocessUrl",{get:function(){return p.PreprocessUrl},set:function(L){p.PreprocessUrl=L}}),Object.defineProperty(Z,"CorsBehavior",{get:function(){return p.CorsBehavior},set:function(L){p.CorsBehavior=L}})})(a,q,h,A,y,Q,B,F,e,U)},12091:(L,r,p)=>{function J(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(L=>{const r=16*Math.random()|0;return("x"===L?r:3&r|8).toString(16)}))}p.d(r,{d:()=>J})},12085:(L,r,p)=>{p.d(r,{b:()=>n});var J=p(11975),i=p(12087);class n{static Instantiate(L){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[L])return this.RegisteredExternalClasses[L];const r=(0,i.c)(L);if(r)return r;J.d.Warn(L+" not found, you may have missed an import.");const p=L.split(".");let n=window||this;for(let J=0,i=p.length;J<i;J++)n=n[p[J]];return"function"!==typeof n?null:n}}n.RegisteredExternalClasses={}},11988:(L,r,p)=>{p.d(r,{d:()=>i});var J=p(11971);class i{static get Now(){return(0,J.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12019:(L,r,p)=>{p.d(r,{c:()=>j,g:()=>n,i:()=>J,m:()=>i});const J=L=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(L);let r="";for(let p=0;p<L.byteLength;p++)r+=String.fromCharCode(L[p]);return r},i=L=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let p,J,i,n,j,z,G,C="",t=0;const E=ArrayBuffer.isView(L)?new Uint8Array(L.buffer,L.byteOffset,L.byteLength):new Uint8Array(L);for(;t<E.length;)p=E[t++],J=t<E.length?E[t++]:Number.NaN,i=t<E.length?E[t++]:Number.NaN,n=p>>2,j=(3&p)<<4|J>>4,z=(15&J)<<2|i>>6,G=63&i,isNaN(J)?z=G=64:isNaN(i)&&(G=64),C+=r.charAt(n)+r.charAt(j)+r.charAt(z)+r.charAt(G);return C},n=L=>atob(L),j=L=>{const r=n(L),p=r.length,J=new Uint8Array(new ArrayBuffer(p));for(let i=0;i<p;i++)J[i]=r.charCodeAt(i);return J.buffer}},12098:(L,r,p)=>{function J(L){let r=1;do{r*=2}while(r<L);return r===L}function i(L,r,p){return L*(1-p)+r*p}function n(L){const r=j(L),p=z(L);return r-L>L-p?p:r}function j(L){return L--,L|=L>>1,L|=L>>2,L|=L>>4,L|=L>>8,L|=L>>16,++L}function z(L){return L|=L>>1,L|=L>>2,L|=L>>4,L|=L>>8,(L|=L>>16)-(L>>1)}function G(L,r){let p;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:p=z(L);break;case 2:p=n(L);break;default:p=j(L)}return Math.min(p,r)}p.d(r,{e:()=>z,f:()=>G,h:()=>J,l:()=>i,n:()=>n})},11957:(L,r,p)=>{p.r(r),p.d(r,{AsyncLoop:()=>O,Tools:()=>c,className:()=>P});var J=p(11964),i=p(11971),n=p(11975),j=p(11979),z=p(11988),G=p(11996),C=p(12004),t=p(12009),E=p(12014),x=p(12032),w=p(12085),g=p(12091),b=p(12098);class c{static get BaseUrl(){return E.g.BaseUrl}static set BaseUrl(L){E.g.BaseUrl=L}static get CleanUrl(){return E.g.CleanUrl}static set CleanUrl(L){E.g.CleanUrl=L}static IsAbsoluteUrl(L){return 0===L.indexOf("//")||-1!==L.indexOf("://")&&(-1!==L.indexOf(".")&&(-1!==L.indexOf("/")&&(!(L.indexOf(":")>L.indexOf("/"))&&(L.indexOf("://")<L.indexOf(".")||(0===L.indexOf("data:")||0===L.indexOf("blob:"))))))}static set ScriptBaseUrl(L){E.g.ScriptBaseUrl=L}static get ScriptBaseUrl(){return E.g.ScriptBaseUrl}static set CDNBaseUrl(L){c.ScriptBaseUrl=L,c.AssetBaseUrl=L}static set ScriptPreprocessUrl(L){E.g.ScriptPreprocessUrl=L}static get ScriptPreprocessUrl(){return E.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return E.g.DefaultRetryStrategy}static set DefaultRetryStrategy(L){E.g.DefaultRetryStrategy=L}static get CorsBehavior(){return E.g.CorsBehavior}static set CorsBehavior(L){E.g.CorsBehavior=L}static get UseFallbackTexture(){return t.c.UseFallbackTexture}static set UseFallbackTexture(L){t.c.UseFallbackTexture=L}static get RegisteredExternalClasses(){return w.b.RegisteredExternalClasses}static set RegisteredExternalClasses(L){w.b.RegisteredExternalClasses=L}static get fallbackTexture(){return t.c.FallbackTexture}static set fallbackTexture(L){t.c.FallbackTexture=L}static FetchToRef(L,r,p,J,i,n){const j=4*((Math.abs(L)*p%p|0)+(Math.abs(r)*J%J|0)*p);n.r=i[j]/255,n.g=i[j+1]/255,n.b=i[j+2]/255,n.a=i[j+3]/255}static Mix(L,r,p){return 0}static Instantiate(L){return w.b.Instantiate(L)}static SetImmediate(L){x.d.SetImmediate(L)}static IsExponentOfTwo(L){return!0}static FloatRound(L){return Math.fround(L)}static GetFilename(L){const r=L.lastIndexOf("/");return r<0?L:L.substring(r+1)}static GetFolderPath(L){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const p=L.lastIndexOf("/");return p<0?r?L:"":L.substring(0,p+1)}static ToDegrees(L){return 180*L/Math.PI}static ToRadians(L){return L*Math.PI/180}static SmoothAngleChange(L,r){let p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const J=this.ToRadians(L),i=this.ToRadians(r);return this.ToDegrees(Math.atan2((1-p)*Math.sin(i)+p*Math.sin(J),(1-p)*Math.cos(i)+p*Math.cos(J)))}static MakeArray(L,r){return!0===r||void 0!==L&&null!=L?Array.isArray(L)?L:[L]:null}static GetPointerPrefix(L){return(0,i.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(L,r){(0,E.x)(L,r)}static SetReferrerPolicyBehavior(L,r){r.referrerPolicy=L}static get PreprocessUrl(){return E.g.PreprocessUrl}static set PreprocessUrl(L){E.g.PreprocessUrl=L}static LoadImage(L,r,p,J,i,n){return(0,E.t)(L,r,p,J,i,n)}static LoadFile(L,r,p,J,i,n){return(0,E.p)(L,r,p,J,i,n)}static async LoadFileAsync(L){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((p,J)=>{(0,E.p)(L,(L=>{p(L)}),void 0,void 0,r,((L,r)=>{J(r)}))}))}static GetAssetUrl(L){if(!L)return"";if(c.AssetBaseUrl&&L.startsWith(c._DefaultAssetsUrl)){const r="/"===c.AssetBaseUrl[c.AssetBaseUrl.length-1]?c.AssetBaseUrl.substring(0,c.AssetBaseUrl.length-1):c.AssetBaseUrl;return L.replace(c._DefaultAssetsUrl,r)}return L}static GetBabylonScriptURL(L,r){if(!L)return"";if(c.ScriptBaseUrl&&L.startsWith(c._DefaultCdnUrl)){const r="/"===c.ScriptBaseUrl[c.ScriptBaseUrl.length-1]?c.ScriptBaseUrl.substring(0,c.ScriptBaseUrl.length-1):c.ScriptBaseUrl;L=L.replace(c._DefaultCdnUrl,r)}return L=c.ScriptPreprocessUrl(L),r&&(L=c.GetAbsoluteUrl(L)),L}static LoadBabylonScript(L,r,p,J){L=c.GetBabylonScriptURL(L),c.LoadScript(L,r,p)}static async LoadBabylonScriptAsync(L){return L=c.GetBabylonScriptURL(L),await c.LoadScriptAsync(L)}static LoadScript(L,r,p,J){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(L),r&&r()}catch(G){null===p||void 0===p||p(`Unable to load script '${L}' in worker`,G)}return}if(!(0,i.k)())return void(null===p||void 0===p||p(`Cannot load script '${L}' outside of a window or a worker`));const j=document.getElementsByTagName("head")[0],z=document.createElement("script");n?(z.setAttribute("type","module"),z.innerText=L):(z.setAttribute("type","text/javascript"),z.setAttribute("src",L)),J&&(z.id=J),z.onload=()=>{r&&r()},z.onerror=r=>{p&&p(`Unable to load script '${L}'`,r)},j.appendChild(z)}static async LoadScriptAsync(L,r){return await new Promise(((p,J)=>{this.LoadScript(L,(()=>{p()}),((L,r)=>{J(r||new Error(L))}),r)}))}static ReadFileAsDataURL(L,r,p){const i=new FileReader,n={onCompleteObservable:new J.c,abort:()=>i.abort()};return i.onloadend=()=>{n.onCompleteObservable.notifyObservers(n)},i.onload=L=>{r(L.target.result)},i.onprogress=p,i.readAsDataURL(L),n}static ReadFile(L,r,p,J,i){return(0,E.u)(L,r,p,J,i)}static FileAsURL(L){const r=new Blob([L]);return window.URL.createObjectURL(r)}static Format(L){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return L.toFixed(r)}static DeepCopy(L,r,p,J){j.b.DeepCopy(L,r,p,J)}static IsEmpty(L){for(const r in L)if(Object.prototype.hasOwnProperty.call(L,r))return!1;return!0}static RegisterTopRootEvents(L,r){for(let J=0;J<r.length;J++){const i=r[J];L.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch(p){}}}static UnregisterTopRootEvents(L,r){for(let J=0;J<r.length;J++){const i=r[J];L.removeEventListener(i.name,i.handler);try{L.parent&&L.parent.removeEventListener(i.name,i.handler)}catch(p){}}}static async DumpFramebuffer(L,r,p,J){throw(0,G.d)("DumpTools")}static DumpData(L,r,p,J){throw(0,G.d)("DumpTools")}static async DumpDataAsync(L,r,p){throw(0,G.d)("DumpTools")}static _IsOffScreenCanvas(L){return void 0!==L.convertToBlob}static ToBlob(L,r){let p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",J=arguments.length>3?arguments[3]:void 0;c._IsOffScreenCanvas(L)||L.toBlob||(L.toBlob=function(L,r,p){setTimeout((()=>{const J=atob(this.toDataURL(r,p).split(",")[1]),i=J.length,n=new Uint8Array(i);for(let L=0;L<i;L++)n[L]=J.charCodeAt(L);L(new Blob([n]))}))}),c._IsOffScreenCanvas(L)?L.convertToBlob({type:p,quality:J}).then((L=>r(L))):L.toBlob((function(L){r(L)}),p,J)}static DownloadBlob(L,r){if("download"in document.createElement("a")){if(!r){const L=new Date;r="screenshot_"+((L.getFullYear()+"-"+(L.getMonth()+1)).slice(2)+"-"+L.getDate()+"_"+L.getHours()+"-"+("0"+L.getMinutes()).slice(-2))+".png"}c.Download(L,r)}else if(L&&"undefined"!==typeof URL){const r=URL.createObjectURL(L),p=window.open("");if(!p)return;const J=p.document.createElement("img");J.onload=function(){URL.revokeObjectURL(r)},J.src=r,p.document.body.appendChild(J)}}static EncodeScreenshotCanvasData(L,r){let p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",J=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if("string"!==typeof J&&r){if(r){if(c._IsOffScreenCanvas(L))return void L.convertToBlob({type:p,quality:i}).then((L=>{const p=new FileReader;p.readAsDataURL(L),p.onloadend=()=>{const L=p.result;r(L)}}));const J=L.toDataURL(p,i);r(J)}}else this.ToBlob(L,(function(L){L&&c.DownloadBlob(L,J),r&&r("")}),p,i)}static Download(L,r){if("undefined"===typeof URL)return;const p=window.URL.createObjectURL(L),J=document.createElement("a");document.body.appendChild(J),J.style.display="none",J.href=p,J.download=r,J.addEventListener("click",(()=>{J.parentElement&&J.parentElement.removeChild(J)})),J.click(),window.URL.revokeObjectURL(p)}static BackCompatCameraNoPreventDefault(L){return"boolean"===typeof L[0]?L[0]:"boolean"===typeof L[1]&&L[1]}static CreateScreenshot(L,r,p,J){throw(0,G.d)("ScreenshotTools")}static async CreateScreenshotAsync(L,r,p){throw(0,G.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(L,r,p,J){throw(0,G.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(L,r,p){throw(0,G.d)("ScreenshotTools")}static RandomId(){return(0,g.d)()}static IsBase64(L){return(0,E.j)(L)}static DecodeBase64(L){return(0,E.e)(L)}static get errorsCount(){return n.d.errorsCount}static Log(L){n.d.Log(L)}static Warn(L){n.d.Warn(L)}static Error(L){n.d.Error(L)}static get LogCache(){return n.d.LogCache}static ClearLogCache(){n.d.ClearLogCache()}static set LogLevels(L){n.d.LogLevels=L}static set PerformanceLogLevel(L){return(L&c.PerformanceUserMarkLogLevel)===c.PerformanceUserMarkLogLevel?(c.StartPerformanceCounter=c._StartUserMark,void(c.EndPerformanceCounter=c._EndUserMark)):(L&c.PerformanceConsoleLogLevel)===c.PerformanceConsoleLogLevel?(c.StartPerformanceCounter=c._StartPerformanceConsole,void(c.EndPerformanceCounter=c._EndPerformanceConsole)):(c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,void(c.EndPerformanceCounter=c._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(L,r){}static _EndPerformanceCounterDisabled(L,r){}static _StartUserMark(L){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c._Performance){if(!(0,i.k)())return;c._Performance=window.performance}r&&c._Performance.mark&&c._Performance.mark(L+"-Begin")}static _EndUserMark(L){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&c._Performance.mark&&(c._Performance.mark(L+"-End"),c._Performance.measure(L,L+"-Begin",L+"-End"))}static _StartPerformanceConsole(L){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&(c._StartUserMark(L,r),console.time&&console.time(L))}static _EndPerformanceConsole(L){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&(c._EndUserMark(L,r),console.timeEnd(L))}static get Now(){return z.d.Now}static GetClassName(L){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=null;if(!r&&L.getClassName)p=L.getClassName();else{if(L instanceof Object){p=(r?L:Object.getPrototypeOf(L)).constructor.__bjsclassName__}p||(p=typeof L)}return p}static First(L,r){for(const p of L)if(r(p))return p;return null}static getFullClassName(L){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=null,J=null;if(!r&&L.getClassName)p=L.getClassName();else{if(L instanceof Object){const i=r?L:Object.getPrototypeOf(L);p=i.constructor.__bjsclassName__,J=i.constructor.__bjsmoduleName__}p||(p=typeof L)}return p?(null!=J?J+".":"")+p:null}static async DelayAsync(L){await new Promise((r=>{setTimeout((()=>{r()}),L)}))}static IsSafari(){return!!(0,i.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function P(L,r){return p=>{p.__bjsclassName__=L,p.__bjsmoduleName__=null!=r?r:null}}c.AssetBaseUrl="",c.UseCustomRequestHeaders=!1,c.CustomRequestHeaders=C.b.CustomRequestHeaders,c.GetDOMTextContent=i.b,c._DefaultCdnUrl="https://cdn.babylonjs.com",c._DefaultAssetsUrl="https://assets.babylonjs.com/core",c.GetAbsoluteUrl="object"===typeof document?L=>{const r=document.createElement("a");return r.href=L,r.href}:"function"===typeof URL&&"object"===typeof location?L=>new URL(L,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},c.NoneLogLevel=n.d.NoneLogLevel,c.MessageLogLevel=n.d.MessageLogLevel,c.WarningLogLevel=n.d.WarningLogLevel,c.ErrorLogLevel=n.d.ErrorLogLevel,c.AllLogLevel=n.d.AllLogLevel,c.IsWindowObjectExist=i.k,c.PerformanceNoneLogLevel=0,c.PerformanceUserMarkLogLevel=1,c.PerformanceConsoleLogLevel=2,c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,c.EndPerformanceCounter=c._EndPerformanceCounterDisabled;class O{constructor(L,r,p){let J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=L,this.index=J-1,this._done=!1,this._fn=r,this._successCallback=p}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(L,r,p){const J=new O(L,r,p,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return J.executeNext(),J}static SyncAsyncForLoop(L,r,p,J,i){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return O.Run(Math.ceil(L/r),(J=>{i&&i()?J.breakLoop():setTimeout((()=>{for(let n=0;n<r;++n){const j=J.index*r+n;if(j>=L)break;if(p(j),i&&i()){J.breakLoop();break}}J.executeNext()}),n)}),J)}}c.Mix=b.l,c.IsExponentOfTwo=b.h,t.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12087:(L,r,p)=>{p.d(r,{c:()=>n,e:()=>i});const J={};function i(L,r){J[L]=r}function n(L){return J[L]}},12004:(L,r,p)=>{p.d(r,{b:()=>J});class J{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(J.CustomRequestHeaders).length>0||J.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const L in J.CustomRequestHeaders){const r=J.CustomRequestHeaders[L];r&&this._xhr.setRequestHeader(L,r)}}_shouldSkipRequestModifications(L){return J.SkipRequestModificationForBabylonCDN&&(L.includes("preview.babylonjs.com")||L.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(L){this._xhr.onprogress=L}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(L){this._xhr.responseType=L}get timeout(){return this._xhr.timeout}set timeout(L){this._xhr.timeout=L}addEventListener(L,r,p){this._xhr.addEventListener(L,r,p)}removeEventListener(L,r,p){this._xhr.removeEventListener(L,r,p)}abort(){this._xhr.abort()}send(L){J.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(L)}open(L,r){for(const p of J.CustomRequestModifiers){if(this._shouldSkipRequestModifications(r))return;r=p(this._xhr,r)||r}r=(r=r.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=r,this._xhr.open(L,r,!0)}setRequestHeader(L,r){this._xhr.setRequestHeader(L,r)}getResponseHeader(L){return this._xhr.getResponseHeader(L)}}J.CustomRequestHeaders={},J.CustomRequestModifiers=new Array,J.SkipRequestModificationForBabylonCDN=!0}}]);