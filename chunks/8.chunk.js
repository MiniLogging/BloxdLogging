"use strict";(self["7c63p8lin4r"]=self["7c63p8lin4r"]||[]).push([[8],{12827:(z,u,U)=>{U.d(u,{b:()=>T});var J=U(12797),v=U(12760),f=U(12829),g=U(12850),w=U(12777);class P{constructor(){let z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,z&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(z){this._zOffset!==z&&(this._zOffset=z,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(z){this._zOffsetUnits!==z&&(this._zOffsetUnits=z,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(z){this._cullFace!==z&&(this._cullFace=z,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(z){this._cull!==z&&(this._cull=z,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(z){this._depthFunc!==z&&(this._depthFunc=z,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(z){this._depthMask!==z&&(this._depthMask=z,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(z){this._depthTest!==z&&(this._depthTest=z,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(z){this._frontFace!==z&&(this._frontFace=z,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(z){this.isDirty&&(this._isCullDirty&&(this.cull?z.enable(z.CULL_FACE):z.disable(z.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(z.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(z.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?z.enable(z.DEPTH_TEST):z.disable(z.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(z.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(z.enable(z.POLYGON_OFFSET_FILL),z.polygonOffset(this.zOffset,this.zOffsetUnits)):z.disable(z.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(z.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class R{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(z){this._func!==z&&(this._func=z,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(z){this._funcRef!==z&&(this._funcRef=z,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(z){this._funcMask!==z&&(this._funcMask=z,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(z){this._opStencilFail!==z&&(this._opStencilFail=z,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(z){this._opDepthFail!==z&&(this._opDepthFail=z,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(z){this._opStencilDepthPass!==z&&(this._opStencilDepthPass=z,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(z){this._mask!==z&&(this._mask=z,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(z){this._enabled!==z&&(this._enabled=z,this._isStencilTestDirty=!0)}constructor(){let z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,z&&this.reset()}reset(){var z;this.stencilMaterial=void 0,null===(z=this.stencilGlobal)||void 0===z||z.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(z){var u;if(!z)return;const U=!this.useStencilGlobalOnly&&!(null===(u=this.stencilMaterial)||void 0===u||!u.enabled);this.enabled=U?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=U?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=U?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=U?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=U?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=U?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=U?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=U?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?z.enable(z.STENCIL_TEST):z.disable(z.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(z.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(z.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(z.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class S{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=S.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=S.KEEP,this.opDepthFail=S.KEEP,this.opStencilDepthPass=S.REPLACE}get stencilFunc(){return this.func}set stencilFunc(z){this.func=z}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(z){this.funcRef=z}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(z){this.funcMask=z}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(z){this.opStencilFail=z}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(z){this.opDepthFail=z}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(z){this.opStencilDepthPass=z}get stencilMask(){return this.mask}set stencilMask(z){this.mask=z}get stencilTest(){return this.enabled}set stencilTest(z){this.enabled=z}}S.ALWAYS=519,S.KEEP=7680,S.REPLACE=7681;class d{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(z){this._alphaBlend!==z&&(this._alphaBlend=z,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(z,u,U,J){this._blendConstants[0]===z&&this._blendConstants[1]===u&&this._blendConstants[2]===U&&this._blendConstants[3]===J||(this._blendConstants[0]=z,this._blendConstants[1]=u,this._blendConstants[2]=U,this._blendConstants[3]=J,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(z,u,U,J){this._blendFunctionParameters[0]===z&&this._blendFunctionParameters[1]===u&&this._blendFunctionParameters[2]===U&&this._blendFunctionParameters[3]===J||(this._blendFunctionParameters[0]=z,this._blendFunctionParameters[1]=u,this._blendFunctionParameters[2]=U,this._blendFunctionParameters[3]=J,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(z,u){this._blendEquationParameters[0]===z&&this._blendEquationParameters[1]===u||(this._blendEquationParameters[0]=z,this._blendEquationParameters[1]=u,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(z){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?z.enable(z.BLEND):z.disable(z.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(z.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(z.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(z.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var mz=U(12782),Z=U(12853),A=U(12758),E=U(12756),C=U(12817),r=U(12865);function M(z,u){if((0,A.i)()){const{requestAnimationFrame:U}=u||window;if("function"===typeof U)return U(z)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(z);return setTimeout(z,16)}class T{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(z){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get df(){return this._useReverseDepthBuffer}set df(z){z!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=z,this._depthCullingState.depthFunc=z?518:515)}setColorWrite(z){z!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=z)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(z){if(z)return this.isNDCHalfZRange?z.IS_NDC_HALF_ZRANGE="":delete z.IS_NDC_HALF_ZRANGE,this.df?z.USE_REVERSE_DEPTHBUFFER="":delete z.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?z.USE_EXACT_SRGB_CONVERSIONS="":delete z.USE_EXACT_SRGB_CONVERSIONS);{let z="";return this.isNDCHalfZRange&&(z+="#define IS_NDC_HALF_ZRANGE"),this.df&&(z&&(z+="\n"),z+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(z&&(z+="\n"),z+="#define USE_EXACT_SRGB_CONVERSIONS"),z}}_rebuildInternalTextures(){const z=this._internalTexturesCache.slice();for(const u of z)u._rebuild()}_rebuildRenderTargetWrappers(){const z=this._renderTargetWrapperCache.slice();for(const u of z)u._rebuild()}_rebuildEffects(){for(const z in this._compiledEffects){const u=this._compiledEffects[z];u._pipelineContext=null,u._prepareEffect()}f.Effect.ResetCache()}_rebuildGraphicsResources(){var z;this.wipeCaches(!0),this._rebuildEffects(),null===(z=this._rebuildComputeEffects)||void 0===z||z.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){v.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(z){setTimeout((()=>{this._clearEmptyResources();const u=this._depthCullingState.depthTest,U=this._depthCullingState.depthFunc,J=this._depthCullingState.depthMask,v=this._stencilState.stencilTest;z(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=u,this._depthCullingState.depthFunc=U,this._depthCullingState.depthMask=J,this._stencilState.stencilTest=v,this._flagContextRestored()}),0)}get S(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(z){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(z){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const z=new Uint8Array(4),u=[z,z,z,z,z,z];this._emptyCubeTexture=this.createRawCubeTexture(u,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(z){if(!z)return this._activeRenderLoops.length=0,void this._cancelFrame();const u=this._activeRenderLoops.indexOf(z);u>=0&&(this._activeRenderLoops.splice(u,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const z=this._frameHandler;if(this._frameHandler=0,(0,A.i)()){const{cancelAnimationFrame:u}=this.getHostWindow()||window;if("function"===typeof u)return u(z)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(z);return clearTimeout(z)}}rf(){this.onBeginFrameObservable.notifyObservers(this)}Tf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(z){this._maxFPS=z,void 0!==z&&(this._minFrameTime=z<=0?Number.MAX_VALUE:1e3/z)}_isOverFrameTime(z){if(!z||void 0===this._maxFPS)return!1;const u=z-this._lastFrameTime;return this._lastFrameTime=z,this._renderAccumulator+=u,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(z){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(z)){let z=!0;(this.S||!this.renderEvenInBackground&&this._windowIsBackground)&&(z=!1),z&&(this.rf(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Tf())}}_renderLoop(z){this._processFrame(z),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let z=0;z<this._activeRenderLoops.length;z++){(0,this._activeRenderLoops[z])()}}_renderViews(){return!1}_queueNewFrame(z,u){return M(z,u)}runRenderLoop(z){-1===this._activeRenderLoops.indexOf(z)&&(this._activeRenderLoops.push(z),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(z){this._depthCullingState.depthTest=z}setZOffset(z){this._depthCullingState.zOffset=this.df?-z:z}getZOffset(){const z=this._depthCullingState.zOffset;return this.df?-z:z}setZOffsetUnits(z){this._depthCullingState.zOffsetUnits=this.df?-z:z}getZOffsetUnits(){const z=this._depthCullingState.zOffsetUnits;return this.df?-z:z}getHostWindow(){return(0,A.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(z){this._compatibilityMode=!0}_rebuildTextures(){for(const z of this.scenes)z._rebuildTextures();for(const z of this._virtualScenes)z._rebuildTextures()}_releaseRenderTargetWrapper(z){const u=this._renderTargetWrapperCache.indexOf(z);-1!==u&&this._renderTargetWrapperCache.splice(u,1)}get currentViewport(){return this._cachedViewport}setViewport(z,u,U){const J=u||this.getRenderWidth(),v=U||this.getRenderHeight(),f=z.x||0,g=z.y||0;this._cachedViewport=z,this._viewport(f*J,g*v,J*z.width,v*z.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(z){return new Path2D(z)}get description(){let z=this.name+this.version;return this._caps.parallelShaderCompile&&(z+=" - Parallel shader compilation"),z}_createTextureBase(z,u,U,f){let g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,R=arguments.length>7?arguments[7]:void 0,S=arguments.length>8?arguments[8]:void 0,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,mz=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,A=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,C=arguments.length>13?arguments[13]:void 0,M=arguments.length>14?arguments[14]:void 0,X=arguments.length>15?arguments[15]:void 0;const h="data:"===(z=z||"").substring(0,5),t="blob:"===z.substring(0,5),V=h&&-1!==z.indexOf(";base64,"),L=mz||new Z.c(this,1);L!==mz&&(L.label=z.substring(0,60));const O=z;!this._transformTextureUrl||V||mz||d||(z=this._transformTextureUrl(z)),O!==z&&(L._originalUrl=O);const x=z.lastIndexOf(".");let Q=E||(x>-1?z.substring(x).toLowerCase():"");Q.indexOf("?")>-1&&(Q=Q.split("?")[0]);const K=(0,r.b)(Q,C);f&&f.addPendingData(L),L.url=z,L.generateMipMaps=!u,L.samplingMode=g,L.invertY=U,L._useSRGBBuffer=this._getUseSRGBBuffer(!!X,u),this._doNotHandleContextLost||(L._buffer=d);let Y=null;w&&!mz&&(Y=L.onLoadedObservable.add(w)),mz||this._internalTexturesCache.push(L);const p=(U,mz)=>{f&&f.removePendingData(L),z===O?(Y&&L.onLoadedObservable.remove(Y),J.e.UseFallbackTexture&&z!==J.e.FallbackTexture&&this._createTextureBase(J.e.FallbackTexture,u,L.invertY,f,g,null,P,R,S,d,L),U=(U||"Unknown error")+(J.e.UseFallbackTexture?" - Fallback texture was used":""),L.onErrorObservable.notifyObservers({message:U,exception:mz}),P&&P(U,mz)):(v.d.Warn("Failed to load ".concat(z,", falling back to ").concat(O)),this._createTextureBase(O,u,L.invertY,f,g,w,P,R,S,d,L,A,E,C,M,X))};if(K){const u=async z=>{(await K).loadData(z,L,((z,u,U,J,v,w)=>{w?p("TextureLoader failed to load data"):R(L,Q,f,{width:z,height:u},L.invertY,!U,J,(()=>(v(),!1)),g)}),M)};d?d instanceof ArrayBuffer?u(new Uint8Array(d)):ArrayBuffer.isView(d)?u(d):P&&P("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(z,(z=>{u(new Uint8Array(z))}),void 0,f?f.offlineProvider:void 0,!0,((z,u)=>{p("Unable to load "+(z&&z.responseURL,u))}))}else{const U=z=>{t&&!this._doNotHandleContextLost&&(L._buffer=z),R(L,Q,f,z,L.invertY,u,!1,S,g)};!h||V?d&&("string"===typeof d.decoding||d.close)?U(d):T._FileToolsLoadImage(z||"",U,p,f?f.offlineProvider:null,C,L.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof d||d instanceof ArrayBuffer||ArrayBuffer.isView(d)||d instanceof Blob?T._FileToolsLoadImage(d,U,p,f?f.offlineProvider:null,C,L.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):d&&U(d)}return L}_rebuildBuffers(){for(const z of this._uniformBuffers)z._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,A.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const z in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,z)&&(this._boundTexturesCache[z]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(z){this._name=z}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(z){this._hardwareScalingLevel=z,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(z){this._doNotHandleContextLost=z}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(z,u,U){var v,f,mz,Z,C,r,M,T,X,h,t;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new P,this._stencilStateComposer=new R,this._stencilState=new S,this._alphaState=new d,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.e,this.onCanvasFocusObservable=new E.e,this.onNewSceneAddedObservable=new E.e,this.onResizeObservable=new E.e,this.onCanvasPointerOutObservable=new E.e,this.onEffectErrorObservable=new E.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=z=>this._renderLoop(z),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.e,this.onAfterShaderCompilationObservable=new E.e,this.onBeginFrameObservable=new E.e,this.onEndFrameObservable=new E.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.e,this.onContextRestoredObservable=new E.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Xf=new E.e,this.onReleaseEffectsObservable=new E.e,J.e.Instances.push(this),this.startTime=w.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,g.e.SetMatrixPrecision(!!u.useHighPrecisionMatrix),(0,A.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=null!==(v=U)&&void 0!==v&&v,u.antialias=null!==z&&void 0!==z?z:u.antialias,u.deterministicLockstep=null!==(f=u.deterministicLockstep)&&void 0!==f&&f,u.lockstepMaxSteps=null!==(mz=u.lockstepMaxSteps)&&void 0!==mz?mz:4,u.timeStep=null!==(Z=u.timeStep)&&void 0!==Z?Z:1/60,u.tf=null===(C=u.tf)||void 0===C||C,this._audioContext=null!==(r=null===(M=u.audioEngineOptions)||void 0===M?void 0:M.audioContext)&&void 0!==r?r:null,this._audioDestination=null!==(T=null===(X=u.audioEngineOptions)||void 0===X?void 0:X.audioDestination)&&void 0!==T?T:null,this.premultipliedAlpha=null===(h=u.premultipliedAlpha)||void 0===h||h,this._doNotHandleContextLost=!!u.doNotHandleContextLost,this._isStencilEnable=!!u.tf,this.useExactSrgbConversions=null!==(t=u.useExactSrgbConversions)&&void 0!==t&&t;const V=(0,A.i)()&&window.devicePixelRatio||1,L=u.limitDeviceRatio||V;U=U||u.adaptToDeviceRatio||!1,this._hardwareScalingLevel=U?1/Math.min(L,V):1,this._lastDevicePixelRatio=V,this._creationOptions=u}resize(){let z,u,U=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const z=(0,A.i)()&&window.devicePixelRatio||1,u=this._lastDevicePixelRatio/z;this._lastDevicePixelRatio=z,this._hardwareScalingLevel*=u}if((0,A.i)()&&(0,A.d)())if(this._renderingCanvas){var J,v;const U=null===(J=(v=this._renderingCanvas).getBoundingClientRect)||void 0===J?void 0:J.call(v);z=this._renderingCanvas.clientWidth||(null===U||void 0===U?void 0:U.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,u=this._renderingCanvas.clientHeight||(null===U||void 0===U?void 0:U.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else z=window.innerWidth,u=window.innerHeight;else z=this._renderingCanvas?this._renderingCanvas.width:100,u=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(z/this._hardwareScalingLevel,u/this._hardwareScalingLevel,U)}setSize(z,u){let U=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(z|=0,u|=0,!U&&this._renderingCanvas.width===z&&this._renderingCanvas.height===u)return!1;if(this._renderingCanvas.width=z,this._renderingCanvas.height=u,this.scenes){for(let z=0;z<this.scenes.length;z++){const u=this.scenes[z];for(let z=0;z<u.cameras.length;z++){u.cameras[z]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(z,u,U,J,v,f,g,w,P,R,S){throw(0,mz.c)("engine.rawTexture")}createRawCubeTexture(z,u,U,J,v,f,g,w){throw(0,mz.c)("engine.rawTexture")}createRawTexture3D(z,u,U,J,v,f,g,w,P,R,S){throw(0,mz.c)("engine.rawTexture")}createRawTexture2DArray(z,u,U,J,v,f,g,w,P,R,S){throw(0,mz.c)("engine.rawTexture")}_sharedInit(z){this._renderingCanvas=z}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const z=navigator.userAgent;this.hostInformation.isMobile=-1!==z.indexOf("Mobile")||-1!==z.indexOf("Mac")&&(0,A.d)()&&"ontouchend"in document},this._checkForMobile(),(0,A.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(z){return document.createElement("video")}_reportDrawCall(){var z;let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(z=this._drawCalls)||void 0===z||z.addCount(u,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(z,u){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(z,u){return createImageBitmap(z,u)}resizeImageBitmap(z,u,U){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(z){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(z,u){if("undefined"===typeof document)return new OffscreenCanvas(z,u);const U=document.createElement("canvas");return U.width=z,U.height=u,U}createCanvas(z,u){return T._CreateCanvas(z,u)}static _FileToolsLoadImage(z,u,U,J,v,f,g){throw(0,mz.c)("FileTools")}_loadFile(z,u,U,J,v,f){const g=(0,C.k)(z,u,U,J,v,f);return this._activeRequests.push(g),g.onCompleteObservable.add((()=>{const z=this._activeRequests.indexOf(g);-1!==z&&this._activeRequests.splice(z,1)})),g}static _FileToolsLoadFile(z,u,U,J,v,f){if(C.e.loadFile)return C.e.loadFile(z,u,U,J,v,f);throw(0,mz.c)("FileTools")}dispose(){var z;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(z=this.releaseComputeEffects)||void 0===z||z.call(this),f.Effect.ResetCache();for(const U of this._activeRequests)U.abort();this._boundRenderFunction=null,this.Xf.notifyObservers(this),this.Xf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,A.i)()&&window.removeEventListener("resize",this._checkForMobile);const u=J.e.Instances.indexOf(this);u>=0&&J.e.Instances.splice(u,1),J.e.Instances.length||(J.e.OnEnginesDisposedObservable.notifyObservers(this),J.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(z){throw(0,mz.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(z,u){for(let U=0;U<J.e.Instances.length;U++){const v=J.e.Instances[U];for(let U=0;U<v.scenes.length;U++)v.scenes[U].markAllMaterialsAsDirty(z,u)}}}T._RenderPassIdCounter=0,T._RescalePostProcessFactory=null,T.CollisionsEpsilon=.001,T.QueueNewFrame=M},12797:(z,u,U)=>{U.d(u,{e:()=>v});var J=U(12756);class v{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}v.Instances=[],v.OnEnginesDisposedObservable=new J.e,v._LastCreatedScene=null,v.UseFallbackTexture=!0,v.FallbackTexture=""},12850:(z,u,U)=>{U.d(u,{e:()=>J});class J{static SetMatrixPrecision(z){if(J.MatrixTrackPrecisionChange=!1,z&&!J.MatrixUse64Bits&&J.MatrixTrackedMatrices)for(let u=0;u<J.MatrixTrackedMatrices.length;++u){const z=J.MatrixTrackedMatrices[u],U=z.Lf;z.Lf=new Array(16);for(let u=0;u<16;++u)z.Lf[u]=U[u]}J.MatrixUse64Bits=z,J.MatrixCurrentType=J.MatrixUse64Bits?Array:Float32Array,J.MatrixTrackedMatrices=null}}J.MatrixUse64Bits=!1,J.MatrixTrackPrecisionChange=!0,J.MatrixCurrentType=Float32Array,J.MatrixTrackedMatrices=[]},12865:(z,u,U)=>{U.d(u,{b:()=>g});var J=U(12760);const v=new Map;function f(z,u){(function(z){return v.delete(z)})(z)&&J.d.Warn("Extension with the name '".concat(z,"' already exists")),v.set(z,u)}function g(z,u){"image/ktx"!==u&&"image/ktx2"!==u||(z=".ktx"),v.has(z)||(z.endsWith(".ies")&&f(".ies",(async()=>await U.e(15).then(U.bind(U,14974)).then((z=>new z._IESTextureLoader)))),z.endsWith(".dds")&&f(".dds",(async()=>await Promise.all([U.e(14),U.e(17),U.e(13),U.e(19),U.e(18),U.e(28)]).then(U.bind(U,14983)).then((z=>new z._DDSTextureLoader)))),z.endsWith(".basis")&&f(".basis",(async()=>await Promise.all([U.e(14),U.e(17),U.e(13),U.e(47)]).then(U.bind(U,14999)).then((z=>new z._BasisTextureLoader)))),z.endsWith(".env")&&f(".env",(async()=>await Promise.all([U.e(14),U.e(17),U.e(13),U.e(19),U.e(18),U.e(23),U.e(21),U.e(45),U.e(48)]).then(U.bind(U,15005)).then((z=>new z._ENVTextureLoader)))),z.endsWith(".hdr")&&f(".hdr",(async()=>await Promise.all([U.e(14),U.e(49)]).then(U.bind(U,15011)).then((z=>new z._HDRTextureLoader)))),(z.endsWith(".ktx")||z.endsWith(".ktx2"))&&(f(".ktx",(async()=>await U.e(30).then(U.bind(U,15017)).then((z=>new z._KTXTextureLoader)))),f(".ktx2",(async()=>await U.e(30).then(U.bind(U,15017)).then((z=>new z._KTXTextureLoader))))),z.endsWith(".tga")&&f(".tga",(async()=>await U.e(50).then(U.bind(U,15020)).then((z=>new z._TGATextureLoader)))),z.endsWith(".exr")&&f(".exr",(async()=>await U.e(16).then(U.bind(U,15025)).then((z=>new z._ExrTextureLoader)))));const J=v.get(z);return J?Promise.resolve(J(u)):null}},12853:(z,u,U)=>{U.d(u,{c:()=>g});var J,v=U(12756),f=U(12859);!function(z){z[z.Unknown=0]="Unknown",z[z.Url=1]="Url",z[z.Temp=2]="Temp",z[z.Raw=3]="Raw",z[z.Dynamic=4]="Dynamic",z[z.RenderTarget=5]="RenderTarget",z[z.MultiRenderTarget=6]="MultiRenderTarget",z[z.Cube=7]="Cube",z[z.CubeRaw=8]="CubeRaw",z[z.CubePrefiltered=9]="CubePrefiltered",z[z.Raw3D=10]="Raw3D",z[z.Raw2DArray=11]="Raw2DArray",z[z.DepthStencil=12]="DepthStencil",z[z.CubeRawRGBD=13]="CubeRawRGBD",z[z.Depth=14]="Depth"}(J||(J={}));class g extends f.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(z){this.generateMipMaps=z}get uniqueId(){return this._uniqueId}_setUniqueId(z){this._uniqueId=z}getEngine(){return this._engine}get source(){return this._source}constructor(z,u){let U=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new v.e,this.onErrorObservable=new v.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=z,this._source=u,this._uniqueId=g._Counter++,U||(this._hardwareTexture=z._createHardwareTexture())}incrementReferences(){this._references++}updateSize(z,u){let U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,z,u,U),this.width=z,this.height=u,this.depth=U,this.baseWidth=z,this.baseHeight=u,this.baseDepth=U,this._size=z*u*U}_rebuild(){var z,u;if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const z=this.onRebuildCallback(this),u=u=>{u._swapAndDie(this,!1),this.isReady=z.isReady};return void(z.isAsync?z.proxy.then(u):u(z.proxy))}let U;switch(this.source){case 2:case 12:case 14:break;case 1:return void(U=this._engine.createTexture(null!==(z=this._originalUrl)&&void 0!==z?z:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(z=>{z._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:U=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),U._swapAndDie(this,!1),this.isReady=!0;break;case 10:U=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),U._swapAndDie(this,!1),this.isReady=!0;break;case 11:U=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),U._swapAndDie(this,!1),this.isReady=!0;break;case 4:U=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),U._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(U=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{U._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:U=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,null!==(u=this._originalFormat)&&void 0!==u?u:this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),U._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return U=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(z=>{z&&z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(U._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(z){var u;let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(u=this._hardwareTexture)||void 0===u||u.setUsage(z._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),z._hardwareTexture=this._hardwareTexture,U&&(z._isRGBD=this._isRGBD),this._lodTextureHigh&&(z._lodTextureHigh&&z._lodTextureHigh.dispose(),z._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(z._lodTextureMid&&z._lodTextureMid.dispose(),z._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(z._lodTextureLow&&z._lodTextureLow.dispose(),z._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(z._irradianceTexture&&z._irradianceTexture.dispose(),z._irradianceTexture=this._irradianceTexture);const J=this._engine.getLoadedTexturesCache();let v=J.indexOf(this);-1!==v&&J.splice(v,1),v=J.indexOf(z),-1===v&&J.push(z)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}g._Counter=0},12859:(z,u,U)=>{U.d(u,{c:()=>J});class J{get wrapU(){return this._cachedWrapU}set wrapU(z){this._cachedWrapU=z}get wrapV(){return this._cachedWrapV}set wrapV(z){this._cachedWrapV=z}get wrapR(){return this._cachedWrapR}set wrapR(z){this._cachedWrapR=z}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(z){this._cachedAnisotropicFilteringLevel=z}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(z){this._comparisonFunction=z}get useMipMaps(){return this._useMipMaps}set useMipMaps(z){this._useMipMaps=z}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=z,this._cachedWrapV=u,this._cachedWrapR=U,this._cachedAnisotropicFilteringLevel=J,this.samplingMode=v,this._comparisonFunction=f,this}compareSampler(z){return this._cachedWrapU===z._cachedWrapU&&this._cachedWrapV===z._cachedWrapV&&this._cachedWrapR===z._cachedWrapR&&this._cachedAnisotropicFilteringLevel===z._cachedAnisotropicFilteringLevel&&this.samplingMode===z.samplingMode&&this._comparisonFunction===z._comparisonFunction&&this._useMipMaps===z._useMipMaps}}},12768:(z,u,U)=>{U.d(u,{c:()=>g});var J=U(21),v=U(12760);const f=(z,u,U)=>z?z.getClassName&&"Mesh"===z.getClassName()?null:!z.getClassName||"SubMesh"!==z.getClassName()&&"PhysicsBody"!==z.getClassName()?z.clone?z.clone():Array.isArray(z)?z.slice():U&&"object"===typeof z?(0,J.e)({},z):null:z.clone(u):null;class g{static DeepCopy(z,u,U,J){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const w=function(z){const u=[];do{const U=Object.getOwnPropertyNames(z);for(const z of U)-1===u.indexOf(z)&&u.push(z)}while(z=Object.getPrototypeOf(z));return u}(z);for(const R of w){if("_"===R[0]&&(!J||-1===J.indexOf(R)))continue;if(R.endsWith("Observable"))continue;if(U&&-1!==U.indexOf(R))continue;const w=z[R],S=typeof w;if("function"!==S)try{if("object"===S)if(w instanceof Uint8Array)u[R]=Uint8Array.from(w);else if(w instanceof Array){if(u[R]=[],w.length>0)if("object"==typeof w[0])for(let z=0;z<w.length;z++){const U=f(w[z],u,g);-1===u[R].indexOf(U)&&u[R].push(U)}else u[R]=w.slice(0)}else u[R]=f(w,u,g);else u[R]=w}catch(P){v.d.Warn(P.message)}}}}},12806:(z,u,U)=>{U.d(u,{b:()=>J,d:()=>v,g:()=>f});class J extends Error{}J._setPrototypeOf=Object.setPrototypeOf||((z,u)=>(z.__proto__=u,z));const v={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class f extends J{constructor(z,u,U){super(z),this.errorCode=u,this.innerError=U,this.name="RuntimeError",J._setPrototypeOf(this,f.prototype)}}},12800:(z,u,U)=>{U.d(u,{b:()=>N,c:()=>X,e:()=>Q,i:()=>Y,n:()=>O,l:()=>r,r:()=>V,s:()=>L,t:()=>x,u:()=>h});var J=U(21),v=U(12790),f=U(12758),g=U(12756);class w{}w.FilesToLoad={};var P=U(12806),R=U(12809),S=U(12811),d=U(12797),mz=U(12760),Z=U(12825),A=U(12817),E=U(12827);const C=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class r extends P.g{constructor(z,u){super(z,P.d.LoadFileError),this.name="LoadFileError",P.b._setPrototypeOf(this,r.prototype),u instanceof v.b?this.request=u:this.file=u}}class M extends P.g{constructor(z,u){super(z,P.d.RequestFileError),this.request=u,this.name="RequestFileError",P.b._setPrototypeOf(this,M.prototype)}}class T extends P.g{constructor(z,u){super(z,P.d.ReadFileError),this.file=u,this.name="ReadFileError",P.b._setPrototypeOf(this,T.prototype)}}const X={DefaultRetryStrategy:class{static ExponentialBackoff(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(U,J,v)=>0!==J.status||v>=z||-1!==U.indexOf("file:")?-1:Math.pow(2,v)*u}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:z=>z,ScriptBaseUrl:"",ScriptPreprocessUrl:z=>z,CleanUrl:z=>z=z.replace(/#/gm,"%23")},h=(z,u)=>{if((!z||0!==z.indexOf("data:"))&&X.CorsBehavior)if("string"===typeof X.CorsBehavior||X.CorsBehavior instanceof String)u.crossOrigin=X.CorsBehavior;else{const U=X.CorsBehavior(z);U&&(u.crossOrigin=U)}},t={getRequiredSize:null},V=function(z,u,U,f){let g,P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",S=arguments.length>5?arguments[5]:void 0,mz=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===mz||void 0===mz||!mz._features.forceBitmapOverHTMLImageElement))return U("LoadImage is only supported in web or BabylonNative environments."),null;let Z=!1;z instanceof ArrayBuffer||ArrayBuffer.isView(z)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(g=URL.createObjectURL(new Blob([z],{type:P})),Z=!0):g="data:".concat(P,";base64,")+(0,R.i)(z):z instanceof Blob?(g=URL.createObjectURL(z),Z=!0):(g=X.CleanUrl(z),g=X.PreprocessUrl(g));const A=u=>{if(U){const J=g||z.toString();U("Error while trying to load image: ".concat(0===J.indexOf("http")||J.length<=128?J:J.slice(0,128)+"..."),u)}};if(null!==mz&&void 0!==mz&&mz._features.forceBitmapOverHTMLImageElement)return O(g,(v=>{mz.createImageBitmap(new Blob([v],{type:P}),(0,J.e)({premultiplyAlpha:"none"},S)).then((z=>{u(z),Z&&URL.revokeObjectURL(g)})).catch((u=>{U&&U("Error while trying to load image: "+z,u)}))}),void 0,f||void 0,!0,((z,u)=>{A(u)})),null;const E=new Image;if(t.getRequiredSize){const u=t.getRequiredSize(z);u.width&&(E.width=u.width),u.height&&(E.height=u.height)}h(g,E);const C=[],r=()=>{for(const z of C)z.target.removeEventListener(z.name,z.handler);C.length=0};C.push({target:E,name:"load",handler:()=>{r(),u(E),Z&&E.src&&URL.revokeObjectURL(E.src)}}),C.push({target:E,name:"error",handler:z=>{r(),A(z),Z&&E.src&&URL.revokeObjectURL(E.src)}}),C.push({target:document,name:"securitypolicyviolation",handler:z=>{if(z.blockedURI!==E.src||"xf"===z.disposition)return;r();const u=new Error("CSP violation of policy ".concat(z.effectiveDirective," ").concat(z.blockedURI,". Current policy is ").concat(z.originalPolicy));d.e.UseFallbackTexture=!1,A(u),Z&&E.src&&URL.revokeObjectURL(E.src),E.src=""}}),(()=>{for(const z of C)z.target.addEventListener(z.name,z.handler)})();const M="blob:"===g.substring(0,5),T="data:"===g.substring(0,5),V=()=>{M||T||!v.b.IsCustomRequestAvailable?E.src=g:O(g,((z,u,U)=>{const J=new Blob([z],{type:!P&&U?U:P}),v=URL.createObjectURL(J);Z=!0,E.src=v}),void 0,f||void 0,!0,((z,u)=>{A(u)}))},L=()=>{f&&f.loadImage(g,E)};if(!M&&!T&&f&&f.enableTexturesOffline)f.open(L,V);else{if(-1!==g.indexOf("file:")){const z=decodeURIComponent(g.substring(5).toLowerCase());if(w.FilesToLoad[z]&&"undefined"!==typeof URL){try{let u;try{u=URL.createObjectURL(w.FilesToLoad[z])}catch(x){u=URL.createObjectURL(w.FilesToLoad[z])}E.src=u,Z=!0}catch(Q){E.src=""}return E}}V()}return E},L=(z,u,U,J,v)=>{const f=new FileReader,w={onCompleteObservable:new g.e,abort:()=>f.abort()};return f.onloadend=()=>w.onCompleteObservable.notifyObservers(w),v&&(f.onerror=()=>{v(new T("Unable to read ".concat(z.name),z))}),f.onload=z=>{u(z.target.result)},U&&(f.onprogress=U),J?f.readAsArrayBuffer(z):f.readAsText(z),w},O=(z,u,U,J,v,f,R)=>{if(z.name)return L(z,u,U,v,f?z=>{f(void 0,z)}:void 0);const S=z;if(-1!==S.indexOf("file:")){let z=decodeURIComponent(S.substring(5).toLowerCase());0===z.indexOf("./")&&(z=z.substring(2));const J=w.FilesToLoad[z];if(J)return L(J,u,U,v,f?z=>f(void 0,new r(z.message,z.file)):void 0)}const{match:d,type:A}=p(S);if(d){const z={onCompleteObservable:new g.e,abort:()=>()=>{}};try{const z=v?N(S):D(S);u(z,void 0,A)}catch(P){f?f(void 0,P):mz.d.Error(P.message||"Failed to parse the Data URL")}return Z.b.SetImmediate((()=>{z.onCompleteObservable.notifyObservers(z)})),z}return x(S,((z,U)=>{u(z,null===U||void 0===U?void 0:U.responseURL,null===U||void 0===U?void 0:U.getResponseHeader("content-type"))}),U,J,v,f?z=>{f(z.request,new r(z.message,z.request))}:void 0,R)},x=(z,u,U,J,w,P,R)=>{z=X.CleanUrl(z),z=X.PreprocessUrl(z);const S=X.BaseUrl+z;let d=!1;const Z={onCompleteObservable:new g.e,abort:()=>d=!0},A=()=>{let z,J=new v.b,g=null;const A=()=>{J&&(U&&J.removeEventListener("progress",U),z&&J.removeEventListener("readystatechange",z),J.removeEventListener("loadend",E))};let E=()=>{A(),Z.onCompleteObservable.notifyObservers(Z),Z.onCompleteObservable.clear(),U=void 0,z=null,E=null,P=void 0,R=void 0,u=void 0};Z.abort=()=>{d=!0,E&&E(),J&&J.readyState!==(XMLHttpRequest.DONE||4)&&J.abort(),null!==g&&(clearTimeout(g),g=null),J=null};const C=z=>{const u=z.message||"Unknown error";P&&J?P(new M(u,J)):mz.d.Error(u)},r=mz=>{if(J){if(J.open("GET",S),R)try{R(J)}catch(Z){return void C(Z)}w&&(J.responseType="arraybuffer"),U&&J.addEventListener("progress",U),E&&J.addEventListener("loadend",E),z=()=>{if(!d&&J&&J.readyState===(XMLHttpRequest.DONE||4)){if(z&&J.removeEventListener("readystatechange",z),J.status>=200&&J.status<300||0===J.status&&(!(0,f.i)()||K())){const z=w?J.response:J.responseText;if(null!==z){try{u&&u(z,J)}catch(Z){C(Z)}return}}const U=X.DefaultRetryStrategy;if(U){const z=U(S,J,mz);if(-1!==z)return A(),J=new v.b,void(g=setTimeout((()=>r(mz+1)),z))}const R=new M("Error status: "+J.status+" "+J.statusText+" - Unable to load "+S,J);P&&P(R)}},J.addEventListener("readystatechange",z),J.send()}};r(0)};if(J&&J.enableSceneOffline){const v=z=>{z&&z.status>400?P&&P(z):A()},f=()=>{J&&J.loadFile(X.BaseUrl+z,(z=>{!d&&u&&u(z),Z.onCompleteObservable.notifyObservers(Z)}),U?z=>{!d&&U&&U(z)}:void 0,v,w)};J.open(f,v)}else A();return Z},Q=z=>{const{match:u,type:U}=p(z);if(u)return U||void 0;const J=z.lastIndexOf(".");switch(z.substring(J+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Kf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},K=()=>"undefined"!==typeof location&&"file:"===location.protocol,Y=z=>C.test(z),p=z=>{const u=C.exec(z);if(null===u||0===u.length)return{match:!1,type:""};return{match:!0,type:u[0].replace("data:","").replace("base64,","")}};function N(z){return(0,R.d)(z.split(",")[1])}const D=z=>(0,R.e)(z.split(",")[1]);let c;E.b._FileToolsLoadImage=V,A.e.loadFile=O,S.q.loadFile=O;((z,u,U,J,v,f,g,w,P,R)=>{c={DecodeBase64UrlToBinary:z,DecodeBase64UrlToString:u,DefaultRetryStrategy:U.DefaultRetryStrategy,BaseUrl:U.BaseUrl,CorsBehavior:U.CorsBehavior,PreprocessUrl:U.PreprocessUrl,IsBase64DataUrl:J,IsFileURL:v,LoadFile:f,LoadImage:g,ReadFile:w,RequestFile:P,SetCorsBehavior:R},Object.defineProperty(c,"DefaultRetryStrategy",{get:function(){return U.DefaultRetryStrategy},set:function(z){U.DefaultRetryStrategy=z}}),Object.defineProperty(c,"BaseUrl",{get:function(){return U.BaseUrl},set:function(z){U.BaseUrl=z}}),Object.defineProperty(c,"PreprocessUrl",{get:function(){return U.PreprocessUrl},set:function(z){U.PreprocessUrl=z}}),Object.defineProperty(c,"CorsBehavior",{get:function(){return U.CorsBehavior},set:function(z){U.CorsBehavior=z}})})(N,D,X,Y,K,O,V,L,x,h)},12880:(z,u,U)=>{function J(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(z=>{const u=16*Math.random()|0;return("x"===z?u:3&u|8).toString(16)}))}U.d(u,{d:()=>J})},12868:(z,u,U)=>{U.d(u,{d:()=>f});var J=U(12760),v=U(12875);class f{static Instantiate(z){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[z])return this.RegisteredExternalClasses[z];const u=(0,v.e)(z);if(u)return u;J.d.Warn(z+" not found, you may have missed an import.");const U=z.split(".");let f=window||this;for(let J=0,v=U.length;J<v;J++)f=f[U[J]];return"function"!==typeof f?null:f}}f.RegisteredExternalClasses={}},12777:(z,u,U)=>{U.d(u,{e:()=>v});var J=U(12758);class v{static get Now(){return(0,J.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12809:(z,u,U)=>{U.d(u,{d:()=>g,e:()=>f,g:()=>J,i:()=>v});const J=z=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(z);let u="";for(let U=0;U<z.byteLength;U++)u+=String.fromCharCode(z[U]);return u},v=z=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let U,J,v,f,g,w,P,R="",S=0;const d=ArrayBuffer.isView(z)?new Uint8Array(z.buffer,z.byteOffset,z.byteLength):new Uint8Array(z);for(;S<d.length;)U=d[S++],J=S<d.length?d[S++]:Number.NaN,v=S<d.length?d[S++]:Number.NaN,f=U>>2,g=(3&U)<<4|J>>4,w=(15&J)<<2|v>>6,P=63&v,isNaN(J)?w=P=64:isNaN(v)&&(P=64),R+=u.charAt(f)+u.charAt(g)+u.charAt(w)+u.charAt(P);return R},f=z=>atob(z),g=z=>{const u=f(z),U=u.length,J=new Uint8Array(new ArrayBuffer(U));for(let v=0;v<U;v++)J[v]=u.charCodeAt(v);return J.buffer}},12882:(z,u,U)=>{function J(z){let u=1;do{u*=2}while(u<z);return u===z}function v(z,u,U){return z*(1-U)+u*U}function f(z){const u=g(z),U=w(z);return u-z>z-U?U:u}function g(z){return z--,z|=z>>1,z|=z>>2,z|=z>>4,z|=z>>8,z|=z>>16,++z}function w(z){return z|=z>>1,z|=z>>2,z|=z>>4,z|=z>>8,(z|=z>>16)-(z>>1)}function P(z,u){let U;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:U=w(z);break;case 2:U=f(z);break;default:U=g(z)}return Math.min(U,u)}U.d(u,{b:()=>w,c:()=>P,e:()=>J,h:()=>v,l:()=>f})},12748:(z,u,U)=>{U.r(u),U.d(u,{AsyncLoop:()=>M,Tools:()=>C,className:()=>r});var J=U(12756),v=U(12758),f=U(12760),g=U(12768),w=U(12777),P=U(12782),R=U(12790),S=U(12797),d=U(12800),mz=U(12825),Z=U(12868),A=U(12880),E=U(12882);class C{static get BaseUrl(){return d.c.BaseUrl}static set BaseUrl(z){d.c.BaseUrl=z}static get CleanUrl(){return d.c.CleanUrl}static set CleanUrl(z){d.c.CleanUrl=z}static IsAbsoluteUrl(z){return 0===z.indexOf("//")||-1!==z.indexOf("://")&&(-1!==z.indexOf(".")&&(-1!==z.indexOf("/")&&(!(z.indexOf(":")>z.indexOf("/"))&&(z.indexOf("://")<z.indexOf(".")||(0===z.indexOf("data:")||0===z.indexOf("blob:"))))))}static set ScriptBaseUrl(z){d.c.ScriptBaseUrl=z}static get ScriptBaseUrl(){return d.c.ScriptBaseUrl}static set CDNBaseUrl(z){C.ScriptBaseUrl=z,C.AssetBaseUrl=z}static set ScriptPreprocessUrl(z){d.c.ScriptPreprocessUrl=z}static get ScriptPreprocessUrl(){return d.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return d.c.DefaultRetryStrategy}static set DefaultRetryStrategy(z){d.c.DefaultRetryStrategy=z}static get CorsBehavior(){return d.c.CorsBehavior}static set CorsBehavior(z){d.c.CorsBehavior=z}static get UseFallbackTexture(){return S.e.UseFallbackTexture}static set UseFallbackTexture(z){S.e.UseFallbackTexture=z}static get RegisteredExternalClasses(){return Z.d.RegisteredExternalClasses}static set RegisteredExternalClasses(z){Z.d.RegisteredExternalClasses=z}static get fallbackTexture(){return S.e.FallbackTexture}static set fallbackTexture(z){S.e.FallbackTexture=z}static FetchToRef(z,u,U,J,v,f){const g=4*((Math.abs(z)*U%U|0)+(Math.abs(u)*J%J|0)*U);f.r=v[g]/255,f.g=v[g+1]/255,f.b=v[g+2]/255,f.a=v[g+3]/255}static Mix(z,u,U){return 0}static Instantiate(z){return Z.d.Instantiate(z)}static SetImmediate(z){mz.b.SetImmediate(z)}static IsExponentOfTwo(z){return!0}static FloatRound(z){return Math.fround(z)}static GetFilename(z){const u=z.lastIndexOf("/");return u<0?z:z.substring(u+1)}static GetFolderPath(z){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const U=z.lastIndexOf("/");return U<0?u?z:"":z.substring(0,U+1)}static ToDegrees(z){return 180*z/Math.PI}static ToRadians(z){return z*Math.PI/180}static SmoothAngleChange(z,u){let U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const J=this.ToRadians(z),v=this.ToRadians(u);return this.ToDegrees(Math.atan2((1-U)*Math.sin(v)+U*Math.sin(J),(1-U)*Math.cos(v)+U*Math.cos(J)))}static MakeArray(z,u){return!0===u||void 0!==z&&null!=z?Array.isArray(z)?z:[z]:null}static GetPointerPrefix(z){return(0,v.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(z,u){(0,d.u)(z,u)}static SetReferrerPolicyBehavior(z,u){u.referrerPolicy=z}static get PreprocessUrl(){return d.c.PreprocessUrl}static set PreprocessUrl(z){d.c.PreprocessUrl=z}static LoadImage(z,u,U,J,v,f){return(0,d.r)(z,u,U,J,v,f)}static LoadFile(z,u,U,J,v,f){return(0,d.n)(z,u,U,J,v,f)}static async LoadFileAsync(z){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((U,J)=>{(0,d.n)(z,(z=>{U(z)}),void 0,void 0,u,((z,u)=>{J(u)}))}))}static GetAssetUrl(z){if(!z)return"";if(C.AssetBaseUrl&&z.startsWith(C._DefaultAssetsUrl)){const u="/"===C.AssetBaseUrl[C.AssetBaseUrl.length-1]?C.AssetBaseUrl.substring(0,C.AssetBaseUrl.length-1):C.AssetBaseUrl;return z.replace(C._DefaultAssetsUrl,u)}return z}static GetBabylonScriptURL(z,u){if(!z)return"";if(C.ScriptBaseUrl&&z.startsWith(C._DefaultCdnUrl)){const u="/"===C.ScriptBaseUrl[C.ScriptBaseUrl.length-1]?C.ScriptBaseUrl.substring(0,C.ScriptBaseUrl.length-1):C.ScriptBaseUrl;z=z.replace(C._DefaultCdnUrl,u)}return z=C.ScriptPreprocessUrl(z),u&&(z=C.GetAbsoluteUrl(z)),z}static LoadBabylonScript(z,u,U,J){z=C.GetBabylonScriptURL(z),C.LoadScript(z,u,U)}static async LoadBabylonScriptAsync(z){return z=C.GetBabylonScriptURL(z),await C.LoadScriptAsync(z)}static LoadScript(z,u,U,J){let f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(z),u&&u()}catch(P){null===U||void 0===U||U("Unable to load script '".concat(z,"' in worker"),P)}return}if(!(0,v.i)())return void(null===U||void 0===U||U("Cannot load script '".concat(z,"' outside of a window or a worker")));const g=document.getElementsByTagName("head")[0],w=document.createElement("script");f?(w.setAttribute("type","module"),w.innerText=z):(w.setAttribute("type","text/javascript"),w.setAttribute("src",z)),J&&(w.id=J),w.onload=()=>{u&&u()},w.onerror=u=>{U&&U("Unable to load script '".concat(z,"'"),u)},g.appendChild(w)}static async LoadScriptAsync(z,u){return await new Promise(((U,J)=>{this.LoadScript(z,(()=>{U()}),((z,u)=>{J(u||new Error(z))}),u)}))}static ReadFileAsDataURL(z,u,U){const v=new FileReader,f={onCompleteObservable:new J.e,abort:()=>v.abort()};return v.onloadend=()=>{f.onCompleteObservable.notifyObservers(f)},v.onload=z=>{u(z.target.result)},v.onprogress=U,v.readAsDataURL(z),f}static ReadFile(z,u,U,J,v){return(0,d.s)(z,u,U,J,v)}static FileAsURL(z){const u=new Blob([z]);return window.URL.createObjectURL(u)}static Format(z){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return z.toFixed(u)}static DeepCopy(z,u,U,J){g.c.DeepCopy(z,u,U,J)}static IsEmpty(z){for(const u in z)if(Object.prototype.hasOwnProperty.call(z,u))return!1;return!0}static RegisterTopRootEvents(z,u){for(let J=0;J<u.length;J++){const v=u[J];z.addEventListener(v.name,v.handler,!1);try{window.parent&&window.parent.addEventListener(v.name,v.handler,!1)}catch(U){}}}static UnregisterTopRootEvents(z,u){for(let J=0;J<u.length;J++){const v=u[J];z.removeEventListener(v.name,v.handler);try{z.parent&&z.parent.removeEventListener(v.name,v.handler)}catch(U){}}}static async DumpFramebuffer(z,u,U,J){throw(0,P.c)("DumpTools")}static DumpData(z,u,U,J){throw(0,P.c)("DumpTools")}static async DumpDataAsync(z,u,U){throw(0,P.c)("DumpTools")}static _IsOffScreenCanvas(z){return void 0!==z.convertToBlob}static ToBlob(z,u){let U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",J=arguments.length>3?arguments[3]:void 0;C._IsOffScreenCanvas(z)||z.toBlob||(z.toBlob=function(z,u,U){setTimeout((()=>{const J=atob(this.toDataURL(u,U).split(",")[1]),v=J.length,f=new Uint8Array(v);for(let z=0;z<v;z++)f[z]=J.charCodeAt(z);z(new Blob([f]))}))}),C._IsOffScreenCanvas(z)?z.convertToBlob({type:U,quality:J}).then((z=>u(z))):z.toBlob((function(z){u(z)}),U,J)}static DownloadBlob(z,u){if("download"in document.createElement("a")){if(!u){const z=new Date;u="screenshot_"+((z.getFullYear()+"-"+(z.getMonth()+1)).slice(2)+"-"+z.getDate()+"_"+z.getHours()+"-"+("0"+z.getMinutes()).slice(-2))+".png"}C.Download(z,u)}else if(z&&"undefined"!==typeof URL){const u=URL.createObjectURL(z),U=window.open("");if(!U)return;const J=U.document.createElement("img");J.onload=function(){URL.revokeObjectURL(u)},J.src=u,U.document.body.appendChild(J)}}static EncodeScreenshotCanvasData(z,u){let U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",J=arguments.length>3?arguments[3]:void 0,v=arguments.length>4?arguments[4]:void 0;if("string"!==typeof J&&u){if(u){if(C._IsOffScreenCanvas(z))return void z.convertToBlob({type:U,quality:v}).then((z=>{const U=new FileReader;U.readAsDataURL(z),U.onloadend=()=>{const z=U.result;u(z)}}));const J=z.toDataURL(U,v);u(J)}}else this.ToBlob(z,(function(z){z&&C.DownloadBlob(z,J),u&&u("")}),U,v)}static Download(z,u){if("undefined"===typeof URL)return;const U=window.URL.createObjectURL(z),J=document.createElement("a");document.body.appendChild(J),J.style.display="none",J.href=U,J.download=u,J.addEventListener("click",(()=>{J.parentElement&&J.parentElement.removeChild(J)})),J.click(),window.URL.revokeObjectURL(U)}static BackCompatCameraNoPreventDefault(z){return"boolean"===typeof z[0]?z[0]:"boolean"===typeof z[1]&&z[1]}static CreateScreenshot(z,u,U,J){throw(0,P.c)("ScreenshotTools")}static async CreateScreenshotAsync(z,u,U){throw(0,P.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(z,u,U,J){throw(0,P.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(z,u,U){throw(0,P.c)("ScreenshotTools")}static RandomId(){return(0,A.d)()}static IsBase64(z){return(0,d.i)(z)}static DecodeBase64(z){return(0,d.b)(z)}static get errorsCount(){return f.d.errorsCount}static Log(z){f.d.Log(z)}static Warn(z){f.d.Warn(z)}static Error(z){f.d.Error(z)}static get LogCache(){return f.d.LogCache}static ClearLogCache(){f.d.ClearLogCache()}static set LogLevels(z){f.d.LogLevels=z}static set PerformanceLogLevel(z){return(z&C.PerformanceUserMarkLogLevel)===C.PerformanceUserMarkLogLevel?(C.StartPerformanceCounter=C._StartUserMark,void(C.EndPerformanceCounter=C._EndUserMark)):(z&C.PerformanceConsoleLogLevel)===C.PerformanceConsoleLogLevel?(C.StartPerformanceCounter=C._StartPerformanceConsole,void(C.EndPerformanceCounter=C._EndPerformanceConsole)):(C.StartPerformanceCounter=C._StartPerformanceCounterDisabled,void(C.EndPerformanceCounter=C._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(z,u){}static _EndPerformanceCounterDisabled(z,u){}static _StartUserMark(z){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!C._Performance){if(!(0,v.i)())return;C._Performance=window.performance}u&&C._Performance.mark&&C._Performance.mark(z+"-Begin")}static _EndUserMark(z){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&C._Performance.mark&&(C._Performance.mark(z+"-End"),C._Performance.measure(z,z+"-Begin",z+"-End"))}static _StartPerformanceConsole(z){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(C._StartUserMark(z,u),console.time&&console.time(z))}static _EndPerformanceConsole(z){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(C._EndUserMark(z,u),console.timeEnd(z))}static get Now(){return w.e.Now}static GetClassName(z){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],U=null;if(!u&&z.getClassName)U=z.getClassName();else{if(z instanceof Object){U=(u?z:Object.getPrototypeOf(z)).constructor.__bjsclassName__}U||(U=typeof z)}return U}static First(z,u){for(const U of z)if(u(U))return U;return null}static getFullClassName(z){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],U=null,J=null;if(!u&&z.getClassName)U=z.getClassName();else{if(z instanceof Object){const v=u?z:Object.getPrototypeOf(z);U=v.constructor.__bjsclassName__,J=v.constructor.__bjsmoduleName__}U||(U=typeof z)}return U?(null!=J?J+".":"")+U:null}static async DelayAsync(z){await new Promise((u=>{setTimeout((()=>{u()}),z)}))}static IsSafari(){return!!(0,v.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function r(z,u){return U=>{U.__bjsclassName__=z,U.__bjsmoduleName__=null!=u?u:null}}C.AssetBaseUrl="",C.UseCustomRequestHeaders=!1,C.CustomRequestHeaders=R.b.CustomRequestHeaders,C.GetDOMTextContent=v.b,C._DefaultCdnUrl="https://cdn.babylonjs.com",C._DefaultAssetsUrl="https://assets.babylonjs.com/core",C.GetAbsoluteUrl="object"===typeof document?z=>{const u=document.createElement("a");return u.href=z,u.href}:"function"===typeof URL&&"object"===typeof location?z=>new URL(z,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},C.NoneLogLevel=f.d.NoneLogLevel,C.MessageLogLevel=f.d.MessageLogLevel,C.WarningLogLevel=f.d.WarningLogLevel,C.ErrorLogLevel=f.d.ErrorLogLevel,C.AllLogLevel=f.d.AllLogLevel,C.IsWindowObjectExist=v.i,C.PerformanceNoneLogLevel=0,C.PerformanceUserMarkLogLevel=1,C.PerformanceConsoleLogLevel=2,C.StartPerformanceCounter=C._StartPerformanceCounterDisabled,C.EndPerformanceCounter=C._EndPerformanceCounterDisabled;class M{constructor(z,u,U){let J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=z,this.index=J-1,this._done=!1,this._fn=u,this._successCallback=U}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(z,u,U){const J=new M(z,u,U,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return J.executeNext(),J}static SyncAsyncForLoop(z,u,U,J,v){let f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return M.Run(Math.ceil(z/u),(J=>{v&&v()?J.breakLoop():setTimeout((()=>{for(let f=0;f<u;++f){const g=J.index*u+f;if(g>=z)break;if(U(g),v&&v()){J.breakLoop();break}}J.executeNext()}),f)}),J)}}C.Mix=E.h,C.IsExponentOfTwo=E.e,S.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12875:(z,u,U)=>{U.d(u,{e:()=>f,f:()=>v});const J={};function v(z,u){J[z]=u}function f(z){return J[z]}},12790:(z,u,U)=>{U.d(u,{b:()=>J});class J{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(J.CustomRequestHeaders).length>0||J.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const z in J.CustomRequestHeaders){const u=J.CustomRequestHeaders[z];u&&this._xhr.setRequestHeader(z,u)}}_shouldSkipRequestModifications(z){return J.SkipRequestModificationForBabylonCDN&&(z.includes("preview.babylonjs.com")||z.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(z){this._xhr.onprogress=z}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(z){this._xhr.responseType=z}get timeout(){return this._xhr.timeout}set timeout(z){this._xhr.timeout=z}addEventListener(z,u,U){this._xhr.addEventListener(z,u,U)}removeEventListener(z,u,U){this._xhr.removeEventListener(z,u,U)}abort(){this._xhr.abort()}send(z){J.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(z)}open(z,u){for(const U of J.CustomRequestModifiers){if(this._shouldSkipRequestModifications(u))return;u=U(this._xhr,u)||u}u=(u=u.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=u,this._xhr.open(z,u,!0)}setRequestHeader(z,u){this._xhr.setRequestHeader(z,u)}getResponseHeader(z){return this._xhr.getResponseHeader(z)}}J.CustomRequestHeaders={},J.CustomRequestModifiers=new Array,J.SkipRequestModificationForBabylonCDN=!0}}]);