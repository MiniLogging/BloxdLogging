"use strict";(self.h6ljd275xwr=self.h6ljd275xwr||[]).push([[8],{11189:(n,y,H)=>{H.d(y,{e:()=>v});var o=H(11149),G=H(11114),h=H(11195),k=H(11223),i=H(11125);class B{constructor(){let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,n&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(n){this._zOffset!==n&&(this._zOffset=n,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(n){this._zOffsetUnits!==n&&(this._zOffsetUnits=n,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(n){this._cullFace!==n&&(this._cullFace=n,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(n){this._cull!==n&&(this._cull=n,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(n){this._depthFunc!==n&&(this._depthFunc=n,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(n){this._depthMask!==n&&(this._depthMask=n,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(n){this._depthTest!==n&&(this._depthTest=n,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(n){this._frontFace!==n&&(this._frontFace=n,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(n){this.isDirty&&(this._isCullDirty&&(this.cull?n.enable(n.CULL_FACE):n.disable(n.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(n.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(n.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?n.enable(n.DEPTH_TEST):n.disable(n.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(n.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(n.enable(n.POLYGON_OFFSET_FILL),n.polygonOffset(this.zOffset,this.zOffsetUnits)):n.disable(n.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(n.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class V{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(n){this._func!==n&&(this._func=n,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(n){this._funcRef!==n&&(this._funcRef=n,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(n){this._funcMask!==n&&(this._funcMask=n,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(n){this._opStencilFail!==n&&(this._opStencilFail=n,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(n){this._opDepthFail!==n&&(this._opDepthFail=n,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(n){this._opStencilDepthPass!==n&&(this._opStencilDepthPass=n,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(n){this._mask!==n&&(this._mask=n,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(n){this._enabled!==n&&(this._enabled=n,this._isStencilTestDirty=!0)}constructor(){let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,n&&this.reset()}reset(){var n;this.stencilMaterial=void 0,null===(n=this.stencilGlobal)||void 0===n||n.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(n){var y;if(!n)return;const H=!this.useStencilGlobalOnly&&!(null===(y=this.stencilMaterial)||void 0===y||!y.enabled);this.enabled=H?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=H?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=H?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=H?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=H?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=H?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=H?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=H?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?n.enable(n.STENCIL_TEST):n.disable(n.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(n.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(n.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(n.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class q{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=q.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=q.KEEP,this.opDepthFail=q.KEEP,this.opStencilDepthPass=q.REPLACE}get stencilFunc(){return this.func}set stencilFunc(n){this.func=n}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(n){this.funcRef=n}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(n){this.funcMask=n}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(n){this.opStencilFail=n}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(n){this.opDepthFail=n}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(n){this.opStencilDepthPass=n}get stencilMask(){return this.mask}set stencilMask(n){this.mask=n}get stencilTest(){return this.enabled}set stencilTest(n){this.enabled=n}}q.ALWAYS=519,q.KEEP=7680,q.REPLACE=7681;class b{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(n){this._alphaBlend!==n&&(this._alphaBlend=n,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(n,y,H,o){this._blendConstants[0]===n&&this._blendConstants[1]===y&&this._blendConstants[2]===H&&this._blendConstants[3]===o||(this._blendConstants[0]=n,this._blendConstants[1]=y,this._blendConstants[2]=H,this._blendConstants[3]=o,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(n,y,H,o){this._blendFunctionParameters[0]===n&&this._blendFunctionParameters[1]===y&&this._blendFunctionParameters[2]===H&&this._blendFunctionParameters[3]===o||(this._blendFunctionParameters[0]=n,this._blendFunctionParameters[1]=y,this._blendFunctionParameters[2]=H,this._blendFunctionParameters[3]=o,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(n,y){this._blendEquationParameters[0]===n&&this._blendEquationParameters[1]===y||(this._blendEquationParameters[0]=n,this._blendEquationParameters[1]=y,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(n){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?n.enable(n.BLEND):n.disable(n.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(n.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(n.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(n.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var A=H(11134),U=H(11230),T=H(11107),W=H(11099),z=H(11176),Q=H(11240);function l(n,y){if((0,T.p)()){const{requestAnimationFrame:H}=y||window;if("function"===typeof H)return H(n)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(n);return setTimeout(n,16)}class v{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(n){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(n){n!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=n,this._depthCullingState.depthFunc=n?518:515)}setColorWrite(n){n!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=n)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(n){if(n)return this.isNDCHalfZRange?n.IS_NDC_HALF_ZRANGE="":delete n.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?n.USE_REVERSE_DEPTHBUFFER="":delete n.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?n.USE_EXACT_SRGB_CONVERSIONS="":delete n.USE_EXACT_SRGB_CONVERSIONS);{let n="";return this.isNDCHalfZRange&&(n+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(n&&(n+="\n"),n+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(n&&(n+="\n"),n+="#define USE_EXACT_SRGB_CONVERSIONS"),n}}_rebuildInternalTextures(){const n=this._internalTexturesCache.slice();for(const y of n)y._rebuild()}_rebuildRenderTargetWrappers(){const n=this._renderTargetWrapperCache.slice();for(const y of n)y._rebuild()}_rebuildEffects(){for(const n in this._compiledEffects){const y=this._compiledEffects[n];y._pipelineContext=null,y._prepareEffect()}h.Effect.ResetCache()}_rebuildGraphicsResources(){var n;this.wipeCaches(!0),this._rebuildEffects(),null===(n=this._rebuildComputeEffects)||void 0===n||n.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){G.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(n){setTimeout((()=>{this._clearEmptyResources();const y=this._depthCullingState.depthTest,H=this._depthCullingState.depthFunc,o=this._depthCullingState.depthMask,G=this._stencilState.stencilTest;n(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=y,this._depthCullingState.depthFunc=H,this._depthCullingState.depthMask=o,this._stencilState.stencilTest=G,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(n){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(n){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const n=new Uint8Array(4),y=[n,n,n,n,n,n];this._emptyCubeTexture=this.createRawCubeTexture(y,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(n){if(!n)return this._activeRenderLoops.length=0,void this._cancelFrame();const y=this._activeRenderLoops.indexOf(n);y>=0&&(this._activeRenderLoops.splice(y,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const n=this._frameHandler;if(this._frameHandler=0,(0,T.p)()){const{cancelAnimationFrame:y}=this.getHostWindow()||window;if("function"===typeof y)return y(n)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(n);return clearTimeout(n)}}ph(){this.onBeginFrameObservable.notifyObservers(this)}Eh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(n){this._maxFPS=n,void 0!==n&&(this._minFrameTime=n<=0?Number.MAX_VALUE:1e3/n)}_isOverFrameTime(n){if(!n||void 0===this._maxFPS)return!1;const y=n-this._lastFrameTime;return this._lastFrameTime=n,this._renderAccumulator+=y,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(n){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(n)){let n=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(n=!1),n&&(this.ph(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Eh())}}_renderLoop(n){this._processFrame(n),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let n=0;n<this._activeRenderLoops.length;n++){(0,this._activeRenderLoops[n])()}}_renderViews(){return!1}_queueNewFrame(n,y){return l(n,y)}runRenderLoop(n){-1===this._activeRenderLoops.indexOf(n)&&(this._activeRenderLoops.push(n),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(n){this._depthCullingState.depthTest=n}setZOffset(n){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-n:n}getZOffset(){const n=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-n:n}setZOffsetUnits(n){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-n:n}getZOffsetUnits(){const n=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-n:n}getHostWindow(){return(0,T.p)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(n){this._compatibilityMode=!0}_rebuildTextures(){for(const n of this.scenes)n._rebuildTextures();for(const n of this._virtualScenes)n._rebuildTextures()}_releaseRenderTargetWrapper(n){const y=this._renderTargetWrapperCache.indexOf(n);-1!==y&&this._renderTargetWrapperCache.splice(y,1)}get currentViewport(){return this._cachedViewport}setViewport(n,y,H){const o=y||this.getRenderWidth(),G=H||this.getRenderHeight(),h=n.x||0,k=n.y||0;this._cachedViewport=n,this._viewport(h*o,k*G,o*n.width,G*n.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(n){return new Path2D(n)}get description(){let n=this.name+this.version;return this._caps.parallelShaderCompile&&(n+=" - Parallel shader compilation"),n}_createTextureBase(n,y,H,h){let k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,V=arguments.length>7?arguments[7]:void 0,q=arguments.length>8?arguments[8]:void 0,b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,A=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,T=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,W=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,z=arguments.length>13?arguments[13]:void 0,l=arguments.length>14?arguments[14]:void 0,F=arguments.length>15?arguments[15]:void 0;const g="data:"===(n=n||"").substring(0,5),M="blob:"===n.substring(0,5),f=g&&-1!==n.indexOf(";base64,"),c=A||new U.b(this,1);c!==A&&(c.label=n.substring(0,60));const p=n;!this._transformTextureUrl||f||A||b||(n=this._transformTextureUrl(n)),p!==n&&(c._originalUrl=p);const E=n.lastIndexOf(".");let X=W||(E>-1?n.substring(E).toLowerCase():"");X.indexOf("?")>-1&&(X=X.split("?")[0]);const d=(0,Q.b)(X,z);h&&h.addPendingData(c),c.url=n,c.generateMipMaps=!y,c.samplingMode=k,c.invertY=H,c._useSRGBBuffer=this._getUseSRGBBuffer(!!F,y),this._doNotHandleContextLost||(c._buffer=b);let a=null;i&&!A&&(a=c.onLoadedObservable.add(i)),A||this._internalTexturesCache.push(c);const O=(H,A)=>{h&&h.removePendingData(c),n===p?(a&&c.onLoadedObservable.remove(a),o.c.UseFallbackTexture&&n!==o.c.FallbackTexture&&this._createTextureBase(o.c.FallbackTexture,y,c.invertY,h,k,null,B,V,q,b,c),H=(H||"Unknown error")+(o.c.UseFallbackTexture?" - Fallback texture was used":""),c.onErrorObservable.notifyObservers({message:H,exception:A}),B&&B(H,A)):(G.d.Warn(`Failed to load ${n}, falling back to ${p}`),this._createTextureBase(p,y,c.invertY,h,k,i,B,V,q,b,c,T,W,z,l,F))};if(d){const y=async n=>{(await d).loadData(n,c,((n,y,H,o,G,i)=>{i?O("TextureLoader failed to load data"):V(c,X,h,{width:n,height:y},c.invertY,!H,o,(()=>(G(),!1)),k)}),l)};b?b instanceof ArrayBuffer?y(new Uint8Array(b)):ArrayBuffer.isView(b)?y(b):B&&B("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(n,(n=>{y(new Uint8Array(n))}),void 0,h?h.offlineProvider:void 0,!0,((n,y)=>{O("Unable to load "+(n&&n.responseURL,y))}))}else{const H=n=>{M&&!this._doNotHandleContextLost&&(c._buffer=n),V(c,X,h,n,c.invertY,y,!1,q,k)};!g||f?b&&("string"===typeof b.decoding||b.close)?H(b):v._FileToolsLoadImage(n||"",H,O,h?h.offlineProvider:null,z,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof b||b instanceof ArrayBuffer||ArrayBuffer.isView(b)||b instanceof Blob?v._FileToolsLoadImage(b,H,O,h?h.offlineProvider:null,z,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):b&&H(b)}return c}_rebuildBuffers(){for(const n of this._uniformBuffers)n._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,T.i)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const n in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,n)&&(this._boundTexturesCache[n]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(n){this._name=n}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(n){this._hardwareScalingLevel=n,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(n){this._doNotHandleContextLost=n}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(n,y,H){var G,h;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new B,this._stencilStateComposer=new V,this._stencilState=new q,this._alphaState=new b,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new W.c,this.onCanvasFocusObservable=new W.c,this.onNewSceneAddedObservable=new W.c,this.onResizeObservable=new W.c,this.onCanvasPointerOutObservable=new W.c,this.onEffectErrorObservable=new W.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new W.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=n=>this._renderLoop(n),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new W.c,this.onAfterShaderCompilationObservable=new W.c,this.onBeginFrameObservable=new W.c,this.onEndFrameObservable=new W.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new W.c,this.onContextRestoredObservable=new W.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.ah=new W.c,this.onReleaseEffectsObservable=new W.c,o.c.Instances.push(this),this.startTime=i.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,k.b.SetMatrixPrecision(!!y.useHighPrecisionMatrix),(0,T.m)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=H??!1,y.antialias=n??y.antialias,y.deterministicLockstep=y.deterministicLockstep??!1,y.lockstepMaxSteps=y.lockstepMaxSteps??4,y.timeStep=y.timeStep??1/60,y.stencil=y.stencil??!0,this._audioContext=(null===(G=y.audioEngineOptions)||void 0===G?void 0:G.audioContext)??null,this._audioDestination=(null===(h=y.audioEngineOptions)||void 0===h?void 0:h.audioDestination)??null,this.premultipliedAlpha=y.premultipliedAlpha??!0,this._doNotHandleContextLost=!!y.doNotHandleContextLost,this._isStencilEnable=!!y.stencil,this.useExactSrgbConversions=y.useExactSrgbConversions??!1;const A=(0,T.p)()&&window.devicePixelRatio||1,U=y.limitDeviceRatio||A;H=H||y.adaptToDeviceRatio||!1,this._hardwareScalingLevel=H?1/Math.min(U,A):1,this._lastDevicePixelRatio=A,this._creationOptions=y}resize(){let n,y,H=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const n=(0,T.p)()&&window.devicePixelRatio||1,y=this._lastDevicePixelRatio/n;this._lastDevicePixelRatio=n,this._hardwareScalingLevel*=y}if((0,T.p)()&&(0,T.i)())if(this._renderingCanvas){var o,G;const H=null===(o=(G=this._renderingCanvas).getBoundingClientRect)||void 0===o?void 0:o.call(G);n=this._renderingCanvas.clientWidth||(null===H||void 0===H?void 0:H.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,y=this._renderingCanvas.clientHeight||(null===H||void 0===H?void 0:H.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else n=window.innerWidth,y=window.innerHeight;else n=this._renderingCanvas?this._renderingCanvas.width:100,y=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(n/this._hardwareScalingLevel,y/this._hardwareScalingLevel,H)}setSize(n,y){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(n|=0,y|=0,!H&&this._renderingCanvas.width===n&&this._renderingCanvas.height===y)return!1;if(this._renderingCanvas.width=n,this._renderingCanvas.height=y,this.scenes){for(let n=0;n<this.scenes.length;n++){const y=this.scenes[n];for(let n=0;n<y.cameras.length;n++){y.cameras[n]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(n,y,H,o,G,h,k,i,B,V,q){throw(0,A.c)("engine.rawTexture")}createRawCubeTexture(n,y,H,o,G,h,k,i){throw(0,A.c)("engine.rawTexture")}createRawTexture3D(n,y,H,o,G,h,k,i,B,V,q){throw(0,A.c)("engine.rawTexture")}createRawTexture2DArray(n,y,H,o,G,h,k,i,B,V,q){throw(0,A.c)("engine.rawTexture")}_sharedInit(n){this._renderingCanvas=n}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const n=navigator.userAgent;this.hostInformation.isMobile=-1!==n.indexOf("Mobile")||-1!==n.indexOf("Mac")&&(0,T.i)()&&"ontouchend"in document},this._checkForMobile(),(0,T.p)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(n){return document.createElement("video")}_reportDrawCall(){var n;let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(n=this._drawCalls)||void 0===n||n.addCount(y,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(n,y){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(n,y){return createImageBitmap(n,y)}resizeImageBitmap(n,y,H){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(n){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(n,y){if("undefined"===typeof document)return new OffscreenCanvas(n,y);const H=document.createElement("canvas");return H.width=n,H.height=y,H}createCanvas(n,y){return v._CreateCanvas(n,y)}static _FileToolsLoadImage(n,y,H,o,G,h,k){throw(0,A.c)("FileTools")}_loadFile(n,y,H,o,G,h){const k=(0,z.l)(n,y,H,o,G,h);return this._activeRequests.push(k),k.onCompleteObservable.add((()=>{const n=this._activeRequests.indexOf(k);-1!==n&&this._activeRequests.splice(n,1)})),k}static _FileToolsLoadFile(n,y,H,o,G,h){if(z.e.loadFile)return z.e.loadFile(n,y,H,o,G,h);throw(0,A.c)("FileTools")}dispose(){var n;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(n=this.releaseComputeEffects)||void 0===n||n.call(this),h.Effect.ResetCache();for(const H of this._activeRequests)H.abort();this._boundRenderFunction=null,this.ah.notifyObservers(this),this.ah.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,T.p)()&&window.removeEventListener("resize",this._checkForMobile);const y=o.c.Instances.indexOf(this);y>=0&&o.c.Instances.splice(y,1),o.c.Instances.length||(o.c.OnEnginesDisposedObservable.notifyObservers(this),o.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(n){throw(0,A.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(n,y){for(let H=0;H<o.c.Instances.length;H++){const G=o.c.Instances[H];for(let H=0;H<G.scenes.length;H++)G.scenes[H].markAllMaterialsAsDirty(n,y)}}}v._RenderPassIdCounter=0,v._RescalePostProcessFactory=null,v.CollisionsEpsilon=.001,v.QueueNewFrame=l},11149:(n,y,H)=>{H.d(y,{c:()=>G});var o=H(11099);class G{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}G.Instances=[],G.OnEnginesDisposedObservable=new o.c,G._LastCreatedScene=null,G.UseFallbackTexture=!0,G.FallbackTexture=""},11223:(n,y,H)=>{H.d(y,{b:()=>o});class o{static SetMatrixPrecision(n){if(o.MatrixTrackPrecisionChange=!1,n&&!o.MatrixUse64Bits&&o.MatrixTrackedMatrices)for(let y=0;y<o.MatrixTrackedMatrices.length;++y){const n=o.MatrixTrackedMatrices[y],H=n.jh;n.jh=new Array(16);for(let y=0;y<16;++y)n.jh[y]=H[y]}o.MatrixUse64Bits=n,o.MatrixCurrentType=o.MatrixUse64Bits?Array:Float32Array,o.MatrixTrackedMatrices=null}}o.MatrixUse64Bits=!1,o.MatrixTrackPrecisionChange=!0,o.MatrixCurrentType=Float32Array,o.MatrixTrackedMatrices=[]},11240:(n,y,H)=>{H.d(y,{b:()=>k});var o=H(11114);const G=new Map;function h(n,y){(function(n){return G.delete(n)})(n)&&o.d.Warn(`Extension with the name '${n}' already exists`),G.set(n,y)}function k(n,y){"image/ktx"!==y&&"image/ktx2"!==y||(n=".ktx"),G.has(n)||(n.endsWith(".ies")&&h(".ies",(async()=>await H.e(15).then(H.bind(H,13820)).then((n=>new n._IESTextureLoader)))),n.endsWith(".dds")&&h(".dds",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(19),H.e(18),H.e(28)]).then(H.bind(H,13829)).then((n=>new n._DDSTextureLoader)))),n.endsWith(".basis")&&h(".basis",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(47)]).then(H.bind(H,13842)).then((n=>new n._BasisTextureLoader)))),n.endsWith(".env")&&h(".env",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(19),H.e(18),H.e(23),H.e(21),H.e(45),H.e(48)]).then(H.bind(H,13846)).then((n=>new n._ENVTextureLoader)))),n.endsWith(".hdr")&&h(".hdr",(async()=>await Promise.all([H.e(14),H.e(49)]).then(H.bind(H,13855)).then((n=>new n._HDRTextureLoader)))),(n.endsWith(".ktx")||n.endsWith(".ktx2"))&&(h(".ktx",(async()=>await H.e(30).then(H.bind(H,13862)).then((n=>new n._KTXTextureLoader)))),h(".ktx2",(async()=>await H.e(30).then(H.bind(H,13862)).then((n=>new n._KTXTextureLoader))))),n.endsWith(".tga")&&h(".tga",(async()=>await H.e(50).then(H.bind(H,13868)).then((n=>new n._TGATextureLoader)))),n.endsWith(".exr")&&h(".exr",(async()=>await H.e(16).then(H.bind(H,13874)).then((n=>new n._ExrTextureLoader)))));const o=G.get(n);return o?Promise.resolve(o(y)):null}},11230:(n,y,H)=>{H.d(y,{b:()=>k});var o,G=H(11099),h=H(11232);!function(n){n[n.Unknown=0]="Unknown",n[n.Url=1]="Url",n[n.Temp=2]="Temp",n[n.Raw=3]="Raw",n[n.Dynamic=4]="Dynamic",n[n.RenderTarget=5]="RenderTarget",n[n.MultiRenderTarget=6]="MultiRenderTarget",n[n.Cube=7]="Cube",n[n.CubeRaw=8]="CubeRaw",n[n.CubePrefiltered=9]="CubePrefiltered",n[n.Raw3D=10]="Raw3D",n[n.Raw2DArray=11]="Raw2DArray",n[n.DepthStencil=12]="DepthStencil",n[n.CubeRawRGBD=13]="CubeRawRGBD",n[n.Depth=14]="Depth"}(o||(o={}));class k extends h.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(n){this.generateMipMaps=n}get uniqueId(){return this._uniqueId}_setUniqueId(n){this._uniqueId=n}getEngine(){return this._engine}get source(){return this._source}constructor(n,y){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new G.c,this.onErrorObservable=new G.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=n,this._source=y,this._uniqueId=k._Counter++,H||(this._hardwareTexture=n._createHardwareTexture())}incrementReferences(){this._references++}updateSize(n,y){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,n,y,H),this.width=n,this.height=y,this.depth=H,this.baseWidth=n,this.baseHeight=y,this.baseDepth=H,this._size=n*y*H}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const n=this.onRebuildCallback(this),y=y=>{y._swapAndDie(this,!1),this.isReady=n.isReady};return void(n.isAsync?n.proxy.then(y):y(n.proxy))}let n;switch(this.source){case 2:case 12:case 14:break;case 1:return void(n=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(n=>{n._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:n=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),n._swapAndDie(this,!1),this.isReady=!0;break;case 10:n=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),n._swapAndDie(this,!1),this.isReady=!0;break;case 11:n=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),n._swapAndDie(this,!1),this.isReady=!0;break;case 4:n=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),n._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(n=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{n._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:n=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),n._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return n=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(n=>{n&&n._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(n._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(n){var y;let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(y=this._hardwareTexture)||void 0===y||y.setUsage(n._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),n._hardwareTexture=this._hardwareTexture,H&&(n._isRGBD=this._isRGBD),this._lodTextureHigh&&(n._lodTextureHigh&&n._lodTextureHigh.dispose(),n._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(n._lodTextureMid&&n._lodTextureMid.dispose(),n._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(n._lodTextureLow&&n._lodTextureLow.dispose(),n._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(n._irradianceTexture&&n._irradianceTexture.dispose(),n._irradianceTexture=this._irradianceTexture);const o=this._engine.getLoadedTexturesCache();let G=o.indexOf(this);-1!==G&&o.splice(G,1),G=o.indexOf(n),-1===G&&o.push(n)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}k._Counter=0},11232:(n,y,H)=>{H.d(y,{b:()=>o});class o{get wrapU(){return this._cachedWrapU}set wrapU(n){this._cachedWrapU=n}get wrapV(){return this._cachedWrapV}set wrapV(n){this._cachedWrapV=n}get wrapR(){return this._cachedWrapR}set wrapR(n){this._cachedWrapR=n}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(n){this._cachedAnisotropicFilteringLevel=n}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(n){this._comparisonFunction=n}get useMipMaps(){return this._useMipMaps}set useMipMaps(n){this._useMipMaps=n}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=n,this._cachedWrapV=y,this._cachedWrapR=H,this._cachedAnisotropicFilteringLevel=o,this.samplingMode=G,this._comparisonFunction=h,this}compareSampler(n){return this._cachedWrapU===n._cachedWrapU&&this._cachedWrapV===n._cachedWrapV&&this._cachedWrapR===n._cachedWrapR&&this._cachedAnisotropicFilteringLevel===n._cachedAnisotropicFilteringLevel&&this.samplingMode===n.samplingMode&&this._comparisonFunction===n._comparisonFunction&&this._useMipMaps===n._useMipMaps}}},11118:(n,y,H)=>{H.d(y,{c:()=>h});var o=H(11114);const G=(n,y,H)=>n?n.getClassName&&"Mesh"===n.getClassName()?null:!n.getClassName||"SubMesh"!==n.getClassName()&&"PhysicsBody"!==n.getClassName()?n.clone?n.clone():Array.isArray(n)?n.slice():H&&"object"===typeof n?{...n}:null:n.clone(y):null;class h{static DeepCopy(n,y,H,h){let k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=function(n){const y=[];do{const H=Object.getOwnPropertyNames(n);for(const n of H)-1===y.indexOf(n)&&y.push(n)}while(n=Object.getPrototypeOf(n));return y}(n);for(const V of i){if("_"===V[0]&&(!h||-1===h.indexOf(V)))continue;if(V.endsWith("Observable"))continue;if(H&&-1!==H.indexOf(V))continue;const i=n[V],q=typeof i;if("function"!==q)try{if("object"===q)if(i instanceof Uint8Array)y[V]=Uint8Array.from(i);else if(i instanceof Array){if(y[V]=[],i.length>0)if("object"==typeof i[0])for(let n=0;n<i.length;n++){const H=G(i[n],y,k);-1===y[V].indexOf(H)&&y[V].push(H)}else y[V]=i.slice(0)}else y[V]=G(i,y,k);else y[V]=i}catch(B){o.d.Warn(B.message)}}}}},11161:(n,y,H)=>{H.d(y,{b:()=>o,e:()=>G,h:()=>h});class o extends Error{}o._setPrototypeOf=Object.setPrototypeOf||((n,y)=>(n.__proto__=y,n));const G={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class h extends o{constructor(n,y,H){super(n),this.errorCode=y,this.innerError=H,this.name="RuntimeError",o._setPrototypeOf(this,h.prototype)}}},11154:(n,y,H)=>{H.d(y,{c:()=>O,e:()=>v,i:()=>E,k:()=>d,o:()=>c,l:()=>z,s:()=>M,t:()=>f,v:()=>p,x:()=>F});var o=H(11140),G=H(11107),h=H(11099);class k{}k.FilesToLoad={};var i=H(11161),B=H(11167),V=H(11173),q=H(11149),b=H(11114),A=H(11185),U=H(11176),T=H(11189);const W=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class z extends i.h{constructor(n,y){super(n,i.e.LoadFileError),this.name="LoadFileError",i.b._setPrototypeOf(this,z.prototype),y instanceof o.b?this.request=y:this.file=y}}class Q extends i.h{constructor(n,y){super(n,i.e.RequestFileError),this.request=y,this.name="RequestFileError",i.b._setPrototypeOf(this,Q.prototype)}}class l extends i.h{constructor(n,y){super(n,i.e.ReadFileError),this.file=y,this.name="ReadFileError",i.b._setPrototypeOf(this,l.prototype)}}const v={DefaultRetryStrategy:class{static ExponentialBackoff(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(H,o,G)=>0!==o.status||G>=n||-1!==H.indexOf("file:")?-1:Math.pow(2,G)*y}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:n=>n,ScriptBaseUrl:"",ScriptPreprocessUrl:n=>n,CleanUrl:n=>n=n.replace(/#/gm,"%23")},F=(n,y)=>{if((!n||0!==n.indexOf("data:"))&&v.CorsBehavior)if("string"===typeof v.CorsBehavior||v.CorsBehavior instanceof String)y.crossOrigin=v.CorsBehavior;else{const H=v.CorsBehavior(n);H&&(y.crossOrigin=H)}},g={getRequiredSize:null},M=function(n,y,H,G){let h,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",V=arguments.length>5?arguments[5]:void 0,b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===b||void 0===b||!b._features.forceBitmapOverHTMLImageElement))return H("LoadImage is only supported in web or BabylonNative environments."),null;let A=!1;n instanceof ArrayBuffer||ArrayBuffer.isView(n)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(h=URL.createObjectURL(new Blob([n],{type:i})),A=!0):h=`data:${i};base64,`+(0,B.q)(n):n instanceof Blob?(h=URL.createObjectURL(n),A=!0):(h=v.CleanUrl(n),h=v.PreprocessUrl(h));const U=y=>{if(H){const o=h||n.toString();H(`Error while trying to load image: ${0===o.indexOf("http")||o.length<=128?o:o.slice(0,128)+"..."}`,y)}};if(null!==b&&void 0!==b&&b._features.forceBitmapOverHTMLImageElement)return c(h,(o=>{b.createImageBitmap(new Blob([o],{type:i}),{premultiplyAlpha:"none",...V}).then((n=>{y(n),A&&URL.revokeObjectURL(h)})).catch((y=>{H&&H("Error while trying to load image: "+n,y)}))}),void 0,G||void 0,!0,((n,y)=>{U(y)})),null;const T=new Image;if(g.getRequiredSize){const y=g.getRequiredSize(n);y.width&&(T.width=y.width),y.height&&(T.height=y.height)}F(h,T);const W=[],z=()=>{for(const n of W)n.target.removeEventListener(n.name,n.handler);W.length=0};W.push({target:T,name:"load",handler:()=>{z(),y(T),A&&T.src&&URL.revokeObjectURL(T.src)}}),W.push({target:T,name:"error",handler:n=>{z(),U(n),A&&T.src&&URL.revokeObjectURL(T.src)}}),W.push({target:document,name:"securitypolicyviolation",handler:n=>{if(n.blockedURI!==T.src||"Ih"===n.disposition)return;z();const y=new Error(`CSP violation of policy ${n.effectiveDirective} ${n.blockedURI}. Current policy is ${n.originalPolicy}`);q.c.UseFallbackTexture=!1,U(y),A&&T.src&&URL.revokeObjectURL(T.src),T.src=""}}),(()=>{for(const n of W)n.target.addEventListener(n.name,n.handler)})();const Q="blob:"===h.substring(0,5),l="data:"===h.substring(0,5),M=()=>{Q||l||!o.b.IsCustomRequestAvailable?T.src=h:c(h,((n,y,H)=>{const o=new Blob([n],{type:!i&&H?H:i}),G=URL.createObjectURL(o);A=!0,T.src=G}),void 0,G||void 0,!0,((n,y)=>{U(y)}))},f=()=>{G&&G.loadImage(h,T)};if(!Q&&!l&&G&&G.enableTexturesOffline)G.open(f,M);else{if(-1!==h.indexOf("file:")){const n=decodeURIComponent(h.substring(5).toLowerCase());if(k.FilesToLoad[n]&&"undefined"!==typeof URL){try{let y;try{y=URL.createObjectURL(k.FilesToLoad[n])}catch(p){y=URL.createObjectURL(k.FilesToLoad[n])}T.src=y,A=!0}catch(E){T.src=""}return T}}M()}return T},f=(n,y,H,o,G)=>{const k=new FileReader,i={onCompleteObservable:new h.c,abort:()=>k.abort()};return k.onloadend=()=>i.onCompleteObservable.notifyObservers(i),G&&(k.onerror=()=>{G(new l(`Unable to read ${n.name}`,n))}),k.onload=n=>{y(n.target.result)},H&&(k.onprogress=H),o?k.readAsArrayBuffer(n):k.readAsText(n),i},c=(n,y,H,o,G,B,V)=>{if(n.name)return f(n,y,H,G,B?n=>{B(void 0,n)}:void 0);const q=n;if(-1!==q.indexOf("file:")){let n=decodeURIComponent(q.substring(5).toLowerCase());0===n.indexOf("./")&&(n=n.substring(2));const o=k.FilesToLoad[n];if(o)return f(o,y,H,G,B?n=>B(void 0,new z(n.message,n.file)):void 0)}const{match:U,type:T}=a(q);if(U){const n={onCompleteObservable:new h.c,abort:()=>()=>{}};try{const n=G?O(q):e(q);y(n,void 0,T)}catch(i){B?B(void 0,i):b.d.Error(i.message||"Failed to parse the Data URL")}return A.c.SetImmediate((()=>{n.onCompleteObservable.notifyObservers(n)})),n}return p(q,((n,H)=>{y(n,null===H||void 0===H?void 0:H.responseURL,null===H||void 0===H?void 0:H.getResponseHeader("content-type"))}),H,o,G,B?n=>{B(n.request,new z(n.message,n.request))}:void 0,V)},p=(n,y,H,k,i,B,V)=>{n=v.CleanUrl(n),n=v.PreprocessUrl(n);const q=v.BaseUrl+n;let A=!1;const U={onCompleteObservable:new h.c,abort:()=>A=!0},T=()=>{let n,h=new o.b,k=null;const T=()=>{h&&(H&&h.removeEventListener("progress",H),n&&h.removeEventListener("readystatechange",n),h.removeEventListener("loadend",W))};let W=()=>{T(),U.onCompleteObservable.notifyObservers(U),U.onCompleteObservable.clear(),H=void 0,n=null,W=null,B=void 0,V=void 0,y=void 0};U.abort=()=>{A=!0,W&&W(),h&&h.readyState!==(XMLHttpRequest.DONE||4)&&h.abort(),null!==k&&(clearTimeout(k),k=null),h=null};const z=n=>{const y=n.message||"Unknown error";B&&h?B(new Q(y,h)):b.d.Error(y)},l=b=>{if(h){if(h.open("GET",q),V)try{V(h)}catch(U){return void z(U)}i&&(h.responseType="arraybuffer"),H&&h.addEventListener("progress",H),W&&h.addEventListener("loadend",W),n=()=>{if(!A&&h&&h.readyState===(XMLHttpRequest.DONE||4)){if(n&&h.removeEventListener("readystatechange",n),h.status>=200&&h.status<300||0===h.status&&(!(0,G.p)()||X())){const n=i?h.response:h.responseText;if(null!==n){try{y&&y(n,h)}catch(U){z(U)}return}}const H=v.DefaultRetryStrategy;if(H){const n=H(q,h,b);if(-1!==n)return T(),h=new o.b,void(k=setTimeout((()=>l(b+1)),n))}const V=new Q("Error status: "+h.status+" "+h.statusText+" - Unable to load "+q,h);B&&B(V)}},h.addEventListener("readystatechange",n),h.send()}};l(0)};if(k&&k.enableSceneOffline){const o=n=>{n&&n.status>400?B&&B(n):T()},G=()=>{k&&k.loadFile(v.BaseUrl+n,(n=>{!A&&y&&y(n),U.onCompleteObservable.notifyObservers(U)}),H?n=>{!A&&H&&H(n)}:void 0,o,i)};k.open(G,o)}else T();return U},E=n=>{const{match:y,type:H}=a(n);if(y)return H||void 0;const o=n.lastIndexOf(".");switch(n.substring(o+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"rh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},X=()=>"undefined"!==typeof location&&"file:"===location.protocol,d=n=>W.test(n),a=n=>{const y=W.exec(n);if(null===y||0===y.length)return{match:!1,type:""};return{match:!0,type:y[0].replace("data:","").replace("base64,","")}};function O(n){return(0,B.e)(n.split(",")[1])}const e=n=>(0,B.i)(n.split(",")[1]);let w;T.e._FileToolsLoadImage=M,U.e.loadFile=c,V.k.loadFile=c;((n,y,H,o,G,h,k,i,B,V)=>{w={DecodeBase64UrlToBinary:n,DecodeBase64UrlToString:y,DefaultRetryStrategy:H.DefaultRetryStrategy,BaseUrl:H.BaseUrl,CorsBehavior:H.CorsBehavior,PreprocessUrl:H.PreprocessUrl,IsBase64DataUrl:o,IsFileURL:G,LoadFile:h,LoadImage:k,ReadFile:i,RequestFile:B,SetCorsBehavior:V},Object.defineProperty(w,"DefaultRetryStrategy",{get:function(){return H.DefaultRetryStrategy},set:function(n){H.DefaultRetryStrategy=n}}),Object.defineProperty(w,"BaseUrl",{get:function(){return H.BaseUrl},set:function(n){H.BaseUrl=n}}),Object.defineProperty(w,"PreprocessUrl",{get:function(){return H.PreprocessUrl},set:function(n){H.PreprocessUrl=n}}),Object.defineProperty(w,"CorsBehavior",{get:function(){return H.CorsBehavior},set:function(n){H.CorsBehavior=n}})})(O,e,v,d,X,c,M,f,p,F)},11253:(n,y,H)=>{function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(n=>{const y=16*Math.random()|0;return("x"===n?y:3&y|8).toString(16)}))}H.d(y,{b:()=>o})},11243:(n,y,H)=>{H.d(y,{d:()=>h});var o=H(11114),G=H(11248);class h{static Instantiate(n){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[n])return this.RegisteredExternalClasses[n];const y=(0,G.e)(n);if(y)return y;o.d.Warn(n+" not found, you may have missed an import.");const H=n.split(".");let h=window||this;for(let o=0,G=H.length;o<G;o++)h=h[H[o]];return"function"!==typeof h?null:h}}h.RegisteredExternalClasses={}},11125:(n,y,H)=>{H.d(y,{d:()=>G});var o=H(11107);class G{static get Now(){return(0,o.p)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11167:(n,y,H)=>{H.d(y,{e:()=>k,i:()=>h,m:()=>o,q:()=>G});const o=n=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(n);let y="";for(let H=0;H<n.byteLength;H++)y+=String.fromCharCode(n[H]);return y},G=n=>{const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let H,o,G,h,k,i,B,V="",q=0;const b=ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n);for(;q<b.length;)H=b[q++],o=q<b.length?b[q++]:Number.NaN,G=q<b.length?b[q++]:Number.NaN,h=H>>2,k=(3&H)<<4|o>>4,i=(15&o)<<2|G>>6,B=63&G,isNaN(o)?i=B=64:isNaN(G)&&(B=64),V+=y.charAt(h)+y.charAt(k)+y.charAt(i)+y.charAt(B);return V},h=n=>atob(n),k=n=>{const y=h(n),H=y.length,o=new Uint8Array(new ArrayBuffer(H));for(let G=0;G<H;G++)o[G]=y.charCodeAt(G);return o.buffer}},11256:(n,y,H)=>{function o(n){let y=1;do{y*=2}while(y<n);return y===n}function G(n,y,H){return n*(1-H)+y*H}function h(n){const y=k(n),H=i(n);return y-n>n-H?H:y}function k(n){return n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,++n}function i(n){return n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,(n|=n>>16)-(n>>1)}function B(n,y){let H;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:H=i(n);break;case 2:H=h(n);break;default:H=k(n)}return Math.min(H,y)}H.d(y,{b:()=>i,d:()=>B,e:()=>o,f:()=>G,i:()=>h})},11094:(n,y,H)=>{H.r(y),H.d(y,{AsyncLoop:()=>l,Tools:()=>z,className:()=>Q});var o=H(11099),G=H(11107),h=H(11114),k=H(11118),i=H(11125),B=H(11134),V=H(11140),q=H(11149),b=H(11154),A=H(11185),U=H(11243),T=H(11253),W=H(11256);class z{static get BaseUrl(){return b.e.BaseUrl}static set BaseUrl(n){b.e.BaseUrl=n}static get CleanUrl(){return b.e.CleanUrl}static set CleanUrl(n){b.e.CleanUrl=n}static IsAbsoluteUrl(n){return 0===n.indexOf("//")||-1!==n.indexOf("://")&&(-1!==n.indexOf(".")&&(-1!==n.indexOf("/")&&(!(n.indexOf(":")>n.indexOf("/"))&&(n.indexOf("://")<n.indexOf(".")||(0===n.indexOf("data:")||0===n.indexOf("blob:"))))))}static set ScriptBaseUrl(n){b.e.ScriptBaseUrl=n}static get ScriptBaseUrl(){return b.e.ScriptBaseUrl}static set CDNBaseUrl(n){z.ScriptBaseUrl=n,z.AssetBaseUrl=n}static set ScriptPreprocessUrl(n){b.e.ScriptPreprocessUrl=n}static get ScriptPreprocessUrl(){return b.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return b.e.DefaultRetryStrategy}static set DefaultRetryStrategy(n){b.e.DefaultRetryStrategy=n}static get CorsBehavior(){return b.e.CorsBehavior}static set CorsBehavior(n){b.e.CorsBehavior=n}static get UseFallbackTexture(){return q.c.UseFallbackTexture}static set UseFallbackTexture(n){q.c.UseFallbackTexture=n}static get RegisteredExternalClasses(){return U.d.RegisteredExternalClasses}static set RegisteredExternalClasses(n){U.d.RegisteredExternalClasses=n}static get fallbackTexture(){return q.c.FallbackTexture}static set fallbackTexture(n){q.c.FallbackTexture=n}static FetchToRef(n,y,H,o,G,h){const k=4*((Math.abs(n)*H%H|0)+(Math.abs(y)*o%o|0)*H);h.r=G[k]/255,h.g=G[k+1]/255,h.b=G[k+2]/255,h.a=G[k+3]/255}static Mix(n,y,H){return 0}static Instantiate(n){return U.d.Instantiate(n)}static SetImmediate(n){A.c.SetImmediate(n)}static IsExponentOfTwo(n){return!0}static FloatRound(n){return Math.fround(n)}static GetFilename(n){const y=n.lastIndexOf("/");return y<0?n:n.substring(y+1)}static GetFolderPath(n){let y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const H=n.lastIndexOf("/");return H<0?y?n:"":n.substring(0,H+1)}static ToDegrees(n){return 180*n/Math.PI}static ToRadians(n){return n*Math.PI/180}static SmoothAngleChange(n,y){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const o=this.ToRadians(n),G=this.ToRadians(y);return this.ToDegrees(Math.atan2((1-H)*Math.sin(G)+H*Math.sin(o),(1-H)*Math.cos(G)+H*Math.cos(o)))}static MakeArray(n,y){return!0===y||void 0!==n&&null!=n?Array.isArray(n)?n:[n]:null}static GetPointerPrefix(n){return(0,G.p)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(n,y){(0,b.x)(n,y)}static SetReferrerPolicyBehavior(n,y){y.referrerPolicy=n}static get PreprocessUrl(){return b.e.PreprocessUrl}static set PreprocessUrl(n){b.e.PreprocessUrl=n}static LoadImage(n,y,H,o,G,h){return(0,b.s)(n,y,H,o,G,h)}static LoadFile(n,y,H,o,G,h){return(0,b.o)(n,y,H,o,G,h)}static async LoadFileAsync(n){let y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((H,o)=>{(0,b.o)(n,(n=>{H(n)}),void 0,void 0,y,((n,y)=>{o(y)}))}))}static GetAssetUrl(n){if(!n)return"";if(z.AssetBaseUrl&&n.startsWith(z._DefaultAssetsUrl)){const y="/"===z.AssetBaseUrl[z.AssetBaseUrl.length-1]?z.AssetBaseUrl.substring(0,z.AssetBaseUrl.length-1):z.AssetBaseUrl;return n.replace(z._DefaultAssetsUrl,y)}return n}static GetBabylonScriptURL(n,y){if(!n)return"";if(z.ScriptBaseUrl&&n.startsWith(z._DefaultCdnUrl)){const y="/"===z.ScriptBaseUrl[z.ScriptBaseUrl.length-1]?z.ScriptBaseUrl.substring(0,z.ScriptBaseUrl.length-1):z.ScriptBaseUrl;n=n.replace(z._DefaultCdnUrl,y)}return n=z.ScriptPreprocessUrl(n),y&&(n=z.GetAbsoluteUrl(n)),n}static LoadBabylonScript(n,y,H,o){n=z.GetBabylonScriptURL(n),z.LoadScript(n,y,H)}static async LoadBabylonScriptAsync(n){return n=z.GetBabylonScriptURL(n),await z.LoadScriptAsync(n)}static LoadScript(n,y,H,o){let h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(n),y&&y()}catch(B){null===H||void 0===H||H(`Unable to load script '${n}' in worker`,B)}return}if(!(0,G.p)())return void(null===H||void 0===H||H(`Cannot load script '${n}' outside of a window or a worker`));const k=document.getElementsByTagName("head")[0],i=document.createElement("script");h?(i.setAttribute("type","module"),i.innerText=n):(i.setAttribute("type","text/javascript"),i.setAttribute("src",n)),o&&(i.id=o),i.onload=()=>{y&&y()},i.onerror=y=>{H&&H(`Unable to load script '${n}'`,y)},k.appendChild(i)}static async LoadScriptAsync(n,y){return await new Promise(((H,o)=>{this.LoadScript(n,(()=>{H()}),((n,y)=>{o(y||new Error(n))}),y)}))}static ReadFileAsDataURL(n,y,H){const G=new FileReader,h={onCompleteObservable:new o.c,abort:()=>G.abort()};return G.onloadend=()=>{h.onCompleteObservable.notifyObservers(h)},G.onload=n=>{y(n.target.result)},G.onprogress=H,G.readAsDataURL(n),h}static ReadFile(n,y,H,o,G){return(0,b.t)(n,y,H,o,G)}static FileAsURL(n){const y=new Blob([n]);return window.URL.createObjectURL(y)}static Format(n){let y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return n.toFixed(y)}static DeepCopy(n,y,H,o){k.c.DeepCopy(n,y,H,o)}static IsEmpty(n){for(const y in n)if(Object.prototype.hasOwnProperty.call(n,y))return!1;return!0}static RegisterTopRootEvents(n,y){for(let o=0;o<y.length;o++){const G=y[o];n.addEventListener(G.name,G.handler,!1);try{window.parent&&window.parent.addEventListener(G.name,G.handler,!1)}catch(H){}}}static UnregisterTopRootEvents(n,y){for(let o=0;o<y.length;o++){const G=y[o];n.removeEventListener(G.name,G.handler);try{n.parent&&n.parent.removeEventListener(G.name,G.handler)}catch(H){}}}static async DumpFramebuffer(n,y,H,o){throw(0,B.c)("DumpTools")}static DumpData(n,y,H,o){throw(0,B.c)("DumpTools")}static async DumpDataAsync(n,y,H){throw(0,B.c)("DumpTools")}static _IsOffScreenCanvas(n){return void 0!==n.convertToBlob}static ToBlob(n,y){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",o=arguments.length>3?arguments[3]:void 0;z._IsOffScreenCanvas(n)||n.toBlob||(n.toBlob=function(n,y,H){setTimeout((()=>{const o=atob(this.toDataURL(y,H).split(",")[1]),G=o.length,h=new Uint8Array(G);for(let n=0;n<G;n++)h[n]=o.charCodeAt(n);n(new Blob([h]))}))}),z._IsOffScreenCanvas(n)?n.convertToBlob({type:H,quality:o}).then((n=>y(n))):n.toBlob((function(n){y(n)}),H,o)}static DownloadBlob(n,y){if("download"in document.createElement("a")){if(!y){const n=new Date;y="screenshot_"+((n.getFullYear()+"-"+(n.getMonth()+1)).slice(2)+"-"+n.getDate()+"_"+n.getHours()+"-"+("0"+n.getMinutes()).slice(-2))+".png"}z.Download(n,y)}else if(n&&"undefined"!==typeof URL){const y=URL.createObjectURL(n),H=window.open("");if(!H)return;const o=H.document.createElement("img");o.onload=function(){URL.revokeObjectURL(y)},o.src=y,H.document.body.appendChild(o)}}static EncodeScreenshotCanvasData(n,y){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",o=arguments.length>3?arguments[3]:void 0,G=arguments.length>4?arguments[4]:void 0;if("string"!==typeof o&&y){if(y){if(z._IsOffScreenCanvas(n))return void n.convertToBlob({type:H,quality:G}).then((n=>{const H=new FileReader;H.readAsDataURL(n),H.onloadend=()=>{const n=H.result;y(n)}}));const o=n.toDataURL(H,G);y(o)}}else this.ToBlob(n,(function(n){n&&z.DownloadBlob(n,o),y&&y("")}),H,G)}static Download(n,y){if("undefined"===typeof URL)return;const H=window.URL.createObjectURL(n),o=document.createElement("a");document.body.appendChild(o),o.style.display="none",o.href=H,o.download=y,o.addEventListener("click",(()=>{o.parentElement&&o.parentElement.removeChild(o)})),o.click(),window.URL.revokeObjectURL(H)}static BackCompatCameraNoPreventDefault(n){return"boolean"===typeof n[0]?n[0]:"boolean"===typeof n[1]&&n[1]}static CreateScreenshot(n,y,H,o){throw(0,B.c)("ScreenshotTools")}static async CreateScreenshotAsync(n,y,H){throw(0,B.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(n,y,H,o){throw(0,B.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(n,y,H){throw(0,B.c)("ScreenshotTools")}static RandomId(){return(0,T.b)()}static IsBase64(n){return(0,b.k)(n)}static DecodeBase64(n){return(0,b.c)(n)}static get errorsCount(){return h.d.errorsCount}static Log(n){h.d.Log(n)}static Warn(n){h.d.Warn(n)}static Error(n){h.d.Error(n)}static get LogCache(){return h.d.LogCache}static ClearLogCache(){h.d.ClearLogCache()}static set LogLevels(n){h.d.LogLevels=n}static set PerformanceLogLevel(n){return(n&z.PerformanceUserMarkLogLevel)===z.PerformanceUserMarkLogLevel?(z.StartPerformanceCounter=z._StartUserMark,void(z.EndPerformanceCounter=z._EndUserMark)):(n&z.PerformanceConsoleLogLevel)===z.PerformanceConsoleLogLevel?(z.StartPerformanceCounter=z._StartPerformanceConsole,void(z.EndPerformanceCounter=z._EndPerformanceConsole)):(z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,void(z.EndPerformanceCounter=z._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(n,y){}static _EndPerformanceCounterDisabled(n,y){}static _StartUserMark(n){let y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!z._Performance){if(!(0,G.p)())return;z._Performance=window.performance}y&&z._Performance.mark&&z._Performance.mark(n+"-Begin")}static _EndUserMark(n){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&z._Performance.mark&&(z._Performance.mark(n+"-End"),z._Performance.measure(n,n+"-Begin",n+"-End"))}static _StartPerformanceConsole(n){let y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y&&(z._StartUserMark(n,y),console.time&&console.time(n))}static _EndPerformanceConsole(n){let y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y&&(z._EndUserMark(n,y),console.timeEnd(n))}static get Now(){return i.d.Now}static GetClassName(n){let y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],H=null;if(!y&&n.getClassName)H=n.getClassName();else{if(n instanceof Object){H=(y?n:Object.getPrototypeOf(n)).constructor.__bjsclassName__}H||(H=typeof n)}return H}static First(n,y){for(const H of n)if(y(H))return H;return null}static getFullClassName(n){let y=arguments.length>1&&void 0!==arguments[1]&&arguments[1],H=null,o=null;if(!y&&n.getClassName)H=n.getClassName();else{if(n instanceof Object){const G=y?n:Object.getPrototypeOf(n);H=G.constructor.__bjsclassName__,o=G.constructor.__bjsmoduleName__}H||(H=typeof n)}return H?(null!=o?o+".":"")+H:null}static async DelayAsync(n){await new Promise((y=>{setTimeout((()=>{y()}),n)}))}static IsSafari(){return!!(0,G.m)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function Q(n,y){return H=>{H.__bjsclassName__=n,H.__bjsmoduleName__=null!=y?y:null}}z.AssetBaseUrl="",z.UseCustomRequestHeaders=!1,z.CustomRequestHeaders=V.b.CustomRequestHeaders,z.GetDOMTextContent=G.e,z._DefaultCdnUrl="https://cdn.babylonjs.com",z._DefaultAssetsUrl="https://assets.babylonjs.com/core",z.GetAbsoluteUrl="object"===typeof document?n=>{const y=document.createElement("a");return y.href=n,y.href}:"function"===typeof URL&&"object"===typeof location?n=>new URL(n,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},z.NoneLogLevel=h.d.NoneLogLevel,z.MessageLogLevel=h.d.MessageLogLevel,z.WarningLogLevel=h.d.WarningLogLevel,z.ErrorLogLevel=h.d.ErrorLogLevel,z.AllLogLevel=h.d.AllLogLevel,z.IsWindowObjectExist=G.p,z.PerformanceNoneLogLevel=0,z.PerformanceUserMarkLogLevel=1,z.PerformanceConsoleLogLevel=2,z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,z.EndPerformanceCounter=z._EndPerformanceCounterDisabled;class l{constructor(n,y,H){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=n,this.index=o-1,this._done=!1,this._fn=y,this._successCallback=H}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(n,y,H){const o=new l(n,y,H,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return o.executeNext(),o}static SyncAsyncForLoop(n,y,H,o,G){let h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return l.Run(Math.ceil(n/y),(o=>{G&&G()?o.breakLoop():setTimeout((()=>{for(let h=0;h<y;++h){const k=o.index*y+h;if(k>=n)break;if(H(k),G&&G()){o.breakLoop();break}}o.executeNext()}),h)}),o)}}z.Mix=W.f,z.IsExponentOfTwo=W.e,q.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11248:(n,y,H)=>{H.d(y,{e:()=>h,h:()=>G});const o={};function G(n,y){o[n]=y}function h(n){return o[n]}},11140:(n,y,H)=>{H.d(y,{b:()=>o});class o{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(o.CustomRequestHeaders).length>0||o.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const n in o.CustomRequestHeaders){const y=o.CustomRequestHeaders[n];y&&this._xhr.setRequestHeader(n,y)}}_shouldSkipRequestModifications(n){return o.SkipRequestModificationForBabylonCDN&&(n.includes("preview.babylonjs.com")||n.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(n){this._xhr.onprogress=n}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(n){this._xhr.responseType=n}get timeout(){return this._xhr.timeout}set timeout(n){this._xhr.timeout=n}addEventListener(n,y,H){this._xhr.addEventListener(n,y,H)}removeEventListener(n,y,H){this._xhr.removeEventListener(n,y,H)}abort(){this._xhr.abort()}send(n){o.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(n)}open(n,y){for(const H of o.CustomRequestModifiers){if(this._shouldSkipRequestModifications(y))return;y=H(this._xhr,y)||y}y=(y=y.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=y,this._xhr.open(n,y,!0)}setRequestHeader(n,y){this._xhr.setRequestHeader(n,y)}getResponseHeader(n){return this._xhr.getResponseHeader(n)}}o.CustomRequestHeaders={},o.CustomRequestModifiers=new Array,o.SkipRequestModificationForBabylonCDN=!0}}]);