"use strict";(self.agop5zpabxv=self.agop5zpabxv||[]).push([[8],{12247:(H,u,J)=>{J.d(u,{d:()=>C});var O=J(12203),U=J(12185),h=J(12251),w=J(12277),g=J(12197);class B{constructor(){let H=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,H&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(H){this._zOffset!==H&&(this._zOffset=H,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(H){this._zOffsetUnits!==H&&(this._zOffsetUnits=H,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(H){this._cullFace!==H&&(this._cullFace=H,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(H){this._cull!==H&&(this._cull=H,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(H){this._depthFunc!==H&&(this._depthFunc=H,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(H){this._depthMask!==H&&(this._depthMask=H,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(H){this._depthTest!==H&&(this._depthTest=H,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(H){this._frontFace!==H&&(this._frontFace=H,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(H){this.isDirty&&(this._isCullDirty&&(this.cull?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(H.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(H.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?H.enable(H.DEPTH_TEST):H.disable(H.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(H.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(H.enable(H.POLYGON_OFFSET_FILL),H.polygonOffset(this.zOffset,this.zOffsetUnits)):H.disable(H.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(H.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class b{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(H){this._func!==H&&(this._func=H,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(H){this._funcRef!==H&&(this._funcRef=H,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(H){this._funcMask!==H&&(this._funcMask=H,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(H){this._opStencilFail!==H&&(this._opStencilFail=H,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(H){this._opDepthFail!==H&&(this._opDepthFail=H,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(H){this._opStencilDepthPass!==H&&(this._opStencilDepthPass=H,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(H){this._mask!==H&&(this._mask=H,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(H){this._enabled!==H&&(this._enabled=H,this._isStencilTestDirty=!0)}constructor(){let H=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,H&&this.reset()}reset(){var H;this.stencilMaterial=void 0,null===(H=this.stencilGlobal)||void 0===H||H.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(H){var u;if(!H)return;const J=!this.useStencilGlobalOnly&&!(null===(u=this.stencilMaterial)||void 0===u||!u.enabled);this.enabled=J?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=J?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=J?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=J?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=J?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=J?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=J?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=J?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?H.enable(H.STENCIL_TEST):H.disable(H.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(H.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(H.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(H.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class d{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=d.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=d.KEEP,this.opDepthFail=d.KEEP,this.opStencilDepthPass=d.REPLACE}get stencilFunc(){return this.func}set stencilFunc(H){this.func=H}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(H){this.funcRef=H}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(H){this.funcMask=H}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(H){this.opStencilFail=H}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(H){this.opDepthFail=H}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(H){this.opStencilDepthPass=H}get stencilMask(){return this.mask}set stencilMask(H){this.mask=H}get stencilTest(){return this.enabled}set stencilTest(H){this.enabled=H}}d.ALWAYS=519,d.KEEP=7680,d.REPLACE=7681;class G{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(H){this._alphaBlend!==H&&(this._alphaBlend=H,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(H,u,J,O){this._blendConstants[0]===H&&this._blendConstants[1]===u&&this._blendConstants[2]===J&&this._blendConstants[3]===O||(this._blendConstants[0]=H,this._blendConstants[1]=u,this._blendConstants[2]=J,this._blendConstants[3]=O,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(H,u,J,O){this._blendFunctionParameters[0]===H&&this._blendFunctionParameters[1]===u&&this._blendFunctionParameters[2]===J&&this._blendFunctionParameters[3]===O||(this._blendFunctionParameters[0]=H,this._blendFunctionParameters[1]=u,this._blendFunctionParameters[2]=J,this._blendFunctionParameters[3]=O,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(H,u){this._blendEquationParameters[0]===H&&this._blendEquationParameters[1]===u||(this._blendEquationParameters[0]=H,this._blendEquationParameters[1]=u,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(H){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?H.enable(H.BLEND):H.disable(H.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(H.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(H.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(H.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var P=J(12199),mH=J(12280),l=J(12178),r=J(12175),p=J(12235),a=J(12290);function k(H,u){if((0,l.k)()){const{requestAnimationFrame:J}=u||window;if("function"===typeof J)return J(H)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(H);return setTimeout(H,16)}class C{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(H){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get rh(){return this._useReverseDepthBuffer}set rh(H){H!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=H,this._depthCullingState.depthFunc=H?518:515)}setColorWrite(H){H!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=H)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(H){if(H)return this.isNDCHalfZRange?H.IS_NDC_HALF_ZRANGE="":delete H.IS_NDC_HALF_ZRANGE,this.rh?H.USE_REVERSE_DEPTHBUFFER="":delete H.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?H.USE_EXACT_SRGB_CONVERSIONS="":delete H.USE_EXACT_SRGB_CONVERSIONS);{let H="";return this.isNDCHalfZRange&&(H+="#define IS_NDC_HALF_ZRANGE"),this.rh&&(H&&(H+="\n"),H+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(H&&(H+="\n"),H+="#define USE_EXACT_SRGB_CONVERSIONS"),H}}_rebuildInternalTextures(){const H=this._internalTexturesCache.slice();for(const u of H)u._rebuild()}_rebuildRenderTargetWrappers(){const H=this._renderTargetWrapperCache.slice();for(const u of H)u._rebuild()}_rebuildEffects(){for(const H in this._compiledEffects){const u=this._compiledEffects[H];u._pipelineContext=null,u._prepareEffect()}h.Effect.ResetCache()}_rebuildGraphicsResources(){var H;this.wipeCaches(!0),this._rebuildEffects(),null===(H=this._rebuildComputeEffects)||void 0===H||H.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){U.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(H){setTimeout((()=>{this._clearEmptyResources();const u=this._depthCullingState.depthTest,J=this._depthCullingState.depthFunc,O=this._depthCullingState.depthMask,U=this._stencilState.stencilTest;H(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=u,this._depthCullingState.depthFunc=J,this._depthCullingState.depthMask=O,this._stencilState.stencilTest=U,this._flagContextRestored()}),0)}get B(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(H){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(H){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const H=new Uint8Array(4),u=[H,H,H,H,H,H];this._emptyCubeTexture=this.createRawCubeTexture(u,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(H){if(!H)return this._activeRenderLoops.length=0,void this._cancelFrame();const u=this._activeRenderLoops.indexOf(H);u>=0&&(this._activeRenderLoops.splice(u,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const H=this._frameHandler;if(this._frameHandler=0,(0,l.k)()){const{cancelAnimationFrame:u}=this.getHostWindow()||window;if("function"===typeof u)return u(H)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(H);return clearTimeout(H)}}Lh(){this.onBeginFrameObservable.notifyObservers(this)}Ah(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(H){this._maxFPS=H,void 0!==H&&(this._minFrameTime=H<=0?Number.MAX_VALUE:1e3/H)}_isOverFrameTime(H){if(!H||void 0===this._maxFPS)return!1;const u=H-this._lastFrameTime;return this._lastFrameTime=H,this._renderAccumulator+=u,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(H){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(H)){let H=!0;(this.B||!this.renderEvenInBackground&&this._windowIsBackground)&&(H=!1),H&&(this.Lh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ah())}}_renderLoop(H){this._processFrame(H),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let H=0;H<this._activeRenderLoops.length;H++){(0,this._activeRenderLoops[H])()}}_renderViews(){return!1}_queueNewFrame(H,u){return k(H,u)}runRenderLoop(H){-1===this._activeRenderLoops.indexOf(H)&&(this._activeRenderLoops.push(H),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(H){this._depthCullingState.depthTest=H}setZOffset(H){this._depthCullingState.zOffset=this.rh?-H:H}getZOffset(){const H=this._depthCullingState.zOffset;return this.rh?-H:H}setZOffsetUnits(H){this._depthCullingState.zOffsetUnits=this.rh?-H:H}getZOffsetUnits(){const H=this._depthCullingState.zOffsetUnits;return this.rh?-H:H}getHostWindow(){return(0,l.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(H){this._compatibilityMode=!0}_rebuildTextures(){for(const H of this.scenes)H._rebuildTextures();for(const H of this._virtualScenes)H._rebuildTextures()}_releaseRenderTargetWrapper(H){const u=this._renderTargetWrapperCache.indexOf(H);-1!==u&&this._renderTargetWrapperCache.splice(u,1)}get currentViewport(){return this._cachedViewport}setViewport(H,u,J){const O=u||this.getRenderWidth(),U=J||this.getRenderHeight(),h=H.x||0,w=H.y||0;this._cachedViewport=H,this._viewport(h*O,w*U,O*H.width,U*H.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(H){return new Path2D(H)}get description(){let H=this.name+this.version;return this._caps.parallelShaderCompile&&(H+=" - Parallel shader compilation"),H}_createTextureBase(H,u,J,h){let w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,G=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,P=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,l=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,r=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,p=arguments.length>13?arguments[13]:void 0,k=arguments.length>14?arguments[14]:void 0,j=arguments.length>15?arguments[15]:void 0;const M="data:"===(H=H||"").substring(0,5),L="blob:"===H.substring(0,5),Z=M&&-1!==H.indexOf(";base64,"),Y=P||new mH.c(this,1);Y!==P&&(Y.label=H.substring(0,60));const F=H;!this._transformTextureUrl||Z||P||G||(H=this._transformTextureUrl(H)),F!==H&&(Y._originalUrl=F);const s=H.lastIndexOf(".");let A=r||(s>-1?H.substring(s).toLowerCase():"");A.indexOf("?")>-1&&(A=A.split("?")[0]);const t=(0,a.c)(A,p);h&&h.addPendingData(Y),Y.url=H,Y.generateMipMaps=!u,Y.samplingMode=w,Y.invertY=J,Y._useSRGBBuffer=this._getUseSRGBBuffer(!!j,u),this._doNotHandleContextLost||(Y._buffer=G);let e=null;g&&!P&&(e=Y.onLoadedObservable.add(g)),P||this._internalTexturesCache.push(Y);const c=(J,P)=>{h&&h.removePendingData(Y),H===F?(e&&Y.onLoadedObservable.remove(e),O.e.UseFallbackTexture&&H!==O.e.FallbackTexture&&this._createTextureBase(O.e.FallbackTexture,u,Y.invertY,h,w,null,B,b,d,G,Y),J=(J||"Unknown error")+(O.e.UseFallbackTexture?" - Fallback texture was used":""),Y.onErrorObservable.notifyObservers({message:J,exception:P}),B&&B(J,P)):(U.b.Warn(`Failed to load ${H}, falling back to ${F}`),this._createTextureBase(F,u,Y.invertY,h,w,g,B,b,d,G,Y,l,r,p,k,j))};if(t){const u=async H=>{(await t).loadData(H,Y,((H,u,J,O,U,g)=>{g?c("TextureLoader failed to load data"):b(Y,A,h,{width:H,height:u},Y.invertY,!J,O,(()=>(U(),!1)),w)}),k)};G?G instanceof ArrayBuffer?u(new Uint8Array(G)):ArrayBuffer.isView(G)?u(G):B&&B("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(H,(H=>{u(new Uint8Array(H))}),void 0,h?h.offlineProvider:void 0,!0,((H,u)=>{c("Unable to load "+(H&&H.responseURL,u))}))}else{const J=H=>{L&&!this._doNotHandleContextLost&&(Y._buffer=H),b(Y,A,h,H,Y.invertY,u,!1,d,w)};!M||Z?G&&("string"===typeof G.decoding||G.close)?J(G):C._FileToolsLoadImage(H||"",J,c,h?h.offlineProvider:null,p,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof G||G instanceof ArrayBuffer||ArrayBuffer.isView(G)||G instanceof Blob?C._FileToolsLoadImage(G,J,c,h?h.offlineProvider:null,p,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):G&&J(G)}return Y}_rebuildBuffers(){for(const H of this._uniformBuffers)H._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,l.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const H in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,H)&&(this._boundTexturesCache[H]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(H){this._name=H}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(H){this._hardwareScalingLevel=H,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(H){this._doNotHandleContextLost=H}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(H,u,J){var U,h;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new B,this._stencilStateComposer=new b,this._stencilState=new d,this._alphaState=new G,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new r.b,this.onCanvasFocusObservable=new r.b,this.onNewSceneAddedObservable=new r.b,this.onResizeObservable=new r.b,this.onCanvasPointerOutObservable=new r.b,this.onEffectErrorObservable=new r.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new r.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=H=>this._renderLoop(H),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new r.b,this.onAfterShaderCompilationObservable=new r.b,this.onBeginFrameObservable=new r.b,this.onEndFrameObservable=new r.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new r.b,this.onContextRestoredObservable=new r.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.nh=new r.b,this.onReleaseEffectsObservable=new r.b,O.e.Instances.push(this),this.startTime=g.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,w.e.SetMatrixPrecision(!!u.useHighPrecisionMatrix),(0,l.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=J??!1,u.antialias=H??u.antialias,u.deterministicLockstep=u.deterministicLockstep??!1,u.lockstepMaxSteps=u.lockstepMaxSteps??4,u.timeStep=u.timeStep??1/60,u.Rh=u.Rh??!0,this._audioContext=(null===(U=u.audioEngineOptions)||void 0===U?void 0:U.audioContext)??null,this._audioDestination=(null===(h=u.audioEngineOptions)||void 0===h?void 0:h.audioDestination)??null,this.premultipliedAlpha=u.premultipliedAlpha??!0,this._doNotHandleContextLost=!!u.doNotHandleContextLost,this._isStencilEnable=!!u.Rh,this.useExactSrgbConversions=u.useExactSrgbConversions??!1;const P=(0,l.k)()&&window.devicePixelRatio||1,mH=u.limitDeviceRatio||P;J=J||u.adaptToDeviceRatio||!1,this._hardwareScalingLevel=J?1/Math.min(mH,P):1,this._lastDevicePixelRatio=P,this._creationOptions=u}resize(){let H,u,J=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const H=(0,l.k)()&&window.devicePixelRatio||1,u=this._lastDevicePixelRatio/H;this._lastDevicePixelRatio=H,this._hardwareScalingLevel*=u}if((0,l.k)()&&(0,l.e)())if(this._renderingCanvas){var O,U;const J=null===(O=(U=this._renderingCanvas).getBoundingClientRect)||void 0===O?void 0:O.call(U);H=this._renderingCanvas.clientWidth||(null===J||void 0===J?void 0:J.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,u=this._renderingCanvas.clientHeight||(null===J||void 0===J?void 0:J.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else H=window.innerWidth,u=window.innerHeight;else H=this._renderingCanvas?this._renderingCanvas.width:100,u=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(H/this._hardwareScalingLevel,u/this._hardwareScalingLevel,J)}setSize(H,u){let J=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(H|=0,u|=0,!J&&this._renderingCanvas.width===H&&this._renderingCanvas.height===u)return!1;if(this._renderingCanvas.width=H,this._renderingCanvas.height=u,this.scenes){for(let H=0;H<this.scenes.length;H++){const u=this.scenes[H];for(let H=0;H<u.cameras.length;H++){u.cameras[H]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(H,u,J,O,U,h,w,g,B,b,d){throw(0,P.d)("engine.rawTexture")}createRawCubeTexture(H,u,J,O,U,h,w,g){throw(0,P.d)("engine.rawTexture")}createRawTexture3D(H,u,J,O,U,h,w,g,B,b,d){throw(0,P.d)("engine.rawTexture")}createRawTexture2DArray(H,u,J,O,U,h,w,g,B,b,d){throw(0,P.d)("engine.rawTexture")}_sharedInit(H){this._renderingCanvas=H}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const H=navigator.userAgent;this.hostInformation.isMobile=-1!==H.indexOf("Mobile")||-1!==H.indexOf("Mac")&&(0,l.e)()&&"ontouchend"in document},this._checkForMobile(),(0,l.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(H){return document.createElement("video")}_reportDrawCall(){var H;let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(H=this._drawCalls)||void 0===H||H.addCount(u,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(H,u){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(H,u){return createImageBitmap(H,u)}resizeImageBitmap(H,u,J){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(H){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(H,u){if("undefined"===typeof document)return new OffscreenCanvas(H,u);const J=document.createElement("canvas");return J.width=H,J.height=u,J}createCanvas(H,u){return C._CreateCanvas(H,u)}static _FileToolsLoadImage(H,u,J,O,U,h,w){throw(0,P.d)("FileTools")}_loadFile(H,u,J,O,U,h){const w=(0,p.m)(H,u,J,O,U,h);return this._activeRequests.push(w),w.onCompleteObservable.add((()=>{const H=this._activeRequests.indexOf(w);-1!==H&&this._activeRequests.splice(H,1)})),w}static _FileToolsLoadFile(H,u,J,O,U,h){if(p.d.loadFile)return p.d.loadFile(H,u,J,O,U,h);throw(0,P.d)("FileTools")}dispose(){var H;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(H=this.releaseComputeEffects)||void 0===H||H.call(this),h.Effect.ResetCache();for(const J of this._activeRequests)J.abort();this._boundRenderFunction=null,this.nh.notifyObservers(this),this.nh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,l.k)()&&window.removeEventListener("resize",this._checkForMobile);const u=O.e.Instances.indexOf(this);u>=0&&O.e.Instances.splice(u,1),O.e.Instances.length||(O.e.OnEnginesDisposedObservable.notifyObservers(this),O.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(H){throw(0,P.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(H,u){for(let J=0;J<O.e.Instances.length;J++){const U=O.e.Instances[J];for(let J=0;J<U.scenes.length;J++)U.scenes[J].markAllMaterialsAsDirty(H,u)}}}C._RenderPassIdCounter=0,C._RescalePostProcessFactory=null,C.CollisionsEpsilon=.001,C.QueueNewFrame=k},12203:(H,u,J)=>{J.d(u,{e:()=>U});var O=J(12175);class U{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}U.Instances=[],U.OnEnginesDisposedObservable=new O.b,U._LastCreatedScene=null,U.UseFallbackTexture=!0,U.FallbackTexture=""},12277:(H,u,J)=>{J.d(u,{e:()=>O});class O{static SetMatrixPrecision(H){if(O.MatrixTrackPrecisionChange=!1,H&&!O.MatrixUse64Bits&&O.MatrixTrackedMatrices)for(let u=0;u<O.MatrixTrackedMatrices.length;++u){const H=O.MatrixTrackedMatrices[u],J=H.ih;H.ih=new Array(16);for(let u=0;u<16;++u)H.ih[u]=J[u]}O.MatrixUse64Bits=H,O.MatrixCurrentType=O.MatrixUse64Bits?Array:Float32Array,O.MatrixTrackedMatrices=null}}O.MatrixUse64Bits=!1,O.MatrixTrackPrecisionChange=!0,O.MatrixCurrentType=Float32Array,O.MatrixTrackedMatrices=[]},12290:(H,u,J)=>{J.d(u,{c:()=>w});var O=J(12185);const U=new Map;function h(H,u){(function(H){return U.delete(H)})(H)&&O.b.Warn(`Extension with the name '${H}' already exists`),U.set(H,u)}function w(H,u){"image/ktx"!==u&&"image/ktx2"!==u||(H=".ktx"),U.has(H)||(H.endsWith(".ies")&&h(".ies",(async()=>await J.e(15).then(J.bind(J,14730)).then((H=>new H._IESTextureLoader)))),H.endsWith(".dds")&&h(".dds",(async()=>await Promise.all([J.e(14),J.e(17),J.e(13),J.e(19),J.e(18),J.e(28)]).then(J.bind(J,14732)).then((H=>new H._DDSTextureLoader)))),H.endsWith(".basis")&&h(".basis",(async()=>await Promise.all([J.e(14),J.e(17),J.e(13),J.e(47)]).then(J.bind(J,14744)).then((H=>new H._BasisTextureLoader)))),H.endsWith(".env")&&h(".env",(async()=>await Promise.all([J.e(14),J.e(17),J.e(13),J.e(19),J.e(18),J.e(23),J.e(21),J.e(45),J.e(48)]).then(J.bind(J,14750)).then((H=>new H._ENVTextureLoader)))),H.endsWith(".hdr")&&h(".hdr",(async()=>await Promise.all([J.e(14),J.e(49)]).then(J.bind(J,14758)).then((H=>new H._HDRTextureLoader)))),(H.endsWith(".ktx")||H.endsWith(".ktx2"))&&(h(".ktx",(async()=>await J.e(30).then(J.bind(J,14762)).then((H=>new H._KTXTextureLoader)))),h(".ktx2",(async()=>await J.e(30).then(J.bind(J,14762)).then((H=>new H._KTXTextureLoader))))),H.endsWith(".tga")&&h(".tga",(async()=>await J.e(50).then(J.bind(J,14768)).then((H=>new H._TGATextureLoader)))),H.endsWith(".exr")&&h(".exr",(async()=>await J.e(16).then(J.bind(J,14777)).then((H=>new H._ExrTextureLoader)))));const O=U.get(H);return O?Promise.resolve(O(u)):null}},12280:(H,u,J)=>{J.d(u,{c:()=>w});var O,U=J(12175),h=J(12284);!function(H){H[H.Unknown=0]="Unknown",H[H.Url=1]="Url",H[H.Temp=2]="Temp",H[H.Raw=3]="Raw",H[H.Dynamic=4]="Dynamic",H[H.RenderTarget=5]="RenderTarget",H[H.MultiRenderTarget=6]="MultiRenderTarget",H[H.Cube=7]="Cube",H[H.CubeRaw=8]="CubeRaw",H[H.CubePrefiltered=9]="CubePrefiltered",H[H.Raw3D=10]="Raw3D",H[H.Raw2DArray=11]="Raw2DArray",H[H.DepthStencil=12]="DepthStencil",H[H.CubeRawRGBD=13]="CubeRawRGBD",H[H.Depth=14]="Depth"}(O||(O={}));class w extends h.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(H){this.generateMipMaps=H}get uniqueId(){return this._uniqueId}_setUniqueId(H){this._uniqueId=H}getEngine(){return this._engine}get source(){return this._source}constructor(H,u){let J=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new U.b,this.onErrorObservable=new U.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=H,this._source=u,this._uniqueId=w._Counter++,J||(this._hardwareTexture=H._createHardwareTexture())}incrementReferences(){this._references++}updateSize(H,u){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,H,u,J),this.width=H,this.height=u,this.depth=J,this.baseWidth=H,this.baseHeight=u,this.baseDepth=J,this._size=H*u*J}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const H=this.onRebuildCallback(this),u=u=>{u._swapAndDie(this,!1),this.isReady=H.isReady};return void(H.isAsync?H.proxy.then(u):u(H.proxy))}let H;switch(this.source){case 2:case 12:case 14:break;case 1:return void(H=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(H=>{H._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:H=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),H._swapAndDie(this,!1),this.isReady=!0;break;case 10:H=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),H._swapAndDie(this,!1),this.isReady=!0;break;case 11:H=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),H._swapAndDie(this,!1),this.isReady=!0;break;case 4:H=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),H._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(H=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{H._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:H=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),H._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return H=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(H=>{H&&H._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(H._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(H){var u;let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(u=this._hardwareTexture)||void 0===u||u.setUsage(H._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),H._hardwareTexture=this._hardwareTexture,J&&(H._isRGBD=this._isRGBD),this._lodTextureHigh&&(H._lodTextureHigh&&H._lodTextureHigh.dispose(),H._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(H._lodTextureMid&&H._lodTextureMid.dispose(),H._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(H._lodTextureLow&&H._lodTextureLow.dispose(),H._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(H._irradianceTexture&&H._irradianceTexture.dispose(),H._irradianceTexture=this._irradianceTexture);const O=this._engine.getLoadedTexturesCache();let U=O.indexOf(this);-1!==U&&O.splice(U,1),U=O.indexOf(H),-1===U&&O.push(H)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}w._Counter=0},12284:(H,u,J)=>{J.d(u,{d:()=>O});class O{get wrapU(){return this._cachedWrapU}set wrapU(H){this._cachedWrapU=H}get wrapV(){return this._cachedWrapV}set wrapV(H){this._cachedWrapV=H}get wrapR(){return this._cachedWrapR}set wrapR(H){this._cachedWrapR=H}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(H){this._cachedAnisotropicFilteringLevel=H}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(H){this._comparisonFunction=H}get useMipMaps(){return this._useMipMaps}set useMipMaps(H){this._useMipMaps=H}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=H,this._cachedWrapV=u,this._cachedWrapR=J,this._cachedAnisotropicFilteringLevel=O,this.samplingMode=U,this._comparisonFunction=h,this}compareSampler(H){return this._cachedWrapU===H._cachedWrapU&&this._cachedWrapV===H._cachedWrapV&&this._cachedWrapR===H._cachedWrapR&&this._cachedAnisotropicFilteringLevel===H._cachedAnisotropicFilteringLevel&&this.samplingMode===H.samplingMode&&this._comparisonFunction===H._comparisonFunction&&this._useMipMaps===H._useMipMaps}}},12191:(H,u,J)=>{J.d(u,{e:()=>h});var O=J(12185);const U=(H,u,J)=>H?H.getClassName&&"Mesh"===H.getClassName()?null:!H.getClassName||"SubMesh"!==H.getClassName()&&"PhysicsBody"!==H.getClassName()?H.clone?H.clone():Array.isArray(H)?H.slice():J&&"object"===typeof H?{...H}:null:H.clone(u):null;class h{static DeepCopy(H,u,J,h){let w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const g=function(H){const u=[];do{const J=Object.getOwnPropertyNames(H);for(const H of J)-1===u.indexOf(H)&&u.push(H)}while(H=Object.getPrototypeOf(H));return u}(H);for(const b of g){if("_"===b[0]&&(!h||-1===h.indexOf(b)))continue;if(b.endsWith("Observable"))continue;if(J&&-1!==J.indexOf(b))continue;const g=H[b],d=typeof g;if("function"!==d)try{if("object"===d)if(g instanceof Uint8Array)u[b]=Uint8Array.from(g);else if(g instanceof Array){if(u[b]=[],g.length>0)if("object"==typeof g[0])for(let H=0;H<g.length;H++){const J=U(g[H],u,w);-1===u[b].indexOf(J)&&u[b].push(J)}else u[b]=g.slice(0)}else u[b]=U(g,u,w);else u[b]=g}catch(B){O.b.Warn(B.message)}}}}},12213:(H,u,J)=>{J.d(u,{c:()=>O,g:()=>U,k:()=>h});class O extends Error{}O._setPrototypeOf=Object.setPrototypeOf||((H,u)=>(H.__proto__=u,H));const U={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class h extends O{constructor(H,u,J){super(H),this.errorCode=u,this.innerError=J,this.name="RuntimeError",O._setPrototypeOf(this,h.prototype)}}},12210:(H,u,J)=>{J.d(u,{c:()=>c,f:()=>C,h:()=>s,j:()=>t,m:()=>Y,k:()=>p,p:()=>L,s:()=>Z,t:()=>F,x:()=>j});var O=J(12201),U=J(12178),h=J(12175);class w{}w.FilesToLoad={};var g=J(12213),B=J(12221),b=J(12226),d=J(12203),G=J(12185),P=J(12240),mH=J(12235),l=J(12247);const r=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class p extends g.k{constructor(H,u){super(H,g.g.LoadFileError),this.name="LoadFileError",g.c._setPrototypeOf(this,p.prototype),u instanceof O.d?this.request=u:this.file=u}}class a extends g.k{constructor(H,u){super(H,g.g.RequestFileError),this.request=u,this.name="RequestFileError",g.c._setPrototypeOf(this,a.prototype)}}class k extends g.k{constructor(H,u){super(H,g.g.ReadFileError),this.file=u,this.name="ReadFileError",g.c._setPrototypeOf(this,k.prototype)}}const C={DefaultRetryStrategy:class{static ExponentialBackoff(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(J,O,U)=>0!==O.status||U>=H||-1!==J.indexOf("file:")?-1:Math.pow(2,U)*u}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:H=>H,ScriptBaseUrl:"",ScriptPreprocessUrl:H=>H,CleanUrl:H=>H=H.replace(/#/gm,"%23")},j=(H,u)=>{if((!H||0!==H.indexOf("data:"))&&C.CorsBehavior)if("string"===typeof C.CorsBehavior||C.CorsBehavior instanceof String)u.crossOrigin=C.CorsBehavior;else{const J=C.CorsBehavior(H);J&&(u.crossOrigin=J)}},M={getRequiredSize:null},L=function(H,u,J,U){let h,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",b=arguments.length>5?arguments[5]:void 0,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===G||void 0===G||!G._features.forceBitmapOverHTMLImageElement))return J("LoadImage is only supported in web or BabylonNative environments."),null;let P=!1;H instanceof ArrayBuffer||ArrayBuffer.isView(H)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(h=URL.createObjectURL(new Blob([H],{type:g})),P=!0):h=`data:${g};base64,`+(0,B.l)(H):H instanceof Blob?(h=URL.createObjectURL(H),P=!0):(h=C.CleanUrl(H),h=C.PreprocessUrl(h));const mH=u=>{if(J){const O=h||H.toString();J(`Error while trying to load image: ${0===O.indexOf("http")||O.length<=128?O:O.slice(0,128)+"..."}`,u)}};if(null!==G&&void 0!==G&&G._features.forceBitmapOverHTMLImageElement)return Y(h,(O=>{G.createImageBitmap(new Blob([O],{type:g}),{premultiplyAlpha:"none",...b}).then((H=>{u(H),P&&URL.revokeObjectURL(h)})).catch((u=>{J&&J("Error while trying to load image: "+H,u)}))}),void 0,U||void 0,!0,((H,u)=>{mH(u)})),null;const l=new Image;if(M.getRequiredSize){const u=M.getRequiredSize(H);u.width&&(l.width=u.width),u.height&&(l.height=u.height)}j(h,l);const r=[],p=()=>{for(const H of r)H.target.removeEventListener(H.name,H.handler);r.length=0};r.push({target:l,name:"load",handler:()=>{p(),u(l),P&&l.src&&URL.revokeObjectURL(l.src)}}),r.push({target:l,name:"error",handler:H=>{p(),mH(H),P&&l.src&&URL.revokeObjectURL(l.src)}}),r.push({target:document,name:"securitypolicyviolation",handler:H=>{if(H.blockedURI!==l.src||"Ih"===H.disposition)return;p();const u=new Error(`CSP violation of policy ${H.effectiveDirective} ${H.blockedURI}. Current policy is ${H.originalPolicy}`);d.e.UseFallbackTexture=!1,mH(u),P&&l.src&&URL.revokeObjectURL(l.src),l.src=""}}),(()=>{for(const H of r)H.target.addEventListener(H.name,H.handler)})();const a="blob:"===h.substring(0,5),k="data:"===h.substring(0,5),L=()=>{a||k||!O.d.IsCustomRequestAvailable?l.src=h:Y(h,((H,u,J)=>{const O=new Blob([H],{type:!g&&J?J:g}),U=URL.createObjectURL(O);P=!0,l.src=U}),void 0,U||void 0,!0,((H,u)=>{mH(u)}))},Z=()=>{U&&U.loadImage(h,l)};if(!a&&!k&&U&&U.enableTexturesOffline)U.open(Z,L);else{if(-1!==h.indexOf("file:")){const H=decodeURIComponent(h.substring(5).toLowerCase());if(w.FilesToLoad[H]&&"undefined"!==typeof URL){try{let u;try{u=URL.createObjectURL(w.FilesToLoad[H])}catch(F){u=URL.createObjectURL(w.FilesToLoad[H])}l.src=u,P=!0}catch(s){l.src=""}return l}}L()}return l},Z=(H,u,J,O,U)=>{const w=new FileReader,g={onCompleteObservable:new h.b,abort:()=>w.abort()};return w.onloadend=()=>g.onCompleteObservable.notifyObservers(g),U&&(w.onerror=()=>{U(new k(`Unable to read ${H.name}`,H))}),w.onload=H=>{u(H.target.result)},J&&(w.onprogress=J),O?w.readAsArrayBuffer(H):w.readAsText(H),g},Y=(H,u,J,O,U,B,b)=>{if(H.name)return Z(H,u,J,U,B?H=>{B(void 0,H)}:void 0);const d=H;if(-1!==d.indexOf("file:")){let H=decodeURIComponent(d.substring(5).toLowerCase());0===H.indexOf("./")&&(H=H.substring(2));const O=w.FilesToLoad[H];if(O)return Z(O,u,J,U,B?H=>B(void 0,new p(H.message,H.file)):void 0)}const{match:mH,type:l}=e(d);if(mH){const H={onCompleteObservable:new h.b,abort:()=>()=>{}};try{const H=U?c(d):n(d);u(H,void 0,l)}catch(g){B?B(void 0,g):G.b.Error(g.message||"Failed to parse the Data URL")}return P.b.SetImmediate((()=>{H.onCompleteObservable.notifyObservers(H)})),H}return F(d,((H,J)=>{u(H,null===J||void 0===J?void 0:J.responseURL,null===J||void 0===J?void 0:J.getResponseHeader("content-type"))}),J,O,U,B?H=>{B(H.request,new p(H.message,H.request))}:void 0,b)},F=(H,u,J,w,g,B,b)=>{H=C.CleanUrl(H),H=C.PreprocessUrl(H);const d=C.BaseUrl+H;let P=!1;const mH={onCompleteObservable:new h.b,abort:()=>P=!0},l=()=>{let H,h=new O.d,w=null;const l=()=>{h&&(J&&h.removeEventListener("progress",J),H&&h.removeEventListener("readystatechange",H),h.removeEventListener("loadend",r))};let r=()=>{l(),mH.onCompleteObservable.notifyObservers(mH),mH.onCompleteObservable.clear(),J=void 0,H=null,r=null,B=void 0,b=void 0,u=void 0};mH.abort=()=>{P=!0,r&&r(),h&&h.readyState!==(XMLHttpRequest.DONE||4)&&h.abort(),null!==w&&(clearTimeout(w),w=null),h=null};const p=H=>{const u=H.message||"Unknown error";B&&h?B(new a(u,h)):G.b.Error(u)},k=G=>{if(h){if(h.open("GET",d),b)try{b(h)}catch(mH){return void p(mH)}g&&(h.responseType="arraybuffer"),J&&h.addEventListener("progress",J),r&&h.addEventListener("loadend",r),H=()=>{if(!P&&h&&h.readyState===(XMLHttpRequest.DONE||4)){if(H&&h.removeEventListener("readystatechange",H),h.status>=200&&h.status<300||0===h.status&&(!(0,U.k)()||A())){const H=g?h.response:h.responseText;if(null!==H){try{u&&u(H,h)}catch(mH){p(mH)}return}}const J=C.DefaultRetryStrategy;if(J){const H=J(d,h,G);if(-1!==H)return l(),h=new O.d,void(w=setTimeout((()=>k(G+1)),H))}const b=new a("Error status: "+h.status+" "+h.statusText+" - Unable to load "+d,h);B&&B(b)}},h.addEventListener("readystatechange",H),h.send()}};k(0)};if(w&&w.enableSceneOffline){const O=H=>{H&&H.status>400?B&&B(H):l()},U=()=>{w&&w.loadFile(C.BaseUrl+H,(H=>{!P&&u&&u(H),mH.onCompleteObservable.notifyObservers(mH)}),J?H=>{!P&&J&&J(H)}:void 0,O,g)};w.open(U,O)}else l();return mH},s=H=>{const{match:u,type:J}=e(H);if(u)return J||void 0;const O=H.lastIndexOf(".");switch(H.substring(O+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"xh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},A=()=>"undefined"!==typeof location&&"file:"===location.protocol,t=H=>r.test(H),e=H=>{const u=r.exec(H);if(null===u||0===u.length)return{match:!1,type:""};return{match:!0,type:u[0].replace("data:","").replace("base64,","")}};function c(H){return(0,B.e)(H.split(",")[1])}const n=H=>(0,B.f)(H.split(",")[1]);let V;l.d._FileToolsLoadImage=L,mH.d.loadFile=Y,b.o.loadFile=Y;((H,u,J,O,U,h,w,g,B,b)=>{V={DecodeBase64UrlToBinary:H,DecodeBase64UrlToString:u,DefaultRetryStrategy:J.DefaultRetryStrategy,BaseUrl:J.BaseUrl,CorsBehavior:J.CorsBehavior,PreprocessUrl:J.PreprocessUrl,IsBase64DataUrl:O,IsFileURL:U,LoadFile:h,LoadImage:w,ReadFile:g,RequestFile:B,SetCorsBehavior:b},Object.defineProperty(V,"DefaultRetryStrategy",{get:function(){return J.DefaultRetryStrategy},set:function(H){J.DefaultRetryStrategy=H}}),Object.defineProperty(V,"BaseUrl",{get:function(){return J.BaseUrl},set:function(H){J.BaseUrl=H}}),Object.defineProperty(V,"PreprocessUrl",{get:function(){return J.PreprocessUrl},set:function(H){J.PreprocessUrl=H}}),Object.defineProperty(V,"CorsBehavior",{get:function(){return J.CorsBehavior},set:function(H){J.CorsBehavior=H}})})(c,n,C,t,A,Y,L,Z,F,j)},12306:(H,u,J)=>{function O(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(H=>{const u=16*Math.random()|0;return("x"===H?u:3&u|8).toString(16)}))}J.d(u,{c:()=>O})},12297:(H,u,J)=>{J.d(u,{e:()=>h});var O=J(12185),U=J(12304);class h{static Instantiate(H){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[H])return this.RegisteredExternalClasses[H];const u=(0,U.b)(H);if(u)return u;O.b.Warn(H+" not found, you may have missed an import.");const J=H.split(".");let h=window||this;for(let O=0,U=J.length;O<U;O++)h=h[J[O]];return"function"!==typeof h?null:h}}h.RegisteredExternalClasses={}},12197:(H,u,J)=>{J.d(u,{e:()=>U});var O=J(12178);class U{static get Now(){return(0,O.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12221:(H,u,J)=>{J.d(u,{e:()=>w,f:()=>h,j:()=>O,l:()=>U});const O=H=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(H);let u="";for(let J=0;J<H.byteLength;J++)u+=String.fromCharCode(H[J]);return u},U=H=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let J,O,U,h,w,g,B,b="",d=0;const G=ArrayBuffer.isView(H)?new Uint8Array(H.buffer,H.byteOffset,H.byteLength):new Uint8Array(H);for(;d<G.length;)J=G[d++],O=d<G.length?G[d++]:Number.NaN,U=d<G.length?G[d++]:Number.NaN,h=J>>2,w=(3&J)<<4|O>>4,g=(15&O)<<2|U>>6,B=63&U,isNaN(O)?g=B=64:isNaN(U)&&(B=64),b+=u.charAt(h)+u.charAt(w)+u.charAt(g)+u.charAt(B);return b},h=H=>atob(H),w=H=>{const u=h(H),J=u.length,O=new Uint8Array(new ArrayBuffer(J));for(let U=0;U<J;U++)O[U]=u.charCodeAt(U);return O.buffer}},12308:(H,u,J)=>{function O(H){let u=1;do{u*=2}while(u<H);return u===H}function U(H,u,J){return H*(1-J)+u*J}function h(H){const u=w(H),J=g(H);return u-H>H-J?J:u}function w(H){return H--,H|=H>>1,H|=H>>2,H|=H>>4,H|=H>>8,H|=H>>16,++H}function g(H){return H|=H>>1,H|=H>>2,H|=H>>4,H|=H>>8,(H|=H>>16)-(H>>1)}function B(H,u){let J;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:J=g(H);break;case 2:J=h(H);break;default:J=w(H)}return Math.min(J,u)}J.d(u,{d:()=>g,g:()=>B,j:()=>O,l:()=>U,n:()=>h})},12171:(H,u,J)=>{J.r(u),J.d(u,{AsyncLoop:()=>k,Tools:()=>p,className:()=>a});var O=J(12175),U=J(12178),h=J(12185),w=J(12191),g=J(12197),B=J(12199),b=J(12201),d=J(12203),G=J(12210),P=J(12240),mH=J(12297),l=J(12306),r=J(12308);class p{static get BaseUrl(){return G.f.BaseUrl}static set BaseUrl(H){G.f.BaseUrl=H}static get CleanUrl(){return G.f.CleanUrl}static set CleanUrl(H){G.f.CleanUrl=H}static IsAbsoluteUrl(H){return 0===H.indexOf("//")||-1!==H.indexOf("://")&&(-1!==H.indexOf(".")&&(-1!==H.indexOf("/")&&(!(H.indexOf(":")>H.indexOf("/"))&&(H.indexOf("://")<H.indexOf(".")||(0===H.indexOf("data:")||0===H.indexOf("blob:"))))))}static set ScriptBaseUrl(H){G.f.ScriptBaseUrl=H}static get ScriptBaseUrl(){return G.f.ScriptBaseUrl}static set CDNBaseUrl(H){p.ScriptBaseUrl=H,p.AssetBaseUrl=H}static set ScriptPreprocessUrl(H){G.f.ScriptPreprocessUrl=H}static get ScriptPreprocessUrl(){return G.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return G.f.DefaultRetryStrategy}static set DefaultRetryStrategy(H){G.f.DefaultRetryStrategy=H}static get CorsBehavior(){return G.f.CorsBehavior}static set CorsBehavior(H){G.f.CorsBehavior=H}static get UseFallbackTexture(){return d.e.UseFallbackTexture}static set UseFallbackTexture(H){d.e.UseFallbackTexture=H}static get RegisteredExternalClasses(){return mH.e.RegisteredExternalClasses}static set RegisteredExternalClasses(H){mH.e.RegisteredExternalClasses=H}static get fallbackTexture(){return d.e.FallbackTexture}static set fallbackTexture(H){d.e.FallbackTexture=H}static FetchToRef(H,u,J,O,U,h){const w=4*((Math.abs(H)*J%J|0)+(Math.abs(u)*O%O|0)*J);h.r=U[w]/255,h.g=U[w+1]/255,h.b=U[w+2]/255,h.a=U[w+3]/255}static Mix(H,u,J){return 0}static Instantiate(H){return mH.e.Instantiate(H)}static SetImmediate(H){P.b.SetImmediate(H)}static IsExponentOfTwo(H){return!0}static FloatRound(H){return Math.fround(H)}static GetFilename(H){const u=H.lastIndexOf("/");return u<0?H:H.substring(u+1)}static GetFolderPath(H){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const J=H.lastIndexOf("/");return J<0?u?H:"":H.substring(0,J+1)}static ToDegrees(H){return 180*H/Math.PI}static ToRadians(H){return H*Math.PI/180}static SmoothAngleChange(H,u){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const O=this.ToRadians(H),U=this.ToRadians(u);return this.ToDegrees(Math.atan2((1-J)*Math.sin(U)+J*Math.sin(O),(1-J)*Math.cos(U)+J*Math.cos(O)))}static MakeArray(H,u){return!0===u||void 0!==H&&null!=H?Array.isArray(H)?H:[H]:null}static GetPointerPrefix(H){return(0,U.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(H,u){(0,G.x)(H,u)}static SetReferrerPolicyBehavior(H,u){u.referrerPolicy=H}static get PreprocessUrl(){return G.f.PreprocessUrl}static set PreprocessUrl(H){G.f.PreprocessUrl=H}static LoadImage(H,u,J,O,U,h){return(0,G.p)(H,u,J,O,U,h)}static LoadFile(H,u,J,O,U,h){return(0,G.m)(H,u,J,O,U,h)}static async LoadFileAsync(H){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((J,O)=>{(0,G.m)(H,(H=>{J(H)}),void 0,void 0,u,((H,u)=>{O(u)}))}))}static GetAssetUrl(H){if(!H)return"";if(p.AssetBaseUrl&&H.startsWith(p._DefaultAssetsUrl)){const u="/"===p.AssetBaseUrl[p.AssetBaseUrl.length-1]?p.AssetBaseUrl.substring(0,p.AssetBaseUrl.length-1):p.AssetBaseUrl;return H.replace(p._DefaultAssetsUrl,u)}return H}static GetBabylonScriptURL(H,u){if(!H)return"";if(p.ScriptBaseUrl&&H.startsWith(p._DefaultCdnUrl)){const u="/"===p.ScriptBaseUrl[p.ScriptBaseUrl.length-1]?p.ScriptBaseUrl.substring(0,p.ScriptBaseUrl.length-1):p.ScriptBaseUrl;H=H.replace(p._DefaultCdnUrl,u)}return H=p.ScriptPreprocessUrl(H),u&&(H=p.GetAbsoluteUrl(H)),H}static LoadBabylonScript(H,u,J,O){H=p.GetBabylonScriptURL(H),p.LoadScript(H,u,J)}static async LoadBabylonScriptAsync(H){return H=p.GetBabylonScriptURL(H),await p.LoadScriptAsync(H)}static LoadScript(H,u,J,O){let h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(H),u&&u()}catch(B){null===J||void 0===J||J(`Unable to load script '${H}' in worker`,B)}return}if(!(0,U.k)())return void(null===J||void 0===J||J(`Cannot load script '${H}' outside of a window or a worker`));const w=document.getElementsByTagName("head")[0],g=document.createElement("script");h?(g.setAttribute("type","module"),g.innerText=H):(g.setAttribute("type","text/javascript"),g.setAttribute("src",H)),O&&(g.id=O),g.onload=()=>{u&&u()},g.onerror=u=>{J&&J(`Unable to load script '${H}'`,u)},w.appendChild(g)}static async LoadScriptAsync(H,u){return await new Promise(((J,O)=>{this.LoadScript(H,(()=>{J()}),((H,u)=>{O(u||new Error(H))}),u)}))}static ReadFileAsDataURL(H,u,J){const U=new FileReader,h={onCompleteObservable:new O.b,abort:()=>U.abort()};return U.onloadend=()=>{h.onCompleteObservable.notifyObservers(h)},U.onload=H=>{u(H.target.result)},U.onprogress=J,U.readAsDataURL(H),h}static ReadFile(H,u,J,O,U){return(0,G.s)(H,u,J,O,U)}static FileAsURL(H){const u=new Blob([H]);return window.URL.createObjectURL(u)}static Format(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return H.toFixed(u)}static DeepCopy(H,u,J,O){w.e.DeepCopy(H,u,J,O)}static IsEmpty(H){for(const u in H)if(Object.prototype.hasOwnProperty.call(H,u))return!1;return!0}static RegisterTopRootEvents(H,u){for(let O=0;O<u.length;O++){const U=u[O];H.addEventListener(U.name,U.handler,!1);try{window.parent&&window.parent.addEventListener(U.name,U.handler,!1)}catch(J){}}}static UnregisterTopRootEvents(H,u){for(let O=0;O<u.length;O++){const U=u[O];H.removeEventListener(U.name,U.handler);try{H.parent&&H.parent.removeEventListener(U.name,U.handler)}catch(J){}}}static async DumpFramebuffer(H,u,J,O){throw(0,B.d)("DumpTools")}static DumpData(H,u,J,O){throw(0,B.d)("DumpTools")}static async DumpDataAsync(H,u,J){throw(0,B.d)("DumpTools")}static _IsOffScreenCanvas(H){return void 0!==H.convertToBlob}static ToBlob(H,u){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",O=arguments.length>3?arguments[3]:void 0;p._IsOffScreenCanvas(H)||H.toBlob||(H.toBlob=function(H,u,J){setTimeout((()=>{const O=atob(this.toDataURL(u,J).split(",")[1]),U=O.length,h=new Uint8Array(U);for(let H=0;H<U;H++)h[H]=O.charCodeAt(H);H(new Blob([h]))}))}),p._IsOffScreenCanvas(H)?H.convertToBlob({type:J,quality:O}).then((H=>u(H))):H.toBlob((function(H){u(H)}),J,O)}static DownloadBlob(H,u){if("download"in document.createElement("a")){if(!u){const H=new Date;u="screenshot_"+((H.getFullYear()+"-"+(H.getMonth()+1)).slice(2)+"-"+H.getDate()+"_"+H.getHours()+"-"+("0"+H.getMinutes()).slice(-2))+".png"}p.Download(H,u)}else if(H&&"undefined"!==typeof URL){const u=URL.createObjectURL(H),J=window.open("");if(!J)return;const O=J.document.createElement("img");O.onload=function(){URL.revokeObjectURL(u)},O.src=u,J.document.body.appendChild(O)}}static EncodeScreenshotCanvasData(H,u){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",O=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if("string"!==typeof O&&u){if(u){if(p._IsOffScreenCanvas(H))return void H.convertToBlob({type:J,quality:U}).then((H=>{const J=new FileReader;J.readAsDataURL(H),J.onloadend=()=>{const H=J.result;u(H)}}));const O=H.toDataURL(J,U);u(O)}}else this.ToBlob(H,(function(H){H&&p.DownloadBlob(H,O),u&&u("")}),J,U)}static Download(H,u){if("undefined"===typeof URL)return;const J=window.URL.createObjectURL(H),O=document.createElement("a");document.body.appendChild(O),O.style.display="none",O.href=J,O.download=u,O.addEventListener("click",(()=>{O.parentElement&&O.parentElement.removeChild(O)})),O.click(),window.URL.revokeObjectURL(J)}static BackCompatCameraNoPreventDefault(H){return"boolean"===typeof H[0]?H[0]:"boolean"===typeof H[1]&&H[1]}static CreateScreenshot(H,u,J,O){throw(0,B.d)("ScreenshotTools")}static async CreateScreenshotAsync(H,u,J){throw(0,B.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(H,u,J,O){throw(0,B.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(H,u,J){throw(0,B.d)("ScreenshotTools")}static RandomId(){return(0,l.c)()}static IsBase64(H){return(0,G.j)(H)}static DecodeBase64(H){return(0,G.c)(H)}static get errorsCount(){return h.b.errorsCount}static Log(H){h.b.Log(H)}static Warn(H){h.b.Warn(H)}static Error(H){h.b.Error(H)}static get LogCache(){return h.b.LogCache}static ClearLogCache(){h.b.ClearLogCache()}static set LogLevels(H){h.b.LogLevels=H}static set PerformanceLogLevel(H){return(H&p.PerformanceUserMarkLogLevel)===p.PerformanceUserMarkLogLevel?(p.StartPerformanceCounter=p._StartUserMark,void(p.EndPerformanceCounter=p._EndUserMark)):(H&p.PerformanceConsoleLogLevel)===p.PerformanceConsoleLogLevel?(p.StartPerformanceCounter=p._StartPerformanceConsole,void(p.EndPerformanceCounter=p._EndPerformanceConsole)):(p.StartPerformanceCounter=p._StartPerformanceCounterDisabled,void(p.EndPerformanceCounter=p._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(H,u){}static _EndPerformanceCounterDisabled(H,u){}static _StartUserMark(H){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!p._Performance){if(!(0,U.k)())return;p._Performance=window.performance}u&&p._Performance.mark&&p._Performance.mark(H+"-Begin")}static _EndUserMark(H){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&p._Performance.mark&&(p._Performance.mark(H+"-End"),p._Performance.measure(H,H+"-Begin",H+"-End"))}static _StartPerformanceConsole(H){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(p._StartUserMark(H,u),console.time&&console.time(H))}static _EndPerformanceConsole(H){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(p._EndUserMark(H,u),console.timeEnd(H))}static get Now(){return g.e.Now}static GetClassName(H){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],J=null;if(!u&&H.getClassName)J=H.getClassName();else{if(H instanceof Object){J=(u?H:Object.getPrototypeOf(H)).constructor.__bjsclassName__}J||(J=typeof H)}return J}static First(H,u){for(const J of H)if(u(J))return J;return null}static getFullClassName(H){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],J=null,O=null;if(!u&&H.getClassName)J=H.getClassName();else{if(H instanceof Object){const U=u?H:Object.getPrototypeOf(H);J=U.constructor.__bjsclassName__,O=U.constructor.__bjsmoduleName__}J||(J=typeof H)}return J?(null!=O?O+".":"")+J:null}static async DelayAsync(H){await new Promise((u=>{setTimeout((()=>{u()}),H)}))}static IsSafari(){return!!(0,U.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function a(H,u){return J=>{J.__bjsclassName__=H,J.__bjsmoduleName__=null!=u?u:null}}p.AssetBaseUrl="",p.UseCustomRequestHeaders=!1,p.CustomRequestHeaders=b.d.CustomRequestHeaders,p.GetDOMTextContent=U.b,p._DefaultCdnUrl="https://cdn.babylonjs.com",p._DefaultAssetsUrl="https://assets.babylonjs.com/core",p.GetAbsoluteUrl="object"===typeof document?H=>{const u=document.createElement("a");return u.href=H,u.href}:"function"===typeof URL&&"object"===typeof location?H=>new URL(H,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},p.NoneLogLevel=h.b.NoneLogLevel,p.MessageLogLevel=h.b.MessageLogLevel,p.WarningLogLevel=h.b.WarningLogLevel,p.ErrorLogLevel=h.b.ErrorLogLevel,p.AllLogLevel=h.b.AllLogLevel,p.IsWindowObjectExist=U.k,p.PerformanceNoneLogLevel=0,p.PerformanceUserMarkLogLevel=1,p.PerformanceConsoleLogLevel=2,p.StartPerformanceCounter=p._StartPerformanceCounterDisabled,p.EndPerformanceCounter=p._EndPerformanceCounterDisabled;class k{constructor(H,u,J){let O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=H,this.index=O-1,this._done=!1,this._fn=u,this._successCallback=J}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(H,u,J){const O=new k(H,u,J,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return O.executeNext(),O}static SyncAsyncForLoop(H,u,J,O,U){let h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return k.Run(Math.ceil(H/u),(O=>{U&&U()?O.breakLoop():setTimeout((()=>{for(let h=0;h<u;++h){const w=O.index*u+h;if(w>=H)break;if(J(w),U&&U()){O.breakLoop();break}}O.executeNext()}),h)}),O)}}p.Mix=r.l,p.IsExponentOfTwo=r.j,d.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12304:(H,u,J)=>{J.d(u,{b:()=>h,f:()=>U});const O={};function U(H,u){O[H]=u}function h(H){return O[H]}},12201:(H,u,J)=>{J.d(u,{d:()=>O});class O{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(O.CustomRequestHeaders).length>0||O.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const H in O.CustomRequestHeaders){const u=O.CustomRequestHeaders[H];u&&this._xhr.setRequestHeader(H,u)}}_shouldSkipRequestModifications(H){return O.SkipRequestModificationForBabylonCDN&&(H.includes("preview.babylonjs.com")||H.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(H){this._xhr.onprogress=H}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(H){this._xhr.responseType=H}get timeout(){return this._xhr.timeout}set timeout(H){this._xhr.timeout=H}addEventListener(H,u,J){this._xhr.addEventListener(H,u,J)}removeEventListener(H,u,J){this._xhr.removeEventListener(H,u,J)}abort(){this._xhr.abort()}send(H){O.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(H)}open(H,u){for(const J of O.CustomRequestModifiers){if(this._shouldSkipRequestModifications(u))return;u=J(this._xhr,u)||u}u=(u=u.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=u,this._xhr.open(H,u,!0)}setRequestHeader(H,u){this._xhr.setRequestHeader(H,u)}getResponseHeader(H){return this._xhr.getResponseHeader(H)}}O.CustomRequestHeaders={},O.CustomRequestModifiers=new Array,O.SkipRequestModificationForBabylonCDN=!0}}]);