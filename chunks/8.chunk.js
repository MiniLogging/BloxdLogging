"use strict";(self.rvold1i0ywi=self.rvold1i0ywi||[]).push([[8],{11203:(F,b,Q)=>{Q.d(b,{d:()=>i});var C=Q(11161),z=Q(11146),t=Q(11211),g=Q(11236),W=Q(11153);class Z{constructor(){let F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,F&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(F){this._zOffset!==F&&(this._zOffset=F,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(F){this._zOffsetUnits!==F&&(this._zOffsetUnits=F,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(F){this._cullFace!==F&&(this._cullFace=F,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(F){this._cull!==F&&(this._cull=F,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(F){this._depthFunc!==F&&(this._depthFunc=F,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(F){this._depthMask!==F&&(this._depthMask=F,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(F){this._depthTest!==F&&(this._depthTest=F,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(F){this._frontFace!==F&&(this._frontFace=F,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(F){this.isDirty&&(this._isCullDirty&&(this.cull?F.enable(F.CULL_FACE):F.disable(F.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(F.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(F.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?F.enable(F.DEPTH_TEST):F.disable(F.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(F.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(F.enable(F.POLYGON_OFFSET_FILL),F.polygonOffset(this.zOffset,this.zOffsetUnits)):F.disable(F.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(F.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class q{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(F){this._func!==F&&(this._func=F,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(F){this._funcRef!==F&&(this._funcRef=F,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(F){this._funcMask!==F&&(this._funcMask=F,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(F){this._opStencilFail!==F&&(this._opStencilFail=F,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(F){this._opDepthFail!==F&&(this._opDepthFail=F,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(F){this._opStencilDepthPass!==F&&(this._opStencilDepthPass=F,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(F){this._mask!==F&&(this._mask=F,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(F){this._enabled!==F&&(this._enabled=F,this._isStencilTestDirty=!0)}constructor(){let F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,F&&this.reset()}reset(){var F;this.stencilMaterial=void 0,null===(F=this.stencilGlobal)||void 0===F||F.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(F){var b;if(!F)return;const Q=!this.useStencilGlobalOnly&&!(null===(b=this.stencilMaterial)||void 0===b||!b.enabled);this.enabled=Q?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=Q?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=Q?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=Q?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=Q?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=Q?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=Q?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=Q?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?F.enable(F.STENCIL_TEST):F.disable(F.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(F.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(F.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(F.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class G{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=G.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=G.KEEP,this.opDepthFail=G.KEEP,this.opStencilDepthPass=G.REPLACE}get stencilFunc(){return this.func}set stencilFunc(F){this.func=F}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(F){this.funcRef=F}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(F){this.funcMask=F}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(F){this.opStencilFail=F}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(F){this.opDepthFail=F}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(F){this.opStencilDepthPass=F}get stencilMask(){return this.mask}set stencilMask(F){this.mask=F}get stencilTest(){return this.enabled}set stencilTest(F){this.enabled=F}}G.ALWAYS=519,G.KEEP=7680,G.REPLACE=7681;class K{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(F){this._alphaBlend!==F&&(this._alphaBlend=F,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(F,b,Q,C){this._blendConstants[0]===F&&this._blendConstants[1]===b&&this._blendConstants[2]===Q&&this._blendConstants[3]===C||(this._blendConstants[0]=F,this._blendConstants[1]=b,this._blendConstants[2]=Q,this._blendConstants[3]=C,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(F,b,Q,C){this._blendFunctionParameters[0]===F&&this._blendFunctionParameters[1]===b&&this._blendFunctionParameters[2]===Q&&this._blendFunctionParameters[3]===C||(this._blendFunctionParameters[0]=F,this._blendFunctionParameters[1]=b,this._blendFunctionParameters[2]=Q,this._blendFunctionParameters[3]=C,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(F,b){this._blendEquationParameters[0]===F&&this._blendEquationParameters[1]===b||(this._blendEquationParameters[0]=F,this._blendEquationParameters[1]=b,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(F){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?F.enable(F.BLEND):F.disable(F.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(F.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(F.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(F.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var e=Q(11155),N=Q(11241),y=Q(11140),E=Q(11133),c=Q(11190),X=Q(11259);function L(F,b){if((0,y.k)()){const{requestAnimationFrame:Q}=b||window;if("function"===typeof Q)return Q(F)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(F);return setTimeout(F,16)}class i{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(F){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(F){F!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=F,this._depthCullingState.depthFunc=F?518:515)}setColorWrite(F){F!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=F)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(F){if(F)return this.isNDCHalfZRange?F.IS_NDC_HALF_ZRANGE="":delete F.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?F.USE_REVERSE_DEPTHBUFFER="":delete F.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?F.USE_EXACT_SRGB_CONVERSIONS="":delete F.USE_EXACT_SRGB_CONVERSIONS);{let F="";return this.isNDCHalfZRange&&(F+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(F&&(F+="\n"),F+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(F&&(F+="\n"),F+="#define USE_EXACT_SRGB_CONVERSIONS"),F}}_rebuildInternalTextures(){const F=this._internalTexturesCache.slice();for(const b of F)b._rebuild()}_rebuildRenderTargetWrappers(){const F=this._renderTargetWrapperCache.slice();for(const b of F)b._rebuild()}_rebuildEffects(){for(const F in this._compiledEffects){const b=this._compiledEffects[F];b._pipelineContext=null,b._prepareEffect()}t.Effect.ResetCache()}_rebuildGraphicsResources(){var F;this.wipeCaches(!0),this._rebuildEffects(),null===(F=this._rebuildComputeEffects)||void 0===F||F.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){z.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(F){setTimeout((()=>{this._clearEmptyResources();const b=this._depthCullingState.depthTest,Q=this._depthCullingState.depthFunc,C=this._depthCullingState.depthMask,z=this._stencilState.stencilTest;F(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=b,this._depthCullingState.depthFunc=Q,this._depthCullingState.depthMask=C,this._stencilState.stencilTest=z,this._flagContextRestored()}),0)}get G(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(F){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(F){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const F=new Uint8Array(4),b=[F,F,F,F,F,F];this._emptyCubeTexture=this.createRawCubeTexture(b,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(F){if(!F)return this._activeRenderLoops.length=0,void this._cancelFrame();const b=this._activeRenderLoops.indexOf(F);b>=0&&(this._activeRenderLoops.splice(b,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const F=this._frameHandler;if(this._frameHandler=0,(0,y.k)()){const{cancelAnimationFrame:b}=this.getHostWindow()||window;if("function"===typeof b)return b(F)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(F);return clearTimeout(F)}}qb(){this.onBeginFrameObservable.notifyObservers(this)}Gb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(F){this._maxFPS=F,void 0!==F&&(this._minFrameTime=F<=0?Number.MAX_VALUE:1e3/F)}_isOverFrameTime(F){if(!F||void 0===this._maxFPS)return!1;const b=F-this._lastFrameTime;return this._lastFrameTime=F,this._renderAccumulator+=b,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(F){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(F)){let F=!0;(this.G||!this.renderEvenInBackground&&this._windowIsBackground)&&(F=!1),F&&(this.qb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Gb())}}_renderLoop(F){this._processFrame(F),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let F=0;F<this._activeRenderLoops.length;F++){(0,this._activeRenderLoops[F])()}}_renderViews(){return!1}_queueNewFrame(F,b){return L(F,b)}runRenderLoop(F){-1===this._activeRenderLoops.indexOf(F)&&(this._activeRenderLoops.push(F),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(F){this._depthCullingState.depthTest=F}setZOffset(F){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-F:F}getZOffset(){const F=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-F:F}setZOffsetUnits(F){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-F:F}getZOffsetUnits(){const F=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-F:F}getHostWindow(){return(0,y.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(F){this._compatibilityMode=!0}_rebuildTextures(){for(const F of this.scenes)F._rebuildTextures();for(const F of this._virtualScenes)F._rebuildTextures()}_releaseRenderTargetWrapper(F){const b=this._renderTargetWrapperCache.indexOf(F);-1!==b&&this._renderTargetWrapperCache.splice(b,1)}get currentViewport(){return this._cachedViewport}setViewport(F,b,Q){const C=b||this.getRenderWidth(),z=Q||this.getRenderHeight(),t=F.x||0,g=F.y||0;this._cachedViewport=F,this._viewport(t*C,g*z,C*F.width,z*F.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(F){return new Path2D(F)}get description(){let F=this.name+this.version;return this._caps.parallelShaderCompile&&(F+=" - Parallel shader compilation"),F}_createTextureBase(F,b,Q,t){let g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,Z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,q=arguments.length>7?arguments[7]:void 0,G=arguments.length>8?arguments[8]:void 0,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,e=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,c=arguments.length>13?arguments[13]:void 0,L=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0;const k="data:"===(F=F||"").substring(0,5),m="blob:"===F.substring(0,5),R=k&&-1!==F.indexOf(";base64,"),p=e||new N.b(this,1);p!==e&&(p.label=F.substring(0,60));const D=F;!this._transformTextureUrl||R||e||K||(F=this._transformTextureUrl(F)),D!==F&&(p._originalUrl=D);const P=F.lastIndexOf(".");let n=E||(P>-1?F.substring(P).toLowerCase():"");n.indexOf("?")>-1&&(n=n.split("?")[0]);const j=(0,X.b)(n,c);t&&t.addPendingData(p),p.url=F,p.generateMipMaps=!b,p.samplingMode=g,p.invertY=Q,p._useSRGBBuffer=this._getUseSRGBBuffer(!!f,b),this._doNotHandleContextLost||(p._buffer=K);let w=null;W&&!e&&(w=p.onLoadedObservable.add(W)),e||this._internalTexturesCache.push(p);const Y=(Q,e)=>{t&&t.removePendingData(p),F===D?(w&&p.onLoadedObservable.remove(w),C.d.UseFallbackTexture&&F!==C.d.FallbackTexture&&this._createTextureBase(C.d.FallbackTexture,b,p.invertY,t,g,null,Z,q,G,K,p),Q=(Q||"Unknown error")+(C.d.UseFallbackTexture?" - Fallback texture was used":""),p.onErrorObservable.notifyObservers({message:Q,exception:e}),Z&&Z(Q,e)):(z.e.Warn(`Failed to load ${F}, falling back to ${D}`),this._createTextureBase(D,b,p.invertY,t,g,W,Z,q,G,K,p,y,E,c,L,f))};if(j){const b=async F=>{(await j).loadData(F,p,((F,b,Q,C,z,W)=>{W?Y("TextureLoader failed to load data"):q(p,n,t,{width:F,height:b},p.invertY,!Q,C,(()=>(z(),!1)),g)}),L)};K?K instanceof ArrayBuffer?b(new Uint8Array(K)):ArrayBuffer.isView(K)?b(K):Z&&Z("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(F,(F=>{b(new Uint8Array(F))}),void 0,t?t.offlineProvider:void 0,!0,((F,b)=>{Y("Unable to load "+(F&&F.responseURL,b))}))}else{const Q=F=>{m&&!this._doNotHandleContextLost&&(p._buffer=F),q(p,n,t,F,p.invertY,b,!1,G,g)};!k||R?K&&("string"===typeof K.decoding||K.close)?Q(K):i._FileToolsLoadImage(F||"",Q,Y,t?t.offlineProvider:null,c,p.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof K||K instanceof ArrayBuffer||ArrayBuffer.isView(K)||K instanceof Blob?i._FileToolsLoadImage(K,Q,Y,t?t.offlineProvider:null,c,p.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):K&&Q(K)}return p}_rebuildBuffers(){for(const F of this._uniformBuffers)F._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,y.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const F in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,F)&&(this._boundTexturesCache[F]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(F){this._name=F}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(F){this._hardwareScalingLevel=F,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(F){this._doNotHandleContextLost=F}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(F,b,Q){var z,t;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new Z,this._stencilStateComposer=new q,this._stencilState=new G,this._alphaState=new K,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.c,this.onCanvasFocusObservable=new E.c,this.onNewSceneAddedObservable=new E.c,this.onResizeObservable=new E.c,this.onCanvasPointerOutObservable=new E.c,this.onEffectErrorObservable=new E.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=F=>this._renderLoop(F),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.c,this.onAfterShaderCompilationObservable=new E.c,this.onBeginFrameObservable=new E.c,this.onEndFrameObservable=new E.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.c,this.onContextRestoredObservable=new E.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Kb=new E.c,this.onReleaseEffectsObservable=new E.c,C.d.Instances.push(this),this.startTime=W.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,g.b.SetMatrixPrecision(!!b.useHighPrecisionMatrix),(0,y.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=Q??!1,b.antialias=F??b.antialias,b.deterministicLockstep=b.deterministicLockstep??!1,b.lockstepMaxSteps=b.lockstepMaxSteps??4,b.timeStep=b.timeStep??1/60,b.stencil=b.stencil??!0,this._audioContext=(null===(z=b.audioEngineOptions)||void 0===z?void 0:z.audioContext)??null,this._audioDestination=(null===(t=b.audioEngineOptions)||void 0===t?void 0:t.audioDestination)??null,this.premultipliedAlpha=b.premultipliedAlpha??!0,this._doNotHandleContextLost=!!b.doNotHandleContextLost,this._isStencilEnable=!!b.stencil,this.useExactSrgbConversions=b.useExactSrgbConversions??!1;const e=(0,y.k)()&&window.devicePixelRatio||1,N=b.limitDeviceRatio||e;Q=Q||b.adaptToDeviceRatio||!1,this._hardwareScalingLevel=Q?1/Math.min(N,e):1,this._lastDevicePixelRatio=e,this._creationOptions=b}resize(){let F,b,Q=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const F=(0,y.k)()&&window.devicePixelRatio||1,b=this._lastDevicePixelRatio/F;this._lastDevicePixelRatio=F,this._hardwareScalingLevel*=b}if((0,y.k)()&&(0,y.d)())if(this._renderingCanvas){var C,z;const Q=null===(C=(z=this._renderingCanvas).getBoundingClientRect)||void 0===C?void 0:C.call(z);F=this._renderingCanvas.clientWidth||(null===Q||void 0===Q?void 0:Q.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,b=this._renderingCanvas.clientHeight||(null===Q||void 0===Q?void 0:Q.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else F=window.innerWidth,b=window.innerHeight;else F=this._renderingCanvas?this._renderingCanvas.width:100,b=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(F/this._hardwareScalingLevel,b/this._hardwareScalingLevel,Q)}setSize(F,b){let Q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(F|=0,b|=0,!Q&&this._renderingCanvas.width===F&&this._renderingCanvas.height===b)return!1;if(this._renderingCanvas.width=F,this._renderingCanvas.height=b,this.scenes){for(let F=0;F<this.scenes.length;F++){const b=this.scenes[F];for(let F=0;F<b.cameras.length;F++){b.cameras[F]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(F,b,Q,C,z,t,g,W,Z,q,G){throw(0,e.c)("engine.rawTexture")}createRawCubeTexture(F,b,Q,C,z,t,g,W){throw(0,e.c)("engine.rawTexture")}createRawTexture3D(F,b,Q,C,z,t,g,W,Z,q,G){throw(0,e.c)("engine.rawTexture")}createRawTexture2DArray(F,b,Q,C,z,t,g,W,Z,q,G){throw(0,e.c)("engine.rawTexture")}_sharedInit(F){this._renderingCanvas=F}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const F=navigator.userAgent;this.hostInformation.isMobile=-1!==F.indexOf("Mobile")||-1!==F.indexOf("Mac")&&(0,y.d)()&&"ontouchend"in document},this._checkForMobile(),(0,y.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(F){return document.createElement("video")}_reportDrawCall(){var F;let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(F=this._drawCalls)||void 0===F||F.addCount(b,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(F,b){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(F,b){return createImageBitmap(F,b)}resizeImageBitmap(F,b,Q){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(F){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(F,b){if("undefined"===typeof document)return new OffscreenCanvas(F,b);const Q=document.createElement("canvas");return Q.width=F,Q.height=b,Q}createCanvas(F,b){return i._CreateCanvas(F,b)}static _FileToolsLoadImage(F,b,Q,C,z,t,g){throw(0,e.c)("FileTools")}_loadFile(F,b,Q,C,z,t){const g=(0,c.l)(F,b,Q,C,z,t);return this._activeRequests.push(g),g.onCompleteObservable.add((()=>{const F=this._activeRequests.indexOf(g);-1!==F&&this._activeRequests.splice(F,1)})),g}static _FileToolsLoadFile(F,b,Q,C,z,t){if(c.b.loadFile)return c.b.loadFile(F,b,Q,C,z,t);throw(0,e.c)("FileTools")}dispose(){var F;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(F=this.releaseComputeEffects)||void 0===F||F.call(this),t.Effect.ResetCache();for(const Q of this._activeRequests)Q.abort();this._boundRenderFunction=null,this.Kb.notifyObservers(this),this.Kb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,y.k)()&&window.removeEventListener("resize",this._checkForMobile);const b=C.d.Instances.indexOf(this);b>=0&&C.d.Instances.splice(b,1),C.d.Instances.length||(C.d.OnEnginesDisposedObservable.notifyObservers(this),C.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(F){throw(0,e.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(F,b){for(let Q=0;Q<C.d.Instances.length;Q++){const z=C.d.Instances[Q];for(let Q=0;Q<z.scenes.length;Q++)z.scenes[Q].markAllMaterialsAsDirty(F,b)}}}i._RenderPassIdCounter=0,i._RescalePostProcessFactory=null,i.CollisionsEpsilon=.001,i.QueueNewFrame=L},11161:(F,b,Q)=>{Q.d(b,{d:()=>z});var C=Q(11133);class z{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}z.Instances=[],z.OnEnginesDisposedObservable=new C.c,z._LastCreatedScene=null,z.UseFallbackTexture=!0,z.FallbackTexture=""},11236:(F,b,Q)=>{Q.d(b,{b:()=>C});class C{static SetMatrixPrecision(F){if(C.MatrixTrackPrecisionChange=!1,F&&!C.MatrixUse64Bits&&C.MatrixTrackedMatrices)for(let b=0;b<C.MatrixTrackedMatrices.length;++b){const F=C.MatrixTrackedMatrices[b],Q=F.eb;F.eb=new Array(16);for(let b=0;b<16;++b)F.eb[b]=Q[b]}C.MatrixUse64Bits=F,C.MatrixCurrentType=C.MatrixUse64Bits?Array:Float32Array,C.MatrixTrackedMatrices=null}}C.MatrixUse64Bits=!1,C.MatrixTrackPrecisionChange=!0,C.MatrixCurrentType=Float32Array,C.MatrixTrackedMatrices=[]},11259:(F,b,Q)=>{Q.d(b,{b:()=>g});var C=Q(11146);const z=new Map;function t(F,b){(function(F){return z.delete(F)})(F)&&C.e.Warn(`Extension with the name '${F}' already exists`),z.set(F,b)}function g(F,b){"image/ktx"!==b&&"image/ktx2"!==b||(F=".ktx"),z.has(F)||(F.endsWith(".ies")&&t(".ies",(async()=>await Q.e(15).then(Q.bind(Q,13687)).then((F=>new F._IESTextureLoader)))),F.endsWith(".dds")&&t(".dds",(async()=>await Promise.all([Q.e(14),Q.e(17),Q.e(13),Q.e(19),Q.e(18),Q.e(28)]).then(Q.bind(Q,13690)).then((F=>new F._DDSTextureLoader)))),F.endsWith(".basis")&&t(".basis",(async()=>await Promise.all([Q.e(14),Q.e(17),Q.e(13),Q.e(47)]).then(Q.bind(Q,13698)).then((F=>new F._BasisTextureLoader)))),F.endsWith(".env")&&t(".env",(async()=>await Promise.all([Q.e(14),Q.e(17),Q.e(13),Q.e(19),Q.e(18),Q.e(23),Q.e(21),Q.e(45),Q.e(48)]).then(Q.bind(Q,13702)).then((F=>new F._ENVTextureLoader)))),F.endsWith(".hdr")&&t(".hdr",(async()=>await Promise.all([Q.e(14),Q.e(49)]).then(Q.bind(Q,13710)).then((F=>new F._HDRTextureLoader)))),(F.endsWith(".ktx")||F.endsWith(".ktx2"))&&(t(".ktx",(async()=>await Q.e(30).then(Q.bind(Q,13716)).then((F=>new F._KTXTextureLoader)))),t(".ktx2",(async()=>await Q.e(30).then(Q.bind(Q,13716)).then((F=>new F._KTXTextureLoader))))),F.endsWith(".tga")&&t(".tga",(async()=>await Q.e(50).then(Q.bind(Q,13720)).then((F=>new F._TGATextureLoader)))),F.endsWith(".exr")&&t(".exr",(async()=>await Q.e(16).then(Q.bind(Q,13726)).then((F=>new F._ExrTextureLoader)))));const C=z.get(F);return C?Promise.resolve(C(b)):null}},11241:(F,b,Q)=>{Q.d(b,{b:()=>g});var C,z=Q(11133),t=Q(11250);!function(F){F[F.Unknown=0]="Unknown",F[F.Url=1]="Url",F[F.Temp=2]="Temp",F[F.Raw=3]="Raw",F[F.Dynamic=4]="Dynamic",F[F.RenderTarget=5]="RenderTarget",F[F.MultiRenderTarget=6]="MultiRenderTarget",F[F.Cube=7]="Cube",F[F.CubeRaw=8]="CubeRaw",F[F.CubePrefiltered=9]="CubePrefiltered",F[F.Raw3D=10]="Raw3D",F[F.Raw2DArray=11]="Raw2DArray",F[F.DepthStencil=12]="DepthStencil",F[F.CubeRawRGBD=13]="CubeRawRGBD",F[F.Depth=14]="Depth"}(C||(C={}));class g extends t.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(F){this.generateMipMaps=F}get uniqueId(){return this._uniqueId}_setUniqueId(F){this._uniqueId=F}getEngine(){return this._engine}get source(){return this._source}constructor(F,b){let Q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new z.c,this.onErrorObservable=new z.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=F,this._source=b,this._uniqueId=g._Counter++,Q||(this._hardwareTexture=F._createHardwareTexture())}incrementReferences(){this._references++}updateSize(F,b){let Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,F,b,Q),this.width=F,this.height=b,this.depth=Q,this.baseWidth=F,this.baseHeight=b,this.baseDepth=Q,this._size=F*b*Q}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const F=this.onRebuildCallback(this),b=b=>{b._swapAndDie(this,!1),this.isReady=F.isReady};return void(F.isAsync?F.proxy.then(b):b(F.proxy))}let F;switch(this.source){case 2:case 12:case 14:break;case 1:return void(F=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(F=>{F._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:F=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),F._swapAndDie(this,!1),this.isReady=!0;break;case 10:F=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),F._swapAndDie(this,!1),this.isReady=!0;break;case 11:F=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),F._swapAndDie(this,!1),this.isReady=!0;break;case 4:F=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),F._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(F=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{F._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:F=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),F._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return F=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(F=>{F&&F._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(F._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(F){var b;let Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(b=this._hardwareTexture)||void 0===b||b.setUsage(F._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),F._hardwareTexture=this._hardwareTexture,Q&&(F._isRGBD=this._isRGBD),this._lodTextureHigh&&(F._lodTextureHigh&&F._lodTextureHigh.dispose(),F._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(F._lodTextureMid&&F._lodTextureMid.dispose(),F._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(F._lodTextureLow&&F._lodTextureLow.dispose(),F._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(F._irradianceTexture&&F._irradianceTexture.dispose(),F._irradianceTexture=this._irradianceTexture);const C=this._engine.getLoadedTexturesCache();let z=C.indexOf(this);-1!==z&&C.splice(z,1),z=C.indexOf(F),-1===z&&C.push(F)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}g._Counter=0},11250:(F,b,Q)=>{Q.d(b,{d:()=>C});class C{get wrapU(){return this._cachedWrapU}set wrapU(F){this._cachedWrapU=F}get wrapV(){return this._cachedWrapV}set wrapV(F){this._cachedWrapV=F}get wrapR(){return this._cachedWrapR}set wrapR(F){this._cachedWrapR=F}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(F){this._cachedAnisotropicFilteringLevel=F}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(F){this._comparisonFunction=F}get useMipMaps(){return this._useMipMaps}set useMipMaps(F){this._useMipMaps=F}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=F,this._cachedWrapV=b,this._cachedWrapR=Q,this._cachedAnisotropicFilteringLevel=C,this.samplingMode=z,this._comparisonFunction=t,this}compareSampler(F){return this._cachedWrapU===F._cachedWrapU&&this._cachedWrapV===F._cachedWrapV&&this._cachedWrapR===F._cachedWrapR&&this._cachedAnisotropicFilteringLevel===F._cachedAnisotropicFilteringLevel&&this.samplingMode===F.samplingMode&&this._comparisonFunction===F._comparisonFunction&&this._useMipMaps===F._useMipMaps}}},11148:(F,b,Q)=>{Q.d(b,{d:()=>t});var C=Q(11146);const z=(F,b,Q)=>F?F.getClassName&&"Mesh"===F.getClassName()?null:!F.getClassName||"SubMesh"!==F.getClassName()&&"PhysicsBody"!==F.getClassName()?F.clone?F.clone():Array.isArray(F)?F.slice():Q&&"object"===typeof F?{...F}:null:F.clone(b):null;class t{static DeepCopy(F,b,Q,t){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const W=function(F){const b=[];do{const Q=Object.getOwnPropertyNames(F);for(const F of Q)-1===b.indexOf(F)&&b.push(F)}while(F=Object.getPrototypeOf(F));return b}(F);for(const q of W){if("_"===q[0]&&(!t||-1===t.indexOf(q)))continue;if(q.endsWith("Observable"))continue;if(Q&&-1!==Q.indexOf(q))continue;const W=F[q],G=typeof W;if("function"!==G)try{if("object"===G)if(W instanceof Uint8Array)b[q]=Uint8Array.from(W);else if(W instanceof Array){if(b[q]=[],W.length>0)if("object"==typeof W[0])for(let F=0;F<W.length;F++){const Q=z(W[F],b,g);-1===b[q].indexOf(Q)&&b[q].push(Q)}else b[q]=W.slice(0)}else b[q]=z(W,b,g);else b[q]=W}catch(Z){C.e.Warn(Z.message)}}}}},11174:(F,b,Q)=>{Q.d(b,{e:()=>C,h:()=>z,l:()=>t});class C extends Error{}C._setPrototypeOf=Object.setPrototypeOf||((F,b)=>(F.__proto__=b,F));const z={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class t extends C{constructor(F,b,Q){super(F),this.errorCode=b,this.innerError=Q,this.name="RuntimeError",C._setPrototypeOf(this,t.prototype)}}},11170:(F,b,Q)=>{Q.d(b,{d:()=>Y,g:()=>i,k:()=>P,n:()=>j,q:()=>p,p:()=>c,t:()=>m,x:()=>R,y:()=>D,z:()=>f});var C=Q(11159),z=Q(11140),t=Q(11133);class g{}g.FilesToLoad={};var W=Q(11174),Z=Q(11177),q=Q(11182),G=Q(11161),K=Q(11146),e=Q(11198),N=Q(11190),y=Q(11203);const E=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class c extends W.l{constructor(F,b){super(F,W.h.LoadFileError),this.name="LoadFileError",W.e._setPrototypeOf(this,c.prototype),b instanceof C.b?this.request=b:this.file=b}}class X extends W.l{constructor(F,b){super(F,W.h.RequestFileError),this.request=b,this.name="RequestFileError",W.e._setPrototypeOf(this,X.prototype)}}class L extends W.l{constructor(F,b){super(F,W.h.ReadFileError),this.file=b,this.name="ReadFileError",W.e._setPrototypeOf(this,L.prototype)}}const i={DefaultRetryStrategy:class{static ExponentialBackoff(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(Q,C,z)=>0!==C.status||z>=F||-1!==Q.indexOf("file:")?-1:Math.pow(2,z)*b}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:F=>F,ScriptBaseUrl:"",ScriptPreprocessUrl:F=>F,CleanUrl:F=>F=F.replace(/#/gm,"%23")},f=(F,b)=>{if((!F||0!==F.indexOf("data:"))&&i.CorsBehavior)if("string"===typeof i.CorsBehavior||i.CorsBehavior instanceof String)b.crossOrigin=i.CorsBehavior;else{const Q=i.CorsBehavior(F);Q&&(b.crossOrigin=Q)}},k={getRequiredSize:null},m=function(F,b,Q,z){let t,W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",q=arguments.length>5?arguments[5]:void 0,K=arguments.length>6&&void 0!==arguments[6]?arguments[6]:G.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===K||void 0===K||!K._features.forceBitmapOverHTMLImageElement))return Q("LoadImage is only supported in web or BabylonNative environments."),null;let e=!1;F instanceof ArrayBuffer||ArrayBuffer.isView(F)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(t=URL.createObjectURL(new Blob([F],{type:W})),e=!0):t=`data:${W};base64,`+(0,Z.l)(F):F instanceof Blob?(t=URL.createObjectURL(F),e=!0):(t=i.CleanUrl(F),t=i.PreprocessUrl(t));const N=b=>{if(Q){const C=t||F.toString();Q(`Error while trying to load image: ${0===C.indexOf("http")||C.length<=128?C:C.slice(0,128)+"..."}`,b)}};if(null!==K&&void 0!==K&&K._features.forceBitmapOverHTMLImageElement)return p(t,(C=>{K.createImageBitmap(new Blob([C],{type:W}),{premultiplyAlpha:"none",...q}).then((F=>{b(F),e&&URL.revokeObjectURL(t)})).catch((b=>{Q&&Q("Error while trying to load image: "+F,b)}))}),void 0,z||void 0,!0,((F,b)=>{N(b)})),null;const y=new Image;if(k.getRequiredSize){const b=k.getRequiredSize(F);b.width&&(y.width=b.width),b.height&&(y.height=b.height)}f(t,y);const E=[],c=()=>{for(const F of E)F.target.removeEventListener(F.name,F.handler);E.length=0};E.push({target:y,name:"load",handler:()=>{c(),b(y),e&&y.src&&URL.revokeObjectURL(y.src)}}),E.push({target:y,name:"error",handler:F=>{c(),N(F),e&&y.src&&URL.revokeObjectURL(y.src)}}),E.push({target:document,name:"securitypolicyviolation",handler:F=>{if(F.blockedURI!==y.src||"Nb"===F.disposition)return;c();const b=new Error(`CSP violation of policy ${F.effectiveDirective} ${F.blockedURI}. Current policy is ${F.originalPolicy}`);G.d.UseFallbackTexture=!1,N(b),e&&y.src&&URL.revokeObjectURL(y.src),y.src=""}}),(()=>{for(const F of E)F.target.addEventListener(F.name,F.handler)})();const X="blob:"===t.substring(0,5),L="data:"===t.substring(0,5),m=()=>{X||L||!C.b.IsCustomRequestAvailable?y.src=t:p(t,((F,b,Q)=>{const C=new Blob([F],{type:!W&&Q?Q:W}),z=URL.createObjectURL(C);e=!0,y.src=z}),void 0,z||void 0,!0,((F,b)=>{N(b)}))},R=()=>{z&&z.loadImage(t,y)};if(!X&&!L&&z&&z.enableTexturesOffline)z.open(R,m);else{if(-1!==t.indexOf("file:")){const F=decodeURIComponent(t.substring(5).toLowerCase());if(g.FilesToLoad[F]&&"undefined"!==typeof URL){try{let b;try{b=URL.createObjectURL(g.FilesToLoad[F])}catch(D){b=URL.createObjectURL(g.FilesToLoad[F])}y.src=b,e=!0}catch(P){y.src=""}return y}}m()}return y},R=(F,b,Q,C,z)=>{const g=new FileReader,W={onCompleteObservable:new t.c,abort:()=>g.abort()};return g.onloadend=()=>W.onCompleteObservable.notifyObservers(W),z&&(g.onerror=()=>{z(new L(`Unable to read ${F.name}`,F))}),g.onload=F=>{b(F.target.result)},Q&&(g.onprogress=Q),C?g.readAsArrayBuffer(F):g.readAsText(F),W},p=(F,b,Q,C,z,Z,q)=>{if(F.name)return R(F,b,Q,z,Z?F=>{Z(void 0,F)}:void 0);const G=F;if(-1!==G.indexOf("file:")){let F=decodeURIComponent(G.substring(5).toLowerCase());0===F.indexOf("./")&&(F=F.substring(2));const C=g.FilesToLoad[F];if(C)return R(C,b,Q,z,Z?F=>Z(void 0,new c(F.message,F.file)):void 0)}const{match:N,type:y}=w(G);if(N){const F={onCompleteObservable:new t.c,abort:()=>()=>{}};try{const F=z?Y(G):s(G);b(F,void 0,y)}catch(W){Z?Z(void 0,W):K.e.Error(W.message||"Failed to parse the Data URL")}return e.c.SetImmediate((()=>{F.onCompleteObservable.notifyObservers(F)})),F}return D(G,((F,Q)=>{b(F,null===Q||void 0===Q?void 0:Q.responseURL,null===Q||void 0===Q?void 0:Q.getResponseHeader("content-type"))}),Q,C,z,Z?F=>{Z(F.request,new c(F.message,F.request))}:void 0,q)},D=(F,b,Q,g,W,Z,q)=>{F=i.CleanUrl(F),F=i.PreprocessUrl(F);const G=i.BaseUrl+F;let e=!1;const N={onCompleteObservable:new t.c,abort:()=>e=!0},y=()=>{let F,t=new C.b,g=null;const y=()=>{t&&(Q&&t.removeEventListener("progress",Q),F&&t.removeEventListener("readystatechange",F),t.removeEventListener("loadend",E))};let E=()=>{y(),N.onCompleteObservable.notifyObservers(N),N.onCompleteObservable.clear(),Q=void 0,F=null,E=null,Z=void 0,q=void 0,b=void 0};N.abort=()=>{e=!0,E&&E(),t&&t.readyState!==(XMLHttpRequest.DONE||4)&&t.abort(),null!==g&&(clearTimeout(g),g=null),t=null};const c=F=>{const b=F.message||"Unknown error";Z&&t?Z(new X(b,t)):K.e.Error(b)},L=K=>{if(t){if(t.open("GET",G),q)try{q(t)}catch(N){return void c(N)}W&&(t.responseType="arraybuffer"),Q&&t.addEventListener("progress",Q),E&&t.addEventListener("loadend",E),F=()=>{if(!e&&t&&t.readyState===(XMLHttpRequest.DONE||4)){if(F&&t.removeEventListener("readystatechange",F),t.status>=200&&t.status<300||0===t.status&&(!(0,z.k)()||n())){const F=W?t.response:t.responseText;if(null!==F){try{b&&b(F,t)}catch(N){c(N)}return}}const Q=i.DefaultRetryStrategy;if(Q){const F=Q(G,t,K);if(-1!==F)return y(),t=new C.b,void(g=setTimeout((()=>L(K+1)),F))}const q=new X("Error status: "+t.status+" "+t.statusText+" - Unable to load "+G,t);Z&&Z(q)}},t.addEventListener("readystatechange",F),t.send()}};L(0)};if(g&&g.enableSceneOffline){const C=F=>{F&&F.status>400?Z&&Z(F):y()},z=()=>{g&&g.loadFile(i.BaseUrl+F,(F=>{!e&&b&&b(F),N.onCompleteObservable.notifyObservers(N)}),Q?F=>{!e&&Q&&Q(F)}:void 0,C,W)};g.open(z,C)}else y();return N},P=F=>{const{match:b,type:Q}=w(F);if(b)return Q||void 0;const C=F.lastIndexOf(".");switch(F.substring(C+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"yb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},n=()=>"undefined"!==typeof location&&"file:"===location.protocol,j=F=>E.test(F),w=F=>{const b=E.exec(F);if(null===b||0===b.length)return{match:!1,type:""};return{match:!0,type:b[0].replace("data:","").replace("base64,","")}};function Y(F){return(0,Z.d)(F.split(",")[1])}const s=F=>(0,Z.g)(F.split(",")[1]);let V;y.d._FileToolsLoadImage=m,N.b.loadFile=p,q.q.loadFile=p;((F,b,Q,C,z,t,g,W,Z,q)=>{V={DecodeBase64UrlToBinary:F,DecodeBase64UrlToString:b,DefaultRetryStrategy:Q.DefaultRetryStrategy,BaseUrl:Q.BaseUrl,CorsBehavior:Q.CorsBehavior,PreprocessUrl:Q.PreprocessUrl,IsBase64DataUrl:C,IsFileURL:z,LoadFile:t,LoadImage:g,ReadFile:W,RequestFile:Z,SetCorsBehavior:q},Object.defineProperty(V,"DefaultRetryStrategy",{get:function(){return Q.DefaultRetryStrategy},set:function(F){Q.DefaultRetryStrategy=F}}),Object.defineProperty(V,"BaseUrl",{get:function(){return Q.BaseUrl},set:function(F){Q.BaseUrl=F}}),Object.defineProperty(V,"PreprocessUrl",{get:function(){return Q.PreprocessUrl},set:function(F){Q.PreprocessUrl=F}}),Object.defineProperty(V,"CorsBehavior",{get:function(){return Q.CorsBehavior},set:function(F){Q.CorsBehavior=F}})})(Y,s,i,j,n,p,m,R,D,f)},11272:(F,b,Q)=>{function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(F=>{const b=16*Math.random()|0;return("x"===F?b:3&b|8).toString(16)}))}Q.d(b,{b:()=>C})},11263:(F,b,Q)=>{Q.d(b,{d:()=>t});var C=Q(11146),z=Q(11265);class t{static Instantiate(F){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[F])return this.RegisteredExternalClasses[F];const b=(0,z.d)(F);if(b)return b;C.e.Warn(F+" not found, you may have missed an import.");const Q=F.split(".");let t=window||this;for(let C=0,z=Q.length;C<z;C++)t=t[Q[C]];return"function"!==typeof t?null:t}}t.RegisteredExternalClasses={}},11153:(F,b,Q)=>{Q.d(b,{d:()=>z});var C=Q(11140);class z{static get Now(){return(0,C.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11177:(F,b,Q)=>{Q.d(b,{d:()=>g,g:()=>t,j:()=>C,l:()=>z});const C=F=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(F);let b="";for(let Q=0;Q<F.byteLength;Q++)b+=String.fromCharCode(F[Q]);return b},z=F=>{const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Q,C,z,t,g,W,Z,q="",G=0;const K=ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength):new Uint8Array(F);for(;G<K.length;)Q=K[G++],C=G<K.length?K[G++]:Number.NaN,z=G<K.length?K[G++]:Number.NaN,t=Q>>2,g=(3&Q)<<4|C>>4,W=(15&C)<<2|z>>6,Z=63&z,isNaN(C)?W=Z=64:isNaN(z)&&(Z=64),q+=b.charAt(t)+b.charAt(g)+b.charAt(W)+b.charAt(Z);return q},t=F=>atob(F),g=F=>{const b=t(F),Q=b.length,C=new Uint8Array(new ArrayBuffer(Q));for(let z=0;z<Q;z++)C[z]=b.charCodeAt(z);return C.buffer}},11277:(F,b,Q)=>{function C(F){let b=1;do{b*=2}while(b<F);return b===F}function z(F,b,Q){return F*(1-Q)+b*Q}function t(F){const b=g(F),Q=W(F);return b-F>F-Q?Q:b}function g(F){return F--,F|=F>>1,F|=F>>2,F|=F>>4,F|=F>>8,F|=F>>16,++F}function W(F){return F|=F>>1,F|=F>>2,F|=F>>4,F|=F>>8,(F|=F>>16)-(F>>1)}function Z(F,b){let Q;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:Q=W(F);break;case 2:Q=t(F);break;default:Q=g(F)}return Math.min(Q,b)}Q.d(b,{b:()=>W,c:()=>Z,e:()=>C,g:()=>z,j:()=>t})},11128:(F,b,Q)=>{Q.r(b),Q.d(b,{AsyncLoop:()=>L,Tools:()=>c,className:()=>X});var C=Q(11133),z=Q(11140),t=Q(11146),g=Q(11148),W=Q(11153),Z=Q(11155),q=Q(11159),G=Q(11161),K=Q(11170),e=Q(11198),N=Q(11263),y=Q(11272),E=Q(11277);class c{static get BaseUrl(){return K.g.BaseUrl}static set BaseUrl(F){K.g.BaseUrl=F}static get CleanUrl(){return K.g.CleanUrl}static set CleanUrl(F){K.g.CleanUrl=F}static IsAbsoluteUrl(F){return 0===F.indexOf("//")||-1!==F.indexOf("://")&&(-1!==F.indexOf(".")&&(-1!==F.indexOf("/")&&(!(F.indexOf(":")>F.indexOf("/"))&&(F.indexOf("://")<F.indexOf(".")||(0===F.indexOf("data:")||0===F.indexOf("blob:"))))))}static set ScriptBaseUrl(F){K.g.ScriptBaseUrl=F}static get ScriptBaseUrl(){return K.g.ScriptBaseUrl}static set CDNBaseUrl(F){c.ScriptBaseUrl=F,c.AssetBaseUrl=F}static set ScriptPreprocessUrl(F){K.g.ScriptPreprocessUrl=F}static get ScriptPreprocessUrl(){return K.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return K.g.DefaultRetryStrategy}static set DefaultRetryStrategy(F){K.g.DefaultRetryStrategy=F}static get CorsBehavior(){return K.g.CorsBehavior}static set CorsBehavior(F){K.g.CorsBehavior=F}static get UseFallbackTexture(){return G.d.UseFallbackTexture}static set UseFallbackTexture(F){G.d.UseFallbackTexture=F}static get RegisteredExternalClasses(){return N.d.RegisteredExternalClasses}static set RegisteredExternalClasses(F){N.d.RegisteredExternalClasses=F}static get fallbackTexture(){return G.d.FallbackTexture}static set fallbackTexture(F){G.d.FallbackTexture=F}static FetchToRef(F,b,Q,C,z,t){const g=4*((Math.abs(F)*Q%Q|0)+(Math.abs(b)*C%C|0)*Q);t.r=z[g]/255,t.g=z[g+1]/255,t.b=z[g+2]/255,t.a=z[g+3]/255}static Mix(F,b,Q){return 0}static Instantiate(F){return N.d.Instantiate(F)}static SetImmediate(F){e.c.SetImmediate(F)}static IsExponentOfTwo(F){return!0}static FloatRound(F){return Math.fround(F)}static GetFilename(F){const b=F.lastIndexOf("/");return b<0?F:F.substring(b+1)}static GetFolderPath(F){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Q=F.lastIndexOf("/");return Q<0?b?F:"":F.substring(0,Q+1)}static ToDegrees(F){return 180*F/Math.PI}static ToRadians(F){return F*Math.PI/180}static SmoothAngleChange(F,b){let Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const C=this.ToRadians(F),z=this.ToRadians(b);return this.ToDegrees(Math.atan2((1-Q)*Math.sin(z)+Q*Math.sin(C),(1-Q)*Math.cos(z)+Q*Math.cos(C)))}static MakeArray(F,b){return!0===b||void 0!==F&&null!=F?Array.isArray(F)?F:[F]:null}static GetPointerPrefix(F){return(0,z.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(F,b){(0,K.z)(F,b)}static SetReferrerPolicyBehavior(F,b){b.referrerPolicy=F}static get PreprocessUrl(){return K.g.PreprocessUrl}static set PreprocessUrl(F){K.g.PreprocessUrl=F}static LoadImage(F,b,Q,C,z,t){return(0,K.t)(F,b,Q,C,z,t)}static LoadFile(F,b,Q,C,z,t){return(0,K.q)(F,b,Q,C,z,t)}static async LoadFileAsync(F){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((Q,C)=>{(0,K.q)(F,(F=>{Q(F)}),void 0,void 0,b,((F,b)=>{C(b)}))}))}static GetAssetUrl(F){if(!F)return"";if(c.AssetBaseUrl&&F.startsWith(c._DefaultAssetsUrl)){const b="/"===c.AssetBaseUrl[c.AssetBaseUrl.length-1]?c.AssetBaseUrl.substring(0,c.AssetBaseUrl.length-1):c.AssetBaseUrl;return F.replace(c._DefaultAssetsUrl,b)}return F}static GetBabylonScriptURL(F,b){if(!F)return"";if(c.ScriptBaseUrl&&F.startsWith(c._DefaultCdnUrl)){const b="/"===c.ScriptBaseUrl[c.ScriptBaseUrl.length-1]?c.ScriptBaseUrl.substring(0,c.ScriptBaseUrl.length-1):c.ScriptBaseUrl;F=F.replace(c._DefaultCdnUrl,b)}return F=c.ScriptPreprocessUrl(F),b&&(F=c.GetAbsoluteUrl(F)),F}static LoadBabylonScript(F,b,Q,C){F=c.GetBabylonScriptURL(F),c.LoadScript(F,b,Q)}static async LoadBabylonScriptAsync(F){return F=c.GetBabylonScriptURL(F),await c.LoadScriptAsync(F)}static LoadScript(F,b,Q,C){let t=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(F),b&&b()}catch(Z){null===Q||void 0===Q||Q(`Unable to load script '${F}' in worker`,Z)}return}if(!(0,z.k)())return void(null===Q||void 0===Q||Q(`Cannot load script '${F}' outside of a window or a worker`));const g=document.getElementsByTagName("head")[0],W=document.createElement("script");t?(W.setAttribute("type","module"),W.innerText=F):(W.setAttribute("type","text/javascript"),W.setAttribute("src",F)),C&&(W.id=C),W.onload=()=>{b&&b()},W.onerror=b=>{Q&&Q(`Unable to load script '${F}'`,b)},g.appendChild(W)}static async LoadScriptAsync(F,b){return await new Promise(((Q,C)=>{this.LoadScript(F,(()=>{Q()}),((F,b)=>{C(b||new Error(F))}),b)}))}static ReadFileAsDataURL(F,b,Q){const z=new FileReader,t={onCompleteObservable:new C.c,abort:()=>z.abort()};return z.onloadend=()=>{t.onCompleteObservable.notifyObservers(t)},z.onload=F=>{b(F.target.result)},z.onprogress=Q,z.readAsDataURL(F),t}static ReadFile(F,b,Q,C,z){return(0,K.x)(F,b,Q,C,z)}static FileAsURL(F){const b=new Blob([F]);return window.URL.createObjectURL(b)}static Format(F){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return F.toFixed(b)}static DeepCopy(F,b,Q,C){g.d.DeepCopy(F,b,Q,C)}static IsEmpty(F){for(const b in F)if(Object.prototype.hasOwnProperty.call(F,b))return!1;return!0}static RegisterTopRootEvents(F,b){for(let C=0;C<b.length;C++){const z=b[C];F.addEventListener(z.name,z.handler,!1);try{window.parent&&window.parent.addEventListener(z.name,z.handler,!1)}catch(Q){}}}static UnregisterTopRootEvents(F,b){for(let C=0;C<b.length;C++){const z=b[C];F.removeEventListener(z.name,z.handler);try{F.parent&&F.parent.removeEventListener(z.name,z.handler)}catch(Q){}}}static async DumpFramebuffer(F,b,Q,C){throw(0,Z.c)("DumpTools")}static DumpData(F,b,Q,C){throw(0,Z.c)("DumpTools")}static async DumpDataAsync(F,b,Q){throw(0,Z.c)("DumpTools")}static _IsOffScreenCanvas(F){return void 0!==F.convertToBlob}static ToBlob(F,b){let Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0;c._IsOffScreenCanvas(F)||F.toBlob||(F.toBlob=function(F,b,Q){setTimeout((()=>{const C=atob(this.toDataURL(b,Q).split(",")[1]),z=C.length,t=new Uint8Array(z);for(let F=0;F<z;F++)t[F]=C.charCodeAt(F);F(new Blob([t]))}))}),c._IsOffScreenCanvas(F)?F.convertToBlob({type:Q,quality:C}).then((F=>b(F))):F.toBlob((function(F){b(F)}),Q,C)}static DownloadBlob(F,b){if("download"in document.createElement("a")){if(!b){const F=new Date;b="screenshot_"+((F.getFullYear()+"-"+(F.getMonth()+1)).slice(2)+"-"+F.getDate()+"_"+F.getHours()+"-"+("0"+F.getMinutes()).slice(-2))+".png"}c.Download(F,b)}else if(F&&"undefined"!==typeof URL){const b=URL.createObjectURL(F),Q=window.open("");if(!Q)return;const C=Q.document.createElement("img");C.onload=function(){URL.revokeObjectURL(b)},C.src=b,Q.document.body.appendChild(C)}}static EncodeScreenshotCanvasData(F,b){let Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0,z=arguments.length>4?arguments[4]:void 0;if("string"!==typeof C&&b){if(b){if(c._IsOffScreenCanvas(F))return void F.convertToBlob({type:Q,quality:z}).then((F=>{const Q=new FileReader;Q.readAsDataURL(F),Q.onloadend=()=>{const F=Q.result;b(F)}}));const C=F.toDataURL(Q,z);b(C)}}else this.ToBlob(F,(function(F){F&&c.DownloadBlob(F,C),b&&b("")}),Q,z)}static Download(F,b){if("undefined"===typeof URL)return;const Q=window.URL.createObjectURL(F),C=document.createElement("a");document.body.appendChild(C),C.style.display="none",C.href=Q,C.download=b,C.addEventListener("click",(()=>{C.parentElement&&C.parentElement.removeChild(C)})),C.click(),window.URL.revokeObjectURL(Q)}static BackCompatCameraNoPreventDefault(F){return"boolean"===typeof F[0]?F[0]:"boolean"===typeof F[1]&&F[1]}static CreateScreenshot(F,b,Q,C){throw(0,Z.c)("ScreenshotTools")}static async CreateScreenshotAsync(F,b,Q){throw(0,Z.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(F,b,Q,C){throw(0,Z.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(F,b,Q){throw(0,Z.c)("ScreenshotTools")}static RandomId(){return(0,y.b)()}static IsBase64(F){return(0,K.n)(F)}static DecodeBase64(F){return(0,K.d)(F)}static get errorsCount(){return t.e.errorsCount}static Log(F){t.e.Log(F)}static Warn(F){t.e.Warn(F)}static Error(F){t.e.Error(F)}static get LogCache(){return t.e.LogCache}static ClearLogCache(){t.e.ClearLogCache()}static set LogLevels(F){t.e.LogLevels=F}static set PerformanceLogLevel(F){return(F&c.PerformanceUserMarkLogLevel)===c.PerformanceUserMarkLogLevel?(c.StartPerformanceCounter=c._StartUserMark,void(c.EndPerformanceCounter=c._EndUserMark)):(F&c.PerformanceConsoleLogLevel)===c.PerformanceConsoleLogLevel?(c.StartPerformanceCounter=c._StartPerformanceConsole,void(c.EndPerformanceCounter=c._EndPerformanceConsole)):(c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,void(c.EndPerformanceCounter=c._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(F,b){}static _EndPerformanceCounterDisabled(F,b){}static _StartUserMark(F){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c._Performance){if(!(0,z.k)())return;c._Performance=window.performance}b&&c._Performance.mark&&c._Performance.mark(F+"-Begin")}static _EndUserMark(F){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&c._Performance.mark&&(c._Performance.mark(F+"-End"),c._Performance.measure(F,F+"-Begin",F+"-End"))}static _StartPerformanceConsole(F){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(c._StartUserMark(F,b),console.time&&console.time(F))}static _EndPerformanceConsole(F){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(c._EndUserMark(F,b),console.timeEnd(F))}static get Now(){return W.d.Now}static GetClassName(F){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=null;if(!b&&F.getClassName)Q=F.getClassName();else{if(F instanceof Object){Q=(b?F:Object.getPrototypeOf(F)).constructor.__bjsclassName__}Q||(Q=typeof F)}return Q}static First(F,b){for(const Q of F)if(b(Q))return Q;return null}static getFullClassName(F){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Q=null,C=null;if(!b&&F.getClassName)Q=F.getClassName();else{if(F instanceof Object){const z=b?F:Object.getPrototypeOf(F);Q=z.constructor.__bjsclassName__,C=z.constructor.__bjsmoduleName__}Q||(Q=typeof F)}return Q?(null!=C?C+".":"")+Q:null}static async DelayAsync(F){await new Promise((b=>{setTimeout((()=>{b()}),F)}))}static IsSafari(){return!!(0,z.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function X(F,b){return Q=>{Q.__bjsclassName__=F,Q.__bjsmoduleName__=null!=b?b:null}}c.AssetBaseUrl="",c.UseCustomRequestHeaders=!1,c.CustomRequestHeaders=q.b.CustomRequestHeaders,c.GetDOMTextContent=z.b,c._DefaultCdnUrl="https://cdn.babylonjs.com",c._DefaultAssetsUrl="https://assets.babylonjs.com/core",c.GetAbsoluteUrl="object"===typeof document?F=>{const b=document.createElement("a");return b.href=F,b.href}:"function"===typeof URL&&"object"===typeof location?F=>new URL(F,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},c.NoneLogLevel=t.e.NoneLogLevel,c.MessageLogLevel=t.e.MessageLogLevel,c.WarningLogLevel=t.e.WarningLogLevel,c.ErrorLogLevel=t.e.ErrorLogLevel,c.AllLogLevel=t.e.AllLogLevel,c.IsWindowObjectExist=z.k,c.PerformanceNoneLogLevel=0,c.PerformanceUserMarkLogLevel=1,c.PerformanceConsoleLogLevel=2,c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,c.EndPerformanceCounter=c._EndPerformanceCounterDisabled;class L{constructor(F,b,Q){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=F,this.index=C-1,this._done=!1,this._fn=b,this._successCallback=Q}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(F,b,Q){const C=new L(F,b,Q,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return C.executeNext(),C}static SyncAsyncForLoop(F,b,Q,C,z){let t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return L.Run(Math.ceil(F/b),(C=>{z&&z()?C.breakLoop():setTimeout((()=>{for(let t=0;t<b;++t){const g=C.index*b+t;if(g>=F)break;if(Q(g),z&&z()){C.breakLoop();break}}C.executeNext()}),t)}),C)}}c.Mix=E.g,c.IsExponentOfTwo=E.e,G.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11265:(F,b,Q)=>{Q.d(b,{d:()=>t,g:()=>z});const C={};function z(F,b){C[F]=b}function t(F){return C[F]}},11159:(F,b,Q)=>{Q.d(b,{b:()=>C});class C{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(C.CustomRequestHeaders).length>0||C.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const F in C.CustomRequestHeaders){const b=C.CustomRequestHeaders[F];b&&this._xhr.setRequestHeader(F,b)}}_shouldSkipRequestModifications(F){return C.SkipRequestModificationForBabylonCDN&&(F.includes("preview.babylonjs.com")||F.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(F){this._xhr.onprogress=F}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(F){this._xhr.responseType=F}get timeout(){return this._xhr.timeout}set timeout(F){this._xhr.timeout=F}addEventListener(F,b,Q){this._xhr.addEventListener(F,b,Q)}removeEventListener(F,b,Q){this._xhr.removeEventListener(F,b,Q)}abort(){this._xhr.abort()}send(F){C.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(F)}open(F,b){for(const Q of C.CustomRequestModifiers){if(this._shouldSkipRequestModifications(b))return;b=Q(this._xhr,b)||b}b=(b=b.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=b,this._xhr.open(F,b,!0)}setRequestHeader(F,b){this._xhr.setRequestHeader(F,b)}getResponseHeader(F){return this._xhr.getResponseHeader(F)}}C.CustomRequestHeaders={},C.CustomRequestModifiers=new Array,C.SkipRequestModificationForBabylonCDN=!0}}]);