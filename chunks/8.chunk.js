"use strict";(self.bbj0x35f849=self.bbj0x35f849||[]).push([[8],{11032:(N,q,C)=>{C.d(q,{b:()=>K});var d=C(10995),U=C(10962),W=C(11034),a=C(11048),F=C(10980);class w{constructor(){let N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,N&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(N){this._zOffset!==N&&(this._zOffset=N,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(N){this._zOffsetUnits!==N&&(this._zOffsetUnits=N,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(N){this._cullFace!==N&&(this._cullFace=N,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(N){this._cull!==N&&(this._cull=N,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(N){this._depthFunc!==N&&(this._depthFunc=N,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(N){this._depthMask!==N&&(this._depthMask=N,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(N){this._depthTest!==N&&(this._depthTest=N,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(N){this._frontFace!==N&&(this._frontFace=N,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(N){this.isDirty&&(this._isCullDirty&&(this.cull?N.enable(N.CULL_FACE):N.disable(N.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(N.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(N.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?N.enable(N.DEPTH_TEST):N.disable(N.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(N.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(N.enable(N.POLYGON_OFFSET_FILL),N.polygonOffset(this.zOffset,this.zOffsetUnits)):N.disable(N.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(N.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class A{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(N){this._func!==N&&(this._func=N,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(N){this._funcRef!==N&&(this._funcRef=N,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(N){this._funcMask!==N&&(this._funcMask=N,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(N){this._opStencilFail!==N&&(this._opStencilFail=N,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(N){this._opDepthFail!==N&&(this._opDepthFail=N,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(N){this._opStencilDepthPass!==N&&(this._opStencilDepthPass=N,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(N){this._mask!==N&&(this._mask=N,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(N){this._enabled!==N&&(this._enabled=N,this._isStencilTestDirty=!0)}constructor(){let N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,N&&this.reset()}reset(){var N;this.stencilMaterial=void 0,null===(N=this.stencilGlobal)||void 0===N||N.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(N){var q;if(!N)return;const C=!this.useStencilGlobalOnly&&!(null===(q=this.stencilMaterial)||void 0===q||!q.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?N.enable(N.STENCIL_TEST):N.disable(N.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(N.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(N.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(N.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class n{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=n.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=n.KEEP,this.opDepthFail=n.KEEP,this.opStencilDepthPass=n.REPLACE}get stencilFunc(){return this.func}set stencilFunc(N){this.func=N}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(N){this.funcRef=N}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(N){this.funcMask=N}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(N){this.opStencilFail=N}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(N){this.opDepthFail=N}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(N){this.opStencilDepthPass=N}get stencilMask(){return this.mask}set stencilMask(N){this.mask=N}get stencilTest(){return this.enabled}set stencilTest(N){this.enabled=N}}n.ALWAYS=519,n.KEEP=7680,n.REPLACE=7681;class t{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(N){this._alphaBlend!==N&&(this._alphaBlend=N,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(N,q,C,d){this._blendConstants[0]===N&&this._blendConstants[1]===q&&this._blendConstants[2]===C&&this._blendConstants[3]===d||(this._blendConstants[0]=N,this._blendConstants[1]=q,this._blendConstants[2]=C,this._blendConstants[3]=d,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(N,q,C,d){this._blendFunctionParameters[0]===N&&this._blendFunctionParameters[1]===q&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===d||(this._blendFunctionParameters[0]=N,this._blendFunctionParameters[1]=q,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=d,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(N,q){this._blendEquationParameters[0]===N&&this._blendEquationParameters[1]===q||(this._blendEquationParameters[0]=N,this._blendEquationParameters[1]=q,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(N){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?N.enable(N.BLEND):N.disable(N.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(N.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(N.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(N.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var V=C(10985),Z=C(11055),J=C(10953),Q=C(10949),v=C(11025),r=C(11065);function O(N,q){if((0,J.k)()){const{requestAnimationFrame:C}=q||window;if("function"===typeof C)return C(N)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(N);return setTimeout(N,16)}class K{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(N){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(N){N!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=N,this._depthCullingState.depthFunc=N?518:515)}setColorWrite(N){N!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=N)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(N){if(N)return this.isNDCHalfZRange?N.IS_NDC_HALF_ZRANGE="":delete N.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?N.USE_REVERSE_DEPTHBUFFER="":delete N.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?N.USE_EXACT_SRGB_CONVERSIONS="":delete N.USE_EXACT_SRGB_CONVERSIONS);{let N="";return this.isNDCHalfZRange&&(N+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(N&&(N+="\n"),N+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(N&&(N+="\n"),N+="#define USE_EXACT_SRGB_CONVERSIONS"),N}}_rebuildInternalTextures(){const N=this._internalTexturesCache.slice();for(const q of N)q._rebuild()}_rebuildRenderTargetWrappers(){const N=this._renderTargetWrapperCache.slice();for(const q of N)q._rebuild()}_rebuildEffects(){for(const N in this._compiledEffects){const q=this._compiledEffects[N];q._pipelineContext=null,q._prepareEffect()}W.Effect.ResetCache()}_rebuildGraphicsResources(){var N;this.wipeCaches(!0),this._rebuildEffects(),null===(N=this._rebuildComputeEffects)||void 0===N||N.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){U.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(N){setTimeout((()=>{this._clearEmptyResources();const q=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,d=this._depthCullingState.depthMask,U=this._stencilState.stencilTest;N(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=q,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=d,this._stencilState.stencilTest=U,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(N){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(N){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const N=new Uint8Array(4),q=[N,N,N,N,N,N];this._emptyCubeTexture=this.createRawCubeTexture(q,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(N){if(!N)return this._activeRenderLoops.length=0,void this._cancelFrame();const q=this._activeRenderLoops.indexOf(N);q>=0&&(this._activeRenderLoops.splice(q,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const N=this._frameHandler;if(this._frameHandler=0,(0,J.k)()){const{cancelAnimationFrame:q}=this.getHostWindow()||window;if("function"===typeof q)return q(N)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(N);return clearTimeout(N)}}Fd(){this.onBeginFrameObservable.notifyObservers(this)}nd(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(N){this._maxFPS=N,void 0!==N&&(this._minFrameTime=N<=0?Number.MAX_VALUE:1e3/N)}_isOverFrameTime(N){if(!N||void 0===this._maxFPS)return!1;const q=N-this._lastFrameTime;return this._lastFrameTime=N,this._renderAccumulator+=q,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(N){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(N)){let N=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(N=!1),N&&(this.Fd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.nd())}}_renderLoop(N){this._processFrame(N),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let N=0;N<this._activeRenderLoops.length;N++){(0,this._activeRenderLoops[N])()}}_renderViews(){return!1}_queueNewFrame(N,q){return O(N,q)}runRenderLoop(N){-1===this._activeRenderLoops.indexOf(N)&&(this._activeRenderLoops.push(N),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(N){this._depthCullingState.depthTest=N}setZOffset(N){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-N:N}getZOffset(){const N=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-N:N}setZOffsetUnits(N){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-N:N}getZOffsetUnits(){const N=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-N:N}getHostWindow(){return(0,J.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(N){this._compatibilityMode=!0}_rebuildTextures(){for(const N of this.scenes)N._rebuildTextures();for(const N of this._virtualScenes)N._rebuildTextures()}_releaseRenderTargetWrapper(N){const q=this._renderTargetWrapperCache.indexOf(N);-1!==q&&this._renderTargetWrapperCache.splice(q,1)}get currentViewport(){return this._cachedViewport}setViewport(N,q,C){const d=q||this.getRenderWidth(),U=C||this.getRenderHeight(),W=N.x||0,a=N.y||0;this._cachedViewport=N,this._viewport(W*d,a*U,d*N.width,U*N.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(N){return new Path2D(N)}get description(){let N=this.name+this.version;return this._caps.parallelShaderCompile&&(N+=" - Parallel shader compilation"),N}_createTextureBase(N,q,C,W){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,F=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,A=arguments.length>7?arguments[7]:void 0,n=arguments.length>8?arguments[8]:void 0,t=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,V=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,J=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Q=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,v=arguments.length>13?arguments[13]:void 0,O=arguments.length>14?arguments[14]:void 0,i=arguments.length>15?arguments[15]:void 0;const I="data:"===(N=N||"").substring(0,5),j="blob:"===N.substring(0,5),l=I&&-1!==N.indexOf(";base64,"),T=V||new Z.e(this,1);T!==V&&(T.label=N.substring(0,60));const z=N;!this._transformTextureUrl||l||V||t||(N=this._transformTextureUrl(N)),z!==N&&(T._originalUrl=z);const p=N.lastIndexOf(".");let s=Q||(p>-1?N.substring(p).toLowerCase():"");s.indexOf("?")>-1&&(s=s.split("?")[0]);const X=(0,r.b)(s,v);W&&W.addPendingData(T),T.url=N,T.generateMipMaps=!q,T.samplingMode=a,T.invertY=C,T._useSRGBBuffer=this._getUseSRGBBuffer(!!i,q),this._doNotHandleContextLost||(T._buffer=t);let P=null;F&&!V&&(P=T.onLoadedObservable.add(F)),V||this._internalTexturesCache.push(T);const M=(C,V)=>{W&&W.removePendingData(T),N===z?(P&&T.onLoadedObservable.remove(P),d.e.UseFallbackTexture&&N!==d.e.FallbackTexture&&this._createTextureBase(d.e.FallbackTexture,q,T.invertY,W,a,null,w,A,n,t,T),C=(C||"Unknown error")+(d.e.UseFallbackTexture?" - Fallback texture was used":""),T.onErrorObservable.notifyObservers({message:C,exception:V}),w&&w(C,V)):(U.c.Warn(`Failed to load ${N}, falling back to ${z}`),this._createTextureBase(z,q,T.invertY,W,a,F,w,A,n,t,T,J,Q,v,O,i))};if(X){const q=async N=>{(await X).loadData(N,T,((N,q,C,d,U,F)=>{F?M("TextureLoader failed to load data"):A(T,s,W,{width:N,height:q},T.invertY,!C,d,(()=>(U(),!1)),a)}),O)};t?t instanceof ArrayBuffer?q(new Uint8Array(t)):ArrayBuffer.isView(t)?q(t):w&&w("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(N,(N=>{q(new Uint8Array(N))}),void 0,W?W.offlineProvider:void 0,!0,((N,q)=>{M("Unable to load "+(N&&N.responseURL,q))}))}else{const C=N=>{j&&!this._doNotHandleContextLost&&(T._buffer=N),A(T,s,W,N,T.invertY,q,!1,n,a)};!I||l?t&&("string"===typeof t.decoding||t.close)?C(t):K._FileToolsLoadImage(N||"",C,M,W?W.offlineProvider:null,v,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof t||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Blob?K._FileToolsLoadImage(t,C,M,W?W.offlineProvider:null,v,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):t&&C(t)}return T}_rebuildBuffers(){for(const N of this._uniformBuffers)N._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,J.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const N in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,N)&&(this._boundTexturesCache[N]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(N){this._name=N}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(N){this._hardwareScalingLevel=N,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(N){this._doNotHandleContextLost=N}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(N,q,C){var U,W;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new w,this._stencilStateComposer=new A,this._stencilState=new n,this._alphaState=new t,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new Q.b,this.onCanvasFocusObservable=new Q.b,this.onNewSceneAddedObservable=new Q.b,this.onResizeObservable=new Q.b,this.onCanvasPointerOutObservable=new Q.b,this.onEffectErrorObservable=new Q.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new Q.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=N=>this._renderLoop(N),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new Q.b,this.onAfterShaderCompilationObservable=new Q.b,this.onBeginFrameObservable=new Q.b,this.onEndFrameObservable=new Q.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new Q.b,this.onContextRestoredObservable=new Q.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.td=new Q.b,this.onReleaseEffectsObservable=new Q.b,d.e.Instances.push(this),this.startTime=F.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,a.d.SetMatrixPrecision(!!q.useHighPrecisionMatrix),(0,J.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=C??!1,q.antialias=N??q.antialias,q.deterministicLockstep=q.deterministicLockstep??!1,q.lockstepMaxSteps=q.lockstepMaxSteps??4,q.timeStep=q.timeStep??1/60,q.stencil=q.stencil??!0,this._audioContext=(null===(U=q.audioEngineOptions)||void 0===U?void 0:U.audioContext)??null,this._audioDestination=(null===(W=q.audioEngineOptions)||void 0===W?void 0:W.audioDestination)??null,this.premultipliedAlpha=q.premultipliedAlpha??!0,this._doNotHandleContextLost=!!q.doNotHandleContextLost,this._isStencilEnable=!!q.stencil,this.useExactSrgbConversions=q.useExactSrgbConversions??!1;const V=(0,J.k)()&&window.devicePixelRatio||1,Z=q.limitDeviceRatio||V;C=C||q.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(Z,V):1,this._lastDevicePixelRatio=V,this._creationOptions=q}resize(){let N,q,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const N=(0,J.k)()&&window.devicePixelRatio||1,q=this._lastDevicePixelRatio/N;this._lastDevicePixelRatio=N,this._hardwareScalingLevel*=q}if((0,J.k)()&&(0,J.f)())if(this._renderingCanvas){var d,U;const C=null===(d=(U=this._renderingCanvas).getBoundingClientRect)||void 0===d?void 0:d.call(U);N=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,q=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else N=window.innerWidth,q=window.innerHeight;else N=this._renderingCanvas?this._renderingCanvas.width:100,q=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(N/this._hardwareScalingLevel,q/this._hardwareScalingLevel,C)}setSize(N,q){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(N|=0,q|=0,!C&&this._renderingCanvas.width===N&&this._renderingCanvas.height===q)return!1;if(this._renderingCanvas.width=N,this._renderingCanvas.height=q,this.scenes){for(let N=0;N<this.scenes.length;N++){const q=this.scenes[N];for(let N=0;N<q.cameras.length;N++){q.cameras[N]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(N,q,C,d,U,W,a,F,w,A,n){throw(0,V.b)("engine.rawTexture")}createRawCubeTexture(N,q,C,d,U,W,a,F){throw(0,V.b)("engine.rawTexture")}createRawTexture3D(N,q,C,d,U,W,a,F,w,A,n){throw(0,V.b)("engine.rawTexture")}createRawTexture2DArray(N,q,C,d,U,W,a,F,w,A,n){throw(0,V.b)("engine.rawTexture")}_sharedInit(N){this._renderingCanvas=N}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const N=navigator.userAgent;this.hostInformation.isMobile=-1!==N.indexOf("Mobile")||-1!==N.indexOf("Mac")&&(0,J.f)()&&"ontouchend"in document},this._checkForMobile(),(0,J.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(N){return document.createElement("video")}_reportDrawCall(){var N;let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(N=this._drawCalls)||void 0===N||N.addCount(q,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(N,q){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(N,q){return createImageBitmap(N,q)}resizeImageBitmap(N,q,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(N){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(N,q){if("undefined"===typeof document)return new OffscreenCanvas(N,q);const C=document.createElement("canvas");return C.width=N,C.height=q,C}createCanvas(N,q){return K._CreateCanvas(N,q)}static _FileToolsLoadImage(N,q,C,d,U,W,a){throw(0,V.b)("FileTools")}_loadFile(N,q,C,d,U,W){const a=(0,v.i)(N,q,C,d,U,W);return this._activeRequests.push(a),a.onCompleteObservable.add((()=>{const N=this._activeRequests.indexOf(a);-1!==N&&this._activeRequests.splice(N,1)})),a}static _FileToolsLoadFile(N,q,C,d,U,W){if(v.b.loadFile)return v.b.loadFile(N,q,C,d,U,W);throw(0,V.b)("FileTools")}dispose(){var N;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(N=this.releaseComputeEffects)||void 0===N||N.call(this),W.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.td.notifyObservers(this),this.td.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,J.k)()&&window.removeEventListener("resize",this._checkForMobile);const q=d.e.Instances.indexOf(this);q>=0&&d.e.Instances.splice(q,1),d.e.Instances.length||(d.e.OnEnginesDisposedObservable.notifyObservers(this),d.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(N){throw(0,V.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(N,q){for(let C=0;C<d.e.Instances.length;C++){const U=d.e.Instances[C];for(let C=0;C<U.scenes.length;C++)U.scenes[C].markAllMaterialsAsDirty(N,q)}}}K._RenderPassIdCounter=0,K._RescalePostProcessFactory=null,K.CollisionsEpsilon=.001,K.QueueNewFrame=O},10995:(N,q,C)=>{C.d(q,{e:()=>U});var d=C(10949);class U{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}U.Instances=[],U.OnEnginesDisposedObservable=new d.b,U._LastCreatedScene=null,U.UseFallbackTexture=!0,U.FallbackTexture=""},11048:(N,q,C)=>{C.d(q,{d:()=>d});class d{static SetMatrixPrecision(N){if(d.MatrixTrackPrecisionChange=!1,N&&!d.MatrixUse64Bits&&d.MatrixTrackedMatrices)for(let q=0;q<d.MatrixTrackedMatrices.length;++q){const N=d.MatrixTrackedMatrices[q],C=N.Vd;N.Vd=new Array(16);for(let q=0;q<16;++q)N.Vd[q]=C[q]}d.MatrixUse64Bits=N,d.MatrixCurrentType=d.MatrixUse64Bits?Array:Float32Array,d.MatrixTrackedMatrices=null}}d.MatrixUse64Bits=!1,d.MatrixTrackPrecisionChange=!0,d.MatrixCurrentType=Float32Array,d.MatrixTrackedMatrices=[]},11065:(N,q,C)=>{C.d(q,{b:()=>a});var d=C(10962);const U=new Map;function W(N,q){(function(N){return U.delete(N)})(N)&&d.c.Warn(`Extension with the name '${N}' already exists`),U.set(N,q)}function a(N,q){"image/ktx"!==q&&"image/ktx2"!==q||(N=".ktx"),U.has(N)||(N.endsWith(".ies")&&W(".ies",(async()=>await C.e(15).then(C.bind(C,13522)).then((N=>new N._IESTextureLoader)))),N.endsWith(".dds")&&W(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,13528)).then((N=>new N._DDSTextureLoader)))),N.endsWith(".basis")&&W(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,13542)).then((N=>new N._BasisTextureLoader)))),N.endsWith(".env")&&W(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,13548)).then((N=>new N._ENVTextureLoader)))),N.endsWith(".hdr")&&W(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,13553)).then((N=>new N._HDRTextureLoader)))),(N.endsWith(".ktx")||N.endsWith(".ktx2"))&&(W(".ktx",(async()=>await C.e(30).then(C.bind(C,13560)).then((N=>new N._KTXTextureLoader)))),W(".ktx2",(async()=>await C.e(30).then(C.bind(C,13560)).then((N=>new N._KTXTextureLoader))))),N.endsWith(".tga")&&W(".tga",(async()=>await C.e(50).then(C.bind(C,13564)).then((N=>new N._TGATextureLoader)))),N.endsWith(".exr")&&W(".exr",(async()=>await C.e(16).then(C.bind(C,13569)).then((N=>new N._ExrTextureLoader)))));const d=U.get(N);return d?Promise.resolve(d(q)):null}},11055:(N,q,C)=>{C.d(q,{e:()=>a});var d,U=C(10949),W=C(11063);!function(N){N[N.Unknown=0]="Unknown",N[N.Url=1]="Url",N[N.Temp=2]="Temp",N[N.Raw=3]="Raw",N[N.Dynamic=4]="Dynamic",N[N.RenderTarget=5]="RenderTarget",N[N.MultiRenderTarget=6]="MultiRenderTarget",N[N.Cube=7]="Cube",N[N.CubeRaw=8]="CubeRaw",N[N.CubePrefiltered=9]="CubePrefiltered",N[N.Raw3D=10]="Raw3D",N[N.Raw2DArray=11]="Raw2DArray",N[N.DepthStencil=12]="DepthStencil",N[N.CubeRawRGBD=13]="CubeRawRGBD",N[N.Depth=14]="Depth"}(d||(d={}));class a extends W.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(N){this.generateMipMaps=N}get uniqueId(){return this._uniqueId}_setUniqueId(N){this._uniqueId=N}getEngine(){return this._engine}get source(){return this._source}constructor(N,q){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new U.b,this.onErrorObservable=new U.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=N,this._source=q,this._uniqueId=a._Counter++,C||(this._hardwareTexture=N._createHardwareTexture())}incrementReferences(){this._references++}updateSize(N,q){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,N,q,C),this.width=N,this.height=q,this.depth=C,this.baseWidth=N,this.baseHeight=q,this.baseDepth=C,this._size=N*q*C}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const N=this.onRebuildCallback(this),q=q=>{q._swapAndDie(this,!1),this.isReady=N.isReady};return void(N.isAsync?N.proxy.then(q):q(N.proxy))}let N;switch(this.source){case 2:case 12:case 14:break;case 1:return void(N=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(N=>{N._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:N=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),N._swapAndDie(this,!1),this.isReady=!0;break;case 10:N=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),N._swapAndDie(this,!1),this.isReady=!0;break;case 11:N=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),N._swapAndDie(this,!1),this.isReady=!0;break;case 4:N=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),N._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(N=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{N._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:N=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),N._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return N=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(N=>{N&&N._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(N._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(N){var q;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(q=this._hardwareTexture)||void 0===q||q.setUsage(N._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),N._hardwareTexture=this._hardwareTexture,C&&(N._isRGBD=this._isRGBD),this._lodTextureHigh&&(N._lodTextureHigh&&N._lodTextureHigh.dispose(),N._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(N._lodTextureMid&&N._lodTextureMid.dispose(),N._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(N._lodTextureLow&&N._lodTextureLow.dispose(),N._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(N._irradianceTexture&&N._irradianceTexture.dispose(),N._irradianceTexture=this._irradianceTexture);const d=this._engine.getLoadedTexturesCache();let U=d.indexOf(this);-1!==U&&d.splice(U,1),U=d.indexOf(N),-1===U&&d.push(N)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}a._Counter=0},11063:(N,q,C)=>{C.d(q,{d:()=>d});class d{get wrapU(){return this._cachedWrapU}set wrapU(N){this._cachedWrapU=N}get wrapV(){return this._cachedWrapV}set wrapV(N){this._cachedWrapV=N}get wrapR(){return this._cachedWrapR}set wrapR(N){this._cachedWrapR=N}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(N){this._cachedAnisotropicFilteringLevel=N}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(N){this._comparisonFunction=N}get useMipMaps(){return this._useMipMaps}set useMipMaps(N){this._useMipMaps=N}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=N,this._cachedWrapV=q,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=d,this.samplingMode=U,this._comparisonFunction=W,this}compareSampler(N){return this._cachedWrapU===N._cachedWrapU&&this._cachedWrapV===N._cachedWrapV&&this._cachedWrapR===N._cachedWrapR&&this._cachedAnisotropicFilteringLevel===N._cachedAnisotropicFilteringLevel&&this.samplingMode===N.samplingMode&&this._comparisonFunction===N._comparisonFunction&&this._useMipMaps===N._useMipMaps}}},10971:(N,q,C)=>{C.d(q,{b:()=>W});var d=C(10962);const U=(N,q,C)=>N?N.getClassName&&"Mesh"===N.getClassName()?null:!N.getClassName||"SubMesh"!==N.getClassName()&&"PhysicsBody"!==N.getClassName()?N.clone?N.clone():Array.isArray(N)?N.slice():C&&"object"===typeof N?{...N}:null:N.clone(q):null;class W{static DeepCopy(N,q,C,W){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const F=function(N){const q=[];do{const C=Object.getOwnPropertyNames(N);for(const N of C)-1===q.indexOf(N)&&q.push(N)}while(N=Object.getPrototypeOf(N));return q}(N);for(const A of F){if("_"===A[0]&&(!W||-1===W.indexOf(A)))continue;if(A.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(A))continue;const F=N[A],n=typeof F;if("function"!==n)try{if("object"===n)if(F instanceof Uint8Array)q[A]=Uint8Array.from(F);else if(F instanceof Array){if(q[A]=[],F.length>0)if("object"==typeof F[0])for(let N=0;N<F.length;N++){const C=U(F[N],q,a);-1===q[A].indexOf(C)&&q[A].push(C)}else q[A]=F.slice(0)}else q[A]=U(F,q,a);else q[A]=F}catch(w){d.c.Warn(w.message)}}}}},11009:(N,q,C)=>{C.d(q,{c:()=>d,e:()=>U,h:()=>W});class d extends Error{}d._setPrototypeOf=Object.setPrototypeOf||((N,q)=>(N.__proto__=q,N));const U={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class W extends d{constructor(N,q,C){super(N),this.errorCode=q,this.innerError=C,this.name="RuntimeError",d._setPrototypeOf(this,W.prototype)}}},11e3:(N,q,C)=>{C.d(q,{b:()=>M,e:()=>K,f:()=>p,j:()=>X,o:()=>T,m:()=>v,s:()=>j,u:()=>l,x:()=>z,z:()=>i});var d=C(10992),U=C(10953),W=C(10949);class a{}a.FilesToLoad={};var F=C(11009),w=C(11011),A=C(11016),n=C(10995),t=C(10962),V=C(11029),Z=C(11025),J=C(11032);const Q=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class v extends F.h{constructor(N,q){super(N,F.e.LoadFileError),this.name="LoadFileError",F.c._setPrototypeOf(this,v.prototype),q instanceof d.e?this.request=q:this.file=q}}class r extends F.h{constructor(N,q){super(N,F.e.RequestFileError),this.request=q,this.name="RequestFileError",F.c._setPrototypeOf(this,r.prototype)}}class O extends F.h{constructor(N,q){super(N,F.e.ReadFileError),this.file=q,this.name="ReadFileError",F.c._setPrototypeOf(this,O.prototype)}}const K={DefaultRetryStrategy:class{static ExponentialBackoff(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,d,U)=>0!==d.status||U>=N||-1!==C.indexOf("file:")?-1:Math.pow(2,U)*q}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:N=>N,ScriptBaseUrl:"",ScriptPreprocessUrl:N=>N,CleanUrl:N=>N=N.replace(/#/gm,"%23")},i=(N,q)=>{if((!N||0!==N.indexOf("data:"))&&K.CorsBehavior)if("string"===typeof K.CorsBehavior||K.CorsBehavior instanceof String)q.crossOrigin=K.CorsBehavior;else{const C=K.CorsBehavior(N);C&&(q.crossOrigin=C)}},I={getRequiredSize:null},j=function(N,q,C,U){let W,F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",A=arguments.length>5?arguments[5]:void 0,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===t||void 0===t||!t._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let V=!1;N instanceof ArrayBuffer||ArrayBuffer.isView(N)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(W=URL.createObjectURL(new Blob([N],{type:F})),V=!0):W=`data:${F};base64,`+(0,w.i)(N):N instanceof Blob?(W=URL.createObjectURL(N),V=!0):(W=K.CleanUrl(N),W=K.PreprocessUrl(W));const Z=q=>{if(C){const d=W||N.toString();C(`Error while trying to load image: ${0===d.indexOf("http")||d.length<=128?d:d.slice(0,128)+"..."}`,q)}};if(null!==t&&void 0!==t&&t._features.forceBitmapOverHTMLImageElement)return T(W,(d=>{t.createImageBitmap(new Blob([d],{type:F}),{premultiplyAlpha:"none",...A}).then((N=>{q(N),V&&URL.revokeObjectURL(W)})).catch((q=>{C&&C("Error while trying to load image: "+N,q)}))}),void 0,U||void 0,!0,((N,q)=>{Z(q)})),null;const J=new Image;if(I.getRequiredSize){const q=I.getRequiredSize(N);q.width&&(J.width=q.width),q.height&&(J.height=q.height)}i(W,J);const Q=[],v=()=>{for(const N of Q)N.target.removeEventListener(N.name,N.handler);Q.length=0};Q.push({target:J,name:"load",handler:()=>{v(),q(J),V&&J.src&&URL.revokeObjectURL(J.src)}}),Q.push({target:J,name:"error",handler:N=>{v(),Z(N),V&&J.src&&URL.revokeObjectURL(J.src)}}),Q.push({target:document,name:"securitypolicyviolation",handler:N=>{if(N.blockedURI!==J.src||"Jd"===N.disposition)return;v();const q=new Error(`CSP violation of policy ${N.effectiveDirective} ${N.blockedURI}. Current policy is ${N.originalPolicy}`);n.e.UseFallbackTexture=!1,Z(q),V&&J.src&&URL.revokeObjectURL(J.src),J.src=""}}),(()=>{for(const N of Q)N.target.addEventListener(N.name,N.handler)})();const r="blob:"===W.substring(0,5),O="data:"===W.substring(0,5),j=()=>{r||O||!d.e.IsCustomRequestAvailable?J.src=W:T(W,((N,q,C)=>{const d=new Blob([N],{type:!F&&C?C:F}),U=URL.createObjectURL(d);V=!0,J.src=U}),void 0,U||void 0,!0,((N,q)=>{Z(q)}))},l=()=>{U&&U.loadImage(W,J)};if(!r&&!O&&U&&U.enableTexturesOffline)U.open(l,j);else{if(-1!==W.indexOf("file:")){const N=decodeURIComponent(W.substring(5).toLowerCase());if(a.FilesToLoad[N]&&"undefined"!==typeof URL){try{let q;try{q=URL.createObjectURL(a.FilesToLoad[N])}catch(z){q=URL.createObjectURL(a.FilesToLoad[N])}J.src=q,V=!0}catch(p){J.src=""}return J}}j()}return J},l=(N,q,C,d,U)=>{const a=new FileReader,F={onCompleteObservable:new W.b,abort:()=>a.abort()};return a.onloadend=()=>F.onCompleteObservable.notifyObservers(F),U&&(a.onerror=()=>{U(new O(`Unable to read ${N.name}`,N))}),a.onload=N=>{q(N.target.result)},C&&(a.onprogress=C),d?a.readAsArrayBuffer(N):a.readAsText(N),F},T=(N,q,C,d,U,w,A)=>{if(N.name)return l(N,q,C,U,w?N=>{w(void 0,N)}:void 0);const n=N;if(-1!==n.indexOf("file:")){let N=decodeURIComponent(n.substring(5).toLowerCase());0===N.indexOf("./")&&(N=N.substring(2));const d=a.FilesToLoad[N];if(d)return l(d,q,C,U,w?N=>w(void 0,new v(N.message,N.file)):void 0)}const{match:Z,type:J}=P(n);if(Z){const N={onCompleteObservable:new W.b,abort:()=>()=>{}};try{const N=U?M(n):Y(n);q(N,void 0,J)}catch(F){w?w(void 0,F):t.c.Error(F.message||"Failed to parse the Data URL")}return V.b.SetImmediate((()=>{N.onCompleteObservable.notifyObservers(N)})),N}return z(n,((N,C)=>{q(N,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,d,U,w?N=>{w(N.request,new v(N.message,N.request))}:void 0,A)},z=(N,q,C,a,F,w,A)=>{N=K.CleanUrl(N),N=K.PreprocessUrl(N);const n=K.BaseUrl+N;let V=!1;const Z={onCompleteObservable:new W.b,abort:()=>V=!0},J=()=>{let N,W=new d.e,a=null;const J=()=>{W&&(C&&W.removeEventListener("progress",C),N&&W.removeEventListener("readystatechange",N),W.removeEventListener("loadend",Q))};let Q=()=>{J(),Z.onCompleteObservable.notifyObservers(Z),Z.onCompleteObservable.clear(),C=void 0,N=null,Q=null,w=void 0,A=void 0,q=void 0};Z.abort=()=>{V=!0,Q&&Q(),W&&W.readyState!==(XMLHttpRequest.DONE||4)&&W.abort(),null!==a&&(clearTimeout(a),a=null),W=null};const v=N=>{const q=N.message||"Unknown error";w&&W?w(new r(q,W)):t.c.Error(q)},O=t=>{if(W){if(W.open("GET",n),A)try{A(W)}catch(Z){return void v(Z)}F&&(W.responseType="arraybuffer"),C&&W.addEventListener("progress",C),Q&&W.addEventListener("loadend",Q),N=()=>{if(!V&&W&&W.readyState===(XMLHttpRequest.DONE||4)){if(N&&W.removeEventListener("readystatechange",N),W.status>=200&&W.status<300||0===W.status&&(!(0,U.k)()||s())){const N=F?W.response:W.responseText;if(null!==N){try{q&&q(N,W)}catch(Z){v(Z)}return}}const C=K.DefaultRetryStrategy;if(C){const N=C(n,W,t);if(-1!==N)return J(),W=new d.e,void(a=setTimeout((()=>O(t+1)),N))}const A=new r("Error status: "+W.status+" "+W.statusText+" - Unable to load "+n,W);w&&w(A)}},W.addEventListener("readystatechange",N),W.send()}};O(0)};if(a&&a.enableSceneOffline){const d=N=>{N&&N.status>400?w&&w(N):J()},U=()=>{a&&a.loadFile(K.BaseUrl+N,(N=>{!V&&q&&q(N),Z.onCompleteObservable.notifyObservers(Z)}),C?N=>{!V&&C&&C(N)}:void 0,d,F)};a.open(U,d)}else J();return Z},p=N=>{const{match:q,type:C}=P(N);if(q)return C||void 0;const d=N.lastIndexOf(".");switch(N.substring(d+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"vd":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},s=()=>"undefined"!==typeof location&&"file:"===location.protocol,X=N=>Q.test(N),P=N=>{const q=Q.exec(N);if(null===q||0===q.length)return{match:!1,type:""};return{match:!0,type:q[0].replace("data:","").replace("base64,","")}};function M(N){return(0,w.c)(N.split(",")[1])}const Y=N=>(0,w.e)(N.split(",")[1]);let E;J.b._FileToolsLoadImage=j,Z.b.loadFile=T,A.q.loadFile=T;((N,q,C,d,U,W,a,F,w,A)=>{E={DecodeBase64UrlToBinary:N,DecodeBase64UrlToString:q,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:d,IsFileURL:U,LoadFile:W,LoadImage:a,ReadFile:F,RequestFile:w,SetCorsBehavior:A},Object.defineProperty(E,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(N){C.DefaultRetryStrategy=N}}),Object.defineProperty(E,"BaseUrl",{get:function(){return C.BaseUrl},set:function(N){C.BaseUrl=N}}),Object.defineProperty(E,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(N){C.PreprocessUrl=N}}),Object.defineProperty(E,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(N){C.CorsBehavior=N}})})(M,Y,K,X,s,T,j,l,z,i)},11083:(N,q,C)=>{function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(N=>{const q=16*Math.random()|0;return("x"===N?q:3&q|8).toString(16)}))}C.d(q,{d:()=>d})},11073:(N,q,C)=>{C.d(q,{b:()=>W});var d=C(10962),U=C(11076);class W{static Instantiate(N){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[N])return this.RegisteredExternalClasses[N];const q=(0,U.e)(N);if(q)return q;d.c.Warn(N+" not found, you may have missed an import.");const C=N.split(".");let W=window||this;for(let d=0,U=C.length;d<U;d++)W=W[C[d]];return"function"!==typeof W?null:W}}W.RegisteredExternalClasses={}},10980:(N,q,C)=>{C.d(q,{c:()=>U});var d=C(10953);class U{static get Now(){return(0,d.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11011:(N,q,C)=>{C.d(q,{c:()=>a,e:()=>W,g:()=>d,i:()=>U});const d=N=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(N);let q="";for(let C=0;C<N.byteLength;C++)q+=String.fromCharCode(N[C]);return q},U=N=>{const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,d,U,W,a,F,w,A="",n=0;const t=ArrayBuffer.isView(N)?new Uint8Array(N.buffer,N.byteOffset,N.byteLength):new Uint8Array(N);for(;n<t.length;)C=t[n++],d=n<t.length?t[n++]:Number.NaN,U=n<t.length?t[n++]:Number.NaN,W=C>>2,a=(3&C)<<4|d>>4,F=(15&d)<<2|U>>6,w=63&U,isNaN(d)?F=w=64:isNaN(U)&&(w=64),A+=q.charAt(W)+q.charAt(a)+q.charAt(F)+q.charAt(w);return A},W=N=>atob(N),a=N=>{const q=W(N),C=q.length,d=new Uint8Array(new ArrayBuffer(C));for(let U=0;U<C;U++)d[U]=q.charCodeAt(U);return d.buffer}},11092:(N,q,C)=>{function d(N){let q=1;do{q*=2}while(q<N);return q===N}function U(N,q,C){return N*(1-C)+q*C}function W(N){const q=a(N),C=F(N);return q-N>N-C?C:q}function a(N){return N--,N|=N>>1,N|=N>>2,N|=N>>4,N|=N>>8,N|=N>>16,++N}function F(N){return N|=N>>1,N|=N>>2,N|=N>>4,N|=N>>8,(N|=N>>16)-(N>>1)}function w(N,q){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=F(N);break;case 2:C=W(N);break;default:C=a(N)}return Math.min(C,q)}C.d(q,{e:()=>F,h:()=>w,j:()=>d,n:()=>U,o:()=>W})},10945:(N,q,C)=>{C.r(q),C.d(q,{AsyncLoop:()=>O,Tools:()=>v,className:()=>r});var d=C(10949),U=C(10953),W=C(10962),a=C(10971),F=C(10980),w=C(10985),A=C(10992),n=C(10995),t=C(11e3),V=C(11029),Z=C(11073),J=C(11083),Q=C(11092);class v{static get BaseUrl(){return t.e.BaseUrl}static set BaseUrl(N){t.e.BaseUrl=N}static get CleanUrl(){return t.e.CleanUrl}static set CleanUrl(N){t.e.CleanUrl=N}static IsAbsoluteUrl(N){return 0===N.indexOf("//")||-1!==N.indexOf("://")&&(-1!==N.indexOf(".")&&(-1!==N.indexOf("/")&&(!(N.indexOf(":")>N.indexOf("/"))&&(N.indexOf("://")<N.indexOf(".")||(0===N.indexOf("data:")||0===N.indexOf("blob:"))))))}static set ScriptBaseUrl(N){t.e.ScriptBaseUrl=N}static get ScriptBaseUrl(){return t.e.ScriptBaseUrl}static set CDNBaseUrl(N){v.ScriptBaseUrl=N,v.AssetBaseUrl=N}static set ScriptPreprocessUrl(N){t.e.ScriptPreprocessUrl=N}static get ScriptPreprocessUrl(){return t.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return t.e.DefaultRetryStrategy}static set DefaultRetryStrategy(N){t.e.DefaultRetryStrategy=N}static get CorsBehavior(){return t.e.CorsBehavior}static set CorsBehavior(N){t.e.CorsBehavior=N}static get UseFallbackTexture(){return n.e.UseFallbackTexture}static set UseFallbackTexture(N){n.e.UseFallbackTexture=N}static get RegisteredExternalClasses(){return Z.b.RegisteredExternalClasses}static set RegisteredExternalClasses(N){Z.b.RegisteredExternalClasses=N}static get fallbackTexture(){return n.e.FallbackTexture}static set fallbackTexture(N){n.e.FallbackTexture=N}static FetchToRef(N,q,C,d,U,W){const a=4*((Math.abs(N)*C%C|0)+(Math.abs(q)*d%d|0)*C);W.r=U[a]/255,W.g=U[a+1]/255,W.b=U[a+2]/255,W.a=U[a+3]/255}static Mix(N,q,C){return 0}static Instantiate(N){return Z.b.Instantiate(N)}static SetImmediate(N){V.b.SetImmediate(N)}static IsExponentOfTwo(N){return!0}static FloatRound(N){return Math.fround(N)}static GetFilename(N){const q=N.lastIndexOf("/");return q<0?N:N.substring(q+1)}static GetFolderPath(N){let q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=N.lastIndexOf("/");return C<0?q?N:"":N.substring(0,C+1)}static ToDegrees(N){return 180*N/Math.PI}static ToRadians(N){return N*Math.PI/180}static SmoothAngleChange(N,q){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const d=this.ToRadians(N),U=this.ToRadians(q);return this.ToDegrees(Math.atan2((1-C)*Math.sin(U)+C*Math.sin(d),(1-C)*Math.cos(U)+C*Math.cos(d)))}static MakeArray(N,q){return!0===q||void 0!==N&&null!=N?Array.isArray(N)?N:[N]:null}static GetPointerPrefix(N){return(0,U.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(N,q){(0,t.z)(N,q)}static SetReferrerPolicyBehavior(N,q){q.referrerPolicy=N}static get PreprocessUrl(){return t.e.PreprocessUrl}static set PreprocessUrl(N){t.e.PreprocessUrl=N}static LoadImage(N,q,C,d,U,W){return(0,t.s)(N,q,C,d,U,W)}static LoadFile(N,q,C,d,U,W){return(0,t.o)(N,q,C,d,U,W)}static async LoadFileAsync(N){let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,d)=>{(0,t.o)(N,(N=>{C(N)}),void 0,void 0,q,((N,q)=>{d(q)}))}))}static GetAssetUrl(N){if(!N)return"";if(v.AssetBaseUrl&&N.startsWith(v._DefaultAssetsUrl)){const q="/"===v.AssetBaseUrl[v.AssetBaseUrl.length-1]?v.AssetBaseUrl.substring(0,v.AssetBaseUrl.length-1):v.AssetBaseUrl;return N.replace(v._DefaultAssetsUrl,q)}return N}static GetBabylonScriptURL(N,q){if(!N)return"";if(v.ScriptBaseUrl&&N.startsWith(v._DefaultCdnUrl)){const q="/"===v.ScriptBaseUrl[v.ScriptBaseUrl.length-1]?v.ScriptBaseUrl.substring(0,v.ScriptBaseUrl.length-1):v.ScriptBaseUrl;N=N.replace(v._DefaultCdnUrl,q)}return N=v.ScriptPreprocessUrl(N),q&&(N=v.GetAbsoluteUrl(N)),N}static LoadBabylonScript(N,q,C,d){N=v.GetBabylonScriptURL(N),v.LoadScript(N,q,C)}static async LoadBabylonScriptAsync(N){return N=v.GetBabylonScriptURL(N),await v.LoadScriptAsync(N)}static LoadScript(N,q,C,d){let W=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(N),q&&q()}catch(w){null===C||void 0===C||C(`Unable to load script '${N}' in worker`,w)}return}if(!(0,U.k)())return void(null===C||void 0===C||C(`Cannot load script '${N}' outside of a window or a worker`));const a=document.getElementsByTagName("head")[0],F=document.createElement("script");W?(F.setAttribute("type","module"),F.innerText=N):(F.setAttribute("type","text/javascript"),F.setAttribute("src",N)),d&&(F.id=d),F.onload=()=>{q&&q()},F.onerror=q=>{C&&C(`Unable to load script '${N}'`,q)},a.appendChild(F)}static async LoadScriptAsync(N,q){return await new Promise(((C,d)=>{this.LoadScript(N,(()=>{C()}),((N,q)=>{d(q||new Error(N))}),q)}))}static ReadFileAsDataURL(N,q,C){const U=new FileReader,W={onCompleteObservable:new d.b,abort:()=>U.abort()};return U.onloadend=()=>{W.onCompleteObservable.notifyObservers(W)},U.onload=N=>{q(N.target.result)},U.onprogress=C,U.readAsDataURL(N),W}static ReadFile(N,q,C,d,U){return(0,t.u)(N,q,C,d,U)}static FileAsURL(N){const q=new Blob([N]);return window.URL.createObjectURL(q)}static Format(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return N.toFixed(q)}static DeepCopy(N,q,C,d){a.b.DeepCopy(N,q,C,d)}static IsEmpty(N){for(const q in N)if(Object.prototype.hasOwnProperty.call(N,q))return!1;return!0}static RegisterTopRootEvents(N,q){for(let d=0;d<q.length;d++){const U=q[d];N.addEventListener(U.name,U.handler,!1);try{window.parent&&window.parent.addEventListener(U.name,U.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(N,q){for(let d=0;d<q.length;d++){const U=q[d];N.removeEventListener(U.name,U.handler);try{N.parent&&N.parent.removeEventListener(U.name,U.handler)}catch(C){}}}static async DumpFramebuffer(N,q,C,d){throw(0,w.b)("DumpTools")}static DumpData(N,q,C,d){throw(0,w.b)("DumpTools")}static async DumpDataAsync(N,q,C){throw(0,w.b)("DumpTools")}static _IsOffScreenCanvas(N){return void 0!==N.convertToBlob}static ToBlob(N,q){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",d=arguments.length>3?arguments[3]:void 0;v._IsOffScreenCanvas(N)||N.toBlob||(N.toBlob=function(N,q,C){setTimeout((()=>{const d=atob(this.toDataURL(q,C).split(",")[1]),U=d.length,W=new Uint8Array(U);for(let N=0;N<U;N++)W[N]=d.charCodeAt(N);N(new Blob([W]))}))}),v._IsOffScreenCanvas(N)?N.convertToBlob({type:C,quality:d}).then((N=>q(N))):N.toBlob((function(N){q(N)}),C,d)}static DownloadBlob(N,q){if("download"in document.createElement("a")){if(!q){const N=new Date;q="screenshot_"+((N.getFullYear()+"-"+(N.getMonth()+1)).slice(2)+"-"+N.getDate()+"_"+N.getHours()+"-"+("0"+N.getMinutes()).slice(-2))+".png"}v.Download(N,q)}else if(N&&"undefined"!==typeof URL){const q=URL.createObjectURL(N),C=window.open("");if(!C)return;const d=C.document.createElement("img");d.onload=function(){URL.revokeObjectURL(q)},d.src=q,C.document.body.appendChild(d)}}static EncodeScreenshotCanvasData(N,q){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",d=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if("string"!==typeof d&&q){if(q){if(v._IsOffScreenCanvas(N))return void N.convertToBlob({type:C,quality:U}).then((N=>{const C=new FileReader;C.readAsDataURL(N),C.onloadend=()=>{const N=C.result;q(N)}}));const d=N.toDataURL(C,U);q(d)}}else this.ToBlob(N,(function(N){N&&v.DownloadBlob(N,d),q&&q("")}),C,U)}static Download(N,q){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(N),d=document.createElement("a");document.body.appendChild(d),d.style.display="none",d.href=C,d.download=q,d.addEventListener("click",(()=>{d.parentElement&&d.parentElement.removeChild(d)})),d.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(N){return"boolean"===typeof N[0]?N[0]:"boolean"===typeof N[1]&&N[1]}static CreateScreenshot(N,q,C,d){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotAsync(N,q,C){throw(0,w.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(N,q,C,d){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(N,q,C){throw(0,w.b)("ScreenshotTools")}static RandomId(){return(0,J.d)()}static IsBase64(N){return(0,t.j)(N)}static DecodeBase64(N){return(0,t.b)(N)}static get errorsCount(){return W.c.errorsCount}static Log(N){W.c.Log(N)}static Warn(N){W.c.Warn(N)}static Error(N){W.c.Error(N)}static get LogCache(){return W.c.LogCache}static ClearLogCache(){W.c.ClearLogCache()}static set LogLevels(N){W.c.LogLevels=N}static set PerformanceLogLevel(N){return(N&v.PerformanceUserMarkLogLevel)===v.PerformanceUserMarkLogLevel?(v.StartPerformanceCounter=v._StartUserMark,void(v.EndPerformanceCounter=v._EndUserMark)):(N&v.PerformanceConsoleLogLevel)===v.PerformanceConsoleLogLevel?(v.StartPerformanceCounter=v._StartPerformanceConsole,void(v.EndPerformanceCounter=v._EndPerformanceConsole)):(v.StartPerformanceCounter=v._StartPerformanceCounterDisabled,void(v.EndPerformanceCounter=v._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(N,q){}static _EndPerformanceCounterDisabled(N,q){}static _StartUserMark(N){let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!v._Performance){if(!(0,U.k)())return;v._Performance=window.performance}q&&v._Performance.mark&&v._Performance.mark(N+"-Begin")}static _EndUserMark(N){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&v._Performance.mark&&(v._Performance.mark(N+"-End"),v._Performance.measure(N,N+"-Begin",N+"-End"))}static _StartPerformanceConsole(N){let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];q&&(v._StartUserMark(N,q),console.time&&console.time(N))}static _EndPerformanceConsole(N){let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];q&&(v._EndUserMark(N,q),console.timeEnd(N))}static get Now(){return F.c.Now}static GetClassName(N){let q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!q&&N.getClassName)C=N.getClassName();else{if(N instanceof Object){C=(q?N:Object.getPrototypeOf(N)).constructor.__bjsclassName__}C||(C=typeof N)}return C}static First(N,q){for(const C of N)if(q(C))return C;return null}static getFullClassName(N){let q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,d=null;if(!q&&N.getClassName)C=N.getClassName();else{if(N instanceof Object){const U=q?N:Object.getPrototypeOf(N);C=U.constructor.__bjsclassName__,d=U.constructor.__bjsmoduleName__}C||(C=typeof N)}return C?(null!=d?d+".":"")+C:null}static async DelayAsync(N){await new Promise((q=>{setTimeout((()=>{q()}),N)}))}static IsSafari(){return!!(0,U.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function r(N,q){return C=>{C.__bjsclassName__=N,C.__bjsmoduleName__=null!=q?q:null}}v.AssetBaseUrl="",v.UseCustomRequestHeaders=!1,v.CustomRequestHeaders=A.e.CustomRequestHeaders,v.GetDOMTextContent=U.e,v._DefaultCdnUrl="https://cdn.babylonjs.com",v._DefaultAssetsUrl="https://assets.babylonjs.com/core",v.GetAbsoluteUrl="object"===typeof document?N=>{const q=document.createElement("a");return q.href=N,q.href}:"function"===typeof URL&&"object"===typeof location?N=>new URL(N,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},v.NoneLogLevel=W.c.NoneLogLevel,v.MessageLogLevel=W.c.MessageLogLevel,v.WarningLogLevel=W.c.WarningLogLevel,v.ErrorLogLevel=W.c.ErrorLogLevel,v.AllLogLevel=W.c.AllLogLevel,v.IsWindowObjectExist=U.k,v.PerformanceNoneLogLevel=0,v.PerformanceUserMarkLogLevel=1,v.PerformanceConsoleLogLevel=2,v.StartPerformanceCounter=v._StartPerformanceCounterDisabled,v.EndPerformanceCounter=v._EndPerformanceCounterDisabled;class O{constructor(N,q,C){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=N,this.index=d-1,this._done=!1,this._fn=q,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(N,q,C){const d=new O(N,q,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return d.executeNext(),d}static SyncAsyncForLoop(N,q,C,d,U){let W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return O.Run(Math.ceil(N/q),(d=>{U&&U()?d.breakLoop():setTimeout((()=>{for(let W=0;W<q;++W){const a=d.index*q+W;if(a>=N)break;if(C(a),U&&U()){d.breakLoop();break}}d.executeNext()}),W)}),d)}}v.Mix=Q.n,v.IsExponentOfTwo=Q.j,n.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11076:(N,q,C)=>{C.d(q,{e:()=>W,h:()=>U});const d={};function U(N,q){d[N]=q}function W(N){return d[N]}},10992:(N,q,C)=>{C.d(q,{e:()=>d});class d{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(d.CustomRequestHeaders).length>0||d.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const N in d.CustomRequestHeaders){const q=d.CustomRequestHeaders[N];q&&this._xhr.setRequestHeader(N,q)}}_shouldSkipRequestModifications(N){return d.SkipRequestModificationForBabylonCDN&&(N.includes("preview.babylonjs.com")||N.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(N){this._xhr.onprogress=N}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(N){this._xhr.responseType=N}get timeout(){return this._xhr.timeout}set timeout(N){this._xhr.timeout=N}addEventListener(N,q,C){this._xhr.addEventListener(N,q,C)}removeEventListener(N,q,C){this._xhr.removeEventListener(N,q,C)}abort(){this._xhr.abort()}send(N){d.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(N)}open(N,q){for(const C of d.CustomRequestModifiers){if(this._shouldSkipRequestModifications(q))return;q=C(this._xhr,q)||q}q=(q=q.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=q,this._xhr.open(N,q,!0)}setRequestHeader(N,q){this._xhr.setRequestHeader(N,q)}getResponseHeader(N){return this._xhr.getResponseHeader(N)}}d.CustomRequestHeaders={},d.CustomRequestModifiers=new Array,d.SkipRequestModificationForBabylonCDN=!0}}]);