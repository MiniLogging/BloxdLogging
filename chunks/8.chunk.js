"use strict";(self.wx5iyvo7rvn=self.wx5iyvo7rvn||[]).push([[8],{11051:(P,e,n)=>{n.d(e,{b:()=>I});var H=n(11017),S=n(10988),p=n(11056),k=n(11073),m=n(11002);class t{constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,P&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(P){this._zOffset!==P&&(this._zOffset=P,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(P){this._zOffsetUnits!==P&&(this._zOffsetUnits=P,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(P){this._cullFace!==P&&(this._cullFace=P,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(P){this._cull!==P&&(this._cull=P,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(P){this._depthFunc!==P&&(this._depthFunc=P,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(P){this._depthMask!==P&&(this._depthMask=P,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(P){this._depthTest!==P&&(this._depthTest=P,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(P){this._frontFace!==P&&(this._frontFace=P,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(P){this.isDirty&&(this._isCullDirty&&(this.cull?P.enable(P.CULL_FACE):P.disable(P.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(P.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(P.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?P.enable(P.DEPTH_TEST):P.disable(P.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(P.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(P.enable(P.POLYGON_OFFSET_FILL),P.polygonOffset(this.zOffset,this.zOffsetUnits)):P.disable(P.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(P.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class C{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(P){this._func!==P&&(this._func=P,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(P){this._funcRef!==P&&(this._funcRef=P,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(P){this._funcMask!==P&&(this._funcMask=P,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(P){this._opStencilFail!==P&&(this._opStencilFail=P,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(P){this._opDepthFail!==P&&(this._opDepthFail=P,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(P){this._opStencilDepthPass!==P&&(this._opStencilDepthPass=P,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(P){this._mask!==P&&(this._mask=P,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(P){this._enabled!==P&&(this._enabled=P,this._isStencilTestDirty=!0)}constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,P&&this.reset()}reset(){var P;this.stencilMaterial=void 0,null===(P=this.stencilGlobal)||void 0===P||P.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(P){var e;if(!P)return;const n=!this.useStencilGlobalOnly&&!(null===(e=this.stencilMaterial)||void 0===e||!e.enabled);this.enabled=n?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=n?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=n?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=n?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=n?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=n?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=n?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=n?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?P.enable(P.STENCIL_TEST):P.disable(P.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(P.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(P.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(P.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class R{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=R.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=R.KEEP,this.opDepthFail=R.KEEP,this.opStencilDepthPass=R.REPLACE}get stencilFunc(){return this.func}set stencilFunc(P){this.func=P}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(P){this.funcRef=P}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(P){this.funcMask=P}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(P){this.opStencilFail=P}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(P){this.opDepthFail=P}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(P){this.opStencilDepthPass=P}get stencilMask(){return this.mask}set stencilMask(P){this.mask=P}get stencilTest(){return this.enabled}set stencilTest(P){this.enabled=P}}R.ALWAYS=519,R.KEEP=7680,R.REPLACE=7681;class q{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(P){this._alphaBlend!==P&&(this._alphaBlend=P,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(P,e,n,H){this._blendConstants[0]===P&&this._blendConstants[1]===e&&this._blendConstants[2]===n&&this._blendConstants[3]===H||(this._blendConstants[0]=P,this._blendConstants[1]=e,this._blendConstants[2]=n,this._blendConstants[3]=H,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(P,e,n,H){this._blendFunctionParameters[0]===P&&this._blendFunctionParameters[1]===e&&this._blendFunctionParameters[2]===n&&this._blendFunctionParameters[3]===H||(this._blendFunctionParameters[0]=P,this._blendFunctionParameters[1]=e,this._blendFunctionParameters[2]=n,this._blendFunctionParameters[3]=H,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(P,e){this._blendEquationParameters[0]===P&&this._blendEquationParameters[1]===e||(this._blendEquationParameters[0]=P,this._blendEquationParameters[1]=e,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(P){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?P.enable(P.BLEND):P.disable(P.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(P.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(P.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(P.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var A=n(11007),F=n(11079),Y=n(10983),j=n(10976),z=n(11044),w=n(11085);function J(P,e){if((0,Y.h)()){const{requestAnimationFrame:n}=e||window;if("function"===typeof n)return n(P)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(P);return setTimeout(P,16)}class I{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(P){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(P){P!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=P,this._depthCullingState.depthFunc=P?518:515)}setColorWrite(P){P!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=P)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(P){if(P)return this.isNDCHalfZRange?P.IS_NDC_HALF_ZRANGE="":delete P.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?P.USE_REVERSE_DEPTHBUFFER="":delete P.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?P.USE_EXACT_SRGB_CONVERSIONS="":delete P.USE_EXACT_SRGB_CONVERSIONS);{let P="";return this.isNDCHalfZRange&&(P+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(P&&(P+="\n"),P+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(P&&(P+="\n"),P+="#define USE_EXACT_SRGB_CONVERSIONS"),P}}_rebuildInternalTextures(){const P=this._internalTexturesCache.slice();for(const e of P)e._rebuild()}_rebuildRenderTargetWrappers(){const P=this._renderTargetWrapperCache.slice();for(const e of P)e._rebuild()}_rebuildEffects(){for(const P in this._compiledEffects){const e=this._compiledEffects[P];e._pipelineContext=null,e._prepareEffect()}p.Effect.ResetCache()}_rebuildGraphicsResources(){var P;this.wipeCaches(!0),this._rebuildEffects(),null===(P=this._rebuildComputeEffects)||void 0===P||P.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){S.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(P){setTimeout((()=>{this._clearEmptyResources();const e=this._depthCullingState.depthTest,n=this._depthCullingState.depthFunc,H=this._depthCullingState.depthMask,S=this._stencilState.stencilTest;P(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=e,this._depthCullingState.depthFunc=n,this._depthCullingState.depthMask=H,this._stencilState.stencilTest=S,this._flagContextRestored()}),0)}get C(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(P){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(P){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const P=new Uint8Array(4),e=[P,P,P,P,P,P];this._emptyCubeTexture=this.createRawCubeTexture(e,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(P){if(!P)return this._activeRenderLoops.length=0,void this._cancelFrame();const e=this._activeRenderLoops.indexOf(P);e>=0&&(this._activeRenderLoops.splice(e,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const P=this._frameHandler;if(this._frameHandler=0,(0,Y.h)()){const{cancelAnimationFrame:e}=this.getHostWindow()||window;if("function"===typeof e)return e(P)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(P);return clearTimeout(P)}}Oe(){this.onBeginFrameObservable.notifyObservers(this)}Ve(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(P){this._maxFPS=P,void 0!==P&&(this._minFrameTime=P<=0?Number.MAX_VALUE:1e3/P)}_isOverFrameTime(P){if(!P||void 0===this._maxFPS)return!1;const e=P-this._lastFrameTime;return this._lastFrameTime=P,this._renderAccumulator+=e,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(P){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(P)){let P=!0;(this.C||!this.renderEvenInBackground&&this._windowIsBackground)&&(P=!1),P&&(this.Oe(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ve())}}_renderLoop(P){this._processFrame(P),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let P=0;P<this._activeRenderLoops.length;P++){(0,this._activeRenderLoops[P])()}}_renderViews(){return!1}_queueNewFrame(P,e){return J(P,e)}runRenderLoop(P){-1===this._activeRenderLoops.indexOf(P)&&(this._activeRenderLoops.push(P),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(P){this._depthCullingState.depthTest=P}setZOffset(P){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-P:P}getZOffset(){const P=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-P:P}setZOffsetUnits(P){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-P:P}getZOffsetUnits(){const P=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-P:P}getHostWindow(){return(0,Y.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(P){this._compatibilityMode=!0}_rebuildTextures(){for(const P of this.scenes)P._rebuildTextures();for(const P of this._virtualScenes)P._rebuildTextures()}_releaseRenderTargetWrapper(P){const e=this._renderTargetWrapperCache.indexOf(P);-1!==e&&this._renderTargetWrapperCache.splice(e,1)}get currentViewport(){return this._cachedViewport}setViewport(P,e,n){const H=e||this.getRenderWidth(),S=n||this.getRenderHeight(),p=P.x||0,k=P.y||0;this._cachedViewport=P,this._viewport(p*H,k*S,H*P.width,S*P.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(P){return new Path2D(P)}get description(){let P=this.name+this.version;return this._caps.parallelShaderCompile&&(P+=" - Parallel shader compilation"),P}_createTextureBase(P,e,n,p){let k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,C=arguments.length>7?arguments[7]:void 0,R=arguments.length>8?arguments[8]:void 0,q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,A=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,Y=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,j=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,z=arguments.length>13?arguments[13]:void 0,J=arguments.length>14?arguments[14]:void 0,O=arguments.length>15?arguments[15]:void 0;const V="data:"===(P=P||"").substring(0,5),i="blob:"===P.substring(0,5),B=V&&-1!==P.indexOf(";base64,"),l=A||new F.b(this,1);l!==A&&(l.label=P.substring(0,60));const b=P;!this._transformTextureUrl||B||A||q||(P=this._transformTextureUrl(P)),b!==P&&(l._originalUrl=b);const T=P.lastIndexOf(".");let d=j||(T>-1?P.substring(T).toLowerCase():"");d.indexOf("?")>-1&&(d=d.split("?")[0]);const N=(0,w.b)(d,z);p&&p.addPendingData(l),l.url=P,l.generateMipMaps=!e,l.samplingMode=k,l.invertY=n,l._useSRGBBuffer=this._getUseSRGBBuffer(!!O,e),this._doNotHandleContextLost||(l._buffer=q);let Q=null;m&&!A&&(Q=l.onLoadedObservable.add(m)),A||this._internalTexturesCache.push(l);const c=(n,A)=>{p&&p.removePendingData(l),P===b?(Q&&l.onLoadedObservable.remove(Q),H.d.UseFallbackTexture&&P!==H.d.FallbackTexture&&this._createTextureBase(H.d.FallbackTexture,e,l.invertY,p,k,null,t,C,R,q,l),n=(n||"Unknown error")+(H.d.UseFallbackTexture?" - Fallback texture was used":""),l.onErrorObservable.notifyObservers({message:n,exception:A}),t&&t(n,A)):(S.c.Warn(`Failed to load ${P}, falling back to ${b}`),this._createTextureBase(b,e,l.invertY,p,k,m,t,C,R,q,l,Y,j,z,J,O))};if(N){const e=async P=>{(await N).loadData(P,l,((P,e,n,H,S,m)=>{m?c("TextureLoader failed to load data"):C(l,d,p,{width:P,height:e},l.invertY,!n,H,(()=>(S(),!1)),k)}),J)};q?q instanceof ArrayBuffer?e(new Uint8Array(q)):ArrayBuffer.isView(q)?e(q):t&&t("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(P,(P=>{e(new Uint8Array(P))}),void 0,p?p.offlineProvider:void 0,!0,((P,e)=>{c("Unable to load "+(P&&P.responseURL,e))}))}else{const n=P=>{i&&!this._doNotHandleContextLost&&(l._buffer=P),C(l,d,p,P,l.invertY,e,!1,R,k)};!V||B?q&&("string"===typeof q.decoding||q.close)?n(q):I._FileToolsLoadImage(P||"",n,c,p?p.offlineProvider:null,z,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof q||q instanceof ArrayBuffer||ArrayBuffer.isView(q)||q instanceof Blob?I._FileToolsLoadImage(q,n,c,p?p.offlineProvider:null,z,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):q&&n(q)}return l}_rebuildBuffers(){for(const P of this._uniformBuffers)P._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,Y.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const P in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,P)&&(this._boundTexturesCache[P]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(P){this._name=P}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(P){this._hardwareScalingLevel=P,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(P){this._doNotHandleContextLost=P}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(P,e,n){var S,p;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new t,this._stencilStateComposer=new C,this._stencilState=new R,this._alphaState=new q,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new j.b,this.onCanvasFocusObservable=new j.b,this.onNewSceneAddedObservable=new j.b,this.onResizeObservable=new j.b,this.onCanvasPointerOutObservable=new j.b,this.onEffectErrorObservable=new j.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new j.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=P=>this._renderLoop(P),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new j.b,this.onAfterShaderCompilationObservable=new j.b,this.onBeginFrameObservable=new j.b,this.onEndFrameObservable=new j.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new j.b,this.onContextRestoredObservable=new j.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.ie=new j.b,this.onReleaseEffectsObservable=new j.b,H.d.Instances.push(this),this.startTime=m.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,k.e.SetMatrixPrecision(!!e.useHighPrecisionMatrix),(0,Y.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=n??!1,e.antialias=P??e.antialias,e.deterministicLockstep=e.deterministicLockstep??!1,e.lockstepMaxSteps=e.lockstepMaxSteps??4,e.timeStep=e.timeStep??1/60,e.stencil=e.stencil??!0,this._audioContext=(null===(S=e.audioEngineOptions)||void 0===S?void 0:S.audioContext)??null,this._audioDestination=(null===(p=e.audioEngineOptions)||void 0===p?void 0:p.audioDestination)??null,this.premultipliedAlpha=e.premultipliedAlpha??!0,this._doNotHandleContextLost=!!e.doNotHandleContextLost,this._isStencilEnable=!!e.stencil,this.useExactSrgbConversions=e.useExactSrgbConversions??!1;const A=(0,Y.h)()&&window.devicePixelRatio||1,F=e.limitDeviceRatio||A;n=n||e.adaptToDeviceRatio||!1,this._hardwareScalingLevel=n?1/Math.min(F,A):1,this._lastDevicePixelRatio=A,this._creationOptions=e}resize(){let P,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const P=(0,Y.h)()&&window.devicePixelRatio||1,e=this._lastDevicePixelRatio/P;this._lastDevicePixelRatio=P,this._hardwareScalingLevel*=e}if((0,Y.h)()&&(0,Y.f)())if(this._renderingCanvas){var H,S;const n=null===(H=(S=this._renderingCanvas).getBoundingClientRect)||void 0===H?void 0:H.call(S);P=this._renderingCanvas.clientWidth||(null===n||void 0===n?void 0:n.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,e=this._renderingCanvas.clientHeight||(null===n||void 0===n?void 0:n.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else P=window.innerWidth,e=window.innerHeight;else P=this._renderingCanvas?this._renderingCanvas.width:100,e=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(P/this._hardwareScalingLevel,e/this._hardwareScalingLevel,n)}setSize(P,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(P|=0,e|=0,!n&&this._renderingCanvas.width===P&&this._renderingCanvas.height===e)return!1;if(this._renderingCanvas.width=P,this._renderingCanvas.height=e,this.scenes){for(let P=0;P<this.scenes.length;P++){const e=this.scenes[P];for(let P=0;P<e.cameras.length;P++){e.cameras[P]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(P,e,n,H,S,p,k,m,t,C,R){throw(0,A.d)("engine.rawTexture")}createRawCubeTexture(P,e,n,H,S,p,k,m){throw(0,A.d)("engine.rawTexture")}createRawTexture3D(P,e,n,H,S,p,k,m,t,C,R){throw(0,A.d)("engine.rawTexture")}createRawTexture2DArray(P,e,n,H,S,p,k,m,t,C,R){throw(0,A.d)("engine.rawTexture")}_sharedInit(P){this._renderingCanvas=P}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const P=navigator.userAgent;this.hostInformation.isMobile=-1!==P.indexOf("Mobile")||-1!==P.indexOf("Mac")&&(0,Y.f)()&&"ontouchend"in document},this._checkForMobile(),(0,Y.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(P){return document.createElement("video")}_reportDrawCall(){var P;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(P=this._drawCalls)||void 0===P||P.addCount(e,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(P,e){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(P,e){return createImageBitmap(P,e)}resizeImageBitmap(P,e,n){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(P){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(P,e){if("undefined"===typeof document)return new OffscreenCanvas(P,e);const n=document.createElement("canvas");return n.width=P,n.height=e,n}createCanvas(P,e){return I._CreateCanvas(P,e)}static _FileToolsLoadImage(P,e,n,H,S,p,k){throw(0,A.d)("FileTools")}_loadFile(P,e,n,H,S,p){const k=(0,z.k)(P,e,n,H,S,p);return this._activeRequests.push(k),k.onCompleteObservable.add((()=>{const P=this._activeRequests.indexOf(k);-1!==P&&this._activeRequests.splice(P,1)})),k}static _FileToolsLoadFile(P,e,n,H,S,p){if(z.d.loadFile)return z.d.loadFile(P,e,n,H,S,p);throw(0,A.d)("FileTools")}dispose(){var P;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(P=this.releaseComputeEffects)||void 0===P||P.call(this),p.Effect.ResetCache();for(const n of this._activeRequests)n.abort();this._boundRenderFunction=null,this.ie.notifyObservers(this),this.ie.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,Y.h)()&&window.removeEventListener("resize",this._checkForMobile);const e=H.d.Instances.indexOf(this);e>=0&&H.d.Instances.splice(e,1),H.d.Instances.length||(H.d.OnEnginesDisposedObservable.notifyObservers(this),H.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(P){throw(0,A.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(P,e){for(let n=0;n<H.d.Instances.length;n++){const S=H.d.Instances[n];for(let n=0;n<S.scenes.length;n++)S.scenes[n].markAllMaterialsAsDirty(P,e)}}}I._RenderPassIdCounter=0,I._RescalePostProcessFactory=null,I.CollisionsEpsilon=.001,I.QueueNewFrame=J},11017:(P,e,n)=>{n.d(e,{d:()=>S});var H=n(10976);class S{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}S.Instances=[],S.OnEnginesDisposedObservable=new H.b,S._LastCreatedScene=null,S.UseFallbackTexture=!0,S.FallbackTexture=""},11073:(P,e,n)=>{n.d(e,{e:()=>H});class H{static SetMatrixPrecision(P){if(H.MatrixTrackPrecisionChange=!1,P&&!H.MatrixUse64Bits&&H.MatrixTrackedMatrices)for(let e=0;e<H.MatrixTrackedMatrices.length;++e){const P=H.MatrixTrackedMatrices[e],n=P.Be;P.Be=new Array(16);for(let e=0;e<16;++e)P.Be[e]=n[e]}H.MatrixUse64Bits=P,H.MatrixCurrentType=H.MatrixUse64Bits?Array:Float32Array,H.MatrixTrackedMatrices=null}}H.MatrixUse64Bits=!1,H.MatrixTrackPrecisionChange=!0,H.MatrixCurrentType=Float32Array,H.MatrixTrackedMatrices=[]},11085:(P,e,n)=>{n.d(e,{b:()=>k});var H=n(10988);const S=new Map;function p(P,e){(function(P){return S.delete(P)})(P)&&H.c.Warn(`Extension with the name '${P}' already exists`),S.set(P,e)}function k(P,e){"image/ktx"!==e&&"image/ktx2"!==e||(P=".ktx"),S.has(P)||(P.endsWith(".ies")&&p(".ies",(async()=>await n.e(15).then(n.bind(n,13531)).then((P=>new P._IESTextureLoader)))),P.endsWith(".dds")&&p(".dds",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(19),n.e(18),n.e(28)]).then(n.bind(n,13533)).then((P=>new P._DDSTextureLoader)))),P.endsWith(".basis")&&p(".basis",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(47)]).then(n.bind(n,13540)).then((P=>new P._BasisTextureLoader)))),P.endsWith(".env")&&p(".env",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(19),n.e(18),n.e(23),n.e(21),n.e(45),n.e(48)]).then(n.bind(n,13545)).then((P=>new P._ENVTextureLoader)))),P.endsWith(".hdr")&&p(".hdr",(async()=>await Promise.all([n.e(14),n.e(49)]).then(n.bind(n,13550)).then((P=>new P._HDRTextureLoader)))),(P.endsWith(".ktx")||P.endsWith(".ktx2"))&&(p(".ktx",(async()=>await n.e(30).then(n.bind(n,13553)).then((P=>new P._KTXTextureLoader)))),p(".ktx2",(async()=>await n.e(30).then(n.bind(n,13553)).then((P=>new P._KTXTextureLoader))))),P.endsWith(".tga")&&p(".tga",(async()=>await n.e(50).then(n.bind(n,13558)).then((P=>new P._TGATextureLoader)))),P.endsWith(".exr")&&p(".exr",(async()=>await n.e(16).then(n.bind(n,13561)).then((P=>new P._ExrTextureLoader)))));const H=S.get(P);return H?Promise.resolve(H(e)):null}},11079:(P,e,n)=>{n.d(e,{b:()=>k});var H,S=n(10976),p=n(11083);!function(P){P[P.Unknown=0]="Unknown",P[P.Url=1]="Url",P[P.Temp=2]="Temp",P[P.Raw=3]="Raw",P[P.Dynamic=4]="Dynamic",P[P.RenderTarget=5]="RenderTarget",P[P.MultiRenderTarget=6]="MultiRenderTarget",P[P.Cube=7]="Cube",P[P.CubeRaw=8]="CubeRaw",P[P.CubePrefiltered=9]="CubePrefiltered",P[P.Raw3D=10]="Raw3D",P[P.Raw2DArray=11]="Raw2DArray",P[P.DepthStencil=12]="DepthStencil",P[P.CubeRawRGBD=13]="CubeRawRGBD",P[P.Depth=14]="Depth"}(H||(H={}));class k extends p.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(P){this.generateMipMaps=P}get uniqueId(){return this._uniqueId}_setUniqueId(P){this._uniqueId=P}getEngine(){return this._engine}get source(){return this._source}constructor(P,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new S.b,this.onErrorObservable=new S.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=P,this._source=e,this._uniqueId=k._Counter++,n||(this._hardwareTexture=P._createHardwareTexture())}incrementReferences(){this._references++}updateSize(P,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,P,e,n),this.width=P,this.height=e,this.depth=n,this.baseWidth=P,this.baseHeight=e,this.baseDepth=n,this._size=P*e*n}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const P=this.onRebuildCallback(this),e=e=>{e._swapAndDie(this,!1),this.isReady=P.isReady};return void(P.isAsync?P.proxy.then(e):e(P.proxy))}let P;switch(this.source){case 2:case 12:case 14:break;case 1:return void(P=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(P=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:P=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),P._swapAndDie(this,!1),this.isReady=!0;break;case 10:P=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 11:P=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 4:P=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),P._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(P=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:P=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),P._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return P=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(P=>{P&&P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(P._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(P){var e;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(e=this._hardwareTexture)||void 0===e||e.setUsage(P._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),P._hardwareTexture=this._hardwareTexture,n&&(P._isRGBD=this._isRGBD),this._lodTextureHigh&&(P._lodTextureHigh&&P._lodTextureHigh.dispose(),P._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(P._lodTextureMid&&P._lodTextureMid.dispose(),P._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(P._lodTextureLow&&P._lodTextureLow.dispose(),P._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(P._irradianceTexture&&P._irradianceTexture.dispose(),P._irradianceTexture=this._irradianceTexture);const H=this._engine.getLoadedTexturesCache();let S=H.indexOf(this);-1!==S&&H.splice(S,1),S=H.indexOf(P),-1===S&&H.push(P)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}k._Counter=0},11083:(P,e,n)=>{n.d(e,{d:()=>H});class H{get wrapU(){return this._cachedWrapU}set wrapU(P){this._cachedWrapU=P}get wrapV(){return this._cachedWrapV}set wrapV(P){this._cachedWrapV=P}get wrapR(){return this._cachedWrapR}set wrapR(P){this._cachedWrapR=P}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(P){this._cachedAnisotropicFilteringLevel=P}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(P){this._comparisonFunction=P}get useMipMaps(){return this._useMipMaps}set useMipMaps(P){this._useMipMaps=P}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=P,this._cachedWrapV=e,this._cachedWrapR=n,this._cachedAnisotropicFilteringLevel=H,this.samplingMode=S,this._comparisonFunction=p,this}compareSampler(P){return this._cachedWrapU===P._cachedWrapU&&this._cachedWrapV===P._cachedWrapV&&this._cachedWrapR===P._cachedWrapR&&this._cachedAnisotropicFilteringLevel===P._cachedAnisotropicFilteringLevel&&this.samplingMode===P.samplingMode&&this._comparisonFunction===P._comparisonFunction&&this._useMipMaps===P._useMipMaps}}},10995:(P,e,n)=>{n.d(e,{e:()=>p});var H=n(10988);const S=(P,e,n)=>P?P.getClassName&&"Mesh"===P.getClassName()?null:!P.getClassName||"SubMesh"!==P.getClassName()&&"PhysicsBody"!==P.getClassName()?P.clone?P.clone():Array.isArray(P)?P.slice():n&&"object"===typeof P?{...P}:null:P.clone(e):null;class p{static DeepCopy(P,e,n,p){let k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const m=function(P){const e=[];do{const n=Object.getOwnPropertyNames(P);for(const P of n)-1===e.indexOf(P)&&e.push(P)}while(P=Object.getPrototypeOf(P));return e}(P);for(const C of m){if("_"===C[0]&&(!p||-1===p.indexOf(C)))continue;if(C.endsWith("Observable"))continue;if(n&&-1!==n.indexOf(C))continue;const m=P[C],R=typeof m;if("function"!==R)try{if("object"===R)if(m instanceof Uint8Array)e[C]=Uint8Array.from(m);else if(m instanceof Array){if(e[C]=[],m.length>0)if("object"==typeof m[0])for(let P=0;P<m.length;P++){const n=S(m[P],e,k);-1===e[C].indexOf(n)&&e[C].push(n)}else e[C]=m.slice(0)}else e[C]=S(m,e,k);else e[C]=m}catch(t){H.c.Warn(t.message)}}}}},11026:(P,e,n)=>{n.d(e,{c:()=>H,f:()=>S,i:()=>p});class H extends Error{}H._setPrototypeOf=Object.setPrototypeOf||((P,e)=>(P.__proto__=e,P));const S={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class p extends H{constructor(P,e,n){super(P),this.errorCode=e,this.innerError=n,this.name="RuntimeError",H._setPrototypeOf(this,p.prototype)}}},11019:(P,e,n)=>{n.d(e,{b:()=>c,c:()=>I,g:()=>T,i:()=>N,o:()=>l,m:()=>z,r:()=>i,u:()=>B,w:()=>b,A:()=>O});var H=n(11011),S=n(10983),p=n(10976);class k{}k.FilesToLoad={};var m=n(11026),t=n(11033),C=n(11041),R=n(11017),q=n(10988),A=n(11047),F=n(11044),Y=n(11051);const j=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class z extends m.i{constructor(P,e){super(P,m.f.LoadFileError),this.name="LoadFileError",m.c._setPrototypeOf(this,z.prototype),e instanceof H.e?this.request=e:this.file=e}}class w extends m.i{constructor(P,e){super(P,m.f.RequestFileError),this.request=e,this.name="RequestFileError",m.c._setPrototypeOf(this,w.prototype)}}class J extends m.i{constructor(P,e){super(P,m.f.ReadFileError),this.file=e,this.name="ReadFileError",m.c._setPrototypeOf(this,J.prototype)}}const I={DefaultRetryStrategy:class{static ExponentialBackoff(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(n,H,S)=>0!==H.status||S>=P||-1!==n.indexOf("file:")?-1:Math.pow(2,S)*e}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:P=>P,ScriptBaseUrl:"",ScriptPreprocessUrl:P=>P,CleanUrl:P=>P=P.replace(/#/gm,"%23")},O=(P,e)=>{if((!P||0!==P.indexOf("data:"))&&I.CorsBehavior)if("string"===typeof I.CorsBehavior||I.CorsBehavior instanceof String)e.crossOrigin=I.CorsBehavior;else{const n=I.CorsBehavior(P);n&&(e.crossOrigin=n)}},V={getRequiredSize:null},i=function(P,e,n,S){let p,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",C=arguments.length>5?arguments[5]:void 0,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:R.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===q||void 0===q||!q._features.forceBitmapOverHTMLImageElement))return n("LoadImage is only supported in web or BabylonNative environments."),null;let A=!1;P instanceof ArrayBuffer||ArrayBuffer.isView(P)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(p=URL.createObjectURL(new Blob([P],{type:m})),A=!0):p=`data:${m};base64,`+(0,t.k)(P):P instanceof Blob?(p=URL.createObjectURL(P),A=!0):(p=I.CleanUrl(P),p=I.PreprocessUrl(p));const F=e=>{if(n){const H=p||P.toString();n(`Error while trying to load image: ${0===H.indexOf("http")||H.length<=128?H:H.slice(0,128)+"..."}`,e)}};if(null!==q&&void 0!==q&&q._features.forceBitmapOverHTMLImageElement)return l(p,(H=>{q.createImageBitmap(new Blob([H],{type:m}),{premultiplyAlpha:"none",...C}).then((P=>{e(P),A&&URL.revokeObjectURL(p)})).catch((e=>{n&&n("Error while trying to load image: "+P,e)}))}),void 0,S||void 0,!0,((P,e)=>{F(e)})),null;const Y=new Image;if(V.getRequiredSize){const e=V.getRequiredSize(P);e.width&&(Y.width=e.width),e.height&&(Y.height=e.height)}O(p,Y);const j=[],z=()=>{for(const P of j)P.target.removeEventListener(P.name,P.handler);j.length=0};j.push({target:Y,name:"load",handler:()=>{z(),e(Y),A&&Y.src&&URL.revokeObjectURL(Y.src)}}),j.push({target:Y,name:"error",handler:P=>{z(),F(P),A&&Y.src&&URL.revokeObjectURL(Y.src)}}),j.push({target:document,name:"securitypolicyviolation",handler:P=>{if(P.blockedURI!==Y.src||"le"===P.disposition)return;z();const e=new Error(`CSP violation of policy ${P.effectiveDirective} ${P.blockedURI}. Current policy is ${P.originalPolicy}`);R.d.UseFallbackTexture=!1,F(e),A&&Y.src&&URL.revokeObjectURL(Y.src),Y.src=""}}),(()=>{for(const P of j)P.target.addEventListener(P.name,P.handler)})();const w="blob:"===p.substring(0,5),J="data:"===p.substring(0,5),i=()=>{w||J||!H.e.IsCustomRequestAvailable?Y.src=p:l(p,((P,e,n)=>{const H=new Blob([P],{type:!m&&n?n:m}),S=URL.createObjectURL(H);A=!0,Y.src=S}),void 0,S||void 0,!0,((P,e)=>{F(e)}))},B=()=>{S&&S.loadImage(p,Y)};if(!w&&!J&&S&&S.enableTexturesOffline)S.open(B,i);else{if(-1!==p.indexOf("file:")){const P=decodeURIComponent(p.substring(5).toLowerCase());if(k.FilesToLoad[P]&&"undefined"!==typeof URL){try{let e;try{e=URL.createObjectURL(k.FilesToLoad[P])}catch(b){e=URL.createObjectURL(k.FilesToLoad[P])}Y.src=e,A=!0}catch(T){Y.src=""}return Y}}i()}return Y},B=(P,e,n,H,S)=>{const k=new FileReader,m={onCompleteObservable:new p.b,abort:()=>k.abort()};return k.onloadend=()=>m.onCompleteObservable.notifyObservers(m),S&&(k.onerror=()=>{S(new J(`Unable to read ${P.name}`,P))}),k.onload=P=>{e(P.target.result)},n&&(k.onprogress=n),H?k.readAsArrayBuffer(P):k.readAsText(P),m},l=(P,e,n,H,S,t,C)=>{if(P.name)return B(P,e,n,S,t?P=>{t(void 0,P)}:void 0);const R=P;if(-1!==R.indexOf("file:")){let P=decodeURIComponent(R.substring(5).toLowerCase());0===P.indexOf("./")&&(P=P.substring(2));const H=k.FilesToLoad[P];if(H)return B(H,e,n,S,t?P=>t(void 0,new z(P.message,P.file)):void 0)}const{match:F,type:Y}=Q(R);if(F){const P={onCompleteObservable:new p.b,abort:()=>()=>{}};try{const P=S?c(R):r(R);e(P,void 0,Y)}catch(m){t?t(void 0,m):q.c.Error(m.message||"Failed to parse the Data URL")}return A.c.SetImmediate((()=>{P.onCompleteObservable.notifyObservers(P)})),P}return b(R,((P,n)=>{e(P,null===n||void 0===n?void 0:n.responseURL,null===n||void 0===n?void 0:n.getResponseHeader("content-type"))}),n,H,S,t?P=>{t(P.request,new z(P.message,P.request))}:void 0,C)},b=(P,e,n,k,m,t,C)=>{P=I.CleanUrl(P),P=I.PreprocessUrl(P);const R=I.BaseUrl+P;let A=!1;const F={onCompleteObservable:new p.b,abort:()=>A=!0},Y=()=>{let P,p=new H.e,k=null;const Y=()=>{p&&(n&&p.removeEventListener("progress",n),P&&p.removeEventListener("readystatechange",P),p.removeEventListener("loadend",j))};let j=()=>{Y(),F.onCompleteObservable.notifyObservers(F),F.onCompleteObservable.clear(),n=void 0,P=null,j=null,t=void 0,C=void 0,e=void 0};F.abort=()=>{A=!0,j&&j(),p&&p.readyState!==(XMLHttpRequest.DONE||4)&&p.abort(),null!==k&&(clearTimeout(k),k=null),p=null};const z=P=>{const e=P.message||"Unknown error";t&&p?t(new w(e,p)):q.c.Error(e)},J=q=>{if(p){if(p.open("GET",R),C)try{C(p)}catch(F){return void z(F)}m&&(p.responseType="arraybuffer"),n&&p.addEventListener("progress",n),j&&p.addEventListener("loadend",j),P=()=>{if(!A&&p&&p.readyState===(XMLHttpRequest.DONE||4)){if(P&&p.removeEventListener("readystatechange",P),p.status>=200&&p.status<300||0===p.status&&(!(0,S.h)()||d())){const P=m?p.response:p.responseText;if(null!==P){try{e&&e(P,p)}catch(F){z(F)}return}}const n=I.DefaultRetryStrategy;if(n){const P=n(R,p,q);if(-1!==P)return Y(),p=new H.e,void(k=setTimeout((()=>J(q+1)),P))}const C=new w("Error status: "+p.status+" "+p.statusText+" - Unable to load "+R,p);t&&t(C)}},p.addEventListener("readystatechange",P),p.send()}};J(0)};if(k&&k.enableSceneOffline){const H=P=>{P&&P.status>400?t&&t(P):Y()},S=()=>{k&&k.loadFile(I.BaseUrl+P,(P=>{!A&&e&&e(P),F.onCompleteObservable.notifyObservers(F)}),n?P=>{!A&&n&&n(P)}:void 0,H,m)};k.open(S,H)}else Y();return F},T=P=>{const{match:e,type:n}=Q(P);if(e)return n||void 0;const H=P.lastIndexOf(".");switch(P.substring(H+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ce":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},d=()=>"undefined"!==typeof location&&"file:"===location.protocol,N=P=>j.test(P),Q=P=>{const e=j.exec(P);if(null===e||0===e.length)return{match:!1,type:""};return{match:!0,type:e[0].replace("data:","").replace("base64,","")}};function c(P){return(0,t.d)(P.split(",")[1])}const r=P=>(0,t.g)(P.split(",")[1]);let o;Y.b._FileToolsLoadImage=i,F.d.loadFile=l,C.p.loadFile=l;((P,e,n,H,S,p,k,m,t,C)=>{o={DecodeBase64UrlToBinary:P,DecodeBase64UrlToString:e,DefaultRetryStrategy:n.DefaultRetryStrategy,BaseUrl:n.BaseUrl,CorsBehavior:n.CorsBehavior,PreprocessUrl:n.PreprocessUrl,IsBase64DataUrl:H,IsFileURL:S,LoadFile:p,LoadImage:k,ReadFile:m,RequestFile:t,SetCorsBehavior:C},Object.defineProperty(o,"DefaultRetryStrategy",{get:function(){return n.DefaultRetryStrategy},set:function(P){n.DefaultRetryStrategy=P}}),Object.defineProperty(o,"BaseUrl",{get:function(){return n.BaseUrl},set:function(P){n.BaseUrl=P}}),Object.defineProperty(o,"PreprocessUrl",{get:function(){return n.PreprocessUrl},set:function(P){n.PreprocessUrl=P}}),Object.defineProperty(o,"CorsBehavior",{get:function(){return n.CorsBehavior},set:function(P){n.CorsBehavior=P}})})(c,r,I,N,d,l,i,B,b,O)},11102:(P,e,n)=>{function H(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(P=>{const e=16*Math.random()|0;return("x"===P?e:3&e|8).toString(16)}))}n.d(e,{c:()=>H})},11094:(P,e,n)=>{n.d(e,{d:()=>p});var H=n(10988),S=n(11096);class p{static Instantiate(P){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[P])return this.RegisteredExternalClasses[P];const e=(0,S.d)(P);if(e)return e;H.c.Warn(P+" not found, you may have missed an import.");const n=P.split(".");let p=window||this;for(let H=0,S=n.length;H<S;H++)p=p[n[H]];return"function"!==typeof p?null:p}}p.RegisteredExternalClasses={}},11002:(P,e,n)=>{n.d(e,{c:()=>S});var H=n(10983);class S{static get Now(){return(0,H.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11033:(P,e,n)=>{n.d(e,{d:()=>k,g:()=>p,i:()=>H,k:()=>S});const H=P=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(P);let e="";for(let n=0;n<P.byteLength;n++)e+=String.fromCharCode(P[n]);return e},S=P=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,H,S,p,k,m,t,C="",R=0;const q=ArrayBuffer.isView(P)?new Uint8Array(P.buffer,P.byteOffset,P.byteLength):new Uint8Array(P);for(;R<q.length;)n=q[R++],H=R<q.length?q[R++]:Number.NaN,S=R<q.length?q[R++]:Number.NaN,p=n>>2,k=(3&n)<<4|H>>4,m=(15&H)<<2|S>>6,t=63&S,isNaN(H)?m=t=64:isNaN(S)&&(t=64),C+=e.charAt(p)+e.charAt(k)+e.charAt(m)+e.charAt(t);return C},p=P=>atob(P),k=P=>{const e=p(P),n=e.length,H=new Uint8Array(new ArrayBuffer(n));for(let S=0;S<n;S++)H[S]=e.charCodeAt(S);return H.buffer}},11111:(P,e,n)=>{function H(P){let e=1;do{e*=2}while(e<P);return e===P}function S(P,e,n){return P*(1-n)+e*n}function p(P){const e=k(P),n=m(P);return e-P>P-n?n:e}function k(P){return P--,P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,P|=P>>16,++P}function m(P){return P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,(P|=P>>16)-(P>>1)}function t(P,e){let n;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:n=m(P);break;case 2:n=p(P);break;default:n=k(P)}return Math.min(n,e)}n.d(e,{c:()=>m,d:()=>t,g:()=>H,j:()=>S,l:()=>p})},10972:(P,e,n)=>{n.r(e),n.d(e,{AsyncLoop:()=>J,Tools:()=>z,className:()=>w});var H=n(10976),S=n(10983),p=n(10988),k=n(10995),m=n(11002),t=n(11007),C=n(11011),R=n(11017),q=n(11019),A=n(11047),F=n(11094),Y=n(11102),j=n(11111);class z{static get BaseUrl(){return q.c.BaseUrl}static set BaseUrl(P){q.c.BaseUrl=P}static get CleanUrl(){return q.c.CleanUrl}static set CleanUrl(P){q.c.CleanUrl=P}static IsAbsoluteUrl(P){return 0===P.indexOf("//")||-1!==P.indexOf("://")&&(-1!==P.indexOf(".")&&(-1!==P.indexOf("/")&&(!(P.indexOf(":")>P.indexOf("/"))&&(P.indexOf("://")<P.indexOf(".")||(0===P.indexOf("data:")||0===P.indexOf("blob:"))))))}static set ScriptBaseUrl(P){q.c.ScriptBaseUrl=P}static get ScriptBaseUrl(){return q.c.ScriptBaseUrl}static set CDNBaseUrl(P){z.ScriptBaseUrl=P,z.AssetBaseUrl=P}static set ScriptPreprocessUrl(P){q.c.ScriptPreprocessUrl=P}static get ScriptPreprocessUrl(){return q.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return q.c.DefaultRetryStrategy}static set DefaultRetryStrategy(P){q.c.DefaultRetryStrategy=P}static get CorsBehavior(){return q.c.CorsBehavior}static set CorsBehavior(P){q.c.CorsBehavior=P}static get UseFallbackTexture(){return R.d.UseFallbackTexture}static set UseFallbackTexture(P){R.d.UseFallbackTexture=P}static get RegisteredExternalClasses(){return F.d.RegisteredExternalClasses}static set RegisteredExternalClasses(P){F.d.RegisteredExternalClasses=P}static get fallbackTexture(){return R.d.FallbackTexture}static set fallbackTexture(P){R.d.FallbackTexture=P}static FetchToRef(P,e,n,H,S,p){const k=4*((Math.abs(P)*n%n|0)+(Math.abs(e)*H%H|0)*n);p.r=S[k]/255,p.g=S[k+1]/255,p.b=S[k+2]/255,p.a=S[k+3]/255}static Mix(P,e,n){return 0}static Instantiate(P){return F.d.Instantiate(P)}static SetImmediate(P){A.c.SetImmediate(P)}static IsExponentOfTwo(P){return!0}static FloatRound(P){return Math.fround(P)}static GetFilename(P){const e=P.lastIndexOf("/");return e<0?P:P.substring(e+1)}static GetFolderPath(P){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=P.lastIndexOf("/");return n<0?e?P:"":P.substring(0,n+1)}static ToDegrees(P){return 180*P/Math.PI}static ToRadians(P){return P*Math.PI/180}static SmoothAngleChange(P,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const H=this.ToRadians(P),S=this.ToRadians(e);return this.ToDegrees(Math.atan2((1-n)*Math.sin(S)+n*Math.sin(H),(1-n)*Math.cos(S)+n*Math.cos(H)))}static MakeArray(P,e){return!0===e||void 0!==P&&null!=P?Array.isArray(P)?P:[P]:null}static GetPointerPrefix(P){return(0,S.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(P,e){(0,q.A)(P,e)}static SetReferrerPolicyBehavior(P,e){e.referrerPolicy=P}static get PreprocessUrl(){return q.c.PreprocessUrl}static set PreprocessUrl(P){q.c.PreprocessUrl=P}static LoadImage(P,e,n,H,S,p){return(0,q.r)(P,e,n,H,S,p)}static LoadFile(P,e,n,H,S,p){return(0,q.o)(P,e,n,H,S,p)}static async LoadFileAsync(P){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((n,H)=>{(0,q.o)(P,(P=>{n(P)}),void 0,void 0,e,((P,e)=>{H(e)}))}))}static GetAssetUrl(P){if(!P)return"";if(z.AssetBaseUrl&&P.startsWith(z._DefaultAssetsUrl)){const e="/"===z.AssetBaseUrl[z.AssetBaseUrl.length-1]?z.AssetBaseUrl.substring(0,z.AssetBaseUrl.length-1):z.AssetBaseUrl;return P.replace(z._DefaultAssetsUrl,e)}return P}static GetBabylonScriptURL(P,e){if(!P)return"";if(z.ScriptBaseUrl&&P.startsWith(z._DefaultCdnUrl)){const e="/"===z.ScriptBaseUrl[z.ScriptBaseUrl.length-1]?z.ScriptBaseUrl.substring(0,z.ScriptBaseUrl.length-1):z.ScriptBaseUrl;P=P.replace(z._DefaultCdnUrl,e)}return P=z.ScriptPreprocessUrl(P),e&&(P=z.GetAbsoluteUrl(P)),P}static LoadBabylonScript(P,e,n,H){P=z.GetBabylonScriptURL(P),z.LoadScript(P,e,n)}static async LoadBabylonScriptAsync(P){return P=z.GetBabylonScriptURL(P),await z.LoadScriptAsync(P)}static LoadScript(P,e,n,H){let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(P),e&&e()}catch(t){null===n||void 0===n||n(`Unable to load script '${P}' in worker`,t)}return}if(!(0,S.h)())return void(null===n||void 0===n||n(`Cannot load script '${P}' outside of a window or a worker`));const k=document.getElementsByTagName("head")[0],m=document.createElement("script");p?(m.setAttribute("type","module"),m.innerText=P):(m.setAttribute("type","text/javascript"),m.setAttribute("src",P)),H&&(m.id=H),m.onload=()=>{e&&e()},m.onerror=e=>{n&&n(`Unable to load script '${P}'`,e)},k.appendChild(m)}static async LoadScriptAsync(P,e){return await new Promise(((n,H)=>{this.LoadScript(P,(()=>{n()}),((P,e)=>{H(e||new Error(P))}),e)}))}static ReadFileAsDataURL(P,e,n){const S=new FileReader,p={onCompleteObservable:new H.b,abort:()=>S.abort()};return S.onloadend=()=>{p.onCompleteObservable.notifyObservers(p)},S.onload=P=>{e(P.target.result)},S.onprogress=n,S.readAsDataURL(P),p}static ReadFile(P,e,n,H,S){return(0,q.u)(P,e,n,H,S)}static FileAsURL(P){const e=new Blob([P]);return window.URL.createObjectURL(e)}static Format(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return P.toFixed(e)}static DeepCopy(P,e,n,H){k.e.DeepCopy(P,e,n,H)}static IsEmpty(P){for(const e in P)if(Object.prototype.hasOwnProperty.call(P,e))return!1;return!0}static RegisterTopRootEvents(P,e){for(let H=0;H<e.length;H++){const S=e[H];P.addEventListener(S.name,S.handler,!1);try{window.parent&&window.parent.addEventListener(S.name,S.handler,!1)}catch(n){}}}static UnregisterTopRootEvents(P,e){for(let H=0;H<e.length;H++){const S=e[H];P.removeEventListener(S.name,S.handler);try{P.parent&&P.parent.removeEventListener(S.name,S.handler)}catch(n){}}}static async DumpFramebuffer(P,e,n,H){throw(0,t.d)("DumpTools")}static DumpData(P,e,n,H){throw(0,t.d)("DumpTools")}static async DumpDataAsync(P,e,n){throw(0,t.d)("DumpTools")}static _IsOffScreenCanvas(P){return void 0!==P.convertToBlob}static ToBlob(P,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0;z._IsOffScreenCanvas(P)||P.toBlob||(P.toBlob=function(P,e,n){setTimeout((()=>{const H=atob(this.toDataURL(e,n).split(",")[1]),S=H.length,p=new Uint8Array(S);for(let P=0;P<S;P++)p[P]=H.charCodeAt(P);P(new Blob([p]))}))}),z._IsOffScreenCanvas(P)?P.convertToBlob({type:n,quality:H}).then((P=>e(P))):P.toBlob((function(P){e(P)}),n,H)}static DownloadBlob(P,e){if("download"in document.createElement("a")){if(!e){const P=new Date;e="screenshot_"+((P.getFullYear()+"-"+(P.getMonth()+1)).slice(2)+"-"+P.getDate()+"_"+P.getHours()+"-"+("0"+P.getMinutes()).slice(-2))+".png"}z.Download(P,e)}else if(P&&"undefined"!==typeof URL){const e=URL.createObjectURL(P),n=window.open("");if(!n)return;const H=n.document.createElement("img");H.onload=function(){URL.revokeObjectURL(e)},H.src=e,n.document.body.appendChild(H)}}static EncodeScreenshotCanvasData(P,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0,S=arguments.length>4?arguments[4]:void 0;if("string"!==typeof H&&e){if(e){if(z._IsOffScreenCanvas(P))return void P.convertToBlob({type:n,quality:S}).then((P=>{const n=new FileReader;n.readAsDataURL(P),n.onloadend=()=>{const P=n.result;e(P)}}));const H=P.toDataURL(n,S);e(H)}}else this.ToBlob(P,(function(P){P&&z.DownloadBlob(P,H),e&&e("")}),n,S)}static Download(P,e){if("undefined"===typeof URL)return;const n=window.URL.createObjectURL(P),H=document.createElement("a");document.body.appendChild(H),H.style.display="none",H.href=n,H.download=e,H.addEventListener("click",(()=>{H.parentElement&&H.parentElement.removeChild(H)})),H.click(),window.URL.revokeObjectURL(n)}static BackCompatCameraNoPreventDefault(P){return"boolean"===typeof P[0]?P[0]:"boolean"===typeof P[1]&&P[1]}static CreateScreenshot(P,e,n,H){throw(0,t.d)("ScreenshotTools")}static async CreateScreenshotAsync(P,e,n){throw(0,t.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(P,e,n,H){throw(0,t.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(P,e,n){throw(0,t.d)("ScreenshotTools")}static RandomId(){return(0,Y.c)()}static IsBase64(P){return(0,q.i)(P)}static DecodeBase64(P){return(0,q.b)(P)}static get errorsCount(){return p.c.errorsCount}static Log(P){p.c.Log(P)}static Warn(P){p.c.Warn(P)}static Error(P){p.c.Error(P)}static get LogCache(){return p.c.LogCache}static ClearLogCache(){p.c.ClearLogCache()}static set LogLevels(P){p.c.LogLevels=P}static set PerformanceLogLevel(P){return(P&z.PerformanceUserMarkLogLevel)===z.PerformanceUserMarkLogLevel?(z.StartPerformanceCounter=z._StartUserMark,void(z.EndPerformanceCounter=z._EndUserMark)):(P&z.PerformanceConsoleLogLevel)===z.PerformanceConsoleLogLevel?(z.StartPerformanceCounter=z._StartPerformanceConsole,void(z.EndPerformanceCounter=z._EndPerformanceConsole)):(z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,void(z.EndPerformanceCounter=z._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(P,e){}static _EndPerformanceCounterDisabled(P,e){}static _StartUserMark(P){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!z._Performance){if(!(0,S.h)())return;z._Performance=window.performance}e&&z._Performance.mark&&z._Performance.mark(P+"-Begin")}static _EndUserMark(P){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&z._Performance.mark&&(z._Performance.mark(P+"-End"),z._Performance.measure(P,P+"-Begin",P+"-End"))}static _StartPerformanceConsole(P){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(z._StartUserMark(P,e),console.time&&console.time(P))}static _EndPerformanceConsole(P){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(z._EndUserMark(P,e),console.timeEnd(P))}static get Now(){return m.c.Now}static GetClassName(P){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;if(!e&&P.getClassName)n=P.getClassName();else{if(P instanceof Object){n=(e?P:Object.getPrototypeOf(P)).constructor.__bjsclassName__}n||(n=typeof P)}return n}static First(P,e){for(const n of P)if(e(n))return n;return null}static getFullClassName(P){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null,H=null;if(!e&&P.getClassName)n=P.getClassName();else{if(P instanceof Object){const S=e?P:Object.getPrototypeOf(P);n=S.constructor.__bjsclassName__,H=S.constructor.__bjsmoduleName__}n||(n=typeof P)}return n?(null!=H?H+".":"")+n:null}static async DelayAsync(P){await new Promise((e=>{setTimeout((()=>{e()}),P)}))}static IsSafari(){return!!(0,S.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function w(P,e){return n=>{n.__bjsclassName__=P,n.__bjsmoduleName__=null!=e?e:null}}z.AssetBaseUrl="",z.UseCustomRequestHeaders=!1,z.CustomRequestHeaders=C.e.CustomRequestHeaders,z.GetDOMTextContent=S.d,z._DefaultCdnUrl="https://cdn.babylonjs.com",z._DefaultAssetsUrl="https://assets.babylonjs.com/core",z.GetAbsoluteUrl="object"===typeof document?P=>{const e=document.createElement("a");return e.href=P,e.href}:"function"===typeof URL&&"object"===typeof location?P=>new URL(P,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},z.NoneLogLevel=p.c.NoneLogLevel,z.MessageLogLevel=p.c.MessageLogLevel,z.WarningLogLevel=p.c.WarningLogLevel,z.ErrorLogLevel=p.c.ErrorLogLevel,z.AllLogLevel=p.c.AllLogLevel,z.IsWindowObjectExist=S.h,z.PerformanceNoneLogLevel=0,z.PerformanceUserMarkLogLevel=1,z.PerformanceConsoleLogLevel=2,z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,z.EndPerformanceCounter=z._EndPerformanceCounterDisabled;class J{constructor(P,e,n){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=P,this.index=H-1,this._done=!1,this._fn=e,this._successCallback=n}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(P,e,n){const H=new J(P,e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return H.executeNext(),H}static SyncAsyncForLoop(P,e,n,H,S){let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return J.Run(Math.ceil(P/e),(H=>{S&&S()?H.breakLoop():setTimeout((()=>{for(let p=0;p<e;++p){const k=H.index*e+p;if(k>=P)break;if(n(k),S&&S()){H.breakLoop();break}}H.executeNext()}),p)}),H)}}z.Mix=j.j,z.IsExponentOfTwo=j.g,R.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11096:(P,e,n)=>{n.d(e,{d:()=>p,h:()=>S});const H={};function S(P,e){H[P]=e}function p(P){return H[P]}},11011:(P,e,n)=>{n.d(e,{e:()=>H});class H{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(H.CustomRequestHeaders).length>0||H.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const P in H.CustomRequestHeaders){const e=H.CustomRequestHeaders[P];e&&this._xhr.setRequestHeader(P,e)}}_shouldSkipRequestModifications(P){return H.SkipRequestModificationForBabylonCDN&&(P.includes("preview.babylonjs.com")||P.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(P){this._xhr.onprogress=P}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(P){this._xhr.responseType=P}get timeout(){return this._xhr.timeout}set timeout(P){this._xhr.timeout=P}addEventListener(P,e,n){this._xhr.addEventListener(P,e,n)}removeEventListener(P,e,n){this._xhr.removeEventListener(P,e,n)}abort(){this._xhr.abort()}send(P){H.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(P)}open(P,e){for(const n of H.CustomRequestModifiers){if(this._shouldSkipRequestModifications(e))return;e=n(this._xhr,e)||e}e=(e=e.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=e,this._xhr.open(P,e,!0)}setRequestHeader(P,e){this._xhr.setRequestHeader(P,e)}getResponseHeader(P){return this._xhr.getResponseHeader(P)}}H.CustomRequestHeaders={},H.CustomRequestModifiers=new Array,H.SkipRequestModificationForBabylonCDN=!0}}]);