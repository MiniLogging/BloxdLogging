"use strict";(self.ynu1yiqvs98=self.ynu1yiqvs98||[]).push([[8],{11033:(I,E,j)=>{j.d(E,{c:()=>q});var e=j(10993),w=j(10974),z=j(11037),h=j(11054),t=j(10983);class U{constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,I&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(I){this._zOffset!==I&&(this._zOffset=I,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(I){this._zOffsetUnits!==I&&(this._zOffsetUnits=I,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(I){this._cullFace!==I&&(this._cullFace=I,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(I){this._cull!==I&&(this._cull=I,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(I){this._depthFunc!==I&&(this._depthFunc=I,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(I){this._depthMask!==I&&(this._depthMask=I,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(I){this._depthTest!==I&&(this._depthTest=I,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(I){this._frontFace!==I&&(this._frontFace=I,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(I){this.isDirty&&(this._isCullDirty&&(this.cull?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(I.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(I.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(I.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(I.enable(I.POLYGON_OFFSET_FILL),I.polygonOffset(this.zOffset,this.zOffsetUnits)):I.disable(I.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(I.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class R{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(I){this._func!==I&&(this._func=I,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(I){this._funcRef!==I&&(this._funcRef=I,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(I){this._funcMask!==I&&(this._funcMask=I,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(I){this._opStencilFail!==I&&(this._opStencilFail=I,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(I){this._opDepthFail!==I&&(this._opDepthFail=I,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(I){this._opStencilDepthPass!==I&&(this._opStencilDepthPass=I,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(I){this._mask!==I&&(this._mask=I,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(I){this._enabled!==I&&(this._enabled=I,this._isStencilTestDirty=!0)}constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,I&&this.reset()}reset(){var I;this.stencilMaterial=void 0,null===(I=this.stencilGlobal)||void 0===I||I.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(I){var E;if(!I)return;const j=!this.useStencilGlobalOnly&&!(null===(E=this.stencilMaterial)||void 0===E||!E.enabled);this.enabled=j?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=j?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=j?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=j?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=j?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=j?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=j?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=j?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(I.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(I.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(I.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class P{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=P.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=P.KEEP,this.opDepthFail=P.KEEP,this.opStencilDepthPass=P.REPLACE}get stencilFunc(){return this.func}set stencilFunc(I){this.func=I}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(I){this.funcRef=I}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(I){this.funcMask=I}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(I){this.opStencilFail=I}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(I){this.opDepthFail=I}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(I){this.opStencilDepthPass=I}get stencilMask(){return this.mask}set stencilMask(I){this.mask=I}get stencilTest(){return this.enabled}set stencilTest(I){this.enabled=I}}P.ALWAYS=519,P.KEEP=7680,P.REPLACE=7681;class o{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(I){this._alphaBlend!==I&&(this._alphaBlend=I,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(I,E,j,e){this._blendConstants[0]===I&&this._blendConstants[1]===E&&this._blendConstants[2]===j&&this._blendConstants[3]===e||(this._blendConstants[0]=I,this._blendConstants[1]=E,this._blendConstants[2]=j,this._blendConstants[3]=e,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(I,E,j,e){this._blendFunctionParameters[0]===I&&this._blendFunctionParameters[1]===E&&this._blendFunctionParameters[2]===j&&this._blendFunctionParameters[3]===e||(this._blendFunctionParameters[0]=I,this._blendFunctionParameters[1]=E,this._blendFunctionParameters[2]=j,this._blendFunctionParameters[3]=e,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(I,E){this._blendEquationParameters[0]===I&&this._blendEquationParameters[1]===E||(this._blendEquationParameters[0]=I,this._blendEquationParameters[1]=E,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(I){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?I.enable(I.BLEND):I.disable(I.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(I.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(I.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(I.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var Z=j(10986),c=j(11056),K=j(10966),L=j(10960),F=j(11027),C=j(11063);function X(I,E){if((0,K.j)()){const{requestAnimationFrame:j}=E||window;if("function"===typeof j)return j(I)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(I);return setTimeout(I,16)}class q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(I){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(I){I!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=I,this._depthCullingState.depthFunc=I?518:515)}setColorWrite(I){I!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=I)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(I){if(I)return this.isNDCHalfZRange?I.IS_NDC_HALF_ZRANGE="":delete I.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?I.USE_REVERSE_DEPTHBUFFER="":delete I.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?I.USE_EXACT_SRGB_CONVERSIONS="":delete I.USE_EXACT_SRGB_CONVERSIONS);{let I="";return this.isNDCHalfZRange&&(I+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(I&&(I+="\n"),I+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(I&&(I+="\n"),I+="#define USE_EXACT_SRGB_CONVERSIONS"),I}}_rebuildInternalTextures(){const I=this._internalTexturesCache.slice();for(const E of I)E._rebuild()}_rebuildRenderTargetWrappers(){const I=this._renderTargetWrapperCache.slice();for(const E of I)E._rebuild()}_rebuildEffects(){for(const I in this._compiledEffects){const E=this._compiledEffects[I];E._pipelineContext=null,E._prepareEffect()}z.Effect.ResetCache()}_rebuildGraphicsResources(){var I;this.wipeCaches(!0),this._rebuildEffects(),null===(I=this._rebuildComputeEffects)||void 0===I||I.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){w.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(I){setTimeout((()=>{this._clearEmptyResources();const E=this._depthCullingState.depthTest,j=this._depthCullingState.depthFunc,e=this._depthCullingState.depthMask,w=this._stencilState.stencilTest;I(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=E,this._depthCullingState.depthFunc=j,this._depthCullingState.depthMask=e,this._stencilState.stencilTest=w,this._flagContextRestored()}),0)}get Z(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(I){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(I){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const I=new Uint8Array(4),E=[I,I,I,I,I,I];this._emptyCubeTexture=this.createRawCubeTexture(E,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(I){if(!I)return this._activeRenderLoops.length=0,void this._cancelFrame();const E=this._activeRenderLoops.indexOf(I);E>=0&&(this._activeRenderLoops.splice(E,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const I=this._frameHandler;if(this._frameHandler=0,(0,K.j)()){const{cancelAnimationFrame:E}=this.getHostWindow()||window;if("function"===typeof E)return E(I)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(I);return clearTimeout(I)}}Pe(){this.onBeginFrameObservable.notifyObservers(this)}Ze(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(I){this._maxFPS=I,void 0!==I&&(this._minFrameTime=I<=0?Number.MAX_VALUE:1e3/I)}_isOverFrameTime(I){if(!I||void 0===this._maxFPS)return!1;const E=I-this._lastFrameTime;return this._lastFrameTime=I,this._renderAccumulator+=E,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(I){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(I)){let I=!0;(this.Z||!this.renderEvenInBackground&&this._windowIsBackground)&&(I=!1),I&&(this.Pe(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ze())}}_renderLoop(I){this._processFrame(I),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let I=0;I<this._activeRenderLoops.length;I++){(0,this._activeRenderLoops[I])()}}_renderViews(){return!1}_queueNewFrame(I,E){return X(I,E)}runRenderLoop(I){-1===this._activeRenderLoops.indexOf(I)&&(this._activeRenderLoops.push(I),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(I){this._depthCullingState.depthTest=I}setZOffset(I){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-I:I}getZOffset(){const I=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-I:I}setZOffsetUnits(I){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-I:I}getZOffsetUnits(){const I=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-I:I}getHostWindow(){return(0,K.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(I){this._compatibilityMode=!0}_rebuildTextures(){for(const I of this.scenes)I._rebuildTextures();for(const I of this._virtualScenes)I._rebuildTextures()}_releaseRenderTargetWrapper(I){const E=this._renderTargetWrapperCache.indexOf(I);-1!==E&&this._renderTargetWrapperCache.splice(E,1)}get currentViewport(){return this._cachedViewport}setViewport(I,E,j){const e=E||this.getRenderWidth(),w=j||this.getRenderHeight(),z=I.x||0,h=I.y||0;this._cachedViewport=I,this._viewport(z*e,h*w,e*I.width,w*I.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(I){return new Path2D(I)}get description(){let I=this.name+this.version;return this._caps.parallelShaderCompile&&(I+=" - Parallel shader compilation"),I}_createTextureBase(I,E,j,z){let h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,R=arguments.length>7?arguments[7]:void 0,P=arguments.length>8?arguments[8]:void 0,o=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,Z=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,K=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,L=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,F=arguments.length>13?arguments[13]:void 0,X=arguments.length>14?arguments[14]:void 0,x=arguments.length>15?arguments[15]:void 0;const u="data:"===(I=I||"").substring(0,5),b="blob:"===I.substring(0,5),Q=u&&-1!==I.indexOf(";base64,"),G=Z||new c.e(this,1);G!==Z&&(G.label=I.substring(0,60));const y=I;!this._transformTextureUrl||Q||Z||o||(I=this._transformTextureUrl(I)),y!==I&&(G._originalUrl=y);const d=I.lastIndexOf(".");let a=L||(d>-1?I.substring(d).toLowerCase():"");a.indexOf("?")>-1&&(a=a.split("?")[0]);const l=(0,C.b)(a,F);z&&z.addPendingData(G),G.url=I,G.generateMipMaps=!E,G.samplingMode=h,G.invertY=j,G._useSRGBBuffer=this._getUseSRGBBuffer(!!x,E),this._doNotHandleContextLost||(G._buffer=o);let i=null;t&&!Z&&(i=G.onLoadedObservable.add(t)),Z||this._internalTexturesCache.push(G);const r=(j,Z)=>{z&&z.removePendingData(G),I===y?(i&&G.onLoadedObservable.remove(i),e.d.UseFallbackTexture&&I!==e.d.FallbackTexture&&this._createTextureBase(e.d.FallbackTexture,E,G.invertY,z,h,null,U,R,P,o,G),j=(j||"Unknown error")+(e.d.UseFallbackTexture?" - Fallback texture was used":""),G.onErrorObservable.notifyObservers({message:j,exception:Z}),U&&U(j,Z)):(w.b.Warn(`Failed to load ${I}, falling back to ${y}`),this._createTextureBase(y,E,G.invertY,z,h,t,U,R,P,o,G,K,L,F,X,x))};if(l){const E=async I=>{(await l).loadData(I,G,((I,E,j,e,w,t)=>{t?r("TextureLoader failed to load data"):R(G,a,z,{width:I,height:E},G.invertY,!j,e,(()=>(w(),!1)),h)}),X)};o?o instanceof ArrayBuffer?E(new Uint8Array(o)):ArrayBuffer.isView(o)?E(o):U&&U("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(I,(I=>{E(new Uint8Array(I))}),void 0,z?z.offlineProvider:void 0,!0,((I,E)=>{r("Unable to load "+(I&&I.responseURL,E))}))}else{const j=I=>{b&&!this._doNotHandleContextLost&&(G._buffer=I),R(G,a,z,I,G.invertY,E,!1,P,h)};!u||Q?o&&("string"===typeof o.decoding||o.close)?j(o):q._FileToolsLoadImage(I||"",j,r,z?z.offlineProvider:null,F,G.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof o||o instanceof ArrayBuffer||ArrayBuffer.isView(o)||o instanceof Blob?q._FileToolsLoadImage(o,j,r,z?z.offlineProvider:null,F,G.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):o&&j(o)}return G}_rebuildBuffers(){for(const I of this._uniformBuffers)I._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,K.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const I in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,I)&&(this._boundTexturesCache[I]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(I){this._name=I}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(I){this._hardwareScalingLevel=I,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(I){this._doNotHandleContextLost=I}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(I,E,j){var w,z;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new U,this._stencilStateComposer=new R,this._stencilState=new P,this._alphaState=new o,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new L.e,this.onCanvasFocusObservable=new L.e,this.onNewSceneAddedObservable=new L.e,this.onResizeObservable=new L.e,this.onCanvasPointerOutObservable=new L.e,this.onEffectErrorObservable=new L.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new L.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=I=>this._renderLoop(I),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new L.e,this.onAfterShaderCompilationObservable=new L.e,this.onBeginFrameObservable=new L.e,this.onEndFrameObservable=new L.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new L.e,this.onContextRestoredObservable=new L.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Le=new L.e,this.onReleaseEffectsObservable=new L.e,e.d.Instances.push(this),this.startTime=t.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,h.c.SetMatrixPrecision(!!E.useHighPrecisionMatrix),(0,K.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=j??!1,E.antialias=I??E.antialias,E.deterministicLockstep=E.deterministicLockstep??!1,E.lockstepMaxSteps=E.lockstepMaxSteps??4,E.timeStep=E.timeStep??1/60,E.stencil=E.stencil??!0,this._audioContext=(null===(w=E.audioEngineOptions)||void 0===w?void 0:w.audioContext)??null,this._audioDestination=(null===(z=E.audioEngineOptions)||void 0===z?void 0:z.audioDestination)??null,this.premultipliedAlpha=E.premultipliedAlpha??!0,this._doNotHandleContextLost=!!E.doNotHandleContextLost,this._isStencilEnable=!!E.stencil,this.useExactSrgbConversions=E.useExactSrgbConversions??!1;const Z=(0,K.j)()&&window.devicePixelRatio||1,c=E.limitDeviceRatio||Z;j=j||E.adaptToDeviceRatio||!1,this._hardwareScalingLevel=j?1/Math.min(c,Z):1,this._lastDevicePixelRatio=Z,this._creationOptions=E}resize(){let I,E,j=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const I=(0,K.j)()&&window.devicePixelRatio||1,E=this._lastDevicePixelRatio/I;this._lastDevicePixelRatio=I,this._hardwareScalingLevel*=E}if((0,K.j)()&&(0,K.e)())if(this._renderingCanvas){var e,w;const j=null===(e=(w=this._renderingCanvas).getBoundingClientRect)||void 0===e?void 0:e.call(w);I=this._renderingCanvas.clientWidth||(null===j||void 0===j?void 0:j.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,E=this._renderingCanvas.clientHeight||(null===j||void 0===j?void 0:j.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else I=window.innerWidth,E=window.innerHeight;else I=this._renderingCanvas?this._renderingCanvas.width:100,E=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(I/this._hardwareScalingLevel,E/this._hardwareScalingLevel,j)}setSize(I,E){let j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(I|=0,E|=0,!j&&this._renderingCanvas.width===I&&this._renderingCanvas.height===E)return!1;if(this._renderingCanvas.width=I,this._renderingCanvas.height=E,this.scenes){for(let I=0;I<this.scenes.length;I++){const E=this.scenes[I];for(let I=0;I<E.cameras.length;I++){E.cameras[I]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(I,E,j,e,w,z,h,t,U,R,P){throw(0,Z.b)("engine.rawTexture")}createRawCubeTexture(I,E,j,e,w,z,h,t){throw(0,Z.b)("engine.rawTexture")}createRawTexture3D(I,E,j,e,w,z,h,t,U,R,P){throw(0,Z.b)("engine.rawTexture")}createRawTexture2DArray(I,E,j,e,w,z,h,t,U,R,P){throw(0,Z.b)("engine.rawTexture")}_sharedInit(I){this._renderingCanvas=I}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const I=navigator.userAgent;this.hostInformation.isMobile=-1!==I.indexOf("Mobile")||-1!==I.indexOf("Mac")&&(0,K.e)()&&"ontouchend"in document},this._checkForMobile(),(0,K.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(I){return document.createElement("video")}_reportDrawCall(){var I;let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(I=this._drawCalls)||void 0===I||I.addCount(E,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(I,E){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(I,E){return createImageBitmap(I,E)}resizeImageBitmap(I,E,j){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(I){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(I,E){if("undefined"===typeof document)return new OffscreenCanvas(I,E);const j=document.createElement("canvas");return j.width=I,j.height=E,j}createCanvas(I,E){return q._CreateCanvas(I,E)}static _FileToolsLoadImage(I,E,j,e,w,z,h){throw(0,Z.b)("FileTools")}_loadFile(I,E,j,e,w,z){const h=(0,F.k)(I,E,j,e,w,z);return this._activeRequests.push(h),h.onCompleteObservable.add((()=>{const I=this._activeRequests.indexOf(h);-1!==I&&this._activeRequests.splice(I,1)})),h}static _FileToolsLoadFile(I,E,j,e,w,z){if(F.c.loadFile)return F.c.loadFile(I,E,j,e,w,z);throw(0,Z.b)("FileTools")}dispose(){var I;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(I=this.releaseComputeEffects)||void 0===I||I.call(this),z.Effect.ResetCache();for(const j of this._activeRequests)j.abort();this._boundRenderFunction=null,this.Le.notifyObservers(this),this.Le.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,K.j)()&&window.removeEventListener("resize",this._checkForMobile);const E=e.d.Instances.indexOf(this);E>=0&&e.d.Instances.splice(E,1),e.d.Instances.length||(e.d.OnEnginesDisposedObservable.notifyObservers(this),e.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(I){throw(0,Z.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(I,E){for(let j=0;j<e.d.Instances.length;j++){const w=e.d.Instances[j];for(let j=0;j<w.scenes.length;j++)w.scenes[j].markAllMaterialsAsDirty(I,E)}}}q._RenderPassIdCounter=0,q._RescalePostProcessFactory=null,q.CollisionsEpsilon=.001,q.QueueNewFrame=X},10993:(I,E,j)=>{j.d(E,{d:()=>w});var e=j(10960);class w{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}w.Instances=[],w.OnEnginesDisposedObservable=new e.e,w._LastCreatedScene=null,w.UseFallbackTexture=!0,w.FallbackTexture=""},11054:(I,E,j)=>{j.d(E,{c:()=>e});class e{static SetMatrixPrecision(I){if(e.MatrixTrackPrecisionChange=!1,I&&!e.MatrixUse64Bits&&e.MatrixTrackedMatrices)for(let E=0;E<e.MatrixTrackedMatrices.length;++E){const I=e.MatrixTrackedMatrices[E],j=I.Xe;I.Xe=new Array(16);for(let E=0;E<16;++E)I.Xe[E]=j[E]}e.MatrixUse64Bits=I,e.MatrixCurrentType=e.MatrixUse64Bits?Array:Float32Array,e.MatrixTrackedMatrices=null}}e.MatrixUse64Bits=!1,e.MatrixTrackPrecisionChange=!0,e.MatrixCurrentType=Float32Array,e.MatrixTrackedMatrices=[]},11063:(I,E,j)=>{j.d(E,{b:()=>h});var e=j(10974);const w=new Map;function z(I,E){(function(I){return w.delete(I)})(I)&&e.b.Warn(`Extension with the name '${I}' already exists`),w.set(I,E)}function h(I,E){"image/ktx"!==E&&"image/ktx2"!==E||(I=".ktx"),w.has(I)||(I.endsWith(".ies")&&z(".ies",(async()=>await j.e(15).then(j.bind(j,13548)).then((I=>new I._IESTextureLoader)))),I.endsWith(".dds")&&z(".dds",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(19),j.e(18),j.e(28)]).then(j.bind(j,13552)).then((I=>new I._DDSTextureLoader)))),I.endsWith(".basis")&&z(".basis",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(47)]).then(j.bind(j,13563)).then((I=>new I._BasisTextureLoader)))),I.endsWith(".env")&&z(".env",(async()=>await Promise.all([j.e(14),j.e(17),j.e(13),j.e(19),j.e(18),j.e(23),j.e(21),j.e(45),j.e(48)]).then(j.bind(j,13570)).then((I=>new I._ENVTextureLoader)))),I.endsWith(".hdr")&&z(".hdr",(async()=>await Promise.all([j.e(14),j.e(49)]).then(j.bind(j,13575)).then((I=>new I._HDRTextureLoader)))),(I.endsWith(".ktx")||I.endsWith(".ktx2"))&&(z(".ktx",(async()=>await j.e(30).then(j.bind(j,13577)).then((I=>new I._KTXTextureLoader)))),z(".ktx2",(async()=>await j.e(30).then(j.bind(j,13577)).then((I=>new I._KTXTextureLoader))))),I.endsWith(".tga")&&z(".tga",(async()=>await j.e(50).then(j.bind(j,13582)).then((I=>new I._TGATextureLoader)))),I.endsWith(".exr")&&z(".exr",(async()=>await j.e(16).then(j.bind(j,13591)).then((I=>new I._ExrTextureLoader)))));const e=w.get(I);return e?Promise.resolve(e(E)):null}},11056:(I,E,j)=>{j.d(E,{e:()=>h});var e,w=j(10960),z=j(11060);!function(I){I[I.Unknown=0]="Unknown",I[I.Url=1]="Url",I[I.Temp=2]="Temp",I[I.Raw=3]="Raw",I[I.Dynamic=4]="Dynamic",I[I.RenderTarget=5]="RenderTarget",I[I.MultiRenderTarget=6]="MultiRenderTarget",I[I.Cube=7]="Cube",I[I.CubeRaw=8]="CubeRaw",I[I.CubePrefiltered=9]="CubePrefiltered",I[I.Raw3D=10]="Raw3D",I[I.Raw2DArray=11]="Raw2DArray",I[I.DepthStencil=12]="DepthStencil",I[I.CubeRawRGBD=13]="CubeRawRGBD",I[I.Depth=14]="Depth"}(e||(e={}));class h extends z.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(I){this.generateMipMaps=I}get uniqueId(){return this._uniqueId}_setUniqueId(I){this._uniqueId=I}getEngine(){return this._engine}get source(){return this._source}constructor(I,E){let j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new w.e,this.onErrorObservable=new w.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=I,this._source=E,this._uniqueId=h._Counter++,j||(this._hardwareTexture=I._createHardwareTexture())}incrementReferences(){this._references++}updateSize(I,E){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,I,E,j),this.width=I,this.height=E,this.depth=j,this.baseWidth=I,this.baseHeight=E,this.baseDepth=j,this._size=I*E*j}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const I=this.onRebuildCallback(this),E=E=>{E._swapAndDie(this,!1),this.isReady=I.isReady};return void(I.isAsync?I.proxy.then(E):E(I.proxy))}let I;switch(this.source){case 2:case 12:case 14:break;case 1:return void(I=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(I=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:I=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),I._swapAndDie(this,!1),this.isReady=!0;break;case 10:I=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 11:I=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 4:I=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),I._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(I=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:I=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),I._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return I=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(I=>{I&&I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(I._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(I){var E;let j=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(E=this._hardwareTexture)||void 0===E||E.setUsage(I._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),I._hardwareTexture=this._hardwareTexture,j&&(I._isRGBD=this._isRGBD),this._lodTextureHigh&&(I._lodTextureHigh&&I._lodTextureHigh.dispose(),I._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(I._lodTextureMid&&I._lodTextureMid.dispose(),I._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(I._lodTextureLow&&I._lodTextureLow.dispose(),I._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(I._irradianceTexture&&I._irradianceTexture.dispose(),I._irradianceTexture=this._irradianceTexture);const e=this._engine.getLoadedTexturesCache();let w=e.indexOf(this);-1!==w&&e.splice(w,1),w=e.indexOf(I),-1===w&&e.push(I)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}h._Counter=0},11060:(I,E,j)=>{j.d(E,{d:()=>e});class e{get wrapU(){return this._cachedWrapU}set wrapU(I){this._cachedWrapU=I}get wrapV(){return this._cachedWrapV}set wrapV(I){this._cachedWrapV=I}get wrapR(){return this._cachedWrapR}set wrapR(I){this._cachedWrapR=I}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(I){this._cachedAnisotropicFilteringLevel=I}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(I){this._comparisonFunction=I}get useMipMaps(){return this._useMipMaps}set useMipMaps(I){this._useMipMaps=I}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=I,this._cachedWrapV=E,this._cachedWrapR=j,this._cachedAnisotropicFilteringLevel=e,this.samplingMode=w,this._comparisonFunction=z,this}compareSampler(I){return this._cachedWrapU===I._cachedWrapU&&this._cachedWrapV===I._cachedWrapV&&this._cachedWrapR===I._cachedWrapR&&this._cachedAnisotropicFilteringLevel===I._cachedAnisotropicFilteringLevel&&this.samplingMode===I.samplingMode&&this._comparisonFunction===I._comparisonFunction&&this._useMipMaps===I._useMipMaps}}},10978:(I,E,j)=>{j.d(E,{e:()=>z});var e=j(10974);const w=(I,E,j)=>I?I.getClassName&&"Mesh"===I.getClassName()?null:!I.getClassName||"SubMesh"!==I.getClassName()&&"PhysicsBody"!==I.getClassName()?I.clone?I.clone():Array.isArray(I)?I.slice():j&&"object"===typeof I?{...I}:null:I.clone(E):null;class z{static DeepCopy(I,E,j,z){let h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const t=function(I){const E=[];do{const j=Object.getOwnPropertyNames(I);for(const I of j)-1===E.indexOf(I)&&E.push(I)}while(I=Object.getPrototypeOf(I));return E}(I);for(const R of t){if("_"===R[0]&&(!z||-1===z.indexOf(R)))continue;if(R.endsWith("Observable"))continue;if(j&&-1!==j.indexOf(R))continue;const t=I[R],P=typeof t;if("function"!==P)try{if("object"===P)if(t instanceof Uint8Array)E[R]=Uint8Array.from(t);else if(t instanceof Array){if(E[R]=[],t.length>0)if("object"==typeof t[0])for(let I=0;I<t.length;I++){const j=w(t[I],E,h);-1===E[R].indexOf(j)&&E[R].push(j)}else E[R]=t.slice(0)}else E[R]=w(t,E,h);else E[R]=t}catch(U){e.b.Warn(U.message)}}}}},11007:(I,E,j)=>{j.d(E,{d:()=>e,g:()=>w,k:()=>z});class e extends Error{}e._setPrototypeOf=Object.setPrototypeOf||((I,E)=>(I.__proto__=E,I));const w={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class z extends e{constructor(I,E,j){super(I),this.errorCode=E,this.innerError=j,this.name="RuntimeError",e._setPrototypeOf(this,z.prototype)}}},11e3:(I,E,j)=>{j.d(E,{b:()=>r,c:()=>q,e:()=>d,f:()=>l,m:()=>G,j:()=>F,n:()=>b,o:()=>Q,s:()=>y,t:()=>x});var e=j(10988),w=j(10966),z=j(10960);class h{}h.FilesToLoad={};var t=j(11007),U=j(11012),R=j(11021),P=j(10993),o=j(10974),Z=j(11031),c=j(11027),K=j(11033);const L=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class F extends t.k{constructor(I,E){super(I,t.g.LoadFileError),this.name="LoadFileError",t.d._setPrototypeOf(this,F.prototype),E instanceof e.c?this.request=E:this.file=E}}class C extends t.k{constructor(I,E){super(I,t.g.RequestFileError),this.request=E,this.name="RequestFileError",t.d._setPrototypeOf(this,C.prototype)}}class X extends t.k{constructor(I,E){super(I,t.g.ReadFileError),this.file=E,this.name="ReadFileError",t.d._setPrototypeOf(this,X.prototype)}}const q={DefaultRetryStrategy:class{static ExponentialBackoff(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(j,e,w)=>0!==e.status||w>=I||-1!==j.indexOf("file:")?-1:Math.pow(2,w)*E}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:I=>I,ScriptBaseUrl:"",ScriptPreprocessUrl:I=>I,CleanUrl:I=>I=I.replace(/#/gm,"%23")},x=(I,E)=>{if((!I||0!==I.indexOf("data:"))&&q.CorsBehavior)if("string"===typeof q.CorsBehavior||q.CorsBehavior instanceof String)E.crossOrigin=q.CorsBehavior;else{const j=q.CorsBehavior(I);j&&(E.crossOrigin=j)}},u={getRequiredSize:null},b=function(I,E,j,w){let z,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",R=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:P.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===o||void 0===o||!o._features.forceBitmapOverHTMLImageElement))return j("LoadImage is only supported in web or BabylonNative environments."),null;let Z=!1;I instanceof ArrayBuffer||ArrayBuffer.isView(I)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(z=URL.createObjectURL(new Blob([I],{type:t})),Z=!0):z=`data:${t};base64,`+(0,U.m)(I):I instanceof Blob?(z=URL.createObjectURL(I),Z=!0):(z=q.CleanUrl(I),z=q.PreprocessUrl(z));const c=E=>{if(j){const e=z||I.toString();j(`Error while trying to load image: ${0===e.indexOf("http")||e.length<=128?e:e.slice(0,128)+"..."}`,E)}};if(null!==o&&void 0!==o&&o._features.forceBitmapOverHTMLImageElement)return G(z,(e=>{o.createImageBitmap(new Blob([e],{type:t}),{premultiplyAlpha:"none",...R}).then((I=>{E(I),Z&&URL.revokeObjectURL(z)})).catch((E=>{j&&j("Error while trying to load image: "+I,E)}))}),void 0,w||void 0,!0,((I,E)=>{c(E)})),null;const K=new Image;if(u.getRequiredSize){const E=u.getRequiredSize(I);E.width&&(K.width=E.width),E.height&&(K.height=E.height)}x(z,K);const L=[],F=()=>{for(const I of L)I.target.removeEventListener(I.name,I.handler);L.length=0};L.push({target:K,name:"load",handler:()=>{F(),E(K),Z&&K.src&&URL.revokeObjectURL(K.src)}}),L.push({target:K,name:"error",handler:I=>{F(),c(I),Z&&K.src&&URL.revokeObjectURL(K.src)}}),L.push({target:document,name:"securitypolicyviolation",handler:I=>{if(I.blockedURI!==K.src||"ye"===I.disposition)return;F();const E=new Error(`CSP violation of policy ${I.effectiveDirective} ${I.blockedURI}. Current policy is ${I.originalPolicy}`);P.d.UseFallbackTexture=!1,c(E),Z&&K.src&&URL.revokeObjectURL(K.src),K.src=""}}),(()=>{for(const I of L)I.target.addEventListener(I.name,I.handler)})();const C="blob:"===z.substring(0,5),X="data:"===z.substring(0,5),b=()=>{C||X||!e.c.IsCustomRequestAvailable?K.src=z:G(z,((I,E,j)=>{const e=new Blob([I],{type:!t&&j?j:t}),w=URL.createObjectURL(e);Z=!0,K.src=w}),void 0,w||void 0,!0,((I,E)=>{c(E)}))},Q=()=>{w&&w.loadImage(z,K)};if(!C&&!X&&w&&w.enableTexturesOffline)w.open(Q,b);else{if(-1!==z.indexOf("file:")){const I=decodeURIComponent(z.substring(5).toLowerCase());if(h.FilesToLoad[I]&&"undefined"!==typeof URL){try{let E;try{E=URL.createObjectURL(h.FilesToLoad[I])}catch(y){E=URL.createObjectURL(h.FilesToLoad[I])}K.src=E,Z=!0}catch(d){K.src=""}return K}}b()}return K},Q=(I,E,j,e,w)=>{const h=new FileReader,t={onCompleteObservable:new z.e,abort:()=>h.abort()};return h.onloadend=()=>t.onCompleteObservable.notifyObservers(t),w&&(h.onerror=()=>{w(new X(`Unable to read ${I.name}`,I))}),h.onload=I=>{E(I.target.result)},j&&(h.onprogress=j),e?h.readAsArrayBuffer(I):h.readAsText(I),t},G=(I,E,j,e,w,U,R)=>{if(I.name)return Q(I,E,j,w,U?I=>{U(void 0,I)}:void 0);const P=I;if(-1!==P.indexOf("file:")){let I=decodeURIComponent(P.substring(5).toLowerCase());0===I.indexOf("./")&&(I=I.substring(2));const e=h.FilesToLoad[I];if(e)return Q(e,E,j,w,U?I=>U(void 0,new F(I.message,I.file)):void 0)}const{match:c,type:K}=i(P);if(c){const I={onCompleteObservable:new z.e,abort:()=>()=>{}};try{const I=w?r(P):n(P);E(I,void 0,K)}catch(t){U?U(void 0,t):o.b.Error(t.message||"Failed to parse the Data URL")}return Z.b.SetImmediate((()=>{I.onCompleteObservable.notifyObservers(I)})),I}return y(P,((I,j)=>{E(I,null===j||void 0===j?void 0:j.responseURL,null===j||void 0===j?void 0:j.getResponseHeader("content-type"))}),j,e,w,U?I=>{U(I.request,new F(I.message,I.request))}:void 0,R)},y=(I,E,j,h,t,U,R)=>{I=q.CleanUrl(I),I=q.PreprocessUrl(I);const P=q.BaseUrl+I;let Z=!1;const c={onCompleteObservable:new z.e,abort:()=>Z=!0},K=()=>{let I,z=new e.c,h=null;const K=()=>{z&&(j&&z.removeEventListener("progress",j),I&&z.removeEventListener("readystatechange",I),z.removeEventListener("loadend",L))};let L=()=>{K(),c.onCompleteObservable.notifyObservers(c),c.onCompleteObservable.clear(),j=void 0,I=null,L=null,U=void 0,R=void 0,E=void 0};c.abort=()=>{Z=!0,L&&L(),z&&z.readyState!==(XMLHttpRequest.DONE||4)&&z.abort(),null!==h&&(clearTimeout(h),h=null),z=null};const F=I=>{const E=I.message||"Unknown error";U&&z?U(new C(E,z)):o.b.Error(E)},X=o=>{if(z){if(z.open("GET",P),R)try{R(z)}catch(c){return void F(c)}t&&(z.responseType="arraybuffer"),j&&z.addEventListener("progress",j),L&&z.addEventListener("loadend",L),I=()=>{if(!Z&&z&&z.readyState===(XMLHttpRequest.DONE||4)){if(I&&z.removeEventListener("readystatechange",I),z.status>=200&&z.status<300||0===z.status&&(!(0,w.j)()||a())){const I=t?z.response:z.responseText;if(null!==I){try{E&&E(I,z)}catch(c){F(c)}return}}const j=q.DefaultRetryStrategy;if(j){const I=j(P,z,o);if(-1!==I)return K(),z=new e.c,void(h=setTimeout((()=>X(o+1)),I))}const R=new C("Error status: "+z.status+" "+z.statusText+" - Unable to load "+P,z);U&&U(R)}},z.addEventListener("readystatechange",I),z.send()}};X(0)};if(h&&h.enableSceneOffline){const e=I=>{I&&I.status>400?U&&U(I):K()},w=()=>{h&&h.loadFile(q.BaseUrl+I,(I=>{!Z&&E&&E(I),c.onCompleteObservable.notifyObservers(c)}),j?I=>{!Z&&j&&j(I)}:void 0,e,t)};h.open(w,e)}else K();return c},d=I=>{const{match:E,type:j}=i(I);if(E)return j||void 0;const e=I.lastIndexOf(".");switch(I.substring(e+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"de":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},a=()=>"undefined"!==typeof location&&"file:"===location.protocol,l=I=>L.test(I),i=I=>{const E=L.exec(I);if(null===E||0===E.length)return{match:!1,type:""};return{match:!0,type:E[0].replace("data:","").replace("base64,","")}};function r(I){return(0,U.b)(I.split(",")[1])}const n=I=>(0,U.f)(I.split(",")[1]);let H;K.c._FileToolsLoadImage=b,c.c.loadFile=G,R.q.loadFile=G;((I,E,j,e,w,z,h,t,U,R)=>{H={DecodeBase64UrlToBinary:I,DecodeBase64UrlToString:E,DefaultRetryStrategy:j.DefaultRetryStrategy,BaseUrl:j.BaseUrl,CorsBehavior:j.CorsBehavior,PreprocessUrl:j.PreprocessUrl,IsBase64DataUrl:e,IsFileURL:w,LoadFile:z,LoadImage:h,ReadFile:t,RequestFile:U,SetCorsBehavior:R},Object.defineProperty(H,"DefaultRetryStrategy",{get:function(){return j.DefaultRetryStrategy},set:function(I){j.DefaultRetryStrategy=I}}),Object.defineProperty(H,"BaseUrl",{get:function(){return j.BaseUrl},set:function(I){j.BaseUrl=I}}),Object.defineProperty(H,"PreprocessUrl",{get:function(){return j.PreprocessUrl},set:function(I){j.PreprocessUrl=I}}),Object.defineProperty(H,"CorsBehavior",{get:function(){return j.CorsBehavior},set:function(I){j.CorsBehavior=I}})})(r,n,q,l,a,G,b,Q,y,x)},11080:(I,E,j)=>{function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(I=>{const E=16*Math.random()|0;return("x"===I?E:3&E|8).toString(16)}))}j.d(E,{d:()=>e})},11065:(I,E,j)=>{j.d(E,{e:()=>z});var e=j(10974),w=j(11073);class z{static Instantiate(I){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[I])return this.RegisteredExternalClasses[I];const E=(0,w.e)(I);if(E)return E;e.b.Warn(I+" not found, you may have missed an import.");const j=I.split(".");let z=window||this;for(let e=0,w=j.length;e<w;e++)z=z[j[e]];return"function"!==typeof z?null:z}}z.RegisteredExternalClasses={}},10983:(I,E,j)=>{j.d(E,{e:()=>w});var e=j(10966);class w{static get Now(){return(0,e.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11012:(I,E,j)=>{j.d(E,{b:()=>h,f:()=>z,j:()=>e,m:()=>w});const e=I=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(I);let E="";for(let j=0;j<I.byteLength;j++)E+=String.fromCharCode(I[j]);return E},w=I=>{const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let j,e,w,z,h,t,U,R="",P=0;const o=ArrayBuffer.isView(I)?new Uint8Array(I.buffer,I.byteOffset,I.byteLength):new Uint8Array(I);for(;P<o.length;)j=o[P++],e=P<o.length?o[P++]:Number.NaN,w=P<o.length?o[P++]:Number.NaN,z=j>>2,h=(3&j)<<4|e>>4,t=(15&e)<<2|w>>6,U=63&w,isNaN(e)?t=U=64:isNaN(w)&&(U=64),R+=E.charAt(z)+E.charAt(h)+E.charAt(t)+E.charAt(U);return R},z=I=>atob(I),h=I=>{const E=z(I),j=E.length,e=new Uint8Array(new ArrayBuffer(j));for(let w=0;w<j;w++)e[w]=E.charCodeAt(w);return e.buffer}},11087:(I,E,j)=>{function e(I){let E=1;do{E*=2}while(E<I);return E===I}function w(I,E,j){return I*(1-j)+E*j}function z(I){const E=h(I),j=t(I);return E-I>I-j?j:E}function h(I){return I--,I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,I|=I>>16,++I}function t(I){return I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,(I|=I>>16)-(I>>1)}function U(I,E){let j;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:j=t(I);break;case 2:j=z(I);break;default:j=h(I)}return Math.min(j,E)}j.d(E,{e:()=>t,i:()=>U,k:()=>e,n:()=>w,q:()=>z})},10953:(I,E,j)=>{j.r(E),j.d(E,{AsyncLoop:()=>X,Tools:()=>F,className:()=>C});var e=j(10960),w=j(10966),z=j(10974),h=j(10978),t=j(10983),U=j(10986),R=j(10988),P=j(10993),o=j(11e3),Z=j(11031),c=j(11065),K=j(11080),L=j(11087);class F{static get BaseUrl(){return o.c.BaseUrl}static set BaseUrl(I){o.c.BaseUrl=I}static get CleanUrl(){return o.c.CleanUrl}static set CleanUrl(I){o.c.CleanUrl=I}static IsAbsoluteUrl(I){return 0===I.indexOf("//")||-1!==I.indexOf("://")&&(-1!==I.indexOf(".")&&(-1!==I.indexOf("/")&&(!(I.indexOf(":")>I.indexOf("/"))&&(I.indexOf("://")<I.indexOf(".")||(0===I.indexOf("data:")||0===I.indexOf("blob:"))))))}static set ScriptBaseUrl(I){o.c.ScriptBaseUrl=I}static get ScriptBaseUrl(){return o.c.ScriptBaseUrl}static set CDNBaseUrl(I){F.ScriptBaseUrl=I,F.AssetBaseUrl=I}static set ScriptPreprocessUrl(I){o.c.ScriptPreprocessUrl=I}static get ScriptPreprocessUrl(){return o.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return o.c.DefaultRetryStrategy}static set DefaultRetryStrategy(I){o.c.DefaultRetryStrategy=I}static get CorsBehavior(){return o.c.CorsBehavior}static set CorsBehavior(I){o.c.CorsBehavior=I}static get UseFallbackTexture(){return P.d.UseFallbackTexture}static set UseFallbackTexture(I){P.d.UseFallbackTexture=I}static get RegisteredExternalClasses(){return c.e.RegisteredExternalClasses}static set RegisteredExternalClasses(I){c.e.RegisteredExternalClasses=I}static get fallbackTexture(){return P.d.FallbackTexture}static set fallbackTexture(I){P.d.FallbackTexture=I}static FetchToRef(I,E,j,e,w,z){const h=4*((Math.abs(I)*j%j|0)+(Math.abs(E)*e%e|0)*j);z.r=w[h]/255,z.g=w[h+1]/255,z.b=w[h+2]/255,z.a=w[h+3]/255}static Mix(I,E,j){return 0}static Instantiate(I){return c.e.Instantiate(I)}static SetImmediate(I){Z.b.SetImmediate(I)}static IsExponentOfTwo(I){return!0}static FloatRound(I){return Math.fround(I)}static GetFilename(I){const E=I.lastIndexOf("/");return E<0?I:I.substring(E+1)}static GetFolderPath(I){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const j=I.lastIndexOf("/");return j<0?E?I:"":I.substring(0,j+1)}static ToDegrees(I){return 180*I/Math.PI}static ToRadians(I){return I*Math.PI/180}static SmoothAngleChange(I,E){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const e=this.ToRadians(I),w=this.ToRadians(E);return this.ToDegrees(Math.atan2((1-j)*Math.sin(w)+j*Math.sin(e),(1-j)*Math.cos(w)+j*Math.cos(e)))}static MakeArray(I,E){return!0===E||void 0!==I&&null!=I?Array.isArray(I)?I:[I]:null}static GetPointerPrefix(I){return(0,w.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(I,E){(0,o.t)(I,E)}static SetReferrerPolicyBehavior(I,E){E.referrerPolicy=I}static get PreprocessUrl(){return o.c.PreprocessUrl}static set PreprocessUrl(I){o.c.PreprocessUrl=I}static LoadImage(I,E,j,e,w,z){return(0,o.n)(I,E,j,e,w,z)}static LoadFile(I,E,j,e,w,z){return(0,o.m)(I,E,j,e,w,z)}static async LoadFileAsync(I){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((j,e)=>{(0,o.m)(I,(I=>{j(I)}),void 0,void 0,E,((I,E)=>{e(E)}))}))}static GetAssetUrl(I){if(!I)return"";if(F.AssetBaseUrl&&I.startsWith(F._DefaultAssetsUrl)){const E="/"===F.AssetBaseUrl[F.AssetBaseUrl.length-1]?F.AssetBaseUrl.substring(0,F.AssetBaseUrl.length-1):F.AssetBaseUrl;return I.replace(F._DefaultAssetsUrl,E)}return I}static GetBabylonScriptURL(I,E){if(!I)return"";if(F.ScriptBaseUrl&&I.startsWith(F._DefaultCdnUrl)){const E="/"===F.ScriptBaseUrl[F.ScriptBaseUrl.length-1]?F.ScriptBaseUrl.substring(0,F.ScriptBaseUrl.length-1):F.ScriptBaseUrl;I=I.replace(F._DefaultCdnUrl,E)}return I=F.ScriptPreprocessUrl(I),E&&(I=F.GetAbsoluteUrl(I)),I}static LoadBabylonScript(I,E,j,e){I=F.GetBabylonScriptURL(I),F.LoadScript(I,E,j)}static async LoadBabylonScriptAsync(I){return I=F.GetBabylonScriptURL(I),await F.LoadScriptAsync(I)}static LoadScript(I,E,j,e){let z=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(I),E&&E()}catch(U){null===j||void 0===j||j(`Unable to load script '${I}' in worker`,U)}return}if(!(0,w.j)())return void(null===j||void 0===j||j(`Cannot load script '${I}' outside of a window or a worker`));const h=document.getElementsByTagName("head")[0],t=document.createElement("script");z?(t.setAttribute("type","module"),t.innerText=I):(t.setAttribute("type","text/javascript"),t.setAttribute("src",I)),e&&(t.id=e),t.onload=()=>{E&&E()},t.onerror=E=>{j&&j(`Unable to load script '${I}'`,E)},h.appendChild(t)}static async LoadScriptAsync(I,E){return await new Promise(((j,e)=>{this.LoadScript(I,(()=>{j()}),((I,E)=>{e(E||new Error(I))}),E)}))}static ReadFileAsDataURL(I,E,j){const w=new FileReader,z={onCompleteObservable:new e.e,abort:()=>w.abort()};return w.onloadend=()=>{z.onCompleteObservable.notifyObservers(z)},w.onload=I=>{E(I.target.result)},w.onprogress=j,w.readAsDataURL(I),z}static ReadFile(I,E,j,e,w){return(0,o.o)(I,E,j,e,w)}static FileAsURL(I){const E=new Blob([I]);return window.URL.createObjectURL(E)}static Format(I){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return I.toFixed(E)}static DeepCopy(I,E,j,e){h.e.DeepCopy(I,E,j,e)}static IsEmpty(I){for(const E in I)if(Object.prototype.hasOwnProperty.call(I,E))return!1;return!0}static RegisterTopRootEvents(I,E){for(let e=0;e<E.length;e++){const w=E[e];I.addEventListener(w.name,w.handler,!1);try{window.parent&&window.parent.addEventListener(w.name,w.handler,!1)}catch(j){}}}static UnregisterTopRootEvents(I,E){for(let e=0;e<E.length;e++){const w=E[e];I.removeEventListener(w.name,w.handler);try{I.parent&&I.parent.removeEventListener(w.name,w.handler)}catch(j){}}}static async DumpFramebuffer(I,E,j,e){throw(0,U.b)("DumpTools")}static DumpData(I,E,j,e){throw(0,U.b)("DumpTools")}static async DumpDataAsync(I,E,j){throw(0,U.b)("DumpTools")}static _IsOffScreenCanvas(I){return void 0!==I.convertToBlob}static ToBlob(I,E){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",e=arguments.length>3?arguments[3]:void 0;F._IsOffScreenCanvas(I)||I.toBlob||(I.toBlob=function(I,E,j){setTimeout((()=>{const e=atob(this.toDataURL(E,j).split(",")[1]),w=e.length,z=new Uint8Array(w);for(let I=0;I<w;I++)z[I]=e.charCodeAt(I);I(new Blob([z]))}))}),F._IsOffScreenCanvas(I)?I.convertToBlob({type:j,quality:e}).then((I=>E(I))):I.toBlob((function(I){E(I)}),j,e)}static DownloadBlob(I,E){if("download"in document.createElement("a")){if(!E){const I=new Date;E="screenshot_"+((I.getFullYear()+"-"+(I.getMonth()+1)).slice(2)+"-"+I.getDate()+"_"+I.getHours()+"-"+("0"+I.getMinutes()).slice(-2))+".png"}F.Download(I,E)}else if(I&&"undefined"!==typeof URL){const E=URL.createObjectURL(I),j=window.open("");if(!j)return;const e=j.document.createElement("img");e.onload=function(){URL.revokeObjectURL(E)},e.src=E,j.document.body.appendChild(e)}}static EncodeScreenshotCanvasData(I,E){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",e=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0;if("string"!==typeof e&&E){if(E){if(F._IsOffScreenCanvas(I))return void I.convertToBlob({type:j,quality:w}).then((I=>{const j=new FileReader;j.readAsDataURL(I),j.onloadend=()=>{const I=j.result;E(I)}}));const e=I.toDataURL(j,w);E(e)}}else this.ToBlob(I,(function(I){I&&F.DownloadBlob(I,e),E&&E("")}),j,w)}static Download(I,E){if("undefined"===typeof URL)return;const j=window.URL.createObjectURL(I),e=document.createElement("a");document.body.appendChild(e),e.style.display="none",e.href=j,e.download=E,e.addEventListener("click",(()=>{e.parentElement&&e.parentElement.removeChild(e)})),e.click(),window.URL.revokeObjectURL(j)}static BackCompatCameraNoPreventDefault(I){return"boolean"===typeof I[0]?I[0]:"boolean"===typeof I[1]&&I[1]}static CreateScreenshot(I,E,j,e){throw(0,U.b)("ScreenshotTools")}static async CreateScreenshotAsync(I,E,j){throw(0,U.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(I,E,j,e){throw(0,U.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(I,E,j){throw(0,U.b)("ScreenshotTools")}static RandomId(){return(0,K.d)()}static IsBase64(I){return(0,o.f)(I)}static DecodeBase64(I){return(0,o.b)(I)}static get errorsCount(){return z.b.errorsCount}static Log(I){z.b.Log(I)}static Warn(I){z.b.Warn(I)}static Error(I){z.b.Error(I)}static get LogCache(){return z.b.LogCache}static ClearLogCache(){z.b.ClearLogCache()}static set LogLevels(I){z.b.LogLevels=I}static set PerformanceLogLevel(I){return(I&F.PerformanceUserMarkLogLevel)===F.PerformanceUserMarkLogLevel?(F.StartPerformanceCounter=F._StartUserMark,void(F.EndPerformanceCounter=F._EndUserMark)):(I&F.PerformanceConsoleLogLevel)===F.PerformanceConsoleLogLevel?(F.StartPerformanceCounter=F._StartPerformanceConsole,void(F.EndPerformanceCounter=F._EndPerformanceConsole)):(F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,void(F.EndPerformanceCounter=F._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(I,E){}static _EndPerformanceCounterDisabled(I,E){}static _StartUserMark(I){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!F._Performance){if(!(0,w.j)())return;F._Performance=window.performance}E&&F._Performance.mark&&F._Performance.mark(I+"-Begin")}static _EndUserMark(I){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&F._Performance.mark&&(F._Performance.mark(I+"-End"),F._Performance.measure(I,I+"-Begin",I+"-End"))}static _StartPerformanceConsole(I){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(F._StartUserMark(I,E),console.time&&console.time(I))}static _EndPerformanceConsole(I){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(F._EndUserMark(I,E),console.timeEnd(I))}static get Now(){return t.e.Now}static GetClassName(I){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=null;if(!E&&I.getClassName)j=I.getClassName();else{if(I instanceof Object){j=(E?I:Object.getPrototypeOf(I)).constructor.__bjsclassName__}j||(j=typeof I)}return j}static First(I,E){for(const j of I)if(E(j))return j;return null}static getFullClassName(I){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=null,e=null;if(!E&&I.getClassName)j=I.getClassName();else{if(I instanceof Object){const w=E?I:Object.getPrototypeOf(I);j=w.constructor.__bjsclassName__,e=w.constructor.__bjsmoduleName__}j||(j=typeof I)}return j?(null!=e?e+".":"")+j:null}static async DelayAsync(I){await new Promise((E=>{setTimeout((()=>{E()}),I)}))}static IsSafari(){return!!(0,w.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function C(I,E){return j=>{j.__bjsclassName__=I,j.__bjsmoduleName__=null!=E?E:null}}F.AssetBaseUrl="",F.UseCustomRequestHeaders=!1,F.CustomRequestHeaders=R.c.CustomRequestHeaders,F.GetDOMTextContent=w.d,F._DefaultCdnUrl="https://cdn.babylonjs.com",F._DefaultAssetsUrl="https://assets.babylonjs.com/core",F.GetAbsoluteUrl="object"===typeof document?I=>{const E=document.createElement("a");return E.href=I,E.href}:"function"===typeof URL&&"object"===typeof location?I=>new URL(I,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},F.NoneLogLevel=z.b.NoneLogLevel,F.MessageLogLevel=z.b.MessageLogLevel,F.WarningLogLevel=z.b.WarningLogLevel,F.ErrorLogLevel=z.b.ErrorLogLevel,F.AllLogLevel=z.b.AllLogLevel,F.IsWindowObjectExist=w.j,F.PerformanceNoneLogLevel=0,F.PerformanceUserMarkLogLevel=1,F.PerformanceConsoleLogLevel=2,F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,F.EndPerformanceCounter=F._EndPerformanceCounterDisabled;class X{constructor(I,E,j){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=I,this.index=e-1,this._done=!1,this._fn=E,this._successCallback=j}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(I,E,j){const e=new X(I,E,j,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return e.executeNext(),e}static SyncAsyncForLoop(I,E,j,e,w){let z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return X.Run(Math.ceil(I/E),(e=>{w&&w()?e.breakLoop():setTimeout((()=>{for(let z=0;z<E;++z){const h=e.index*E+z;if(h>=I)break;if(j(h),w&&w()){e.breakLoop();break}}e.executeNext()}),z)}),e)}}F.Mix=L.n,F.IsExponentOfTwo=L.k,P.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11073:(I,E,j)=>{j.d(E,{e:()=>z,h:()=>w});const e={};function w(I,E){e[I]=E}function z(I){return e[I]}},10988:(I,E,j)=>{j.d(E,{c:()=>e});class e{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(e.CustomRequestHeaders).length>0||e.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const I in e.CustomRequestHeaders){const E=e.CustomRequestHeaders[I];E&&this._xhr.setRequestHeader(I,E)}}_shouldSkipRequestModifications(I){return e.SkipRequestModificationForBabylonCDN&&(I.includes("preview.babylonjs.com")||I.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(I){this._xhr.onprogress=I}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(I){this._xhr.responseType=I}get timeout(){return this._xhr.timeout}set timeout(I){this._xhr.timeout=I}addEventListener(I,E,j){this._xhr.addEventListener(I,E,j)}removeEventListener(I,E,j){this._xhr.removeEventListener(I,E,j)}abort(){this._xhr.abort()}send(I){e.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(I)}open(I,E){for(const j of e.CustomRequestModifiers){if(this._shouldSkipRequestModifications(E))return;E=j(this._xhr,E)||E}E=(E=E.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=E,this._xhr.open(I,E,!0)}setRequestHeader(I,E){this._xhr.setRequestHeader(I,E)}getResponseHeader(I){return this._xhr.getResponseHeader(I)}}e.CustomRequestHeaders={},e.CustomRequestModifiers=new Array,e.SkipRequestModificationForBabylonCDN=!0}}]);