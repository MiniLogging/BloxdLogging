"use strict";(self["5dou0t7wntc"]=self["5dou0t7wntc"]||[]).push([[8],{11597:(K,O,F)=>{F.d(O,{c:()=>Z});var f=F(11559),r=F(11534),l=F(11603),q=F(11629),J=F(11541);class c{constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,K&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(K){this._zOffset!==K&&(this._zOffset=K,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(K){this._zOffsetUnits!==K&&(this._zOffsetUnits=K,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(K){this._cullFace!==K&&(this._cullFace=K,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(K){this._cull!==K&&(this._cull=K,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(K){this._depthFunc!==K&&(this._depthFunc=K,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(K){this._depthMask!==K&&(this._depthMask=K,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(K){this._depthTest!==K&&(this._depthTest=K,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(K){this._frontFace!==K&&(this._frontFace=K,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(K){this.isDirty&&(this._isCullDirty&&(this.cull?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(K.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(K.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(K.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(K.enable(K.POLYGON_OFFSET_FILL),K.polygonOffset(this.zOffset,this.zOffsetUnits)):K.disable(K.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(K.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class E{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(K){this._func!==K&&(this._func=K,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(K){this._funcRef!==K&&(this._funcRef=K,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(K){this._funcMask!==K&&(this._funcMask=K,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(K){this._opStencilFail!==K&&(this._opStencilFail=K,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(K){this._opDepthFail!==K&&(this._opDepthFail=K,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(K){this._opStencilDepthPass!==K&&(this._opStencilDepthPass=K,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(K){this._mask!==K&&(this._mask=K,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(K){this._enabled!==K&&(this._enabled=K,this._isStencilTestDirty=!0)}constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,K&&this.reset()}reset(){var K;this.stencilMaterial=void 0,null===(K=this.stencilGlobal)||void 0===K||K.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(K){var O;if(!K)return;const F=!this.useStencilGlobalOnly&&!(null===(O=this.stencilMaterial)||void 0===O||!O.enabled);this.enabled=F?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=F?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=F?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=F?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=F?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=F?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=F?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=F?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(K.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(K.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(K.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class M{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=M.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=M.KEEP,this.opDepthFail=M.KEEP,this.opStencilDepthPass=M.REPLACE}get stencilFunc(){return this.func}set stencilFunc(K){this.func=K}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(K){this.funcRef=K}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(K){this.funcMask=K}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(K){this.opStencilFail=K}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(K){this.opDepthFail=K}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(K){this.opStencilDepthPass=K}get stencilMask(){return this.mask}set stencilMask(K){this.mask=K}get stencilTest(){return this.enabled}set stencilTest(K){this.enabled=K}}M.ALWAYS=519,M.KEEP=7680,M.REPLACE=7681;class t{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(K){this._alphaBlend!==K&&(this._alphaBlend=K,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(K,O,F,f){this._blendConstants[0]===K&&this._blendConstants[1]===O&&this._blendConstants[2]===F&&this._blendConstants[3]===f||(this._blendConstants[0]=K,this._blendConstants[1]=O,this._blendConstants[2]=F,this._blendConstants[3]=f,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(K,O,F,f){this._blendFunctionParameters[0]===K&&this._blendFunctionParameters[1]===O&&this._blendFunctionParameters[2]===F&&this._blendFunctionParameters[3]===f||(this._blendFunctionParameters[0]=K,this._blendFunctionParameters[1]=O,this._blendFunctionParameters[2]=F,this._blendFunctionParameters[3]=f,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(K,O){this._blendEquationParameters[0]===K&&this._blendEquationParameters[1]===O||(this._blendEquationParameters[0]=K,this._blendEquationParameters[1]=O,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(K){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?K.enable(K.BLEND):K.disable(K.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(K.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(K.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(K.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var j=F(11546),X=F(11636),u=F(11530),T=F(11523),o=F(11579),k=F(11649);function N(K,O){if((0,u.k)()){const{requestAnimationFrame:F}=O||window;if("function"===typeof F)return F(K)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(K);return setTimeout(K,16)}class Z{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(K){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(K){K!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=K,this._depthCullingState.depthFunc=K?518:515)}setColorWrite(K){K!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=K)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(K){if(K)return this.isNDCHalfZRange?K.IS_NDC_HALF_ZRANGE="":delete K.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?K.USE_REVERSE_DEPTHBUFFER="":delete K.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?K.USE_EXACT_SRGB_CONVERSIONS="":delete K.USE_EXACT_SRGB_CONVERSIONS);{let K="";return this.isNDCHalfZRange&&(K+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(K&&(K+="\n"),K+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(K&&(K+="\n"),K+="#define USE_EXACT_SRGB_CONVERSIONS"),K}}_rebuildInternalTextures(){const K=this._internalTexturesCache.slice();for(const O of K)O._rebuild()}_rebuildRenderTargetWrappers(){const K=this._renderTargetWrapperCache.slice();for(const O of K)O._rebuild()}_rebuildEffects(){for(const K in this._compiledEffects){const O=this._compiledEffects[K];O._pipelineContext=null,O._prepareEffect()}l.Effect.ResetCache()}_rebuildGraphicsResources(){var K;this.wipeCaches(!0),this._rebuildEffects(),null===(K=this._rebuildComputeEffects)||void 0===K||K.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){r.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(K){setTimeout((()=>{this._clearEmptyResources();const O=this._depthCullingState.depthTest,F=this._depthCullingState.depthFunc,f=this._depthCullingState.depthMask,r=this._stencilState.stencilTest;K(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=O,this._depthCullingState.depthFunc=F,this._depthCullingState.depthMask=f,this._stencilState.stencilTest=r,this._flagContextRestored()}),0)}get M(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(K){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(K){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const K=new Uint8Array(4),O=[K,K,K,K,K,K];this._emptyCubeTexture=this.createRawCubeTexture(O,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(K){if(!K)return this._activeRenderLoops.length=0,void this._cancelFrame();const O=this._activeRenderLoops.indexOf(K);O>=0&&(this._activeRenderLoops.splice(O,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const K=this._frameHandler;if(this._frameHandler=0,(0,u.k)()){const{cancelAnimationFrame:O}=this.getHostWindow()||window;if("function"===typeof O)return O(K)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(K);return clearTimeout(K)}}af(){this.onBeginFrameObservable.notifyObservers(this)}Hf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(K){this._maxFPS=K,void 0!==K&&(this._minFrameTime=K<=0?Number.MAX_VALUE:1e3/K)}_isOverFrameTime(K){if(!K||void 0===this._maxFPS)return!1;const O=K-this._lastFrameTime;return this._lastFrameTime=K,this._renderAccumulator+=O,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(K){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(K)){let K=!0;(this.M||!this.renderEvenInBackground&&this._windowIsBackground)&&(K=!1),K&&(this.af(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Hf())}}_renderLoop(K){this._processFrame(K),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let K=0;K<this._activeRenderLoops.length;K++){(0,this._activeRenderLoops[K])()}}_renderViews(){return!1}_queueNewFrame(K,O){return N(K,O)}runRenderLoop(K){-1===this._activeRenderLoops.indexOf(K)&&(this._activeRenderLoops.push(K),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(K){this._depthCullingState.depthTest=K}setZOffset(K){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-K:K}getZOffset(){const K=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-K:K}setZOffsetUnits(K){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-K:K}getZOffsetUnits(){const K=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-K:K}getHostWindow(){return(0,u.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(K){this._compatibilityMode=!0}_rebuildTextures(){for(const K of this.scenes)K._rebuildTextures();for(const K of this._virtualScenes)K._rebuildTextures()}_releaseRenderTargetWrapper(K){const O=this._renderTargetWrapperCache.indexOf(K);-1!==O&&this._renderTargetWrapperCache.splice(O,1)}get currentViewport(){return this._cachedViewport}setViewport(K,O,F){const f=O||this.getRenderWidth(),r=F||this.getRenderHeight(),l=K.x||0,q=K.y||0;this._cachedViewport=K,this._viewport(l*f,q*r,f*K.width,r*K.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(K){return new Path2D(K)}get description(){let K=this.name+this.version;return this._caps.parallelShaderCompile&&(K+=" - Parallel shader compilation"),K}_createTextureBase(K,O,F,l){let q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,E=arguments.length>7?arguments[7]:void 0,M=arguments.length>8?arguments[8]:void 0,t=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,j=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,T=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,o=arguments.length>13?arguments[13]:void 0,N=arguments.length>14?arguments[14]:void 0,L=arguments.length>15?arguments[15]:void 0;const d="data:"===(K=K||"").substring(0,5),a="blob:"===K.substring(0,5),g=d&&-1!==K.indexOf(";base64,"),H=j||new X.e(this,1);H!==j&&(H.label=K.substring(0,60));const e=K;!this._transformTextureUrl||g||j||t||(K=this._transformTextureUrl(K)),e!==K&&(H._originalUrl=e);const W=K.lastIndexOf(".");let p=T||(W>-1?K.substring(W).toLowerCase():"");p.indexOf("?")>-1&&(p=p.split("?")[0]);const y=(0,k.d)(p,o);l&&l.addPendingData(H),H.url=K,H.generateMipMaps=!O,H.samplingMode=q,H.invertY=F,H._useSRGBBuffer=this._getUseSRGBBuffer(!!L,O),this._doNotHandleContextLost||(H._buffer=t);let A=null;J&&!j&&(A=H.onLoadedObservable.add(J)),j||this._internalTexturesCache.push(H);const Q=(F,j)=>{l&&l.removePendingData(H),K===e?(A&&H.onLoadedObservable.remove(A),f.e.UseFallbackTexture&&K!==f.e.FallbackTexture&&this._createTextureBase(f.e.FallbackTexture,O,H.invertY,l,q,null,c,E,M,t,H),F=(F||"Unknown error")+(f.e.UseFallbackTexture?" - Fallback texture was used":""),H.onErrorObservable.notifyObservers({message:F,exception:j}),c&&c(F,j)):(r.c.Warn(`Failed to load ${K}, falling back to ${e}`),this._createTextureBase(e,O,H.invertY,l,q,J,c,E,M,t,H,u,T,o,N,L))};if(y){const O=async K=>{(await y).loadData(K,H,((K,O,F,f,r,J)=>{J?Q("TextureLoader failed to load data"):E(H,p,l,{width:K,height:O},H.invertY,!F,f,(()=>(r(),!1)),q)}),N)};t?t instanceof ArrayBuffer?O(new Uint8Array(t)):ArrayBuffer.isView(t)?O(t):c&&c("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(K,(K=>{O(new Uint8Array(K))}),void 0,l?l.offlineProvider:void 0,!0,((K,O)=>{Q("Unable to load "+(K&&K.responseURL,O))}))}else{const F=K=>{a&&!this._doNotHandleContextLost&&(H._buffer=K),E(H,p,l,K,H.invertY,O,!1,M,q)};!d||g?t&&("string"===typeof t.decoding||t.close)?F(t):Z._FileToolsLoadImage(K||"",F,Q,l?l.offlineProvider:null,o,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof t||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Blob?Z._FileToolsLoadImage(t,F,Q,l?l.offlineProvider:null,o,H.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):t&&F(t)}return H}_rebuildBuffers(){for(const K of this._uniformBuffers)K._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,u.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const K in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,K)&&(this._boundTexturesCache[K]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(K){this._name=K}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(K){this._hardwareScalingLevel=K,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(K){this._doNotHandleContextLost=K}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(K,O,F){var r,l;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new c,this._stencilStateComposer=new E,this._stencilState=new M,this._alphaState=new t,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new T.c,this.onCanvasFocusObservable=new T.c,this.onNewSceneAddedObservable=new T.c,this.onResizeObservable=new T.c,this.onCanvasPointerOutObservable=new T.c,this.onEffectErrorObservable=new T.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new T.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=K=>this._renderLoop(K),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new T.c,this.onAfterShaderCompilationObservable=new T.c,this.onBeginFrameObservable=new T.c,this.onEndFrameObservable=new T.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new T.c,this.onContextRestoredObservable=new T.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Wf=new T.c,this.onReleaseEffectsObservable=new T.c,f.e.Instances.push(this),this.startTime=J.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,q.e.SetMatrixPrecision(!!O.useHighPrecisionMatrix),(0,u.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=F??!1,O.antialias=K??O.antialias,O.deterministicLockstep=O.deterministicLockstep??!1,O.lockstepMaxSteps=O.lockstepMaxSteps??4,O.timeStep=O.timeStep??1/60,O.stencil=O.stencil??!0,this._audioContext=(null===(r=O.audioEngineOptions)||void 0===r?void 0:r.audioContext)??null,this._audioDestination=(null===(l=O.audioEngineOptions)||void 0===l?void 0:l.audioDestination)??null,this.premultipliedAlpha=O.premultipliedAlpha??!0,this._doNotHandleContextLost=!!O.doNotHandleContextLost,this._isStencilEnable=!!O.stencil,this.useExactSrgbConversions=O.useExactSrgbConversions??!1;const j=(0,u.k)()&&window.devicePixelRatio||1,X=O.limitDeviceRatio||j;F=F||O.adaptToDeviceRatio||!1,this._hardwareScalingLevel=F?1/Math.min(X,j):1,this._lastDevicePixelRatio=j,this._creationOptions=O}resize(){let K,O,F=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const K=(0,u.k)()&&window.devicePixelRatio||1,O=this._lastDevicePixelRatio/K;this._lastDevicePixelRatio=K,this._hardwareScalingLevel*=O}if((0,u.k)()&&(0,u.g)())if(this._renderingCanvas){var f,r;const F=null===(f=(r=this._renderingCanvas).getBoundingClientRect)||void 0===f?void 0:f.call(r);K=this._renderingCanvas.clientWidth||(null===F||void 0===F?void 0:F.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,O=this._renderingCanvas.clientHeight||(null===F||void 0===F?void 0:F.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else K=window.innerWidth,O=window.innerHeight;else K=this._renderingCanvas?this._renderingCanvas.width:100,O=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(K/this._hardwareScalingLevel,O/this._hardwareScalingLevel,F)}setSize(K,O){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(K|=0,O|=0,!F&&this._renderingCanvas.width===K&&this._renderingCanvas.height===O)return!1;if(this._renderingCanvas.width=K,this._renderingCanvas.height=O,this.scenes){for(let K=0;K<this.scenes.length;K++){const O=this.scenes[K];for(let K=0;K<O.cameras.length;K++){O.cameras[K]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(K,O,F,f,r,l,q,J,c,E,M){throw(0,j.d)("engine.rawTexture")}createRawCubeTexture(K,O,F,f,r,l,q,J){throw(0,j.d)("engine.rawTexture")}createRawTexture3D(K,O,F,f,r,l,q,J,c,E,M){throw(0,j.d)("engine.rawTexture")}createRawTexture2DArray(K,O,F,f,r,l,q,J,c,E,M){throw(0,j.d)("engine.rawTexture")}_sharedInit(K){this._renderingCanvas=K}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const K=navigator.userAgent;this.hostInformation.isMobile=-1!==K.indexOf("Mobile")||-1!==K.indexOf("Mac")&&(0,u.g)()&&"ontouchend"in document},this._checkForMobile(),(0,u.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(K){return document.createElement("video")}_reportDrawCall(){var K;let O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(K=this._drawCalls)||void 0===K||K.addCount(O,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(K,O){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(K,O){return createImageBitmap(K,O)}resizeImageBitmap(K,O,F){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(K){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(K,O){if("undefined"===typeof document)return new OffscreenCanvas(K,O);const F=document.createElement("canvas");return F.width=K,F.height=O,F}createCanvas(K,O){return Z._CreateCanvas(K,O)}static _FileToolsLoadImage(K,O,F,f,r,l,q){throw(0,j.d)("FileTools")}_loadFile(K,O,F,f,r,l){const q=(0,o.k)(K,O,F,f,r,l);return this._activeRequests.push(q),q.onCompleteObservable.add((()=>{const K=this._activeRequests.indexOf(q);-1!==K&&this._activeRequests.splice(K,1)})),q}static _FileToolsLoadFile(K,O,F,f,r,l){if(o.e.loadFile)return o.e.loadFile(K,O,F,f,r,l);throw(0,j.d)("FileTools")}dispose(){var K;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(K=this.releaseComputeEffects)||void 0===K||K.call(this),l.Effect.ResetCache();for(const F of this._activeRequests)F.abort();this._boundRenderFunction=null,this.Wf.notifyObservers(this),this.Wf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,u.k)()&&window.removeEventListener("resize",this._checkForMobile);const O=f.e.Instances.indexOf(this);O>=0&&f.e.Instances.splice(O,1),f.e.Instances.length||(f.e.OnEnginesDisposedObservable.notifyObservers(this),f.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(K){throw(0,j.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(K,O){for(let F=0;F<f.e.Instances.length;F++){const r=f.e.Instances[F];for(let F=0;F<r.scenes.length;F++)r.scenes[F].markAllMaterialsAsDirty(K,O)}}}Z._RenderPassIdCounter=0,Z._RescalePostProcessFactory=null,Z.CollisionsEpsilon=.001,Z.QueueNewFrame=N},11559:(K,O,F)=>{F.d(O,{e:()=>r});var f=F(11523);class r{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}r.Instances=[],r.OnEnginesDisposedObservable=new f.c,r._LastCreatedScene=null,r.UseFallbackTexture=!0,r.FallbackTexture=""},11629:(K,O,F)=>{F.d(O,{e:()=>f});class f{static SetMatrixPrecision(K){if(f.MatrixTrackPrecisionChange=!1,K&&!f.MatrixUse64Bits&&f.MatrixTrackedMatrices)for(let O=0;O<f.MatrixTrackedMatrices.length;++O){const K=f.MatrixTrackedMatrices[O],F=K.pf;K.pf=new Array(16);for(let O=0;O<16;++O)K.pf[O]=F[O]}f.MatrixUse64Bits=K,f.MatrixCurrentType=f.MatrixUse64Bits?Array:Float32Array,f.MatrixTrackedMatrices=null}}f.MatrixUse64Bits=!1,f.MatrixTrackPrecisionChange=!0,f.MatrixCurrentType=Float32Array,f.MatrixTrackedMatrices=[]},11649:(K,O,F)=>{F.d(O,{d:()=>q});var f=F(11534);const r=new Map;function l(K,O){(function(K){return r.delete(K)})(K)&&f.c.Warn(`Extension with the name '${K}' already exists`),r.set(K,O)}function q(K,O){"image/ktx"!==O&&"image/ktx2"!==O||(K=".ktx"),r.has(K)||(K.endsWith(".ies")&&l(".ies",(async()=>await F.e(15).then(F.bind(F,14151)).then((K=>new K._IESTextureLoader)))),K.endsWith(".dds")&&l(".dds",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(28)]).then(F.bind(F,14160)).then((K=>new K._DDSTextureLoader)))),K.endsWith(".basis")&&l(".basis",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(47)]).then(F.bind(F,14173)).then((K=>new K._BasisTextureLoader)))),K.endsWith(".env")&&l(".env",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(23),F.e(21),F.e(45),F.e(48)]).then(F.bind(F,14175)).then((K=>new K._ENVTextureLoader)))),K.endsWith(".hdr")&&l(".hdr",(async()=>await Promise.all([F.e(14),F.e(49)]).then(F.bind(F,14184)).then((K=>new K._HDRTextureLoader)))),(K.endsWith(".ktx")||K.endsWith(".ktx2"))&&(l(".ktx",(async()=>await F.e(30).then(F.bind(F,14193)).then((K=>new K._KTXTextureLoader)))),l(".ktx2",(async()=>await F.e(30).then(F.bind(F,14193)).then((K=>new K._KTXTextureLoader))))),K.endsWith(".tga")&&l(".tga",(async()=>await F.e(50).then(F.bind(F,14198)).then((K=>new K._TGATextureLoader)))),K.endsWith(".exr")&&l(".exr",(async()=>await F.e(16).then(F.bind(F,14203)).then((K=>new K._ExrTextureLoader)))));const f=r.get(K);return f?Promise.resolve(f(O)):null}},11636:(K,O,F)=>{F.d(O,{e:()=>q});var f,r=F(11523),l=F(11643);!function(K){K[K.Unknown=0]="Unknown",K[K.Url=1]="Url",K[K.Temp=2]="Temp",K[K.Raw=3]="Raw",K[K.Dynamic=4]="Dynamic",K[K.RenderTarget=5]="RenderTarget",K[K.MultiRenderTarget=6]="MultiRenderTarget",K[K.Cube=7]="Cube",K[K.CubeRaw=8]="CubeRaw",K[K.CubePrefiltered=9]="CubePrefiltered",K[K.Raw3D=10]="Raw3D",K[K.Raw2DArray=11]="Raw2DArray",K[K.DepthStencil=12]="DepthStencil",K[K.CubeRawRGBD=13]="CubeRawRGBD",K[K.Depth=14]="Depth"}(f||(f={}));class q extends l.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(K){this.generateMipMaps=K}get uniqueId(){return this._uniqueId}_setUniqueId(K){this._uniqueId=K}getEngine(){return this._engine}get source(){return this._source}constructor(K,O){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new r.c,this.onErrorObservable=new r.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=K,this._source=O,this._uniqueId=q._Counter++,F||(this._hardwareTexture=K._createHardwareTexture())}incrementReferences(){this._references++}updateSize(K,O){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,K,O,F),this.width=K,this.height=O,this.depth=F,this.baseWidth=K,this.baseHeight=O,this.baseDepth=F,this._size=K*O*F}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const K=this.onRebuildCallback(this),O=O=>{O._swapAndDie(this,!1),this.isReady=K.isReady};return void(K.isAsync?K.proxy.then(O):O(K.proxy))}let K;switch(this.source){case 2:case 12:case 14:break;case 1:return void(K=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(K=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:K=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),K._swapAndDie(this,!1),this.isReady=!0;break;case 10:K=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 11:K=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 4:K=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),K._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(K=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:K=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),K._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return K=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(K=>{K&&K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(K._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(K){var O;let F=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(O=this._hardwareTexture)||void 0===O||O.setUsage(K._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),K._hardwareTexture=this._hardwareTexture,F&&(K._isRGBD=this._isRGBD),this._lodTextureHigh&&(K._lodTextureHigh&&K._lodTextureHigh.dispose(),K._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(K._lodTextureMid&&K._lodTextureMid.dispose(),K._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(K._lodTextureLow&&K._lodTextureLow.dispose(),K._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(K._irradianceTexture&&K._irradianceTexture.dispose(),K._irradianceTexture=this._irradianceTexture);const f=this._engine.getLoadedTexturesCache();let r=f.indexOf(this);-1!==r&&f.splice(r,1),r=f.indexOf(K),-1===r&&f.push(K)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}q._Counter=0},11643:(K,O,F)=>{F.d(O,{d:()=>f});class f{get wrapU(){return this._cachedWrapU}set wrapU(K){this._cachedWrapU=K}get wrapV(){return this._cachedWrapV}set wrapV(K){this._cachedWrapV=K}get wrapR(){return this._cachedWrapR}set wrapR(K){this._cachedWrapR=K}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(K){this._cachedAnisotropicFilteringLevel=K}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(K){this._comparisonFunction=K}get useMipMaps(){return this._useMipMaps}set useMipMaps(K){this._useMipMaps=K}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=K,this._cachedWrapV=O,this._cachedWrapR=F,this._cachedAnisotropicFilteringLevel=f,this.samplingMode=r,this._comparisonFunction=l,this}compareSampler(K){return this._cachedWrapU===K._cachedWrapU&&this._cachedWrapV===K._cachedWrapV&&this._cachedWrapR===K._cachedWrapR&&this._cachedAnisotropicFilteringLevel===K._cachedAnisotropicFilteringLevel&&this.samplingMode===K.samplingMode&&this._comparisonFunction===K._comparisonFunction&&this._useMipMaps===K._useMipMaps}}},11539:(K,O,F)=>{F.d(O,{c:()=>l});var f=F(11534);const r=(K,O,F)=>K?K.getClassName&&"Mesh"===K.getClassName()?null:!K.getClassName||"SubMesh"!==K.getClassName()&&"PhysicsBody"!==K.getClassName()?K.clone?K.clone():Array.isArray(K)?K.slice():F&&"object"===typeof K?{...K}:null:K.clone(O):null;class l{static DeepCopy(K,O,F,l){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const J=function(K){const O=[];do{const F=Object.getOwnPropertyNames(K);for(const K of F)-1===O.indexOf(K)&&O.push(K)}while(K=Object.getPrototypeOf(K));return O}(K);for(const E of J){if("_"===E[0]&&(!l||-1===l.indexOf(E)))continue;if(E.endsWith("Observable"))continue;if(F&&-1!==F.indexOf(E))continue;const J=K[E],M=typeof J;if("function"!==M)try{if("object"===M)if(J instanceof Uint8Array)O[E]=Uint8Array.from(J);else if(J instanceof Array){if(O[E]=[],J.length>0)if("object"==typeof J[0])for(let K=0;K<J.length;K++){const F=r(J[K],O,q);-1===O[E].indexOf(F)&&O[E].push(F)}else O[E]=J.slice(0)}else O[E]=r(J,O,q);else O[E]=J}catch(c){f.c.Warn(c.message)}}}}},11567:(K,O,F)=>{F.d(O,{e:()=>f,g:()=>r,h:()=>l});class f extends Error{}f._setPrototypeOf=Object.setPrototypeOf||((K,O)=>(K.__proto__=O,K));const r={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class l extends f{constructor(K,O,F){super(K),this.errorCode=O,this.innerError=F,this.name="RuntimeError",f._setPrototypeOf(this,l.prototype)}}},11565:(K,O,F)=>{F.d(O,{e:()=>Q,i:()=>Z,m:()=>W,q:()=>y,w:()=>H,s:()=>o,z:()=>a,B:()=>g,F:()=>e,G:()=>L});var f=F(11550),r=F(11530),l=F(11523);class q{}q.FilesToLoad={};var J=F(11567),c=F(11569),E=F(11572),M=F(11559),t=F(11534),j=F(11588),X=F(11579),u=F(11597);const T=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class o extends J.h{constructor(K,O){super(K,J.g.LoadFileError),this.name="LoadFileError",J.e._setPrototypeOf(this,o.prototype),O instanceof f.e?this.request=O:this.file=O}}class k extends J.h{constructor(K,O){super(K,J.g.RequestFileError),this.request=O,this.name="RequestFileError",J.e._setPrototypeOf(this,k.prototype)}}class N extends J.h{constructor(K,O){super(K,J.g.ReadFileError),this.file=O,this.name="ReadFileError",J.e._setPrototypeOf(this,N.prototype)}}const Z={DefaultRetryStrategy:class{static ExponentialBackoff(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(F,f,r)=>0!==f.status||r>=K||-1!==F.indexOf("file:")?-1:Math.pow(2,r)*O}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:K=>K,ScriptBaseUrl:"",ScriptPreprocessUrl:K=>K,CleanUrl:K=>K=K.replace(/#/gm,"%23")},L=(K,O)=>{if((!K||0!==K.indexOf("data:"))&&Z.CorsBehavior)if("string"===typeof Z.CorsBehavior||Z.CorsBehavior instanceof String)O.crossOrigin=Z.CorsBehavior;else{const F=Z.CorsBehavior(K);F&&(O.crossOrigin=F)}},d={getRequiredSize:null},a=function(K,O,F,r){let l,J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",E=arguments.length>5?arguments[5]:void 0,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===t||void 0===t||!t._features.forceBitmapOverHTMLImageElement))return F("LoadImage is only supported in web or BabylonNative environments."),null;let j=!1;K instanceof ArrayBuffer||ArrayBuffer.isView(K)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(l=URL.createObjectURL(new Blob([K],{type:J})),j=!0):l=`data:${J};base64,`+(0,c.j)(K):K instanceof Blob?(l=URL.createObjectURL(K),j=!0):(l=Z.CleanUrl(K),l=Z.PreprocessUrl(l));const X=O=>{if(F){const f=l||K.toString();F(`Error while trying to load image: ${0===f.indexOf("http")||f.length<=128?f:f.slice(0,128)+"..."}`,O)}};if(null!==t&&void 0!==t&&t._features.forceBitmapOverHTMLImageElement)return H(l,(f=>{t.createImageBitmap(new Blob([f],{type:J}),{premultiplyAlpha:"none",...E}).then((K=>{O(K),j&&URL.revokeObjectURL(l)})).catch((O=>{F&&F("Error while trying to load image: "+K,O)}))}),void 0,r||void 0,!0,((K,O)=>{X(O)})),null;const u=new Image;if(d.getRequiredSize){const O=d.getRequiredSize(K);O.width&&(u.width=O.width),O.height&&(u.height=O.height)}L(l,u);const T=[],o=()=>{for(const K of T)K.target.removeEventListener(K.name,K.handler);T.length=0};T.push({target:u,name:"load",handler:()=>{o(),O(u),j&&u.src&&URL.revokeObjectURL(u.src)}}),T.push({target:u,name:"error",handler:K=>{o(),X(K),j&&u.src&&URL.revokeObjectURL(u.src)}}),T.push({target:document,name:"securitypolicyviolation",handler:K=>{if(K.blockedURI!==u.src||"Qf"===K.disposition)return;o();const O=new Error(`CSP violation of policy ${K.effectiveDirective} ${K.blockedURI}. Current policy is ${K.originalPolicy}`);M.e.UseFallbackTexture=!1,X(O),j&&u.src&&URL.revokeObjectURL(u.src),u.src=""}}),(()=>{for(const K of T)K.target.addEventListener(K.name,K.handler)})();const k="blob:"===l.substring(0,5),N="data:"===l.substring(0,5),a=()=>{k||N||!f.e.IsCustomRequestAvailable?u.src=l:H(l,((K,O,F)=>{const f=new Blob([K],{type:!J&&F?F:J}),r=URL.createObjectURL(f);j=!0,u.src=r}),void 0,r||void 0,!0,((K,O)=>{X(O)}))},g=()=>{r&&r.loadImage(l,u)};if(!k&&!N&&r&&r.enableTexturesOffline)r.open(g,a);else{if(-1!==l.indexOf("file:")){const K=decodeURIComponent(l.substring(5).toLowerCase());if(q.FilesToLoad[K]&&"undefined"!==typeof URL){try{let O;try{O=URL.createObjectURL(q.FilesToLoad[K])}catch(e){O=URL.createObjectURL(q.FilesToLoad[K])}u.src=O,j=!0}catch(W){u.src=""}return u}}a()}return u},g=(K,O,F,f,r)=>{const q=new FileReader,J={onCompleteObservable:new l.c,abort:()=>q.abort()};return q.onloadend=()=>J.onCompleteObservable.notifyObservers(J),r&&(q.onerror=()=>{r(new N(`Unable to read ${K.name}`,K))}),q.onload=K=>{O(K.target.result)},F&&(q.onprogress=F),f?q.readAsArrayBuffer(K):q.readAsText(K),J},H=(K,O,F,f,r,c,E)=>{if(K.name)return g(K,O,F,r,c?K=>{c(void 0,K)}:void 0);const M=K;if(-1!==M.indexOf("file:")){let K=decodeURIComponent(M.substring(5).toLowerCase());0===K.indexOf("./")&&(K=K.substring(2));const f=q.FilesToLoad[K];if(f)return g(f,O,F,r,c?K=>c(void 0,new o(K.message,K.file)):void 0)}const{match:X,type:u}=A(M);if(X){const K={onCompleteObservable:new l.c,abort:()=>()=>{}};try{const K=r?Q(M):R(M);O(K,void 0,u)}catch(J){c?c(void 0,J):t.c.Error(J.message||"Failed to parse the Data URL")}return j.c.SetImmediate((()=>{K.onCompleteObservable.notifyObservers(K)})),K}return e(M,((K,F)=>{O(K,null===F||void 0===F?void 0:F.responseURL,null===F||void 0===F?void 0:F.getResponseHeader("content-type"))}),F,f,r,c?K=>{c(K.request,new o(K.message,K.request))}:void 0,E)},e=(K,O,F,q,J,c,E)=>{K=Z.CleanUrl(K),K=Z.PreprocessUrl(K);const M=Z.BaseUrl+K;let j=!1;const X={onCompleteObservable:new l.c,abort:()=>j=!0},u=()=>{let K,l=new f.e,q=null;const u=()=>{l&&(F&&l.removeEventListener("progress",F),K&&l.removeEventListener("readystatechange",K),l.removeEventListener("loadend",T))};let T=()=>{u(),X.onCompleteObservable.notifyObservers(X),X.onCompleteObservable.clear(),F=void 0,K=null,T=null,c=void 0,E=void 0,O=void 0};X.abort=()=>{j=!0,T&&T(),l&&l.readyState!==(XMLHttpRequest.DONE||4)&&l.abort(),null!==q&&(clearTimeout(q),q=null),l=null};const o=K=>{const O=K.message||"Unknown error";c&&l?c(new k(O,l)):t.c.Error(O)},N=t=>{if(l){if(l.open("GET",M),E)try{E(l)}catch(X){return void o(X)}J&&(l.responseType="arraybuffer"),F&&l.addEventListener("progress",F),T&&l.addEventListener("loadend",T),K=()=>{if(!j&&l&&l.readyState===(XMLHttpRequest.DONE||4)){if(K&&l.removeEventListener("readystatechange",K),l.status>=200&&l.status<300||0===l.status&&(!(0,r.k)()||p())){const K=J?l.response:l.responseText;if(null!==K){try{O&&O(K,l)}catch(X){o(X)}return}}const F=Z.DefaultRetryStrategy;if(F){const K=F(M,l,t);if(-1!==K)return u(),l=new f.e,void(q=setTimeout((()=>N(t+1)),K))}const E=new k("Error status: "+l.status+" "+l.statusText+" - Unable to load "+M,l);c&&c(E)}},l.addEventListener("readystatechange",K),l.send()}};N(0)};if(q&&q.enableSceneOffline){const f=K=>{K&&K.status>400?c&&c(K):u()},r=()=>{q&&q.loadFile(Z.BaseUrl+K,(K=>{!j&&O&&O(K),X.onCompleteObservable.notifyObservers(X)}),F?K=>{!j&&F&&F(K)}:void 0,f,J)};q.open(r,f)}else u();return X},W=K=>{const{match:O,type:F}=A(K);if(O)return F||void 0;const f=K.lastIndexOf(".");switch(K.substring(f+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"zf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},p=()=>"undefined"!==typeof location&&"file:"===location.protocol,y=K=>T.test(K),A=K=>{const O=T.exec(K);if(null===O||0===O.length)return{match:!1,type:""};return{match:!0,type:O[0].replace("data:","").replace("base64,","")}};function Q(K){return(0,c.d)(K.split(",")[1])}const R=K=>(0,c.g)(K.split(",")[1]);let G;u.c._FileToolsLoadImage=a,X.e.loadFile=H,E.g.loadFile=H;((K,O,F,f,r,l,q,J,c,E)=>{G={DecodeBase64UrlToBinary:K,DecodeBase64UrlToString:O,DefaultRetryStrategy:F.DefaultRetryStrategy,BaseUrl:F.BaseUrl,CorsBehavior:F.CorsBehavior,PreprocessUrl:F.PreprocessUrl,IsBase64DataUrl:f,IsFileURL:r,LoadFile:l,LoadImage:q,ReadFile:J,RequestFile:c,SetCorsBehavior:E},Object.defineProperty(G,"DefaultRetryStrategy",{get:function(){return F.DefaultRetryStrategy},set:function(K){F.DefaultRetryStrategy=K}}),Object.defineProperty(G,"BaseUrl",{get:function(){return F.BaseUrl},set:function(K){F.BaseUrl=K}}),Object.defineProperty(G,"PreprocessUrl",{get:function(){return F.PreprocessUrl},set:function(K){F.PreprocessUrl=K}}),Object.defineProperty(G,"CorsBehavior",{get:function(){return F.CorsBehavior},set:function(K){F.CorsBehavior=K}})})(Q,R,Z,y,p,H,a,g,e,L)},11664:(K,O,F)=>{function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(K=>{const O=16*Math.random()|0;return("x"===K?O:3&O|8).toString(16)}))}F.d(O,{d:()=>f})},11658:(K,O,F)=>{F.d(O,{b:()=>l});var f=F(11534),r=F(11661);class l{static Instantiate(K){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[K])return this.RegisteredExternalClasses[K];const O=(0,r.d)(K);if(O)return O;f.c.Warn(K+" not found, you may have missed an import.");const F=K.split(".");let l=window||this;for(let f=0,r=F.length;f<r;f++)l=l[F[f]];return"function"!==typeof l?null:l}}l.RegisteredExternalClasses={}},11541:(K,O,F)=>{F.d(O,{e:()=>r});var f=F(11530);class r{static get Now(){return(0,f.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11569:(K,O,F)=>{F.d(O,{d:()=>q,g:()=>l,i:()=>f,j:()=>r});const f=K=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(K);let O="";for(let F=0;F<K.byteLength;F++)O+=String.fromCharCode(K[F]);return O},r=K=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F,f,r,l,q,J,c,E="",M=0;const t=ArrayBuffer.isView(K)?new Uint8Array(K.buffer,K.byteOffset,K.byteLength):new Uint8Array(K);for(;M<t.length;)F=t[M++],f=M<t.length?t[M++]:Number.NaN,r=M<t.length?t[M++]:Number.NaN,l=F>>2,q=(3&F)<<4|f>>4,J=(15&f)<<2|r>>6,c=63&r,isNaN(f)?J=c=64:isNaN(r)&&(c=64),E+=O.charAt(l)+O.charAt(q)+O.charAt(J)+O.charAt(c);return E},l=K=>atob(K),q=K=>{const O=l(K),F=O.length,f=new Uint8Array(new ArrayBuffer(F));for(let r=0;r<F;r++)f[r]=O.charCodeAt(r);return f.buffer}},11673:(K,O,F)=>{function f(K){let O=1;do{O*=2}while(O<K);return O===K}function r(K,O,F){return K*(1-F)+O*F}function l(K){const O=q(K),F=J(K);return O-K>K-F?F:O}function q(K){return K--,K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,K|=K>>16,++K}function J(K){return K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,(K|=K>>16)-(K>>1)}function c(K,O){let F;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:F=J(K);break;case 2:F=l(K);break;default:F=q(K)}return Math.min(F,O)}F.d(O,{b:()=>J,c:()=>c,g:()=>f,h:()=>r,j:()=>l})},11517:(K,O,F)=>{F.r(O),F.d(O,{AsyncLoop:()=>N,Tools:()=>o,className:()=>k});var f=F(11523),r=F(11530),l=F(11534),q=F(11539),J=F(11541),c=F(11546),E=F(11550),M=F(11559),t=F(11565),j=F(11588),X=F(11658),u=F(11664),T=F(11673);class o{static get BaseUrl(){return t.i.BaseUrl}static set BaseUrl(K){t.i.BaseUrl=K}static get CleanUrl(){return t.i.CleanUrl}static set CleanUrl(K){t.i.CleanUrl=K}static IsAbsoluteUrl(K){return 0===K.indexOf("//")||-1!==K.indexOf("://")&&(-1!==K.indexOf(".")&&(-1!==K.indexOf("/")&&(!(K.indexOf(":")>K.indexOf("/"))&&(K.indexOf("://")<K.indexOf(".")||(0===K.indexOf("data:")||0===K.indexOf("blob:"))))))}static set ScriptBaseUrl(K){t.i.ScriptBaseUrl=K}static get ScriptBaseUrl(){return t.i.ScriptBaseUrl}static set CDNBaseUrl(K){o.ScriptBaseUrl=K,o.AssetBaseUrl=K}static set ScriptPreprocessUrl(K){t.i.ScriptPreprocessUrl=K}static get ScriptPreprocessUrl(){return t.i.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return t.i.DefaultRetryStrategy}static set DefaultRetryStrategy(K){t.i.DefaultRetryStrategy=K}static get CorsBehavior(){return t.i.CorsBehavior}static set CorsBehavior(K){t.i.CorsBehavior=K}static get UseFallbackTexture(){return M.e.UseFallbackTexture}static set UseFallbackTexture(K){M.e.UseFallbackTexture=K}static get RegisteredExternalClasses(){return X.b.RegisteredExternalClasses}static set RegisteredExternalClasses(K){X.b.RegisteredExternalClasses=K}static get fallbackTexture(){return M.e.FallbackTexture}static set fallbackTexture(K){M.e.FallbackTexture=K}static FetchToRef(K,O,F,f,r,l){const q=4*((Math.abs(K)*F%F|0)+(Math.abs(O)*f%f|0)*F);l.r=r[q]/255,l.g=r[q+1]/255,l.b=r[q+2]/255,l.a=r[q+3]/255}static Mix(K,O,F){return 0}static Instantiate(K){return X.b.Instantiate(K)}static SetImmediate(K){j.c.SetImmediate(K)}static IsExponentOfTwo(K){return!0}static FloatRound(K){return Math.fround(K)}static GetFilename(K){const O=K.lastIndexOf("/");return O<0?K:K.substring(O+1)}static GetFolderPath(K){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const F=K.lastIndexOf("/");return F<0?O?K:"":K.substring(0,F+1)}static ToDegrees(K){return 180*K/Math.PI}static ToRadians(K){return K*Math.PI/180}static SmoothAngleChange(K,O){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const f=this.ToRadians(K),r=this.ToRadians(O);return this.ToDegrees(Math.atan2((1-F)*Math.sin(r)+F*Math.sin(f),(1-F)*Math.cos(r)+F*Math.cos(f)))}static MakeArray(K,O){return!0===O||void 0!==K&&null!=K?Array.isArray(K)?K:[K]:null}static GetPointerPrefix(K){return(0,r.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(K,O){(0,t.G)(K,O)}static SetReferrerPolicyBehavior(K,O){O.referrerPolicy=K}static get PreprocessUrl(){return t.i.PreprocessUrl}static set PreprocessUrl(K){t.i.PreprocessUrl=K}static LoadImage(K,O,F,f,r,l){return(0,t.z)(K,O,F,f,r,l)}static LoadFile(K,O,F,f,r,l){return(0,t.w)(K,O,F,f,r,l)}static async LoadFileAsync(K){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((F,f)=>{(0,t.w)(K,(K=>{F(K)}),void 0,void 0,O,((K,O)=>{f(O)}))}))}static GetAssetUrl(K){if(!K)return"";if(o.AssetBaseUrl&&K.startsWith(o._DefaultAssetsUrl)){const O="/"===o.AssetBaseUrl[o.AssetBaseUrl.length-1]?o.AssetBaseUrl.substring(0,o.AssetBaseUrl.length-1):o.AssetBaseUrl;return K.replace(o._DefaultAssetsUrl,O)}return K}static GetBabylonScriptURL(K,O){if(!K)return"";if(o.ScriptBaseUrl&&K.startsWith(o._DefaultCdnUrl)){const O="/"===o.ScriptBaseUrl[o.ScriptBaseUrl.length-1]?o.ScriptBaseUrl.substring(0,o.ScriptBaseUrl.length-1):o.ScriptBaseUrl;K=K.replace(o._DefaultCdnUrl,O)}return K=o.ScriptPreprocessUrl(K),O&&(K=o.GetAbsoluteUrl(K)),K}static LoadBabylonScript(K,O,F,f){K=o.GetBabylonScriptURL(K),o.LoadScript(K,O,F)}static async LoadBabylonScriptAsync(K){return K=o.GetBabylonScriptURL(K),await o.LoadScriptAsync(K)}static LoadScript(K,O,F,f){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(K),O&&O()}catch(c){null===F||void 0===F||F(`Unable to load script '${K}' in worker`,c)}return}if(!(0,r.k)())return void(null===F||void 0===F||F(`Cannot load script '${K}' outside of a window or a worker`));const q=document.getElementsByTagName("head")[0],J=document.createElement("script");l?(J.setAttribute("type","module"),J.innerText=K):(J.setAttribute("type","text/javascript"),J.setAttribute("src",K)),f&&(J.id=f),J.onload=()=>{O&&O()},J.onerror=O=>{F&&F(`Unable to load script '${K}'`,O)},q.appendChild(J)}static async LoadScriptAsync(K,O){return await new Promise(((F,f)=>{this.LoadScript(K,(()=>{F()}),((K,O)=>{f(O||new Error(K))}),O)}))}static ReadFileAsDataURL(K,O,F){const r=new FileReader,l={onCompleteObservable:new f.c,abort:()=>r.abort()};return r.onloadend=()=>{l.onCompleteObservable.notifyObservers(l)},r.onload=K=>{O(K.target.result)},r.onprogress=F,r.readAsDataURL(K),l}static ReadFile(K,O,F,f,r){return(0,t.B)(K,O,F,f,r)}static FileAsURL(K){const O=new Blob([K]);return window.URL.createObjectURL(O)}static Format(K){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return K.toFixed(O)}static DeepCopy(K,O,F,f){q.c.DeepCopy(K,O,F,f)}static IsEmpty(K){for(const O in K)if(Object.prototype.hasOwnProperty.call(K,O))return!1;return!0}static RegisterTopRootEvents(K,O){for(let f=0;f<O.length;f++){const r=O[f];K.addEventListener(r.name,r.handler,!1);try{window.parent&&window.parent.addEventListener(r.name,r.handler,!1)}catch(F){}}}static UnregisterTopRootEvents(K,O){for(let f=0;f<O.length;f++){const r=O[f];K.removeEventListener(r.name,r.handler);try{K.parent&&K.parent.removeEventListener(r.name,r.handler)}catch(F){}}}static async DumpFramebuffer(K,O,F,f){throw(0,c.d)("DumpTools")}static DumpData(K,O,F,f){throw(0,c.d)("DumpTools")}static async DumpDataAsync(K,O,F){throw(0,c.d)("DumpTools")}static _IsOffScreenCanvas(K){return void 0!==K.convertToBlob}static ToBlob(K,O){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",f=arguments.length>3?arguments[3]:void 0;o._IsOffScreenCanvas(K)||K.toBlob||(K.toBlob=function(K,O,F){setTimeout((()=>{const f=atob(this.toDataURL(O,F).split(",")[1]),r=f.length,l=new Uint8Array(r);for(let K=0;K<r;K++)l[K]=f.charCodeAt(K);K(new Blob([l]))}))}),o._IsOffScreenCanvas(K)?K.convertToBlob({type:F,quality:f}).then((K=>O(K))):K.toBlob((function(K){O(K)}),F,f)}static DownloadBlob(K,O){if("download"in document.createElement("a")){if(!O){const K=new Date;O="screenshot_"+((K.getFullYear()+"-"+(K.getMonth()+1)).slice(2)+"-"+K.getDate()+"_"+K.getHours()+"-"+("0"+K.getMinutes()).slice(-2))+".png"}o.Download(K,O)}else if(K&&"undefined"!==typeof URL){const O=URL.createObjectURL(K),F=window.open("");if(!F)return;const f=F.document.createElement("img");f.onload=function(){URL.revokeObjectURL(O)},f.src=O,F.document.body.appendChild(f)}}static EncodeScreenshotCanvasData(K,O){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",f=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if("string"!==typeof f&&O){if(O){if(o._IsOffScreenCanvas(K))return void K.convertToBlob({type:F,quality:r}).then((K=>{const F=new FileReader;F.readAsDataURL(K),F.onloadend=()=>{const K=F.result;O(K)}}));const f=K.toDataURL(F,r);O(f)}}else this.ToBlob(K,(function(K){K&&o.DownloadBlob(K,f),O&&O("")}),F,r)}static Download(K,O){if("undefined"===typeof URL)return;const F=window.URL.createObjectURL(K),f=document.createElement("a");document.body.appendChild(f),f.style.display="none",f.href=F,f.download=O,f.addEventListener("click",(()=>{f.parentElement&&f.parentElement.removeChild(f)})),f.click(),window.URL.revokeObjectURL(F)}static BackCompatCameraNoPreventDefault(K){return"boolean"===typeof K[0]?K[0]:"boolean"===typeof K[1]&&K[1]}static CreateScreenshot(K,O,F,f){throw(0,c.d)("ScreenshotTools")}static async CreateScreenshotAsync(K,O,F){throw(0,c.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(K,O,F,f){throw(0,c.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(K,O,F){throw(0,c.d)("ScreenshotTools")}static RandomId(){return(0,u.d)()}static IsBase64(K){return(0,t.q)(K)}static DecodeBase64(K){return(0,t.e)(K)}static get errorsCount(){return l.c.errorsCount}static Log(K){l.c.Log(K)}static Warn(K){l.c.Warn(K)}static Error(K){l.c.Error(K)}static get LogCache(){return l.c.LogCache}static ClearLogCache(){l.c.ClearLogCache()}static set LogLevels(K){l.c.LogLevels=K}static set PerformanceLogLevel(K){return(K&o.PerformanceUserMarkLogLevel)===o.PerformanceUserMarkLogLevel?(o.StartPerformanceCounter=o._StartUserMark,void(o.EndPerformanceCounter=o._EndUserMark)):(K&o.PerformanceConsoleLogLevel)===o.PerformanceConsoleLogLevel?(o.StartPerformanceCounter=o._StartPerformanceConsole,void(o.EndPerformanceCounter=o._EndPerformanceConsole)):(o.StartPerformanceCounter=o._StartPerformanceCounterDisabled,void(o.EndPerformanceCounter=o._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(K,O){}static _EndPerformanceCounterDisabled(K,O){}static _StartUserMark(K){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!o._Performance){if(!(0,r.k)())return;o._Performance=window.performance}O&&o._Performance.mark&&o._Performance.mark(K+"-Begin")}static _EndUserMark(K){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o._Performance.mark&&(o._Performance.mark(K+"-End"),o._Performance.measure(K,K+"-Begin",K+"-End"))}static _StartPerformanceConsole(K){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(o._StartUserMark(K,O),console.time&&console.time(K))}static _EndPerformanceConsole(K){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(o._EndUserMark(K,O),console.timeEnd(K))}static get Now(){return J.e.Now}static GetClassName(K){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null;if(!O&&K.getClassName)F=K.getClassName();else{if(K instanceof Object){F=(O?K:Object.getPrototypeOf(K)).constructor.__bjsclassName__}F||(F=typeof K)}return F}static First(K,O){for(const F of K)if(O(F))return F;return null}static getFullClassName(K){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null,f=null;if(!O&&K.getClassName)F=K.getClassName();else{if(K instanceof Object){const r=O?K:Object.getPrototypeOf(K);F=r.constructor.__bjsclassName__,f=r.constructor.__bjsmoduleName__}F||(F=typeof K)}return F?(null!=f?f+".":"")+F:null}static async DelayAsync(K){await new Promise((O=>{setTimeout((()=>{O()}),K)}))}static IsSafari(){return!!(0,r.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function k(K,O){return F=>{F.__bjsclassName__=K,F.__bjsmoduleName__=null!=O?O:null}}o.AssetBaseUrl="",o.UseCustomRequestHeaders=!1,o.CustomRequestHeaders=E.e.CustomRequestHeaders,o.GetDOMTextContent=r.d,o._DefaultCdnUrl="https://cdn.babylonjs.com",o._DefaultAssetsUrl="https://assets.babylonjs.com/core",o.GetAbsoluteUrl="object"===typeof document?K=>{const O=document.createElement("a");return O.href=K,O.href}:"function"===typeof URL&&"object"===typeof location?K=>new URL(K,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},o.NoneLogLevel=l.c.NoneLogLevel,o.MessageLogLevel=l.c.MessageLogLevel,o.WarningLogLevel=l.c.WarningLogLevel,o.ErrorLogLevel=l.c.ErrorLogLevel,o.AllLogLevel=l.c.AllLogLevel,o.IsWindowObjectExist=r.k,o.PerformanceNoneLogLevel=0,o.PerformanceUserMarkLogLevel=1,o.PerformanceConsoleLogLevel=2,o.StartPerformanceCounter=o._StartPerformanceCounterDisabled,o.EndPerformanceCounter=o._EndPerformanceCounterDisabled;class N{constructor(K,O,F){let f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=K,this.index=f-1,this._done=!1,this._fn=O,this._successCallback=F}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(K,O,F){const f=new N(K,O,F,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return f.executeNext(),f}static SyncAsyncForLoop(K,O,F,f,r){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return N.Run(Math.ceil(K/O),(f=>{r&&r()?f.breakLoop():setTimeout((()=>{for(let l=0;l<O;++l){const q=f.index*O+l;if(q>=K)break;if(F(q),r&&r()){f.breakLoop();break}}f.executeNext()}),l)}),f)}}o.Mix=T.h,o.IsExponentOfTwo=T.g,M.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11661:(K,O,F)=>{F.d(O,{d:()=>l,g:()=>r});const f={};function r(K,O){f[K]=O}function l(K){return f[K]}},11550:(K,O,F)=>{F.d(O,{e:()=>f});class f{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(f.CustomRequestHeaders).length>0||f.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const K in f.CustomRequestHeaders){const O=f.CustomRequestHeaders[K];O&&this._xhr.setRequestHeader(K,O)}}_shouldSkipRequestModifications(K){return f.SkipRequestModificationForBabylonCDN&&(K.includes("preview.babylonjs.com")||K.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(K){this._xhr.onprogress=K}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(K){this._xhr.responseType=K}get timeout(){return this._xhr.timeout}set timeout(K){this._xhr.timeout=K}addEventListener(K,O,F){this._xhr.addEventListener(K,O,F)}removeEventListener(K,O,F){this._xhr.removeEventListener(K,O,F)}abort(){this._xhr.abort()}send(K){f.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(K)}open(K,O){for(const F of f.CustomRequestModifiers){if(this._shouldSkipRequestModifications(O))return;O=F(this._xhr,O)||O}O=(O=O.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=O,this._xhr.open(K,O,!0)}setRequestHeader(K,O){this._xhr.setRequestHeader(K,O)}getResponseHeader(K){return this._xhr.getResponseHeader(K)}}f.CustomRequestHeaders={},f.CustomRequestModifiers=new Array,f.SkipRequestModificationForBabylonCDN=!0}}]);