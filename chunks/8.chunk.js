"use strict";(self.irtrrknfyfo=self.irtrrknfyfo||[]).push([[8],{11282:(B,E,v)=>{v.d(E,{b:()=>V});var z=v(11242),o=v(11213),q=v(11286),c=v(11314),S=v(11230);class x{constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,B&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(B){this._zOffset!==B&&(this._zOffset=B,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(B){this._zOffsetUnits!==B&&(this._zOffsetUnits=B,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(B){this._cullFace!==B&&(this._cullFace=B,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(B){this._cull!==B&&(this._cull=B,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(B){this._depthFunc!==B&&(this._depthFunc=B,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(B){this._depthMask!==B&&(this._depthMask=B,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(B){this._depthTest!==B&&(this._depthTest=B,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(B){this._frontFace!==B&&(this._frontFace=B,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(B){this.isDirty&&(this._isCullDirty&&(this.cull?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(B.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(B.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(B.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(B.enable(B.POLYGON_OFFSET_FILL),B.polygonOffset(this.zOffset,this.zOffsetUnits)):B.disable(B.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(B.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class D{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(B){this._func!==B&&(this._func=B,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(B){this._funcRef!==B&&(this._funcRef=B,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(B){this._funcMask!==B&&(this._funcMask=B,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(B){this._opStencilFail!==B&&(this._opStencilFail=B,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(B){this._opDepthFail!==B&&(this._opDepthFail=B,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(B){this._opStencilDepthPass!==B&&(this._opStencilDepthPass=B,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(B){this._mask!==B&&(this._mask=B,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(B){this._enabled!==B&&(this._enabled=B,this._isStencilTestDirty=!0)}constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,B&&this.reset()}reset(){var B;this.stencilMaterial=void 0,null===(B=this.stencilGlobal)||void 0===B||B.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(B){var E;if(!B)return;const v=!this.useStencilGlobalOnly&&!(null===(E=this.stencilMaterial)||void 0===E||!E.enabled);this.enabled=v?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=v?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=v?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=v?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=v?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=v?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=v?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=v?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(B.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(B.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(B.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class h{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=h.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=h.KEEP,this.opDepthFail=h.KEEP,this.opStencilDepthPass=h.REPLACE}get stencilFunc(){return this.func}set stencilFunc(B){this.func=B}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(B){this.funcRef=B}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(B){this.funcMask=B}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(B){this.opStencilFail=B}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(B){this.opDepthFail=B}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(B){this.opStencilDepthPass=B}get stencilMask(){return this.mask}set stencilMask(B){this.mask=B}get stencilTest(){return this.enabled}set stencilTest(B){this.enabled=B}}h.ALWAYS=519,h.KEEP=7680,h.REPLACE=7681;class y{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(B){this._alphaBlend!==B&&(this._alphaBlend=B,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(B,E,v,z){this._blendConstants[0]===B&&this._blendConstants[1]===E&&this._blendConstants[2]===v&&this._blendConstants[3]===z||(this._blendConstants[0]=B,this._blendConstants[1]=E,this._blendConstants[2]=v,this._blendConstants[3]=z,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(B,E,v,z){this._blendFunctionParameters[0]===B&&this._blendFunctionParameters[1]===E&&this._blendFunctionParameters[2]===v&&this._blendFunctionParameters[3]===z||(this._blendFunctionParameters[0]=B,this._blendFunctionParameters[1]=E,this._blendFunctionParameters[2]=v,this._blendFunctionParameters[3]=z,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(B,E){this._blendEquationParameters[0]===B&&this._blendEquationParameters[1]===E||(this._blendEquationParameters[0]=B,this._blendEquationParameters[1]=E,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(B){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?B.enable(B.BLEND):B.disable(B.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(B.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(B.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(B.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var Q=v(11235),P=v(11323),G=v(11211),Y=v(11202),a=v(11271),m=v(11334);function g(B,E){if((0,G.f)()){const{requestAnimationFrame:v}=E||window;if("function"===typeof v)return v(B)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(B);return setTimeout(B,16)}class V{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(B){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(B){B!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=B,this._depthCullingState.depthFunc=B?518:515)}setColorWrite(B){B!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=B)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(B){if(B)return this.isNDCHalfZRange?B.IS_NDC_HALF_ZRANGE="":delete B.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?B.USE_REVERSE_DEPTHBUFFER="":delete B.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?B.USE_EXACT_SRGB_CONVERSIONS="":delete B.USE_EXACT_SRGB_CONVERSIONS);{let B="";return this.isNDCHalfZRange&&(B+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(B&&(B+="\n"),B+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(B&&(B+="\n"),B+="#define USE_EXACT_SRGB_CONVERSIONS"),B}}_rebuildInternalTextures(){const B=this._internalTexturesCache.slice();for(const E of B)E._rebuild()}_rebuildRenderTargetWrappers(){const B=this._renderTargetWrapperCache.slice();for(const E of B)E._rebuild()}_rebuildEffects(){for(const B in this._compiledEffects){const E=this._compiledEffects[B];E._pipelineContext=null,E._prepareEffect()}q.Effect.ResetCache()}_rebuildGraphicsResources(){var B;this.wipeCaches(!0),this._rebuildEffects(),null===(B=this._rebuildComputeEffects)||void 0===B||B.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){o.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(B){setTimeout((()=>{this._clearEmptyResources();const E=this._depthCullingState.depthTest,v=this._depthCullingState.depthFunc,z=this._depthCullingState.depthMask,o=this._stencilState.stencilTest;B(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=E,this._depthCullingState.depthFunc=v,this._depthCullingState.depthMask=z,this._stencilState.stencilTest=o,this._flagContextRestored()}),0)}get P(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(B){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(B){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const B=new Uint8Array(4),E=[B,B,B,B,B,B];this._emptyCubeTexture=this.createRawCubeTexture(E,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(B){if(!B)return this._activeRenderLoops.length=0,void this._cancelFrame();const E=this._activeRenderLoops.indexOf(B);E>=0&&(this._activeRenderLoops.splice(E,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const B=this._frameHandler;if(this._frameHandler=0,(0,G.f)()){const{cancelAnimationFrame:E}=this.getHostWindow()||window;if("function"===typeof E)return E(B)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(B);return clearTimeout(B)}}nz(){this.onBeginFrameObservable.notifyObservers(this)}qq(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(B){this._maxFPS=B,void 0!==B&&(this._minFrameTime=B<=0?Number.MAX_VALUE:1e3/B)}_isOverFrameTime(B){if(!B||void 0===this._maxFPS)return!1;const E=B-this._lastFrameTime;return this._lastFrameTime=B,this._renderAccumulator+=E,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(B){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(B)){let B=!0;(this.P||!this.renderEvenInBackground&&this._windowIsBackground)&&(B=!1),B&&(this.nz(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.qq())}}_renderLoop(B){this._processFrame(B),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let B=0;B<this._activeRenderLoops.length;B++){(0,this._activeRenderLoops[B])()}}_renderViews(){return!1}_queueNewFrame(B,E){return g(B,E)}runRenderLoop(B){-1===this._activeRenderLoops.indexOf(B)&&(this._activeRenderLoops.push(B),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(B){this._depthCullingState.depthTest=B}setZOffset(B){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-B:B}getZOffset(){const B=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-B:B}setZOffsetUnits(B){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-B:B}getZOffsetUnits(){const B=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-B:B}getHostWindow(){return(0,G.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(B){this._compatibilityMode=!0}_rebuildTextures(){for(const B of this.scenes)B._rebuildTextures();for(const B of this._virtualScenes)B._rebuildTextures()}_releaseRenderTargetWrapper(B){const E=this._renderTargetWrapperCache.indexOf(B);-1!==E&&this._renderTargetWrapperCache.splice(E,1)}get currentViewport(){return this._cachedViewport}setViewport(B,E,v){const z=E||this.getRenderWidth(),o=v||this.getRenderHeight(),q=B.x||0,c=B.y||0;this._cachedViewport=B,this._viewport(q*z,c*o,z*B.width,o*B.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(B){return new Path2D(B)}get description(){let B=this.name+this.version;return this._caps.parallelShaderCompile&&(B+=" - Parallel shader compilation"),B}_createTextureBase(B,E,v,q){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,x=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,D=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,Q=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,G=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Y=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,a=arguments.length>13?arguments[13]:void 0,g=arguments.length>14?arguments[14]:void 0,T=arguments.length>15?arguments[15]:void 0;const N="data:"===(B=B||"").substring(0,5),X="blob:"===B.substring(0,5),r=N&&-1!==B.indexOf(";base64,"),i=Q||new P.b(this,1);i!==Q&&(i.label=B.substring(0,60));const u=B;!this._transformTextureUrl||r||Q||y||(B=this._transformTextureUrl(B)),u!==B&&(i._originalUrl=u);const I=B.lastIndexOf(".");let K=Y||(I>-1?B.substring(I).toLowerCase():"");K.indexOf("?")>-1&&(K=K.split("?")[0]);const C=(0,m.e)(K,a);q&&q.addPendingData(i),i.url=B,i.generateMipMaps=!E,i.samplingMode=c,i.invertY=v,i._useSRGBBuffer=this._getUseSRGBBuffer(!!T,E),this._doNotHandleContextLost||(i._buffer=y);let f=null;S&&!Q&&(f=i.onLoadedObservable.add(S)),Q||this._internalTexturesCache.push(i);const A=(v,Q)=>{q&&q.removePendingData(i),B===u?(f&&i.onLoadedObservable.remove(f),z.b.UseFallbackTexture&&B!==z.b.FallbackTexture&&this._createTextureBase(z.b.FallbackTexture,E,i.invertY,q,c,null,x,D,h,y,i),v=(v||"Unknown error")+(z.b.UseFallbackTexture?" - Fallback texture was used":""),i.onErrorObservable.notifyObservers({message:v,exception:Q}),x&&x(v,Q)):(o.c.Warn(`Failed to load ${B}, falling back to ${u}`),this._createTextureBase(u,E,i.invertY,q,c,S,x,D,h,y,i,G,Y,a,g,T))};if(C){const E=async B=>{(await C).loadData(B,i,((B,E,v,z,o,S)=>{S?A("TextureLoader failed to load data"):D(i,K,q,{width:B,height:E},i.invertY,!v,z,(()=>(o(),!1)),c)}),g)};y?y instanceof ArrayBuffer?E(new Uint8Array(y)):ArrayBuffer.isView(y)?E(y):x&&x("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(B,(B=>{E(new Uint8Array(B))}),void 0,q?q.offlineProvider:void 0,!0,((B,E)=>{A("Unable to load "+(B&&B.responseURL,E))}))}else{const v=B=>{X&&!this._doNotHandleContextLost&&(i._buffer=B),D(i,K,q,B,i.invertY,E,!1,h,c)};!N||r?y&&("string"===typeof y.decoding||y.close)?v(y):V._FileToolsLoadImage(B||"",v,A,q?q.offlineProvider:null,a,i.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof y||y instanceof ArrayBuffer||ArrayBuffer.isView(y)||y instanceof Blob?V._FileToolsLoadImage(y,v,A,q?q.offlineProvider:null,a,i.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):y&&v(y)}return i}_rebuildBuffers(){for(const B of this._uniformBuffers)B._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,G.c)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const B in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,B)&&(this._boundTexturesCache[B]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(B){this._name=B}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(B){this._hardwareScalingLevel=B,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(B){this._doNotHandleContextLost=B}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(B,E,v){var o,q;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new x,this._stencilStateComposer=new D,this._stencilState=new h,this._alphaState=new y,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new Y.e,this.onCanvasFocusObservable=new Y.e,this.onNewSceneAddedObservable=new Y.e,this.onResizeObservable=new Y.e,this.onCanvasPointerOutObservable=new Y.e,this.onEffectErrorObservable=new Y.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new Y.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=B=>this._renderLoop(B),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new Y.e,this.onAfterShaderCompilationObservable=new Y.e,this.onBeginFrameObservable=new Y.e,this.onEndFrameObservable=new Y.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new Y.e,this.onContextRestoredObservable=new Y.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.eq=new Y.e,this.onReleaseEffectsObservable=new Y.e,z.b.Instances.push(this),this.startTime=S.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,c.c.SetMatrixPrecision(!!E.useHighPrecisionMatrix),(0,G.d)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=v??!1,E.antialias=B??E.antialias,E.deterministicLockstep=E.deterministicLockstep??!1,E.lockstepMaxSteps=E.lockstepMaxSteps??4,E.timeStep=E.timeStep??1/60,E.stencil=E.stencil??!0,this._audioContext=(null===(o=E.audioEngineOptions)||void 0===o?void 0:o.audioContext)??null,this._audioDestination=(null===(q=E.audioEngineOptions)||void 0===q?void 0:q.audioDestination)??null,this.premultipliedAlpha=E.premultipliedAlpha??!0,this._doNotHandleContextLost=!!E.doNotHandleContextLost,this._isStencilEnable=!!E.stencil,this.useExactSrgbConversions=E.useExactSrgbConversions??!1;const Q=(0,G.f)()&&window.devicePixelRatio||1,P=E.limitDeviceRatio||Q;v=v||E.adaptToDeviceRatio||!1,this._hardwareScalingLevel=v?1/Math.min(P,Q):1,this._lastDevicePixelRatio=Q,this._creationOptions=E}resize(){let B,E,v=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const B=(0,G.f)()&&window.devicePixelRatio||1,E=this._lastDevicePixelRatio/B;this._lastDevicePixelRatio=B,this._hardwareScalingLevel*=E}if((0,G.f)()&&(0,G.c)())if(this._renderingCanvas){var z,o;const v=null===(z=(o=this._renderingCanvas).getBoundingClientRect)||void 0===z?void 0:z.call(o);B=this._renderingCanvas.clientWidth||(null===v||void 0===v?void 0:v.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,E=this._renderingCanvas.clientHeight||(null===v||void 0===v?void 0:v.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else B=window.innerWidth,E=window.innerHeight;else B=this._renderingCanvas?this._renderingCanvas.width:100,E=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(B/this._hardwareScalingLevel,E/this._hardwareScalingLevel,v)}setSize(B,E){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(B|=0,E|=0,!v&&this._renderingCanvas.width===B&&this._renderingCanvas.height===E)return!1;if(this._renderingCanvas.width=B,this._renderingCanvas.height=E,this.scenes){for(let B=0;B<this.scenes.length;B++){const E=this.scenes[B];for(let B=0;B<E.cameras.length;B++){E.cameras[B]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(B,E,v,z,o,q,c,S,x,D,h){throw(0,Q.e)("engine.rawTexture")}createRawCubeTexture(B,E,v,z,o,q,c,S){throw(0,Q.e)("engine.rawTexture")}createRawTexture3D(B,E,v,z,o,q,c,S,x,D,h){throw(0,Q.e)("engine.rawTexture")}createRawTexture2DArray(B,E,v,z,o,q,c,S,x,D,h){throw(0,Q.e)("engine.rawTexture")}_sharedInit(B){this._renderingCanvas=B}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const B=navigator.userAgent;this.hostInformation.isMobile=-1!==B.indexOf("Mobile")||-1!==B.indexOf("Mac")&&(0,G.c)()&&"ontouchend"in document},this._checkForMobile(),(0,G.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(B){return document.createElement("video")}_reportDrawCall(){var B;let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(B=this._drawCalls)||void 0===B||B.addCount(E,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(B,E){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(B,E){return createImageBitmap(B,E)}resizeImageBitmap(B,E,v){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(B){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(B,E){if("undefined"===typeof document)return new OffscreenCanvas(B,E);const v=document.createElement("canvas");return v.width=B,v.height=E,v}createCanvas(B,E){return V._CreateCanvas(B,E)}static _FileToolsLoadImage(B,E,v,z,o,q,c){throw(0,Q.e)("FileTools")}_loadFile(B,E,v,z,o,q){const c=(0,a.l)(B,E,v,z,o,q);return this._activeRequests.push(c),c.onCompleteObservable.add((()=>{const B=this._activeRequests.indexOf(c);-1!==B&&this._activeRequests.splice(B,1)})),c}static _FileToolsLoadFile(B,E,v,z,o,q){if(a.c.loadFile)return a.c.loadFile(B,E,v,z,o,q);throw(0,Q.e)("FileTools")}dispose(){var B;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(B=this.releaseComputeEffects)||void 0===B||B.call(this),q.Effect.ResetCache();for(const v of this._activeRequests)v.abort();this._boundRenderFunction=null,this.eq.notifyObservers(this),this.eq.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,G.f)()&&window.removeEventListener("resize",this._checkForMobile);const E=z.b.Instances.indexOf(this);E>=0&&z.b.Instances.splice(E,1),z.b.Instances.length||(z.b.OnEnginesDisposedObservable.notifyObservers(this),z.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(B){throw(0,Q.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(B,E){for(let v=0;v<z.b.Instances.length;v++){const o=z.b.Instances[v];for(let v=0;v<o.scenes.length;v++)o.scenes[v].markAllMaterialsAsDirty(B,E)}}}V._RenderPassIdCounter=0,V._RescalePostProcessFactory=null,V.CollisionsEpsilon=.001,V.QueueNewFrame=g},11242:(B,E,v)=>{v.d(E,{b:()=>o});var z=v(11202);class o{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}o.Instances=[],o.OnEnginesDisposedObservable=new z.e,o._LastCreatedScene=null,o.UseFallbackTexture=!0,o.FallbackTexture=""},11314:(B,E,v)=>{v.d(E,{c:()=>z});class z{static SetMatrixPrecision(B){if(z.MatrixTrackPrecisionChange=!1,B&&!z.MatrixUse64Bits&&z.MatrixTrackedMatrices)for(let E=0;E<z.MatrixTrackedMatrices.length;++E){const B=z.MatrixTrackedMatrices[E],v=B.Bc;B.Bc=new Array(16);for(let E=0;E<16;++E)B.Bc[E]=v[E]}z.MatrixUse64Bits=B,z.MatrixCurrentType=z.MatrixUse64Bits?Array:Float32Array,z.MatrixTrackedMatrices=null}}z.MatrixUse64Bits=!1,z.MatrixTrackPrecisionChange=!0,z.MatrixCurrentType=Float32Array,z.MatrixTrackedMatrices=[]},11334:(B,E,v)=>{v.d(E,{e:()=>c});var z=v(11213);const o=new Map;function q(B,E){(function(B){return o.delete(B)})(B)&&z.c.Warn(`Extension with the name '${B}' already exists`),o.set(B,E)}function c(B,E){"image/ktx"!==E&&"image/ktx2"!==E||(B=".ktx"),o.has(B)||(B.endsWith(".ies")&&q(".ies",(async()=>await v.e(15).then(v.bind(v,13792)).then((B=>new B._IESTextureLoader)))),B.endsWith(".dds")&&q(".dds",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(19),v.e(18),v.e(28)]).then(v.bind(v,13801)).then((B=>new B._DDSTextureLoader)))),B.endsWith(".basis")&&q(".basis",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(47)]).then(v.bind(v,13808)).then((B=>new B._BasisTextureLoader)))),B.endsWith(".env")&&q(".env",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(19),v.e(18),v.e(23),v.e(21),v.e(45),v.e(48)]).then(v.bind(v,13810)).then((B=>new B._ENVTextureLoader)))),B.endsWith(".hdr")&&q(".hdr",(async()=>await Promise.all([v.e(14),v.e(49)]).then(v.bind(v,13818)).then((B=>new B._HDRTextureLoader)))),(B.endsWith(".ktx")||B.endsWith(".ktx2"))&&(q(".ktx",(async()=>await v.e(30).then(v.bind(v,13821)).then((B=>new B._KTXTextureLoader)))),q(".ktx2",(async()=>await v.e(30).then(v.bind(v,13821)).then((B=>new B._KTXTextureLoader))))),B.endsWith(".tga")&&q(".tga",(async()=>await v.e(50).then(v.bind(v,13828)).then((B=>new B._TGATextureLoader)))),B.endsWith(".exr")&&q(".exr",(async()=>await v.e(16).then(v.bind(v,13831)).then((B=>new B._ExrTextureLoader)))));const z=o.get(B);return z?Promise.resolve(z(E)):null}},11323:(B,E,v)=>{v.d(E,{b:()=>c});var z,o=v(11202),q=v(11331);!function(B){B[B.Unknown=0]="Unknown",B[B.Url=1]="Url",B[B.Temp=2]="Temp",B[B.Raw=3]="Raw",B[B.Dynamic=4]="Dynamic",B[B.RenderTarget=5]="RenderTarget",B[B.MultiRenderTarget=6]="MultiRenderTarget",B[B.Cube=7]="Cube",B[B.CubeRaw=8]="CubeRaw",B[B.CubePrefiltered=9]="CubePrefiltered",B[B.Raw3D=10]="Raw3D",B[B.Raw2DArray=11]="Raw2DArray",B[B.DepthStencil=12]="DepthStencil",B[B.CubeRawRGBD=13]="CubeRawRGBD",B[B.Depth=14]="Depth"}(z||(z={}));class c extends q.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(B){this.generateMipMaps=B}get uniqueId(){return this._uniqueId}_setUniqueId(B){this._uniqueId=B}getEngine(){return this._engine}get source(){return this._source}constructor(B,E){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new o.e,this.onErrorObservable=new o.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=B,this._source=E,this._uniqueId=c._Counter++,v||(this._hardwareTexture=B._createHardwareTexture())}incrementReferences(){this._references++}updateSize(B,E){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,B,E,v),this.width=B,this.height=E,this.depth=v,this.baseWidth=B,this.baseHeight=E,this.baseDepth=v,this._size=B*E*v}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const B=this.onRebuildCallback(this),E=E=>{E._swapAndDie(this,!1),this.isReady=B.isReady};return void(B.isAsync?B.proxy.then(E):E(B.proxy))}let B;switch(this.source){case 2:case 12:case 14:break;case 1:return void(B=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(B=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:B=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),B._swapAndDie(this,!1),this.isReady=!0;break;case 10:B=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 11:B=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 4:B=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),B._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(B=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:B=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),B._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return B=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(B=>{B&&B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(B._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(B){var E;let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(E=this._hardwareTexture)||void 0===E||E.setUsage(B._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),B._hardwareTexture=this._hardwareTexture,v&&(B._isRGBD=this._isRGBD),this._lodTextureHigh&&(B._lodTextureHigh&&B._lodTextureHigh.dispose(),B._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(B._lodTextureMid&&B._lodTextureMid.dispose(),B._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(B._lodTextureLow&&B._lodTextureLow.dispose(),B._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(B._irradianceTexture&&B._irradianceTexture.dispose(),B._irradianceTexture=this._irradianceTexture);const z=this._engine.getLoadedTexturesCache();let o=z.indexOf(this);-1!==o&&z.splice(o,1),o=z.indexOf(B),-1===o&&z.push(B)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}c._Counter=0},11331:(B,E,v)=>{v.d(E,{d:()=>z});class z{get wrapU(){return this._cachedWrapU}set wrapU(B){this._cachedWrapU=B}get wrapV(){return this._cachedWrapV}set wrapV(B){this._cachedWrapV=B}get wrapR(){return this._cachedWrapR}set wrapR(B){this._cachedWrapR=B}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(B){this._cachedAnisotropicFilteringLevel=B}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(B){this._comparisonFunction=B}get useMipMaps(){return this._useMipMaps}set useMipMaps(B){this._useMipMaps=B}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=B,this._cachedWrapV=E,this._cachedWrapR=v,this._cachedAnisotropicFilteringLevel=z,this.samplingMode=o,this._comparisonFunction=q,this}compareSampler(B){return this._cachedWrapU===B._cachedWrapU&&this._cachedWrapV===B._cachedWrapV&&this._cachedWrapR===B._cachedWrapR&&this._cachedAnisotropicFilteringLevel===B._cachedAnisotropicFilteringLevel&&this.samplingMode===B.samplingMode&&this._comparisonFunction===B._comparisonFunction&&this._useMipMaps===B._useMipMaps}}},11222:(B,E,v)=>{v.d(E,{d:()=>q});var z=v(11213);const o=(B,E,v)=>B?B.getClassName&&"Mesh"===B.getClassName()?null:!B.getClassName||"SubMesh"!==B.getClassName()&&"PhysicsBody"!==B.getClassName()?B.clone?B.clone():Array.isArray(B)?B.slice():v&&"object"===typeof B?{...B}:null:B.clone(E):null;class q{static DeepCopy(B,E,v,q){let c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const S=function(B){const E=[];do{const v=Object.getOwnPropertyNames(B);for(const B of v)-1===E.indexOf(B)&&E.push(B)}while(B=Object.getPrototypeOf(B));return E}(B);for(const D of S){if("_"===D[0]&&(!q||-1===q.indexOf(D)))continue;if(D.endsWith("Observable"))continue;if(v&&-1!==v.indexOf(D))continue;const S=B[D],h=typeof S;if("function"!==h)try{if("object"===h)if(S instanceof Uint8Array)E[D]=Uint8Array.from(S);else if(S instanceof Array){if(E[D]=[],S.length>0)if("object"==typeof S[0])for(let B=0;B<S.length;B++){const v=o(S[B],E,c);-1===E[D].indexOf(v)&&E[D].push(v)}else E[D]=S.slice(0)}else E[D]=o(S,E,c);else E[D]=S}catch(x){z.c.Warn(x.message)}}}}},11256:(B,E,v)=>{v.d(E,{b:()=>z,c:()=>o,g:()=>q});class z extends Error{}z._setPrototypeOf=Object.setPrototypeOf||((B,E)=>(B.__proto__=E,B));const o={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class q extends z{constructor(B,E,v){super(B),this.errorCode=E,this.innerError=v,this.name="RuntimeError",z._setPrototypeOf(this,q.prototype)}}},11249:(B,E,v)=>{v.d(E,{e:()=>A,h:()=>V,j:()=>I,l:()=>C,q:()=>i,p:()=>a,t:()=>X,u:()=>r,x:()=>u,z:()=>T});var z=v(11237),o=v(11211),q=v(11202);class c{}c.FilesToLoad={};var S=v(11256),x=v(11263),D=v(11266),h=v(11242),y=v(11213),Q=v(11278),P=v(11271),G=v(11282);const Y=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class a extends S.g{constructor(B,E){super(B,S.c.LoadFileError),this.name="LoadFileError",S.b._setPrototypeOf(this,a.prototype),E instanceof z.b?this.request=E:this.file=E}}class m extends S.g{constructor(B,E){super(B,S.c.RequestFileError),this.request=E,this.name="RequestFileError",S.b._setPrototypeOf(this,m.prototype)}}class g extends S.g{constructor(B,E){super(B,S.c.ReadFileError),this.file=E,this.name="ReadFileError",S.b._setPrototypeOf(this,g.prototype)}}const V={DefaultRetryStrategy:class{static ExponentialBackoff(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(v,z,o)=>0!==z.status||o>=B||-1!==v.indexOf("file:")?-1:Math.pow(2,o)*E}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:B=>B,ScriptBaseUrl:"",ScriptPreprocessUrl:B=>B,CleanUrl:B=>B=B.replace(/#/gm,"%23")},T=(B,E)=>{if((!B||0!==B.indexOf("data:"))&&V.CorsBehavior)if("string"===typeof V.CorsBehavior||V.CorsBehavior instanceof String)E.crossOrigin=V.CorsBehavior;else{const v=V.CorsBehavior(B);v&&(E.crossOrigin=v)}},N={getRequiredSize:null},X=function(B,E,v,o){let q,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",D=arguments.length>5?arguments[5]:void 0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===y||void 0===y||!y._features.forceBitmapOverHTMLImageElement))return v("LoadImage is only supported in web or BabylonNative environments."),null;let Q=!1;B instanceof ArrayBuffer||ArrayBuffer.isView(B)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(q=URL.createObjectURL(new Blob([B],{type:S})),Q=!0):q=`data:${S};base64,`+(0,x.j)(B):B instanceof Blob?(q=URL.createObjectURL(B),Q=!0):(q=V.CleanUrl(B),q=V.PreprocessUrl(q));const P=E=>{if(v){const z=q||B.toString();v(`Error while trying to load image: ${0===z.indexOf("http")||z.length<=128?z:z.slice(0,128)+"..."}`,E)}};if(null!==y&&void 0!==y&&y._features.forceBitmapOverHTMLImageElement)return i(q,(z=>{y.createImageBitmap(new Blob([z],{type:S}),{premultiplyAlpha:"none",...D}).then((B=>{E(B),Q&&URL.revokeObjectURL(q)})).catch((E=>{v&&v("Error while trying to load image: "+B,E)}))}),void 0,o||void 0,!0,((B,E)=>{P(E)})),null;const G=new Image;if(N.getRequiredSize){const E=N.getRequiredSize(B);E.width&&(G.width=E.width),E.height&&(G.height=E.height)}T(q,G);const Y=[],a=()=>{for(const B of Y)B.target.removeEventListener(B.name,B.handler);Y.length=0};Y.push({target:G,name:"load",handler:()=>{a(),E(G),Q&&G.src&&URL.revokeObjectURL(G.src)}}),Y.push({target:G,name:"error",handler:B=>{a(),P(B),Q&&G.src&&URL.revokeObjectURL(G.src)}}),Y.push({target:document,name:"securitypolicyviolation",handler:B=>{if(B.blockedURI!==G.src||"Ec"===B.disposition)return;a();const E=new Error(`CSP violation of policy ${B.effectiveDirective} ${B.blockedURI}. Current policy is ${B.originalPolicy}`);h.b.UseFallbackTexture=!1,P(E),Q&&G.src&&URL.revokeObjectURL(G.src),G.src=""}}),(()=>{for(const B of Y)B.target.addEventListener(B.name,B.handler)})();const m="blob:"===q.substring(0,5),g="data:"===q.substring(0,5),X=()=>{m||g||!z.b.IsCustomRequestAvailable?G.src=q:i(q,((B,E,v)=>{const z=new Blob([B],{type:!S&&v?v:S}),o=URL.createObjectURL(z);Q=!0,G.src=o}),void 0,o||void 0,!0,((B,E)=>{P(E)}))},r=()=>{o&&o.loadImage(q,G)};if(!m&&!g&&o&&o.enableTexturesOffline)o.open(r,X);else{if(-1!==q.indexOf("file:")){const B=decodeURIComponent(q.substring(5).toLowerCase());if(c.FilesToLoad[B]&&"undefined"!==typeof URL){try{let E;try{E=URL.createObjectURL(c.FilesToLoad[B])}catch(u){E=URL.createObjectURL(c.FilesToLoad[B])}G.src=E,Q=!0}catch(I){G.src=""}return G}}X()}return G},r=(B,E,v,z,o)=>{const c=new FileReader,S={onCompleteObservable:new q.e,abort:()=>c.abort()};return c.onloadend=()=>S.onCompleteObservable.notifyObservers(S),o&&(c.onerror=()=>{o(new g(`Unable to read ${B.name}`,B))}),c.onload=B=>{E(B.target.result)},v&&(c.onprogress=v),z?c.readAsArrayBuffer(B):c.readAsText(B),S},i=(B,E,v,z,o,x,D)=>{if(B.name)return r(B,E,v,o,x?B=>{x(void 0,B)}:void 0);const h=B;if(-1!==h.indexOf("file:")){let B=decodeURIComponent(h.substring(5).toLowerCase());0===B.indexOf("./")&&(B=B.substring(2));const z=c.FilesToLoad[B];if(z)return r(z,E,v,o,x?B=>x(void 0,new a(B.message,B.file)):void 0)}const{match:P,type:G}=f(h);if(P){const B={onCompleteObservable:new q.e,abort:()=>()=>{}};try{const B=o?A(h):l(h);E(B,void 0,G)}catch(S){x?x(void 0,S):y.c.Error(S.message||"Failed to parse the Data URL")}return Q.c.SetImmediate((()=>{B.onCompleteObservable.notifyObservers(B)})),B}return u(h,((B,v)=>{E(B,null===v||void 0===v?void 0:v.responseURL,null===v||void 0===v?void 0:v.getResponseHeader("content-type"))}),v,z,o,x?B=>{x(B.request,new a(B.message,B.request))}:void 0,D)},u=(B,E,v,c,S,x,D)=>{B=V.CleanUrl(B),B=V.PreprocessUrl(B);const h=V.BaseUrl+B;let Q=!1;const P={onCompleteObservable:new q.e,abort:()=>Q=!0},G=()=>{let B,q=new z.b,c=null;const G=()=>{q&&(v&&q.removeEventListener("progress",v),B&&q.removeEventListener("readystatechange",B),q.removeEventListener("loadend",Y))};let Y=()=>{G(),P.onCompleteObservable.notifyObservers(P),P.onCompleteObservable.clear(),v=void 0,B=null,Y=null,x=void 0,D=void 0,E=void 0};P.abort=()=>{Q=!0,Y&&Y(),q&&q.readyState!==(XMLHttpRequest.DONE||4)&&q.abort(),null!==c&&(clearTimeout(c),c=null),q=null};const a=B=>{const E=B.message||"Unknown error";x&&q?x(new m(E,q)):y.c.Error(E)},g=y=>{if(q){if(q.open("GET",h),D)try{D(q)}catch(P){return void a(P)}S&&(q.responseType="arraybuffer"),v&&q.addEventListener("progress",v),Y&&q.addEventListener("loadend",Y),B=()=>{if(!Q&&q&&q.readyState===(XMLHttpRequest.DONE||4)){if(B&&q.removeEventListener("readystatechange",B),q.status>=200&&q.status<300||0===q.status&&(!(0,o.f)()||K())){const B=S?q.response:q.responseText;if(null!==B){try{E&&E(B,q)}catch(P){a(P)}return}}const v=V.DefaultRetryStrategy;if(v){const B=v(h,q,y);if(-1!==B)return G(),q=new z.b,void(c=setTimeout((()=>g(y+1)),B))}const D=new m("Error status: "+q.status+" "+q.statusText+" - Unable to load "+h,q);x&&x(D)}},q.addEventListener("readystatechange",B),q.send()}};g(0)};if(c&&c.enableSceneOffline){const z=B=>{B&&B.status>400?x&&x(B):G()},o=()=>{c&&c.loadFile(V.BaseUrl+B,(B=>{!Q&&E&&E(B),P.onCompleteObservable.notifyObservers(P)}),v?B=>{!Q&&v&&v(B)}:void 0,z,S)};c.open(o,z)}else G();return P},I=B=>{const{match:E,type:v}=f(B);if(E)return v||void 0;const z=B.lastIndexOf(".");switch(B.substring(z+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"vc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},K=()=>"undefined"!==typeof location&&"file:"===location.protocol,C=B=>Y.test(B),f=B=>{const E=Y.exec(B);if(null===E||0===E.length)return{match:!1,type:""};return{match:!0,type:E[0].replace("data:","").replace("base64,","")}};function A(B){return(0,x.b)(B.split(",")[1])}const l=B=>(0,x.d)(B.split(",")[1]);let d;G.b._FileToolsLoadImage=X,P.c.loadFile=i,D.q.loadFile=i;((B,E,v,z,o,q,c,S,x,D)=>{d={DecodeBase64UrlToBinary:B,DecodeBase64UrlToString:E,DefaultRetryStrategy:v.DefaultRetryStrategy,BaseUrl:v.BaseUrl,CorsBehavior:v.CorsBehavior,PreprocessUrl:v.PreprocessUrl,IsBase64DataUrl:z,IsFileURL:o,LoadFile:q,LoadImage:c,ReadFile:S,RequestFile:x,SetCorsBehavior:D},Object.defineProperty(d,"DefaultRetryStrategy",{get:function(){return v.DefaultRetryStrategy},set:function(B){v.DefaultRetryStrategy=B}}),Object.defineProperty(d,"BaseUrl",{get:function(){return v.BaseUrl},set:function(B){v.BaseUrl=B}}),Object.defineProperty(d,"PreprocessUrl",{get:function(){return v.PreprocessUrl},set:function(B){v.PreprocessUrl=B}}),Object.defineProperty(d,"CorsBehavior",{get:function(){return v.CorsBehavior},set:function(B){v.CorsBehavior=B}})})(A,l,V,C,K,i,X,r,u,T)},11351:(B,E,v)=>{function z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(B=>{const E=16*Math.random()|0;return("x"===B?E:3&E|8).toString(16)}))}v.d(E,{c:()=>z})},11342:(B,E,v)=>{v.d(E,{c:()=>q});var z=v(11213),o=v(11345);class q{static Instantiate(B){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[B])return this.RegisteredExternalClasses[B];const E=(0,o.b)(B);if(E)return E;z.c.Warn(B+" not found, you may have missed an import.");const v=B.split(".");let q=window||this;for(let z=0,o=v.length;z<o;z++)q=q[v[z]];return"function"!==typeof q?null:q}}q.RegisteredExternalClasses={}},11230:(B,E,v)=>{v.d(E,{e:()=>o});var z=v(11211);class o{static get Now(){return(0,z.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11263:(B,E,v)=>{v.d(E,{b:()=>c,d:()=>q,h:()=>z,j:()=>o});const z=B=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(B);let E="";for(let v=0;v<B.byteLength;v++)E+=String.fromCharCode(B[v]);return E},o=B=>{const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let v,z,o,q,c,S,x,D="",h=0;const y=ArrayBuffer.isView(B)?new Uint8Array(B.buffer,B.byteOffset,B.byteLength):new Uint8Array(B);for(;h<y.length;)v=y[h++],z=h<y.length?y[h++]:Number.NaN,o=h<y.length?y[h++]:Number.NaN,q=v>>2,c=(3&v)<<4|z>>4,S=(15&z)<<2|o>>6,x=63&o,isNaN(z)?S=x=64:isNaN(o)&&(x=64),D+=E.charAt(q)+E.charAt(c)+E.charAt(S)+E.charAt(x);return D},q=B=>atob(B),c=B=>{const E=q(B),v=E.length,z=new Uint8Array(new ArrayBuffer(v));for(let o=0;o<v;o++)z[o]=E.charCodeAt(o);return z.buffer}},11353:(B,E,v)=>{function z(B){let E=1;do{E*=2}while(E<B);return E===B}function o(B,E,v){return B*(1-v)+E*v}function q(B){const E=c(B),v=S(B);return E-B>B-v?v:E}function c(B){return B--,B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,B|=B>>16,++B}function S(B){return B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,(B|=B>>16)-(B>>1)}function x(B,E){let v;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:v=S(B);break;case 2:v=q(B);break;default:v=c(B)}return Math.min(v,E)}v.d(E,{e:()=>S,g:()=>x,j:()=>z,k:()=>o,l:()=>q})},11193:(B,E,v)=>{v.r(E),v.d(E,{AsyncLoop:()=>g,Tools:()=>a,className:()=>m});var z=v(11202),o=v(11211),q=v(11213),c=v(11222),S=v(11230),x=v(11235),D=v(11237),h=v(11242),y=v(11249),Q=v(11278),P=v(11342),G=v(11351),Y=v(11353);class a{static get BaseUrl(){return y.h.BaseUrl}static set BaseUrl(B){y.h.BaseUrl=B}static get CleanUrl(){return y.h.CleanUrl}static set CleanUrl(B){y.h.CleanUrl=B}static IsAbsoluteUrl(B){return 0===B.indexOf("//")||-1!==B.indexOf("://")&&(-1!==B.indexOf(".")&&(-1!==B.indexOf("/")&&(!(B.indexOf(":")>B.indexOf("/"))&&(B.indexOf("://")<B.indexOf(".")||(0===B.indexOf("data:")||0===B.indexOf("blob:"))))))}static set ScriptBaseUrl(B){y.h.ScriptBaseUrl=B}static get ScriptBaseUrl(){return y.h.ScriptBaseUrl}static set CDNBaseUrl(B){a.ScriptBaseUrl=B,a.AssetBaseUrl=B}static set ScriptPreprocessUrl(B){y.h.ScriptPreprocessUrl=B}static get ScriptPreprocessUrl(){return y.h.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return y.h.DefaultRetryStrategy}static set DefaultRetryStrategy(B){y.h.DefaultRetryStrategy=B}static get CorsBehavior(){return y.h.CorsBehavior}static set CorsBehavior(B){y.h.CorsBehavior=B}static get UseFallbackTexture(){return h.b.UseFallbackTexture}static set UseFallbackTexture(B){h.b.UseFallbackTexture=B}static get RegisteredExternalClasses(){return P.c.RegisteredExternalClasses}static set RegisteredExternalClasses(B){P.c.RegisteredExternalClasses=B}static get fallbackTexture(){return h.b.FallbackTexture}static set fallbackTexture(B){h.b.FallbackTexture=B}static FetchToRef(B,E,v,z,o,q){const c=4*((Math.abs(B)*v%v|0)+(Math.abs(E)*z%z|0)*v);q.r=o[c]/255,q.g=o[c+1]/255,q.b=o[c+2]/255,q.a=o[c+3]/255}static Mix(B,E,v){return 0}static Instantiate(B){return P.c.Instantiate(B)}static SetImmediate(B){Q.c.SetImmediate(B)}static IsExponentOfTwo(B){return!0}static FloatRound(B){return Math.fround(B)}static GetFilename(B){const E=B.lastIndexOf("/");return E<0?B:B.substring(E+1)}static GetFolderPath(B){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const v=B.lastIndexOf("/");return v<0?E?B:"":B.substring(0,v+1)}static ToDegrees(B){return 180*B/Math.PI}static ToRadians(B){return B*Math.PI/180}static SmoothAngleChange(B,E){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const z=this.ToRadians(B),o=this.ToRadians(E);return this.ToDegrees(Math.atan2((1-v)*Math.sin(o)+v*Math.sin(z),(1-v)*Math.cos(o)+v*Math.cos(z)))}static MakeArray(B,E){return!0===E||void 0!==B&&null!=B?Array.isArray(B)?B:[B]:null}static GetPointerPrefix(B){return(0,o.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(B,E){(0,y.z)(B,E)}static SetReferrerPolicyBehavior(B,E){E.referrerPolicy=B}static get PreprocessUrl(){return y.h.PreprocessUrl}static set PreprocessUrl(B){y.h.PreprocessUrl=B}static LoadImage(B,E,v,z,o,q){return(0,y.t)(B,E,v,z,o,q)}static LoadFile(B,E,v,z,o,q){return(0,y.q)(B,E,v,z,o,q)}static async LoadFileAsync(B){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((v,z)=>{(0,y.q)(B,(B=>{v(B)}),void 0,void 0,E,((B,E)=>{z(E)}))}))}static GetAssetUrl(B){if(!B)return"";if(a.AssetBaseUrl&&B.startsWith(a._DefaultAssetsUrl)){const E="/"===a.AssetBaseUrl[a.AssetBaseUrl.length-1]?a.AssetBaseUrl.substring(0,a.AssetBaseUrl.length-1):a.AssetBaseUrl;return B.replace(a._DefaultAssetsUrl,E)}return B}static GetBabylonScriptURL(B,E){if(!B)return"";if(a.ScriptBaseUrl&&B.startsWith(a._DefaultCdnUrl)){const E="/"===a.ScriptBaseUrl[a.ScriptBaseUrl.length-1]?a.ScriptBaseUrl.substring(0,a.ScriptBaseUrl.length-1):a.ScriptBaseUrl;B=B.replace(a._DefaultCdnUrl,E)}return B=a.ScriptPreprocessUrl(B),E&&(B=a.GetAbsoluteUrl(B)),B}static LoadBabylonScript(B,E,v,z){B=a.GetBabylonScriptURL(B),a.LoadScript(B,E,v)}static async LoadBabylonScriptAsync(B){return B=a.GetBabylonScriptURL(B),await a.LoadScriptAsync(B)}static LoadScript(B,E,v,z){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(B),E&&E()}catch(x){null===v||void 0===v||v(`Unable to load script '${B}' in worker`,x)}return}if(!(0,o.f)())return void(null===v||void 0===v||v(`Cannot load script '${B}' outside of a window or a worker`));const c=document.getElementsByTagName("head")[0],S=document.createElement("script");q?(S.setAttribute("type","module"),S.innerText=B):(S.setAttribute("type","text/javascript"),S.setAttribute("src",B)),z&&(S.id=z),S.onload=()=>{E&&E()},S.onerror=E=>{v&&v(`Unable to load script '${B}'`,E)},c.appendChild(S)}static async LoadScriptAsync(B,E){return await new Promise(((v,z)=>{this.LoadScript(B,(()=>{v()}),((B,E)=>{z(E||new Error(B))}),E)}))}static ReadFileAsDataURL(B,E,v){const o=new FileReader,q={onCompleteObservable:new z.e,abort:()=>o.abort()};return o.onloadend=()=>{q.onCompleteObservable.notifyObservers(q)},o.onload=B=>{E(B.target.result)},o.onprogress=v,o.readAsDataURL(B),q}static ReadFile(B,E,v,z,o){return(0,y.u)(B,E,v,z,o)}static FileAsURL(B){const E=new Blob([B]);return window.URL.createObjectURL(E)}static Format(B){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return B.toFixed(E)}static DeepCopy(B,E,v,z){c.d.DeepCopy(B,E,v,z)}static IsEmpty(B){for(const E in B)if(Object.prototype.hasOwnProperty.call(B,E))return!1;return!0}static RegisterTopRootEvents(B,E){for(let z=0;z<E.length;z++){const o=E[z];B.addEventListener(o.name,o.handler,!1);try{window.parent&&window.parent.addEventListener(o.name,o.handler,!1)}catch(v){}}}static UnregisterTopRootEvents(B,E){for(let z=0;z<E.length;z++){const o=E[z];B.removeEventListener(o.name,o.handler);try{B.parent&&B.parent.removeEventListener(o.name,o.handler)}catch(v){}}}static async DumpFramebuffer(B,E,v,z){throw(0,x.e)("DumpTools")}static DumpData(B,E,v,z){throw(0,x.e)("DumpTools")}static async DumpDataAsync(B,E,v){throw(0,x.e)("DumpTools")}static _IsOffScreenCanvas(B){return void 0!==B.convertToBlob}static ToBlob(B,E){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0;a._IsOffScreenCanvas(B)||B.toBlob||(B.toBlob=function(B,E,v){setTimeout((()=>{const z=atob(this.toDataURL(E,v).split(",")[1]),o=z.length,q=new Uint8Array(o);for(let B=0;B<o;B++)q[B]=z.charCodeAt(B);B(new Blob([q]))}))}),a._IsOffScreenCanvas(B)?B.convertToBlob({type:v,quality:z}).then((B=>E(B))):B.toBlob((function(B){E(B)}),v,z)}static DownloadBlob(B,E){if("download"in document.createElement("a")){if(!E){const B=new Date;E="screenshot_"+((B.getFullYear()+"-"+(B.getMonth()+1)).slice(2)+"-"+B.getDate()+"_"+B.getHours()+"-"+("0"+B.getMinutes()).slice(-2))+".png"}a.Download(B,E)}else if(B&&"undefined"!==typeof URL){const E=URL.createObjectURL(B),v=window.open("");if(!v)return;const z=v.document.createElement("img");z.onload=function(){URL.revokeObjectURL(E)},z.src=E,v.document.body.appendChild(z)}}static EncodeScreenshotCanvasData(B,E){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("string"!==typeof z&&E){if(E){if(a._IsOffScreenCanvas(B))return void B.convertToBlob({type:v,quality:o}).then((B=>{const v=new FileReader;v.readAsDataURL(B),v.onloadend=()=>{const B=v.result;E(B)}}));const z=B.toDataURL(v,o);E(z)}}else this.ToBlob(B,(function(B){B&&a.DownloadBlob(B,z),E&&E("")}),v,o)}static Download(B,E){if("undefined"===typeof URL)return;const v=window.URL.createObjectURL(B),z=document.createElement("a");document.body.appendChild(z),z.style.display="none",z.href=v,z.download=E,z.addEventListener("click",(()=>{z.parentElement&&z.parentElement.removeChild(z)})),z.click(),window.URL.revokeObjectURL(v)}static BackCompatCameraNoPreventDefault(B){return"boolean"===typeof B[0]?B[0]:"boolean"===typeof B[1]&&B[1]}static CreateScreenshot(B,E,v,z){throw(0,x.e)("ScreenshotTools")}static async CreateScreenshotAsync(B,E,v){throw(0,x.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(B,E,v,z){throw(0,x.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(B,E,v){throw(0,x.e)("ScreenshotTools")}static RandomId(){return(0,G.c)()}static IsBase64(B){return(0,y.l)(B)}static DecodeBase64(B){return(0,y.e)(B)}static get errorsCount(){return q.c.errorsCount}static Log(B){q.c.Log(B)}static Warn(B){q.c.Warn(B)}static Error(B){q.c.Error(B)}static get LogCache(){return q.c.LogCache}static ClearLogCache(){q.c.ClearLogCache()}static set LogLevels(B){q.c.LogLevels=B}static set PerformanceLogLevel(B){return(B&a.PerformanceUserMarkLogLevel)===a.PerformanceUserMarkLogLevel?(a.StartPerformanceCounter=a._StartUserMark,void(a.EndPerformanceCounter=a._EndUserMark)):(B&a.PerformanceConsoleLogLevel)===a.PerformanceConsoleLogLevel?(a.StartPerformanceCounter=a._StartPerformanceConsole,void(a.EndPerformanceCounter=a._EndPerformanceConsole)):(a.StartPerformanceCounter=a._StartPerformanceCounterDisabled,void(a.EndPerformanceCounter=a._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(B,E){}static _EndPerformanceCounterDisabled(B,E){}static _StartUserMark(B){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a._Performance){if(!(0,o.f)())return;a._Performance=window.performance}E&&a._Performance.mark&&a._Performance.mark(B+"-Begin")}static _EndUserMark(B){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&a._Performance.mark&&(a._Performance.mark(B+"-End"),a._Performance.measure(B,B+"-Begin",B+"-End"))}static _StartPerformanceConsole(B){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(a._StartUserMark(B,E),console.time&&console.time(B))}static _EndPerformanceConsole(B){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(a._EndUserMark(B,E),console.timeEnd(B))}static get Now(){return S.e.Now}static GetClassName(B){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=null;if(!E&&B.getClassName)v=B.getClassName();else{if(B instanceof Object){v=(E?B:Object.getPrototypeOf(B)).constructor.__bjsclassName__}v||(v=typeof B)}return v}static First(B,E){for(const v of B)if(E(v))return v;return null}static getFullClassName(B){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=null,z=null;if(!E&&B.getClassName)v=B.getClassName();else{if(B instanceof Object){const o=E?B:Object.getPrototypeOf(B);v=o.constructor.__bjsclassName__,z=o.constructor.__bjsmoduleName__}v||(v=typeof B)}return v?(null!=z?z+".":"")+v:null}static async DelayAsync(B){await new Promise((E=>{setTimeout((()=>{E()}),B)}))}static IsSafari(){return!!(0,o.d)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function m(B,E){return v=>{v.__bjsclassName__=B,v.__bjsmoduleName__=null!=E?E:null}}a.AssetBaseUrl="",a.UseCustomRequestHeaders=!1,a.CustomRequestHeaders=D.b.CustomRequestHeaders,a.GetDOMTextContent=o.b,a._DefaultCdnUrl="https://cdn.babylonjs.com",a._DefaultAssetsUrl="https://assets.babylonjs.com/core",a.GetAbsoluteUrl="object"===typeof document?B=>{const E=document.createElement("a");return E.href=B,E.href}:"function"===typeof URL&&"object"===typeof location?B=>new URL(B,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},a.NoneLogLevel=q.c.NoneLogLevel,a.MessageLogLevel=q.c.MessageLogLevel,a.WarningLogLevel=q.c.WarningLogLevel,a.ErrorLogLevel=q.c.ErrorLogLevel,a.AllLogLevel=q.c.AllLogLevel,a.IsWindowObjectExist=o.f,a.PerformanceNoneLogLevel=0,a.PerformanceUserMarkLogLevel=1,a.PerformanceConsoleLogLevel=2,a.StartPerformanceCounter=a._StartPerformanceCounterDisabled,a.EndPerformanceCounter=a._EndPerformanceCounterDisabled;class g{constructor(B,E,v){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=B,this.index=z-1,this._done=!1,this._fn=E,this._successCallback=v}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(B,E,v){const z=new g(B,E,v,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return z.executeNext(),z}static SyncAsyncForLoop(B,E,v,z,o){let q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return g.Run(Math.ceil(B/E),(z=>{o&&o()?z.breakLoop():setTimeout((()=>{for(let q=0;q<E;++q){const c=z.index*E+q;if(c>=B)break;if(v(c),o&&o()){z.breakLoop();break}}z.executeNext()}),q)}),z)}}a.Mix=Y.k,a.IsExponentOfTwo=Y.j,h.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11345:(B,E,v)=>{v.d(E,{b:()=>q,f:()=>o});const z={};function o(B,E){z[B]=E}function q(B){return z[B]}},11237:(B,E,v)=>{v.d(E,{b:()=>z});class z{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(z.CustomRequestHeaders).length>0||z.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const B in z.CustomRequestHeaders){const E=z.CustomRequestHeaders[B];E&&this._xhr.setRequestHeader(B,E)}}_shouldSkipRequestModifications(B){return z.SkipRequestModificationForBabylonCDN&&(B.includes("preview.babylonjs.com")||B.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(B){this._xhr.onprogress=B}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(B){this._xhr.responseType=B}get timeout(){return this._xhr.timeout}set timeout(B){this._xhr.timeout=B}addEventListener(B,E,v){this._xhr.addEventListener(B,E,v)}removeEventListener(B,E,v){this._xhr.removeEventListener(B,E,v)}abort(){this._xhr.abort()}send(B){z.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(B)}open(B,E){for(const v of z.CustomRequestModifiers){if(this._shouldSkipRequestModifications(E))return;E=v(this._xhr,E)||E}E=(E=E.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=E,this._xhr.open(B,E,!0)}setRequestHeader(B,E){this._xhr.setRequestHeader(B,E)}getResponseHeader(B){return this._xhr.getResponseHeader(B)}}z.CustomRequestHeaders={},z.CustomRequestModifiers=new Array,z.SkipRequestModificationForBabylonCDN=!0}}]);