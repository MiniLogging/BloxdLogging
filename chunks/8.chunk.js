"use strict";(self.hmihoa2fs98=self.hmihoa2fs98||[]).push([[8],{11574:(b,d,P)=>{P.d(d,{e:()=>Z});var G=P(11535),W=P(11504),i=P(11582),q=P(11614),C=P(11517);class J{constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,b&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(b){this._zOffset!==b&&(this._zOffset=b,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(b){this._zOffsetUnits!==b&&(this._zOffsetUnits=b,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(b){this._cullFace!==b&&(this._cullFace=b,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(b){this._cull!==b&&(this._cull=b,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(b){this._depthFunc!==b&&(this._depthFunc=b,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(b){this._depthMask!==b&&(this._depthMask=b,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(b){this._depthTest!==b&&(this._depthTest=b,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(b){this._frontFace!==b&&(this._frontFace=b,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(b){this.isDirty&&(this._isCullDirty&&(this.cull?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(b.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(b.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(b.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(b.enable(b.POLYGON_OFFSET_FILL),b.polygonOffset(this.zOffset,this.zOffsetUnits)):b.disable(b.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(b.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class L{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(b){this._func!==b&&(this._func=b,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(b){this._funcRef!==b&&(this._funcRef=b,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(b){this._funcMask!==b&&(this._funcMask=b,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(b){this._opStencilFail!==b&&(this._opStencilFail=b,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(b){this._opDepthFail!==b&&(this._opDepthFail=b,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(b){this._opStencilDepthPass!==b&&(this._opStencilDepthPass=b,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(b){this._mask!==b&&(this._mask=b,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(b){this._enabled!==b&&(this._enabled=b,this._isStencilTestDirty=!0)}constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,b&&this.reset()}reset(){var b;this.stencilMaterial=void 0,null===(b=this.stencilGlobal)||void 0===b||b.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(b){var d;if(!b)return;const P=!this.useStencilGlobalOnly&&!(null===(d=this.stencilMaterial)||void 0===d||!d.enabled);this.enabled=P?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=P?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=P?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=P?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=P?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=P?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=P?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=P?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(b.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(b.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(b.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class x{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=x.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=x.KEEP,this.opDepthFail=x.KEEP,this.opStencilDepthPass=x.REPLACE}get stencilFunc(){return this.func}set stencilFunc(b){this.func=b}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(b){this.funcRef=b}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(b){this.funcMask=b}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(b){this.opStencilFail=b}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(b){this.opDepthFail=b}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(b){this.opStencilDepthPass=b}get stencilMask(){return this.mask}set stencilMask(b){this.mask=b}get stencilTest(){return this.enabled}set stencilTest(b){this.enabled=b}}x.ALWAYS=519,x.KEEP=7680,x.REPLACE=7681;class Y{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(b){this._alphaBlend!==b&&(this._alphaBlend=b,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(b,d,P,G){this._blendConstants[0]===b&&this._blendConstants[1]===d&&this._blendConstants[2]===P&&this._blendConstants[3]===G||(this._blendConstants[0]=b,this._blendConstants[1]=d,this._blendConstants[2]=P,this._blendConstants[3]=G,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(b,d,P,G){this._blendFunctionParameters[0]===b&&this._blendFunctionParameters[1]===d&&this._blendFunctionParameters[2]===P&&this._blendFunctionParameters[3]===G||(this._blendFunctionParameters[0]=b,this._blendFunctionParameters[1]=d,this._blendFunctionParameters[2]=P,this._blendFunctionParameters[3]=G,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(b,d){this._blendEquationParameters[0]===b&&this._blendEquationParameters[1]===d||(this._blendEquationParameters[0]=b,this._blendEquationParameters[1]=d,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(b){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?b.enable(b.BLEND):b.disable(b.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(b.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(b.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(b.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var s=P(11525),E=P(11619),w=P(11495),t=P(11487),r=P(11561),B=P(11631);function n(b,d){if((0,w.j)()){const{requestAnimationFrame:P}=d||window;if("function"===typeof P)return P(b)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(b);return setTimeout(b,16)}class Z{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(b){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(b){b!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=b,this._depthCullingState.depthFunc=b?518:515)}setColorWrite(b){b!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=b)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(b){if(b)return this.isNDCHalfZRange?b.IS_NDC_HALF_ZRANGE="":delete b.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?b.USE_REVERSE_DEPTHBUFFER="":delete b.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?b.USE_EXACT_SRGB_CONVERSIONS="":delete b.USE_EXACT_SRGB_CONVERSIONS);{let b="";return this.isNDCHalfZRange&&(b+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(b&&(b+="\n"),b+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(b&&(b+="\n"),b+="#define USE_EXACT_SRGB_CONVERSIONS"),b}}_rebuildInternalTextures(){const b=this._internalTexturesCache.slice();for(const d of b)d._rebuild()}_rebuildRenderTargetWrappers(){const b=this._renderTargetWrapperCache.slice();for(const d of b)d._rebuild()}_rebuildEffects(){for(const b in this._compiledEffects){const d=this._compiledEffects[b];d._pipelineContext=null,d._prepareEffect()}i.Effect.ResetCache()}_rebuildGraphicsResources(){var b;this.wipeCaches(!0),this._rebuildEffects(),null===(b=this._rebuildComputeEffects)||void 0===b||b.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){W.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(b){setTimeout((()=>{this._clearEmptyResources();const d=this._depthCullingState.depthTest,P=this._depthCullingState.depthFunc,G=this._depthCullingState.depthMask,W=this._stencilState.stencilTest;b(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=d,this._depthCullingState.depthFunc=P,this._depthCullingState.depthMask=G,this._stencilState.stencilTest=W,this._flagContextRestored()}),0)}get L(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(b){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(b){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const b=new Uint8Array(4),d=[b,b,b,b,b,b];this._emptyCubeTexture=this.createRawCubeTexture(d,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(b){if(!b)return this._activeRenderLoops.length=0,void this._cancelFrame();const d=this._activeRenderLoops.indexOf(b);d>=0&&(this._activeRenderLoops.splice(d,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const b=this._frameHandler;if(this._frameHandler=0,(0,w.j)()){const{cancelAnimationFrame:d}=this.getHostWindow()||window;if("function"===typeof d)return d(b)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(b);return clearTimeout(b)}}wd(){this.onBeginFrameObservable.notifyObservers(this)}td(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(b){this._maxFPS=b,void 0!==b&&(this._minFrameTime=b<=0?Number.MAX_VALUE:1e3/b)}_isOverFrameTime(b){if(!b||void 0===this._maxFPS)return!1;const d=b-this._lastFrameTime;return this._lastFrameTime=b,this._renderAccumulator+=d,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(b){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(b)){let b=!0;(this.L||!this.renderEvenInBackground&&this._windowIsBackground)&&(b=!1),b&&(this.wd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.td())}}_renderLoop(b){this._processFrame(b),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let b=0;b<this._activeRenderLoops.length;b++){(0,this._activeRenderLoops[b])()}}_renderViews(){return!1}_queueNewFrame(b,d){return n(b,d)}runRenderLoop(b){-1===this._activeRenderLoops.indexOf(b)&&(this._activeRenderLoops.push(b),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(b){this._depthCullingState.depthTest=b}setZOffset(b){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-b:b}getZOffset(){const b=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-b:b}setZOffsetUnits(b){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-b:b}getZOffsetUnits(){const b=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-b:b}getHostWindow(){return(0,w.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(b){this._compatibilityMode=!0}_rebuildTextures(){for(const b of this.scenes)b._rebuildTextures();for(const b of this._virtualScenes)b._rebuildTextures()}_releaseRenderTargetWrapper(b){const d=this._renderTargetWrapperCache.indexOf(b);-1!==d&&this._renderTargetWrapperCache.splice(d,1)}get currentViewport(){return this._cachedViewport}setViewport(b,d,P){const G=d||this.getRenderWidth(),W=P||this.getRenderHeight(),i=b.x||0,q=b.y||0;this._cachedViewport=b,this._viewport(i*G,q*W,G*b.width,W*b.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(b){return new Path2D(b)}get description(){let b=this.name+this.version;return this._caps.parallelShaderCompile&&(b+=" - Parallel shader compilation"),b}_createTextureBase(b,d,P,i){let q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,J=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,L=arguments.length>7?arguments[7]:void 0,x=arguments.length>8?arguments[8]:void 0,Y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,w=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,t=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,r=arguments.length>13?arguments[13]:void 0,n=arguments.length>14?arguments[14]:void 0,o=arguments.length>15?arguments[15]:void 0;const A="data:"===(b=b||"").substring(0,5),f="blob:"===b.substring(0,5),g=A&&-1!==b.indexOf(";base64,"),X=s||new E.e(this,1);X!==s&&(X.label=b.substring(0,60));const u=b;!this._transformTextureUrl||g||s||Y||(b=this._transformTextureUrl(b)),u!==b&&(X._originalUrl=u);const M=b.lastIndexOf(".");let e=t||(M>-1?b.substring(M).toLowerCase():"");e.indexOf("?")>-1&&(e=e.split("?")[0]);const R=(0,B.c)(e,r);i&&i.addPendingData(X),X.url=b,X.generateMipMaps=!d,X.samplingMode=q,X.invertY=P,X._useSRGBBuffer=this._getUseSRGBBuffer(!!o,d),this._doNotHandleContextLost||(X._buffer=Y);let U=null;C&&!s&&(U=X.onLoadedObservable.add(C)),s||this._internalTexturesCache.push(X);const H=(P,s)=>{i&&i.removePendingData(X),b===u?(U&&X.onLoadedObservable.remove(U),G.e.UseFallbackTexture&&b!==G.e.FallbackTexture&&this._createTextureBase(G.e.FallbackTexture,d,X.invertY,i,q,null,J,L,x,Y,X),P=(P||"Unknown error")+(G.e.UseFallbackTexture?" - Fallback texture was used":""),X.onErrorObservable.notifyObservers({message:P,exception:s}),J&&J(P,s)):(W.e.Warn(`Failed to load ${b}, falling back to ${u}`),this._createTextureBase(u,d,X.invertY,i,q,C,J,L,x,Y,X,w,t,r,n,o))};if(R){const d=async b=>{(await R).loadData(b,X,((b,d,P,G,W,C)=>{C?H("TextureLoader failed to load data"):L(X,e,i,{width:b,height:d},X.invertY,!P,G,(()=>(W(),!1)),q)}),n)};Y?Y instanceof ArrayBuffer?d(new Uint8Array(Y)):ArrayBuffer.isView(Y)?d(Y):J&&J("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(b,(b=>{d(new Uint8Array(b))}),void 0,i?i.offlineProvider:void 0,!0,((b,d)=>{H("Unable to load "+(b&&b.responseURL,d))}))}else{const P=b=>{f&&!this._doNotHandleContextLost&&(X._buffer=b),L(X,e,i,b,X.invertY,d,!1,x,q)};!A||g?Y&&("string"===typeof Y.decoding||Y.close)?P(Y):Z._FileToolsLoadImage(b||"",P,H,i?i.offlineProvider:null,r,X.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Y||Y instanceof ArrayBuffer||ArrayBuffer.isView(Y)||Y instanceof Blob?Z._FileToolsLoadImage(Y,P,H,i?i.offlineProvider:null,r,X.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Y&&P(Y)}return X}_rebuildBuffers(){for(const b of this._uniformBuffers)b._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,w.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const b in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,b)&&(this._boundTexturesCache[b]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(b){this._name=b}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(b){this._hardwareScalingLevel=b,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(b){this._doNotHandleContextLost=b}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(b,d,P){var W,i;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new J,this._stencilStateComposer=new L,this._stencilState=new x,this._alphaState=new Y,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new t.d,this.onCanvasFocusObservable=new t.d,this.onNewSceneAddedObservable=new t.d,this.onResizeObservable=new t.d,this.onCanvasPointerOutObservable=new t.d,this.onEffectErrorObservable=new t.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new t.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=b=>this._renderLoop(b),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new t.d,this.onAfterShaderCompilationObservable=new t.d,this.onBeginFrameObservable=new t.d,this.onEndFrameObservable=new t.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new t.d,this.onContextRestoredObservable=new t.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Zd=new t.d,this.onReleaseEffectsObservable=new t.d,G.e.Instances.push(this),this.startTime=C.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,q.c.SetMatrixPrecision(!!d.useHighPrecisionMatrix),(0,w.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=P??!1,d.antialias=b??d.antialias,d.deterministicLockstep=d.deterministicLockstep??!1,d.lockstepMaxSteps=d.lockstepMaxSteps??4,d.timeStep=d.timeStep??1/60,d.stencil=d.stencil??!0,this._audioContext=(null===(W=d.audioEngineOptions)||void 0===W?void 0:W.audioContext)??null,this._audioDestination=(null===(i=d.audioEngineOptions)||void 0===i?void 0:i.audioDestination)??null,this.premultipliedAlpha=d.premultipliedAlpha??!0,this._doNotHandleContextLost=!!d.doNotHandleContextLost,this._isStencilEnable=!!d.stencil,this.useExactSrgbConversions=d.useExactSrgbConversions??!1;const s=(0,w.j)()&&window.devicePixelRatio||1,E=d.limitDeviceRatio||s;P=P||d.adaptToDeviceRatio||!1,this._hardwareScalingLevel=P?1/Math.min(E,s):1,this._lastDevicePixelRatio=s,this._creationOptions=d}resize(){let b,d,P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const b=(0,w.j)()&&window.devicePixelRatio||1,d=this._lastDevicePixelRatio/b;this._lastDevicePixelRatio=b,this._hardwareScalingLevel*=d}if((0,w.j)()&&(0,w.h)())if(this._renderingCanvas){var G,W;const P=null===(G=(W=this._renderingCanvas).getBoundingClientRect)||void 0===G?void 0:G.call(W);b=this._renderingCanvas.clientWidth||(null===P||void 0===P?void 0:P.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,d=this._renderingCanvas.clientHeight||(null===P||void 0===P?void 0:P.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else b=window.innerWidth,d=window.innerHeight;else b=this._renderingCanvas?this._renderingCanvas.width:100,d=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(b/this._hardwareScalingLevel,d/this._hardwareScalingLevel,P)}setSize(b,d){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(b|=0,d|=0,!P&&this._renderingCanvas.width===b&&this._renderingCanvas.height===d)return!1;if(this._renderingCanvas.width=b,this._renderingCanvas.height=d,this.scenes){for(let b=0;b<this.scenes.length;b++){const d=this.scenes[b];for(let b=0;b<d.cameras.length;b++){d.cameras[b]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(b,d,P,G,W,i,q,C,J,L,x){throw(0,s.d)("engine.rawTexture")}createRawCubeTexture(b,d,P,G,W,i,q,C){throw(0,s.d)("engine.rawTexture")}createRawTexture3D(b,d,P,G,W,i,q,C,J,L,x){throw(0,s.d)("engine.rawTexture")}createRawTexture2DArray(b,d,P,G,W,i,q,C,J,L,x){throw(0,s.d)("engine.rawTexture")}_sharedInit(b){this._renderingCanvas=b}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const b=navigator.userAgent;this.hostInformation.isMobile=-1!==b.indexOf("Mobile")||-1!==b.indexOf("Mac")&&(0,w.h)()&&"ontouchend"in document},this._checkForMobile(),(0,w.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(b){return document.createElement("video")}_reportDrawCall(){var b;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(b=this._drawCalls)||void 0===b||b.addCount(d,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(b,d){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(b,d){return createImageBitmap(b,d)}resizeImageBitmap(b,d,P){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(b){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(b,d){if("undefined"===typeof document)return new OffscreenCanvas(b,d);const P=document.createElement("canvas");return P.width=b,P.height=d,P}createCanvas(b,d){return Z._CreateCanvas(b,d)}static _FileToolsLoadImage(b,d,P,G,W,i,q){throw(0,s.d)("FileTools")}_loadFile(b,d,P,G,W,i){const q=(0,r.o)(b,d,P,G,W,i);return this._activeRequests.push(q),q.onCompleteObservable.add((()=>{const b=this._activeRequests.indexOf(q);-1!==b&&this._activeRequests.splice(b,1)})),q}static _FileToolsLoadFile(b,d,P,G,W,i){if(r.e.loadFile)return r.e.loadFile(b,d,P,G,W,i);throw(0,s.d)("FileTools")}dispose(){var b;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(b=this.releaseComputeEffects)||void 0===b||b.call(this),i.Effect.ResetCache();for(const P of this._activeRequests)P.abort();this._boundRenderFunction=null,this.Zd.notifyObservers(this),this.Zd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,w.j)()&&window.removeEventListener("resize",this._checkForMobile);const d=G.e.Instances.indexOf(this);d>=0&&G.e.Instances.splice(d,1),G.e.Instances.length||(G.e.OnEnginesDisposedObservable.notifyObservers(this),G.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(b){throw(0,s.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(b,d){for(let P=0;P<G.e.Instances.length;P++){const W=G.e.Instances[P];for(let P=0;P<W.scenes.length;P++)W.scenes[P].markAllMaterialsAsDirty(b,d)}}}Z._RenderPassIdCounter=0,Z._RescalePostProcessFactory=null,Z.CollisionsEpsilon=.001,Z.QueueNewFrame=n},11535:(b,d,P)=>{P.d(d,{e:()=>W});var G=P(11487);class W{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}W.Instances=[],W.OnEnginesDisposedObservable=new G.d,W._LastCreatedScene=null,W.UseFallbackTexture=!0,W.FallbackTexture=""},11614:(b,d,P)=>{P.d(d,{c:()=>G});class G{static SetMatrixPrecision(b){if(G.MatrixTrackPrecisionChange=!1,b&&!G.MatrixUse64Bits&&G.MatrixTrackedMatrices)for(let d=0;d<G.MatrixTrackedMatrices.length;++d){const b=G.MatrixTrackedMatrices[d],P=b.od;b.od=new Array(16);for(let d=0;d<16;++d)b.od[d]=P[d]}G.MatrixUse64Bits=b,G.MatrixCurrentType=G.MatrixUse64Bits?Array:Float32Array,G.MatrixTrackedMatrices=null}}G.MatrixUse64Bits=!1,G.MatrixTrackPrecisionChange=!0,G.MatrixCurrentType=Float32Array,G.MatrixTrackedMatrices=[]},11631:(b,d,P)=>{P.d(d,{c:()=>q});var G=P(11504);const W=new Map;function i(b,d){(function(b){return W.delete(b)})(b)&&G.e.Warn(`Extension with the name '${b}' already exists`),W.set(b,d)}function q(b,d){"image/ktx"!==d&&"image/ktx2"!==d||(b=".ktx"),W.has(b)||(b.endsWith(".ies")&&i(".ies",(async()=>await P.e(15).then(P.bind(P,14079)).then((b=>new b._IESTextureLoader)))),b.endsWith(".dds")&&i(".dds",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(28)]).then(P.bind(P,14084)).then((b=>new b._DDSTextureLoader)))),b.endsWith(".basis")&&i(".basis",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(47)]).then(P.bind(P,14093)).then((b=>new b._BasisTextureLoader)))),b.endsWith(".env")&&i(".env",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(23),P.e(21),P.e(45),P.e(48)]).then(P.bind(P,14100)).then((b=>new b._ENVTextureLoader)))),b.endsWith(".hdr")&&i(".hdr",(async()=>await Promise.all([P.e(14),P.e(49)]).then(P.bind(P,14104)).then((b=>new b._HDRTextureLoader)))),(b.endsWith(".ktx")||b.endsWith(".ktx2"))&&(i(".ktx",(async()=>await P.e(30).then(P.bind(P,14108)).then((b=>new b._KTXTextureLoader)))),i(".ktx2",(async()=>await P.e(30).then(P.bind(P,14108)).then((b=>new b._KTXTextureLoader))))),b.endsWith(".tga")&&i(".tga",(async()=>await P.e(50).then(P.bind(P,14117)).then((b=>new b._TGATextureLoader)))),b.endsWith(".exr")&&i(".exr",(async()=>await P.e(16).then(P.bind(P,14121)).then((b=>new b._ExrTextureLoader)))));const G=W.get(b);return G?Promise.resolve(G(d)):null}},11619:(b,d,P)=>{P.d(d,{e:()=>q});var G,W=P(11487),i=P(11623);!function(b){b[b.Unknown=0]="Unknown",b[b.Url=1]="Url",b[b.Temp=2]="Temp",b[b.Raw=3]="Raw",b[b.Dynamic=4]="Dynamic",b[b.RenderTarget=5]="RenderTarget",b[b.MultiRenderTarget=6]="MultiRenderTarget",b[b.Cube=7]="Cube",b[b.CubeRaw=8]="CubeRaw",b[b.CubePrefiltered=9]="CubePrefiltered",b[b.Raw3D=10]="Raw3D",b[b.Raw2DArray=11]="Raw2DArray",b[b.DepthStencil=12]="DepthStencil",b[b.CubeRawRGBD=13]="CubeRawRGBD",b[b.Depth=14]="Depth"}(G||(G={}));class q extends i.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(b){this.generateMipMaps=b}get uniqueId(){return this._uniqueId}_setUniqueId(b){this._uniqueId=b}getEngine(){return this._engine}get source(){return this._source}constructor(b,d){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new W.d,this.onErrorObservable=new W.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=b,this._source=d,this._uniqueId=q._Counter++,P||(this._hardwareTexture=b._createHardwareTexture())}incrementReferences(){this._references++}updateSize(b,d){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,b,d,P),this.width=b,this.height=d,this.depth=P,this.baseWidth=b,this.baseHeight=d,this.baseDepth=P,this._size=b*d*P}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const b=this.onRebuildCallback(this),d=d=>{d._swapAndDie(this,!1),this.isReady=b.isReady};return void(b.isAsync?b.proxy.then(d):d(b.proxy))}let b;switch(this.source){case 2:case 12:case 14:break;case 1:return void(b=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(b=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:b=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),b._swapAndDie(this,!1),this.isReady=!0;break;case 10:b=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 11:b=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 4:b=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),b._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(b=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:b=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),b._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return b=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(b=>{b&&b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(b._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(b){var d;let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(d=this._hardwareTexture)||void 0===d||d.setUsage(b._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),b._hardwareTexture=this._hardwareTexture,P&&(b._isRGBD=this._isRGBD),this._lodTextureHigh&&(b._lodTextureHigh&&b._lodTextureHigh.dispose(),b._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(b._lodTextureMid&&b._lodTextureMid.dispose(),b._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(b._lodTextureLow&&b._lodTextureLow.dispose(),b._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(b._irradianceTexture&&b._irradianceTexture.dispose(),b._irradianceTexture=this._irradianceTexture);const G=this._engine.getLoadedTexturesCache();let W=G.indexOf(this);-1!==W&&G.splice(W,1),W=G.indexOf(b),-1===W&&G.push(b)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}q._Counter=0},11623:(b,d,P)=>{P.d(d,{b:()=>G});class G{get wrapU(){return this._cachedWrapU}set wrapU(b){this._cachedWrapU=b}get wrapV(){return this._cachedWrapV}set wrapV(b){this._cachedWrapV=b}get wrapR(){return this._cachedWrapR}set wrapR(b){this._cachedWrapR=b}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(b){this._cachedAnisotropicFilteringLevel=b}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(b){this._comparisonFunction=b}get useMipMaps(){return this._useMipMaps}set useMipMaps(b){this._useMipMaps=b}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=b,this._cachedWrapV=d,this._cachedWrapR=P,this._cachedAnisotropicFilteringLevel=G,this.samplingMode=W,this._comparisonFunction=i,this}compareSampler(b){return this._cachedWrapU===b._cachedWrapU&&this._cachedWrapV===b._cachedWrapV&&this._cachedWrapR===b._cachedWrapR&&this._cachedAnisotropicFilteringLevel===b._cachedAnisotropicFilteringLevel&&this.samplingMode===b.samplingMode&&this._comparisonFunction===b._comparisonFunction&&this._useMipMaps===b._useMipMaps}}},11510:(b,d,P)=>{P.d(d,{b:()=>i});var G=P(11504);const W=(b,d,P)=>b?b.getClassName&&"Mesh"===b.getClassName()?null:!b.getClassName||"SubMesh"!==b.getClassName()&&"PhysicsBody"!==b.getClassName()?b.clone?b.clone():Array.isArray(b)?b.slice():P&&"object"===typeof b?{...b}:null:b.clone(d):null;class i{static DeepCopy(b,d,P,i){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const C=function(b){const d=[];do{const P=Object.getOwnPropertyNames(b);for(const b of P)-1===d.indexOf(b)&&d.push(b)}while(b=Object.getPrototypeOf(b));return d}(b);for(const L of C){if("_"===L[0]&&(!i||-1===i.indexOf(L)))continue;if(L.endsWith("Observable"))continue;if(P&&-1!==P.indexOf(L))continue;const C=b[L],x=typeof C;if("function"!==x)try{if("object"===x)if(C instanceof Uint8Array)d[L]=Uint8Array.from(C);else if(C instanceof Array){if(d[L]=[],C.length>0)if("object"==typeof C[0])for(let b=0;b<C.length;b++){const P=W(C[b],d,q);-1===d[L].indexOf(P)&&d[L].push(P)}else d[L]=C.slice(0)}else d[L]=W(C,d,q);else d[L]=C}catch(J){G.e.Warn(J.message)}}}}},11546:(b,d,P)=>{P.d(d,{b:()=>G,c:()=>W,d:()=>i});class G extends Error{}G._setPrototypeOf=Object.setPrototypeOf||((b,d)=>(b.__proto__=d,b));const W={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class i extends G{constructor(b,d,P){super(b),this.errorCode=d,this.innerError=P,this.name="RuntimeError",G._setPrototypeOf(this,i.prototype)}}},11539:(b,d,P)=>{P.d(d,{d:()=>H,e:()=>Z,h:()=>M,k:()=>R,o:()=>X,m:()=>r,r:()=>f,t:()=>g,v:()=>u,z:()=>o});var G=P(11531),W=P(11495),i=P(11487);class q{}q.FilesToLoad={};var C=P(11546),J=P(11551),L=P(11556),x=P(11535),Y=P(11504),s=P(11569),E=P(11561),w=P(11574);const t=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class r extends C.d{constructor(b,d){super(b,C.c.LoadFileError),this.name="LoadFileError",C.b._setPrototypeOf(this,r.prototype),d instanceof G.c?this.request=d:this.file=d}}class B extends C.d{constructor(b,d){super(b,C.c.RequestFileError),this.request=d,this.name="RequestFileError",C.b._setPrototypeOf(this,B.prototype)}}class n extends C.d{constructor(b,d){super(b,C.c.ReadFileError),this.file=d,this.name="ReadFileError",C.b._setPrototypeOf(this,n.prototype)}}const Z={DefaultRetryStrategy:class{static ExponentialBackoff(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(P,G,W)=>0!==G.status||W>=b||-1!==P.indexOf("file:")?-1:Math.pow(2,W)*d}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:b=>b,ScriptBaseUrl:"",ScriptPreprocessUrl:b=>b,CleanUrl:b=>b=b.replace(/#/gm,"%23")},o=(b,d)=>{if((!b||0!==b.indexOf("data:"))&&Z.CorsBehavior)if("string"===typeof Z.CorsBehavior||Z.CorsBehavior instanceof String)d.crossOrigin=Z.CorsBehavior;else{const P=Z.CorsBehavior(b);P&&(d.crossOrigin=P)}},A={getRequiredSize:null},f=function(b,d,P,W){let i,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",L=arguments.length>5?arguments[5]:void 0,Y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:x.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Y||void 0===Y||!Y._features.forceBitmapOverHTMLImageElement))return P("LoadImage is only supported in web or BabylonNative environments."),null;let s=!1;b instanceof ArrayBuffer||ArrayBuffer.isView(b)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(i=URL.createObjectURL(new Blob([b],{type:C})),s=!0):i=`data:${C};base64,`+(0,J.l)(b):b instanceof Blob?(i=URL.createObjectURL(b),s=!0):(i=Z.CleanUrl(b),i=Z.PreprocessUrl(i));const E=d=>{if(P){const G=i||b.toString();P(`Error while trying to load image: ${0===G.indexOf("http")||G.length<=128?G:G.slice(0,128)+"..."}`,d)}};if(null!==Y&&void 0!==Y&&Y._features.forceBitmapOverHTMLImageElement)return X(i,(G=>{Y.createImageBitmap(new Blob([G],{type:C}),{premultiplyAlpha:"none",...L}).then((b=>{d(b),s&&URL.revokeObjectURL(i)})).catch((d=>{P&&P("Error while trying to load image: "+b,d)}))}),void 0,W||void 0,!0,((b,d)=>{E(d)})),null;const w=new Image;if(A.getRequiredSize){const d=A.getRequiredSize(b);d.width&&(w.width=d.width),d.height&&(w.height=d.height)}o(i,w);const t=[],r=()=>{for(const b of t)b.target.removeEventListener(b.name,b.handler);t.length=0};t.push({target:w,name:"load",handler:()=>{r(),d(w),s&&w.src&&URL.revokeObjectURL(w.src)}}),t.push({target:w,name:"error",handler:b=>{r(),E(b),s&&w.src&&URL.revokeObjectURL(w.src)}}),t.push({target:document,name:"securitypolicyviolation",handler:b=>{if(b.blockedURI!==w.src||"Ad"===b.disposition)return;r();const d=new Error(`CSP violation of policy ${b.effectiveDirective} ${b.blockedURI}. Current policy is ${b.originalPolicy}`);x.e.UseFallbackTexture=!1,E(d),s&&w.src&&URL.revokeObjectURL(w.src),w.src=""}}),(()=>{for(const b of t)b.target.addEventListener(b.name,b.handler)})();const B="blob:"===i.substring(0,5),n="data:"===i.substring(0,5),f=()=>{B||n||!G.c.IsCustomRequestAvailable?w.src=i:X(i,((b,d,P)=>{const G=new Blob([b],{type:!C&&P?P:C}),W=URL.createObjectURL(G);s=!0,w.src=W}),void 0,W||void 0,!0,((b,d)=>{E(d)}))},g=()=>{W&&W.loadImage(i,w)};if(!B&&!n&&W&&W.enableTexturesOffline)W.open(g,f);else{if(-1!==i.indexOf("file:")){const b=decodeURIComponent(i.substring(5).toLowerCase());if(q.FilesToLoad[b]&&"undefined"!==typeof URL){try{let d;try{d=URL.createObjectURL(q.FilesToLoad[b])}catch(u){d=URL.createObjectURL(q.FilesToLoad[b])}w.src=d,s=!0}catch(M){w.src=""}return w}}f()}return w},g=(b,d,P,G,W)=>{const q=new FileReader,C={onCompleteObservable:new i.d,abort:()=>q.abort()};return q.onloadend=()=>C.onCompleteObservable.notifyObservers(C),W&&(q.onerror=()=>{W(new n(`Unable to read ${b.name}`,b))}),q.onload=b=>{d(b.target.result)},P&&(q.onprogress=P),G?q.readAsArrayBuffer(b):q.readAsText(b),C},X=(b,d,P,G,W,J,L)=>{if(b.name)return g(b,d,P,W,J?b=>{J(void 0,b)}:void 0);const x=b;if(-1!==x.indexOf("file:")){let b=decodeURIComponent(x.substring(5).toLowerCase());0===b.indexOf("./")&&(b=b.substring(2));const G=q.FilesToLoad[b];if(G)return g(G,d,P,W,J?b=>J(void 0,new r(b.message,b.file)):void 0)}const{match:E,type:w}=U(x);if(E){const b={onCompleteObservable:new i.d,abort:()=>()=>{}};try{const b=W?H(x):p(x);d(b,void 0,w)}catch(C){J?J(void 0,C):Y.e.Error(C.message||"Failed to parse the Data URL")}return s.c.SetImmediate((()=>{b.onCompleteObservable.notifyObservers(b)})),b}return u(x,((b,P)=>{d(b,null===P||void 0===P?void 0:P.responseURL,null===P||void 0===P?void 0:P.getResponseHeader("content-type"))}),P,G,W,J?b=>{J(b.request,new r(b.message,b.request))}:void 0,L)},u=(b,d,P,q,C,J,L)=>{b=Z.CleanUrl(b),b=Z.PreprocessUrl(b);const x=Z.BaseUrl+b;let s=!1;const E={onCompleteObservable:new i.d,abort:()=>s=!0},w=()=>{let b,i=new G.c,q=null;const w=()=>{i&&(P&&i.removeEventListener("progress",P),b&&i.removeEventListener("readystatechange",b),i.removeEventListener("loadend",t))};let t=()=>{w(),E.onCompleteObservable.notifyObservers(E),E.onCompleteObservable.clear(),P=void 0,b=null,t=null,J=void 0,L=void 0,d=void 0};E.abort=()=>{s=!0,t&&t(),i&&i.readyState!==(XMLHttpRequest.DONE||4)&&i.abort(),null!==q&&(clearTimeout(q),q=null),i=null};const r=b=>{const d=b.message||"Unknown error";J&&i?J(new B(d,i)):Y.e.Error(d)},n=Y=>{if(i){if(i.open("GET",x),L)try{L(i)}catch(E){return void r(E)}C&&(i.responseType="arraybuffer"),P&&i.addEventListener("progress",P),t&&i.addEventListener("loadend",t),b=()=>{if(!s&&i&&i.readyState===(XMLHttpRequest.DONE||4)){if(b&&i.removeEventListener("readystatechange",b),i.status>=200&&i.status<300||0===i.status&&(!(0,W.j)()||e())){const b=C?i.response:i.responseText;if(null!==b){try{d&&d(b,i)}catch(E){r(E)}return}}const P=Z.DefaultRetryStrategy;if(P){const b=P(x,i,Y);if(-1!==b)return w(),i=new G.c,void(q=setTimeout((()=>n(Y+1)),b))}const L=new B("Error status: "+i.status+" "+i.statusText+" - Unable to load "+x,i);J&&J(L)}},i.addEventListener("readystatechange",b),i.send()}};n(0)};if(q&&q.enableSceneOffline){const G=b=>{b&&b.status>400?J&&J(b):w()},W=()=>{q&&q.loadFile(Z.BaseUrl+b,(b=>{!s&&d&&d(b),E.onCompleteObservable.notifyObservers(E)}),P?b=>{!s&&P&&P(b)}:void 0,G,C)};q.open(W,G)}else w();return E},M=b=>{const{match:d,type:P}=U(b);if(d)return P||void 0;const G=b.lastIndexOf(".");switch(b.substring(G+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"fd":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},e=()=>"undefined"!==typeof location&&"file:"===location.protocol,R=b=>t.test(b),U=b=>{const d=t.exec(b);if(null===d||0===d.length)return{match:!1,type:""};return{match:!0,type:d[0].replace("data:","").replace("base64,","")}};function H(b){return(0,J.c)(b.split(",")[1])}const p=b=>(0,J.g)(b.split(",")[1]);let S;w.e._FileToolsLoadImage=f,E.e.loadFile=X,L.n.loadFile=X;((b,d,P,G,W,i,q,C,J,L)=>{S={DecodeBase64UrlToBinary:b,DecodeBase64UrlToString:d,DefaultRetryStrategy:P.DefaultRetryStrategy,BaseUrl:P.BaseUrl,CorsBehavior:P.CorsBehavior,PreprocessUrl:P.PreprocessUrl,IsBase64DataUrl:G,IsFileURL:W,LoadFile:i,LoadImage:q,ReadFile:C,RequestFile:J,SetCorsBehavior:L},Object.defineProperty(S,"DefaultRetryStrategy",{get:function(){return P.DefaultRetryStrategy},set:function(b){P.DefaultRetryStrategy=b}}),Object.defineProperty(S,"BaseUrl",{get:function(){return P.BaseUrl},set:function(b){P.BaseUrl=b}}),Object.defineProperty(S,"PreprocessUrl",{get:function(){return P.PreprocessUrl},set:function(b){P.PreprocessUrl=b}}),Object.defineProperty(S,"CorsBehavior",{get:function(){return P.CorsBehavior},set:function(b){P.CorsBehavior=b}})})(H,p,Z,R,e,X,f,g,u,o)},11643:(b,d,P)=>{function G(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(b=>{const d=16*Math.random()|0;return("x"===b?d:3&d|8).toString(16)}))}P.d(d,{e:()=>G})},11636:(b,d,P)=>{P.d(d,{c:()=>i});var G=P(11504),W=P(11639);class i{static Instantiate(b){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[b])return this.RegisteredExternalClasses[b];const d=(0,W.d)(b);if(d)return d;G.e.Warn(b+" not found, you may have missed an import.");const P=b.split(".");let i=window||this;for(let G=0,W=P.length;G<W;G++)i=i[P[G]];return"function"!==typeof i?null:i}}i.RegisteredExternalClasses={}},11517:(b,d,P)=>{P.d(d,{c:()=>W});var G=P(11495);class W{static get Now(){return(0,G.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11551:(b,d,P)=>{P.d(d,{c:()=>q,g:()=>i,k:()=>G,l:()=>W});const G=b=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(b);let d="";for(let P=0;P<b.byteLength;P++)d+=String.fromCharCode(b[P]);return d},W=b=>{const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P,G,W,i,q,C,J,L="",x=0;const Y=ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b);for(;x<Y.length;)P=Y[x++],G=x<Y.length?Y[x++]:Number.NaN,W=x<Y.length?Y[x++]:Number.NaN,i=P>>2,q=(3&P)<<4|G>>4,C=(15&G)<<2|W>>6,J=63&W,isNaN(G)?C=J=64:isNaN(W)&&(J=64),L+=d.charAt(i)+d.charAt(q)+d.charAt(C)+d.charAt(J);return L},i=b=>atob(b),q=b=>{const d=i(b),P=d.length,G=new Uint8Array(new ArrayBuffer(P));for(let W=0;W<P;W++)G[W]=d.charCodeAt(W);return G.buffer}},11647:(b,d,P)=>{function G(b){let d=1;do{d*=2}while(d<b);return d===b}function W(b,d,P){return b*(1-P)+d*P}function i(b){const d=q(b),P=C(b);return d-b>b-P?P:d}function q(b){return b--,b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b|=b>>16,++b}function C(b){return b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,(b|=b>>16)-(b>>1)}function J(b,d){let P;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:P=C(b);break;case 2:P=i(b);break;default:P=q(b)}return Math.min(P,d)}P.d(d,{b:()=>C,c:()=>J,g:()=>G,j:()=>W,n:()=>i})},11484:(b,d,P)=>{P.r(d),P.d(d,{AsyncLoop:()=>n,Tools:()=>r,className:()=>B});var G=P(11487),W=P(11495),i=P(11504),q=P(11510),C=P(11517),J=P(11525),L=P(11531),x=P(11535),Y=P(11539),s=P(11569),E=P(11636),w=P(11643),t=P(11647);class r{static get BaseUrl(){return Y.e.BaseUrl}static set BaseUrl(b){Y.e.BaseUrl=b}static get CleanUrl(){return Y.e.CleanUrl}static set CleanUrl(b){Y.e.CleanUrl=b}static IsAbsoluteUrl(b){return 0===b.indexOf("//")||-1!==b.indexOf("://")&&(-1!==b.indexOf(".")&&(-1!==b.indexOf("/")&&(!(b.indexOf(":")>b.indexOf("/"))&&(b.indexOf("://")<b.indexOf(".")||(0===b.indexOf("data:")||0===b.indexOf("blob:"))))))}static set ScriptBaseUrl(b){Y.e.ScriptBaseUrl=b}static get ScriptBaseUrl(){return Y.e.ScriptBaseUrl}static set CDNBaseUrl(b){r.ScriptBaseUrl=b,r.AssetBaseUrl=b}static set ScriptPreprocessUrl(b){Y.e.ScriptPreprocessUrl=b}static get ScriptPreprocessUrl(){return Y.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Y.e.DefaultRetryStrategy}static set DefaultRetryStrategy(b){Y.e.DefaultRetryStrategy=b}static get CorsBehavior(){return Y.e.CorsBehavior}static set CorsBehavior(b){Y.e.CorsBehavior=b}static get UseFallbackTexture(){return x.e.UseFallbackTexture}static set UseFallbackTexture(b){x.e.UseFallbackTexture=b}static get RegisteredExternalClasses(){return E.c.RegisteredExternalClasses}static set RegisteredExternalClasses(b){E.c.RegisteredExternalClasses=b}static get fallbackTexture(){return x.e.FallbackTexture}static set fallbackTexture(b){x.e.FallbackTexture=b}static FetchToRef(b,d,P,G,W,i){const q=4*((Math.abs(b)*P%P|0)+(Math.abs(d)*G%G|0)*P);i.r=W[q]/255,i.g=W[q+1]/255,i.b=W[q+2]/255,i.a=W[q+3]/255}static Mix(b,d,P){return 0}static Instantiate(b){return E.c.Instantiate(b)}static SetImmediate(b){s.c.SetImmediate(b)}static IsExponentOfTwo(b){return!0}static FloatRound(b){return Math.fround(b)}static GetFilename(b){const d=b.lastIndexOf("/");return d<0?b:b.substring(d+1)}static GetFolderPath(b){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=b.lastIndexOf("/");return P<0?d?b:"":b.substring(0,P+1)}static ToDegrees(b){return 180*b/Math.PI}static ToRadians(b){return b*Math.PI/180}static SmoothAngleChange(b,d){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const G=this.ToRadians(b),W=this.ToRadians(d);return this.ToDegrees(Math.atan2((1-P)*Math.sin(W)+P*Math.sin(G),(1-P)*Math.cos(W)+P*Math.cos(G)))}static MakeArray(b,d){return!0===d||void 0!==b&&null!=b?Array.isArray(b)?b:[b]:null}static GetPointerPrefix(b){return(0,W.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(b,d){(0,Y.z)(b,d)}static SetReferrerPolicyBehavior(b,d){d.referrerPolicy=b}static get PreprocessUrl(){return Y.e.PreprocessUrl}static set PreprocessUrl(b){Y.e.PreprocessUrl=b}static LoadImage(b,d,P,G,W,i){return(0,Y.r)(b,d,P,G,W,i)}static LoadFile(b,d,P,G,W,i){return(0,Y.o)(b,d,P,G,W,i)}static async LoadFileAsync(b){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((P,G)=>{(0,Y.o)(b,(b=>{P(b)}),void 0,void 0,d,((b,d)=>{G(d)}))}))}static GetAssetUrl(b){if(!b)return"";if(r.AssetBaseUrl&&b.startsWith(r._DefaultAssetsUrl)){const d="/"===r.AssetBaseUrl[r.AssetBaseUrl.length-1]?r.AssetBaseUrl.substring(0,r.AssetBaseUrl.length-1):r.AssetBaseUrl;return b.replace(r._DefaultAssetsUrl,d)}return b}static GetBabylonScriptURL(b,d){if(!b)return"";if(r.ScriptBaseUrl&&b.startsWith(r._DefaultCdnUrl)){const d="/"===r.ScriptBaseUrl[r.ScriptBaseUrl.length-1]?r.ScriptBaseUrl.substring(0,r.ScriptBaseUrl.length-1):r.ScriptBaseUrl;b=b.replace(r._DefaultCdnUrl,d)}return b=r.ScriptPreprocessUrl(b),d&&(b=r.GetAbsoluteUrl(b)),b}static LoadBabylonScript(b,d,P,G){b=r.GetBabylonScriptURL(b),r.LoadScript(b,d,P)}static async LoadBabylonScriptAsync(b){return b=r.GetBabylonScriptURL(b),await r.LoadScriptAsync(b)}static LoadScript(b,d,P,G){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(b),d&&d()}catch(J){null===P||void 0===P||P(`Unable to load script '${b}' in worker`,J)}return}if(!(0,W.j)())return void(null===P||void 0===P||P(`Cannot load script '${b}' outside of a window or a worker`));const q=document.getElementsByTagName("head")[0],C=document.createElement("script");i?(C.setAttribute("type","module"),C.innerText=b):(C.setAttribute("type","text/javascript"),C.setAttribute("src",b)),G&&(C.id=G),C.onload=()=>{d&&d()},C.onerror=d=>{P&&P(`Unable to load script '${b}'`,d)},q.appendChild(C)}static async LoadScriptAsync(b,d){return await new Promise(((P,G)=>{this.LoadScript(b,(()=>{P()}),((b,d)=>{G(d||new Error(b))}),d)}))}static ReadFileAsDataURL(b,d,P){const W=new FileReader,i={onCompleteObservable:new G.d,abort:()=>W.abort()};return W.onloadend=()=>{i.onCompleteObservable.notifyObservers(i)},W.onload=b=>{d(b.target.result)},W.onprogress=P,W.readAsDataURL(b),i}static ReadFile(b,d,P,G,W){return(0,Y.t)(b,d,P,G,W)}static FileAsURL(b){const d=new Blob([b]);return window.URL.createObjectURL(d)}static Format(b){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return b.toFixed(d)}static DeepCopy(b,d,P,G){q.b.DeepCopy(b,d,P,G)}static IsEmpty(b){for(const d in b)if(Object.prototype.hasOwnProperty.call(b,d))return!1;return!0}static RegisterTopRootEvents(b,d){for(let G=0;G<d.length;G++){const W=d[G];b.addEventListener(W.name,W.handler,!1);try{window.parent&&window.parent.addEventListener(W.name,W.handler,!1)}catch(P){}}}static UnregisterTopRootEvents(b,d){for(let G=0;G<d.length;G++){const W=d[G];b.removeEventListener(W.name,W.handler);try{b.parent&&b.parent.removeEventListener(W.name,W.handler)}catch(P){}}}static async DumpFramebuffer(b,d,P,G){throw(0,J.d)("DumpTools")}static DumpData(b,d,P,G){throw(0,J.d)("DumpTools")}static async DumpDataAsync(b,d,P){throw(0,J.d)("DumpTools")}static _IsOffScreenCanvas(b){return void 0!==b.convertToBlob}static ToBlob(b,d){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",G=arguments.length>3?arguments[3]:void 0;r._IsOffScreenCanvas(b)||b.toBlob||(b.toBlob=function(b,d,P){setTimeout((()=>{const G=atob(this.toDataURL(d,P).split(",")[1]),W=G.length,i=new Uint8Array(W);for(let b=0;b<W;b++)i[b]=G.charCodeAt(b);b(new Blob([i]))}))}),r._IsOffScreenCanvas(b)?b.convertToBlob({type:P,quality:G}).then((b=>d(b))):b.toBlob((function(b){d(b)}),P,G)}static DownloadBlob(b,d){if("download"in document.createElement("a")){if(!d){const b=new Date;d="screenshot_"+((b.getFullYear()+"-"+(b.getMonth()+1)).slice(2)+"-"+b.getDate()+"_"+b.getHours()+"-"+("0"+b.getMinutes()).slice(-2))+".png"}r.Download(b,d)}else if(b&&"undefined"!==typeof URL){const d=URL.createObjectURL(b),P=window.open("");if(!P)return;const G=P.document.createElement("img");G.onload=function(){URL.revokeObjectURL(d)},G.src=d,P.document.body.appendChild(G)}}static EncodeScreenshotCanvasData(b,d){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",G=arguments.length>3?arguments[3]:void 0,W=arguments.length>4?arguments[4]:void 0;if("string"!==typeof G&&d){if(d){if(r._IsOffScreenCanvas(b))return void b.convertToBlob({type:P,quality:W}).then((b=>{const P=new FileReader;P.readAsDataURL(b),P.onloadend=()=>{const b=P.result;d(b)}}));const G=b.toDataURL(P,W);d(G)}}else this.ToBlob(b,(function(b){b&&r.DownloadBlob(b,G),d&&d("")}),P,W)}static Download(b,d){if("undefined"===typeof URL)return;const P=window.URL.createObjectURL(b),G=document.createElement("a");document.body.appendChild(G),G.style.display="none",G.href=P,G.download=d,G.addEventListener("click",(()=>{G.parentElement&&G.parentElement.removeChild(G)})),G.click(),window.URL.revokeObjectURL(P)}static BackCompatCameraNoPreventDefault(b){return"boolean"===typeof b[0]?b[0]:"boolean"===typeof b[1]&&b[1]}static CreateScreenshot(b,d,P,G){throw(0,J.d)("ScreenshotTools")}static async CreateScreenshotAsync(b,d,P){throw(0,J.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(b,d,P,G){throw(0,J.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(b,d,P){throw(0,J.d)("ScreenshotTools")}static RandomId(){return(0,w.e)()}static IsBase64(b){return(0,Y.k)(b)}static DecodeBase64(b){return(0,Y.d)(b)}static get errorsCount(){return i.e.errorsCount}static Log(b){i.e.Log(b)}static Warn(b){i.e.Warn(b)}static Error(b){i.e.Error(b)}static get LogCache(){return i.e.LogCache}static ClearLogCache(){i.e.ClearLogCache()}static set LogLevels(b){i.e.LogLevels=b}static set PerformanceLogLevel(b){return(b&r.PerformanceUserMarkLogLevel)===r.PerformanceUserMarkLogLevel?(r.StartPerformanceCounter=r._StartUserMark,void(r.EndPerformanceCounter=r._EndUserMark)):(b&r.PerformanceConsoleLogLevel)===r.PerformanceConsoleLogLevel?(r.StartPerformanceCounter=r._StartPerformanceConsole,void(r.EndPerformanceCounter=r._EndPerformanceConsole)):(r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,void(r.EndPerformanceCounter=r._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(b,d){}static _EndPerformanceCounterDisabled(b,d){}static _StartUserMark(b){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!r._Performance){if(!(0,W.j)())return;r._Performance=window.performance}d&&r._Performance.mark&&r._Performance.mark(b+"-Begin")}static _EndUserMark(b){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&r._Performance.mark&&(r._Performance.mark(b+"-End"),r._Performance.measure(b,b+"-Begin",b+"-End"))}static _StartPerformanceConsole(b){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(r._StartUserMark(b,d),console.time&&console.time(b))}static _EndPerformanceConsole(b){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(r._EndUserMark(b,d),console.timeEnd(b))}static get Now(){return C.c.Now}static GetClassName(b){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null;if(!d&&b.getClassName)P=b.getClassName();else{if(b instanceof Object){P=(d?b:Object.getPrototypeOf(b)).constructor.__bjsclassName__}P||(P=typeof b)}return P}static First(b,d){for(const P of b)if(d(P))return P;return null}static getFullClassName(b){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null,G=null;if(!d&&b.getClassName)P=b.getClassName();else{if(b instanceof Object){const W=d?b:Object.getPrototypeOf(b);P=W.constructor.__bjsclassName__,G=W.constructor.__bjsmoduleName__}P||(P=typeof b)}return P?(null!=G?G+".":"")+P:null}static async DelayAsync(b){await new Promise((d=>{setTimeout((()=>{d()}),b)}))}static IsSafari(){return!!(0,W.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function B(b,d){return P=>{P.__bjsclassName__=b,P.__bjsmoduleName__=null!=d?d:null}}r.AssetBaseUrl="",r.UseCustomRequestHeaders=!1,r.CustomRequestHeaders=L.c.CustomRequestHeaders,r.GetDOMTextContent=W.d,r._DefaultCdnUrl="https://cdn.babylonjs.com",r._DefaultAssetsUrl="https://assets.babylonjs.com/core",r.GetAbsoluteUrl="object"===typeof document?b=>{const d=document.createElement("a");return d.href=b,d.href}:"function"===typeof URL&&"object"===typeof location?b=>new URL(b,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},r.NoneLogLevel=i.e.NoneLogLevel,r.MessageLogLevel=i.e.MessageLogLevel,r.WarningLogLevel=i.e.WarningLogLevel,r.ErrorLogLevel=i.e.ErrorLogLevel,r.AllLogLevel=i.e.AllLogLevel,r.IsWindowObjectExist=W.j,r.PerformanceNoneLogLevel=0,r.PerformanceUserMarkLogLevel=1,r.PerformanceConsoleLogLevel=2,r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,r.EndPerformanceCounter=r._EndPerformanceCounterDisabled;class n{constructor(b,d,P){let G=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=b,this.index=G-1,this._done=!1,this._fn=d,this._successCallback=P}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(b,d,P){const G=new n(b,d,P,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return G.executeNext(),G}static SyncAsyncForLoop(b,d,P,G,W){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return n.Run(Math.ceil(b/d),(G=>{W&&W()?G.breakLoop():setTimeout((()=>{for(let i=0;i<d;++i){const q=G.index*d+i;if(q>=b)break;if(P(q),W&&W()){G.breakLoop();break}}G.executeNext()}),i)}),G)}}r.Mix=t.j,r.IsExponentOfTwo=t.g,x.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11639:(b,d,P)=>{P.d(d,{d:()=>i,f:()=>W});const G={};function W(b,d){G[b]=d}function i(b){return G[b]}},11531:(b,d,P)=>{P.d(d,{c:()=>G});class G{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(G.CustomRequestHeaders).length>0||G.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const b in G.CustomRequestHeaders){const d=G.CustomRequestHeaders[b];d&&this._xhr.setRequestHeader(b,d)}}_shouldSkipRequestModifications(b){return G.SkipRequestModificationForBabylonCDN&&(b.includes("preview.babylonjs.com")||b.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(b){this._xhr.onprogress=b}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(b){this._xhr.responseType=b}get timeout(){return this._xhr.timeout}set timeout(b){this._xhr.timeout=b}addEventListener(b,d,P){this._xhr.addEventListener(b,d,P)}removeEventListener(b,d,P){this._xhr.removeEventListener(b,d,P)}abort(){this._xhr.abort()}send(b){G.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(b)}open(b,d){for(const P of G.CustomRequestModifiers){if(this._shouldSkipRequestModifications(d))return;d=P(this._xhr,d)||d}d=(d=d.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=d,this._xhr.open(b,d,!0)}setRequestHeader(b,d){this._xhr.setRequestHeader(b,d)}getResponseHeader(b){return this._xhr.getResponseHeader(b)}}G.CustomRequestHeaders={},G.CustomRequestModifiers=new Array,G.SkipRequestModificationForBabylonCDN=!0}}]);