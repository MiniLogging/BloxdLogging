"use strict";(self.jr1pmf6bwuf=self.jr1pmf6bwuf||[]).push([[8],{12761:(Y,c,h)=>{h.d(c,{c:()=>T});var C=h(12722),E=h(12700),N=h(12770),Q=h(12799),b=h(12709);class H{constructor(){let Y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,Y&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(Y){this._zOffset!==Y&&(this._zOffset=Y,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(Y){this._zOffsetUnits!==Y&&(this._zOffsetUnits=Y,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(Y){this._cullFace!==Y&&(this._cullFace=Y,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(Y){this._cull!==Y&&(this._cull=Y,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(Y){this._depthFunc!==Y&&(this._depthFunc=Y,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(Y){this._depthMask!==Y&&(this._depthMask=Y,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(Y){this._depthTest!==Y&&(this._depthTest=Y,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(Y){this._frontFace!==Y&&(this._frontFace=Y,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(Y){this.isDirty&&(this._isCullDirty&&(this.cull?Y.enable(Y.CULL_FACE):Y.disable(Y.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(Y.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(Y.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?Y.enable(Y.DEPTH_TEST):Y.disable(Y.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(Y.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(Y.enable(Y.POLYGON_OFFSET_FILL),Y.polygonOffset(this.zOffset,this.zOffsetUnits)):Y.disable(Y.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(Y.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class w{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(Y){this._func!==Y&&(this._func=Y,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(Y){this._funcRef!==Y&&(this._funcRef=Y,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(Y){this._funcMask!==Y&&(this._funcMask=Y,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(Y){this._opStencilFail!==Y&&(this._opStencilFail=Y,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(Y){this._opDepthFail!==Y&&(this._opDepthFail=Y,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(Y){this._opStencilDepthPass!==Y&&(this._opStencilDepthPass=Y,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(Y){this._mask!==Y&&(this._mask=Y,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(Y){this._enabled!==Y&&(this._enabled=Y,this._isStencilTestDirty=!0)}constructor(){let Y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,Y&&this.reset()}reset(){var Y;this.stencilMaterial=void 0,null===(Y=this.stencilGlobal)||void 0===Y||Y.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(Y){var c;if(!Y)return;const h=!this.useStencilGlobalOnly&&!(null===(c=this.stencilMaterial)||void 0===c||!c.enabled);this.enabled=h?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=h?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=h?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=h?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=h?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=h?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=h?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=h?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?Y.enable(Y.STENCIL_TEST):Y.disable(Y.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(Y.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(Y.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(Y.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class W{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=W.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=W.KEEP,this.opDepthFail=W.KEEP,this.opStencilDepthPass=W.REPLACE}get stencilFunc(){return this.func}set stencilFunc(Y){this.func=Y}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(Y){this.funcRef=Y}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(Y){this.funcMask=Y}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(Y){this.opStencilFail=Y}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(Y){this.opDepthFail=Y}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(Y){this.opStencilDepthPass=Y}get stencilMask(){return this.mask}set stencilMask(Y){this.mask=Y}get stencilTest(){return this.enabled}set stencilTest(Y){this.enabled=Y}}W.ALWAYS=519,W.KEEP=7680,W.REPLACE=7681;class q{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(Y){this._alphaBlend!==Y&&(this._alphaBlend=Y,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(Y,c,h,C){this._blendConstants[0]===Y&&this._blendConstants[1]===c&&this._blendConstants[2]===h&&this._blendConstants[3]===C||(this._blendConstants[0]=Y,this._blendConstants[1]=c,this._blendConstants[2]=h,this._blendConstants[3]=C,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(Y,c,h,C){this._blendFunctionParameters[0]===Y&&this._blendFunctionParameters[1]===c&&this._blendFunctionParameters[2]===h&&this._blendFunctionParameters[3]===C||(this._blendFunctionParameters[0]=Y,this._blendFunctionParameters[1]=c,this._blendFunctionParameters[2]=h,this._blendFunctionParameters[3]=C,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(Y,c){this._blendEquationParameters[0]===Y&&this._blendEquationParameters[1]===c||(this._blendEquationParameters[0]=Y,this._blendEquationParameters[1]=c,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(Y){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?Y.enable(Y.BLEND):Y.disable(Y.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(Y.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(Y.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(Y.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var k=h(12715),M=h(12805),p=h(12693),P=h(12690),y=h(12748),d=h(12817);function D(Y,c){if((0,p.k)()){const{requestAnimationFrame:h}=c||window;if("function"===typeof h)return h(Y)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(Y);return setTimeout(Y,16)}class T{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(Y){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(Y){Y!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=Y,this._depthCullingState.depthFunc=Y?518:515)}setColorWrite(Y){Y!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=Y)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(Y){if(Y)return this.isNDCHalfZRange?Y.IS_NDC_HALF_ZRANGE="":delete Y.IS_NDC_HALF_ZRANGE,this.o?Y.USE_REVERSE_DEPTHBUFFER="":delete Y.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?Y.USE_EXACT_SRGB_CONVERSIONS="":delete Y.USE_EXACT_SRGB_CONVERSIONS);{let Y="";return this.isNDCHalfZRange&&(Y+="#define IS_NDC_HALF_ZRANGE"),this.o&&(Y&&(Y+="\n"),Y+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(Y&&(Y+="\n"),Y+="#define USE_EXACT_SRGB_CONVERSIONS"),Y}}_rebuildInternalTextures(){const Y=this._internalTexturesCache.slice();for(const c of Y)c._rebuild()}_rebuildRenderTargetWrappers(){const Y=this._renderTargetWrapperCache.slice();for(const c of Y)c._rebuild()}_rebuildEffects(){for(const Y in this._compiledEffects){const c=this._compiledEffects[Y];c._pipelineContext=null,c._prepareEffect()}N.Effect.ResetCache()}_rebuildGraphicsResources(){var Y;this.wipeCaches(!0),this._rebuildEffects(),null===(Y=this._rebuildComputeEffects)||void 0===Y||Y.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){E.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(Y){setTimeout((()=>{this._clearEmptyResources();const c=this._depthCullingState.depthTest,h=this._depthCullingState.depthFunc,C=this._depthCullingState.depthMask,E=this._stencilState.stencilTest;Y(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=c,this._depthCullingState.depthFunc=h,this._depthCullingState.depthMask=C,this._stencilState.stencilTest=E,this._flagContextRestored()}),0)}get q(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(Y){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(Y){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const Y=new Uint8Array(4),c=[Y,Y,Y,Y,Y,Y];this._emptyCubeTexture=this.createRawCubeTexture(c,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(Y){if(!Y)return this._activeRenderLoops.length=0,void this._cancelFrame();const c=this._activeRenderLoops.indexOf(Y);c>=0&&(this._activeRenderLoops.splice(c,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const Y=this._frameHandler;if(this._frameHandler=0,(0,p.k)()){const{cancelAnimationFrame:c}=this.getHostWindow()||window;if("function"===typeof c)return c(Y)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(Y);return clearTimeout(Y)}}Wc(){this.onBeginFrameObservable.notifyObservers(this)}kc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(Y){this._maxFPS=Y,void 0!==Y&&(this._minFrameTime=Y<=0?Number.MAX_VALUE:1e3/Y)}_isOverFrameTime(Y){if(!Y||void 0===this._maxFPS)return!1;const c=Y-this._lastFrameTime;return this._lastFrameTime=Y,this._renderAccumulator+=c,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(Y){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(Y)){let Y=!0;(this.q||!this.renderEvenInBackground&&this._windowIsBackground)&&(Y=!1),Y&&(this.Wc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.kc())}}_renderLoop(Y){this._processFrame(Y),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let Y=0;Y<this._activeRenderLoops.length;Y++){(0,this._activeRenderLoops[Y])()}}_renderViews(){return!1}_queueNewFrame(Y,c){return D(Y,c)}runRenderLoop(Y){-1===this._activeRenderLoops.indexOf(Y)&&(this._activeRenderLoops.push(Y),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(Y){this._depthCullingState.depthTest=Y}setZOffset(Y){this._depthCullingState.zOffset=this.o?-Y:Y}getZOffset(){const Y=this._depthCullingState.zOffset;return this.o?-Y:Y}setZOffsetUnits(Y){this._depthCullingState.zOffsetUnits=this.o?-Y:Y}getZOffsetUnits(){const Y=this._depthCullingState.zOffsetUnits;return this.o?-Y:Y}getHostWindow(){return(0,p.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(Y){this._compatibilityMode=!0}_rebuildTextures(){for(const Y of this.scenes)Y._rebuildTextures();for(const Y of this._virtualScenes)Y._rebuildTextures()}_releaseRenderTargetWrapper(Y){const c=this._renderTargetWrapperCache.indexOf(Y);-1!==c&&this._renderTargetWrapperCache.splice(c,1)}get currentViewport(){return this._cachedViewport}setViewport(Y,c,h){const C=c||this.getRenderWidth(),E=h||this.getRenderHeight(),N=Y.x||0,Q=Y.y||0;this._cachedViewport=Y,this._viewport(N*C,Q*E,C*Y.width,E*Y.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(Y){return new Path2D(Y)}get description(){let Y=this.name+this.version;return this._caps.parallelShaderCompile&&(Y+=" - Parallel shader compilation"),Y}_createTextureBase(Y,c,h,N){let Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,w=arguments.length>7?arguments[7]:void 0,W=arguments.length>8?arguments[8]:void 0,q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,k=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,P=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,y=arguments.length>13?arguments[13]:void 0,D=arguments.length>14?arguments[14]:void 0,e=arguments.length>15?arguments[15]:void 0;const r="data:"===(Y=Y||"").substring(0,5),X="blob:"===Y.substring(0,5),Z=r&&-1!==Y.indexOf(";base64,"),a=k||new M.c(this,1);a!==k&&(a.label=Y.substring(0,60));const G=Y;!this._transformTextureUrl||Z||k||q||(Y=this._transformTextureUrl(Y)),G!==Y&&(a._originalUrl=G);const K=Y.lastIndexOf(".");let I=P||(K>-1?Y.substring(K).toLowerCase():"");I.indexOf("?")>-1&&(I=I.split("?")[0]);const s=(0,d.b)(I,y);N&&N.addPendingData(a),a.url=Y,a.generateMipMaps=!c,a.samplingMode=Q,a.invertY=h,a._useSRGBBuffer=this._getUseSRGBBuffer(!!e,c),this._doNotHandleContextLost||(a._buffer=q);let x=null;b&&!k&&(x=a.onLoadedObservable.add(b)),k||this._internalTexturesCache.push(a);const A=(h,k)=>{N&&N.removePendingData(a),Y===G?(x&&a.onLoadedObservable.remove(x),C.d.UseFallbackTexture&&Y!==C.d.FallbackTexture&&this._createTextureBase(C.d.FallbackTexture,c,a.invertY,N,Q,null,H,w,W,q,a),h=(h||"Unknown error")+(C.d.UseFallbackTexture?" - Fallback texture was used":""),a.onErrorObservable.notifyObservers({message:h,exception:k}),H&&H(h,k)):(E.e.Warn(`Failed to load ${Y}, falling back to ${G}`),this._createTextureBase(G,c,a.invertY,N,Q,b,H,w,W,q,a,p,P,y,D,e))};if(s){const c=async Y=>{(await s).loadData(Y,a,((Y,c,h,C,E,b)=>{b?A("TextureLoader failed to load data"):w(a,I,N,{width:Y,height:c},a.invertY,!h,C,(()=>(E(),!1)),Q)}),D)};q?q instanceof ArrayBuffer?c(new Uint8Array(q)):ArrayBuffer.isView(q)?c(q):H&&H("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(Y,(Y=>{c(new Uint8Array(Y))}),void 0,N?N.offlineProvider:void 0,!0,((Y,c)=>{A("Unable to load "+(Y&&Y.responseURL,c))}))}else{const h=Y=>{X&&!this._doNotHandleContextLost&&(a._buffer=Y),w(a,I,N,Y,a.invertY,c,!1,W,Q)};!r||Z?q&&("string"===typeof q.decoding||q.close)?h(q):T._FileToolsLoadImage(Y||"",h,A,N?N.offlineProvider:null,y,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof q||q instanceof ArrayBuffer||ArrayBuffer.isView(q)||q instanceof Blob?T._FileToolsLoadImage(q,h,A,N?N.offlineProvider:null,y,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):q&&h(q)}return a}_rebuildBuffers(){for(const Y of this._uniformBuffers)Y._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,p.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const Y in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,Y)&&(this._boundTexturesCache[Y]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(Y){this._name=Y}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(Y){this._hardwareScalingLevel=Y,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(Y){this._doNotHandleContextLost=Y}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(Y,c,h){var E,N;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new H,this._stencilStateComposer=new w,this._stencilState=new W,this._alphaState=new q,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new P.c,this.onCanvasFocusObservable=new P.c,this.onNewSceneAddedObservable=new P.c,this.onResizeObservable=new P.c,this.onCanvasPointerOutObservable=new P.c,this.onEffectErrorObservable=new P.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new P.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=Y=>this._renderLoop(Y),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new P.c,this.onAfterShaderCompilationObservable=new P.c,this.onBeginFrameObservable=new P.c,this.onEndFrameObservable=new P.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new P.c,this.onContextRestoredObservable=new P.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Mc=new P.c,this.onReleaseEffectsObservable=new P.c,C.d.Instances.push(this),this.startTime=b.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Q.b.SetMatrixPrecision(!!c.useHighPrecisionMatrix),(0,p.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=h??!1,c.antialias=Y??c.antialias,c.deterministicLockstep=c.deterministicLockstep??!1,c.lockstepMaxSteps=c.lockstepMaxSteps??4,c.timeStep=c.timeStep??1/60,c.Pc=c.Pc??!0,this._audioContext=(null===(E=c.audioEngineOptions)||void 0===E?void 0:E.audioContext)??null,this._audioDestination=(null===(N=c.audioEngineOptions)||void 0===N?void 0:N.audioDestination)??null,this.premultipliedAlpha=c.premultipliedAlpha??!0,this._doNotHandleContextLost=!!c.doNotHandleContextLost,this._isStencilEnable=!!c.Pc,this.useExactSrgbConversions=c.useExactSrgbConversions??!1;const k=(0,p.k)()&&window.devicePixelRatio||1,M=c.limitDeviceRatio||k;h=h||c.adaptToDeviceRatio||!1,this._hardwareScalingLevel=h?1/Math.min(M,k):1,this._lastDevicePixelRatio=k,this._creationOptions=c}resize(){let Y,c,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const Y=(0,p.k)()&&window.devicePixelRatio||1,c=this._lastDevicePixelRatio/Y;this._lastDevicePixelRatio=Y,this._hardwareScalingLevel*=c}if((0,p.k)()&&(0,p.f)())if(this._renderingCanvas){var C,E;const h=null===(C=(E=this._renderingCanvas).getBoundingClientRect)||void 0===C?void 0:C.call(E);Y=this._renderingCanvas.clientWidth||(null===h||void 0===h?void 0:h.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,c=this._renderingCanvas.clientHeight||(null===h||void 0===h?void 0:h.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else Y=window.innerWidth,c=window.innerHeight;else Y=this._renderingCanvas?this._renderingCanvas.width:100,c=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(Y/this._hardwareScalingLevel,c/this._hardwareScalingLevel,h)}setSize(Y,c){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(Y|=0,c|=0,!h&&this._renderingCanvas.width===Y&&this._renderingCanvas.height===c)return!1;if(this._renderingCanvas.width=Y,this._renderingCanvas.height=c,this.scenes){for(let Y=0;Y<this.scenes.length;Y++){const c=this.scenes[Y];for(let Y=0;Y<c.cameras.length;Y++){c.cameras[Y]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(Y,c,h,C,E,N,Q,b,H,w,W){throw(0,k.c)("engine.rawTexture")}createRawCubeTexture(Y,c,h,C,E,N,Q,b){throw(0,k.c)("engine.rawTexture")}createRawTexture3D(Y,c,h,C,E,N,Q,b,H,w,W){throw(0,k.c)("engine.rawTexture")}createRawTexture2DArray(Y,c,h,C,E,N,Q,b,H,w,W){throw(0,k.c)("engine.rawTexture")}_sharedInit(Y){this._renderingCanvas=Y}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const Y=navigator.userAgent;this.hostInformation.isMobile=-1!==Y.indexOf("Mobile")||-1!==Y.indexOf("Mac")&&(0,p.f)()&&"ontouchend"in document},this._checkForMobile(),(0,p.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(Y){return document.createElement("video")}_reportDrawCall(){var Y;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(Y=this._drawCalls)||void 0===Y||Y.addCount(c,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(Y,c){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(Y,c){return createImageBitmap(Y,c)}resizeImageBitmap(Y,c,h){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(Y){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(Y,c){if("undefined"===typeof document)return new OffscreenCanvas(Y,c);const h=document.createElement("canvas");return h.width=Y,h.height=c,h}createCanvas(Y,c){return T._CreateCanvas(Y,c)}static _FileToolsLoadImage(Y,c,h,C,E,N,Q){throw(0,k.c)("FileTools")}_loadFile(Y,c,h,C,E,N){const Q=(0,y.l)(Y,c,h,C,E,N);return this._activeRequests.push(Q),Q.onCompleteObservable.add((()=>{const Y=this._activeRequests.indexOf(Q);-1!==Y&&this._activeRequests.splice(Y,1)})),Q}static _FileToolsLoadFile(Y,c,h,C,E,N){if(y.b.loadFile)return y.b.loadFile(Y,c,h,C,E,N);throw(0,k.c)("FileTools")}dispose(){var Y;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(Y=this.releaseComputeEffects)||void 0===Y||Y.call(this),N.Effect.ResetCache();for(const h of this._activeRequests)h.abort();this._boundRenderFunction=null,this.Mc.notifyObservers(this),this.Mc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,p.k)()&&window.removeEventListener("resize",this._checkForMobile);const c=C.d.Instances.indexOf(this);c>=0&&C.d.Instances.splice(c,1),C.d.Instances.length||(C.d.OnEnginesDisposedObservable.notifyObservers(this),C.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(Y){throw(0,k.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(Y,c){for(let h=0;h<C.d.Instances.length;h++){const E=C.d.Instances[h];for(let h=0;h<E.scenes.length;h++)E.scenes[h].markAllMaterialsAsDirty(Y,c)}}}T._RenderPassIdCounter=0,T._RescalePostProcessFactory=null,T.CollisionsEpsilon=.001,T.QueueNewFrame=D},12722:(Y,c,h)=>{h.d(c,{d:()=>E});var C=h(12690);class E{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}E.Instances=[],E.OnEnginesDisposedObservable=new C.c,E._LastCreatedScene=null,E.UseFallbackTexture=!0,E.FallbackTexture=""},12799:(Y,c,h)=>{h.d(c,{b:()=>C});class C{static SetMatrixPrecision(Y){if(C.MatrixTrackPrecisionChange=!1,Y&&!C.MatrixUse64Bits&&C.MatrixTrackedMatrices)for(let c=0;c<C.MatrixTrackedMatrices.length;++c){const Y=C.MatrixTrackedMatrices[c],h=Y.yc;Y.yc=new Array(16);for(let c=0;c<16;++c)Y.yc[c]=h[c]}C.MatrixUse64Bits=Y,C.MatrixCurrentType=C.MatrixUse64Bits?Array:Float32Array,C.MatrixTrackedMatrices=null}}C.MatrixUse64Bits=!1,C.MatrixTrackPrecisionChange=!0,C.MatrixCurrentType=Float32Array,C.MatrixTrackedMatrices=[]},12817:(Y,c,h)=>{h.d(c,{b:()=>Q});var C=h(12700);const E=new Map;function N(Y,c){(function(Y){return E.delete(Y)})(Y)&&C.e.Warn(`Extension with the name '${Y}' already exists`),E.set(Y,c)}function Q(Y,c){"image/ktx"!==c&&"image/ktx2"!==c||(Y=".ktx"),E.has(Y)||(Y.endsWith(".ies")&&N(".ies",(async()=>await h.e(15).then(h.bind(h,15397)).then((Y=>new Y._IESTextureLoader)))),Y.endsWith(".dds")&&N(".dds",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(28)]).then(h.bind(h,15403)).then((Y=>new Y._DDSTextureLoader)))),Y.endsWith(".basis")&&N(".basis",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(47)]).then(h.bind(h,15413)).then((Y=>new Y._BasisTextureLoader)))),Y.endsWith(".env")&&N(".env",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(23),h.e(21),h.e(45),h.e(48)]).then(h.bind(h,15419)).then((Y=>new Y._ENVTextureLoader)))),Y.endsWith(".hdr")&&N(".hdr",(async()=>await Promise.all([h.e(14),h.e(49)]).then(h.bind(h,15422)).then((Y=>new Y._HDRTextureLoader)))),(Y.endsWith(".ktx")||Y.endsWith(".ktx2"))&&(N(".ktx",(async()=>await h.e(30).then(h.bind(h,15425)).then((Y=>new Y._KTXTextureLoader)))),N(".ktx2",(async()=>await h.e(30).then(h.bind(h,15425)).then((Y=>new Y._KTXTextureLoader))))),Y.endsWith(".tga")&&N(".tga",(async()=>await h.e(50).then(h.bind(h,15431)).then((Y=>new Y._TGATextureLoader)))),Y.endsWith(".exr")&&N(".exr",(async()=>await h.e(16).then(h.bind(h,15434)).then((Y=>new Y._ExrTextureLoader)))));const C=E.get(Y);return C?Promise.resolve(C(c)):null}},12805:(Y,c,h)=>{h.d(c,{c:()=>Q});var C,E=h(12690),N=h(12812);!function(Y){Y[Y.Unknown=0]="Unknown",Y[Y.Url=1]="Url",Y[Y.Temp=2]="Temp",Y[Y.Raw=3]="Raw",Y[Y.Dynamic=4]="Dynamic",Y[Y.RenderTarget=5]="RenderTarget",Y[Y.MultiRenderTarget=6]="MultiRenderTarget",Y[Y.Cube=7]="Cube",Y[Y.CubeRaw=8]="CubeRaw",Y[Y.CubePrefiltered=9]="CubePrefiltered",Y[Y.Raw3D=10]="Raw3D",Y[Y.Raw2DArray=11]="Raw2DArray",Y[Y.DepthStencil=12]="DepthStencil",Y[Y.CubeRawRGBD=13]="CubeRawRGBD",Y[Y.Depth=14]="Depth"}(C||(C={}));class Q extends N.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(Y){this.generateMipMaps=Y}get uniqueId(){return this._uniqueId}_setUniqueId(Y){this._uniqueId=Y}getEngine(){return this._engine}get source(){return this._source}constructor(Y,c){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new E.c,this.onErrorObservable=new E.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=Y,this._source=c,this._uniqueId=Q._Counter++,h||(this._hardwareTexture=Y._createHardwareTexture())}incrementReferences(){this._references++}updateSize(Y,c){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,Y,c,h),this.width=Y,this.height=c,this.depth=h,this.baseWidth=Y,this.baseHeight=c,this.baseDepth=h,this._size=Y*c*h}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const Y=this.onRebuildCallback(this),c=c=>{c._swapAndDie(this,!1),this.isReady=Y.isReady};return void(Y.isAsync?Y.proxy.then(c):c(Y.proxy))}let Y;switch(this.source){case 2:case 12:case 14:break;case 1:return void(Y=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(Y=>{Y._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:Y=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),Y._swapAndDie(this,!1),this.isReady=!0;break;case 10:Y=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Y._swapAndDie(this,!1),this.isReady=!0;break;case 11:Y=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Y._swapAndDie(this,!1),this.isReady=!0;break;case 4:Y=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),Y._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(Y=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{Y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:Y=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),Y._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return Y=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(Y=>{Y&&Y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(Y._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(Y){var c;let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(c=this._hardwareTexture)||void 0===c||c.setUsage(Y._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),Y._hardwareTexture=this._hardwareTexture,h&&(Y._isRGBD=this._isRGBD),this._lodTextureHigh&&(Y._lodTextureHigh&&Y._lodTextureHigh.dispose(),Y._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(Y._lodTextureMid&&Y._lodTextureMid.dispose(),Y._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(Y._lodTextureLow&&Y._lodTextureLow.dispose(),Y._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(Y._irradianceTexture&&Y._irradianceTexture.dispose(),Y._irradianceTexture=this._irradianceTexture);const C=this._engine.getLoadedTexturesCache();let E=C.indexOf(this);-1!==E&&C.splice(E,1),E=C.indexOf(Y),-1===E&&C.push(Y)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Q._Counter=0},12812:(Y,c,h)=>{h.d(c,{e:()=>C});class C{get wrapU(){return this._cachedWrapU}set wrapU(Y){this._cachedWrapU=Y}get wrapV(){return this._cachedWrapV}set wrapV(Y){this._cachedWrapV=Y}get wrapR(){return this._cachedWrapR}set wrapR(Y){this._cachedWrapR=Y}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(Y){this._cachedAnisotropicFilteringLevel=Y}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(Y){this._comparisonFunction=Y}get useMipMaps(){return this._useMipMaps}set useMipMaps(Y){this._useMipMaps=Y}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=Y,this._cachedWrapV=c,this._cachedWrapR=h,this._cachedAnisotropicFilteringLevel=C,this.samplingMode=E,this._comparisonFunction=N,this}compareSampler(Y){return this._cachedWrapU===Y._cachedWrapU&&this._cachedWrapV===Y._cachedWrapV&&this._cachedWrapR===Y._cachedWrapR&&this._cachedAnisotropicFilteringLevel===Y._cachedAnisotropicFilteringLevel&&this.samplingMode===Y.samplingMode&&this._comparisonFunction===Y._comparisonFunction&&this._useMipMaps===Y._useMipMaps}}},12707:(Y,c,h)=>{h.d(c,{b:()=>N});var C=h(12700);const E=(Y,c,h)=>Y?Y.getClassName&&"Mesh"===Y.getClassName()?null:!Y.getClassName||"SubMesh"!==Y.getClassName()&&"PhysicsBody"!==Y.getClassName()?Y.clone?Y.clone():Array.isArray(Y)?Y.slice():h&&"object"===typeof Y?{...Y}:null:Y.clone(c):null;class N{static DeepCopy(Y,c,h,N){let Q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const b=function(Y){const c=[];do{const h=Object.getOwnPropertyNames(Y);for(const Y of h)-1===c.indexOf(Y)&&c.push(Y)}while(Y=Object.getPrototypeOf(Y));return c}(Y);for(const w of b){if("_"===w[0]&&(!N||-1===N.indexOf(w)))continue;if(w.endsWith("Observable"))continue;if(h&&-1!==h.indexOf(w))continue;const b=Y[w],W=typeof b;if("function"!==W)try{if("object"===W)if(b instanceof Uint8Array)c[w]=Uint8Array.from(b);else if(b instanceof Array){if(c[w]=[],b.length>0)if("object"==typeof b[0])for(let Y=0;Y<b.length;Y++){const h=E(b[Y],c,Q);-1===c[w].indexOf(h)&&c[w].push(h)}else c[w]=b.slice(0)}else c[w]=E(b,c,Q);else c[w]=b}catch(H){C.e.Warn(H.message)}}}}},12733:(Y,c,h)=>{h.d(c,{e:()=>C,g:()=>E,h:()=>N});class C extends Error{}C._setPrototypeOf=Object.setPrototypeOf||((Y,c)=>(Y.__proto__=c,Y));const E={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class N extends C{constructor(Y,c,h){super(Y),this.errorCode=c,this.innerError=h,this.name="RuntimeError",C._setPrototypeOf(this,N.prototype)}}},12728:(Y,c,h)=>{h.d(c,{c:()=>A,e:()=>T,i:()=>K,m:()=>s,r:()=>a,p:()=>y,u:()=>X,x:()=>Z,z:()=>G,D:()=>e});var C=h(12719),E=h(12693),N=h(12690);class Q{}Q.FilesToLoad={};var b=h(12733),H=h(12740),w=h(12746),W=h(12722),q=h(12700),k=h(12756),M=h(12748),p=h(12761);const P=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class y extends b.h{constructor(Y,c){super(Y,b.g.LoadFileError),this.name="LoadFileError",b.e._setPrototypeOf(this,y.prototype),c instanceof C.c?this.request=c:this.file=c}}class d extends b.h{constructor(Y,c){super(Y,b.g.RequestFileError),this.request=c,this.name="RequestFileError",b.e._setPrototypeOf(this,d.prototype)}}class D extends b.h{constructor(Y,c){super(Y,b.g.ReadFileError),this.file=c,this.name="ReadFileError",b.e._setPrototypeOf(this,D.prototype)}}const T={DefaultRetryStrategy:class{static ExponentialBackoff(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(h,C,E)=>0!==C.status||E>=Y||-1!==h.indexOf("file:")?-1:Math.pow(2,E)*c}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:Y=>Y,ScriptBaseUrl:"",ScriptPreprocessUrl:Y=>Y,CleanUrl:Y=>Y=Y.replace(/#/gm,"%23")},e=(Y,c)=>{if((!Y||0!==Y.indexOf("data:"))&&T.CorsBehavior)if("string"===typeof T.CorsBehavior||T.CorsBehavior instanceof String)c.crossOrigin=T.CorsBehavior;else{const h=T.CorsBehavior(Y);h&&(c.crossOrigin=h)}},r={getRequiredSize:null},X=function(Y,c,h,E){let N,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",w=arguments.length>5?arguments[5]:void 0,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===q||void 0===q||!q._features.forceBitmapOverHTMLImageElement))return h("LoadImage is only supported in web or BabylonNative environments."),null;let k=!1;Y instanceof ArrayBuffer||ArrayBuffer.isView(Y)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(N=URL.createObjectURL(new Blob([Y],{type:b})),k=!0):N=`data:${b};base64,`+(0,H.h)(Y):Y instanceof Blob?(N=URL.createObjectURL(Y),k=!0):(N=T.CleanUrl(Y),N=T.PreprocessUrl(N));const M=c=>{if(h){const C=N||Y.toString();h(`Error while trying to load image: ${0===C.indexOf("http")||C.length<=128?C:C.slice(0,128)+"..."}`,c)}};if(null!==q&&void 0!==q&&q._features.forceBitmapOverHTMLImageElement)return a(N,(C=>{q.createImageBitmap(new Blob([C],{type:b}),{premultiplyAlpha:"none",...w}).then((Y=>{c(Y),k&&URL.revokeObjectURL(N)})).catch((c=>{h&&h("Error while trying to load image: "+Y,c)}))}),void 0,E||void 0,!0,((Y,c)=>{M(c)})),null;const p=new Image;if(r.getRequiredSize){const c=r.getRequiredSize(Y);c.width&&(p.width=c.width),c.height&&(p.height=c.height)}e(N,p);const P=[],y=()=>{for(const Y of P)Y.target.removeEventListener(Y.name,Y.handler);P.length=0};P.push({target:p,name:"load",handler:()=>{y(),c(p),k&&p.src&&URL.revokeObjectURL(p.src)}}),P.push({target:p,name:"error",handler:Y=>{y(),M(Y),k&&p.src&&URL.revokeObjectURL(p.src)}}),P.push({target:document,name:"securitypolicyviolation",handler:Y=>{if(Y.blockedURI!==p.src||"dc"===Y.disposition)return;y();const c=new Error(`CSP violation of policy ${Y.effectiveDirective} ${Y.blockedURI}. Current policy is ${Y.originalPolicy}`);W.d.UseFallbackTexture=!1,M(c),k&&p.src&&URL.revokeObjectURL(p.src),p.src=""}}),(()=>{for(const Y of P)Y.target.addEventListener(Y.name,Y.handler)})();const d="blob:"===N.substring(0,5),D="data:"===N.substring(0,5),X=()=>{d||D||!C.c.IsCustomRequestAvailable?p.src=N:a(N,((Y,c,h)=>{const C=new Blob([Y],{type:!b&&h?h:b}),E=URL.createObjectURL(C);k=!0,p.src=E}),void 0,E||void 0,!0,((Y,c)=>{M(c)}))},Z=()=>{E&&E.loadImage(N,p)};if(!d&&!D&&E&&E.enableTexturesOffline)E.open(Z,X);else{if(-1!==N.indexOf("file:")){const Y=decodeURIComponent(N.substring(5).toLowerCase());if(Q.FilesToLoad[Y]&&"undefined"!==typeof URL){try{let c;try{c=URL.createObjectURL(Q.FilesToLoad[Y])}catch(G){c=URL.createObjectURL(Q.FilesToLoad[Y])}p.src=c,k=!0}catch(K){p.src=""}return p}}X()}return p},Z=(Y,c,h,C,E)=>{const Q=new FileReader,b={onCompleteObservable:new N.c,abort:()=>Q.abort()};return Q.onloadend=()=>b.onCompleteObservable.notifyObservers(b),E&&(Q.onerror=()=>{E(new D(`Unable to read ${Y.name}`,Y))}),Q.onload=Y=>{c(Y.target.result)},h&&(Q.onprogress=h),C?Q.readAsArrayBuffer(Y):Q.readAsText(Y),b},a=(Y,c,h,C,E,H,w)=>{if(Y.name)return Z(Y,c,h,E,H?Y=>{H(void 0,Y)}:void 0);const W=Y;if(-1!==W.indexOf("file:")){let Y=decodeURIComponent(W.substring(5).toLowerCase());0===Y.indexOf("./")&&(Y=Y.substring(2));const C=Q.FilesToLoad[Y];if(C)return Z(C,c,h,E,H?Y=>H(void 0,new y(Y.message,Y.file)):void 0)}const{match:M,type:p}=x(W);if(M){const Y={onCompleteObservable:new N.c,abort:()=>()=>{}};try{const Y=E?A(W):V(W);c(Y,void 0,p)}catch(b){H?H(void 0,b):q.e.Error(b.message||"Failed to parse the Data URL")}return k.c.SetImmediate((()=>{Y.onCompleteObservable.notifyObservers(Y)})),Y}return G(W,((Y,h)=>{c(Y,null===h||void 0===h?void 0:h.responseURL,null===h||void 0===h?void 0:h.getResponseHeader("content-type"))}),h,C,E,H?Y=>{H(Y.request,new y(Y.message,Y.request))}:void 0,w)},G=(Y,c,h,Q,b,H,w)=>{Y=T.CleanUrl(Y),Y=T.PreprocessUrl(Y);const W=T.BaseUrl+Y;let k=!1;const M={onCompleteObservable:new N.c,abort:()=>k=!0},p=()=>{let Y,N=new C.c,Q=null;const p=()=>{N&&(h&&N.removeEventListener("progress",h),Y&&N.removeEventListener("readystatechange",Y),N.removeEventListener("loadend",P))};let P=()=>{p(),M.onCompleteObservable.notifyObservers(M),M.onCompleteObservable.clear(),h=void 0,Y=null,P=null,H=void 0,w=void 0,c=void 0};M.abort=()=>{k=!0,P&&P(),N&&N.readyState!==(XMLHttpRequest.DONE||4)&&N.abort(),null!==Q&&(clearTimeout(Q),Q=null),N=null};const y=Y=>{const c=Y.message||"Unknown error";H&&N?H(new d(c,N)):q.e.Error(c)},D=q=>{if(N){if(N.open("GET",W),w)try{w(N)}catch(M){return void y(M)}b&&(N.responseType="arraybuffer"),h&&N.addEventListener("progress",h),P&&N.addEventListener("loadend",P),Y=()=>{if(!k&&N&&N.readyState===(XMLHttpRequest.DONE||4)){if(Y&&N.removeEventListener("readystatechange",Y),N.status>=200&&N.status<300||0===N.status&&(!(0,E.k)()||I())){const Y=b?N.response:N.responseText;if(null!==Y){try{c&&c(Y,N)}catch(M){y(M)}return}}const h=T.DefaultRetryStrategy;if(h){const Y=h(W,N,q);if(-1!==Y)return p(),N=new C.c,void(Q=setTimeout((()=>D(q+1)),Y))}const w=new d("Error status: "+N.status+" "+N.statusText+" - Unable to load "+W,N);H&&H(w)}},N.addEventListener("readystatechange",Y),N.send()}};D(0)};if(Q&&Q.enableSceneOffline){const C=Y=>{Y&&Y.status>400?H&&H(Y):p()},E=()=>{Q&&Q.loadFile(T.BaseUrl+Y,(Y=>{!k&&c&&c(Y),M.onCompleteObservable.notifyObservers(M)}),h?Y=>{!k&&h&&h(Y)}:void 0,C,b)};Q.open(E,C)}else p();return M},K=Y=>{const{match:c,type:h}=x(Y);if(c)return h||void 0;const C=Y.lastIndexOf(".");switch(Y.substring(C+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Dc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},I=()=>"undefined"!==typeof location&&"file:"===location.protocol,s=Y=>P.test(Y),x=Y=>{const c=P.exec(Y);if(null===c||0===c.length)return{match:!1,type:""};return{match:!0,type:c[0].replace("data:","").replace("base64,","")}};function A(Y){return(0,H.c)(Y.split(",")[1])}const V=Y=>(0,H.f)(Y.split(",")[1]);let U;p.c._FileToolsLoadImage=X,M.b.loadFile=a,w.n.loadFile=a;((Y,c,h,C,E,N,Q,b,H,w)=>{U={DecodeBase64UrlToBinary:Y,DecodeBase64UrlToString:c,DefaultRetryStrategy:h.DefaultRetryStrategy,BaseUrl:h.BaseUrl,CorsBehavior:h.CorsBehavior,PreprocessUrl:h.PreprocessUrl,IsBase64DataUrl:C,IsFileURL:E,LoadFile:N,LoadImage:Q,ReadFile:b,RequestFile:H,SetCorsBehavior:w},Object.defineProperty(U,"DefaultRetryStrategy",{get:function(){return h.DefaultRetryStrategy},set:function(Y){h.DefaultRetryStrategy=Y}}),Object.defineProperty(U,"BaseUrl",{get:function(){return h.BaseUrl},set:function(Y){h.BaseUrl=Y}}),Object.defineProperty(U,"PreprocessUrl",{get:function(){return h.PreprocessUrl},set:function(Y){h.PreprocessUrl=Y}}),Object.defineProperty(U,"CorsBehavior",{get:function(){return h.CorsBehavior},set:function(Y){h.CorsBehavior=Y}})})(A,V,T,s,I,a,X,Z,G,e)},12832:(Y,c,h)=>{function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Y=>{const c=16*Math.random()|0;return("x"===Y?c:3&c|8).toString(16)}))}h.d(c,{e:()=>C})},12821:(Y,c,h)=>{h.d(c,{d:()=>N});var C=h(12700),E=h(12825);class N{static Instantiate(Y){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[Y])return this.RegisteredExternalClasses[Y];const c=(0,E.d)(Y);if(c)return c;C.e.Warn(Y+" not found, you may have missed an import.");const h=Y.split(".");let N=window||this;for(let C=0,E=h.length;C<E;C++)N=N[h[C]];return"function"!==typeof N?null:N}}N.RegisteredExternalClasses={}},12709:(Y,c,h)=>{h.d(c,{d:()=>E});var C=h(12693);class E{static get Now(){return(0,C.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12740:(Y,c,h)=>{h.d(c,{c:()=>Q,f:()=>N,g:()=>C,h:()=>E});const C=Y=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(Y);let c="";for(let h=0;h<Y.byteLength;h++)c+=String.fromCharCode(Y[h]);return c},E=Y=>{const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h,C,E,N,Q,b,H,w="",W=0;const q=ArrayBuffer.isView(Y)?new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):new Uint8Array(Y);for(;W<q.length;)h=q[W++],C=W<q.length?q[W++]:Number.NaN,E=W<q.length?q[W++]:Number.NaN,N=h>>2,Q=(3&h)<<4|C>>4,b=(15&C)<<2|E>>6,H=63&E,isNaN(C)?b=H=64:isNaN(E)&&(H=64),w+=c.charAt(N)+c.charAt(Q)+c.charAt(b)+c.charAt(H);return w},N=Y=>atob(Y),Q=Y=>{const c=N(Y),h=c.length,C=new Uint8Array(new ArrayBuffer(h));for(let E=0;E<h;E++)C[E]=c.charCodeAt(E);return C.buffer}},12836:(Y,c,h)=>{function C(Y){let c=1;do{c*=2}while(c<Y);return c===Y}function E(Y,c,h){return Y*(1-h)+c*h}function N(Y){const c=Q(Y),h=b(Y);return c-Y>Y-h?h:c}function Q(Y){return Y--,Y|=Y>>1,Y|=Y>>2,Y|=Y>>4,Y|=Y>>8,Y|=Y>>16,++Y}function b(Y){return Y|=Y>>1,Y|=Y>>2,Y|=Y>>4,Y|=Y>>8,(Y|=Y>>16)-(Y>>1)}function H(Y,c){let h;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:h=b(Y);break;case 2:h=N(Y);break;default:h=Q(Y)}return Math.min(h,c)}h.d(c,{b:()=>b,f:()=>H,i:()=>C,k:()=>E,m:()=>N})},12687:(Y,c,h)=>{h.r(c),h.d(c,{AsyncLoop:()=>D,Tools:()=>y,className:()=>d});var C=h(12690),E=h(12693),N=h(12700),Q=h(12707),b=h(12709),H=h(12715),w=h(12719),W=h(12722),q=h(12728),k=h(12756),M=h(12821),p=h(12832),P=h(12836);class y{static get BaseUrl(){return q.e.BaseUrl}static set BaseUrl(Y){q.e.BaseUrl=Y}static get CleanUrl(){return q.e.CleanUrl}static set CleanUrl(Y){q.e.CleanUrl=Y}static IsAbsoluteUrl(Y){return 0===Y.indexOf("//")||-1!==Y.indexOf("://")&&(-1!==Y.indexOf(".")&&(-1!==Y.indexOf("/")&&(!(Y.indexOf(":")>Y.indexOf("/"))&&(Y.indexOf("://")<Y.indexOf(".")||(0===Y.indexOf("data:")||0===Y.indexOf("blob:"))))))}static set ScriptBaseUrl(Y){q.e.ScriptBaseUrl=Y}static get ScriptBaseUrl(){return q.e.ScriptBaseUrl}static set CDNBaseUrl(Y){y.ScriptBaseUrl=Y,y.AssetBaseUrl=Y}static set ScriptPreprocessUrl(Y){q.e.ScriptPreprocessUrl=Y}static get ScriptPreprocessUrl(){return q.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return q.e.DefaultRetryStrategy}static set DefaultRetryStrategy(Y){q.e.DefaultRetryStrategy=Y}static get CorsBehavior(){return q.e.CorsBehavior}static set CorsBehavior(Y){q.e.CorsBehavior=Y}static get UseFallbackTexture(){return W.d.UseFallbackTexture}static set UseFallbackTexture(Y){W.d.UseFallbackTexture=Y}static get RegisteredExternalClasses(){return M.d.RegisteredExternalClasses}static set RegisteredExternalClasses(Y){M.d.RegisteredExternalClasses=Y}static get fallbackTexture(){return W.d.FallbackTexture}static set fallbackTexture(Y){W.d.FallbackTexture=Y}static FetchToRef(Y,c,h,C,E,N){const Q=4*((Math.abs(Y)*h%h|0)+(Math.abs(c)*C%C|0)*h);N.r=E[Q]/255,N.g=E[Q+1]/255,N.b=E[Q+2]/255,N.a=E[Q+3]/255}static Mix(Y,c,h){return 0}static Instantiate(Y){return M.d.Instantiate(Y)}static SetImmediate(Y){k.c.SetImmediate(Y)}static IsExponentOfTwo(Y){return!0}static FloatRound(Y){return Math.fround(Y)}static GetFilename(Y){const c=Y.lastIndexOf("/");return c<0?Y:Y.substring(c+1)}static GetFolderPath(Y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const h=Y.lastIndexOf("/");return h<0?c?Y:"":Y.substring(0,h+1)}static ToDegrees(Y){return 180*Y/Math.PI}static ToRadians(Y){return Y*Math.PI/180}static SmoothAngleChange(Y,c){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const C=this.ToRadians(Y),E=this.ToRadians(c);return this.ToDegrees(Math.atan2((1-h)*Math.sin(E)+h*Math.sin(C),(1-h)*Math.cos(E)+h*Math.cos(C)))}static MakeArray(Y,c){return!0===c||void 0!==Y&&null!=Y?Array.isArray(Y)?Y:[Y]:null}static GetPointerPrefix(Y){return(0,E.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(Y,c){(0,q.D)(Y,c)}static SetReferrerPolicyBehavior(Y,c){c.referrerPolicy=Y}static get PreprocessUrl(){return q.e.PreprocessUrl}static set PreprocessUrl(Y){q.e.PreprocessUrl=Y}static LoadImage(Y,c,h,C,E,N){return(0,q.u)(Y,c,h,C,E,N)}static LoadFile(Y,c,h,C,E,N){return(0,q.r)(Y,c,h,C,E,N)}static async LoadFileAsync(Y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((h,C)=>{(0,q.r)(Y,(Y=>{h(Y)}),void 0,void 0,c,((Y,c)=>{C(c)}))}))}static GetAssetUrl(Y){if(!Y)return"";if(y.AssetBaseUrl&&Y.startsWith(y._DefaultAssetsUrl)){const c="/"===y.AssetBaseUrl[y.AssetBaseUrl.length-1]?y.AssetBaseUrl.substring(0,y.AssetBaseUrl.length-1):y.AssetBaseUrl;return Y.replace(y._DefaultAssetsUrl,c)}return Y}static GetBabylonScriptURL(Y,c){if(!Y)return"";if(y.ScriptBaseUrl&&Y.startsWith(y._DefaultCdnUrl)){const c="/"===y.ScriptBaseUrl[y.ScriptBaseUrl.length-1]?y.ScriptBaseUrl.substring(0,y.ScriptBaseUrl.length-1):y.ScriptBaseUrl;Y=Y.replace(y._DefaultCdnUrl,c)}return Y=y.ScriptPreprocessUrl(Y),c&&(Y=y.GetAbsoluteUrl(Y)),Y}static LoadBabylonScript(Y,c,h,C){Y=y.GetBabylonScriptURL(Y),y.LoadScript(Y,c,h)}static async LoadBabylonScriptAsync(Y){return Y=y.GetBabylonScriptURL(Y),await y.LoadScriptAsync(Y)}static LoadScript(Y,c,h,C){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(Y),c&&c()}catch(H){null===h||void 0===h||h(`Unable to load script '${Y}' in worker`,H)}return}if(!(0,E.k)())return void(null===h||void 0===h||h(`Cannot load script '${Y}' outside of a window or a worker`));const Q=document.getElementsByTagName("head")[0],b=document.createElement("script");N?(b.setAttribute("type","module"),b.innerText=Y):(b.setAttribute("type","text/javascript"),b.setAttribute("src",Y)),C&&(b.id=C),b.onload=()=>{c&&c()},b.onerror=c=>{h&&h(`Unable to load script '${Y}'`,c)},Q.appendChild(b)}static async LoadScriptAsync(Y,c){return await new Promise(((h,C)=>{this.LoadScript(Y,(()=>{h()}),((Y,c)=>{C(c||new Error(Y))}),c)}))}static ReadFileAsDataURL(Y,c,h){const E=new FileReader,N={onCompleteObservable:new C.c,abort:()=>E.abort()};return E.onloadend=()=>{N.onCompleteObservable.notifyObservers(N)},E.onload=Y=>{c(Y.target.result)},E.onprogress=h,E.readAsDataURL(Y),N}static ReadFile(Y,c,h,C,E){return(0,q.x)(Y,c,h,C,E)}static FileAsURL(Y){const c=new Blob([Y]);return window.URL.createObjectURL(c)}static Format(Y){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Y.toFixed(c)}static DeepCopy(Y,c,h,C){Q.b.DeepCopy(Y,c,h,C)}static IsEmpty(Y){for(const c in Y)if(Object.prototype.hasOwnProperty.call(Y,c))return!1;return!0}static RegisterTopRootEvents(Y,c){for(let C=0;C<c.length;C++){const E=c[C];Y.addEventListener(E.name,E.handler,!1);try{window.parent&&window.parent.addEventListener(E.name,E.handler,!1)}catch(h){}}}static UnregisterTopRootEvents(Y,c){for(let C=0;C<c.length;C++){const E=c[C];Y.removeEventListener(E.name,E.handler);try{Y.parent&&Y.parent.removeEventListener(E.name,E.handler)}catch(h){}}}static async DumpFramebuffer(Y,c,h,C){throw(0,H.c)("DumpTools")}static DumpData(Y,c,h,C){throw(0,H.c)("DumpTools")}static async DumpDataAsync(Y,c,h){throw(0,H.c)("DumpTools")}static _IsOffScreenCanvas(Y){return void 0!==Y.convertToBlob}static ToBlob(Y,c){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0;y._IsOffScreenCanvas(Y)||Y.toBlob||(Y.toBlob=function(Y,c,h){setTimeout((()=>{const C=atob(this.toDataURL(c,h).split(",")[1]),E=C.length,N=new Uint8Array(E);for(let Y=0;Y<E;Y++)N[Y]=C.charCodeAt(Y);Y(new Blob([N]))}))}),y._IsOffScreenCanvas(Y)?Y.convertToBlob({type:h,quality:C}).then((Y=>c(Y))):Y.toBlob((function(Y){c(Y)}),h,C)}static DownloadBlob(Y,c){if("download"in document.createElement("a")){if(!c){const Y=new Date;c="screenshot_"+((Y.getFullYear()+"-"+(Y.getMonth()+1)).slice(2)+"-"+Y.getDate()+"_"+Y.getHours()+"-"+("0"+Y.getMinutes()).slice(-2))+".png"}y.Download(Y,c)}else if(Y&&"undefined"!==typeof URL){const c=URL.createObjectURL(Y),h=window.open("");if(!h)return;const C=h.document.createElement("img");C.onload=function(){URL.revokeObjectURL(c)},C.src=c,h.document.body.appendChild(C)}}static EncodeScreenshotCanvasData(Y,c){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0;if("string"!==typeof C&&c){if(c){if(y._IsOffScreenCanvas(Y))return void Y.convertToBlob({type:h,quality:E}).then((Y=>{const h=new FileReader;h.readAsDataURL(Y),h.onloadend=()=>{const Y=h.result;c(Y)}}));const C=Y.toDataURL(h,E);c(C)}}else this.ToBlob(Y,(function(Y){Y&&y.DownloadBlob(Y,C),c&&c("")}),h,E)}static Download(Y,c){if("undefined"===typeof URL)return;const h=window.URL.createObjectURL(Y),C=document.createElement("a");document.body.appendChild(C),C.style.display="none",C.href=h,C.download=c,C.addEventListener("click",(()=>{C.parentElement&&C.parentElement.removeChild(C)})),C.click(),window.URL.revokeObjectURL(h)}static BackCompatCameraNoPreventDefault(Y){return"boolean"===typeof Y[0]?Y[0]:"boolean"===typeof Y[1]&&Y[1]}static CreateScreenshot(Y,c,h,C){throw(0,H.c)("ScreenshotTools")}static async CreateScreenshotAsync(Y,c,h){throw(0,H.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(Y,c,h,C){throw(0,H.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(Y,c,h){throw(0,H.c)("ScreenshotTools")}static RandomId(){return(0,p.e)()}static IsBase64(Y){return(0,q.m)(Y)}static DecodeBase64(Y){return(0,q.c)(Y)}static get errorsCount(){return N.e.errorsCount}static Log(Y){N.e.Log(Y)}static Warn(Y){N.e.Warn(Y)}static Error(Y){N.e.Error(Y)}static get LogCache(){return N.e.LogCache}static ClearLogCache(){N.e.ClearLogCache()}static set LogLevels(Y){N.e.LogLevels=Y}static set PerformanceLogLevel(Y){return(Y&y.PerformanceUserMarkLogLevel)===y.PerformanceUserMarkLogLevel?(y.StartPerformanceCounter=y._StartUserMark,void(y.EndPerformanceCounter=y._EndUserMark)):(Y&y.PerformanceConsoleLogLevel)===y.PerformanceConsoleLogLevel?(y.StartPerformanceCounter=y._StartPerformanceConsole,void(y.EndPerformanceCounter=y._EndPerformanceConsole)):(y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,void(y.EndPerformanceCounter=y._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(Y,c){}static _EndPerformanceCounterDisabled(Y,c){}static _StartUserMark(Y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!y._Performance){if(!(0,E.k)())return;y._Performance=window.performance}c&&y._Performance.mark&&y._Performance.mark(Y+"-Begin")}static _EndUserMark(Y){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&y._Performance.mark&&(y._Performance.mark(Y+"-End"),y._Performance.measure(Y,Y+"-Begin",Y+"-End"))}static _StartPerformanceConsole(Y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(y._StartUserMark(Y,c),console.time&&console.time(Y))}static _EndPerformanceConsole(Y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(y._EndUserMark(Y,c),console.timeEnd(Y))}static get Now(){return b.d.Now}static GetClassName(Y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null;if(!c&&Y.getClassName)h=Y.getClassName();else{if(Y instanceof Object){h=(c?Y:Object.getPrototypeOf(Y)).constructor.__bjsclassName__}h||(h=typeof Y)}return h}static First(Y,c){for(const h of Y)if(c(h))return h;return null}static getFullClassName(Y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null,C=null;if(!c&&Y.getClassName)h=Y.getClassName();else{if(Y instanceof Object){const E=c?Y:Object.getPrototypeOf(Y);h=E.constructor.__bjsclassName__,C=E.constructor.__bjsmoduleName__}h||(h=typeof Y)}return h?(null!=C?C+".":"")+h:null}static async DelayAsync(Y){await new Promise((c=>{setTimeout((()=>{c()}),Y)}))}static IsSafari(){return!!(0,E.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function d(Y,c){return h=>{h.__bjsclassName__=Y,h.__bjsmoduleName__=null!=c?c:null}}y.AssetBaseUrl="",y.UseCustomRequestHeaders=!1,y.CustomRequestHeaders=w.c.CustomRequestHeaders,y.GetDOMTextContent=E.c,y._DefaultCdnUrl="https://cdn.babylonjs.com",y._DefaultAssetsUrl="https://assets.babylonjs.com/core",y.GetAbsoluteUrl="object"===typeof document?Y=>{const c=document.createElement("a");return c.href=Y,c.href}:"function"===typeof URL&&"object"===typeof location?Y=>new URL(Y,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},y.NoneLogLevel=N.e.NoneLogLevel,y.MessageLogLevel=N.e.MessageLogLevel,y.WarningLogLevel=N.e.WarningLogLevel,y.ErrorLogLevel=N.e.ErrorLogLevel,y.AllLogLevel=N.e.AllLogLevel,y.IsWindowObjectExist=E.k,y.PerformanceNoneLogLevel=0,y.PerformanceUserMarkLogLevel=1,y.PerformanceConsoleLogLevel=2,y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,y.EndPerformanceCounter=y._EndPerformanceCounterDisabled;class D{constructor(Y,c,h){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=Y,this.index=C-1,this._done=!1,this._fn=c,this._successCallback=h}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(Y,c,h){const C=new D(Y,c,h,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return C.executeNext(),C}static SyncAsyncForLoop(Y,c,h,C,E){let N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return D.Run(Math.ceil(Y/c),(C=>{E&&E()?C.breakLoop():setTimeout((()=>{for(let N=0;N<c;++N){const Q=C.index*c+N;if(Q>=Y)break;if(h(Q),E&&E()){C.breakLoop();break}}C.executeNext()}),N)}),C)}}y.Mix=P.k,y.IsExponentOfTwo=P.i,W.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12825:(Y,c,h)=>{h.d(c,{d:()=>N,e:()=>E});const C={};function E(Y,c){C[Y]=c}function N(Y){return C[Y]}},12719:(Y,c,h)=>{h.d(c,{c:()=>C});class C{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(C.CustomRequestHeaders).length>0||C.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const Y in C.CustomRequestHeaders){const c=C.CustomRequestHeaders[Y];c&&this._xhr.setRequestHeader(Y,c)}}_shouldSkipRequestModifications(Y){return C.SkipRequestModificationForBabylonCDN&&(Y.includes("preview.babylonjs.com")||Y.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(Y){this._xhr.onprogress=Y}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(Y){this._xhr.responseType=Y}get timeout(){return this._xhr.timeout}set timeout(Y){this._xhr.timeout=Y}addEventListener(Y,c,h){this._xhr.addEventListener(Y,c,h)}removeEventListener(Y,c,h){this._xhr.removeEventListener(Y,c,h)}abort(){this._xhr.abort()}send(Y){C.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(Y)}open(Y,c){for(const h of C.CustomRequestModifiers){if(this._shouldSkipRequestModifications(c))return;c=h(this._xhr,c)||c}c=(c=c.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=c,this._xhr.open(Y,c,!0)}setRequestHeader(Y,c){this._xhr.setRequestHeader(Y,c)}getResponseHeader(Y){return this._xhr.getResponseHeader(Y)}}C.CustomRequestHeaders={},C.CustomRequestModifiers=new Array,C.SkipRequestModificationForBabylonCDN=!0}}]);