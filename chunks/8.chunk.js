"use strict";(self.wj3aziuz228=self.wj3aziuz228||[]).push([[8],{12377:(u,R,I)=>{I.d(R,{d:()=>T});var B=I(12346),U=I(12315),K=I(12386),C=I(12409),D=I(12329);class s{constructor(){let u=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,u&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(u){this._zOffset!==u&&(this._zOffset=u,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(u){this._zOffsetUnits!==u&&(this._zOffsetUnits=u,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(u){this._cullFace!==u&&(this._cullFace=u,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(u){this._cull!==u&&(this._cull=u,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(u){this._depthFunc!==u&&(this._depthFunc=u,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(u){this._depthMask!==u&&(this._depthMask=u,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(u){this._depthTest!==u&&(this._depthTest=u,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(u){this._frontFace!==u&&(this._frontFace=u,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(u){this.isDirty&&(this._isCullDirty&&(this.cull?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(u.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(u.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(u.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(this.zOffset,this.zOffsetUnits)):u.disable(u.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(u.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class t{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(u){this._func!==u&&(this._func=u,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(u){this._funcRef!==u&&(this._funcRef=u,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(u){this._funcMask!==u&&(this._funcMask=u,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(u){this._opStencilFail!==u&&(this._opStencilFail=u,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(u){this._opDepthFail!==u&&(this._opDepthFail=u,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(u){this._opStencilDepthPass!==u&&(this._opStencilDepthPass=u,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(u){this._mask!==u&&(this._mask=u,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(u){this._enabled!==u&&(this._enabled=u,this._isStencilTestDirty=!0)}constructor(){let u=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,u&&this.reset()}reset(){var u;this.stencilMaterial=void 0,null===(u=this.stencilGlobal)||void 0===u||u.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(u){var R;if(!u)return;const I=!this.useStencilGlobalOnly&&!(null===(R=this.stencilMaterial)||void 0===R||!R.enabled);this.enabled=I?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=I?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=I?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=I?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=I?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=I?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=I?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=I?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(u.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(u.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(u.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class G{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=G.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=G.KEEP,this.opDepthFail=G.KEEP,this.opStencilDepthPass=G.REPLACE}get stencilFunc(){return this.func}set stencilFunc(u){this.func=u}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(u){this.funcRef=u}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(u){this.funcMask=u}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(u){this.opStencilFail=u}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(u){this.opDepthFail=u}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(u){this.opStencilDepthPass=u}get stencilMask(){return this.mask}set stencilMask(u){this.mask=u}get stencilTest(){return this.enabled}set stencilTest(u){this.enabled=u}}G.ALWAYS=519,G.KEEP=7680,G.REPLACE=7681;class S{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(u){this._alphaBlend!==u&&(this._alphaBlend=u,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(u,R,I,B){this._blendConstants[0]===u&&this._blendConstants[1]===R&&this._blendConstants[2]===I&&this._blendConstants[3]===B||(this._blendConstants[0]=u,this._blendConstants[1]=R,this._blendConstants[2]=I,this._blendConstants[3]=B,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(u,R,I,B){this._blendFunctionParameters[0]===u&&this._blendFunctionParameters[1]===R&&this._blendFunctionParameters[2]===I&&this._blendFunctionParameters[3]===B||(this._blendFunctionParameters[0]=u,this._blendFunctionParameters[1]=R,this._blendFunctionParameters[2]=I,this._blendFunctionParameters[3]=B,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(u,R){this._blendEquationParameters[0]===u&&this._blendEquationParameters[1]===R||(this._blendEquationParameters[0]=u,this._blendEquationParameters[1]=R,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(u){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?u.enable(u.BLEND):u.disable(u.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(u.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(u.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(u.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var b=I(12335),r=I(12415),P=I(12312),X=I(12303),E=I(12371),z=I(12425);function f(u,R){if((0,P.h)()){const{requestAnimationFrame:I}=R||window;if("function"===typeof I)return I(u)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(u);return setTimeout(u,16)}class T{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(u){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get FC(){return this._useReverseDepthBuffer}set FC(u){u!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=u,this._depthCullingState.depthFunc=u?518:515)}setColorWrite(u){u!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=u)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(u){if(u)return this.isNDCHalfZRange?u.IS_NDC_HALF_ZRANGE="":delete u.IS_NDC_HALF_ZRANGE,this.FC?u.USE_REVERSE_DEPTHBUFFER="":delete u.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?u.USE_EXACT_SRGB_CONVERSIONS="":delete u.USE_EXACT_SRGB_CONVERSIONS);{let u="";return this.isNDCHalfZRange&&(u+="#define IS_NDC_HALF_ZRANGE"),this.FC&&(u&&(u+="\n"),u+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(u&&(u+="\n"),u+="#define USE_EXACT_SRGB_CONVERSIONS"),u}}_rebuildInternalTextures(){const u=this._internalTexturesCache.slice();for(const R of u)R._rebuild()}_rebuildRenderTargetWrappers(){const u=this._renderTargetWrapperCache.slice();for(const R of u)R._rebuild()}_rebuildEffects(){for(const u in this._compiledEffects){const R=this._compiledEffects[u];R._pipelineContext=null,R._prepareEffect()}K.Effect.ResetCache()}_rebuildGraphicsResources(){var u;this.wipeCaches(!0),this._rebuildEffects(),null===(u=this._rebuildComputeEffects)||void 0===u||u.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){U.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(u){setTimeout((()=>{this._clearEmptyResources();const R=this._depthCullingState.depthTest,I=this._depthCullingState.depthFunc,B=this._depthCullingState.depthMask,U=this._stencilState.stencilTest;u(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=R,this._depthCullingState.depthFunc=I,this._depthCullingState.depthMask=B,this._stencilState.stencilTest=U,this._flagContextRestored()}),0)}get C(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(u){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(u){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const u=new Uint8Array(4),R=[u,u,u,u,u,u];this._emptyCubeTexture=this.createRawCubeTexture(R,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(u){if(!u)return this._activeRenderLoops.length=0,void this._cancelFrame();const R=this._activeRenderLoops.indexOf(u);R>=0&&(this._activeRenderLoops.splice(R,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const u=this._frameHandler;if(this._frameHandler=0,(0,P.h)()){const{cancelAnimationFrame:R}=this.getHostWindow()||window;if("function"===typeof R)return R(u)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(u);return clearTimeout(u)}}nC(){this.onBeginFrameObservable.notifyObservers(this)}dC(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(u){this._maxFPS=u,void 0!==u&&(this._minFrameTime=u<=0?Number.MAX_VALUE:1e3/u)}_isOverFrameTime(u){if(!u||void 0===this._maxFPS)return!1;const R=u-this._lastFrameTime;return this._lastFrameTime=u,this._renderAccumulator+=R,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(u){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(u)){let u=!0;(this.C||!this.renderEvenInBackground&&this._windowIsBackground)&&(u=!1),u&&(this.nC(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.dC())}}_renderLoop(u){this._processFrame(u),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let u=0;u<this._activeRenderLoops.length;u++){(0,this._activeRenderLoops[u])()}}_renderViews(){return!1}_queueNewFrame(u,R){return f(u,R)}runRenderLoop(u){-1===this._activeRenderLoops.indexOf(u)&&(this._activeRenderLoops.push(u),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(u){this._depthCullingState.depthTest=u}setZOffset(u){this._depthCullingState.zOffset=this.FC?-u:u}getZOffset(){const u=this._depthCullingState.zOffset;return this.FC?-u:u}setZOffsetUnits(u){this._depthCullingState.zOffsetUnits=this.FC?-u:u}getZOffsetUnits(){const u=this._depthCullingState.zOffsetUnits;return this.FC?-u:u}getHostWindow(){return(0,P.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(u){this._compatibilityMode=!0}_rebuildTextures(){for(const u of this.scenes)u._rebuildTextures();for(const u of this._virtualScenes)u._rebuildTextures()}_releaseRenderTargetWrapper(u){const R=this._renderTargetWrapperCache.indexOf(u);-1!==R&&this._renderTargetWrapperCache.splice(R,1)}get currentViewport(){return this._cachedViewport}setViewport(u,R,I){const B=R||this.getRenderWidth(),U=I||this.getRenderHeight(),K=u.x||0,C=u.y||0;this._cachedViewport=u,this._viewport(K*B,C*U,B*u.width,U*u.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(u){return new Path2D(u)}get description(){let u=this.name+this.version;return this._caps.parallelShaderCompile&&(u+=" - Parallel shader compilation"),u}_createTextureBase(u,R,I,K){let C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,t=arguments.length>7?arguments[7]:void 0,G=arguments.length>8?arguments[8]:void 0,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,b=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,P=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,X=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,E=arguments.length>13?arguments[13]:void 0,f=arguments.length>14?arguments[14]:void 0,Q=arguments.length>15?arguments[15]:void 0;const V="data:"===(u=u||"").substring(0,5),q="blob:"===u.substring(0,5),e=V&&-1!==u.indexOf(";base64,"),Y=b||new r.d(this,1);Y!==b&&(Y.label=u.substring(0,60));const M=u;!this._transformTextureUrl||e||b||S||(u=this._transformTextureUrl(u)),M!==u&&(Y._originalUrl=M);const o=u.lastIndexOf(".");let j=X||(o>-1?u.substring(o).toLowerCase():"");j.indexOf("?")>-1&&(j=j.split("?")[0]);const h=(0,z.c)(j,E);K&&K.addPendingData(Y),Y.url=u,Y.generateMipMaps=!R,Y.samplingMode=C,Y.invertY=I,Y._useSRGBBuffer=this._getUseSRGBBuffer(!!Q,R),this._doNotHandleContextLost||(Y._buffer=S);let x=null;D&&!b&&(x=Y.onLoadedObservable.add(D)),b||this._internalTexturesCache.push(Y);const g=(I,b)=>{K&&K.removePendingData(Y),u===M?(x&&Y.onLoadedObservable.remove(x),B.e.UseFallbackTexture&&u!==B.e.FallbackTexture&&this._createTextureBase(B.e.FallbackTexture,R,Y.invertY,K,C,null,s,t,G,S,Y),I=(I||"Unknown error")+(B.e.UseFallbackTexture?" - Fallback texture was used":""),Y.onErrorObservable.notifyObservers({message:I,exception:b}),s&&s(I,b)):(U.b.Warn(`Failed to load ${u}, falling back to ${M}`),this._createTextureBase(M,R,Y.invertY,K,C,D,s,t,G,S,Y,P,X,E,f,Q))};if(h){const R=async u=>{(await h).loadData(u,Y,((u,R,I,B,U,D)=>{D?g("TextureLoader failed to load data"):t(Y,j,K,{width:u,height:R},Y.invertY,!I,B,(()=>(U(),!1)),C)}),f)};S?S instanceof ArrayBuffer?R(new Uint8Array(S)):ArrayBuffer.isView(S)?R(S):s&&s("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(u,(u=>{R(new Uint8Array(u))}),void 0,K?K.offlineProvider:void 0,!0,((u,R)=>{g("Unable to load "+(u&&u.responseURL,R))}))}else{const I=u=>{q&&!this._doNotHandleContextLost&&(Y._buffer=u),t(Y,j,K,u,Y.invertY,R,!1,G,C)};!V||e?S&&("string"===typeof S.decoding||S.close)?I(S):T._FileToolsLoadImage(u||"",I,g,K?K.offlineProvider:null,E,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof S||S instanceof ArrayBuffer||ArrayBuffer.isView(S)||S instanceof Blob?T._FileToolsLoadImage(S,I,g,K?K.offlineProvider:null,E,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):S&&I(S)}return Y}_rebuildBuffers(){for(const u of this._uniformBuffers)u._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,P.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const u in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,u)&&(this._boundTexturesCache[u]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(u){this._name=u}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(u){this._hardwareScalingLevel=u,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(u){this._doNotHandleContextLost=u}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(u,R,I){var U,K;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new s,this._stencilStateComposer=new t,this._stencilState=new G,this._alphaState=new S,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new X.c,this.onCanvasFocusObservable=new X.c,this.onNewSceneAddedObservable=new X.c,this.onResizeObservable=new X.c,this.onCanvasPointerOutObservable=new X.c,this.onEffectErrorObservable=new X.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new X.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=u=>this._renderLoop(u),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new X.c,this.onAfterShaderCompilationObservable=new X.c,this.onBeginFrameObservable=new X.c,this.onEndFrameObservable=new X.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new X.c,this.onContextRestoredObservable=new X.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.uD=new X.c,this.onReleaseEffectsObservable=new X.c,B.e.Instances.push(this),this.startTime=D.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,C.c.SetMatrixPrecision(!!R.useHighPrecisionMatrix),(0,P.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=I??!1,R.antialias=u??R.antialias,R.deterministicLockstep=R.deterministicLockstep??!1,R.lockstepMaxSteps=R.lockstepMaxSteps??4,R.timeStep=R.timeStep??1/60,R.RD=R.RD??!0,this._audioContext=(null===(U=R.audioEngineOptions)||void 0===U?void 0:U.audioContext)??null,this._audioDestination=(null===(K=R.audioEngineOptions)||void 0===K?void 0:K.audioDestination)??null,this.premultipliedAlpha=R.premultipliedAlpha??!0,this._doNotHandleContextLost=!!R.doNotHandleContextLost,this._isStencilEnable=!!R.RD,this.useExactSrgbConversions=R.useExactSrgbConversions??!1;const b=(0,P.h)()&&window.devicePixelRatio||1,r=R.limitDeviceRatio||b;I=I||R.adaptToDeviceRatio||!1,this._hardwareScalingLevel=I?1/Math.min(r,b):1,this._lastDevicePixelRatio=b,this._creationOptions=R}resize(){let u,R,I=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const u=(0,P.h)()&&window.devicePixelRatio||1,R=this._lastDevicePixelRatio/u;this._lastDevicePixelRatio=u,this._hardwareScalingLevel*=R}if((0,P.h)()&&(0,P.e)())if(this._renderingCanvas){var B,U;const I=null===(B=(U=this._renderingCanvas).getBoundingClientRect)||void 0===B?void 0:B.call(U);u=this._renderingCanvas.clientWidth||(null===I||void 0===I?void 0:I.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,R=this._renderingCanvas.clientHeight||(null===I||void 0===I?void 0:I.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else u=window.innerWidth,R=window.innerHeight;else u=this._renderingCanvas?this._renderingCanvas.width:100,R=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(u/this._hardwareScalingLevel,R/this._hardwareScalingLevel,I)}setSize(u,R){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(u|=0,R|=0,!I&&this._renderingCanvas.width===u&&this._renderingCanvas.height===R)return!1;if(this._renderingCanvas.width=u,this._renderingCanvas.height=R,this.scenes){for(let u=0;u<this.scenes.length;u++){const R=this.scenes[u];for(let u=0;u<R.cameras.length;u++){R.cameras[u]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(u,R,I,B,U,K,C,D,s,t,G){throw(0,b.c)("engine.rawTexture")}createRawCubeTexture(u,R,I,B,U,K,C,D){throw(0,b.c)("engine.rawTexture")}createRawTexture3D(u,R,I,B,U,K,C,D,s,t,G){throw(0,b.c)("engine.rawTexture")}createRawTexture2DArray(u,R,I,B,U,K,C,D,s,t,G){throw(0,b.c)("engine.rawTexture")}_sharedInit(u){this._renderingCanvas=u}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const u=navigator.userAgent;this.hostInformation.isMobile=-1!==u.indexOf("Mobile")||-1!==u.indexOf("Mac")&&(0,P.e)()&&"ontouchend"in document},this._checkForMobile(),(0,P.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(u){return document.createElement("video")}_reportDrawCall(){var u;let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(u=this._drawCalls)||void 0===u||u.addCount(R,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(u,R){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(u,R){return createImageBitmap(u,R)}resizeImageBitmap(u,R,I){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(u){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(u,R){if("undefined"===typeof document)return new OffscreenCanvas(u,R);const I=document.createElement("canvas");return I.width=u,I.height=R,I}createCanvas(u,R){return T._CreateCanvas(u,R)}static _FileToolsLoadImage(u,R,I,B,U,K,C){throw(0,b.c)("FileTools")}_loadFile(u,R,I,B,U,K){const C=(0,E.l)(u,R,I,B,U,K);return this._activeRequests.push(C),C.onCompleteObservable.add((()=>{const u=this._activeRequests.indexOf(C);-1!==u&&this._activeRequests.splice(u,1)})),C}static _FileToolsLoadFile(u,R,I,B,U,K){if(E.d.loadFile)return E.d.loadFile(u,R,I,B,U,K);throw(0,b.c)("FileTools")}dispose(){var u;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(u=this.releaseComputeEffects)||void 0===u||u.call(this),K.Effect.ResetCache();for(const I of this._activeRequests)I.abort();this._boundRenderFunction=null,this.uD.notifyObservers(this),this.uD.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,P.h)()&&window.removeEventListener("resize",this._checkForMobile);const R=B.e.Instances.indexOf(this);R>=0&&B.e.Instances.splice(R,1),B.e.Instances.length||(B.e.OnEnginesDisposedObservable.notifyObservers(this),B.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(u){throw(0,b.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(u,R){for(let I=0;I<B.e.Instances.length;I++){const U=B.e.Instances[I];for(let I=0;I<U.scenes.length;I++)U.scenes[I].markAllMaterialsAsDirty(u,R)}}}T._RenderPassIdCounter=0,T._RescalePostProcessFactory=null,T.CollisionsEpsilon=.001,T.QueueNewFrame=f},12346:(u,R,I)=>{I.d(R,{e:()=>U});var B=I(12303);class U{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}U.Instances=[],U.OnEnginesDisposedObservable=new B.c,U._LastCreatedScene=null,U.UseFallbackTexture=!0,U.FallbackTexture=""},12409:(u,R,I)=>{I.d(R,{c:()=>B});class B{static SetMatrixPrecision(u){if(B.MatrixTrackPrecisionChange=!1,u&&!B.MatrixUse64Bits&&B.MatrixTrackedMatrices)for(let R=0;R<B.MatrixTrackedMatrices.length;++R){const u=B.MatrixTrackedMatrices[R],I=u.ID;u.ID=new Array(16);for(let R=0;R<16;++R)u.ID[R]=I[R]}B.MatrixUse64Bits=u,B.MatrixCurrentType=B.MatrixUse64Bits?Array:Float32Array,B.MatrixTrackedMatrices=null}}B.MatrixUse64Bits=!1,B.MatrixTrackPrecisionChange=!0,B.MatrixCurrentType=Float32Array,B.MatrixTrackedMatrices=[]},12425:(u,R,I)=>{I.d(R,{c:()=>C});var B=I(12315);const U=new Map;function K(u,R){(function(u){return U.delete(u)})(u)&&B.b.Warn(`Extension with the name '${u}' already exists`),U.set(u,R)}function C(u,R){"image/ktx"!==R&&"image/ktx2"!==R||(u=".ktx"),U.has(u)||(u.endsWith(".ies")&&K(".ies",(async()=>await I.e(15).then(I.bind(I,14891)).then((u=>new u._IESTextureLoader)))),u.endsWith(".dds")&&K(".dds",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(19),I.e(18),I.e(28)]).then(I.bind(I,14898)).then((u=>new u._DDSTextureLoader)))),u.endsWith(".basis")&&K(".basis",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(47)]).then(I.bind(I,14911)).then((u=>new u._BasisTextureLoader)))),u.endsWith(".env")&&K(".env",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(19),I.e(18),I.e(23),I.e(21),I.e(45),I.e(48)]).then(I.bind(I,14914)).then((u=>new u._ENVTextureLoader)))),u.endsWith(".hdr")&&K(".hdr",(async()=>await Promise.all([I.e(14),I.e(49)]).then(I.bind(I,14921)).then((u=>new u._HDRTextureLoader)))),(u.endsWith(".ktx")||u.endsWith(".ktx2"))&&(K(".ktx",(async()=>await I.e(30).then(I.bind(I,14927)).then((u=>new u._KTXTextureLoader)))),K(".ktx2",(async()=>await I.e(30).then(I.bind(I,14927)).then((u=>new u._KTXTextureLoader))))),u.endsWith(".tga")&&K(".tga",(async()=>await I.e(50).then(I.bind(I,14934)).then((u=>new u._TGATextureLoader)))),u.endsWith(".exr")&&K(".exr",(async()=>await I.e(16).then(I.bind(I,14936)).then((u=>new u._ExrTextureLoader)))));const B=U.get(u);return B?Promise.resolve(B(R)):null}},12415:(u,R,I)=>{I.d(R,{d:()=>C});var B,U=I(12303),K=I(12422);!function(u){u[u.Unknown=0]="Unknown",u[u.Url=1]="Url",u[u.Temp=2]="Temp",u[u.Raw=3]="Raw",u[u.Dynamic=4]="Dynamic",u[u.RenderTarget=5]="RenderTarget",u[u.MultiRenderTarget=6]="MultiRenderTarget",u[u.Cube=7]="Cube",u[u.CubeRaw=8]="CubeRaw",u[u.CubePrefiltered=9]="CubePrefiltered",u[u.Raw3D=10]="Raw3D",u[u.Raw2DArray=11]="Raw2DArray",u[u.DepthStencil=12]="DepthStencil",u[u.CubeRawRGBD=13]="CubeRawRGBD",u[u.Depth=14]="Depth"}(B||(B={}));class C extends K.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(u){this.generateMipMaps=u}get uniqueId(){return this._uniqueId}_setUniqueId(u){this._uniqueId=u}getEngine(){return this._engine}get source(){return this._source}constructor(u,R){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new U.c,this.onErrorObservable=new U.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=u,this._source=R,this._uniqueId=C._Counter++,I||(this._hardwareTexture=u._createHardwareTexture())}incrementReferences(){this._references++}updateSize(u,R){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,u,R,I),this.width=u,this.height=R,this.depth=I,this.baseWidth=u,this.baseHeight=R,this.baseDepth=I,this._size=u*R*I}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const u=this.onRebuildCallback(this),R=R=>{R._swapAndDie(this,!1),this.isReady=u.isReady};return void(u.isAsync?u.proxy.then(R):R(u.proxy))}let u;switch(this.source){case 2:case 12:case 14:break;case 1:return void(u=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(u=>{u._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:u=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),u._swapAndDie(this,!1),this.isReady=!0;break;case 10:u=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),u._swapAndDie(this,!1),this.isReady=!0;break;case 11:u=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),u._swapAndDie(this,!1),this.isReady=!0;break;case 4:u=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),u._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(u=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{u._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:u=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),u._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return u=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(u=>{u&&u._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(u._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(u){var R;let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(R=this._hardwareTexture)||void 0===R||R.setUsage(u._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),u._hardwareTexture=this._hardwareTexture,I&&(u._isRGBD=this._isRGBD),this._lodTextureHigh&&(u._lodTextureHigh&&u._lodTextureHigh.dispose(),u._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(u._lodTextureMid&&u._lodTextureMid.dispose(),u._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(u._lodTextureLow&&u._lodTextureLow.dispose(),u._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(u._irradianceTexture&&u._irradianceTexture.dispose(),u._irradianceTexture=this._irradianceTexture);const B=this._engine.getLoadedTexturesCache();let U=B.indexOf(this);-1!==U&&B.splice(U,1),U=B.indexOf(u),-1===U&&B.push(u)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}C._Counter=0},12422:(u,R,I)=>{I.d(R,{e:()=>B});class B{get wrapU(){return this._cachedWrapU}set wrapU(u){this._cachedWrapU=u}get wrapV(){return this._cachedWrapV}set wrapV(u){this._cachedWrapV=u}get wrapR(){return this._cachedWrapR}set wrapR(u){this._cachedWrapR=u}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(u){this._cachedAnisotropicFilteringLevel=u}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(u){this._comparisonFunction=u}get useMipMaps(){return this._useMipMaps}set useMipMaps(u){this._useMipMaps=u}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=u,this._cachedWrapV=R,this._cachedWrapR=I,this._cachedAnisotropicFilteringLevel=B,this.samplingMode=U,this._comparisonFunction=K,this}compareSampler(u){return this._cachedWrapU===u._cachedWrapU&&this._cachedWrapV===u._cachedWrapV&&this._cachedWrapR===u._cachedWrapR&&this._cachedAnisotropicFilteringLevel===u._cachedAnisotropicFilteringLevel&&this.samplingMode===u.samplingMode&&this._comparisonFunction===u._comparisonFunction&&this._useMipMaps===u._useMipMaps}}},12320:(u,R,I)=>{I.d(R,{d:()=>K});var B=I(12315);const U=(u,R,I)=>u?u.getClassName&&"Mesh"===u.getClassName()?null:!u.getClassName||"SubMesh"!==u.getClassName()&&"PhysicsBody"!==u.getClassName()?u.clone?u.clone():Array.isArray(u)?u.slice():I&&"object"===typeof u?{...u}:null:u.clone(R):null;class K{static DeepCopy(u,R,I,K){let C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const D=function(u){const R=[];do{const I=Object.getOwnPropertyNames(u);for(const u of I)-1===R.indexOf(u)&&R.push(u)}while(u=Object.getPrototypeOf(u));return R}(u);for(const t of D){if("_"===t[0]&&(!K||-1===K.indexOf(t)))continue;if(t.endsWith("Observable"))continue;if(I&&-1!==I.indexOf(t))continue;const D=u[t],G=typeof D;if("function"!==G)try{if("object"===G)if(D instanceof Uint8Array)R[t]=Uint8Array.from(D);else if(D instanceof Array){if(R[t]=[],D.length>0)if("object"==typeof D[0])for(let u=0;u<D.length;u++){const I=U(D[u],R,C);-1===R[t].indexOf(I)&&R[t].push(I)}else R[t]=D.slice(0)}else R[t]=U(D,R,C);else R[t]=D}catch(s){B.b.Warn(s.message)}}}}},12355:(u,R,I)=>{I.d(R,{b:()=>B,d:()=>U,h:()=>K});class B extends Error{}B._setPrototypeOf=Object.setPrototypeOf||((u,R)=>(u.__proto__=R,u));const U={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class K extends B{constructor(u,R,I){super(u),this.errorCode=R,this.innerError=I,this.name="RuntimeError",B._setPrototypeOf(this,K.prototype)}}},12348:(u,R,I)=>{I.d(R,{e:()=>g,g:()=>T,h:()=>o,i:()=>h,n:()=>Y,k:()=>E,p:()=>q,q:()=>e,t:()=>M,u:()=>Q});var B=I(12337),U=I(12312),K=I(12303);class C{}C.FilesToLoad={};var D=I(12355),s=I(12358),t=I(12362),G=I(12346),S=I(12315),b=I(12374),r=I(12371),P=I(12377);const X=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class E extends D.h{constructor(u,R){super(u,D.d.LoadFileError),this.name="LoadFileError",D.b._setPrototypeOf(this,E.prototype),R instanceof B.c?this.request=R:this.file=R}}class z extends D.h{constructor(u,R){super(u,D.d.RequestFileError),this.request=R,this.name="RequestFileError",D.b._setPrototypeOf(this,z.prototype)}}class f extends D.h{constructor(u,R){super(u,D.d.ReadFileError),this.file=R,this.name="ReadFileError",D.b._setPrototypeOf(this,f.prototype)}}const T={DefaultRetryStrategy:class{static ExponentialBackoff(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(I,B,U)=>0!==B.status||U>=u||-1!==I.indexOf("file:")?-1:Math.pow(2,U)*R}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:u=>u,ScriptBaseUrl:"",ScriptPreprocessUrl:u=>u,CleanUrl:u=>u=u.replace(/#/gm,"%23")},Q=(u,R)=>{if((!u||0!==u.indexOf("data:"))&&T.CorsBehavior)if("string"===typeof T.CorsBehavior||T.CorsBehavior instanceof String)R.crossOrigin=T.CorsBehavior;else{const I=T.CorsBehavior(u);I&&(R.crossOrigin=I)}},V={getRequiredSize:null},q=function(u,R,I,U){let K,D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",t=arguments.length>5?arguments[5]:void 0,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:G.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===S||void 0===S||!S._features.forceBitmapOverHTMLImageElement))return I("LoadImage is only supported in web or BabylonNative environments."),null;let b=!1;u instanceof ArrayBuffer||ArrayBuffer.isView(u)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(K=URL.createObjectURL(new Blob([u],{type:D})),b=!0):K=`data:${D};base64,`+(0,s.o)(u):u instanceof Blob?(K=URL.createObjectURL(u),b=!0):(K=T.CleanUrl(u),K=T.PreprocessUrl(K));const r=R=>{if(I){const B=K||u.toString();I(`Error while trying to load image: ${0===B.indexOf("http")||B.length<=128?B:B.slice(0,128)+"..."}`,R)}};if(null!==S&&void 0!==S&&S._features.forceBitmapOverHTMLImageElement)return Y(K,(B=>{S.createImageBitmap(new Blob([B],{type:D}),{premultiplyAlpha:"none",...t}).then((u=>{R(u),b&&URL.revokeObjectURL(K)})).catch((R=>{I&&I("Error while trying to load image: "+u,R)}))}),void 0,U||void 0,!0,((u,R)=>{r(R)})),null;const P=new Image;if(V.getRequiredSize){const R=V.getRequiredSize(u);R.width&&(P.width=R.width),R.height&&(P.height=R.height)}Q(K,P);const X=[],E=()=>{for(const u of X)u.target.removeEventListener(u.name,u.handler);X.length=0};X.push({target:P,name:"load",handler:()=>{E(),R(P),b&&P.src&&URL.revokeObjectURL(P.src)}}),X.push({target:P,name:"error",handler:u=>{E(),r(u),b&&P.src&&URL.revokeObjectURL(P.src)}}),X.push({target:document,name:"securitypolicyviolation",handler:u=>{if(u.blockedURI!==P.src||"BD"===u.disposition)return;E();const R=new Error(`CSP violation of policy ${u.effectiveDirective} ${u.blockedURI}. Current policy is ${u.originalPolicy}`);G.e.UseFallbackTexture=!1,r(R),b&&P.src&&URL.revokeObjectURL(P.src),P.src=""}}),(()=>{for(const u of X)u.target.addEventListener(u.name,u.handler)})();const z="blob:"===K.substring(0,5),f="data:"===K.substring(0,5),q=()=>{z||f||!B.c.IsCustomRequestAvailable?P.src=K:Y(K,((u,R,I)=>{const B=new Blob([u],{type:!D&&I?I:D}),U=URL.createObjectURL(B);b=!0,P.src=U}),void 0,U||void 0,!0,((u,R)=>{r(R)}))},e=()=>{U&&U.loadImage(K,P)};if(!z&&!f&&U&&U.enableTexturesOffline)U.open(e,q);else{if(-1!==K.indexOf("file:")){const u=decodeURIComponent(K.substring(5).toLowerCase());if(C.FilesToLoad[u]&&"undefined"!==typeof URL){try{let R;try{R=URL.createObjectURL(C.FilesToLoad[u])}catch(M){R=URL.createObjectURL(C.FilesToLoad[u])}P.src=R,b=!0}catch(o){P.src=""}return P}}q()}return P},e=(u,R,I,B,U)=>{const C=new FileReader,D={onCompleteObservable:new K.c,abort:()=>C.abort()};return C.onloadend=()=>D.onCompleteObservable.notifyObservers(D),U&&(C.onerror=()=>{U(new f(`Unable to read ${u.name}`,u))}),C.onload=u=>{R(u.target.result)},I&&(C.onprogress=I),B?C.readAsArrayBuffer(u):C.readAsText(u),D},Y=(u,R,I,B,U,s,t)=>{if(u.name)return e(u,R,I,U,s?u=>{s(void 0,u)}:void 0);const G=u;if(-1!==G.indexOf("file:")){let u=decodeURIComponent(G.substring(5).toLowerCase());0===u.indexOf("./")&&(u=u.substring(2));const B=C.FilesToLoad[u];if(B)return e(B,R,I,U,s?u=>s(void 0,new E(u.message,u.file)):void 0)}const{match:r,type:P}=x(G);if(r){const u={onCompleteObservable:new K.c,abort:()=>()=>{}};try{const u=U?g(G):v(G);R(u,void 0,P)}catch(D){s?s(void 0,D):S.b.Error(D.message||"Failed to parse the Data URL")}return b.d.SetImmediate((()=>{u.onCompleteObservable.notifyObservers(u)})),u}return M(G,((u,I)=>{R(u,null===I||void 0===I?void 0:I.responseURL,null===I||void 0===I?void 0:I.getResponseHeader("content-type"))}),I,B,U,s?u=>{s(u.request,new E(u.message,u.request))}:void 0,t)},M=(u,R,I,C,D,s,t)=>{u=T.CleanUrl(u),u=T.PreprocessUrl(u);const G=T.BaseUrl+u;let b=!1;const r={onCompleteObservable:new K.c,abort:()=>b=!0},P=()=>{let u,K=new B.c,C=null;const P=()=>{K&&(I&&K.removeEventListener("progress",I),u&&K.removeEventListener("readystatechange",u),K.removeEventListener("loadend",X))};let X=()=>{P(),r.onCompleteObservable.notifyObservers(r),r.onCompleteObservable.clear(),I=void 0,u=null,X=null,s=void 0,t=void 0,R=void 0};r.abort=()=>{b=!0,X&&X(),K&&K.readyState!==(XMLHttpRequest.DONE||4)&&K.abort(),null!==C&&(clearTimeout(C),C=null),K=null};const E=u=>{const R=u.message||"Unknown error";s&&K?s(new z(R,K)):S.b.Error(R)},f=S=>{if(K){if(K.open("GET",G),t)try{t(K)}catch(r){return void E(r)}D&&(K.responseType="arraybuffer"),I&&K.addEventListener("progress",I),X&&K.addEventListener("loadend",X),u=()=>{if(!b&&K&&K.readyState===(XMLHttpRequest.DONE||4)){if(u&&K.removeEventListener("readystatechange",u),K.status>=200&&K.status<300||0===K.status&&(!(0,U.h)()||j())){const u=D?K.response:K.responseText;if(null!==u){try{R&&R(u,K)}catch(r){E(r)}return}}const I=T.DefaultRetryStrategy;if(I){const u=I(G,K,S);if(-1!==u)return P(),K=new B.c,void(C=setTimeout((()=>f(S+1)),u))}const t=new z("Error status: "+K.status+" "+K.statusText+" - Unable to load "+G,K);s&&s(t)}},K.addEventListener("readystatechange",u),K.send()}};f(0)};if(C&&C.enableSceneOffline){const B=u=>{u&&u.status>400?s&&s(u):P()},U=()=>{C&&C.loadFile(T.BaseUrl+u,(u=>{!b&&R&&R(u),r.onCompleteObservable.notifyObservers(r)}),I?u=>{!b&&I&&I(u)}:void 0,B,D)};C.open(U,B)}else P();return r},o=u=>{const{match:R,type:I}=x(u);if(R)return I||void 0;const B=u.lastIndexOf(".");switch(u.substring(B+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"UD":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},j=()=>"undefined"!==typeof location&&"file:"===location.protocol,h=u=>X.test(u),x=u=>{const R=X.exec(u);if(null===R||0===R.length)return{match:!1,type:""};return{match:!0,type:R[0].replace("data:","").replace("base64,","")}};function g(u){return(0,s.e)(u.split(",")[1])}const v=u=>(0,s.h)(u.split(",")[1]);let p;P.d._FileToolsLoadImage=q,r.d.loadFile=Y,t.o.loadFile=Y;((u,R,I,B,U,K,C,D,s,t)=>{p={DecodeBase64UrlToBinary:u,DecodeBase64UrlToString:R,DefaultRetryStrategy:I.DefaultRetryStrategy,BaseUrl:I.BaseUrl,CorsBehavior:I.CorsBehavior,PreprocessUrl:I.PreprocessUrl,IsBase64DataUrl:B,IsFileURL:U,LoadFile:K,LoadImage:C,ReadFile:D,RequestFile:s,SetCorsBehavior:t},Object.defineProperty(p,"DefaultRetryStrategy",{get:function(){return I.DefaultRetryStrategy},set:function(u){I.DefaultRetryStrategy=u}}),Object.defineProperty(p,"BaseUrl",{get:function(){return I.BaseUrl},set:function(u){I.BaseUrl=u}}),Object.defineProperty(p,"PreprocessUrl",{get:function(){return I.PreprocessUrl},set:function(u){I.PreprocessUrl=u}}),Object.defineProperty(p,"CorsBehavior",{get:function(){return I.CorsBehavior},set:function(u){I.CorsBehavior=u}})})(g,v,T,h,j,Y,q,e,M,Q)},12440:(u,R,I)=>{function B(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(u=>{const R=16*Math.random()|0;return("x"===u?R:3&R|8).toString(16)}))}I.d(R,{d:()=>B})},12428:(u,R,I)=>{I.d(R,{e:()=>K});var B=I(12315),U=I(12433);class K{static Instantiate(u){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[u])return this.RegisteredExternalClasses[u];const R=(0,U.c)(u);if(R)return R;B.b.Warn(u+" not found, you may have missed an import.");const I=u.split(".");let K=window||this;for(let B=0,U=I.length;B<U;B++)K=K[I[B]];return"function"!==typeof K?null:K}}K.RegisteredExternalClasses={}},12329:(u,R,I)=>{I.d(R,{e:()=>U});var B=I(12312);class U{static get Now(){return(0,B.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12358:(u,R,I)=>{I.d(R,{e:()=>C,h:()=>K,k:()=>B,o:()=>U});const B=u=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(u);let R="";for(let I=0;I<u.byteLength;I++)R+=String.fromCharCode(u[I]);return R},U=u=>{const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I,B,U,K,C,D,s,t="",G=0;const S=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u);for(;G<S.length;)I=S[G++],B=G<S.length?S[G++]:Number.NaN,U=G<S.length?S[G++]:Number.NaN,K=I>>2,C=(3&I)<<4|B>>4,D=(15&B)<<2|U>>6,s=63&U,isNaN(B)?D=s=64:isNaN(U)&&(s=64),t+=R.charAt(K)+R.charAt(C)+R.charAt(D)+R.charAt(s);return t},K=u=>atob(u),C=u=>{const R=K(u),I=R.length,B=new Uint8Array(new ArrayBuffer(I));for(let U=0;U<I;U++)B[U]=R.charCodeAt(U);return B.buffer}},12448:(u,R,I)=>{function B(u){let R=1;do{R*=2}while(R<u);return R===u}function U(u,R,I){return u*(1-I)+R*I}function K(u){const R=C(u),I=D(u);return R-u>u-I?I:R}function C(u){return u--,u|=u>>1,u|=u>>2,u|=u>>4,u|=u>>8,u|=u>>16,++u}function D(u){return u|=u>>1,u|=u>>2,u|=u>>4,u|=u>>8,(u|=u>>16)-(u>>1)}function s(u,R){let I;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:I=D(u);break;case 2:I=K(u);break;default:I=C(u)}return Math.min(I,R)}I.d(R,{c:()=>D,g:()=>s,i:()=>B,l:()=>U,p:()=>K})},12294:(u,R,I)=>{I.r(R),I.d(R,{AsyncLoop:()=>f,Tools:()=>E,className:()=>z});var B=I(12303),U=I(12312),K=I(12315),C=I(12320),D=I(12329),s=I(12335),t=I(12337),G=I(12346),S=I(12348),b=I(12374),r=I(12428),P=I(12440),X=I(12448);class E{static get BaseUrl(){return S.g.BaseUrl}static set BaseUrl(u){S.g.BaseUrl=u}static get CleanUrl(){return S.g.CleanUrl}static set CleanUrl(u){S.g.CleanUrl=u}static IsAbsoluteUrl(u){return 0===u.indexOf("//")||-1!==u.indexOf("://")&&(-1!==u.indexOf(".")&&(-1!==u.indexOf("/")&&(!(u.indexOf(":")>u.indexOf("/"))&&(u.indexOf("://")<u.indexOf(".")||(0===u.indexOf("data:")||0===u.indexOf("blob:"))))))}static set ScriptBaseUrl(u){S.g.ScriptBaseUrl=u}static get ScriptBaseUrl(){return S.g.ScriptBaseUrl}static set CDNBaseUrl(u){E.ScriptBaseUrl=u,E.AssetBaseUrl=u}static set ScriptPreprocessUrl(u){S.g.ScriptPreprocessUrl=u}static get ScriptPreprocessUrl(){return S.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return S.g.DefaultRetryStrategy}static set DefaultRetryStrategy(u){S.g.DefaultRetryStrategy=u}static get CorsBehavior(){return S.g.CorsBehavior}static set CorsBehavior(u){S.g.CorsBehavior=u}static get UseFallbackTexture(){return G.e.UseFallbackTexture}static set UseFallbackTexture(u){G.e.UseFallbackTexture=u}static get RegisteredExternalClasses(){return r.e.RegisteredExternalClasses}static set RegisteredExternalClasses(u){r.e.RegisteredExternalClasses=u}static get fallbackTexture(){return G.e.FallbackTexture}static set fallbackTexture(u){G.e.FallbackTexture=u}static FetchToRef(u,R,I,B,U,K){const C=4*((Math.abs(u)*I%I|0)+(Math.abs(R)*B%B|0)*I);K.r=U[C]/255,K.g=U[C+1]/255,K.b=U[C+2]/255,K.a=U[C+3]/255}static Mix(u,R,I){return 0}static Instantiate(u){return r.e.Instantiate(u)}static SetImmediate(u){b.d.SetImmediate(u)}static IsExponentOfTwo(u){return!0}static FloatRound(u){return Math.fround(u)}static GetFilename(u){const R=u.lastIndexOf("/");return R<0?u:u.substring(R+1)}static GetFolderPath(u){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const I=u.lastIndexOf("/");return I<0?R?u:"":u.substring(0,I+1)}static ToDegrees(u){return 180*u/Math.PI}static ToRadians(u){return u*Math.PI/180}static SmoothAngleChange(u,R){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const B=this.ToRadians(u),U=this.ToRadians(R);return this.ToDegrees(Math.atan2((1-I)*Math.sin(U)+I*Math.sin(B),(1-I)*Math.cos(U)+I*Math.cos(B)))}static MakeArray(u,R){return!0===R||void 0!==u&&null!=u?Array.isArray(u)?u:[u]:null}static GetPointerPrefix(u){return(0,U.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(u,R){(0,S.u)(u,R)}static SetReferrerPolicyBehavior(u,R){R.referrerPolicy=u}static get PreprocessUrl(){return S.g.PreprocessUrl}static set PreprocessUrl(u){S.g.PreprocessUrl=u}static LoadImage(u,R,I,B,U,K){return(0,S.p)(u,R,I,B,U,K)}static LoadFile(u,R,I,B,U,K){return(0,S.n)(u,R,I,B,U,K)}static async LoadFileAsync(u){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((I,B)=>{(0,S.n)(u,(u=>{I(u)}),void 0,void 0,R,((u,R)=>{B(R)}))}))}static GetAssetUrl(u){if(!u)return"";if(E.AssetBaseUrl&&u.startsWith(E._DefaultAssetsUrl)){const R="/"===E.AssetBaseUrl[E.AssetBaseUrl.length-1]?E.AssetBaseUrl.substring(0,E.AssetBaseUrl.length-1):E.AssetBaseUrl;return u.replace(E._DefaultAssetsUrl,R)}return u}static GetBabylonScriptURL(u,R){if(!u)return"";if(E.ScriptBaseUrl&&u.startsWith(E._DefaultCdnUrl)){const R="/"===E.ScriptBaseUrl[E.ScriptBaseUrl.length-1]?E.ScriptBaseUrl.substring(0,E.ScriptBaseUrl.length-1):E.ScriptBaseUrl;u=u.replace(E._DefaultCdnUrl,R)}return u=E.ScriptPreprocessUrl(u),R&&(u=E.GetAbsoluteUrl(u)),u}static LoadBabylonScript(u,R,I,B){u=E.GetBabylonScriptURL(u),E.LoadScript(u,R,I)}static async LoadBabylonScriptAsync(u){return u=E.GetBabylonScriptURL(u),await E.LoadScriptAsync(u)}static LoadScript(u,R,I,B){let K=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(u),R&&R()}catch(s){null===I||void 0===I||I(`Unable to load script '${u}' in worker`,s)}return}if(!(0,U.h)())return void(null===I||void 0===I||I(`Cannot load script '${u}' outside of a window or a worker`));const C=document.getElementsByTagName("head")[0],D=document.createElement("script");K?(D.setAttribute("type","module"),D.innerText=u):(D.setAttribute("type","text/javascript"),D.setAttribute("src",u)),B&&(D.id=B),D.onload=()=>{R&&R()},D.onerror=R=>{I&&I(`Unable to load script '${u}'`,R)},C.appendChild(D)}static async LoadScriptAsync(u,R){return await new Promise(((I,B)=>{this.LoadScript(u,(()=>{I()}),((u,R)=>{B(R||new Error(u))}),R)}))}static ReadFileAsDataURL(u,R,I){const U=new FileReader,K={onCompleteObservable:new B.c,abort:()=>U.abort()};return U.onloadend=()=>{K.onCompleteObservable.notifyObservers(K)},U.onload=u=>{R(u.target.result)},U.onprogress=I,U.readAsDataURL(u),K}static ReadFile(u,R,I,B,U){return(0,S.q)(u,R,I,B,U)}static FileAsURL(u){const R=new Blob([u]);return window.URL.createObjectURL(R)}static Format(u){let R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return u.toFixed(R)}static DeepCopy(u,R,I,B){C.d.DeepCopy(u,R,I,B)}static IsEmpty(u){for(const R in u)if(Object.prototype.hasOwnProperty.call(u,R))return!1;return!0}static RegisterTopRootEvents(u,R){for(let B=0;B<R.length;B++){const U=R[B];u.addEventListener(U.name,U.handler,!1);try{window.parent&&window.parent.addEventListener(U.name,U.handler,!1)}catch(I){}}}static UnregisterTopRootEvents(u,R){for(let B=0;B<R.length;B++){const U=R[B];u.removeEventListener(U.name,U.handler);try{u.parent&&u.parent.removeEventListener(U.name,U.handler)}catch(I){}}}static async DumpFramebuffer(u,R,I,B){throw(0,s.c)("DumpTools")}static DumpData(u,R,I,B){throw(0,s.c)("DumpTools")}static async DumpDataAsync(u,R,I){throw(0,s.c)("DumpTools")}static _IsOffScreenCanvas(u){return void 0!==u.convertToBlob}static ToBlob(u,R){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0;E._IsOffScreenCanvas(u)||u.toBlob||(u.toBlob=function(u,R,I){setTimeout((()=>{const B=atob(this.toDataURL(R,I).split(",")[1]),U=B.length,K=new Uint8Array(U);for(let u=0;u<U;u++)K[u]=B.charCodeAt(u);u(new Blob([K]))}))}),E._IsOffScreenCanvas(u)?u.convertToBlob({type:I,quality:B}).then((u=>R(u))):u.toBlob((function(u){R(u)}),I,B)}static DownloadBlob(u,R){if("download"in document.createElement("a")){if(!R){const u=new Date;R="screenshot_"+((u.getFullYear()+"-"+(u.getMonth()+1)).slice(2)+"-"+u.getDate()+"_"+u.getHours()+"-"+("0"+u.getMinutes()).slice(-2))+".png"}E.Download(u,R)}else if(u&&"undefined"!==typeof URL){const R=URL.createObjectURL(u),I=window.open("");if(!I)return;const B=I.document.createElement("img");B.onload=function(){URL.revokeObjectURL(R)},B.src=R,I.document.body.appendChild(B)}}static EncodeScreenshotCanvasData(u,R){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if("string"!==typeof B&&R){if(R){if(E._IsOffScreenCanvas(u))return void u.convertToBlob({type:I,quality:U}).then((u=>{const I=new FileReader;I.readAsDataURL(u),I.onloadend=()=>{const u=I.result;R(u)}}));const B=u.toDataURL(I,U);R(B)}}else this.ToBlob(u,(function(u){u&&E.DownloadBlob(u,B),R&&R("")}),I,U)}static Download(u,R){if("undefined"===typeof URL)return;const I=window.URL.createObjectURL(u),B=document.createElement("a");document.body.appendChild(B),B.style.display="none",B.href=I,B.download=R,B.addEventListener("click",(()=>{B.parentElement&&B.parentElement.removeChild(B)})),B.click(),window.URL.revokeObjectURL(I)}static BackCompatCameraNoPreventDefault(u){return"boolean"===typeof u[0]?u[0]:"boolean"===typeof u[1]&&u[1]}static CreateScreenshot(u,R,I,B){throw(0,s.c)("ScreenshotTools")}static async CreateScreenshotAsync(u,R,I){throw(0,s.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(u,R,I,B){throw(0,s.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(u,R,I){throw(0,s.c)("ScreenshotTools")}static RandomId(){return(0,P.d)()}static IsBase64(u){return(0,S.i)(u)}static DecodeBase64(u){return(0,S.e)(u)}static get errorsCount(){return K.b.errorsCount}static Log(u){K.b.Log(u)}static Warn(u){K.b.Warn(u)}static Error(u){K.b.Error(u)}static get LogCache(){return K.b.LogCache}static ClearLogCache(){K.b.ClearLogCache()}static set LogLevels(u){K.b.LogLevels=u}static set PerformanceLogLevel(u){return(u&E.PerformanceUserMarkLogLevel)===E.PerformanceUserMarkLogLevel?(E.StartPerformanceCounter=E._StartUserMark,void(E.EndPerformanceCounter=E._EndUserMark)):(u&E.PerformanceConsoleLogLevel)===E.PerformanceConsoleLogLevel?(E.StartPerformanceCounter=E._StartPerformanceConsole,void(E.EndPerformanceCounter=E._EndPerformanceConsole)):(E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,void(E.EndPerformanceCounter=E._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(u,R){}static _EndPerformanceCounterDisabled(u,R){}static _StartUserMark(u){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._Performance){if(!(0,U.h)())return;E._Performance=window.performance}R&&E._Performance.mark&&E._Performance.mark(u+"-Begin")}static _EndUserMark(u){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&E._Performance.mark&&(E._Performance.mark(u+"-End"),E._Performance.measure(u,u+"-Begin",u+"-End"))}static _StartPerformanceConsole(u){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R&&(E._StartUserMark(u,R),console.time&&console.time(u))}static _EndPerformanceConsole(u){let R=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];R&&(E._EndUserMark(u,R),console.timeEnd(u))}static get Now(){return D.e.Now}static GetClassName(u){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=null;if(!R&&u.getClassName)I=u.getClassName();else{if(u instanceof Object){I=(R?u:Object.getPrototypeOf(u)).constructor.__bjsclassName__}I||(I=typeof u)}return I}static First(u,R){for(const I of u)if(R(I))return I;return null}static getFullClassName(u){let R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=null,B=null;if(!R&&u.getClassName)I=u.getClassName();else{if(u instanceof Object){const U=R?u:Object.getPrototypeOf(u);I=U.constructor.__bjsclassName__,B=U.constructor.__bjsmoduleName__}I||(I=typeof u)}return I?(null!=B?B+".":"")+I:null}static async DelayAsync(u){await new Promise((R=>{setTimeout((()=>{R()}),u)}))}static IsSafari(){return!!(0,U.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function z(u,R){return I=>{I.__bjsclassName__=u,I.__bjsmoduleName__=null!=R?R:null}}E.AssetBaseUrl="",E.UseCustomRequestHeaders=!1,E.CustomRequestHeaders=t.c.CustomRequestHeaders,E.GetDOMTextContent=U.c,E._DefaultCdnUrl="https://cdn.babylonjs.com",E._DefaultAssetsUrl="https://assets.babylonjs.com/core",E.GetAbsoluteUrl="object"===typeof document?u=>{const R=document.createElement("a");return R.href=u,R.href}:"function"===typeof URL&&"object"===typeof location?u=>new URL(u,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},E.NoneLogLevel=K.b.NoneLogLevel,E.MessageLogLevel=K.b.MessageLogLevel,E.WarningLogLevel=K.b.WarningLogLevel,E.ErrorLogLevel=K.b.ErrorLogLevel,E.AllLogLevel=K.b.AllLogLevel,E.IsWindowObjectExist=U.h,E.PerformanceNoneLogLevel=0,E.PerformanceUserMarkLogLevel=1,E.PerformanceConsoleLogLevel=2,E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,E.EndPerformanceCounter=E._EndPerformanceCounterDisabled;class f{constructor(u,R,I){let B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=u,this.index=B-1,this._done=!1,this._fn=R,this._successCallback=I}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(u,R,I){const B=new f(u,R,I,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return B.executeNext(),B}static SyncAsyncForLoop(u,R,I,B,U){let K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return f.Run(Math.ceil(u/R),(B=>{U&&U()?B.breakLoop():setTimeout((()=>{for(let K=0;K<R;++K){const C=B.index*R+K;if(C>=u)break;if(I(C),U&&U()){B.breakLoop();break}}B.executeNext()}),K)}),B)}}E.Mix=X.l,E.IsExponentOfTwo=X.i,G.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12433:(u,R,I)=>{I.d(R,{c:()=>K,e:()=>U});const B={};function U(u,R){B[u]=R}function K(u){return B[u]}},12337:(u,R,I)=>{I.d(R,{c:()=>B});class B{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(B.CustomRequestHeaders).length>0||B.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const u in B.CustomRequestHeaders){const R=B.CustomRequestHeaders[u];R&&this._xhr.setRequestHeader(u,R)}}_shouldSkipRequestModifications(u){return B.SkipRequestModificationForBabylonCDN&&(u.includes("preview.babylonjs.com")||u.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(u){this._xhr.onprogress=u}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(u){this._xhr.responseType=u}get timeout(){return this._xhr.timeout}set timeout(u){this._xhr.timeout=u}addEventListener(u,R,I){this._xhr.addEventListener(u,R,I)}removeEventListener(u,R,I){this._xhr.removeEventListener(u,R,I)}abort(){this._xhr.abort()}send(u){B.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(u)}open(u,R){for(const I of B.CustomRequestModifiers){if(this._shouldSkipRequestModifications(R))return;R=I(this._xhr,R)||R}R=(R=R.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=R,this._xhr.open(u,R,!0)}setRequestHeader(u,R){this._xhr.setRequestHeader(u,R)}getResponseHeader(u){return this._xhr.getResponseHeader(u)}}B.CustomRequestHeaders={},B.CustomRequestModifiers=new Array,B.SkipRequestModificationForBabylonCDN=!0}}]);