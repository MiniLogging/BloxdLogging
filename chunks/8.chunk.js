"use strict";(self.qbp2s7qydk=self.qbp2s7qydk||[]).push([[8],{12852:(M,A,O)=>{O.d(A,{e:()=>b});var S=O(12811),z=O(12783),Q=O(12861),X=O(12883),c=O(12793);class j{constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,M&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(M){this._zOffset!==M&&(this._zOffset=M,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(M){this._zOffsetUnits!==M&&(this._zOffsetUnits=M,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(M){this._cullFace!==M&&(this._cullFace=M,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(M){this._cull!==M&&(this._cull=M,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(M){this._depthFunc!==M&&(this._depthFunc=M,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(M){this._depthMask!==M&&(this._depthMask=M,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(M){this._depthTest!==M&&(this._depthTest=M,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(M){this._frontFace!==M&&(this._frontFace=M,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(M){this.isDirty&&(this._isCullDirty&&(this.cull?M.enable(M.CULL_FACE):M.disable(M.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(M.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(M.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?M.enable(M.DEPTH_TEST):M.disable(M.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(M.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(this.zOffset,this.zOffsetUnits)):M.disable(M.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(M.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class B{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(M){this._func!==M&&(this._func=M,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(M){this._funcRef!==M&&(this._funcRef=M,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(M){this._funcMask!==M&&(this._funcMask=M,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(M){this._opStencilFail!==M&&(this._opStencilFail=M,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(M){this._opDepthFail!==M&&(this._opDepthFail=M,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(M){this._opStencilDepthPass!==M&&(this._opStencilDepthPass=M,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(M){this._mask!==M&&(this._mask=M,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(M){this._enabled!==M&&(this._enabled=M,this._isStencilTestDirty=!0)}constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,M&&this.reset()}reset(){var M;this.stencilMaterial=void 0,null===(M=this.stencilGlobal)||void 0===M||M.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(M){var A;if(!M)return;const O=!this.useStencilGlobalOnly&&!(null===(A=this.stencilMaterial)||void 0===A||!A.enabled);this.enabled=O?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=O?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=O?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=O?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=O?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=O?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=O?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=O?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?M.enable(M.STENCIL_TEST):M.disable(M.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(M.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(M.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(M.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class g{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=g.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=g.KEEP,this.opDepthFail=g.KEEP,this.opStencilDepthPass=g.REPLACE}get stencilFunc(){return this.func}set stencilFunc(M){this.func=M}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(M){this.funcRef=M}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(M){this.funcMask=M}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(M){this.opStencilFail=M}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(M){this.opDepthFail=M}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(M){this.opStencilDepthPass=M}get stencilMask(){return this.mask}set stencilMask(M){this.mask=M}get stencilTest(){return this.enabled}set stencilTest(M){this.enabled=M}}g.ALWAYS=519,g.KEEP=7680,g.REPLACE=7681;class e{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(M){this._alphaBlend!==M&&(this._alphaBlend=M,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(M,A,O,S){this._blendConstants[0]===M&&this._blendConstants[1]===A&&this._blendConstants[2]===O&&this._blendConstants[3]===S||(this._blendConstants[0]=M,this._blendConstants[1]=A,this._blendConstants[2]=O,this._blendConstants[3]=S,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(M,A,O,S){this._blendFunctionParameters[0]===M&&this._blendFunctionParameters[1]===A&&this._blendFunctionParameters[2]===O&&this._blendFunctionParameters[3]===S||(this._blendFunctionParameters[0]=M,this._blendFunctionParameters[1]=A,this._blendFunctionParameters[2]=O,this._blendFunctionParameters[3]=S,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(M,A){this._blendEquationParameters[0]===M&&this._blendEquationParameters[1]===A||(this._blendEquationParameters[0]=M,this._blendEquationParameters[1]=A,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(M){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?M.enable(M.BLEND):M.disable(M.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(M.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(M.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(M.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var T=O(12799),J=O(12888),K=O(12778),G=O(12776),d=O(12839),w=O(12905);function I(M,A){if((0,K.m)()){const{requestAnimationFrame:O}=A||window;if("function"===typeof O)return O(M)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(M);return setTimeout(M,16)}class b{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(M){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get QQ(){return this._useReverseDepthBuffer}set QQ(M){M!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=M,this._depthCullingState.depthFunc=M?518:515)}setColorWrite(M){M!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=M)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(M){if(M)return this.isNDCHalfZRange?M.IS_NDC_HALF_ZRANGE="":delete M.IS_NDC_HALF_ZRANGE,this.QQ?M.USE_REVERSE_DEPTHBUFFER="":delete M.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?M.USE_EXACT_SRGB_CONVERSIONS="":delete M.USE_EXACT_SRGB_CONVERSIONS);{let M="";return this.isNDCHalfZRange&&(M+="#define IS_NDC_HALF_ZRANGE"),this.QQ&&(M&&(M+="\n"),M+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(M&&(M+="\n"),M+="#define USE_EXACT_SRGB_CONVERSIONS"),M}}_rebuildInternalTextures(){const M=this._internalTexturesCache.slice();for(const A of M)A._rebuild()}_rebuildRenderTargetWrappers(){const M=this._renderTargetWrapperCache.slice();for(const A of M)A._rebuild()}_rebuildEffects(){for(const M in this._compiledEffects){const A=this._compiledEffects[M];A._pipelineContext=null,A._prepareEffect()}Q.Effect.ResetCache()}_rebuildGraphicsResources(){var M;this.wipeCaches(!0),this._rebuildEffects(),null===(M=this._rebuildComputeEffects)||void 0===M||M.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){z.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(M){setTimeout((()=>{this._clearEmptyResources();const A=this._depthCullingState.depthTest,O=this._depthCullingState.depthFunc,S=this._depthCullingState.depthMask,z=this._stencilState.stencilTest;M(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=A,this._depthCullingState.depthFunc=O,this._depthCullingState.depthMask=S,this._stencilState.stencilTest=z,this._flagContextRestored()}),0)}get T(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(M){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(M){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const M=new Uint8Array(4),A=[M,M,M,M,M,M];this._emptyCubeTexture=this.createRawCubeTexture(A,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(M){if(!M)return this._activeRenderLoops.length=0,void this._cancelFrame();const A=this._activeRenderLoops.indexOf(M);A>=0&&(this._activeRenderLoops.splice(A,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const M=this._frameHandler;if(this._frameHandler=0,(0,K.m)()){const{cancelAnimationFrame:A}=this.getHostWindow()||window;if("function"===typeof A)return A(M)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(M);return clearTimeout(M)}}IX(){this.onBeginFrameObservable.notifyObservers(this)}mc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(M){this._maxFPS=M,void 0!==M&&(this._minFrameTime=M<=0?Number.MAX_VALUE:1e3/M)}_isOverFrameTime(M){if(!M||void 0===this._maxFPS)return!1;const A=M-this._lastFrameTime;return this._lastFrameTime=M,this._renderAccumulator+=A,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(M){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(M)){let M=!0;(this.T||!this.renderEvenInBackground&&this._windowIsBackground)&&(M=!1),M&&(this.IX(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.mc())}}_renderLoop(M){this._processFrame(M),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let M=0;M<this._activeRenderLoops.length;M++){(0,this._activeRenderLoops[M])()}}_renderViews(){return!1}_queueNewFrame(M,A){return I(M,A)}runRenderLoop(M){-1===this._activeRenderLoops.indexOf(M)&&(this._activeRenderLoops.push(M),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(M){this._depthCullingState.depthTest=M}setZOffset(M){this._depthCullingState.zOffset=this.QQ?-M:M}getZOffset(){const M=this._depthCullingState.zOffset;return this.QQ?-M:M}setZOffsetUnits(M){this._depthCullingState.zOffsetUnits=this.QQ?-M:M}getZOffsetUnits(){const M=this._depthCullingState.zOffsetUnits;return this.QQ?-M:M}getHostWindow(){return(0,K.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(M){this._compatibilityMode=!0}_rebuildTextures(){for(const M of this.scenes)M._rebuildTextures();for(const M of this._virtualScenes)M._rebuildTextures()}_releaseRenderTargetWrapper(M){const A=this._renderTargetWrapperCache.indexOf(M);-1!==A&&this._renderTargetWrapperCache.splice(A,1)}get currentViewport(){return this._cachedViewport}setViewport(M,A,O){const S=A||this.getRenderWidth(),z=O||this.getRenderHeight(),Q=M.x||0,X=M.y||0;this._cachedViewport=M,this._viewport(Q*S,X*z,S*M.width,z*M.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(M){return new Path2D(M)}get description(){let M=this.name+this.version;return this._caps.parallelShaderCompile&&(M+=" - Parallel shader compilation"),M}_createTextureBase(M,A,O,Q){let X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,j=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,B=arguments.length>7?arguments[7]:void 0,g=arguments.length>8?arguments[8]:void 0,e=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,T=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,K=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,G=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,d=arguments.length>13?arguments[13]:void 0,I=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const Y="data:"===(M=M||"").substring(0,5),E="blob:"===M.substring(0,5),H=Y&&-1!==M.indexOf(";base64,"),C=T||new J.b(this,1);C!==T&&(C.label=M.substring(0,60));const f=M;!this._transformTextureUrl||H||T||e||(M=this._transformTextureUrl(M)),f!==M&&(C._originalUrl=f);const D=M.lastIndexOf(".");let F=G||(D>-1?M.substring(D).toLowerCase():"");F.indexOf("?")>-1&&(F=F.split("?")[0]);const N=(0,w.e)(F,d);Q&&Q.addPendingData(C),C.url=M,C.generateMipMaps=!A,C.samplingMode=X,C.invertY=O,C._useSRGBBuffer=this._getUseSRGBBuffer(!!s,A),this._doNotHandleContextLost||(C._buffer=e);let y=null;c&&!T&&(y=C.onLoadedObservable.add(c)),T||this._internalTexturesCache.push(C);const h=(O,T)=>{Q&&Q.removePendingData(C),M===f?(y&&C.onLoadedObservable.remove(y),S.d.UseFallbackTexture&&M!==S.d.FallbackTexture&&this._createTextureBase(S.d.FallbackTexture,A,C.invertY,Q,X,null,j,B,g,e,C),O=(O||"Unknown error")+(S.d.UseFallbackTexture?" - Fallback texture was used":""),C.onErrorObservable.notifyObservers({message:O,exception:T}),j&&j(O,T)):(z.c.Warn("Failed to load ".concat(M,", falling back to ").concat(f)),this._createTextureBase(f,A,C.invertY,Q,X,c,j,B,g,e,C,K,G,d,I,s))};if(N){const A=async M=>{(await N).loadData(M,C,((M,A,O,S,z,c)=>{c?h("TextureLoader failed to load data"):B(C,F,Q,{width:M,height:A},C.invertY,!O,S,(()=>(z(),!1)),X)}),I)};e?e instanceof ArrayBuffer?A(new Uint8Array(e)):ArrayBuffer.isView(e)?A(e):j&&j("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(M,(M=>{A(new Uint8Array(M))}),void 0,Q?Q.offlineProvider:void 0,!0,((M,A)=>{h("Unable to load "+(M&&M.responseURL,A))}))}else{const O=M=>{E&&!this._doNotHandleContextLost&&(C._buffer=M),B(C,F,Q,M,C.invertY,A,!1,g,X)};!Y||H?e&&("string"===typeof e.decoding||e.close)?O(e):b._FileToolsLoadImage(M||"",O,h,Q?Q.offlineProvider:null,d,C.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof Blob?b._FileToolsLoadImage(e,O,h,Q?Q.offlineProvider:null,d,C.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):e&&O(e)}return C}_rebuildBuffers(){for(const M of this._uniformBuffers)M._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,K.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const M in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,M)&&(this._boundTexturesCache[M]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(M){this._name=M}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(M){this._hardwareScalingLevel=M,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(M){this._doNotHandleContextLost=M}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(M,A,O){var z,Q,T,J,d,w,I,b,s,Y,E;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new j,this._stencilStateComposer=new B,this._stencilState=new g,this._alphaState=new e,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new G.c,this.onCanvasFocusObservable=new G.c,this.onNewSceneAddedObservable=new G.c,this.onResizeObservable=new G.c,this.onCanvasPointerOutObservable=new G.c,this.onEffectErrorObservable=new G.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new G.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=M=>this._renderLoop(M),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new G.c,this.onAfterShaderCompilationObservable=new G.c,this.onBeginFrameObservable=new G.c,this.onEndFrameObservable=new G.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new G.c,this.onContextRestoredObservable=new G.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Ac=new G.c,this.onReleaseEffectsObservable=new G.c,S.d.Instances.push(this),this.startTime=c.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,X.c.SetMatrixPrecision(!!A.useHighPrecisionMatrix),(0,K.k)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=null!==(z=O)&&void 0!==z&&z,A.antialias=null!==M&&void 0!==M?M:A.antialias,A.deterministicLockstep=null!==(Q=A.deterministicLockstep)&&void 0!==Q&&Q,A.lockstepMaxSteps=null!==(T=A.lockstepMaxSteps)&&void 0!==T?T:4,A.timeStep=null!==(J=A.timeStep)&&void 0!==J?J:1/60,A.Sc=null===(d=A.Sc)||void 0===d||d,this._audioContext=null!==(w=null===(I=A.audioEngineOptions)||void 0===I?void 0:I.audioContext)&&void 0!==w?w:null,this._audioDestination=null!==(b=null===(s=A.audioEngineOptions)||void 0===s?void 0:s.audioDestination)&&void 0!==b?b:null,this.premultipliedAlpha=null===(Y=A.premultipliedAlpha)||void 0===Y||Y,this._doNotHandleContextLost=!!A.doNotHandleContextLost,this._isStencilEnable=!!A.Sc,this.useExactSrgbConversions=null!==(E=A.useExactSrgbConversions)&&void 0!==E&&E;const H=(0,K.m)()&&window.devicePixelRatio||1,C=A.limitDeviceRatio||H;O=O||A.adaptToDeviceRatio||!1,this._hardwareScalingLevel=O?1/Math.min(C,H):1,this._lastDevicePixelRatio=H,this._creationOptions=A}resize(){let M,A,O=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const M=(0,K.m)()&&window.devicePixelRatio||1,A=this._lastDevicePixelRatio/M;this._lastDevicePixelRatio=M,this._hardwareScalingLevel*=A}if((0,K.m)()&&(0,K.g)())if(this._renderingCanvas){var S,z;const O=null===(S=(z=this._renderingCanvas).getBoundingClientRect)||void 0===S?void 0:S.call(z);M=this._renderingCanvas.clientWidth||(null===O||void 0===O?void 0:O.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,A=this._renderingCanvas.clientHeight||(null===O||void 0===O?void 0:O.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else M=window.innerWidth,A=window.innerHeight;else M=this._renderingCanvas?this._renderingCanvas.width:100,A=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(M/this._hardwareScalingLevel,A/this._hardwareScalingLevel,O)}setSize(M,A){let O=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(M|=0,A|=0,!O&&this._renderingCanvas.width===M&&this._renderingCanvas.height===A)return!1;if(this._renderingCanvas.width=M,this._renderingCanvas.height=A,this.scenes){for(let M=0;M<this.scenes.length;M++){const A=this.scenes[M];for(let M=0;M<A.cameras.length;M++){A.cameras[M]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(M,A,O,S,z,Q,X,c,j,B,g){throw(0,T.d)("engine.rawTexture")}createRawCubeTexture(M,A,O,S,z,Q,X,c){throw(0,T.d)("engine.rawTexture")}createRawTexture3D(M,A,O,S,z,Q,X,c,j,B,g){throw(0,T.d)("engine.rawTexture")}createRawTexture2DArray(M,A,O,S,z,Q,X,c,j,B,g){throw(0,T.d)("engine.rawTexture")}_sharedInit(M){this._renderingCanvas=M}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const M=navigator.userAgent;this.hostInformation.isMobile=-1!==M.indexOf("Mobile")||-1!==M.indexOf("Mac")&&(0,K.g)()&&"ontouchend"in document},this._checkForMobile(),(0,K.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(M){return document.createElement("video")}_reportDrawCall(){var M;let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(M=this._drawCalls)||void 0===M||M.addCount(A,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(M,A){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(M,A){return createImageBitmap(M,A)}resizeImageBitmap(M,A,O){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(M){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(M,A){if("undefined"===typeof document)return new OffscreenCanvas(M,A);const O=document.createElement("canvas");return O.width=M,O.height=A,O}createCanvas(M,A){return b._CreateCanvas(M,A)}static _FileToolsLoadImage(M,A,O,S,z,Q,X){throw(0,T.d)("FileTools")}_loadFile(M,A,O,S,z,Q){const X=(0,d.l)(M,A,O,S,z,Q);return this._activeRequests.push(X),X.onCompleteObservable.add((()=>{const M=this._activeRequests.indexOf(X);-1!==M&&this._activeRequests.splice(M,1)})),X}static _FileToolsLoadFile(M,A,O,S,z,Q){if(d.b.loadFile)return d.b.loadFile(M,A,O,S,z,Q);throw(0,T.d)("FileTools")}dispose(){var M;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(M=this.releaseComputeEffects)||void 0===M||M.call(this),Q.Effect.ResetCache();for(const O of this._activeRequests)O.abort();this._boundRenderFunction=null,this.Ac.notifyObservers(this),this.Ac.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,K.m)()&&window.removeEventListener("resize",this._checkForMobile);const A=S.d.Instances.indexOf(this);A>=0&&S.d.Instances.splice(A,1),S.d.Instances.length||(S.d.OnEnginesDisposedObservable.notifyObservers(this),S.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(M){throw(0,T.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(M,A){for(let O=0;O<S.d.Instances.length;O++){const z=S.d.Instances[O];for(let O=0;O<z.scenes.length;O++)z.scenes[O].markAllMaterialsAsDirty(M,A)}}}b._RenderPassIdCounter=0,b._RescalePostProcessFactory=null,b.CollisionsEpsilon=.001,b.QueueNewFrame=I},12811:(M,A,O)=>{O.d(A,{d:()=>z});var S=O(12776);class z{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}z.Instances=[],z.OnEnginesDisposedObservable=new S.c,z._LastCreatedScene=null,z.UseFallbackTexture=!0,z.FallbackTexture=""},12883:(M,A,O)=>{O.d(A,{c:()=>S});class S{static SetMatrixPrecision(M){if(S.MatrixTrackPrecisionChange=!1,M&&!S.MatrixUse64Bits&&S.MatrixTrackedMatrices)for(let A=0;A<S.MatrixTrackedMatrices.length;++A){const M=S.MatrixTrackedMatrices[A],O=M.zc;M.zc=new Array(16);for(let A=0;A<16;++A)M.zc[A]=O[A]}S.MatrixUse64Bits=M,S.MatrixCurrentType=S.MatrixUse64Bits?Array:Float32Array,S.MatrixTrackedMatrices=null}}S.MatrixUse64Bits=!1,S.MatrixTrackPrecisionChange=!0,S.MatrixCurrentType=Float32Array,S.MatrixTrackedMatrices=[]},12905:(M,A,O)=>{O.d(A,{e:()=>X});var S=O(12783);const z=new Map;function Q(M,A){(function(M){return z.delete(M)})(M)&&S.c.Warn("Extension with the name '".concat(M,"' already exists")),z.set(M,A)}function X(M,A){"image/ktx"!==A&&"image/ktx2"!==A||(M=".ktx"),z.has(M)||(M.endsWith(".ies")&&Q(".ies",(async()=>await O.e(15).then(O.bind(O,15060)).then((M=>new M._IESTextureLoader)))),M.endsWith(".dds")&&Q(".dds",(async()=>await Promise.all([O.e(14),O.e(17),O.e(13),O.e(19),O.e(18),O.e(28)]).then(O.bind(O,15068)).then((M=>new M._DDSTextureLoader)))),M.endsWith(".basis")&&Q(".basis",(async()=>await Promise.all([O.e(14),O.e(17),O.e(13),O.e(47)]).then(O.bind(O,15081)).then((M=>new M._BasisTextureLoader)))),M.endsWith(".env")&&Q(".env",(async()=>await Promise.all([O.e(14),O.e(17),O.e(13),O.e(19),O.e(18),O.e(23),O.e(21),O.e(45),O.e(48)]).then(O.bind(O,15090)).then((M=>new M._ENVTextureLoader)))),M.endsWith(".hdr")&&Q(".hdr",(async()=>await Promise.all([O.e(14),O.e(49)]).then(O.bind(O,15098)).then((M=>new M._HDRTextureLoader)))),(M.endsWith(".ktx")||M.endsWith(".ktx2"))&&(Q(".ktx",(async()=>await O.e(30).then(O.bind(O,15100)).then((M=>new M._KTXTextureLoader)))),Q(".ktx2",(async()=>await O.e(30).then(O.bind(O,15100)).then((M=>new M._KTXTextureLoader))))),M.endsWith(".tga")&&Q(".tga",(async()=>await O.e(50).then(O.bind(O,15106)).then((M=>new M._TGATextureLoader)))),M.endsWith(".exr")&&Q(".exr",(async()=>await O.e(16).then(O.bind(O,15113)).then((M=>new M._ExrTextureLoader)))));const S=z.get(M);return S?Promise.resolve(S(A)):null}},12888:(M,A,O)=>{O.d(A,{b:()=>X});var S,z=O(12776),Q=O(12897);!function(M){M[M.Unknown=0]="Unknown",M[M.Url=1]="Url",M[M.Temp=2]="Temp",M[M.Raw=3]="Raw",M[M.Dynamic=4]="Dynamic",M[M.RenderTarget=5]="RenderTarget",M[M.MultiRenderTarget=6]="MultiRenderTarget",M[M.Cube=7]="Cube",M[M.CubeRaw=8]="CubeRaw",M[M.CubePrefiltered=9]="CubePrefiltered",M[M.Raw3D=10]="Raw3D",M[M.Raw2DArray=11]="Raw2DArray",M[M.DepthStencil=12]="DepthStencil",M[M.CubeRawRGBD=13]="CubeRawRGBD",M[M.Depth=14]="Depth"}(S||(S={}));class X extends Q.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(M){this.generateMipMaps=M}get uniqueId(){return this._uniqueId}_setUniqueId(M){this._uniqueId=M}getEngine(){return this._engine}get source(){return this._source}constructor(M,A){let O=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new z.c,this.onErrorObservable=new z.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=M,this._source=A,this._uniqueId=X._Counter++,O||(this._hardwareTexture=M._createHardwareTexture())}incrementReferences(){this._references++}updateSize(M,A){let O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,M,A,O),this.width=M,this.height=A,this.depth=O,this.baseWidth=M,this.baseHeight=A,this.baseDepth=O,this._size=M*A*O}_rebuild(){var M,A;if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const M=this.onRebuildCallback(this),A=A=>{A._swapAndDie(this,!1),this.isReady=M.isReady};return void(M.isAsync?M.proxy.then(A):A(M.proxy))}let O;switch(this.source){case 2:case 12:case 14:break;case 1:return void(O=this._engine.createTexture(null!==(M=this._originalUrl)&&void 0!==M?M:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(M=>{M._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:O=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),O._swapAndDie(this,!1),this.isReady=!0;break;case 10:O=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),O._swapAndDie(this,!1),this.isReady=!0;break;case 11:O=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),O._swapAndDie(this,!1),this.isReady=!0;break;case 4:O=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),O._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(O=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{O._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:O=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,null!==(A=this._originalFormat)&&void 0!==A?A:this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),O._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return O=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(M=>{M&&M._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(O._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(M){var A;let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(A=this._hardwareTexture)||void 0===A||A.setUsage(M._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),M._hardwareTexture=this._hardwareTexture,O&&(M._isRGBD=this._isRGBD),this._lodTextureHigh&&(M._lodTextureHigh&&M._lodTextureHigh.dispose(),M._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(M._lodTextureMid&&M._lodTextureMid.dispose(),M._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(M._lodTextureLow&&M._lodTextureLow.dispose(),M._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(M._irradianceTexture&&M._irradianceTexture.dispose(),M._irradianceTexture=this._irradianceTexture);const S=this._engine.getLoadedTexturesCache();let z=S.indexOf(this);-1!==z&&S.splice(z,1),z=S.indexOf(M),-1===z&&S.push(M)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}X._Counter=0},12897:(M,A,O)=>{O.d(A,{d:()=>S});class S{get wrapU(){return this._cachedWrapU}set wrapU(M){this._cachedWrapU=M}get wrapV(){return this._cachedWrapV}set wrapV(M){this._cachedWrapV=M}get wrapR(){return this._cachedWrapR}set wrapR(M){this._cachedWrapR=M}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(M){this._cachedAnisotropicFilteringLevel=M}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(M){this._comparisonFunction=M}get useMipMaps(){return this._useMipMaps}set useMipMaps(M){this._useMipMaps=M}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=M,this._cachedWrapV=A,this._cachedWrapR=O,this._cachedAnisotropicFilteringLevel=S,this.samplingMode=z,this._comparisonFunction=Q,this}compareSampler(M){return this._cachedWrapU===M._cachedWrapU&&this._cachedWrapV===M._cachedWrapV&&this._cachedWrapR===M._cachedWrapR&&this._cachedAnisotropicFilteringLevel===M._cachedAnisotropicFilteringLevel&&this.samplingMode===M.samplingMode&&this._comparisonFunction===M._comparisonFunction&&this._useMipMaps===M._useMipMaps}}},12786:(M,A,O)=>{O.d(A,{c:()=>X});var S=O(22),z=O(12783);const Q=(M,A,O)=>M?M.getClassName&&"Mesh"===M.getClassName()?null:!M.getClassName||"SubMesh"!==M.getClassName()&&"PhysicsBody"!==M.getClassName()?M.clone?M.clone():Array.isArray(M)?M.slice():O&&"object"===typeof M?(0,S.d)({},M):null:M.clone(A):null;class X{static DeepCopy(M,A,O,S){let X=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const c=function(M){const A=[];do{const O=Object.getOwnPropertyNames(M);for(const M of O)-1===A.indexOf(M)&&A.push(M)}while(M=Object.getPrototypeOf(M));return A}(M);for(const B of c){if("_"===B[0]&&(!S||-1===S.indexOf(B)))continue;if(B.endsWith("Observable"))continue;if(O&&-1!==O.indexOf(B))continue;const c=M[B],g=typeof c;if("function"!==g)try{if("object"===g)if(c instanceof Uint8Array)A[B]=Uint8Array.from(c);else if(c instanceof Array){if(A[B]=[],c.length>0)if("object"==typeof c[0])for(let M=0;M<c.length;M++){const O=Q(c[M],A,X);-1===A[B].indexOf(O)&&A[B].push(O)}else A[B]=c.slice(0)}else A[B]=Q(c,A,X);else A[B]=c}catch(j){z.c.Warn(j.message)}}}}},12821:(M,A,O)=>{O.d(A,{b:()=>S,e:()=>z,i:()=>Q});class S extends Error{}S._setPrototypeOf=Object.setPrototypeOf||((M,A)=>(M.__proto__=A,M));const z={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class Q extends S{constructor(M,A,O){super(M),this.errorCode=A,this.innerError=O,this.name="RuntimeError",S._setPrototypeOf(this,Q.prototype)}}},12813:(M,A,O)=>{O.d(A,{b:()=>u,f:()=>s,j:()=>F,l:()=>y,o:()=>f,n:()=>w,s:()=>H,v:()=>C,x:()=>D,B:()=>Y});var S=O(22),z=O(12804),Q=O(12778),X=O(12776);class c{}c.FilesToLoad={};var j=O(12821),B=O(12829),g=O(12836),e=O(12811),T=O(12783),J=O(12848),K=O(12839),G=O(12852);const d=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class w extends j.i{constructor(M,A){super(M,j.e.LoadFileError),this.name="LoadFileError",j.b._setPrototypeOf(this,w.prototype),A instanceof z.b?this.request=A:this.file=A}}class I extends j.i{constructor(M,A){super(M,j.e.RequestFileError),this.request=A,this.name="RequestFileError",j.b._setPrototypeOf(this,I.prototype)}}class b extends j.i{constructor(M,A){super(M,j.e.ReadFileError),this.file=A,this.name="ReadFileError",j.b._setPrototypeOf(this,b.prototype)}}const s={DefaultRetryStrategy:class{static ExponentialBackoff(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(O,S,z)=>0!==S.status||z>=M||-1!==O.indexOf("file:")?-1:Math.pow(2,z)*A}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:M=>M,ScriptBaseUrl:"",ScriptPreprocessUrl:M=>M,CleanUrl:M=>M=M.replace(/#/gm,"%23")},Y=(M,A)=>{if((!M||0!==M.indexOf("data:"))&&s.CorsBehavior)if("string"===typeof s.CorsBehavior||s.CorsBehavior instanceof String)A.crossOrigin=s.CorsBehavior;else{const O=s.CorsBehavior(M);O&&(A.crossOrigin=O)}},E={getRequiredSize:null},H=function(M,A,O,Q){let X,j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",g=arguments.length>5?arguments[5]:void 0,T=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===T||void 0===T||!T._features.forceBitmapOverHTMLImageElement))return O("LoadImage is only supported in web or BabylonNative environments."),null;let J=!1;M instanceof ArrayBuffer||ArrayBuffer.isView(M)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(X=URL.createObjectURL(new Blob([M],{type:j})),J=!0):X="data:".concat(j,";base64,")+(0,B.h)(M):M instanceof Blob?(X=URL.createObjectURL(M),J=!0):(X=s.CleanUrl(M),X=s.PreprocessUrl(X));const K=A=>{if(O){const S=X||M.toString();O("Error while trying to load image: ".concat(0===S.indexOf("http")||S.length<=128?S:S.slice(0,128)+"..."),A)}};if(null!==T&&void 0!==T&&T._features.forceBitmapOverHTMLImageElement)return f(X,(z=>{T.createImageBitmap(new Blob([z],{type:j}),(0,S.d)({premultiplyAlpha:"none"},g)).then((M=>{A(M),J&&URL.revokeObjectURL(X)})).catch((A=>{O&&O("Error while trying to load image: "+M,A)}))}),void 0,Q||void 0,!0,((M,A)=>{K(A)})),null;const G=new Image;if(E.getRequiredSize){const A=E.getRequiredSize(M);A.width&&(G.width=A.width),A.height&&(G.height=A.height)}Y(X,G);const d=[],w=()=>{for(const M of d)M.target.removeEventListener(M.name,M.handler);d.length=0};d.push({target:G,name:"load",handler:()=>{w(),A(G),J&&G.src&&URL.revokeObjectURL(G.src)}}),d.push({target:G,name:"error",handler:M=>{w(),K(M),J&&G.src&&URL.revokeObjectURL(G.src)}}),d.push({target:document,name:"securitypolicyviolation",handler:M=>{if(M.blockedURI!==G.src||"Qc"===M.disposition)return;w();const A=new Error("CSP violation of policy ".concat(M.effectiveDirective," ").concat(M.blockedURI,". Current policy is ").concat(M.originalPolicy));e.d.UseFallbackTexture=!1,K(A),J&&G.src&&URL.revokeObjectURL(G.src),G.src=""}}),(()=>{for(const M of d)M.target.addEventListener(M.name,M.handler)})();const I="blob:"===X.substring(0,5),b="data:"===X.substring(0,5),H=()=>{I||b||!z.b.IsCustomRequestAvailable?G.src=X:f(X,((M,A,O)=>{const S=new Blob([M],{type:!j&&O?O:j}),z=URL.createObjectURL(S);J=!0,G.src=z}),void 0,Q||void 0,!0,((M,A)=>{K(A)}))},C=()=>{Q&&Q.loadImage(X,G)};if(!I&&!b&&Q&&Q.enableTexturesOffline)Q.open(C,H);else{if(-1!==X.indexOf("file:")){const M=decodeURIComponent(X.substring(5).toLowerCase());if(c.FilesToLoad[M]&&"undefined"!==typeof URL){try{let A;try{A=URL.createObjectURL(c.FilesToLoad[M])}catch(D){A=URL.createObjectURL(c.FilesToLoad[M])}G.src=A,J=!0}catch(F){G.src=""}return G}}H()}return G},C=(M,A,O,S,z)=>{const Q=new FileReader,c={onCompleteObservable:new X.c,abort:()=>Q.abort()};return Q.onloadend=()=>c.onCompleteObservable.notifyObservers(c),z&&(Q.onerror=()=>{z(new b("Unable to read ".concat(M.name),M))}),Q.onload=M=>{A(M.target.result)},O&&(Q.onprogress=O),S?Q.readAsArrayBuffer(M):Q.readAsText(M),c},f=(M,A,O,S,z,Q,B)=>{if(M.name)return C(M,A,O,z,Q?M=>{Q(void 0,M)}:void 0);const g=M;if(-1!==g.indexOf("file:")){let M=decodeURIComponent(g.substring(5).toLowerCase());0===M.indexOf("./")&&(M=M.substring(2));const S=c.FilesToLoad[M];if(S)return C(S,A,O,z,Q?M=>Q(void 0,new w(M.message,M.file)):void 0)}const{match:e,type:K}=h(g);if(e){const M={onCompleteObservable:new X.c,abort:()=>()=>{}};try{const M=z?u(g):i(g);A(M,void 0,K)}catch(j){Q?Q(void 0,j):T.c.Error(j.message||"Failed to parse the Data URL")}return J.b.SetImmediate((()=>{M.onCompleteObservable.notifyObservers(M)})),M}return D(g,((M,O)=>{A(M,null===O||void 0===O?void 0:O.responseURL,null===O||void 0===O?void 0:O.getResponseHeader("content-type"))}),O,S,z,Q?M=>{Q(M.request,new w(M.message,M.request))}:void 0,B)},D=(M,A,O,S,c,j,B)=>{M=s.CleanUrl(M),M=s.PreprocessUrl(M);const g=s.BaseUrl+M;let e=!1;const J={onCompleteObservable:new X.c,abort:()=>e=!0},K=()=>{let M,S=new z.b,X=null;const K=()=>{S&&(O&&S.removeEventListener("progress",O),M&&S.removeEventListener("readystatechange",M),S.removeEventListener("loadend",G))};let G=()=>{K(),J.onCompleteObservable.notifyObservers(J),J.onCompleteObservable.clear(),O=void 0,M=null,G=null,j=void 0,B=void 0,A=void 0};J.abort=()=>{e=!0,G&&G(),S&&S.readyState!==(XMLHttpRequest.DONE||4)&&S.abort(),null!==X&&(clearTimeout(X),X=null),S=null};const d=M=>{const A=M.message||"Unknown error";j&&S?j(new I(A,S)):T.c.Error(A)},w=T=>{if(S){if(S.open("GET",g),B)try{B(S)}catch(J){return void d(J)}c&&(S.responseType="arraybuffer"),O&&S.addEventListener("progress",O),G&&S.addEventListener("loadend",G),M=()=>{if(!e&&S&&S.readyState===(XMLHttpRequest.DONE||4)){if(M&&S.removeEventListener("readystatechange",M),S.status>=200&&S.status<300||0===S.status&&(!(0,Q.m)()||N())){const M=c?S.response:S.responseText;if(null!==M){try{A&&A(M,S)}catch(J){d(J)}return}}const O=s.DefaultRetryStrategy;if(O){const M=O(g,S,T);if(-1!==M)return K(),S=new z.b,void(X=setTimeout((()=>w(T+1)),M))}const B=new I("Error status: "+S.status+" "+S.statusText+" - Unable to load "+g,S);j&&j(B)}},S.addEventListener("readystatechange",M),S.send()}};w(0)};if(S&&S.enableSceneOffline){const z=M=>{M&&M.status>400?j&&j(M):K()},Q=()=>{S&&S.loadFile(s.BaseUrl+M,(M=>{!e&&A&&A(M),J.onCompleteObservable.notifyObservers(J)}),O?M=>{!e&&O&&O(M)}:void 0,z,c)};S.open(Q,z)}else K();return J},F=M=>{const{match:A,type:O}=h(M);if(A)return O||void 0;const S=M.lastIndexOf(".");switch(M.substring(S+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Xc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},N=()=>"undefined"!==typeof location&&"file:"===location.protocol,y=M=>d.test(M),h=M=>{const A=d.exec(M);if(null===A||0===A.length)return{match:!1,type:""};return{match:!0,type:A[0].replace("data:","").replace("base64,","")}};function u(M){return(0,B.b)(M.split(",")[1])}const i=M=>(0,B.d)(M.split(",")[1]);let U;G.e._FileToolsLoadImage=H,K.b.loadFile=f,g.n.loadFile=f;((M,A,O,S,z,Q,X,c,j,B)=>{U={DecodeBase64UrlToBinary:M,DecodeBase64UrlToString:A,DefaultRetryStrategy:O.DefaultRetryStrategy,BaseUrl:O.BaseUrl,CorsBehavior:O.CorsBehavior,PreprocessUrl:O.PreprocessUrl,IsBase64DataUrl:S,IsFileURL:z,LoadFile:Q,LoadImage:X,ReadFile:c,RequestFile:j,SetCorsBehavior:B},Object.defineProperty(U,"DefaultRetryStrategy",{get:function(){return O.DefaultRetryStrategy},set:function(M){O.DefaultRetryStrategy=M}}),Object.defineProperty(U,"BaseUrl",{get:function(){return O.BaseUrl},set:function(M){O.BaseUrl=M}}),Object.defineProperty(U,"PreprocessUrl",{get:function(){return O.PreprocessUrl},set:function(M){O.PreprocessUrl=M}}),Object.defineProperty(U,"CorsBehavior",{get:function(){return O.CorsBehavior},set:function(M){O.CorsBehavior=M}})})(u,i,s,y,N,f,H,C,D,Y)},12927:(M,A,O)=>{function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(M=>{const A=16*Math.random()|0;return("x"===M?A:3&A|8).toString(16)}))}O.d(A,{b:()=>S})},12910:(M,A,O)=>{O.d(A,{b:()=>Q});var S=O(12783),z=O(12919);class Q{static Instantiate(M){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[M])return this.RegisteredExternalClasses[M];const A=(0,z.c)(M);if(A)return A;S.c.Warn(M+" not found, you may have missed an import.");const O=M.split(".");let Q=window||this;for(let S=0,z=O.length;S<z;S++)Q=Q[O[S]];return"function"!==typeof Q?null:Q}}Q.RegisteredExternalClasses={}},12793:(M,A,O)=>{O.d(A,{d:()=>z});var S=O(12778);class z{static get Now(){return(0,S.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12829:(M,A,O)=>{O.d(A,{b:()=>X,d:()=>Q,f:()=>S,h:()=>z});const S=M=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(M);let A="";for(let O=0;O<M.byteLength;O++)A+=String.fromCharCode(M[O]);return A},z=M=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let O,S,z,Q,X,c,j,B="",g=0;const e=ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(M);for(;g<e.length;)O=e[g++],S=g<e.length?e[g++]:Number.NaN,z=g<e.length?e[g++]:Number.NaN,Q=O>>2,X=(3&O)<<4|S>>4,c=(15&S)<<2|z>>6,j=63&z,isNaN(S)?c=j=64:isNaN(z)&&(j=64),B+=A.charAt(Q)+A.charAt(X)+A.charAt(c)+A.charAt(j);return B},Q=M=>atob(M),X=M=>{const A=Q(M),O=A.length,S=new Uint8Array(new ArrayBuffer(O));for(let z=0;z<O;z++)S[z]=A.charCodeAt(z);return S.buffer}},12931:(M,A,O)=>{function S(M){let A=1;do{A*=2}while(A<M);return A===M}function z(M,A,O){return M*(1-O)+A*O}function Q(M){const A=X(M),O=c(M);return A-M>M-O?O:A}function X(M){return M--,M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,M|=M>>16,++M}function c(M){return M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,(M|=M>>16)-(M>>1)}function j(M,A){let O;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:O=c(M);break;case 2:O=Q(M);break;default:O=X(M)}return Math.min(O,A)}O.d(A,{e:()=>c,g:()=>j,i:()=>S,m:()=>z,n:()=>Q})},12768:(M,A,O)=>{O.r(A),O.d(A,{AsyncLoop:()=>I,Tools:()=>d,className:()=>w});var S=O(12776),z=O(12778),Q=O(12783),X=O(12786),c=O(12793),j=O(12799),B=O(12804),g=O(12811),e=O(12813),T=O(12848),J=O(12910),K=O(12927),G=O(12931);class d{static get BaseUrl(){return e.f.BaseUrl}static set BaseUrl(M){e.f.BaseUrl=M}static get CleanUrl(){return e.f.CleanUrl}static set CleanUrl(M){e.f.CleanUrl=M}static IsAbsoluteUrl(M){return 0===M.indexOf("//")||-1!==M.indexOf("://")&&(-1!==M.indexOf(".")&&(-1!==M.indexOf("/")&&(!(M.indexOf(":")>M.indexOf("/"))&&(M.indexOf("://")<M.indexOf(".")||(0===M.indexOf("data:")||0===M.indexOf("blob:"))))))}static set ScriptBaseUrl(M){e.f.ScriptBaseUrl=M}static get ScriptBaseUrl(){return e.f.ScriptBaseUrl}static set CDNBaseUrl(M){d.ScriptBaseUrl=M,d.AssetBaseUrl=M}static set ScriptPreprocessUrl(M){e.f.ScriptPreprocessUrl=M}static get ScriptPreprocessUrl(){return e.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return e.f.DefaultRetryStrategy}static set DefaultRetryStrategy(M){e.f.DefaultRetryStrategy=M}static get CorsBehavior(){return e.f.CorsBehavior}static set CorsBehavior(M){e.f.CorsBehavior=M}static get UseFallbackTexture(){return g.d.UseFallbackTexture}static set UseFallbackTexture(M){g.d.UseFallbackTexture=M}static get RegisteredExternalClasses(){return J.b.RegisteredExternalClasses}static set RegisteredExternalClasses(M){J.b.RegisteredExternalClasses=M}static get fallbackTexture(){return g.d.FallbackTexture}static set fallbackTexture(M){g.d.FallbackTexture=M}static FetchToRef(M,A,O,S,z,Q){const X=4*((Math.abs(M)*O%O|0)+(Math.abs(A)*S%S|0)*O);Q.r=z[X]/255,Q.g=z[X+1]/255,Q.b=z[X+2]/255,Q.a=z[X+3]/255}static Mix(M,A,O){return 0}static Instantiate(M){return J.b.Instantiate(M)}static SetImmediate(M){T.b.SetImmediate(M)}static IsExponentOfTwo(M){return!0}static FloatRound(M){return Math.fround(M)}static GetFilename(M){const A=M.lastIndexOf("/");return A<0?M:M.substring(A+1)}static GetFolderPath(M){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const O=M.lastIndexOf("/");return O<0?A?M:"":M.substring(0,O+1)}static ToDegrees(M){return 180*M/Math.PI}static ToRadians(M){return M*Math.PI/180}static SmoothAngleChange(M,A){let O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const S=this.ToRadians(M),z=this.ToRadians(A);return this.ToDegrees(Math.atan2((1-O)*Math.sin(z)+O*Math.sin(S),(1-O)*Math.cos(z)+O*Math.cos(S)))}static MakeArray(M,A){return!0===A||void 0!==M&&null!=M?Array.isArray(M)?M:[M]:null}static GetPointerPrefix(M){return(0,z.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(M,A){(0,e.B)(M,A)}static SetReferrerPolicyBehavior(M,A){A.referrerPolicy=M}static get PreprocessUrl(){return e.f.PreprocessUrl}static set PreprocessUrl(M){e.f.PreprocessUrl=M}static LoadImage(M,A,O,S,z,Q){return(0,e.s)(M,A,O,S,z,Q)}static LoadFile(M,A,O,S,z,Q){return(0,e.o)(M,A,O,S,z,Q)}static async LoadFileAsync(M){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((O,S)=>{(0,e.o)(M,(M=>{O(M)}),void 0,void 0,A,((M,A)=>{S(A)}))}))}static GetAssetUrl(M){if(!M)return"";if(d.AssetBaseUrl&&M.startsWith(d._DefaultAssetsUrl)){const A="/"===d.AssetBaseUrl[d.AssetBaseUrl.length-1]?d.AssetBaseUrl.substring(0,d.AssetBaseUrl.length-1):d.AssetBaseUrl;return M.replace(d._DefaultAssetsUrl,A)}return M}static GetBabylonScriptURL(M,A){if(!M)return"";if(d.ScriptBaseUrl&&M.startsWith(d._DefaultCdnUrl)){const A="/"===d.ScriptBaseUrl[d.ScriptBaseUrl.length-1]?d.ScriptBaseUrl.substring(0,d.ScriptBaseUrl.length-1):d.ScriptBaseUrl;M=M.replace(d._DefaultCdnUrl,A)}return M=d.ScriptPreprocessUrl(M),A&&(M=d.GetAbsoluteUrl(M)),M}static LoadBabylonScript(M,A,O,S){M=d.GetBabylonScriptURL(M),d.LoadScript(M,A,O)}static async LoadBabylonScriptAsync(M){return M=d.GetBabylonScriptURL(M),await d.LoadScriptAsync(M)}static LoadScript(M,A,O,S){let Q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(M),A&&A()}catch(j){null===O||void 0===O||O("Unable to load script '".concat(M,"' in worker"),j)}return}if(!(0,z.m)())return void(null===O||void 0===O||O("Cannot load script '".concat(M,"' outside of a window or a worker")));const X=document.getElementsByTagName("head")[0],c=document.createElement("script");Q?(c.setAttribute("type","module"),c.innerText=M):(c.setAttribute("type","text/javascript"),c.setAttribute("src",M)),S&&(c.id=S),c.onload=()=>{A&&A()},c.onerror=A=>{O&&O("Unable to load script '".concat(M,"'"),A)},X.appendChild(c)}static async LoadScriptAsync(M,A){return await new Promise(((O,S)=>{this.LoadScript(M,(()=>{O()}),((M,A)=>{S(A||new Error(M))}),A)}))}static ReadFileAsDataURL(M,A,O){const z=new FileReader,Q={onCompleteObservable:new S.c,abort:()=>z.abort()};return z.onloadend=()=>{Q.onCompleteObservable.notifyObservers(Q)},z.onload=M=>{A(M.target.result)},z.onprogress=O,z.readAsDataURL(M),Q}static ReadFile(M,A,O,S,z){return(0,e.v)(M,A,O,S,z)}static FileAsURL(M){const A=new Blob([M]);return window.URL.createObjectURL(A)}static Format(M){let A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return M.toFixed(A)}static DeepCopy(M,A,O,S){X.c.DeepCopy(M,A,O,S)}static IsEmpty(M){for(const A in M)if(Object.prototype.hasOwnProperty.call(M,A))return!1;return!0}static RegisterTopRootEvents(M,A){for(let S=0;S<A.length;S++){const z=A[S];M.addEventListener(z.name,z.handler,!1);try{window.parent&&window.parent.addEventListener(z.name,z.handler,!1)}catch(O){}}}static UnregisterTopRootEvents(M,A){for(let S=0;S<A.length;S++){const z=A[S];M.removeEventListener(z.name,z.handler);try{M.parent&&M.parent.removeEventListener(z.name,z.handler)}catch(O){}}}static async DumpFramebuffer(M,A,O,S){throw(0,j.d)("DumpTools")}static DumpData(M,A,O,S){throw(0,j.d)("DumpTools")}static async DumpDataAsync(M,A,O){throw(0,j.d)("DumpTools")}static _IsOffScreenCanvas(M){return void 0!==M.convertToBlob}static ToBlob(M,A){let O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0;d._IsOffScreenCanvas(M)||M.toBlob||(M.toBlob=function(M,A,O){setTimeout((()=>{const S=atob(this.toDataURL(A,O).split(",")[1]),z=S.length,Q=new Uint8Array(z);for(let M=0;M<z;M++)Q[M]=S.charCodeAt(M);M(new Blob([Q]))}))}),d._IsOffScreenCanvas(M)?M.convertToBlob({type:O,quality:S}).then((M=>A(M))):M.toBlob((function(M){A(M)}),O,S)}static DownloadBlob(M,A){if("download"in document.createElement("a")){if(!A){const M=new Date;A="screenshot_"+((M.getFullYear()+"-"+(M.getMonth()+1)).slice(2)+"-"+M.getDate()+"_"+M.getHours()+"-"+("0"+M.getMinutes()).slice(-2))+".png"}d.Download(M,A)}else if(M&&"undefined"!==typeof URL){const A=URL.createObjectURL(M),O=window.open("");if(!O)return;const S=O.document.createElement("img");S.onload=function(){URL.revokeObjectURL(A)},S.src=A,O.document.body.appendChild(S)}}static EncodeScreenshotCanvasData(M,A){let O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0,z=arguments.length>4?arguments[4]:void 0;if("string"!==typeof S&&A){if(A){if(d._IsOffScreenCanvas(M))return void M.convertToBlob({type:O,quality:z}).then((M=>{const O=new FileReader;O.readAsDataURL(M),O.onloadend=()=>{const M=O.result;A(M)}}));const S=M.toDataURL(O,z);A(S)}}else this.ToBlob(M,(function(M){M&&d.DownloadBlob(M,S),A&&A("")}),O,z)}static Download(M,A){if("undefined"===typeof URL)return;const O=window.URL.createObjectURL(M),S=document.createElement("a");document.body.appendChild(S),S.style.display="none",S.href=O,S.download=A,S.addEventListener("click",(()=>{S.parentElement&&S.parentElement.removeChild(S)})),S.click(),window.URL.revokeObjectURL(O)}static BackCompatCameraNoPreventDefault(M){return"boolean"===typeof M[0]?M[0]:"boolean"===typeof M[1]&&M[1]}static CreateScreenshot(M,A,O,S){throw(0,j.d)("ScreenshotTools")}static async CreateScreenshotAsync(M,A,O){throw(0,j.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(M,A,O,S){throw(0,j.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(M,A,O){throw(0,j.d)("ScreenshotTools")}static RandomId(){return(0,K.b)()}static IsBase64(M){return(0,e.l)(M)}static DecodeBase64(M){return(0,e.b)(M)}static get errorsCount(){return Q.c.errorsCount}static Log(M){Q.c.Log(M)}static Warn(M){Q.c.Warn(M)}static Error(M){Q.c.Error(M)}static get LogCache(){return Q.c.LogCache}static ClearLogCache(){Q.c.ClearLogCache()}static set LogLevels(M){Q.c.LogLevels=M}static set PerformanceLogLevel(M){return(M&d.PerformanceUserMarkLogLevel)===d.PerformanceUserMarkLogLevel?(d.StartPerformanceCounter=d._StartUserMark,void(d.EndPerformanceCounter=d._EndUserMark)):(M&d.PerformanceConsoleLogLevel)===d.PerformanceConsoleLogLevel?(d.StartPerformanceCounter=d._StartPerformanceConsole,void(d.EndPerformanceCounter=d._EndPerformanceConsole)):(d.StartPerformanceCounter=d._StartPerformanceCounterDisabled,void(d.EndPerformanceCounter=d._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(M,A){}static _EndPerformanceCounterDisabled(M,A){}static _StartUserMark(M){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d._Performance){if(!(0,z.m)())return;d._Performance=window.performance}A&&d._Performance.mark&&d._Performance.mark(M+"-Begin")}static _EndUserMark(M){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&d._Performance.mark&&(d._Performance.mark(M+"-End"),d._Performance.measure(M,M+"-Begin",M+"-End"))}static _StartPerformanceConsole(M){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(d._StartUserMark(M,A),console.time&&console.time(M))}static _EndPerformanceConsole(M){let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A&&(d._EndUserMark(M,A),console.timeEnd(M))}static get Now(){return c.d.Now}static GetClassName(M){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],O=null;if(!A&&M.getClassName)O=M.getClassName();else{if(M instanceof Object){O=(A?M:Object.getPrototypeOf(M)).constructor.__bjsclassName__}O||(O=typeof M)}return O}static First(M,A){for(const O of M)if(A(O))return O;return null}static getFullClassName(M){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1],O=null,S=null;if(!A&&M.getClassName)O=M.getClassName();else{if(M instanceof Object){const z=A?M:Object.getPrototypeOf(M);O=z.constructor.__bjsclassName__,S=z.constructor.__bjsmoduleName__}O||(O=typeof M)}return O?(null!=S?S+".":"")+O:null}static async DelayAsync(M){await new Promise((A=>{setTimeout((()=>{A()}),M)}))}static IsSafari(){return!!(0,z.k)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function w(M,A){return O=>{O.__bjsclassName__=M,O.__bjsmoduleName__=null!=A?A:null}}d.AssetBaseUrl="",d.UseCustomRequestHeaders=!1,d.CustomRequestHeaders=B.b.CustomRequestHeaders,d.GetDOMTextContent=z.d,d._DefaultCdnUrl="https://cdn.babylonjs.com",d._DefaultAssetsUrl="https://assets.babylonjs.com/core",d.GetAbsoluteUrl="object"===typeof document?M=>{const A=document.createElement("a");return A.href=M,A.href}:"function"===typeof URL&&"object"===typeof location?M=>new URL(M,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},d.NoneLogLevel=Q.c.NoneLogLevel,d.MessageLogLevel=Q.c.MessageLogLevel,d.WarningLogLevel=Q.c.WarningLogLevel,d.ErrorLogLevel=Q.c.ErrorLogLevel,d.AllLogLevel=Q.c.AllLogLevel,d.IsWindowObjectExist=z.m,d.PerformanceNoneLogLevel=0,d.PerformanceUserMarkLogLevel=1,d.PerformanceConsoleLogLevel=2,d.StartPerformanceCounter=d._StartPerformanceCounterDisabled,d.EndPerformanceCounter=d._EndPerformanceCounterDisabled;class I{constructor(M,A,O){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=M,this.index=S-1,this._done=!1,this._fn=A,this._successCallback=O}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(M,A,O){const S=new I(M,A,O,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return S.executeNext(),S}static SyncAsyncForLoop(M,A,O,S,z){let Q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return I.Run(Math.ceil(M/A),(S=>{z&&z()?S.breakLoop():setTimeout((()=>{for(let Q=0;Q<A;++Q){const X=S.index*A+Q;if(X>=M)break;if(O(X),z&&z()){S.breakLoop();break}}S.executeNext()}),Q)}),S)}}d.Mix=G.m,d.IsExponentOfTwo=G.i,g.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12919:(M,A,O)=>{O.d(A,{c:()=>Q,g:()=>z});const S={};function z(M,A){S[M]=A}function Q(M){return S[M]}},12804:(M,A,O)=>{O.d(A,{b:()=>S});class S{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(S.CustomRequestHeaders).length>0||S.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const M in S.CustomRequestHeaders){const A=S.CustomRequestHeaders[M];A&&this._xhr.setRequestHeader(M,A)}}_shouldSkipRequestModifications(M){return S.SkipRequestModificationForBabylonCDN&&(M.includes("preview.babylonjs.com")||M.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(M){this._xhr.onprogress=M}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(M){this._xhr.responseType=M}get timeout(){return this._xhr.timeout}set timeout(M){this._xhr.timeout=M}addEventListener(M,A,O){this._xhr.addEventListener(M,A,O)}removeEventListener(M,A,O){this._xhr.removeEventListener(M,A,O)}abort(){this._xhr.abort()}send(M){S.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(M)}open(M,A){for(const O of S.CustomRequestModifiers){if(this._shouldSkipRequestModifications(A))return;A=O(this._xhr,A)||A}A=(A=A.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=A,this._xhr.open(M,A,!0)}setRequestHeader(M,A){this._xhr.setRequestHeader(M,A)}getResponseHeader(M){return this._xhr.getResponseHeader(M)}}S.CustomRequestHeaders={},S.CustomRequestModifiers=new Array,S.SkipRequestModificationForBabylonCDN=!0}}]);