"use strict";(self.fjf2z1c8il8=self.fjf2z1c8il8||[]).push([[8],{12354:(g,i,a)=>{a.d(i,{d:()=>x});var n=a(12316),L=a(12292),d=a(12362),b=a(12383),k=a(12301);class e{constructor(){let g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,g&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(g){this._zOffset!==g&&(this._zOffset=g,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(g){this._zOffsetUnits!==g&&(this._zOffsetUnits=g,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(g){this._cullFace!==g&&(this._cullFace=g,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(g){this._cull!==g&&(this._cull=g,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(g){this._depthFunc!==g&&(this._depthFunc=g,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(g){this._depthMask!==g&&(this._depthMask=g,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(g){this._depthTest!==g&&(this._depthTest=g,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(g){this._frontFace!==g&&(this._frontFace=g,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(g){this.isDirty&&(this._isCullDirty&&(this.cull?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(g.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(g.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(g.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(this.zOffset,this.zOffsetUnits)):g.disable(g.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(g.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class N{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(g){this._func!==g&&(this._func=g,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(g){this._funcRef!==g&&(this._funcRef=g,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(g){this._funcMask!==g&&(this._funcMask=g,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(g){this._opStencilFail!==g&&(this._opStencilFail=g,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(g){this._opDepthFail!==g&&(this._opDepthFail=g,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(g){this._opStencilDepthPass!==g&&(this._opStencilDepthPass=g,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(g){this._mask!==g&&(this._mask=g,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(g){this._enabled!==g&&(this._enabled=g,this._isStencilTestDirty=!0)}constructor(){let g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,g&&this.reset()}reset(){var g;this.stencilMaterial=void 0,null===(g=this.stencilGlobal)||void 0===g||g.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(g){var i;if(!g)return;const a=!this.useStencilGlobalOnly&&!(null===(i=this.stencilMaterial)||void 0===i||!i.enabled);this.enabled=a?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=a?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=a?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=a?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=a?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=a?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=a?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=a?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(g.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(g.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(g.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class F{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=F.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=F.KEEP,this.opDepthFail=F.KEEP,this.opStencilDepthPass=F.REPLACE}get stencilFunc(){return this.func}set stencilFunc(g){this.func=g}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(g){this.funcRef=g}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(g){this.funcMask=g}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(g){this.opStencilFail=g}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(g){this.opDepthFail=g}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(g){this.opStencilDepthPass=g}get stencilMask(){return this.mask}set stencilMask(g){this.mask=g}get stencilTest(){return this.enabled}set stencilTest(g){this.enabled=g}}F.ALWAYS=519,F.KEEP=7680,F.REPLACE=7681;class I{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(g){this._alphaBlend!==g&&(this._alphaBlend=g,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(g,i,a,n){this._blendConstants[0]===g&&this._blendConstants[1]===i&&this._blendConstants[2]===a&&this._blendConstants[3]===n||(this._blendConstants[0]=g,this._blendConstants[1]=i,this._blendConstants[2]=a,this._blendConstants[3]=n,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(g,i,a,n){this._blendFunctionParameters[0]===g&&this._blendFunctionParameters[1]===i&&this._blendFunctionParameters[2]===a&&this._blendFunctionParameters[3]===n||(this._blendFunctionParameters[0]=g,this._blendFunctionParameters[1]=i,this._blendFunctionParameters[2]=a,this._blendFunctionParameters[3]=n,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(g,i){this._blendEquationParameters[0]===g&&this._blendEquationParameters[1]===i||(this._blendEquationParameters[0]=g,this._blendEquationParameters[1]=i,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(g){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?g.enable(g.BLEND):g.disable(g.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(g.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(g.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(g.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var j=a(12303),y=a(12392),B=a(12289),c=a(12286),D=a(12343),p=a(12403);function R(g,i){if((0,B.k)()){const{requestAnimationFrame:a}=i||window;if("function"===typeof a)return a(g)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(g);return setTimeout(g,16)}class x{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(g){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(g){g!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=g,this._depthCullingState.depthFunc=g?518:515)}setColorWrite(g){g!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=g)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(g){if(g)return this.isNDCHalfZRange?g.IS_NDC_HALF_ZRANGE="":delete g.IS_NDC_HALF_ZRANGE,this.o?g.USE_REVERSE_DEPTHBUFFER="":delete g.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?g.USE_EXACT_SRGB_CONVERSIONS="":delete g.USE_EXACT_SRGB_CONVERSIONS);{let g="";return this.isNDCHalfZRange&&(g+="#define IS_NDC_HALF_ZRANGE"),this.o&&(g&&(g+="\n"),g+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(g&&(g+="\n"),g+="#define USE_EXACT_SRGB_CONVERSIONS"),g}}_rebuildInternalTextures(){const g=this._internalTexturesCache.slice();for(const i of g)i._rebuild()}_rebuildRenderTargetWrappers(){const g=this._renderTargetWrapperCache.slice();for(const i of g)i._rebuild()}_rebuildEffects(){for(const g in this._compiledEffects){const i=this._compiledEffects[g];i._pipelineContext=null,i._prepareEffect()}d.Effect.ResetCache()}_rebuildGraphicsResources(){var g;this.wipeCaches(!0),this._rebuildEffects(),null===(g=this._rebuildComputeEffects)||void 0===g||g.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){L.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(g){setTimeout((()=>{this._clearEmptyResources();const i=this._depthCullingState.depthTest,a=this._depthCullingState.depthFunc,n=this._depthCullingState.depthMask,L=this._stencilState.stencilTest;g(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=i,this._depthCullingState.depthFunc=a,this._depthCullingState.depthMask=n,this._stencilState.stencilTest=L,this._flagContextRestored()}),0)}get p(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(g){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(g){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const g=new Uint8Array(4),i=[g,g,g,g,g,g];this._emptyCubeTexture=this.createRawCubeTexture(i,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(g){if(!g)return this._activeRenderLoops.length=0,void this._cancelFrame();const i=this._activeRenderLoops.indexOf(g);i>=0&&(this._activeRenderLoops.splice(i,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const g=this._frameHandler;if(this._frameHandler=0,(0,B.k)()){const{cancelAnimationFrame:i}=this.getHostWindow()||window;if("function"===typeof i)return i(g)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(g);return clearTimeout(g)}}nd(){this.onBeginFrameObservable.notifyObservers(this)}Ld(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(g){this._maxFPS=g,void 0!==g&&(this._minFrameTime=g<=0?Number.MAX_VALUE:1e3/g)}_isOverFrameTime(g){if(!g||void 0===this._maxFPS)return!1;const i=g-this._lastFrameTime;return this._lastFrameTime=g,this._renderAccumulator+=i,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(g){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(g)){let g=!0;(this.p||!this.renderEvenInBackground&&this._windowIsBackground)&&(g=!1),g&&(this.nd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ld())}}_renderLoop(g){this._processFrame(g),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let g=0;g<this._activeRenderLoops.length;g++){(0,this._activeRenderLoops[g])()}}_renderViews(){return!1}_queueNewFrame(g,i){return R(g,i)}runRenderLoop(g){-1===this._activeRenderLoops.indexOf(g)&&(this._activeRenderLoops.push(g),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(g){this._depthCullingState.depthTest=g}setZOffset(g){this._depthCullingState.zOffset=this.o?-g:g}getZOffset(){const g=this._depthCullingState.zOffset;return this.o?-g:g}setZOffsetUnits(g){this._depthCullingState.zOffsetUnits=this.o?-g:g}getZOffsetUnits(){const g=this._depthCullingState.zOffsetUnits;return this.o?-g:g}getHostWindow(){return(0,B.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(g){this._compatibilityMode=!0}_rebuildTextures(){for(const g of this.scenes)g._rebuildTextures();for(const g of this._virtualScenes)g._rebuildTextures()}_releaseRenderTargetWrapper(g){const i=this._renderTargetWrapperCache.indexOf(g);-1!==i&&this._renderTargetWrapperCache.splice(i,1)}get currentViewport(){return this._cachedViewport}setViewport(g,i,a){const n=i||this.getRenderWidth(),L=a||this.getRenderHeight(),d=g.x||0,b=g.y||0;this._cachedViewport=g,this._viewport(d*n,b*L,n*g.width,L*g.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(g){return new Path2D(g)}get description(){let g=this.name+this.version;return this._caps.parallelShaderCompile&&(g+=" - Parallel shader compilation"),g}_createTextureBase(g,i,a,d){let b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,N=arguments.length>7?arguments[7]:void 0,F=arguments.length>8?arguments[8]:void 0,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,j=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,B=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,c=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,D=arguments.length>13?arguments[13]:void 0,R=arguments.length>14?arguments[14]:void 0,E=arguments.length>15?arguments[15]:void 0;const X="data:"===(g=g||"").substring(0,5),v="blob:"===g.substring(0,5),P=X&&-1!==g.indexOf(";base64,"),Y=j||new y.d(this,1);Y!==j&&(Y.label=g.substring(0,60));const f=g;!this._transformTextureUrl||P||j||I||(g=this._transformTextureUrl(g)),f!==g&&(Y._originalUrl=f);const C=g.lastIndexOf(".");let U=c||(C>-1?g.substring(C).toLowerCase():"");U.indexOf("?")>-1&&(U=U.split("?")[0]);const S=(0,p.c)(U,D);d&&d.addPendingData(Y),Y.url=g,Y.generateMipMaps=!i,Y.samplingMode=b,Y.invertY=a,Y._useSRGBBuffer=this._getUseSRGBBuffer(!!E,i),this._doNotHandleContextLost||(Y._buffer=I);let V=null;k&&!j&&(V=Y.onLoadedObservable.add(k)),j||this._internalTexturesCache.push(Y);const K=(a,j)=>{d&&d.removePendingData(Y),g===f?(V&&Y.onLoadedObservable.remove(V),n.c.UseFallbackTexture&&g!==n.c.FallbackTexture&&this._createTextureBase(n.c.FallbackTexture,i,Y.invertY,d,b,null,e,N,F,I,Y),a=(a||"Unknown error")+(n.c.UseFallbackTexture?" - Fallback texture was used":""),Y.onErrorObservable.notifyObservers({message:a,exception:j}),e&&e(a,j)):(L.b.Warn(`Failed to load ${g}, falling back to ${f}`),this._createTextureBase(f,i,Y.invertY,d,b,k,e,N,F,I,Y,B,c,D,R,E))};if(S){const i=async g=>{(await S).loadData(g,Y,((g,i,a,n,L,k)=>{k?K("TextureLoader failed to load data"):N(Y,U,d,{width:g,height:i},Y.invertY,!a,n,(()=>(L(),!1)),b)}),R)};I?I instanceof ArrayBuffer?i(new Uint8Array(I)):ArrayBuffer.isView(I)?i(I):e&&e("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(g,(g=>{i(new Uint8Array(g))}),void 0,d?d.offlineProvider:void 0,!0,((g,i)=>{K("Unable to load "+(g&&g.responseURL,i))}))}else{const a=g=>{v&&!this._doNotHandleContextLost&&(Y._buffer=g),N(Y,U,d,g,Y.invertY,i,!1,F,b)};!X||P?I&&("string"===typeof I.decoding||I.close)?a(I):x._FileToolsLoadImage(g||"",a,K,d?d.offlineProvider:null,D,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof I||I instanceof ArrayBuffer||ArrayBuffer.isView(I)||I instanceof Blob?x._FileToolsLoadImage(I,a,K,d?d.offlineProvider:null,D,Y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):I&&a(I)}return Y}_rebuildBuffers(){for(const g of this._uniformBuffers)g._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,B.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const g in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,g)&&(this._boundTexturesCache[g]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(g){this._name=g}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(g){this._hardwareScalingLevel=g,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(g){this._doNotHandleContextLost=g}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(g,i,a){var L,d;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new e,this._stencilStateComposer=new N,this._stencilState=new F,this._alphaState=new I,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new c.b,this.onCanvasFocusObservable=new c.b,this.onNewSceneAddedObservable=new c.b,this.onResizeObservable=new c.b,this.onCanvasPointerOutObservable=new c.b,this.onEffectErrorObservable=new c.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new c.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=g=>this._renderLoop(g),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new c.b,this.onAfterShaderCompilationObservable=new c.b,this.onBeginFrameObservable=new c.b,this.onEndFrameObservable=new c.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new c.b,this.onContextRestoredObservable=new c.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.dd=new c.b,this.onReleaseEffectsObservable=new c.b,n.c.Instances.push(this),this.startTime=k.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,b.e.SetMatrixPrecision(!!i.useHighPrecisionMatrix),(0,B.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=a??!1,i.antialias=g??i.antialias,i.deterministicLockstep=i.deterministicLockstep??!1,i.lockstepMaxSteps=i.lockstepMaxSteps??4,i.timeStep=i.timeStep??1/60,i.bd=i.bd??!0,this._audioContext=(null===(L=i.audioEngineOptions)||void 0===L?void 0:L.audioContext)??null,this._audioDestination=(null===(d=i.audioEngineOptions)||void 0===d?void 0:d.audioDestination)??null,this.premultipliedAlpha=i.premultipliedAlpha??!0,this._doNotHandleContextLost=!!i.doNotHandleContextLost,this._isStencilEnable=!!i.bd,this.useExactSrgbConversions=i.useExactSrgbConversions??!1;const j=(0,B.k)()&&window.devicePixelRatio||1,y=i.limitDeviceRatio||j;a=a||i.adaptToDeviceRatio||!1,this._hardwareScalingLevel=a?1/Math.min(y,j):1,this._lastDevicePixelRatio=j,this._creationOptions=i}resize(){let g,i,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const g=(0,B.k)()&&window.devicePixelRatio||1,i=this._lastDevicePixelRatio/g;this._lastDevicePixelRatio=g,this._hardwareScalingLevel*=i}if((0,B.k)()&&(0,B.f)())if(this._renderingCanvas){var n,L;const a=null===(n=(L=this._renderingCanvas).getBoundingClientRect)||void 0===n?void 0:n.call(L);g=this._renderingCanvas.clientWidth||(null===a||void 0===a?void 0:a.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,i=this._renderingCanvas.clientHeight||(null===a||void 0===a?void 0:a.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else g=window.innerWidth,i=window.innerHeight;else g=this._renderingCanvas?this._renderingCanvas.width:100,i=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(g/this._hardwareScalingLevel,i/this._hardwareScalingLevel,a)}setSize(g,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(g|=0,i|=0,!a&&this._renderingCanvas.width===g&&this._renderingCanvas.height===i)return!1;if(this._renderingCanvas.width=g,this._renderingCanvas.height=i,this.scenes){for(let g=0;g<this.scenes.length;g++){const i=this.scenes[g];for(let g=0;g<i.cameras.length;g++){i.cameras[g]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(g,i,a,n,L,d,b,k,e,N,F){throw(0,j.b)("engine.rawTexture")}createRawCubeTexture(g,i,a,n,L,d,b,k){throw(0,j.b)("engine.rawTexture")}createRawTexture3D(g,i,a,n,L,d,b,k,e,N,F){throw(0,j.b)("engine.rawTexture")}createRawTexture2DArray(g,i,a,n,L,d,b,k,e,N,F){throw(0,j.b)("engine.rawTexture")}_sharedInit(g){this._renderingCanvas=g}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const g=navigator.userAgent;this.hostInformation.isMobile=-1!==g.indexOf("Mobile")||-1!==g.indexOf("Mac")&&(0,B.f)()&&"ontouchend"in document},this._checkForMobile(),(0,B.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(g){return document.createElement("video")}_reportDrawCall(){var g;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(g=this._drawCalls)||void 0===g||g.addCount(i,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(g,i){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(g,i){return createImageBitmap(g,i)}resizeImageBitmap(g,i,a){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(g){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(g,i){if("undefined"===typeof document)return new OffscreenCanvas(g,i);const a=document.createElement("canvas");return a.width=g,a.height=i,a}createCanvas(g,i){return x._CreateCanvas(g,i)}static _FileToolsLoadImage(g,i,a,n,L,d,b){throw(0,j.b)("FileTools")}_loadFile(g,i,a,n,L,d){const b=(0,D.m)(g,i,a,n,L,d);return this._activeRequests.push(b),b.onCompleteObservable.add((()=>{const g=this._activeRequests.indexOf(b);-1!==g&&this._activeRequests.splice(g,1)})),b}static _FileToolsLoadFile(g,i,a,n,L,d){if(D.d.loadFile)return D.d.loadFile(g,i,a,n,L,d);throw(0,j.b)("FileTools")}dispose(){var g;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(g=this.releaseComputeEffects)||void 0===g||g.call(this),d.Effect.ResetCache();for(const a of this._activeRequests)a.abort();this._boundRenderFunction=null,this.dd.notifyObservers(this),this.dd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,B.k)()&&window.removeEventListener("resize",this._checkForMobile);const i=n.c.Instances.indexOf(this);i>=0&&n.c.Instances.splice(i,1),n.c.Instances.length||(n.c.OnEnginesDisposedObservable.notifyObservers(this),n.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(g){throw(0,j.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(g,i){for(let a=0;a<n.c.Instances.length;a++){const L=n.c.Instances[a];for(let a=0;a<L.scenes.length;a++)L.scenes[a].markAllMaterialsAsDirty(g,i)}}}x._RenderPassIdCounter=0,x._RescalePostProcessFactory=null,x.CollisionsEpsilon=.001,x.QueueNewFrame=R},12316:(g,i,a)=>{a.d(i,{c:()=>L});var n=a(12286);class L{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}L.Instances=[],L.OnEnginesDisposedObservable=new n.b,L._LastCreatedScene=null,L.UseFallbackTexture=!0,L.FallbackTexture=""},12383:(g,i,a)=>{a.d(i,{e:()=>n});class n{static SetMatrixPrecision(g){if(n.MatrixTrackPrecisionChange=!1,g&&!n.MatrixUse64Bits&&n.MatrixTrackedMatrices)for(let i=0;i<n.MatrixTrackedMatrices.length;++i){const g=n.MatrixTrackedMatrices[i],a=g.kd;g.kd=new Array(16);for(let i=0;i<16;++i)g.kd[i]=a[i]}n.MatrixUse64Bits=g,n.MatrixCurrentType=n.MatrixUse64Bits?Array:Float32Array,n.MatrixTrackedMatrices=null}}n.MatrixUse64Bits=!1,n.MatrixTrackPrecisionChange=!0,n.MatrixCurrentType=Float32Array,n.MatrixTrackedMatrices=[]},12403:(g,i,a)=>{a.d(i,{c:()=>b});var n=a(12292);const L=new Map;function d(g,i){(function(g){return L.delete(g)})(g)&&n.b.Warn(`Extension with the name '${g}' already exists`),L.set(g,i)}function b(g,i){"image/ktx"!==i&&"image/ktx2"!==i||(g=".ktx"),L.has(g)||(g.endsWith(".ies")&&d(".ies",(async()=>await a.e(15).then(a.bind(a,14976)).then((g=>new g._IESTextureLoader)))),g.endsWith(".dds")&&d(".dds",(async()=>await Promise.all([a.e(14),a.e(17),a.e(13),a.e(19),a.e(18),a.e(28)]).then(a.bind(a,14978)).then((g=>new g._DDSTextureLoader)))),g.endsWith(".basis")&&d(".basis",(async()=>await Promise.all([a.e(14),a.e(17),a.e(13),a.e(47)]).then(a.bind(a,14990)).then((g=>new g._BasisTextureLoader)))),g.endsWith(".env")&&d(".env",(async()=>await Promise.all([a.e(14),a.e(17),a.e(13),a.e(19),a.e(18),a.e(23),a.e(21),a.e(45),a.e(48)]).then(a.bind(a,14994)).then((g=>new g._ENVTextureLoader)))),g.endsWith(".hdr")&&d(".hdr",(async()=>await Promise.all([a.e(14),a.e(49)]).then(a.bind(a,15002)).then((g=>new g._HDRTextureLoader)))),(g.endsWith(".ktx")||g.endsWith(".ktx2"))&&(d(".ktx",(async()=>await a.e(30).then(a.bind(a,15006)).then((g=>new g._KTXTextureLoader)))),d(".ktx2",(async()=>await a.e(30).then(a.bind(a,15006)).then((g=>new g._KTXTextureLoader))))),g.endsWith(".tga")&&d(".tga",(async()=>await a.e(50).then(a.bind(a,15008)).then((g=>new g._TGATextureLoader)))),g.endsWith(".exr")&&d(".exr",(async()=>await a.e(16).then(a.bind(a,15012)).then((g=>new g._ExrTextureLoader)))));const n=L.get(g);return n?Promise.resolve(n(i)):null}},12392:(g,i,a)=>{a.d(i,{d:()=>b});var n,L=a(12286),d=a(12400);!function(g){g[g.Unknown=0]="Unknown",g[g.Url=1]="Url",g[g.Temp=2]="Temp",g[g.Raw=3]="Raw",g[g.Dynamic=4]="Dynamic",g[g.RenderTarget=5]="RenderTarget",g[g.MultiRenderTarget=6]="MultiRenderTarget",g[g.Cube=7]="Cube",g[g.CubeRaw=8]="CubeRaw",g[g.CubePrefiltered=9]="CubePrefiltered",g[g.Raw3D=10]="Raw3D",g[g.Raw2DArray=11]="Raw2DArray",g[g.DepthStencil=12]="DepthStencil",g[g.CubeRawRGBD=13]="CubeRawRGBD",g[g.Depth=14]="Depth"}(n||(n={}));class b extends d.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(g){this.generateMipMaps=g}get uniqueId(){return this._uniqueId}_setUniqueId(g){this._uniqueId=g}getEngine(){return this._engine}get source(){return this._source}constructor(g,i){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new L.b,this.onErrorObservable=new L.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=g,this._source=i,this._uniqueId=b._Counter++,a||(this._hardwareTexture=g._createHardwareTexture())}incrementReferences(){this._references++}updateSize(g,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,g,i,a),this.width=g,this.height=i,this.depth=a,this.baseWidth=g,this.baseHeight=i,this.baseDepth=a,this._size=g*i*a}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const g=this.onRebuildCallback(this),i=i=>{i._swapAndDie(this,!1),this.isReady=g.isReady};return void(g.isAsync?g.proxy.then(i):i(g.proxy))}let g;switch(this.source){case 2:case 12:case 14:break;case 1:return void(g=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(g=>{g._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:g=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),g._swapAndDie(this,!1),this.isReady=!0;break;case 10:g=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),g._swapAndDie(this,!1),this.isReady=!0;break;case 11:g=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),g._swapAndDie(this,!1),this.isReady=!0;break;case 4:g=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),g._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(g=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{g._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:g=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),g._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return g=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(g=>{g&&g._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(g._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(g){var i;let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(i=this._hardwareTexture)||void 0===i||i.setUsage(g._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),g._hardwareTexture=this._hardwareTexture,a&&(g._isRGBD=this._isRGBD),this._lodTextureHigh&&(g._lodTextureHigh&&g._lodTextureHigh.dispose(),g._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(g._lodTextureMid&&g._lodTextureMid.dispose(),g._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(g._lodTextureLow&&g._lodTextureLow.dispose(),g._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(g._irradianceTexture&&g._irradianceTexture.dispose(),g._irradianceTexture=this._irradianceTexture);const n=this._engine.getLoadedTexturesCache();let L=n.indexOf(this);-1!==L&&n.splice(L,1),L=n.indexOf(g),-1===L&&n.push(g)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}b._Counter=0},12400:(g,i,a)=>{a.d(i,{c:()=>n});class n{get wrapU(){return this._cachedWrapU}set wrapU(g){this._cachedWrapU=g}get wrapV(){return this._cachedWrapV}set wrapV(g){this._cachedWrapV=g}get wrapR(){return this._cachedWrapR}set wrapR(g){this._cachedWrapR=g}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(g){this._cachedAnisotropicFilteringLevel=g}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(g){this._comparisonFunction=g}get useMipMaps(){return this._useMipMaps}set useMipMaps(g){this._useMipMaps=g}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=g,this._cachedWrapV=i,this._cachedWrapR=a,this._cachedAnisotropicFilteringLevel=n,this.samplingMode=L,this._comparisonFunction=d,this}compareSampler(g){return this._cachedWrapU===g._cachedWrapU&&this._cachedWrapV===g._cachedWrapV&&this._cachedWrapR===g._cachedWrapR&&this._cachedAnisotropicFilteringLevel===g._cachedAnisotropicFilteringLevel&&this.samplingMode===g.samplingMode&&this._comparisonFunction===g._comparisonFunction&&this._useMipMaps===g._useMipMaps}}},12296:(g,i,a)=>{a.d(i,{c:()=>d});var n=a(12292);const L=(g,i,a)=>g?g.getClassName&&"Mesh"===g.getClassName()?null:!g.getClassName||"SubMesh"!==g.getClassName()&&"PhysicsBody"!==g.getClassName()?g.clone?g.clone():Array.isArray(g)?g.slice():a&&"object"===typeof g?{...g}:null:g.clone(i):null;class d{static DeepCopy(g,i,a,d){let b=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const k=function(g){const i=[];do{const a=Object.getOwnPropertyNames(g);for(const g of a)-1===i.indexOf(g)&&i.push(g)}while(g=Object.getPrototypeOf(g));return i}(g);for(const N of k){if("_"===N[0]&&(!d||-1===d.indexOf(N)))continue;if(N.endsWith("Observable"))continue;if(a&&-1!==a.indexOf(N))continue;const k=g[N],F=typeof k;if("function"!==F)try{if("object"===F)if(k instanceof Uint8Array)i[N]=Uint8Array.from(k);else if(k instanceof Array){if(i[N]=[],k.length>0)if("object"==typeof k[0])for(let g=0;g<k.length;g++){const a=L(k[g],i,b);-1===i[N].indexOf(a)&&i[N].push(a)}else i[N]=k.slice(0)}else i[N]=L(k,i,b);else i[N]=k}catch(e){n.b.Warn(e.message)}}}}},12330:(g,i,a)=>{a.d(i,{d:()=>n,e:()=>L,i:()=>d});class n extends Error{}n._setPrototypeOf=Object.setPrototypeOf||((g,i)=>(g.__proto__=i,g));const L={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class d extends n{constructor(g,i,a){super(g),this.errorCode=i,this.innerError=a,this.name="RuntimeError",n._setPrototypeOf(this,d.prototype)}}},12324:(g,i,a)=>{a.d(i,{d:()=>K,e:()=>x,h:()=>C,i:()=>S,l:()=>Y,j:()=>D,m:()=>v,n:()=>P,q:()=>f,r:()=>E});var n=a(12308),L=a(12289),d=a(12286);class b{}b.FilesToLoad={};var k=a(12330),e=a(12334),N=a(12337),F=a(12316),I=a(12292),j=a(12352),y=a(12343),B=a(12354);const c=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class D extends k.i{constructor(g,i){super(g,k.e.LoadFileError),this.name="LoadFileError",k.d._setPrototypeOf(this,D.prototype),i instanceof n.d?this.request=i:this.file=i}}class p extends k.i{constructor(g,i){super(g,k.e.RequestFileError),this.request=i,this.name="RequestFileError",k.d._setPrototypeOf(this,p.prototype)}}class R extends k.i{constructor(g,i){super(g,k.e.ReadFileError),this.file=i,this.name="ReadFileError",k.d._setPrototypeOf(this,R.prototype)}}const x={DefaultRetryStrategy:class{static ExponentialBackoff(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(a,n,L)=>0!==n.status||L>=g||-1!==a.indexOf("file:")?-1:Math.pow(2,L)*i}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:g=>g,ScriptBaseUrl:"",ScriptPreprocessUrl:g=>g,CleanUrl:g=>g=g.replace(/#/gm,"%23")},E=(g,i)=>{if((!g||0!==g.indexOf("data:"))&&x.CorsBehavior)if("string"===typeof x.CorsBehavior||x.CorsBehavior instanceof String)i.crossOrigin=x.CorsBehavior;else{const a=x.CorsBehavior(g);a&&(i.crossOrigin=a)}},X={getRequiredSize:null},v=function(g,i,a,L){let d,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",N=arguments.length>5?arguments[5]:void 0,I=arguments.length>6&&void 0!==arguments[6]?arguments[6]:F.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===I||void 0===I||!I._features.forceBitmapOverHTMLImageElement))return a("LoadImage is only supported in web or BabylonNative environments."),null;let j=!1;g instanceof ArrayBuffer||ArrayBuffer.isView(g)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(d=URL.createObjectURL(new Blob([g],{type:k})),j=!0):d=`data:${k};base64,`+(0,e.j)(g):g instanceof Blob?(d=URL.createObjectURL(g),j=!0):(d=x.CleanUrl(g),d=x.PreprocessUrl(d));const y=i=>{if(a){const n=d||g.toString();a(`Error while trying to load image: ${0===n.indexOf("http")||n.length<=128?n:n.slice(0,128)+"..."}`,i)}};if(null!==I&&void 0!==I&&I._features.forceBitmapOverHTMLImageElement)return Y(d,(n=>{I.createImageBitmap(new Blob([n],{type:k}),{premultiplyAlpha:"none",...N}).then((g=>{i(g),j&&URL.revokeObjectURL(d)})).catch((i=>{a&&a("Error while trying to load image: "+g,i)}))}),void 0,L||void 0,!0,((g,i)=>{y(i)})),null;const B=new Image;if(X.getRequiredSize){const i=X.getRequiredSize(g);i.width&&(B.width=i.width),i.height&&(B.height=i.height)}E(d,B);const c=[],D=()=>{for(const g of c)g.target.removeEventListener(g.name,g.handler);c.length=0};c.push({target:B,name:"load",handler:()=>{D(),i(B),j&&B.src&&URL.revokeObjectURL(B.src)}}),c.push({target:B,name:"error",handler:g=>{D(),y(g),j&&B.src&&URL.revokeObjectURL(B.src)}}),c.push({target:document,name:"securitypolicyviolation",handler:g=>{if(g.blockedURI!==B.src||"ed"===g.disposition)return;D();const i=new Error(`CSP violation of policy ${g.effectiveDirective} ${g.blockedURI}. Current policy is ${g.originalPolicy}`);F.c.UseFallbackTexture=!1,y(i),j&&B.src&&URL.revokeObjectURL(B.src),B.src=""}}),(()=>{for(const g of c)g.target.addEventListener(g.name,g.handler)})();const p="blob:"===d.substring(0,5),R="data:"===d.substring(0,5),v=()=>{p||R||!n.d.IsCustomRequestAvailable?B.src=d:Y(d,((g,i,a)=>{const n=new Blob([g],{type:!k&&a?a:k}),L=URL.createObjectURL(n);j=!0,B.src=L}),void 0,L||void 0,!0,((g,i)=>{y(i)}))},P=()=>{L&&L.loadImage(d,B)};if(!p&&!R&&L&&L.enableTexturesOffline)L.open(P,v);else{if(-1!==d.indexOf("file:")){const g=decodeURIComponent(d.substring(5).toLowerCase());if(b.FilesToLoad[g]&&"undefined"!==typeof URL){try{let i;try{i=URL.createObjectURL(b.FilesToLoad[g])}catch(f){i=URL.createObjectURL(b.FilesToLoad[g])}B.src=i,j=!0}catch(C){B.src=""}return B}}v()}return B},P=(g,i,a,n,L)=>{const b=new FileReader,k={onCompleteObservable:new d.b,abort:()=>b.abort()};return b.onloadend=()=>k.onCompleteObservable.notifyObservers(k),L&&(b.onerror=()=>{L(new R(`Unable to read ${g.name}`,g))}),b.onload=g=>{i(g.target.result)},a&&(b.onprogress=a),n?b.readAsArrayBuffer(g):b.readAsText(g),k},Y=(g,i,a,n,L,e,N)=>{if(g.name)return P(g,i,a,L,e?g=>{e(void 0,g)}:void 0);const F=g;if(-1!==F.indexOf("file:")){let g=decodeURIComponent(F.substring(5).toLowerCase());0===g.indexOf("./")&&(g=g.substring(2));const n=b.FilesToLoad[g];if(n)return P(n,i,a,L,e?g=>e(void 0,new D(g.message,g.file)):void 0)}const{match:y,type:B}=V(F);if(y){const g={onCompleteObservable:new d.b,abort:()=>()=>{}};try{const g=L?K(F):T(F);i(g,void 0,B)}catch(k){e?e(void 0,k):I.b.Error(k.message||"Failed to parse the Data URL")}return j.c.SetImmediate((()=>{g.onCompleteObservable.notifyObservers(g)})),g}return f(F,((g,a)=>{i(g,null===a||void 0===a?void 0:a.responseURL,null===a||void 0===a?void 0:a.getResponseHeader("content-type"))}),a,n,L,e?g=>{e(g.request,new D(g.message,g.request))}:void 0,N)},f=(g,i,a,b,k,e,N)=>{g=x.CleanUrl(g),g=x.PreprocessUrl(g);const F=x.BaseUrl+g;let j=!1;const y={onCompleteObservable:new d.b,abort:()=>j=!0},B=()=>{let g,d=new n.d,b=null;const B=()=>{d&&(a&&d.removeEventListener("progress",a),g&&d.removeEventListener("readystatechange",g),d.removeEventListener("loadend",c))};let c=()=>{B(),y.onCompleteObservable.notifyObservers(y),y.onCompleteObservable.clear(),a=void 0,g=null,c=null,e=void 0,N=void 0,i=void 0};y.abort=()=>{j=!0,c&&c(),d&&d.readyState!==(XMLHttpRequest.DONE||4)&&d.abort(),null!==b&&(clearTimeout(b),b=null),d=null};const D=g=>{const i=g.message||"Unknown error";e&&d?e(new p(i,d)):I.b.Error(i)},R=I=>{if(d){if(d.open("GET",F),N)try{N(d)}catch(y){return void D(y)}k&&(d.responseType="arraybuffer"),a&&d.addEventListener("progress",a),c&&d.addEventListener("loadend",c),g=()=>{if(!j&&d&&d.readyState===(XMLHttpRequest.DONE||4)){if(g&&d.removeEventListener("readystatechange",g),d.status>=200&&d.status<300||0===d.status&&(!(0,L.k)()||U())){const g=k?d.response:d.responseText;if(null!==g){try{i&&i(g,d)}catch(y){D(y)}return}}const a=x.DefaultRetryStrategy;if(a){const g=a(F,d,I);if(-1!==g)return B(),d=new n.d,void(b=setTimeout((()=>R(I+1)),g))}const N=new p("Error status: "+d.status+" "+d.statusText+" - Unable to load "+F,d);e&&e(N)}},d.addEventListener("readystatechange",g),d.send()}};R(0)};if(b&&b.enableSceneOffline){const n=g=>{g&&g.status>400?e&&e(g):B()},L=()=>{b&&b.loadFile(x.BaseUrl+g,(g=>{!j&&i&&i(g),y.onCompleteObservable.notifyObservers(y)}),a?g=>{!j&&a&&a(g)}:void 0,n,k)};b.open(L,n)}else B();return y},C=g=>{const{match:i,type:a}=V(g);if(i)return a||void 0;const n=g.lastIndexOf(".");switch(g.substring(n+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Dd":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},U=()=>"undefined"!==typeof location&&"file:"===location.protocol,S=g=>c.test(g),V=g=>{const i=c.exec(g);if(null===i||0===i.length)return{match:!1,type:""};return{match:!0,type:i[0].replace("data:","").replace("base64,","")}};function K(g){return(0,e.d)(g.split(",")[1])}const T=g=>(0,e.e)(g.split(",")[1]);let l;B.d._FileToolsLoadImage=v,y.d.loadFile=Y,N.m.loadFile=Y;((g,i,a,n,L,d,b,k,e,N)=>{l={DecodeBase64UrlToBinary:g,DecodeBase64UrlToString:i,DefaultRetryStrategy:a.DefaultRetryStrategy,BaseUrl:a.BaseUrl,CorsBehavior:a.CorsBehavior,PreprocessUrl:a.PreprocessUrl,IsBase64DataUrl:n,IsFileURL:L,LoadFile:d,LoadImage:b,ReadFile:k,RequestFile:e,SetCorsBehavior:N},Object.defineProperty(l,"DefaultRetryStrategy",{get:function(){return a.DefaultRetryStrategy},set:function(g){a.DefaultRetryStrategy=g}}),Object.defineProperty(l,"BaseUrl",{get:function(){return a.BaseUrl},set:function(g){a.BaseUrl=g}}),Object.defineProperty(l,"PreprocessUrl",{get:function(){return a.PreprocessUrl},set:function(g){a.PreprocessUrl=g}}),Object.defineProperty(l,"CorsBehavior",{get:function(){return a.CorsBehavior},set:function(g){a.CorsBehavior=g}})})(K,T,x,S,U,Y,v,P,f,E)},12422:(g,i,a)=>{function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(g=>{const i=16*Math.random()|0;return("x"===g?i:3&i|8).toString(16)}))}a.d(i,{d:()=>n})},12408:(g,i,a)=>{a.d(i,{b:()=>d});var n=a(12292),L=a(12415);class d{static Instantiate(g){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[g])return this.RegisteredExternalClasses[g];const i=(0,L.d)(g);if(i)return i;n.b.Warn(g+" not found, you may have missed an import.");const a=g.split(".");let d=window||this;for(let n=0,L=a.length;n<L;n++)d=d[a[n]];return"function"!==typeof d?null:d}}d.RegisteredExternalClasses={}},12301:(g,i,a)=>{a.d(i,{c:()=>L});var n=a(12289);class L{static get Now(){return(0,n.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12334:(g,i,a)=>{a.d(i,{d:()=>b,e:()=>d,g:()=>n,j:()=>L});const n=g=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(g);let i="";for(let a=0;a<g.byteLength;a++)i+=String.fromCharCode(g[a]);return i},L=g=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let a,n,L,d,b,k,e,N="",F=0;const I=ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g);for(;F<I.length;)a=I[F++],n=F<I.length?I[F++]:Number.NaN,L=F<I.length?I[F++]:Number.NaN,d=a>>2,b=(3&a)<<4|n>>4,k=(15&n)<<2|L>>6,e=63&L,isNaN(n)?k=e=64:isNaN(L)&&(e=64),N+=i.charAt(d)+i.charAt(b)+i.charAt(k)+i.charAt(e);return N},d=g=>atob(g),b=g=>{const i=d(g),a=i.length,n=new Uint8Array(new ArrayBuffer(a));for(let L=0;L<a;L++)n[L]=i.charCodeAt(L);return n.buffer}},12426:(g,i,a)=>{function n(g){let i=1;do{i*=2}while(i<g);return i===g}function L(g,i,a){return g*(1-a)+i*a}function d(g){const i=b(g),a=k(g);return i-g>g-a?a:i}function b(g){return g--,g|=g>>1,g|=g>>2,g|=g>>4,g|=g>>8,g|=g>>16,++g}function k(g){return g|=g>>1,g|=g>>2,g|=g>>4,g|=g>>8,(g|=g>>16)-(g>>1)}function e(g,i){let a;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:a=k(g);break;case 2:a=d(g);break;default:a=b(g)}return Math.min(a,i)}a.d(i,{c:()=>k,d:()=>e,f:()=>n,h:()=>L,i:()=>d})},12277:(g,i,a)=>{a.r(i),a.d(i,{AsyncLoop:()=>R,Tools:()=>D,className:()=>p});var n=a(12286),L=a(12289),d=a(12292),b=a(12296),k=a(12301),e=a(12303),N=a(12308),F=a(12316),I=a(12324),j=a(12352),y=a(12408),B=a(12422),c=a(12426);class D{static get BaseUrl(){return I.e.BaseUrl}static set BaseUrl(g){I.e.BaseUrl=g}static get CleanUrl(){return I.e.CleanUrl}static set CleanUrl(g){I.e.CleanUrl=g}static IsAbsoluteUrl(g){return 0===g.indexOf("//")||-1!==g.indexOf("://")&&(-1!==g.indexOf(".")&&(-1!==g.indexOf("/")&&(!(g.indexOf(":")>g.indexOf("/"))&&(g.indexOf("://")<g.indexOf(".")||(0===g.indexOf("data:")||0===g.indexOf("blob:"))))))}static set ScriptBaseUrl(g){I.e.ScriptBaseUrl=g}static get ScriptBaseUrl(){return I.e.ScriptBaseUrl}static set CDNBaseUrl(g){D.ScriptBaseUrl=g,D.AssetBaseUrl=g}static set ScriptPreprocessUrl(g){I.e.ScriptPreprocessUrl=g}static get ScriptPreprocessUrl(){return I.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return I.e.DefaultRetryStrategy}static set DefaultRetryStrategy(g){I.e.DefaultRetryStrategy=g}static get CorsBehavior(){return I.e.CorsBehavior}static set CorsBehavior(g){I.e.CorsBehavior=g}static get UseFallbackTexture(){return F.c.UseFallbackTexture}static set UseFallbackTexture(g){F.c.UseFallbackTexture=g}static get RegisteredExternalClasses(){return y.b.RegisteredExternalClasses}static set RegisteredExternalClasses(g){y.b.RegisteredExternalClasses=g}static get fallbackTexture(){return F.c.FallbackTexture}static set fallbackTexture(g){F.c.FallbackTexture=g}static FetchToRef(g,i,a,n,L,d){const b=4*((Math.abs(g)*a%a|0)+(Math.abs(i)*n%n|0)*a);d.r=L[b]/255,d.g=L[b+1]/255,d.b=L[b+2]/255,d.a=L[b+3]/255}static Mix(g,i,a){return 0}static Instantiate(g){return y.b.Instantiate(g)}static SetImmediate(g){j.c.SetImmediate(g)}static IsExponentOfTwo(g){return!0}static FloatRound(g){return Math.fround(g)}static GetFilename(g){const i=g.lastIndexOf("/");return i<0?g:g.substring(i+1)}static GetFolderPath(g){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=g.lastIndexOf("/");return a<0?i?g:"":g.substring(0,a+1)}static ToDegrees(g){return 180*g/Math.PI}static ToRadians(g){return g*Math.PI/180}static SmoothAngleChange(g,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const n=this.ToRadians(g),L=this.ToRadians(i);return this.ToDegrees(Math.atan2((1-a)*Math.sin(L)+a*Math.sin(n),(1-a)*Math.cos(L)+a*Math.cos(n)))}static MakeArray(g,i){return!0===i||void 0!==g&&null!=g?Array.isArray(g)?g:[g]:null}static GetPointerPrefix(g){return(0,L.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(g,i){(0,I.r)(g,i)}static SetReferrerPolicyBehavior(g,i){i.referrerPolicy=g}static get PreprocessUrl(){return I.e.PreprocessUrl}static set PreprocessUrl(g){I.e.PreprocessUrl=g}static LoadImage(g,i,a,n,L,d){return(0,I.m)(g,i,a,n,L,d)}static LoadFile(g,i,a,n,L,d){return(0,I.l)(g,i,a,n,L,d)}static async LoadFileAsync(g){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((a,n)=>{(0,I.l)(g,(g=>{a(g)}),void 0,void 0,i,((g,i)=>{n(i)}))}))}static GetAssetUrl(g){if(!g)return"";if(D.AssetBaseUrl&&g.startsWith(D._DefaultAssetsUrl)){const i="/"===D.AssetBaseUrl[D.AssetBaseUrl.length-1]?D.AssetBaseUrl.substring(0,D.AssetBaseUrl.length-1):D.AssetBaseUrl;return g.replace(D._DefaultAssetsUrl,i)}return g}static GetBabylonScriptURL(g,i){if(!g)return"";if(D.ScriptBaseUrl&&g.startsWith(D._DefaultCdnUrl)){const i="/"===D.ScriptBaseUrl[D.ScriptBaseUrl.length-1]?D.ScriptBaseUrl.substring(0,D.ScriptBaseUrl.length-1):D.ScriptBaseUrl;g=g.replace(D._DefaultCdnUrl,i)}return g=D.ScriptPreprocessUrl(g),i&&(g=D.GetAbsoluteUrl(g)),g}static LoadBabylonScript(g,i,a,n){g=D.GetBabylonScriptURL(g),D.LoadScript(g,i,a)}static async LoadBabylonScriptAsync(g){return g=D.GetBabylonScriptURL(g),await D.LoadScriptAsync(g)}static LoadScript(g,i,a,n){let d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(g),i&&i()}catch(e){null===a||void 0===a||a(`Unable to load script '${g}' in worker`,e)}return}if(!(0,L.k)())return void(null===a||void 0===a||a(`Cannot load script '${g}' outside of a window or a worker`));const b=document.getElementsByTagName("head")[0],k=document.createElement("script");d?(k.setAttribute("type","module"),k.innerText=g):(k.setAttribute("type","text/javascript"),k.setAttribute("src",g)),n&&(k.id=n),k.onload=()=>{i&&i()},k.onerror=i=>{a&&a(`Unable to load script '${g}'`,i)},b.appendChild(k)}static async LoadScriptAsync(g,i){return await new Promise(((a,n)=>{this.LoadScript(g,(()=>{a()}),((g,i)=>{n(i||new Error(g))}),i)}))}static ReadFileAsDataURL(g,i,a){const L=new FileReader,d={onCompleteObservable:new n.b,abort:()=>L.abort()};return L.onloadend=()=>{d.onCompleteObservable.notifyObservers(d)},L.onload=g=>{i(g.target.result)},L.onprogress=a,L.readAsDataURL(g),d}static ReadFile(g,i,a,n,L){return(0,I.n)(g,i,a,n,L)}static FileAsURL(g){const i=new Blob([g]);return window.URL.createObjectURL(i)}static Format(g){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return g.toFixed(i)}static DeepCopy(g,i,a,n){b.c.DeepCopy(g,i,a,n)}static IsEmpty(g){for(const i in g)if(Object.prototype.hasOwnProperty.call(g,i))return!1;return!0}static RegisterTopRootEvents(g,i){for(let n=0;n<i.length;n++){const L=i[n];g.addEventListener(L.name,L.handler,!1);try{window.parent&&window.parent.addEventListener(L.name,L.handler,!1)}catch(a){}}}static UnregisterTopRootEvents(g,i){for(let n=0;n<i.length;n++){const L=i[n];g.removeEventListener(L.name,L.handler);try{g.parent&&g.parent.removeEventListener(L.name,L.handler)}catch(a){}}}static async DumpFramebuffer(g,i,a,n){throw(0,e.b)("DumpTools")}static DumpData(g,i,a,n){throw(0,e.b)("DumpTools")}static async DumpDataAsync(g,i,a){throw(0,e.b)("DumpTools")}static _IsOffScreenCanvas(g){return void 0!==g.convertToBlob}static ToBlob(g,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=arguments.length>3?arguments[3]:void 0;D._IsOffScreenCanvas(g)||g.toBlob||(g.toBlob=function(g,i,a){setTimeout((()=>{const n=atob(this.toDataURL(i,a).split(",")[1]),L=n.length,d=new Uint8Array(L);for(let g=0;g<L;g++)d[g]=n.charCodeAt(g);g(new Blob([d]))}))}),D._IsOffScreenCanvas(g)?g.convertToBlob({type:a,quality:n}).then((g=>i(g))):g.toBlob((function(g){i(g)}),a,n)}static DownloadBlob(g,i){if("download"in document.createElement("a")){if(!i){const g=new Date;i="screenshot_"+((g.getFullYear()+"-"+(g.getMonth()+1)).slice(2)+"-"+g.getDate()+"_"+g.getHours()+"-"+("0"+g.getMinutes()).slice(-2))+".png"}D.Download(g,i)}else if(g&&"undefined"!==typeof URL){const i=URL.createObjectURL(g),a=window.open("");if(!a)return;const n=a.document.createElement("img");n.onload=function(){URL.revokeObjectURL(i)},n.src=i,a.document.body.appendChild(n)}}static EncodeScreenshotCanvasData(g,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=arguments.length>3?arguments[3]:void 0,L=arguments.length>4?arguments[4]:void 0;if("string"!==typeof n&&i){if(i){if(D._IsOffScreenCanvas(g))return void g.convertToBlob({type:a,quality:L}).then((g=>{const a=new FileReader;a.readAsDataURL(g),a.onloadend=()=>{const g=a.result;i(g)}}));const n=g.toDataURL(a,L);i(n)}}else this.ToBlob(g,(function(g){g&&D.DownloadBlob(g,n),i&&i("")}),a,L)}static Download(g,i){if("undefined"===typeof URL)return;const a=window.URL.createObjectURL(g),n=document.createElement("a");document.body.appendChild(n),n.style.display="none",n.href=a,n.download=i,n.addEventListener("click",(()=>{n.parentElement&&n.parentElement.removeChild(n)})),n.click(),window.URL.revokeObjectURL(a)}static BackCompatCameraNoPreventDefault(g){return"boolean"===typeof g[0]?g[0]:"boolean"===typeof g[1]&&g[1]}static CreateScreenshot(g,i,a,n){throw(0,e.b)("ScreenshotTools")}static async CreateScreenshotAsync(g,i,a){throw(0,e.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(g,i,a,n){throw(0,e.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(g,i,a){throw(0,e.b)("ScreenshotTools")}static RandomId(){return(0,B.d)()}static IsBase64(g){return(0,I.i)(g)}static DecodeBase64(g){return(0,I.d)(g)}static get errorsCount(){return d.b.errorsCount}static Log(g){d.b.Log(g)}static Warn(g){d.b.Warn(g)}static Error(g){d.b.Error(g)}static get LogCache(){return d.b.LogCache}static ClearLogCache(){d.b.ClearLogCache()}static set LogLevels(g){d.b.LogLevels=g}static set PerformanceLogLevel(g){return(g&D.PerformanceUserMarkLogLevel)===D.PerformanceUserMarkLogLevel?(D.StartPerformanceCounter=D._StartUserMark,void(D.EndPerformanceCounter=D._EndUserMark)):(g&D.PerformanceConsoleLogLevel)===D.PerformanceConsoleLogLevel?(D.StartPerformanceCounter=D._StartPerformanceConsole,void(D.EndPerformanceCounter=D._EndPerformanceConsole)):(D.StartPerformanceCounter=D._StartPerformanceCounterDisabled,void(D.EndPerformanceCounter=D._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(g,i){}static _EndPerformanceCounterDisabled(g,i){}static _StartUserMark(g){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!D._Performance){if(!(0,L.k)())return;D._Performance=window.performance}i&&D._Performance.mark&&D._Performance.mark(g+"-Begin")}static _EndUserMark(g){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&D._Performance.mark&&(D._Performance.mark(g+"-End"),D._Performance.measure(g,g+"-Begin",g+"-End"))}static _StartPerformanceConsole(g){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i&&(D._StartUserMark(g,i),console.time&&console.time(g))}static _EndPerformanceConsole(g){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];i&&(D._EndUserMark(g,i),console.timeEnd(g))}static get Now(){return k.c.Now}static GetClassName(g){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null;if(!i&&g.getClassName)a=g.getClassName();else{if(g instanceof Object){a=(i?g:Object.getPrototypeOf(g)).constructor.__bjsclassName__}a||(a=typeof g)}return a}static First(g,i){for(const a of g)if(i(a))return a;return null}static getFullClassName(g){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null,n=null;if(!i&&g.getClassName)a=g.getClassName();else{if(g instanceof Object){const L=i?g:Object.getPrototypeOf(g);a=L.constructor.__bjsclassName__,n=L.constructor.__bjsmoduleName__}a||(a=typeof g)}return a?(null!=n?n+".":"")+a:null}static async DelayAsync(g){await new Promise((i=>{setTimeout((()=>{i()}),g)}))}static IsSafari(){return!!(0,L.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function p(g,i){return a=>{a.__bjsclassName__=g,a.__bjsmoduleName__=null!=i?i:null}}D.AssetBaseUrl="",D.UseCustomRequestHeaders=!1,D.CustomRequestHeaders=N.d.CustomRequestHeaders,D.GetDOMTextContent=L.b,D._DefaultCdnUrl="https://cdn.babylonjs.com",D._DefaultAssetsUrl="https://assets.babylonjs.com/core",D.GetAbsoluteUrl="object"===typeof document?g=>{const i=document.createElement("a");return i.href=g,i.href}:"function"===typeof URL&&"object"===typeof location?g=>new URL(g,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},D.NoneLogLevel=d.b.NoneLogLevel,D.MessageLogLevel=d.b.MessageLogLevel,D.WarningLogLevel=d.b.WarningLogLevel,D.ErrorLogLevel=d.b.ErrorLogLevel,D.AllLogLevel=d.b.AllLogLevel,D.IsWindowObjectExist=L.k,D.PerformanceNoneLogLevel=0,D.PerformanceUserMarkLogLevel=1,D.PerformanceConsoleLogLevel=2,D.StartPerformanceCounter=D._StartPerformanceCounterDisabled,D.EndPerformanceCounter=D._EndPerformanceCounterDisabled;class R{constructor(g,i,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=g,this.index=n-1,this._done=!1,this._fn=i,this._successCallback=a}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(g,i,a){const n=new R(g,i,a,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return n.executeNext(),n}static SyncAsyncForLoop(g,i,a,n,L){let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return R.Run(Math.ceil(g/i),(n=>{L&&L()?n.breakLoop():setTimeout((()=>{for(let d=0;d<i;++d){const b=n.index*i+d;if(b>=g)break;if(a(b),L&&L()){n.breakLoop();break}}n.executeNext()}),d)}),n)}}D.Mix=c.h,D.IsExponentOfTwo=c.f,F.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12415:(g,i,a)=>{a.d(i,{d:()=>d,e:()=>L});const n={};function L(g,i){n[g]=i}function d(g){return n[g]}},12308:(g,i,a)=>{a.d(i,{d:()=>n});class n{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(n.CustomRequestHeaders).length>0||n.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const g in n.CustomRequestHeaders){const i=n.CustomRequestHeaders[g];i&&this._xhr.setRequestHeader(g,i)}}_shouldSkipRequestModifications(g){return n.SkipRequestModificationForBabylonCDN&&(g.includes("preview.babylonjs.com")||g.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(g){this._xhr.onprogress=g}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(g){this._xhr.responseType=g}get timeout(){return this._xhr.timeout}set timeout(g){this._xhr.timeout=g}addEventListener(g,i,a){this._xhr.addEventListener(g,i,a)}removeEventListener(g,i,a){this._xhr.removeEventListener(g,i,a)}abort(){this._xhr.abort()}send(g){n.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(g)}open(g,i){for(const a of n.CustomRequestModifiers){if(this._shouldSkipRequestModifications(i))return;i=a(this._xhr,i)||i}i=(i=i.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=i,this._xhr.open(g,i,!0)}setRequestHeader(g,i){this._xhr.setRequestHeader(g,i)}getResponseHeader(g){return this._xhr.getResponseHeader(g)}}n.CustomRequestHeaders={},n.CustomRequestModifiers=new Array,n.SkipRequestModificationForBabylonCDN=!0}}]);