"use strict";(self.h66iwo8dvgq=self.h66iwo8dvgq||[]).push([[8],{11760:(b,X,P)=>{P.d(X,{c:()=>n});var Q=P(11732),S=P(11700),d=P(11762),N=P(11784),a=P(11713);class u{constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,b&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(b){this._zOffset!==b&&(this._zOffset=b,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(b){this._zOffsetUnits!==b&&(this._zOffsetUnits=b,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(b){this._cullFace!==b&&(this._cullFace=b,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(b){this._cull!==b&&(this._cull=b,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(b){this._depthFunc!==b&&(this._depthFunc=b,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(b){this._depthMask!==b&&(this._depthMask=b,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(b){this._depthTest!==b&&(this._depthTest=b,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(b){this._frontFace!==b&&(this._frontFace=b,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(b){this.isDirty&&(this._isCullDirty&&(this.cull?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(b.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(b.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(b.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(b.enable(b.POLYGON_OFFSET_FILL),b.polygonOffset(this.zOffset,this.zOffsetUnits)):b.disable(b.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(b.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class w{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(b){this._func!==b&&(this._func=b,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(b){this._funcRef!==b&&(this._funcRef=b,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(b){this._funcMask!==b&&(this._funcMask=b,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(b){this._opStencilFail!==b&&(this._opStencilFail=b,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(b){this._opDepthFail!==b&&(this._opDepthFail=b,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(b){this._opStencilDepthPass!==b&&(this._opStencilDepthPass=b,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(b){this._mask!==b&&(this._mask=b,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(b){this._enabled!==b&&(this._enabled=b,this._isStencilTestDirty=!0)}constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,b&&this.reset()}reset(){var b;this.stencilMaterial=void 0,null===(b=this.stencilGlobal)||void 0===b||b.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(b){var X;if(!b)return;const P=!this.useStencilGlobalOnly&&!(null===(X=this.stencilMaterial)||void 0===X||!X.enabled);this.enabled=P?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=P?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=P?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=P?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=P?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=P?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=P?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=P?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(b.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(b.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(b.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class f{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=f.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=f.KEEP,this.opDepthFail=f.KEEP,this.opStencilDepthPass=f.REPLACE}get stencilFunc(){return this.func}set stencilFunc(b){this.func=b}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(b){this.funcRef=b}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(b){this.funcMask=b}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(b){this.opStencilFail=b}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(b){this.opDepthFail=b}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(b){this.opStencilDepthPass=b}get stencilMask(){return this.mask}set stencilMask(b){this.mask=b}get stencilTest(){return this.enabled}set stencilTest(b){this.enabled=b}}f.ALWAYS=519,f.KEEP=7680,f.REPLACE=7681;class O{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(b){this._alphaBlend!==b&&(this._alphaBlend=b,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(b,X,P,Q){this._blendConstants[0]===b&&this._blendConstants[1]===X&&this._blendConstants[2]===P&&this._blendConstants[3]===Q||(this._blendConstants[0]=b,this._blendConstants[1]=X,this._blendConstants[2]=P,this._blendConstants[3]=Q,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(b,X,P,Q){this._blendFunctionParameters[0]===b&&this._blendFunctionParameters[1]===X&&this._blendFunctionParameters[2]===P&&this._blendFunctionParameters[3]===Q||(this._blendFunctionParameters[0]=b,this._blendFunctionParameters[1]=X,this._blendFunctionParameters[2]=P,this._blendFunctionParameters[3]=Q,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(b,X){this._blendEquationParameters[0]===b&&this._blendEquationParameters[1]===X||(this._blendEquationParameters[0]=b,this._blendEquationParameters[1]=X,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(b){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?b.enable(b.BLEND):b.disable(b.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(b.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(b.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(b.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var e=P(11719),Y=P(11787),D=P(11696),E=P(11694),t=P(11752),B=P(11792);function W(b,X){if((0,D.o)()){const{requestAnimationFrame:P}=X||window;if("function"===typeof P)return P(b)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(b);return setTimeout(b,16)}class n{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(b){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(b){b!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=b,this._depthCullingState.depthFunc=b?518:515)}setColorWrite(b){b!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=b)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(b){if(b)return this.isNDCHalfZRange?b.IS_NDC_HALF_ZRANGE="":delete b.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?b.USE_REVERSE_DEPTHBUFFER="":delete b.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?b.USE_EXACT_SRGB_CONVERSIONS="":delete b.USE_EXACT_SRGB_CONVERSIONS);{let b="";return this.isNDCHalfZRange&&(b+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(b&&(b+="\n"),b+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(b&&(b+="\n"),b+="#define USE_EXACT_SRGB_CONVERSIONS"),b}}_rebuildInternalTextures(){const b=this._internalTexturesCache.slice();for(const X of b)X._rebuild()}_rebuildRenderTargetWrappers(){const b=this._renderTargetWrapperCache.slice();for(const X of b)X._rebuild()}_rebuildEffects(){for(const b in this._compiledEffects){const X=this._compiledEffects[b];X._pipelineContext=null,X._prepareEffect()}d.Effect.ResetCache()}_rebuildGraphicsResources(){var b;this.wipeCaches(!0),this._rebuildEffects(),null===(b=this._rebuildComputeEffects)||void 0===b||b.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){S.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(b){setTimeout((()=>{this._clearEmptyResources();const X=this._depthCullingState.depthTest,P=this._depthCullingState.depthFunc,Q=this._depthCullingState.depthMask,S=this._stencilState.stencilTest;b(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=X,this._depthCullingState.depthFunc=P,this._depthCullingState.depthMask=Q,this._stencilState.stencilTest=S,this._flagContextRestored()}),0)}get Y(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(b){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(b){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const b=new Uint8Array(4),X=[b,b,b,b,b,b];this._emptyCubeTexture=this.createRawCubeTexture(X,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(b){if(!b)return this._activeRenderLoops.length=0,void this._cancelFrame();const X=this._activeRenderLoops.indexOf(b);X>=0&&(this._activeRenderLoops.splice(X,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const b=this._frameHandler;if(this._frameHandler=0,(0,D.o)()){const{cancelAnimationFrame:X}=this.getHostWindow()||window;if("function"===typeof X)return X(b)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(b);return clearTimeout(b)}}Qd(){this.onBeginFrameObservable.notifyObservers(this)}dd(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(b){this._maxFPS=b,void 0!==b&&(this._minFrameTime=b<=0?Number.MAX_VALUE:1e3/b)}_isOverFrameTime(b){if(!b||void 0===this._maxFPS)return!1;const X=b-this._lastFrameTime;return this._lastFrameTime=b,this._renderAccumulator+=X,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(b){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(b)){let b=!0;(this.Y||!this.renderEvenInBackground&&this._windowIsBackground)&&(b=!1),b&&(this.Qd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.dd())}}_renderLoop(b){this._processFrame(b),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let b=0;b<this._activeRenderLoops.length;b++){(0,this._activeRenderLoops[b])()}}_renderViews(){return!1}_queueNewFrame(b,X){return W(b,X)}runRenderLoop(b){-1===this._activeRenderLoops.indexOf(b)&&(this._activeRenderLoops.push(b),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(b){this._depthCullingState.depthTest=b}setZOffset(b){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-b:b}getZOffset(){const b=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-b:b}setZOffsetUnits(b){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-b:b}getZOffsetUnits(){const b=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-b:b}getHostWindow(){return(0,D.o)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(b){this._compatibilityMode=!0}_rebuildTextures(){for(const b of this.scenes)b._rebuildTextures();for(const b of this._virtualScenes)b._rebuildTextures()}_releaseRenderTargetWrapper(b){const X=this._renderTargetWrapperCache.indexOf(b);-1!==X&&this._renderTargetWrapperCache.splice(X,1)}get currentViewport(){return this._cachedViewport}setViewport(b,X,P){const Q=X||this.getRenderWidth(),S=P||this.getRenderHeight(),d=b.x||0,N=b.y||0;this._cachedViewport=b,this._viewport(d*Q,N*S,Q*b.width,S*b.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(b){return new Path2D(b)}get description(){let b=this.name+this.version;return this._caps.parallelShaderCompile&&(b+=" - Parallel shader compilation"),b}_createTextureBase(b,X,P,d){let N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,w=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,e=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,D=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,t=arguments.length>13?arguments[13]:void 0,W=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0;const h="data:"===(b=b||"").substring(0,5),L="blob:"===b.substring(0,5),Z=h&&-1!==b.indexOf(";base64,"),v=e||new Y.e(this,1);v!==e&&(v.label=b.substring(0,60));const A=b;!this._transformTextureUrl||Z||e||O||(b=this._transformTextureUrl(b)),A!==b&&(v._originalUrl=A);const o=b.lastIndexOf(".");let K=E||(o>-1?b.substring(o).toLowerCase():"");K.indexOf("?")>-1&&(K=K.split("?")[0]);const T=(0,B.e)(K,t);d&&d.addPendingData(v),v.url=b,v.generateMipMaps=!X,v.samplingMode=N,v.invertY=P,v._useSRGBBuffer=this._getUseSRGBBuffer(!!y,X),this._doNotHandleContextLost||(v._buffer=O);let q=null;a&&!e&&(q=v.onLoadedObservable.add(a)),e||this._internalTexturesCache.push(v);const V=(P,e)=>{d&&d.removePendingData(v),b===A?(q&&v.onLoadedObservable.remove(q),Q.e.UseFallbackTexture&&b!==Q.e.FallbackTexture&&this._createTextureBase(Q.e.FallbackTexture,X,v.invertY,d,N,null,u,w,f,O,v),P=(P||"Unknown error")+(Q.e.UseFallbackTexture?" - Fallback texture was used":""),v.onErrorObservable.notifyObservers({message:P,exception:e}),u&&u(P,e)):(S.b.Warn(`Failed to load ${b}, falling back to ${A}`),this._createTextureBase(A,X,v.invertY,d,N,a,u,w,f,O,v,D,E,t,W,y))};if(T){const X=async b=>{(await T).loadData(b,v,((b,X,P,Q,S,a)=>{a?V("TextureLoader failed to load data"):w(v,K,d,{width:b,height:X},v.invertY,!P,Q,(()=>(S(),!1)),N)}),W)};O?O instanceof ArrayBuffer?X(new Uint8Array(O)):ArrayBuffer.isView(O)?X(O):u&&u("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(b,(b=>{X(new Uint8Array(b))}),void 0,d?d.offlineProvider:void 0,!0,((b,X)=>{V("Unable to load "+(b&&b.responseURL,X))}))}else{const P=b=>{L&&!this._doNotHandleContextLost&&(v._buffer=b),w(v,K,d,b,v.invertY,X,!1,f,N)};!h||Z?O&&("string"===typeof O.decoding||O.close)?P(O):n._FileToolsLoadImage(b||"",P,V,d?d.offlineProvider:null,t,v.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof O||O instanceof ArrayBuffer||ArrayBuffer.isView(O)||O instanceof Blob?n._FileToolsLoadImage(O,P,V,d?d.offlineProvider:null,t,v.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):O&&P(O)}return v}_rebuildBuffers(){for(const b of this._uniformBuffers)b._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,D.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const b in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,b)&&(this._boundTexturesCache[b]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(b){this._name=b}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(b){this._hardwareScalingLevel=b,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(b){this._doNotHandleContextLost=b}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(b,X,P){var S,d;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new u,this._stencilStateComposer=new w,this._stencilState=new f,this._alphaState=new O,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.d,this.onCanvasFocusObservable=new E.d,this.onNewSceneAddedObservable=new E.d,this.onResizeObservable=new E.d,this.onCanvasPointerOutObservable=new E.d,this.onEffectErrorObservable=new E.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=b=>this._renderLoop(b),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.d,this.onAfterShaderCompilationObservable=new E.d,this.onBeginFrameObservable=new E.d,this.onEndFrameObservable=new E.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.d,this.onContextRestoredObservable=new E.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Nd=new E.d,this.onReleaseEffectsObservable=new E.d,Q.e.Instances.push(this),this.startTime=a.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,N.e.SetMatrixPrecision(!!X.useHighPrecisionMatrix),(0,D.k)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=P??!1,X.antialias=b??X.antialias,X.deterministicLockstep=X.deterministicLockstep??!1,X.lockstepMaxSteps=X.lockstepMaxSteps??4,X.timeStep=X.timeStep??1/60,X.stencil=X.stencil??!0,this._audioContext=(null===(S=X.audioEngineOptions)||void 0===S?void 0:S.audioContext)??null,this._audioDestination=(null===(d=X.audioEngineOptions)||void 0===d?void 0:d.audioDestination)??null,this.premultipliedAlpha=X.premultipliedAlpha??!0,this._doNotHandleContextLost=!!X.doNotHandleContextLost,this._isStencilEnable=!!X.stencil,this.useExactSrgbConversions=X.useExactSrgbConversions??!1;const e=(0,D.o)()&&window.devicePixelRatio||1,Y=X.limitDeviceRatio||e;P=P||X.adaptToDeviceRatio||!1,this._hardwareScalingLevel=P?1/Math.min(Y,e):1,this._lastDevicePixelRatio=e,this._creationOptions=X}resize(){let b,X,P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const b=(0,D.o)()&&window.devicePixelRatio||1,X=this._lastDevicePixelRatio/b;this._lastDevicePixelRatio=b,this._hardwareScalingLevel*=X}if((0,D.o)()&&(0,D.g)())if(this._renderingCanvas){var Q,S;const P=null===(Q=(S=this._renderingCanvas).getBoundingClientRect)||void 0===Q?void 0:Q.call(S);b=this._renderingCanvas.clientWidth||(null===P||void 0===P?void 0:P.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,X=this._renderingCanvas.clientHeight||(null===P||void 0===P?void 0:P.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else b=window.innerWidth,X=window.innerHeight;else b=this._renderingCanvas?this._renderingCanvas.width:100,X=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(b/this._hardwareScalingLevel,X/this._hardwareScalingLevel,P)}setSize(b,X){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(b|=0,X|=0,!P&&this._renderingCanvas.width===b&&this._renderingCanvas.height===X)return!1;if(this._renderingCanvas.width=b,this._renderingCanvas.height=X,this.scenes){for(let b=0;b<this.scenes.length;b++){const X=this.scenes[b];for(let b=0;b<X.cameras.length;b++){X.cameras[b]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(b,X,P,Q,S,d,N,a,u,w,f){throw(0,e.b)("engine.rawTexture")}createRawCubeTexture(b,X,P,Q,S,d,N,a){throw(0,e.b)("engine.rawTexture")}createRawTexture3D(b,X,P,Q,S,d,N,a,u,w,f){throw(0,e.b)("engine.rawTexture")}createRawTexture2DArray(b,X,P,Q,S,d,N,a,u,w,f){throw(0,e.b)("engine.rawTexture")}_sharedInit(b){this._renderingCanvas=b}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const b=navigator.userAgent;this.hostInformation.isMobile=-1!==b.indexOf("Mobile")||-1!==b.indexOf("Mac")&&(0,D.g)()&&"ontouchend"in document},this._checkForMobile(),(0,D.o)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(b){return document.createElement("video")}_reportDrawCall(){var b;let X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(b=this._drawCalls)||void 0===b||b.addCount(X,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(b,X){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(b,X){return createImageBitmap(b,X)}resizeImageBitmap(b,X,P){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(b){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(b,X){if("undefined"===typeof document)return new OffscreenCanvas(b,X);const P=document.createElement("canvas");return P.width=b,P.height=X,P}createCanvas(b,X){return n._CreateCanvas(b,X)}static _FileToolsLoadImage(b,X,P,Q,S,d,N){throw(0,e.b)("FileTools")}_loadFile(b,X,P,Q,S,d){const N=(0,t.i)(b,X,P,Q,S,d);return this._activeRequests.push(N),N.onCompleteObservable.add((()=>{const b=this._activeRequests.indexOf(N);-1!==b&&this._activeRequests.splice(b,1)})),N}static _FileToolsLoadFile(b,X,P,Q,S,d){if(t.e.loadFile)return t.e.loadFile(b,X,P,Q,S,d);throw(0,e.b)("FileTools")}dispose(){var b;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(b=this.releaseComputeEffects)||void 0===b||b.call(this),d.Effect.ResetCache();for(const P of this._activeRequests)P.abort();this._boundRenderFunction=null,this.Nd.notifyObservers(this),this.Nd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,D.o)()&&window.removeEventListener("resize",this._checkForMobile);const X=Q.e.Instances.indexOf(this);X>=0&&Q.e.Instances.splice(X,1),Q.e.Instances.length||(Q.e.OnEnginesDisposedObservable.notifyObservers(this),Q.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(b){throw(0,e.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(b,X){for(let P=0;P<Q.e.Instances.length;P++){const S=Q.e.Instances[P];for(let P=0;P<S.scenes.length;P++)S.scenes[P].markAllMaterialsAsDirty(b,X)}}}n._RenderPassIdCounter=0,n._RescalePostProcessFactory=null,n.CollisionsEpsilon=.001,n.QueueNewFrame=W},11732:(b,X,P)=>{P.d(X,{e:()=>S});var Q=P(11694);class S{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}S.Instances=[],S.OnEnginesDisposedObservable=new Q.d,S._LastCreatedScene=null,S.UseFallbackTexture=!0,S.FallbackTexture=""},11784:(b,X,P)=>{P.d(X,{e:()=>Q});class Q{static SetMatrixPrecision(b){if(Q.MatrixTrackPrecisionChange=!1,b&&!Q.MatrixUse64Bits&&Q.MatrixTrackedMatrices)for(let X=0;X<Q.MatrixTrackedMatrices.length;++X){const b=Q.MatrixTrackedMatrices[X],P=b.wd;b.wd=new Array(16);for(let X=0;X<16;++X)b.wd[X]=P[X]}Q.MatrixUse64Bits=b,Q.MatrixCurrentType=Q.MatrixUse64Bits?Array:Float32Array,Q.MatrixTrackedMatrices=null}}Q.MatrixUse64Bits=!1,Q.MatrixTrackPrecisionChange=!0,Q.MatrixCurrentType=Float32Array,Q.MatrixTrackedMatrices=[]},11792:(b,X,P)=>{P.d(X,{e:()=>N});var Q=P(11700);const S=new Map;function d(b,X){(function(b){return S.delete(b)})(b)&&Q.b.Warn(`Extension with the name '${b}' already exists`),S.set(b,X)}function N(b,X){"image/ktx"!==X&&"image/ktx2"!==X||(b=".ktx"),S.has(b)||(b.endsWith(".ies")&&d(".ies",(async()=>await P.e(15).then(P.bind(P,14349)).then((b=>new b._IESTextureLoader)))),b.endsWith(".dds")&&d(".dds",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(28)]).then(P.bind(P,14357)).then((b=>new b._DDSTextureLoader)))),b.endsWith(".basis")&&d(".basis",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(47)]).then(P.bind(P,14369)).then((b=>new b._BasisTextureLoader)))),b.endsWith(".env")&&d(".env",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(23),P.e(21),P.e(45),P.e(48)]).then(P.bind(P,14374)).then((b=>new b._ENVTextureLoader)))),b.endsWith(".hdr")&&d(".hdr",(async()=>await Promise.all([P.e(14),P.e(49)]).then(P.bind(P,14379)).then((b=>new b._HDRTextureLoader)))),(b.endsWith(".ktx")||b.endsWith(".ktx2"))&&(d(".ktx",(async()=>await P.e(30).then(P.bind(P,14385)).then((b=>new b._KTXTextureLoader)))),d(".ktx2",(async()=>await P.e(30).then(P.bind(P,14385)).then((b=>new b._KTXTextureLoader))))),b.endsWith(".tga")&&d(".tga",(async()=>await P.e(50).then(P.bind(P,14388)).then((b=>new b._TGATextureLoader)))),b.endsWith(".exr")&&d(".exr",(async()=>await P.e(16).then(P.bind(P,14393)).then((b=>new b._ExrTextureLoader)))));const Q=S.get(b);return Q?Promise.resolve(Q(X)):null}},11787:(b,X,P)=>{P.d(X,{e:()=>N});var Q,S=P(11694),d=P(11789);!function(b){b[b.Unknown=0]="Unknown",b[b.Url=1]="Url",b[b.Temp=2]="Temp",b[b.Raw=3]="Raw",b[b.Dynamic=4]="Dynamic",b[b.RenderTarget=5]="RenderTarget",b[b.MultiRenderTarget=6]="MultiRenderTarget",b[b.Cube=7]="Cube",b[b.CubeRaw=8]="CubeRaw",b[b.CubePrefiltered=9]="CubePrefiltered",b[b.Raw3D=10]="Raw3D",b[b.Raw2DArray=11]="Raw2DArray",b[b.DepthStencil=12]="DepthStencil",b[b.CubeRawRGBD=13]="CubeRawRGBD",b[b.Depth=14]="Depth"}(Q||(Q={}));class N extends d.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(b){this.generateMipMaps=b}get uniqueId(){return this._uniqueId}_setUniqueId(b){this._uniqueId=b}getEngine(){return this._engine}get source(){return this._source}constructor(b,X){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new S.d,this.onErrorObservable=new S.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=b,this._source=X,this._uniqueId=N._Counter++,P||(this._hardwareTexture=b._createHardwareTexture())}incrementReferences(){this._references++}updateSize(b,X){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,b,X,P),this.width=b,this.height=X,this.depth=P,this.baseWidth=b,this.baseHeight=X,this.baseDepth=P,this._size=b*X*P}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const b=this.onRebuildCallback(this),X=X=>{X._swapAndDie(this,!1),this.isReady=b.isReady};return void(b.isAsync?b.proxy.then(X):X(b.proxy))}let b;switch(this.source){case 2:case 12:case 14:break;case 1:return void(b=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(b=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:b=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),b._swapAndDie(this,!1),this.isReady=!0;break;case 10:b=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 11:b=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 4:b=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),b._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(b=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:b=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),b._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return b=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(b=>{b&&b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(b._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(b){var X;let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(X=this._hardwareTexture)||void 0===X||X.setUsage(b._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),b._hardwareTexture=this._hardwareTexture,P&&(b._isRGBD=this._isRGBD),this._lodTextureHigh&&(b._lodTextureHigh&&b._lodTextureHigh.dispose(),b._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(b._lodTextureMid&&b._lodTextureMid.dispose(),b._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(b._lodTextureLow&&b._lodTextureLow.dispose(),b._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(b._irradianceTexture&&b._irradianceTexture.dispose(),b._irradianceTexture=this._irradianceTexture);const Q=this._engine.getLoadedTexturesCache();let S=Q.indexOf(this);-1!==S&&Q.splice(S,1),S=Q.indexOf(b),-1===S&&Q.push(b)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}N._Counter=0},11789:(b,X,P)=>{P.d(X,{e:()=>Q});class Q{get wrapU(){return this._cachedWrapU}set wrapU(b){this._cachedWrapU=b}get wrapV(){return this._cachedWrapV}set wrapV(b){this._cachedWrapV=b}get wrapR(){return this._cachedWrapR}set wrapR(b){this._cachedWrapR=b}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(b){this._cachedAnisotropicFilteringLevel=b}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(b){this._comparisonFunction=b}get useMipMaps(){return this._useMipMaps}set useMipMaps(b){this._useMipMaps=b}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=b,this._cachedWrapV=X,this._cachedWrapR=P,this._cachedAnisotropicFilteringLevel=Q,this.samplingMode=S,this._comparisonFunction=d,this}compareSampler(b){return this._cachedWrapU===b._cachedWrapU&&this._cachedWrapV===b._cachedWrapV&&this._cachedWrapR===b._cachedWrapR&&this._cachedAnisotropicFilteringLevel===b._cachedAnisotropicFilteringLevel&&this.samplingMode===b.samplingMode&&this._comparisonFunction===b._comparisonFunction&&this._useMipMaps===b._useMipMaps}}},11709:(b,X,P)=>{P.d(X,{b:()=>d});var Q=P(11700);const S=(b,X,P)=>b?b.getClassName&&"Mesh"===b.getClassName()?null:!b.getClassName||"SubMesh"!==b.getClassName()&&"PhysicsBody"!==b.getClassName()?b.clone?b.clone():Array.isArray(b)?b.slice():P&&"object"===typeof b?{...b}:null:b.clone(X):null;class d{static DeepCopy(b,X,P,d){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=function(b){const X=[];do{const P=Object.getOwnPropertyNames(b);for(const b of P)-1===X.indexOf(b)&&X.push(b)}while(b=Object.getPrototypeOf(b));return X}(b);for(const w of a){if("_"===w[0]&&(!d||-1===d.indexOf(w)))continue;if(w.endsWith("Observable"))continue;if(P&&-1!==P.indexOf(w))continue;const a=b[w],f=typeof a;if("function"!==f)try{if("object"===f)if(a instanceof Uint8Array)X[w]=Uint8Array.from(a);else if(a instanceof Array){if(X[w]=[],a.length>0)if("object"==typeof a[0])for(let b=0;b<a.length;b++){const P=S(a[b],X,N);-1===X[w].indexOf(P)&&X[w].push(P)}else X[w]=a.slice(0)}else X[w]=S(a,X,N);else X[w]=a}catch(u){Q.b.Warn(u.message)}}}}},11740:(b,X,P)=>{P.d(X,{c:()=>Q,e:()=>S,h:()=>d});class Q extends Error{}Q._setPrototypeOf=Object.setPrototypeOf||((b,X)=>(b.__proto__=X,b));const S={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class d extends Q{constructor(b,X,P){super(b),this.errorCode=X,this.innerError=P,this.name="RuntimeError",Q._setPrototypeOf(this,d.prototype)}}},11738:(b,X,P)=>{P.d(X,{c:()=>V,d:()=>n,f:()=>o,i:()=>T,n:()=>v,j:()=>t,p:()=>L,t:()=>Z,u:()=>A,v:()=>y});var Q=P(11728),S=P(11696),d=P(11694);class N{}N.FilesToLoad={};var a=P(11740),u=P(11745),w=P(11749),f=P(11732),O=P(11700),e=P(11755),Y=P(11752),D=P(11760);const E=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class t extends a.h{constructor(b,X){super(b,a.e.LoadFileError),this.name="LoadFileError",a.c._setPrototypeOf(this,t.prototype),X instanceof Q.c?this.request=X:this.file=X}}class B extends a.h{constructor(b,X){super(b,a.e.RequestFileError),this.request=X,this.name="RequestFileError",a.c._setPrototypeOf(this,B.prototype)}}class W extends a.h{constructor(b,X){super(b,a.e.ReadFileError),this.file=X,this.name="ReadFileError",a.c._setPrototypeOf(this,W.prototype)}}const n={DefaultRetryStrategy:class{static ExponentialBackoff(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(P,Q,S)=>0!==Q.status||S>=b||-1!==P.indexOf("file:")?-1:Math.pow(2,S)*X}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:b=>b,ScriptBaseUrl:"",ScriptPreprocessUrl:b=>b,CleanUrl:b=>b=b.replace(/#/gm,"%23")},y=(b,X)=>{if((!b||0!==b.indexOf("data:"))&&n.CorsBehavior)if("string"===typeof n.CorsBehavior||n.CorsBehavior instanceof String)X.crossOrigin=n.CorsBehavior;else{const P=n.CorsBehavior(b);P&&(X.crossOrigin=P)}},h={getRequiredSize:null},L=function(b,X,P,S){let d,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",w=arguments.length>5?arguments[5]:void 0,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===O||void 0===O||!O._features.forceBitmapOverHTMLImageElement))return P("LoadImage is only supported in web or BabylonNative environments."),null;let e=!1;b instanceof ArrayBuffer||ArrayBuffer.isView(b)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(d=URL.createObjectURL(new Blob([b],{type:a})),e=!0):d=`data:${a};base64,`+(0,u.j)(b):b instanceof Blob?(d=URL.createObjectURL(b),e=!0):(d=n.CleanUrl(b),d=n.PreprocessUrl(d));const Y=X=>{if(P){const Q=d||b.toString();P(`Error while trying to load image: ${0===Q.indexOf("http")||Q.length<=128?Q:Q.slice(0,128)+"..."}`,X)}};if(null!==O&&void 0!==O&&O._features.forceBitmapOverHTMLImageElement)return v(d,(Q=>{O.createImageBitmap(new Blob([Q],{type:a}),{premultiplyAlpha:"none",...w}).then((b=>{X(b),e&&URL.revokeObjectURL(d)})).catch((X=>{P&&P("Error while trying to load image: "+b,X)}))}),void 0,S||void 0,!0,((b,X)=>{Y(X)})),null;const D=new Image;if(h.getRequiredSize){const X=h.getRequiredSize(b);X.width&&(D.width=X.width),X.height&&(D.height=X.height)}y(d,D);const E=[],t=()=>{for(const b of E)b.target.removeEventListener(b.name,b.handler);E.length=0};E.push({target:D,name:"load",handler:()=>{t(),X(D),e&&D.src&&URL.revokeObjectURL(D.src)}}),E.push({target:D,name:"error",handler:b=>{t(),Y(b),e&&D.src&&URL.revokeObjectURL(D.src)}}),E.push({target:document,name:"securitypolicyviolation",handler:b=>{if(b.blockedURI!==D.src||"Od"===b.disposition)return;t();const X=new Error(`CSP violation of policy ${b.effectiveDirective} ${b.blockedURI}. Current policy is ${b.originalPolicy}`);f.e.UseFallbackTexture=!1,Y(X),e&&D.src&&URL.revokeObjectURL(D.src),D.src=""}}),(()=>{for(const b of E)b.target.addEventListener(b.name,b.handler)})();const B="blob:"===d.substring(0,5),W="data:"===d.substring(0,5),L=()=>{B||W||!Q.c.IsCustomRequestAvailable?D.src=d:v(d,((b,X,P)=>{const Q=new Blob([b],{type:!a&&P?P:a}),S=URL.createObjectURL(Q);e=!0,D.src=S}),void 0,S||void 0,!0,((b,X)=>{Y(X)}))},Z=()=>{S&&S.loadImage(d,D)};if(!B&&!W&&S&&S.enableTexturesOffline)S.open(Z,L);else{if(-1!==d.indexOf("file:")){const b=decodeURIComponent(d.substring(5).toLowerCase());if(N.FilesToLoad[b]&&"undefined"!==typeof URL){try{let X;try{X=URL.createObjectURL(N.FilesToLoad[b])}catch(A){X=URL.createObjectURL(N.FilesToLoad[b])}D.src=X,e=!0}catch(o){D.src=""}return D}}L()}return D},Z=(b,X,P,Q,S)=>{const N=new FileReader,a={onCompleteObservable:new d.d,abort:()=>N.abort()};return N.onloadend=()=>a.onCompleteObservable.notifyObservers(a),S&&(N.onerror=()=>{S(new W(`Unable to read ${b.name}`,b))}),N.onload=b=>{X(b.target.result)},P&&(N.onprogress=P),Q?N.readAsArrayBuffer(b):N.readAsText(b),a},v=(b,X,P,Q,S,u,w)=>{if(b.name)return Z(b,X,P,S,u?b=>{u(void 0,b)}:void 0);const f=b;if(-1!==f.indexOf("file:")){let b=decodeURIComponent(f.substring(5).toLowerCase());0===b.indexOf("./")&&(b=b.substring(2));const Q=N.FilesToLoad[b];if(Q)return Z(Q,X,P,S,u?b=>u(void 0,new t(b.message,b.file)):void 0)}const{match:Y,type:D}=q(f);if(Y){const b={onCompleteObservable:new d.d,abort:()=>()=>{}};try{const b=S?V(f):i(f);X(b,void 0,D)}catch(a){u?u(void 0,a):O.b.Error(a.message||"Failed to parse the Data URL")}return e.b.SetImmediate((()=>{b.onCompleteObservable.notifyObservers(b)})),b}return A(f,((b,P)=>{X(b,null===P||void 0===P?void 0:P.responseURL,null===P||void 0===P?void 0:P.getResponseHeader("content-type"))}),P,Q,S,u?b=>{u(b.request,new t(b.message,b.request))}:void 0,w)},A=(b,X,P,N,a,u,w)=>{b=n.CleanUrl(b),b=n.PreprocessUrl(b);const f=n.BaseUrl+b;let e=!1;const Y={onCompleteObservable:new d.d,abort:()=>e=!0},D=()=>{let b,d=new Q.c,N=null;const D=()=>{d&&(P&&d.removeEventListener("progress",P),b&&d.removeEventListener("readystatechange",b),d.removeEventListener("loadend",E))};let E=()=>{D(),Y.onCompleteObservable.notifyObservers(Y),Y.onCompleteObservable.clear(),P=void 0,b=null,E=null,u=void 0,w=void 0,X=void 0};Y.abort=()=>{e=!0,E&&E(),d&&d.readyState!==(XMLHttpRequest.DONE||4)&&d.abort(),null!==N&&(clearTimeout(N),N=null),d=null};const t=b=>{const X=b.message||"Unknown error";u&&d?u(new B(X,d)):O.b.Error(X)},W=O=>{if(d){if(d.open("GET",f),w)try{w(d)}catch(Y){return void t(Y)}a&&(d.responseType="arraybuffer"),P&&d.addEventListener("progress",P),E&&d.addEventListener("loadend",E),b=()=>{if(!e&&d&&d.readyState===(XMLHttpRequest.DONE||4)){if(b&&d.removeEventListener("readystatechange",b),d.status>=200&&d.status<300||0===d.status&&(!(0,S.o)()||K())){const b=a?d.response:d.responseText;if(null!==b){try{X&&X(b,d)}catch(Y){t(Y)}return}}const P=n.DefaultRetryStrategy;if(P){const b=P(f,d,O);if(-1!==b)return D(),d=new Q.c,void(N=setTimeout((()=>W(O+1)),b))}const w=new B("Error status: "+d.status+" "+d.statusText+" - Unable to load "+f,d);u&&u(w)}},d.addEventListener("readystatechange",b),d.send()}};W(0)};if(N&&N.enableSceneOffline){const Q=b=>{b&&b.status>400?u&&u(b):D()},S=()=>{N&&N.loadFile(n.BaseUrl+b,(b=>{!e&&X&&X(b),Y.onCompleteObservable.notifyObservers(Y)}),P?b=>{!e&&P&&P(b)}:void 0,Q,a)};N.open(S,Q)}else D();return Y},o=b=>{const{match:X,type:P}=q(b);if(X)return P||void 0;const Q=b.lastIndexOf(".");switch(b.substring(Q+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ed":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},K=()=>"undefined"!==typeof location&&"file:"===location.protocol,T=b=>E.test(b),q=b=>{const X=E.exec(b);if(null===X||0===X.length)return{match:!1,type:""};return{match:!0,type:X[0].replace("data:","").replace("base64,","")}};function V(b){return(0,u.c)(b.split(",")[1])}const i=b=>(0,u.f)(b.split(",")[1]);let x;D.c._FileToolsLoadImage=L,Y.e.loadFile=v,w.m.loadFile=v;((b,X,P,Q,S,d,N,a,u,w)=>{x={DecodeBase64UrlToBinary:b,DecodeBase64UrlToString:X,DefaultRetryStrategy:P.DefaultRetryStrategy,BaseUrl:P.BaseUrl,CorsBehavior:P.CorsBehavior,PreprocessUrl:P.PreprocessUrl,IsBase64DataUrl:Q,IsFileURL:S,LoadFile:d,LoadImage:N,ReadFile:a,RequestFile:u,SetCorsBehavior:w},Object.defineProperty(x,"DefaultRetryStrategy",{get:function(){return P.DefaultRetryStrategy},set:function(b){P.DefaultRetryStrategy=b}}),Object.defineProperty(x,"BaseUrl",{get:function(){return P.BaseUrl},set:function(b){P.BaseUrl=b}}),Object.defineProperty(x,"PreprocessUrl",{get:function(){return P.PreprocessUrl},set:function(b){P.PreprocessUrl=b}}),Object.defineProperty(x,"CorsBehavior",{get:function(){return P.CorsBehavior},set:function(b){P.CorsBehavior=b}})})(V,i,n,T,K,v,L,Z,A,y)},11804:(b,X,P)=>{function Q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(b=>{const X=16*Math.random()|0;return("x"===b?X:3&X|8).toString(16)}))}P.d(X,{b:()=>Q})},11800:(b,X,P)=>{P.d(X,{b:()=>d});var Q=P(11700),S=P(11802);class d{static Instantiate(b){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[b])return this.RegisteredExternalClasses[b];const X=(0,S.d)(b);if(X)return X;Q.b.Warn(b+" not found, you may have missed an import.");const P=b.split(".");let d=window||this;for(let Q=0,S=P.length;Q<S;Q++)d=d[P[Q]];return"function"!==typeof d?null:d}}d.RegisteredExternalClasses={}},11713:(b,X,P)=>{P.d(X,{e:()=>S});var Q=P(11696);class S{static get Now(){return(0,Q.o)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11745:(b,X,P)=>{P.d(X,{c:()=>N,f:()=>d,i:()=>Q,j:()=>S});const Q=b=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(b);let X="";for(let P=0;P<b.byteLength;P++)X+=String.fromCharCode(b[P]);return X},S=b=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P,Q,S,d,N,a,u,w="",f=0;const O=ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b);for(;f<O.length;)P=O[f++],Q=f<O.length?O[f++]:Number.NaN,S=f<O.length?O[f++]:Number.NaN,d=P>>2,N=(3&P)<<4|Q>>4,a=(15&Q)<<2|S>>6,u=63&S,isNaN(Q)?a=u=64:isNaN(S)&&(u=64),w+=X.charAt(d)+X.charAt(N)+X.charAt(a)+X.charAt(u);return w},d=b=>atob(b),N=b=>{const X=d(b),P=X.length,Q=new Uint8Array(new ArrayBuffer(P));for(let S=0;S<P;S++)Q[S]=X.charCodeAt(S);return Q.buffer}},11807:(b,X,P)=>{function Q(b){let X=1;do{X*=2}while(X<b);return X===b}function S(b,X,P){return b*(1-P)+X*P}function d(b){const X=N(b),P=a(b);return X-b>b-P?P:X}function N(b){return b--,b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b|=b>>16,++b}function a(b){return b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,(b|=b>>16)-(b>>1)}function u(b,X){let P;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:P=a(b);break;case 2:P=d(b);break;default:P=N(b)}return Math.min(P,X)}P.d(X,{d:()=>a,h:()=>u,i:()=>Q,k:()=>S,l:()=>d})},11689:(b,X,P)=>{P.r(X),P.d(X,{AsyncLoop:()=>W,Tools:()=>t,className:()=>B});var Q=P(11694),S=P(11696),d=P(11700),N=P(11709),a=P(11713),u=P(11719),w=P(11728),f=P(11732),O=P(11738),e=P(11755),Y=P(11800),D=P(11804),E=P(11807);class t{static get BaseUrl(){return O.d.BaseUrl}static set BaseUrl(b){O.d.BaseUrl=b}static get CleanUrl(){return O.d.CleanUrl}static set CleanUrl(b){O.d.CleanUrl=b}static IsAbsoluteUrl(b){return 0===b.indexOf("//")||-1!==b.indexOf("://")&&(-1!==b.indexOf(".")&&(-1!==b.indexOf("/")&&(!(b.indexOf(":")>b.indexOf("/"))&&(b.indexOf("://")<b.indexOf(".")||(0===b.indexOf("data:")||0===b.indexOf("blob:"))))))}static set ScriptBaseUrl(b){O.d.ScriptBaseUrl=b}static get ScriptBaseUrl(){return O.d.ScriptBaseUrl}static set CDNBaseUrl(b){t.ScriptBaseUrl=b,t.AssetBaseUrl=b}static set ScriptPreprocessUrl(b){O.d.ScriptPreprocessUrl=b}static get ScriptPreprocessUrl(){return O.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return O.d.DefaultRetryStrategy}static set DefaultRetryStrategy(b){O.d.DefaultRetryStrategy=b}static get CorsBehavior(){return O.d.CorsBehavior}static set CorsBehavior(b){O.d.CorsBehavior=b}static get UseFallbackTexture(){return f.e.UseFallbackTexture}static set UseFallbackTexture(b){f.e.UseFallbackTexture=b}static get RegisteredExternalClasses(){return Y.b.RegisteredExternalClasses}static set RegisteredExternalClasses(b){Y.b.RegisteredExternalClasses=b}static get fallbackTexture(){return f.e.FallbackTexture}static set fallbackTexture(b){f.e.FallbackTexture=b}static FetchToRef(b,X,P,Q,S,d){const N=4*((Math.abs(b)*P%P|0)+(Math.abs(X)*Q%Q|0)*P);d.r=S[N]/255,d.g=S[N+1]/255,d.b=S[N+2]/255,d.a=S[N+3]/255}static Mix(b,X,P){return 0}static Instantiate(b){return Y.b.Instantiate(b)}static SetImmediate(b){e.b.SetImmediate(b)}static IsExponentOfTwo(b){return!0}static FloatRound(b){return Math.fround(b)}static GetFilename(b){const X=b.lastIndexOf("/");return X<0?b:b.substring(X+1)}static GetFolderPath(b){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=b.lastIndexOf("/");return P<0?X?b:"":b.substring(0,P+1)}static ToDegrees(b){return 180*b/Math.PI}static ToRadians(b){return b*Math.PI/180}static SmoothAngleChange(b,X){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Q=this.ToRadians(b),S=this.ToRadians(X);return this.ToDegrees(Math.atan2((1-P)*Math.sin(S)+P*Math.sin(Q),(1-P)*Math.cos(S)+P*Math.cos(Q)))}static MakeArray(b,X){return!0===X||void 0!==b&&null!=b?Array.isArray(b)?b:[b]:null}static GetPointerPrefix(b){return(0,S.o)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(b,X){(0,O.v)(b,X)}static SetReferrerPolicyBehavior(b,X){X.referrerPolicy=b}static get PreprocessUrl(){return O.d.PreprocessUrl}static set PreprocessUrl(b){O.d.PreprocessUrl=b}static LoadImage(b,X,P,Q,S,d){return(0,O.p)(b,X,P,Q,S,d)}static LoadFile(b,X,P,Q,S,d){return(0,O.n)(b,X,P,Q,S,d)}static async LoadFileAsync(b){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((P,Q)=>{(0,O.n)(b,(b=>{P(b)}),void 0,void 0,X,((b,X)=>{Q(X)}))}))}static GetAssetUrl(b){if(!b)return"";if(t.AssetBaseUrl&&b.startsWith(t._DefaultAssetsUrl)){const X="/"===t.AssetBaseUrl[t.AssetBaseUrl.length-1]?t.AssetBaseUrl.substring(0,t.AssetBaseUrl.length-1):t.AssetBaseUrl;return b.replace(t._DefaultAssetsUrl,X)}return b}static GetBabylonScriptURL(b,X){if(!b)return"";if(t.ScriptBaseUrl&&b.startsWith(t._DefaultCdnUrl)){const X="/"===t.ScriptBaseUrl[t.ScriptBaseUrl.length-1]?t.ScriptBaseUrl.substring(0,t.ScriptBaseUrl.length-1):t.ScriptBaseUrl;b=b.replace(t._DefaultCdnUrl,X)}return b=t.ScriptPreprocessUrl(b),X&&(b=t.GetAbsoluteUrl(b)),b}static LoadBabylonScript(b,X,P,Q){b=t.GetBabylonScriptURL(b),t.LoadScript(b,X,P)}static async LoadBabylonScriptAsync(b){return b=t.GetBabylonScriptURL(b),await t.LoadScriptAsync(b)}static LoadScript(b,X,P,Q){let d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(b),X&&X()}catch(u){null===P||void 0===P||P(`Unable to load script '${b}' in worker`,u)}return}if(!(0,S.o)())return void(null===P||void 0===P||P(`Cannot load script '${b}' outside of a window or a worker`));const N=document.getElementsByTagName("head")[0],a=document.createElement("script");d?(a.setAttribute("type","module"),a.innerText=b):(a.setAttribute("type","text/javascript"),a.setAttribute("src",b)),Q&&(a.id=Q),a.onload=()=>{X&&X()},a.onerror=X=>{P&&P(`Unable to load script '${b}'`,X)},N.appendChild(a)}static async LoadScriptAsync(b,X){return await new Promise(((P,Q)=>{this.LoadScript(b,(()=>{P()}),((b,X)=>{Q(X||new Error(b))}),X)}))}static ReadFileAsDataURL(b,X,P){const S=new FileReader,d={onCompleteObservable:new Q.d,abort:()=>S.abort()};return S.onloadend=()=>{d.onCompleteObservable.notifyObservers(d)},S.onload=b=>{X(b.target.result)},S.onprogress=P,S.readAsDataURL(b),d}static ReadFile(b,X,P,Q,S){return(0,O.t)(b,X,P,Q,S)}static FileAsURL(b){const X=new Blob([b]);return window.URL.createObjectURL(X)}static Format(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return b.toFixed(X)}static DeepCopy(b,X,P,Q){N.b.DeepCopy(b,X,P,Q)}static IsEmpty(b){for(const X in b)if(Object.prototype.hasOwnProperty.call(b,X))return!1;return!0}static RegisterTopRootEvents(b,X){for(let Q=0;Q<X.length;Q++){const S=X[Q];b.addEventListener(S.name,S.handler,!1);try{window.parent&&window.parent.addEventListener(S.name,S.handler,!1)}catch(P){}}}static UnregisterTopRootEvents(b,X){for(let Q=0;Q<X.length;Q++){const S=X[Q];b.removeEventListener(S.name,S.handler);try{b.parent&&b.parent.removeEventListener(S.name,S.handler)}catch(P){}}}static async DumpFramebuffer(b,X,P,Q){throw(0,u.b)("DumpTools")}static DumpData(b,X,P,Q){throw(0,u.b)("DumpTools")}static async DumpDataAsync(b,X,P){throw(0,u.b)("DumpTools")}static _IsOffScreenCanvas(b){return void 0!==b.convertToBlob}static ToBlob(b,X){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0;t._IsOffScreenCanvas(b)||b.toBlob||(b.toBlob=function(b,X,P){setTimeout((()=>{const Q=atob(this.toDataURL(X,P).split(",")[1]),S=Q.length,d=new Uint8Array(S);for(let b=0;b<S;b++)d[b]=Q.charCodeAt(b);b(new Blob([d]))}))}),t._IsOffScreenCanvas(b)?b.convertToBlob({type:P,quality:Q}).then((b=>X(b))):b.toBlob((function(b){X(b)}),P,Q)}static DownloadBlob(b,X){if("download"in document.createElement("a")){if(!X){const b=new Date;X="screenshot_"+((b.getFullYear()+"-"+(b.getMonth()+1)).slice(2)+"-"+b.getDate()+"_"+b.getHours()+"-"+("0"+b.getMinutes()).slice(-2))+".png"}t.Download(b,X)}else if(b&&"undefined"!==typeof URL){const X=URL.createObjectURL(b),P=window.open("");if(!P)return;const Q=P.document.createElement("img");Q.onload=function(){URL.revokeObjectURL(X)},Q.src=X,P.document.body.appendChild(Q)}}static EncodeScreenshotCanvasData(b,X){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0,S=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Q&&X){if(X){if(t._IsOffScreenCanvas(b))return void b.convertToBlob({type:P,quality:S}).then((b=>{const P=new FileReader;P.readAsDataURL(b),P.onloadend=()=>{const b=P.result;X(b)}}));const Q=b.toDataURL(P,S);X(Q)}}else this.ToBlob(b,(function(b){b&&t.DownloadBlob(b,Q),X&&X("")}),P,S)}static Download(b,X){if("undefined"===typeof URL)return;const P=window.URL.createObjectURL(b),Q=document.createElement("a");document.body.appendChild(Q),Q.style.display="none",Q.href=P,Q.download=X,Q.addEventListener("click",(()=>{Q.parentElement&&Q.parentElement.removeChild(Q)})),Q.click(),window.URL.revokeObjectURL(P)}static BackCompatCameraNoPreventDefault(b){return"boolean"===typeof b[0]?b[0]:"boolean"===typeof b[1]&&b[1]}static CreateScreenshot(b,X,P,Q){throw(0,u.b)("ScreenshotTools")}static async CreateScreenshotAsync(b,X,P){throw(0,u.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(b,X,P,Q){throw(0,u.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(b,X,P){throw(0,u.b)("ScreenshotTools")}static RandomId(){return(0,D.b)()}static IsBase64(b){return(0,O.i)(b)}static DecodeBase64(b){return(0,O.c)(b)}static get errorsCount(){return d.b.errorsCount}static Log(b){d.b.Log(b)}static Warn(b){d.b.Warn(b)}static Error(b){d.b.Error(b)}static get LogCache(){return d.b.LogCache}static ClearLogCache(){d.b.ClearLogCache()}static set LogLevels(b){d.b.LogLevels=b}static set PerformanceLogLevel(b){return(b&t.PerformanceUserMarkLogLevel)===t.PerformanceUserMarkLogLevel?(t.StartPerformanceCounter=t._StartUserMark,void(t.EndPerformanceCounter=t._EndUserMark)):(b&t.PerformanceConsoleLogLevel)===t.PerformanceConsoleLogLevel?(t.StartPerformanceCounter=t._StartPerformanceConsole,void(t.EndPerformanceCounter=t._EndPerformanceConsole)):(t.StartPerformanceCounter=t._StartPerformanceCounterDisabled,void(t.EndPerformanceCounter=t._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(b,X){}static _EndPerformanceCounterDisabled(b,X){}static _StartUserMark(b){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t._Performance){if(!(0,S.o)())return;t._Performance=window.performance}X&&t._Performance.mark&&t._Performance.mark(b+"-Begin")}static _EndUserMark(b){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&t._Performance.mark&&(t._Performance.mark(b+"-End"),t._Performance.measure(b,b+"-Begin",b+"-End"))}static _StartPerformanceConsole(b){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];X&&(t._StartUserMark(b,X),console.time&&console.time(b))}static _EndPerformanceConsole(b){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];X&&(t._EndUserMark(b,X),console.timeEnd(b))}static get Now(){return a.e.Now}static GetClassName(b){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null;if(!X&&b.getClassName)P=b.getClassName();else{if(b instanceof Object){P=(X?b:Object.getPrototypeOf(b)).constructor.__bjsclassName__}P||(P=typeof b)}return P}static First(b,X){for(const P of b)if(X(P))return P;return null}static getFullClassName(b){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null,Q=null;if(!X&&b.getClassName)P=b.getClassName();else{if(b instanceof Object){const S=X?b:Object.getPrototypeOf(b);P=S.constructor.__bjsclassName__,Q=S.constructor.__bjsmoduleName__}P||(P=typeof b)}return P?(null!=Q?Q+".":"")+P:null}static async DelayAsync(b){await new Promise((X=>{setTimeout((()=>{X()}),b)}))}static IsSafari(){return!!(0,S.k)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function B(b,X){return P=>{P.__bjsclassName__=b,P.__bjsmoduleName__=null!=X?X:null}}t.AssetBaseUrl="",t.UseCustomRequestHeaders=!1,t.CustomRequestHeaders=w.c.CustomRequestHeaders,t.GetDOMTextContent=S.d,t._DefaultCdnUrl="https://cdn.babylonjs.com",t._DefaultAssetsUrl="https://assets.babylonjs.com/core",t.GetAbsoluteUrl="object"===typeof document?b=>{const X=document.createElement("a");return X.href=b,X.href}:"function"===typeof URL&&"object"===typeof location?b=>new URL(b,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},t.NoneLogLevel=d.b.NoneLogLevel,t.MessageLogLevel=d.b.MessageLogLevel,t.WarningLogLevel=d.b.WarningLogLevel,t.ErrorLogLevel=d.b.ErrorLogLevel,t.AllLogLevel=d.b.AllLogLevel,t.IsWindowObjectExist=S.o,t.PerformanceNoneLogLevel=0,t.PerformanceUserMarkLogLevel=1,t.PerformanceConsoleLogLevel=2,t.StartPerformanceCounter=t._StartPerformanceCounterDisabled,t.EndPerformanceCounter=t._EndPerformanceCounterDisabled;class W{constructor(b,X,P){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=b,this.index=Q-1,this._done=!1,this._fn=X,this._successCallback=P}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(b,X,P){const Q=new W(b,X,P,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Q.executeNext(),Q}static SyncAsyncForLoop(b,X,P,Q,S){let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return W.Run(Math.ceil(b/X),(Q=>{S&&S()?Q.breakLoop():setTimeout((()=>{for(let d=0;d<X;++d){const N=Q.index*X+d;if(N>=b)break;if(P(N),S&&S()){Q.breakLoop();break}}Q.executeNext()}),d)}),Q)}}t.Mix=E.k,t.IsExponentOfTwo=E.i,f.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11802:(b,X,P)=>{P.d(X,{d:()=>d,h:()=>S});const Q={};function S(b,X){Q[b]=X}function d(b){return Q[b]}},11728:(b,X,P)=>{P.d(X,{c:()=>Q});class Q{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Q.CustomRequestHeaders).length>0||Q.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const b in Q.CustomRequestHeaders){const X=Q.CustomRequestHeaders[b];X&&this._xhr.setRequestHeader(b,X)}}_shouldSkipRequestModifications(b){return Q.SkipRequestModificationForBabylonCDN&&(b.includes("preview.babylonjs.com")||b.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(b){this._xhr.onprogress=b}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(b){this._xhr.responseType=b}get timeout(){return this._xhr.timeout}set timeout(b){this._xhr.timeout=b}addEventListener(b,X,P){this._xhr.addEventListener(b,X,P)}removeEventListener(b,X,P){this._xhr.removeEventListener(b,X,P)}abort(){this._xhr.abort()}send(b){Q.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(b)}open(b,X){for(const P of Q.CustomRequestModifiers){if(this._shouldSkipRequestModifications(X))return;X=P(this._xhr,X)||X}X=(X=X.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=X,this._xhr.open(b,X,!0)}setRequestHeader(b,X){this._xhr.setRequestHeader(b,X)}getResponseHeader(b){return this._xhr.getResponseHeader(b)}}Q.CustomRequestHeaders={},Q.CustomRequestModifiers=new Array,Q.SkipRequestModificationForBabylonCDN=!0}}]);