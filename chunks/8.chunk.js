"use strict";(self["1xyrlsr8vb9"]=self["1xyrlsr8vb9"]||[]).push([[8],{12167:(I,O,C)=>{C.d(O,{b:()=>W});var j=C(12132),K=C(12103),i=C(12171),y=C(12197),S=C(12118);class U{constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,I&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(I){this._zOffset!==I&&(this._zOffset=I,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(I){this._zOffsetUnits!==I&&(this._zOffsetUnits=I,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(I){this._cullFace!==I&&(this._cullFace=I,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(I){this._cull!==I&&(this._cull=I,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(I){this._depthFunc!==I&&(this._depthFunc=I,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(I){this._depthMask!==I&&(this._depthMask=I,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(I){this._depthTest!==I&&(this._depthTest=I,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(I){this._frontFace!==I&&(this._frontFace=I,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(I){this.isDirty&&(this._isCullDirty&&(this.cull?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(I.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(I.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(I.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(I.enable(I.POLYGON_OFFSET_FILL),I.polygonOffset(this.zOffset,this.zOffsetUnits)):I.disable(I.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(I.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class p{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(I){this._func!==I&&(this._func=I,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(I){this._funcRef!==I&&(this._funcRef=I,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(I){this._funcMask!==I&&(this._funcMask=I,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(I){this._opStencilFail!==I&&(this._opStencilFail=I,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(I){this._opDepthFail!==I&&(this._opDepthFail=I,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(I){this._opStencilDepthPass!==I&&(this._opStencilDepthPass=I,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(I){this._mask!==I&&(this._mask=I,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(I){this._enabled!==I&&(this._enabled=I,this._isStencilTestDirty=!0)}constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,I&&this.reset()}reset(){var I;this.stencilMaterial=void 0,null===(I=this.stencilGlobal)||void 0===I||I.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(I){var O;if(!I)return;const C=!this.useStencilGlobalOnly&&!(null===(O=this.stencilMaterial)||void 0===O||!O.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(I.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(I.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(I.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class N{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=N.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=N.KEEP,this.opDepthFail=N.KEEP,this.opStencilDepthPass=N.REPLACE}get stencilFunc(){return this.func}set stencilFunc(I){this.func=I}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(I){this.funcRef=I}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(I){this.funcMask=I}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(I){this.opStencilFail=I}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(I){this.opDepthFail=I}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(I){this.opStencilDepthPass=I}get stencilMask(){return this.mask}set stencilMask(I){this.mask=I}get stencilTest(){return this.enabled}set stencilTest(I){this.enabled=I}}N.ALWAYS=519,N.KEEP=7680,N.REPLACE=7681;class Q{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(I){this._alphaBlend!==I&&(this._alphaBlend=I,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(I,O,C,j){this._blendConstants[0]===I&&this._blendConstants[1]===O&&this._blendConstants[2]===C&&this._blendConstants[3]===j||(this._blendConstants[0]=I,this._blendConstants[1]=O,this._blendConstants[2]=C,this._blendConstants[3]=j,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(I,O,C,j){this._blendFunctionParameters[0]===I&&this._blendFunctionParameters[1]===O&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===j||(this._blendFunctionParameters[0]=I,this._blendFunctionParameters[1]=O,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=j,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(I,O){this._blendEquationParameters[0]===I&&this._blendEquationParameters[1]===O||(this._blendEquationParameters[0]=I,this._blendEquationParameters[1]=O,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(I){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?I.enable(I.BLEND):I.disable(I.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(I.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(I.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(I.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var s=C(12126),Z=C(12201),q=C(12095),mI=C(12088),E=C(12160),h=C(12213);function r(I,O){if((0,q.k)()){const{requestAnimationFrame:C}=O||window;if("function"===typeof C)return C(I)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(I);return setTimeout(I,16)}class W{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(I){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get jS(){return this._useReverseDepthBuffer}set jS(I){I!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=I,this._depthCullingState.depthFunc=I?518:515)}setColorWrite(I){I!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=I)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(I){if(I)return this.isNDCHalfZRange?I.IS_NDC_HALF_ZRANGE="":delete I.IS_NDC_HALF_ZRANGE,this.jS?I.USE_REVERSE_DEPTHBUFFER="":delete I.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?I.USE_EXACT_SRGB_CONVERSIONS="":delete I.USE_EXACT_SRGB_CONVERSIONS);{let I="";return this.isNDCHalfZRange&&(I+="#define IS_NDC_HALF_ZRANGE"),this.jS&&(I&&(I+="\n"),I+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(I&&(I+="\n"),I+="#define USE_EXACT_SRGB_CONVERSIONS"),I}}_rebuildInternalTextures(){const I=this._internalTexturesCache.slice();for(const O of I)O._rebuild()}_rebuildRenderTargetWrappers(){const I=this._renderTargetWrapperCache.slice();for(const O of I)O._rebuild()}_rebuildEffects(){for(const I in this._compiledEffects){const O=this._compiledEffects[I];O._pipelineContext=null,O._prepareEffect()}i.Effect.ResetCache()}_rebuildGraphicsResources(){var I;this.wipeCaches(!0),this._rebuildEffects(),null===(I=this._rebuildComputeEffects)||void 0===I||I.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){K.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(I){setTimeout((()=>{this._clearEmptyResources();const O=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,j=this._depthCullingState.depthMask,K=this._stencilState.stencilTest;I(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=O,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=j,this._stencilState.stencilTest=K,this._flagContextRestored()}),0)}get p(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(I){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(I){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const I=new Uint8Array(4),O=[I,I,I,I,I,I];this._emptyCubeTexture=this.createRawCubeTexture(O,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(I){if(!I)return this._activeRenderLoops.length=0,void this._cancelFrame();const O=this._activeRenderLoops.indexOf(I);O>=0&&(this._activeRenderLoops.splice(O,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const I=this._frameHandler;if(this._frameHandler=0,(0,q.k)()){const{cancelAnimationFrame:O}=this.getHostWindow()||window;if("function"===typeof O)return O(I)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(I);return clearTimeout(I)}}KS(){this.onBeginFrameObservable.notifyObservers(this)}iS(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(I){this._maxFPS=I,void 0!==I&&(this._minFrameTime=I<=0?Number.MAX_VALUE:1e3/I)}_isOverFrameTime(I){if(!I||void 0===this._maxFPS)return!1;const O=I-this._lastFrameTime;return this._lastFrameTime=I,this._renderAccumulator+=O,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(I){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(I)){let I=!0;(this.p||!this.renderEvenInBackground&&this._windowIsBackground)&&(I=!1),I&&(this.KS(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.iS())}}_renderLoop(I){this._processFrame(I),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let I=0;I<this._activeRenderLoops.length;I++){(0,this._activeRenderLoops[I])()}}_renderViews(){return!1}_queueNewFrame(I,O){return r(I,O)}runRenderLoop(I){-1===this._activeRenderLoops.indexOf(I)&&(this._activeRenderLoops.push(I),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(I){this._depthCullingState.depthTest=I}setZOffset(I){this._depthCullingState.zOffset=this.jS?-I:I}getZOffset(){const I=this._depthCullingState.zOffset;return this.jS?-I:I}setZOffsetUnits(I){this._depthCullingState.zOffsetUnits=this.jS?-I:I}getZOffsetUnits(){const I=this._depthCullingState.zOffsetUnits;return this.jS?-I:I}getHostWindow(){return(0,q.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(I){this._compatibilityMode=!0}_rebuildTextures(){for(const I of this.scenes)I._rebuildTextures();for(const I of this._virtualScenes)I._rebuildTextures()}_releaseRenderTargetWrapper(I){const O=this._renderTargetWrapperCache.indexOf(I);-1!==O&&this._renderTargetWrapperCache.splice(O,1)}get currentViewport(){return this._cachedViewport}setViewport(I,O,C){const j=O||this.getRenderWidth(),K=C||this.getRenderHeight(),i=I.x||0,y=I.y||0;this._cachedViewport=I,this._viewport(i*j,y*K,j*I.width,K*I.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(I){return new Path2D(I)}get description(){let I=this.name+this.version;return this._caps.parallelShaderCompile&&(I+=" - Parallel shader compilation"),I}_createTextureBase(I,O,C,i){let y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7?arguments[7]:void 0,N=arguments.length>8?arguments[8]:void 0,Q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,q=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,mI=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,E=arguments.length>13?arguments[13]:void 0,r=arguments.length>14?arguments[14]:void 0,Y=arguments.length>15?arguments[15]:void 0;const o="data:"===(I=I||"").substring(0,5),c="blob:"===I.substring(0,5),n=o&&-1!==I.indexOf(";base64,"),X=s||new Z.c(this,1);X!==s&&(X.label=I.substring(0,60));const T=I;!this._transformTextureUrl||n||s||Q||(I=this._transformTextureUrl(I)),T!==I&&(X._originalUrl=T);const H=I.lastIndexOf(".");let b=mI||(H>-1?I.substring(H).toLowerCase():"");b.indexOf("?")>-1&&(b=b.split("?")[0]);const a=(0,h.c)(b,E);i&&i.addPendingData(X),X.url=I,X.generateMipMaps=!O,X.samplingMode=y,X.invertY=C,X._useSRGBBuffer=this._getUseSRGBBuffer(!!Y,O),this._doNotHandleContextLost||(X._buffer=Q);let M=null;S&&!s&&(M=X.onLoadedObservable.add(S)),s||this._internalTexturesCache.push(X);const u=(C,s)=>{i&&i.removePendingData(X),I===T?(M&&X.onLoadedObservable.remove(M),j.e.UseFallbackTexture&&I!==j.e.FallbackTexture&&this._createTextureBase(j.e.FallbackTexture,O,X.invertY,i,y,null,U,p,N,Q,X),C=(C||"Unknown error")+(j.e.UseFallbackTexture?" - Fallback texture was used":""),X.onErrorObservable.notifyObservers({message:C,exception:s}),U&&U(C,s)):(K.c.Warn(`Failed to load ${I}, falling back to ${T}`),this._createTextureBase(T,O,X.invertY,i,y,S,U,p,N,Q,X,q,mI,E,r,Y))};if(a){const O=async I=>{(await a).loadData(I,X,((I,O,C,j,K,S)=>{S?u("TextureLoader failed to load data"):p(X,b,i,{width:I,height:O},X.invertY,!C,j,(()=>(K(),!1)),y)}),r)};Q?Q instanceof ArrayBuffer?O(new Uint8Array(Q)):ArrayBuffer.isView(Q)?O(Q):U&&U("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(I,(I=>{O(new Uint8Array(I))}),void 0,i?i.offlineProvider:void 0,!0,((I,O)=>{u("Unable to load "+(I&&I.responseURL,O))}))}else{const C=I=>{c&&!this._doNotHandleContextLost&&(X._buffer=I),p(X,b,i,I,X.invertY,O,!1,N,y)};!o||n?Q&&("string"===typeof Q.decoding||Q.close)?C(Q):W._FileToolsLoadImage(I||"",C,u,i?i.offlineProvider:null,E,X.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Q||Q instanceof ArrayBuffer||ArrayBuffer.isView(Q)||Q instanceof Blob?W._FileToolsLoadImage(Q,C,u,i?i.offlineProvider:null,E,X.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Q&&C(Q)}return X}_rebuildBuffers(){for(const I of this._uniformBuffers)I._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,q.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const I in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,I)&&(this._boundTexturesCache[I]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(I){this._name=I}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(I){this._hardwareScalingLevel=I,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(I){this._doNotHandleContextLost=I}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(I,O,C){var K,i;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new U,this._stencilStateComposer=new p,this._stencilState=new N,this._alphaState=new Q,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new mI.c,this.onCanvasFocusObservable=new mI.c,this.onNewSceneAddedObservable=new mI.c,this.onResizeObservable=new mI.c,this.onCanvasPointerOutObservable=new mI.c,this.onEffectErrorObservable=new mI.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new mI.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=I=>this._renderLoop(I),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new mI.c,this.onAfterShaderCompilationObservable=new mI.c,this.onBeginFrameObservable=new mI.c,this.onEndFrameObservable=new mI.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new mI.c,this.onContextRestoredObservable=new mI.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.yS=new mI.c,this.onReleaseEffectsObservable=new mI.c,j.e.Instances.push(this),this.startTime=S.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,y.b.SetMatrixPrecision(!!O.useHighPrecisionMatrix),(0,q.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=C??!1,O.antialias=I??O.antialias,O.deterministicLockstep=O.deterministicLockstep??!1,O.lockstepMaxSteps=O.lockstepMaxSteps??4,O.timeStep=O.timeStep??1/60,O.SS=O.SS??!0,this._audioContext=(null===(K=O.audioEngineOptions)||void 0===K?void 0:K.audioContext)??null,this._audioDestination=(null===(i=O.audioEngineOptions)||void 0===i?void 0:i.audioDestination)??null,this.premultipliedAlpha=O.premultipliedAlpha??!0,this._doNotHandleContextLost=!!O.doNotHandleContextLost,this._isStencilEnable=!!O.SS,this.useExactSrgbConversions=O.useExactSrgbConversions??!1;const s=(0,q.k)()&&window.devicePixelRatio||1,Z=O.limitDeviceRatio||s;C=C||O.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(Z,s):1,this._lastDevicePixelRatio=s,this._creationOptions=O}resize(){let I,O,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const I=(0,q.k)()&&window.devicePixelRatio||1,O=this._lastDevicePixelRatio/I;this._lastDevicePixelRatio=I,this._hardwareScalingLevel*=O}if((0,q.k)()&&(0,q.f)())if(this._renderingCanvas){var j,K;const C=null===(j=(K=this._renderingCanvas).getBoundingClientRect)||void 0===j?void 0:j.call(K);I=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,O=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else I=window.innerWidth,O=window.innerHeight;else I=this._renderingCanvas?this._renderingCanvas.width:100,O=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(I/this._hardwareScalingLevel,O/this._hardwareScalingLevel,C)}setSize(I,O){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(I|=0,O|=0,!C&&this._renderingCanvas.width===I&&this._renderingCanvas.height===O)return!1;if(this._renderingCanvas.width=I,this._renderingCanvas.height=O,this.scenes){for(let I=0;I<this.scenes.length;I++){const O=this.scenes[I];for(let I=0;I<O.cameras.length;I++){O.cameras[I]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(I,O,C,j,K,i,y,S,U,p,N){throw(0,s.b)("engine.rawTexture")}createRawCubeTexture(I,O,C,j,K,i,y,S){throw(0,s.b)("engine.rawTexture")}createRawTexture3D(I,O,C,j,K,i,y,S,U,p,N){throw(0,s.b)("engine.rawTexture")}createRawTexture2DArray(I,O,C,j,K,i,y,S,U,p,N){throw(0,s.b)("engine.rawTexture")}_sharedInit(I){this._renderingCanvas=I}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const I=navigator.userAgent;this.hostInformation.isMobile=-1!==I.indexOf("Mobile")||-1!==I.indexOf("Mac")&&(0,q.f)()&&"ontouchend"in document},this._checkForMobile(),(0,q.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(I){return document.createElement("video")}_reportDrawCall(){var I;let O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(I=this._drawCalls)||void 0===I||I.addCount(O,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(I,O){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(I,O){return createImageBitmap(I,O)}resizeImageBitmap(I,O,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(I){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(I,O){if("undefined"===typeof document)return new OffscreenCanvas(I,O);const C=document.createElement("canvas");return C.width=I,C.height=O,C}createCanvas(I,O){return W._CreateCanvas(I,O)}static _FileToolsLoadImage(I,O,C,j,K,i,y){throw(0,s.b)("FileTools")}_loadFile(I,O,C,j,K,i){const y=(0,E.j)(I,O,C,j,K,i);return this._activeRequests.push(y),y.onCompleteObservable.add((()=>{const I=this._activeRequests.indexOf(y);-1!==I&&this._activeRequests.splice(I,1)})),y}static _FileToolsLoadFile(I,O,C,j,K,i){if(E.b.loadFile)return E.b.loadFile(I,O,C,j,K,i);throw(0,s.b)("FileTools")}dispose(){var I;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(I=this.releaseComputeEffects)||void 0===I||I.call(this),i.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.yS.notifyObservers(this),this.yS.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,q.k)()&&window.removeEventListener("resize",this._checkForMobile);const O=j.e.Instances.indexOf(this);O>=0&&j.e.Instances.splice(O,1),j.e.Instances.length||(j.e.OnEnginesDisposedObservable.notifyObservers(this),j.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(I){throw(0,s.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(I,O){for(let C=0;C<j.e.Instances.length;C++){const K=j.e.Instances[C];for(let C=0;C<K.scenes.length;C++)K.scenes[C].markAllMaterialsAsDirty(I,O)}}}W._RenderPassIdCounter=0,W._RescalePostProcessFactory=null,W.CollisionsEpsilon=.001,W.QueueNewFrame=r},12132:(I,O,C)=>{C.d(O,{e:()=>K});var j=C(12088);class K{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}K.Instances=[],K.OnEnginesDisposedObservable=new j.c,K._LastCreatedScene=null,K.UseFallbackTexture=!0,K.FallbackTexture=""},12197:(I,O,C)=>{C.d(O,{b:()=>j});class j{static SetMatrixPrecision(I){if(j.MatrixTrackPrecisionChange=!1,I&&!j.MatrixUse64Bits&&j.MatrixTrackedMatrices)for(let O=0;O<j.MatrixTrackedMatrices.length;++O){const I=j.MatrixTrackedMatrices[O],C=I.US;I.US=new Array(16);for(let O=0;O<16;++O)I.US[O]=C[O]}j.MatrixUse64Bits=I,j.MatrixCurrentType=j.MatrixUse64Bits?Array:Float32Array,j.MatrixTrackedMatrices=null}}j.MatrixUse64Bits=!1,j.MatrixTrackPrecisionChange=!0,j.MatrixCurrentType=Float32Array,j.MatrixTrackedMatrices=[]},12213:(I,O,C)=>{C.d(O,{c:()=>y});var j=C(12103);const K=new Map;function i(I,O){(function(I){return K.delete(I)})(I)&&j.c.Warn(`Extension with the name '${I}' already exists`),K.set(I,O)}function y(I,O){"image/ktx"!==O&&"image/ktx2"!==O||(I=".ktx"),K.has(I)||(I.endsWith(".ies")&&i(".ies",(async()=>await C.e(15).then(C.bind(C,14602)).then((I=>new I._IESTextureLoader)))),I.endsWith(".dds")&&i(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,14606)).then((I=>new I._DDSTextureLoader)))),I.endsWith(".basis")&&i(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,14622)).then((I=>new I._BasisTextureLoader)))),I.endsWith(".env")&&i(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,14629)).then((I=>new I._ENVTextureLoader)))),I.endsWith(".hdr")&&i(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,14636)).then((I=>new I._HDRTextureLoader)))),(I.endsWith(".ktx")||I.endsWith(".ktx2"))&&(i(".ktx",(async()=>await C.e(30).then(C.bind(C,14642)).then((I=>new I._KTXTextureLoader)))),i(".ktx2",(async()=>await C.e(30).then(C.bind(C,14642)).then((I=>new I._KTXTextureLoader))))),I.endsWith(".tga")&&i(".tga",(async()=>await C.e(50).then(C.bind(C,14646)).then((I=>new I._TGATextureLoader)))),I.endsWith(".exr")&&i(".exr",(async()=>await C.e(16).then(C.bind(C,14654)).then((I=>new I._ExrTextureLoader)))));const j=K.get(I);return j?Promise.resolve(j(O)):null}},12201:(I,O,C)=>{C.d(O,{c:()=>y});var j,K=C(12088),i=C(12208);!function(I){I[I.Unknown=0]="Unknown",I[I.Url=1]="Url",I[I.Temp=2]="Temp",I[I.Raw=3]="Raw",I[I.Dynamic=4]="Dynamic",I[I.RenderTarget=5]="RenderTarget",I[I.MultiRenderTarget=6]="MultiRenderTarget",I[I.Cube=7]="Cube",I[I.CubeRaw=8]="CubeRaw",I[I.CubePrefiltered=9]="CubePrefiltered",I[I.Raw3D=10]="Raw3D",I[I.Raw2DArray=11]="Raw2DArray",I[I.DepthStencil=12]="DepthStencil",I[I.CubeRawRGBD=13]="CubeRawRGBD",I[I.Depth=14]="Depth"}(j||(j={}));class y extends i.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(I){this.generateMipMaps=I}get uniqueId(){return this._uniqueId}_setUniqueId(I){this._uniqueId=I}getEngine(){return this._engine}get source(){return this._source}constructor(I,O){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new K.c,this.onErrorObservable=new K.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=I,this._source=O,this._uniqueId=y._Counter++,C||(this._hardwareTexture=I._createHardwareTexture())}incrementReferences(){this._references++}updateSize(I,O){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,I,O,C),this.width=I,this.height=O,this.depth=C,this.baseWidth=I,this.baseHeight=O,this.baseDepth=C,this._size=I*O*C}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const I=this.onRebuildCallback(this),O=O=>{O._swapAndDie(this,!1),this.isReady=I.isReady};return void(I.isAsync?I.proxy.then(O):O(I.proxy))}let I;switch(this.source){case 2:case 12:case 14:break;case 1:return void(I=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(I=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:I=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),I._swapAndDie(this,!1),this.isReady=!0;break;case 10:I=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 11:I=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 4:I=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),I._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(I=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:I=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),I._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return I=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(I=>{I&&I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(I._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(I){var O;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(O=this._hardwareTexture)||void 0===O||O.setUsage(I._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),I._hardwareTexture=this._hardwareTexture,C&&(I._isRGBD=this._isRGBD),this._lodTextureHigh&&(I._lodTextureHigh&&I._lodTextureHigh.dispose(),I._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(I._lodTextureMid&&I._lodTextureMid.dispose(),I._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(I._lodTextureLow&&I._lodTextureLow.dispose(),I._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(I._irradianceTexture&&I._irradianceTexture.dispose(),I._irradianceTexture=this._irradianceTexture);const j=this._engine.getLoadedTexturesCache();let K=j.indexOf(this);-1!==K&&j.splice(K,1),K=j.indexOf(I),-1===K&&j.push(I)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}y._Counter=0},12208:(I,O,C)=>{C.d(O,{c:()=>j});class j{get wrapU(){return this._cachedWrapU}set wrapU(I){this._cachedWrapU=I}get wrapV(){return this._cachedWrapV}set wrapV(I){this._cachedWrapV=I}get wrapR(){return this._cachedWrapR}set wrapR(I){this._cachedWrapR=I}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(I){this._cachedAnisotropicFilteringLevel=I}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(I){this._comparisonFunction=I}get useMipMaps(){return this._useMipMaps}set useMipMaps(I){this._useMipMaps=I}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=I,this._cachedWrapV=O,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=j,this.samplingMode=K,this._comparisonFunction=i,this}compareSampler(I){return this._cachedWrapU===I._cachedWrapU&&this._cachedWrapV===I._cachedWrapV&&this._cachedWrapR===I._cachedWrapR&&this._cachedAnisotropicFilteringLevel===I._cachedAnisotropicFilteringLevel&&this.samplingMode===I.samplingMode&&this._comparisonFunction===I._comparisonFunction&&this._useMipMaps===I._useMipMaps}}},12112:(I,O,C)=>{C.d(O,{b:()=>i});var j=C(12103);const K=(I,O,C)=>I?I.getClassName&&"Mesh"===I.getClassName()?null:!I.getClassName||"SubMesh"!==I.getClassName()&&"PhysicsBody"!==I.getClassName()?I.clone?I.clone():Array.isArray(I)?I.slice():C&&"object"===typeof I?{...I}:null:I.clone(O):null;class i{static DeepCopy(I,O,C,i){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const S=function(I){const O=[];do{const C=Object.getOwnPropertyNames(I);for(const I of C)-1===O.indexOf(I)&&O.push(I)}while(I=Object.getPrototypeOf(I));return O}(I);for(const p of S){if("_"===p[0]&&(!i||-1===i.indexOf(p)))continue;if(p.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(p))continue;const S=I[p],N=typeof S;if("function"!==N)try{if("object"===N)if(S instanceof Uint8Array)O[p]=Uint8Array.from(S);else if(S instanceof Array){if(O[p]=[],S.length>0)if("object"==typeof S[0])for(let I=0;I<S.length;I++){const C=K(S[I],O,y);-1===O[p].indexOf(C)&&O[p].push(C)}else O[p]=S.slice(0)}else O[p]=K(S,O,y);else O[p]=S}catch(U){j.c.Warn(U.message)}}}}},12148:(I,O,C)=>{C.d(O,{d:()=>j,e:()=>K,g:()=>i});class j extends Error{}j._setPrototypeOf=Object.setPrototypeOf||((I,O)=>(I.__proto__=O,I));const K={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class i extends j{constructor(I,O,C){super(I),this.errorCode=O,this.innerError=C,this.name="RuntimeError",j._setPrototypeOf(this,i.prototype)}}},12139:(I,O,C)=>{C.d(O,{e:()=>u,g:()=>W,i:()=>H,m:()=>a,s:()=>X,p:()=>E,t:()=>c,v:()=>n,x:()=>T,A:()=>Y});var j=C(12130),K=C(12095),i=C(12088);class y{}y.FilesToLoad={};var S=C(12148),U=C(12154),p=C(12158),N=C(12132),Q=C(12103),s=C(12163),Z=C(12160),q=C(12167);const mI=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class E extends S.g{constructor(I,O){super(I,S.e.LoadFileError),this.name="LoadFileError",S.d._setPrototypeOf(this,E.prototype),O instanceof j.d?this.request=O:this.file=O}}class h extends S.g{constructor(I,O){super(I,S.e.RequestFileError),this.request=O,this.name="RequestFileError",S.d._setPrototypeOf(this,h.prototype)}}class r extends S.g{constructor(I,O){super(I,S.e.ReadFileError),this.file=O,this.name="ReadFileError",S.d._setPrototypeOf(this,r.prototype)}}const W={DefaultRetryStrategy:class{static ExponentialBackoff(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,j,K)=>0!==j.status||K>=I||-1!==C.indexOf("file:")?-1:Math.pow(2,K)*O}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:I=>I,ScriptBaseUrl:"",ScriptPreprocessUrl:I=>I,CleanUrl:I=>I=I.replace(/#/gm,"%23")},Y=(I,O)=>{if((!I||0!==I.indexOf("data:"))&&W.CorsBehavior)if("string"===typeof W.CorsBehavior||W.CorsBehavior instanceof String)O.crossOrigin=W.CorsBehavior;else{const C=W.CorsBehavior(I);C&&(O.crossOrigin=C)}},o={getRequiredSize:null},c=function(I,O,C,K){let i,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",p=arguments.length>5?arguments[5]:void 0,Q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:N.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Q||void 0===Q||!Q._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let s=!1;I instanceof ArrayBuffer||ArrayBuffer.isView(I)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(i=URL.createObjectURL(new Blob([I],{type:S})),s=!0):i=`data:${S};base64,`+(0,U.h)(I):I instanceof Blob?(i=URL.createObjectURL(I),s=!0):(i=W.CleanUrl(I),i=W.PreprocessUrl(i));const Z=O=>{if(C){const j=i||I.toString();C(`Error while trying to load image: ${0===j.indexOf("http")||j.length<=128?j:j.slice(0,128)+"..."}`,O)}};if(null!==Q&&void 0!==Q&&Q._features.forceBitmapOverHTMLImageElement)return X(i,(j=>{Q.createImageBitmap(new Blob([j],{type:S}),{premultiplyAlpha:"none",...p}).then((I=>{O(I),s&&URL.revokeObjectURL(i)})).catch((O=>{C&&C("Error while trying to load image: "+I,O)}))}),void 0,K||void 0,!0,((I,O)=>{Z(O)})),null;const q=new Image;if(o.getRequiredSize){const O=o.getRequiredSize(I);O.width&&(q.width=O.width),O.height&&(q.height=O.height)}Y(i,q);const mI=[],E=()=>{for(const I of mI)I.target.removeEventListener(I.name,I.handler);mI.length=0};mI.push({target:q,name:"load",handler:()=>{E(),O(q),s&&q.src&&URL.revokeObjectURL(q.src)}}),mI.push({target:q,name:"error",handler:I=>{E(),Z(I),s&&q.src&&URL.revokeObjectURL(q.src)}}),mI.push({target:document,name:"securitypolicyviolation",handler:I=>{if(I.blockedURI!==q.src||"pS"===I.disposition)return;E();const O=new Error(`CSP violation of policy ${I.effectiveDirective} ${I.blockedURI}. Current policy is ${I.originalPolicy}`);N.e.UseFallbackTexture=!1,Z(O),s&&q.src&&URL.revokeObjectURL(q.src),q.src=""}}),(()=>{for(const I of mI)I.target.addEventListener(I.name,I.handler)})();const h="blob:"===i.substring(0,5),r="data:"===i.substring(0,5),c=()=>{h||r||!j.d.IsCustomRequestAvailable?q.src=i:X(i,((I,O,C)=>{const j=new Blob([I],{type:!S&&C?C:S}),K=URL.createObjectURL(j);s=!0,q.src=K}),void 0,K||void 0,!0,((I,O)=>{Z(O)}))},n=()=>{K&&K.loadImage(i,q)};if(!h&&!r&&K&&K.enableTexturesOffline)K.open(n,c);else{if(-1!==i.indexOf("file:")){const I=decodeURIComponent(i.substring(5).toLowerCase());if(y.FilesToLoad[I]&&"undefined"!==typeof URL){try{let O;try{O=URL.createObjectURL(y.FilesToLoad[I])}catch(T){O=URL.createObjectURL(y.FilesToLoad[I])}q.src=O,s=!0}catch(H){q.src=""}return q}}c()}return q},n=(I,O,C,j,K)=>{const y=new FileReader,S={onCompleteObservable:new i.c,abort:()=>y.abort()};return y.onloadend=()=>S.onCompleteObservable.notifyObservers(S),K&&(y.onerror=()=>{K(new r(`Unable to read ${I.name}`,I))}),y.onload=I=>{O(I.target.result)},C&&(y.onprogress=C),j?y.readAsArrayBuffer(I):y.readAsText(I),S},X=(I,O,C,j,K,U,p)=>{if(I.name)return n(I,O,C,K,U?I=>{U(void 0,I)}:void 0);const N=I;if(-1!==N.indexOf("file:")){let I=decodeURIComponent(N.substring(5).toLowerCase());0===I.indexOf("./")&&(I=I.substring(2));const j=y.FilesToLoad[I];if(j)return n(j,O,C,K,U?I=>U(void 0,new E(I.message,I.file)):void 0)}const{match:Z,type:q}=M(N);if(Z){const I={onCompleteObservable:new i.c,abort:()=>()=>{}};try{const I=K?u(N):J(N);O(I,void 0,q)}catch(S){U?U(void 0,S):Q.c.Error(S.message||"Failed to parse the Data URL")}return s.e.SetImmediate((()=>{I.onCompleteObservable.notifyObservers(I)})),I}return T(N,((I,C)=>{O(I,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,j,K,U?I=>{U(I.request,new E(I.message,I.request))}:void 0,p)},T=(I,O,C,y,S,U,p)=>{I=W.CleanUrl(I),I=W.PreprocessUrl(I);const N=W.BaseUrl+I;let s=!1;const Z={onCompleteObservable:new i.c,abort:()=>s=!0},q=()=>{let I,i=new j.d,y=null;const q=()=>{i&&(C&&i.removeEventListener("progress",C),I&&i.removeEventListener("readystatechange",I),i.removeEventListener("loadend",mI))};let mI=()=>{q(),Z.onCompleteObservable.notifyObservers(Z),Z.onCompleteObservable.clear(),C=void 0,I=null,mI=null,U=void 0,p=void 0,O=void 0};Z.abort=()=>{s=!0,mI&&mI(),i&&i.readyState!==(XMLHttpRequest.DONE||4)&&i.abort(),null!==y&&(clearTimeout(y),y=null),i=null};const E=I=>{const O=I.message||"Unknown error";U&&i?U(new h(O,i)):Q.c.Error(O)},r=Q=>{if(i){if(i.open("GET",N),p)try{p(i)}catch(Z){return void E(Z)}S&&(i.responseType="arraybuffer"),C&&i.addEventListener("progress",C),mI&&i.addEventListener("loadend",mI),I=()=>{if(!s&&i&&i.readyState===(XMLHttpRequest.DONE||4)){if(I&&i.removeEventListener("readystatechange",I),i.status>=200&&i.status<300||0===i.status&&(!(0,K.k)()||b())){const I=S?i.response:i.responseText;if(null!==I){try{O&&O(I,i)}catch(Z){E(Z)}return}}const C=W.DefaultRetryStrategy;if(C){const I=C(N,i,Q);if(-1!==I)return q(),i=new j.d,void(y=setTimeout((()=>r(Q+1)),I))}const p=new h("Error status: "+i.status+" "+i.statusText+" - Unable to load "+N,i);U&&U(p)}},i.addEventListener("readystatechange",I),i.send()}};r(0)};if(y&&y.enableSceneOffline){const j=I=>{I&&I.status>400?U&&U(I):q()},K=()=>{y&&y.loadFile(W.BaseUrl+I,(I=>{!s&&O&&O(I),Z.onCompleteObservable.notifyObservers(Z)}),C?I=>{!s&&C&&C(I)}:void 0,j,S)};y.open(K,j)}else q();return Z},H=I=>{const{match:O,type:C}=M(I);if(O)return C||void 0;const j=I.lastIndexOf(".");switch(I.substring(j+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"NS":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},b=()=>"undefined"!==typeof location&&"file:"===location.protocol,a=I=>mI.test(I),M=I=>{const O=mI.exec(I);if(null===O||0===O.length)return{match:!1,type:""};return{match:!0,type:O[0].replace("data:","").replace("base64,","")}};function u(I){return(0,U.c)(I.split(",")[1])}const J=I=>(0,U.f)(I.split(",")[1]);let f;q.b._FileToolsLoadImage=c,Z.b.loadFile=X,p.o.loadFile=X;((I,O,C,j,K,i,y,S,U,p)=>{f={DecodeBase64UrlToBinary:I,DecodeBase64UrlToString:O,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:j,IsFileURL:K,LoadFile:i,LoadImage:y,ReadFile:S,RequestFile:U,SetCorsBehavior:p},Object.defineProperty(f,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(I){C.DefaultRetryStrategy=I}}),Object.defineProperty(f,"BaseUrl",{get:function(){return C.BaseUrl},set:function(I){C.BaseUrl=I}}),Object.defineProperty(f,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(I){C.PreprocessUrl=I}}),Object.defineProperty(f,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(I){C.CorsBehavior=I}})})(u,J,W,a,b,X,c,n,T,Y)},12234:(I,O,C)=>{function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(I=>{const O=16*Math.random()|0;return("x"===I?O:3&O|8).toString(16)}))}C.d(O,{c:()=>j})},12221:(I,O,C)=>{C.d(O,{e:()=>i});var j=C(12103),K=C(12226);class i{static Instantiate(I){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[I])return this.RegisteredExternalClasses[I];const O=(0,K.c)(I);if(O)return O;j.c.Warn(I+" not found, you may have missed an import.");const C=I.split(".");let i=window||this;for(let j=0,K=C.length;j<K;j++)i=i[C[j]];return"function"!==typeof i?null:i}}i.RegisteredExternalClasses={}},12118:(I,O,C)=>{C.d(O,{c:()=>K});var j=C(12095);class K{static get Now(){return(0,j.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12154:(I,O,C)=>{C.d(O,{c:()=>y,f:()=>i,g:()=>j,h:()=>K});const j=I=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(I);let O="";for(let C=0;C<I.byteLength;C++)O+=String.fromCharCode(I[C]);return O},K=I=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,j,K,i,y,S,U,p="",N=0;const Q=ArrayBuffer.isView(I)?new Uint8Array(I.buffer,I.byteOffset,I.byteLength):new Uint8Array(I);for(;N<Q.length;)C=Q[N++],j=N<Q.length?Q[N++]:Number.NaN,K=N<Q.length?Q[N++]:Number.NaN,i=C>>2,y=(3&C)<<4|j>>4,S=(15&j)<<2|K>>6,U=63&K,isNaN(j)?S=U=64:isNaN(K)&&(U=64),p+=O.charAt(i)+O.charAt(y)+O.charAt(S)+O.charAt(U);return p},i=I=>atob(I),y=I=>{const O=i(I),C=O.length,j=new Uint8Array(new ArrayBuffer(C));for(let K=0;K<C;K++)j[K]=O.charCodeAt(K);return j.buffer}},12240:(I,O,C)=>{function j(I){let O=1;do{O*=2}while(O<I);return O===I}function K(I,O,C){return I*(1-C)+O*C}function i(I){const O=y(I),C=S(I);return O-I>I-C?C:O}function y(I){return I--,I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,I|=I>>16,++I}function S(I){return I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,(I|=I>>16)-(I>>1)}function U(I,O){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=S(I);break;case 2:C=i(I);break;default:C=y(I)}return Math.min(C,O)}C.d(O,{b:()=>S,d:()=>U,g:()=>j,i:()=>K,l:()=>i})},12083:(I,O,C)=>{C.r(O),C.d(O,{AsyncLoop:()=>r,Tools:()=>E,className:()=>h});var j=C(12088),K=C(12095),i=C(12103),y=C(12112),S=C(12118),U=C(12126),p=C(12130),N=C(12132),Q=C(12139),s=C(12163),Z=C(12221),q=C(12234),mI=C(12240);class E{static get BaseUrl(){return Q.g.BaseUrl}static set BaseUrl(I){Q.g.BaseUrl=I}static get CleanUrl(){return Q.g.CleanUrl}static set CleanUrl(I){Q.g.CleanUrl=I}static IsAbsoluteUrl(I){return 0===I.indexOf("//")||-1!==I.indexOf("://")&&(-1!==I.indexOf(".")&&(-1!==I.indexOf("/")&&(!(I.indexOf(":")>I.indexOf("/"))&&(I.indexOf("://")<I.indexOf(".")||(0===I.indexOf("data:")||0===I.indexOf("blob:"))))))}static set ScriptBaseUrl(I){Q.g.ScriptBaseUrl=I}static get ScriptBaseUrl(){return Q.g.ScriptBaseUrl}static set CDNBaseUrl(I){E.ScriptBaseUrl=I,E.AssetBaseUrl=I}static set ScriptPreprocessUrl(I){Q.g.ScriptPreprocessUrl=I}static get ScriptPreprocessUrl(){return Q.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Q.g.DefaultRetryStrategy}static set DefaultRetryStrategy(I){Q.g.DefaultRetryStrategy=I}static get CorsBehavior(){return Q.g.CorsBehavior}static set CorsBehavior(I){Q.g.CorsBehavior=I}static get UseFallbackTexture(){return N.e.UseFallbackTexture}static set UseFallbackTexture(I){N.e.UseFallbackTexture=I}static get RegisteredExternalClasses(){return Z.e.RegisteredExternalClasses}static set RegisteredExternalClasses(I){Z.e.RegisteredExternalClasses=I}static get fallbackTexture(){return N.e.FallbackTexture}static set fallbackTexture(I){N.e.FallbackTexture=I}static FetchToRef(I,O,C,j,K,i){const y=4*((Math.abs(I)*C%C|0)+(Math.abs(O)*j%j|0)*C);i.r=K[y]/255,i.g=K[y+1]/255,i.b=K[y+2]/255,i.a=K[y+3]/255}static Mix(I,O,C){return 0}static Instantiate(I){return Z.e.Instantiate(I)}static SetImmediate(I){s.e.SetImmediate(I)}static IsExponentOfTwo(I){return!0}static FloatRound(I){return Math.fround(I)}static GetFilename(I){const O=I.lastIndexOf("/");return O<0?I:I.substring(O+1)}static GetFolderPath(I){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=I.lastIndexOf("/");return C<0?O?I:"":I.substring(0,C+1)}static ToDegrees(I){return 180*I/Math.PI}static ToRadians(I){return I*Math.PI/180}static SmoothAngleChange(I,O){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const j=this.ToRadians(I),K=this.ToRadians(O);return this.ToDegrees(Math.atan2((1-C)*Math.sin(K)+C*Math.sin(j),(1-C)*Math.cos(K)+C*Math.cos(j)))}static MakeArray(I,O){return!0===O||void 0!==I&&null!=I?Array.isArray(I)?I:[I]:null}static GetPointerPrefix(I){return(0,K.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(I,O){(0,Q.A)(I,O)}static SetReferrerPolicyBehavior(I,O){O.referrerPolicy=I}static get PreprocessUrl(){return Q.g.PreprocessUrl}static set PreprocessUrl(I){Q.g.PreprocessUrl=I}static LoadImage(I,O,C,j,K,i){return(0,Q.t)(I,O,C,j,K,i)}static LoadFile(I,O,C,j,K,i){return(0,Q.s)(I,O,C,j,K,i)}static async LoadFileAsync(I){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,j)=>{(0,Q.s)(I,(I=>{C(I)}),void 0,void 0,O,((I,O)=>{j(O)}))}))}static GetAssetUrl(I){if(!I)return"";if(E.AssetBaseUrl&&I.startsWith(E._DefaultAssetsUrl)){const O="/"===E.AssetBaseUrl[E.AssetBaseUrl.length-1]?E.AssetBaseUrl.substring(0,E.AssetBaseUrl.length-1):E.AssetBaseUrl;return I.replace(E._DefaultAssetsUrl,O)}return I}static GetBabylonScriptURL(I,O){if(!I)return"";if(E.ScriptBaseUrl&&I.startsWith(E._DefaultCdnUrl)){const O="/"===E.ScriptBaseUrl[E.ScriptBaseUrl.length-1]?E.ScriptBaseUrl.substring(0,E.ScriptBaseUrl.length-1):E.ScriptBaseUrl;I=I.replace(E._DefaultCdnUrl,O)}return I=E.ScriptPreprocessUrl(I),O&&(I=E.GetAbsoluteUrl(I)),I}static LoadBabylonScript(I,O,C,j){I=E.GetBabylonScriptURL(I),E.LoadScript(I,O,C)}static async LoadBabylonScriptAsync(I){return I=E.GetBabylonScriptURL(I),await E.LoadScriptAsync(I)}static LoadScript(I,O,C,j){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(I),O&&O()}catch(U){null===C||void 0===C||C(`Unable to load script '${I}' in worker`,U)}return}if(!(0,K.k)())return void(null===C||void 0===C||C(`Cannot load script '${I}' outside of a window or a worker`));const y=document.getElementsByTagName("head")[0],S=document.createElement("script");i?(S.setAttribute("type","module"),S.innerText=I):(S.setAttribute("type","text/javascript"),S.setAttribute("src",I)),j&&(S.id=j),S.onload=()=>{O&&O()},S.onerror=O=>{C&&C(`Unable to load script '${I}'`,O)},y.appendChild(S)}static async LoadScriptAsync(I,O){return await new Promise(((C,j)=>{this.LoadScript(I,(()=>{C()}),((I,O)=>{j(O||new Error(I))}),O)}))}static ReadFileAsDataURL(I,O,C){const K=new FileReader,i={onCompleteObservable:new j.c,abort:()=>K.abort()};return K.onloadend=()=>{i.onCompleteObservable.notifyObservers(i)},K.onload=I=>{O(I.target.result)},K.onprogress=C,K.readAsDataURL(I),i}static ReadFile(I,O,C,j,K){return(0,Q.v)(I,O,C,j,K)}static FileAsURL(I){const O=new Blob([I]);return window.URL.createObjectURL(O)}static Format(I){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return I.toFixed(O)}static DeepCopy(I,O,C,j){y.b.DeepCopy(I,O,C,j)}static IsEmpty(I){for(const O in I)if(Object.prototype.hasOwnProperty.call(I,O))return!1;return!0}static RegisterTopRootEvents(I,O){for(let j=0;j<O.length;j++){const K=O[j];I.addEventListener(K.name,K.handler,!1);try{window.parent&&window.parent.addEventListener(K.name,K.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(I,O){for(let j=0;j<O.length;j++){const K=O[j];I.removeEventListener(K.name,K.handler);try{I.parent&&I.parent.removeEventListener(K.name,K.handler)}catch(C){}}}static async DumpFramebuffer(I,O,C,j){throw(0,U.b)("DumpTools")}static DumpData(I,O,C,j){throw(0,U.b)("DumpTools")}static async DumpDataAsync(I,O,C){throw(0,U.b)("DumpTools")}static _IsOffScreenCanvas(I){return void 0!==I.convertToBlob}static ToBlob(I,O){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0;E._IsOffScreenCanvas(I)||I.toBlob||(I.toBlob=function(I,O,C){setTimeout((()=>{const j=atob(this.toDataURL(O,C).split(",")[1]),K=j.length,i=new Uint8Array(K);for(let I=0;I<K;I++)i[I]=j.charCodeAt(I);I(new Blob([i]))}))}),E._IsOffScreenCanvas(I)?I.convertToBlob({type:C,quality:j}).then((I=>O(I))):I.toBlob((function(I){O(I)}),C,j)}static DownloadBlob(I,O){if("download"in document.createElement("a")){if(!O){const I=new Date;O="screenshot_"+((I.getFullYear()+"-"+(I.getMonth()+1)).slice(2)+"-"+I.getDate()+"_"+I.getHours()+"-"+("0"+I.getMinutes()).slice(-2))+".png"}E.Download(I,O)}else if(I&&"undefined"!==typeof URL){const O=URL.createObjectURL(I),C=window.open("");if(!C)return;const j=C.document.createElement("img");j.onload=function(){URL.revokeObjectURL(O)},j.src=O,C.document.body.appendChild(j)}}static EncodeScreenshotCanvasData(I,O){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0,K=arguments.length>4?arguments[4]:void 0;if("string"!==typeof j&&O){if(O){if(E._IsOffScreenCanvas(I))return void I.convertToBlob({type:C,quality:K}).then((I=>{const C=new FileReader;C.readAsDataURL(I),C.onloadend=()=>{const I=C.result;O(I)}}));const j=I.toDataURL(C,K);O(j)}}else this.ToBlob(I,(function(I){I&&E.DownloadBlob(I,j),O&&O("")}),C,K)}static Download(I,O){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(I),j=document.createElement("a");document.body.appendChild(j),j.style.display="none",j.href=C,j.download=O,j.addEventListener("click",(()=>{j.parentElement&&j.parentElement.removeChild(j)})),j.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(I){return"boolean"===typeof I[0]?I[0]:"boolean"===typeof I[1]&&I[1]}static CreateScreenshot(I,O,C,j){throw(0,U.b)("ScreenshotTools")}static async CreateScreenshotAsync(I,O,C){throw(0,U.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(I,O,C,j){throw(0,U.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(I,O,C){throw(0,U.b)("ScreenshotTools")}static RandomId(){return(0,q.c)()}static IsBase64(I){return(0,Q.m)(I)}static DecodeBase64(I){return(0,Q.e)(I)}static get errorsCount(){return i.c.errorsCount}static Log(I){i.c.Log(I)}static Warn(I){i.c.Warn(I)}static Error(I){i.c.Error(I)}static get LogCache(){return i.c.LogCache}static ClearLogCache(){i.c.ClearLogCache()}static set LogLevels(I){i.c.LogLevels=I}static set PerformanceLogLevel(I){return(I&E.PerformanceUserMarkLogLevel)===E.PerformanceUserMarkLogLevel?(E.StartPerformanceCounter=E._StartUserMark,void(E.EndPerformanceCounter=E._EndUserMark)):(I&E.PerformanceConsoleLogLevel)===E.PerformanceConsoleLogLevel?(E.StartPerformanceCounter=E._StartPerformanceConsole,void(E.EndPerformanceCounter=E._EndPerformanceConsole)):(E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,void(E.EndPerformanceCounter=E._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(I,O){}static _EndPerformanceCounterDisabled(I,O){}static _StartUserMark(I){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._Performance){if(!(0,K.k)())return;E._Performance=window.performance}O&&E._Performance.mark&&E._Performance.mark(I+"-Begin")}static _EndUserMark(I){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&E._Performance.mark&&(E._Performance.mark(I+"-End"),E._Performance.measure(I,I+"-Begin",I+"-End"))}static _StartPerformanceConsole(I){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(E._StartUserMark(I,O),console.time&&console.time(I))}static _EndPerformanceConsole(I){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(E._EndUserMark(I,O),console.timeEnd(I))}static get Now(){return S.c.Now}static GetClassName(I){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!O&&I.getClassName)C=I.getClassName();else{if(I instanceof Object){C=(O?I:Object.getPrototypeOf(I)).constructor.__bjsclassName__}C||(C=typeof I)}return C}static First(I,O){for(const C of I)if(O(C))return C;return null}static getFullClassName(I){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,j=null;if(!O&&I.getClassName)C=I.getClassName();else{if(I instanceof Object){const K=O?I:Object.getPrototypeOf(I);C=K.constructor.__bjsclassName__,j=K.constructor.__bjsmoduleName__}C||(C=typeof I)}return C?(null!=j?j+".":"")+C:null}static async DelayAsync(I){await new Promise((O=>{setTimeout((()=>{O()}),I)}))}static IsSafari(){return!!(0,K.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function h(I,O){return C=>{C.__bjsclassName__=I,C.__bjsmoduleName__=null!=O?O:null}}E.AssetBaseUrl="",E.UseCustomRequestHeaders=!1,E.CustomRequestHeaders=p.d.CustomRequestHeaders,E.GetDOMTextContent=K.b,E._DefaultCdnUrl="https://cdn.babylonjs.com",E._DefaultAssetsUrl="https://assets.babylonjs.com/core",E.GetAbsoluteUrl="object"===typeof document?I=>{const O=document.createElement("a");return O.href=I,O.href}:"function"===typeof URL&&"object"===typeof location?I=>new URL(I,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},E.NoneLogLevel=i.c.NoneLogLevel,E.MessageLogLevel=i.c.MessageLogLevel,E.WarningLogLevel=i.c.WarningLogLevel,E.ErrorLogLevel=i.c.ErrorLogLevel,E.AllLogLevel=i.c.AllLogLevel,E.IsWindowObjectExist=K.k,E.PerformanceNoneLogLevel=0,E.PerformanceUserMarkLogLevel=1,E.PerformanceConsoleLogLevel=2,E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,E.EndPerformanceCounter=E._EndPerformanceCounterDisabled;class r{constructor(I,O,C){let j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=I,this.index=j-1,this._done=!1,this._fn=O,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(I,O,C){const j=new r(I,O,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return j.executeNext(),j}static SyncAsyncForLoop(I,O,C,j,K){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return r.Run(Math.ceil(I/O),(j=>{K&&K()?j.breakLoop():setTimeout((()=>{for(let i=0;i<O;++i){const y=j.index*O+i;if(y>=I)break;if(C(y),K&&K()){j.breakLoop();break}}j.executeNext()}),i)}),j)}}E.Mix=mI.i,E.IsExponentOfTwo=mI.g,N.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12226:(I,O,C)=>{C.d(O,{c:()=>i,e:()=>K});const j={};function K(I,O){j[I]=O}function i(I){return j[I]}},12130:(I,O,C)=>{C.d(O,{d:()=>j});class j{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(j.CustomRequestHeaders).length>0||j.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const I in j.CustomRequestHeaders){const O=j.CustomRequestHeaders[I];O&&this._xhr.setRequestHeader(I,O)}}_shouldSkipRequestModifications(I){return j.SkipRequestModificationForBabylonCDN&&(I.includes("preview.babylonjs.com")||I.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(I){this._xhr.onprogress=I}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(I){this._xhr.responseType=I}get timeout(){return this._xhr.timeout}set timeout(I){this._xhr.timeout=I}addEventListener(I,O,C){this._xhr.addEventListener(I,O,C)}removeEventListener(I,O,C){this._xhr.removeEventListener(I,O,C)}abort(){this._xhr.abort()}send(I){j.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(I)}open(I,O){for(const C of j.CustomRequestModifiers){if(this._shouldSkipRequestModifications(O))return;O=C(this._xhr,O)||O}O=(O=O.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=O,this._xhr.open(I,O,!0)}setRequestHeader(I,O){this._xhr.setRequestHeader(I,O)}getResponseHeader(I){return this._xhr.getResponseHeader(I)}}j.CustomRequestHeaders={},j.CustomRequestModifiers=new Array,j.SkipRequestModificationForBabylonCDN=!0}}]);