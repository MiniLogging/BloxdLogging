"use strict";(self.gpkvekif0vo=self.gpkvekif0vo||[]).push([[8],{12273:(a,O,i)=>{i.d(O,{c:()=>M});var H=i(12236),b=i(12209),G=i(12281),q=i(12308),Q=i(12218);class k{constructor(){let a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,a&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(a){this._zOffset!==a&&(this._zOffset=a,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(a){this._zOffsetUnits!==a&&(this._zOffsetUnits=a,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(a){this._cullFace!==a&&(this._cullFace=a,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(a){this._cull!==a&&(this._cull=a,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(a){this._depthFunc!==a&&(this._depthFunc=a,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(a){this._depthMask!==a&&(this._depthMask=a,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(a){this._depthTest!==a&&(this._depthTest=a,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(a){this._frontFace!==a&&(this._frontFace=a,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(a){this.isDirty&&(this._isCullDirty&&(this.cull?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(a.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(a.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(a.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(a.enable(a.POLYGON_OFFSET_FILL),a.polygonOffset(this.zOffset,this.zOffsetUnits)):a.disable(a.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(a.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class I{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(a){this._func!==a&&(this._func=a,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(a){this._funcRef!==a&&(this._funcRef=a,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(a){this._funcMask!==a&&(this._funcMask=a,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(a){this._opStencilFail!==a&&(this._opStencilFail=a,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(a){this._opDepthFail!==a&&(this._opDepthFail=a,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(a){this._opStencilDepthPass!==a&&(this._opStencilDepthPass=a,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(a){this._mask!==a&&(this._mask=a,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(a){this._enabled!==a&&(this._enabled=a,this._isStencilTestDirty=!0)}constructor(){let a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,a&&this.reset()}reset(){var a;this.stencilMaterial=void 0,null===(a=this.stencilGlobal)||void 0===a||a.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(a){var O;if(!a)return;const i=!this.useStencilGlobalOnly&&!(null===(O=this.stencilMaterial)||void 0===O||!O.enabled);this.enabled=i?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=i?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=i?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=i?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=i?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=i?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=i?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=i?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(a.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(a.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(a.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class P{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=P.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=P.KEEP,this.opDepthFail=P.KEEP,this.opStencilDepthPass=P.REPLACE}get stencilFunc(){return this.func}set stencilFunc(a){this.func=a}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(a){this.funcRef=a}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(a){this.funcMask=a}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(a){this.opStencilFail=a}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(a){this.opDepthFail=a}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(a){this.opStencilDepthPass=a}get stencilMask(){return this.mask}set stencilMask(a){this.mask=a}get stencilTest(){return this.enabled}set stencilTest(a){this.enabled=a}}P.ALWAYS=519,P.KEEP=7680,P.REPLACE=7681;class e{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(a){this._alphaBlend!==a&&(this._alphaBlend=a,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(a,O,i,H){this._blendConstants[0]===a&&this._blendConstants[1]===O&&this._blendConstants[2]===i&&this._blendConstants[3]===H||(this._blendConstants[0]=a,this._blendConstants[1]=O,this._blendConstants[2]=i,this._blendConstants[3]=H,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(a,O,i,H){this._blendFunctionParameters[0]===a&&this._blendFunctionParameters[1]===O&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===H||(this._blendFunctionParameters[0]=a,this._blendFunctionParameters[1]=O,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=H,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(a,O){this._blendEquationParameters[0]===a&&this._blendEquationParameters[1]===O||(this._blendEquationParameters[0]=a,this._blendEquationParameters[1]=O,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(a){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?a.enable(a.BLEND):a.disable(a.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(a.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(a.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(a.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var h=i(12225),j=i(12317),Z=i(12201),F=i(12193),r=i(12259),J=i(12334);function ma(a,O){if((0,Z.k)()){const{requestAnimationFrame:i}=O||window;if("function"===typeof i)return i(a)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(a);return setTimeout(a,16)}class M{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(a){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get qb(){return this._useReverseDepthBuffer}set qb(a){a!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=a,this._depthCullingState.depthFunc=a?518:515)}setColorWrite(a){a!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=a)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(a){if(a)return this.isNDCHalfZRange?a.IS_NDC_HALF_ZRANGE="":delete a.IS_NDC_HALF_ZRANGE,this.qb?a.USE_REVERSE_DEPTHBUFFER="":delete a.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?a.USE_EXACT_SRGB_CONVERSIONS="":delete a.USE_EXACT_SRGB_CONVERSIONS);{let a="";return this.isNDCHalfZRange&&(a+="#define IS_NDC_HALF_ZRANGE"),this.qb&&(a&&(a+="\n"),a+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(a&&(a+="\n"),a+="#define USE_EXACT_SRGB_CONVERSIONS"),a}}_rebuildInternalTextures(){const a=this._internalTexturesCache.slice();for(const O of a)O._rebuild()}_rebuildRenderTargetWrappers(){const a=this._renderTargetWrapperCache.slice();for(const O of a)O._rebuild()}_rebuildEffects(){for(const a in this._compiledEffects){const O=this._compiledEffects[a];O._pipelineContext=null,O._prepareEffect()}G.Effect.ResetCache()}_rebuildGraphicsResources(){var a;this.wipeCaches(!0),this._rebuildEffects(),null===(a=this._rebuildComputeEffects)||void 0===a||a.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){b.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(a){setTimeout((()=>{this._clearEmptyResources();const O=this._depthCullingState.depthTest,i=this._depthCullingState.depthFunc,H=this._depthCullingState.depthMask,b=this._stencilState.stencilTest;a(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=O,this._depthCullingState.depthFunc=i,this._depthCullingState.depthMask=H,this._stencilState.stencilTest=b,this._flagContextRestored()}),0)}get h(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(a){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(a){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const a=new Uint8Array(4),O=[a,a,a,a,a,a];this._emptyCubeTexture=this.createRawCubeTexture(O,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(a){if(!a)return this._activeRenderLoops.length=0,void this._cancelFrame();const O=this._activeRenderLoops.indexOf(a);O>=0&&(this._activeRenderLoops.splice(O,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const a=this._frameHandler;if(this._frameHandler=0,(0,Z.k)()){const{cancelAnimationFrame:O}=this.getHostWindow()||window;if("function"===typeof O)return O(a)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(a);return clearTimeout(a)}}Qb(){this.onBeginFrameObservable.notifyObservers(this)}Ib(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(a){this._maxFPS=a,void 0!==a&&(this._minFrameTime=a<=0?Number.MAX_VALUE:1e3/a)}_isOverFrameTime(a){if(!a||void 0===this._maxFPS)return!1;const O=a-this._lastFrameTime;return this._lastFrameTime=a,this._renderAccumulator+=O,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(a){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(a)){let a=!0;(this.h||!this.renderEvenInBackground&&this._windowIsBackground)&&(a=!1),a&&(this.Qb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ib())}}_renderLoop(a){this._processFrame(a),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let a=0;a<this._activeRenderLoops.length;a++){(0,this._activeRenderLoops[a])()}}_renderViews(){return!1}_queueNewFrame(a,O){return ma(a,O)}runRenderLoop(a){-1===this._activeRenderLoops.indexOf(a)&&(this._activeRenderLoops.push(a),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(a){this._depthCullingState.depthTest=a}setZOffset(a){this._depthCullingState.zOffset=this.qb?-a:a}getZOffset(){const a=this._depthCullingState.zOffset;return this.qb?-a:a}setZOffsetUnits(a){this._depthCullingState.zOffsetUnits=this.qb?-a:a}getZOffsetUnits(){const a=this._depthCullingState.zOffsetUnits;return this.qb?-a:a}getHostWindow(){return(0,Z.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(a){this._compatibilityMode=!0}_rebuildTextures(){for(const a of this.scenes)a._rebuildTextures();for(const a of this._virtualScenes)a._rebuildTextures()}_releaseRenderTargetWrapper(a){const O=this._renderTargetWrapperCache.indexOf(a);-1!==O&&this._renderTargetWrapperCache.splice(O,1)}get currentViewport(){return this._cachedViewport}setViewport(a,O,i){const H=O||this.getRenderWidth(),b=i||this.getRenderHeight(),G=a.x||0,q=a.y||0;this._cachedViewport=a,this._viewport(G*H,q*b,H*a.width,b*a.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(a){return new Path2D(a)}get description(){let a=this.name+this.version;return this._caps.parallelShaderCompile&&(a+=" - Parallel shader compilation"),a}_createTextureBase(a,O,i,G){let q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,Q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7?arguments[7]:void 0,P=arguments.length>8?arguments[8]:void 0,e=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,Z=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,F=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,r=arguments.length>13?arguments[13]:void 0,ma=arguments.length>14?arguments[14]:void 0,C=arguments.length>15?arguments[15]:void 0;const n="data:"===(a=a||"").substring(0,5),D="blob:"===a.substring(0,5),U=n&&-1!==a.indexOf(";base64,"),y=h||new j.c(this,1);y!==h&&(y.label=a.substring(0,60));const w=a;!this._transformTextureUrl||U||h||e||(a=this._transformTextureUrl(a)),w!==a&&(y._originalUrl=w);const K=a.lastIndexOf(".");let S=F||(K>-1?a.substring(K).toLowerCase():"");S.indexOf("?")>-1&&(S=S.split("?")[0]);const f=(0,J.e)(S,r);G&&G.addPendingData(y),y.url=a,y.generateMipMaps=!O,y.samplingMode=q,y.invertY=i,y._useSRGBBuffer=this._getUseSRGBBuffer(!!C,O),this._doNotHandleContextLost||(y._buffer=e);let B=null;Q&&!h&&(B=y.onLoadedObservable.add(Q)),h||this._internalTexturesCache.push(y);const T=(i,h)=>{G&&G.removePendingData(y),a===w?(B&&y.onLoadedObservable.remove(B),H.b.UseFallbackTexture&&a!==H.b.FallbackTexture&&this._createTextureBase(H.b.FallbackTexture,O,y.invertY,G,q,null,k,I,P,e,y),i=(i||"Unknown error")+(H.b.UseFallbackTexture?" - Fallback texture was used":""),y.onErrorObservable.notifyObservers({message:i,exception:h}),k&&k(i,h)):(b.c.Warn(`Failed to load ${a}, falling back to ${w}`),this._createTextureBase(w,O,y.invertY,G,q,Q,k,I,P,e,y,Z,F,r,ma,C))};if(f){const O=async a=>{(await f).loadData(a,y,((a,O,i,H,b,Q)=>{Q?T("TextureLoader failed to load data"):I(y,S,G,{width:a,height:O},y.invertY,!i,H,(()=>(b(),!1)),q)}),ma)};e?e instanceof ArrayBuffer?O(new Uint8Array(e)):ArrayBuffer.isView(e)?O(e):k&&k("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(a,(a=>{O(new Uint8Array(a))}),void 0,G?G.offlineProvider:void 0,!0,((a,O)=>{T("Unable to load "+(a&&a.responseURL,O))}))}else{const i=a=>{D&&!this._doNotHandleContextLost&&(y._buffer=a),I(y,S,G,a,y.invertY,O,!1,P,q)};!n||U?e&&("string"===typeof e.decoding||e.close)?i(e):M._FileToolsLoadImage(a||"",i,T,G?G.offlineProvider:null,r,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof Blob?M._FileToolsLoadImage(e,i,T,G?G.offlineProvider:null,r,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):e&&i(e)}return y}_rebuildBuffers(){for(const a of this._uniformBuffers)a._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,Z.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const a in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,a)&&(this._boundTexturesCache[a]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(a){this._name=a}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(a){this._hardwareScalingLevel=a,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(a){this._doNotHandleContextLost=a}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(a,O,i){var b,G;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new k,this._stencilStateComposer=new I,this._stencilState=new P,this._alphaState=new e,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new F.e,this.onCanvasFocusObservable=new F.e,this.onNewSceneAddedObservable=new F.e,this.onResizeObservable=new F.e,this.onCanvasPointerOutObservable=new F.e,this.onEffectErrorObservable=new F.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new F.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=a=>this._renderLoop(a),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new F.e,this.onAfterShaderCompilationObservable=new F.e,this.onBeginFrameObservable=new F.e,this.onEndFrameObservable=new F.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new F.e,this.onContextRestoredObservable=new F.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Pb=new F.e,this.onReleaseEffectsObservable=new F.e,H.b.Instances.push(this),this.startTime=Q.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,q.d.SetMatrixPrecision(!!O.useHighPrecisionMatrix),(0,Z.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=i??!1,O.antialias=a??O.antialias,O.deterministicLockstep=O.deterministicLockstep??!1,O.lockstepMaxSteps=O.lockstepMaxSteps??4,O.timeStep=O.timeStep??1/60,O.hb=O.hb??!0,this._audioContext=(null===(b=O.audioEngineOptions)||void 0===b?void 0:b.audioContext)??null,this._audioDestination=(null===(G=O.audioEngineOptions)||void 0===G?void 0:G.audioDestination)??null,this.premultipliedAlpha=O.premultipliedAlpha??!0,this._doNotHandleContextLost=!!O.doNotHandleContextLost,this._isStencilEnable=!!O.hb,this.useExactSrgbConversions=O.useExactSrgbConversions??!1;const h=(0,Z.k)()&&window.devicePixelRatio||1,j=O.limitDeviceRatio||h;i=i||O.adaptToDeviceRatio||!1,this._hardwareScalingLevel=i?1/Math.min(j,h):1,this._lastDevicePixelRatio=h,this._creationOptions=O}resize(){let a,O,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const a=(0,Z.k)()&&window.devicePixelRatio||1,O=this._lastDevicePixelRatio/a;this._lastDevicePixelRatio=a,this._hardwareScalingLevel*=O}if((0,Z.k)()&&(0,Z.g)())if(this._renderingCanvas){var H,b;const i=null===(H=(b=this._renderingCanvas).getBoundingClientRect)||void 0===H?void 0:H.call(b);a=this._renderingCanvas.clientWidth||(null===i||void 0===i?void 0:i.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,O=this._renderingCanvas.clientHeight||(null===i||void 0===i?void 0:i.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else a=window.innerWidth,O=window.innerHeight;else a=this._renderingCanvas?this._renderingCanvas.width:100,O=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(a/this._hardwareScalingLevel,O/this._hardwareScalingLevel,i)}setSize(a,O){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(a|=0,O|=0,!i&&this._renderingCanvas.width===a&&this._renderingCanvas.height===O)return!1;if(this._renderingCanvas.width=a,this._renderingCanvas.height=O,this.scenes){for(let a=0;a<this.scenes.length;a++){const O=this.scenes[a];for(let a=0;a<O.cameras.length;a++){O.cameras[a]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(a,O,i,H,b,G,q,Q,k,I,P){throw(0,h.e)("engine.rawTexture")}createRawCubeTexture(a,O,i,H,b,G,q,Q){throw(0,h.e)("engine.rawTexture")}createRawTexture3D(a,O,i,H,b,G,q,Q,k,I,P){throw(0,h.e)("engine.rawTexture")}createRawTexture2DArray(a,O,i,H,b,G,q,Q,k,I,P){throw(0,h.e)("engine.rawTexture")}_sharedInit(a){this._renderingCanvas=a}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const a=navigator.userAgent;this.hostInformation.isMobile=-1!==a.indexOf("Mobile")||-1!==a.indexOf("Mac")&&(0,Z.g)()&&"ontouchend"in document},this._checkForMobile(),(0,Z.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(a){return document.createElement("video")}_reportDrawCall(){var a;let O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(a=this._drawCalls)||void 0===a||a.addCount(O,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(a,O){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(a,O){return createImageBitmap(a,O)}resizeImageBitmap(a,O,i){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(a){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(a,O){if("undefined"===typeof document)return new OffscreenCanvas(a,O);const i=document.createElement("canvas");return i.width=a,i.height=O,i}createCanvas(a,O){return M._CreateCanvas(a,O)}static _FileToolsLoadImage(a,O,i,H,b,G,q){throw(0,h.e)("FileTools")}_loadFile(a,O,i,H,b,G){const q=(0,r.l)(a,O,i,H,b,G);return this._activeRequests.push(q),q.onCompleteObservable.add((()=>{const a=this._activeRequests.indexOf(q);-1!==a&&this._activeRequests.splice(a,1)})),q}static _FileToolsLoadFile(a,O,i,H,b,G){if(r.d.loadFile)return r.d.loadFile(a,O,i,H,b,G);throw(0,h.e)("FileTools")}dispose(){var a;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(a=this.releaseComputeEffects)||void 0===a||a.call(this),G.Effect.ResetCache();for(const i of this._activeRequests)i.abort();this._boundRenderFunction=null,this.Pb.notifyObservers(this),this.Pb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,Z.k)()&&window.removeEventListener("resize",this._checkForMobile);const O=H.b.Instances.indexOf(this);O>=0&&H.b.Instances.splice(O,1),H.b.Instances.length||(H.b.OnEnginesDisposedObservable.notifyObservers(this),H.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(a){throw(0,h.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(a,O){for(let i=0;i<H.b.Instances.length;i++){const b=H.b.Instances[i];for(let i=0;i<b.scenes.length;i++)b.scenes[i].markAllMaterialsAsDirty(a,O)}}}M._RenderPassIdCounter=0,M._RescalePostProcessFactory=null,M.CollisionsEpsilon=.001,M.QueueNewFrame=ma},12236:(a,O,i)=>{i.d(O,{b:()=>b});var H=i(12193);class b{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}b.Instances=[],b.OnEnginesDisposedObservable=new H.e,b._LastCreatedScene=null,b.UseFallbackTexture=!0,b.FallbackTexture=""},12308:(a,O,i)=>{i.d(O,{d:()=>H});class H{static SetMatrixPrecision(a){if(H.MatrixTrackPrecisionChange=!1,a&&!H.MatrixUse64Bits&&H.MatrixTrackedMatrices)for(let O=0;O<H.MatrixTrackedMatrices.length;++O){const a=H.MatrixTrackedMatrices[O],i=a.jb;a.jb=new Array(16);for(let O=0;O<16;++O)a.jb[O]=i[O]}H.MatrixUse64Bits=a,H.MatrixCurrentType=H.MatrixUse64Bits?Array:Float32Array,H.MatrixTrackedMatrices=null}}H.MatrixUse64Bits=!1,H.MatrixTrackPrecisionChange=!0,H.MatrixCurrentType=Float32Array,H.MatrixTrackedMatrices=[]},12334:(a,O,i)=>{i.d(O,{e:()=>q});var H=i(12209);const b=new Map;function G(a,O){(function(a){return b.delete(a)})(a)&&H.c.Warn(`Extension with the name '${a}' already exists`),b.set(a,O)}function q(a,O){"image/ktx"!==O&&"image/ktx2"!==O||(a=".ktx"),b.has(a)||(a.endsWith(".ies")&&G(".ies",(async()=>await i.e(15).then(i.bind(i,14840)).then((a=>new a._IESTextureLoader)))),a.endsWith(".dds")&&G(".dds",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(28)]).then(i.bind(i,14842)).then((a=>new a._DDSTextureLoader)))),a.endsWith(".basis")&&G(".basis",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(47)]).then(i.bind(i,14857)).then((a=>new a._BasisTextureLoader)))),a.endsWith(".env")&&G(".env",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(23),i.e(21),i.e(45),i.e(48)]).then(i.bind(i,14865)).then((a=>new a._ENVTextureLoader)))),a.endsWith(".hdr")&&G(".hdr",(async()=>await Promise.all([i.e(14),i.e(49)]).then(i.bind(i,14867)).then((a=>new a._HDRTextureLoader)))),(a.endsWith(".ktx")||a.endsWith(".ktx2"))&&(G(".ktx",(async()=>await i.e(30).then(i.bind(i,14870)).then((a=>new a._KTXTextureLoader)))),G(".ktx2",(async()=>await i.e(30).then(i.bind(i,14870)).then((a=>new a._KTXTextureLoader))))),a.endsWith(".tga")&&G(".tga",(async()=>await i.e(50).then(i.bind(i,14875)).then((a=>new a._TGATextureLoader)))),a.endsWith(".exr")&&G(".exr",(async()=>await i.e(16).then(i.bind(i,14883)).then((a=>new a._ExrTextureLoader)))));const H=b.get(a);return H?Promise.resolve(H(O)):null}},12317:(a,O,i)=>{i.d(O,{c:()=>q});var H,b=i(12193),G=i(12326);!function(a){a[a.Unknown=0]="Unknown",a[a.Url=1]="Url",a[a.Temp=2]="Temp",a[a.Raw=3]="Raw",a[a.Dynamic=4]="Dynamic",a[a.RenderTarget=5]="RenderTarget",a[a.MultiRenderTarget=6]="MultiRenderTarget",a[a.Cube=7]="Cube",a[a.CubeRaw=8]="CubeRaw",a[a.CubePrefiltered=9]="CubePrefiltered",a[a.Raw3D=10]="Raw3D",a[a.Raw2DArray=11]="Raw2DArray",a[a.DepthStencil=12]="DepthStencil",a[a.CubeRawRGBD=13]="CubeRawRGBD",a[a.Depth=14]="Depth"}(H||(H={}));class q extends G.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(a){this.generateMipMaps=a}get uniqueId(){return this._uniqueId}_setUniqueId(a){this._uniqueId=a}getEngine(){return this._engine}get source(){return this._source}constructor(a,O){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new b.e,this.onErrorObservable=new b.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=a,this._source=O,this._uniqueId=q._Counter++,i||(this._hardwareTexture=a._createHardwareTexture())}incrementReferences(){this._references++}updateSize(a,O){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,a,O,i),this.width=a,this.height=O,this.depth=i,this.baseWidth=a,this.baseHeight=O,this.baseDepth=i,this._size=a*O*i}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const a=this.onRebuildCallback(this),O=O=>{O._swapAndDie(this,!1),this.isReady=a.isReady};return void(a.isAsync?a.proxy.then(O):O(a.proxy))}let a;switch(this.source){case 2:case 12:case 14:break;case 1:return void(a=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(a=>{a._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:a=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),a._swapAndDie(this,!1),this.isReady=!0;break;case 10:a=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),a._swapAndDie(this,!1),this.isReady=!0;break;case 11:a=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),a._swapAndDie(this,!1),this.isReady=!0;break;case 4:a=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),a._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(a=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{a._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:a=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),a._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return a=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(a=>{a&&a._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(a._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(a){var O;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(O=this._hardwareTexture)||void 0===O||O.setUsage(a._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),a._hardwareTexture=this._hardwareTexture,i&&(a._isRGBD=this._isRGBD),this._lodTextureHigh&&(a._lodTextureHigh&&a._lodTextureHigh.dispose(),a._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(a._lodTextureMid&&a._lodTextureMid.dispose(),a._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(a._lodTextureLow&&a._lodTextureLow.dispose(),a._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(a._irradianceTexture&&a._irradianceTexture.dispose(),a._irradianceTexture=this._irradianceTexture);const H=this._engine.getLoadedTexturesCache();let b=H.indexOf(this);-1!==b&&H.splice(b,1),b=H.indexOf(a),-1===b&&H.push(a)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}q._Counter=0},12326:(a,O,i)=>{i.d(O,{c:()=>H});class H{get wrapU(){return this._cachedWrapU}set wrapU(a){this._cachedWrapU=a}get wrapV(){return this._cachedWrapV}set wrapV(a){this._cachedWrapV=a}get wrapR(){return this._cachedWrapR}set wrapR(a){this._cachedWrapR=a}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(a){this._cachedAnisotropicFilteringLevel=a}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(a){this._comparisonFunction=a}get useMipMaps(){return this._useMipMaps}set useMipMaps(a){this._useMipMaps=a}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=a,this._cachedWrapV=O,this._cachedWrapR=i,this._cachedAnisotropicFilteringLevel=H,this.samplingMode=b,this._comparisonFunction=G,this}compareSampler(a){return this._cachedWrapU===a._cachedWrapU&&this._cachedWrapV===a._cachedWrapV&&this._cachedWrapR===a._cachedWrapR&&this._cachedAnisotropicFilteringLevel===a._cachedAnisotropicFilteringLevel&&this.samplingMode===a.samplingMode&&this._comparisonFunction===a._comparisonFunction&&this._useMipMaps===a._useMipMaps}}},12211:(a,O,i)=>{i.d(O,{c:()=>G});var H=i(12209);const b=(a,O,i)=>a?a.getClassName&&"Mesh"===a.getClassName()?null:!a.getClassName||"SubMesh"!==a.getClassName()&&"PhysicsBody"!==a.getClassName()?a.clone?a.clone():Array.isArray(a)?a.slice():i&&"object"===typeof a?{...a}:null:a.clone(O):null;class G{static DeepCopy(a,O,i,G){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const Q=function(a){const O=[];do{const i=Object.getOwnPropertyNames(a);for(const a of i)-1===O.indexOf(a)&&O.push(a)}while(a=Object.getPrototypeOf(a));return O}(a);for(const I of Q){if("_"===I[0]&&(!G||-1===G.indexOf(I)))continue;if(I.endsWith("Observable"))continue;if(i&&-1!==i.indexOf(I))continue;const Q=a[I],P=typeof Q;if("function"!==P)try{if("object"===P)if(Q instanceof Uint8Array)O[I]=Uint8Array.from(Q);else if(Q instanceof Array){if(O[I]=[],Q.length>0)if("object"==typeof Q[0])for(let a=0;a<Q.length;a++){const i=b(Q[a],O,q);-1===O[I].indexOf(i)&&O[I].push(i)}else O[I]=Q.slice(0)}else O[I]=b(Q,O,q);else O[I]=Q}catch(k){H.c.Warn(k.message)}}}}},12245:(a,O,i)=>{i.d(O,{e:()=>H,i:()=>b,m:()=>G});class H extends Error{}H._setPrototypeOf=Object.setPrototypeOf||((a,O)=>(a.__proto__=O,a));const b={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class G extends H{constructor(a,O,i){super(a),this.errorCode=O,this.innerError=i,this.name="RuntimeError",H._setPrototypeOf(this,G.prototype)}}},12243:(a,O,i)=>{i.d(O,{b:()=>T,f:()=>M,j:()=>K,n:()=>f,s:()=>y,o:()=>r,u:()=>D,x:()=>U,z:()=>w,D:()=>C});var H=i(12227),b=i(12201),G=i(12193);class q{}q.FilesToLoad={};var Q=i(12245),k=i(12249),I=i(12256),P=i(12236),e=i(12209),h=i(12265),j=i(12259),Z=i(12273);const F=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class r extends Q.m{constructor(a,O){super(a,Q.i.LoadFileError),this.name="LoadFileError",Q.e._setPrototypeOf(this,r.prototype),O instanceof H.e?this.request=O:this.file=O}}class J extends Q.m{constructor(a,O){super(a,Q.i.RequestFileError),this.request=O,this.name="RequestFileError",Q.e._setPrototypeOf(this,J.prototype)}}class ma extends Q.m{constructor(a,O){super(a,Q.i.ReadFileError),this.file=O,this.name="ReadFileError",Q.e._setPrototypeOf(this,ma.prototype)}}const M={DefaultRetryStrategy:class{static ExponentialBackoff(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(i,H,b)=>0!==H.status||b>=a||-1!==i.indexOf("file:")?-1:Math.pow(2,b)*O}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:a=>a,ScriptBaseUrl:"",ScriptPreprocessUrl:a=>a,CleanUrl:a=>a=a.replace(/#/gm,"%23")},C=(a,O)=>{if((!a||0!==a.indexOf("data:"))&&M.CorsBehavior)if("string"===typeof M.CorsBehavior||M.CorsBehavior instanceof String)O.crossOrigin=M.CorsBehavior;else{const i=M.CorsBehavior(a);i&&(O.crossOrigin=i)}},n={getRequiredSize:null},D=function(a,O,i,b){let G,Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",I=arguments.length>5?arguments[5]:void 0,e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:P.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===e||void 0===e||!e._features.forceBitmapOverHTMLImageElement))return i("LoadImage is only supported in web or BabylonNative environments."),null;let h=!1;a instanceof ArrayBuffer||ArrayBuffer.isView(a)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(G=URL.createObjectURL(new Blob([a],{type:Q})),h=!0):G=`data:${Q};base64,`+(0,k.l)(a):a instanceof Blob?(G=URL.createObjectURL(a),h=!0):(G=M.CleanUrl(a),G=M.PreprocessUrl(G));const j=O=>{if(i){const H=G||a.toString();i(`Error while trying to load image: ${0===H.indexOf("http")||H.length<=128?H:H.slice(0,128)+"..."}`,O)}};if(null!==e&&void 0!==e&&e._features.forceBitmapOverHTMLImageElement)return y(G,(H=>{e.createImageBitmap(new Blob([H],{type:Q}),{premultiplyAlpha:"none",...I}).then((a=>{O(a),h&&URL.revokeObjectURL(G)})).catch((O=>{i&&i("Error while trying to load image: "+a,O)}))}),void 0,b||void 0,!0,((a,O)=>{j(O)})),null;const Z=new Image;if(n.getRequiredSize){const O=n.getRequiredSize(a);O.width&&(Z.width=O.width),O.height&&(Z.height=O.height)}C(G,Z);const F=[],r=()=>{for(const a of F)a.target.removeEventListener(a.name,a.handler);F.length=0};F.push({target:Z,name:"load",handler:()=>{r(),O(Z),h&&Z.src&&URL.revokeObjectURL(Z.src)}}),F.push({target:Z,name:"error",handler:a=>{r(),j(a),h&&Z.src&&URL.revokeObjectURL(Z.src)}}),F.push({target:document,name:"securitypolicyviolation",handler:a=>{if(a.blockedURI!==Z.src||"Zb"===a.disposition)return;r();const O=new Error(`CSP violation of policy ${a.effectiveDirective} ${a.blockedURI}. Current policy is ${a.originalPolicy}`);P.b.UseFallbackTexture=!1,j(O),h&&Z.src&&URL.revokeObjectURL(Z.src),Z.src=""}}),(()=>{for(const a of F)a.target.addEventListener(a.name,a.handler)})();const J="blob:"===G.substring(0,5),ma="data:"===G.substring(0,5),D=()=>{J||ma||!H.e.IsCustomRequestAvailable?Z.src=G:y(G,((a,O,i)=>{const H=new Blob([a],{type:!Q&&i?i:Q}),b=URL.createObjectURL(H);h=!0,Z.src=b}),void 0,b||void 0,!0,((a,O)=>{j(O)}))},U=()=>{b&&b.loadImage(G,Z)};if(!J&&!ma&&b&&b.enableTexturesOffline)b.open(U,D);else{if(-1!==G.indexOf("file:")){const a=decodeURIComponent(G.substring(5).toLowerCase());if(q.FilesToLoad[a]&&"undefined"!==typeof URL){try{let O;try{O=URL.createObjectURL(q.FilesToLoad[a])}catch(w){O=URL.createObjectURL(q.FilesToLoad[a])}Z.src=O,h=!0}catch(K){Z.src=""}return Z}}D()}return Z},U=(a,O,i,H,b)=>{const q=new FileReader,Q={onCompleteObservable:new G.e,abort:()=>q.abort()};return q.onloadend=()=>Q.onCompleteObservable.notifyObservers(Q),b&&(q.onerror=()=>{b(new ma(`Unable to read ${a.name}`,a))}),q.onload=a=>{O(a.target.result)},i&&(q.onprogress=i),H?q.readAsArrayBuffer(a):q.readAsText(a),Q},y=(a,O,i,H,b,k,I)=>{if(a.name)return U(a,O,i,b,k?a=>{k(void 0,a)}:void 0);const P=a;if(-1!==P.indexOf("file:")){let a=decodeURIComponent(P.substring(5).toLowerCase());0===a.indexOf("./")&&(a=a.substring(2));const H=q.FilesToLoad[a];if(H)return U(H,O,i,b,k?a=>k(void 0,new r(a.message,a.file)):void 0)}const{match:j,type:Z}=B(P);if(j){const a={onCompleteObservable:new G.e,abort:()=>()=>{}};try{const a=b?T(P):A(P);O(a,void 0,Z)}catch(Q){k?k(void 0,Q):e.c.Error(Q.message||"Failed to parse the Data URL")}return h.b.SetImmediate((()=>{a.onCompleteObservable.notifyObservers(a)})),a}return w(P,((a,i)=>{O(a,null===i||void 0===i?void 0:i.responseURL,null===i||void 0===i?void 0:i.getResponseHeader("content-type"))}),i,H,b,k?a=>{k(a.request,new r(a.message,a.request))}:void 0,I)},w=(a,O,i,q,Q,k,I)=>{a=M.CleanUrl(a),a=M.PreprocessUrl(a);const P=M.BaseUrl+a;let h=!1;const j={onCompleteObservable:new G.e,abort:()=>h=!0},Z=()=>{let a,G=new H.e,q=null;const Z=()=>{G&&(i&&G.removeEventListener("progress",i),a&&G.removeEventListener("readystatechange",a),G.removeEventListener("loadend",F))};let F=()=>{Z(),j.onCompleteObservable.notifyObservers(j),j.onCompleteObservable.clear(),i=void 0,a=null,F=null,k=void 0,I=void 0,O=void 0};j.abort=()=>{h=!0,F&&F(),G&&G.readyState!==(XMLHttpRequest.DONE||4)&&G.abort(),null!==q&&(clearTimeout(q),q=null),G=null};const r=a=>{const O=a.message||"Unknown error";k&&G?k(new J(O,G)):e.c.Error(O)},ma=e=>{if(G){if(G.open("GET",P),I)try{I(G)}catch(j){return void r(j)}Q&&(G.responseType="arraybuffer"),i&&G.addEventListener("progress",i),F&&G.addEventListener("loadend",F),a=()=>{if(!h&&G&&G.readyState===(XMLHttpRequest.DONE||4)){if(a&&G.removeEventListener("readystatechange",a),G.status>=200&&G.status<300||0===G.status&&(!(0,b.k)()||S())){const a=Q?G.response:G.responseText;if(null!==a){try{O&&O(a,G)}catch(j){r(j)}return}}const i=M.DefaultRetryStrategy;if(i){const a=i(P,G,e);if(-1!==a)return Z(),G=new H.e,void(q=setTimeout((()=>ma(e+1)),a))}const I=new J("Error status: "+G.status+" "+G.statusText+" - Unable to load "+P,G);k&&k(I)}},G.addEventListener("readystatechange",a),G.send()}};ma(0)};if(q&&q.enableSceneOffline){const H=a=>{a&&a.status>400?k&&k(a):Z()},b=()=>{q&&q.loadFile(M.BaseUrl+a,(a=>{!h&&O&&O(a),j.onCompleteObservable.notifyObservers(j)}),i?a=>{!h&&i&&i(a)}:void 0,H,Q)};q.open(b,H)}else Z();return j},K=a=>{const{match:O,type:i}=B(a);if(O)return i||void 0;const H=a.lastIndexOf(".");switch(a.substring(H+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Fb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},S=()=>"undefined"!==typeof location&&"file:"===location.protocol,f=a=>F.test(a),B=a=>{const O=F.exec(a);if(null===O||0===O.length)return{match:!1,type:""};return{match:!0,type:O[0].replace("data:","").replace("base64,","")}};function T(a){return(0,k.b)(a.split(",")[1])}const A=a=>(0,k.f)(a.split(",")[1]);let E;Z.c._FileToolsLoadImage=D,j.d.loadFile=y,I.o.loadFile=y;((a,O,i,H,b,G,q,Q,k,I)=>{E={DecodeBase64UrlToBinary:a,DecodeBase64UrlToString:O,DefaultRetryStrategy:i.DefaultRetryStrategy,BaseUrl:i.BaseUrl,CorsBehavior:i.CorsBehavior,PreprocessUrl:i.PreprocessUrl,IsBase64DataUrl:H,IsFileURL:b,LoadFile:G,LoadImage:q,ReadFile:Q,RequestFile:k,SetCorsBehavior:I},Object.defineProperty(E,"DefaultRetryStrategy",{get:function(){return i.DefaultRetryStrategy},set:function(a){i.DefaultRetryStrategy=a}}),Object.defineProperty(E,"BaseUrl",{get:function(){return i.BaseUrl},set:function(a){i.BaseUrl=a}}),Object.defineProperty(E,"PreprocessUrl",{get:function(){return i.PreprocessUrl},set:function(a){i.PreprocessUrl=a}}),Object.defineProperty(E,"CorsBehavior",{get:function(){return i.CorsBehavior},set:function(a){i.CorsBehavior=a}})})(T,A,M,f,S,y,D,U,w,C)},12350:(a,O,i)=>{function H(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(a=>{const O=16*Math.random()|0;return("x"===a?O:3&O|8).toString(16)}))}i.d(O,{c:()=>H})},12339:(a,O,i)=>{i.d(O,{e:()=>G});var H=i(12209),b=i(12346);class G{static Instantiate(a){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[a])return this.RegisteredExternalClasses[a];const O=(0,b.e)(a);if(O)return O;H.c.Warn(a+" not found, you may have missed an import.");const i=a.split(".");let G=window||this;for(let H=0,b=i.length;H<b;H++)G=G[i[H]];return"function"!==typeof G?null:G}}G.RegisteredExternalClasses={}},12218:(a,O,i)=>{i.d(O,{c:()=>b});var H=i(12201);class b{static get Now(){return(0,H.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12249:(a,O,i)=>{i.d(O,{b:()=>q,f:()=>G,i:()=>H,l:()=>b});const H=a=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(a);let O="";for(let i=0;i<a.byteLength;i++)O+=String.fromCharCode(a[i]);return O},b=a=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i,H,b,G,q,Q,k,I="",P=0;const e=ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a);for(;P<e.length;)i=e[P++],H=P<e.length?e[P++]:Number.NaN,b=P<e.length?e[P++]:Number.NaN,G=i>>2,q=(3&i)<<4|H>>4,Q=(15&H)<<2|b>>6,k=63&b,isNaN(H)?Q=k=64:isNaN(b)&&(k=64),I+=O.charAt(G)+O.charAt(q)+O.charAt(Q)+O.charAt(k);return I},G=a=>atob(a),q=a=>{const O=G(a),i=O.length,H=new Uint8Array(new ArrayBuffer(i));for(let b=0;b<i;b++)H[b]=O.charCodeAt(b);return H.buffer}},12358:(a,O,i)=>{function H(a){let O=1;do{O*=2}while(O<a);return O===a}function b(a,O,i){return a*(1-i)+O*i}function G(a){const O=q(a),i=Q(a);return O-a>a-i?i:O}function q(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}function Q(a){return a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,(a|=a>>16)-(a>>1)}function k(a,O){let i;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:i=Q(a);break;case 2:i=G(a);break;default:i=q(a)}return Math.min(i,O)}i.d(O,{b:()=>Q,f:()=>k,i:()=>H,m:()=>b,q:()=>G})},12184:(a,O,i)=>{i.r(O),i.d(O,{AsyncLoop:()=>ma,Tools:()=>r,className:()=>J});var H=i(12193),b=i(12201),G=i(12209),q=i(12211),Q=i(12218),k=i(12225),I=i(12227),P=i(12236),e=i(12243),h=i(12265),j=i(12339),Z=i(12350),F=i(12358);class r{static get BaseUrl(){return e.f.BaseUrl}static set BaseUrl(a){e.f.BaseUrl=a}static get CleanUrl(){return e.f.CleanUrl}static set CleanUrl(a){e.f.CleanUrl=a}static IsAbsoluteUrl(a){return 0===a.indexOf("//")||-1!==a.indexOf("://")&&(-1!==a.indexOf(".")&&(-1!==a.indexOf("/")&&(!(a.indexOf(":")>a.indexOf("/"))&&(a.indexOf("://")<a.indexOf(".")||(0===a.indexOf("data:")||0===a.indexOf("blob:"))))))}static set ScriptBaseUrl(a){e.f.ScriptBaseUrl=a}static get ScriptBaseUrl(){return e.f.ScriptBaseUrl}static set CDNBaseUrl(a){r.ScriptBaseUrl=a,r.AssetBaseUrl=a}static set ScriptPreprocessUrl(a){e.f.ScriptPreprocessUrl=a}static get ScriptPreprocessUrl(){return e.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return e.f.DefaultRetryStrategy}static set DefaultRetryStrategy(a){e.f.DefaultRetryStrategy=a}static get CorsBehavior(){return e.f.CorsBehavior}static set CorsBehavior(a){e.f.CorsBehavior=a}static get UseFallbackTexture(){return P.b.UseFallbackTexture}static set UseFallbackTexture(a){P.b.UseFallbackTexture=a}static get RegisteredExternalClasses(){return j.e.RegisteredExternalClasses}static set RegisteredExternalClasses(a){j.e.RegisteredExternalClasses=a}static get fallbackTexture(){return P.b.FallbackTexture}static set fallbackTexture(a){P.b.FallbackTexture=a}static FetchToRef(a,O,i,H,b,G){const q=4*((Math.abs(a)*i%i|0)+(Math.abs(O)*H%H|0)*i);G.r=b[q]/255,G.g=b[q+1]/255,G.b=b[q+2]/255,G.a=b[q+3]/255}static Mix(a,O,i){return 0}static Instantiate(a){return j.e.Instantiate(a)}static SetImmediate(a){h.b.SetImmediate(a)}static IsExponentOfTwo(a){return!0}static FloatRound(a){return Math.fround(a)}static GetFilename(a){const O=a.lastIndexOf("/");return O<0?a:a.substring(O+1)}static GetFolderPath(a){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=a.lastIndexOf("/");return i<0?O?a:"":a.substring(0,i+1)}static ToDegrees(a){return 180*a/Math.PI}static ToRadians(a){return a*Math.PI/180}static SmoothAngleChange(a,O){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const H=this.ToRadians(a),b=this.ToRadians(O);return this.ToDegrees(Math.atan2((1-i)*Math.sin(b)+i*Math.sin(H),(1-i)*Math.cos(b)+i*Math.cos(H)))}static MakeArray(a,O){return!0===O||void 0!==a&&null!=a?Array.isArray(a)?a:[a]:null}static GetPointerPrefix(a){return(0,b.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(a,O){(0,e.D)(a,O)}static SetReferrerPolicyBehavior(a,O){O.referrerPolicy=a}static get PreprocessUrl(){return e.f.PreprocessUrl}static set PreprocessUrl(a){e.f.PreprocessUrl=a}static LoadImage(a,O,i,H,b,G){return(0,e.u)(a,O,i,H,b,G)}static LoadFile(a,O,i,H,b,G){return(0,e.s)(a,O,i,H,b,G)}static async LoadFileAsync(a){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((i,H)=>{(0,e.s)(a,(a=>{i(a)}),void 0,void 0,O,((a,O)=>{H(O)}))}))}static GetAssetUrl(a){if(!a)return"";if(r.AssetBaseUrl&&a.startsWith(r._DefaultAssetsUrl)){const O="/"===r.AssetBaseUrl[r.AssetBaseUrl.length-1]?r.AssetBaseUrl.substring(0,r.AssetBaseUrl.length-1):r.AssetBaseUrl;return a.replace(r._DefaultAssetsUrl,O)}return a}static GetBabylonScriptURL(a,O){if(!a)return"";if(r.ScriptBaseUrl&&a.startsWith(r._DefaultCdnUrl)){const O="/"===r.ScriptBaseUrl[r.ScriptBaseUrl.length-1]?r.ScriptBaseUrl.substring(0,r.ScriptBaseUrl.length-1):r.ScriptBaseUrl;a=a.replace(r._DefaultCdnUrl,O)}return a=r.ScriptPreprocessUrl(a),O&&(a=r.GetAbsoluteUrl(a)),a}static LoadBabylonScript(a,O,i,H){a=r.GetBabylonScriptURL(a),r.LoadScript(a,O,i)}static async LoadBabylonScriptAsync(a){return a=r.GetBabylonScriptURL(a),await r.LoadScriptAsync(a)}static LoadScript(a,O,i,H){let G=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(a),O&&O()}catch(k){null===i||void 0===i||i(`Unable to load script '${a}' in worker`,k)}return}if(!(0,b.k)())return void(null===i||void 0===i||i(`Cannot load script '${a}' outside of a window or a worker`));const q=document.getElementsByTagName("head")[0],Q=document.createElement("script");G?(Q.setAttribute("type","module"),Q.innerText=a):(Q.setAttribute("type","text/javascript"),Q.setAttribute("src",a)),H&&(Q.id=H),Q.onload=()=>{O&&O()},Q.onerror=O=>{i&&i(`Unable to load script '${a}'`,O)},q.appendChild(Q)}static async LoadScriptAsync(a,O){return await new Promise(((i,H)=>{this.LoadScript(a,(()=>{i()}),((a,O)=>{H(O||new Error(a))}),O)}))}static ReadFileAsDataURL(a,O,i){const b=new FileReader,G={onCompleteObservable:new H.e,abort:()=>b.abort()};return b.onloadend=()=>{G.onCompleteObservable.notifyObservers(G)},b.onload=a=>{O(a.target.result)},b.onprogress=i,b.readAsDataURL(a),G}static ReadFile(a,O,i,H,b){return(0,e.x)(a,O,i,H,b)}static FileAsURL(a){const O=new Blob([a]);return window.URL.createObjectURL(O)}static Format(a){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return a.toFixed(O)}static DeepCopy(a,O,i,H){q.c.DeepCopy(a,O,i,H)}static IsEmpty(a){for(const O in a)if(Object.prototype.hasOwnProperty.call(a,O))return!1;return!0}static RegisterTopRootEvents(a,O){for(let H=0;H<O.length;H++){const b=O[H];a.addEventListener(b.name,b.handler,!1);try{window.parent&&window.parent.addEventListener(b.name,b.handler,!1)}catch(i){}}}static UnregisterTopRootEvents(a,O){for(let H=0;H<O.length;H++){const b=O[H];a.removeEventListener(b.name,b.handler);try{a.parent&&a.parent.removeEventListener(b.name,b.handler)}catch(i){}}}static async DumpFramebuffer(a,O,i,H){throw(0,k.e)("DumpTools")}static DumpData(a,O,i,H){throw(0,k.e)("DumpTools")}static async DumpDataAsync(a,O,i){throw(0,k.e)("DumpTools")}static _IsOffScreenCanvas(a){return void 0!==a.convertToBlob}static ToBlob(a,O){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0;r._IsOffScreenCanvas(a)||a.toBlob||(a.toBlob=function(a,O,i){setTimeout((()=>{const H=atob(this.toDataURL(O,i).split(",")[1]),b=H.length,G=new Uint8Array(b);for(let a=0;a<b;a++)G[a]=H.charCodeAt(a);a(new Blob([G]))}))}),r._IsOffScreenCanvas(a)?a.convertToBlob({type:i,quality:H}).then((a=>O(a))):a.toBlob((function(a){O(a)}),i,H)}static DownloadBlob(a,O){if("download"in document.createElement("a")){if(!O){const a=new Date;O="screenshot_"+((a.getFullYear()+"-"+(a.getMonth()+1)).slice(2)+"-"+a.getDate()+"_"+a.getHours()+"-"+("0"+a.getMinutes()).slice(-2))+".png"}r.Download(a,O)}else if(a&&"undefined"!==typeof URL){const O=URL.createObjectURL(a),i=window.open("");if(!i)return;const H=i.document.createElement("img");H.onload=function(){URL.revokeObjectURL(O)},H.src=O,i.document.body.appendChild(H)}}static EncodeScreenshotCanvasData(a,O){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0,b=arguments.length>4?arguments[4]:void 0;if("string"!==typeof H&&O){if(O){if(r._IsOffScreenCanvas(a))return void a.convertToBlob({type:i,quality:b}).then((a=>{const i=new FileReader;i.readAsDataURL(a),i.onloadend=()=>{const a=i.result;O(a)}}));const H=a.toDataURL(i,b);O(H)}}else this.ToBlob(a,(function(a){a&&r.DownloadBlob(a,H),O&&O("")}),i,b)}static Download(a,O){if("undefined"===typeof URL)return;const i=window.URL.createObjectURL(a),H=document.createElement("a");document.body.appendChild(H),H.style.display="none",H.href=i,H.download=O,H.addEventListener("click",(()=>{H.parentElement&&H.parentElement.removeChild(H)})),H.click(),window.URL.revokeObjectURL(i)}static BackCompatCameraNoPreventDefault(a){return"boolean"===typeof a[0]?a[0]:"boolean"===typeof a[1]&&a[1]}static CreateScreenshot(a,O,i,H){throw(0,k.e)("ScreenshotTools")}static async CreateScreenshotAsync(a,O,i){throw(0,k.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(a,O,i,H){throw(0,k.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(a,O,i){throw(0,k.e)("ScreenshotTools")}static RandomId(){return(0,Z.c)()}static IsBase64(a){return(0,e.n)(a)}static DecodeBase64(a){return(0,e.b)(a)}static get errorsCount(){return G.c.errorsCount}static Log(a){G.c.Log(a)}static Warn(a){G.c.Warn(a)}static Error(a){G.c.Error(a)}static get LogCache(){return G.c.LogCache}static ClearLogCache(){G.c.ClearLogCache()}static set LogLevels(a){G.c.LogLevels=a}static set PerformanceLogLevel(a){return(a&r.PerformanceUserMarkLogLevel)===r.PerformanceUserMarkLogLevel?(r.StartPerformanceCounter=r._StartUserMark,void(r.EndPerformanceCounter=r._EndUserMark)):(a&r.PerformanceConsoleLogLevel)===r.PerformanceConsoleLogLevel?(r.StartPerformanceCounter=r._StartPerformanceConsole,void(r.EndPerformanceCounter=r._EndPerformanceConsole)):(r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,void(r.EndPerformanceCounter=r._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(a,O){}static _EndPerformanceCounterDisabled(a,O){}static _StartUserMark(a){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!r._Performance){if(!(0,b.k)())return;r._Performance=window.performance}O&&r._Performance.mark&&r._Performance.mark(a+"-Begin")}static _EndUserMark(a){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&r._Performance.mark&&(r._Performance.mark(a+"-End"),r._Performance.measure(a,a+"-Begin",a+"-End"))}static _StartPerformanceConsole(a){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(r._StartUserMark(a,O),console.time&&console.time(a))}static _EndPerformanceConsole(a){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(r._EndUserMark(a,O),console.timeEnd(a))}static get Now(){return Q.c.Now}static GetClassName(a){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(!O&&a.getClassName)i=a.getClassName();else{if(a instanceof Object){i=(O?a:Object.getPrototypeOf(a)).constructor.__bjsclassName__}i||(i=typeof a)}return i}static First(a,O){for(const i of a)if(O(i))return i;return null}static getFullClassName(a){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null,H=null;if(!O&&a.getClassName)i=a.getClassName();else{if(a instanceof Object){const b=O?a:Object.getPrototypeOf(a);i=b.constructor.__bjsclassName__,H=b.constructor.__bjsmoduleName__}i||(i=typeof a)}return i?(null!=H?H+".":"")+i:null}static async DelayAsync(a){await new Promise((O=>{setTimeout((()=>{O()}),a)}))}static IsSafari(){return!!(0,b.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function J(a,O){return i=>{i.__bjsclassName__=a,i.__bjsmoduleName__=null!=O?O:null}}r.AssetBaseUrl="",r.UseCustomRequestHeaders=!1,r.CustomRequestHeaders=I.e.CustomRequestHeaders,r.GetDOMTextContent=b.d,r._DefaultCdnUrl="https://cdn.babylonjs.com",r._DefaultAssetsUrl="https://assets.babylonjs.com/core",r.GetAbsoluteUrl="object"===typeof document?a=>{const O=document.createElement("a");return O.href=a,O.href}:"function"===typeof URL&&"object"===typeof location?a=>new URL(a,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},r.NoneLogLevel=G.c.NoneLogLevel,r.MessageLogLevel=G.c.MessageLogLevel,r.WarningLogLevel=G.c.WarningLogLevel,r.ErrorLogLevel=G.c.ErrorLogLevel,r.AllLogLevel=G.c.AllLogLevel,r.IsWindowObjectExist=b.k,r.PerformanceNoneLogLevel=0,r.PerformanceUserMarkLogLevel=1,r.PerformanceConsoleLogLevel=2,r.StartPerformanceCounter=r._StartPerformanceCounterDisabled,r.EndPerformanceCounter=r._EndPerformanceCounterDisabled;class ma{constructor(a,O,i){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=a,this.index=H-1,this._done=!1,this._fn=O,this._successCallback=i}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(a,O,i){const H=new ma(a,O,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return H.executeNext(),H}static SyncAsyncForLoop(a,O,i,H,b){let G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return ma.Run(Math.ceil(a/O),(H=>{b&&b()?H.breakLoop():setTimeout((()=>{for(let G=0;G<O;++G){const q=H.index*O+G;if(q>=a)break;if(i(q),b&&b()){H.breakLoop();break}}H.executeNext()}),G)}),H)}}r.Mix=F.m,r.IsExponentOfTwo=F.i,P.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12346:(a,O,i)=>{i.d(O,{e:()=>G,h:()=>b});const H={};function b(a,O){H[a]=O}function G(a){return H[a]}},12227:(a,O,i)=>{i.d(O,{e:()=>H});class H{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(H.CustomRequestHeaders).length>0||H.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const a in H.CustomRequestHeaders){const O=H.CustomRequestHeaders[a];O&&this._xhr.setRequestHeader(a,O)}}_shouldSkipRequestModifications(a){return H.SkipRequestModificationForBabylonCDN&&(a.includes("preview.babylonjs.com")||a.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(a){this._xhr.onprogress=a}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(a){this._xhr.responseType=a}get timeout(){return this._xhr.timeout}set timeout(a){this._xhr.timeout=a}addEventListener(a,O,i){this._xhr.addEventListener(a,O,i)}removeEventListener(a,O,i){this._xhr.removeEventListener(a,O,i)}abort(){this._xhr.abort()}send(a){H.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(a)}open(a,O){for(const i of H.CustomRequestModifiers){if(this._shouldSkipRequestModifications(O))return;O=i(this._xhr,O)||O}O=(O=O.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=O,this._xhr.open(a,O,!0)}setRequestHeader(a,O){this._xhr.setRequestHeader(a,O)}getResponseHeader(a){return this._xhr.getResponseHeader(a)}}H.CustomRequestHeaders={},H.CustomRequestModifiers=new Array,H.SkipRequestModificationForBabylonCDN=!0}}]);