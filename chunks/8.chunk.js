"use strict";(self.g111kvdsqxc=self.g111kvdsqxc||[]).push([[8],{11180:(K,H,M)=>{M.d(H,{b:()=>C});var q=M(11143),w=M(11112),u=M(11186),y=M(11212),h=M(11125);class W{constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,K&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(K){this._zOffset!==K&&(this._zOffset=K,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(K){this._zOffsetUnits!==K&&(this._zOffsetUnits=K,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(K){this._cullFace!==K&&(this._cullFace=K,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(K){this._cull!==K&&(this._cull=K,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(K){this._depthFunc!==K&&(this._depthFunc=K,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(K){this._depthMask!==K&&(this._depthMask=K,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(K){this._depthTest!==K&&(this._depthTest=K,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(K){this._frontFace!==K&&(this._frontFace=K,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(K){this.isDirty&&(this._isCullDirty&&(this.cull?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(K.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(K.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(K.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(K.enable(K.POLYGON_OFFSET_FILL),K.polygonOffset(this.zOffset,this.zOffsetUnits)):K.disable(K.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(K.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class I{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(K){this._func!==K&&(this._func=K,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(K){this._funcRef!==K&&(this._funcRef=K,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(K){this._funcMask!==K&&(this._funcMask=K,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(K){this._opStencilFail!==K&&(this._opStencilFail=K,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(K){this._opDepthFail!==K&&(this._opDepthFail=K,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(K){this._opStencilDepthPass!==K&&(this._opStencilDepthPass=K,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(K){this._mask!==K&&(this._mask=K,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(K){this._enabled!==K&&(this._enabled=K,this._isStencilTestDirty=!0)}constructor(){let K=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,K&&this.reset()}reset(){var K;this.stencilMaterial=void 0,null===(K=this.stencilGlobal)||void 0===K||K.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(K){var H;if(!K)return;const M=!this.useStencilGlobalOnly&&!(null===(H=this.stencilMaterial)||void 0===H||!H.enabled);this.enabled=M?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=M?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=M?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=M?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=M?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=M?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=M?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=M?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(K.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(K.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(K.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class f{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=f.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=f.KEEP,this.opDepthFail=f.KEEP,this.opStencilDepthPass=f.REPLACE}get stencilFunc(){return this.func}set stencilFunc(K){this.func=K}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(K){this.funcRef=K}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(K){this.funcMask=K}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(K){this.opStencilFail=K}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(K){this.opDepthFail=K}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(K){this.opStencilDepthPass=K}get stencilMask(){return this.mask}set stencilMask(K){this.mask=K}get stencilTest(){return this.enabled}set stencilTest(K){this.enabled=K}}f.ALWAYS=519,f.KEEP=7680,f.REPLACE=7681;class z{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(K){this._alphaBlend!==K&&(this._alphaBlend=K,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(K,H,M,q){this._blendConstants[0]===K&&this._blendConstants[1]===H&&this._blendConstants[2]===M&&this._blendConstants[3]===q||(this._blendConstants[0]=K,this._blendConstants[1]=H,this._blendConstants[2]=M,this._blendConstants[3]=q,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(K,H,M,q){this._blendFunctionParameters[0]===K&&this._blendFunctionParameters[1]===H&&this._blendFunctionParameters[2]===M&&this._blendFunctionParameters[3]===q||(this._blendFunctionParameters[0]=K,this._blendFunctionParameters[1]=H,this._blendFunctionParameters[2]=M,this._blendFunctionParameters[3]=q,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(K,H){this._blendEquationParameters[0]===K&&this._blendEquationParameters[1]===H||(this._blendEquationParameters[0]=K,this._blendEquationParameters[1]=H,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(K){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?K.enable(K.BLEND):K.disable(K.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(K.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(K.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(K.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var G=M(11132),a=M(11216),v=M(11105),O=M(11102),L=M(11174),S=M(11228);function B(K,H){if((0,v.i)()){const{requestAnimationFrame:M}=H||window;if("function"===typeof M)return M(K)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(K);return setTimeout(K,16)}class C{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(K){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(K){K!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=K,this._depthCullingState.depthFunc=K?518:515)}setColorWrite(K){K!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=K)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(K){if(K)return this.isNDCHalfZRange?K.IS_NDC_HALF_ZRANGE="":delete K.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?K.USE_REVERSE_DEPTHBUFFER="":delete K.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?K.USE_EXACT_SRGB_CONVERSIONS="":delete K.USE_EXACT_SRGB_CONVERSIONS);{let K="";return this.isNDCHalfZRange&&(K+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(K&&(K+="\n"),K+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(K&&(K+="\n"),K+="#define USE_EXACT_SRGB_CONVERSIONS"),K}}_rebuildInternalTextures(){const K=this._internalTexturesCache.slice();for(const H of K)H._rebuild()}_rebuildRenderTargetWrappers(){const K=this._renderTargetWrapperCache.slice();for(const H of K)H._rebuild()}_rebuildEffects(){for(const K in this._compiledEffects){const H=this._compiledEffects[K];H._pipelineContext=null,H._prepareEffect()}u.Effect.ResetCache()}_rebuildGraphicsResources(){var K;this.wipeCaches(!0),this._rebuildEffects(),null===(K=this._rebuildComputeEffects)||void 0===K||K.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){w.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(K){setTimeout((()=>{this._clearEmptyResources();const H=this._depthCullingState.depthTest,M=this._depthCullingState.depthFunc,q=this._depthCullingState.depthMask,w=this._stencilState.stencilTest;K(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=H,this._depthCullingState.depthFunc=M,this._depthCullingState.depthMask=q,this._stencilState.stencilTest=w,this._flagContextRestored()}),0)}get W(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(K){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(K){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const K=new Uint8Array(4),H=[K,K,K,K,K,K];this._emptyCubeTexture=this.createRawCubeTexture(H,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(K){if(!K)return this._activeRenderLoops.length=0,void this._cancelFrame();const H=this._activeRenderLoops.indexOf(K);H>=0&&(this._activeRenderLoops.splice(H,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const K=this._frameHandler;if(this._frameHandler=0,(0,v.i)()){const{cancelAnimationFrame:H}=this.getHostWindow()||window;if("function"===typeof H)return H(K)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(K);return clearTimeout(K)}}py(){this.onBeginFrameObservable.notifyObservers(this)}Kh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(K){this._maxFPS=K,void 0!==K&&(this._minFrameTime=K<=0?Number.MAX_VALUE:1e3/K)}_isOverFrameTime(K){if(!K||void 0===this._maxFPS)return!1;const H=K-this._lastFrameTime;return this._lastFrameTime=K,this._renderAccumulator+=H,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(K){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(K)){let K=!0;(this.W||!this.renderEvenInBackground&&this._windowIsBackground)&&(K=!1),K&&(this.py(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Kh())}}_renderLoop(K){this._processFrame(K),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let K=0;K<this._activeRenderLoops.length;K++){(0,this._activeRenderLoops[K])()}}_renderViews(){return!1}_queueNewFrame(K,H){return B(K,H)}runRenderLoop(K){-1===this._activeRenderLoops.indexOf(K)&&(this._activeRenderLoops.push(K),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(K){this._depthCullingState.depthTest=K}setZOffset(K){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-K:K}getZOffset(){const K=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-K:K}setZOffsetUnits(K){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-K:K}getZOffsetUnits(){const K=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-K:K}getHostWindow(){return(0,v.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(K){this._compatibilityMode=!0}_rebuildTextures(){for(const K of this.scenes)K._rebuildTextures();for(const K of this._virtualScenes)K._rebuildTextures()}_releaseRenderTargetWrapper(K){const H=this._renderTargetWrapperCache.indexOf(K);-1!==H&&this._renderTargetWrapperCache.splice(H,1)}get currentViewport(){return this._cachedViewport}setViewport(K,H,M){const q=H||this.getRenderWidth(),w=M||this.getRenderHeight(),u=K.x||0,y=K.y||0;this._cachedViewport=K,this._viewport(u*q,y*w,q*K.width,w*K.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(K){return new Path2D(K)}get description(){let K=this.name+this.version;return this._caps.parallelShaderCompile&&(K+=" - Parallel shader compilation"),K}_createTextureBase(K,H,M,u){let y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,W=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,z=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,G=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,O=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,L=arguments.length>13?arguments[13]:void 0,B=arguments.length>14?arguments[14]:void 0,i=arguments.length>15?arguments[15]:void 0;const Z="data:"===(K=K||"").substring(0,5),E="blob:"===K.substring(0,5),l=Z&&-1!==K.indexOf(";base64,"),s=G||new a.d(this,1);s!==G&&(s.label=K.substring(0,60));const D=K;!this._transformTextureUrl||l||G||z||(K=this._transformTextureUrl(K)),D!==K&&(s._originalUrl=D);const V=K.lastIndexOf(".");let n=O||(V>-1?K.substring(V).toLowerCase():"");n.indexOf("?")>-1&&(n=n.split("?")[0]);const c=(0,S.c)(n,L);u&&u.addPendingData(s),s.url=K,s.generateMipMaps=!H,s.samplingMode=y,s.invertY=M,s._useSRGBBuffer=this._getUseSRGBBuffer(!!i,H),this._doNotHandleContextLost||(s._buffer=z);let k=null;h&&!G&&(k=s.onLoadedObservable.add(h)),G||this._internalTexturesCache.push(s);const T=(M,G)=>{u&&u.removePendingData(s),K===D?(k&&s.onLoadedObservable.remove(k),q.b.UseFallbackTexture&&K!==q.b.FallbackTexture&&this._createTextureBase(q.b.FallbackTexture,H,s.invertY,u,y,null,W,I,f,z,s),M=(M||"Unknown error")+(q.b.UseFallbackTexture?" - Fallback texture was used":""),s.onErrorObservable.notifyObservers({message:M,exception:G}),W&&W(M,G)):(w.e.Warn(`Failed to load ${K}, falling back to ${D}`),this._createTextureBase(D,H,s.invertY,u,y,h,W,I,f,z,s,v,O,L,B,i))};if(c){const H=async K=>{(await c).loadData(K,s,((K,H,M,q,w,h)=>{h?T("TextureLoader failed to load data"):I(s,n,u,{width:K,height:H},s.invertY,!M,q,(()=>(w(),!1)),y)}),B)};z?z instanceof ArrayBuffer?H(new Uint8Array(z)):ArrayBuffer.isView(z)?H(z):W&&W("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(K,(K=>{H(new Uint8Array(K))}),void 0,u?u.offlineProvider:void 0,!0,((K,H)=>{T("Unable to load "+(K&&K.responseURL,H))}))}else{const M=K=>{E&&!this._doNotHandleContextLost&&(s._buffer=K),I(s,n,u,K,s.invertY,H,!1,f,y)};!Z||l?z&&("string"===typeof z.decoding||z.close)?M(z):C._FileToolsLoadImage(K||"",M,T,u?u.offlineProvider:null,L,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof z||z instanceof ArrayBuffer||ArrayBuffer.isView(z)||z instanceof Blob?C._FileToolsLoadImage(z,M,T,u?u.offlineProvider:null,L,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):z&&M(z)}return s}_rebuildBuffers(){for(const K of this._uniformBuffers)K._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,v.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const K in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,K)&&(this._boundTexturesCache[K]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(K){this._name=K}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(K){this._hardwareScalingLevel=K,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(K){this._doNotHandleContextLost=K}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(K,H,M){var w,u;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new W,this._stencilStateComposer=new I,this._stencilState=new f,this._alphaState=new z,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new O.d,this.onCanvasFocusObservable=new O.d,this.onNewSceneAddedObservable=new O.d,this.onResizeObservable=new O.d,this.onCanvasPointerOutObservable=new O.d,this.onEffectErrorObservable=new O.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new O.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=K=>this._renderLoop(K),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new O.d,this.onAfterShaderCompilationObservable=new O.d,this.onBeginFrameObservable=new O.d,this.onEndFrameObservable=new O.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new O.d,this.onContextRestoredObservable=new O.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Hh=new O.d,this.onReleaseEffectsObservable=new O.d,q.b.Instances.push(this),this.startTime=h.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,y.d.SetMatrixPrecision(!!H.useHighPrecisionMatrix),(0,v.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=M??!1,H.antialias=K??H.antialias,H.deterministicLockstep=H.deterministicLockstep??!1,H.lockstepMaxSteps=H.lockstepMaxSteps??4,H.timeStep=H.timeStep??1/60,H.stencil=H.stencil??!0,this._audioContext=(null===(w=H.audioEngineOptions)||void 0===w?void 0:w.audioContext)??null,this._audioDestination=(null===(u=H.audioEngineOptions)||void 0===u?void 0:u.audioDestination)??null,this.premultipliedAlpha=H.premultipliedAlpha??!0,this._doNotHandleContextLost=!!H.doNotHandleContextLost,this._isStencilEnable=!!H.stencil,this.useExactSrgbConversions=H.useExactSrgbConversions??!1;const G=(0,v.i)()&&window.devicePixelRatio||1,a=H.limitDeviceRatio||G;M=M||H.adaptToDeviceRatio||!1,this._hardwareScalingLevel=M?1/Math.min(a,G):1,this._lastDevicePixelRatio=G,this._creationOptions=H}resize(){let K,H,M=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const K=(0,v.i)()&&window.devicePixelRatio||1,H=this._lastDevicePixelRatio/K;this._lastDevicePixelRatio=K,this._hardwareScalingLevel*=H}if((0,v.i)()&&(0,v.e)())if(this._renderingCanvas){var q,w;const M=null===(q=(w=this._renderingCanvas).getBoundingClientRect)||void 0===q?void 0:q.call(w);K=this._renderingCanvas.clientWidth||(null===M||void 0===M?void 0:M.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,H=this._renderingCanvas.clientHeight||(null===M||void 0===M?void 0:M.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else K=window.innerWidth,H=window.innerHeight;else K=this._renderingCanvas?this._renderingCanvas.width:100,H=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(K/this._hardwareScalingLevel,H/this._hardwareScalingLevel,M)}setSize(K,H){let M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(K|=0,H|=0,!M&&this._renderingCanvas.width===K&&this._renderingCanvas.height===H)return!1;if(this._renderingCanvas.width=K,this._renderingCanvas.height=H,this.scenes){for(let K=0;K<this.scenes.length;K++){const H=this.scenes[K];for(let K=0;K<H.cameras.length;K++){H.cameras[K]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(K,H,M,q,w,u,y,h,W,I,f){throw(0,G.c)("engine.rawTexture")}createRawCubeTexture(K,H,M,q,w,u,y,h){throw(0,G.c)("engine.rawTexture")}createRawTexture3D(K,H,M,q,w,u,y,h,W,I,f){throw(0,G.c)("engine.rawTexture")}createRawTexture2DArray(K,H,M,q,w,u,y,h,W,I,f){throw(0,G.c)("engine.rawTexture")}_sharedInit(K){this._renderingCanvas=K}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const K=navigator.userAgent;this.hostInformation.isMobile=-1!==K.indexOf("Mobile")||-1!==K.indexOf("Mac")&&(0,v.e)()&&"ontouchend"in document},this._checkForMobile(),(0,v.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(K){return document.createElement("video")}_reportDrawCall(){var K;let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(K=this._drawCalls)||void 0===K||K.addCount(H,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(K,H){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(K,H){return createImageBitmap(K,H)}resizeImageBitmap(K,H,M){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(K){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(K,H){if("undefined"===typeof document)return new OffscreenCanvas(K,H);const M=document.createElement("canvas");return M.width=K,M.height=H,M}createCanvas(K,H){return C._CreateCanvas(K,H)}static _FileToolsLoadImage(K,H,M,q,w,u,y){throw(0,G.c)("FileTools")}_loadFile(K,H,M,q,w,u){const y=(0,L.g)(K,H,M,q,w,u);return this._activeRequests.push(y),y.onCompleteObservable.add((()=>{const K=this._activeRequests.indexOf(y);-1!==K&&this._activeRequests.splice(K,1)})),y}static _FileToolsLoadFile(K,H,M,q,w,u){if(L.c.loadFile)return L.c.loadFile(K,H,M,q,w,u);throw(0,G.c)("FileTools")}dispose(){var K;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(K=this.releaseComputeEffects)||void 0===K||K.call(this),u.Effect.ResetCache();for(const M of this._activeRequests)M.abort();this._boundRenderFunction=null,this.Hh.notifyObservers(this),this.Hh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,v.i)()&&window.removeEventListener("resize",this._checkForMobile);const H=q.b.Instances.indexOf(this);H>=0&&q.b.Instances.splice(H,1),q.b.Instances.length||(q.b.OnEnginesDisposedObservable.notifyObservers(this),q.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(K){throw(0,G.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(K,H){for(let M=0;M<q.b.Instances.length;M++){const w=q.b.Instances[M];for(let M=0;M<w.scenes.length;M++)w.scenes[M].markAllMaterialsAsDirty(K,H)}}}C._RenderPassIdCounter=0,C._RescalePostProcessFactory=null,C.CollisionsEpsilon=.001,C.QueueNewFrame=B},11143:(K,H,M)=>{M.d(H,{b:()=>w});var q=M(11102);class w{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}w.Instances=[],w.OnEnginesDisposedObservable=new q.d,w._LastCreatedScene=null,w.UseFallbackTexture=!0,w.FallbackTexture=""},11212:(K,H,M)=>{M.d(H,{d:()=>q});class q{static SetMatrixPrecision(K){if(q.MatrixTrackPrecisionChange=!1,K&&!q.MatrixUse64Bits&&q.MatrixTrackedMatrices)for(let H=0;H<q.MatrixTrackedMatrices.length;++H){const K=q.MatrixTrackedMatrices[H],M=K.Mh;K.Mh=new Array(16);for(let H=0;H<16;++H)K.Mh[H]=M[H]}q.MatrixUse64Bits=K,q.MatrixCurrentType=q.MatrixUse64Bits?Array:Float32Array,q.MatrixTrackedMatrices=null}}q.MatrixUse64Bits=!1,q.MatrixTrackPrecisionChange=!0,q.MatrixCurrentType=Float32Array,q.MatrixTrackedMatrices=[]},11228:(K,H,M)=>{M.d(H,{c:()=>y});var q=M(11112);const w=new Map;function u(K,H){(function(K){return w.delete(K)})(K)&&q.e.Warn(`Extension with the name '${K}' already exists`),w.set(K,H)}function y(K,H){"image/ktx"!==H&&"image/ktx2"!==H||(K=".ktx"),w.has(K)||(K.endsWith(".ies")&&u(".ies",(async()=>await M.e(15).then(M.bind(M,13715)).then((K=>new K._IESTextureLoader)))),K.endsWith(".dds")&&u(".dds",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(19),M.e(18),M.e(28)]).then(M.bind(M,13718)).then((K=>new K._DDSTextureLoader)))),K.endsWith(".basis")&&u(".basis",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(47)]).then(M.bind(M,13724)).then((K=>new K._BasisTextureLoader)))),K.endsWith(".env")&&u(".env",(async()=>await Promise.all([M.e(14),M.e(17),M.e(13),M.e(19),M.e(18),M.e(23),M.e(21),M.e(45),M.e(48)]).then(M.bind(M,13728)).then((K=>new K._ENVTextureLoader)))),K.endsWith(".hdr")&&u(".hdr",(async()=>await Promise.all([M.e(14),M.e(49)]).then(M.bind(M,13730)).then((K=>new K._HDRTextureLoader)))),(K.endsWith(".ktx")||K.endsWith(".ktx2"))&&(u(".ktx",(async()=>await M.e(30).then(M.bind(M,13738)).then((K=>new K._KTXTextureLoader)))),u(".ktx2",(async()=>await M.e(30).then(M.bind(M,13738)).then((K=>new K._KTXTextureLoader))))),K.endsWith(".tga")&&u(".tga",(async()=>await M.e(50).then(M.bind(M,13743)).then((K=>new K._TGATextureLoader)))),K.endsWith(".exr")&&u(".exr",(async()=>await M.e(16).then(M.bind(M,13747)).then((K=>new K._ExrTextureLoader)))));const q=w.get(K);return q?Promise.resolve(q(H)):null}},11216:(K,H,M)=>{M.d(H,{d:()=>y});var q,w=M(11102),u=M(11223);!function(K){K[K.Unknown=0]="Unknown",K[K.Url=1]="Url",K[K.Temp=2]="Temp",K[K.Raw=3]="Raw",K[K.Dynamic=4]="Dynamic",K[K.RenderTarget=5]="RenderTarget",K[K.MultiRenderTarget=6]="MultiRenderTarget",K[K.Cube=7]="Cube",K[K.CubeRaw=8]="CubeRaw",K[K.CubePrefiltered=9]="CubePrefiltered",K[K.Raw3D=10]="Raw3D",K[K.Raw2DArray=11]="Raw2DArray",K[K.DepthStencil=12]="DepthStencil",K[K.CubeRawRGBD=13]="CubeRawRGBD",K[K.Depth=14]="Depth"}(q||(q={}));class y extends u.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(K){this.generateMipMaps=K}get uniqueId(){return this._uniqueId}_setUniqueId(K){this._uniqueId=K}getEngine(){return this._engine}get source(){return this._source}constructor(K,H){let M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new w.d,this.onErrorObservable=new w.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=K,this._source=H,this._uniqueId=y._Counter++,M||(this._hardwareTexture=K._createHardwareTexture())}incrementReferences(){this._references++}updateSize(K,H){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,K,H,M),this.width=K,this.height=H,this.depth=M,this.baseWidth=K,this.baseHeight=H,this.baseDepth=M,this._size=K*H*M}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const K=this.onRebuildCallback(this),H=H=>{H._swapAndDie(this,!1),this.isReady=K.isReady};return void(K.isAsync?K.proxy.then(H):H(K.proxy))}let K;switch(this.source){case 2:case 12:case 14:break;case 1:return void(K=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(K=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:K=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),K._swapAndDie(this,!1),this.isReady=!0;break;case 10:K=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 11:K=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),K._swapAndDie(this,!1),this.isReady=!0;break;case 4:K=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),K._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(K=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:K=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),K._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return K=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(K=>{K&&K._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(K._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(K){var H;let M=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(H=this._hardwareTexture)||void 0===H||H.setUsage(K._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),K._hardwareTexture=this._hardwareTexture,M&&(K._isRGBD=this._isRGBD),this._lodTextureHigh&&(K._lodTextureHigh&&K._lodTextureHigh.dispose(),K._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(K._lodTextureMid&&K._lodTextureMid.dispose(),K._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(K._lodTextureLow&&K._lodTextureLow.dispose(),K._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(K._irradianceTexture&&K._irradianceTexture.dispose(),K._irradianceTexture=this._irradianceTexture);const q=this._engine.getLoadedTexturesCache();let w=q.indexOf(this);-1!==w&&q.splice(w,1),w=q.indexOf(K),-1===w&&q.push(K)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}y._Counter=0},11223:(K,H,M)=>{M.d(H,{c:()=>q});class q{get wrapU(){return this._cachedWrapU}set wrapU(K){this._cachedWrapU=K}get wrapV(){return this._cachedWrapV}set wrapV(K){this._cachedWrapV=K}get wrapR(){return this._cachedWrapR}set wrapR(K){this._cachedWrapR=K}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(K){this._cachedAnisotropicFilteringLevel=K}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(K){this._comparisonFunction=K}get useMipMaps(){return this._useMipMaps}set useMipMaps(K){this._useMipMaps=K}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=K,this._cachedWrapV=H,this._cachedWrapR=M,this._cachedAnisotropicFilteringLevel=q,this.samplingMode=w,this._comparisonFunction=u,this}compareSampler(K){return this._cachedWrapU===K._cachedWrapU&&this._cachedWrapV===K._cachedWrapV&&this._cachedWrapR===K._cachedWrapR&&this._cachedAnisotropicFilteringLevel===K._cachedAnisotropicFilteringLevel&&this.samplingMode===K.samplingMode&&this._comparisonFunction===K._comparisonFunction&&this._useMipMaps===K._useMipMaps}}},11118:(K,H,M)=>{M.d(H,{b:()=>u});var q=M(11112);const w=(K,H,M)=>K?K.getClassName&&"Mesh"===K.getClassName()?null:!K.getClassName||"SubMesh"!==K.getClassName()&&"PhysicsBody"!==K.getClassName()?K.clone?K.clone():Array.isArray(K)?K.slice():M&&"object"===typeof K?{...K}:null:K.clone(H):null;class u{static DeepCopy(K,H,M,u){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const h=function(K){const H=[];do{const M=Object.getOwnPropertyNames(K);for(const K of M)-1===H.indexOf(K)&&H.push(K)}while(K=Object.getPrototypeOf(K));return H}(K);for(const I of h){if("_"===I[0]&&(!u||-1===u.indexOf(I)))continue;if(I.endsWith("Observable"))continue;if(M&&-1!==M.indexOf(I))continue;const h=K[I],f=typeof h;if("function"!==f)try{if("object"===f)if(h instanceof Uint8Array)H[I]=Uint8Array.from(h);else if(h instanceof Array){if(H[I]=[],h.length>0)if("object"==typeof h[0])for(let K=0;K<h.length;K++){const M=w(h[K],H,y);-1===H[I].indexOf(M)&&H[I].push(M)}else H[I]=h.slice(0)}else H[I]=w(h,H,y);else H[I]=h}catch(W){q.e.Warn(W.message)}}}}},11159:(K,H,M)=>{M.d(H,{b:()=>q,c:()=>w,e:()=>u});class q extends Error{}q._setPrototypeOf=Object.setPrototypeOf||((K,H)=>(K.__proto__=H,K));const w={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class u extends q{constructor(K,H,M){super(K),this.errorCode=H,this.innerError=M,this.name="RuntimeError",q._setPrototypeOf(this,u.prototype)}}},11152:(K,H,M)=>{M.d(H,{d:()=>T,e:()=>C,i:()=>V,j:()=>c,o:()=>s,l:()=>L,p:()=>E,s:()=>l,w:()=>D,A:()=>i});var q=M(11135),w=M(11105),u=M(11102);class y{}y.FilesToLoad={};var h=M(11159),W=M(11164),I=M(11169),f=M(11143),z=M(11112),G=M(11176),a=M(11174),v=M(11180);const O=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class L extends h.e{constructor(K,H){super(K,h.c.LoadFileError),this.name="LoadFileError",h.b._setPrototypeOf(this,L.prototype),H instanceof q.c?this.request=H:this.file=H}}class S extends h.e{constructor(K,H){super(K,h.c.RequestFileError),this.request=H,this.name="RequestFileError",h.b._setPrototypeOf(this,S.prototype)}}class B extends h.e{constructor(K,H){super(K,h.c.ReadFileError),this.file=H,this.name="ReadFileError",h.b._setPrototypeOf(this,B.prototype)}}const C={DefaultRetryStrategy:class{static ExponentialBackoff(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(M,q,w)=>0!==q.status||w>=K||-1!==M.indexOf("file:")?-1:Math.pow(2,w)*H}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:K=>K,ScriptBaseUrl:"",ScriptPreprocessUrl:K=>K,CleanUrl:K=>K=K.replace(/#/gm,"%23")},i=(K,H)=>{if((!K||0!==K.indexOf("data:"))&&C.CorsBehavior)if("string"===typeof C.CorsBehavior||C.CorsBehavior instanceof String)H.crossOrigin=C.CorsBehavior;else{const M=C.CorsBehavior(K);M&&(H.crossOrigin=M)}},Z={getRequiredSize:null},E=function(K,H,M,w){let u,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",I=arguments.length>5?arguments[5]:void 0,z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===z||void 0===z||!z._features.forceBitmapOverHTMLImageElement))return M("LoadImage is only supported in web or BabylonNative environments."),null;let G=!1;K instanceof ArrayBuffer||ArrayBuffer.isView(K)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(u=URL.createObjectURL(new Blob([K],{type:h})),G=!0):u=`data:${h};base64,`+(0,W.l)(K):K instanceof Blob?(u=URL.createObjectURL(K),G=!0):(u=C.CleanUrl(K),u=C.PreprocessUrl(u));const a=H=>{if(M){const q=u||K.toString();M(`Error while trying to load image: ${0===q.indexOf("http")||q.length<=128?q:q.slice(0,128)+"..."}`,H)}};if(null!==z&&void 0!==z&&z._features.forceBitmapOverHTMLImageElement)return s(u,(q=>{z.createImageBitmap(new Blob([q],{type:h}),{premultiplyAlpha:"none",...I}).then((K=>{H(K),G&&URL.revokeObjectURL(u)})).catch((H=>{M&&M("Error while trying to load image: "+K,H)}))}),void 0,w||void 0,!0,((K,H)=>{a(H)})),null;const v=new Image;if(Z.getRequiredSize){const H=Z.getRequiredSize(K);H.width&&(v.width=H.width),H.height&&(v.height=H.height)}i(u,v);const O=[],L=()=>{for(const K of O)K.target.removeEventListener(K.name,K.handler);O.length=0};O.push({target:v,name:"load",handler:()=>{L(),H(v),G&&v.src&&URL.revokeObjectURL(v.src)}}),O.push({target:v,name:"error",handler:K=>{L(),a(K),G&&v.src&&URL.revokeObjectURL(v.src)}}),O.push({target:document,name:"securitypolicyviolation",handler:K=>{if(K.blockedURI!==v.src||"qh"===K.disposition)return;L();const H=new Error(`CSP violation of policy ${K.effectiveDirective} ${K.blockedURI}. Current policy is ${K.originalPolicy}`);f.b.UseFallbackTexture=!1,a(H),G&&v.src&&URL.revokeObjectURL(v.src),v.src=""}}),(()=>{for(const K of O)K.target.addEventListener(K.name,K.handler)})();const S="blob:"===u.substring(0,5),B="data:"===u.substring(0,5),E=()=>{S||B||!q.c.IsCustomRequestAvailable?v.src=u:s(u,((K,H,M)=>{const q=new Blob([K],{type:!h&&M?M:h}),w=URL.createObjectURL(q);G=!0,v.src=w}),void 0,w||void 0,!0,((K,H)=>{a(H)}))},l=()=>{w&&w.loadImage(u,v)};if(!S&&!B&&w&&w.enableTexturesOffline)w.open(l,E);else{if(-1!==u.indexOf("file:")){const K=decodeURIComponent(u.substring(5).toLowerCase());if(y.FilesToLoad[K]&&"undefined"!==typeof URL){try{let H;try{H=URL.createObjectURL(y.FilesToLoad[K])}catch(D){H=URL.createObjectURL(y.FilesToLoad[K])}v.src=H,G=!0}catch(V){v.src=""}return v}}E()}return v},l=(K,H,M,q,w)=>{const y=new FileReader,h={onCompleteObservable:new u.d,abort:()=>y.abort()};return y.onloadend=()=>h.onCompleteObservable.notifyObservers(h),w&&(y.onerror=()=>{w(new B(`Unable to read ${K.name}`,K))}),y.onload=K=>{H(K.target.result)},M&&(y.onprogress=M),q?y.readAsArrayBuffer(K):y.readAsText(K),h},s=(K,H,M,q,w,W,I)=>{if(K.name)return l(K,H,M,w,W?K=>{W(void 0,K)}:void 0);const f=K;if(-1!==f.indexOf("file:")){let K=decodeURIComponent(f.substring(5).toLowerCase());0===K.indexOf("./")&&(K=K.substring(2));const q=y.FilesToLoad[K];if(q)return l(q,H,M,w,W?K=>W(void 0,new L(K.message,K.file)):void 0)}const{match:a,type:v}=k(f);if(a){const K={onCompleteObservable:new u.d,abort:()=>()=>{}};try{const K=w?T(f):d(f);H(K,void 0,v)}catch(h){W?W(void 0,h):z.e.Error(h.message||"Failed to parse the Data URL")}return G.c.SetImmediate((()=>{K.onCompleteObservable.notifyObservers(K)})),K}return D(f,((K,M)=>{H(K,null===M||void 0===M?void 0:M.responseURL,null===M||void 0===M?void 0:M.getResponseHeader("content-type"))}),M,q,w,W?K=>{W(K.request,new L(K.message,K.request))}:void 0,I)},D=(K,H,M,y,h,W,I)=>{K=C.CleanUrl(K),K=C.PreprocessUrl(K);const f=C.BaseUrl+K;let G=!1;const a={onCompleteObservable:new u.d,abort:()=>G=!0},v=()=>{let K,u=new q.c,y=null;const v=()=>{u&&(M&&u.removeEventListener("progress",M),K&&u.removeEventListener("readystatechange",K),u.removeEventListener("loadend",O))};let O=()=>{v(),a.onCompleteObservable.notifyObservers(a),a.onCompleteObservable.clear(),M=void 0,K=null,O=null,W=void 0,I=void 0,H=void 0};a.abort=()=>{G=!0,O&&O(),u&&u.readyState!==(XMLHttpRequest.DONE||4)&&u.abort(),null!==y&&(clearTimeout(y),y=null),u=null};const L=K=>{const H=K.message||"Unknown error";W&&u?W(new S(H,u)):z.e.Error(H)},B=z=>{if(u){if(u.open("GET",f),I)try{I(u)}catch(a){return void L(a)}h&&(u.responseType="arraybuffer"),M&&u.addEventListener("progress",M),O&&u.addEventListener("loadend",O),K=()=>{if(!G&&u&&u.readyState===(XMLHttpRequest.DONE||4)){if(K&&u.removeEventListener("readystatechange",K),u.status>=200&&u.status<300||0===u.status&&(!(0,w.i)()||n())){const K=h?u.response:u.responseText;if(null!==K){try{H&&H(K,u)}catch(a){L(a)}return}}const M=C.DefaultRetryStrategy;if(M){const K=M(f,u,z);if(-1!==K)return v(),u=new q.c,void(y=setTimeout((()=>B(z+1)),K))}const I=new S("Error status: "+u.status+" "+u.statusText+" - Unable to load "+f,u);W&&W(I)}},u.addEventListener("readystatechange",K),u.send()}};B(0)};if(y&&y.enableSceneOffline){const q=K=>{K&&K.status>400?W&&W(K):v()},w=()=>{y&&y.loadFile(C.BaseUrl+K,(K=>{!G&&H&&H(K),a.onCompleteObservable.notifyObservers(a)}),M?K=>{!G&&M&&M(K)}:void 0,q,h)};y.open(w,q)}else v();return a},V=K=>{const{match:H,type:M}=k(K);if(H)return M||void 0;const q=K.lastIndexOf(".");switch(K.substring(q+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"wh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},n=()=>"undefined"!==typeof location&&"file:"===location.protocol,c=K=>O.test(K),k=K=>{const H=O.exec(K);if(null===H||0===H.length)return{match:!1,type:""};return{match:!0,type:H[0].replace("data:","").replace("base64,","")}};function T(K){return(0,W.d)(K.split(",")[1])}const d=K=>(0,W.g)(K.split(",")[1]);let x;v.b._FileToolsLoadImage=E,a.c.loadFile=s,I.m.loadFile=s;((K,H,M,q,w,u,y,h,W,I)=>{x={DecodeBase64UrlToBinary:K,DecodeBase64UrlToString:H,DefaultRetryStrategy:M.DefaultRetryStrategy,BaseUrl:M.BaseUrl,CorsBehavior:M.CorsBehavior,PreprocessUrl:M.PreprocessUrl,IsBase64DataUrl:q,IsFileURL:w,LoadFile:u,LoadImage:y,ReadFile:h,RequestFile:W,SetCorsBehavior:I},Object.defineProperty(x,"DefaultRetryStrategy",{get:function(){return M.DefaultRetryStrategy},set:function(K){M.DefaultRetryStrategy=K}}),Object.defineProperty(x,"BaseUrl",{get:function(){return M.BaseUrl},set:function(K){M.BaseUrl=K}}),Object.defineProperty(x,"PreprocessUrl",{get:function(){return M.PreprocessUrl},set:function(K){M.PreprocessUrl=K}}),Object.defineProperty(x,"CorsBehavior",{get:function(){return M.CorsBehavior},set:function(K){M.CorsBehavior=K}})})(T,d,C,c,n,s,E,l,D,i)},11250:(K,H,M)=>{function q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(K=>{const H=16*Math.random()|0;return("x"===K?H:3&H|8).toString(16)}))}M.d(H,{c:()=>q})},11233:(K,H,M)=>{M.d(H,{c:()=>u});var q=M(11112),w=M(11242);class u{static Instantiate(K){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[K])return this.RegisteredExternalClasses[K];const H=(0,w.b)(K);if(H)return H;q.e.Warn(K+" not found, you may have missed an import.");const M=K.split(".");let u=window||this;for(let q=0,w=M.length;q<w;q++)u=u[M[q]];return"function"!==typeof u?null:u}}u.RegisteredExternalClasses={}},11125:(K,H,M)=>{M.d(H,{d:()=>w});var q=M(11105);class w{static get Now(){return(0,q.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11164:(K,H,M)=>{M.d(H,{d:()=>y,g:()=>u,k:()=>q,l:()=>w});const q=K=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(K);let H="";for(let M=0;M<K.byteLength;M++)H+=String.fromCharCode(K[M]);return H},w=K=>{const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let M,q,w,u,y,h,W,I="",f=0;const z=ArrayBuffer.isView(K)?new Uint8Array(K.buffer,K.byteOffset,K.byteLength):new Uint8Array(K);for(;f<z.length;)M=z[f++],q=f<z.length?z[f++]:Number.NaN,w=f<z.length?z[f++]:Number.NaN,u=M>>2,y=(3&M)<<4|q>>4,h=(15&q)<<2|w>>6,W=63&w,isNaN(q)?h=W=64:isNaN(w)&&(W=64),I+=H.charAt(u)+H.charAt(y)+H.charAt(h)+H.charAt(W);return I},u=K=>atob(K),y=K=>{const H=u(K),M=H.length,q=new Uint8Array(new ArrayBuffer(M));for(let w=0;w<M;w++)q[w]=H.charCodeAt(w);return q.buffer}},11257:(K,H,M)=>{function q(K){let H=1;do{H*=2}while(H<K);return H===K}function w(K,H,M){return K*(1-M)+H*M}function u(K){const H=y(K),M=h(K);return H-K>K-M?M:H}function y(K){return K--,K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,K|=K>>16,++K}function h(K){return K|=K>>1,K|=K>>2,K|=K>>4,K|=K>>8,(K|=K>>16)-(K>>1)}function W(K,H){let M;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:M=h(K);break;case 2:M=u(K);break;default:M=y(K)}return Math.min(M,H)}M.d(H,{d:()=>h,e:()=>W,i:()=>q,l:()=>w,m:()=>u})},11100:(K,H,M)=>{M.r(H),M.d(H,{AsyncLoop:()=>B,Tools:()=>L,className:()=>S});var q=M(11102),w=M(11105),u=M(11112),y=M(11118),h=M(11125),W=M(11132),I=M(11135),f=M(11143),z=M(11152),G=M(11176),a=M(11233),v=M(11250),O=M(11257);class L{static get BaseUrl(){return z.e.BaseUrl}static set BaseUrl(K){z.e.BaseUrl=K}static get CleanUrl(){return z.e.CleanUrl}static set CleanUrl(K){z.e.CleanUrl=K}static IsAbsoluteUrl(K){return 0===K.indexOf("//")||-1!==K.indexOf("://")&&(-1!==K.indexOf(".")&&(-1!==K.indexOf("/")&&(!(K.indexOf(":")>K.indexOf("/"))&&(K.indexOf("://")<K.indexOf(".")||(0===K.indexOf("data:")||0===K.indexOf("blob:"))))))}static set ScriptBaseUrl(K){z.e.ScriptBaseUrl=K}static get ScriptBaseUrl(){return z.e.ScriptBaseUrl}static set CDNBaseUrl(K){L.ScriptBaseUrl=K,L.AssetBaseUrl=K}static set ScriptPreprocessUrl(K){z.e.ScriptPreprocessUrl=K}static get ScriptPreprocessUrl(){return z.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return z.e.DefaultRetryStrategy}static set DefaultRetryStrategy(K){z.e.DefaultRetryStrategy=K}static get CorsBehavior(){return z.e.CorsBehavior}static set CorsBehavior(K){z.e.CorsBehavior=K}static get UseFallbackTexture(){return f.b.UseFallbackTexture}static set UseFallbackTexture(K){f.b.UseFallbackTexture=K}static get RegisteredExternalClasses(){return a.c.RegisteredExternalClasses}static set RegisteredExternalClasses(K){a.c.RegisteredExternalClasses=K}static get fallbackTexture(){return f.b.FallbackTexture}static set fallbackTexture(K){f.b.FallbackTexture=K}static FetchToRef(K,H,M,q,w,u){const y=4*((Math.abs(K)*M%M|0)+(Math.abs(H)*q%q|0)*M);u.r=w[y]/255,u.g=w[y+1]/255,u.b=w[y+2]/255,u.a=w[y+3]/255}static Mix(K,H,M){return 0}static Instantiate(K){return a.c.Instantiate(K)}static SetImmediate(K){G.c.SetImmediate(K)}static IsExponentOfTwo(K){return!0}static FloatRound(K){return Math.fround(K)}static GetFilename(K){const H=K.lastIndexOf("/");return H<0?K:K.substring(H+1)}static GetFolderPath(K){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const M=K.lastIndexOf("/");return M<0?H?K:"":K.substring(0,M+1)}static ToDegrees(K){return 180*K/Math.PI}static ToRadians(K){return K*Math.PI/180}static SmoothAngleChange(K,H){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const q=this.ToRadians(K),w=this.ToRadians(H);return this.ToDegrees(Math.atan2((1-M)*Math.sin(w)+M*Math.sin(q),(1-M)*Math.cos(w)+M*Math.cos(q)))}static MakeArray(K,H){return!0===H||void 0!==K&&null!=K?Array.isArray(K)?K:[K]:null}static GetPointerPrefix(K){return(0,w.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(K,H){(0,z.A)(K,H)}static SetReferrerPolicyBehavior(K,H){H.referrerPolicy=K}static get PreprocessUrl(){return z.e.PreprocessUrl}static set PreprocessUrl(K){z.e.PreprocessUrl=K}static LoadImage(K,H,M,q,w,u){return(0,z.p)(K,H,M,q,w,u)}static LoadFile(K,H,M,q,w,u){return(0,z.o)(K,H,M,q,w,u)}static async LoadFileAsync(K){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((M,q)=>{(0,z.o)(K,(K=>{M(K)}),void 0,void 0,H,((K,H)=>{q(H)}))}))}static GetAssetUrl(K){if(!K)return"";if(L.AssetBaseUrl&&K.startsWith(L._DefaultAssetsUrl)){const H="/"===L.AssetBaseUrl[L.AssetBaseUrl.length-1]?L.AssetBaseUrl.substring(0,L.AssetBaseUrl.length-1):L.AssetBaseUrl;return K.replace(L._DefaultAssetsUrl,H)}return K}static GetBabylonScriptURL(K,H){if(!K)return"";if(L.ScriptBaseUrl&&K.startsWith(L._DefaultCdnUrl)){const H="/"===L.ScriptBaseUrl[L.ScriptBaseUrl.length-1]?L.ScriptBaseUrl.substring(0,L.ScriptBaseUrl.length-1):L.ScriptBaseUrl;K=K.replace(L._DefaultCdnUrl,H)}return K=L.ScriptPreprocessUrl(K),H&&(K=L.GetAbsoluteUrl(K)),K}static LoadBabylonScript(K,H,M,q){K=L.GetBabylonScriptURL(K),L.LoadScript(K,H,M)}static async LoadBabylonScriptAsync(K){return K=L.GetBabylonScriptURL(K),await L.LoadScriptAsync(K)}static LoadScript(K,H,M,q){let u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(K),H&&H()}catch(W){null===M||void 0===M||M(`Unable to load script '${K}' in worker`,W)}return}if(!(0,w.i)())return void(null===M||void 0===M||M(`Cannot load script '${K}' outside of a window or a worker`));const y=document.getElementsByTagName("head")[0],h=document.createElement("script");u?(h.setAttribute("type","module"),h.innerText=K):(h.setAttribute("type","text/javascript"),h.setAttribute("src",K)),q&&(h.id=q),h.onload=()=>{H&&H()},h.onerror=H=>{M&&M(`Unable to load script '${K}'`,H)},y.appendChild(h)}static async LoadScriptAsync(K,H){return await new Promise(((M,q)=>{this.LoadScript(K,(()=>{M()}),((K,H)=>{q(H||new Error(K))}),H)}))}static ReadFileAsDataURL(K,H,M){const w=new FileReader,u={onCompleteObservable:new q.d,abort:()=>w.abort()};return w.onloadend=()=>{u.onCompleteObservable.notifyObservers(u)},w.onload=K=>{H(K.target.result)},w.onprogress=M,w.readAsDataURL(K),u}static ReadFile(K,H,M,q,w){return(0,z.s)(K,H,M,q,w)}static FileAsURL(K){const H=new Blob([K]);return window.URL.createObjectURL(H)}static Format(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return K.toFixed(H)}static DeepCopy(K,H,M,q){y.b.DeepCopy(K,H,M,q)}static IsEmpty(K){for(const H in K)if(Object.prototype.hasOwnProperty.call(K,H))return!1;return!0}static RegisterTopRootEvents(K,H){for(let q=0;q<H.length;q++){const w=H[q];K.addEventListener(w.name,w.handler,!1);try{window.parent&&window.parent.addEventListener(w.name,w.handler,!1)}catch(M){}}}static UnregisterTopRootEvents(K,H){for(let q=0;q<H.length;q++){const w=H[q];K.removeEventListener(w.name,w.handler);try{K.parent&&K.parent.removeEventListener(w.name,w.handler)}catch(M){}}}static async DumpFramebuffer(K,H,M,q){throw(0,W.c)("DumpTools")}static DumpData(K,H,M,q){throw(0,W.c)("DumpTools")}static async DumpDataAsync(K,H,M){throw(0,W.c)("DumpTools")}static _IsOffScreenCanvas(K){return void 0!==K.convertToBlob}static ToBlob(K,H){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",q=arguments.length>3?arguments[3]:void 0;L._IsOffScreenCanvas(K)||K.toBlob||(K.toBlob=function(K,H,M){setTimeout((()=>{const q=atob(this.toDataURL(H,M).split(",")[1]),w=q.length,u=new Uint8Array(w);for(let K=0;K<w;K++)u[K]=q.charCodeAt(K);K(new Blob([u]))}))}),L._IsOffScreenCanvas(K)?K.convertToBlob({type:M,quality:q}).then((K=>H(K))):K.toBlob((function(K){H(K)}),M,q)}static DownloadBlob(K,H){if("download"in document.createElement("a")){if(!H){const K=new Date;H="screenshot_"+((K.getFullYear()+"-"+(K.getMonth()+1)).slice(2)+"-"+K.getDate()+"_"+K.getHours()+"-"+("0"+K.getMinutes()).slice(-2))+".png"}L.Download(K,H)}else if(K&&"undefined"!==typeof URL){const H=URL.createObjectURL(K),M=window.open("");if(!M)return;const q=M.document.createElement("img");q.onload=function(){URL.revokeObjectURL(H)},q.src=H,M.document.body.appendChild(q)}}static EncodeScreenshotCanvasData(K,H){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",q=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0;if("string"!==typeof q&&H){if(H){if(L._IsOffScreenCanvas(K))return void K.convertToBlob({type:M,quality:w}).then((K=>{const M=new FileReader;M.readAsDataURL(K),M.onloadend=()=>{const K=M.result;H(K)}}));const q=K.toDataURL(M,w);H(q)}}else this.ToBlob(K,(function(K){K&&L.DownloadBlob(K,q),H&&H("")}),M,w)}static Download(K,H){if("undefined"===typeof URL)return;const M=window.URL.createObjectURL(K),q=document.createElement("a");document.body.appendChild(q),q.style.display="none",q.href=M,q.download=H,q.addEventListener("click",(()=>{q.parentElement&&q.parentElement.removeChild(q)})),q.click(),window.URL.revokeObjectURL(M)}static BackCompatCameraNoPreventDefault(K){return"boolean"===typeof K[0]?K[0]:"boolean"===typeof K[1]&&K[1]}static CreateScreenshot(K,H,M,q){throw(0,W.c)("ScreenshotTools")}static async CreateScreenshotAsync(K,H,M){throw(0,W.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(K,H,M,q){throw(0,W.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(K,H,M){throw(0,W.c)("ScreenshotTools")}static RandomId(){return(0,v.c)()}static IsBase64(K){return(0,z.j)(K)}static DecodeBase64(K){return(0,z.d)(K)}static get errorsCount(){return u.e.errorsCount}static Log(K){u.e.Log(K)}static Warn(K){u.e.Warn(K)}static Error(K){u.e.Error(K)}static get LogCache(){return u.e.LogCache}static ClearLogCache(){u.e.ClearLogCache()}static set LogLevels(K){u.e.LogLevels=K}static set PerformanceLogLevel(K){return(K&L.PerformanceUserMarkLogLevel)===L.PerformanceUserMarkLogLevel?(L.StartPerformanceCounter=L._StartUserMark,void(L.EndPerformanceCounter=L._EndUserMark)):(K&L.PerformanceConsoleLogLevel)===L.PerformanceConsoleLogLevel?(L.StartPerformanceCounter=L._StartPerformanceConsole,void(L.EndPerformanceCounter=L._EndPerformanceConsole)):(L.StartPerformanceCounter=L._StartPerformanceCounterDisabled,void(L.EndPerformanceCounter=L._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(K,H){}static _EndPerformanceCounterDisabled(K,H){}static _StartUserMark(K){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!L._Performance){if(!(0,w.i)())return;L._Performance=window.performance}H&&L._Performance.mark&&L._Performance.mark(K+"-Begin")}static _EndUserMark(K){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&L._Performance.mark&&(L._Performance.mark(K+"-End"),L._Performance.measure(K,K+"-Begin",K+"-End"))}static _StartPerformanceConsole(K){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(L._StartUserMark(K,H),console.time&&console.time(K))}static _EndPerformanceConsole(K){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(L._EndUserMark(K,H),console.timeEnd(K))}static get Now(){return h.d.Now}static GetClassName(K){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=null;if(!H&&K.getClassName)M=K.getClassName();else{if(K instanceof Object){M=(H?K:Object.getPrototypeOf(K)).constructor.__bjsclassName__}M||(M=typeof K)}return M}static First(K,H){for(const M of K)if(H(M))return M;return null}static getFullClassName(K){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=null,q=null;if(!H&&K.getClassName)M=K.getClassName();else{if(K instanceof Object){const w=H?K:Object.getPrototypeOf(K);M=w.constructor.__bjsclassName__,q=w.constructor.__bjsmoduleName__}M||(M=typeof K)}return M?(null!=q?q+".":"")+M:null}static async DelayAsync(K){await new Promise((H=>{setTimeout((()=>{H()}),K)}))}static IsSafari(){return!!(0,w.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function S(K,H){return M=>{M.__bjsclassName__=K,M.__bjsmoduleName__=null!=H?H:null}}L.AssetBaseUrl="",L.UseCustomRequestHeaders=!1,L.CustomRequestHeaders=I.c.CustomRequestHeaders,L.GetDOMTextContent=w.d,L._DefaultCdnUrl="https://cdn.babylonjs.com",L._DefaultAssetsUrl="https://assets.babylonjs.com/core",L.GetAbsoluteUrl="object"===typeof document?K=>{const H=document.createElement("a");return H.href=K,H.href}:"function"===typeof URL&&"object"===typeof location?K=>new URL(K,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},L.NoneLogLevel=u.e.NoneLogLevel,L.MessageLogLevel=u.e.MessageLogLevel,L.WarningLogLevel=u.e.WarningLogLevel,L.ErrorLogLevel=u.e.ErrorLogLevel,L.AllLogLevel=u.e.AllLogLevel,L.IsWindowObjectExist=w.i,L.PerformanceNoneLogLevel=0,L.PerformanceUserMarkLogLevel=1,L.PerformanceConsoleLogLevel=2,L.StartPerformanceCounter=L._StartPerformanceCounterDisabled,L.EndPerformanceCounter=L._EndPerformanceCounterDisabled;class B{constructor(K,H,M){let q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=K,this.index=q-1,this._done=!1,this._fn=H,this._successCallback=M}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(K,H,M){const q=new B(K,H,M,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return q.executeNext(),q}static SyncAsyncForLoop(K,H,M,q,w){let u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return B.Run(Math.ceil(K/H),(q=>{w&&w()?q.breakLoop():setTimeout((()=>{for(let u=0;u<H;++u){const y=q.index*H+u;if(y>=K)break;if(M(y),w&&w()){q.breakLoop();break}}q.executeNext()}),u)}),q)}}L.Mix=O.l,L.IsExponentOfTwo=O.i,f.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11242:(K,H,M)=>{M.d(H,{b:()=>u,f:()=>w});const q={};function w(K,H){q[K]=H}function u(K){return q[K]}},11135:(K,H,M)=>{M.d(H,{c:()=>q});class q{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(q.CustomRequestHeaders).length>0||q.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const K in q.CustomRequestHeaders){const H=q.CustomRequestHeaders[K];H&&this._xhr.setRequestHeader(K,H)}}_shouldSkipRequestModifications(K){return q.SkipRequestModificationForBabylonCDN&&(K.includes("preview.babylonjs.com")||K.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(K){this._xhr.onprogress=K}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(K){this._xhr.responseType=K}get timeout(){return this._xhr.timeout}set timeout(K){this._xhr.timeout=K}addEventListener(K,H,M){this._xhr.addEventListener(K,H,M)}removeEventListener(K,H,M){this._xhr.removeEventListener(K,H,M)}abort(){this._xhr.abort()}send(K){q.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(K)}open(K,H){for(const M of q.CustomRequestModifiers){if(this._shouldSkipRequestModifications(H))return;H=M(this._xhr,H)||H}H=(H=H.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=H,this._xhr.open(K,H,!0)}setRequestHeader(K,H){this._xhr.setRequestHeader(K,H)}getResponseHeader(K){return this._xhr.getResponseHeader(K)}}q.CustomRequestHeaders={},q.CustomRequestModifiers=new Array,q.SkipRequestModificationForBabylonCDN=!0}}]);