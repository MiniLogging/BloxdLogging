"use strict";(self.mo7o6813fhb=self.mo7o6813fhb||[]).push([[8],{12285:(t,U,y)=>{y.d(U,{e:()=>g});var I=y(12250),r=y(12221),Y=y(12287),mt=y(12313),X=y(12234);class P{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,t&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(t){this._zOffset!==t&&(this._zOffset=t,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(t){this._zOffsetUnits!==t&&(this._zOffsetUnits=t,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(t){this._cullFace!==t&&(this._cullFace=t,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(t){this._cull!==t&&(this._cull=t,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(t){this._depthFunc!==t&&(this._depthFunc=t,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(t){this._depthMask!==t&&(this._depthMask=t,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(t){this._depthTest!==t&&(this._depthTest=t,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(t){this._frontFace!==t&&(this._frontFace=t,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(t){this.isDirty&&(this._isCullDirty&&(this.cull?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(t.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(t.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(t.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(this.zOffset,this.zOffsetUnits)):t.disable(t.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(t.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class G{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(t){this._func!==t&&(this._func=t,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(t){this._funcRef!==t&&(this._funcRef=t,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(t){this._funcMask!==t&&(this._funcMask=t,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(t){this._opStencilFail!==t&&(this._opStencilFail=t,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(t){this._opDepthFail!==t&&(this._opDepthFail=t,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(t){this._opStencilDepthPass!==t&&(this._opStencilDepthPass=t,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&(this._enabled=t,this._isStencilTestDirty=!0)}constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,t&&this.reset()}reset(){var t;this.stencilMaterial=void 0,null===(t=this.stencilGlobal)||void 0===t||t.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(t){var U;if(!t)return;const y=!this.useStencilGlobalOnly&&!(null===(U=this.stencilMaterial)||void 0===U||!U.enabled);this.enabled=y?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=y?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=y?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=y?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=y?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=y?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=y?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=y?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(t.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(t.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(t.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class M{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=M.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=M.KEEP,this.opDepthFail=M.KEEP,this.opStencilDepthPass=M.REPLACE}get stencilFunc(){return this.func}set stencilFunc(t){this.func=t}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(t){this.funcRef=t}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(t){this.funcMask=t}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(t){this.opStencilFail=t}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(t){this.opDepthFail=t}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(t){this.opStencilDepthPass=t}get stencilMask(){return this.mask}set stencilMask(t){this.mask=t}get stencilTest(){return this.enabled}set stencilTest(t){this.enabled=t}}M.ALWAYS=519,M.KEEP=7680,M.REPLACE=7681;class L{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(t){this._alphaBlend!==t&&(this._alphaBlend=t,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(t,U,y,I){this._blendConstants[0]===t&&this._blendConstants[1]===U&&this._blendConstants[2]===y&&this._blendConstants[3]===I||(this._blendConstants[0]=t,this._blendConstants[1]=U,this._blendConstants[2]=y,this._blendConstants[3]=I,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(t,U,y,I){this._blendFunctionParameters[0]===t&&this._blendFunctionParameters[1]===U&&this._blendFunctionParameters[2]===y&&this._blendFunctionParameters[3]===I||(this._blendFunctionParameters[0]=t,this._blendFunctionParameters[1]=U,this._blendFunctionParameters[2]=y,this._blendFunctionParameters[3]=I,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(t,U){this._blendEquationParameters[0]===t&&this._blendEquationParameters[1]===U||(this._blendEquationParameters[0]=t,this._blendEquationParameters[1]=U,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(t){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?t.enable(t.BLEND):t.disable(t.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(t.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(t.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(t.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var h=y(12242),Q=y(12320),F=y(12212),E=y(12204),w=y(12273),D=y(12328);function l(t,U){if((0,F.p)()){const{requestAnimationFrame:y}=U||window;if("function"===typeof y)return y(t)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(t);return setTimeout(t,16)}class g{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(t){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get LX(){return this._useReverseDepthBuffer}set LX(t){t!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=t,this._depthCullingState.depthFunc=t?518:515)}setColorWrite(t){t!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=t)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(t){if(t)return this.isNDCHalfZRange?t.IS_NDC_HALF_ZRANGE="":delete t.IS_NDC_HALF_ZRANGE,this.LX?t.USE_REVERSE_DEPTHBUFFER="":delete t.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?t.USE_EXACT_SRGB_CONVERSIONS="":delete t.USE_EXACT_SRGB_CONVERSIONS);{let t="";return this.isNDCHalfZRange&&(t+="#define IS_NDC_HALF_ZRANGE"),this.LX&&(t&&(t+="\n"),t+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(t&&(t+="\n"),t+="#define USE_EXACT_SRGB_CONVERSIONS"),t}}_rebuildInternalTextures(){const t=this._internalTexturesCache.slice();for(const U of t)U._rebuild()}_rebuildRenderTargetWrappers(){const t=this._renderTargetWrapperCache.slice();for(const U of t)U._rebuild()}_rebuildEffects(){for(const t in this._compiledEffects){const U=this._compiledEffects[t];U._pipelineContext=null,U._prepareEffect()}Y.Effect.ResetCache()}_rebuildGraphicsResources(){var t;this.wipeCaches(!0),this._rebuildEffects(),null===(t=this._rebuildComputeEffects)||void 0===t||t.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){r.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(t){setTimeout((()=>{this._clearEmptyResources();const U=this._depthCullingState.depthTest,y=this._depthCullingState.depthFunc,I=this._depthCullingState.depthMask,r=this._stencilState.stencilTest;t(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=U,this._depthCullingState.depthFunc=y,this._depthCullingState.depthMask=I,this._stencilState.stencilTest=r,this._flagContextRestored()}),0)}get G(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(t){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(t){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const t=new Uint8Array(4),U=[t,t,t,t,t,t];this._emptyCubeTexture=this.createRawCubeTexture(U,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(t){if(!t)return this._activeRenderLoops.length=0,void this._cancelFrame();const U=this._activeRenderLoops.indexOf(t);U>=0&&(this._activeRenderLoops.splice(U,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const t=this._frameHandler;if(this._frameHandler=0,(0,F.p)()){const{cancelAnimationFrame:U}=this.getHostWindow()||window;if("function"===typeof U)return U(t)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(t);return clearTimeout(t)}}hX(){this.onBeginFrameObservable.notifyObservers(this)}QX(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(t){this._maxFPS=t,void 0!==t&&(this._minFrameTime=t<=0?Number.MAX_VALUE:1e3/t)}_isOverFrameTime(t){if(!t||void 0===this._maxFPS)return!1;const U=t-this._lastFrameTime;return this._lastFrameTime=t,this._renderAccumulator+=U,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(t){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(t)){let t=!0;(this.G||!this.renderEvenInBackground&&this._windowIsBackground)&&(t=!1),t&&(this.hX(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.QX())}}_renderLoop(t){this._processFrame(t),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let t=0;t<this._activeRenderLoops.length;t++){(0,this._activeRenderLoops[t])()}}_renderViews(){return!1}_queueNewFrame(t,U){return l(t,U)}runRenderLoop(t){-1===this._activeRenderLoops.indexOf(t)&&(this._activeRenderLoops.push(t),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(t){this._depthCullingState.depthTest=t}setZOffset(t){this._depthCullingState.zOffset=this.LX?-t:t}getZOffset(){const t=this._depthCullingState.zOffset;return this.LX?-t:t}setZOffsetUnits(t){this._depthCullingState.zOffsetUnits=this.LX?-t:t}getZOffsetUnits(){const t=this._depthCullingState.zOffsetUnits;return this.LX?-t:t}getHostWindow(){return(0,F.p)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(t){this._compatibilityMode=!0}_rebuildTextures(){for(const t of this.scenes)t._rebuildTextures();for(const t of this._virtualScenes)t._rebuildTextures()}_releaseRenderTargetWrapper(t){const U=this._renderTargetWrapperCache.indexOf(t);-1!==U&&this._renderTargetWrapperCache.splice(U,1)}get currentViewport(){return this._cachedViewport}setViewport(t,U,y){const I=U||this.getRenderWidth(),r=y||this.getRenderHeight(),Y=t.x||0,mt=t.y||0;this._cachedViewport=t,this._viewport(Y*I,mt*r,I*t.width,r*t.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(t){return new Path2D(t)}get description(){let t=this.name+this.version;return this._caps.parallelShaderCompile&&(t+=" - Parallel shader compilation"),t}_createTextureBase(t,U,y,Y){let mt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,G=arguments.length>7?arguments[7]:void 0,M=arguments.length>8?arguments[8]:void 0,L=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,F=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,w=arguments.length>13?arguments[13]:void 0,l=arguments.length>14?arguments[14]:void 0,B=arguments.length>15?arguments[15]:void 0;const b="data:"===(t=t||"").substring(0,5),p="blob:"===t.substring(0,5),c=b&&-1!==t.indexOf(";base64,"),f=h||new Q.e(this,1);f!==h&&(f.label=t.substring(0,60));const S=t;!this._transformTextureUrl||c||h||L||(t=this._transformTextureUrl(t)),S!==t&&(f._originalUrl=S);const N=t.lastIndexOf(".");let j=E||(N>-1?t.substring(N).toLowerCase():"");j.indexOf("?")>-1&&(j=j.split("?")[0]);const J=(0,D.b)(j,w);Y&&Y.addPendingData(f),f.url=t,f.generateMipMaps=!U,f.samplingMode=mt,f.invertY=y,f._useSRGBBuffer=this._getUseSRGBBuffer(!!B,U),this._doNotHandleContextLost||(f._buffer=L);let a=null;X&&!h&&(a=f.onLoadedObservable.add(X)),h||this._internalTexturesCache.push(f);const d=(y,h)=>{Y&&Y.removePendingData(f),t===S?(a&&f.onLoadedObservable.remove(a),I.d.UseFallbackTexture&&t!==I.d.FallbackTexture&&this._createTextureBase(I.d.FallbackTexture,U,f.invertY,Y,mt,null,P,G,M,L,f),y=(y||"Unknown error")+(I.d.UseFallbackTexture?" - Fallback texture was used":""),f.onErrorObservable.notifyObservers({message:y,exception:h}),P&&P(y,h)):(r.b.Warn(`Failed to load ${t}, falling back to ${S}`),this._createTextureBase(S,U,f.invertY,Y,mt,X,P,G,M,L,f,F,E,w,l,B))};if(J){const U=async t=>{(await J).loadData(t,f,((t,U,y,I,r,X)=>{X?d("TextureLoader failed to load data"):G(f,j,Y,{width:t,height:U},f.invertY,!y,I,(()=>(r(),!1)),mt)}),l)};L?L instanceof ArrayBuffer?U(new Uint8Array(L)):ArrayBuffer.isView(L)?U(L):P&&P("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(t,(t=>{U(new Uint8Array(t))}),void 0,Y?Y.offlineProvider:void 0,!0,((t,U)=>{d("Unable to load "+(t&&t.responseURL,U))}))}else{const y=t=>{p&&!this._doNotHandleContextLost&&(f._buffer=t),G(f,j,Y,t,f.invertY,U,!1,M,mt)};!b||c?L&&("string"===typeof L.decoding||L.close)?y(L):g._FileToolsLoadImage(t||"",y,d,Y?Y.offlineProvider:null,w,f.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof L||L instanceof ArrayBuffer||ArrayBuffer.isView(L)||L instanceof Blob?g._FileToolsLoadImage(L,y,d,Y?Y.offlineProvider:null,w,f.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):L&&y(L)}return f}_rebuildBuffers(){for(const t of this._uniformBuffers)t._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,F.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const t in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,t)&&(this._boundTexturesCache[t]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(t){this._name=t}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(t){this._hardwareScalingLevel=t,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(t){this._doNotHandleContextLost=t}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(t,U,y){var r,Y;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new P,this._stencilStateComposer=new G,this._stencilState=new M,this._alphaState=new L,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.b,this.onCanvasFocusObservable=new E.b,this.onNewSceneAddedObservable=new E.b,this.onResizeObservable=new E.b,this.onCanvasPointerOutObservable=new E.b,this.onEffectErrorObservable=new E.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=t=>this._renderLoop(t),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.b,this.onAfterShaderCompilationObservable=new E.b,this.onBeginFrameObservable=new E.b,this.onEndFrameObservable=new E.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.b,this.onContextRestoredObservable=new E.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.FX=new E.b,this.onReleaseEffectsObservable=new E.b,I.d.Instances.push(this),this.startTime=X.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,mt.d.SetMatrixPrecision(!!U.useHighPrecisionMatrix),(0,F.l)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=y??!1,U.antialias=t??U.antialias,U.deterministicLockstep=U.deterministicLockstep??!1,U.lockstepMaxSteps=U.lockstepMaxSteps??4,U.timeStep=U.timeStep??1/60,U.EX=U.EX??!0,this._audioContext=(null===(r=U.audioEngineOptions)||void 0===r?void 0:r.audioContext)??null,this._audioDestination=(null===(Y=U.audioEngineOptions)||void 0===Y?void 0:Y.audioDestination)??null,this.premultipliedAlpha=U.premultipliedAlpha??!0,this._doNotHandleContextLost=!!U.doNotHandleContextLost,this._isStencilEnable=!!U.EX,this.useExactSrgbConversions=U.useExactSrgbConversions??!1;const h=(0,F.p)()&&window.devicePixelRatio||1,Q=U.limitDeviceRatio||h;y=y||U.adaptToDeviceRatio||!1,this._hardwareScalingLevel=y?1/Math.min(Q,h):1,this._lastDevicePixelRatio=h,this._creationOptions=U}resize(){let t,U,y=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const t=(0,F.p)()&&window.devicePixelRatio||1,U=this._lastDevicePixelRatio/t;this._lastDevicePixelRatio=t,this._hardwareScalingLevel*=U}if((0,F.p)()&&(0,F.h)())if(this._renderingCanvas){var I,r;const y=null===(I=(r=this._renderingCanvas).getBoundingClientRect)||void 0===I?void 0:I.call(r);t=this._renderingCanvas.clientWidth||(null===y||void 0===y?void 0:y.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,U=this._renderingCanvas.clientHeight||(null===y||void 0===y?void 0:y.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else t=window.innerWidth,U=window.innerHeight;else t=this._renderingCanvas?this._renderingCanvas.width:100,U=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(t/this._hardwareScalingLevel,U/this._hardwareScalingLevel,y)}setSize(t,U){let y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(t|=0,U|=0,!y&&this._renderingCanvas.width===t&&this._renderingCanvas.height===U)return!1;if(this._renderingCanvas.width=t,this._renderingCanvas.height=U,this.scenes){for(let t=0;t<this.scenes.length;t++){const U=this.scenes[t];for(let t=0;t<U.cameras.length;t++){U.cameras[t]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(t,U,y,I,r,Y,mt,X,P,G,M){throw(0,h.c)("engine.rawTexture")}createRawCubeTexture(t,U,y,I,r,Y,mt,X){throw(0,h.c)("engine.rawTexture")}createRawTexture3D(t,U,y,I,r,Y,mt,X,P,G,M){throw(0,h.c)("engine.rawTexture")}createRawTexture2DArray(t,U,y,I,r,Y,mt,X,P,G,M){throw(0,h.c)("engine.rawTexture")}_sharedInit(t){this._renderingCanvas=t}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const t=navigator.userAgent;this.hostInformation.isMobile=-1!==t.indexOf("Mobile")||-1!==t.indexOf("Mac")&&(0,F.h)()&&"ontouchend"in document},this._checkForMobile(),(0,F.p)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(t){return document.createElement("video")}_reportDrawCall(){var t;let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(t=this._drawCalls)||void 0===t||t.addCount(U,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(t,U){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(t,U){return createImageBitmap(t,U)}resizeImageBitmap(t,U,y){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(t){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(t,U){if("undefined"===typeof document)return new OffscreenCanvas(t,U);const y=document.createElement("canvas");return y.width=t,y.height=U,y}createCanvas(t,U){return g._CreateCanvas(t,U)}static _FileToolsLoadImage(t,U,y,I,r,Y,mt){throw(0,h.c)("FileTools")}_loadFile(t,U,y,I,r,Y){const mt=(0,w.m)(t,U,y,I,r,Y);return this._activeRequests.push(mt),mt.onCompleteObservable.add((()=>{const t=this._activeRequests.indexOf(mt);-1!==t&&this._activeRequests.splice(t,1)})),mt}static _FileToolsLoadFile(t,U,y,I,r,Y){if(w.e.loadFile)return w.e.loadFile(t,U,y,I,r,Y);throw(0,h.c)("FileTools")}dispose(){var t;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(t=this.releaseComputeEffects)||void 0===t||t.call(this),Y.Effect.ResetCache();for(const y of this._activeRequests)y.abort();this._boundRenderFunction=null,this.FX.notifyObservers(this),this.FX.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,F.p)()&&window.removeEventListener("resize",this._checkForMobile);const U=I.d.Instances.indexOf(this);U>=0&&I.d.Instances.splice(U,1),I.d.Instances.length||(I.d.OnEnginesDisposedObservable.notifyObservers(this),I.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(t){throw(0,h.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(t,U){for(let y=0;y<I.d.Instances.length;y++){const r=I.d.Instances[y];for(let y=0;y<r.scenes.length;y++)r.scenes[y].markAllMaterialsAsDirty(t,U)}}}g._RenderPassIdCounter=0,g._RescalePostProcessFactory=null,g.CollisionsEpsilon=.001,g.QueueNewFrame=l},12250:(t,U,y)=>{y.d(U,{d:()=>r});var I=y(12204);class r{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}r.Instances=[],r.OnEnginesDisposedObservable=new I.b,r._LastCreatedScene=null,r.UseFallbackTexture=!0,r.FallbackTexture=""},12313:(t,U,y)=>{y.d(U,{d:()=>I});class I{static SetMatrixPrecision(t){if(I.MatrixTrackPrecisionChange=!1,t&&!I.MatrixUse64Bits&&I.MatrixTrackedMatrices)for(let U=0;U<I.MatrixTrackedMatrices.length;++U){const t=I.MatrixTrackedMatrices[U],y=t.wX;t.wX=new Array(16);for(let U=0;U<16;++U)t.wX[U]=y[U]}I.MatrixUse64Bits=t,I.MatrixCurrentType=I.MatrixUse64Bits?Array:Float32Array,I.MatrixTrackedMatrices=null}}I.MatrixUse64Bits=!1,I.MatrixTrackPrecisionChange=!0,I.MatrixCurrentType=Float32Array,I.MatrixTrackedMatrices=[]},12328:(t,U,y)=>{y.d(U,{b:()=>mt});var I=y(12221);const r=new Map;function Y(t,U){(function(t){return r.delete(t)})(t)&&I.b.Warn(`Extension with the name '${t}' already exists`),r.set(t,U)}function mt(t,U){"image/ktx"!==U&&"image/ktx2"!==U||(t=".ktx"),r.has(t)||(t.endsWith(".ies")&&Y(".ies",(async()=>await y.e(15).then(y.bind(y,14595)).then((t=>new t._IESTextureLoader)))),t.endsWith(".dds")&&Y(".dds",(async()=>await Promise.all([y.e(14),y.e(17),y.e(13),y.e(19),y.e(18),y.e(28)]).then(y.bind(y,14598)).then((t=>new t._DDSTextureLoader)))),t.endsWith(".basis")&&Y(".basis",(async()=>await Promise.all([y.e(14),y.e(17),y.e(13),y.e(47)]).then(y.bind(y,14609)).then((t=>new t._BasisTextureLoader)))),t.endsWith(".env")&&Y(".env",(async()=>await Promise.all([y.e(14),y.e(17),y.e(13),y.e(19),y.e(18),y.e(23),y.e(21),y.e(45),y.e(48)]).then(y.bind(y,14615)).then((t=>new t._ENVTextureLoader)))),t.endsWith(".hdr")&&Y(".hdr",(async()=>await Promise.all([y.e(14),y.e(49)]).then(y.bind(y,14619)).then((t=>new t._HDRTextureLoader)))),(t.endsWith(".ktx")||t.endsWith(".ktx2"))&&(Y(".ktx",(async()=>await y.e(30).then(y.bind(y,14621)).then((t=>new t._KTXTextureLoader)))),Y(".ktx2",(async()=>await y.e(30).then(y.bind(y,14621)).then((t=>new t._KTXTextureLoader))))),t.endsWith(".tga")&&Y(".tga",(async()=>await y.e(50).then(y.bind(y,14626)).then((t=>new t._TGATextureLoader)))),t.endsWith(".exr")&&Y(".exr",(async()=>await y.e(16).then(y.bind(y,14633)).then((t=>new t._ExrTextureLoader)))));const I=r.get(t);return I?Promise.resolve(I(U)):null}},12320:(t,U,y)=>{y.d(U,{e:()=>mt});var I,r=y(12204),Y=y(12324);!function(t){t[t.Unknown=0]="Unknown",t[t.Url=1]="Url",t[t.Temp=2]="Temp",t[t.Raw=3]="Raw",t[t.Dynamic=4]="Dynamic",t[t.RenderTarget=5]="RenderTarget",t[t.MultiRenderTarget=6]="MultiRenderTarget",t[t.Cube=7]="Cube",t[t.CubeRaw=8]="CubeRaw",t[t.CubePrefiltered=9]="CubePrefiltered",t[t.Raw3D=10]="Raw3D",t[t.Raw2DArray=11]="Raw2DArray",t[t.DepthStencil=12]="DepthStencil",t[t.CubeRawRGBD=13]="CubeRawRGBD",t[t.Depth=14]="Depth"}(I||(I={}));class mt extends Y.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(t){this.generateMipMaps=t}get uniqueId(){return this._uniqueId}_setUniqueId(t){this._uniqueId=t}getEngine(){return this._engine}get source(){return this._source}constructor(t,U){let y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new r.b,this.onErrorObservable=new r.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=t,this._source=U,this._uniqueId=mt._Counter++,y||(this._hardwareTexture=t._createHardwareTexture())}incrementReferences(){this._references++}updateSize(t,U){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,t,U,y),this.width=t,this.height=U,this.depth=y,this.baseWidth=t,this.baseHeight=U,this.baseDepth=y,this._size=t*U*y}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const t=this.onRebuildCallback(this),U=U=>{U._swapAndDie(this,!1),this.isReady=t.isReady};return void(t.isAsync?t.proxy.then(U):U(t.proxy))}let t;switch(this.source){case 2:case 12:case 14:break;case 1:return void(t=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(t=>{t._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:t=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),t._swapAndDie(this,!1),this.isReady=!0;break;case 10:t=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),t._swapAndDie(this,!1),this.isReady=!0;break;case 11:t=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),t._swapAndDie(this,!1),this.isReady=!0;break;case 4:t=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),t._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(t=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{t._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:t=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),t._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return t=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(t=>{t&&t._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(t._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(t){var U;let y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(U=this._hardwareTexture)||void 0===U||U.setUsage(t._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),t._hardwareTexture=this._hardwareTexture,y&&(t._isRGBD=this._isRGBD),this._lodTextureHigh&&(t._lodTextureHigh&&t._lodTextureHigh.dispose(),t._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(t._lodTextureMid&&t._lodTextureMid.dispose(),t._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(t._lodTextureLow&&t._lodTextureLow.dispose(),t._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(t._irradianceTexture&&t._irradianceTexture.dispose(),t._irradianceTexture=this._irradianceTexture);const I=this._engine.getLoadedTexturesCache();let r=I.indexOf(this);-1!==r&&I.splice(r,1),r=I.indexOf(t),-1===r&&I.push(t)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}mt._Counter=0},12324:(t,U,y)=>{y.d(U,{e:()=>I});class I{get wrapU(){return this._cachedWrapU}set wrapU(t){this._cachedWrapU=t}get wrapV(){return this._cachedWrapV}set wrapV(t){this._cachedWrapV=t}get wrapR(){return this._cachedWrapR}set wrapR(t){this._cachedWrapR=t}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(t){this._cachedAnisotropicFilteringLevel=t}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(t){this._comparisonFunction=t}get useMipMaps(){return this._useMipMaps}set useMipMaps(t){this._useMipMaps=t}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=t,this._cachedWrapV=U,this._cachedWrapR=y,this._cachedAnisotropicFilteringLevel=I,this.samplingMode=r,this._comparisonFunction=Y,this}compareSampler(t){return this._cachedWrapU===t._cachedWrapU&&this._cachedWrapV===t._cachedWrapV&&this._cachedWrapR===t._cachedWrapR&&this._cachedAnisotropicFilteringLevel===t._cachedAnisotropicFilteringLevel&&this.samplingMode===t.samplingMode&&this._comparisonFunction===t._comparisonFunction&&this._useMipMaps===t._useMipMaps}}},12229:(t,U,y)=>{y.d(U,{d:()=>Y});var I=y(12221);const r=(t,U,y)=>t?t.getClassName&&"Mesh"===t.getClassName()?null:!t.getClassName||"SubMesh"!==t.getClassName()&&"PhysicsBody"!==t.getClassName()?t.clone?t.clone():Array.isArray(t)?t.slice():y&&"object"===typeof t?{...t}:null:t.clone(U):null;class Y{static DeepCopy(t,U,y,Y){let mt=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const X=function(t){const U=[];do{const y=Object.getOwnPropertyNames(t);for(const t of y)-1===U.indexOf(t)&&U.push(t)}while(t=Object.getPrototypeOf(t));return U}(t);for(const G of X){if("_"===G[0]&&(!Y||-1===Y.indexOf(G)))continue;if(G.endsWith("Observable"))continue;if(y&&-1!==y.indexOf(G))continue;const X=t[G],M=typeof X;if("function"!==M)try{if("object"===M)if(X instanceof Uint8Array)U[G]=Uint8Array.from(X);else if(X instanceof Array){if(U[G]=[],X.length>0)if("object"==typeof X[0])for(let t=0;t<X.length;t++){const y=r(X[t],U,mt);-1===U[G].indexOf(y)&&U[G].push(y)}else U[G]=X.slice(0)}else U[G]=r(X,U,mt);else U[G]=X}catch(P){I.b.Warn(P.message)}}}}},12257:(t,U,y)=>{y.d(U,{e:()=>I,h:()=>r,k:()=>Y});class I extends Error{}I._setPrototypeOf=Object.setPrototypeOf||((t,U)=>(t.__proto__=U,t));const r={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class Y extends I{constructor(t,U,y){super(t),this.errorCode=U,this.innerError=y,this.name="RuntimeError",I._setPrototypeOf(this,Y.prototype)}}},12253:(t,U,y)=>{y.d(U,{d:()=>d,e:()=>g,i:()=>N,l:()=>J,t:()=>f,p:()=>w,v:()=>p,x:()=>c,z:()=>S,C:()=>B});var I=y(12248),r=y(12212),Y=y(12204);class mt{}mt.FilesToLoad={};var X=y(12257),P=y(12259),G=y(12266),M=y(12250),L=y(12221),h=y(12277),Q=y(12273),F=y(12285);const E=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class w extends X.k{constructor(t,U){super(t,X.h.LoadFileError),this.name="LoadFileError",X.e._setPrototypeOf(this,w.prototype),U instanceof I.d?this.request=U:this.file=U}}class D extends X.k{constructor(t,U){super(t,X.h.RequestFileError),this.request=U,this.name="RequestFileError",X.e._setPrototypeOf(this,D.prototype)}}class l extends X.k{constructor(t,U){super(t,X.h.ReadFileError),this.file=U,this.name="ReadFileError",X.e._setPrototypeOf(this,l.prototype)}}const g={DefaultRetryStrategy:class{static ExponentialBackoff(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(y,I,r)=>0!==I.status||r>=t||-1!==y.indexOf("file:")?-1:Math.pow(2,r)*U}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:t=>t,ScriptBaseUrl:"",ScriptPreprocessUrl:t=>t,CleanUrl:t=>t=t.replace(/#/gm,"%23")},B=(t,U)=>{if((!t||0!==t.indexOf("data:"))&&g.CorsBehavior)if("string"===typeof g.CorsBehavior||g.CorsBehavior instanceof String)U.crossOrigin=g.CorsBehavior;else{const y=g.CorsBehavior(t);y&&(U.crossOrigin=y)}},b={getRequiredSize:null},p=function(t,U,y,r){let Y,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",G=arguments.length>5?arguments[5]:void 0,L=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===L||void 0===L||!L._features.forceBitmapOverHTMLImageElement))return y("LoadImage is only supported in web or BabylonNative environments."),null;let h=!1;t instanceof ArrayBuffer||ArrayBuffer.isView(t)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(Y=URL.createObjectURL(new Blob([t],{type:X})),h=!0):Y=`data:${X};base64,`+(0,P.k)(t):t instanceof Blob?(Y=URL.createObjectURL(t),h=!0):(Y=g.CleanUrl(t),Y=g.PreprocessUrl(Y));const Q=U=>{if(y){const I=Y||t.toString();y(`Error while trying to load image: ${0===I.indexOf("http")||I.length<=128?I:I.slice(0,128)+"..."}`,U)}};if(null!==L&&void 0!==L&&L._features.forceBitmapOverHTMLImageElement)return f(Y,(I=>{L.createImageBitmap(new Blob([I],{type:X}),{premultiplyAlpha:"none",...G}).then((t=>{U(t),h&&URL.revokeObjectURL(Y)})).catch((U=>{y&&y("Error while trying to load image: "+t,U)}))}),void 0,r||void 0,!0,((t,U)=>{Q(U)})),null;const F=new Image;if(b.getRequiredSize){const U=b.getRequiredSize(t);U.width&&(F.width=U.width),U.height&&(F.height=U.height)}B(Y,F);const E=[],w=()=>{for(const t of E)t.target.removeEventListener(t.name,t.handler);E.length=0};E.push({target:F,name:"load",handler:()=>{w(),U(F),h&&F.src&&URL.revokeObjectURL(F.src)}}),E.push({target:F,name:"error",handler:t=>{w(),Q(t),h&&F.src&&URL.revokeObjectURL(F.src)}}),E.push({target:document,name:"securitypolicyviolation",handler:t=>{if(t.blockedURI!==F.src||"DX"===t.disposition)return;w();const U=new Error(`CSP violation of policy ${t.effectiveDirective} ${t.blockedURI}. Current policy is ${t.originalPolicy}`);M.d.UseFallbackTexture=!1,Q(U),h&&F.src&&URL.revokeObjectURL(F.src),F.src=""}}),(()=>{for(const t of E)t.target.addEventListener(t.name,t.handler)})();const D="blob:"===Y.substring(0,5),l="data:"===Y.substring(0,5),p=()=>{D||l||!I.d.IsCustomRequestAvailable?F.src=Y:f(Y,((t,U,y)=>{const I=new Blob([t],{type:!X&&y?y:X}),r=URL.createObjectURL(I);h=!0,F.src=r}),void 0,r||void 0,!0,((t,U)=>{Q(U)}))},c=()=>{r&&r.loadImage(Y,F)};if(!D&&!l&&r&&r.enableTexturesOffline)r.open(c,p);else{if(-1!==Y.indexOf("file:")){const t=decodeURIComponent(Y.substring(5).toLowerCase());if(mt.FilesToLoad[t]&&"undefined"!==typeof URL){try{let U;try{U=URL.createObjectURL(mt.FilesToLoad[t])}catch(S){U=URL.createObjectURL(mt.FilesToLoad[t])}F.src=U,h=!0}catch(N){F.src=""}return F}}p()}return F},c=(t,U,y,I,r)=>{const mt=new FileReader,X={onCompleteObservable:new Y.b,abort:()=>mt.abort()};return mt.onloadend=()=>X.onCompleteObservable.notifyObservers(X),r&&(mt.onerror=()=>{r(new l(`Unable to read ${t.name}`,t))}),mt.onload=t=>{U(t.target.result)},y&&(mt.onprogress=y),I?mt.readAsArrayBuffer(t):mt.readAsText(t),X},f=(t,U,y,I,r,P,G)=>{if(t.name)return c(t,U,y,r,P?t=>{P(void 0,t)}:void 0);const M=t;if(-1!==M.indexOf("file:")){let t=decodeURIComponent(M.substring(5).toLowerCase());0===t.indexOf("./")&&(t=t.substring(2));const I=mt.FilesToLoad[t];if(I)return c(I,U,y,r,P?t=>P(void 0,new w(t.message,t.file)):void 0)}const{match:Q,type:F}=a(M);if(Q){const t={onCompleteObservable:new Y.b,abort:()=>()=>{}};try{const t=r?d(M):q(M);U(t,void 0,F)}catch(X){P?P(void 0,X):L.b.Error(X.message||"Failed to parse the Data URL")}return h.e.SetImmediate((()=>{t.onCompleteObservable.notifyObservers(t)})),t}return S(M,((t,y)=>{U(t,null===y||void 0===y?void 0:y.responseURL,null===y||void 0===y?void 0:y.getResponseHeader("content-type"))}),y,I,r,P?t=>{P(t.request,new w(t.message,t.request))}:void 0,G)},S=(t,U,y,mt,X,P,G)=>{t=g.CleanUrl(t),t=g.PreprocessUrl(t);const M=g.BaseUrl+t;let h=!1;const Q={onCompleteObservable:new Y.b,abort:()=>h=!0},F=()=>{let t,Y=new I.d,mt=null;const F=()=>{Y&&(y&&Y.removeEventListener("progress",y),t&&Y.removeEventListener("readystatechange",t),Y.removeEventListener("loadend",E))};let E=()=>{F(),Q.onCompleteObservable.notifyObservers(Q),Q.onCompleteObservable.clear(),y=void 0,t=null,E=null,P=void 0,G=void 0,U=void 0};Q.abort=()=>{h=!0,E&&E(),Y&&Y.readyState!==(XMLHttpRequest.DONE||4)&&Y.abort(),null!==mt&&(clearTimeout(mt),mt=null),Y=null};const w=t=>{const U=t.message||"Unknown error";P&&Y?P(new D(U,Y)):L.b.Error(U)},l=L=>{if(Y){if(Y.open("GET",M),G)try{G(Y)}catch(Q){return void w(Q)}X&&(Y.responseType="arraybuffer"),y&&Y.addEventListener("progress",y),E&&Y.addEventListener("loadend",E),t=()=>{if(!h&&Y&&Y.readyState===(XMLHttpRequest.DONE||4)){if(t&&Y.removeEventListener("readystatechange",t),Y.status>=200&&Y.status<300||0===Y.status&&(!(0,r.p)()||j())){const t=X?Y.response:Y.responseText;if(null!==t){try{U&&U(t,Y)}catch(Q){w(Q)}return}}const y=g.DefaultRetryStrategy;if(y){const t=y(M,Y,L);if(-1!==t)return F(),Y=new I.d,void(mt=setTimeout((()=>l(L+1)),t))}const G=new D("Error status: "+Y.status+" "+Y.statusText+" - Unable to load "+M,Y);P&&P(G)}},Y.addEventListener("readystatechange",t),Y.send()}};l(0)};if(mt&&mt.enableSceneOffline){const I=t=>{t&&t.status>400?P&&P(t):F()},r=()=>{mt&&mt.loadFile(g.BaseUrl+t,(t=>{!h&&U&&U(t),Q.onCompleteObservable.notifyObservers(Q)}),y?t=>{!h&&y&&y(t)}:void 0,I,X)};mt.open(r,I)}else F();return Q},N=t=>{const{match:U,type:y}=a(t);if(U)return y||void 0;const I=t.lastIndexOf(".");switch(t.substring(I+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"lX":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},j=()=>"undefined"!==typeof location&&"file:"===location.protocol,J=t=>E.test(t),a=t=>{const U=E.exec(t);if(null===U||0===U.length)return{match:!1,type:""};return{match:!0,type:U[0].replace("data:","").replace("base64,","")}};function d(t){return(0,P.b)(t.split(",")[1])}const q=t=>(0,P.e)(t.split(",")[1]);let H;F.e._FileToolsLoadImage=p,Q.e.loadFile=f,G.o.loadFile=f;((t,U,y,I,r,Y,mt,X,P,G)=>{H={DecodeBase64UrlToBinary:t,DecodeBase64UrlToString:U,DefaultRetryStrategy:y.DefaultRetryStrategy,BaseUrl:y.BaseUrl,CorsBehavior:y.CorsBehavior,PreprocessUrl:y.PreprocessUrl,IsBase64DataUrl:I,IsFileURL:r,LoadFile:Y,LoadImage:mt,ReadFile:X,RequestFile:P,SetCorsBehavior:G},Object.defineProperty(H,"DefaultRetryStrategy",{get:function(){return y.DefaultRetryStrategy},set:function(t){y.DefaultRetryStrategy=t}}),Object.defineProperty(H,"BaseUrl",{get:function(){return y.BaseUrl},set:function(t){y.BaseUrl=t}}),Object.defineProperty(H,"PreprocessUrl",{get:function(){return y.PreprocessUrl},set:function(t){y.PreprocessUrl=t}}),Object.defineProperty(H,"CorsBehavior",{get:function(){return y.CorsBehavior},set:function(t){y.CorsBehavior=t}})})(d,q,g,J,j,f,p,c,S,B)},12341:(t,U,y)=>{function I(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const U=16*Math.random()|0;return("x"===t?U:3&U|8).toString(16)}))}y.d(U,{b:()=>I})},12331:(t,U,y)=>{y.d(U,{c:()=>Y});var I=y(12221),r=y(12338);class Y{static Instantiate(t){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[t])return this.RegisteredExternalClasses[t];const U=(0,r.d)(t);if(U)return U;I.b.Warn(t+" not found, you may have missed an import.");const y=t.split(".");let Y=window||this;for(let I=0,r=y.length;I<r;I++)Y=Y[y[I]];return"function"!==typeof Y?null:Y}}Y.RegisteredExternalClasses={}},12234:(t,U,y)=>{y.d(U,{b:()=>r});var I=y(12212);class r{static get Now(){return(0,I.p)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12259:(t,U,y)=>{y.d(U,{b:()=>mt,e:()=>Y,h:()=>I,k:()=>r});const I=t=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let U="";for(let y=0;y<t.byteLength;y++)U+=String.fromCharCode(t[y]);return U},r=t=>{const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y,I,r,Y,mt,X,P,G="",M=0;const L=ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t);for(;M<L.length;)y=L[M++],I=M<L.length?L[M++]:Number.NaN,r=M<L.length?L[M++]:Number.NaN,Y=y>>2,mt=(3&y)<<4|I>>4,X=(15&I)<<2|r>>6,P=63&r,isNaN(I)?X=P=64:isNaN(r)&&(P=64),G+=U.charAt(Y)+U.charAt(mt)+U.charAt(X)+U.charAt(P);return G},Y=t=>atob(t),mt=t=>{const U=Y(t),y=U.length,I=new Uint8Array(new ArrayBuffer(y));for(let r=0;r<y;r++)I[r]=U.charCodeAt(r);return I.buffer}},12349:(t,U,y)=>{function I(t){let U=1;do{U*=2}while(U<t);return U===t}function r(t,U,y){return t*(1-y)+U*y}function Y(t){const U=mt(t),y=X(t);return U-t>t-y?y:U}function mt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function X(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)-(t>>1)}function P(t,U){let y;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:y=X(t);break;case 2:y=Y(t);break;default:y=mt(t)}return Math.min(y,U)}y.d(U,{e:()=>X,f:()=>P,g:()=>I,h:()=>r,k:()=>Y})},12198:(t,U,y)=>{y.r(U),y.d(U,{AsyncLoop:()=>l,Tools:()=>w,className:()=>D});var I=y(12204),r=y(12212),Y=y(12221),mt=y(12229),X=y(12234),P=y(12242),G=y(12248),M=y(12250),L=y(12253),h=y(12277),Q=y(12331),F=y(12341),E=y(12349);class w{static get BaseUrl(){return L.e.BaseUrl}static set BaseUrl(t){L.e.BaseUrl=t}static get CleanUrl(){return L.e.CleanUrl}static set CleanUrl(t){L.e.CleanUrl=t}static IsAbsoluteUrl(t){return 0===t.indexOf("//")||-1!==t.indexOf("://")&&(-1!==t.indexOf(".")&&(-1!==t.indexOf("/")&&(!(t.indexOf(":")>t.indexOf("/"))&&(t.indexOf("://")<t.indexOf(".")||(0===t.indexOf("data:")||0===t.indexOf("blob:"))))))}static set ScriptBaseUrl(t){L.e.ScriptBaseUrl=t}static get ScriptBaseUrl(){return L.e.ScriptBaseUrl}static set CDNBaseUrl(t){w.ScriptBaseUrl=t,w.AssetBaseUrl=t}static set ScriptPreprocessUrl(t){L.e.ScriptPreprocessUrl=t}static get ScriptPreprocessUrl(){return L.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return L.e.DefaultRetryStrategy}static set DefaultRetryStrategy(t){L.e.DefaultRetryStrategy=t}static get CorsBehavior(){return L.e.CorsBehavior}static set CorsBehavior(t){L.e.CorsBehavior=t}static get UseFallbackTexture(){return M.d.UseFallbackTexture}static set UseFallbackTexture(t){M.d.UseFallbackTexture=t}static get RegisteredExternalClasses(){return Q.c.RegisteredExternalClasses}static set RegisteredExternalClasses(t){Q.c.RegisteredExternalClasses=t}static get fallbackTexture(){return M.d.FallbackTexture}static set fallbackTexture(t){M.d.FallbackTexture=t}static FetchToRef(t,U,y,I,r,Y){const mt=4*((Math.abs(t)*y%y|0)+(Math.abs(U)*I%I|0)*y);Y.r=r[mt]/255,Y.g=r[mt+1]/255,Y.b=r[mt+2]/255,Y.a=r[mt+3]/255}static Mix(t,U,y){return 0}static Instantiate(t){return Q.c.Instantiate(t)}static SetImmediate(t){h.e.SetImmediate(t)}static IsExponentOfTwo(t){return!0}static FloatRound(t){return Math.fround(t)}static GetFilename(t){const U=t.lastIndexOf("/");return U<0?t:t.substring(U+1)}static GetFolderPath(t){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const y=t.lastIndexOf("/");return y<0?U?t:"":t.substring(0,y+1)}static ToDegrees(t){return 180*t/Math.PI}static ToRadians(t){return t*Math.PI/180}static SmoothAngleChange(t,U){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const I=this.ToRadians(t),r=this.ToRadians(U);return this.ToDegrees(Math.atan2((1-y)*Math.sin(r)+y*Math.sin(I),(1-y)*Math.cos(r)+y*Math.cos(I)))}static MakeArray(t,U){return!0===U||void 0!==t&&null!=t?Array.isArray(t)?t:[t]:null}static GetPointerPrefix(t){return(0,r.p)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(t,U){(0,L.C)(t,U)}static SetReferrerPolicyBehavior(t,U){U.referrerPolicy=t}static get PreprocessUrl(){return L.e.PreprocessUrl}static set PreprocessUrl(t){L.e.PreprocessUrl=t}static LoadImage(t,U,y,I,r,Y){return(0,L.v)(t,U,y,I,r,Y)}static LoadFile(t,U,y,I,r,Y){return(0,L.t)(t,U,y,I,r,Y)}static async LoadFileAsync(t){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((y,I)=>{(0,L.t)(t,(t=>{y(t)}),void 0,void 0,U,((t,U)=>{I(U)}))}))}static GetAssetUrl(t){if(!t)return"";if(w.AssetBaseUrl&&t.startsWith(w._DefaultAssetsUrl)){const U="/"===w.AssetBaseUrl[w.AssetBaseUrl.length-1]?w.AssetBaseUrl.substring(0,w.AssetBaseUrl.length-1):w.AssetBaseUrl;return t.replace(w._DefaultAssetsUrl,U)}return t}static GetBabylonScriptURL(t,U){if(!t)return"";if(w.ScriptBaseUrl&&t.startsWith(w._DefaultCdnUrl)){const U="/"===w.ScriptBaseUrl[w.ScriptBaseUrl.length-1]?w.ScriptBaseUrl.substring(0,w.ScriptBaseUrl.length-1):w.ScriptBaseUrl;t=t.replace(w._DefaultCdnUrl,U)}return t=w.ScriptPreprocessUrl(t),U&&(t=w.GetAbsoluteUrl(t)),t}static LoadBabylonScript(t,U,y,I){t=w.GetBabylonScriptURL(t),w.LoadScript(t,U,y)}static async LoadBabylonScriptAsync(t){return t=w.GetBabylonScriptURL(t),await w.LoadScriptAsync(t)}static LoadScript(t,U,y,I){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(t),U&&U()}catch(P){null===y||void 0===y||y(`Unable to load script '${t}' in worker`,P)}return}if(!(0,r.p)())return void(null===y||void 0===y||y(`Cannot load script '${t}' outside of a window or a worker`));const mt=document.getElementsByTagName("head")[0],X=document.createElement("script");Y?(X.setAttribute("type","module"),X.innerText=t):(X.setAttribute("type","text/javascript"),X.setAttribute("src",t)),I&&(X.id=I),X.onload=()=>{U&&U()},X.onerror=U=>{y&&y(`Unable to load script '${t}'`,U)},mt.appendChild(X)}static async LoadScriptAsync(t,U){return await new Promise(((y,I)=>{this.LoadScript(t,(()=>{y()}),((t,U)=>{I(U||new Error(t))}),U)}))}static ReadFileAsDataURL(t,U,y){const r=new FileReader,Y={onCompleteObservable:new I.b,abort:()=>r.abort()};return r.onloadend=()=>{Y.onCompleteObservable.notifyObservers(Y)},r.onload=t=>{U(t.target.result)},r.onprogress=y,r.readAsDataURL(t),Y}static ReadFile(t,U,y,I,r){return(0,L.x)(t,U,y,I,r)}static FileAsURL(t){const U=new Blob([t]);return window.URL.createObjectURL(U)}static Format(t){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return t.toFixed(U)}static DeepCopy(t,U,y,I){mt.d.DeepCopy(t,U,y,I)}static IsEmpty(t){for(const U in t)if(Object.prototype.hasOwnProperty.call(t,U))return!1;return!0}static RegisterTopRootEvents(t,U){for(let I=0;I<U.length;I++){const r=U[I];t.addEventListener(r.name,r.handler,!1);try{window.parent&&window.parent.addEventListener(r.name,r.handler,!1)}catch(y){}}}static UnregisterTopRootEvents(t,U){for(let I=0;I<U.length;I++){const r=U[I];t.removeEventListener(r.name,r.handler);try{t.parent&&t.parent.removeEventListener(r.name,r.handler)}catch(y){}}}static async DumpFramebuffer(t,U,y,I){throw(0,P.c)("DumpTools")}static DumpData(t,U,y,I){throw(0,P.c)("DumpTools")}static async DumpDataAsync(t,U,y){throw(0,P.c)("DumpTools")}static _IsOffScreenCanvas(t){return void 0!==t.convertToBlob}static ToBlob(t,U){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",I=arguments.length>3?arguments[3]:void 0;w._IsOffScreenCanvas(t)||t.toBlob||(t.toBlob=function(t,U,y){setTimeout((()=>{const I=atob(this.toDataURL(U,y).split(",")[1]),r=I.length,Y=new Uint8Array(r);for(let t=0;t<r;t++)Y[t]=I.charCodeAt(t);t(new Blob([Y]))}))}),w._IsOffScreenCanvas(t)?t.convertToBlob({type:y,quality:I}).then((t=>U(t))):t.toBlob((function(t){U(t)}),y,I)}static DownloadBlob(t,U){if("download"in document.createElement("a")){if(!U){const t=new Date;U="screenshot_"+((t.getFullYear()+"-"+(t.getMonth()+1)).slice(2)+"-"+t.getDate()+"_"+t.getHours()+"-"+("0"+t.getMinutes()).slice(-2))+".png"}w.Download(t,U)}else if(t&&"undefined"!==typeof URL){const U=URL.createObjectURL(t),y=window.open("");if(!y)return;const I=y.document.createElement("img");I.onload=function(){URL.revokeObjectURL(U)},I.src=U,y.document.body.appendChild(I)}}static EncodeScreenshotCanvasData(t,U){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",I=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if("string"!==typeof I&&U){if(U){if(w._IsOffScreenCanvas(t))return void t.convertToBlob({type:y,quality:r}).then((t=>{const y=new FileReader;y.readAsDataURL(t),y.onloadend=()=>{const t=y.result;U(t)}}));const I=t.toDataURL(y,r);U(I)}}else this.ToBlob(t,(function(t){t&&w.DownloadBlob(t,I),U&&U("")}),y,r)}static Download(t,U){if("undefined"===typeof URL)return;const y=window.URL.createObjectURL(t),I=document.createElement("a");document.body.appendChild(I),I.style.display="none",I.href=y,I.download=U,I.addEventListener("click",(()=>{I.parentElement&&I.parentElement.removeChild(I)})),I.click(),window.URL.revokeObjectURL(y)}static BackCompatCameraNoPreventDefault(t){return"boolean"===typeof t[0]?t[0]:"boolean"===typeof t[1]&&t[1]}static CreateScreenshot(t,U,y,I){throw(0,P.c)("ScreenshotTools")}static async CreateScreenshotAsync(t,U,y){throw(0,P.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(t,U,y,I){throw(0,P.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(t,U,y){throw(0,P.c)("ScreenshotTools")}static RandomId(){return(0,F.b)()}static IsBase64(t){return(0,L.l)(t)}static DecodeBase64(t){return(0,L.d)(t)}static get errorsCount(){return Y.b.errorsCount}static Log(t){Y.b.Log(t)}static Warn(t){Y.b.Warn(t)}static Error(t){Y.b.Error(t)}static get LogCache(){return Y.b.LogCache}static ClearLogCache(){Y.b.ClearLogCache()}static set LogLevels(t){Y.b.LogLevels=t}static set PerformanceLogLevel(t){return(t&w.PerformanceUserMarkLogLevel)===w.PerformanceUserMarkLogLevel?(w.StartPerformanceCounter=w._StartUserMark,void(w.EndPerformanceCounter=w._EndUserMark)):(t&w.PerformanceConsoleLogLevel)===w.PerformanceConsoleLogLevel?(w.StartPerformanceCounter=w._StartPerformanceConsole,void(w.EndPerformanceCounter=w._EndPerformanceConsole)):(w.StartPerformanceCounter=w._StartPerformanceCounterDisabled,void(w.EndPerformanceCounter=w._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(t,U){}static _EndPerformanceCounterDisabled(t,U){}static _StartUserMark(t){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!w._Performance){if(!(0,r.p)())return;w._Performance=window.performance}U&&w._Performance.mark&&w._Performance.mark(t+"-Begin")}static _EndUserMark(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&w._Performance.mark&&(w._Performance.mark(t+"-End"),w._Performance.measure(t,t+"-Begin",t+"-End"))}static _StartPerformanceConsole(t){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(w._StartUserMark(t,U),console.time&&console.time(t))}static _EndPerformanceConsole(t){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(w._EndUserMark(t,U),console.timeEnd(t))}static get Now(){return X.b.Now}static GetClassName(t){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=null;if(!U&&t.getClassName)y=t.getClassName();else{if(t instanceof Object){y=(U?t:Object.getPrototypeOf(t)).constructor.__bjsclassName__}y||(y=typeof t)}return y}static First(t,U){for(const y of t)if(U(y))return y;return null}static getFullClassName(t){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=null,I=null;if(!U&&t.getClassName)y=t.getClassName();else{if(t instanceof Object){const r=U?t:Object.getPrototypeOf(t);y=r.constructor.__bjsclassName__,I=r.constructor.__bjsmoduleName__}y||(y=typeof t)}return y?(null!=I?I+".":"")+y:null}static async DelayAsync(t){await new Promise((U=>{setTimeout((()=>{U()}),t)}))}static IsSafari(){return!!(0,r.l)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function D(t,U){return y=>{y.__bjsclassName__=t,y.__bjsmoduleName__=null!=U?U:null}}w.AssetBaseUrl="",w.UseCustomRequestHeaders=!1,w.CustomRequestHeaders=G.d.CustomRequestHeaders,w.GetDOMTextContent=r.e,w._DefaultCdnUrl="https://cdn.babylonjs.com",w._DefaultAssetsUrl="https://assets.babylonjs.com/core",w.GetAbsoluteUrl="object"===typeof document?t=>{const U=document.createElement("a");return U.href=t,U.href}:"function"===typeof URL&&"object"===typeof location?t=>new URL(t,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},w.NoneLogLevel=Y.b.NoneLogLevel,w.MessageLogLevel=Y.b.MessageLogLevel,w.WarningLogLevel=Y.b.WarningLogLevel,w.ErrorLogLevel=Y.b.ErrorLogLevel,w.AllLogLevel=Y.b.AllLogLevel,w.IsWindowObjectExist=r.p,w.PerformanceNoneLogLevel=0,w.PerformanceUserMarkLogLevel=1,w.PerformanceConsoleLogLevel=2,w.StartPerformanceCounter=w._StartPerformanceCounterDisabled,w.EndPerformanceCounter=w._EndPerformanceCounterDisabled;class l{constructor(t,U,y){let I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=t,this.index=I-1,this._done=!1,this._fn=U,this._successCallback=y}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(t,U,y){const I=new l(t,U,y,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return I.executeNext(),I}static SyncAsyncForLoop(t,U,y,I,r){let Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return l.Run(Math.ceil(t/U),(I=>{r&&r()?I.breakLoop():setTimeout((()=>{for(let Y=0;Y<U;++Y){const mt=I.index*U+Y;if(mt>=t)break;if(y(mt),r&&r()){I.breakLoop();break}}I.executeNext()}),Y)}),I)}}w.Mix=E.h,w.IsExponentOfTwo=E.g,M.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12338:(t,U,y)=>{y.d(U,{d:()=>Y,f:()=>r});const I={};function r(t,U){I[t]=U}function Y(t){return I[t]}},12248:(t,U,y)=>{y.d(U,{d:()=>I});class I{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(I.CustomRequestHeaders).length>0||I.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const t in I.CustomRequestHeaders){const U=I.CustomRequestHeaders[t];U&&this._xhr.setRequestHeader(t,U)}}_shouldSkipRequestModifications(t){return I.SkipRequestModificationForBabylonCDN&&(t.includes("preview.babylonjs.com")||t.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(t){this._xhr.onprogress=t}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(t){this._xhr.responseType=t}get timeout(){return this._xhr.timeout}set timeout(t){this._xhr.timeout=t}addEventListener(t,U,y){this._xhr.addEventListener(t,U,y)}removeEventListener(t,U,y){this._xhr.removeEventListener(t,U,y)}abort(){this._xhr.abort()}send(t){I.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(t)}open(t,U){for(const y of I.CustomRequestModifiers){if(this._shouldSkipRequestModifications(U))return;U=y(this._xhr,U)||U}U=(U=U.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=U,this._xhr.open(t,U,!0)}setRequestHeader(t,U){this._xhr.setRequestHeader(t,U)}getResponseHeader(t){return this._xhr.getResponseHeader(t)}}I.CustomRequestHeaders={},I.CustomRequestModifiers=new Array,I.SkipRequestModificationForBabylonCDN=!0}}]);