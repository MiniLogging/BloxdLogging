"use strict";(self.hbnkweqmycf=self.hbnkweqmycf||[]).push([[8],{11541:(F,P,f)=>{f.d(P,{b:()=>z});var c=f(11501),N=f(11474),q=f(11544),H=f(11563),A=f(11480);class o{constructor(){let F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,F&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(F){this._zOffset!==F&&(this._zOffset=F,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(F){this._zOffsetUnits!==F&&(this._zOffsetUnits=F,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(F){this._cullFace!==F&&(this._cullFace=F,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(F){this._cull!==F&&(this._cull=F,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(F){this._depthFunc!==F&&(this._depthFunc=F,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(F){this._depthMask!==F&&(this._depthMask=F,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(F){this._depthTest!==F&&(this._depthTest=F,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(F){this._frontFace!==F&&(this._frontFace=F,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(F){this.isDirty&&(this._isCullDirty&&(this.cull?F.enable(F.CULL_FACE):F.disable(F.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(F.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(F.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?F.enable(F.DEPTH_TEST):F.disable(F.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(F.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(F.enable(F.POLYGON_OFFSET_FILL),F.polygonOffset(this.zOffset,this.zOffsetUnits)):F.disable(F.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(F.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class j{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(F){this._func!==F&&(this._func=F,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(F){this._funcRef!==F&&(this._funcRef=F,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(F){this._funcMask!==F&&(this._funcMask=F,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(F){this._opStencilFail!==F&&(this._opStencilFail=F,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(F){this._opDepthFail!==F&&(this._opDepthFail=F,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(F){this._opStencilDepthPass!==F&&(this._opStencilDepthPass=F,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(F){this._mask!==F&&(this._mask=F,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(F){this._enabled!==F&&(this._enabled=F,this._isStencilTestDirty=!0)}constructor(){let F=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,F&&this.reset()}reset(){var F;this.stencilMaterial=void 0,null===(F=this.stencilGlobal)||void 0===F||F.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(F){var P;if(!F)return;const f=!this.useStencilGlobalOnly&&!(null===(P=this.stencilMaterial)||void 0===P||!P.enabled);this.enabled=f?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=f?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=f?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=f?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=f?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=f?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=f?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=f?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?F.enable(F.STENCIL_TEST):F.disable(F.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(F.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(F.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(F.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class i{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=i.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=i.KEEP,this.opDepthFail=i.KEEP,this.opStencilDepthPass=i.REPLACE}get stencilFunc(){return this.func}set stencilFunc(F){this.func=F}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(F){this.funcRef=F}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(F){this.funcMask=F}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(F){this.opStencilFail=F}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(F){this.opDepthFail=F}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(F){this.opStencilDepthPass=F}get stencilMask(){return this.mask}set stencilMask(F){this.mask=F}get stencilTest(){return this.enabled}set stencilTest(F){this.enabled=F}}i.ALWAYS=519,i.KEEP=7680,i.REPLACE=7681;class u{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(F){this._alphaBlend!==F&&(this._alphaBlend=F,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(F,P,f,c){this._blendConstants[0]===F&&this._blendConstants[1]===P&&this._blendConstants[2]===f&&this._blendConstants[3]===c||(this._blendConstants[0]=F,this._blendConstants[1]=P,this._blendConstants[2]=f,this._blendConstants[3]=c,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(F,P,f,c){this._blendFunctionParameters[0]===F&&this._blendFunctionParameters[1]===P&&this._blendFunctionParameters[2]===f&&this._blendFunctionParameters[3]===c||(this._blendFunctionParameters[0]=F,this._blendFunctionParameters[1]=P,this._blendFunctionParameters[2]=f,this._blendFunctionParameters[3]=c,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(F,P){this._blendEquationParameters[0]===F&&this._blendEquationParameters[1]===P||(this._blendEquationParameters[0]=F,this._blendEquationParameters[1]=P,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(F){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?F.enable(F.BLEND):F.disable(F.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(F.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(F.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(F.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var T=f(11488),Y=f(11567),t=f(11471),C=f(11464),L=f(11533),J=f(11580);function B(F,P){if((0,t.l)()){const{requestAnimationFrame:f}=P||window;if("function"===typeof f)return f(F)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(F);return setTimeout(F,16)}class z{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(F){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(F){F!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=F,this._depthCullingState.depthFunc=F?518:515)}setColorWrite(F){F!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=F)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(F){if(F)return this.isNDCHalfZRange?F.IS_NDC_HALF_ZRANGE="":delete F.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?F.USE_REVERSE_DEPTHBUFFER="":delete F.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?F.USE_EXACT_SRGB_CONVERSIONS="":delete F.USE_EXACT_SRGB_CONVERSIONS);{let F="";return this.isNDCHalfZRange&&(F+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(F&&(F+="\n"),F+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(F&&(F+="\n"),F+="#define USE_EXACT_SRGB_CONVERSIONS"),F}}_rebuildInternalTextures(){const F=this._internalTexturesCache.slice();for(const P of F)P._rebuild()}_rebuildRenderTargetWrappers(){const F=this._renderTargetWrapperCache.slice();for(const P of F)P._rebuild()}_rebuildEffects(){for(const F in this._compiledEffects){const P=this._compiledEffects[F];P._pipelineContext=null,P._prepareEffect()}q.Effect.ResetCache()}_rebuildGraphicsResources(){var F;this.wipeCaches(!0),this._rebuildEffects(),null===(F=this._rebuildComputeEffects)||void 0===F||F.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){N.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(F){setTimeout((()=>{this._clearEmptyResources();const P=this._depthCullingState.depthTest,f=this._depthCullingState.depthFunc,c=this._depthCullingState.depthMask,N=this._stencilState.stencilTest;F(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=P,this._depthCullingState.depthFunc=f,this._depthCullingState.depthMask=c,this._stencilState.stencilTest=N,this._flagContextRestored()}),0)}get u(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(F){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(F){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const F=new Uint8Array(4),P=[F,F,F,F,F,F];this._emptyCubeTexture=this.createRawCubeTexture(P,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(F){if(!F)return this._activeRenderLoops.length=0,void this._cancelFrame();const P=this._activeRenderLoops.indexOf(F);P>=0&&(this._activeRenderLoops.splice(P,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const F=this._frameHandler;if(this._frameHandler=0,(0,t.l)()){const{cancelAnimationFrame:P}=this.getHostWindow()||window;if("function"===typeof P)return P(F)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(F);return clearTimeout(F)}}uf(){this.onBeginFrameObservable.notifyObservers(this)}Yf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(F){this._maxFPS=F,void 0!==F&&(this._minFrameTime=F<=0?Number.MAX_VALUE:1e3/F)}_isOverFrameTime(F){if(!F||void 0===this._maxFPS)return!1;const P=F-this._lastFrameTime;return this._lastFrameTime=F,this._renderAccumulator+=P,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(F){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(F)){let F=!0;(this.u||!this.renderEvenInBackground&&this._windowIsBackground)&&(F=!1),F&&(this.uf(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Yf())}}_renderLoop(F){this._processFrame(F),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let F=0;F<this._activeRenderLoops.length;F++){(0,this._activeRenderLoops[F])()}}_renderViews(){return!1}_queueNewFrame(F,P){return B(F,P)}runRenderLoop(F){-1===this._activeRenderLoops.indexOf(F)&&(this._activeRenderLoops.push(F),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(F){this._depthCullingState.depthTest=F}setZOffset(F){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-F:F}getZOffset(){const F=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-F:F}setZOffsetUnits(F){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-F:F}getZOffsetUnits(){const F=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-F:F}getHostWindow(){return(0,t.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(F){this._compatibilityMode=!0}_rebuildTextures(){for(const F of this.scenes)F._rebuildTextures();for(const F of this._virtualScenes)F._rebuildTextures()}_releaseRenderTargetWrapper(F){const P=this._renderTargetWrapperCache.indexOf(F);-1!==P&&this._renderTargetWrapperCache.splice(P,1)}get currentViewport(){return this._cachedViewport}setViewport(F,P,f){const c=P||this.getRenderWidth(),N=f||this.getRenderHeight(),q=F.x||0,H=F.y||0;this._cachedViewport=F,this._viewport(q*c,H*N,c*F.width,N*F.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(F){return new Path2D(F)}get description(){let F=this.name+this.version;return this._caps.parallelShaderCompile&&(F+=" - Parallel shader compilation"),F}_createTextureBase(F,P,f,q){let H=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,j=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,T=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,t=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,C=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,L=arguments.length>13?arguments[13]:void 0,B=arguments.length>14?arguments[14]:void 0,Z=arguments.length>15?arguments[15]:void 0;const R="data:"===(F=F||"").substring(0,5),y="blob:"===F.substring(0,5),O=R&&-1!==F.indexOf(";base64,"),d=T||new Y.b(this,1);d!==T&&(d.label=F.substring(0,60));const M=F;!this._transformTextureUrl||O||T||u||(F=this._transformTextureUrl(F)),M!==F&&(d._originalUrl=M);const V=F.lastIndexOf(".");let Q=C||(V>-1?F.substring(V).toLowerCase():"");Q.indexOf("?")>-1&&(Q=Q.split("?")[0]);const K=(0,J.e)(Q,L);q&&q.addPendingData(d),d.url=F,d.generateMipMaps=!P,d.samplingMode=H,d.invertY=f,d._useSRGBBuffer=this._getUseSRGBBuffer(!!Z,P),this._doNotHandleContextLost||(d._buffer=u);let x=null;A&&!T&&(x=d.onLoadedObservable.add(A)),T||this._internalTexturesCache.push(d);const k=(f,T)=>{q&&q.removePendingData(d),F===M?(x&&d.onLoadedObservable.remove(x),c.b.UseFallbackTexture&&F!==c.b.FallbackTexture&&this._createTextureBase(c.b.FallbackTexture,P,d.invertY,q,H,null,o,j,i,u,d),f=(f||"Unknown error")+(c.b.UseFallbackTexture?" - Fallback texture was used":""),d.onErrorObservable.notifyObservers({message:f,exception:T}),o&&o(f,T)):(N.d.Warn(`Failed to load ${F}, falling back to ${M}`),this._createTextureBase(M,P,d.invertY,q,H,A,o,j,i,u,d,t,C,L,B,Z))};if(K){const P=async F=>{(await K).loadData(F,d,((F,P,f,c,N,A)=>{A?k("TextureLoader failed to load data"):j(d,Q,q,{width:F,height:P},d.invertY,!f,c,(()=>(N(),!1)),H)}),B)};u?u instanceof ArrayBuffer?P(new Uint8Array(u)):ArrayBuffer.isView(u)?P(u):o&&o("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(F,(F=>{P(new Uint8Array(F))}),void 0,q?q.offlineProvider:void 0,!0,((F,P)=>{k("Unable to load "+(F&&F.responseURL,P))}))}else{const f=F=>{y&&!this._doNotHandleContextLost&&(d._buffer=F),j(d,Q,q,F,d.invertY,P,!1,i,H)};!R||O?u&&("string"===typeof u.decoding||u.close)?f(u):z._FileToolsLoadImage(F||"",f,k,q?q.offlineProvider:null,L,d.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof u||u instanceof ArrayBuffer||ArrayBuffer.isView(u)||u instanceof Blob?z._FileToolsLoadImage(u,f,k,q?q.offlineProvider:null,L,d.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):u&&f(u)}return d}_rebuildBuffers(){for(const F of this._uniformBuffers)F._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,t.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const F in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,F)&&(this._boundTexturesCache[F]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(F){this._name=F}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(F){this._hardwareScalingLevel=F,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(F){this._doNotHandleContextLost=F}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(F,P,f){var N,q;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new o,this._stencilStateComposer=new j,this._stencilState=new i,this._alphaState=new u,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new C.d,this.onCanvasFocusObservable=new C.d,this.onNewSceneAddedObservable=new C.d,this.onResizeObservable=new C.d,this.onCanvasPointerOutObservable=new C.d,this.onEffectErrorObservable=new C.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new C.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=F=>this._renderLoop(F),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new C.d,this.onAfterShaderCompilationObservable=new C.d,this.onBeginFrameObservable=new C.d,this.onEndFrameObservable=new C.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new C.d,this.onContextRestoredObservable=new C.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Mf=new C.d,this.onReleaseEffectsObservable=new C.d,c.b.Instances.push(this),this.startTime=A.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,H.e.SetMatrixPrecision(!!P.useHighPrecisionMatrix),(0,t.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=f??!1,P.antialias=F??P.antialias,P.deterministicLockstep=P.deterministicLockstep??!1,P.lockstepMaxSteps=P.lockstepMaxSteps??4,P.timeStep=P.timeStep??1/60,P.stencil=P.stencil??!0,this._audioContext=(null===(N=P.audioEngineOptions)||void 0===N?void 0:N.audioContext)??null,this._audioDestination=(null===(q=P.audioEngineOptions)||void 0===q?void 0:q.audioDestination)??null,this.premultipliedAlpha=P.premultipliedAlpha??!0,this._doNotHandleContextLost=!!P.doNotHandleContextLost,this._isStencilEnable=!!P.stencil,this.useExactSrgbConversions=P.useExactSrgbConversions??!1;const T=(0,t.l)()&&window.devicePixelRatio||1,Y=P.limitDeviceRatio||T;f=f||P.adaptToDeviceRatio||!1,this._hardwareScalingLevel=f?1/Math.min(Y,T):1,this._lastDevicePixelRatio=T,this._creationOptions=P}resize(){let F,P,f=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const F=(0,t.l)()&&window.devicePixelRatio||1,P=this._lastDevicePixelRatio/F;this._lastDevicePixelRatio=F,this._hardwareScalingLevel*=P}if((0,t.l)()&&(0,t.e)())if(this._renderingCanvas){var c,N;const f=null===(c=(N=this._renderingCanvas).getBoundingClientRect)||void 0===c?void 0:c.call(N);F=this._renderingCanvas.clientWidth||(null===f||void 0===f?void 0:f.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,P=this._renderingCanvas.clientHeight||(null===f||void 0===f?void 0:f.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else F=window.innerWidth,P=window.innerHeight;else F=this._renderingCanvas?this._renderingCanvas.width:100,P=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(F/this._hardwareScalingLevel,P/this._hardwareScalingLevel,f)}setSize(F,P){let f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(F|=0,P|=0,!f&&this._renderingCanvas.width===F&&this._renderingCanvas.height===P)return!1;if(this._renderingCanvas.width=F,this._renderingCanvas.height=P,this.scenes){for(let F=0;F<this.scenes.length;F++){const P=this.scenes[F];for(let F=0;F<P.cameras.length;F++){P.cameras[F]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(F,P,f,c,N,q,H,A,o,j,i){throw(0,T.e)("engine.rawTexture")}createRawCubeTexture(F,P,f,c,N,q,H,A){throw(0,T.e)("engine.rawTexture")}createRawTexture3D(F,P,f,c,N,q,H,A,o,j,i){throw(0,T.e)("engine.rawTexture")}createRawTexture2DArray(F,P,f,c,N,q,H,A,o,j,i){throw(0,T.e)("engine.rawTexture")}_sharedInit(F){this._renderingCanvas=F}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const F=navigator.userAgent;this.hostInformation.isMobile=-1!==F.indexOf("Mobile")||-1!==F.indexOf("Mac")&&(0,t.e)()&&"ontouchend"in document},this._checkForMobile(),(0,t.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(F){return document.createElement("video")}_reportDrawCall(){var F;let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(F=this._drawCalls)||void 0===F||F.addCount(P,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(F,P){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(F,P){return createImageBitmap(F,P)}resizeImageBitmap(F,P,f){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(F){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(F,P){if("undefined"===typeof document)return new OffscreenCanvas(F,P);const f=document.createElement("canvas");return f.width=F,f.height=P,f}createCanvas(F,P){return z._CreateCanvas(F,P)}static _FileToolsLoadImage(F,P,f,c,N,q,H){throw(0,T.e)("FileTools")}_loadFile(F,P,f,c,N,q){const H=(0,L.j)(F,P,f,c,N,q);return this._activeRequests.push(H),H.onCompleteObservable.add((()=>{const F=this._activeRequests.indexOf(H);-1!==F&&this._activeRequests.splice(F,1)})),H}static _FileToolsLoadFile(F,P,f,c,N,q){if(L.b.loadFile)return L.b.loadFile(F,P,f,c,N,q);throw(0,T.e)("FileTools")}dispose(){var F;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(F=this.releaseComputeEffects)||void 0===F||F.call(this),q.Effect.ResetCache();for(const f of this._activeRequests)f.abort();this._boundRenderFunction=null,this.Mf.notifyObservers(this),this.Mf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,t.l)()&&window.removeEventListener("resize",this._checkForMobile);const P=c.b.Instances.indexOf(this);P>=0&&c.b.Instances.splice(P,1),c.b.Instances.length||(c.b.OnEnginesDisposedObservable.notifyObservers(this),c.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(F){throw(0,T.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(F,P){for(let f=0;f<c.b.Instances.length;f++){const N=c.b.Instances[f];for(let f=0;f<N.scenes.length;f++)N.scenes[f].markAllMaterialsAsDirty(F,P)}}}z._RenderPassIdCounter=0,z._RescalePostProcessFactory=null,z.CollisionsEpsilon=.001,z.QueueNewFrame=B},11501:(F,P,f)=>{f.d(P,{b:()=>N});var c=f(11464);class N{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}N.Instances=[],N.OnEnginesDisposedObservable=new c.d,N._LastCreatedScene=null,N.UseFallbackTexture=!0,N.FallbackTexture=""},11563:(F,P,f)=>{f.d(P,{e:()=>c});class c{static SetMatrixPrecision(F){if(c.MatrixTrackPrecisionChange=!1,F&&!c.MatrixUse64Bits&&c.MatrixTrackedMatrices)for(let P=0;P<c.MatrixTrackedMatrices.length;++P){const F=c.MatrixTrackedMatrices[P],f=F.Qf;F.Qf=new Array(16);for(let P=0;P<16;++P)F.Qf[P]=f[P]}c.MatrixUse64Bits=F,c.MatrixCurrentType=c.MatrixUse64Bits?Array:Float32Array,c.MatrixTrackedMatrices=null}}c.MatrixUse64Bits=!1,c.MatrixTrackPrecisionChange=!0,c.MatrixCurrentType=Float32Array,c.MatrixTrackedMatrices=[]},11580:(F,P,f)=>{f.d(P,{e:()=>H});var c=f(11474);const N=new Map;function q(F,P){(function(F){return N.delete(F)})(F)&&c.d.Warn(`Extension with the name '${F}' already exists`),N.set(F,P)}function H(F,P){"image/ktx"!==P&&"image/ktx2"!==P||(F=".ktx"),N.has(F)||(F.endsWith(".ies")&&q(".ies",(async()=>await f.e(15).then(f.bind(f,14033)).then((F=>new F._IESTextureLoader)))),F.endsWith(".dds")&&q(".dds",(async()=>await Promise.all([f.e(14),f.e(17),f.e(13),f.e(19),f.e(18),f.e(28)]).then(f.bind(f,14039)).then((F=>new F._DDSTextureLoader)))),F.endsWith(".basis")&&q(".basis",(async()=>await Promise.all([f.e(14),f.e(17),f.e(13),f.e(47)]).then(f.bind(f,14045)).then((F=>new F._BasisTextureLoader)))),F.endsWith(".env")&&q(".env",(async()=>await Promise.all([f.e(14),f.e(17),f.e(13),f.e(19),f.e(18),f.e(23),f.e(21),f.e(45),f.e(48)]).then(f.bind(f,14048)).then((F=>new F._ENVTextureLoader)))),F.endsWith(".hdr")&&q(".hdr",(async()=>await Promise.all([f.e(14),f.e(49)]).then(f.bind(f,14057)).then((F=>new F._HDRTextureLoader)))),(F.endsWith(".ktx")||F.endsWith(".ktx2"))&&(q(".ktx",(async()=>await f.e(30).then(f.bind(f,14061)).then((F=>new F._KTXTextureLoader)))),q(".ktx2",(async()=>await f.e(30).then(f.bind(f,14061)).then((F=>new F._KTXTextureLoader))))),F.endsWith(".tga")&&q(".tga",(async()=>await f.e(50).then(f.bind(f,14065)).then((F=>new F._TGATextureLoader)))),F.endsWith(".exr")&&q(".exr",(async()=>await f.e(16).then(f.bind(f,14070)).then((F=>new F._ExrTextureLoader)))));const c=N.get(F);return c?Promise.resolve(c(P)):null}},11567:(F,P,f)=>{f.d(P,{b:()=>H});var c,N=f(11464),q=f(11574);!function(F){F[F.Unknown=0]="Unknown",F[F.Url=1]="Url",F[F.Temp=2]="Temp",F[F.Raw=3]="Raw",F[F.Dynamic=4]="Dynamic",F[F.RenderTarget=5]="RenderTarget",F[F.MultiRenderTarget=6]="MultiRenderTarget",F[F.Cube=7]="Cube",F[F.CubeRaw=8]="CubeRaw",F[F.CubePrefiltered=9]="CubePrefiltered",F[F.Raw3D=10]="Raw3D",F[F.Raw2DArray=11]="Raw2DArray",F[F.DepthStencil=12]="DepthStencil",F[F.CubeRawRGBD=13]="CubeRawRGBD",F[F.Depth=14]="Depth"}(c||(c={}));class H extends q.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(F){this.generateMipMaps=F}get uniqueId(){return this._uniqueId}_setUniqueId(F){this._uniqueId=F}getEngine(){return this._engine}get source(){return this._source}constructor(F,P){let f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new N.d,this.onErrorObservable=new N.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=F,this._source=P,this._uniqueId=H._Counter++,f||(this._hardwareTexture=F._createHardwareTexture())}incrementReferences(){this._references++}updateSize(F,P){let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,F,P,f),this.width=F,this.height=P,this.depth=f,this.baseWidth=F,this.baseHeight=P,this.baseDepth=f,this._size=F*P*f}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const F=this.onRebuildCallback(this),P=P=>{P._swapAndDie(this,!1),this.isReady=F.isReady};return void(F.isAsync?F.proxy.then(P):P(F.proxy))}let F;switch(this.source){case 2:case 12:case 14:break;case 1:return void(F=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(F=>{F._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:F=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),F._swapAndDie(this,!1),this.isReady=!0;break;case 10:F=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),F._swapAndDie(this,!1),this.isReady=!0;break;case 11:F=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),F._swapAndDie(this,!1),this.isReady=!0;break;case 4:F=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),F._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(F=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{F._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:F=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),F._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return F=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(F=>{F&&F._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(F._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(F){var P;let f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(P=this._hardwareTexture)||void 0===P||P.setUsage(F._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),F._hardwareTexture=this._hardwareTexture,f&&(F._isRGBD=this._isRGBD),this._lodTextureHigh&&(F._lodTextureHigh&&F._lodTextureHigh.dispose(),F._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(F._lodTextureMid&&F._lodTextureMid.dispose(),F._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(F._lodTextureLow&&F._lodTextureLow.dispose(),F._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(F._irradianceTexture&&F._irradianceTexture.dispose(),F._irradianceTexture=this._irradianceTexture);const c=this._engine.getLoadedTexturesCache();let N=c.indexOf(this);-1!==N&&c.splice(N,1),N=c.indexOf(F),-1===N&&c.push(F)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}H._Counter=0},11574:(F,P,f)=>{f.d(P,{e:()=>c});class c{get wrapU(){return this._cachedWrapU}set wrapU(F){this._cachedWrapU=F}get wrapV(){return this._cachedWrapV}set wrapV(F){this._cachedWrapV=F}get wrapR(){return this._cachedWrapR}set wrapR(F){this._cachedWrapR=F}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(F){this._cachedAnisotropicFilteringLevel=F}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(F){this._comparisonFunction=F}get useMipMaps(){return this._useMipMaps}set useMipMaps(F){this._useMipMaps=F}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=F,this._cachedWrapV=P,this._cachedWrapR=f,this._cachedAnisotropicFilteringLevel=c,this.samplingMode=N,this._comparisonFunction=q,this}compareSampler(F){return this._cachedWrapU===F._cachedWrapU&&this._cachedWrapV===F._cachedWrapV&&this._cachedWrapR===F._cachedWrapR&&this._cachedAnisotropicFilteringLevel===F._cachedAnisotropicFilteringLevel&&this.samplingMode===F.samplingMode&&this._comparisonFunction===F._comparisonFunction&&this._useMipMaps===F._useMipMaps}}},11476:(F,P,f)=>{f.d(P,{c:()=>q});var c=f(11474);const N=(F,P,f)=>F?F.getClassName&&"Mesh"===F.getClassName()?null:!F.getClassName||"SubMesh"!==F.getClassName()&&"PhysicsBody"!==F.getClassName()?F.clone?F.clone():Array.isArray(F)?F.slice():f&&"object"===typeof F?{...F}:null:F.clone(P):null;class q{static DeepCopy(F,P,f,q){let H=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const A=function(F){const P=[];do{const f=Object.getOwnPropertyNames(F);for(const F of f)-1===P.indexOf(F)&&P.push(F)}while(F=Object.getPrototypeOf(F));return P}(F);for(const j of A){if("_"===j[0]&&(!q||-1===q.indexOf(j)))continue;if(j.endsWith("Observable"))continue;if(f&&-1!==f.indexOf(j))continue;const A=F[j],i=typeof A;if("function"!==i)try{if("object"===i)if(A instanceof Uint8Array)P[j]=Uint8Array.from(A);else if(A instanceof Array){if(P[j]=[],A.length>0)if("object"==typeof A[0])for(let F=0;F<A.length;F++){const f=N(A[F],P,H);-1===P[j].indexOf(f)&&P[j].push(f)}else P[j]=A.slice(0)}else P[j]=N(A,P,H);else P[j]=A}catch(o){c.d.Warn(o.message)}}}}},11514:(F,P,f)=>{f.d(P,{d:()=>c,e:()=>N,h:()=>q});class c extends Error{}c._setPrototypeOf=Object.setPrototypeOf||((F,P)=>(F.__proto__=P,F));const N={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class q extends c{constructor(F,P,f){super(F),this.errorCode=P,this.innerError=f,this.name="RuntimeError",c._setPrototypeOf(this,q.prototype)}}},11510:(F,P,f)=>{f.d(P,{b:()=>k,d:()=>z,f:()=>V,i:()=>K,n:()=>d,l:()=>L,r:()=>y,u:()=>O,y:()=>M,A:()=>Z});var c=f(11494),N=f(11471),q=f(11464);class H{}H.FilesToLoad={};var A=f(11514),o=f(11521),j=f(11530),i=f(11501),u=f(11474),T=f(11538),Y=f(11533),t=f(11541);const C=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class L extends A.h{constructor(F,P){super(F,A.e.LoadFileError),this.name="LoadFileError",A.d._setPrototypeOf(this,L.prototype),P instanceof c.e?this.request=P:this.file=P}}class J extends A.h{constructor(F,P){super(F,A.e.RequestFileError),this.request=P,this.name="RequestFileError",A.d._setPrototypeOf(this,J.prototype)}}class B extends A.h{constructor(F,P){super(F,A.e.ReadFileError),this.file=P,this.name="ReadFileError",A.d._setPrototypeOf(this,B.prototype)}}const z={DefaultRetryStrategy:class{static ExponentialBackoff(){let F=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(f,c,N)=>0!==c.status||N>=F||-1!==f.indexOf("file:")?-1:Math.pow(2,N)*P}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:F=>F,ScriptBaseUrl:"",ScriptPreprocessUrl:F=>F,CleanUrl:F=>F=F.replace(/#/gm,"%23")},Z=(F,P)=>{if((!F||0!==F.indexOf("data:"))&&z.CorsBehavior)if("string"===typeof z.CorsBehavior||z.CorsBehavior instanceof String)P.crossOrigin=z.CorsBehavior;else{const f=z.CorsBehavior(F);f&&(P.crossOrigin=f)}},R={getRequiredSize:null},y=function(F,P,f,N){let q,A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",j=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===u||void 0===u||!u._features.forceBitmapOverHTMLImageElement))return f("LoadImage is only supported in web or BabylonNative environments."),null;let T=!1;F instanceof ArrayBuffer||ArrayBuffer.isView(F)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(q=URL.createObjectURL(new Blob([F],{type:A})),T=!0):q=`data:${A};base64,`+(0,o.k)(F):F instanceof Blob?(q=URL.createObjectURL(F),T=!0):(q=z.CleanUrl(F),q=z.PreprocessUrl(q));const Y=P=>{if(f){const c=q||F.toString();f(`Error while trying to load image: ${0===c.indexOf("http")||c.length<=128?c:c.slice(0,128)+"..."}`,P)}};if(null!==u&&void 0!==u&&u._features.forceBitmapOverHTMLImageElement)return d(q,(c=>{u.createImageBitmap(new Blob([c],{type:A}),{premultiplyAlpha:"none",...j}).then((F=>{P(F),T&&URL.revokeObjectURL(q)})).catch((P=>{f&&f("Error while trying to load image: "+F,P)}))}),void 0,N||void 0,!0,((F,P)=>{Y(P)})),null;const t=new Image;if(R.getRequiredSize){const P=R.getRequiredSize(F);P.width&&(t.width=P.width),P.height&&(t.height=P.height)}Z(q,t);const C=[],L=()=>{for(const F of C)F.target.removeEventListener(F.name,F.handler);C.length=0};C.push({target:t,name:"load",handler:()=>{L(),P(t),T&&t.src&&URL.revokeObjectURL(t.src)}}),C.push({target:t,name:"error",handler:F=>{L(),Y(F),T&&t.src&&URL.revokeObjectURL(t.src)}}),C.push({target:document,name:"securitypolicyviolation",handler:F=>{if(F.blockedURI!==t.src||"xf"===F.disposition)return;L();const P=new Error(`CSP violation of policy ${F.effectiveDirective} ${F.blockedURI}. Current policy is ${F.originalPolicy}`);i.b.UseFallbackTexture=!1,Y(P),T&&t.src&&URL.revokeObjectURL(t.src),t.src=""}}),(()=>{for(const F of C)F.target.addEventListener(F.name,F.handler)})();const J="blob:"===q.substring(0,5),B="data:"===q.substring(0,5),y=()=>{J||B||!c.e.IsCustomRequestAvailable?t.src=q:d(q,((F,P,f)=>{const c=new Blob([F],{type:!A&&f?f:A}),N=URL.createObjectURL(c);T=!0,t.src=N}),void 0,N||void 0,!0,((F,P)=>{Y(P)}))},O=()=>{N&&N.loadImage(q,t)};if(!J&&!B&&N&&N.enableTexturesOffline)N.open(O,y);else{if(-1!==q.indexOf("file:")){const F=decodeURIComponent(q.substring(5).toLowerCase());if(H.FilesToLoad[F]&&"undefined"!==typeof URL){try{let P;try{P=URL.createObjectURL(H.FilesToLoad[F])}catch(M){P=URL.createObjectURL(H.FilesToLoad[F])}t.src=P,T=!0}catch(V){t.src=""}return t}}y()}return t},O=(F,P,f,c,N)=>{const H=new FileReader,A={onCompleteObservable:new q.d,abort:()=>H.abort()};return H.onloadend=()=>A.onCompleteObservable.notifyObservers(A),N&&(H.onerror=()=>{N(new B(`Unable to read ${F.name}`,F))}),H.onload=F=>{P(F.target.result)},f&&(H.onprogress=f),c?H.readAsArrayBuffer(F):H.readAsText(F),A},d=(F,P,f,c,N,o,j)=>{if(F.name)return O(F,P,f,N,o?F=>{o(void 0,F)}:void 0);const i=F;if(-1!==i.indexOf("file:")){let F=decodeURIComponent(i.substring(5).toLowerCase());0===F.indexOf("./")&&(F=F.substring(2));const c=H.FilesToLoad[F];if(c)return O(c,P,f,N,o?F=>o(void 0,new L(F.message,F.file)):void 0)}const{match:Y,type:t}=x(i);if(Y){const F={onCompleteObservable:new q.d,abort:()=>()=>{}};try{const F=N?k(i):I(i);P(F,void 0,t)}catch(A){o?o(void 0,A):u.d.Error(A.message||"Failed to parse the Data URL")}return T.c.SetImmediate((()=>{F.onCompleteObservable.notifyObservers(F)})),F}return M(i,((F,f)=>{P(F,null===f||void 0===f?void 0:f.responseURL,null===f||void 0===f?void 0:f.getResponseHeader("content-type"))}),f,c,N,o?F=>{o(F.request,new L(F.message,F.request))}:void 0,j)},M=(F,P,f,H,A,o,j)=>{F=z.CleanUrl(F),F=z.PreprocessUrl(F);const i=z.BaseUrl+F;let T=!1;const Y={onCompleteObservable:new q.d,abort:()=>T=!0},t=()=>{let F,q=new c.e,H=null;const t=()=>{q&&(f&&q.removeEventListener("progress",f),F&&q.removeEventListener("readystatechange",F),q.removeEventListener("loadend",C))};let C=()=>{t(),Y.onCompleteObservable.notifyObservers(Y),Y.onCompleteObservable.clear(),f=void 0,F=null,C=null,o=void 0,j=void 0,P=void 0};Y.abort=()=>{T=!0,C&&C(),q&&q.readyState!==(XMLHttpRequest.DONE||4)&&q.abort(),null!==H&&(clearTimeout(H),H=null),q=null};const L=F=>{const P=F.message||"Unknown error";o&&q?o(new J(P,q)):u.d.Error(P)},B=u=>{if(q){if(q.open("GET",i),j)try{j(q)}catch(Y){return void L(Y)}A&&(q.responseType="arraybuffer"),f&&q.addEventListener("progress",f),C&&q.addEventListener("loadend",C),F=()=>{if(!T&&q&&q.readyState===(XMLHttpRequest.DONE||4)){if(F&&q.removeEventListener("readystatechange",F),q.status>=200&&q.status<300||0===q.status&&(!(0,N.l)()||Q())){const F=A?q.response:q.responseText;if(null!==F){try{P&&P(F,q)}catch(Y){L(Y)}return}}const f=z.DefaultRetryStrategy;if(f){const F=f(i,q,u);if(-1!==F)return t(),q=new c.e,void(H=setTimeout((()=>B(u+1)),F))}const j=new J("Error status: "+q.status+" "+q.statusText+" - Unable to load "+i,q);o&&o(j)}},q.addEventListener("readystatechange",F),q.send()}};B(0)};if(H&&H.enableSceneOffline){const c=F=>{F&&F.status>400?o&&o(F):t()},N=()=>{H&&H.loadFile(z.BaseUrl+F,(F=>{!T&&P&&P(F),Y.onCompleteObservable.notifyObservers(Y)}),f?F=>{!T&&f&&f(F)}:void 0,c,A)};H.open(N,c)}else t();return Y},V=F=>{const{match:P,type:f}=x(F);if(P)return f||void 0;const c=F.lastIndexOf(".");switch(F.substring(c+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"kf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},Q=()=>"undefined"!==typeof location&&"file:"===location.protocol,K=F=>C.test(F),x=F=>{const P=C.exec(F);if(null===P||0===P.length)return{match:!1,type:""};return{match:!0,type:P[0].replace("data:","").replace("base64,","")}};function k(F){return(0,o.b)(F.split(",")[1])}const I=F=>(0,o.f)(F.split(",")[1]);let E;t.b._FileToolsLoadImage=y,Y.b.loadFile=d,j.m.loadFile=d;((F,P,f,c,N,q,H,A,o,j)=>{E={DecodeBase64UrlToBinary:F,DecodeBase64UrlToString:P,DefaultRetryStrategy:f.DefaultRetryStrategy,BaseUrl:f.BaseUrl,CorsBehavior:f.CorsBehavior,PreprocessUrl:f.PreprocessUrl,IsBase64DataUrl:c,IsFileURL:N,LoadFile:q,LoadImage:H,ReadFile:A,RequestFile:o,SetCorsBehavior:j},Object.defineProperty(E,"DefaultRetryStrategy",{get:function(){return f.DefaultRetryStrategy},set:function(F){f.DefaultRetryStrategy=F}}),Object.defineProperty(E,"BaseUrl",{get:function(){return f.BaseUrl},set:function(F){f.BaseUrl=F}}),Object.defineProperty(E,"PreprocessUrl",{get:function(){return f.PreprocessUrl},set:function(F){f.PreprocessUrl=F}}),Object.defineProperty(E,"CorsBehavior",{get:function(){return f.CorsBehavior},set:function(F){f.CorsBehavior=F}})})(k,I,z,K,Q,d,y,O,M,Z)},11596:(F,P,f)=>{function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(F=>{const P=16*Math.random()|0;return("x"===F?P:3&P|8).toString(16)}))}f.d(P,{e:()=>c})},11582:(F,P,f)=>{f.d(P,{d:()=>q});var c=f(11474),N=f(11587);class q{static Instantiate(F){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[F])return this.RegisteredExternalClasses[F];const P=(0,N.c)(F);if(P)return P;c.d.Warn(F+" not found, you may have missed an import.");const f=F.split(".");let q=window||this;for(let c=0,N=f.length;c<N;c++)q=q[f[c]];return"function"!==typeof q?null:q}}q.RegisteredExternalClasses={}},11480:(F,P,f)=>{f.d(P,{d:()=>N});var c=f(11471);class N{static get Now(){return(0,c.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11521:(F,P,f)=>{f.d(P,{b:()=>H,f:()=>q,i:()=>c,k:()=>N});const c=F=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(F);let P="";for(let f=0;f<F.byteLength;f++)P+=String.fromCharCode(F[f]);return P},N=F=>{const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f,c,N,q,H,A,o,j="",i=0;const u=ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength):new Uint8Array(F);for(;i<u.length;)f=u[i++],c=i<u.length?u[i++]:Number.NaN,N=i<u.length?u[i++]:Number.NaN,q=f>>2,H=(3&f)<<4|c>>4,A=(15&c)<<2|N>>6,o=63&N,isNaN(c)?A=o=64:isNaN(N)&&(o=64),j+=P.charAt(q)+P.charAt(H)+P.charAt(A)+P.charAt(o);return j},q=F=>atob(F),H=F=>{const P=q(F),f=P.length,c=new Uint8Array(new ArrayBuffer(f));for(let N=0;N<f;N++)c[N]=P.charCodeAt(N);return c.buffer}},11598:(F,P,f)=>{function c(F){let P=1;do{P*=2}while(P<F);return P===F}function N(F,P,f){return F*(1-f)+P*f}function q(F){const P=H(F),f=A(F);return P-F>F-f?f:P}function H(F){return F--,F|=F>>1,F|=F>>2,F|=F>>4,F|=F>>8,F|=F>>16,++F}function A(F){return F|=F>>1,F|=F>>2,F|=F>>4,F|=F>>8,(F|=F>>16)-(F>>1)}function o(F,P){let f;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:f=A(F);break;case 2:f=q(F);break;default:f=H(F)}return Math.min(f,P)}f.d(P,{c:()=>A,f:()=>o,i:()=>c,j:()=>N,m:()=>q})},11462:(F,P,f)=>{f.r(P),f.d(P,{AsyncLoop:()=>B,Tools:()=>L,className:()=>J});var c=f(11464),N=f(11471),q=f(11474),H=f(11476),A=f(11480),o=f(11488),j=f(11494),i=f(11501),u=f(11510),T=f(11538),Y=f(11582),t=f(11596),C=f(11598);class L{static get BaseUrl(){return u.d.BaseUrl}static set BaseUrl(F){u.d.BaseUrl=F}static get CleanUrl(){return u.d.CleanUrl}static set CleanUrl(F){u.d.CleanUrl=F}static IsAbsoluteUrl(F){return 0===F.indexOf("//")||-1!==F.indexOf("://")&&(-1!==F.indexOf(".")&&(-1!==F.indexOf("/")&&(!(F.indexOf(":")>F.indexOf("/"))&&(F.indexOf("://")<F.indexOf(".")||(0===F.indexOf("data:")||0===F.indexOf("blob:"))))))}static set ScriptBaseUrl(F){u.d.ScriptBaseUrl=F}static get ScriptBaseUrl(){return u.d.ScriptBaseUrl}static set CDNBaseUrl(F){L.ScriptBaseUrl=F,L.AssetBaseUrl=F}static set ScriptPreprocessUrl(F){u.d.ScriptPreprocessUrl=F}static get ScriptPreprocessUrl(){return u.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return u.d.DefaultRetryStrategy}static set DefaultRetryStrategy(F){u.d.DefaultRetryStrategy=F}static get CorsBehavior(){return u.d.CorsBehavior}static set CorsBehavior(F){u.d.CorsBehavior=F}static get UseFallbackTexture(){return i.b.UseFallbackTexture}static set UseFallbackTexture(F){i.b.UseFallbackTexture=F}static get RegisteredExternalClasses(){return Y.d.RegisteredExternalClasses}static set RegisteredExternalClasses(F){Y.d.RegisteredExternalClasses=F}static get fallbackTexture(){return i.b.FallbackTexture}static set fallbackTexture(F){i.b.FallbackTexture=F}static FetchToRef(F,P,f,c,N,q){const H=4*((Math.abs(F)*f%f|0)+(Math.abs(P)*c%c|0)*f);q.r=N[H]/255,q.g=N[H+1]/255,q.b=N[H+2]/255,q.a=N[H+3]/255}static Mix(F,P,f){return 0}static Instantiate(F){return Y.d.Instantiate(F)}static SetImmediate(F){T.c.SetImmediate(F)}static IsExponentOfTwo(F){return!0}static FloatRound(F){return Math.fround(F)}static GetFilename(F){const P=F.lastIndexOf("/");return P<0?F:F.substring(P+1)}static GetFolderPath(F){let P=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const f=F.lastIndexOf("/");return f<0?P?F:"":F.substring(0,f+1)}static ToDegrees(F){return 180*F/Math.PI}static ToRadians(F){return F*Math.PI/180}static SmoothAngleChange(F,P){let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const c=this.ToRadians(F),N=this.ToRadians(P);return this.ToDegrees(Math.atan2((1-f)*Math.sin(N)+f*Math.sin(c),(1-f)*Math.cos(N)+f*Math.cos(c)))}static MakeArray(F,P){return!0===P||void 0!==F&&null!=F?Array.isArray(F)?F:[F]:null}static GetPointerPrefix(F){return(0,N.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(F,P){(0,u.A)(F,P)}static SetReferrerPolicyBehavior(F,P){P.referrerPolicy=F}static get PreprocessUrl(){return u.d.PreprocessUrl}static set PreprocessUrl(F){u.d.PreprocessUrl=F}static LoadImage(F,P,f,c,N,q){return(0,u.r)(F,P,f,c,N,q)}static LoadFile(F,P,f,c,N,q){return(0,u.n)(F,P,f,c,N,q)}static async LoadFileAsync(F){let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((f,c)=>{(0,u.n)(F,(F=>{f(F)}),void 0,void 0,P,((F,P)=>{c(P)}))}))}static GetAssetUrl(F){if(!F)return"";if(L.AssetBaseUrl&&F.startsWith(L._DefaultAssetsUrl)){const P="/"===L.AssetBaseUrl[L.AssetBaseUrl.length-1]?L.AssetBaseUrl.substring(0,L.AssetBaseUrl.length-1):L.AssetBaseUrl;return F.replace(L._DefaultAssetsUrl,P)}return F}static GetBabylonScriptURL(F,P){if(!F)return"";if(L.ScriptBaseUrl&&F.startsWith(L._DefaultCdnUrl)){const P="/"===L.ScriptBaseUrl[L.ScriptBaseUrl.length-1]?L.ScriptBaseUrl.substring(0,L.ScriptBaseUrl.length-1):L.ScriptBaseUrl;F=F.replace(L._DefaultCdnUrl,P)}return F=L.ScriptPreprocessUrl(F),P&&(F=L.GetAbsoluteUrl(F)),F}static LoadBabylonScript(F,P,f,c){F=L.GetBabylonScriptURL(F),L.LoadScript(F,P,f)}static async LoadBabylonScriptAsync(F){return F=L.GetBabylonScriptURL(F),await L.LoadScriptAsync(F)}static LoadScript(F,P,f,c){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(F),P&&P()}catch(o){null===f||void 0===f||f(`Unable to load script '${F}' in worker`,o)}return}if(!(0,N.l)())return void(null===f||void 0===f||f(`Cannot load script '${F}' outside of a window or a worker`));const H=document.getElementsByTagName("head")[0],A=document.createElement("script");q?(A.setAttribute("type","module"),A.innerText=F):(A.setAttribute("type","text/javascript"),A.setAttribute("src",F)),c&&(A.id=c),A.onload=()=>{P&&P()},A.onerror=P=>{f&&f(`Unable to load script '${F}'`,P)},H.appendChild(A)}static async LoadScriptAsync(F,P){return await new Promise(((f,c)=>{this.LoadScript(F,(()=>{f()}),((F,P)=>{c(P||new Error(F))}),P)}))}static ReadFileAsDataURL(F,P,f){const N=new FileReader,q={onCompleteObservable:new c.d,abort:()=>N.abort()};return N.onloadend=()=>{q.onCompleteObservable.notifyObservers(q)},N.onload=F=>{P(F.target.result)},N.onprogress=f,N.readAsDataURL(F),q}static ReadFile(F,P,f,c,N){return(0,u.u)(F,P,f,c,N)}static FileAsURL(F){const P=new Blob([F]);return window.URL.createObjectURL(P)}static Format(F){let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return F.toFixed(P)}static DeepCopy(F,P,f,c){H.c.DeepCopy(F,P,f,c)}static IsEmpty(F){for(const P in F)if(Object.prototype.hasOwnProperty.call(F,P))return!1;return!0}static RegisterTopRootEvents(F,P){for(let c=0;c<P.length;c++){const N=P[c];F.addEventListener(N.name,N.handler,!1);try{window.parent&&window.parent.addEventListener(N.name,N.handler,!1)}catch(f){}}}static UnregisterTopRootEvents(F,P){for(let c=0;c<P.length;c++){const N=P[c];F.removeEventListener(N.name,N.handler);try{F.parent&&F.parent.removeEventListener(N.name,N.handler)}catch(f){}}}static async DumpFramebuffer(F,P,f,c){throw(0,o.e)("DumpTools")}static DumpData(F,P,f,c){throw(0,o.e)("DumpTools")}static async DumpDataAsync(F,P,f){throw(0,o.e)("DumpTools")}static _IsOffScreenCanvas(F){return void 0!==F.convertToBlob}static ToBlob(F,P){let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",c=arguments.length>3?arguments[3]:void 0;L._IsOffScreenCanvas(F)||F.toBlob||(F.toBlob=function(F,P,f){setTimeout((()=>{const c=atob(this.toDataURL(P,f).split(",")[1]),N=c.length,q=new Uint8Array(N);for(let F=0;F<N;F++)q[F]=c.charCodeAt(F);F(new Blob([q]))}))}),L._IsOffScreenCanvas(F)?F.convertToBlob({type:f,quality:c}).then((F=>P(F))):F.toBlob((function(F){P(F)}),f,c)}static DownloadBlob(F,P){if("download"in document.createElement("a")){if(!P){const F=new Date;P="screenshot_"+((F.getFullYear()+"-"+(F.getMonth()+1)).slice(2)+"-"+F.getDate()+"_"+F.getHours()+"-"+("0"+F.getMinutes()).slice(-2))+".png"}L.Download(F,P)}else if(F&&"undefined"!==typeof URL){const P=URL.createObjectURL(F),f=window.open("");if(!f)return;const c=f.document.createElement("img");c.onload=function(){URL.revokeObjectURL(P)},c.src=P,f.document.body.appendChild(c)}}static EncodeScreenshotCanvasData(F,P){let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",c=arguments.length>3?arguments[3]:void 0,N=arguments.length>4?arguments[4]:void 0;if("string"!==typeof c&&P){if(P){if(L._IsOffScreenCanvas(F))return void F.convertToBlob({type:f,quality:N}).then((F=>{const f=new FileReader;f.readAsDataURL(F),f.onloadend=()=>{const F=f.result;P(F)}}));const c=F.toDataURL(f,N);P(c)}}else this.ToBlob(F,(function(F){F&&L.DownloadBlob(F,c),P&&P("")}),f,N)}static Download(F,P){if("undefined"===typeof URL)return;const f=window.URL.createObjectURL(F),c=document.createElement("a");document.body.appendChild(c),c.style.display="none",c.href=f,c.download=P,c.addEventListener("click",(()=>{c.parentElement&&c.parentElement.removeChild(c)})),c.click(),window.URL.revokeObjectURL(f)}static BackCompatCameraNoPreventDefault(F){return"boolean"===typeof F[0]?F[0]:"boolean"===typeof F[1]&&F[1]}static CreateScreenshot(F,P,f,c){throw(0,o.e)("ScreenshotTools")}static async CreateScreenshotAsync(F,P,f){throw(0,o.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(F,P,f,c){throw(0,o.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(F,P,f){throw(0,o.e)("ScreenshotTools")}static RandomId(){return(0,t.e)()}static IsBase64(F){return(0,u.i)(F)}static DecodeBase64(F){return(0,u.b)(F)}static get errorsCount(){return q.d.errorsCount}static Log(F){q.d.Log(F)}static Warn(F){q.d.Warn(F)}static Error(F){q.d.Error(F)}static get LogCache(){return q.d.LogCache}static ClearLogCache(){q.d.ClearLogCache()}static set LogLevels(F){q.d.LogLevels=F}static set PerformanceLogLevel(F){return(F&L.PerformanceUserMarkLogLevel)===L.PerformanceUserMarkLogLevel?(L.StartPerformanceCounter=L._StartUserMark,void(L.EndPerformanceCounter=L._EndUserMark)):(F&L.PerformanceConsoleLogLevel)===L.PerformanceConsoleLogLevel?(L.StartPerformanceCounter=L._StartPerformanceConsole,void(L.EndPerformanceCounter=L._EndPerformanceConsole)):(L.StartPerformanceCounter=L._StartPerformanceCounterDisabled,void(L.EndPerformanceCounter=L._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(F,P){}static _EndPerformanceCounterDisabled(F,P){}static _StartUserMark(F){let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!L._Performance){if(!(0,N.l)())return;L._Performance=window.performance}P&&L._Performance.mark&&L._Performance.mark(F+"-Begin")}static _EndUserMark(F){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&L._Performance.mark&&(L._Performance.mark(F+"-End"),L._Performance.measure(F,F+"-Begin",F+"-End"))}static _StartPerformanceConsole(F){let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];P&&(L._StartUserMark(F,P),console.time&&console.time(F))}static _EndPerformanceConsole(F){let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];P&&(L._EndUserMark(F,P),console.timeEnd(F))}static get Now(){return A.d.Now}static GetClassName(F){let P=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=null;if(!P&&F.getClassName)f=F.getClassName();else{if(F instanceof Object){f=(P?F:Object.getPrototypeOf(F)).constructor.__bjsclassName__}f||(f=typeof F)}return f}static First(F,P){for(const f of F)if(P(f))return f;return null}static getFullClassName(F){let P=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=null,c=null;if(!P&&F.getClassName)f=F.getClassName();else{if(F instanceof Object){const N=P?F:Object.getPrototypeOf(F);f=N.constructor.__bjsclassName__,c=N.constructor.__bjsmoduleName__}f||(f=typeof F)}return f?(null!=c?c+".":"")+f:null}static async DelayAsync(F){await new Promise((P=>{setTimeout((()=>{P()}),F)}))}static IsSafari(){return!!(0,N.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function J(F,P){return f=>{f.__bjsclassName__=F,f.__bjsmoduleName__=null!=P?P:null}}L.AssetBaseUrl="",L.UseCustomRequestHeaders=!1,L.CustomRequestHeaders=j.e.CustomRequestHeaders,L.GetDOMTextContent=N.d,L._DefaultCdnUrl="https://cdn.babylonjs.com",L._DefaultAssetsUrl="https://assets.babylonjs.com/core",L.GetAbsoluteUrl="object"===typeof document?F=>{const P=document.createElement("a");return P.href=F,P.href}:"function"===typeof URL&&"object"===typeof location?F=>new URL(F,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},L.NoneLogLevel=q.d.NoneLogLevel,L.MessageLogLevel=q.d.MessageLogLevel,L.WarningLogLevel=q.d.WarningLogLevel,L.ErrorLogLevel=q.d.ErrorLogLevel,L.AllLogLevel=q.d.AllLogLevel,L.IsWindowObjectExist=N.l,L.PerformanceNoneLogLevel=0,L.PerformanceUserMarkLogLevel=1,L.PerformanceConsoleLogLevel=2,L.StartPerformanceCounter=L._StartPerformanceCounterDisabled,L.EndPerformanceCounter=L._EndPerformanceCounterDisabled;class B{constructor(F,P,f){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=F,this.index=c-1,this._done=!1,this._fn=P,this._successCallback=f}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(F,P,f){const c=new B(F,P,f,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return c.executeNext(),c}static SyncAsyncForLoop(F,P,f,c,N){let q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return B.Run(Math.ceil(F/P),(c=>{N&&N()?c.breakLoop():setTimeout((()=>{for(let q=0;q<P;++q){const H=c.index*P+q;if(H>=F)break;if(f(H),N&&N()){c.breakLoop();break}}c.executeNext()}),q)}),c)}}L.Mix=C.j,L.IsExponentOfTwo=C.i,i.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11587:(F,P,f)=>{f.d(P,{c:()=>q,f:()=>N});const c={};function N(F,P){c[F]=P}function q(F){return c[F]}},11494:(F,P,f)=>{f.d(P,{e:()=>c});class c{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(c.CustomRequestHeaders).length>0||c.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const F in c.CustomRequestHeaders){const P=c.CustomRequestHeaders[F];P&&this._xhr.setRequestHeader(F,P)}}_shouldSkipRequestModifications(F){return c.SkipRequestModificationForBabylonCDN&&(F.includes("preview.babylonjs.com")||F.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(F){this._xhr.onprogress=F}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(F){this._xhr.responseType=F}get timeout(){return this._xhr.timeout}set timeout(F){this._xhr.timeout=F}addEventListener(F,P,f){this._xhr.addEventListener(F,P,f)}removeEventListener(F,P,f){this._xhr.removeEventListener(F,P,f)}abort(){this._xhr.abort()}send(F){c.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(F)}open(F,P){for(const f of c.CustomRequestModifiers){if(this._shouldSkipRequestModifications(P))return;P=f(this._xhr,P)||P}P=(P=P.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=P,this._xhr.open(F,P,!0)}setRequestHeader(F,P){this._xhr.setRequestHeader(F,P)}getResponseHeader(F){return this._xhr.getResponseHeader(F)}}c.CustomRequestHeaders={},c.CustomRequestModifiers=new Array,c.SkipRequestModificationForBabylonCDN=!0}}]);