"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[8],{12888:(B,u,F)=>{F.d(u,{c:()=>f});var Z=F(12855),V=F(12822),p=F(12891),G=F(12917),R=F(12834);class e{constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,B&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(B){this._zOffset!==B&&(this._zOffset=B,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(B){this._zOffsetUnits!==B&&(this._zOffsetUnits=B,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(B){this._cullFace!==B&&(this._cullFace=B,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(B){this._cull!==B&&(this._cull=B,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(B){this._depthFunc!==B&&(this._depthFunc=B,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(B){this._depthMask!==B&&(this._depthMask=B,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(B){this._depthTest!==B&&(this._depthTest=B,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(B){this._frontFace!==B&&(this._frontFace=B,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(B){this.isDirty&&(this._isCullDirty&&(this.cull?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(B.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(B.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(B.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(B.enable(B.POLYGON_OFFSET_FILL),B.polygonOffset(this.zOffset,this.zOffsetUnits)):B.disable(B.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(B.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class s{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(B){this._func!==B&&(this._func=B,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(B){this._funcRef!==B&&(this._funcRef=B,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(B){this._funcMask!==B&&(this._funcMask=B,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(B){this._opStencilFail!==B&&(this._opStencilFail=B,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(B){this._opDepthFail!==B&&(this._opDepthFail=B,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(B){this._opStencilDepthPass!==B&&(this._opStencilDepthPass=B,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(B){this._mask!==B&&(this._mask=B,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(B){this._enabled!==B&&(this._enabled=B,this._isStencilTestDirty=!0)}constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,B&&this.reset()}reset(){var B;this.stencilMaterial=void 0,null===(B=this.stencilGlobal)||void 0===B||B.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(B){var u;if(!B)return;const F=!this.useStencilGlobalOnly&&!(null===(u=this.stencilMaterial)||void 0===u||!u.enabled);this.enabled=F?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=F?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=F?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=F?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=F?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=F?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=F?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=F?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(B.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(B.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(B.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class Y{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=Y.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=Y.KEEP,this.opDepthFail=Y.KEEP,this.opStencilDepthPass=Y.REPLACE}get stencilFunc(){return this.func}set stencilFunc(B){this.func=B}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(B){this.funcRef=B}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(B){this.funcMask=B}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(B){this.opStencilFail=B}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(B){this.opDepthFail=B}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(B){this.opStencilDepthPass=B}get stencilMask(){return this.mask}set stencilMask(B){this.mask=B}get stencilTest(){return this.enabled}set stencilTest(B){this.enabled=B}}Y.ALWAYS=519,Y.KEEP=7680,Y.REPLACE=7681;class Q{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(B){this._alphaBlend!==B&&(this._alphaBlend=B,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(B,u,F,Z){this._blendConstants[0]===B&&this._blendConstants[1]===u&&this._blendConstants[2]===F&&this._blendConstants[3]===Z||(this._blendConstants[0]=B,this._blendConstants[1]=u,this._blendConstants[2]=F,this._blendConstants[3]=Z,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(B,u,F,Z){this._blendFunctionParameters[0]===B&&this._blendFunctionParameters[1]===u&&this._blendFunctionParameters[2]===F&&this._blendFunctionParameters[3]===Z||(this._blendFunctionParameters[0]=B,this._blendFunctionParameters[1]=u,this._blendFunctionParameters[2]=F,this._blendFunctionParameters[3]=Z,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(B,u){this._blendEquationParameters[0]===B&&this._blendEquationParameters[1]===u||(this._blendEquationParameters[0]=B,this._blendEquationParameters[1]=u,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(B){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?B.enable(B.BLEND):B.disable(B.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(B.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(B.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(B.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var t=F(12843),v=F(12925),D=F(12816),L=F(12807),q=F(12878),W=F(12937);function X(B,u){if((0,D.j)()){const{requestAnimationFrame:F}=u||window;if("function"===typeof F)return F(B)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(B);return setTimeout(B,16)}class f{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(B){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(B){B!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=B,this._depthCullingState.depthFunc=B?518:515)}setColorWrite(B){B!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=B)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(B){if(B)return this.isNDCHalfZRange?B.IS_NDC_HALF_ZRANGE="":delete B.IS_NDC_HALF_ZRANGE,this.o?B.USE_REVERSE_DEPTHBUFFER="":delete B.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?B.USE_EXACT_SRGB_CONVERSIONS="":delete B.USE_EXACT_SRGB_CONVERSIONS);{let B="";return this.isNDCHalfZRange&&(B+="#define IS_NDC_HALF_ZRANGE"),this.o&&(B&&(B+="\n"),B+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(B&&(B+="\n"),B+="#define USE_EXACT_SRGB_CONVERSIONS"),B}}_rebuildInternalTextures(){const B=this._internalTexturesCache.slice();for(const u of B)u._rebuild()}_rebuildRenderTargetWrappers(){const B=this._renderTargetWrapperCache.slice();for(const u of B)u._rebuild()}_rebuildEffects(){for(const B in this._compiledEffects){const u=this._compiledEffects[B];u._pipelineContext=null,u._prepareEffect()}p.Effect.ResetCache()}_rebuildGraphicsResources(){var B;this.wipeCaches(!0),this._rebuildEffects(),null===(B=this._rebuildComputeEffects)||void 0===B||B.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){V.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(B){setTimeout((()=>{this._clearEmptyResources();const u=this._depthCullingState.depthTest,F=this._depthCullingState.depthFunc,Z=this._depthCullingState.depthMask,V=this._stencilState.stencilTest;B(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=u,this._depthCullingState.depthFunc=F,this._depthCullingState.depthMask=Z,this._stencilState.stencilTest=V,this._flagContextRestored()}),0)}get G(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(B){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(B){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const B=new Uint8Array(4),u=[B,B,B,B,B,B];this._emptyCubeTexture=this.createRawCubeTexture(u,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(B){if(!B)return this._activeRenderLoops.length=0,void this._cancelFrame();const u=this._activeRenderLoops.indexOf(B);u>=0&&(this._activeRenderLoops.splice(u,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const B=this._frameHandler;if(this._frameHandler=0,(0,D.j)()){const{cancelAnimationFrame:u}=this.getHostWindow()||window;if("function"===typeof u)return u(B)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(B);return clearTimeout(B)}}VR(){this.onBeginFrameObservable.notifyObservers(this)}pR(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(B){this._maxFPS=B,void 0!==B&&(this._minFrameTime=B<=0?Number.MAX_VALUE:1e3/B)}_isOverFrameTime(B){if(!B||void 0===this._maxFPS)return!1;const u=B-this._lastFrameTime;return this._lastFrameTime=B,this._renderAccumulator+=u,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(B){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(B)){let B=!0;(this.G||!this.renderEvenInBackground&&this._windowIsBackground)&&(B=!1),B&&(this.VR(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.pR())}}_renderLoop(B){this._processFrame(B),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let B=0;B<this._activeRenderLoops.length;B++){(0,this._activeRenderLoops[B])()}}_renderViews(){return!1}_queueNewFrame(B,u){return X(B,u)}runRenderLoop(B){-1===this._activeRenderLoops.indexOf(B)&&(this._activeRenderLoops.push(B),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(B){this._depthCullingState.depthTest=B}setZOffset(B){this._depthCullingState.zOffset=this.o?-B:B}getZOffset(){const B=this._depthCullingState.zOffset;return this.o?-B:B}setZOffsetUnits(B){this._depthCullingState.zOffsetUnits=this.o?-B:B}getZOffsetUnits(){const B=this._depthCullingState.zOffsetUnits;return this.o?-B:B}getHostWindow(){return(0,D.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(B){this._compatibilityMode=!0}_rebuildTextures(){for(const B of this.scenes)B._rebuildTextures();for(const B of this._virtualScenes)B._rebuildTextures()}_releaseRenderTargetWrapper(B){const u=this._renderTargetWrapperCache.indexOf(B);-1!==u&&this._renderTargetWrapperCache.splice(u,1)}get currentViewport(){return this._cachedViewport}setViewport(B,u,F){const Z=u||this.getRenderWidth(),V=F||this.getRenderHeight(),p=B.x||0,G=B.y||0;this._cachedViewport=B,this._viewport(p*Z,G*V,Z*B.width,V*B.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(B){return new Path2D(B)}get description(){let B=this.name+this.version;return this._caps.parallelShaderCompile&&(B+=" - Parallel shader compilation"),B}_createTextureBase(B,u,F,p){let G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7?arguments[7]:void 0,Y=arguments.length>8?arguments[8]:void 0,Q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,t=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,D=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,L=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,q=arguments.length>13?arguments[13]:void 0,X=arguments.length>14?arguments[14]:void 0,C=arguments.length>15?arguments[15]:void 0;const x="data:"===(B=B||"").substring(0,5),U="blob:"===B.substring(0,5),y=x&&-1!==B.indexOf(";base64,"),O=t||new v.b(this,1);O!==t&&(O.label=B.substring(0,60));const g=B;!this._transformTextureUrl||y||t||Q||(B=this._transformTextureUrl(B)),g!==B&&(O._originalUrl=g);const J=B.lastIndexOf(".");let a=L||(J>-1?B.substring(J).toLowerCase():"");a.indexOf("?")>-1&&(a=a.split("?")[0]);const T=(0,W.e)(a,q);p&&p.addPendingData(O),O.url=B,O.generateMipMaps=!u,O.samplingMode=G,O.invertY=F,O._useSRGBBuffer=this._getUseSRGBBuffer(!!C,u),this._doNotHandleContextLost||(O._buffer=Q);let z=null;R&&!t&&(z=O.onLoadedObservable.add(R)),t||this._internalTexturesCache.push(O);const M=(F,t)=>{p&&p.removePendingData(O),B===g?(z&&O.onLoadedObservable.remove(z),Z.b.UseFallbackTexture&&B!==Z.b.FallbackTexture&&this._createTextureBase(Z.b.FallbackTexture,u,O.invertY,p,G,null,e,s,Y,Q,O),F=(F||"Unknown error")+(Z.b.UseFallbackTexture?" - Fallback texture was used":""),O.onErrorObservable.notifyObservers({message:F,exception:t}),e&&e(F,t)):(V.d.Warn(`Failed to load ${B}, falling back to ${g}`),this._createTextureBase(g,u,O.invertY,p,G,R,e,s,Y,Q,O,D,L,q,X,C))};if(T){const u=async B=>{(await T).loadData(B,O,((B,u,F,Z,V,R)=>{R?M("TextureLoader failed to load data"):s(O,a,p,{width:B,height:u},O.invertY,!F,Z,(()=>(V(),!1)),G)}),X)};Q?Q instanceof ArrayBuffer?u(new Uint8Array(Q)):ArrayBuffer.isView(Q)?u(Q):e&&e("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(B,(B=>{u(new Uint8Array(B))}),void 0,p?p.offlineProvider:void 0,!0,((B,u)=>{M("Unable to load "+(B&&B.responseURL,u))}))}else{const F=B=>{U&&!this._doNotHandleContextLost&&(O._buffer=B),s(O,a,p,B,O.invertY,u,!1,Y,G)};!x||y?Q&&("string"===typeof Q.decoding||Q.close)?F(Q):f._FileToolsLoadImage(B||"",F,M,p?p.offlineProvider:null,q,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Q||Q instanceof ArrayBuffer||ArrayBuffer.isView(Q)||Q instanceof Blob?f._FileToolsLoadImage(Q,F,M,p?p.offlineProvider:null,q,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Q&&F(Q)}return O}_rebuildBuffers(){for(const B of this._uniformBuffers)B._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,D.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const B in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,B)&&(this._boundTexturesCache[B]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(B){this._name=B}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(B){this._hardwareScalingLevel=B,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(B){this._doNotHandleContextLost=B}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(B,u,F){var V,p;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new e,this._stencilStateComposer=new s,this._stencilState=new Y,this._alphaState=new Q,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new L.b,this.onCanvasFocusObservable=new L.b,this.onNewSceneAddedObservable=new L.b,this.onResizeObservable=new L.b,this.onCanvasPointerOutObservable=new L.b,this.onEffectErrorObservable=new L.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new L.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=B=>this._renderLoop(B),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new L.b,this.onAfterShaderCompilationObservable=new L.b,this.onBeginFrameObservable=new L.b,this.onEndFrameObservable=new L.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new L.b,this.onContextRestoredObservable=new L.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.GR=new L.b,this.onReleaseEffectsObservable=new L.b,Z.b.Instances.push(this),this.startTime=R.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,G.e.SetMatrixPrecision(!!u.useHighPrecisionMatrix),(0,D.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=F??!1,u.antialias=B??u.antialias,u.deterministicLockstep=u.deterministicLockstep??!1,u.lockstepMaxSteps=u.lockstepMaxSteps??4,u.timeStep=u.timeStep??1/60,u.RR=u.RR??!0,this._audioContext=(null===(V=u.audioEngineOptions)||void 0===V?void 0:V.audioContext)??null,this._audioDestination=(null===(p=u.audioEngineOptions)||void 0===p?void 0:p.audioDestination)??null,this.premultipliedAlpha=u.premultipliedAlpha??!0,this._doNotHandleContextLost=!!u.doNotHandleContextLost,this._isStencilEnable=!!u.RR,this.useExactSrgbConversions=u.useExactSrgbConversions??!1;const t=(0,D.j)()&&window.devicePixelRatio||1,v=u.limitDeviceRatio||t;F=F||u.adaptToDeviceRatio||!1,this._hardwareScalingLevel=F?1/Math.min(v,t):1,this._lastDevicePixelRatio=t,this._creationOptions=u}resize(){let B,u,F=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const B=(0,D.j)()&&window.devicePixelRatio||1,u=this._lastDevicePixelRatio/B;this._lastDevicePixelRatio=B,this._hardwareScalingLevel*=u}if((0,D.j)()&&(0,D.g)())if(this._renderingCanvas){var Z,V;const F=null===(Z=(V=this._renderingCanvas).getBoundingClientRect)||void 0===Z?void 0:Z.call(V);B=this._renderingCanvas.clientWidth||(null===F||void 0===F?void 0:F.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,u=this._renderingCanvas.clientHeight||(null===F||void 0===F?void 0:F.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else B=window.innerWidth,u=window.innerHeight;else B=this._renderingCanvas?this._renderingCanvas.width:100,u=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(B/this._hardwareScalingLevel,u/this._hardwareScalingLevel,F)}setSize(B,u){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(B|=0,u|=0,!F&&this._renderingCanvas.width===B&&this._renderingCanvas.height===u)return!1;if(this._renderingCanvas.width=B,this._renderingCanvas.height=u,this.scenes){for(let B=0;B<this.scenes.length;B++){const u=this.scenes[B];for(let B=0;B<u.cameras.length;B++){u.cameras[B]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(B,u,F,Z,V,p,G,R,e,s,Y){throw(0,t.e)("engine.rawTexture")}createRawCubeTexture(B,u,F,Z,V,p,G,R){throw(0,t.e)("engine.rawTexture")}createRawTexture3D(B,u,F,Z,V,p,G,R,e,s,Y){throw(0,t.e)("engine.rawTexture")}createRawTexture2DArray(B,u,F,Z,V,p,G,R,e,s,Y){throw(0,t.e)("engine.rawTexture")}_sharedInit(B){this._renderingCanvas=B}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const B=navigator.userAgent;this.hostInformation.isMobile=-1!==B.indexOf("Mobile")||-1!==B.indexOf("Mac")&&(0,D.g)()&&"ontouchend"in document},this._checkForMobile(),(0,D.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(B){return document.createElement("video")}_reportDrawCall(){var B;let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(B=this._drawCalls)||void 0===B||B.addCount(u,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(B,u){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(B,u){return createImageBitmap(B,u)}resizeImageBitmap(B,u,F){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(B){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(B,u){if("undefined"===typeof document)return new OffscreenCanvas(B,u);const F=document.createElement("canvas");return F.width=B,F.height=u,F}createCanvas(B,u){return f._CreateCanvas(B,u)}static _FileToolsLoadImage(B,u,F,Z,V,p,G){throw(0,t.e)("FileTools")}_loadFile(B,u,F,Z,V,p){const G=(0,q.l)(B,u,F,Z,V,p);return this._activeRequests.push(G),G.onCompleteObservable.add((()=>{const B=this._activeRequests.indexOf(G);-1!==B&&this._activeRequests.splice(B,1)})),G}static _FileToolsLoadFile(B,u,F,Z,V,p){if(q.c.loadFile)return q.c.loadFile(B,u,F,Z,V,p);throw(0,t.e)("FileTools")}dispose(){var B;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(B=this.releaseComputeEffects)||void 0===B||B.call(this),p.Effect.ResetCache();for(const F of this._activeRequests)F.abort();this._boundRenderFunction=null,this.GR.notifyObservers(this),this.GR.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,D.j)()&&window.removeEventListener("resize",this._checkForMobile);const u=Z.b.Instances.indexOf(this);u>=0&&Z.b.Instances.splice(u,1),Z.b.Instances.length||(Z.b.OnEnginesDisposedObservable.notifyObservers(this),Z.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(B){throw(0,t.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(B,u){for(let F=0;F<Z.b.Instances.length;F++){const V=Z.b.Instances[F];for(let F=0;F<V.scenes.length;F++)V.scenes[F].markAllMaterialsAsDirty(B,u)}}}f._RenderPassIdCounter=0,f._RescalePostProcessFactory=null,f.CollisionsEpsilon=.001,f.QueueNewFrame=X},12855:(B,u,F)=>{F.d(u,{b:()=>V});var Z=F(12807);class V{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}V.Instances=[],V.OnEnginesDisposedObservable=new Z.b,V._LastCreatedScene=null,V.UseFallbackTexture=!0,V.FallbackTexture=""},12917:(B,u,F)=>{F.d(u,{e:()=>Z});class Z{static SetMatrixPrecision(B){if(Z.MatrixTrackPrecisionChange=!1,B&&!Z.MatrixUse64Bits&&Z.MatrixTrackedMatrices)for(let u=0;u<Z.MatrixTrackedMatrices.length;++u){const B=Z.MatrixTrackedMatrices[u],F=B.eR;B.eR=new Array(16);for(let u=0;u<16;++u)B.eR[u]=F[u]}Z.MatrixUse64Bits=B,Z.MatrixCurrentType=Z.MatrixUse64Bits?Array:Float32Array,Z.MatrixTrackedMatrices=null}}Z.MatrixUse64Bits=!1,Z.MatrixTrackPrecisionChange=!0,Z.MatrixCurrentType=Float32Array,Z.MatrixTrackedMatrices=[]},12937:(B,u,F)=>{F.d(u,{e:()=>G});var Z=F(12822);const V=new Map;function p(B,u){(function(B){return V.delete(B)})(B)&&Z.d.Warn(`Extension with the name '${B}' already exists`),V.set(B,u)}function G(B,u){"image/ktx"!==u&&"image/ktx2"!==u||(B=".ktx"),V.has(B)||(B.endsWith(".ies")&&p(".ies",(async()=>await F.e(15).then(F.bind(F,15459)).then((B=>new B._IESTextureLoader)))),B.endsWith(".dds")&&p(".dds",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(28)]).then(F.bind(F,15462)).then((B=>new B._DDSTextureLoader)))),B.endsWith(".basis")&&p(".basis",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(47)]).then(F.bind(F,15472)).then((B=>new B._BasisTextureLoader)))),B.endsWith(".env")&&p(".env",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(23),F.e(21),F.e(45),F.e(48)]).then(F.bind(F,15479)).then((B=>new B._ENVTextureLoader)))),B.endsWith(".hdr")&&p(".hdr",(async()=>await Promise.all([F.e(14),F.e(49)]).then(F.bind(F,15484)).then((B=>new B._HDRTextureLoader)))),(B.endsWith(".ktx")||B.endsWith(".ktx2"))&&(p(".ktx",(async()=>await F.e(30).then(F.bind(F,15493)).then((B=>new B._KTXTextureLoader)))),p(".ktx2",(async()=>await F.e(30).then(F.bind(F,15493)).then((B=>new B._KTXTextureLoader))))),B.endsWith(".tga")&&p(".tga",(async()=>await F.e(50).then(F.bind(F,15497)).then((B=>new B._TGATextureLoader)))),B.endsWith(".exr")&&p(".exr",(async()=>await F.e(16).then(F.bind(F,15505)).then((B=>new B._ExrTextureLoader)))));const Z=V.get(B);return Z?Promise.resolve(Z(u)):null}},12925:(B,u,F)=>{F.d(u,{b:()=>G});var Z,V=F(12807),p=F(12932);!function(B){B[B.Unknown=0]="Unknown",B[B.Url=1]="Url",B[B.Temp=2]="Temp",B[B.Raw=3]="Raw",B[B.Dynamic=4]="Dynamic",B[B.RenderTarget=5]="RenderTarget",B[B.MultiRenderTarget=6]="MultiRenderTarget",B[B.Cube=7]="Cube",B[B.CubeRaw=8]="CubeRaw",B[B.CubePrefiltered=9]="CubePrefiltered",B[B.Raw3D=10]="Raw3D",B[B.Raw2DArray=11]="Raw2DArray",B[B.DepthStencil=12]="DepthStencil",B[B.CubeRawRGBD=13]="CubeRawRGBD",B[B.Depth=14]="Depth"}(Z||(Z={}));class G extends p.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(B){this.generateMipMaps=B}get uniqueId(){return this._uniqueId}_setUniqueId(B){this._uniqueId=B}getEngine(){return this._engine}get source(){return this._source}constructor(B,u){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new V.b,this.onErrorObservable=new V.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=B,this._source=u,this._uniqueId=G._Counter++,F||(this._hardwareTexture=B._createHardwareTexture())}incrementReferences(){this._references++}updateSize(B,u){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,B,u,F),this.width=B,this.height=u,this.depth=F,this.baseWidth=B,this.baseHeight=u,this.baseDepth=F,this._size=B*u*F}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const B=this.onRebuildCallback(this),u=u=>{u._swapAndDie(this,!1),this.isReady=B.isReady};return void(B.isAsync?B.proxy.then(u):u(B.proxy))}let B;switch(this.source){case 2:case 12:case 14:break;case 1:return void(B=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(B=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:B=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),B._swapAndDie(this,!1),this.isReady=!0;break;case 10:B=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 11:B=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 4:B=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),B._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(B=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:B=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),B._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return B=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(B=>{B&&B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(B._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(B){var u;let F=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(u=this._hardwareTexture)||void 0===u||u.setUsage(B._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),B._hardwareTexture=this._hardwareTexture,F&&(B._isRGBD=this._isRGBD),this._lodTextureHigh&&(B._lodTextureHigh&&B._lodTextureHigh.dispose(),B._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(B._lodTextureMid&&B._lodTextureMid.dispose(),B._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(B._lodTextureLow&&B._lodTextureLow.dispose(),B._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(B._irradianceTexture&&B._irradianceTexture.dispose(),B._irradianceTexture=this._irradianceTexture);const Z=this._engine.getLoadedTexturesCache();let V=Z.indexOf(this);-1!==V&&Z.splice(V,1),V=Z.indexOf(B),-1===V&&Z.push(B)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}G._Counter=0},12932:(B,u,F)=>{F.d(u,{c:()=>Z});class Z{get wrapU(){return this._cachedWrapU}set wrapU(B){this._cachedWrapU=B}get wrapV(){return this._cachedWrapV}set wrapV(B){this._cachedWrapV=B}get wrapR(){return this._cachedWrapR}set wrapR(B){this._cachedWrapR=B}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(B){this._cachedAnisotropicFilteringLevel=B}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(B){this._comparisonFunction=B}get useMipMaps(){return this._useMipMaps}set useMipMaps(B){this._useMipMaps=B}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,V=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=B,this._cachedWrapV=u,this._cachedWrapR=F,this._cachedAnisotropicFilteringLevel=Z,this.samplingMode=V,this._comparisonFunction=p,this}compareSampler(B){return this._cachedWrapU===B._cachedWrapU&&this._cachedWrapV===B._cachedWrapV&&this._cachedWrapR===B._cachedWrapR&&this._cachedAnisotropicFilteringLevel===B._cachedAnisotropicFilteringLevel&&this.samplingMode===B.samplingMode&&this._comparisonFunction===B._comparisonFunction&&this._useMipMaps===B._useMipMaps}}},12830:(B,u,F)=>{F.d(u,{c:()=>p});var Z=F(12822);const V=(B,u,F)=>B?B.getClassName&&"Mesh"===B.getClassName()?null:!B.getClassName||"SubMesh"!==B.getClassName()&&"PhysicsBody"!==B.getClassName()?B.clone?B.clone():Array.isArray(B)?B.slice():F&&"object"===typeof B?{...B}:null:B.clone(u):null;class p{static DeepCopy(B,u,F,p){let G=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const R=function(B){const u=[];do{const F=Object.getOwnPropertyNames(B);for(const B of F)-1===u.indexOf(B)&&u.push(B)}while(B=Object.getPrototypeOf(B));return u}(B);for(const s of R){if("_"===s[0]&&(!p||-1===p.indexOf(s)))continue;if(s.endsWith("Observable"))continue;if(F&&-1!==F.indexOf(s))continue;const R=B[s],Y=typeof R;if("function"!==Y)try{if("object"===Y)if(R instanceof Uint8Array)u[s]=Uint8Array.from(R);else if(R instanceof Array){if(u[s]=[],R.length>0)if("object"==typeof R[0])for(let B=0;B<R.length;B++){const F=V(R[B],u,G);-1===u[s].indexOf(F)&&u[s].push(F)}else u[s]=R.slice(0)}else u[s]=V(R,u,G);else u[s]=R}catch(e){Z.d.Warn(e.message)}}}}},12864:(B,u,F)=>{F.d(u,{e:()=>Z,i:()=>V,j:()=>p});class Z extends Error{}Z._setPrototypeOf=Object.setPrototypeOf||((B,u)=>(B.__proto__=u,B));const V={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class p extends Z{constructor(B,u,F){super(B),this.errorCode=u,this.innerError=F,this.name="RuntimeError",Z._setPrototypeOf(this,p.prototype)}}},12861:(B,u,F)=>{F.d(u,{c:()=>M,d:()=>f,e:()=>J,g:()=>T,j:()=>O,i:()=>q,n:()=>U,q:()=>y,u:()=>g,w:()=>C});var Z=F(12852),V=F(12816),p=F(12807);class G{}G.FilesToLoad={};var R=F(12864),e=F(12867),s=F(12874),Y=F(12855),Q=F(12822),t=F(12882),v=F(12878),D=F(12888);const L=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class q extends R.j{constructor(B,u){super(B,R.i.LoadFileError),this.name="LoadFileError",R.e._setPrototypeOf(this,q.prototype),u instanceof Z.c?this.request=u:this.file=u}}class W extends R.j{constructor(B,u){super(B,R.i.RequestFileError),this.request=u,this.name="RequestFileError",R.e._setPrototypeOf(this,W.prototype)}}class X extends R.j{constructor(B,u){super(B,R.i.ReadFileError),this.file=u,this.name="ReadFileError",R.e._setPrototypeOf(this,X.prototype)}}const f={DefaultRetryStrategy:class{static ExponentialBackoff(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(F,Z,V)=>0!==Z.status||V>=B||-1!==F.indexOf("file:")?-1:Math.pow(2,V)*u}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:B=>B,ScriptBaseUrl:"",ScriptPreprocessUrl:B=>B,CleanUrl:B=>B=B.replace(/#/gm,"%23")},C=(B,u)=>{if((!B||0!==B.indexOf("data:"))&&f.CorsBehavior)if("string"===typeof f.CorsBehavior||f.CorsBehavior instanceof String)u.crossOrigin=f.CorsBehavior;else{const F=f.CorsBehavior(B);F&&(u.crossOrigin=F)}},x={getRequiredSize:null},U=function(B,u,F,V){let p,R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5?arguments[5]:void 0,Q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Y.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Q||void 0===Q||!Q._features.forceBitmapOverHTMLImageElement))return F("LoadImage is only supported in web or BabylonNative environments."),null;let t=!1;B instanceof ArrayBuffer||ArrayBuffer.isView(B)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(p=URL.createObjectURL(new Blob([B],{type:R})),t=!0):p=`data:${R};base64,`+(0,e.k)(B):B instanceof Blob?(p=URL.createObjectURL(B),t=!0):(p=f.CleanUrl(B),p=f.PreprocessUrl(p));const v=u=>{if(F){const Z=p||B.toString();F(`Error while trying to load image: ${0===Z.indexOf("http")||Z.length<=128?Z:Z.slice(0,128)+"..."}`,u)}};if(null!==Q&&void 0!==Q&&Q._features.forceBitmapOverHTMLImageElement)return O(p,(Z=>{Q.createImageBitmap(new Blob([Z],{type:R}),{premultiplyAlpha:"none",...s}).then((B=>{u(B),t&&URL.revokeObjectURL(p)})).catch((u=>{F&&F("Error while trying to load image: "+B,u)}))}),void 0,V||void 0,!0,((B,u)=>{v(u)})),null;const D=new Image;if(x.getRequiredSize){const u=x.getRequiredSize(B);u.width&&(D.width=u.width),u.height&&(D.height=u.height)}C(p,D);const L=[],q=()=>{for(const B of L)B.target.removeEventListener(B.name,B.handler);L.length=0};L.push({target:D,name:"load",handler:()=>{q(),u(D),t&&D.src&&URL.revokeObjectURL(D.src)}}),L.push({target:D,name:"error",handler:B=>{q(),v(B),t&&D.src&&URL.revokeObjectURL(D.src)}}),L.push({target:document,name:"securitypolicyviolation",handler:B=>{if(B.blockedURI!==D.src||"sR"===B.disposition)return;q();const u=new Error(`CSP violation of policy ${B.effectiveDirective} ${B.blockedURI}. Current policy is ${B.originalPolicy}`);Y.b.UseFallbackTexture=!1,v(u),t&&D.src&&URL.revokeObjectURL(D.src),D.src=""}}),(()=>{for(const B of L)B.target.addEventListener(B.name,B.handler)})();const W="blob:"===p.substring(0,5),X="data:"===p.substring(0,5),U=()=>{W||X||!Z.c.IsCustomRequestAvailable?D.src=p:O(p,((B,u,F)=>{const Z=new Blob([B],{type:!R&&F?F:R}),V=URL.createObjectURL(Z);t=!0,D.src=V}),void 0,V||void 0,!0,((B,u)=>{v(u)}))},y=()=>{V&&V.loadImage(p,D)};if(!W&&!X&&V&&V.enableTexturesOffline)V.open(y,U);else{if(-1!==p.indexOf("file:")){const B=decodeURIComponent(p.substring(5).toLowerCase());if(G.FilesToLoad[B]&&"undefined"!==typeof URL){try{let u;try{u=URL.createObjectURL(G.FilesToLoad[B])}catch(g){u=URL.createObjectURL(G.FilesToLoad[B])}D.src=u,t=!0}catch(J){D.src=""}return D}}U()}return D},y=(B,u,F,Z,V)=>{const G=new FileReader,R={onCompleteObservable:new p.b,abort:()=>G.abort()};return G.onloadend=()=>R.onCompleteObservable.notifyObservers(R),V&&(G.onerror=()=>{V(new X(`Unable to read ${B.name}`,B))}),G.onload=B=>{u(B.target.result)},F&&(G.onprogress=F),Z?G.readAsArrayBuffer(B):G.readAsText(B),R},O=(B,u,F,Z,V,e,s)=>{if(B.name)return y(B,u,F,V,e?B=>{e(void 0,B)}:void 0);const Y=B;if(-1!==Y.indexOf("file:")){let B=decodeURIComponent(Y.substring(5).toLowerCase());0===B.indexOf("./")&&(B=B.substring(2));const Z=G.FilesToLoad[B];if(Z)return y(Z,u,F,V,e?B=>e(void 0,new q(B.message,B.file)):void 0)}const{match:v,type:D}=z(Y);if(v){const B={onCompleteObservable:new p.b,abort:()=>()=>{}};try{const B=V?M(Y):j(Y);u(B,void 0,D)}catch(R){e?e(void 0,R):Q.d.Error(R.message||"Failed to parse the Data URL")}return t.b.SetImmediate((()=>{B.onCompleteObservable.notifyObservers(B)})),B}return g(Y,((B,F)=>{u(B,null===F||void 0===F?void 0:F.responseURL,null===F||void 0===F?void 0:F.getResponseHeader("content-type"))}),F,Z,V,e?B=>{e(B.request,new q(B.message,B.request))}:void 0,s)},g=(B,u,F,G,R,e,s)=>{B=f.CleanUrl(B),B=f.PreprocessUrl(B);const Y=f.BaseUrl+B;let t=!1;const v={onCompleteObservable:new p.b,abort:()=>t=!0},D=()=>{let B,p=new Z.c,G=null;const D=()=>{p&&(F&&p.removeEventListener("progress",F),B&&p.removeEventListener("readystatechange",B),p.removeEventListener("loadend",L))};let L=()=>{D(),v.onCompleteObservable.notifyObservers(v),v.onCompleteObservable.clear(),F=void 0,B=null,L=null,e=void 0,s=void 0,u=void 0};v.abort=()=>{t=!0,L&&L(),p&&p.readyState!==(XMLHttpRequest.DONE||4)&&p.abort(),null!==G&&(clearTimeout(G),G=null),p=null};const q=B=>{const u=B.message||"Unknown error";e&&p?e(new W(u,p)):Q.d.Error(u)},X=Q=>{if(p){if(p.open("GET",Y),s)try{s(p)}catch(v){return void q(v)}R&&(p.responseType="arraybuffer"),F&&p.addEventListener("progress",F),L&&p.addEventListener("loadend",L),B=()=>{if(!t&&p&&p.readyState===(XMLHttpRequest.DONE||4)){if(B&&p.removeEventListener("readystatechange",B),p.status>=200&&p.status<300||0===p.status&&(!(0,V.j)()||a())){const B=R?p.response:p.responseText;if(null!==B){try{u&&u(B,p)}catch(v){q(v)}return}}const F=f.DefaultRetryStrategy;if(F){const B=F(Y,p,Q);if(-1!==B)return D(),p=new Z.c,void(G=setTimeout((()=>X(Q+1)),B))}const s=new W("Error status: "+p.status+" "+p.statusText+" - Unable to load "+Y,p);e&&e(s)}},p.addEventListener("readystatechange",B),p.send()}};X(0)};if(G&&G.enableSceneOffline){const Z=B=>{B&&B.status>400?e&&e(B):D()},V=()=>{G&&G.loadFile(f.BaseUrl+B,(B=>{!t&&u&&u(B),v.onCompleteObservable.notifyObservers(v)}),F?B=>{!t&&F&&F(B)}:void 0,Z,R)};G.open(V,Z)}else D();return v},J=B=>{const{match:u,type:F}=z(B);if(u)return F||void 0;const Z=B.lastIndexOf(".");switch(B.substring(Z+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"YR":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},a=()=>"undefined"!==typeof location&&"file:"===location.protocol,T=B=>L.test(B),z=B=>{const u=L.exec(B);if(null===u||0===u.length)return{match:!1,type:""};return{match:!0,type:u[0].replace("data:","").replace("base64,","")}};function M(B){return(0,e.b)(B.split(",")[1])}const j=B=>(0,e.e)(B.split(",")[1]);let o;D.c._FileToolsLoadImage=U,v.c.loadFile=O,s.q.loadFile=O;((B,u,F,Z,V,p,G,R,e,s)=>{o={DecodeBase64UrlToBinary:B,DecodeBase64UrlToString:u,DefaultRetryStrategy:F.DefaultRetryStrategy,BaseUrl:F.BaseUrl,CorsBehavior:F.CorsBehavior,PreprocessUrl:F.PreprocessUrl,IsBase64DataUrl:Z,IsFileURL:V,LoadFile:p,LoadImage:G,ReadFile:R,RequestFile:e,SetCorsBehavior:s},Object.defineProperty(o,"DefaultRetryStrategy",{get:function(){return F.DefaultRetryStrategy},set:function(B){F.DefaultRetryStrategy=B}}),Object.defineProperty(o,"BaseUrl",{get:function(){return F.BaseUrl},set:function(B){F.BaseUrl=B}}),Object.defineProperty(o,"PreprocessUrl",{get:function(){return F.PreprocessUrl},set:function(B){F.PreprocessUrl=B}}),Object.defineProperty(o,"CorsBehavior",{get:function(){return F.CorsBehavior},set:function(B){F.CorsBehavior=B}})})(M,j,f,T,a,O,U,y,g,C)},12955:(B,u,F)=>{function Z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(B=>{const u=16*Math.random()|0;return("x"===B?u:3&u|8).toString(16)}))}F.d(u,{d:()=>Z})},12944:(B,u,F)=>{F.d(u,{c:()=>p});var Z=F(12822),V=F(12949);class p{static Instantiate(B){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[B])return this.RegisteredExternalClasses[B];const u=(0,V.d)(B);if(u)return u;Z.d.Warn(B+" not found, you may have missed an import.");const F=B.split(".");let p=window||this;for(let Z=0,V=F.length;Z<V;Z++)p=p[F[Z]];return"function"!==typeof p?null:p}}p.RegisteredExternalClasses={}},12834:(B,u,F)=>{F.d(u,{b:()=>V});var Z=F(12816);class V{static get Now(){return(0,Z.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12867:(B,u,F)=>{F.d(u,{b:()=>G,e:()=>p,h:()=>Z,k:()=>V});const Z=B=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(B);let u="";for(let F=0;F<B.byteLength;F++)u+=String.fromCharCode(B[F]);return u},V=B=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F,Z,V,p,G,R,e,s="",Y=0;const Q=ArrayBuffer.isView(B)?new Uint8Array(B.buffer,B.byteOffset,B.byteLength):new Uint8Array(B);for(;Y<Q.length;)F=Q[Y++],Z=Y<Q.length?Q[Y++]:Number.NaN,V=Y<Q.length?Q[Y++]:Number.NaN,p=F>>2,G=(3&F)<<4|Z>>4,R=(15&Z)<<2|V>>6,e=63&V,isNaN(Z)?R=e=64:isNaN(V)&&(e=64),s+=u.charAt(p)+u.charAt(G)+u.charAt(R)+u.charAt(e);return s},p=B=>atob(B),G=B=>{const u=p(B),F=u.length,Z=new Uint8Array(new ArrayBuffer(F));for(let V=0;V<F;V++)Z[V]=u.charCodeAt(V);return Z.buffer}},12960:(B,u,F)=>{function Z(B){let u=1;do{u*=2}while(u<B);return u===B}function V(B,u,F){return B*(1-F)+u*F}function p(B){const u=G(B),F=R(B);return u-B>B-F?F:u}function G(B){return B--,B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,B|=B>>16,++B}function R(B){return B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,(B|=B>>16)-(B>>1)}function e(B,u){let F;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:F=R(B);break;case 2:F=p(B);break;default:F=G(B)}return Math.min(F,u)}F.d(u,{b:()=>R,c:()=>e,g:()=>Z,j:()=>V,n:()=>p})},12802:(B,u,F)=>{F.r(u),F.d(u,{AsyncLoop:()=>X,Tools:()=>q,className:()=>W});var Z=F(12807),V=F(12816),p=F(12822),G=F(12830),R=F(12834),e=F(12843),s=F(12852),Y=F(12855),Q=F(12861),t=F(12882),v=F(12944),D=F(12955),L=F(12960);class q{static get BaseUrl(){return Q.d.BaseUrl}static set BaseUrl(B){Q.d.BaseUrl=B}static get CleanUrl(){return Q.d.CleanUrl}static set CleanUrl(B){Q.d.CleanUrl=B}static IsAbsoluteUrl(B){return 0===B.indexOf("//")||-1!==B.indexOf("://")&&(-1!==B.indexOf(".")&&(-1!==B.indexOf("/")&&(!(B.indexOf(":")>B.indexOf("/"))&&(B.indexOf("://")<B.indexOf(".")||(0===B.indexOf("data:")||0===B.indexOf("blob:"))))))}static set ScriptBaseUrl(B){Q.d.ScriptBaseUrl=B}static get ScriptBaseUrl(){return Q.d.ScriptBaseUrl}static set CDNBaseUrl(B){q.ScriptBaseUrl=B,q.AssetBaseUrl=B}static set ScriptPreprocessUrl(B){Q.d.ScriptPreprocessUrl=B}static get ScriptPreprocessUrl(){return Q.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Q.d.DefaultRetryStrategy}static set DefaultRetryStrategy(B){Q.d.DefaultRetryStrategy=B}static get CorsBehavior(){return Q.d.CorsBehavior}static set CorsBehavior(B){Q.d.CorsBehavior=B}static get UseFallbackTexture(){return Y.b.UseFallbackTexture}static set UseFallbackTexture(B){Y.b.UseFallbackTexture=B}static get RegisteredExternalClasses(){return v.c.RegisteredExternalClasses}static set RegisteredExternalClasses(B){v.c.RegisteredExternalClasses=B}static get fallbackTexture(){return Y.b.FallbackTexture}static set fallbackTexture(B){Y.b.FallbackTexture=B}static FetchToRef(B,u,F,Z,V,p){const G=4*((Math.abs(B)*F%F|0)+(Math.abs(u)*Z%Z|0)*F);p.r=V[G]/255,p.g=V[G+1]/255,p.b=V[G+2]/255,p.a=V[G+3]/255}static Mix(B,u,F){return 0}static Instantiate(B){return v.c.Instantiate(B)}static SetImmediate(B){t.b.SetImmediate(B)}static IsExponentOfTwo(B){return!0}static FloatRound(B){return Math.fround(B)}static GetFilename(B){const u=B.lastIndexOf("/");return u<0?B:B.substring(u+1)}static GetFolderPath(B){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const F=B.lastIndexOf("/");return F<0?u?B:"":B.substring(0,F+1)}static ToDegrees(B){return 180*B/Math.PI}static ToRadians(B){return B*Math.PI/180}static SmoothAngleChange(B,u){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Z=this.ToRadians(B),V=this.ToRadians(u);return this.ToDegrees(Math.atan2((1-F)*Math.sin(V)+F*Math.sin(Z),(1-F)*Math.cos(V)+F*Math.cos(Z)))}static MakeArray(B,u){return!0===u||void 0!==B&&null!=B?Array.isArray(B)?B:[B]:null}static GetPointerPrefix(B){return(0,V.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(B,u){(0,Q.w)(B,u)}static SetReferrerPolicyBehavior(B,u){u.referrerPolicy=B}static get PreprocessUrl(){return Q.d.PreprocessUrl}static set PreprocessUrl(B){Q.d.PreprocessUrl=B}static LoadImage(B,u,F,Z,V,p){return(0,Q.n)(B,u,F,Z,V,p)}static LoadFile(B,u,F,Z,V,p){return(0,Q.j)(B,u,F,Z,V,p)}static async LoadFileAsync(B){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((F,Z)=>{(0,Q.j)(B,(B=>{F(B)}),void 0,void 0,u,((B,u)=>{Z(u)}))}))}static GetAssetUrl(B){if(!B)return"";if(q.AssetBaseUrl&&B.startsWith(q._DefaultAssetsUrl)){const u="/"===q.AssetBaseUrl[q.AssetBaseUrl.length-1]?q.AssetBaseUrl.substring(0,q.AssetBaseUrl.length-1):q.AssetBaseUrl;return B.replace(q._DefaultAssetsUrl,u)}return B}static GetBabylonScriptURL(B,u){if(!B)return"";if(q.ScriptBaseUrl&&B.startsWith(q._DefaultCdnUrl)){const u="/"===q.ScriptBaseUrl[q.ScriptBaseUrl.length-1]?q.ScriptBaseUrl.substring(0,q.ScriptBaseUrl.length-1):q.ScriptBaseUrl;B=B.replace(q._DefaultCdnUrl,u)}return B=q.ScriptPreprocessUrl(B),u&&(B=q.GetAbsoluteUrl(B)),B}static LoadBabylonScript(B,u,F,Z){B=q.GetBabylonScriptURL(B),q.LoadScript(B,u,F)}static async LoadBabylonScriptAsync(B){return B=q.GetBabylonScriptURL(B),await q.LoadScriptAsync(B)}static LoadScript(B,u,F,Z){let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(B),u&&u()}catch(e){null===F||void 0===F||F(`Unable to load script '${B}' in worker`,e)}return}if(!(0,V.j)())return void(null===F||void 0===F||F(`Cannot load script '${B}' outside of a window or a worker`));const G=document.getElementsByTagName("head")[0],R=document.createElement("script");p?(R.setAttribute("type","module"),R.innerText=B):(R.setAttribute("type","text/javascript"),R.setAttribute("src",B)),Z&&(R.id=Z),R.onload=()=>{u&&u()},R.onerror=u=>{F&&F(`Unable to load script '${B}'`,u)},G.appendChild(R)}static async LoadScriptAsync(B,u){return await new Promise(((F,Z)=>{this.LoadScript(B,(()=>{F()}),((B,u)=>{Z(u||new Error(B))}),u)}))}static ReadFileAsDataURL(B,u,F){const V=new FileReader,p={onCompleteObservable:new Z.b,abort:()=>V.abort()};return V.onloadend=()=>{p.onCompleteObservable.notifyObservers(p)},V.onload=B=>{u(B.target.result)},V.onprogress=F,V.readAsDataURL(B),p}static ReadFile(B,u,F,Z,V){return(0,Q.q)(B,u,F,Z,V)}static FileAsURL(B){const u=new Blob([B]);return window.URL.createObjectURL(u)}static Format(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return B.toFixed(u)}static DeepCopy(B,u,F,Z){G.c.DeepCopy(B,u,F,Z)}static IsEmpty(B){for(const u in B)if(Object.prototype.hasOwnProperty.call(B,u))return!1;return!0}static RegisterTopRootEvents(B,u){for(let Z=0;Z<u.length;Z++){const V=u[Z];B.addEventListener(V.name,V.handler,!1);try{window.parent&&window.parent.addEventListener(V.name,V.handler,!1)}catch(F){}}}static UnregisterTopRootEvents(B,u){for(let Z=0;Z<u.length;Z++){const V=u[Z];B.removeEventListener(V.name,V.handler);try{B.parent&&B.parent.removeEventListener(V.name,V.handler)}catch(F){}}}static async DumpFramebuffer(B,u,F,Z){throw(0,e.e)("DumpTools")}static DumpData(B,u,F,Z){throw(0,e.e)("DumpTools")}static async DumpDataAsync(B,u,F){throw(0,e.e)("DumpTools")}static _IsOffScreenCanvas(B){return void 0!==B.convertToBlob}static ToBlob(B,u){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Z=arguments.length>3?arguments[3]:void 0;q._IsOffScreenCanvas(B)||B.toBlob||(B.toBlob=function(B,u,F){setTimeout((()=>{const Z=atob(this.toDataURL(u,F).split(",")[1]),V=Z.length,p=new Uint8Array(V);for(let B=0;B<V;B++)p[B]=Z.charCodeAt(B);B(new Blob([p]))}))}),q._IsOffScreenCanvas(B)?B.convertToBlob({type:F,quality:Z}).then((B=>u(B))):B.toBlob((function(B){u(B)}),F,Z)}static DownloadBlob(B,u){if("download"in document.createElement("a")){if(!u){const B=new Date;u="screenshot_"+((B.getFullYear()+"-"+(B.getMonth()+1)).slice(2)+"-"+B.getDate()+"_"+B.getHours()+"-"+("0"+B.getMinutes()).slice(-2))+".png"}q.Download(B,u)}else if(B&&"undefined"!==typeof URL){const u=URL.createObjectURL(B),F=window.open("");if(!F)return;const Z=F.document.createElement("img");Z.onload=function(){URL.revokeObjectURL(u)},Z.src=u,F.document.body.appendChild(Z)}}static EncodeScreenshotCanvasData(B,u){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Z=arguments.length>3?arguments[3]:void 0,V=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Z&&u){if(u){if(q._IsOffScreenCanvas(B))return void B.convertToBlob({type:F,quality:V}).then((B=>{const F=new FileReader;F.readAsDataURL(B),F.onloadend=()=>{const B=F.result;u(B)}}));const Z=B.toDataURL(F,V);u(Z)}}else this.ToBlob(B,(function(B){B&&q.DownloadBlob(B,Z),u&&u("")}),F,V)}static Download(B,u){if("undefined"===typeof URL)return;const F=window.URL.createObjectURL(B),Z=document.createElement("a");document.body.appendChild(Z),Z.style.display="none",Z.href=F,Z.download=u,Z.addEventListener("click",(()=>{Z.parentElement&&Z.parentElement.removeChild(Z)})),Z.click(),window.URL.revokeObjectURL(F)}static BackCompatCameraNoPreventDefault(B){return"boolean"===typeof B[0]?B[0]:"boolean"===typeof B[1]&&B[1]}static CreateScreenshot(B,u,F,Z){throw(0,e.e)("ScreenshotTools")}static async CreateScreenshotAsync(B,u,F){throw(0,e.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(B,u,F,Z){throw(0,e.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(B,u,F){throw(0,e.e)("ScreenshotTools")}static RandomId(){return(0,D.d)()}static IsBase64(B){return(0,Q.g)(B)}static DecodeBase64(B){return(0,Q.c)(B)}static get errorsCount(){return p.d.errorsCount}static Log(B){p.d.Log(B)}static Warn(B){p.d.Warn(B)}static Error(B){p.d.Error(B)}static get LogCache(){return p.d.LogCache}static ClearLogCache(){p.d.ClearLogCache()}static set LogLevels(B){p.d.LogLevels=B}static set PerformanceLogLevel(B){return(B&q.PerformanceUserMarkLogLevel)===q.PerformanceUserMarkLogLevel?(q.StartPerformanceCounter=q._StartUserMark,void(q.EndPerformanceCounter=q._EndUserMark)):(B&q.PerformanceConsoleLogLevel)===q.PerformanceConsoleLogLevel?(q.StartPerformanceCounter=q._StartPerformanceConsole,void(q.EndPerformanceCounter=q._EndPerformanceConsole)):(q.StartPerformanceCounter=q._StartPerformanceCounterDisabled,void(q.EndPerformanceCounter=q._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(B,u){}static _EndPerformanceCounterDisabled(B,u){}static _StartUserMark(B){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!q._Performance){if(!(0,V.j)())return;q._Performance=window.performance}u&&q._Performance.mark&&q._Performance.mark(B+"-Begin")}static _EndUserMark(B){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&q._Performance.mark&&(q._Performance.mark(B+"-End"),q._Performance.measure(B,B+"-Begin",B+"-End"))}static _StartPerformanceConsole(B){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(q._StartUserMark(B,u),console.time&&console.time(B))}static _EndPerformanceConsole(B){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u&&(q._EndUserMark(B,u),console.timeEnd(B))}static get Now(){return R.b.Now}static GetClassName(B){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null;if(!u&&B.getClassName)F=B.getClassName();else{if(B instanceof Object){F=(u?B:Object.getPrototypeOf(B)).constructor.__bjsclassName__}F||(F=typeof B)}return F}static First(B,u){for(const F of B)if(u(F))return F;return null}static getFullClassName(B){let u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null,Z=null;if(!u&&B.getClassName)F=B.getClassName();else{if(B instanceof Object){const V=u?B:Object.getPrototypeOf(B);F=V.constructor.__bjsclassName__,Z=V.constructor.__bjsmoduleName__}F||(F=typeof B)}return F?(null!=Z?Z+".":"")+F:null}static async DelayAsync(B){await new Promise((u=>{setTimeout((()=>{u()}),B)}))}static IsSafari(){return!!(0,V.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function W(B,u){return F=>{F.__bjsclassName__=B,F.__bjsmoduleName__=null!=u?u:null}}q.AssetBaseUrl="",q.UseCustomRequestHeaders=!1,q.CustomRequestHeaders=s.c.CustomRequestHeaders,q.GetDOMTextContent=V.c,q._DefaultCdnUrl="https://cdn.babylonjs.com",q._DefaultAssetsUrl="https://assets.babylonjs.com/core",q.GetAbsoluteUrl="object"===typeof document?B=>{const u=document.createElement("a");return u.href=B,u.href}:"function"===typeof URL&&"object"===typeof location?B=>new URL(B,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},q.NoneLogLevel=p.d.NoneLogLevel,q.MessageLogLevel=p.d.MessageLogLevel,q.WarningLogLevel=p.d.WarningLogLevel,q.ErrorLogLevel=p.d.ErrorLogLevel,q.AllLogLevel=p.d.AllLogLevel,q.IsWindowObjectExist=V.j,q.PerformanceNoneLogLevel=0,q.PerformanceUserMarkLogLevel=1,q.PerformanceConsoleLogLevel=2,q.StartPerformanceCounter=q._StartPerformanceCounterDisabled,q.EndPerformanceCounter=q._EndPerformanceCounterDisabled;class X{constructor(B,u,F){let Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=B,this.index=Z-1,this._done=!1,this._fn=u,this._successCallback=F}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(B,u,F){const Z=new X(B,u,F,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Z.executeNext(),Z}static SyncAsyncForLoop(B,u,F,Z,V){let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return X.Run(Math.ceil(B/u),(Z=>{V&&V()?Z.breakLoop():setTimeout((()=>{for(let p=0;p<u;++p){const G=Z.index*u+p;if(G>=B)break;if(F(G),V&&V()){Z.breakLoop();break}}Z.executeNext()}),p)}),Z)}}q.Mix=L.j,q.IsExponentOfTwo=L.g,Y.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12949:(B,u,F)=>{F.d(u,{d:()=>p,f:()=>V});const Z={};function V(B,u){Z[B]=u}function p(B){return Z[B]}},12852:(B,u,F)=>{F.d(u,{c:()=>Z});class Z{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Z.CustomRequestHeaders).length>0||Z.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const B in Z.CustomRequestHeaders){const u=Z.CustomRequestHeaders[B];u&&this._xhr.setRequestHeader(B,u)}}_shouldSkipRequestModifications(B){return Z.SkipRequestModificationForBabylonCDN&&(B.includes("preview.babylonjs.com")||B.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(B){this._xhr.onprogress=B}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(B){this._xhr.responseType=B}get timeout(){return this._xhr.timeout}set timeout(B){this._xhr.timeout=B}addEventListener(B,u,F){this._xhr.addEventListener(B,u,F)}removeEventListener(B,u,F){this._xhr.removeEventListener(B,u,F)}abort(){this._xhr.abort()}send(B){Z.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(B)}open(B,u){for(const F of Z.CustomRequestModifiers){if(this._shouldSkipRequestModifications(u))return;u=F(this._xhr,u)||u}u=(u=u.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=u,this._xhr.open(B,u,!0)}setRequestHeader(B,u){this._xhr.setRequestHeader(B,u)}getResponseHeader(B){return this._xhr.getResponseHeader(B)}}Z.CustomRequestHeaders={},Z.CustomRequestModifiers=new Array,Z.SkipRequestModificationForBabylonCDN=!0}}]);