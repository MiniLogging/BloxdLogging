"use strict";(self.kdlk57exiqh=self.kdlk57exiqh||[]).push([[8],{12150:(i,x,e)=>{e.d(x,{c:()=>t});var j=e(12108),E=e(12072),a=e(12158),Y=e(12173),J=e(12089);class u{constructor(){let i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,i&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(i){this._zOffset!==i&&(this._zOffset=i,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(i){this._zOffsetUnits!==i&&(this._zOffsetUnits=i,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(i){this._cullFace!==i&&(this._cullFace=i,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(i){this._cull!==i&&(this._cull=i,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(i){this._depthFunc!==i&&(this._depthFunc=i,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(i){this._depthMask!==i&&(this._depthMask=i,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(i){this._depthTest!==i&&(this._depthTest=i,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(i){this._frontFace!==i&&(this._frontFace=i,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(i){this.isDirty&&(this._isCullDirty&&(this.cull?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(i.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(i.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(i.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(this.zOffset,this.zOffsetUnits)):i.disable(i.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(i.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class b{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(i){this._func!==i&&(this._func=i,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(i){this._funcRef!==i&&(this._funcRef=i,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(i){this._funcMask!==i&&(this._funcMask=i,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(i){this._opStencilFail!==i&&(this._opStencilFail=i,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(i){this._opDepthFail!==i&&(this._opDepthFail=i,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(i){this._opStencilDepthPass!==i&&(this._opStencilDepthPass=i,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(i){this._mask!==i&&(this._mask=i,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(i){this._enabled!==i&&(this._enabled=i,this._isStencilTestDirty=!0)}constructor(){let i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,i&&this.reset()}reset(){var i;this.stencilMaterial=void 0,null===(i=this.stencilGlobal)||void 0===i||i.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(i){var x;if(!i)return;const e=!this.useStencilGlobalOnly&&!(null===(x=this.stencilMaterial)||void 0===x||!x.enabled);this.enabled=e?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=e?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=e?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=e?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=e?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=e?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=e?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=e?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(i.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(i.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(i.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class g{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=g.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=g.KEEP,this.opDepthFail=g.KEEP,this.opStencilDepthPass=g.REPLACE}get stencilFunc(){return this.func}set stencilFunc(i){this.func=i}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(i){this.funcRef=i}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(i){this.funcMask=i}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(i){this.opStencilFail=i}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(i){this.opDepthFail=i}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(i){this.opStencilDepthPass=i}get stencilMask(){return this.mask}set stencilMask(i){this.mask=i}get stencilTest(){return this.enabled}set stencilTest(i){this.enabled=i}}g.ALWAYS=519,g.KEEP=7680,g.REPLACE=7681;class A{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(i){this._alphaBlend!==i&&(this._alphaBlend=i,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(i,x,e,j){this._blendConstants[0]===i&&this._blendConstants[1]===x&&this._blendConstants[2]===e&&this._blendConstants[3]===j||(this._blendConstants[0]=i,this._blendConstants[1]=x,this._blendConstants[2]=e,this._blendConstants[3]=j,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(i,x,e,j){this._blendFunctionParameters[0]===i&&this._blendFunctionParameters[1]===x&&this._blendFunctionParameters[2]===e&&this._blendFunctionParameters[3]===j||(this._blendFunctionParameters[0]=i,this._blendFunctionParameters[1]=x,this._blendFunctionParameters[2]=e,this._blendFunctionParameters[3]=j,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(i,x){this._blendEquationParameters[0]===i&&this._blendEquationParameters[1]===x||(this._blendEquationParameters[0]=i,this._blendEquationParameters[1]=x,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(i){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?i.enable(i.BLEND):i.disable(i.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(i.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(i.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(i.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var K=e(12092),L=e(12181),o=e(12069),M=e(12065),z=e(12135),T=e(12194);function Q(i,x){if((0,o.i)()){const{requestAnimationFrame:e}=x||window;if("function"===typeof e)return e(i)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(i);return setTimeout(i,16)}class t{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(i){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get ue(){return this._useReverseDepthBuffer}set ue(i){i!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=i,this._depthCullingState.depthFunc=i?518:515)}setColorWrite(i){i!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=i)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(i){if(i)return this.isNDCHalfZRange?i.IS_NDC_HALF_ZRANGE="":delete i.IS_NDC_HALF_ZRANGE,this.ue?i.USE_REVERSE_DEPTHBUFFER="":delete i.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?i.USE_EXACT_SRGB_CONVERSIONS="":delete i.USE_EXACT_SRGB_CONVERSIONS);{let i="";return this.isNDCHalfZRange&&(i+="#define IS_NDC_HALF_ZRANGE"),this.ue&&(i&&(i+="\n"),i+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(i&&(i+="\n"),i+="#define USE_EXACT_SRGB_CONVERSIONS"),i}}_rebuildInternalTextures(){const i=this._internalTexturesCache.slice();for(const x of i)x._rebuild()}_rebuildRenderTargetWrappers(){const i=this._renderTargetWrapperCache.slice();for(const x of i)x._rebuild()}_rebuildEffects(){for(const i in this._compiledEffects){const x=this._compiledEffects[i];x._pipelineContext=null,x._prepareEffect()}a.Effect.ResetCache()}_rebuildGraphicsResources(){var i;this.wipeCaches(!0),this._rebuildEffects(),null===(i=this._rebuildComputeEffects)||void 0===i||i.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){E.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(i){setTimeout((()=>{this._clearEmptyResources();const x=this._depthCullingState.depthTest,e=this._depthCullingState.depthFunc,j=this._depthCullingState.depthMask,E=this._stencilState.stencilTest;i(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=x,this._depthCullingState.depthFunc=e,this._depthCullingState.depthMask=j,this._stencilState.stencilTest=E,this._flagContextRestored()}),0)}get M(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(i){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(i){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const i=new Uint8Array(4),x=[i,i,i,i,i,i];this._emptyCubeTexture=this.createRawCubeTexture(x,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(i){if(!i)return this._activeRenderLoops.length=0,void this._cancelFrame();const x=this._activeRenderLoops.indexOf(i);x>=0&&(this._activeRenderLoops.splice(x,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const i=this._frameHandler;if(this._frameHandler=0,(0,o.i)()){const{cancelAnimationFrame:x}=this.getHostWindow()||window;if("function"===typeof x)return x(i)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(i);return clearTimeout(i)}}Le(){this.onBeginFrameObservable.notifyObservers(this)}ze(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(i){this._maxFPS=i,void 0!==i&&(this._minFrameTime=i<=0?Number.MAX_VALUE:1e3/i)}_isOverFrameTime(i){if(!i||void 0===this._maxFPS)return!1;const x=i-this._lastFrameTime;return this._lastFrameTime=i,this._renderAccumulator+=x,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(i){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(i)){let i=!0;(this.M||!this.renderEvenInBackground&&this._windowIsBackground)&&(i=!1),i&&(this.Le(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ze())}}_renderLoop(i){this._processFrame(i),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let i=0;i<this._activeRenderLoops.length;i++){(0,this._activeRenderLoops[i])()}}_renderViews(){return!1}_queueNewFrame(i,x){return Q(i,x)}runRenderLoop(i){-1===this._activeRenderLoops.indexOf(i)&&(this._activeRenderLoops.push(i),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(i){this._depthCullingState.depthTest=i}setZOffset(i){this._depthCullingState.zOffset=this.ue?-i:i}getZOffset(){const i=this._depthCullingState.zOffset;return this.ue?-i:i}setZOffsetUnits(i){this._depthCullingState.zOffsetUnits=this.ue?-i:i}getZOffsetUnits(){const i=this._depthCullingState.zOffsetUnits;return this.ue?-i:i}getHostWindow(){return(0,o.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(i){this._compatibilityMode=!0}_rebuildTextures(){for(const i of this.scenes)i._rebuildTextures();for(const i of this._virtualScenes)i._rebuildTextures()}_releaseRenderTargetWrapper(i){const x=this._renderTargetWrapperCache.indexOf(i);-1!==x&&this._renderTargetWrapperCache.splice(x,1)}get currentViewport(){return this._cachedViewport}setViewport(i,x,e){const j=x||this.getRenderWidth(),E=e||this.getRenderHeight(),a=i.x||0,Y=i.y||0;this._cachedViewport=i,this._viewport(a*j,Y*E,j*i.width,E*i.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(i){return new Path2D(i)}get description(){let i=this.name+this.version;return this._caps.parallelShaderCompile&&(i+=" - Parallel shader compilation"),i}_createTextureBase(i,x,e,a){let Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7?arguments[7]:void 0,g=arguments.length>8?arguments[8]:void 0,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,K=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,o=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,M=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,z=arguments.length>13?arguments[13]:void 0,Q=arguments.length>14?arguments[14]:void 0,V=arguments.length>15?arguments[15]:void 0;const S="data:"===(i=i||"").substring(0,5),f="blob:"===i.substring(0,5),w=S&&-1!==i.indexOf(";base64,"),O=K||new L.b(this,1);O!==K&&(O.label=i.substring(0,60));const l=i;!this._transformTextureUrl||w||K||A||(i=this._transformTextureUrl(i)),l!==i&&(O._originalUrl=l);const Z=i.lastIndexOf(".");let B=M||(Z>-1?i.substring(Z).toLowerCase():"");B.indexOf("?")>-1&&(B=B.split("?")[0]);const k=(0,T.e)(B,z);a&&a.addPendingData(O),O.url=i,O.generateMipMaps=!x,O.samplingMode=Y,O.invertY=e,O._useSRGBBuffer=this._getUseSRGBBuffer(!!V,x),this._doNotHandleContextLost||(O._buffer=A);let N=null;J&&!K&&(N=O.onLoadedObservable.add(J)),K||this._internalTexturesCache.push(O);const mi=(e,K)=>{a&&a.removePendingData(O),i===l?(N&&O.onLoadedObservable.remove(N),j.e.UseFallbackTexture&&i!==j.e.FallbackTexture&&this._createTextureBase(j.e.FallbackTexture,x,O.invertY,a,Y,null,u,b,g,A,O),e=(e||"Unknown error")+(j.e.UseFallbackTexture?" - Fallback texture was used":""),O.onErrorObservable.notifyObservers({message:e,exception:K}),u&&u(e,K)):(E.c.Warn(`Failed to load ${i}, falling back to ${l}`),this._createTextureBase(l,x,O.invertY,a,Y,J,u,b,g,A,O,o,M,z,Q,V))};if(k){const x=async i=>{(await k).loadData(i,O,((i,x,e,j,E,J)=>{J?mi("TextureLoader failed to load data"):b(O,B,a,{width:i,height:x},O.invertY,!e,j,(()=>(E(),!1)),Y)}),Q)};A?A instanceof ArrayBuffer?x(new Uint8Array(A)):ArrayBuffer.isView(A)?x(A):u&&u("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(i,(i=>{x(new Uint8Array(i))}),void 0,a?a.offlineProvider:void 0,!0,((i,x)=>{mi("Unable to load "+(i&&i.responseURL,x))}))}else{const e=i=>{f&&!this._doNotHandleContextLost&&(O._buffer=i),b(O,B,a,i,O.invertY,x,!1,g,Y)};!S||w?A&&("string"===typeof A.decoding||A.close)?e(A):t._FileToolsLoadImage(i||"",e,mi,a?a.offlineProvider:null,z,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof A||A instanceof ArrayBuffer||ArrayBuffer.isView(A)||A instanceof Blob?t._FileToolsLoadImage(A,e,mi,a?a.offlineProvider:null,z,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):A&&e(A)}return O}_rebuildBuffers(){for(const i of this._uniformBuffers)i._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,o.c)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const i in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,i)&&(this._boundTexturesCache[i]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(i){this._name=i}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(i){this._hardwareScalingLevel=i,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(i){this._doNotHandleContextLost=i}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(i,x,e){var E,a;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new u,this._stencilStateComposer=new b,this._stencilState=new g,this._alphaState=new A,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new M.b,this.onCanvasFocusObservable=new M.b,this.onNewSceneAddedObservable=new M.b,this.onResizeObservable=new M.b,this.onCanvasPointerOutObservable=new M.b,this.onEffectErrorObservable=new M.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new M.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=i=>this._renderLoop(i),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new M.b,this.onAfterShaderCompilationObservable=new M.b,this.onBeginFrameObservable=new M.b,this.onEndFrameObservable=new M.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new M.b,this.onContextRestoredObservable=new M.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.te=new M.b,this.onReleaseEffectsObservable=new M.b,j.e.Instances.push(this),this.startTime=J.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Y.e.SetMatrixPrecision(!!x.useHighPrecisionMatrix),(0,o.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=e??!1,x.antialias=i??x.antialias,x.deterministicLockstep=x.deterministicLockstep??!1,x.lockstepMaxSteps=x.lockstepMaxSteps??4,x.timeStep=x.timeStep??1/60,x.Ve=x.Ve??!0,this._audioContext=(null===(E=x.audioEngineOptions)||void 0===E?void 0:E.audioContext)??null,this._audioDestination=(null===(a=x.audioEngineOptions)||void 0===a?void 0:a.audioDestination)??null,this.premultipliedAlpha=x.premultipliedAlpha??!0,this._doNotHandleContextLost=!!x.doNotHandleContextLost,this._isStencilEnable=!!x.Ve,this.useExactSrgbConversions=x.useExactSrgbConversions??!1;const K=(0,o.i)()&&window.devicePixelRatio||1,L=x.limitDeviceRatio||K;e=e||x.adaptToDeviceRatio||!1,this._hardwareScalingLevel=e?1/Math.min(L,K):1,this._lastDevicePixelRatio=K,this._creationOptions=x}resize(){let i,x,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const i=(0,o.i)()&&window.devicePixelRatio||1,x=this._lastDevicePixelRatio/i;this._lastDevicePixelRatio=i,this._hardwareScalingLevel*=x}if((0,o.i)()&&(0,o.c)())if(this._renderingCanvas){var j,E;const e=null===(j=(E=this._renderingCanvas).getBoundingClientRect)||void 0===j?void 0:j.call(E);i=this._renderingCanvas.clientWidth||(null===e||void 0===e?void 0:e.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,x=this._renderingCanvas.clientHeight||(null===e||void 0===e?void 0:e.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else i=window.innerWidth,x=window.innerHeight;else i=this._renderingCanvas?this._renderingCanvas.width:100,x=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(i/this._hardwareScalingLevel,x/this._hardwareScalingLevel,e)}setSize(i,x){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(i|=0,x|=0,!e&&this._renderingCanvas.width===i&&this._renderingCanvas.height===x)return!1;if(this._renderingCanvas.width=i,this._renderingCanvas.height=x,this.scenes){for(let i=0;i<this.scenes.length;i++){const x=this.scenes[i];for(let i=0;i<x.cameras.length;i++){x.cameras[i]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(i,x,e,j,E,a,Y,J,u,b,g){throw(0,K.e)("engine.rawTexture")}createRawCubeTexture(i,x,e,j,E,a,Y,J){throw(0,K.e)("engine.rawTexture")}createRawTexture3D(i,x,e,j,E,a,Y,J,u,b,g){throw(0,K.e)("engine.rawTexture")}createRawTexture2DArray(i,x,e,j,E,a,Y,J,u,b,g){throw(0,K.e)("engine.rawTexture")}_sharedInit(i){this._renderingCanvas=i}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const i=navigator.userAgent;this.hostInformation.isMobile=-1!==i.indexOf("Mobile")||-1!==i.indexOf("Mac")&&(0,o.c)()&&"ontouchend"in document},this._checkForMobile(),(0,o.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(i){return document.createElement("video")}_reportDrawCall(){var i;let x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(i=this._drawCalls)||void 0===i||i.addCount(x,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(i,x){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(i,x){return createImageBitmap(i,x)}resizeImageBitmap(i,x,e){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(i){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(i,x){if("undefined"===typeof document)return new OffscreenCanvas(i,x);const e=document.createElement("canvas");return e.width=i,e.height=x,e}createCanvas(i,x){return t._CreateCanvas(i,x)}static _FileToolsLoadImage(i,x,e,j,E,a,Y){throw(0,K.e)("FileTools")}_loadFile(i,x,e,j,E,a){const Y=(0,z.i)(i,x,e,j,E,a);return this._activeRequests.push(Y),Y.onCompleteObservable.add((()=>{const i=this._activeRequests.indexOf(Y);-1!==i&&this._activeRequests.splice(i,1)})),Y}static _FileToolsLoadFile(i,x,e,j,E,a){if(z.e.loadFile)return z.e.loadFile(i,x,e,j,E,a);throw(0,K.e)("FileTools")}dispose(){var i;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(i=this.releaseComputeEffects)||void 0===i||i.call(this),a.Effect.ResetCache();for(const e of this._activeRequests)e.abort();this._boundRenderFunction=null,this.te.notifyObservers(this),this.te.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,o.i)()&&window.removeEventListener("resize",this._checkForMobile);const x=j.e.Instances.indexOf(this);x>=0&&j.e.Instances.splice(x,1),j.e.Instances.length||(j.e.OnEnginesDisposedObservable.notifyObservers(this),j.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(i){throw(0,K.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(i,x){for(let e=0;e<j.e.Instances.length;e++){const E=j.e.Instances[e];for(let e=0;e<E.scenes.length;e++)E.scenes[e].markAllMaterialsAsDirty(i,x)}}}t._RenderPassIdCounter=0,t._RescalePostProcessFactory=null,t.CollisionsEpsilon=.001,t.QueueNewFrame=Q},12108:(i,x,e)=>{e.d(x,{e:()=>E});var j=e(12065);class E{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}E.Instances=[],E.OnEnginesDisposedObservable=new j.b,E._LastCreatedScene=null,E.UseFallbackTexture=!0,E.FallbackTexture=""},12173:(i,x,e)=>{e.d(x,{e:()=>j});class j{static SetMatrixPrecision(i){if(j.MatrixTrackPrecisionChange=!1,i&&!j.MatrixUse64Bits&&j.MatrixTrackedMatrices)for(let x=0;x<j.MatrixTrackedMatrices.length;++x){const i=j.MatrixTrackedMatrices[x],e=i.Ze;i.Ze=new Array(16);for(let x=0;x<16;++x)i.Ze[x]=e[x]}j.MatrixUse64Bits=i,j.MatrixCurrentType=j.MatrixUse64Bits?Array:Float32Array,j.MatrixTrackedMatrices=null}}j.MatrixUse64Bits=!1,j.MatrixTrackPrecisionChange=!0,j.MatrixCurrentType=Float32Array,j.MatrixTrackedMatrices=[]},12194:(i,x,e)=>{e.d(x,{e:()=>Y});var j=e(12072);const E=new Map;function a(i,x){(function(i){return E.delete(i)})(i)&&j.c.Warn(`Extension with the name '${i}' already exists`),E.set(i,x)}function Y(i,x){"image/ktx"!==x&&"image/ktx2"!==x||(i=".ktx"),E.has(i)||(i.endsWith(".ies")&&a(".ies",(async()=>await e.e(15).then(e.bind(e,14593)).then((i=>new i._IESTextureLoader)))),i.endsWith(".dds")&&a(".dds",(async()=>await Promise.all([e.e(14),e.e(17),e.e(13),e.e(19),e.e(18),e.e(28)]).then(e.bind(e,14597)).then((i=>new i._DDSTextureLoader)))),i.endsWith(".basis")&&a(".basis",(async()=>await Promise.all([e.e(14),e.e(17),e.e(13),e.e(47)]).then(e.bind(e,14605)).then((i=>new i._BasisTextureLoader)))),i.endsWith(".env")&&a(".env",(async()=>await Promise.all([e.e(14),e.e(17),e.e(13),e.e(19),e.e(18),e.e(23),e.e(21),e.e(45),e.e(48)]).then(e.bind(e,14613)).then((i=>new i._ENVTextureLoader)))),i.endsWith(".hdr")&&a(".hdr",(async()=>await Promise.all([e.e(14),e.e(49)]).then(e.bind(e,14621)).then((i=>new i._HDRTextureLoader)))),(i.endsWith(".ktx")||i.endsWith(".ktx2"))&&(a(".ktx",(async()=>await e.e(30).then(e.bind(e,14628)).then((i=>new i._KTXTextureLoader)))),a(".ktx2",(async()=>await e.e(30).then(e.bind(e,14628)).then((i=>new i._KTXTextureLoader))))),i.endsWith(".tga")&&a(".tga",(async()=>await e.e(50).then(e.bind(e,14636)).then((i=>new i._TGATextureLoader)))),i.endsWith(".exr")&&a(".exr",(async()=>await e.e(16).then(e.bind(e,14643)).then((i=>new i._ExrTextureLoader)))));const j=E.get(i);return j?Promise.resolve(j(x)):null}},12181:(i,x,e)=>{e.d(x,{b:()=>Y});var j,E=e(12065),a=e(12187);!function(i){i[i.Unknown=0]="Unknown",i[i.Url=1]="Url",i[i.Temp=2]="Temp",i[i.Raw=3]="Raw",i[i.Dynamic=4]="Dynamic",i[i.RenderTarget=5]="RenderTarget",i[i.MultiRenderTarget=6]="MultiRenderTarget",i[i.Cube=7]="Cube",i[i.CubeRaw=8]="CubeRaw",i[i.CubePrefiltered=9]="CubePrefiltered",i[i.Raw3D=10]="Raw3D",i[i.Raw2DArray=11]="Raw2DArray",i[i.DepthStencil=12]="DepthStencil",i[i.CubeRawRGBD=13]="CubeRawRGBD",i[i.Depth=14]="Depth"}(j||(j={}));class Y extends a.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(i){this.generateMipMaps=i}get uniqueId(){return this._uniqueId}_setUniqueId(i){this._uniqueId=i}getEngine(){return this._engine}get source(){return this._source}constructor(i,x){let e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new E.b,this.onErrorObservable=new E.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=i,this._source=x,this._uniqueId=Y._Counter++,e||(this._hardwareTexture=i._createHardwareTexture())}incrementReferences(){this._references++}updateSize(i,x){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,i,x,e),this.width=i,this.height=x,this.depth=e,this.baseWidth=i,this.baseHeight=x,this.baseDepth=e,this._size=i*x*e}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const i=this.onRebuildCallback(this),x=x=>{x._swapAndDie(this,!1),this.isReady=i.isReady};return void(i.isAsync?i.proxy.then(x):x(i.proxy))}let i;switch(this.source){case 2:case 12:case 14:break;case 1:return void(i=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(i=>{i._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:i=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),i._swapAndDie(this,!1),this.isReady=!0;break;case 10:i=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),i._swapAndDie(this,!1),this.isReady=!0;break;case 11:i=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),i._swapAndDie(this,!1),this.isReady=!0;break;case 4:i=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),i._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(i=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{i._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:i=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),i._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return i=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(i=>{i&&i._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(i._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(i){var x;let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(x=this._hardwareTexture)||void 0===x||x.setUsage(i._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),i._hardwareTexture=this._hardwareTexture,e&&(i._isRGBD=this._isRGBD),this._lodTextureHigh&&(i._lodTextureHigh&&i._lodTextureHigh.dispose(),i._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(i._lodTextureMid&&i._lodTextureMid.dispose(),i._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(i._lodTextureLow&&i._lodTextureLow.dispose(),i._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(i._irradianceTexture&&i._irradianceTexture.dispose(),i._irradianceTexture=this._irradianceTexture);const j=this._engine.getLoadedTexturesCache();let E=j.indexOf(this);-1!==E&&j.splice(E,1),E=j.indexOf(i),-1===E&&j.push(i)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Y._Counter=0},12187:(i,x,e)=>{e.d(x,{b:()=>j});class j{get wrapU(){return this._cachedWrapU}set wrapU(i){this._cachedWrapU=i}get wrapV(){return this._cachedWrapV}set wrapV(i){this._cachedWrapV=i}get wrapR(){return this._cachedWrapR}set wrapR(i){this._cachedWrapR=i}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(i){this._cachedAnisotropicFilteringLevel=i}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(i){this._comparisonFunction=i}get useMipMaps(){return this._useMipMaps}set useMipMaps(i){this._useMipMaps=i}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=i,this._cachedWrapV=x,this._cachedWrapR=e,this._cachedAnisotropicFilteringLevel=j,this.samplingMode=E,this._comparisonFunction=a,this}compareSampler(i){return this._cachedWrapU===i._cachedWrapU&&this._cachedWrapV===i._cachedWrapV&&this._cachedWrapR===i._cachedWrapR&&this._cachedAnisotropicFilteringLevel===i._cachedAnisotropicFilteringLevel&&this.samplingMode===i.samplingMode&&this._comparisonFunction===i._comparisonFunction&&this._useMipMaps===i._useMipMaps}}},12080:(i,x,e)=>{e.d(x,{d:()=>a});var j=e(12072);const E=(i,x,e)=>i?i.getClassName&&"Mesh"===i.getClassName()?null:!i.getClassName||"SubMesh"!==i.getClassName()&&"PhysicsBody"!==i.getClassName()?i.clone?i.clone():Array.isArray(i)?i.slice():e&&"object"===typeof i?{...i}:null:i.clone(x):null;class a{static DeepCopy(i,x,e,a){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const J=function(i){const x=[];do{const e=Object.getOwnPropertyNames(i);for(const i of e)-1===x.indexOf(i)&&x.push(i)}while(i=Object.getPrototypeOf(i));return x}(i);for(const b of J){if("_"===b[0]&&(!a||-1===a.indexOf(b)))continue;if(b.endsWith("Observable"))continue;if(e&&-1!==e.indexOf(b))continue;const J=i[b],g=typeof J;if("function"!==g)try{if("object"===g)if(J instanceof Uint8Array)x[b]=Uint8Array.from(J);else if(J instanceof Array){if(x[b]=[],J.length>0)if("object"==typeof J[0])for(let i=0;i<J.length;i++){const e=E(J[i],x,Y);-1===x[b].indexOf(e)&&x[b].push(e)}else x[b]=J.slice(0)}else x[b]=E(J,x,Y);else x[b]=J}catch(u){j.c.Warn(u.message)}}}}},12120:(i,x,e)=>{e.d(x,{c:()=>j,g:()=>E,i:()=>a});class j extends Error{}j._setPrototypeOf=Object.setPrototypeOf||((i,x)=>(i.__proto__=x,i));const E={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class a extends j{constructor(i,x,e){super(i),this.errorCode=x,this.innerError=e,this.name="RuntimeError",j._setPrototypeOf(this,a.prototype)}}},12115:(i,x,e)=>{e.d(x,{d:()=>mi,h:()=>t,j:()=>Z,l:()=>k,p:()=>O,o:()=>z,r:()=>f,t:()=>w,w:()=>l,y:()=>V});var j=e(12101),E=e(12069),a=e(12065);class Y{}Y.FilesToLoad={};var J=e(12120),u=e(12128),b=e(12132),g=e(12108),A=e(12072),K=e(12142),L=e(12135),o=e(12150);const M=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class z extends J.i{constructor(i,x){super(i,J.g.LoadFileError),this.name="LoadFileError",J.c._setPrototypeOf(this,z.prototype),x instanceof j.e?this.request=x:this.file=x}}class T extends J.i{constructor(i,x){super(i,J.g.RequestFileError),this.request=x,this.name="RequestFileError",J.c._setPrototypeOf(this,T.prototype)}}class Q extends J.i{constructor(i,x){super(i,J.g.ReadFileError),this.file=x,this.name="ReadFileError",J.c._setPrototypeOf(this,Q.prototype)}}const t={DefaultRetryStrategy:class{static ExponentialBackoff(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(e,j,E)=>0!==j.status||E>=i||-1!==e.indexOf("file:")?-1:Math.pow(2,E)*x}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:i=>i,ScriptBaseUrl:"",ScriptPreprocessUrl:i=>i,CleanUrl:i=>i=i.replace(/#/gm,"%23")},V=(i,x)=>{if((!i||0!==i.indexOf("data:"))&&t.CorsBehavior)if("string"===typeof t.CorsBehavior||t.CorsBehavior instanceof String)x.crossOrigin=t.CorsBehavior;else{const e=t.CorsBehavior(i);e&&(x.crossOrigin=e)}},S={getRequiredSize:null},f=function(i,x,e,E){let a,J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",b=arguments.length>5?arguments[5]:void 0,A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:g.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===A||void 0===A||!A._features.forceBitmapOverHTMLImageElement))return e("LoadImage is only supported in web or BabylonNative environments."),null;let K=!1;i instanceof ArrayBuffer||ArrayBuffer.isView(i)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(a=URL.createObjectURL(new Blob([i],{type:J})),K=!0):a=`data:${J};base64,`+(0,u.j)(i):i instanceof Blob?(a=URL.createObjectURL(i),K=!0):(a=t.CleanUrl(i),a=t.PreprocessUrl(a));const L=x=>{if(e){const j=a||i.toString();e(`Error while trying to load image: ${0===j.indexOf("http")||j.length<=128?j:j.slice(0,128)+"..."}`,x)}};if(null!==A&&void 0!==A&&A._features.forceBitmapOverHTMLImageElement)return O(a,(j=>{A.createImageBitmap(new Blob([j],{type:J}),{premultiplyAlpha:"none",...b}).then((i=>{x(i),K&&URL.revokeObjectURL(a)})).catch((x=>{e&&e("Error while trying to load image: "+i,x)}))}),void 0,E||void 0,!0,((i,x)=>{L(x)})),null;const o=new Image;if(S.getRequiredSize){const x=S.getRequiredSize(i);x.width&&(o.width=x.width),x.height&&(o.height=x.height)}V(a,o);const M=[],z=()=>{for(const i of M)i.target.removeEventListener(i.name,i.handler);M.length=0};M.push({target:o,name:"load",handler:()=>{z(),x(o),K&&o.src&&URL.revokeObjectURL(o.src)}}),M.push({target:o,name:"error",handler:i=>{z(),L(i),K&&o.src&&URL.revokeObjectURL(o.src)}}),M.push({target:document,name:"securitypolicyviolation",handler:i=>{if(i.blockedURI!==o.src||"ke"===i.disposition)return;z();const x=new Error(`CSP violation of policy ${i.effectiveDirective} ${i.blockedURI}. Current policy is ${i.originalPolicy}`);g.e.UseFallbackTexture=!1,L(x),K&&o.src&&URL.revokeObjectURL(o.src),o.src=""}}),(()=>{for(const i of M)i.target.addEventListener(i.name,i.handler)})();const T="blob:"===a.substring(0,5),Q="data:"===a.substring(0,5),f=()=>{T||Q||!j.e.IsCustomRequestAvailable?o.src=a:O(a,((i,x,e)=>{const j=new Blob([i],{type:!J&&e?e:J}),E=URL.createObjectURL(j);K=!0,o.src=E}),void 0,E||void 0,!0,((i,x)=>{L(x)}))},w=()=>{E&&E.loadImage(a,o)};if(!T&&!Q&&E&&E.enableTexturesOffline)E.open(w,f);else{if(-1!==a.indexOf("file:")){const i=decodeURIComponent(a.substring(5).toLowerCase());if(Y.FilesToLoad[i]&&"undefined"!==typeof URL){try{let x;try{x=URL.createObjectURL(Y.FilesToLoad[i])}catch(l){x=URL.createObjectURL(Y.FilesToLoad[i])}o.src=x,K=!0}catch(Z){o.src=""}return o}}f()}return o},w=(i,x,e,j,E)=>{const Y=new FileReader,J={onCompleteObservable:new a.b,abort:()=>Y.abort()};return Y.onloadend=()=>J.onCompleteObservable.notifyObservers(J),E&&(Y.onerror=()=>{E(new Q(`Unable to read ${i.name}`,i))}),Y.onload=i=>{x(i.target.result)},e&&(Y.onprogress=e),j?Y.readAsArrayBuffer(i):Y.readAsText(i),J},O=(i,x,e,j,E,u,b)=>{if(i.name)return w(i,x,e,E,u?i=>{u(void 0,i)}:void 0);const g=i;if(-1!==g.indexOf("file:")){let i=decodeURIComponent(g.substring(5).toLowerCase());0===i.indexOf("./")&&(i=i.substring(2));const j=Y.FilesToLoad[i];if(j)return w(j,x,e,E,u?i=>u(void 0,new z(i.message,i.file)):void 0)}const{match:L,type:o}=N(g);if(L){const i={onCompleteObservable:new a.b,abort:()=>()=>{}};try{const i=E?mi(g):X(g);x(i,void 0,o)}catch(J){u?u(void 0,J):A.c.Error(J.message||"Failed to parse the Data URL")}return K.b.SetImmediate((()=>{i.onCompleteObservable.notifyObservers(i)})),i}return l(g,((i,e)=>{x(i,null===e||void 0===e?void 0:e.responseURL,null===e||void 0===e?void 0:e.getResponseHeader("content-type"))}),e,j,E,u?i=>{u(i.request,new z(i.message,i.request))}:void 0,b)},l=(i,x,e,Y,J,u,b)=>{i=t.CleanUrl(i),i=t.PreprocessUrl(i);const g=t.BaseUrl+i;let K=!1;const L={onCompleteObservable:new a.b,abort:()=>K=!0},o=()=>{let i,a=new j.e,Y=null;const o=()=>{a&&(e&&a.removeEventListener("progress",e),i&&a.removeEventListener("readystatechange",i),a.removeEventListener("loadend",M))};let M=()=>{o(),L.onCompleteObservable.notifyObservers(L),L.onCompleteObservable.clear(),e=void 0,i=null,M=null,u=void 0,b=void 0,x=void 0};L.abort=()=>{K=!0,M&&M(),a&&a.readyState!==(XMLHttpRequest.DONE||4)&&a.abort(),null!==Y&&(clearTimeout(Y),Y=null),a=null};const z=i=>{const x=i.message||"Unknown error";u&&a?u(new T(x,a)):A.c.Error(x)},Q=A=>{if(a){if(a.open("GET",g),b)try{b(a)}catch(L){return void z(L)}J&&(a.responseType="arraybuffer"),e&&a.addEventListener("progress",e),M&&a.addEventListener("loadend",M),i=()=>{if(!K&&a&&a.readyState===(XMLHttpRequest.DONE||4)){if(i&&a.removeEventListener("readystatechange",i),a.status>=200&&a.status<300||0===a.status&&(!(0,E.i)()||B())){const i=J?a.response:a.responseText;if(null!==i){try{x&&x(i,a)}catch(L){z(L)}return}}const e=t.DefaultRetryStrategy;if(e){const i=e(g,a,A);if(-1!==i)return o(),a=new j.e,void(Y=setTimeout((()=>Q(A+1)),i))}const b=new T("Error status: "+a.status+" "+a.statusText+" - Unable to load "+g,a);u&&u(b)}},a.addEventListener("readystatechange",i),a.send()}};Q(0)};if(Y&&Y.enableSceneOffline){const j=i=>{i&&i.status>400?u&&u(i):o()},E=()=>{Y&&Y.loadFile(t.BaseUrl+i,(i=>{!K&&x&&x(i),L.onCompleteObservable.notifyObservers(L)}),e?i=>{!K&&e&&e(i)}:void 0,j,J)};Y.open(E,j)}else o();return L},Z=i=>{const{match:x,type:e}=N(i);if(x)return e||void 0;const j=i.lastIndexOf(".");switch(i.substring(j+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ne":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},B=()=>"undefined"!==typeof location&&"file:"===location.protocol,k=i=>M.test(i),N=i=>{const x=M.exec(i);if(null===x||0===x.length)return{match:!1,type:""};return{match:!0,type:x[0].replace("data:","").replace("base64,","")}};function mi(i){return(0,u.d)(i.split(",")[1])}const X=i=>(0,u.e)(i.split(",")[1]);let C;o.c._FileToolsLoadImage=f,L.e.loadFile=O,b.i.loadFile=O;((i,x,e,j,E,a,Y,J,u,b)=>{C={DecodeBase64UrlToBinary:i,DecodeBase64UrlToString:x,DefaultRetryStrategy:e.DefaultRetryStrategy,BaseUrl:e.BaseUrl,CorsBehavior:e.CorsBehavior,PreprocessUrl:e.PreprocessUrl,IsBase64DataUrl:j,IsFileURL:E,LoadFile:a,LoadImage:Y,ReadFile:J,RequestFile:u,SetCorsBehavior:b},Object.defineProperty(C,"DefaultRetryStrategy",{get:function(){return e.DefaultRetryStrategy},set:function(i){e.DefaultRetryStrategy=i}}),Object.defineProperty(C,"BaseUrl",{get:function(){return e.BaseUrl},set:function(i){e.BaseUrl=i}}),Object.defineProperty(C,"PreprocessUrl",{get:function(){return e.PreprocessUrl},set:function(i){e.PreprocessUrl=i}}),Object.defineProperty(C,"CorsBehavior",{get:function(){return e.CorsBehavior},set:function(i){e.CorsBehavior=i}})})(mi,X,t,k,B,O,f,w,l,V)},12213:(i,x,e)=>{function j(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(i=>{const x=16*Math.random()|0;return("x"===i?x:3&x|8).toString(16)}))}e.d(x,{b:()=>j})},12197:(i,x,e)=>{e.d(x,{b:()=>a});var j=e(12072),E=e(12204);class a{static Instantiate(i){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[i])return this.RegisteredExternalClasses[i];const x=(0,E.e)(i);if(x)return x;j.c.Warn(i+" not found, you may have missed an import.");const e=i.split(".");let a=window||this;for(let j=0,E=e.length;j<E;j++)a=a[e[j]];return"function"!==typeof a?null:a}}a.RegisteredExternalClasses={}},12089:(i,x,e)=>{e.d(x,{e:()=>E});var j=e(12069);class E{static get Now(){return(0,j.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12128:(i,x,e)=>{e.d(x,{d:()=>Y,e:()=>a,g:()=>j,j:()=>E});const j=i=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(i);let x="";for(let e=0;e<i.byteLength;e++)x+=String.fromCharCode(i[e]);return x},E=i=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let e,j,E,a,Y,J,u,b="",g=0;const A=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);for(;g<A.length;)e=A[g++],j=g<A.length?A[g++]:Number.NaN,E=g<A.length?A[g++]:Number.NaN,a=e>>2,Y=(3&e)<<4|j>>4,J=(15&j)<<2|E>>6,u=63&E,isNaN(j)?J=u=64:isNaN(E)&&(u=64),b+=x.charAt(a)+x.charAt(Y)+x.charAt(J)+x.charAt(u);return b},a=i=>atob(i),Y=i=>{const x=a(i),e=x.length,j=new Uint8Array(new ArrayBuffer(e));for(let E=0;E<e;E++)j[E]=x.charCodeAt(E);return j.buffer}},12216:(i,x,e)=>{function j(i){let x=1;do{x*=2}while(x<i);return x===i}function E(i,x,e){return i*(1-e)+x*e}function a(i){const x=Y(i),e=J(i);return x-i>i-e?e:x}function Y(i){return i--,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,++i}function J(i){return i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,(i|=i>>16)-(i>>1)}function u(i,x){let e;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:e=J(i);break;case 2:e=a(i);break;default:e=Y(i)}return Math.min(e,x)}e.d(x,{c:()=>J,g:()=>u,k:()=>j,l:()=>E,o:()=>a})},12061:(i,x,e)=>{e.r(x),e.d(x,{AsyncLoop:()=>Q,Tools:()=>z,className:()=>T});var j=e(12065),E=e(12069),a=e(12072),Y=e(12080),J=e(12089),u=e(12092),b=e(12101),g=e(12108),A=e(12115),K=e(12142),L=e(12197),o=e(12213),M=e(12216);class z{static get BaseUrl(){return A.h.BaseUrl}static set BaseUrl(i){A.h.BaseUrl=i}static get CleanUrl(){return A.h.CleanUrl}static set CleanUrl(i){A.h.CleanUrl=i}static IsAbsoluteUrl(i){return 0===i.indexOf("//")||-1!==i.indexOf("://")&&(-1!==i.indexOf(".")&&(-1!==i.indexOf("/")&&(!(i.indexOf(":")>i.indexOf("/"))&&(i.indexOf("://")<i.indexOf(".")||(0===i.indexOf("data:")||0===i.indexOf("blob:"))))))}static set ScriptBaseUrl(i){A.h.ScriptBaseUrl=i}static get ScriptBaseUrl(){return A.h.ScriptBaseUrl}static set CDNBaseUrl(i){z.ScriptBaseUrl=i,z.AssetBaseUrl=i}static set ScriptPreprocessUrl(i){A.h.ScriptPreprocessUrl=i}static get ScriptPreprocessUrl(){return A.h.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return A.h.DefaultRetryStrategy}static set DefaultRetryStrategy(i){A.h.DefaultRetryStrategy=i}static get CorsBehavior(){return A.h.CorsBehavior}static set CorsBehavior(i){A.h.CorsBehavior=i}static get UseFallbackTexture(){return g.e.UseFallbackTexture}static set UseFallbackTexture(i){g.e.UseFallbackTexture=i}static get RegisteredExternalClasses(){return L.b.RegisteredExternalClasses}static set RegisteredExternalClasses(i){L.b.RegisteredExternalClasses=i}static get fallbackTexture(){return g.e.FallbackTexture}static set fallbackTexture(i){g.e.FallbackTexture=i}static FetchToRef(i,x,e,j,E,a){const Y=4*((Math.abs(i)*e%e|0)+(Math.abs(x)*j%j|0)*e);a.r=E[Y]/255,a.g=E[Y+1]/255,a.b=E[Y+2]/255,a.a=E[Y+3]/255}static Mix(i,x,e){return 0}static Instantiate(i){return L.b.Instantiate(i)}static SetImmediate(i){K.b.SetImmediate(i)}static IsExponentOfTwo(i){return!0}static FloatRound(i){return Math.fround(i)}static GetFilename(i){const x=i.lastIndexOf("/");return x<0?i:i.substring(x+1)}static GetFolderPath(i){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const e=i.lastIndexOf("/");return e<0?x?i:"":i.substring(0,e+1)}static ToDegrees(i){return 180*i/Math.PI}static ToRadians(i){return i*Math.PI/180}static SmoothAngleChange(i,x){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const j=this.ToRadians(i),E=this.ToRadians(x);return this.ToDegrees(Math.atan2((1-e)*Math.sin(E)+e*Math.sin(j),(1-e)*Math.cos(E)+e*Math.cos(j)))}static MakeArray(i,x){return!0===x||void 0!==i&&null!=i?Array.isArray(i)?i:[i]:null}static GetPointerPrefix(i){return(0,E.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(i,x){(0,A.y)(i,x)}static SetReferrerPolicyBehavior(i,x){x.referrerPolicy=i}static get PreprocessUrl(){return A.h.PreprocessUrl}static set PreprocessUrl(i){A.h.PreprocessUrl=i}static LoadImage(i,x,e,j,E,a){return(0,A.r)(i,x,e,j,E,a)}static LoadFile(i,x,e,j,E,a){return(0,A.p)(i,x,e,j,E,a)}static async LoadFileAsync(i){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((e,j)=>{(0,A.p)(i,(i=>{e(i)}),void 0,void 0,x,((i,x)=>{j(x)}))}))}static GetAssetUrl(i){if(!i)return"";if(z.AssetBaseUrl&&i.startsWith(z._DefaultAssetsUrl)){const x="/"===z.AssetBaseUrl[z.AssetBaseUrl.length-1]?z.AssetBaseUrl.substring(0,z.AssetBaseUrl.length-1):z.AssetBaseUrl;return i.replace(z._DefaultAssetsUrl,x)}return i}static GetBabylonScriptURL(i,x){if(!i)return"";if(z.ScriptBaseUrl&&i.startsWith(z._DefaultCdnUrl)){const x="/"===z.ScriptBaseUrl[z.ScriptBaseUrl.length-1]?z.ScriptBaseUrl.substring(0,z.ScriptBaseUrl.length-1):z.ScriptBaseUrl;i=i.replace(z._DefaultCdnUrl,x)}return i=z.ScriptPreprocessUrl(i),x&&(i=z.GetAbsoluteUrl(i)),i}static LoadBabylonScript(i,x,e,j){i=z.GetBabylonScriptURL(i),z.LoadScript(i,x,e)}static async LoadBabylonScriptAsync(i){return i=z.GetBabylonScriptURL(i),await z.LoadScriptAsync(i)}static LoadScript(i,x,e,j){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(i),x&&x()}catch(u){null===e||void 0===e||e(`Unable to load script '${i}' in worker`,u)}return}if(!(0,E.i)())return void(null===e||void 0===e||e(`Cannot load script '${i}' outside of a window or a worker`));const Y=document.getElementsByTagName("head")[0],J=document.createElement("script");a?(J.setAttribute("type","module"),J.innerText=i):(J.setAttribute("type","text/javascript"),J.setAttribute("src",i)),j&&(J.id=j),J.onload=()=>{x&&x()},J.onerror=x=>{e&&e(`Unable to load script '${i}'`,x)},Y.appendChild(J)}static async LoadScriptAsync(i,x){return await new Promise(((e,j)=>{this.LoadScript(i,(()=>{e()}),((i,x)=>{j(x||new Error(i))}),x)}))}static ReadFileAsDataURL(i,x,e){const E=new FileReader,a={onCompleteObservable:new j.b,abort:()=>E.abort()};return E.onloadend=()=>{a.onCompleteObservable.notifyObservers(a)},E.onload=i=>{x(i.target.result)},E.onprogress=e,E.readAsDataURL(i),a}static ReadFile(i,x,e,j,E){return(0,A.t)(i,x,e,j,E)}static FileAsURL(i){const x=new Blob([i]);return window.URL.createObjectURL(x)}static Format(i){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return i.toFixed(x)}static DeepCopy(i,x,e,j){Y.d.DeepCopy(i,x,e,j)}static IsEmpty(i){for(const x in i)if(Object.prototype.hasOwnProperty.call(i,x))return!1;return!0}static RegisterTopRootEvents(i,x){for(let j=0;j<x.length;j++){const E=x[j];i.addEventListener(E.name,E.handler,!1);try{window.parent&&window.parent.addEventListener(E.name,E.handler,!1)}catch(e){}}}static UnregisterTopRootEvents(i,x){for(let j=0;j<x.length;j++){const E=x[j];i.removeEventListener(E.name,E.handler);try{i.parent&&i.parent.removeEventListener(E.name,E.handler)}catch(e){}}}static async DumpFramebuffer(i,x,e,j){throw(0,u.e)("DumpTools")}static DumpData(i,x,e,j){throw(0,u.e)("DumpTools")}static async DumpDataAsync(i,x,e){throw(0,u.e)("DumpTools")}static _IsOffScreenCanvas(i){return void 0!==i.convertToBlob}static ToBlob(i,x){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0;z._IsOffScreenCanvas(i)||i.toBlob||(i.toBlob=function(i,x,e){setTimeout((()=>{const j=atob(this.toDataURL(x,e).split(",")[1]),E=j.length,a=new Uint8Array(E);for(let i=0;i<E;i++)a[i]=j.charCodeAt(i);i(new Blob([a]))}))}),z._IsOffScreenCanvas(i)?i.convertToBlob({type:e,quality:j}).then((i=>x(i))):i.toBlob((function(i){x(i)}),e,j)}static DownloadBlob(i,x){if("download"in document.createElement("a")){if(!x){const i=new Date;x="screenshot_"+((i.getFullYear()+"-"+(i.getMonth()+1)).slice(2)+"-"+i.getDate()+"_"+i.getHours()+"-"+("0"+i.getMinutes()).slice(-2))+".png"}z.Download(i,x)}else if(i&&"undefined"!==typeof URL){const x=URL.createObjectURL(i),e=window.open("");if(!e)return;const j=e.document.createElement("img");j.onload=function(){URL.revokeObjectURL(x)},j.src=x,e.document.body.appendChild(j)}}static EncodeScreenshotCanvasData(i,x){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",j=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0;if("string"!==typeof j&&x){if(x){if(z._IsOffScreenCanvas(i))return void i.convertToBlob({type:e,quality:E}).then((i=>{const e=new FileReader;e.readAsDataURL(i),e.onloadend=()=>{const i=e.result;x(i)}}));const j=i.toDataURL(e,E);x(j)}}else this.ToBlob(i,(function(i){i&&z.DownloadBlob(i,j),x&&x("")}),e,E)}static Download(i,x){if("undefined"===typeof URL)return;const e=window.URL.createObjectURL(i),j=document.createElement("a");document.body.appendChild(j),j.style.display="none",j.href=e,j.download=x,j.addEventListener("click",(()=>{j.parentElement&&j.parentElement.removeChild(j)})),j.click(),window.URL.revokeObjectURL(e)}static BackCompatCameraNoPreventDefault(i){return"boolean"===typeof i[0]?i[0]:"boolean"===typeof i[1]&&i[1]}static CreateScreenshot(i,x,e,j){throw(0,u.e)("ScreenshotTools")}static async CreateScreenshotAsync(i,x,e){throw(0,u.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(i,x,e,j){throw(0,u.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(i,x,e){throw(0,u.e)("ScreenshotTools")}static RandomId(){return(0,o.b)()}static IsBase64(i){return(0,A.l)(i)}static DecodeBase64(i){return(0,A.d)(i)}static get errorsCount(){return a.c.errorsCount}static Log(i){a.c.Log(i)}static Warn(i){a.c.Warn(i)}static Error(i){a.c.Error(i)}static get LogCache(){return a.c.LogCache}static ClearLogCache(){a.c.ClearLogCache()}static set LogLevels(i){a.c.LogLevels=i}static set PerformanceLogLevel(i){return(i&z.PerformanceUserMarkLogLevel)===z.PerformanceUserMarkLogLevel?(z.StartPerformanceCounter=z._StartUserMark,void(z.EndPerformanceCounter=z._EndUserMark)):(i&z.PerformanceConsoleLogLevel)===z.PerformanceConsoleLogLevel?(z.StartPerformanceCounter=z._StartPerformanceConsole,void(z.EndPerformanceCounter=z._EndPerformanceConsole)):(z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,void(z.EndPerformanceCounter=z._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(i,x){}static _EndPerformanceCounterDisabled(i,x){}static _StartUserMark(i){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!z._Performance){if(!(0,E.i)())return;z._Performance=window.performance}x&&z._Performance.mark&&z._Performance.mark(i+"-Begin")}static _EndUserMark(i){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&z._Performance.mark&&(z._Performance.mark(i+"-End"),z._Performance.measure(i,i+"-Begin",i+"-End"))}static _StartPerformanceConsole(i){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(z._StartUserMark(i,x),console.time&&console.time(i))}static _EndPerformanceConsole(i){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(z._EndUserMark(i,x),console.timeEnd(i))}static get Now(){return J.e.Now}static GetClassName(i){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=null;if(!x&&i.getClassName)e=i.getClassName();else{if(i instanceof Object){e=(x?i:Object.getPrototypeOf(i)).constructor.__bjsclassName__}e||(e=typeof i)}return e}static First(i,x){for(const e of i)if(x(e))return e;return null}static getFullClassName(i){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=null,j=null;if(!x&&i.getClassName)e=i.getClassName();else{if(i instanceof Object){const E=x?i:Object.getPrototypeOf(i);e=E.constructor.__bjsclassName__,j=E.constructor.__bjsmoduleName__}e||(e=typeof i)}return e?(null!=j?j+".":"")+e:null}static async DelayAsync(i){await new Promise((x=>{setTimeout((()=>{x()}),i)}))}static IsSafari(){return!!(0,E.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function T(i,x){return e=>{e.__bjsclassName__=i,e.__bjsmoduleName__=null!=x?x:null}}z.AssetBaseUrl="",z.UseCustomRequestHeaders=!1,z.CustomRequestHeaders=b.e.CustomRequestHeaders,z.GetDOMTextContent=E.b,z._DefaultCdnUrl="https://cdn.babylonjs.com",z._DefaultAssetsUrl="https://assets.babylonjs.com/core",z.GetAbsoluteUrl="object"===typeof document?i=>{const x=document.createElement("a");return x.href=i,x.href}:"function"===typeof URL&&"object"===typeof location?i=>new URL(i,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},z.NoneLogLevel=a.c.NoneLogLevel,z.MessageLogLevel=a.c.MessageLogLevel,z.WarningLogLevel=a.c.WarningLogLevel,z.ErrorLogLevel=a.c.ErrorLogLevel,z.AllLogLevel=a.c.AllLogLevel,z.IsWindowObjectExist=E.i,z.PerformanceNoneLogLevel=0,z.PerformanceUserMarkLogLevel=1,z.PerformanceConsoleLogLevel=2,z.StartPerformanceCounter=z._StartPerformanceCounterDisabled,z.EndPerformanceCounter=z._EndPerformanceCounterDisabled;class Q{constructor(i,x,e){let j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=i,this.index=j-1,this._done=!1,this._fn=x,this._successCallback=e}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(i,x,e){const j=new Q(i,x,e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return j.executeNext(),j}static SyncAsyncForLoop(i,x,e,j,E){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Q.Run(Math.ceil(i/x),(j=>{E&&E()?j.breakLoop():setTimeout((()=>{for(let a=0;a<x;++a){const Y=j.index*x+a;if(Y>=i)break;if(e(Y),E&&E()){j.breakLoop();break}}j.executeNext()}),a)}),j)}}z.Mix=M.l,z.IsExponentOfTwo=M.k,g.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12204:(i,x,e)=>{e.d(x,{e:()=>a,f:()=>E});const j={};function E(i,x){j[i]=x}function a(i){return j[i]}},12101:(i,x,e)=>{e.d(x,{e:()=>j});class j{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(j.CustomRequestHeaders).length>0||j.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const i in j.CustomRequestHeaders){const x=j.CustomRequestHeaders[i];x&&this._xhr.setRequestHeader(i,x)}}_shouldSkipRequestModifications(i){return j.SkipRequestModificationForBabylonCDN&&(i.includes("preview.babylonjs.com")||i.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(i){this._xhr.onprogress=i}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(i){this._xhr.responseType=i}get timeout(){return this._xhr.timeout}set timeout(i){this._xhr.timeout=i}addEventListener(i,x,e){this._xhr.addEventListener(i,x,e)}removeEventListener(i,x,e){this._xhr.removeEventListener(i,x,e)}abort(){this._xhr.abort()}send(i){j.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(i)}open(i,x){for(const e of j.CustomRequestModifiers){if(this._shouldSkipRequestModifications(x))return;x=e(this._xhr,x)||x}x=(x=x.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=x,this._xhr.open(i,x,!0)}setRequestHeader(i,x){this._xhr.setRequestHeader(i,x)}getResponseHeader(i){return this._xhr.getResponseHeader(i)}}j.CustomRequestHeaders={},j.CustomRequestModifiers=new Array,j.SkipRequestModificationForBabylonCDN=!0}}]);