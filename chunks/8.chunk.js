"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11089:(P,f,Y)=>{Y.d(f,{c:()=>V});var C=Y(11052),q=Y(11025),m=Y(11093),L=Y(11112),o=Y(11035);class w{constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,P&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(P){this._zOffset!==P&&(this._zOffset=P,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(P){this._zOffsetUnits!==P&&(this._zOffsetUnits=P,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(P){this._cullFace!==P&&(this._cullFace=P,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(P){this._cull!==P&&(this._cull=P,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(P){this._depthFunc!==P&&(this._depthFunc=P,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(P){this._depthMask!==P&&(this._depthMask=P,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(P){this._depthTest!==P&&(this._depthTest=P,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(P){this._frontFace!==P&&(this._frontFace=P,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(P){this.isDirty&&(this._isCullDirty&&(this.cull?P.enable(P.CULL_FACE):P.disable(P.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(P.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(P.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?P.enable(P.DEPTH_TEST):P.disable(P.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(P.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(P.enable(P.POLYGON_OFFSET_FILL),P.polygonOffset(this.zOffset,this.zOffsetUnits)):P.disable(P.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(P.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class d{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(P){this._func!==P&&(this._func=P,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(P){this._funcRef!==P&&(this._funcRef=P,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(P){this._funcMask!==P&&(this._funcMask=P,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(P){this._opStencilFail!==P&&(this._opStencilFail=P,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(P){this._opDepthFail!==P&&(this._opDepthFail=P,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(P){this._opStencilDepthPass!==P&&(this._opStencilDepthPass=P,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(P){this._mask!==P&&(this._mask=P,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(P){this._enabled!==P&&(this._enabled=P,this._isStencilTestDirty=!0)}constructor(){let P=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,P&&this.reset()}reset(){var P;this.stencilMaterial=void 0,null===(P=this.stencilGlobal)||void 0===P||P.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(P){var f;if(!P)return;const Y=!this.useStencilGlobalOnly&&!(null===(f=this.stencilMaterial)||void 0===f||!f.enabled);this.enabled=Y?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=Y?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=Y?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=Y?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=Y?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=Y?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=Y?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=Y?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?P.enable(P.STENCIL_TEST):P.disable(P.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(P.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(P.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(P.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class R{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=R.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=R.KEEP,this.opDepthFail=R.KEEP,this.opStencilDepthPass=R.REPLACE}get stencilFunc(){return this.func}set stencilFunc(P){this.func=P}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(P){this.funcRef=P}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(P){this.funcMask=P}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(P){this.opStencilFail=P}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(P){this.opDepthFail=P}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(P){this.opStencilDepthPass=P}get stencilMask(){return this.mask}set stencilMask(P){this.mask=P}get stencilTest(){return this.enabled}set stencilTest(P){this.enabled=P}}R.ALWAYS=519,R.KEEP=7680,R.REPLACE=7681;class y{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(P){this._alphaBlend!==P&&(this._alphaBlend=P,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(P,f,Y,C){this._blendConstants[0]===P&&this._blendConstants[1]===f&&this._blendConstants[2]===Y&&this._blendConstants[3]===C||(this._blendConstants[0]=P,this._blendConstants[1]=f,this._blendConstants[2]=Y,this._blendConstants[3]=C,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(P,f,Y,C){this._blendFunctionParameters[0]===P&&this._blendFunctionParameters[1]===f&&this._blendFunctionParameters[2]===Y&&this._blendFunctionParameters[3]===C||(this._blendFunctionParameters[0]=P,this._blendFunctionParameters[1]=f,this._blendFunctionParameters[2]=Y,this._blendFunctionParameters[3]=C,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(P,f){this._blendEquationParameters[0]===P&&this._blendEquationParameters[1]===f||(this._blendEquationParameters[0]=P,this._blendEquationParameters[1]=f,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(P){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?P.enable(P.BLEND):P.disable(P.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(P.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(P.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(P.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var r=Y(11043),i=Y(11119),u=Y(11021),g=Y(11018),S=Y(11082),K=Y(11129);function M(P,f){if((0,u.j)()){const{requestAnimationFrame:Y}=f||window;if("function"===typeof Y)return Y(P)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(P);return setTimeout(P,16)}class V{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(P){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(P){P!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=P,this._depthCullingState.depthFunc=P?518:515)}setColorWrite(P){P!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=P)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(P){if(P)return this.isNDCHalfZRange?P.IS_NDC_HALF_ZRANGE="":delete P.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?P.USE_REVERSE_DEPTHBUFFER="":delete P.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?P.USE_EXACT_SRGB_CONVERSIONS="":delete P.USE_EXACT_SRGB_CONVERSIONS);{let P="";return this.isNDCHalfZRange&&(P+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(P&&(P+="\n"),P+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(P&&(P+="\n"),P+="#define USE_EXACT_SRGB_CONVERSIONS"),P}}_rebuildInternalTextures(){const P=this._internalTexturesCache.slice();for(const f of P)f._rebuild()}_rebuildRenderTargetWrappers(){const P=this._renderTargetWrapperCache.slice();for(const f of P)f._rebuild()}_rebuildEffects(){for(const P in this._compiledEffects){const f=this._compiledEffects[P];f._pipelineContext=null,f._prepareEffect()}m.Effect.ResetCache()}_rebuildGraphicsResources(){var P;this.wipeCaches(!0),this._rebuildEffects(),null===(P=this._rebuildComputeEffects)||void 0===P||P.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){q.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(P){setTimeout((()=>{this._clearEmptyResources();const f=this._depthCullingState.depthTest,Y=this._depthCullingState.depthFunc,C=this._depthCullingState.depthMask,q=this._stencilState.stencilTest;P(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=f,this._depthCullingState.depthFunc=Y,this._depthCullingState.depthMask=C,this._stencilState.stencilTest=q,this._flagContextRestored()}),0)}get R(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(P){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(P){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const P=new Uint8Array(4),f=[P,P,P,P,P,P];this._emptyCubeTexture=this.createRawCubeTexture(f,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(P){if(!P)return this._activeRenderLoops.length=0,void this._cancelFrame();const f=this._activeRenderLoops.indexOf(P);f>=0&&(this._activeRenderLoops.splice(f,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const P=this._frameHandler;if(this._frameHandler=0,(0,u.j)()){const{cancelAnimationFrame:f}=this.getHostWindow()||window;if("function"===typeof f)return f(P)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(P);return clearTimeout(P)}}Mf(){this.onBeginFrameObservable.notifyObservers(this)}Vf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(P){this._maxFPS=P,void 0!==P&&(this._minFrameTime=P<=0?Number.MAX_VALUE:1e3/P)}_isOverFrameTime(P){if(!P||void 0===this._maxFPS)return!1;const f=P-this._lastFrameTime;return this._lastFrameTime=P,this._renderAccumulator+=f,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(P){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(P)){let P=!0;(this.R||!this.renderEvenInBackground&&this._windowIsBackground)&&(P=!1),P&&(this.Mf(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Vf())}}_renderLoop(P){this._processFrame(P),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let P=0;P<this._activeRenderLoops.length;P++){(0,this._activeRenderLoops[P])()}}_renderViews(){return!1}_queueNewFrame(P,f){return M(P,f)}runRenderLoop(P){-1===this._activeRenderLoops.indexOf(P)&&(this._activeRenderLoops.push(P),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(P){this._depthCullingState.depthTest=P}setZOffset(P){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-P:P}getZOffset(){const P=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-P:P}setZOffsetUnits(P){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-P:P}getZOffsetUnits(){const P=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-P:P}getHostWindow(){return(0,u.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(P){this._compatibilityMode=!0}_rebuildTextures(){for(const P of this.scenes)P._rebuildTextures();for(const P of this._virtualScenes)P._rebuildTextures()}_releaseRenderTargetWrapper(P){const f=this._renderTargetWrapperCache.indexOf(P);-1!==f&&this._renderTargetWrapperCache.splice(f,1)}get currentViewport(){return this._cachedViewport}setViewport(P,f,Y){const C=f||this.getRenderWidth(),q=Y||this.getRenderHeight(),m=P.x||0,L=P.y||0;this._cachedViewport=P,this._viewport(m*C,L*q,C*P.width,q*P.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(P){return new Path2D(P)}get description(){let P=this.name+this.version;return this._caps.parallelShaderCompile&&(P+=" - Parallel shader compilation"),P}_createTextureBase(P,f,Y,m){let L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7?arguments[7]:void 0,R=arguments.length>8?arguments[8]:void 0,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,r=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,g=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,S=arguments.length>13?arguments[13]:void 0,M=arguments.length>14?arguments[14]:void 0,O=arguments.length>15?arguments[15]:void 0;const n="data:"===(P=P||"").substring(0,5),l="blob:"===P.substring(0,5),v=n&&-1!==P.indexOf(";base64,"),c=r||new i.b(this,1);c!==r&&(c.label=P.substring(0,60));const T=P;!this._transformTextureUrl||v||r||y||(P=this._transformTextureUrl(P)),T!==P&&(c._originalUrl=T);const U=P.lastIndexOf(".");let D=g||(U>-1?P.substring(U).toLowerCase():"");D.indexOf("?")>-1&&(D=D.split("?")[0]);const j=(0,K.d)(D,S);m&&m.addPendingData(c),c.url=P,c.generateMipMaps=!f,c.samplingMode=L,c.invertY=Y,c._useSRGBBuffer=this._getUseSRGBBuffer(!!O,f),this._doNotHandleContextLost||(c._buffer=y);let e=null;o&&!r&&(e=c.onLoadedObservable.add(o)),r||this._internalTexturesCache.push(c);const s=(Y,r)=>{m&&m.removePendingData(c),P===T?(e&&c.onLoadedObservable.remove(e),C.e.UseFallbackTexture&&P!==C.e.FallbackTexture&&this._createTextureBase(C.e.FallbackTexture,f,c.invertY,m,L,null,w,d,R,y,c),Y=(Y||"Unknown error")+(C.e.UseFallbackTexture?" - Fallback texture was used":""),c.onErrorObservable.notifyObservers({message:Y,exception:r}),w&&w(Y,r)):(q.e.Warn(`Failed to load ${P}, falling back to ${T}`),this._createTextureBase(T,f,c.invertY,m,L,o,w,d,R,y,c,u,g,S,M,O))};if(j){const f=async P=>{(await j).loadData(P,c,((P,f,Y,C,q,o)=>{o?s("TextureLoader failed to load data"):d(c,D,m,{width:P,height:f},c.invertY,!Y,C,(()=>(q(),!1)),L)}),M)};y?y instanceof ArrayBuffer?f(new Uint8Array(y)):ArrayBuffer.isView(y)?f(y):w&&w("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(P,(P=>{f(new Uint8Array(P))}),void 0,m?m.offlineProvider:void 0,!0,((P,f)=>{s("Unable to load "+(P&&P.responseURL,f))}))}else{const Y=P=>{l&&!this._doNotHandleContextLost&&(c._buffer=P),d(c,D,m,P,c.invertY,f,!1,R,L)};!n||v?y&&("string"===typeof y.decoding||y.close)?Y(y):V._FileToolsLoadImage(P||"",Y,s,m?m.offlineProvider:null,S,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof y||y instanceof ArrayBuffer||ArrayBuffer.isView(y)||y instanceof Blob?V._FileToolsLoadImage(y,Y,s,m?m.offlineProvider:null,S,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):y&&Y(y)}return c}_rebuildBuffers(){for(const P of this._uniformBuffers)P._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,u.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const P in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,P)&&(this._boundTexturesCache[P]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(P){this._name=P}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(P){this._hardwareScalingLevel=P,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(P){this._doNotHandleContextLost=P}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(P,f,Y){var q,m;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new w,this._stencilStateComposer=new d,this._stencilState=new R,this._alphaState=new y,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new g.e,this.onCanvasFocusObservable=new g.e,this.onNewSceneAddedObservable=new g.e,this.onResizeObservable=new g.e,this.onCanvasPointerOutObservable=new g.e,this.onEffectErrorObservable=new g.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new g.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=P=>this._renderLoop(P),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new g.e,this.onAfterShaderCompilationObservable=new g.e,this.onBeginFrameObservable=new g.e,this.onEndFrameObservable=new g.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new g.e,this.onContextRestoredObservable=new g.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.vf=new g.e,this.onReleaseEffectsObservable=new g.e,C.e.Instances.push(this),this.startTime=o.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,L.b.SetMatrixPrecision(!!f.useHighPrecisionMatrix),(0,u.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=Y??!1,f.antialias=P??f.antialias,f.deterministicLockstep=f.deterministicLockstep??!1,f.lockstepMaxSteps=f.lockstepMaxSteps??4,f.timeStep=f.timeStep??1/60,f.stencil=f.stencil??!0,this._audioContext=(null===(q=f.audioEngineOptions)||void 0===q?void 0:q.audioContext)??null,this._audioDestination=(null===(m=f.audioEngineOptions)||void 0===m?void 0:m.audioDestination)??null,this.premultipliedAlpha=f.premultipliedAlpha??!0,this._doNotHandleContextLost=!!f.doNotHandleContextLost,this._isStencilEnable=!!f.stencil,this.useExactSrgbConversions=f.useExactSrgbConversions??!1;const r=(0,u.j)()&&window.devicePixelRatio||1,i=f.limitDeviceRatio||r;Y=Y||f.adaptToDeviceRatio||!1,this._hardwareScalingLevel=Y?1/Math.min(i,r):1,this._lastDevicePixelRatio=r,this._creationOptions=f}resize(){let P,f,Y=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const P=(0,u.j)()&&window.devicePixelRatio||1,f=this._lastDevicePixelRatio/P;this._lastDevicePixelRatio=P,this._hardwareScalingLevel*=f}if((0,u.j)()&&(0,u.e)())if(this._renderingCanvas){var C,q;const Y=null===(C=(q=this._renderingCanvas).getBoundingClientRect)||void 0===C?void 0:C.call(q);P=this._renderingCanvas.clientWidth||(null===Y||void 0===Y?void 0:Y.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,f=this._renderingCanvas.clientHeight||(null===Y||void 0===Y?void 0:Y.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else P=window.innerWidth,f=window.innerHeight;else P=this._renderingCanvas?this._renderingCanvas.width:100,f=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(P/this._hardwareScalingLevel,f/this._hardwareScalingLevel,Y)}setSize(P,f){let Y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(P|=0,f|=0,!Y&&this._renderingCanvas.width===P&&this._renderingCanvas.height===f)return!1;if(this._renderingCanvas.width=P,this._renderingCanvas.height=f,this.scenes){for(let P=0;P<this.scenes.length;P++){const f=this.scenes[P];for(let P=0;P<f.cameras.length;P++){f.cameras[P]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(P,f,Y,C,q,m,L,o,w,d,R){throw(0,r.b)("engine.rawTexture")}createRawCubeTexture(P,f,Y,C,q,m,L,o){throw(0,r.b)("engine.rawTexture")}createRawTexture3D(P,f,Y,C,q,m,L,o,w,d,R){throw(0,r.b)("engine.rawTexture")}createRawTexture2DArray(P,f,Y,C,q,m,L,o,w,d,R){throw(0,r.b)("engine.rawTexture")}_sharedInit(P){this._renderingCanvas=P}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const P=navigator.userAgent;this.hostInformation.isMobile=-1!==P.indexOf("Mobile")||-1!==P.indexOf("Mac")&&(0,u.e)()&&"ontouchend"in document},this._checkForMobile(),(0,u.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(P){return document.createElement("video")}_reportDrawCall(){var P;let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(P=this._drawCalls)||void 0===P||P.addCount(f,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(P,f){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(P,f){return createImageBitmap(P,f)}resizeImageBitmap(P,f,Y){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(P){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(P,f){if("undefined"===typeof document)return new OffscreenCanvas(P,f);const Y=document.createElement("canvas");return Y.width=P,Y.height=f,Y}createCanvas(P,f){return V._CreateCanvas(P,f)}static _FileToolsLoadImage(P,f,Y,C,q,m,L){throw(0,r.b)("FileTools")}_loadFile(P,f,Y,C,q,m){const L=(0,S.k)(P,f,Y,C,q,m);return this._activeRequests.push(L),L.onCompleteObservable.add((()=>{const P=this._activeRequests.indexOf(L);-1!==P&&this._activeRequests.splice(P,1)})),L}static _FileToolsLoadFile(P,f,Y,C,q,m){if(S.d.loadFile)return S.d.loadFile(P,f,Y,C,q,m);throw(0,r.b)("FileTools")}dispose(){var P;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(P=this.releaseComputeEffects)||void 0===P||P.call(this),m.Effect.ResetCache();for(const Y of this._activeRequests)Y.abort();this._boundRenderFunction=null,this.vf.notifyObservers(this),this.vf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,u.j)()&&window.removeEventListener("resize",this._checkForMobile);const f=C.e.Instances.indexOf(this);f>=0&&C.e.Instances.splice(f,1),C.e.Instances.length||(C.e.OnEnginesDisposedObservable.notifyObservers(this),C.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(P){throw(0,r.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(P,f){for(let Y=0;Y<C.e.Instances.length;Y++){const q=C.e.Instances[Y];for(let Y=0;Y<q.scenes.length;Y++)q.scenes[Y].markAllMaterialsAsDirty(P,f)}}}V._RenderPassIdCounter=0,V._RescalePostProcessFactory=null,V.CollisionsEpsilon=.001,V.QueueNewFrame=M},11052:(P,f,Y)=>{Y.d(f,{e:()=>q});var C=Y(11018);class q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}q.Instances=[],q.OnEnginesDisposedObservable=new C.e,q._LastCreatedScene=null,q.UseFallbackTexture=!0,q.FallbackTexture=""},11112:(P,f,Y)=>{Y.d(f,{b:()=>C});class C{static SetMatrixPrecision(P){if(C.MatrixTrackPrecisionChange=!1,P&&!C.MatrixUse64Bits&&C.MatrixTrackedMatrices)for(let f=0;f<C.MatrixTrackedMatrices.length;++f){const P=C.MatrixTrackedMatrices[f],Y=P.cf;P.cf=new Array(16);for(let f=0;f<16;++f)P.cf[f]=Y[f]}C.MatrixUse64Bits=P,C.MatrixCurrentType=C.MatrixUse64Bits?Array:Float32Array,C.MatrixTrackedMatrices=null}}C.MatrixUse64Bits=!1,C.MatrixTrackPrecisionChange=!0,C.MatrixCurrentType=Float32Array,C.MatrixTrackedMatrices=[]},11129:(P,f,Y)=>{Y.d(f,{d:()=>L});var C=Y(11025);const q=new Map;function m(P,f){(function(P){return q.delete(P)})(P)&&C.e.Warn(`Extension with the name '${P}' already exists`),q.set(P,f)}function L(P,f){"image/ktx"!==f&&"image/ktx2"!==f||(P=".ktx"),q.has(P)||(P.endsWith(".ies")&&m(".ies",(async()=>await Y.e(15).then(Y.bind(Y,13642)).then((P=>new P._IESTextureLoader)))),P.endsWith(".dds")&&m(".dds",(async()=>await Promise.all([Y.e(14),Y.e(17),Y.e(13),Y.e(19),Y.e(18),Y.e(28)]).then(Y.bind(Y,13651)).then((P=>new P._DDSTextureLoader)))),P.endsWith(".basis")&&m(".basis",(async()=>await Promise.all([Y.e(14),Y.e(17),Y.e(13),Y.e(47)]).then(Y.bind(Y,13665)).then((P=>new P._BasisTextureLoader)))),P.endsWith(".env")&&m(".env",(async()=>await Promise.all([Y.e(14),Y.e(17),Y.e(13),Y.e(19),Y.e(18),Y.e(23),Y.e(21),Y.e(45),Y.e(48)]).then(Y.bind(Y,13669)).then((P=>new P._ENVTextureLoader)))),P.endsWith(".hdr")&&m(".hdr",(async()=>await Promise.all([Y.e(14),Y.e(49)]).then(Y.bind(Y,13672)).then((P=>new P._HDRTextureLoader)))),(P.endsWith(".ktx")||P.endsWith(".ktx2"))&&(m(".ktx",(async()=>await Y.e(30).then(Y.bind(Y,13680)).then((P=>new P._KTXTextureLoader)))),m(".ktx2",(async()=>await Y.e(30).then(Y.bind(Y,13680)).then((P=>new P._KTXTextureLoader))))),P.endsWith(".tga")&&m(".tga",(async()=>await Y.e(50).then(Y.bind(Y,13686)).then((P=>new P._TGATextureLoader)))),P.endsWith(".exr")&&m(".exr",(async()=>await Y.e(16).then(Y.bind(Y,13693)).then((P=>new P._ExrTextureLoader)))));const C=q.get(P);return C?Promise.resolve(C(f)):null}},11119:(P,f,Y)=>{Y.d(f,{b:()=>L});var C,q=Y(11018),m=Y(11125);!function(P){P[P.Unknown=0]="Unknown",P[P.Url=1]="Url",P[P.Temp=2]="Temp",P[P.Raw=3]="Raw",P[P.Dynamic=4]="Dynamic",P[P.RenderTarget=5]="RenderTarget",P[P.MultiRenderTarget=6]="MultiRenderTarget",P[P.Cube=7]="Cube",P[P.CubeRaw=8]="CubeRaw",P[P.CubePrefiltered=9]="CubePrefiltered",P[P.Raw3D=10]="Raw3D",P[P.Raw2DArray=11]="Raw2DArray",P[P.DepthStencil=12]="DepthStencil",P[P.CubeRawRGBD=13]="CubeRawRGBD",P[P.Depth=14]="Depth"}(C||(C={}));class L extends m.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(P){this.generateMipMaps=P}get uniqueId(){return this._uniqueId}_setUniqueId(P){this._uniqueId=P}getEngine(){return this._engine}get source(){return this._source}constructor(P,f){let Y=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new q.e,this.onErrorObservable=new q.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=P,this._source=f,this._uniqueId=L._Counter++,Y||(this._hardwareTexture=P._createHardwareTexture())}incrementReferences(){this._references++}updateSize(P,f){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,P,f,Y),this.width=P,this.height=f,this.depth=Y,this.baseWidth=P,this.baseHeight=f,this.baseDepth=Y,this._size=P*f*Y}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const P=this.onRebuildCallback(this),f=f=>{f._swapAndDie(this,!1),this.isReady=P.isReady};return void(P.isAsync?P.proxy.then(f):f(P.proxy))}let P;switch(this.source){case 2:case 12:case 14:break;case 1:return void(P=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(P=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:P=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),P._swapAndDie(this,!1),this.isReady=!0;break;case 10:P=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 11:P=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),P._swapAndDie(this,!1),this.isReady=!0;break;case 4:P=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),P._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(P=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:P=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),P._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return P=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(P=>{P&&P._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(P._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(P){var f;let Y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(f=this._hardwareTexture)||void 0===f||f.setUsage(P._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),P._hardwareTexture=this._hardwareTexture,Y&&(P._isRGBD=this._isRGBD),this._lodTextureHigh&&(P._lodTextureHigh&&P._lodTextureHigh.dispose(),P._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(P._lodTextureMid&&P._lodTextureMid.dispose(),P._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(P._lodTextureLow&&P._lodTextureLow.dispose(),P._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(P._irradianceTexture&&P._irradianceTexture.dispose(),P._irradianceTexture=this._irradianceTexture);const C=this._engine.getLoadedTexturesCache();let q=C.indexOf(this);-1!==q&&C.splice(q,1),q=C.indexOf(P),-1===q&&C.push(P)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}L._Counter=0},11125:(P,f,Y)=>{Y.d(f,{c:()=>C});class C{get wrapU(){return this._cachedWrapU}set wrapU(P){this._cachedWrapU=P}get wrapV(){return this._cachedWrapV}set wrapV(P){this._cachedWrapV=P}get wrapR(){return this._cachedWrapR}set wrapR(P){this._cachedWrapR=P}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(P){this._cachedAnisotropicFilteringLevel=P}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(P){this._comparisonFunction=P}get useMipMaps(){return this._useMipMaps}set useMipMaps(P){this._useMipMaps=P}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=P,this._cachedWrapV=f,this._cachedWrapR=Y,this._cachedAnisotropicFilteringLevel=C,this.samplingMode=q,this._comparisonFunction=m,this}compareSampler(P){return this._cachedWrapU===P._cachedWrapU&&this._cachedWrapV===P._cachedWrapV&&this._cachedWrapR===P._cachedWrapR&&this._cachedAnisotropicFilteringLevel===P._cachedAnisotropicFilteringLevel&&this.samplingMode===P.samplingMode&&this._comparisonFunction===P._comparisonFunction&&this._useMipMaps===P._useMipMaps}}},11031:(P,f,Y)=>{Y.d(f,{e:()=>m});var C=Y(11025);const q=(P,f,Y)=>P?P.getClassName&&"Mesh"===P.getClassName()?null:!P.getClassName||"SubMesh"!==P.getClassName()&&"PhysicsBody"!==P.getClassName()?P.clone?P.clone():Array.isArray(P)?P.slice():Y&&"object"===typeof P?{...P}:null:P.clone(f):null;class m{static DeepCopy(P,f,Y,m){let L=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=function(P){const f=[];do{const Y=Object.getOwnPropertyNames(P);for(const P of Y)-1===f.indexOf(P)&&f.push(P)}while(P=Object.getPrototypeOf(P));return f}(P);for(const d of o){if("_"===d[0]&&(!m||-1===m.indexOf(d)))continue;if(d.endsWith("Observable"))continue;if(Y&&-1!==Y.indexOf(d))continue;const o=P[d],R=typeof o;if("function"!==R)try{if("object"===R)if(o instanceof Uint8Array)f[d]=Uint8Array.from(o);else if(o instanceof Array){if(f[d]=[],o.length>0)if("object"==typeof o[0])for(let P=0;P<o.length;P++){const Y=q(o[P],f,L);-1===f[d].indexOf(Y)&&f[d].push(Y)}else f[d]=o.slice(0)}else f[d]=q(o,f,L);else f[d]=o}catch(w){C.e.Warn(w.message)}}}}},11063:(P,f,Y)=>{Y.d(f,{c:()=>C,g:()=>q,j:()=>m});class C extends Error{}C._setPrototypeOf=Object.setPrototypeOf||((P,f)=>(P.__proto__=f,P));const q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class m extends C{constructor(P,f,Y){super(P),this.errorCode=f,this.innerError=Y,this.name="RuntimeError",C._setPrototypeOf(this,m.prototype)}}},11059:(P,f,Y)=>{Y.d(f,{e:()=>s,g:()=>V,h:()=>U,j:()=>j,o:()=>c,k:()=>S,q:()=>l,u:()=>v,x:()=>T,A:()=>O});var C=Y(11046),q=Y(11021),m=Y(11018);class L{}L.FilesToLoad={};var o=Y(11063),w=Y(11071),d=Y(11078),R=Y(11052),y=Y(11025),r=Y(11087),i=Y(11082),u=Y(11089);const g=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class S extends o.j{constructor(P,f){super(P,o.g.LoadFileError),this.name="LoadFileError",o.c._setPrototypeOf(this,S.prototype),f instanceof C.d?this.request=f:this.file=f}}class K extends o.j{constructor(P,f){super(P,o.g.RequestFileError),this.request=f,this.name="RequestFileError",o.c._setPrototypeOf(this,K.prototype)}}class M extends o.j{constructor(P,f){super(P,o.g.ReadFileError),this.file=f,this.name="ReadFileError",o.c._setPrototypeOf(this,M.prototype)}}const V={DefaultRetryStrategy:class{static ExponentialBackoff(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(Y,C,q)=>0!==C.status||q>=P||-1!==Y.indexOf("file:")?-1:Math.pow(2,q)*f}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:P=>P,ScriptBaseUrl:"",ScriptPreprocessUrl:P=>P,CleanUrl:P=>P=P.replace(/#/gm,"%23")},O=(P,f)=>{if((!P||0!==P.indexOf("data:"))&&V.CorsBehavior)if("string"===typeof V.CorsBehavior||V.CorsBehavior instanceof String)f.crossOrigin=V.CorsBehavior;else{const Y=V.CorsBehavior(P);Y&&(f.crossOrigin=Y)}},n={getRequiredSize:null},l=function(P,f,Y,q){let m,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",d=arguments.length>5?arguments[5]:void 0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:R.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===y||void 0===y||!y._features.forceBitmapOverHTMLImageElement))return Y("LoadImage is only supported in web or BabylonNative environments."),null;let r=!1;P instanceof ArrayBuffer||ArrayBuffer.isView(P)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(m=URL.createObjectURL(new Blob([P],{type:o})),r=!0):m=`data:${o};base64,`+(0,w.j)(P):P instanceof Blob?(m=URL.createObjectURL(P),r=!0):(m=V.CleanUrl(P),m=V.PreprocessUrl(m));const i=f=>{if(Y){const C=m||P.toString();Y(`Error while trying to load image: ${0===C.indexOf("http")||C.length<=128?C:C.slice(0,128)+"..."}`,f)}};if(null!==y&&void 0!==y&&y._features.forceBitmapOverHTMLImageElement)return c(m,(C=>{y.createImageBitmap(new Blob([C],{type:o}),{premultiplyAlpha:"none",...d}).then((P=>{f(P),r&&URL.revokeObjectURL(m)})).catch((f=>{Y&&Y("Error while trying to load image: "+P,f)}))}),void 0,q||void 0,!0,((P,f)=>{i(f)})),null;const u=new Image;if(n.getRequiredSize){const f=n.getRequiredSize(P);f.width&&(u.width=f.width),f.height&&(u.height=f.height)}O(m,u);const g=[],S=()=>{for(const P of g)P.target.removeEventListener(P.name,P.handler);g.length=0};g.push({target:u,name:"load",handler:()=>{S(),f(u),r&&u.src&&URL.revokeObjectURL(u.src)}}),g.push({target:u,name:"error",handler:P=>{S(),i(P),r&&u.src&&URL.revokeObjectURL(u.src)}}),g.push({target:document,name:"securitypolicyviolation",handler:P=>{if(P.blockedURI!==u.src||"Tf"===P.disposition)return;S();const f=new Error(`CSP violation of policy ${P.effectiveDirective} ${P.blockedURI}. Current policy is ${P.originalPolicy}`);R.e.UseFallbackTexture=!1,i(f),r&&u.src&&URL.revokeObjectURL(u.src),u.src=""}}),(()=>{for(const P of g)P.target.addEventListener(P.name,P.handler)})();const K="blob:"===m.substring(0,5),M="data:"===m.substring(0,5),l=()=>{K||M||!C.d.IsCustomRequestAvailable?u.src=m:c(m,((P,f,Y)=>{const C=new Blob([P],{type:!o&&Y?Y:o}),q=URL.createObjectURL(C);r=!0,u.src=q}),void 0,q||void 0,!0,((P,f)=>{i(f)}))},v=()=>{q&&q.loadImage(m,u)};if(!K&&!M&&q&&q.enableTexturesOffline)q.open(v,l);else{if(-1!==m.indexOf("file:")){const P=decodeURIComponent(m.substring(5).toLowerCase());if(L.FilesToLoad[P]&&"undefined"!==typeof URL){try{let f;try{f=URL.createObjectURL(L.FilesToLoad[P])}catch(T){f=URL.createObjectURL(L.FilesToLoad[P])}u.src=f,r=!0}catch(U){u.src=""}return u}}l()}return u},v=(P,f,Y,C,q)=>{const L=new FileReader,o={onCompleteObservable:new m.e,abort:()=>L.abort()};return L.onloadend=()=>o.onCompleteObservable.notifyObservers(o),q&&(L.onerror=()=>{q(new M(`Unable to read ${P.name}`,P))}),L.onload=P=>{f(P.target.result)},Y&&(L.onprogress=Y),C?L.readAsArrayBuffer(P):L.readAsText(P),o},c=(P,f,Y,C,q,w,d)=>{if(P.name)return v(P,f,Y,q,w?P=>{w(void 0,P)}:void 0);const R=P;if(-1!==R.indexOf("file:")){let P=decodeURIComponent(R.substring(5).toLowerCase());0===P.indexOf("./")&&(P=P.substring(2));const C=L.FilesToLoad[P];if(C)return v(C,f,Y,q,w?P=>w(void 0,new S(P.message,P.file)):void 0)}const{match:i,type:u}=e(R);if(i){const P={onCompleteObservable:new m.e,abort:()=>()=>{}};try{const P=q?s(R):a(R);f(P,void 0,u)}catch(o){w?w(void 0,o):y.e.Error(o.message||"Failed to parse the Data URL")}return r.b.SetImmediate((()=>{P.onCompleteObservable.notifyObservers(P)})),P}return T(R,((P,Y)=>{f(P,null===Y||void 0===Y?void 0:Y.responseURL,null===Y||void 0===Y?void 0:Y.getResponseHeader("content-type"))}),Y,C,q,w?P=>{w(P.request,new S(P.message,P.request))}:void 0,d)},T=(P,f,Y,L,o,w,d)=>{P=V.CleanUrl(P),P=V.PreprocessUrl(P);const R=V.BaseUrl+P;let r=!1;const i={onCompleteObservable:new m.e,abort:()=>r=!0},u=()=>{let P,m=new C.d,L=null;const u=()=>{m&&(Y&&m.removeEventListener("progress",Y),P&&m.removeEventListener("readystatechange",P),m.removeEventListener("loadend",g))};let g=()=>{u(),i.onCompleteObservable.notifyObservers(i),i.onCompleteObservable.clear(),Y=void 0,P=null,g=null,w=void 0,d=void 0,f=void 0};i.abort=()=>{r=!0,g&&g(),m&&m.readyState!==(XMLHttpRequest.DONE||4)&&m.abort(),null!==L&&(clearTimeout(L),L=null),m=null};const S=P=>{const f=P.message||"Unknown error";w&&m?w(new K(f,m)):y.e.Error(f)},M=y=>{if(m){if(m.open("GET",R),d)try{d(m)}catch(i){return void S(i)}o&&(m.responseType="arraybuffer"),Y&&m.addEventListener("progress",Y),g&&m.addEventListener("loadend",g),P=()=>{if(!r&&m&&m.readyState===(XMLHttpRequest.DONE||4)){if(P&&m.removeEventListener("readystatechange",P),m.status>=200&&m.status<300||0===m.status&&(!(0,q.j)()||D())){const P=o?m.response:m.responseText;if(null!==P){try{f&&f(P,m)}catch(i){S(i)}return}}const Y=V.DefaultRetryStrategy;if(Y){const P=Y(R,m,y);if(-1!==P)return u(),m=new C.d,void(L=setTimeout((()=>M(y+1)),P))}const d=new K("Error status: "+m.status+" "+m.statusText+" - Unable to load "+R,m);w&&w(d)}},m.addEventListener("readystatechange",P),m.send()}};M(0)};if(L&&L.enableSceneOffline){const C=P=>{P&&P.status>400?w&&w(P):u()},q=()=>{L&&L.loadFile(V.BaseUrl+P,(P=>{!r&&f&&f(P),i.onCompleteObservable.notifyObservers(i)}),Y?P=>{!r&&Y&&Y(P)}:void 0,C,o)};L.open(q,C)}else u();return i},U=P=>{const{match:f,type:Y}=e(P);if(f)return Y||void 0;const C=P.lastIndexOf(".");switch(P.substring(C+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"jf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},D=()=>"undefined"!==typeof location&&"file:"===location.protocol,j=P=>g.test(P),e=P=>{const f=g.exec(P);if(null===f||0===f.length)return{match:!1,type:""};return{match:!0,type:f[0].replace("data:","").replace("base64,","")}};function s(P){return(0,w.b)(P.split(",")[1])}const a=P=>(0,w.f)(P.split(",")[1]);let Q;u.c._FileToolsLoadImage=l,i.d.loadFile=c,d.p.loadFile=c;((P,f,Y,C,q,m,L,o,w,d)=>{Q={DecodeBase64UrlToBinary:P,DecodeBase64UrlToString:f,DefaultRetryStrategy:Y.DefaultRetryStrategy,BaseUrl:Y.BaseUrl,CorsBehavior:Y.CorsBehavior,PreprocessUrl:Y.PreprocessUrl,IsBase64DataUrl:C,IsFileURL:q,LoadFile:m,LoadImage:L,ReadFile:o,RequestFile:w,SetCorsBehavior:d},Object.defineProperty(Q,"DefaultRetryStrategy",{get:function(){return Y.DefaultRetryStrategy},set:function(P){Y.DefaultRetryStrategy=P}}),Object.defineProperty(Q,"BaseUrl",{get:function(){return Y.BaseUrl},set:function(P){Y.BaseUrl=P}}),Object.defineProperty(Q,"PreprocessUrl",{get:function(){return Y.PreprocessUrl},set:function(P){Y.PreprocessUrl=P}}),Object.defineProperty(Q,"CorsBehavior",{get:function(){return Y.CorsBehavior},set:function(P){Y.CorsBehavior=P}})})(s,a,V,j,D,c,l,v,T,O)},11139:(P,f,Y)=>{function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(P=>{const f=16*Math.random()|0;return("x"===P?f:3&f|8).toString(16)}))}Y.d(f,{b:()=>C})},11132:(P,f,Y)=>{Y.d(f,{c:()=>m});var C=Y(11025),q=Y(11134);class m{static Instantiate(P){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[P])return this.RegisteredExternalClasses[P];const f=(0,q.c)(P);if(f)return f;C.e.Warn(P+" not found, you may have missed an import.");const Y=P.split(".");let m=window||this;for(let C=0,q=Y.length;C<q;C++)m=m[Y[C]];return"function"!==typeof m?null:m}}m.RegisteredExternalClasses={}},11035:(P,f,Y)=>{Y.d(f,{e:()=>q});var C=Y(11021);class q{static get Now(){return(0,C.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11071:(P,f,Y)=>{Y.d(f,{b:()=>L,f:()=>m,i:()=>C,j:()=>q});const C=P=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(P);let f="";for(let Y=0;Y<P.byteLength;Y++)f+=String.fromCharCode(P[Y]);return f},q=P=>{const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Y,C,q,m,L,o,w,d="",R=0;const y=ArrayBuffer.isView(P)?new Uint8Array(P.buffer,P.byteOffset,P.byteLength):new Uint8Array(P);for(;R<y.length;)Y=y[R++],C=R<y.length?y[R++]:Number.NaN,q=R<y.length?y[R++]:Number.NaN,m=Y>>2,L=(3&Y)<<4|C>>4,o=(15&C)<<2|q>>6,w=63&q,isNaN(C)?o=w=64:isNaN(q)&&(w=64),d+=f.charAt(m)+f.charAt(L)+f.charAt(o)+f.charAt(w);return d},m=P=>atob(P),L=P=>{const f=m(P),Y=f.length,C=new Uint8Array(new ArrayBuffer(Y));for(let q=0;q<Y;q++)C[q]=f.charCodeAt(q);return C.buffer}},11147:(P,f,Y)=>{function C(P){let f=1;do{f*=2}while(f<P);return f===P}function q(P,f,Y){return P*(1-Y)+f*Y}function m(P){const f=L(P),Y=o(P);return f-P>P-Y?Y:f}function L(P){return P--,P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,P|=P>>16,++P}function o(P){return P|=P>>1,P|=P>>2,P|=P>>4,P|=P>>8,(P|=P>>16)-(P>>1)}function w(P,f){let Y;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:Y=o(P);break;case 2:Y=m(P);break;default:Y=L(P)}return Math.min(Y,f)}Y.d(f,{d:()=>o,e:()=>w,h:()=>C,l:()=>q,p:()=>m})},11014:(P,f,Y)=>{Y.r(f),Y.d(f,{AsyncLoop:()=>M,Tools:()=>S,className:()=>K});var C=Y(11018),q=Y(11021),m=Y(11025),L=Y(11031),o=Y(11035),w=Y(11043),d=Y(11046),R=Y(11052),y=Y(11059),r=Y(11087),i=Y(11132),u=Y(11139),g=Y(11147);class S{static get BaseUrl(){return y.g.BaseUrl}static set BaseUrl(P){y.g.BaseUrl=P}static get CleanUrl(){return y.g.CleanUrl}static set CleanUrl(P){y.g.CleanUrl=P}static IsAbsoluteUrl(P){return 0===P.indexOf("//")||-1!==P.indexOf("://")&&(-1!==P.indexOf(".")&&(-1!==P.indexOf("/")&&(!(P.indexOf(":")>P.indexOf("/"))&&(P.indexOf("://")<P.indexOf(".")||(0===P.indexOf("data:")||0===P.indexOf("blob:"))))))}static set ScriptBaseUrl(P){y.g.ScriptBaseUrl=P}static get ScriptBaseUrl(){return y.g.ScriptBaseUrl}static set CDNBaseUrl(P){S.ScriptBaseUrl=P,S.AssetBaseUrl=P}static set ScriptPreprocessUrl(P){y.g.ScriptPreprocessUrl=P}static get ScriptPreprocessUrl(){return y.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return y.g.DefaultRetryStrategy}static set DefaultRetryStrategy(P){y.g.DefaultRetryStrategy=P}static get CorsBehavior(){return y.g.CorsBehavior}static set CorsBehavior(P){y.g.CorsBehavior=P}static get UseFallbackTexture(){return R.e.UseFallbackTexture}static set UseFallbackTexture(P){R.e.UseFallbackTexture=P}static get RegisteredExternalClasses(){return i.c.RegisteredExternalClasses}static set RegisteredExternalClasses(P){i.c.RegisteredExternalClasses=P}static get fallbackTexture(){return R.e.FallbackTexture}static set fallbackTexture(P){R.e.FallbackTexture=P}static FetchToRef(P,f,Y,C,q,m){const L=4*((Math.abs(P)*Y%Y|0)+(Math.abs(f)*C%C|0)*Y);m.r=q[L]/255,m.g=q[L+1]/255,m.b=q[L+2]/255,m.a=q[L+3]/255}static Mix(P,f,Y){return 0}static Instantiate(P){return i.c.Instantiate(P)}static SetImmediate(P){r.b.SetImmediate(P)}static IsExponentOfTwo(P){return!0}static FloatRound(P){return Math.fround(P)}static GetFilename(P){const f=P.lastIndexOf("/");return f<0?P:P.substring(f+1)}static GetFolderPath(P){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Y=P.lastIndexOf("/");return Y<0?f?P:"":P.substring(0,Y+1)}static ToDegrees(P){return 180*P/Math.PI}static ToRadians(P){return P*Math.PI/180}static SmoothAngleChange(P,f){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const C=this.ToRadians(P),q=this.ToRadians(f);return this.ToDegrees(Math.atan2((1-Y)*Math.sin(q)+Y*Math.sin(C),(1-Y)*Math.cos(q)+Y*Math.cos(C)))}static MakeArray(P,f){return!0===f||void 0!==P&&null!=P?Array.isArray(P)?P:[P]:null}static GetPointerPrefix(P){return(0,q.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(P,f){(0,y.A)(P,f)}static SetReferrerPolicyBehavior(P,f){f.referrerPolicy=P}static get PreprocessUrl(){return y.g.PreprocessUrl}static set PreprocessUrl(P){y.g.PreprocessUrl=P}static LoadImage(P,f,Y,C,q,m){return(0,y.q)(P,f,Y,C,q,m)}static LoadFile(P,f,Y,C,q,m){return(0,y.o)(P,f,Y,C,q,m)}static async LoadFileAsync(P){let f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((Y,C)=>{(0,y.o)(P,(P=>{Y(P)}),void 0,void 0,f,((P,f)=>{C(f)}))}))}static GetAssetUrl(P){if(!P)return"";if(S.AssetBaseUrl&&P.startsWith(S._DefaultAssetsUrl)){const f="/"===S.AssetBaseUrl[S.AssetBaseUrl.length-1]?S.AssetBaseUrl.substring(0,S.AssetBaseUrl.length-1):S.AssetBaseUrl;return P.replace(S._DefaultAssetsUrl,f)}return P}static GetBabylonScriptURL(P,f){if(!P)return"";if(S.ScriptBaseUrl&&P.startsWith(S._DefaultCdnUrl)){const f="/"===S.ScriptBaseUrl[S.ScriptBaseUrl.length-1]?S.ScriptBaseUrl.substring(0,S.ScriptBaseUrl.length-1):S.ScriptBaseUrl;P=P.replace(S._DefaultCdnUrl,f)}return P=S.ScriptPreprocessUrl(P),f&&(P=S.GetAbsoluteUrl(P)),P}static LoadBabylonScript(P,f,Y,C){P=S.GetBabylonScriptURL(P),S.LoadScript(P,f,Y)}static async LoadBabylonScriptAsync(P){return P=S.GetBabylonScriptURL(P),await S.LoadScriptAsync(P)}static LoadScript(P,f,Y,C){let m=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(P),f&&f()}catch(w){null===Y||void 0===Y||Y(`Unable to load script '${P}' in worker`,w)}return}if(!(0,q.j)())return void(null===Y||void 0===Y||Y(`Cannot load script '${P}' outside of a window or a worker`));const L=document.getElementsByTagName("head")[0],o=document.createElement("script");m?(o.setAttribute("type","module"),o.innerText=P):(o.setAttribute("type","text/javascript"),o.setAttribute("src",P)),C&&(o.id=C),o.onload=()=>{f&&f()},o.onerror=f=>{Y&&Y(`Unable to load script '${P}'`,f)},L.appendChild(o)}static async LoadScriptAsync(P,f){return await new Promise(((Y,C)=>{this.LoadScript(P,(()=>{Y()}),((P,f)=>{C(f||new Error(P))}),f)}))}static ReadFileAsDataURL(P,f,Y){const q=new FileReader,m={onCompleteObservable:new C.e,abort:()=>q.abort()};return q.onloadend=()=>{m.onCompleteObservable.notifyObservers(m)},q.onload=P=>{f(P.target.result)},q.onprogress=Y,q.readAsDataURL(P),m}static ReadFile(P,f,Y,C,q){return(0,y.u)(P,f,Y,C,q)}static FileAsURL(P){const f=new Blob([P]);return window.URL.createObjectURL(f)}static Format(P){let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return P.toFixed(f)}static DeepCopy(P,f,Y,C){L.e.DeepCopy(P,f,Y,C)}static IsEmpty(P){for(const f in P)if(Object.prototype.hasOwnProperty.call(P,f))return!1;return!0}static RegisterTopRootEvents(P,f){for(let C=0;C<f.length;C++){const q=f[C];P.addEventListener(q.name,q.handler,!1);try{window.parent&&window.parent.addEventListener(q.name,q.handler,!1)}catch(Y){}}}static UnregisterTopRootEvents(P,f){for(let C=0;C<f.length;C++){const q=f[C];P.removeEventListener(q.name,q.handler);try{P.parent&&P.parent.removeEventListener(q.name,q.handler)}catch(Y){}}}static async DumpFramebuffer(P,f,Y,C){throw(0,w.b)("DumpTools")}static DumpData(P,f,Y,C){throw(0,w.b)("DumpTools")}static async DumpDataAsync(P,f,Y){throw(0,w.b)("DumpTools")}static _IsOffScreenCanvas(P){return void 0!==P.convertToBlob}static ToBlob(P,f){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0;S._IsOffScreenCanvas(P)||P.toBlob||(P.toBlob=function(P,f,Y){setTimeout((()=>{const C=atob(this.toDataURL(f,Y).split(",")[1]),q=C.length,m=new Uint8Array(q);for(let P=0;P<q;P++)m[P]=C.charCodeAt(P);P(new Blob([m]))}))}),S._IsOffScreenCanvas(P)?P.convertToBlob({type:Y,quality:C}).then((P=>f(P))):P.toBlob((function(P){f(P)}),Y,C)}static DownloadBlob(P,f){if("download"in document.createElement("a")){if(!f){const P=new Date;f="screenshot_"+((P.getFullYear()+"-"+(P.getMonth()+1)).slice(2)+"-"+P.getDate()+"_"+P.getHours()+"-"+("0"+P.getMinutes()).slice(-2))+".png"}S.Download(P,f)}else if(P&&"undefined"!==typeof URL){const f=URL.createObjectURL(P),Y=window.open("");if(!Y)return;const C=Y.document.createElement("img");C.onload=function(){URL.revokeObjectURL(f)},C.src=f,Y.document.body.appendChild(C)}}static EncodeScreenshotCanvasData(P,f){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",C=arguments.length>3?arguments[3]:void 0,q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof C&&f){if(f){if(S._IsOffScreenCanvas(P))return void P.convertToBlob({type:Y,quality:q}).then((P=>{const Y=new FileReader;Y.readAsDataURL(P),Y.onloadend=()=>{const P=Y.result;f(P)}}));const C=P.toDataURL(Y,q);f(C)}}else this.ToBlob(P,(function(P){P&&S.DownloadBlob(P,C),f&&f("")}),Y,q)}static Download(P,f){if("undefined"===typeof URL)return;const Y=window.URL.createObjectURL(P),C=document.createElement("a");document.body.appendChild(C),C.style.display="none",C.href=Y,C.download=f,C.addEventListener("click",(()=>{C.parentElement&&C.parentElement.removeChild(C)})),C.click(),window.URL.revokeObjectURL(Y)}static BackCompatCameraNoPreventDefault(P){return"boolean"===typeof P[0]?P[0]:"boolean"===typeof P[1]&&P[1]}static CreateScreenshot(P,f,Y,C){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotAsync(P,f,Y){throw(0,w.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(P,f,Y,C){throw(0,w.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(P,f,Y){throw(0,w.b)("ScreenshotTools")}static RandomId(){return(0,u.b)()}static IsBase64(P){return(0,y.j)(P)}static DecodeBase64(P){return(0,y.e)(P)}static get errorsCount(){return m.e.errorsCount}static Log(P){m.e.Log(P)}static Warn(P){m.e.Warn(P)}static Error(P){m.e.Error(P)}static get LogCache(){return m.e.LogCache}static ClearLogCache(){m.e.ClearLogCache()}static set LogLevels(P){m.e.LogLevels=P}static set PerformanceLogLevel(P){return(P&S.PerformanceUserMarkLogLevel)===S.PerformanceUserMarkLogLevel?(S.StartPerformanceCounter=S._StartUserMark,void(S.EndPerformanceCounter=S._EndUserMark)):(P&S.PerformanceConsoleLogLevel)===S.PerformanceConsoleLogLevel?(S.StartPerformanceCounter=S._StartPerformanceConsole,void(S.EndPerformanceCounter=S._EndPerformanceConsole)):(S.StartPerformanceCounter=S._StartPerformanceCounterDisabled,void(S.EndPerformanceCounter=S._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(P,f){}static _EndPerformanceCounterDisabled(P,f){}static _StartUserMark(P){let f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!S._Performance){if(!(0,q.j)())return;S._Performance=window.performance}f&&S._Performance.mark&&S._Performance.mark(P+"-Begin")}static _EndUserMark(P){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&S._Performance.mark&&(S._Performance.mark(P+"-End"),S._Performance.measure(P,P+"-Begin",P+"-End"))}static _StartPerformanceConsole(P){let f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f&&(S._StartUserMark(P,f),console.time&&console.time(P))}static _EndPerformanceConsole(P){let f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f&&(S._EndUserMark(P,f),console.timeEnd(P))}static get Now(){return o.e.Now}static GetClassName(P){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Y=null;if(!f&&P.getClassName)Y=P.getClassName();else{if(P instanceof Object){Y=(f?P:Object.getPrototypeOf(P)).constructor.__bjsclassName__}Y||(Y=typeof P)}return Y}static First(P,f){for(const Y of P)if(f(Y))return Y;return null}static getFullClassName(P){let f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Y=null,C=null;if(!f&&P.getClassName)Y=P.getClassName();else{if(P instanceof Object){const q=f?P:Object.getPrototypeOf(P);Y=q.constructor.__bjsclassName__,C=q.constructor.__bjsmoduleName__}Y||(Y=typeof P)}return Y?(null!=C?C+".":"")+Y:null}static async DelayAsync(P){await new Promise((f=>{setTimeout((()=>{f()}),P)}))}static IsSafari(){return!!(0,q.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function K(P,f){return Y=>{Y.__bjsclassName__=P,Y.__bjsmoduleName__=null!=f?f:null}}S.AssetBaseUrl="",S.UseCustomRequestHeaders=!1,S.CustomRequestHeaders=d.d.CustomRequestHeaders,S.GetDOMTextContent=q.d,S._DefaultCdnUrl="https://cdn.babylonjs.com",S._DefaultAssetsUrl="https://assets.babylonjs.com/core",S.GetAbsoluteUrl="object"===typeof document?P=>{const f=document.createElement("a");return f.href=P,f.href}:"function"===typeof URL&&"object"===typeof location?P=>new URL(P,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},S.NoneLogLevel=m.e.NoneLogLevel,S.MessageLogLevel=m.e.MessageLogLevel,S.WarningLogLevel=m.e.WarningLogLevel,S.ErrorLogLevel=m.e.ErrorLogLevel,S.AllLogLevel=m.e.AllLogLevel,S.IsWindowObjectExist=q.j,S.PerformanceNoneLogLevel=0,S.PerformanceUserMarkLogLevel=1,S.PerformanceConsoleLogLevel=2,S.StartPerformanceCounter=S._StartPerformanceCounterDisabled,S.EndPerformanceCounter=S._EndPerformanceCounterDisabled;class M{constructor(P,f,Y){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=P,this.index=C-1,this._done=!1,this._fn=f,this._successCallback=Y}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(P,f,Y){const C=new M(P,f,Y,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return C.executeNext(),C}static SyncAsyncForLoop(P,f,Y,C,q){let m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return M.Run(Math.ceil(P/f),(C=>{q&&q()?C.breakLoop():setTimeout((()=>{for(let m=0;m<f;++m){const L=C.index*f+m;if(L>=P)break;if(Y(L),q&&q()){C.breakLoop();break}}C.executeNext()}),m)}),C)}}S.Mix=g.l,S.IsExponentOfTwo=g.h,R.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11134:(P,f,Y)=>{Y.d(f,{c:()=>m,d:()=>q});const C={};function q(P,f){C[P]=f}function m(P){return C[P]}},11046:(P,f,Y)=>{Y.d(f,{d:()=>C});class C{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(C.CustomRequestHeaders).length>0||C.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const P in C.CustomRequestHeaders){const f=C.CustomRequestHeaders[P];f&&this._xhr.setRequestHeader(P,f)}}_shouldSkipRequestModifications(P){return C.SkipRequestModificationForBabylonCDN&&(P.includes("preview.babylonjs.com")||P.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(P){this._xhr.onprogress=P}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(P){this._xhr.responseType=P}get timeout(){return this._xhr.timeout}set timeout(P){this._xhr.timeout=P}addEventListener(P,f,Y){this._xhr.addEventListener(P,f,Y)}removeEventListener(P,f,Y){this._xhr.removeEventListener(P,f,Y)}abort(){this._xhr.abort()}send(P){C.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(P)}open(P,f){for(const Y of C.CustomRequestModifiers){if(this._shouldSkipRequestModifications(f))return;f=Y(this._xhr,f)||f}f=(f=f.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=f,this._xhr.open(P,f,!0)}setRequestHeader(P,f){this._xhr.setRequestHeader(P,f)}getResponseHeader(P){return this._xhr.getResponseHeader(P)}}C.CustomRequestHeaders={},C.CustomRequestModifiers=new Array,C.SkipRequestModificationForBabylonCDN=!0}}]);