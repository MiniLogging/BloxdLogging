"use strict";(self.i6szn8jgzh=self.i6szn8jgzh||[]).push([[8],{11676:(b,n,i)=>{i.d(n,{b:()=>d});var e=i(11646),V=i(11621),Q=i(11683),U=i(11701),Y=i(11628);class L{constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,b&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(b){this._zOffset!==b&&(this._zOffset=b,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(b){this._zOffsetUnits!==b&&(this._zOffsetUnits=b,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(b){this._cullFace!==b&&(this._cullFace=b,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(b){this._cull!==b&&(this._cull=b,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(b){this._depthFunc!==b&&(this._depthFunc=b,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(b){this._depthMask!==b&&(this._depthMask=b,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(b){this._depthTest!==b&&(this._depthTest=b,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(b){this._frontFace!==b&&(this._frontFace=b,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(b){this.isDirty&&(this._isCullDirty&&(this.cull?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(b.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(b.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(b.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(b.enable(b.POLYGON_OFFSET_FILL),b.polygonOffset(this.zOffset,this.zOffsetUnits)):b.disable(b.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(b.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class B{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(b){this._func!==b&&(this._func=b,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(b){this._funcRef!==b&&(this._funcRef=b,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(b){this._funcMask!==b&&(this._funcMask=b,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(b){this._opStencilFail!==b&&(this._opStencilFail=b,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(b){this._opDepthFail!==b&&(this._opDepthFail=b,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(b){this._opStencilDepthPass!==b&&(this._opStencilDepthPass=b,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(b){this._mask!==b&&(this._mask=b,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(b){this._enabled!==b&&(this._enabled=b,this._isStencilTestDirty=!0)}constructor(){let b=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,b&&this.reset()}reset(){var b;this.stencilMaterial=void 0,null===(b=this.stencilGlobal)||void 0===b||b.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(b){var n;if(!b)return;const i=!this.useStencilGlobalOnly&&!(null===(n=this.stencilMaterial)||void 0===n||!n.enabled);this.enabled=i?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=i?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=i?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=i?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=i?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=i?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=i?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=i?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(b.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(b.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(b.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class mb{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=mb.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=mb.KEEP,this.opDepthFail=mb.KEEP,this.opStencilDepthPass=mb.REPLACE}get stencilFunc(){return this.func}set stencilFunc(b){this.func=b}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(b){this.funcRef=b}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(b){this.funcMask=b}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(b){this.opStencilFail=b}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(b){this.opDepthFail=b}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(b){this.opStencilDepthPass=b}get stencilMask(){return this.mask}set stencilMask(b){this.mask=b}get stencilTest(){return this.enabled}set stencilTest(b){this.enabled=b}}mb.ALWAYS=519,mb.KEEP=7680,mb.REPLACE=7681;class N{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(b){this._alphaBlend!==b&&(this._alphaBlend=b,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(b,n,i,e){this._blendConstants[0]===b&&this._blendConstants[1]===n&&this._blendConstants[2]===i&&this._blendConstants[3]===e||(this._blendConstants[0]=b,this._blendConstants[1]=n,this._blendConstants[2]=i,this._blendConstants[3]=e,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(b,n,i,e){this._blendFunctionParameters[0]===b&&this._blendFunctionParameters[1]===n&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===e||(this._blendFunctionParameters[0]=b,this._blendFunctionParameters[1]=n,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=e,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(b,n){this._blendEquationParameters[0]===b&&this._blendEquationParameters[1]===n||(this._blendEquationParameters[0]=b,this._blendEquationParameters[1]=n,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(b){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?b.enable(b.BLEND):b.disable(b.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(b.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(b.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(b.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var Z=i(11636),T=i(11706),z=i(11616),K=i(11612),I=i(11672),O=i(11721);function u(b,n){if((0,z.l)()){const{requestAnimationFrame:i}=n||window;if("function"===typeof i)return i(b)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(b);return setTimeout(b,16)}class d{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(b){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(b){b!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=b,this._depthCullingState.depthFunc=b?518:515)}setColorWrite(b){b!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=b)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(b){if(b)return this.isNDCHalfZRange?b.IS_NDC_HALF_ZRANGE="":delete b.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?b.USE_REVERSE_DEPTHBUFFER="":delete b.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?b.USE_EXACT_SRGB_CONVERSIONS="":delete b.USE_EXACT_SRGB_CONVERSIONS);{let b="";return this.isNDCHalfZRange&&(b+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(b&&(b+="\n"),b+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(b&&(b+="\n"),b+="#define USE_EXACT_SRGB_CONVERSIONS"),b}}_rebuildInternalTextures(){const b=this._internalTexturesCache.slice();for(const n of b)n._rebuild()}_rebuildRenderTargetWrappers(){const b=this._renderTargetWrapperCache.slice();for(const n of b)n._rebuild()}_rebuildEffects(){for(const b in this._compiledEffects){const n=this._compiledEffects[b];n._pipelineContext=null,n._prepareEffect()}Q.Effect.ResetCache()}_rebuildGraphicsResources(){var b;this.wipeCaches(!0),this._rebuildEffects(),null===(b=this._rebuildComputeEffects)||void 0===b||b.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){V.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(b){setTimeout((()=>{this._clearEmptyResources();const n=this._depthCullingState.depthTest,i=this._depthCullingState.depthFunc,e=this._depthCullingState.depthMask,V=this._stencilState.stencilTest;b(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=n,this._depthCullingState.depthFunc=i,this._depthCullingState.depthMask=e,this._stencilState.stencilTest=V,this._flagContextRestored()}),0)}get N(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(b){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(b){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const b=new Uint8Array(4),n=[b,b,b,b,b,b];this._emptyCubeTexture=this.createRawCubeTexture(n,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(b){if(!b)return this._activeRenderLoops.length=0,void this._cancelFrame();const n=this._activeRenderLoops.indexOf(b);n>=0&&(this._activeRenderLoops.splice(n,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const b=this._frameHandler;if(this._frameHandler=0,(0,z.l)()){const{cancelAnimationFrame:n}=this.getHostWindow()||window;if("function"===typeof n)return n(b)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(b);return clearTimeout(b)}}ne(){this.onBeginFrameObservable.notifyObservers(this)}ie(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(b){this._maxFPS=b,void 0!==b&&(this._minFrameTime=b<=0?Number.MAX_VALUE:1e3/b)}_isOverFrameTime(b){if(!b||void 0===this._maxFPS)return!1;const n=b-this._lastFrameTime;return this._lastFrameTime=b,this._renderAccumulator+=n,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(b){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(b)){let b=!0;(this.N||!this.renderEvenInBackground&&this._windowIsBackground)&&(b=!1),b&&(this.ne(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ie())}}_renderLoop(b){this._processFrame(b),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let b=0;b<this._activeRenderLoops.length;b++){(0,this._activeRenderLoops[b])()}}_renderViews(){return!1}_queueNewFrame(b,n){return u(b,n)}runRenderLoop(b){-1===this._activeRenderLoops.indexOf(b)&&(this._activeRenderLoops.push(b),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(b){this._depthCullingState.depthTest=b}setZOffset(b){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-b:b}getZOffset(){const b=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-b:b}setZOffsetUnits(b){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-b:b}getZOffsetUnits(){const b=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-b:b}getHostWindow(){return(0,z.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(b){this._compatibilityMode=!0}_rebuildTextures(){for(const b of this.scenes)b._rebuildTextures();for(const b of this._virtualScenes)b._rebuildTextures()}_releaseRenderTargetWrapper(b){const n=this._renderTargetWrapperCache.indexOf(b);-1!==n&&this._renderTargetWrapperCache.splice(n,1)}get currentViewport(){return this._cachedViewport}setViewport(b,n,i){const e=n||this.getRenderWidth(),V=i||this.getRenderHeight(),Q=b.x||0,U=b.y||0;this._cachedViewport=b,this._viewport(Q*e,U*V,e*b.width,V*b.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(b){return new Path2D(b)}get description(){let b=this.name+this.version;return this._caps.parallelShaderCompile&&(b+=" - Parallel shader compilation"),b}_createTextureBase(b,n,i,Q){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,L=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,B=arguments.length>7?arguments[7]:void 0,mb=arguments.length>8?arguments[8]:void 0,N=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,Z=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,z=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,K=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13?arguments[13]:void 0,u=arguments.length>14?arguments[14]:void 0,G=arguments.length>15?arguments[15]:void 0;const o="data:"===(b=b||"").substring(0,5),M="blob:"===b.substring(0,5),j=o&&-1!==b.indexOf(";base64,"),a=Z||new T.e(this,1);a!==Z&&(a.label=b.substring(0,60));const D=b;!this._transformTextureUrl||j||Z||N||(b=this._transformTextureUrl(b)),D!==b&&(a._originalUrl=D);const x=b.lastIndexOf(".");let y=K||(x>-1?b.substring(x).toLowerCase():"");y.indexOf("?")>-1&&(y=y.split("?")[0]);const s=(0,O.d)(y,I);Q&&Q.addPendingData(a),a.url=b,a.generateMipMaps=!n,a.samplingMode=U,a.invertY=i,a._useSRGBBuffer=this._getUseSRGBBuffer(!!G,n),this._doNotHandleContextLost||(a._buffer=N);let A=null;Y&&!Z&&(A=a.onLoadedObservable.add(Y)),Z||this._internalTexturesCache.push(a);const E=(i,Z)=>{Q&&Q.removePendingData(a),b===D?(A&&a.onLoadedObservable.remove(A),e.d.UseFallbackTexture&&b!==e.d.FallbackTexture&&this._createTextureBase(e.d.FallbackTexture,n,a.invertY,Q,U,null,L,B,mb,N,a),i=(i||"Unknown error")+(e.d.UseFallbackTexture?" - Fallback texture was used":""),a.onErrorObservable.notifyObservers({message:i,exception:Z}),L&&L(i,Z)):(V.b.Warn(`Failed to load ${b}, falling back to ${D}`),this._createTextureBase(D,n,a.invertY,Q,U,Y,L,B,mb,N,a,z,K,I,u,G))};if(s){const n=async b=>{(await s).loadData(b,a,((b,n,i,e,V,Y)=>{Y?E("TextureLoader failed to load data"):B(a,y,Q,{width:b,height:n},a.invertY,!i,e,(()=>(V(),!1)),U)}),u)};N?N instanceof ArrayBuffer?n(new Uint8Array(N)):ArrayBuffer.isView(N)?n(N):L&&L("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(b,(b=>{n(new Uint8Array(b))}),void 0,Q?Q.offlineProvider:void 0,!0,((b,n)=>{E("Unable to load "+(b&&b.responseURL,n))}))}else{const i=b=>{M&&!this._doNotHandleContextLost&&(a._buffer=b),B(a,y,Q,b,a.invertY,n,!1,mb,U)};!o||j?N&&("string"===typeof N.decoding||N.close)?i(N):d._FileToolsLoadImage(b||"",i,E,Q?Q.offlineProvider:null,I,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof N||N instanceof ArrayBuffer||ArrayBuffer.isView(N)||N instanceof Blob?d._FileToolsLoadImage(N,i,E,Q?Q.offlineProvider:null,I,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):N&&i(N)}return a}_rebuildBuffers(){for(const b of this._uniformBuffers)b._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,z.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const b in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,b)&&(this._boundTexturesCache[b]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(b){this._name=b}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(b){this._hardwareScalingLevel=b,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(b){this._doNotHandleContextLost=b}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(b,n,i){var V,Q;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new L,this._stencilStateComposer=new B,this._stencilState=new mb,this._alphaState=new N,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new K.e,this.onCanvasFocusObservable=new K.e,this.onNewSceneAddedObservable=new K.e,this.onResizeObservable=new K.e,this.onCanvasPointerOutObservable=new K.e,this.onEffectErrorObservable=new K.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new K.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=b=>this._renderLoop(b),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new K.e,this.onAfterShaderCompilationObservable=new K.e,this.onBeginFrameObservable=new K.e,this.onEndFrameObservable=new K.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new K.e,this.onContextRestoredObservable=new K.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Qe=new K.e,this.onReleaseEffectsObservable=new K.e,e.d.Instances.push(this),this.startTime=Y.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,U.b.SetMatrixPrecision(!!n.useHighPrecisionMatrix),(0,z.k)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=i??!1,n.antialias=b??n.antialias,n.deterministicLockstep=n.deterministicLockstep??!1,n.lockstepMaxSteps=n.lockstepMaxSteps??4,n.timeStep=n.timeStep??1/60,n.stencil=n.stencil??!0,this._audioContext=(null===(V=n.audioEngineOptions)||void 0===V?void 0:V.audioContext)??null,this._audioDestination=(null===(Q=n.audioEngineOptions)||void 0===Q?void 0:Q.audioDestination)??null,this.premultipliedAlpha=n.premultipliedAlpha??!0,this._doNotHandleContextLost=!!n.doNotHandleContextLost,this._isStencilEnable=!!n.stencil,this.useExactSrgbConversions=n.useExactSrgbConversions??!1;const Z=(0,z.l)()&&window.devicePixelRatio||1,T=n.limitDeviceRatio||Z;i=i||n.adaptToDeviceRatio||!1,this._hardwareScalingLevel=i?1/Math.min(T,Z):1,this._lastDevicePixelRatio=Z,this._creationOptions=n}resize(){let b,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const b=(0,z.l)()&&window.devicePixelRatio||1,n=this._lastDevicePixelRatio/b;this._lastDevicePixelRatio=b,this._hardwareScalingLevel*=n}if((0,z.l)()&&(0,z.h)())if(this._renderingCanvas){var e,V;const i=null===(e=(V=this._renderingCanvas).getBoundingClientRect)||void 0===e?void 0:e.call(V);b=this._renderingCanvas.clientWidth||(null===i||void 0===i?void 0:i.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,n=this._renderingCanvas.clientHeight||(null===i||void 0===i?void 0:i.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else b=window.innerWidth,n=window.innerHeight;else b=this._renderingCanvas?this._renderingCanvas.width:100,n=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(b/this._hardwareScalingLevel,n/this._hardwareScalingLevel,i)}setSize(b,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(b|=0,n|=0,!i&&this._renderingCanvas.width===b&&this._renderingCanvas.height===n)return!1;if(this._renderingCanvas.width=b,this._renderingCanvas.height=n,this.scenes){for(let b=0;b<this.scenes.length;b++){const n=this.scenes[b];for(let b=0;b<n.cameras.length;b++){n.cameras[b]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(b,n,i,e,V,Q,U,Y,L,B,mb){throw(0,Z.e)("engine.rawTexture")}createRawCubeTexture(b,n,i,e,V,Q,U,Y){throw(0,Z.e)("engine.rawTexture")}createRawTexture3D(b,n,i,e,V,Q,U,Y,L,B,mb){throw(0,Z.e)("engine.rawTexture")}createRawTexture2DArray(b,n,i,e,V,Q,U,Y,L,B,mb){throw(0,Z.e)("engine.rawTexture")}_sharedInit(b){this._renderingCanvas=b}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const b=navigator.userAgent;this.hostInformation.isMobile=-1!==b.indexOf("Mobile")||-1!==b.indexOf("Mac")&&(0,z.h)()&&"ontouchend"in document},this._checkForMobile(),(0,z.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(b){return document.createElement("video")}_reportDrawCall(){var b;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(b=this._drawCalls)||void 0===b||b.addCount(n,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(b,n){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(b,n){return createImageBitmap(b,n)}resizeImageBitmap(b,n,i){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(b){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(b,n){if("undefined"===typeof document)return new OffscreenCanvas(b,n);const i=document.createElement("canvas");return i.width=b,i.height=n,i}createCanvas(b,n){return d._CreateCanvas(b,n)}static _FileToolsLoadImage(b,n,i,e,V,Q,U){throw(0,Z.e)("FileTools")}_loadFile(b,n,i,e,V,Q){const U=(0,I.i)(b,n,i,e,V,Q);return this._activeRequests.push(U),U.onCompleteObservable.add((()=>{const b=this._activeRequests.indexOf(U);-1!==b&&this._activeRequests.splice(b,1)})),U}static _FileToolsLoadFile(b,n,i,e,V,Q){if(I.b.loadFile)return I.b.loadFile(b,n,i,e,V,Q);throw(0,Z.e)("FileTools")}dispose(){var b;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(b=this.releaseComputeEffects)||void 0===b||b.call(this),Q.Effect.ResetCache();for(const i of this._activeRequests)i.abort();this._boundRenderFunction=null,this.Qe.notifyObservers(this),this.Qe.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,z.l)()&&window.removeEventListener("resize",this._checkForMobile);const n=e.d.Instances.indexOf(this);n>=0&&e.d.Instances.splice(n,1),e.d.Instances.length||(e.d.OnEnginesDisposedObservable.notifyObservers(this),e.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(b){throw(0,Z.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(b,n){for(let i=0;i<e.d.Instances.length;i++){const V=e.d.Instances[i];for(let i=0;i<V.scenes.length;i++)V.scenes[i].markAllMaterialsAsDirty(b,n)}}}d._RenderPassIdCounter=0,d._RescalePostProcessFactory=null,d.CollisionsEpsilon=.001,d.QueueNewFrame=u},11646:(b,n,i)=>{i.d(n,{d:()=>V});var e=i(11612);class V{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}V.Instances=[],V.OnEnginesDisposedObservable=new e.e,V._LastCreatedScene=null,V.UseFallbackTexture=!0,V.FallbackTexture=""},11701:(b,n,i)=>{i.d(n,{b:()=>e});class e{static SetMatrixPrecision(b){if(e.MatrixTrackPrecisionChange=!1,b&&!e.MatrixUse64Bits&&e.MatrixTrackedMatrices)for(let n=0;n<e.MatrixTrackedMatrices.length;++n){const b=e.MatrixTrackedMatrices[n],i=b.Ue;b.Ue=new Array(16);for(let n=0;n<16;++n)b.Ue[n]=i[n]}e.MatrixUse64Bits=b,e.MatrixCurrentType=e.MatrixUse64Bits?Array:Float32Array,e.MatrixTrackedMatrices=null}}e.MatrixUse64Bits=!1,e.MatrixTrackPrecisionChange=!0,e.MatrixCurrentType=Float32Array,e.MatrixTrackedMatrices=[]},11721:(b,n,i)=>{i.d(n,{d:()=>U});var e=i(11621);const V=new Map;function Q(b,n){(function(b){return V.delete(b)})(b)&&e.b.Warn(`Extension with the name '${b}' already exists`),V.set(b,n)}function U(b,n){"image/ktx"!==n&&"image/ktx2"!==n||(b=".ktx"),V.has(b)||(b.endsWith(".ies")&&Q(".ies",(async()=>await i.e(15).then(i.bind(i,14288)).then((b=>new b._IESTextureLoader)))),b.endsWith(".dds")&&Q(".dds",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(28)]).then(i.bind(i,14295)).then((b=>new b._DDSTextureLoader)))),b.endsWith(".basis")&&Q(".basis",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(47)]).then(i.bind(i,14310)).then((b=>new b._BasisTextureLoader)))),b.endsWith(".env")&&Q(".env",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(23),i.e(21),i.e(45),i.e(48)]).then(i.bind(i,14313)).then((b=>new b._ENVTextureLoader)))),b.endsWith(".hdr")&&Q(".hdr",(async()=>await Promise.all([i.e(14),i.e(49)]).then(i.bind(i,14320)).then((b=>new b._HDRTextureLoader)))),(b.endsWith(".ktx")||b.endsWith(".ktx2"))&&(Q(".ktx",(async()=>await i.e(30).then(i.bind(i,14326)).then((b=>new b._KTXTextureLoader)))),Q(".ktx2",(async()=>await i.e(30).then(i.bind(i,14326)).then((b=>new b._KTXTextureLoader))))),b.endsWith(".tga")&&Q(".tga",(async()=>await i.e(50).then(i.bind(i,14328)).then((b=>new b._TGATextureLoader)))),b.endsWith(".exr")&&Q(".exr",(async()=>await i.e(16).then(i.bind(i,14331)).then((b=>new b._ExrTextureLoader)))));const e=V.get(b);return e?Promise.resolve(e(n)):null}},11706:(b,n,i)=>{i.d(n,{e:()=>U});var e,V=i(11612),Q=i(11713);!function(b){b[b.Unknown=0]="Unknown",b[b.Url=1]="Url",b[b.Temp=2]="Temp",b[b.Raw=3]="Raw",b[b.Dynamic=4]="Dynamic",b[b.RenderTarget=5]="RenderTarget",b[b.MultiRenderTarget=6]="MultiRenderTarget",b[b.Cube=7]="Cube",b[b.CubeRaw=8]="CubeRaw",b[b.CubePrefiltered=9]="CubePrefiltered",b[b.Raw3D=10]="Raw3D",b[b.Raw2DArray=11]="Raw2DArray",b[b.DepthStencil=12]="DepthStencil",b[b.CubeRawRGBD=13]="CubeRawRGBD",b[b.Depth=14]="Depth"}(e||(e={}));class U extends Q.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(b){this.generateMipMaps=b}get uniqueId(){return this._uniqueId}_setUniqueId(b){this._uniqueId=b}getEngine(){return this._engine}get source(){return this._source}constructor(b,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new V.e,this.onErrorObservable=new V.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=b,this._source=n,this._uniqueId=U._Counter++,i||(this._hardwareTexture=b._createHardwareTexture())}incrementReferences(){this._references++}updateSize(b,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,b,n,i),this.width=b,this.height=n,this.depth=i,this.baseWidth=b,this.baseHeight=n,this.baseDepth=i,this._size=b*n*i}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const b=this.onRebuildCallback(this),n=n=>{n._swapAndDie(this,!1),this.isReady=b.isReady};return void(b.isAsync?b.proxy.then(n):n(b.proxy))}let b;switch(this.source){case 2:case 12:case 14:break;case 1:return void(b=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(b=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:b=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),b._swapAndDie(this,!1),this.isReady=!0;break;case 10:b=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 11:b=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),b._swapAndDie(this,!1),this.isReady=!0;break;case 4:b=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),b._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(b=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:b=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),b._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return b=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(b=>{b&&b._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(b._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(b){var n;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(n=this._hardwareTexture)||void 0===n||n.setUsage(b._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),b._hardwareTexture=this._hardwareTexture,i&&(b._isRGBD=this._isRGBD),this._lodTextureHigh&&(b._lodTextureHigh&&b._lodTextureHigh.dispose(),b._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(b._lodTextureMid&&b._lodTextureMid.dispose(),b._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(b._lodTextureLow&&b._lodTextureLow.dispose(),b._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(b._irradianceTexture&&b._irradianceTexture.dispose(),b._irradianceTexture=this._irradianceTexture);const e=this._engine.getLoadedTexturesCache();let V=e.indexOf(this);-1!==V&&e.splice(V,1),V=e.indexOf(b),-1===V&&e.push(b)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}U._Counter=0},11713:(b,n,i)=>{i.d(n,{d:()=>e});class e{get wrapU(){return this._cachedWrapU}set wrapU(b){this._cachedWrapU=b}get wrapV(){return this._cachedWrapV}set wrapV(b){this._cachedWrapV=b}get wrapR(){return this._cachedWrapR}set wrapR(b){this._cachedWrapR=b}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(b){this._cachedAnisotropicFilteringLevel=b}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(b){this._comparisonFunction=b}get useMipMaps(){return this._useMipMaps}set useMipMaps(b){this._useMipMaps=b}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,V=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=b,this._cachedWrapV=n,this._cachedWrapR=i,this._cachedAnisotropicFilteringLevel=e,this.samplingMode=V,this._comparisonFunction=Q,this}compareSampler(b){return this._cachedWrapU===b._cachedWrapU&&this._cachedWrapV===b._cachedWrapV&&this._cachedWrapR===b._cachedWrapR&&this._cachedAnisotropicFilteringLevel===b._cachedAnisotropicFilteringLevel&&this.samplingMode===b.samplingMode&&this._comparisonFunction===b._comparisonFunction&&this._useMipMaps===b._useMipMaps}}},11625:(b,n,i)=>{i.d(n,{e:()=>Q});var e=i(11621);const V=(b,n,i)=>b?b.getClassName&&"Mesh"===b.getClassName()?null:!b.getClassName||"SubMesh"!==b.getClassName()&&"PhysicsBody"!==b.getClassName()?b.clone?b.clone():Array.isArray(b)?b.slice():i&&"object"===typeof b?{...b}:null:b.clone(n):null;class Q{static DeepCopy(b,n,i,Q){let U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const Y=function(b){const n=[];do{const i=Object.getOwnPropertyNames(b);for(const b of i)-1===n.indexOf(b)&&n.push(b)}while(b=Object.getPrototypeOf(b));return n}(b);for(const B of Y){if("_"===B[0]&&(!Q||-1===Q.indexOf(B)))continue;if(B.endsWith("Observable"))continue;if(i&&-1!==i.indexOf(B))continue;const Y=b[B],mb=typeof Y;if("function"!==mb)try{if("object"===mb)if(Y instanceof Uint8Array)n[B]=Uint8Array.from(Y);else if(Y instanceof Array){if(n[B]=[],Y.length>0)if("object"==typeof Y[0])for(let b=0;b<Y.length;b++){const i=V(Y[b],n,U);-1===n[B].indexOf(i)&&n[B].push(i)}else n[B]=Y.slice(0)}else n[B]=V(Y,n,U);else n[B]=Y}catch(L){e.b.Warn(L.message)}}}}},11659:(b,n,i)=>{i.d(n,{c:()=>e,g:()=>V,k:()=>Q});class e extends Error{}e._setPrototypeOf=Object.setPrototypeOf||((b,n)=>(b.__proto__=n,b));const V={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class Q extends e{constructor(b,n,i){super(b),this.errorCode=n,this.innerError=i,this.name="RuntimeError",e._setPrototypeOf(this,Q.prototype)}}},11655:(b,n,i)=>{i.d(n,{d:()=>E,f:()=>d,g:()=>x,h:()=>s,l:()=>a,i:()=>I,p:()=>M,s:()=>j,w:()=>D,z:()=>G});var e=i(11639),V=i(11616),Q=i(11612);class U{}U.FilesToLoad={};var Y=i(11659),L=i(11662),B=i(11667),mb=i(11646),N=i(11621),Z=i(11674),T=i(11672),z=i(11676);const K=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class I extends Y.k{constructor(b,n){super(b,Y.g.LoadFileError),this.name="LoadFileError",Y.c._setPrototypeOf(this,I.prototype),n instanceof e.e?this.request=n:this.file=n}}class O extends Y.k{constructor(b,n){super(b,Y.g.RequestFileError),this.request=n,this.name="RequestFileError",Y.c._setPrototypeOf(this,O.prototype)}}class u extends Y.k{constructor(b,n){super(b,Y.g.ReadFileError),this.file=n,this.name="ReadFileError",Y.c._setPrototypeOf(this,u.prototype)}}const d={DefaultRetryStrategy:class{static ExponentialBackoff(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(i,e,V)=>0!==e.status||V>=b||-1!==i.indexOf("file:")?-1:Math.pow(2,V)*n}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:b=>b,ScriptBaseUrl:"",ScriptPreprocessUrl:b=>b,CleanUrl:b=>b=b.replace(/#/gm,"%23")},G=(b,n)=>{if((!b||0!==b.indexOf("data:"))&&d.CorsBehavior)if("string"===typeof d.CorsBehavior||d.CorsBehavior instanceof String)n.crossOrigin=d.CorsBehavior;else{const i=d.CorsBehavior(b);i&&(n.crossOrigin=i)}},o={getRequiredSize:null},M=function(b,n,i,V){let Q,Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",B=arguments.length>5?arguments[5]:void 0,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mb.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===N||void 0===N||!N._features.forceBitmapOverHTMLImageElement))return i("LoadImage is only supported in web or BabylonNative environments."),null;let Z=!1;b instanceof ArrayBuffer||ArrayBuffer.isView(b)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(Q=URL.createObjectURL(new Blob([b],{type:Y})),Z=!0):Q=`data:${Y};base64,`+(0,L.k)(b):b instanceof Blob?(Q=URL.createObjectURL(b),Z=!0):(Q=d.CleanUrl(b),Q=d.PreprocessUrl(Q));const T=n=>{if(i){const e=Q||b.toString();i(`Error while trying to load image: ${0===e.indexOf("http")||e.length<=128?e:e.slice(0,128)+"..."}`,n)}};if(null!==N&&void 0!==N&&N._features.forceBitmapOverHTMLImageElement)return a(Q,(e=>{N.createImageBitmap(new Blob([e],{type:Y}),{premultiplyAlpha:"none",...B}).then((b=>{n(b),Z&&URL.revokeObjectURL(Q)})).catch((n=>{i&&i("Error while trying to load image: "+b,n)}))}),void 0,V||void 0,!0,((b,n)=>{T(n)})),null;const z=new Image;if(o.getRequiredSize){const n=o.getRequiredSize(b);n.width&&(z.width=n.width),n.height&&(z.height=n.height)}G(Q,z);const K=[],I=()=>{for(const b of K)b.target.removeEventListener(b.name,b.handler);K.length=0};K.push({target:z,name:"load",handler:()=>{I(),n(z),Z&&z.src&&URL.revokeObjectURL(z.src)}}),K.push({target:z,name:"error",handler:b=>{I(),T(b),Z&&z.src&&URL.revokeObjectURL(z.src)}}),K.push({target:document,name:"securitypolicyviolation",handler:b=>{if(b.blockedURI!==z.src||"Le"===b.disposition)return;I();const n=new Error(`CSP violation of policy ${b.effectiveDirective} ${b.blockedURI}. Current policy is ${b.originalPolicy}`);mb.d.UseFallbackTexture=!1,T(n),Z&&z.src&&URL.revokeObjectURL(z.src),z.src=""}}),(()=>{for(const b of K)b.target.addEventListener(b.name,b.handler)})();const O="blob:"===Q.substring(0,5),u="data:"===Q.substring(0,5),M=()=>{O||u||!e.e.IsCustomRequestAvailable?z.src=Q:a(Q,((b,n,i)=>{const e=new Blob([b],{type:!Y&&i?i:Y}),V=URL.createObjectURL(e);Z=!0,z.src=V}),void 0,V||void 0,!0,((b,n)=>{T(n)}))},j=()=>{V&&V.loadImage(Q,z)};if(!O&&!u&&V&&V.enableTexturesOffline)V.open(j,M);else{if(-1!==Q.indexOf("file:")){const b=decodeURIComponent(Q.substring(5).toLowerCase());if(U.FilesToLoad[b]&&"undefined"!==typeof URL){try{let n;try{n=URL.createObjectURL(U.FilesToLoad[b])}catch(D){n=URL.createObjectURL(U.FilesToLoad[b])}z.src=n,Z=!0}catch(x){z.src=""}return z}}M()}return z},j=(b,n,i,e,V)=>{const U=new FileReader,Y={onCompleteObservable:new Q.e,abort:()=>U.abort()};return U.onloadend=()=>Y.onCompleteObservable.notifyObservers(Y),V&&(U.onerror=()=>{V(new u(`Unable to read ${b.name}`,b))}),U.onload=b=>{n(b.target.result)},i&&(U.onprogress=i),e?U.readAsArrayBuffer(b):U.readAsText(b),Y},a=(b,n,i,e,V,L,B)=>{if(b.name)return j(b,n,i,V,L?b=>{L(void 0,b)}:void 0);const mb=b;if(-1!==mb.indexOf("file:")){let b=decodeURIComponent(mb.substring(5).toLowerCase());0===b.indexOf("./")&&(b=b.substring(2));const e=U.FilesToLoad[b];if(e)return j(e,n,i,V,L?b=>L(void 0,new I(b.message,b.file)):void 0)}const{match:T,type:z}=A(mb);if(T){const b={onCompleteObservable:new Q.e,abort:()=>()=>{}};try{const b=V?E(mb):C(mb);n(b,void 0,z)}catch(Y){L?L(void 0,Y):N.b.Error(Y.message||"Failed to parse the Data URL")}return Z.e.SetImmediate((()=>{b.onCompleteObservable.notifyObservers(b)})),b}return D(mb,((b,i)=>{n(b,null===i||void 0===i?void 0:i.responseURL,null===i||void 0===i?void 0:i.getResponseHeader("content-type"))}),i,e,V,L?b=>{L(b.request,new I(b.message,b.request))}:void 0,B)},D=(b,n,i,U,Y,L,B)=>{b=d.CleanUrl(b),b=d.PreprocessUrl(b);const mb=d.BaseUrl+b;let Z=!1;const T={onCompleteObservable:new Q.e,abort:()=>Z=!0},z=()=>{let b,Q=new e.e,U=null;const z=()=>{Q&&(i&&Q.removeEventListener("progress",i),b&&Q.removeEventListener("readystatechange",b),Q.removeEventListener("loadend",K))};let K=()=>{z(),T.onCompleteObservable.notifyObservers(T),T.onCompleteObservable.clear(),i=void 0,b=null,K=null,L=void 0,B=void 0,n=void 0};T.abort=()=>{Z=!0,K&&K(),Q&&Q.readyState!==(XMLHttpRequest.DONE||4)&&Q.abort(),null!==U&&(clearTimeout(U),U=null),Q=null};const I=b=>{const n=b.message||"Unknown error";L&&Q?L(new O(n,Q)):N.b.Error(n)},u=N=>{if(Q){if(Q.open("GET",mb),B)try{B(Q)}catch(T){return void I(T)}Y&&(Q.responseType="arraybuffer"),i&&Q.addEventListener("progress",i),K&&Q.addEventListener("loadend",K),b=()=>{if(!Z&&Q&&Q.readyState===(XMLHttpRequest.DONE||4)){if(b&&Q.removeEventListener("readystatechange",b),Q.status>=200&&Q.status<300||0===Q.status&&(!(0,V.l)()||y())){const b=Y?Q.response:Q.responseText;if(null!==b){try{n&&n(b,Q)}catch(T){I(T)}return}}const i=d.DefaultRetryStrategy;if(i){const b=i(mb,Q,N);if(-1!==b)return z(),Q=new e.e,void(U=setTimeout((()=>u(N+1)),b))}const B=new O("Error status: "+Q.status+" "+Q.statusText+" - Unable to load "+mb,Q);L&&L(B)}},Q.addEventListener("readystatechange",b),Q.send()}};u(0)};if(U&&U.enableSceneOffline){const e=b=>{b&&b.status>400?L&&L(b):z()},V=()=>{U&&U.loadFile(d.BaseUrl+b,(b=>{!Z&&n&&n(b),T.onCompleteObservable.notifyObservers(T)}),i?b=>{!Z&&i&&i(b)}:void 0,e,Y)};U.open(V,e)}else z();return T},x=b=>{const{match:n,type:i}=A(b);if(n)return i||void 0;const e=b.lastIndexOf(".");switch(b.substring(e+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ne":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},y=()=>"undefined"!==typeof location&&"file:"===location.protocol,s=b=>K.test(b),A=b=>{const n=K.exec(b);if(null===n||0===n.length)return{match:!1,type:""};return{match:!0,type:n[0].replace("data:","").replace("base64,","")}};function E(b){return(0,L.d)(b.split(",")[1])}const C=b=>(0,L.e)(b.split(",")[1]);let t;z.b._FileToolsLoadImage=M,T.b.loadFile=a,B.i.loadFile=a;((b,n,i,e,V,Q,U,Y,L,B)=>{t={DecodeBase64UrlToBinary:b,DecodeBase64UrlToString:n,DefaultRetryStrategy:i.DefaultRetryStrategy,BaseUrl:i.BaseUrl,CorsBehavior:i.CorsBehavior,PreprocessUrl:i.PreprocessUrl,IsBase64DataUrl:e,IsFileURL:V,LoadFile:Q,LoadImage:U,ReadFile:Y,RequestFile:L,SetCorsBehavior:B},Object.defineProperty(t,"DefaultRetryStrategy",{get:function(){return i.DefaultRetryStrategy},set:function(b){i.DefaultRetryStrategy=b}}),Object.defineProperty(t,"BaseUrl",{get:function(){return i.BaseUrl},set:function(b){i.BaseUrl=b}}),Object.defineProperty(t,"PreprocessUrl",{get:function(){return i.PreprocessUrl},set:function(b){i.PreprocessUrl=b}}),Object.defineProperty(t,"CorsBehavior",{get:function(){return i.CorsBehavior},set:function(b){i.CorsBehavior=b}})})(E,C,d,s,y,a,M,j,D,G)},11737:(b,n,i)=>{function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(b=>{const n=16*Math.random()|0;return("x"===b?n:3&n|8).toString(16)}))}i.d(n,{d:()=>e})},11727:(b,n,i)=>{i.d(n,{b:()=>Q});var e=i(11621),V=i(11734);class Q{static Instantiate(b){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[b])return this.RegisteredExternalClasses[b];const n=(0,V.e)(b);if(n)return n;e.b.Warn(b+" not found, you may have missed an import.");const i=b.split(".");let Q=window||this;for(let e=0,V=i.length;e<V;e++)Q=Q[i[e]];return"function"!==typeof Q?null:Q}}Q.RegisteredExternalClasses={}},11628:(b,n,i)=>{i.d(n,{b:()=>V});var e=i(11616);class V{static get Now(){return(0,e.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11662:(b,n,i)=>{i.d(n,{d:()=>U,e:()=>Q,g:()=>e,k:()=>V});const e=b=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(b);let n="";for(let i=0;i<b.byteLength;i++)n+=String.fromCharCode(b[i]);return n},V=b=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i,e,V,Q,U,Y,L,B="",mb=0;const N=ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b);for(;mb<N.length;)i=N[mb++],e=mb<N.length?N[mb++]:Number.NaN,V=mb<N.length?N[mb++]:Number.NaN,Q=i>>2,U=(3&i)<<4|e>>4,Y=(15&e)<<2|V>>6,L=63&V,isNaN(e)?Y=L=64:isNaN(V)&&(L=64),B+=n.charAt(Q)+n.charAt(U)+n.charAt(Y)+n.charAt(L);return B},Q=b=>atob(b),U=b=>{const n=Q(b),i=n.length,e=new Uint8Array(new ArrayBuffer(i));for(let V=0;V<i;V++)e[V]=n.charCodeAt(V);return e.buffer}},11740:(b,n,i)=>{function e(b){let n=1;do{n*=2}while(n<b);return n===b}function V(b,n,i){return b*(1-i)+n*i}function Q(b){const n=U(b),i=Y(b);return n-b>b-i?i:n}function U(b){return b--,b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b|=b>>16,++b}function Y(b){return b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,(b|=b>>16)-(b>>1)}function L(b,n){let i;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:i=Y(b);break;case 2:i=Q(b);break;default:i=U(b)}return Math.min(i,n)}i.d(n,{b:()=>Y,d:()=>L,h:()=>e,j:()=>V,n:()=>Q})},11605:(b,n,i)=>{i.r(n),i.d(n,{AsyncLoop:()=>u,Tools:()=>I,className:()=>O});var e=i(11612),V=i(11616),Q=i(11621),U=i(11625),Y=i(11628),L=i(11636),B=i(11639),mb=i(11646),N=i(11655),Z=i(11674),T=i(11727),z=i(11737),K=i(11740);class I{static get BaseUrl(){return N.f.BaseUrl}static set BaseUrl(b){N.f.BaseUrl=b}static get CleanUrl(){return N.f.CleanUrl}static set CleanUrl(b){N.f.CleanUrl=b}static IsAbsoluteUrl(b){return 0===b.indexOf("//")||-1!==b.indexOf("://")&&(-1!==b.indexOf(".")&&(-1!==b.indexOf("/")&&(!(b.indexOf(":")>b.indexOf("/"))&&(b.indexOf("://")<b.indexOf(".")||(0===b.indexOf("data:")||0===b.indexOf("blob:"))))))}static set ScriptBaseUrl(b){N.f.ScriptBaseUrl=b}static get ScriptBaseUrl(){return N.f.ScriptBaseUrl}static set CDNBaseUrl(b){I.ScriptBaseUrl=b,I.AssetBaseUrl=b}static set ScriptPreprocessUrl(b){N.f.ScriptPreprocessUrl=b}static get ScriptPreprocessUrl(){return N.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return N.f.DefaultRetryStrategy}static set DefaultRetryStrategy(b){N.f.DefaultRetryStrategy=b}static get CorsBehavior(){return N.f.CorsBehavior}static set CorsBehavior(b){N.f.CorsBehavior=b}static get UseFallbackTexture(){return mb.d.UseFallbackTexture}static set UseFallbackTexture(b){mb.d.UseFallbackTexture=b}static get RegisteredExternalClasses(){return T.b.RegisteredExternalClasses}static set RegisteredExternalClasses(b){T.b.RegisteredExternalClasses=b}static get fallbackTexture(){return mb.d.FallbackTexture}static set fallbackTexture(b){mb.d.FallbackTexture=b}static FetchToRef(b,n,i,e,V,Q){const U=4*((Math.abs(b)*i%i|0)+(Math.abs(n)*e%e|0)*i);Q.r=V[U]/255,Q.g=V[U+1]/255,Q.b=V[U+2]/255,Q.a=V[U+3]/255}static Mix(b,n,i){return 0}static Instantiate(b){return T.b.Instantiate(b)}static SetImmediate(b){Z.e.SetImmediate(b)}static IsExponentOfTwo(b){return!0}static FloatRound(b){return Math.fround(b)}static GetFilename(b){const n=b.lastIndexOf("/");return n<0?b:b.substring(n+1)}static GetFolderPath(b){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=b.lastIndexOf("/");return i<0?n?b:"":b.substring(0,i+1)}static ToDegrees(b){return 180*b/Math.PI}static ToRadians(b){return b*Math.PI/180}static SmoothAngleChange(b,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const e=this.ToRadians(b),V=this.ToRadians(n);return this.ToDegrees(Math.atan2((1-i)*Math.sin(V)+i*Math.sin(e),(1-i)*Math.cos(V)+i*Math.cos(e)))}static MakeArray(b,n){return!0===n||void 0!==b&&null!=b?Array.isArray(b)?b:[b]:null}static GetPointerPrefix(b){return(0,V.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(b,n){(0,N.z)(b,n)}static SetReferrerPolicyBehavior(b,n){n.referrerPolicy=b}static get PreprocessUrl(){return N.f.PreprocessUrl}static set PreprocessUrl(b){N.f.PreprocessUrl=b}static LoadImage(b,n,i,e,V,Q){return(0,N.p)(b,n,i,e,V,Q)}static LoadFile(b,n,i,e,V,Q){return(0,N.l)(b,n,i,e,V,Q)}static async LoadFileAsync(b){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((i,e)=>{(0,N.l)(b,(b=>{i(b)}),void 0,void 0,n,((b,n)=>{e(n)}))}))}static GetAssetUrl(b){if(!b)return"";if(I.AssetBaseUrl&&b.startsWith(I._DefaultAssetsUrl)){const n="/"===I.AssetBaseUrl[I.AssetBaseUrl.length-1]?I.AssetBaseUrl.substring(0,I.AssetBaseUrl.length-1):I.AssetBaseUrl;return b.replace(I._DefaultAssetsUrl,n)}return b}static GetBabylonScriptURL(b,n){if(!b)return"";if(I.ScriptBaseUrl&&b.startsWith(I._DefaultCdnUrl)){const n="/"===I.ScriptBaseUrl[I.ScriptBaseUrl.length-1]?I.ScriptBaseUrl.substring(0,I.ScriptBaseUrl.length-1):I.ScriptBaseUrl;b=b.replace(I._DefaultCdnUrl,n)}return b=I.ScriptPreprocessUrl(b),n&&(b=I.GetAbsoluteUrl(b)),b}static LoadBabylonScript(b,n,i,e){b=I.GetBabylonScriptURL(b),I.LoadScript(b,n,i)}static async LoadBabylonScriptAsync(b){return b=I.GetBabylonScriptURL(b),await I.LoadScriptAsync(b)}static LoadScript(b,n,i,e){let Q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(b),n&&n()}catch(L){null===i||void 0===i||i(`Unable to load script '${b}' in worker`,L)}return}if(!(0,V.l)())return void(null===i||void 0===i||i(`Cannot load script '${b}' outside of a window or a worker`));const U=document.getElementsByTagName("head")[0],Y=document.createElement("script");Q?(Y.setAttribute("type","module"),Y.innerText=b):(Y.setAttribute("type","text/javascript"),Y.setAttribute("src",b)),e&&(Y.id=e),Y.onload=()=>{n&&n()},Y.onerror=n=>{i&&i(`Unable to load script '${b}'`,n)},U.appendChild(Y)}static async LoadScriptAsync(b,n){return await new Promise(((i,e)=>{this.LoadScript(b,(()=>{i()}),((b,n)=>{e(n||new Error(b))}),n)}))}static ReadFileAsDataURL(b,n,i){const V=new FileReader,Q={onCompleteObservable:new e.e,abort:()=>V.abort()};return V.onloadend=()=>{Q.onCompleteObservable.notifyObservers(Q)},V.onload=b=>{n(b.target.result)},V.onprogress=i,V.readAsDataURL(b),Q}static ReadFile(b,n,i,e,V){return(0,N.s)(b,n,i,e,V)}static FileAsURL(b){const n=new Blob([b]);return window.URL.createObjectURL(n)}static Format(b){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return b.toFixed(n)}static DeepCopy(b,n,i,e){U.e.DeepCopy(b,n,i,e)}static IsEmpty(b){for(const n in b)if(Object.prototype.hasOwnProperty.call(b,n))return!1;return!0}static RegisterTopRootEvents(b,n){for(let e=0;e<n.length;e++){const V=n[e];b.addEventListener(V.name,V.handler,!1);try{window.parent&&window.parent.addEventListener(V.name,V.handler,!1)}catch(i){}}}static UnregisterTopRootEvents(b,n){for(let e=0;e<n.length;e++){const V=n[e];b.removeEventListener(V.name,V.handler);try{b.parent&&b.parent.removeEventListener(V.name,V.handler)}catch(i){}}}static async DumpFramebuffer(b,n,i,e){throw(0,L.e)("DumpTools")}static DumpData(b,n,i,e){throw(0,L.e)("DumpTools")}static async DumpDataAsync(b,n,i){throw(0,L.e)("DumpTools")}static _IsOffScreenCanvas(b){return void 0!==b.convertToBlob}static ToBlob(b,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",e=arguments.length>3?arguments[3]:void 0;I._IsOffScreenCanvas(b)||b.toBlob||(b.toBlob=function(b,n,i){setTimeout((()=>{const e=atob(this.toDataURL(n,i).split(",")[1]),V=e.length,Q=new Uint8Array(V);for(let b=0;b<V;b++)Q[b]=e.charCodeAt(b);b(new Blob([Q]))}))}),I._IsOffScreenCanvas(b)?b.convertToBlob({type:i,quality:e}).then((b=>n(b))):b.toBlob((function(b){n(b)}),i,e)}static DownloadBlob(b,n){if("download"in document.createElement("a")){if(!n){const b=new Date;n="screenshot_"+((b.getFullYear()+"-"+(b.getMonth()+1)).slice(2)+"-"+b.getDate()+"_"+b.getHours()+"-"+("0"+b.getMinutes()).slice(-2))+".png"}I.Download(b,n)}else if(b&&"undefined"!==typeof URL){const n=URL.createObjectURL(b),i=window.open("");if(!i)return;const e=i.document.createElement("img");e.onload=function(){URL.revokeObjectURL(n)},e.src=n,i.document.body.appendChild(e)}}static EncodeScreenshotCanvasData(b,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",e=arguments.length>3?arguments[3]:void 0,V=arguments.length>4?arguments[4]:void 0;if("string"!==typeof e&&n){if(n){if(I._IsOffScreenCanvas(b))return void b.convertToBlob({type:i,quality:V}).then((b=>{const i=new FileReader;i.readAsDataURL(b),i.onloadend=()=>{const b=i.result;n(b)}}));const e=b.toDataURL(i,V);n(e)}}else this.ToBlob(b,(function(b){b&&I.DownloadBlob(b,e),n&&n("")}),i,V)}static Download(b,n){if("undefined"===typeof URL)return;const i=window.URL.createObjectURL(b),e=document.createElement("a");document.body.appendChild(e),e.style.display="none",e.href=i,e.download=n,e.addEventListener("click",(()=>{e.parentElement&&e.parentElement.removeChild(e)})),e.click(),window.URL.revokeObjectURL(i)}static BackCompatCameraNoPreventDefault(b){return"boolean"===typeof b[0]?b[0]:"boolean"===typeof b[1]&&b[1]}static CreateScreenshot(b,n,i,e){throw(0,L.e)("ScreenshotTools")}static async CreateScreenshotAsync(b,n,i){throw(0,L.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(b,n,i,e){throw(0,L.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(b,n,i){throw(0,L.e)("ScreenshotTools")}static RandomId(){return(0,z.d)()}static IsBase64(b){return(0,N.h)(b)}static DecodeBase64(b){return(0,N.d)(b)}static get errorsCount(){return Q.b.errorsCount}static Log(b){Q.b.Log(b)}static Warn(b){Q.b.Warn(b)}static Error(b){Q.b.Error(b)}static get LogCache(){return Q.b.LogCache}static ClearLogCache(){Q.b.ClearLogCache()}static set LogLevels(b){Q.b.LogLevels=b}static set PerformanceLogLevel(b){return(b&I.PerformanceUserMarkLogLevel)===I.PerformanceUserMarkLogLevel?(I.StartPerformanceCounter=I._StartUserMark,void(I.EndPerformanceCounter=I._EndUserMark)):(b&I.PerformanceConsoleLogLevel)===I.PerformanceConsoleLogLevel?(I.StartPerformanceCounter=I._StartPerformanceConsole,void(I.EndPerformanceCounter=I._EndPerformanceConsole)):(I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,void(I.EndPerformanceCounter=I._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(b,n){}static _EndPerformanceCounterDisabled(b,n){}static _StartUserMark(b){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!I._Performance){if(!(0,V.l)())return;I._Performance=window.performance}n&&I._Performance.mark&&I._Performance.mark(b+"-Begin")}static _EndUserMark(b){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&I._Performance.mark&&(I._Performance.mark(b+"-End"),I._Performance.measure(b,b+"-Begin",b+"-End"))}static _StartPerformanceConsole(b){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&(I._StartUserMark(b,n),console.time&&console.time(b))}static _EndPerformanceConsole(b){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n&&(I._EndUserMark(b,n),console.timeEnd(b))}static get Now(){return Y.b.Now}static GetClassName(b){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(!n&&b.getClassName)i=b.getClassName();else{if(b instanceof Object){i=(n?b:Object.getPrototypeOf(b)).constructor.__bjsclassName__}i||(i=typeof b)}return i}static First(b,n){for(const i of b)if(n(i))return i;return null}static getFullClassName(b){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null,e=null;if(!n&&b.getClassName)i=b.getClassName();else{if(b instanceof Object){const V=n?b:Object.getPrototypeOf(b);i=V.constructor.__bjsclassName__,e=V.constructor.__bjsmoduleName__}i||(i=typeof b)}return i?(null!=e?e+".":"")+i:null}static async DelayAsync(b){await new Promise((n=>{setTimeout((()=>{n()}),b)}))}static IsSafari(){return!!(0,V.k)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function O(b,n){return i=>{i.__bjsclassName__=b,i.__bjsmoduleName__=null!=n?n:null}}I.AssetBaseUrl="",I.UseCustomRequestHeaders=!1,I.CustomRequestHeaders=B.e.CustomRequestHeaders,I.GetDOMTextContent=V.d,I._DefaultCdnUrl="https://cdn.babylonjs.com",I._DefaultAssetsUrl="https://assets.babylonjs.com/core",I.GetAbsoluteUrl="object"===typeof document?b=>{const n=document.createElement("a");return n.href=b,n.href}:"function"===typeof URL&&"object"===typeof location?b=>new URL(b,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},I.NoneLogLevel=Q.b.NoneLogLevel,I.MessageLogLevel=Q.b.MessageLogLevel,I.WarningLogLevel=Q.b.WarningLogLevel,I.ErrorLogLevel=Q.b.ErrorLogLevel,I.AllLogLevel=Q.b.AllLogLevel,I.IsWindowObjectExist=V.l,I.PerformanceNoneLogLevel=0,I.PerformanceUserMarkLogLevel=1,I.PerformanceConsoleLogLevel=2,I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,I.EndPerformanceCounter=I._EndPerformanceCounterDisabled;class u{constructor(b,n,i){let e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=b,this.index=e-1,this._done=!1,this._fn=n,this._successCallback=i}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(b,n,i){const e=new u(b,n,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return e.executeNext(),e}static SyncAsyncForLoop(b,n,i,e,V){let Q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return u.Run(Math.ceil(b/n),(e=>{V&&V()?e.breakLoop():setTimeout((()=>{for(let Q=0;Q<n;++Q){const U=e.index*n+Q;if(U>=b)break;if(i(U),V&&V()){e.breakLoop();break}}e.executeNext()}),Q)}),e)}}I.Mix=K.j,I.IsExponentOfTwo=K.h,mb.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11734:(b,n,i)=>{i.d(n,{e:()=>Q,i:()=>V});const e={};function V(b,n){e[b]=n}function Q(b){return e[b]}},11639:(b,n,i)=>{i.d(n,{e:()=>e});class e{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(e.CustomRequestHeaders).length>0||e.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const b in e.CustomRequestHeaders){const n=e.CustomRequestHeaders[b];n&&this._xhr.setRequestHeader(b,n)}}_shouldSkipRequestModifications(b){return e.SkipRequestModificationForBabylonCDN&&(b.includes("preview.babylonjs.com")||b.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(b){this._xhr.onprogress=b}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(b){this._xhr.responseType=b}get timeout(){return this._xhr.timeout}set timeout(b){this._xhr.timeout=b}addEventListener(b,n,i){this._xhr.addEventListener(b,n,i)}removeEventListener(b,n,i){this._xhr.removeEventListener(b,n,i)}abort(){this._xhr.abort()}send(b){e.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(b)}open(b,n){for(const i of e.CustomRequestModifiers){if(this._shouldSkipRequestModifications(n))return;n=i(this._xhr,n)||n}n=(n=n.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=n,this._xhr.open(b,n,!0)}setRequestHeader(b,n){this._xhr.setRequestHeader(b,n)}getResponseHeader(b){return this._xhr.getResponseHeader(b)}}e.CustomRequestHeaders={},e.CustomRequestModifiers=new Array,e.SkipRequestModificationForBabylonCDN=!0}}]);