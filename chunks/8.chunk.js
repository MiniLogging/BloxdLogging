"use strict";(self.pp3k1ov3ibi=self.pp3k1ov3ibi||[]).push([[8],{12260:(M,Z,P)=>{P.d(Z,{e:()=>N});var x=P(12225),c=P(12199),w=P(12262),v=P(12282),G=P(12209);class mM{constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,M&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(M){this._zOffset!==M&&(this._zOffset=M,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(M){this._zOffsetUnits!==M&&(this._zOffsetUnits=M,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(M){this._cullFace!==M&&(this._cullFace=M,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(M){this._cull!==M&&(this._cull=M,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(M){this._depthFunc!==M&&(this._depthFunc=M,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(M){this._depthMask!==M&&(this._depthMask=M,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(M){this._depthTest!==M&&(this._depthTest=M,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(M){this._frontFace!==M&&(this._frontFace=M,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(M){this.isDirty&&(this._isCullDirty&&(this.cull?M.enable(M.CULL_FACE):M.disable(M.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(M.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(M.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?M.enable(M.DEPTH_TEST):M.disable(M.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(M.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(this.zOffset,this.zOffsetUnits)):M.disable(M.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(M.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class K{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(M){this._func!==M&&(this._func=M,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(M){this._funcRef!==M&&(this._funcRef=M,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(M){this._funcMask!==M&&(this._funcMask=M,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(M){this._opStencilFail!==M&&(this._opStencilFail=M,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(M){this._opDepthFail!==M&&(this._opDepthFail=M,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(M){this._opStencilDepthPass!==M&&(this._opStencilDepthPass=M,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(M){this._mask!==M&&(this._mask=M,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(M){this._enabled!==M&&(this._enabled=M,this._isStencilTestDirty=!0)}constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,M&&this.reset()}reset(){var M;this.stencilMaterial=void 0,null===(M=this.stencilGlobal)||void 0===M||M.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(M){var Z;if(!M)return;const P=!this.useStencilGlobalOnly&&!(null===(Z=this.stencilMaterial)||void 0===Z||!Z.enabled);this.enabled=P?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=P?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=P?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=P?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=P?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=P?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=P?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=P?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?M.enable(M.STENCIL_TEST):M.disable(M.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(M.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(M.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(M.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class d{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=d.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=d.KEEP,this.opDepthFail=d.KEEP,this.opStencilDepthPass=d.REPLACE}get stencilFunc(){return this.func}set stencilFunc(M){this.func=M}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(M){this.funcRef=M}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(M){this.funcMask=M}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(M){this.opStencilFail=M}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(M){this.opDepthFail=M}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(M){this.opStencilDepthPass=M}get stencilMask(){return this.mask}set stencilMask(M){this.mask=M}get stencilTest(){return this.enabled}set stencilTest(M){this.enabled=M}}d.ALWAYS=519,d.KEEP=7680,d.REPLACE=7681;class O{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(M){this._alphaBlend!==M&&(this._alphaBlend=M,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(M,Z,P,x){this._blendConstants[0]===M&&this._blendConstants[1]===Z&&this._blendConstants[2]===P&&this._blendConstants[3]===x||(this._blendConstants[0]=M,this._blendConstants[1]=Z,this._blendConstants[2]=P,this._blendConstants[3]=x,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(M,Z,P,x){this._blendFunctionParameters[0]===M&&this._blendFunctionParameters[1]===Z&&this._blendFunctionParameters[2]===P&&this._blendFunctionParameters[3]===x||(this._blendFunctionParameters[0]=M,this._blendFunctionParameters[1]=Z,this._blendFunctionParameters[2]=P,this._blendFunctionParameters[3]=x,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(M,Z){this._blendEquationParameters[0]===M&&this._blendEquationParameters[1]===Z||(this._blendEquationParameters[0]=M,this._blendEquationParameters[1]=Z,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(M){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?M.enable(M.BLEND):M.disable(M.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(M.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(M.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(M.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var H=P(12213),j=P(12291),B=P(12192),U=P(12184),n=P(12254),L=P(12304);function u(M,Z){if((0,B.p)()){const{requestAnimationFrame:P}=Z||window;if("function"===typeof P)return P(M)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(M);return setTimeout(M,16)}class N{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(M){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get cc(){return this._useReverseDepthBuffer}set cc(M){M!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=M,this._depthCullingState.depthFunc=M?518:515)}setColorWrite(M){M!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=M)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(M){if(M)return this.isNDCHalfZRange?M.IS_NDC_HALF_ZRANGE="":delete M.IS_NDC_HALF_ZRANGE,this.cc?M.USE_REVERSE_DEPTHBUFFER="":delete M.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?M.USE_EXACT_SRGB_CONVERSIONS="":delete M.USE_EXACT_SRGB_CONVERSIONS);{let M="";return this.isNDCHalfZRange&&(M+="#define IS_NDC_HALF_ZRANGE"),this.cc&&(M&&(M+="\n"),M+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(M&&(M+="\n"),M+="#define USE_EXACT_SRGB_CONVERSIONS"),M}}_rebuildInternalTextures(){const M=this._internalTexturesCache.slice();for(const Z of M)Z._rebuild()}_rebuildRenderTargetWrappers(){const M=this._renderTargetWrapperCache.slice();for(const Z of M)Z._rebuild()}_rebuildEffects(){for(const M in this._compiledEffects){const Z=this._compiledEffects[M];Z._pipelineContext=null,Z._prepareEffect()}w.Effect.ResetCache()}_rebuildGraphicsResources(){var M;this.wipeCaches(!0),this._rebuildEffects(),null===(M=this._rebuildComputeEffects)||void 0===M||M.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){c.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(M){setTimeout((()=>{this._clearEmptyResources();const Z=this._depthCullingState.depthTest,P=this._depthCullingState.depthFunc,x=this._depthCullingState.depthMask,c=this._stencilState.stencilTest;M(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=Z,this._depthCullingState.depthFunc=P,this._depthCullingState.depthMask=x,this._stencilState.stencilTest=c,this._flagContextRestored()}),0)}get K(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(M){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(M){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const M=new Uint8Array(4),Z=[M,M,M,M,M,M];this._emptyCubeTexture=this.createRawCubeTexture(Z,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(M){if(!M)return this._activeRenderLoops.length=0,void this._cancelFrame();const Z=this._activeRenderLoops.indexOf(M);Z>=0&&(this._activeRenderLoops.splice(Z,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const M=this._frameHandler;if(this._frameHandler=0,(0,B.p)()){const{cancelAnimationFrame:Z}=this.getHostWindow()||window;if("function"===typeof Z)return Z(M)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(M);return clearTimeout(M)}}wc(){this.onBeginFrameObservable.notifyObservers(this)}vc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(M){this._maxFPS=M,void 0!==M&&(this._minFrameTime=M<=0?Number.MAX_VALUE:1e3/M)}_isOverFrameTime(M){if(!M||void 0===this._maxFPS)return!1;const Z=M-this._lastFrameTime;return this._lastFrameTime=M,this._renderAccumulator+=Z,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(M){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(M)){let M=!0;(this.K||!this.renderEvenInBackground&&this._windowIsBackground)&&(M=!1),M&&(this.wc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.vc())}}_renderLoop(M){this._processFrame(M),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let M=0;M<this._activeRenderLoops.length;M++){(0,this._activeRenderLoops[M])()}}_renderViews(){return!1}_queueNewFrame(M,Z){return u(M,Z)}runRenderLoop(M){-1===this._activeRenderLoops.indexOf(M)&&(this._activeRenderLoops.push(M),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(M){this._depthCullingState.depthTest=M}setZOffset(M){this._depthCullingState.zOffset=this.cc?-M:M}getZOffset(){const M=this._depthCullingState.zOffset;return this.cc?-M:M}setZOffsetUnits(M){this._depthCullingState.zOffsetUnits=this.cc?-M:M}getZOffsetUnits(){const M=this._depthCullingState.zOffsetUnits;return this.cc?-M:M}getHostWindow(){return(0,B.p)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(M){this._compatibilityMode=!0}_rebuildTextures(){for(const M of this.scenes)M._rebuildTextures();for(const M of this._virtualScenes)M._rebuildTextures()}_releaseRenderTargetWrapper(M){const Z=this._renderTargetWrapperCache.indexOf(M);-1!==Z&&this._renderTargetWrapperCache.splice(Z,1)}get currentViewport(){return this._cachedViewport}setViewport(M,Z,P){const x=Z||this.getRenderWidth(),c=P||this.getRenderHeight(),w=M.x||0,v=M.y||0;this._cachedViewport=M,this._viewport(w*x,v*c,x*M.width,c*M.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(M){return new Path2D(M)}get description(){let M=this.name+this.version;return this._caps.parallelShaderCompile&&(M+=" - Parallel shader compilation"),M}_createTextureBase(M,Z,P,w){let v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,mM=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,K=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,H=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,B=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,U=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,n=arguments.length>13?arguments[13]:void 0,u=arguments.length>14?arguments[14]:void 0,J=arguments.length>15?arguments[15]:void 0;const t="data:"===(M=M||"").substring(0,5),F="blob:"===M.substring(0,5),D=t&&-1!==M.indexOf(";base64,"),l=H||new j.d(this,1);l!==H&&(l.label=M.substring(0,60));const h=M;!this._transformTextureUrl||D||H||O||(M=this._transformTextureUrl(M)),h!==M&&(l._originalUrl=h);const Q=M.lastIndexOf(".");let I=U||(Q>-1?M.substring(Q).toLowerCase():"");I.indexOf("?")>-1&&(I=I.split("?")[0]);const s=(0,L.b)(I,n);w&&w.addPendingData(l),l.url=M,l.generateMipMaps=!Z,l.samplingMode=v,l.invertY=P,l._useSRGBBuffer=this._getUseSRGBBuffer(!!J,Z),this._doNotHandleContextLost||(l._buffer=O);let C=null;G&&!H&&(C=l.onLoadedObservable.add(G)),H||this._internalTexturesCache.push(l);const R=(P,H)=>{w&&w.removePendingData(l),M===h?(C&&l.onLoadedObservable.remove(C),x.b.UseFallbackTexture&&M!==x.b.FallbackTexture&&this._createTextureBase(x.b.FallbackTexture,Z,l.invertY,w,v,null,mM,K,d,O,l),P=(P||"Unknown error")+(x.b.UseFallbackTexture?" - Fallback texture was used":""),l.onErrorObservable.notifyObservers({message:P,exception:H}),mM&&mM(P,H)):(c.d.Warn(`Failed to load ${M}, falling back to ${h}`),this._createTextureBase(h,Z,l.invertY,w,v,G,mM,K,d,O,l,B,U,n,u,J))};if(s){const Z=async M=>{(await s).loadData(M,l,((M,Z,P,x,c,G)=>{G?R("TextureLoader failed to load data"):K(l,I,w,{width:M,height:Z},l.invertY,!P,x,(()=>(c(),!1)),v)}),u)};O?O instanceof ArrayBuffer?Z(new Uint8Array(O)):ArrayBuffer.isView(O)?Z(O):mM&&mM("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(M,(M=>{Z(new Uint8Array(M))}),void 0,w?w.offlineProvider:void 0,!0,((M,Z)=>{R("Unable to load "+(M&&M.responseURL,Z))}))}else{const P=M=>{F&&!this._doNotHandleContextLost&&(l._buffer=M),K(l,I,w,M,l.invertY,Z,!1,d,v)};!t||D?O&&("string"===typeof O.decoding||O.close)?P(O):N._FileToolsLoadImage(M||"",P,R,w?w.offlineProvider:null,n,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof O||O instanceof ArrayBuffer||ArrayBuffer.isView(O)||O instanceof Blob?N._FileToolsLoadImage(O,P,R,w?w.offlineProvider:null,n,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):O&&P(O)}return l}_rebuildBuffers(){for(const M of this._uniformBuffers)M._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,B.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const M in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,M)&&(this._boundTexturesCache[M]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(M){this._name=M}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(M){this._hardwareScalingLevel=M,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(M){this._doNotHandleContextLost=M}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(M,Z,P){var c,w;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new mM,this._stencilStateComposer=new K,this._stencilState=new d,this._alphaState=new O,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new U.b,this.onCanvasFocusObservable=new U.b,this.onNewSceneAddedObservable=new U.b,this.onResizeObservable=new U.b,this.onCanvasPointerOutObservable=new U.b,this.onEffectErrorObservable=new U.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new U.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=M=>this._renderLoop(M),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new U.b,this.onAfterShaderCompilationObservable=new U.b,this.onBeginFrameObservable=new U.b,this.onEndFrameObservable=new U.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new U.b,this.onContextRestoredObservable=new U.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Gc=new U.b,this.onReleaseEffectsObservable=new U.b,x.b.Instances.push(this),this.startTime=G.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,v.e.SetMatrixPrecision(!!Z.useHighPrecisionMatrix),(0,B.l)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=P??!1,Z.antialias=M??Z.antialias,Z.deterministicLockstep=Z.deterministicLockstep??!1,Z.lockstepMaxSteps=Z.lockstepMaxSteps??4,Z.timeStep=Z.timeStep??1/60,Z.Kc=Z.Kc??!0,this._audioContext=(null===(c=Z.audioEngineOptions)||void 0===c?void 0:c.audioContext)??null,this._audioDestination=(null===(w=Z.audioEngineOptions)||void 0===w?void 0:w.audioDestination)??null,this.premultipliedAlpha=Z.premultipliedAlpha??!0,this._doNotHandleContextLost=!!Z.doNotHandleContextLost,this._isStencilEnable=!!Z.Kc,this.useExactSrgbConversions=Z.useExactSrgbConversions??!1;const H=(0,B.p)()&&window.devicePixelRatio||1,j=Z.limitDeviceRatio||H;P=P||Z.adaptToDeviceRatio||!1,this._hardwareScalingLevel=P?1/Math.min(j,H):1,this._lastDevicePixelRatio=H,this._creationOptions=Z}resize(){let M,Z,P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const M=(0,B.p)()&&window.devicePixelRatio||1,Z=this._lastDevicePixelRatio/M;this._lastDevicePixelRatio=M,this._hardwareScalingLevel*=Z}if((0,B.p)()&&(0,B.h)())if(this._renderingCanvas){var x,c;const P=null===(x=(c=this._renderingCanvas).getBoundingClientRect)||void 0===x?void 0:x.call(c);M=this._renderingCanvas.clientWidth||(null===P||void 0===P?void 0:P.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,Z=this._renderingCanvas.clientHeight||(null===P||void 0===P?void 0:P.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else M=window.innerWidth,Z=window.innerHeight;else M=this._renderingCanvas?this._renderingCanvas.width:100,Z=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(M/this._hardwareScalingLevel,Z/this._hardwareScalingLevel,P)}setSize(M,Z){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(M|=0,Z|=0,!P&&this._renderingCanvas.width===M&&this._renderingCanvas.height===Z)return!1;if(this._renderingCanvas.width=M,this._renderingCanvas.height=Z,this.scenes){for(let M=0;M<this.scenes.length;M++){const Z=this.scenes[M];for(let M=0;M<Z.cameras.length;M++){Z.cameras[M]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(M,Z,P,x,c,w,v,G,mM,K,d){throw(0,H.d)("engine.rawTexture")}createRawCubeTexture(M,Z,P,x,c,w,v,G){throw(0,H.d)("engine.rawTexture")}createRawTexture3D(M,Z,P,x,c,w,v,G,mM,K,d){throw(0,H.d)("engine.rawTexture")}createRawTexture2DArray(M,Z,P,x,c,w,v,G,mM,K,d){throw(0,H.d)("engine.rawTexture")}_sharedInit(M){this._renderingCanvas=M}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const M=navigator.userAgent;this.hostInformation.isMobile=-1!==M.indexOf("Mobile")||-1!==M.indexOf("Mac")&&(0,B.h)()&&"ontouchend"in document},this._checkForMobile(),(0,B.p)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(M){return document.createElement("video")}_reportDrawCall(){var M;let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(M=this._drawCalls)||void 0===M||M.addCount(Z,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(M,Z){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(M,Z){return createImageBitmap(M,Z)}resizeImageBitmap(M,Z,P){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(M){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(M,Z){if("undefined"===typeof document)return new OffscreenCanvas(M,Z);const P=document.createElement("canvas");return P.width=M,P.height=Z,P}createCanvas(M,Z){return N._CreateCanvas(M,Z)}static _FileToolsLoadImage(M,Z,P,x,c,w,v){throw(0,H.d)("FileTools")}_loadFile(M,Z,P,x,c,w){const v=(0,n.o)(M,Z,P,x,c,w);return this._activeRequests.push(v),v.onCompleteObservable.add((()=>{const M=this._activeRequests.indexOf(v);-1!==M&&this._activeRequests.splice(M,1)})),v}static _FileToolsLoadFile(M,Z,P,x,c,w){if(n.e.loadFile)return n.e.loadFile(M,Z,P,x,c,w);throw(0,H.d)("FileTools")}dispose(){var M;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(M=this.releaseComputeEffects)||void 0===M||M.call(this),w.Effect.ResetCache();for(const P of this._activeRequests)P.abort();this._boundRenderFunction=null,this.Gc.notifyObservers(this),this.Gc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,B.p)()&&window.removeEventListener("resize",this._checkForMobile);const Z=x.b.Instances.indexOf(this);Z>=0&&x.b.Instances.splice(Z,1),x.b.Instances.length||(x.b.OnEnginesDisposedObservable.notifyObservers(this),x.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(M){throw(0,H.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(M,Z){for(let P=0;P<x.b.Instances.length;P++){const c=x.b.Instances[P];for(let P=0;P<c.scenes.length;P++)c.scenes[P].markAllMaterialsAsDirty(M,Z)}}}N._RenderPassIdCounter=0,N._RescalePostProcessFactory=null,N.CollisionsEpsilon=.001,N.QueueNewFrame=u},12225:(M,Z,P)=>{P.d(Z,{b:()=>c});var x=P(12184);class c{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}c.Instances=[],c.OnEnginesDisposedObservable=new x.b,c._LastCreatedScene=null,c.UseFallbackTexture=!0,c.FallbackTexture=""},12282:(M,Z,P)=>{P.d(Z,{e:()=>x});class x{static SetMatrixPrecision(M){if(x.MatrixTrackPrecisionChange=!1,M&&!x.MatrixUse64Bits&&x.MatrixTrackedMatrices)for(let Z=0;Z<x.MatrixTrackedMatrices.length;++Z){const M=x.MatrixTrackedMatrices[Z],P=M.dc;M.dc=new Array(16);for(let Z=0;Z<16;++Z)M.dc[Z]=P[Z]}x.MatrixUse64Bits=M,x.MatrixCurrentType=x.MatrixUse64Bits?Array:Float32Array,x.MatrixTrackedMatrices=null}}x.MatrixUse64Bits=!1,x.MatrixTrackPrecisionChange=!0,x.MatrixCurrentType=Float32Array,x.MatrixTrackedMatrices=[]},12304:(M,Z,P)=>{P.d(Z,{b:()=>v});var x=P(12199);const c=new Map;function w(M,Z){(function(M){return c.delete(M)})(M)&&x.d.Warn(`Extension with the name '${M}' already exists`),c.set(M,Z)}function v(M,Z){"image/ktx"!==Z&&"image/ktx2"!==Z||(M=".ktx"),c.has(M)||(M.endsWith(".ies")&&w(".ies",(async()=>await P.e(15).then(P.bind(P,14825)).then((M=>new M._IESTextureLoader)))),M.endsWith(".dds")&&w(".dds",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(28)]).then(P.bind(P,14834)).then((M=>new M._DDSTextureLoader)))),M.endsWith(".basis")&&w(".basis",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(47)]).then(P.bind(P,14843)).then((M=>new M._BasisTextureLoader)))),M.endsWith(".env")&&w(".env",(async()=>await Promise.all([P.e(14),P.e(17),P.e(13),P.e(19),P.e(18),P.e(23),P.e(21),P.e(45),P.e(48)]).then(P.bind(P,14846)).then((M=>new M._ENVTextureLoader)))),M.endsWith(".hdr")&&w(".hdr",(async()=>await Promise.all([P.e(14),P.e(49)]).then(P.bind(P,14853)).then((M=>new M._HDRTextureLoader)))),(M.endsWith(".ktx")||M.endsWith(".ktx2"))&&(w(".ktx",(async()=>await P.e(30).then(P.bind(P,14855)).then((M=>new M._KTXTextureLoader)))),w(".ktx2",(async()=>await P.e(30).then(P.bind(P,14855)).then((M=>new M._KTXTextureLoader))))),M.endsWith(".tga")&&w(".tga",(async()=>await P.e(50).then(P.bind(P,14863)).then((M=>new M._TGATextureLoader)))),M.endsWith(".exr")&&w(".exr",(async()=>await P.e(16).then(P.bind(P,14871)).then((M=>new M._ExrTextureLoader)))));const x=c.get(M);return x?Promise.resolve(x(Z)):null}},12291:(M,Z,P)=>{P.d(Z,{d:()=>v});var x,c=P(12184),w=P(12296);!function(M){M[M.Unknown=0]="Unknown",M[M.Url=1]="Url",M[M.Temp=2]="Temp",M[M.Raw=3]="Raw",M[M.Dynamic=4]="Dynamic",M[M.RenderTarget=5]="RenderTarget",M[M.MultiRenderTarget=6]="MultiRenderTarget",M[M.Cube=7]="Cube",M[M.CubeRaw=8]="CubeRaw",M[M.CubePrefiltered=9]="CubePrefiltered",M[M.Raw3D=10]="Raw3D",M[M.Raw2DArray=11]="Raw2DArray",M[M.DepthStencil=12]="DepthStencil",M[M.CubeRawRGBD=13]="CubeRawRGBD",M[M.Depth=14]="Depth"}(x||(x={}));class v extends w.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(M){this.generateMipMaps=M}get uniqueId(){return this._uniqueId}_setUniqueId(M){this._uniqueId=M}getEngine(){return this._engine}get source(){return this._source}constructor(M,Z){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new c.b,this.onErrorObservable=new c.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=M,this._source=Z,this._uniqueId=v._Counter++,P||(this._hardwareTexture=M._createHardwareTexture())}incrementReferences(){this._references++}updateSize(M,Z){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,M,Z,P),this.width=M,this.height=Z,this.depth=P,this.baseWidth=M,this.baseHeight=Z,this.baseDepth=P,this._size=M*Z*P}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const M=this.onRebuildCallback(this),Z=Z=>{Z._swapAndDie(this,!1),this.isReady=M.isReady};return void(M.isAsync?M.proxy.then(Z):Z(M.proxy))}let M;switch(this.source){case 2:case 12:case 14:break;case 1:return void(M=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(M=>{M._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:M=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),M._swapAndDie(this,!1),this.isReady=!0;break;case 10:M=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),M._swapAndDie(this,!1),this.isReady=!0;break;case 11:M=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),M._swapAndDie(this,!1),this.isReady=!0;break;case 4:M=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),M._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(M=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{M._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:M=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),M._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return M=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(M=>{M&&M._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(M._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(M){var Z;let P=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(Z=this._hardwareTexture)||void 0===Z||Z.setUsage(M._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),M._hardwareTexture=this._hardwareTexture,P&&(M._isRGBD=this._isRGBD),this._lodTextureHigh&&(M._lodTextureHigh&&M._lodTextureHigh.dispose(),M._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(M._lodTextureMid&&M._lodTextureMid.dispose(),M._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(M._lodTextureLow&&M._lodTextureLow.dispose(),M._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(M._irradianceTexture&&M._irradianceTexture.dispose(),M._irradianceTexture=this._irradianceTexture);const x=this._engine.getLoadedTexturesCache();let c=x.indexOf(this);-1!==c&&x.splice(c,1),c=x.indexOf(M),-1===c&&x.push(M)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}v._Counter=0},12296:(M,Z,P)=>{P.d(Z,{e:()=>x});class x{get wrapU(){return this._cachedWrapU}set wrapU(M){this._cachedWrapU=M}get wrapV(){return this._cachedWrapV}set wrapV(M){this._cachedWrapV=M}get wrapR(){return this._cachedWrapR}set wrapR(M){this._cachedWrapR=M}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(M){this._cachedAnisotropicFilteringLevel=M}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(M){this._comparisonFunction=M}get useMipMaps(){return this._useMipMaps}set useMipMaps(M){this._useMipMaps=M}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=M,this._cachedWrapV=Z,this._cachedWrapR=P,this._cachedAnisotropicFilteringLevel=x,this.samplingMode=c,this._comparisonFunction=w,this}compareSampler(M){return this._cachedWrapU===M._cachedWrapU&&this._cachedWrapV===M._cachedWrapV&&this._cachedWrapR===M._cachedWrapR&&this._cachedAnisotropicFilteringLevel===M._cachedAnisotropicFilteringLevel&&this.samplingMode===M.samplingMode&&this._comparisonFunction===M._comparisonFunction&&this._useMipMaps===M._useMipMaps}}},12207:(M,Z,P)=>{P.d(Z,{c:()=>w});var x=P(12199);const c=(M,Z,P)=>M?M.getClassName&&"Mesh"===M.getClassName()?null:!M.getClassName||"SubMesh"!==M.getClassName()&&"PhysicsBody"!==M.getClassName()?M.clone?M.clone():Array.isArray(M)?M.slice():P&&"object"===typeof M?{...M}:null:M.clone(Z):null;class w{static DeepCopy(M,Z,P,w){let v=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const G=function(M){const Z=[];do{const P=Object.getOwnPropertyNames(M);for(const M of P)-1===Z.indexOf(M)&&Z.push(M)}while(M=Object.getPrototypeOf(M));return Z}(M);for(const K of G){if("_"===K[0]&&(!w||-1===w.indexOf(K)))continue;if(K.endsWith("Observable"))continue;if(P&&-1!==P.indexOf(K))continue;const G=M[K],d=typeof G;if("function"!==d)try{if("object"===d)if(G instanceof Uint8Array)Z[K]=Uint8Array.from(G);else if(G instanceof Array){if(Z[K]=[],G.length>0)if("object"==typeof G[0])for(let M=0;M<G.length;M++){const P=c(G[M],Z,v);-1===Z[K].indexOf(P)&&Z[K].push(P)}else Z[K]=G.slice(0)}else Z[K]=c(G,Z,v);else Z[K]=G}catch(mM){x.d.Warn(mM.message)}}}}},12238:(M,Z,P)=>{P.d(Z,{e:()=>x,i:()=>c,m:()=>w});class x extends Error{}x._setPrototypeOf=Object.setPrototypeOf||((M,Z)=>(M.__proto__=Z,M));const c={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class w extends x{constructor(M,Z,P){super(M),this.errorCode=Z,this.innerError=P,this.name="RuntimeError",x._setPrototypeOf(this,w.prototype)}}},12230:(M,Z,P)=>{P.d(Z,{e:()=>R,f:()=>N,j:()=>Q,k:()=>s,o:()=>l,m:()=>n,p:()=>F,r:()=>D,s:()=>h,u:()=>J});var x=P(12220),c=P(12192),w=P(12184);class v{}v.FilesToLoad={};var G=P(12238),mM=P(12245),K=P(12249),d=P(12225),O=P(12199),H=P(12258),j=P(12254),B=P(12260);const U=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class n extends G.m{constructor(M,Z){super(M,G.i.LoadFileError),this.name="LoadFileError",G.e._setPrototypeOf(this,n.prototype),Z instanceof x.c?this.request=Z:this.file=Z}}class L extends G.m{constructor(M,Z){super(M,G.i.RequestFileError),this.request=Z,this.name="RequestFileError",G.e._setPrototypeOf(this,L.prototype)}}class u extends G.m{constructor(M,Z){super(M,G.i.ReadFileError),this.file=Z,this.name="ReadFileError",G.e._setPrototypeOf(this,u.prototype)}}const N={DefaultRetryStrategy:class{static ExponentialBackoff(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(P,x,c)=>0!==x.status||c>=M||-1!==P.indexOf("file:")?-1:Math.pow(2,c)*Z}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:M=>M,ScriptBaseUrl:"",ScriptPreprocessUrl:M=>M,CleanUrl:M=>M=M.replace(/#/gm,"%23")},J=(M,Z)=>{if((!M||0!==M.indexOf("data:"))&&N.CorsBehavior)if("string"===typeof N.CorsBehavior||N.CorsBehavior instanceof String)Z.crossOrigin=N.CorsBehavior;else{const P=N.CorsBehavior(M);P&&(Z.crossOrigin=P)}},t={getRequiredSize:null},F=function(M,Z,P,c){let w,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",K=arguments.length>5?arguments[5]:void 0,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===O||void 0===O||!O._features.forceBitmapOverHTMLImageElement))return P("LoadImage is only supported in web or BabylonNative environments."),null;let H=!1;M instanceof ArrayBuffer||ArrayBuffer.isView(M)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(w=URL.createObjectURL(new Blob([M],{type:G})),H=!0):w=`data:${G};base64,`+(0,mM.k)(M):M instanceof Blob?(w=URL.createObjectURL(M),H=!0):(w=N.CleanUrl(M),w=N.PreprocessUrl(w));const j=Z=>{if(P){const x=w||M.toString();P(`Error while trying to load image: ${0===x.indexOf("http")||x.length<=128?x:x.slice(0,128)+"..."}`,Z)}};if(null!==O&&void 0!==O&&O._features.forceBitmapOverHTMLImageElement)return l(w,(x=>{O.createImageBitmap(new Blob([x],{type:G}),{premultiplyAlpha:"none",...K}).then((M=>{Z(M),H&&URL.revokeObjectURL(w)})).catch((Z=>{P&&P("Error while trying to load image: "+M,Z)}))}),void 0,c||void 0,!0,((M,Z)=>{j(Z)})),null;const B=new Image;if(t.getRequiredSize){const Z=t.getRequiredSize(M);Z.width&&(B.width=Z.width),Z.height&&(B.height=Z.height)}J(w,B);const U=[],n=()=>{for(const M of U)M.target.removeEventListener(M.name,M.handler);U.length=0};U.push({target:B,name:"load",handler:()=>{n(),Z(B),H&&B.src&&URL.revokeObjectURL(B.src)}}),U.push({target:B,name:"error",handler:M=>{n(),j(M),H&&B.src&&URL.revokeObjectURL(B.src)}}),U.push({target:document,name:"securitypolicyviolation",handler:M=>{if(M.blockedURI!==B.src||"Oc"===M.disposition)return;n();const Z=new Error(`CSP violation of policy ${M.effectiveDirective} ${M.blockedURI}. Current policy is ${M.originalPolicy}`);d.b.UseFallbackTexture=!1,j(Z),H&&B.src&&URL.revokeObjectURL(B.src),B.src=""}}),(()=>{for(const M of U)M.target.addEventListener(M.name,M.handler)})();const L="blob:"===w.substring(0,5),u="data:"===w.substring(0,5),F=()=>{L||u||!x.c.IsCustomRequestAvailable?B.src=w:l(w,((M,Z,P)=>{const x=new Blob([M],{type:!G&&P?P:G}),c=URL.createObjectURL(x);H=!0,B.src=c}),void 0,c||void 0,!0,((M,Z)=>{j(Z)}))},D=()=>{c&&c.loadImage(w,B)};if(!L&&!u&&c&&c.enableTexturesOffline)c.open(D,F);else{if(-1!==w.indexOf("file:")){const M=decodeURIComponent(w.substring(5).toLowerCase());if(v.FilesToLoad[M]&&"undefined"!==typeof URL){try{let Z;try{Z=URL.createObjectURL(v.FilesToLoad[M])}catch(h){Z=URL.createObjectURL(v.FilesToLoad[M])}B.src=Z,H=!0}catch(Q){B.src=""}return B}}F()}return B},D=(M,Z,P,x,c)=>{const v=new FileReader,G={onCompleteObservable:new w.b,abort:()=>v.abort()};return v.onloadend=()=>G.onCompleteObservable.notifyObservers(G),c&&(v.onerror=()=>{c(new u(`Unable to read ${M.name}`,M))}),v.onload=M=>{Z(M.target.result)},P&&(v.onprogress=P),x?v.readAsArrayBuffer(M):v.readAsText(M),G},l=(M,Z,P,x,c,mM,K)=>{if(M.name)return D(M,Z,P,c,mM?M=>{mM(void 0,M)}:void 0);const d=M;if(-1!==d.indexOf("file:")){let M=decodeURIComponent(d.substring(5).toLowerCase());0===M.indexOf("./")&&(M=M.substring(2));const x=v.FilesToLoad[M];if(x)return D(x,Z,P,c,mM?M=>mM(void 0,new n(M.message,M.file)):void 0)}const{match:j,type:B}=C(d);if(j){const M={onCompleteObservable:new w.b,abort:()=>()=>{}};try{const M=c?R(d):W(d);Z(M,void 0,B)}catch(G){mM?mM(void 0,G):O.d.Error(G.message||"Failed to parse the Data URL")}return H.b.SetImmediate((()=>{M.onCompleteObservable.notifyObservers(M)})),M}return h(d,((M,P)=>{Z(M,null===P||void 0===P?void 0:P.responseURL,null===P||void 0===P?void 0:P.getResponseHeader("content-type"))}),P,x,c,mM?M=>{mM(M.request,new n(M.message,M.request))}:void 0,K)},h=(M,Z,P,v,G,mM,K)=>{M=N.CleanUrl(M),M=N.PreprocessUrl(M);const d=N.BaseUrl+M;let H=!1;const j={onCompleteObservable:new w.b,abort:()=>H=!0},B=()=>{let M,w=new x.c,v=null;const B=()=>{w&&(P&&w.removeEventListener("progress",P),M&&w.removeEventListener("readystatechange",M),w.removeEventListener("loadend",U))};let U=()=>{B(),j.onCompleteObservable.notifyObservers(j),j.onCompleteObservable.clear(),P=void 0,M=null,U=null,mM=void 0,K=void 0,Z=void 0};j.abort=()=>{H=!0,U&&U(),w&&w.readyState!==(XMLHttpRequest.DONE||4)&&w.abort(),null!==v&&(clearTimeout(v),v=null),w=null};const n=M=>{const Z=M.message||"Unknown error";mM&&w?mM(new L(Z,w)):O.d.Error(Z)},u=O=>{if(w){if(w.open("GET",d),K)try{K(w)}catch(j){return void n(j)}G&&(w.responseType="arraybuffer"),P&&w.addEventListener("progress",P),U&&w.addEventListener("loadend",U),M=()=>{if(!H&&w&&w.readyState===(XMLHttpRequest.DONE||4)){if(M&&w.removeEventListener("readystatechange",M),w.status>=200&&w.status<300||0===w.status&&(!(0,c.p)()||I())){const M=G?w.response:w.responseText;if(null!==M){try{Z&&Z(M,w)}catch(j){n(j)}return}}const P=N.DefaultRetryStrategy;if(P){const M=P(d,w,O);if(-1!==M)return B(),w=new x.c,void(v=setTimeout((()=>u(O+1)),M))}const K=new L("Error status: "+w.status+" "+w.statusText+" - Unable to load "+d,w);mM&&mM(K)}},w.addEventListener("readystatechange",M),w.send()}};u(0)};if(v&&v.enableSceneOffline){const x=M=>{M&&M.status>400?mM&&mM(M):B()},c=()=>{v&&v.loadFile(N.BaseUrl+M,(M=>{!H&&Z&&Z(M),j.onCompleteObservable.notifyObservers(j)}),P?M=>{!H&&P&&P(M)}:void 0,x,G)};v.open(c,x)}else B();return j},Q=M=>{const{match:Z,type:P}=C(M);if(Z)return P||void 0;const x=M.lastIndexOf(".");switch(M.substring(x+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"jc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},I=()=>"undefined"!==typeof location&&"file:"===location.protocol,s=M=>U.test(M),C=M=>{const Z=U.exec(M);if(null===Z||0===Z.length)return{match:!1,type:""};return{match:!0,type:Z[0].replace("data:","").replace("base64,","")}};function R(M){return(0,mM.c)(M.split(",")[1])}const W=M=>(0,mM.f)(M.split(",")[1]);let k;B.e._FileToolsLoadImage=F,j.e.loadFile=l,K.q.loadFile=l;((M,Z,P,x,c,w,v,G,mM,K)=>{k={DecodeBase64UrlToBinary:M,DecodeBase64UrlToString:Z,DefaultRetryStrategy:P.DefaultRetryStrategy,BaseUrl:P.BaseUrl,CorsBehavior:P.CorsBehavior,PreprocessUrl:P.PreprocessUrl,IsBase64DataUrl:x,IsFileURL:c,LoadFile:w,LoadImage:v,ReadFile:G,RequestFile:mM,SetCorsBehavior:K},Object.defineProperty(k,"DefaultRetryStrategy",{get:function(){return P.DefaultRetryStrategy},set:function(M){P.DefaultRetryStrategy=M}}),Object.defineProperty(k,"BaseUrl",{get:function(){return P.BaseUrl},set:function(M){P.BaseUrl=M}}),Object.defineProperty(k,"PreprocessUrl",{get:function(){return P.PreprocessUrl},set:function(M){P.PreprocessUrl=M}}),Object.defineProperty(k,"CorsBehavior",{get:function(){return P.CorsBehavior},set:function(M){P.CorsBehavior=M}})})(R,W,N,s,I,l,F,D,h,J)},12325:(M,Z,P)=>{function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(M=>{const Z=16*Math.random()|0;return("x"===M?Z:3&Z|8).toString(16)}))}P.d(Z,{c:()=>x})},12313:(M,Z,P)=>{P.d(Z,{d:()=>w});var x=P(12199),c=P(12317);class w{static Instantiate(M){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[M])return this.RegisteredExternalClasses[M];const Z=(0,c.e)(M);if(Z)return Z;x.d.Warn(M+" not found, you may have missed an import.");const P=M.split(".");let w=window||this;for(let x=0,c=P.length;x<c;x++)w=w[P[x]];return"function"!==typeof w?null:w}}w.RegisteredExternalClasses={}},12209:(M,Z,P)=>{P.d(Z,{c:()=>c});var x=P(12192);class c{static get Now(){return(0,x.p)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12245:(M,Z,P)=>{P.d(Z,{c:()=>v,f:()=>w,i:()=>x,k:()=>c});const x=M=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(M);let Z="";for(let P=0;P<M.byteLength;P++)Z+=String.fromCharCode(M[P]);return Z},c=M=>{const Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let P,x,c,w,v,G,mM,K="",d=0;const O=ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(M);for(;d<O.length;)P=O[d++],x=d<O.length?O[d++]:Number.NaN,c=d<O.length?O[d++]:Number.NaN,w=P>>2,v=(3&P)<<4|x>>4,G=(15&x)<<2|c>>6,mM=63&c,isNaN(x)?G=mM=64:isNaN(c)&&(mM=64),K+=Z.charAt(w)+Z.charAt(v)+Z.charAt(G)+Z.charAt(mM);return K},w=M=>atob(M),v=M=>{const Z=w(M),P=Z.length,x=new Uint8Array(new ArrayBuffer(P));for(let c=0;c<P;c++)x[c]=Z.charCodeAt(c);return x.buffer}},12332:(M,Z,P)=>{function x(M){let Z=1;do{Z*=2}while(Z<M);return Z===M}function c(M,Z,P){return M*(1-P)+Z*P}function w(M){const Z=v(M),P=G(M);return Z-M>M-P?P:Z}function v(M){return M--,M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,M|=M>>16,++M}function G(M){return M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,(M|=M>>16)-(M>>1)}function mM(M,Z){let P;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:P=G(M);break;case 2:P=w(M);break;default:P=v(M)}return Math.min(P,Z)}P.d(Z,{b:()=>G,e:()=>mM,g:()=>x,k:()=>c,o:()=>w})},12175:(M,Z,P)=>{P.r(Z),P.d(Z,{AsyncLoop:()=>u,Tools:()=>n,className:()=>L});var x=P(12184),c=P(12192),w=P(12199),v=P(12207),G=P(12209),mM=P(12213),K=P(12220),d=P(12225),O=P(12230),H=P(12258),j=P(12313),B=P(12325),U=P(12332);class n{static get BaseUrl(){return O.f.BaseUrl}static set BaseUrl(M){O.f.BaseUrl=M}static get CleanUrl(){return O.f.CleanUrl}static set CleanUrl(M){O.f.CleanUrl=M}static IsAbsoluteUrl(M){return 0===M.indexOf("//")||-1!==M.indexOf("://")&&(-1!==M.indexOf(".")&&(-1!==M.indexOf("/")&&(!(M.indexOf(":")>M.indexOf("/"))&&(M.indexOf("://")<M.indexOf(".")||(0===M.indexOf("data:")||0===M.indexOf("blob:"))))))}static set ScriptBaseUrl(M){O.f.ScriptBaseUrl=M}static get ScriptBaseUrl(){return O.f.ScriptBaseUrl}static set CDNBaseUrl(M){n.ScriptBaseUrl=M,n.AssetBaseUrl=M}static set ScriptPreprocessUrl(M){O.f.ScriptPreprocessUrl=M}static get ScriptPreprocessUrl(){return O.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return O.f.DefaultRetryStrategy}static set DefaultRetryStrategy(M){O.f.DefaultRetryStrategy=M}static get CorsBehavior(){return O.f.CorsBehavior}static set CorsBehavior(M){O.f.CorsBehavior=M}static get UseFallbackTexture(){return d.b.UseFallbackTexture}static set UseFallbackTexture(M){d.b.UseFallbackTexture=M}static get RegisteredExternalClasses(){return j.d.RegisteredExternalClasses}static set RegisteredExternalClasses(M){j.d.RegisteredExternalClasses=M}static get fallbackTexture(){return d.b.FallbackTexture}static set fallbackTexture(M){d.b.FallbackTexture=M}static FetchToRef(M,Z,P,x,c,w){const v=4*((Math.abs(M)*P%P|0)+(Math.abs(Z)*x%x|0)*P);w.r=c[v]/255,w.g=c[v+1]/255,w.b=c[v+2]/255,w.a=c[v+3]/255}static Mix(M,Z,P){return 0}static Instantiate(M){return j.d.Instantiate(M)}static SetImmediate(M){H.b.SetImmediate(M)}static IsExponentOfTwo(M){return!0}static FloatRound(M){return Math.fround(M)}static GetFilename(M){const Z=M.lastIndexOf("/");return Z<0?M:M.substring(Z+1)}static GetFolderPath(M){let Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const P=M.lastIndexOf("/");return P<0?Z?M:"":M.substring(0,P+1)}static ToDegrees(M){return 180*M/Math.PI}static ToRadians(M){return M*Math.PI/180}static SmoothAngleChange(M,Z){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const x=this.ToRadians(M),c=this.ToRadians(Z);return this.ToDegrees(Math.atan2((1-P)*Math.sin(c)+P*Math.sin(x),(1-P)*Math.cos(c)+P*Math.cos(x)))}static MakeArray(M,Z){return!0===Z||void 0!==M&&null!=M?Array.isArray(M)?M:[M]:null}static GetPointerPrefix(M){return(0,c.p)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(M,Z){(0,O.u)(M,Z)}static SetReferrerPolicyBehavior(M,Z){Z.referrerPolicy=M}static get PreprocessUrl(){return O.f.PreprocessUrl}static set PreprocessUrl(M){O.f.PreprocessUrl=M}static LoadImage(M,Z,P,x,c,w){return(0,O.p)(M,Z,P,x,c,w)}static LoadFile(M,Z,P,x,c,w){return(0,O.o)(M,Z,P,x,c,w)}static async LoadFileAsync(M){let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((P,x)=>{(0,O.o)(M,(M=>{P(M)}),void 0,void 0,Z,((M,Z)=>{x(Z)}))}))}static GetAssetUrl(M){if(!M)return"";if(n.AssetBaseUrl&&M.startsWith(n._DefaultAssetsUrl)){const Z="/"===n.AssetBaseUrl[n.AssetBaseUrl.length-1]?n.AssetBaseUrl.substring(0,n.AssetBaseUrl.length-1):n.AssetBaseUrl;return M.replace(n._DefaultAssetsUrl,Z)}return M}static GetBabylonScriptURL(M,Z){if(!M)return"";if(n.ScriptBaseUrl&&M.startsWith(n._DefaultCdnUrl)){const Z="/"===n.ScriptBaseUrl[n.ScriptBaseUrl.length-1]?n.ScriptBaseUrl.substring(0,n.ScriptBaseUrl.length-1):n.ScriptBaseUrl;M=M.replace(n._DefaultCdnUrl,Z)}return M=n.ScriptPreprocessUrl(M),Z&&(M=n.GetAbsoluteUrl(M)),M}static LoadBabylonScript(M,Z,P,x){M=n.GetBabylonScriptURL(M),n.LoadScript(M,Z,P)}static async LoadBabylonScriptAsync(M){return M=n.GetBabylonScriptURL(M),await n.LoadScriptAsync(M)}static LoadScript(M,Z,P,x){let w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(M),Z&&Z()}catch(mM){null===P||void 0===P||P(`Unable to load script '${M}' in worker`,mM)}return}if(!(0,c.p)())return void(null===P||void 0===P||P(`Cannot load script '${M}' outside of a window or a worker`));const v=document.getElementsByTagName("head")[0],G=document.createElement("script");w?(G.setAttribute("type","module"),G.innerText=M):(G.setAttribute("type","text/javascript"),G.setAttribute("src",M)),x&&(G.id=x),G.onload=()=>{Z&&Z()},G.onerror=Z=>{P&&P(`Unable to load script '${M}'`,Z)},v.appendChild(G)}static async LoadScriptAsync(M,Z){return await new Promise(((P,x)=>{this.LoadScript(M,(()=>{P()}),((M,Z)=>{x(Z||new Error(M))}),Z)}))}static ReadFileAsDataURL(M,Z,P){const c=new FileReader,w={onCompleteObservable:new x.b,abort:()=>c.abort()};return c.onloadend=()=>{w.onCompleteObservable.notifyObservers(w)},c.onload=M=>{Z(M.target.result)},c.onprogress=P,c.readAsDataURL(M),w}static ReadFile(M,Z,P,x,c){return(0,O.r)(M,Z,P,x,c)}static FileAsURL(M){const Z=new Blob([M]);return window.URL.createObjectURL(Z)}static Format(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return M.toFixed(Z)}static DeepCopy(M,Z,P,x){v.c.DeepCopy(M,Z,P,x)}static IsEmpty(M){for(const Z in M)if(Object.prototype.hasOwnProperty.call(M,Z))return!1;return!0}static RegisterTopRootEvents(M,Z){for(let x=0;x<Z.length;x++){const c=Z[x];M.addEventListener(c.name,c.handler,!1);try{window.parent&&window.parent.addEventListener(c.name,c.handler,!1)}catch(P){}}}static UnregisterTopRootEvents(M,Z){for(let x=0;x<Z.length;x++){const c=Z[x];M.removeEventListener(c.name,c.handler);try{M.parent&&M.parent.removeEventListener(c.name,c.handler)}catch(P){}}}static async DumpFramebuffer(M,Z,P,x){throw(0,mM.d)("DumpTools")}static DumpData(M,Z,P,x){throw(0,mM.d)("DumpTools")}static async DumpDataAsync(M,Z,P){throw(0,mM.d)("DumpTools")}static _IsOffScreenCanvas(M){return void 0!==M.convertToBlob}static ToBlob(M,Z){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",x=arguments.length>3?arguments[3]:void 0;n._IsOffScreenCanvas(M)||M.toBlob||(M.toBlob=function(M,Z,P){setTimeout((()=>{const x=atob(this.toDataURL(Z,P).split(",")[1]),c=x.length,w=new Uint8Array(c);for(let M=0;M<c;M++)w[M]=x.charCodeAt(M);M(new Blob([w]))}))}),n._IsOffScreenCanvas(M)?M.convertToBlob({type:P,quality:x}).then((M=>Z(M))):M.toBlob((function(M){Z(M)}),P,x)}static DownloadBlob(M,Z){if("download"in document.createElement("a")){if(!Z){const M=new Date;Z="screenshot_"+((M.getFullYear()+"-"+(M.getMonth()+1)).slice(2)+"-"+M.getDate()+"_"+M.getHours()+"-"+("0"+M.getMinutes()).slice(-2))+".png"}n.Download(M,Z)}else if(M&&"undefined"!==typeof URL){const Z=URL.createObjectURL(M),P=window.open("");if(!P)return;const x=P.document.createElement("img");x.onload=function(){URL.revokeObjectURL(Z)},x.src=Z,P.document.body.appendChild(x)}}static EncodeScreenshotCanvasData(M,Z){let P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",x=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;if("string"!==typeof x&&Z){if(Z){if(n._IsOffScreenCanvas(M))return void M.convertToBlob({type:P,quality:c}).then((M=>{const P=new FileReader;P.readAsDataURL(M),P.onloadend=()=>{const M=P.result;Z(M)}}));const x=M.toDataURL(P,c);Z(x)}}else this.ToBlob(M,(function(M){M&&n.DownloadBlob(M,x),Z&&Z("")}),P,c)}static Download(M,Z){if("undefined"===typeof URL)return;const P=window.URL.createObjectURL(M),x=document.createElement("a");document.body.appendChild(x),x.style.display="none",x.href=P,x.download=Z,x.addEventListener("click",(()=>{x.parentElement&&x.parentElement.removeChild(x)})),x.click(),window.URL.revokeObjectURL(P)}static BackCompatCameraNoPreventDefault(M){return"boolean"===typeof M[0]?M[0]:"boolean"===typeof M[1]&&M[1]}static CreateScreenshot(M,Z,P,x){throw(0,mM.d)("ScreenshotTools")}static async CreateScreenshotAsync(M,Z,P){throw(0,mM.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(M,Z,P,x){throw(0,mM.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(M,Z,P){throw(0,mM.d)("ScreenshotTools")}static RandomId(){return(0,B.c)()}static IsBase64(M){return(0,O.k)(M)}static DecodeBase64(M){return(0,O.e)(M)}static get errorsCount(){return w.d.errorsCount}static Log(M){w.d.Log(M)}static Warn(M){w.d.Warn(M)}static Error(M){w.d.Error(M)}static get LogCache(){return w.d.LogCache}static ClearLogCache(){w.d.ClearLogCache()}static set LogLevels(M){w.d.LogLevels=M}static set PerformanceLogLevel(M){return(M&n.PerformanceUserMarkLogLevel)===n.PerformanceUserMarkLogLevel?(n.StartPerformanceCounter=n._StartUserMark,void(n.EndPerformanceCounter=n._EndUserMark)):(M&n.PerformanceConsoleLogLevel)===n.PerformanceConsoleLogLevel?(n.StartPerformanceCounter=n._StartPerformanceConsole,void(n.EndPerformanceCounter=n._EndPerformanceConsole)):(n.StartPerformanceCounter=n._StartPerformanceCounterDisabled,void(n.EndPerformanceCounter=n._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(M,Z){}static _EndPerformanceCounterDisabled(M,Z){}static _StartUserMark(M){let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n._Performance){if(!(0,c.p)())return;n._Performance=window.performance}Z&&n._Performance.mark&&n._Performance.mark(M+"-Begin")}static _EndUserMark(M){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&n._Performance.mark&&(n._Performance.mark(M+"-End"),n._Performance.measure(M,M+"-Begin",M+"-End"))}static _StartPerformanceConsole(M){let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Z&&(n._StartUserMark(M,Z),console.time&&console.time(M))}static _EndPerformanceConsole(M){let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Z&&(n._EndUserMark(M,Z),console.timeEnd(M))}static get Now(){return G.c.Now}static GetClassName(M){let Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null;if(!Z&&M.getClassName)P=M.getClassName();else{if(M instanceof Object){P=(Z?M:Object.getPrototypeOf(M)).constructor.__bjsclassName__}P||(P=typeof M)}return P}static First(M,Z){for(const P of M)if(Z(P))return P;return null}static getFullClassName(M){let Z=arguments.length>1&&void 0!==arguments[1]&&arguments[1],P=null,x=null;if(!Z&&M.getClassName)P=M.getClassName();else{if(M instanceof Object){const c=Z?M:Object.getPrototypeOf(M);P=c.constructor.__bjsclassName__,x=c.constructor.__bjsmoduleName__}P||(P=typeof M)}return P?(null!=x?x+".":"")+P:null}static async DelayAsync(M){await new Promise((Z=>{setTimeout((()=>{Z()}),M)}))}static IsSafari(){return!!(0,c.l)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function L(M,Z){return P=>{P.__bjsclassName__=M,P.__bjsmoduleName__=null!=Z?Z:null}}n.AssetBaseUrl="",n.UseCustomRequestHeaders=!1,n.CustomRequestHeaders=K.c.CustomRequestHeaders,n.GetDOMTextContent=c.d,n._DefaultCdnUrl="https://cdn.babylonjs.com",n._DefaultAssetsUrl="https://assets.babylonjs.com/core",n.GetAbsoluteUrl="object"===typeof document?M=>{const Z=document.createElement("a");return Z.href=M,Z.href}:"function"===typeof URL&&"object"===typeof location?M=>new URL(M,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},n.NoneLogLevel=w.d.NoneLogLevel,n.MessageLogLevel=w.d.MessageLogLevel,n.WarningLogLevel=w.d.WarningLogLevel,n.ErrorLogLevel=w.d.ErrorLogLevel,n.AllLogLevel=w.d.AllLogLevel,n.IsWindowObjectExist=c.p,n.PerformanceNoneLogLevel=0,n.PerformanceUserMarkLogLevel=1,n.PerformanceConsoleLogLevel=2,n.StartPerformanceCounter=n._StartPerformanceCounterDisabled,n.EndPerformanceCounter=n._EndPerformanceCounterDisabled;class u{constructor(M,Z,P){let x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=M,this.index=x-1,this._done=!1,this._fn=Z,this._successCallback=P}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(M,Z,P){const x=new u(M,Z,P,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return x.executeNext(),x}static SyncAsyncForLoop(M,Z,P,x,c){let w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return u.Run(Math.ceil(M/Z),(x=>{c&&c()?x.breakLoop():setTimeout((()=>{for(let w=0;w<Z;++w){const v=x.index*Z+w;if(v>=M)break;if(P(v),c&&c()){x.breakLoop();break}}x.executeNext()}),w)}),x)}}n.Mix=U.k,n.IsExponentOfTwo=U.g,d.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12317:(M,Z,P)=>{P.d(Z,{e:()=>w,g:()=>c});const x={};function c(M,Z){x[M]=Z}function w(M){return x[M]}},12220:(M,Z,P)=>{P.d(Z,{c:()=>x});class x{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(x.CustomRequestHeaders).length>0||x.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const M in x.CustomRequestHeaders){const Z=x.CustomRequestHeaders[M];Z&&this._xhr.setRequestHeader(M,Z)}}_shouldSkipRequestModifications(M){return x.SkipRequestModificationForBabylonCDN&&(M.includes("preview.babylonjs.com")||M.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(M){this._xhr.onprogress=M}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(M){this._xhr.responseType=M}get timeout(){return this._xhr.timeout}set timeout(M){this._xhr.timeout=M}addEventListener(M,Z,P){this._xhr.addEventListener(M,Z,P)}removeEventListener(M,Z,P){this._xhr.removeEventListener(M,Z,P)}abort(){this._xhr.abort()}send(M){x.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(M)}open(M,Z){for(const P of x.CustomRequestModifiers){if(this._shouldSkipRequestModifications(Z))return;Z=P(this._xhr,Z)||Z}Z=(Z=Z.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=Z,this._xhr.open(M,Z,!0)}setRequestHeader(M,Z){this._xhr.setRequestHeader(M,Z)}getResponseHeader(M){return this._xhr.getResponseHeader(M)}}x.CustomRequestHeaders={},x.CustomRequestModifiers=new Array,x.SkipRequestModificationForBabylonCDN=!0}}]);