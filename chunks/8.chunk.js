"use strict";(self.dwifukwnts=self.dwifukwnts||[]).push([[8],{11487:(U,X,b)=>{b.d(X,{e:()=>N});var F=b(11442),E=b(11408),w=b(11490),Q=b(11519),z=b(11421);class q{constructor(){let U=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,U&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(U){this._zOffset!==U&&(this._zOffset=U,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(U){this._zOffsetUnits!==U&&(this._zOffsetUnits=U,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(U){this._cullFace!==U&&(this._cullFace=U,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(U){this._cull!==U&&(this._cull=U,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(U){this._depthFunc!==U&&(this._depthFunc=U,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(U){this._depthMask!==U&&(this._depthMask=U,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(U){this._depthTest!==U&&(this._depthTest=U,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(U){this._frontFace!==U&&(this._frontFace=U,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(U){this.isDirty&&(this._isCullDirty&&(this.cull?U.enable(U.CULL_FACE):U.disable(U.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(U.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(U.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?U.enable(U.DEPTH_TEST):U.disable(U.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(U.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(U.enable(U.POLYGON_OFFSET_FILL),U.polygonOffset(this.zOffset,this.zOffsetUnits)):U.disable(U.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(U.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class p{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(U){this._func!==U&&(this._func=U,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(U){this._funcRef!==U&&(this._funcRef=U,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(U){this._funcMask!==U&&(this._funcMask=U,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(U){this._opStencilFail!==U&&(this._opStencilFail=U,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(U){this._opDepthFail!==U&&(this._opDepthFail=U,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(U){this._opStencilDepthPass!==U&&(this._opStencilDepthPass=U,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(U){this._mask!==U&&(this._mask=U,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(U){this._enabled!==U&&(this._enabled=U,this._isStencilTestDirty=!0)}constructor(){let U=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,U&&this.reset()}reset(){var U;this.stencilMaterial=void 0,null===(U=this.stencilGlobal)||void 0===U||U.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(U){var X;if(!U)return;const b=!this.useStencilGlobalOnly&&!(null===(X=this.stencilMaterial)||void 0===X||!X.enabled);this.enabled=b?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=b?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=b?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=b?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=b?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=b?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=b?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=b?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?U.enable(U.STENCIL_TEST):U.disable(U.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(U.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(U.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(U.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class S{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=S.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=S.KEEP,this.opDepthFail=S.KEEP,this.opStencilDepthPass=S.REPLACE}get stencilFunc(){return this.func}set stencilFunc(U){this.func=U}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(U){this.funcRef=U}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(U){this.funcMask=U}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(U){this.opStencilFail=U}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(U){this.opDepthFail=U}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(U){this.opStencilDepthPass=U}get stencilMask(){return this.mask}set stencilMask(U){this.mask=U}get stencilTest(){return this.enabled}set stencilTest(U){this.enabled=U}}S.ALWAYS=519,S.KEEP=7680,S.REPLACE=7681;class R{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(U){this._alphaBlend!==U&&(this._alphaBlend=U,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(U,X,b,F){this._blendConstants[0]===U&&this._blendConstants[1]===X&&this._blendConstants[2]===b&&this._blendConstants[3]===F||(this._blendConstants[0]=U,this._blendConstants[1]=X,this._blendConstants[2]=b,this._blendConstants[3]=F,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(U,X,b,F){this._blendFunctionParameters[0]===U&&this._blendFunctionParameters[1]===X&&this._blendFunctionParameters[2]===b&&this._blendFunctionParameters[3]===F||(this._blendFunctionParameters[0]=U,this._blendFunctionParameters[1]=X,this._blendFunctionParameters[2]=b,this._blendFunctionParameters[3]=F,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(U,X){this._blendEquationParameters[0]===U&&this._blendEquationParameters[1]===X||(this._blendEquationParameters[0]=U,this._blendEquationParameters[1]=X,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(U){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?U.enable(U.BLEND):U.disable(U.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(U.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(U.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(U.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var n=b(11428),a=b(11528),J=b(11401),m=b(11392),x=b(11472),I=b(11543);function O(U,X){if((0,J.m)()){const{requestAnimationFrame:b}=X||window;if("function"===typeof b)return b(U)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(U);return setTimeout(U,16)}class N{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(U){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(U){U!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=U,this._depthCullingState.depthFunc=U?518:515)}setColorWrite(U){U!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=U)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(U){if(U)return this.isNDCHalfZRange?U.IS_NDC_HALF_ZRANGE="":delete U.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?U.USE_REVERSE_DEPTHBUFFER="":delete U.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?U.USE_EXACT_SRGB_CONVERSIONS="":delete U.USE_EXACT_SRGB_CONVERSIONS);{let U="";return this.isNDCHalfZRange&&(U+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(U&&(U+="\n"),U+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(U&&(U+="\n"),U+="#define USE_EXACT_SRGB_CONVERSIONS"),U}}_rebuildInternalTextures(){const U=this._internalTexturesCache.slice();for(const X of U)X._rebuild()}_rebuildRenderTargetWrappers(){const U=this._renderTargetWrapperCache.slice();for(const X of U)X._rebuild()}_rebuildEffects(){for(const U in this._compiledEffects){const X=this._compiledEffects[U];X._pipelineContext=null,X._prepareEffect()}w.Effect.ResetCache()}_rebuildGraphicsResources(){var U;this.wipeCaches(!0),this._rebuildEffects(),null===(U=this._rebuildComputeEffects)||void 0===U||U.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){E.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(U){setTimeout((()=>{this._clearEmptyResources();const X=this._depthCullingState.depthTest,b=this._depthCullingState.depthFunc,F=this._depthCullingState.depthMask,E=this._stencilState.stencilTest;U(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=X,this._depthCullingState.depthFunc=b,this._depthCullingState.depthMask=F,this._stencilState.stencilTest=E,this._flagContextRestored()}),0)}get R(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(U){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(U){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const U=new Uint8Array(4),X=[U,U,U,U,U,U];this._emptyCubeTexture=this.createRawCubeTexture(X,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(U){if(!U)return this._activeRenderLoops.length=0,void this._cancelFrame();const X=this._activeRenderLoops.indexOf(U);X>=0&&(this._activeRenderLoops.splice(X,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const U=this._frameHandler;if(this._frameHandler=0,(0,J.m)()){const{cancelAnimationFrame:X}=this.getHostWindow()||window;if("function"===typeof X)return X(U)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(U);return clearTimeout(U)}}Fb(){this.onBeginFrameObservable.notifyObservers(this)}Eb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(U){this._maxFPS=U,void 0!==U&&(this._minFrameTime=U<=0?Number.MAX_VALUE:1e3/U)}_isOverFrameTime(U){if(!U||void 0===this._maxFPS)return!1;const X=U-this._lastFrameTime;return this._lastFrameTime=U,this._renderAccumulator+=X,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(U){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(U)){let U=!0;(this.R||!this.renderEvenInBackground&&this._windowIsBackground)&&(U=!1),U&&(this.Fb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Eb())}}_renderLoop(U){this._processFrame(U),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let U=0;U<this._activeRenderLoops.length;U++){(0,this._activeRenderLoops[U])()}}_renderViews(){return!1}_queueNewFrame(U,X){return O(U,X)}runRenderLoop(U){-1===this._activeRenderLoops.indexOf(U)&&(this._activeRenderLoops.push(U),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(U){this._depthCullingState.depthTest=U}setZOffset(U){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-U:U}getZOffset(){const U=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-U:U}setZOffsetUnits(U){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-U:U}getZOffsetUnits(){const U=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-U:U}getHostWindow(){return(0,J.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(U){this._compatibilityMode=!0}_rebuildTextures(){for(const U of this.scenes)U._rebuildTextures();for(const U of this._virtualScenes)U._rebuildTextures()}_releaseRenderTargetWrapper(U){const X=this._renderTargetWrapperCache.indexOf(U);-1!==X&&this._renderTargetWrapperCache.splice(X,1)}get currentViewport(){return this._cachedViewport}setViewport(U,X,b){const F=X||this.getRenderWidth(),E=b||this.getRenderHeight(),w=U.x||0,Q=U.y||0;this._cachedViewport=U,this._viewport(w*F,Q*E,F*U.width,E*U.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(U){return new Path2D(U)}get description(){let U=this.name+this.version;return this._caps.parallelShaderCompile&&(U+=" - Parallel shader compilation"),U}_createTextureBase(U,X,b,w){let Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7?arguments[7]:void 0,S=arguments.length>8?arguments[8]:void 0,R=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,n=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,J=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,x=arguments.length>13?arguments[13]:void 0,O=arguments.length>14?arguments[14]:void 0,u=arguments.length>15?arguments[15]:void 0;const i="data:"===(U=U||"").substring(0,5),P="blob:"===U.substring(0,5),f=i&&-1!==U.indexOf(";base64,"),j=n||new a.e(this,1);j!==n&&(j.label=U.substring(0,60));const e=U;!this._transformTextureUrl||f||n||R||(U=this._transformTextureUrl(U)),e!==U&&(j._originalUrl=e);const l=U.lastIndexOf(".");let d=m||(l>-1?U.substring(l).toLowerCase():"");d.indexOf("?")>-1&&(d=d.split("?")[0]);const k=(0,I.e)(d,x);w&&w.addPendingData(j),j.url=U,j.generateMipMaps=!X,j.samplingMode=Q,j.invertY=b,j._useSRGBBuffer=this._getUseSRGBBuffer(!!u,X),this._doNotHandleContextLost||(j._buffer=R);let v=null;z&&!n&&(v=j.onLoadedObservable.add(z)),n||this._internalTexturesCache.push(j);const A=(b,n)=>{w&&w.removePendingData(j),U===e?(v&&j.onLoadedObservable.remove(v),F.c.UseFallbackTexture&&U!==F.c.FallbackTexture&&this._createTextureBase(F.c.FallbackTexture,X,j.invertY,w,Q,null,q,p,S,R,j),b=(b||"Unknown error")+(F.c.UseFallbackTexture?" - Fallback texture was used":""),j.onErrorObservable.notifyObservers({message:b,exception:n}),q&&q(b,n)):(E.e.Warn(`Failed to load ${U}, falling back to ${e}`),this._createTextureBase(e,X,j.invertY,w,Q,z,q,p,S,R,j,J,m,x,O,u))};if(k){const X=async U=>{(await k).loadData(U,j,((U,X,b,F,E,z)=>{z?A("TextureLoader failed to load data"):p(j,d,w,{width:U,height:X},j.invertY,!b,F,(()=>(E(),!1)),Q)}),O)};R?R instanceof ArrayBuffer?X(new Uint8Array(R)):ArrayBuffer.isView(R)?X(R):q&&q("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(U,(U=>{X(new Uint8Array(U))}),void 0,w?w.offlineProvider:void 0,!0,((U,X)=>{A("Unable to load "+(U&&U.responseURL,X))}))}else{const b=U=>{P&&!this._doNotHandleContextLost&&(j._buffer=U),p(j,d,w,U,j.invertY,X,!1,S,Q)};!i||f?R&&("string"===typeof R.decoding||R.close)?b(R):N._FileToolsLoadImage(U||"",b,A,w?w.offlineProvider:null,x,j.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof R||R instanceof ArrayBuffer||ArrayBuffer.isView(R)||R instanceof Blob?N._FileToolsLoadImage(R,b,A,w?w.offlineProvider:null,x,j.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):R&&b(R)}return j}_rebuildBuffers(){for(const U of this._uniformBuffers)U._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,J.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const U in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,U)&&(this._boundTexturesCache[U]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(U){this._name=U}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(U){this._hardwareScalingLevel=U,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(U){this._doNotHandleContextLost=U}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(U,X,b){var E,w;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new q,this._stencilStateComposer=new p,this._stencilState=new S,this._alphaState=new R,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new m.e,this.onCanvasFocusObservable=new m.e,this.onNewSceneAddedObservable=new m.e,this.onResizeObservable=new m.e,this.onCanvasPointerOutObservable=new m.e,this.onEffectErrorObservable=new m.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new m.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=U=>this._renderLoop(U),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new m.e,this.onAfterShaderCompilationObservable=new m.e,this.onBeginFrameObservable=new m.e,this.onEndFrameObservable=new m.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new m.e,this.onContextRestoredObservable=new m.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.wb=new m.e,this.onReleaseEffectsObservable=new m.e,F.c.Instances.push(this),this.startTime=z.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Q.e.SetMatrixPrecision(!!X.useHighPrecisionMatrix),(0,J.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=b??!1,X.antialias=U??X.antialias,X.deterministicLockstep=X.deterministicLockstep??!1,X.lockstepMaxSteps=X.lockstepMaxSteps??4,X.timeStep=X.timeStep??1/60,X.stencil=X.stencil??!0,this._audioContext=(null===(E=X.audioEngineOptions)||void 0===E?void 0:E.audioContext)??null,this._audioDestination=(null===(w=X.audioEngineOptions)||void 0===w?void 0:w.audioDestination)??null,this.premultipliedAlpha=X.premultipliedAlpha??!0,this._doNotHandleContextLost=!!X.doNotHandleContextLost,this._isStencilEnable=!!X.stencil,this.useExactSrgbConversions=X.useExactSrgbConversions??!1;const n=(0,J.m)()&&window.devicePixelRatio||1,a=X.limitDeviceRatio||n;b=b||X.adaptToDeviceRatio||!1,this._hardwareScalingLevel=b?1/Math.min(a,n):1,this._lastDevicePixelRatio=n,this._creationOptions=X}resize(){let U,X,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const U=(0,J.m)()&&window.devicePixelRatio||1,X=this._lastDevicePixelRatio/U;this._lastDevicePixelRatio=U,this._hardwareScalingLevel*=X}if((0,J.m)()&&(0,J.e)())if(this._renderingCanvas){var F,E;const b=null===(F=(E=this._renderingCanvas).getBoundingClientRect)||void 0===F?void 0:F.call(E);U=this._renderingCanvas.clientWidth||(null===b||void 0===b?void 0:b.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,X=this._renderingCanvas.clientHeight||(null===b||void 0===b?void 0:b.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else U=window.innerWidth,X=window.innerHeight;else U=this._renderingCanvas?this._renderingCanvas.width:100,X=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(U/this._hardwareScalingLevel,X/this._hardwareScalingLevel,b)}setSize(U,X){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(U|=0,X|=0,!b&&this._renderingCanvas.width===U&&this._renderingCanvas.height===X)return!1;if(this._renderingCanvas.width=U,this._renderingCanvas.height=X,this.scenes){for(let U=0;U<this.scenes.length;U++){const X=this.scenes[U];for(let U=0;U<X.cameras.length;U++){X.cameras[U]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(U,X,b,F,E,w,Q,z,q,p,S){throw(0,n.b)("engine.rawTexture")}createRawCubeTexture(U,X,b,F,E,w,Q,z){throw(0,n.b)("engine.rawTexture")}createRawTexture3D(U,X,b,F,E,w,Q,z,q,p,S){throw(0,n.b)("engine.rawTexture")}createRawTexture2DArray(U,X,b,F,E,w,Q,z,q,p,S){throw(0,n.b)("engine.rawTexture")}_sharedInit(U){this._renderingCanvas=U}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const U=navigator.userAgent;this.hostInformation.isMobile=-1!==U.indexOf("Mobile")||-1!==U.indexOf("Mac")&&(0,J.e)()&&"ontouchend"in document},this._checkForMobile(),(0,J.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(U){return document.createElement("video")}_reportDrawCall(){var U;let X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(U=this._drawCalls)||void 0===U||U.addCount(X,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(U,X){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(U,X){return createImageBitmap(U,X)}resizeImageBitmap(U,X,b){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(U){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(U,X){if("undefined"===typeof document)return new OffscreenCanvas(U,X);const b=document.createElement("canvas");return b.width=U,b.height=X,b}createCanvas(U,X){return N._CreateCanvas(U,X)}static _FileToolsLoadImage(U,X,b,F,E,w,Q){throw(0,n.b)("FileTools")}_loadFile(U,X,b,F,E,w){const Q=(0,x.k)(U,X,b,F,E,w);return this._activeRequests.push(Q),Q.onCompleteObservable.add((()=>{const U=this._activeRequests.indexOf(Q);-1!==U&&this._activeRequests.splice(U,1)})),Q}static _FileToolsLoadFile(U,X,b,F,E,w){if(x.d.loadFile)return x.d.loadFile(U,X,b,F,E,w);throw(0,n.b)("FileTools")}dispose(){var U;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(U=this.releaseComputeEffects)||void 0===U||U.call(this),w.Effect.ResetCache();for(const b of this._activeRequests)b.abort();this._boundRenderFunction=null,this.wb.notifyObservers(this),this.wb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,J.m)()&&window.removeEventListener("resize",this._checkForMobile);const X=F.c.Instances.indexOf(this);X>=0&&F.c.Instances.splice(X,1),F.c.Instances.length||(F.c.OnEnginesDisposedObservable.notifyObservers(this),F.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(U){throw(0,n.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(U,X){for(let b=0;b<F.c.Instances.length;b++){const E=F.c.Instances[b];for(let b=0;b<E.scenes.length;b++)E.scenes[b].markAllMaterialsAsDirty(U,X)}}}N._RenderPassIdCounter=0,N._RescalePostProcessFactory=null,N.CollisionsEpsilon=.001,N.QueueNewFrame=O},11442:(U,X,b)=>{b.d(X,{c:()=>E});var F=b(11392);class E{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}E.Instances=[],E.OnEnginesDisposedObservable=new F.e,E._LastCreatedScene=null,E.UseFallbackTexture=!0,E.FallbackTexture=""},11519:(U,X,b)=>{b.d(X,{e:()=>F});class F{static SetMatrixPrecision(U){if(F.MatrixTrackPrecisionChange=!1,U&&!F.MatrixUse64Bits&&F.MatrixTrackedMatrices)for(let X=0;X<F.MatrixTrackedMatrices.length;++X){const U=F.MatrixTrackedMatrices[X],b=U.zb;U.zb=new Array(16);for(let X=0;X<16;++X)U.zb[X]=b[X]}F.MatrixUse64Bits=U,F.MatrixCurrentType=F.MatrixUse64Bits?Array:Float32Array,F.MatrixTrackedMatrices=null}}F.MatrixUse64Bits=!1,F.MatrixTrackPrecisionChange=!0,F.MatrixCurrentType=Float32Array,F.MatrixTrackedMatrices=[]},11543:(U,X,b)=>{b.d(X,{e:()=>Q});var F=b(11408);const E=new Map;function w(U,X){(function(U){return E.delete(U)})(U)&&F.e.Warn(`Extension with the name '${U}' already exists`),E.set(U,X)}function Q(U,X){"image/ktx"!==X&&"image/ktx2"!==X||(U=".ktx"),E.has(U)||(U.endsWith(".ies")&&w(".ies",(async()=>await b.e(15).then(b.bind(b,14015)).then((U=>new U._IESTextureLoader)))),U.endsWith(".dds")&&w(".dds",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(28)]).then(b.bind(b,14019)).then((U=>new U._DDSTextureLoader)))),U.endsWith(".basis")&&w(".basis",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(47)]).then(b.bind(b,14036)).then((U=>new U._BasisTextureLoader)))),U.endsWith(".env")&&w(".env",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(23),b.e(21),b.e(45),b.e(48)]).then(b.bind(b,14039)).then((U=>new U._ENVTextureLoader)))),U.endsWith(".hdr")&&w(".hdr",(async()=>await Promise.all([b.e(14),b.e(49)]).then(b.bind(b,14044)).then((U=>new U._HDRTextureLoader)))),(U.endsWith(".ktx")||U.endsWith(".ktx2"))&&(w(".ktx",(async()=>await b.e(30).then(b.bind(b,14050)).then((U=>new U._KTXTextureLoader)))),w(".ktx2",(async()=>await b.e(30).then(b.bind(b,14050)).then((U=>new U._KTXTextureLoader))))),U.endsWith(".tga")&&w(".tga",(async()=>await b.e(50).then(b.bind(b,14056)).then((U=>new U._TGATextureLoader)))),U.endsWith(".exr")&&w(".exr",(async()=>await b.e(16).then(b.bind(b,14062)).then((U=>new U._ExrTextureLoader)))));const F=E.get(U);return F?Promise.resolve(F(X)):null}},11528:(U,X,b)=>{b.d(X,{e:()=>Q});var F,E=b(11392),w=b(11535);!function(U){U[U.Unknown=0]="Unknown",U[U.Url=1]="Url",U[U.Temp=2]="Temp",U[U.Raw=3]="Raw",U[U.Dynamic=4]="Dynamic",U[U.RenderTarget=5]="RenderTarget",U[U.MultiRenderTarget=6]="MultiRenderTarget",U[U.Cube=7]="Cube",U[U.CubeRaw=8]="CubeRaw",U[U.CubePrefiltered=9]="CubePrefiltered",U[U.Raw3D=10]="Raw3D",U[U.Raw2DArray=11]="Raw2DArray",U[U.DepthStencil=12]="DepthStencil",U[U.CubeRawRGBD=13]="CubeRawRGBD",U[U.Depth=14]="Depth"}(F||(F={}));class Q extends w.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(U){this.generateMipMaps=U}get uniqueId(){return this._uniqueId}_setUniqueId(U){this._uniqueId=U}getEngine(){return this._engine}get source(){return this._source}constructor(U,X){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new E.e,this.onErrorObservable=new E.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=U,this._source=X,this._uniqueId=Q._Counter++,b||(this._hardwareTexture=U._createHardwareTexture())}incrementReferences(){this._references++}updateSize(U,X){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,U,X,b),this.width=U,this.height=X,this.depth=b,this.baseWidth=U,this.baseHeight=X,this.baseDepth=b,this._size=U*X*b}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const U=this.onRebuildCallback(this),X=X=>{X._swapAndDie(this,!1),this.isReady=U.isReady};return void(U.isAsync?U.proxy.then(X):X(U.proxy))}let U;switch(this.source){case 2:case 12:case 14:break;case 1:return void(U=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(U=>{U._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:U=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),U._swapAndDie(this,!1),this.isReady=!0;break;case 10:U=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),U._swapAndDie(this,!1),this.isReady=!0;break;case 11:U=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),U._swapAndDie(this,!1),this.isReady=!0;break;case 4:U=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),U._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(U=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{U._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:U=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),U._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return U=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(U=>{U&&U._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(U._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(U){var X;let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(X=this._hardwareTexture)||void 0===X||X.setUsage(U._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),U._hardwareTexture=this._hardwareTexture,b&&(U._isRGBD=this._isRGBD),this._lodTextureHigh&&(U._lodTextureHigh&&U._lodTextureHigh.dispose(),U._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(U._lodTextureMid&&U._lodTextureMid.dispose(),U._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(U._lodTextureLow&&U._lodTextureLow.dispose(),U._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(U._irradianceTexture&&U._irradianceTexture.dispose(),U._irradianceTexture=this._irradianceTexture);const F=this._engine.getLoadedTexturesCache();let E=F.indexOf(this);-1!==E&&F.splice(E,1),E=F.indexOf(U),-1===E&&F.push(U)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Q._Counter=0},11535:(U,X,b)=>{b.d(X,{e:()=>F});class F{get wrapU(){return this._cachedWrapU}set wrapU(U){this._cachedWrapU=U}get wrapV(){return this._cachedWrapV}set wrapV(U){this._cachedWrapV=U}get wrapR(){return this._cachedWrapR}set wrapR(U){this._cachedWrapR=U}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(U){this._cachedAnisotropicFilteringLevel=U}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(U){this._comparisonFunction=U}get useMipMaps(){return this._useMipMaps}set useMipMaps(U){this._useMipMaps=U}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=U,this._cachedWrapV=X,this._cachedWrapR=b,this._cachedAnisotropicFilteringLevel=F,this.samplingMode=E,this._comparisonFunction=w,this}compareSampler(U){return this._cachedWrapU===U._cachedWrapU&&this._cachedWrapV===U._cachedWrapV&&this._cachedWrapR===U._cachedWrapR&&this._cachedAnisotropicFilteringLevel===U._cachedAnisotropicFilteringLevel&&this.samplingMode===U.samplingMode&&this._comparisonFunction===U._comparisonFunction&&this._useMipMaps===U._useMipMaps}}},11416:(U,X,b)=>{b.d(X,{d:()=>w});var F=b(11408);const E=(U,X,b)=>U?U.getClassName&&"Mesh"===U.getClassName()?null:!U.getClassName||"SubMesh"!==U.getClassName()&&"PhysicsBody"!==U.getClassName()?U.clone?U.clone():Array.isArray(U)?U.slice():b&&"object"===typeof U?{...U}:null:U.clone(X):null;class w{static DeepCopy(U,X,b,w){let Q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const z=function(U){const X=[];do{const b=Object.getOwnPropertyNames(U);for(const U of b)-1===X.indexOf(U)&&X.push(U)}while(U=Object.getPrototypeOf(U));return X}(U);for(const p of z){if("_"===p[0]&&(!w||-1===w.indexOf(p)))continue;if(p.endsWith("Observable"))continue;if(b&&-1!==b.indexOf(p))continue;const z=U[p],S=typeof z;if("function"!==S)try{if("object"===S)if(z instanceof Uint8Array)X[p]=Uint8Array.from(z);else if(z instanceof Array){if(X[p]=[],z.length>0)if("object"==typeof z[0])for(let U=0;U<z.length;U++){const b=E(z[U],X,Q);-1===X[p].indexOf(b)&&X[p].push(b)}else X[p]=z.slice(0)}else X[p]=E(z,X,Q);else X[p]=z}catch(q){F.e.Warn(q.message)}}}}},11454:(U,X,b)=>{b.d(X,{c:()=>F,f:()=>E,g:()=>w});class F extends Error{}F._setPrototypeOf=Object.setPrototypeOf||((U,X)=>(U.__proto__=X,U));const E={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class w extends F{constructor(U,X,b){super(U),this.errorCode=X,this.innerError=b,this.name="RuntimeError",F._setPrototypeOf(this,w.prototype)}}},11448:(U,X,b)=>{b.d(X,{b:()=>A,e:()=>N,i:()=>l,k:()=>k,o:()=>j,m:()=>x,p:()=>P,r:()=>f,t:()=>e,u:()=>u});var F=b(11436),E=b(11401),w=b(11392);class Q{}Q.FilesToLoad={};var z=b(11454),q=b(11463),p=b(11469),S=b(11442),R=b(11408),n=b(11481),a=b(11472),J=b(11487);const m=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class x extends z.g{constructor(U,X){super(U,z.f.LoadFileError),this.name="LoadFileError",z.c._setPrototypeOf(this,x.prototype),X instanceof F.b?this.request=X:this.file=X}}class I extends z.g{constructor(U,X){super(U,z.f.RequestFileError),this.request=X,this.name="RequestFileError",z.c._setPrototypeOf(this,I.prototype)}}class O extends z.g{constructor(U,X){super(U,z.f.ReadFileError),this.file=X,this.name="ReadFileError",z.c._setPrototypeOf(this,O.prototype)}}const N={DefaultRetryStrategy:class{static ExponentialBackoff(){let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(b,F,E)=>0!==F.status||E>=U||-1!==b.indexOf("file:")?-1:Math.pow(2,E)*X}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:U=>U,ScriptBaseUrl:"",ScriptPreprocessUrl:U=>U,CleanUrl:U=>U=U.replace(/#/gm,"%23")},u=(U,X)=>{if((!U||0!==U.indexOf("data:"))&&N.CorsBehavior)if("string"===typeof N.CorsBehavior||N.CorsBehavior instanceof String)X.crossOrigin=N.CorsBehavior;else{const b=N.CorsBehavior(U);b&&(X.crossOrigin=b)}},i={getRequiredSize:null},P=function(U,X,b,E){let w,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",p=arguments.length>5?arguments[5]:void 0,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:S.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===R||void 0===R||!R._features.forceBitmapOverHTMLImageElement))return b("LoadImage is only supported in web or BabylonNative environments."),null;let n=!1;U instanceof ArrayBuffer||ArrayBuffer.isView(U)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(w=URL.createObjectURL(new Blob([U],{type:z})),n=!0):w=`data:${z};base64,`+(0,q.e)(U):U instanceof Blob?(w=URL.createObjectURL(U),n=!0):(w=N.CleanUrl(U),w=N.PreprocessUrl(w));const a=X=>{if(b){const F=w||U.toString();b(`Error while trying to load image: ${0===F.indexOf("http")||F.length<=128?F:F.slice(0,128)+"..."}`,X)}};if(null!==R&&void 0!==R&&R._features.forceBitmapOverHTMLImageElement)return j(w,(F=>{R.createImageBitmap(new Blob([F],{type:z}),{premultiplyAlpha:"none",...p}).then((U=>{X(U),n&&URL.revokeObjectURL(w)})).catch((X=>{b&&b("Error while trying to load image: "+U,X)}))}),void 0,E||void 0,!0,((U,X)=>{a(X)})),null;const J=new Image;if(i.getRequiredSize){const X=i.getRequiredSize(U);X.width&&(J.width=X.width),X.height&&(J.height=X.height)}u(w,J);const m=[],x=()=>{for(const U of m)U.target.removeEventListener(U.name,U.handler);m.length=0};m.push({target:J,name:"load",handler:()=>{x(),X(J),n&&J.src&&URL.revokeObjectURL(J.src)}}),m.push({target:J,name:"error",handler:U=>{x(),a(U),n&&J.src&&URL.revokeObjectURL(J.src)}}),m.push({target:document,name:"securitypolicyviolation",handler:U=>{if(U.blockedURI!==J.src||"pb"===U.disposition)return;x();const X=new Error(`CSP violation of policy ${U.effectiveDirective} ${U.blockedURI}. Current policy is ${U.originalPolicy}`);S.c.UseFallbackTexture=!1,a(X),n&&J.src&&URL.revokeObjectURL(J.src),J.src=""}}),(()=>{for(const U of m)U.target.addEventListener(U.name,U.handler)})();const I="blob:"===w.substring(0,5),O="data:"===w.substring(0,5),P=()=>{I||O||!F.b.IsCustomRequestAvailable?J.src=w:j(w,((U,X,b)=>{const F=new Blob([U],{type:!z&&b?b:z}),E=URL.createObjectURL(F);n=!0,J.src=E}),void 0,E||void 0,!0,((U,X)=>{a(X)}))},f=()=>{E&&E.loadImage(w,J)};if(!I&&!O&&E&&E.enableTexturesOffline)E.open(f,P);else{if(-1!==w.indexOf("file:")){const U=decodeURIComponent(w.substring(5).toLowerCase());if(Q.FilesToLoad[U]&&"undefined"!==typeof URL){try{let X;try{X=URL.createObjectURL(Q.FilesToLoad[U])}catch(e){X=URL.createObjectURL(Q.FilesToLoad[U])}J.src=X,n=!0}catch(l){J.src=""}return J}}P()}return J},f=(U,X,b,F,E)=>{const Q=new FileReader,z={onCompleteObservable:new w.e,abort:()=>Q.abort()};return Q.onloadend=()=>z.onCompleteObservable.notifyObservers(z),E&&(Q.onerror=()=>{E(new O(`Unable to read ${U.name}`,U))}),Q.onload=U=>{X(U.target.result)},b&&(Q.onprogress=b),F?Q.readAsArrayBuffer(U):Q.readAsText(U),z},j=(U,X,b,F,E,q,p)=>{if(U.name)return f(U,X,b,E,q?U=>{q(void 0,U)}:void 0);const S=U;if(-1!==S.indexOf("file:")){let U=decodeURIComponent(S.substring(5).toLowerCase());0===U.indexOf("./")&&(U=U.substring(2));const F=Q.FilesToLoad[U];if(F)return f(F,X,b,E,q?U=>q(void 0,new x(U.message,U.file)):void 0)}const{match:a,type:J}=v(S);if(a){const U={onCompleteObservable:new w.e,abort:()=>()=>{}};try{const U=E?A(S):s(S);X(U,void 0,J)}catch(z){q?q(void 0,z):R.e.Error(z.message||"Failed to parse the Data URL")}return n.c.SetImmediate((()=>{U.onCompleteObservable.notifyObservers(U)})),U}return e(S,((U,b)=>{X(U,null===b||void 0===b?void 0:b.responseURL,null===b||void 0===b?void 0:b.getResponseHeader("content-type"))}),b,F,E,q?U=>{q(U.request,new x(U.message,U.request))}:void 0,p)},e=(U,X,b,Q,z,q,p)=>{U=N.CleanUrl(U),U=N.PreprocessUrl(U);const S=N.BaseUrl+U;let n=!1;const a={onCompleteObservable:new w.e,abort:()=>n=!0},J=()=>{let U,w=new F.b,Q=null;const J=()=>{w&&(b&&w.removeEventListener("progress",b),U&&w.removeEventListener("readystatechange",U),w.removeEventListener("loadend",m))};let m=()=>{J(),a.onCompleteObservable.notifyObservers(a),a.onCompleteObservable.clear(),b=void 0,U=null,m=null,q=void 0,p=void 0,X=void 0};a.abort=()=>{n=!0,m&&m(),w&&w.readyState!==(XMLHttpRequest.DONE||4)&&w.abort(),null!==Q&&(clearTimeout(Q),Q=null),w=null};const x=U=>{const X=U.message||"Unknown error";q&&w?q(new I(X,w)):R.e.Error(X)},O=R=>{if(w){if(w.open("GET",S),p)try{p(w)}catch(a){return void x(a)}z&&(w.responseType="arraybuffer"),b&&w.addEventListener("progress",b),m&&w.addEventListener("loadend",m),U=()=>{if(!n&&w&&w.readyState===(XMLHttpRequest.DONE||4)){if(U&&w.removeEventListener("readystatechange",U),w.status>=200&&w.status<300||0===w.status&&(!(0,E.m)()||d())){const U=z?w.response:w.responseText;if(null!==U){try{X&&X(U,w)}catch(a){x(a)}return}}const b=N.DefaultRetryStrategy;if(b){const U=b(S,w,R);if(-1!==U)return J(),w=new F.b,void(Q=setTimeout((()=>O(R+1)),U))}const p=new I("Error status: "+w.status+" "+w.statusText+" - Unable to load "+S,w);q&&q(p)}},w.addEventListener("readystatechange",U),w.send()}};O(0)};if(Q&&Q.enableSceneOffline){const F=U=>{U&&U.status>400?q&&q(U):J()},E=()=>{Q&&Q.loadFile(N.BaseUrl+U,(U=>{!n&&X&&X(U),a.onCompleteObservable.notifyObservers(a)}),b?U=>{!n&&b&&b(U)}:void 0,F,z)};Q.open(E,F)}else J();return a},l=U=>{const{match:X,type:b}=v(U);if(X)return b||void 0;const F=U.lastIndexOf(".");switch(U.substring(F+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Sb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},d=()=>"undefined"!==typeof location&&"file:"===location.protocol,k=U=>m.test(U),v=U=>{const X=m.exec(U);if(null===X||0===X.length)return{match:!1,type:""};return{match:!0,type:X[0].replace("data:","").replace("base64,","")}};function A(U){return(0,q.b)(U.split(",")[1])}const s=U=>(0,q.c)(U.split(",")[1]);let h;J.e._FileToolsLoadImage=P,a.d.loadFile=j,p.p.loadFile=j;((U,X,b,F,E,w,Q,z,q,p)=>{h={DecodeBase64UrlToBinary:U,DecodeBase64UrlToString:X,DefaultRetryStrategy:b.DefaultRetryStrategy,BaseUrl:b.BaseUrl,CorsBehavior:b.CorsBehavior,PreprocessUrl:b.PreprocessUrl,IsBase64DataUrl:F,IsFileURL:E,LoadFile:w,LoadImage:Q,ReadFile:z,RequestFile:q,SetCorsBehavior:p},Object.defineProperty(h,"DefaultRetryStrategy",{get:function(){return b.DefaultRetryStrategy},set:function(U){b.DefaultRetryStrategy=U}}),Object.defineProperty(h,"BaseUrl",{get:function(){return b.BaseUrl},set:function(U){b.BaseUrl=U}}),Object.defineProperty(h,"PreprocessUrl",{get:function(){return b.PreprocessUrl},set:function(U){b.PreprocessUrl=U}}),Object.defineProperty(h,"CorsBehavior",{get:function(){return b.CorsBehavior},set:function(U){b.CorsBehavior=U}})})(A,s,N,k,d,j,P,f,e,u)},11555:(U,X,b)=>{function F(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(U=>{const X=16*Math.random()|0;return("x"===U?X:3&X|8).toString(16)}))}b.d(X,{c:()=>F})},11546:(U,X,b)=>{b.d(X,{b:()=>w});var F=b(11408),E=b(11551);class w{static Instantiate(U){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[U])return this.RegisteredExternalClasses[U];const X=(0,E.c)(U);if(X)return X;F.e.Warn(U+" not found, you may have missed an import.");const b=U.split(".");let w=window||this;for(let F=0,E=b.length;F<E;F++)w=w[b[F]];return"function"!==typeof w?null:w}}w.RegisteredExternalClasses={}},11421:(U,X,b)=>{b.d(X,{e:()=>E});var F=b(11401);class E{static get Now(){return(0,F.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11463:(U,X,b)=>{b.d(X,{b:()=>Q,c:()=>w,d:()=>F,e:()=>E});const F=U=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(U);let X="";for(let b=0;b<U.byteLength;b++)X+=String.fromCharCode(U[b]);return X},E=U=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b,F,E,w,Q,z,q,p="",S=0;const R=ArrayBuffer.isView(U)?new Uint8Array(U.buffer,U.byteOffset,U.byteLength):new Uint8Array(U);for(;S<R.length;)b=R[S++],F=S<R.length?R[S++]:Number.NaN,E=S<R.length?R[S++]:Number.NaN,w=b>>2,Q=(3&b)<<4|F>>4,z=(15&F)<<2|E>>6,q=63&E,isNaN(F)?z=q=64:isNaN(E)&&(q=64),p+=X.charAt(w)+X.charAt(Q)+X.charAt(z)+X.charAt(q);return p},w=U=>atob(U),Q=U=>{const X=w(U),b=X.length,F=new Uint8Array(new ArrayBuffer(b));for(let E=0;E<b;E++)F[E]=X.charCodeAt(E);return F.buffer}},11561:(U,X,b)=>{function F(U){let X=1;do{X*=2}while(X<U);return X===U}function E(U,X,b){return U*(1-b)+X*b}function w(U){const X=Q(U),b=z(U);return X-U>U-b?b:X}function Q(U){return U--,U|=U>>1,U|=U>>2,U|=U>>4,U|=U>>8,U|=U>>16,++U}function z(U){return U|=U>>1,U|=U>>2,U|=U>>4,U|=U>>8,(U|=U>>16)-(U>>1)}function q(U,X){let b;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:b=z(U);break;case 2:b=w(U);break;default:b=Q(U)}return Math.min(b,X)}b.d(X,{c:()=>z,d:()=>q,g:()=>F,i:()=>E,j:()=>w})},11385:(U,X,b)=>{b.r(X),b.d(X,{AsyncLoop:()=>O,Tools:()=>x,className:()=>I});var F=b(11392),E=b(11401),w=b(11408),Q=b(11416),z=b(11421),q=b(11428),p=b(11436),S=b(11442),R=b(11448),n=b(11481),a=b(11546),J=b(11555),m=b(11561);class x{static get BaseUrl(){return R.e.BaseUrl}static set BaseUrl(U){R.e.BaseUrl=U}static get CleanUrl(){return R.e.CleanUrl}static set CleanUrl(U){R.e.CleanUrl=U}static IsAbsoluteUrl(U){return 0===U.indexOf("//")||-1!==U.indexOf("://")&&(-1!==U.indexOf(".")&&(-1!==U.indexOf("/")&&(!(U.indexOf(":")>U.indexOf("/"))&&(U.indexOf("://")<U.indexOf(".")||(0===U.indexOf("data:")||0===U.indexOf("blob:"))))))}static set ScriptBaseUrl(U){R.e.ScriptBaseUrl=U}static get ScriptBaseUrl(){return R.e.ScriptBaseUrl}static set CDNBaseUrl(U){x.ScriptBaseUrl=U,x.AssetBaseUrl=U}static set ScriptPreprocessUrl(U){R.e.ScriptPreprocessUrl=U}static get ScriptPreprocessUrl(){return R.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return R.e.DefaultRetryStrategy}static set DefaultRetryStrategy(U){R.e.DefaultRetryStrategy=U}static get CorsBehavior(){return R.e.CorsBehavior}static set CorsBehavior(U){R.e.CorsBehavior=U}static get UseFallbackTexture(){return S.c.UseFallbackTexture}static set UseFallbackTexture(U){S.c.UseFallbackTexture=U}static get RegisteredExternalClasses(){return a.b.RegisteredExternalClasses}static set RegisteredExternalClasses(U){a.b.RegisteredExternalClasses=U}static get fallbackTexture(){return S.c.FallbackTexture}static set fallbackTexture(U){S.c.FallbackTexture=U}static FetchToRef(U,X,b,F,E,w){const Q=4*((Math.abs(U)*b%b|0)+(Math.abs(X)*F%F|0)*b);w.r=E[Q]/255,w.g=E[Q+1]/255,w.b=E[Q+2]/255,w.a=E[Q+3]/255}static Mix(U,X,b){return 0}static Instantiate(U){return a.b.Instantiate(U)}static SetImmediate(U){n.c.SetImmediate(U)}static IsExponentOfTwo(U){return!0}static FloatRound(U){return Math.fround(U)}static GetFilename(U){const X=U.lastIndexOf("/");return X<0?U:U.substring(X+1)}static GetFolderPath(U){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const b=U.lastIndexOf("/");return b<0?X?U:"":U.substring(0,b+1)}static ToDegrees(U){return 180*U/Math.PI}static ToRadians(U){return U*Math.PI/180}static SmoothAngleChange(U,X){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const F=this.ToRadians(U),E=this.ToRadians(X);return this.ToDegrees(Math.atan2((1-b)*Math.sin(E)+b*Math.sin(F),(1-b)*Math.cos(E)+b*Math.cos(F)))}static MakeArray(U,X){return!0===X||void 0!==U&&null!=U?Array.isArray(U)?U:[U]:null}static GetPointerPrefix(U){return(0,E.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(U,X){(0,R.u)(U,X)}static SetReferrerPolicyBehavior(U,X){X.referrerPolicy=U}static get PreprocessUrl(){return R.e.PreprocessUrl}static set PreprocessUrl(U){R.e.PreprocessUrl=U}static LoadImage(U,X,b,F,E,w){return(0,R.p)(U,X,b,F,E,w)}static LoadFile(U,X,b,F,E,w){return(0,R.o)(U,X,b,F,E,w)}static async LoadFileAsync(U){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((b,F)=>{(0,R.o)(U,(U=>{b(U)}),void 0,void 0,X,((U,X)=>{F(X)}))}))}static GetAssetUrl(U){if(!U)return"";if(x.AssetBaseUrl&&U.startsWith(x._DefaultAssetsUrl)){const X="/"===x.AssetBaseUrl[x.AssetBaseUrl.length-1]?x.AssetBaseUrl.substring(0,x.AssetBaseUrl.length-1):x.AssetBaseUrl;return U.replace(x._DefaultAssetsUrl,X)}return U}static GetBabylonScriptURL(U,X){if(!U)return"";if(x.ScriptBaseUrl&&U.startsWith(x._DefaultCdnUrl)){const X="/"===x.ScriptBaseUrl[x.ScriptBaseUrl.length-1]?x.ScriptBaseUrl.substring(0,x.ScriptBaseUrl.length-1):x.ScriptBaseUrl;U=U.replace(x._DefaultCdnUrl,X)}return U=x.ScriptPreprocessUrl(U),X&&(U=x.GetAbsoluteUrl(U)),U}static LoadBabylonScript(U,X,b,F){U=x.GetBabylonScriptURL(U),x.LoadScript(U,X,b)}static async LoadBabylonScriptAsync(U){return U=x.GetBabylonScriptURL(U),await x.LoadScriptAsync(U)}static LoadScript(U,X,b,F){let w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(U),X&&X()}catch(q){null===b||void 0===b||b(`Unable to load script '${U}' in worker`,q)}return}if(!(0,E.m)())return void(null===b||void 0===b||b(`Cannot load script '${U}' outside of a window or a worker`));const Q=document.getElementsByTagName("head")[0],z=document.createElement("script");w?(z.setAttribute("type","module"),z.innerText=U):(z.setAttribute("type","text/javascript"),z.setAttribute("src",U)),F&&(z.id=F),z.onload=()=>{X&&X()},z.onerror=X=>{b&&b(`Unable to load script '${U}'`,X)},Q.appendChild(z)}static async LoadScriptAsync(U,X){return await new Promise(((b,F)=>{this.LoadScript(U,(()=>{b()}),((U,X)=>{F(X||new Error(U))}),X)}))}static ReadFileAsDataURL(U,X,b){const E=new FileReader,w={onCompleteObservable:new F.e,abort:()=>E.abort()};return E.onloadend=()=>{w.onCompleteObservable.notifyObservers(w)},E.onload=U=>{X(U.target.result)},E.onprogress=b,E.readAsDataURL(U),w}static ReadFile(U,X,b,F,E){return(0,R.r)(U,X,b,F,E)}static FileAsURL(U){const X=new Blob([U]);return window.URL.createObjectURL(X)}static Format(U){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return U.toFixed(X)}static DeepCopy(U,X,b,F){Q.d.DeepCopy(U,X,b,F)}static IsEmpty(U){for(const X in U)if(Object.prototype.hasOwnProperty.call(U,X))return!1;return!0}static RegisterTopRootEvents(U,X){for(let F=0;F<X.length;F++){const E=X[F];U.addEventListener(E.name,E.handler,!1);try{window.parent&&window.parent.addEventListener(E.name,E.handler,!1)}catch(b){}}}static UnregisterTopRootEvents(U,X){for(let F=0;F<X.length;F++){const E=X[F];U.removeEventListener(E.name,E.handler);try{U.parent&&U.parent.removeEventListener(E.name,E.handler)}catch(b){}}}static async DumpFramebuffer(U,X,b,F){throw(0,q.b)("DumpTools")}static DumpData(U,X,b,F){throw(0,q.b)("DumpTools")}static async DumpDataAsync(U,X,b){throw(0,q.b)("DumpTools")}static _IsOffScreenCanvas(U){return void 0!==U.convertToBlob}static ToBlob(U,X){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",F=arguments.length>3?arguments[3]:void 0;x._IsOffScreenCanvas(U)||U.toBlob||(U.toBlob=function(U,X,b){setTimeout((()=>{const F=atob(this.toDataURL(X,b).split(",")[1]),E=F.length,w=new Uint8Array(E);for(let U=0;U<E;U++)w[U]=F.charCodeAt(U);U(new Blob([w]))}))}),x._IsOffScreenCanvas(U)?U.convertToBlob({type:b,quality:F}).then((U=>X(U))):U.toBlob((function(U){X(U)}),b,F)}static DownloadBlob(U,X){if("download"in document.createElement("a")){if(!X){const U=new Date;X="screenshot_"+((U.getFullYear()+"-"+(U.getMonth()+1)).slice(2)+"-"+U.getDate()+"_"+U.getHours()+"-"+("0"+U.getMinutes()).slice(-2))+".png"}x.Download(U,X)}else if(U&&"undefined"!==typeof URL){const X=URL.createObjectURL(U),b=window.open("");if(!b)return;const F=b.document.createElement("img");F.onload=function(){URL.revokeObjectURL(X)},F.src=X,b.document.body.appendChild(F)}}static EncodeScreenshotCanvasData(U,X){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",F=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0;if("string"!==typeof F&&X){if(X){if(x._IsOffScreenCanvas(U))return void U.convertToBlob({type:b,quality:E}).then((U=>{const b=new FileReader;b.readAsDataURL(U),b.onloadend=()=>{const U=b.result;X(U)}}));const F=U.toDataURL(b,E);X(F)}}else this.ToBlob(U,(function(U){U&&x.DownloadBlob(U,F),X&&X("")}),b,E)}static Download(U,X){if("undefined"===typeof URL)return;const b=window.URL.createObjectURL(U),F=document.createElement("a");document.body.appendChild(F),F.style.display="none",F.href=b,F.download=X,F.addEventListener("click",(()=>{F.parentElement&&F.parentElement.removeChild(F)})),F.click(),window.URL.revokeObjectURL(b)}static BackCompatCameraNoPreventDefault(U){return"boolean"===typeof U[0]?U[0]:"boolean"===typeof U[1]&&U[1]}static CreateScreenshot(U,X,b,F){throw(0,q.b)("ScreenshotTools")}static async CreateScreenshotAsync(U,X,b){throw(0,q.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(U,X,b,F){throw(0,q.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(U,X,b){throw(0,q.b)("ScreenshotTools")}static RandomId(){return(0,J.c)()}static IsBase64(U){return(0,R.k)(U)}static DecodeBase64(U){return(0,R.b)(U)}static get errorsCount(){return w.e.errorsCount}static Log(U){w.e.Log(U)}static Warn(U){w.e.Warn(U)}static Error(U){w.e.Error(U)}static get LogCache(){return w.e.LogCache}static ClearLogCache(){w.e.ClearLogCache()}static set LogLevels(U){w.e.LogLevels=U}static set PerformanceLogLevel(U){return(U&x.PerformanceUserMarkLogLevel)===x.PerformanceUserMarkLogLevel?(x.StartPerformanceCounter=x._StartUserMark,void(x.EndPerformanceCounter=x._EndUserMark)):(U&x.PerformanceConsoleLogLevel)===x.PerformanceConsoleLogLevel?(x.StartPerformanceCounter=x._StartPerformanceConsole,void(x.EndPerformanceCounter=x._EndPerformanceConsole)):(x.StartPerformanceCounter=x._StartPerformanceCounterDisabled,void(x.EndPerformanceCounter=x._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(U,X){}static _EndPerformanceCounterDisabled(U,X){}static _StartUserMark(U){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!x._Performance){if(!(0,E.m)())return;x._Performance=window.performance}X&&x._Performance.mark&&x._Performance.mark(U+"-Begin")}static _EndUserMark(U){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&x._Performance.mark&&(x._Performance.mark(U+"-End"),x._Performance.measure(U,U+"-Begin",U+"-End"))}static _StartPerformanceConsole(U){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];X&&(x._StartUserMark(U,X),console.time&&console.time(U))}static _EndPerformanceConsole(U){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];X&&(x._EndUserMark(U,X),console.timeEnd(U))}static get Now(){return z.e.Now}static GetClassName(U){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null;if(!X&&U.getClassName)b=U.getClassName();else{if(U instanceof Object){b=(X?U:Object.getPrototypeOf(U)).constructor.__bjsclassName__}b||(b=typeof U)}return b}static First(U,X){for(const b of U)if(X(b))return b;return null}static getFullClassName(U){let X=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null,F=null;if(!X&&U.getClassName)b=U.getClassName();else{if(U instanceof Object){const E=X?U:Object.getPrototypeOf(U);b=E.constructor.__bjsclassName__,F=E.constructor.__bjsmoduleName__}b||(b=typeof U)}return b?(null!=F?F+".":"")+b:null}static async DelayAsync(U){await new Promise((X=>{setTimeout((()=>{X()}),U)}))}static IsSafari(){return!!(0,E.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function I(U,X){return b=>{b.__bjsclassName__=U,b.__bjsmoduleName__=null!=X?X:null}}x.AssetBaseUrl="",x.UseCustomRequestHeaders=!1,x.CustomRequestHeaders=p.b.CustomRequestHeaders,x.GetDOMTextContent=E.c,x._DefaultCdnUrl="https://cdn.babylonjs.com",x._DefaultAssetsUrl="https://assets.babylonjs.com/core",x.GetAbsoluteUrl="object"===typeof document?U=>{const X=document.createElement("a");return X.href=U,X.href}:"function"===typeof URL&&"object"===typeof location?U=>new URL(U,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},x.NoneLogLevel=w.e.NoneLogLevel,x.MessageLogLevel=w.e.MessageLogLevel,x.WarningLogLevel=w.e.WarningLogLevel,x.ErrorLogLevel=w.e.ErrorLogLevel,x.AllLogLevel=w.e.AllLogLevel,x.IsWindowObjectExist=E.m,x.PerformanceNoneLogLevel=0,x.PerformanceUserMarkLogLevel=1,x.PerformanceConsoleLogLevel=2,x.StartPerformanceCounter=x._StartPerformanceCounterDisabled,x.EndPerformanceCounter=x._EndPerformanceCounterDisabled;class O{constructor(U,X,b){let F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=U,this.index=F-1,this._done=!1,this._fn=X,this._successCallback=b}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(U,X,b){const F=new O(U,X,b,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return F.executeNext(),F}static SyncAsyncForLoop(U,X,b,F,E){let w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return O.Run(Math.ceil(U/X),(F=>{E&&E()?F.breakLoop():setTimeout((()=>{for(let w=0;w<X;++w){const Q=F.index*X+w;if(Q>=U)break;if(b(Q),E&&E()){F.breakLoop();break}}F.executeNext()}),w)}),F)}}x.Mix=m.i,x.IsExponentOfTwo=m.g,S.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11551:(U,X,b)=>{b.d(X,{c:()=>w,f:()=>E});const F={};function E(U,X){F[U]=X}function w(U){return F[U]}},11436:(U,X,b)=>{b.d(X,{b:()=>F});class F{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(F.CustomRequestHeaders).length>0||F.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const U in F.CustomRequestHeaders){const X=F.CustomRequestHeaders[U];X&&this._xhr.setRequestHeader(U,X)}}_shouldSkipRequestModifications(U){return F.SkipRequestModificationForBabylonCDN&&(U.includes("preview.babylonjs.com")||U.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(U){this._xhr.onprogress=U}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(U){this._xhr.responseType=U}get timeout(){return this._xhr.timeout}set timeout(U){this._xhr.timeout=U}addEventListener(U,X,b){this._xhr.addEventListener(U,X,b)}removeEventListener(U,X,b){this._xhr.removeEventListener(U,X,b)}abort(){this._xhr.abort()}send(U){F.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(U)}open(U,X){for(const b of F.CustomRequestModifiers){if(this._shouldSkipRequestModifications(X))return;X=b(this._xhr,X)||X}X=(X=X.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=X,this._xhr.open(U,X,!0)}setRequestHeader(U,X){this._xhr.setRequestHeader(U,X)}getResponseHeader(U){return this._xhr.getResponseHeader(U)}}F.CustomRequestHeaders={},F.CustomRequestModifiers=new Array,F.SkipRequestModificationForBabylonCDN=!0}}]);