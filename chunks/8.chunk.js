"use strict";(self.b15p7b72fr8=self.b15p7b72fr8||[]).push([[8],{12481:(s,k,h)=>{h.d(k,{e:()=>D});var A=h(12445),g=h(12422),ms=h(12489),i=h(12508),K=h(12435);class H{constructor(){let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,s&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(s){this._zOffset!==s&&(this._zOffset=s,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(s){this._zOffsetUnits!==s&&(this._zOffsetUnits=s,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(s){this._cullFace!==s&&(this._cullFace=s,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(s){this._cull!==s&&(this._cull=s,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(s){this._depthFunc!==s&&(this._depthFunc=s,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(s){this._depthMask!==s&&(this._depthMask=s,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(s){this._depthTest!==s&&(this._depthTest=s,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(s){this._frontFace!==s&&(this._frontFace=s,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(s){this.isDirty&&(this._isCullDirty&&(this.cull?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(s.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(s.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(s.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(s.enable(s.POLYGON_OFFSET_FILL),s.polygonOffset(this.zOffset,this.zOffsetUnits)):s.disable(s.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(s.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class O{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(s){this._func!==s&&(this._func=s,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(s){this._funcRef!==s&&(this._funcRef=s,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(s){this._funcMask!==s&&(this._funcMask=s,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(s){this._opStencilFail!==s&&(this._opStencilFail=s,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(s){this._opDepthFail!==s&&(this._opDepthFail=s,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(s){this._opStencilDepthPass!==s&&(this._opStencilDepthPass=s,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(s){this._mask!==s&&(this._mask=s,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(s){this._enabled!==s&&(this._enabled=s,this._isStencilTestDirty=!0)}constructor(){let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,s&&this.reset()}reset(){var s;this.stencilMaterial=void 0,null===(s=this.stencilGlobal)||void 0===s||s.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(s){var k;if(!s)return;const h=!this.useStencilGlobalOnly&&!(null===(k=this.stencilMaterial)||void 0===k||!k.enabled);this.enabled=h?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=h?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=h?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=h?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=h?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=h?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=h?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=h?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(s.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(s.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(s.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class c{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=c.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=c.KEEP,this.opDepthFail=c.KEEP,this.opStencilDepthPass=c.REPLACE}get stencilFunc(){return this.func}set stencilFunc(s){this.func=s}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(s){this.funcRef=s}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(s){this.funcMask=s}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(s){this.opStencilFail=s}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(s){this.opDepthFail=s}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(s){this.opStencilDepthPass=s}get stencilMask(){return this.mask}set stencilMask(s){this.mask=s}get stencilTest(){return this.enabled}set stencilTest(s){this.enabled=s}}c.ALWAYS=519,c.KEEP=7680,c.REPLACE=7681;class S{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(s){this._alphaBlend!==s&&(this._alphaBlend=s,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(s,k,h,A){this._blendConstants[0]===s&&this._blendConstants[1]===k&&this._blendConstants[2]===h&&this._blendConstants[3]===A||(this._blendConstants[0]=s,this._blendConstants[1]=k,this._blendConstants[2]=h,this._blendConstants[3]=A,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(s,k,h,A){this._blendFunctionParameters[0]===s&&this._blendFunctionParameters[1]===k&&this._blendFunctionParameters[2]===h&&this._blendFunctionParameters[3]===A||(this._blendFunctionParameters[0]=s,this._blendFunctionParameters[1]=k,this._blendFunctionParameters[2]=h,this._blendFunctionParameters[3]=A,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(s,k){this._blendEquationParameters[0]===s&&this._blendEquationParameters[1]===k||(this._blendEquationParameters[0]=s,this._blendEquationParameters[1]=k,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(s){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?s.enable(s.BLEND):s.disable(s.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(s.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(s.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(s.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var a=h(12438),r=h(12515),d=h(12416),E=h(12408),j=h(12467),P=h(12527);function R(s,k){if((0,d.i)()){const{requestAnimationFrame:h}=k||window;if("function"===typeof h)return h(s)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(s);return setTimeout(s,16)}class D{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(s){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get rh(){return this._useReverseDepthBuffer}set rh(s){s!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=s,this._depthCullingState.depthFunc=s?518:515)}setColorWrite(s){s!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=s)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(s){if(s)return this.isNDCHalfZRange?s.IS_NDC_HALF_ZRANGE="":delete s.IS_NDC_HALF_ZRANGE,this.rh?s.USE_REVERSE_DEPTHBUFFER="":delete s.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?s.USE_EXACT_SRGB_CONVERSIONS="":delete s.USE_EXACT_SRGB_CONVERSIONS);{let s="";return this.isNDCHalfZRange&&(s+="#define IS_NDC_HALF_ZRANGE"),this.rh&&(s&&(s+="\n"),s+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(s&&(s+="\n"),s+="#define USE_EXACT_SRGB_CONVERSIONS"),s}}_rebuildInternalTextures(){const s=this._internalTexturesCache.slice();for(const k of s)k._rebuild()}_rebuildRenderTargetWrappers(){const s=this._renderTargetWrapperCache.slice();for(const k of s)k._rebuild()}_rebuildEffects(){for(const s in this._compiledEffects){const k=this._compiledEffects[s];k._pipelineContext=null,k._prepareEffect()}ms.Effect.ResetCache()}_rebuildGraphicsResources(){var s;this.wipeCaches(!0),this._rebuildEffects(),null===(s=this._rebuildComputeEffects)||void 0===s||s.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){g.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(s){setTimeout((()=>{this._clearEmptyResources();const k=this._depthCullingState.depthTest,h=this._depthCullingState.depthFunc,A=this._depthCullingState.depthMask,g=this._stencilState.stencilTest;s(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=k,this._depthCullingState.depthFunc=h,this._depthCullingState.depthMask=A,this._stencilState.stencilTest=g,this._flagContextRestored()}),0)}get P(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(s){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(s){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const s=new Uint8Array(4),k=[s,s,s,s,s,s];this._emptyCubeTexture=this.createRawCubeTexture(k,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(s){if(!s)return this._activeRenderLoops.length=0,void this._cancelFrame();const k=this._activeRenderLoops.indexOf(s);k>=0&&(this._activeRenderLoops.splice(k,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const s=this._frameHandler;if(this._frameHandler=0,(0,d.i)()){const{cancelAnimationFrame:k}=this.getHostWindow()||window;if("function"===typeof k)return k(s)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(s);return clearTimeout(s)}}Ph(){this.onBeginFrameObservable.notifyObservers(this)}Rh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(s){this._maxFPS=s,void 0!==s&&(this._minFrameTime=s<=0?Number.MAX_VALUE:1e3/s)}_isOverFrameTime(s){if(!s||void 0===this._maxFPS)return!1;const k=s-this._lastFrameTime;return this._lastFrameTime=s,this._renderAccumulator+=k,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(s){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(s)){let s=!0;(this.P||!this.renderEvenInBackground&&this._windowIsBackground)&&(s=!1),s&&(this.Ph(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Rh())}}_renderLoop(s){this._processFrame(s),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let s=0;s<this._activeRenderLoops.length;s++){(0,this._activeRenderLoops[s])()}}_renderViews(){return!1}_queueNewFrame(s,k){return R(s,k)}runRenderLoop(s){-1===this._activeRenderLoops.indexOf(s)&&(this._activeRenderLoops.push(s),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(s){this._depthCullingState.depthTest=s}setZOffset(s){this._depthCullingState.zOffset=this.rh?-s:s}getZOffset(){const s=this._depthCullingState.zOffset;return this.rh?-s:s}setZOffsetUnits(s){this._depthCullingState.zOffsetUnits=this.rh?-s:s}getZOffsetUnits(){const s=this._depthCullingState.zOffsetUnits;return this.rh?-s:s}getHostWindow(){return(0,d.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(s){this._compatibilityMode=!0}_rebuildTextures(){for(const s of this.scenes)s._rebuildTextures();for(const s of this._virtualScenes)s._rebuildTextures()}_releaseRenderTargetWrapper(s){const k=this._renderTargetWrapperCache.indexOf(s);-1!==k&&this._renderTargetWrapperCache.splice(k,1)}get currentViewport(){return this._cachedViewport}setViewport(s,k,h){const A=k||this.getRenderWidth(),g=h||this.getRenderHeight(),ms=s.x||0,i=s.y||0;this._cachedViewport=s,this._viewport(ms*A,i*g,A*s.width,g*s.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(s){return new Path2D(s)}get description(){let s=this.name+this.version;return this._caps.parallelShaderCompile&&(s+=" - Parallel shader compilation"),s}_createTextureBase(s,k,h,ms){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,O=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,a=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,E=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,j=arguments.length>13?arguments[13]:void 0,R=arguments.length>14?arguments[14]:void 0,w=arguments.length>15?arguments[15]:void 0;const B="data:"===(s=s||"").substring(0,5),u="blob:"===s.substring(0,5),G=B&&-1!==s.indexOf(";base64,"),Q=a||new r.c(this,1);Q!==a&&(Q.label=s.substring(0,60));const p=s;!this._transformTextureUrl||G||a||S||(s=this._transformTextureUrl(s)),p!==s&&(Q._originalUrl=p);const I=s.lastIndexOf(".");let N=E||(I>-1?s.substring(I).toLowerCase():"");N.indexOf("?")>-1&&(N=N.split("?")[0]);const b=(0,P.c)(N,j);ms&&ms.addPendingData(Q),Q.url=s,Q.generateMipMaps=!k,Q.samplingMode=i,Q.invertY=h,Q._useSRGBBuffer=this._getUseSRGBBuffer(!!w,k),this._doNotHandleContextLost||(Q._buffer=S);let t=null;K&&!a&&(t=Q.onLoadedObservable.add(K)),a||this._internalTexturesCache.push(Q);const z=(h,a)=>{ms&&ms.removePendingData(Q),s===p?(t&&Q.onLoadedObservable.remove(t),A.b.UseFallbackTexture&&s!==A.b.FallbackTexture&&this._createTextureBase(A.b.FallbackTexture,k,Q.invertY,ms,i,null,H,O,c,S,Q),h=(h||"Unknown error")+(A.b.UseFallbackTexture?" - Fallback texture was used":""),Q.onErrorObservable.notifyObservers({message:h,exception:a}),H&&H(h,a)):(g.c.Warn(`Failed to load ${s}, falling back to ${p}`),this._createTextureBase(p,k,Q.invertY,ms,i,K,H,O,c,S,Q,d,E,j,R,w))};if(b){const k=async s=>{(await b).loadData(s,Q,((s,k,h,A,g,K)=>{K?z("TextureLoader failed to load data"):O(Q,N,ms,{width:s,height:k},Q.invertY,!h,A,(()=>(g(),!1)),i)}),R)};S?S instanceof ArrayBuffer?k(new Uint8Array(S)):ArrayBuffer.isView(S)?k(S):H&&H("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(s,(s=>{k(new Uint8Array(s))}),void 0,ms?ms.offlineProvider:void 0,!0,((s,k)=>{z("Unable to load "+(s&&s.responseURL,k))}))}else{const h=s=>{u&&!this._doNotHandleContextLost&&(Q._buffer=s),O(Q,N,ms,s,Q.invertY,k,!1,c,i)};!B||G?S&&("string"===typeof S.decoding||S.close)?h(S):D._FileToolsLoadImage(s||"",h,z,ms?ms.offlineProvider:null,j,Q.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof S||S instanceof ArrayBuffer||ArrayBuffer.isView(S)||S instanceof Blob?D._FileToolsLoadImage(S,h,z,ms?ms.offlineProvider:null,j,Q.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):S&&h(S)}return Q}_rebuildBuffers(){for(const s of this._uniformBuffers)s._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,d.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const s in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,s)&&(this._boundTexturesCache[s]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(s){this._name=s}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(s){this._hardwareScalingLevel=s,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(s){this._doNotHandleContextLost=s}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(s,k,h){var g,ms;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new H,this._stencilStateComposer=new O,this._stencilState=new c,this._alphaState=new S,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new E.c,this.onCanvasFocusObservable=new E.c,this.onNewSceneAddedObservable=new E.c,this.onResizeObservable=new E.c,this.onCanvasPointerOutObservable=new E.c,this.onEffectErrorObservable=new E.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new E.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=s=>this._renderLoop(s),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new E.c,this.onAfterShaderCompilationObservable=new E.c,this.onBeginFrameObservable=new E.c,this.onEndFrameObservable=new E.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new E.c,this.onContextRestoredObservable=new E.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Dh=new E.c,this.onReleaseEffectsObservable=new E.c,A.b.Instances.push(this),this.startTime=K.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,i.c.SetMatrixPrecision(!!k.useHighPrecisionMatrix),(0,d.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=h??!1,k.antialias=s??k.antialias,k.deterministicLockstep=k.deterministicLockstep??!1,k.lockstepMaxSteps=k.lockstepMaxSteps??4,k.timeStep=k.timeStep??1/60,k.Bh=k.Bh??!0,this._audioContext=(null===(g=k.audioEngineOptions)||void 0===g?void 0:g.audioContext)??null,this._audioDestination=(null===(ms=k.audioEngineOptions)||void 0===ms?void 0:ms.audioDestination)??null,this.premultipliedAlpha=k.premultipliedAlpha??!0,this._doNotHandleContextLost=!!k.doNotHandleContextLost,this._isStencilEnable=!!k.Bh,this.useExactSrgbConversions=k.useExactSrgbConversions??!1;const a=(0,d.i)()&&window.devicePixelRatio||1,r=k.limitDeviceRatio||a;h=h||k.adaptToDeviceRatio||!1,this._hardwareScalingLevel=h?1/Math.min(r,a):1,this._lastDevicePixelRatio=a,this._creationOptions=k}resize(){let s,k,h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const s=(0,d.i)()&&window.devicePixelRatio||1,k=this._lastDevicePixelRatio/s;this._lastDevicePixelRatio=s,this._hardwareScalingLevel*=k}if((0,d.i)()&&(0,d.d)())if(this._renderingCanvas){var A,g;const h=null===(A=(g=this._renderingCanvas).getBoundingClientRect)||void 0===A?void 0:A.call(g);s=this._renderingCanvas.clientWidth||(null===h||void 0===h?void 0:h.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,k=this._renderingCanvas.clientHeight||(null===h||void 0===h?void 0:h.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else s=window.innerWidth,k=window.innerHeight;else s=this._renderingCanvas?this._renderingCanvas.width:100,k=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(s/this._hardwareScalingLevel,k/this._hardwareScalingLevel,h)}setSize(s,k){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(s|=0,k|=0,!h&&this._renderingCanvas.width===s&&this._renderingCanvas.height===k)return!1;if(this._renderingCanvas.width=s,this._renderingCanvas.height=k,this.scenes){for(let s=0;s<this.scenes.length;s++){const k=this.scenes[s];for(let s=0;s<k.cameras.length;s++){k.cameras[s]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(s,k,h,A,g,ms,i,K,H,O,c){throw(0,a.b)("engine.rawTexture")}createRawCubeTexture(s,k,h,A,g,ms,i,K){throw(0,a.b)("engine.rawTexture")}createRawTexture3D(s,k,h,A,g,ms,i,K,H,O,c){throw(0,a.b)("engine.rawTexture")}createRawTexture2DArray(s,k,h,A,g,ms,i,K,H,O,c){throw(0,a.b)("engine.rawTexture")}_sharedInit(s){this._renderingCanvas=s}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const s=navigator.userAgent;this.hostInformation.isMobile=-1!==s.indexOf("Mobile")||-1!==s.indexOf("Mac")&&(0,d.d)()&&"ontouchend"in document},this._checkForMobile(),(0,d.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(s){return document.createElement("video")}_reportDrawCall(){var s;let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(s=this._drawCalls)||void 0===s||s.addCount(k,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(s,k){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(s,k){return createImageBitmap(s,k)}resizeImageBitmap(s,k,h){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(s){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(s,k){if("undefined"===typeof document)return new OffscreenCanvas(s,k);const h=document.createElement("canvas");return h.width=s,h.height=k,h}createCanvas(s,k){return D._CreateCanvas(s,k)}static _FileToolsLoadImage(s,k,h,A,g,ms,i){throw(0,a.b)("FileTools")}_loadFile(s,k,h,A,g,ms){const i=(0,j.k)(s,k,h,A,g,ms);return this._activeRequests.push(i),i.onCompleteObservable.add((()=>{const s=this._activeRequests.indexOf(i);-1!==s&&this._activeRequests.splice(s,1)})),i}static _FileToolsLoadFile(s,k,h,A,g,ms){if(j.b.loadFile)return j.b.loadFile(s,k,h,A,g,ms);throw(0,a.b)("FileTools")}dispose(){var s;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(s=this.releaseComputeEffects)||void 0===s||s.call(this),ms.Effect.ResetCache();for(const h of this._activeRequests)h.abort();this._boundRenderFunction=null,this.Dh.notifyObservers(this),this.Dh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,d.i)()&&window.removeEventListener("resize",this._checkForMobile);const k=A.b.Instances.indexOf(this);k>=0&&A.b.Instances.splice(k,1),A.b.Instances.length||(A.b.OnEnginesDisposedObservable.notifyObservers(this),A.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(s){throw(0,a.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(s,k){for(let h=0;h<A.b.Instances.length;h++){const g=A.b.Instances[h];for(let h=0;h<g.scenes.length;h++)g.scenes[h].markAllMaterialsAsDirty(s,k)}}}D._RenderPassIdCounter=0,D._RescalePostProcessFactory=null,D.CollisionsEpsilon=.001,D.QueueNewFrame=R},12445:(s,k,h)=>{h.d(k,{b:()=>g});var A=h(12408);class g{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}g.Instances=[],g.OnEnginesDisposedObservable=new A.c,g._LastCreatedScene=null,g.UseFallbackTexture=!0,g.FallbackTexture=""},12508:(s,k,h)=>{h.d(k,{c:()=>A});class A{static SetMatrixPrecision(s){if(A.MatrixTrackPrecisionChange=!1,s&&!A.MatrixUse64Bits&&A.MatrixTrackedMatrices)for(let k=0;k<A.MatrixTrackedMatrices.length;++k){const s=A.MatrixTrackedMatrices[k],h=s.Gh;s.Gh=new Array(16);for(let k=0;k<16;++k)s.Gh[k]=h[k]}A.MatrixUse64Bits=s,A.MatrixCurrentType=A.MatrixUse64Bits?Array:Float32Array,A.MatrixTrackedMatrices=null}}A.MatrixUse64Bits=!1,A.MatrixTrackPrecisionChange=!0,A.MatrixCurrentType=Float32Array,A.MatrixTrackedMatrices=[]},12527:(s,k,h)=>{h.d(k,{c:()=>i});var A=h(12422);const g=new Map;function ms(s,k){(function(s){return g.delete(s)})(s)&&A.c.Warn(`Extension with the name '${s}' already exists`),g.set(s,k)}function i(s,k){"image/ktx"!==k&&"image/ktx2"!==k||(s=".ktx"),g.has(s)||(s.endsWith(".ies")&&ms(".ies",(async()=>await h.e(15).then(h.bind(h,15030)).then((s=>new s._IESTextureLoader)))),s.endsWith(".dds")&&ms(".dds",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(28)]).then(h.bind(h,15033)).then((s=>new s._DDSTextureLoader)))),s.endsWith(".basis")&&ms(".basis",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(47)]).then(h.bind(h,15041)).then((s=>new s._BasisTextureLoader)))),s.endsWith(".env")&&ms(".env",(async()=>await Promise.all([h.e(14),h.e(17),h.e(13),h.e(19),h.e(18),h.e(23),h.e(21),h.e(45),h.e(48)]).then(h.bind(h,15043)).then((s=>new s._ENVTextureLoader)))),s.endsWith(".hdr")&&ms(".hdr",(async()=>await Promise.all([h.e(14),h.e(49)]).then(h.bind(h,15048)).then((s=>new s._HDRTextureLoader)))),(s.endsWith(".ktx")||s.endsWith(".ktx2"))&&(ms(".ktx",(async()=>await h.e(30).then(h.bind(h,15054)).then((s=>new s._KTXTextureLoader)))),ms(".ktx2",(async()=>await h.e(30).then(h.bind(h,15054)).then((s=>new s._KTXTextureLoader))))),s.endsWith(".tga")&&ms(".tga",(async()=>await h.e(50).then(h.bind(h,15063)).then((s=>new s._TGATextureLoader)))),s.endsWith(".exr")&&ms(".exr",(async()=>await h.e(16).then(h.bind(h,15066)).then((s=>new s._ExrTextureLoader)))));const A=g.get(s);return A?Promise.resolve(A(k)):null}},12515:(s,k,h)=>{h.d(k,{c:()=>i});var A,g=h(12408),ms=h(12523);!function(s){s[s.Unknown=0]="Unknown",s[s.Url=1]="Url",s[s.Temp=2]="Temp",s[s.Raw=3]="Raw",s[s.Dynamic=4]="Dynamic",s[s.RenderTarget=5]="RenderTarget",s[s.MultiRenderTarget=6]="MultiRenderTarget",s[s.Cube=7]="Cube",s[s.CubeRaw=8]="CubeRaw",s[s.CubePrefiltered=9]="CubePrefiltered",s[s.Raw3D=10]="Raw3D",s[s.Raw2DArray=11]="Raw2DArray",s[s.DepthStencil=12]="DepthStencil",s[s.CubeRawRGBD=13]="CubeRawRGBD",s[s.Depth=14]="Depth"}(A||(A={}));class i extends ms.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(s){this.generateMipMaps=s}get uniqueId(){return this._uniqueId}_setUniqueId(s){this._uniqueId=s}getEngine(){return this._engine}get source(){return this._source}constructor(s,k){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new g.c,this.onErrorObservable=new g.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=s,this._source=k,this._uniqueId=i._Counter++,h||(this._hardwareTexture=s._createHardwareTexture())}incrementReferences(){this._references++}updateSize(s,k){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,s,k,h),this.width=s,this.height=k,this.depth=h,this.baseWidth=s,this.baseHeight=k,this.baseDepth=h,this._size=s*k*h}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const s=this.onRebuildCallback(this),k=k=>{k._swapAndDie(this,!1),this.isReady=s.isReady};return void(s.isAsync?s.proxy.then(k):k(s.proxy))}let s;switch(this.source){case 2:case 12:case 14:break;case 1:return void(s=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(s=>{s._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:s=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),s._swapAndDie(this,!1),this.isReady=!0;break;case 10:s=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),s._swapAndDie(this,!1),this.isReady=!0;break;case 11:s=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),s._swapAndDie(this,!1),this.isReady=!0;break;case 4:s=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),s._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(s=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{s._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:s=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),s._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return s=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(s=>{s&&s._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(s._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(s){var k;let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(k=this._hardwareTexture)||void 0===k||k.setUsage(s._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),s._hardwareTexture=this._hardwareTexture,h&&(s._isRGBD=this._isRGBD),this._lodTextureHigh&&(s._lodTextureHigh&&s._lodTextureHigh.dispose(),s._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(s._lodTextureMid&&s._lodTextureMid.dispose(),s._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(s._lodTextureLow&&s._lodTextureLow.dispose(),s._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(s._irradianceTexture&&s._irradianceTexture.dispose(),s._irradianceTexture=this._irradianceTexture);const A=this._engine.getLoadedTexturesCache();let g=A.indexOf(this);-1!==g&&A.splice(g,1),g=A.indexOf(s),-1===g&&A.push(s)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}i._Counter=0},12523:(s,k,h)=>{h.d(k,{c:()=>A});class A{get wrapU(){return this._cachedWrapU}set wrapU(s){this._cachedWrapU=s}get wrapV(){return this._cachedWrapV}set wrapV(s){this._cachedWrapV=s}get wrapR(){return this._cachedWrapR}set wrapR(s){this._cachedWrapR=s}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(s){this._cachedAnisotropicFilteringLevel=s}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(s){this._comparisonFunction=s}get useMipMaps(){return this._useMipMaps}set useMipMaps(s){this._useMipMaps=s}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,ms=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=s,this._cachedWrapV=k,this._cachedWrapR=h,this._cachedAnisotropicFilteringLevel=A,this.samplingMode=g,this._comparisonFunction=ms,this}compareSampler(s){return this._cachedWrapU===s._cachedWrapU&&this._cachedWrapV===s._cachedWrapV&&this._cachedWrapR===s._cachedWrapR&&this._cachedAnisotropicFilteringLevel===s._cachedAnisotropicFilteringLevel&&this.samplingMode===s.samplingMode&&this._comparisonFunction===s._comparisonFunction&&this._useMipMaps===s._useMipMaps}}},12429:(s,k,h)=>{h.d(k,{e:()=>ms});var A=h(12422);const g=(s,k,h)=>s?s.getClassName&&"Mesh"===s.getClassName()?null:!s.getClassName||"SubMesh"!==s.getClassName()&&"PhysicsBody"!==s.getClassName()?s.clone?s.clone():Array.isArray(s)?s.slice():h&&"object"===typeof s?{...s}:null:s.clone(k):null;class ms{static DeepCopy(s,k,h,ms){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const K=function(s){const k=[];do{const h=Object.getOwnPropertyNames(s);for(const s of h)-1===k.indexOf(s)&&k.push(s)}while(s=Object.getPrototypeOf(s));return k}(s);for(const O of K){if("_"===O[0]&&(!ms||-1===ms.indexOf(O)))continue;if(O.endsWith("Observable"))continue;if(h&&-1!==h.indexOf(O))continue;const K=s[O],c=typeof K;if("function"!==c)try{if("object"===c)if(K instanceof Uint8Array)k[O]=Uint8Array.from(K);else if(K instanceof Array){if(k[O]=[],K.length>0)if("object"==typeof K[0])for(let s=0;s<K.length;s++){const h=g(K[s],k,i);-1===k[O].indexOf(h)&&k[O].push(h)}else k[O]=K.slice(0)}else k[O]=g(K,k,i);else k[O]=K}catch(H){A.c.Warn(H.message)}}}}},12451:(s,k,h)=>{h.d(k,{d:()=>A,e:()=>g,i:()=>ms});class A extends Error{}A._setPrototypeOf=Object.setPrototypeOf||((s,k)=>(s.__proto__=k,s));const g={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class ms extends A{constructor(s,k,h){super(s),this.errorCode=k,this.innerError=h,this.name="RuntimeError",A._setPrototypeOf(this,ms.prototype)}}},12448:(s,k,h)=>{h.d(k,{c:()=>z,e:()=>D,f:()=>I,g:()=>b,i:()=>Q,h:()=>j,k:()=>u,n:()=>G,p:()=>p,r:()=>w});var A=h(12442),g=h(12416),ms=h(12408);class i{}i.FilesToLoad={};var K=h(12451),H=h(12454),O=h(12461),c=h(12445),S=h(12422),a=h(12476),r=h(12467),d=h(12481);const E=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class j extends K.i{constructor(s,k){super(s,K.e.LoadFileError),this.name="LoadFileError",K.d._setPrototypeOf(this,j.prototype),k instanceof A.d?this.request=k:this.file=k}}class P extends K.i{constructor(s,k){super(s,K.e.RequestFileError),this.request=k,this.name="RequestFileError",K.d._setPrototypeOf(this,P.prototype)}}class R extends K.i{constructor(s,k){super(s,K.e.ReadFileError),this.file=k,this.name="ReadFileError",K.d._setPrototypeOf(this,R.prototype)}}const D={DefaultRetryStrategy:class{static ExponentialBackoff(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(h,A,g)=>0!==A.status||g>=s||-1!==h.indexOf("file:")?-1:Math.pow(2,g)*k}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:s=>s,ScriptBaseUrl:"",ScriptPreprocessUrl:s=>s,CleanUrl:s=>s=s.replace(/#/gm,"%23")},w=(s,k)=>{if((!s||0!==s.indexOf("data:"))&&D.CorsBehavior)if("string"===typeof D.CorsBehavior||D.CorsBehavior instanceof String)k.crossOrigin=D.CorsBehavior;else{const h=D.CorsBehavior(s);h&&(k.crossOrigin=h)}},B={getRequiredSize:null},u=function(s,k,h,g){let ms,K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",O=arguments.length>5?arguments[5]:void 0,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===S||void 0===S||!S._features.forceBitmapOverHTMLImageElement))return h("LoadImage is only supported in web or BabylonNative environments."),null;let a=!1;s instanceof ArrayBuffer||ArrayBuffer.isView(s)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(ms=URL.createObjectURL(new Blob([s],{type:K})),a=!0):ms=`data:${K};base64,`+(0,H.k)(s):s instanceof Blob?(ms=URL.createObjectURL(s),a=!0):(ms=D.CleanUrl(s),ms=D.PreprocessUrl(ms));const r=k=>{if(h){const A=ms||s.toString();h(`Error while trying to load image: ${0===A.indexOf("http")||A.length<=128?A:A.slice(0,128)+"..."}`,k)}};if(null!==S&&void 0!==S&&S._features.forceBitmapOverHTMLImageElement)return Q(ms,(A=>{S.createImageBitmap(new Blob([A],{type:K}),{premultiplyAlpha:"none",...O}).then((s=>{k(s),a&&URL.revokeObjectURL(ms)})).catch((k=>{h&&h("Error while trying to load image: "+s,k)}))}),void 0,g||void 0,!0,((s,k)=>{r(k)})),null;const d=new Image;if(B.getRequiredSize){const k=B.getRequiredSize(s);k.width&&(d.width=k.width),k.height&&(d.height=k.height)}w(ms,d);const E=[],j=()=>{for(const s of E)s.target.removeEventListener(s.name,s.handler);E.length=0};E.push({target:d,name:"load",handler:()=>{j(),k(d),a&&d.src&&URL.revokeObjectURL(d.src)}}),E.push({target:d,name:"error",handler:s=>{j(),r(s),a&&d.src&&URL.revokeObjectURL(d.src)}}),E.push({target:document,name:"securitypolicyviolation",handler:s=>{if(s.blockedURI!==d.src||"bh"===s.disposition)return;j();const k=new Error(`CSP violation of policy ${s.effectiveDirective} ${s.blockedURI}. Current policy is ${s.originalPolicy}`);c.b.UseFallbackTexture=!1,r(k),a&&d.src&&URL.revokeObjectURL(d.src),d.src=""}}),(()=>{for(const s of E)s.target.addEventListener(s.name,s.handler)})();const P="blob:"===ms.substring(0,5),R="data:"===ms.substring(0,5),u=()=>{P||R||!A.d.IsCustomRequestAvailable?d.src=ms:Q(ms,((s,k,h)=>{const A=new Blob([s],{type:!K&&h?h:K}),g=URL.createObjectURL(A);a=!0,d.src=g}),void 0,g||void 0,!0,((s,k)=>{r(k)}))},G=()=>{g&&g.loadImage(ms,d)};if(!P&&!R&&g&&g.enableTexturesOffline)g.open(G,u);else{if(-1!==ms.indexOf("file:")){const s=decodeURIComponent(ms.substring(5).toLowerCase());if(i.FilesToLoad[s]&&"undefined"!==typeof URL){try{let k;try{k=URL.createObjectURL(i.FilesToLoad[s])}catch(p){k=URL.createObjectURL(i.FilesToLoad[s])}d.src=k,a=!0}catch(I){d.src=""}return d}}u()}return d},G=(s,k,h,A,g)=>{const i=new FileReader,K={onCompleteObservable:new ms.c,abort:()=>i.abort()};return i.onloadend=()=>K.onCompleteObservable.notifyObservers(K),g&&(i.onerror=()=>{g(new R(`Unable to read ${s.name}`,s))}),i.onload=s=>{k(s.target.result)},h&&(i.onprogress=h),A?i.readAsArrayBuffer(s):i.readAsText(s),K},Q=(s,k,h,A,g,H,O)=>{if(s.name)return G(s,k,h,g,H?s=>{H(void 0,s)}:void 0);const c=s;if(-1!==c.indexOf("file:")){let s=decodeURIComponent(c.substring(5).toLowerCase());0===s.indexOf("./")&&(s=s.substring(2));const A=i.FilesToLoad[s];if(A)return G(A,k,h,g,H?s=>H(void 0,new j(s.message,s.file)):void 0)}const{match:r,type:d}=t(c);if(r){const s={onCompleteObservable:new ms.c,abort:()=>()=>{}};try{const s=g?z(c):C(c);k(s,void 0,d)}catch(K){H?H(void 0,K):S.c.Error(K.message||"Failed to parse the Data URL")}return a.d.SetImmediate((()=>{s.onCompleteObservable.notifyObservers(s)})),s}return p(c,((s,h)=>{k(s,null===h||void 0===h?void 0:h.responseURL,null===h||void 0===h?void 0:h.getResponseHeader("content-type"))}),h,A,g,H?s=>{H(s.request,new j(s.message,s.request))}:void 0,O)},p=(s,k,h,i,K,H,O)=>{s=D.CleanUrl(s),s=D.PreprocessUrl(s);const c=D.BaseUrl+s;let a=!1;const r={onCompleteObservable:new ms.c,abort:()=>a=!0},d=()=>{let s,ms=new A.d,i=null;const d=()=>{ms&&(h&&ms.removeEventListener("progress",h),s&&ms.removeEventListener("readystatechange",s),ms.removeEventListener("loadend",E))};let E=()=>{d(),r.onCompleteObservable.notifyObservers(r),r.onCompleteObservable.clear(),h=void 0,s=null,E=null,H=void 0,O=void 0,k=void 0};r.abort=()=>{a=!0,E&&E(),ms&&ms.readyState!==(XMLHttpRequest.DONE||4)&&ms.abort(),null!==i&&(clearTimeout(i),i=null),ms=null};const j=s=>{const k=s.message||"Unknown error";H&&ms?H(new P(k,ms)):S.c.Error(k)},R=S=>{if(ms){if(ms.open("GET",c),O)try{O(ms)}catch(r){return void j(r)}K&&(ms.responseType="arraybuffer"),h&&ms.addEventListener("progress",h),E&&ms.addEventListener("loadend",E),s=()=>{if(!a&&ms&&ms.readyState===(XMLHttpRequest.DONE||4)){if(s&&ms.removeEventListener("readystatechange",s),ms.status>=200&&ms.status<300||0===ms.status&&(!(0,g.i)()||N())){const s=K?ms.response:ms.responseText;if(null!==s){try{k&&k(s,ms)}catch(r){j(r)}return}}const h=D.DefaultRetryStrategy;if(h){const s=h(c,ms,S);if(-1!==s)return d(),ms=new A.d,void(i=setTimeout((()=>R(S+1)),s))}const O=new P("Error status: "+ms.status+" "+ms.statusText+" - Unable to load "+c,ms);H&&H(O)}},ms.addEventListener("readystatechange",s),ms.send()}};R(0)};if(i&&i.enableSceneOffline){const A=s=>{s&&s.status>400?H&&H(s):d()},g=()=>{i&&i.loadFile(D.BaseUrl+s,(s=>{!a&&k&&k(s),r.onCompleteObservable.notifyObservers(r)}),h?s=>{!a&&h&&h(s)}:void 0,A,K)};i.open(g,A)}else d();return r},I=s=>{const{match:k,type:h}=t(s);if(k)return h||void 0;const A=s.lastIndexOf(".");switch(s.substring(A+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"th":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},N=()=>"undefined"!==typeof location&&"file:"===location.protocol,b=s=>E.test(s),t=s=>{const k=E.exec(s);if(null===k||0===k.length)return{match:!1,type:""};return{match:!0,type:k[0].replace("data:","").replace("base64,","")}};function z(s){return(0,H.d)(s.split(",")[1])}const C=s=>(0,H.h)(s.split(",")[1]);let v;d.e._FileToolsLoadImage=u,r.b.loadFile=Q,O.l.loadFile=Q;((s,k,h,A,g,ms,i,K,H,O)=>{v={DecodeBase64UrlToBinary:s,DecodeBase64UrlToString:k,DefaultRetryStrategy:h.DefaultRetryStrategy,BaseUrl:h.BaseUrl,CorsBehavior:h.CorsBehavior,PreprocessUrl:h.PreprocessUrl,IsBase64DataUrl:A,IsFileURL:g,LoadFile:ms,LoadImage:i,ReadFile:K,RequestFile:H,SetCorsBehavior:O},Object.defineProperty(v,"DefaultRetryStrategy",{get:function(){return h.DefaultRetryStrategy},set:function(s){h.DefaultRetryStrategy=s}}),Object.defineProperty(v,"BaseUrl",{get:function(){return h.BaseUrl},set:function(s){h.BaseUrl=s}}),Object.defineProperty(v,"PreprocessUrl",{get:function(){return h.PreprocessUrl},set:function(s){h.PreprocessUrl=s}}),Object.defineProperty(v,"CorsBehavior",{get:function(){return h.CorsBehavior},set:function(s){h.CorsBehavior=s}})})(z,C,D,b,N,Q,u,G,p,w)},12552:(s,k,h)=>{function A(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(s=>{const k=16*Math.random()|0;return("x"===s?k:3&k|8).toString(16)}))}h.d(k,{d:()=>A})},12534:(s,k,h)=>{h.d(k,{e:()=>ms});var A=h(12422),g=h(12543);class ms{static Instantiate(s){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[s])return this.RegisteredExternalClasses[s];const k=(0,g.d)(s);if(k)return k;A.c.Warn(s+" not found, you may have missed an import.");const h=s.split(".");let ms=window||this;for(let A=0,g=h.length;A<g;A++)ms=ms[h[A]];return"function"!==typeof ms?null:ms}}ms.RegisteredExternalClasses={}},12435:(s,k,h)=>{h.d(k,{e:()=>g});var A=h(12416);class g{static get Now(){return(0,A.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12454:(s,k,h)=>{h.d(k,{d:()=>i,h:()=>ms,j:()=>A,k:()=>g});const A=s=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(s);let k="";for(let h=0;h<s.byteLength;h++)k+=String.fromCharCode(s[h]);return k},g=s=>{const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h,A,g,ms,i,K,H,O="",c=0;const S=ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s);for(;c<S.length;)h=S[c++],A=c<S.length?S[c++]:Number.NaN,g=c<S.length?S[c++]:Number.NaN,ms=h>>2,i=(3&h)<<4|A>>4,K=(15&A)<<2|g>>6,H=63&g,isNaN(A)?K=H=64:isNaN(g)&&(H=64),O+=k.charAt(ms)+k.charAt(i)+k.charAt(K)+k.charAt(H);return O},ms=s=>atob(s),i=s=>{const k=ms(s),h=k.length,A=new Uint8Array(new ArrayBuffer(h));for(let g=0;g<h;g++)A[g]=k.charCodeAt(g);return A.buffer}},12559:(s,k,h)=>{function A(s){let k=1;do{k*=2}while(k<s);return k===s}function g(s,k,h){return s*(1-h)+k*h}function ms(s){const k=i(s),h=K(s);return k-s>s-h?h:k}function i(s){return s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,++s}function K(s){return s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,(s|=s>>16)-(s>>1)}function H(s,k){let h;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:h=K(s);break;case 2:h=ms(s);break;default:h=i(s)}return Math.min(h,k)}h.d(k,{b:()=>K,f:()=>H,i:()=>A,m:()=>g,n:()=>ms})},12402:(s,k,h)=>{h.r(k),h.d(k,{AsyncLoop:()=>R,Tools:()=>j,className:()=>P});var A=h(12408),g=h(12416),ms=h(12422),i=h(12429),K=h(12435),H=h(12438),O=h(12442),c=h(12445),S=h(12448),a=h(12476),r=h(12534),d=h(12552),E=h(12559);class j{static get BaseUrl(){return S.e.BaseUrl}static set BaseUrl(s){S.e.BaseUrl=s}static get CleanUrl(){return S.e.CleanUrl}static set CleanUrl(s){S.e.CleanUrl=s}static IsAbsoluteUrl(s){return 0===s.indexOf("//")||-1!==s.indexOf("://")&&(-1!==s.indexOf(".")&&(-1!==s.indexOf("/")&&(!(s.indexOf(":")>s.indexOf("/"))&&(s.indexOf("://")<s.indexOf(".")||(0===s.indexOf("data:")||0===s.indexOf("blob:"))))))}static set ScriptBaseUrl(s){S.e.ScriptBaseUrl=s}static get ScriptBaseUrl(){return S.e.ScriptBaseUrl}static set CDNBaseUrl(s){j.ScriptBaseUrl=s,j.AssetBaseUrl=s}static set ScriptPreprocessUrl(s){S.e.ScriptPreprocessUrl=s}static get ScriptPreprocessUrl(){return S.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return S.e.DefaultRetryStrategy}static set DefaultRetryStrategy(s){S.e.DefaultRetryStrategy=s}static get CorsBehavior(){return S.e.CorsBehavior}static set CorsBehavior(s){S.e.CorsBehavior=s}static get UseFallbackTexture(){return c.b.UseFallbackTexture}static set UseFallbackTexture(s){c.b.UseFallbackTexture=s}static get RegisteredExternalClasses(){return r.e.RegisteredExternalClasses}static set RegisteredExternalClasses(s){r.e.RegisteredExternalClasses=s}static get fallbackTexture(){return c.b.FallbackTexture}static set fallbackTexture(s){c.b.FallbackTexture=s}static FetchToRef(s,k,h,A,g,ms){const i=4*((Math.abs(s)*h%h|0)+(Math.abs(k)*A%A|0)*h);ms.r=g[i]/255,ms.g=g[i+1]/255,ms.b=g[i+2]/255,ms.a=g[i+3]/255}static Mix(s,k,h){return 0}static Instantiate(s){return r.e.Instantiate(s)}static SetImmediate(s){a.d.SetImmediate(s)}static IsExponentOfTwo(s){return!0}static FloatRound(s){return Math.fround(s)}static GetFilename(s){const k=s.lastIndexOf("/");return k<0?s:s.substring(k+1)}static GetFolderPath(s){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const h=s.lastIndexOf("/");return h<0?k?s:"":s.substring(0,h+1)}static ToDegrees(s){return 180*s/Math.PI}static ToRadians(s){return s*Math.PI/180}static SmoothAngleChange(s,k){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const A=this.ToRadians(s),g=this.ToRadians(k);return this.ToDegrees(Math.atan2((1-h)*Math.sin(g)+h*Math.sin(A),(1-h)*Math.cos(g)+h*Math.cos(A)))}static MakeArray(s,k){return!0===k||void 0!==s&&null!=s?Array.isArray(s)?s:[s]:null}static GetPointerPrefix(s){return(0,g.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(s,k){(0,S.r)(s,k)}static SetReferrerPolicyBehavior(s,k){k.referrerPolicy=s}static get PreprocessUrl(){return S.e.PreprocessUrl}static set PreprocessUrl(s){S.e.PreprocessUrl=s}static LoadImage(s,k,h,A,g,ms){return(0,S.k)(s,k,h,A,g,ms)}static LoadFile(s,k,h,A,g,ms){return(0,S.i)(s,k,h,A,g,ms)}static async LoadFileAsync(s){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((h,A)=>{(0,S.i)(s,(s=>{h(s)}),void 0,void 0,k,((s,k)=>{A(k)}))}))}static GetAssetUrl(s){if(!s)return"";if(j.AssetBaseUrl&&s.startsWith(j._DefaultAssetsUrl)){const k="/"===j.AssetBaseUrl[j.AssetBaseUrl.length-1]?j.AssetBaseUrl.substring(0,j.AssetBaseUrl.length-1):j.AssetBaseUrl;return s.replace(j._DefaultAssetsUrl,k)}return s}static GetBabylonScriptURL(s,k){if(!s)return"";if(j.ScriptBaseUrl&&s.startsWith(j._DefaultCdnUrl)){const k="/"===j.ScriptBaseUrl[j.ScriptBaseUrl.length-1]?j.ScriptBaseUrl.substring(0,j.ScriptBaseUrl.length-1):j.ScriptBaseUrl;s=s.replace(j._DefaultCdnUrl,k)}return s=j.ScriptPreprocessUrl(s),k&&(s=j.GetAbsoluteUrl(s)),s}static LoadBabylonScript(s,k,h,A){s=j.GetBabylonScriptURL(s),j.LoadScript(s,k,h)}static async LoadBabylonScriptAsync(s){return s=j.GetBabylonScriptURL(s),await j.LoadScriptAsync(s)}static LoadScript(s,k,h,A){let ms=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(s),k&&k()}catch(H){null===h||void 0===h||h(`Unable to load script '${s}' in worker`,H)}return}if(!(0,g.i)())return void(null===h||void 0===h||h(`Cannot load script '${s}' outside of a window or a worker`));const i=document.getElementsByTagName("head")[0],K=document.createElement("script");ms?(K.setAttribute("type","module"),K.innerText=s):(K.setAttribute("type","text/javascript"),K.setAttribute("src",s)),A&&(K.id=A),K.onload=()=>{k&&k()},K.onerror=k=>{h&&h(`Unable to load script '${s}'`,k)},i.appendChild(K)}static async LoadScriptAsync(s,k){return await new Promise(((h,A)=>{this.LoadScript(s,(()=>{h()}),((s,k)=>{A(k||new Error(s))}),k)}))}static ReadFileAsDataURL(s,k,h){const g=new FileReader,ms={onCompleteObservable:new A.c,abort:()=>g.abort()};return g.onloadend=()=>{ms.onCompleteObservable.notifyObservers(ms)},g.onload=s=>{k(s.target.result)},g.onprogress=h,g.readAsDataURL(s),ms}static ReadFile(s,k,h,A,g){return(0,S.n)(s,k,h,A,g)}static FileAsURL(s){const k=new Blob([s]);return window.URL.createObjectURL(k)}static Format(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return s.toFixed(k)}static DeepCopy(s,k,h,A){i.e.DeepCopy(s,k,h,A)}static IsEmpty(s){for(const k in s)if(Object.prototype.hasOwnProperty.call(s,k))return!1;return!0}static RegisterTopRootEvents(s,k){for(let A=0;A<k.length;A++){const g=k[A];s.addEventListener(g.name,g.handler,!1);try{window.parent&&window.parent.addEventListener(g.name,g.handler,!1)}catch(h){}}}static UnregisterTopRootEvents(s,k){for(let A=0;A<k.length;A++){const g=k[A];s.removeEventListener(g.name,g.handler);try{s.parent&&s.parent.removeEventListener(g.name,g.handler)}catch(h){}}}static async DumpFramebuffer(s,k,h,A){throw(0,H.b)("DumpTools")}static DumpData(s,k,h,A){throw(0,H.b)("DumpTools")}static async DumpDataAsync(s,k,h){throw(0,H.b)("DumpTools")}static _IsOffScreenCanvas(s){return void 0!==s.convertToBlob}static ToBlob(s,k){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0;j._IsOffScreenCanvas(s)||s.toBlob||(s.toBlob=function(s,k,h){setTimeout((()=>{const A=atob(this.toDataURL(k,h).split(",")[1]),g=A.length,ms=new Uint8Array(g);for(let s=0;s<g;s++)ms[s]=A.charCodeAt(s);s(new Blob([ms]))}))}),j._IsOffScreenCanvas(s)?s.convertToBlob({type:h,quality:A}).then((s=>k(s))):s.toBlob((function(s){k(s)}),h,A)}static DownloadBlob(s,k){if("download"in document.createElement("a")){if(!k){const s=new Date;k="screenshot_"+((s.getFullYear()+"-"+(s.getMonth()+1)).slice(2)+"-"+s.getDate()+"_"+s.getHours()+"-"+("0"+s.getMinutes()).slice(-2))+".png"}j.Download(s,k)}else if(s&&"undefined"!==typeof URL){const k=URL.createObjectURL(s),h=window.open("");if(!h)return;const A=h.document.createElement("img");A.onload=function(){URL.revokeObjectURL(k)},A.src=k,h.document.body.appendChild(A)}}static EncodeScreenshotCanvasData(s,k){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;if("string"!==typeof A&&k){if(k){if(j._IsOffScreenCanvas(s))return void s.convertToBlob({type:h,quality:g}).then((s=>{const h=new FileReader;h.readAsDataURL(s),h.onloadend=()=>{const s=h.result;k(s)}}));const A=s.toDataURL(h,g);k(A)}}else this.ToBlob(s,(function(s){s&&j.DownloadBlob(s,A),k&&k("")}),h,g)}static Download(s,k){if("undefined"===typeof URL)return;const h=window.URL.createObjectURL(s),A=document.createElement("a");document.body.appendChild(A),A.style.display="none",A.href=h,A.download=k,A.addEventListener("click",(()=>{A.parentElement&&A.parentElement.removeChild(A)})),A.click(),window.URL.revokeObjectURL(h)}static BackCompatCameraNoPreventDefault(s){return"boolean"===typeof s[0]?s[0]:"boolean"===typeof s[1]&&s[1]}static CreateScreenshot(s,k,h,A){throw(0,H.b)("ScreenshotTools")}static async CreateScreenshotAsync(s,k,h){throw(0,H.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(s,k,h,A){throw(0,H.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(s,k,h){throw(0,H.b)("ScreenshotTools")}static RandomId(){return(0,d.d)()}static IsBase64(s){return(0,S.g)(s)}static DecodeBase64(s){return(0,S.c)(s)}static get errorsCount(){return ms.c.errorsCount}static Log(s){ms.c.Log(s)}static Warn(s){ms.c.Warn(s)}static Error(s){ms.c.Error(s)}static get LogCache(){return ms.c.LogCache}static ClearLogCache(){ms.c.ClearLogCache()}static set LogLevels(s){ms.c.LogLevels=s}static set PerformanceLogLevel(s){return(s&j.PerformanceUserMarkLogLevel)===j.PerformanceUserMarkLogLevel?(j.StartPerformanceCounter=j._StartUserMark,void(j.EndPerformanceCounter=j._EndUserMark)):(s&j.PerformanceConsoleLogLevel)===j.PerformanceConsoleLogLevel?(j.StartPerformanceCounter=j._StartPerformanceConsole,void(j.EndPerformanceCounter=j._EndPerformanceConsole)):(j.StartPerformanceCounter=j._StartPerformanceCounterDisabled,void(j.EndPerformanceCounter=j._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(s,k){}static _EndPerformanceCounterDisabled(s,k){}static _StartUserMark(s){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!j._Performance){if(!(0,g.i)())return;j._Performance=window.performance}k&&j._Performance.mark&&j._Performance.mark(s+"-Begin")}static _EndUserMark(s){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&j._Performance.mark&&(j._Performance.mark(s+"-End"),j._Performance.measure(s,s+"-Begin",s+"-End"))}static _StartPerformanceConsole(s){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k&&(j._StartUserMark(s,k),console.time&&console.time(s))}static _EndPerformanceConsole(s){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];k&&(j._EndUserMark(s,k),console.timeEnd(s))}static get Now(){return K.e.Now}static GetClassName(s){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null;if(!k&&s.getClassName)h=s.getClassName();else{if(s instanceof Object){h=(k?s:Object.getPrototypeOf(s)).constructor.__bjsclassName__}h||(h=typeof s)}return h}static First(s,k){for(const h of s)if(k(h))return h;return null}static getFullClassName(s){let k=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=null,A=null;if(!k&&s.getClassName)h=s.getClassName();else{if(s instanceof Object){const g=k?s:Object.getPrototypeOf(s);h=g.constructor.__bjsclassName__,A=g.constructor.__bjsmoduleName__}h||(h=typeof s)}return h?(null!=A?A+".":"")+h:null}static async DelayAsync(s){await new Promise((k=>{setTimeout((()=>{k()}),s)}))}static IsSafari(){return!!(0,g.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function P(s,k){return h=>{h.__bjsclassName__=s,h.__bjsmoduleName__=null!=k?k:null}}j.AssetBaseUrl="",j.UseCustomRequestHeaders=!1,j.CustomRequestHeaders=O.d.CustomRequestHeaders,j.GetDOMTextContent=g.c,j._DefaultCdnUrl="https://cdn.babylonjs.com",j._DefaultAssetsUrl="https://assets.babylonjs.com/core",j.GetAbsoluteUrl="object"===typeof document?s=>{const k=document.createElement("a");return k.href=s,k.href}:"function"===typeof URL&&"object"===typeof location?s=>new URL(s,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},j.NoneLogLevel=ms.c.NoneLogLevel,j.MessageLogLevel=ms.c.MessageLogLevel,j.WarningLogLevel=ms.c.WarningLogLevel,j.ErrorLogLevel=ms.c.ErrorLogLevel,j.AllLogLevel=ms.c.AllLogLevel,j.IsWindowObjectExist=g.i,j.PerformanceNoneLogLevel=0,j.PerformanceUserMarkLogLevel=1,j.PerformanceConsoleLogLevel=2,j.StartPerformanceCounter=j._StartPerformanceCounterDisabled,j.EndPerformanceCounter=j._EndPerformanceCounterDisabled;class R{constructor(s,k,h){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=s,this.index=A-1,this._done=!1,this._fn=k,this._successCallback=h}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(s,k,h){const A=new R(s,k,h,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return A.executeNext(),A}static SyncAsyncForLoop(s,k,h,A,g){let ms=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return R.Run(Math.ceil(s/k),(A=>{g&&g()?A.breakLoop():setTimeout((()=>{for(let ms=0;ms<k;++ms){const i=A.index*k+ms;if(i>=s)break;if(h(i),g&&g()){A.breakLoop();break}}A.executeNext()}),ms)}),A)}}j.Mix=E.m,j.IsExponentOfTwo=E.i,c.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12543:(s,k,h)=>{h.d(k,{d:()=>ms,f:()=>g});const A={};function g(s,k){A[s]=k}function ms(s){return A[s]}},12442:(s,k,h)=>{h.d(k,{d:()=>A});class A{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(A.CustomRequestHeaders).length>0||A.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const s in A.CustomRequestHeaders){const k=A.CustomRequestHeaders[s];k&&this._xhr.setRequestHeader(s,k)}}_shouldSkipRequestModifications(s){return A.SkipRequestModificationForBabylonCDN&&(s.includes("preview.babylonjs.com")||s.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(s){this._xhr.onprogress=s}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(s){this._xhr.responseType=s}get timeout(){return this._xhr.timeout}set timeout(s){this._xhr.timeout=s}addEventListener(s,k,h){this._xhr.addEventListener(s,k,h)}removeEventListener(s,k,h){this._xhr.removeEventListener(s,k,h)}abort(){this._xhr.abort()}send(s){A.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(s)}open(s,k){for(const h of A.CustomRequestModifiers){if(this._shouldSkipRequestModifications(k))return;k=h(this._xhr,k)||k}k=(k=k.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=k,this._xhr.open(s,k,!0)}setRequestHeader(s,k){this._xhr.setRequestHeader(s,k)}getResponseHeader(s){return this._xhr.getResponseHeader(s)}}A.CustomRequestHeaders={},A.CustomRequestModifiers=new Array,A.SkipRequestModificationForBabylonCDN=!0}}]);