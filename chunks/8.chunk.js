"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11028:(h,V,i)=>{i.d(V,{b:()=>P});var S=i(10988),l=i(10967),Y=i(11037),g=i(11057),q=i(10975);class B{constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,h&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(h){this._zOffset!==h&&(this._zOffset=h,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(h){this._zOffsetUnits!==h&&(this._zOffsetUnits=h,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(h){this._cullFace!==h&&(this._cullFace=h,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(h){this._cull!==h&&(this._cull=h,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(h){this._depthFunc!==h&&(this._depthFunc=h,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(h){this._depthMask!==h&&(this._depthMask=h,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(h){this._depthTest!==h&&(this._depthTest=h,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(h){this._frontFace!==h&&(this._frontFace=h,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(h){this.isDirty&&(this._isCullDirty&&(this.cull?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(h.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(h.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(h.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(h.enable(h.POLYGON_OFFSET_FILL),h.polygonOffset(this.zOffset,this.zOffsetUnits)):h.disable(h.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(h.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class J{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(h){this._func!==h&&(this._func=h,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(h){this._funcRef!==h&&(this._funcRef=h,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(h){this._funcMask!==h&&(this._funcMask=h,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(h){this._opStencilFail!==h&&(this._opStencilFail=h,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(h){this._opDepthFail!==h&&(this._opDepthFail=h,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(h){this._opStencilDepthPass!==h&&(this._opStencilDepthPass=h,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(h){this._mask!==h&&(this._mask=h,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(h){this._enabled!==h&&(this._enabled=h,this._isStencilTestDirty=!0)}constructor(){let h=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,h&&this.reset()}reset(){var h;this.stencilMaterial=void 0,null===(h=this.stencilGlobal)||void 0===h||h.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(h){var V;if(!h)return;const i=!this.useStencilGlobalOnly&&!(null===(V=this.stencilMaterial)||void 0===V||!V.enabled);this.enabled=i?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=i?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=i?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=i?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=i?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=i?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=i?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=i?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(h.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(h.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(h.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class I{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=I.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=I.KEEP,this.opDepthFail=I.KEEP,this.opStencilDepthPass=I.REPLACE}get stencilFunc(){return this.func}set stencilFunc(h){this.func=h}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(h){this.funcRef=h}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(h){this.funcMask=h}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(h){this.opStencilFail=h}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(h){this.opDepthFail=h}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(h){this.opStencilDepthPass=h}get stencilMask(){return this.mask}set stencilMask(h){this.mask=h}get stencilTest(){return this.enabled}set stencilTest(h){this.enabled=h}}I.ALWAYS=519,I.KEEP=7680,I.REPLACE=7681;class v{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(h){this._alphaBlend!==h&&(this._alphaBlend=h,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(h,V,i,S){this._blendConstants[0]===h&&this._blendConstants[1]===V&&this._blendConstants[2]===i&&this._blendConstants[3]===S||(this._blendConstants[0]=h,this._blendConstants[1]=V,this._blendConstants[2]=i,this._blendConstants[3]=S,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(h,V,i,S){this._blendFunctionParameters[0]===h&&this._blendFunctionParameters[1]===V&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===S||(this._blendFunctionParameters[0]=h,this._blendFunctionParameters[1]=V,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=S,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(h,V){this._blendEquationParameters[0]===h&&this._blendEquationParameters[1]===V||(this._blendEquationParameters[0]=h,this._blendEquationParameters[1]=V,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(h){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?h.enable(h.BLEND):h.disable(h.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(h.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(h.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(h.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var s=i(10980),t=i(11064),T=i(10963),e=i(10960),n=i(11017),c=i(11077);function f(h,V){if((0,T.j)()){const{requestAnimationFrame:i}=V||window;if("function"===typeof i)return i(h)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(h);return setTimeout(h,16)}class P{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(h){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(h){h!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=h,this._depthCullingState.depthFunc=h?518:515)}setColorWrite(h){h!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=h)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(h){if(h)return this.isNDCHalfZRange?h.IS_NDC_HALF_ZRANGE="":delete h.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?h.USE_REVERSE_DEPTHBUFFER="":delete h.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?h.USE_EXACT_SRGB_CONVERSIONS="":delete h.USE_EXACT_SRGB_CONVERSIONS);{let h="";return this.isNDCHalfZRange&&(h+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(h&&(h+="\n"),h+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(h&&(h+="\n"),h+="#define USE_EXACT_SRGB_CONVERSIONS"),h}}_rebuildInternalTextures(){const h=this._internalTexturesCache.slice();for(const V of h)V._rebuild()}_rebuildRenderTargetWrappers(){const h=this._renderTargetWrapperCache.slice();for(const V of h)V._rebuild()}_rebuildEffects(){for(const h in this._compiledEffects){const V=this._compiledEffects[h];V._pipelineContext=null,V._prepareEffect()}Y.Effect.ResetCache()}_rebuildGraphicsResources(){var h;this.wipeCaches(!0),this._rebuildEffects(),null===(h=this._rebuildComputeEffects)||void 0===h||h.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){l.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(h){setTimeout((()=>{this._clearEmptyResources();const V=this._depthCullingState.depthTest,i=this._depthCullingState.depthFunc,S=this._depthCullingState.depthMask,l=this._stencilState.stencilTest;h(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=V,this._depthCullingState.depthFunc=i,this._depthCullingState.depthMask=S,this._stencilState.stencilTest=l,this._flagContextRestored()}),0)}get B(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(h){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(h){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const h=new Uint8Array(4),V=[h,h,h,h,h,h];this._emptyCubeTexture=this.createRawCubeTexture(V,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(h){if(!h)return this._activeRenderLoops.length=0,void this._cancelFrame();const V=this._activeRenderLoops.indexOf(h);V>=0&&(this._activeRenderLoops.splice(V,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const h=this._frameHandler;if(this._frameHandler=0,(0,T.j)()){const{cancelAnimationFrame:V}=this.getHostWindow()||window;if("function"===typeof V)return V(h)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(h);return clearTimeout(h)}}qg(){this.onBeginFrameObservable.notifyObservers(this)}Bg(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(h){this._maxFPS=h,void 0!==h&&(this._minFrameTime=h<=0?Number.MAX_VALUE:1e3/h)}_isOverFrameTime(h){if(!h||void 0===this._maxFPS)return!1;const V=h-this._lastFrameTime;return this._lastFrameTime=h,this._renderAccumulator+=V,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(h){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(h)){let h=!0;(this.B||!this.renderEvenInBackground&&this._windowIsBackground)&&(h=!1),h&&(this.qg(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Bg())}}_renderLoop(h){this._processFrame(h),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let h=0;h<this._activeRenderLoops.length;h++){(0,this._activeRenderLoops[h])()}}_renderViews(){return!1}_queueNewFrame(h,V){return f(h,V)}runRenderLoop(h){-1===this._activeRenderLoops.indexOf(h)&&(this._activeRenderLoops.push(h),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(h){this._depthCullingState.depthTest=h}setZOffset(h){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-h:h}getZOffset(){const h=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-h:h}setZOffsetUnits(h){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-h:h}getZOffsetUnits(){const h=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-h:h}getHostWindow(){return(0,T.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(h){this._compatibilityMode=!0}_rebuildTextures(){for(const h of this.scenes)h._rebuildTextures();for(const h of this._virtualScenes)h._rebuildTextures()}_releaseRenderTargetWrapper(h){const V=this._renderTargetWrapperCache.indexOf(h);-1!==V&&this._renderTargetWrapperCache.splice(V,1)}get currentViewport(){return this._cachedViewport}setViewport(h,V,i){const S=V||this.getRenderWidth(),l=i||this.getRenderHeight(),Y=h.x||0,g=h.y||0;this._cachedViewport=h,this._viewport(Y*S,g*l,S*h.width,l*h.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(h){return new Path2D(h)}get description(){let h=this.name+this.version;return this._caps.parallelShaderCompile&&(h+=" - Parallel shader compilation"),h}_createTextureBase(h,V,i,Y){let g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,J=arguments.length>7?arguments[7]:void 0,I=arguments.length>8?arguments[8]:void 0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,T=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,e=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,n=arguments.length>13?arguments[13]:void 0,f=arguments.length>14?arguments[14]:void 0,L=arguments.length>15?arguments[15]:void 0;const U="data:"===(h=h||"").substring(0,5),X="blob:"===h.substring(0,5),D=U&&-1!==h.indexOf(";base64,"),O=s||new t.c(this,1);O!==s&&(O.label=h.substring(0,60));const o=h;!this._transformTextureUrl||D||s||v||(h=this._transformTextureUrl(h)),o!==h&&(O._originalUrl=o);const M=h.lastIndexOf(".");let F=e||(M>-1?h.substring(M).toLowerCase():"");F.indexOf("?")>-1&&(F=F.split("?")[0]);const E=(0,c.b)(F,n);Y&&Y.addPendingData(O),O.url=h,O.generateMipMaps=!V,O.samplingMode=g,O.invertY=i,O._useSRGBBuffer=this._getUseSRGBBuffer(!!L,V),this._doNotHandleContextLost||(O._buffer=v);let H=null;q&&!s&&(H=O.onLoadedObservable.add(q)),s||this._internalTexturesCache.push(O);const j=(i,s)=>{Y&&Y.removePendingData(O),h===o?(H&&O.onLoadedObservable.remove(H),S.d.UseFallbackTexture&&h!==S.d.FallbackTexture&&this._createTextureBase(S.d.FallbackTexture,V,O.invertY,Y,g,null,B,J,I,v,O),i=(i||"Unknown error")+(S.d.UseFallbackTexture?" - Fallback texture was used":""),O.onErrorObservable.notifyObservers({message:i,exception:s}),B&&B(i,s)):(l.d.Warn(`Failed to load ${h}, falling back to ${o}`),this._createTextureBase(o,V,O.invertY,Y,g,q,B,J,I,v,O,T,e,n,f,L))};if(E){const V=async h=>{(await E).loadData(h,O,((h,V,i,S,l,q)=>{q?j("TextureLoader failed to load data"):J(O,F,Y,{width:h,height:V},O.invertY,!i,S,(()=>(l(),!1)),g)}),f)};v?v instanceof ArrayBuffer?V(new Uint8Array(v)):ArrayBuffer.isView(v)?V(v):B&&B("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(h,(h=>{V(new Uint8Array(h))}),void 0,Y?Y.offlineProvider:void 0,!0,((h,V)=>{j("Unable to load "+(h&&h.responseURL,V))}))}else{const i=h=>{X&&!this._doNotHandleContextLost&&(O._buffer=h),J(O,F,Y,h,O.invertY,V,!1,I,g)};!U||D?v&&("string"===typeof v.decoding||v.close)?i(v):P._FileToolsLoadImage(h||"",i,j,Y?Y.offlineProvider:null,n,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof v||v instanceof ArrayBuffer||ArrayBuffer.isView(v)||v instanceof Blob?P._FileToolsLoadImage(v,i,j,Y?Y.offlineProvider:null,n,O.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):v&&i(v)}return O}_rebuildBuffers(){for(const h of this._uniformBuffers)h._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,T.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const h in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,h)&&(this._boundTexturesCache[h]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(h){this._name=h}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(h){this._hardwareScalingLevel=h,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(h){this._doNotHandleContextLost=h}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(h,V,i){var l,Y;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new B,this._stencilStateComposer=new J,this._stencilState=new I,this._alphaState=new v,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new e.d,this.onCanvasFocusObservable=new e.d,this.onNewSceneAddedObservable=new e.d,this.onResizeObservable=new e.d,this.onCanvasPointerOutObservable=new e.d,this.onEffectErrorObservable=new e.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new e.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=h=>this._renderLoop(h),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new e.d,this.onAfterShaderCompilationObservable=new e.d,this.onBeginFrameObservable=new e.d,this.onEndFrameObservable=new e.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new e.d,this.onContextRestoredObservable=new e.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Ig=new e.d,this.onReleaseEffectsObservable=new e.d,S.d.Instances.push(this),this.startTime=q.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,g.b.SetMatrixPrecision(!!V.useHighPrecisionMatrix),(0,T.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=i??!1,V.antialias=h??V.antialias,V.deterministicLockstep=V.deterministicLockstep??!1,V.lockstepMaxSteps=V.lockstepMaxSteps??4,V.timeStep=V.timeStep??1/60,V.stencil=V.stencil??!0,this._audioContext=(null===(l=V.audioEngineOptions)||void 0===l?void 0:l.audioContext)??null,this._audioDestination=(null===(Y=V.audioEngineOptions)||void 0===Y?void 0:Y.audioDestination)??null,this.premultipliedAlpha=V.premultipliedAlpha??!0,this._doNotHandleContextLost=!!V.doNotHandleContextLost,this._isStencilEnable=!!V.stencil,this.useExactSrgbConversions=V.useExactSrgbConversions??!1;const s=(0,T.j)()&&window.devicePixelRatio||1,t=V.limitDeviceRatio||s;i=i||V.adaptToDeviceRatio||!1,this._hardwareScalingLevel=i?1/Math.min(t,s):1,this._lastDevicePixelRatio=s,this._creationOptions=V}resize(){let h,V,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const h=(0,T.j)()&&window.devicePixelRatio||1,V=this._lastDevicePixelRatio/h;this._lastDevicePixelRatio=h,this._hardwareScalingLevel*=V}if((0,T.j)()&&(0,T.e)())if(this._renderingCanvas){var S,l;const i=null===(S=(l=this._renderingCanvas).getBoundingClientRect)||void 0===S?void 0:S.call(l);h=this._renderingCanvas.clientWidth||(null===i||void 0===i?void 0:i.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,V=this._renderingCanvas.clientHeight||(null===i||void 0===i?void 0:i.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else h=window.innerWidth,V=window.innerHeight;else h=this._renderingCanvas?this._renderingCanvas.width:100,V=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(h/this._hardwareScalingLevel,V/this._hardwareScalingLevel,i)}setSize(h,V){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(h|=0,V|=0,!i&&this._renderingCanvas.width===h&&this._renderingCanvas.height===V)return!1;if(this._renderingCanvas.width=h,this._renderingCanvas.height=V,this.scenes){for(let h=0;h<this.scenes.length;h++){const V=this.scenes[h];for(let h=0;h<V.cameras.length;h++){V.cameras[h]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(h,V,i,S,l,Y,g,q,B,J,I){throw(0,s.d)("engine.rawTexture")}createRawCubeTexture(h,V,i,S,l,Y,g,q){throw(0,s.d)("engine.rawTexture")}createRawTexture3D(h,V,i,S,l,Y,g,q,B,J,I){throw(0,s.d)("engine.rawTexture")}createRawTexture2DArray(h,V,i,S,l,Y,g,q,B,J,I){throw(0,s.d)("engine.rawTexture")}_sharedInit(h){this._renderingCanvas=h}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const h=navigator.userAgent;this.hostInformation.isMobile=-1!==h.indexOf("Mobile")||-1!==h.indexOf("Mac")&&(0,T.e)()&&"ontouchend"in document},this._checkForMobile(),(0,T.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(h){return document.createElement("video")}_reportDrawCall(){var h;let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(h=this._drawCalls)||void 0===h||h.addCount(V,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(h,V){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(h,V){return createImageBitmap(h,V)}resizeImageBitmap(h,V,i){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(h){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(h,V){if("undefined"===typeof document)return new OffscreenCanvas(h,V);const i=document.createElement("canvas");return i.width=h,i.height=V,i}createCanvas(h,V){return P._CreateCanvas(h,V)}static _FileToolsLoadImage(h,V,i,S,l,Y,g){throw(0,s.d)("FileTools")}_loadFile(h,V,i,S,l,Y){const g=(0,n.m)(h,V,i,S,l,Y);return this._activeRequests.push(g),g.onCompleteObservable.add((()=>{const h=this._activeRequests.indexOf(g);-1!==h&&this._activeRequests.splice(h,1)})),g}static _FileToolsLoadFile(h,V,i,S,l,Y){if(n.d.loadFile)return n.d.loadFile(h,V,i,S,l,Y);throw(0,s.d)("FileTools")}dispose(){var h;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(h=this.releaseComputeEffects)||void 0===h||h.call(this),Y.Effect.ResetCache();for(const i of this._activeRequests)i.abort();this._boundRenderFunction=null,this.Ig.notifyObservers(this),this.Ig.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,T.j)()&&window.removeEventListener("resize",this._checkForMobile);const V=S.d.Instances.indexOf(this);V>=0&&S.d.Instances.splice(V,1),S.d.Instances.length||(S.d.OnEnginesDisposedObservable.notifyObservers(this),S.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(h){throw(0,s.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(h,V){for(let i=0;i<S.d.Instances.length;i++){const l=S.d.Instances[i];for(let i=0;i<l.scenes.length;i++)l.scenes[i].markAllMaterialsAsDirty(h,V)}}}P._RenderPassIdCounter=0,P._RescalePostProcessFactory=null,P.CollisionsEpsilon=.001,P.QueueNewFrame=f},10988:(h,V,i)=>{i.d(V,{d:()=>l});var S=i(10960);class l{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}l.Instances=[],l.OnEnginesDisposedObservable=new S.d,l._LastCreatedScene=null,l.UseFallbackTexture=!0,l.FallbackTexture=""},11057:(h,V,i)=>{i.d(V,{b:()=>S});class S{static SetMatrixPrecision(h){if(S.MatrixTrackPrecisionChange=!1,h&&!S.MatrixUse64Bits&&S.MatrixTrackedMatrices)for(let V=0;V<S.MatrixTrackedMatrices.length;++V){const h=S.MatrixTrackedMatrices[V],i=h.Tg;h.Tg=new Array(16);for(let V=0;V<16;++V)h.Tg[V]=i[V]}S.MatrixUse64Bits=h,S.MatrixCurrentType=S.MatrixUse64Bits?Array:Float32Array,S.MatrixTrackedMatrices=null}}S.MatrixUse64Bits=!1,S.MatrixTrackPrecisionChange=!0,S.MatrixCurrentType=Float32Array,S.MatrixTrackedMatrices=[]},11077:(h,V,i)=>{i.d(V,{b:()=>g});var S=i(10967);const l=new Map;function Y(h,V){(function(h){return l.delete(h)})(h)&&S.d.Warn(`Extension with the name '${h}' already exists`),l.set(h,V)}function g(h,V){"image/ktx"!==V&&"image/ktx2"!==V||(h=".ktx"),l.has(h)||(h.endsWith(".ies")&&Y(".ies",(async()=>await i.e(15).then(i.bind(i,13532)).then((h=>new h._IESTextureLoader)))),h.endsWith(".dds")&&Y(".dds",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(28)]).then(i.bind(i,13535)).then((h=>new h._DDSTextureLoader)))),h.endsWith(".basis")&&Y(".basis",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(47)]).then(i.bind(i,13543)).then((h=>new h._BasisTextureLoader)))),h.endsWith(".env")&&Y(".env",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(23),i.e(21),i.e(45),i.e(48)]).then(i.bind(i,13550)).then((h=>new h._ENVTextureLoader)))),h.endsWith(".hdr")&&Y(".hdr",(async()=>await Promise.all([i.e(14),i.e(49)]).then(i.bind(i,13553)).then((h=>new h._HDRTextureLoader)))),(h.endsWith(".ktx")||h.endsWith(".ktx2"))&&(Y(".ktx",(async()=>await i.e(30).then(i.bind(i,13556)).then((h=>new h._KTXTextureLoader)))),Y(".ktx2",(async()=>await i.e(30).then(i.bind(i,13556)).then((h=>new h._KTXTextureLoader))))),h.endsWith(".tga")&&Y(".tga",(async()=>await i.e(50).then(i.bind(i,13558)).then((h=>new h._TGATextureLoader)))),h.endsWith(".exr")&&Y(".exr",(async()=>await i.e(16).then(i.bind(i,13564)).then((h=>new h._ExrTextureLoader)))));const S=l.get(h);return S?Promise.resolve(S(V)):null}},11064:(h,V,i)=>{i.d(V,{c:()=>g});var S,l=i(10960),Y=i(11072);!function(h){h[h.Unknown=0]="Unknown",h[h.Url=1]="Url",h[h.Temp=2]="Temp",h[h.Raw=3]="Raw",h[h.Dynamic=4]="Dynamic",h[h.RenderTarget=5]="RenderTarget",h[h.MultiRenderTarget=6]="MultiRenderTarget",h[h.Cube=7]="Cube",h[h.CubeRaw=8]="CubeRaw",h[h.CubePrefiltered=9]="CubePrefiltered",h[h.Raw3D=10]="Raw3D",h[h.Raw2DArray=11]="Raw2DArray",h[h.DepthStencil=12]="DepthStencil",h[h.CubeRawRGBD=13]="CubeRawRGBD",h[h.Depth=14]="Depth"}(S||(S={}));class g extends Y.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(h){this.generateMipMaps=h}get uniqueId(){return this._uniqueId}_setUniqueId(h){this._uniqueId=h}getEngine(){return this._engine}get source(){return this._source}constructor(h,V){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new l.d,this.onErrorObservable=new l.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=h,this._source=V,this._uniqueId=g._Counter++,i||(this._hardwareTexture=h._createHardwareTexture())}incrementReferences(){this._references++}updateSize(h,V){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,h,V,i),this.width=h,this.height=V,this.depth=i,this.baseWidth=h,this.baseHeight=V,this.baseDepth=i,this._size=h*V*i}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const h=this.onRebuildCallback(this),V=V=>{V._swapAndDie(this,!1),this.isReady=h.isReady};return void(h.isAsync?h.proxy.then(V):V(h.proxy))}let h;switch(this.source){case 2:case 12:case 14:break;case 1:return void(h=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(h=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:h=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),h._swapAndDie(this,!1),this.isReady=!0;break;case 10:h=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 11:h=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),h._swapAndDie(this,!1),this.isReady=!0;break;case 4:h=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),h._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(h=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:h=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),h._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return h=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(h=>{h&&h._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(h._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(h){var V;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(V=this._hardwareTexture)||void 0===V||V.setUsage(h._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),h._hardwareTexture=this._hardwareTexture,i&&(h._isRGBD=this._isRGBD),this._lodTextureHigh&&(h._lodTextureHigh&&h._lodTextureHigh.dispose(),h._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(h._lodTextureMid&&h._lodTextureMid.dispose(),h._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(h._lodTextureLow&&h._lodTextureLow.dispose(),h._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(h._irradianceTexture&&h._irradianceTexture.dispose(),h._irradianceTexture=this._irradianceTexture);const S=this._engine.getLoadedTexturesCache();let l=S.indexOf(this);-1!==l&&S.splice(l,1),l=S.indexOf(h),-1===l&&S.push(h)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}g._Counter=0},11072:(h,V,i)=>{i.d(V,{c:()=>S});class S{get wrapU(){return this._cachedWrapU}set wrapU(h){this._cachedWrapU=h}get wrapV(){return this._cachedWrapV}set wrapV(h){this._cachedWrapV=h}get wrapR(){return this._cachedWrapR}set wrapR(h){this._cachedWrapR=h}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(h){this._cachedAnisotropicFilteringLevel=h}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(h){this._comparisonFunction=h}get useMipMaps(){return this._useMipMaps}set useMipMaps(h){this._useMipMaps=h}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=h,this._cachedWrapV=V,this._cachedWrapR=i,this._cachedAnisotropicFilteringLevel=S,this.samplingMode=l,this._comparisonFunction=Y,this}compareSampler(h){return this._cachedWrapU===h._cachedWrapU&&this._cachedWrapV===h._cachedWrapV&&this._cachedWrapR===h._cachedWrapR&&this._cachedAnisotropicFilteringLevel===h._cachedAnisotropicFilteringLevel&&this.samplingMode===h.samplingMode&&this._comparisonFunction===h._comparisonFunction&&this._useMipMaps===h._useMipMaps}}},10972:(h,V,i)=>{i.d(V,{d:()=>Y});var S=i(10967);const l=(h,V,i)=>h?h.getClassName&&"Mesh"===h.getClassName()?null:!h.getClassName||"SubMesh"!==h.getClassName()&&"PhysicsBody"!==h.getClassName()?h.clone?h.clone():Array.isArray(h)?h.slice():i&&"object"===typeof h?{...h}:null:h.clone(V):null;class Y{static DeepCopy(h,V,i,Y){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const q=function(h){const V=[];do{const i=Object.getOwnPropertyNames(h);for(const h of i)-1===V.indexOf(h)&&V.push(h)}while(h=Object.getPrototypeOf(h));return V}(h);for(const J of q){if("_"===J[0]&&(!Y||-1===Y.indexOf(J)))continue;if(J.endsWith("Observable"))continue;if(i&&-1!==i.indexOf(J))continue;const q=h[J],I=typeof q;if("function"!==I)try{if("object"===I)if(q instanceof Uint8Array)V[J]=Uint8Array.from(q);else if(q instanceof Array){if(V[J]=[],q.length>0)if("object"==typeof q[0])for(let h=0;h<q.length;h++){const i=l(q[h],V,g);-1===V[J].indexOf(i)&&V[J].push(i)}else V[J]=q.slice(0)}else V[J]=l(q,V,g);else V[J]=q}catch(B){S.d.Warn(B.message)}}}}},11002:(h,V,i)=>{i.d(V,{e:()=>S,i:()=>l,l:()=>Y});class S extends Error{}S._setPrototypeOf=Object.setPrototypeOf||((h,V)=>(h.__proto__=V,h));const l={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class Y extends S{constructor(h,V,i){super(h),this.errorCode=V,this.innerError=i,this.name="RuntimeError",S._setPrototypeOf(this,Y.prototype)}}},10993:(h,V,i)=>{i.d(V,{c:()=>j,f:()=>P,i:()=>M,m:()=>E,r:()=>O,o:()=>n,s:()=>X,w:()=>D,x:()=>o,z:()=>L});var S=i(10984),l=i(10963),Y=i(10960);class g{}g.FilesToLoad={};var q=i(11002),B=i(11009),J=i(11015),I=i(10988),v=i(10967),s=i(11021),t=i(11017),T=i(11028);const e=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class n extends q.l{constructor(h,V){super(h,q.i.LoadFileError),this.name="LoadFileError",q.e._setPrototypeOf(this,n.prototype),V instanceof S.c?this.request=V:this.file=V}}class c extends q.l{constructor(h,V){super(h,q.i.RequestFileError),this.request=V,this.name="RequestFileError",q.e._setPrototypeOf(this,c.prototype)}}class f extends q.l{constructor(h,V){super(h,q.i.ReadFileError),this.file=V,this.name="ReadFileError",q.e._setPrototypeOf(this,f.prototype)}}const P={DefaultRetryStrategy:class{static ExponentialBackoff(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(i,S,l)=>0!==S.status||l>=h||-1!==i.indexOf("file:")?-1:Math.pow(2,l)*V}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:h=>h,ScriptBaseUrl:"",ScriptPreprocessUrl:h=>h,CleanUrl:h=>h=h.replace(/#/gm,"%23")},L=(h,V)=>{if((!h||0!==h.indexOf("data:"))&&P.CorsBehavior)if("string"===typeof P.CorsBehavior||P.CorsBehavior instanceof String)V.crossOrigin=P.CorsBehavior;else{const i=P.CorsBehavior(h);i&&(V.crossOrigin=i)}},U={getRequiredSize:null},X=function(h,V,i,l){let Y,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",J=arguments.length>5?arguments[5]:void 0,v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:I.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===v||void 0===v||!v._features.forceBitmapOverHTMLImageElement))return i("LoadImage is only supported in web or BabylonNative environments."),null;let s=!1;h instanceof ArrayBuffer||ArrayBuffer.isView(h)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(Y=URL.createObjectURL(new Blob([h],{type:q})),s=!0):Y=`data:${q};base64,`+(0,B.g)(h):h instanceof Blob?(Y=URL.createObjectURL(h),s=!0):(Y=P.CleanUrl(h),Y=P.PreprocessUrl(Y));const t=V=>{if(i){const S=Y||h.toString();i(`Error while trying to load image: ${0===S.indexOf("http")||S.length<=128?S:S.slice(0,128)+"..."}`,V)}};if(null!==v&&void 0!==v&&v._features.forceBitmapOverHTMLImageElement)return O(Y,(S=>{v.createImageBitmap(new Blob([S],{type:q}),{premultiplyAlpha:"none",...J}).then((h=>{V(h),s&&URL.revokeObjectURL(Y)})).catch((V=>{i&&i("Error while trying to load image: "+h,V)}))}),void 0,l||void 0,!0,((h,V)=>{t(V)})),null;const T=new Image;if(U.getRequiredSize){const V=U.getRequiredSize(h);V.width&&(T.width=V.width),V.height&&(T.height=V.height)}L(Y,T);const e=[],n=()=>{for(const h of e)h.target.removeEventListener(h.name,h.handler);e.length=0};e.push({target:T,name:"load",handler:()=>{n(),V(T),s&&T.src&&URL.revokeObjectURL(T.src)}}),e.push({target:T,name:"error",handler:h=>{n(),t(h),s&&T.src&&URL.revokeObjectURL(T.src)}}),e.push({target:document,name:"securitypolicyviolation",handler:h=>{if(h.blockedURI!==T.src||"ng"===h.disposition)return;n();const V=new Error(`CSP violation of policy ${h.effectiveDirective} ${h.blockedURI}. Current policy is ${h.originalPolicy}`);I.d.UseFallbackTexture=!1,t(V),s&&T.src&&URL.revokeObjectURL(T.src),T.src=""}}),(()=>{for(const h of e)h.target.addEventListener(h.name,h.handler)})();const c="blob:"===Y.substring(0,5),f="data:"===Y.substring(0,5),X=()=>{c||f||!S.c.IsCustomRequestAvailable?T.src=Y:O(Y,((h,V,i)=>{const S=new Blob([h],{type:!q&&i?i:q}),l=URL.createObjectURL(S);s=!0,T.src=l}),void 0,l||void 0,!0,((h,V)=>{t(V)}))},D=()=>{l&&l.loadImage(Y,T)};if(!c&&!f&&l&&l.enableTexturesOffline)l.open(D,X);else{if(-1!==Y.indexOf("file:")){const h=decodeURIComponent(Y.substring(5).toLowerCase());if(g.FilesToLoad[h]&&"undefined"!==typeof URL){try{let V;try{V=URL.createObjectURL(g.FilesToLoad[h])}catch(o){V=URL.createObjectURL(g.FilesToLoad[h])}T.src=V,s=!0}catch(M){T.src=""}return T}}X()}return T},D=(h,V,i,S,l)=>{const g=new FileReader,q={onCompleteObservable:new Y.d,abort:()=>g.abort()};return g.onloadend=()=>q.onCompleteObservable.notifyObservers(q),l&&(g.onerror=()=>{l(new f(`Unable to read ${h.name}`,h))}),g.onload=h=>{V(h.target.result)},i&&(g.onprogress=i),S?g.readAsArrayBuffer(h):g.readAsText(h),q},O=(h,V,i,S,l,B,J)=>{if(h.name)return D(h,V,i,l,B?h=>{B(void 0,h)}:void 0);const I=h;if(-1!==I.indexOf("file:")){let h=decodeURIComponent(I.substring(5).toLowerCase());0===h.indexOf("./")&&(h=h.substring(2));const S=g.FilesToLoad[h];if(S)return D(S,V,i,l,B?h=>B(void 0,new n(h.message,h.file)):void 0)}const{match:t,type:T}=H(I);if(t){const h={onCompleteObservable:new Y.d,abort:()=>()=>{}};try{const h=l?j(I):m(I);V(h,void 0,T)}catch(q){B?B(void 0,q):v.d.Error(q.message||"Failed to parse the Data URL")}return s.d.SetImmediate((()=>{h.onCompleteObservable.notifyObservers(h)})),h}return o(I,((h,i)=>{V(h,null===i||void 0===i?void 0:i.responseURL,null===i||void 0===i?void 0:i.getResponseHeader("content-type"))}),i,S,l,B?h=>{B(h.request,new n(h.message,h.request))}:void 0,J)},o=(h,V,i,g,q,B,J)=>{h=P.CleanUrl(h),h=P.PreprocessUrl(h);const I=P.BaseUrl+h;let s=!1;const t={onCompleteObservable:new Y.d,abort:()=>s=!0},T=()=>{let h,Y=new S.c,g=null;const T=()=>{Y&&(i&&Y.removeEventListener("progress",i),h&&Y.removeEventListener("readystatechange",h),Y.removeEventListener("loadend",e))};let e=()=>{T(),t.onCompleteObservable.notifyObservers(t),t.onCompleteObservable.clear(),i=void 0,h=null,e=null,B=void 0,J=void 0,V=void 0};t.abort=()=>{s=!0,e&&e(),Y&&Y.readyState!==(XMLHttpRequest.DONE||4)&&Y.abort(),null!==g&&(clearTimeout(g),g=null),Y=null};const n=h=>{const V=h.message||"Unknown error";B&&Y?B(new c(V,Y)):v.d.Error(V)},f=v=>{if(Y){if(Y.open("GET",I),J)try{J(Y)}catch(t){return void n(t)}q&&(Y.responseType="arraybuffer"),i&&Y.addEventListener("progress",i),e&&Y.addEventListener("loadend",e),h=()=>{if(!s&&Y&&Y.readyState===(XMLHttpRequest.DONE||4)){if(h&&Y.removeEventListener("readystatechange",h),Y.status>=200&&Y.status<300||0===Y.status&&(!(0,l.j)()||F())){const h=q?Y.response:Y.responseText;if(null!==h){try{V&&V(h,Y)}catch(t){n(t)}return}}const i=P.DefaultRetryStrategy;if(i){const h=i(I,Y,v);if(-1!==h)return T(),Y=new S.c,void(g=setTimeout((()=>f(v+1)),h))}const J=new c("Error status: "+Y.status+" "+Y.statusText+" - Unable to load "+I,Y);B&&B(J)}},Y.addEventListener("readystatechange",h),Y.send()}};f(0)};if(g&&g.enableSceneOffline){const S=h=>{h&&h.status>400?B&&B(h):T()},l=()=>{g&&g.loadFile(P.BaseUrl+h,(h=>{!s&&V&&V(h),t.onCompleteObservable.notifyObservers(t)}),i?h=>{!s&&i&&i(h)}:void 0,S,q)};g.open(l,S)}else T();return t},M=h=>{const{match:V,type:i}=H(h);if(V)return i||void 0;const S=h.lastIndexOf(".");switch(h.substring(S+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"fg":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},F=()=>"undefined"!==typeof location&&"file:"===location.protocol,E=h=>e.test(h),H=h=>{const V=e.exec(h);if(null===V||0===V.length)return{match:!1,type:""};return{match:!0,type:V[0].replace("data:","").replace("base64,","")}};function j(h){return(0,B.b)(h.split(",")[1])}const m=h=>(0,B.d)(h.split(",")[1]);let G;T.b._FileToolsLoadImage=X,t.d.loadFile=O,J.l.loadFile=O;((h,V,i,S,l,Y,g,q,B,J)=>{G={DecodeBase64UrlToBinary:h,DecodeBase64UrlToString:V,DefaultRetryStrategy:i.DefaultRetryStrategy,BaseUrl:i.BaseUrl,CorsBehavior:i.CorsBehavior,PreprocessUrl:i.PreprocessUrl,IsBase64DataUrl:S,IsFileURL:l,LoadFile:Y,LoadImage:g,ReadFile:q,RequestFile:B,SetCorsBehavior:J},Object.defineProperty(G,"DefaultRetryStrategy",{get:function(){return i.DefaultRetryStrategy},set:function(h){i.DefaultRetryStrategy=h}}),Object.defineProperty(G,"BaseUrl",{get:function(){return i.BaseUrl},set:function(h){i.BaseUrl=h}}),Object.defineProperty(G,"PreprocessUrl",{get:function(){return i.PreprocessUrl},set:function(h){i.PreprocessUrl=h}}),Object.defineProperty(G,"CorsBehavior",{get:function(){return i.CorsBehavior},set:function(h){i.CorsBehavior=h}})})(j,m,P,E,F,O,X,D,o,L)},11100:(h,V,i)=>{function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(h=>{const V=16*Math.random()|0;return("x"===h?V:3&V|8).toString(16)}))}i.d(V,{e:()=>S})},11085:(h,V,i)=>{i.d(V,{b:()=>Y});var S=i(10967),l=i(11091);class Y{static Instantiate(h){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[h])return this.RegisteredExternalClasses[h];const V=(0,l.b)(h);if(V)return V;S.d.Warn(h+" not found, you may have missed an import.");const i=h.split(".");let Y=window||this;for(let S=0,l=i.length;S<l;S++)Y=Y[i[S]];return"function"!==typeof Y?null:Y}}Y.RegisteredExternalClasses={}},10975:(h,V,i)=>{i.d(V,{e:()=>l});var S=i(10963);class l{static get Now(){return(0,S.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11009:(h,V,i)=>{i.d(V,{b:()=>g,d:()=>Y,e:()=>S,g:()=>l});const S=h=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(h);let V="";for(let i=0;i<h.byteLength;i++)V+=String.fromCharCode(h[i]);return V},l=h=>{const V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i,S,l,Y,g,q,B,J="",I=0;const v=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):new Uint8Array(h);for(;I<v.length;)i=v[I++],S=I<v.length?v[I++]:Number.NaN,l=I<v.length?v[I++]:Number.NaN,Y=i>>2,g=(3&i)<<4|S>>4,q=(15&S)<<2|l>>6,B=63&l,isNaN(S)?q=B=64:isNaN(l)&&(B=64),J+=V.charAt(Y)+V.charAt(g)+V.charAt(q)+V.charAt(B);return J},Y=h=>atob(h),g=h=>{const V=Y(h),i=V.length,S=new Uint8Array(new ArrayBuffer(i));for(let l=0;l<i;l++)S[l]=V.charCodeAt(l);return S.buffer}},11104:(h,V,i)=>{function S(h){let V=1;do{V*=2}while(V<h);return V===h}function l(h,V,i){return h*(1-i)+V*i}function Y(h){const V=g(h),i=q(h);return V-h>h-i?i:V}function g(h){return h--,h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,h|=h>>16,++h}function q(h){return h|=h>>1,h|=h>>2,h|=h>>4,h|=h>>8,(h|=h>>16)-(h>>1)}function B(h,V){let i;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:i=q(h);break;case 2:i=Y(h);break;default:i=g(h)}return Math.min(i,V)}i.d(V,{d:()=>q,g:()=>B,j:()=>S,n:()=>l,p:()=>Y})},10952:(h,V,i)=>{i.r(V),i.d(V,{AsyncLoop:()=>f,Tools:()=>n,className:()=>c});var S=i(10960),l=i(10963),Y=i(10967),g=i(10972),q=i(10975),B=i(10980),J=i(10984),I=i(10988),v=i(10993),s=i(11021),t=i(11085),T=i(11100),e=i(11104);class n{static get BaseUrl(){return v.f.BaseUrl}static set BaseUrl(h){v.f.BaseUrl=h}static get CleanUrl(){return v.f.CleanUrl}static set CleanUrl(h){v.f.CleanUrl=h}static IsAbsoluteUrl(h){return 0===h.indexOf("//")||-1!==h.indexOf("://")&&(-1!==h.indexOf(".")&&(-1!==h.indexOf("/")&&(!(h.indexOf(":")>h.indexOf("/"))&&(h.indexOf("://")<h.indexOf(".")||(0===h.indexOf("data:")||0===h.indexOf("blob:"))))))}static set ScriptBaseUrl(h){v.f.ScriptBaseUrl=h}static get ScriptBaseUrl(){return v.f.ScriptBaseUrl}static set CDNBaseUrl(h){n.ScriptBaseUrl=h,n.AssetBaseUrl=h}static set ScriptPreprocessUrl(h){v.f.ScriptPreprocessUrl=h}static get ScriptPreprocessUrl(){return v.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return v.f.DefaultRetryStrategy}static set DefaultRetryStrategy(h){v.f.DefaultRetryStrategy=h}static get CorsBehavior(){return v.f.CorsBehavior}static set CorsBehavior(h){v.f.CorsBehavior=h}static get UseFallbackTexture(){return I.d.UseFallbackTexture}static set UseFallbackTexture(h){I.d.UseFallbackTexture=h}static get RegisteredExternalClasses(){return t.b.RegisteredExternalClasses}static set RegisteredExternalClasses(h){t.b.RegisteredExternalClasses=h}static get fallbackTexture(){return I.d.FallbackTexture}static set fallbackTexture(h){I.d.FallbackTexture=h}static FetchToRef(h,V,i,S,l,Y){const g=4*((Math.abs(h)*i%i|0)+(Math.abs(V)*S%S|0)*i);Y.r=l[g]/255,Y.g=l[g+1]/255,Y.b=l[g+2]/255,Y.a=l[g+3]/255}static Mix(h,V,i){return 0}static Instantiate(h){return t.b.Instantiate(h)}static SetImmediate(h){s.d.SetImmediate(h)}static IsExponentOfTwo(h){return!0}static FloatRound(h){return Math.fround(h)}static GetFilename(h){const V=h.lastIndexOf("/");return V<0?h:h.substring(V+1)}static GetFolderPath(h){let V=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=h.lastIndexOf("/");return i<0?V?h:"":h.substring(0,i+1)}static ToDegrees(h){return 180*h/Math.PI}static ToRadians(h){return h*Math.PI/180}static SmoothAngleChange(h,V){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const S=this.ToRadians(h),l=this.ToRadians(V);return this.ToDegrees(Math.atan2((1-i)*Math.sin(l)+i*Math.sin(S),(1-i)*Math.cos(l)+i*Math.cos(S)))}static MakeArray(h,V){return!0===V||void 0!==h&&null!=h?Array.isArray(h)?h:[h]:null}static GetPointerPrefix(h){return(0,l.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(h,V){(0,v.z)(h,V)}static SetReferrerPolicyBehavior(h,V){V.referrerPolicy=h}static get PreprocessUrl(){return v.f.PreprocessUrl}static set PreprocessUrl(h){v.f.PreprocessUrl=h}static LoadImage(h,V,i,S,l,Y){return(0,v.s)(h,V,i,S,l,Y)}static LoadFile(h,V,i,S,l,Y){return(0,v.r)(h,V,i,S,l,Y)}static async LoadFileAsync(h){let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((i,S)=>{(0,v.r)(h,(h=>{i(h)}),void 0,void 0,V,((h,V)=>{S(V)}))}))}static GetAssetUrl(h){if(!h)return"";if(n.AssetBaseUrl&&h.startsWith(n._DefaultAssetsUrl)){const V="/"===n.AssetBaseUrl[n.AssetBaseUrl.length-1]?n.AssetBaseUrl.substring(0,n.AssetBaseUrl.length-1):n.AssetBaseUrl;return h.replace(n._DefaultAssetsUrl,V)}return h}static GetBabylonScriptURL(h,V){if(!h)return"";if(n.ScriptBaseUrl&&h.startsWith(n._DefaultCdnUrl)){const V="/"===n.ScriptBaseUrl[n.ScriptBaseUrl.length-1]?n.ScriptBaseUrl.substring(0,n.ScriptBaseUrl.length-1):n.ScriptBaseUrl;h=h.replace(n._DefaultCdnUrl,V)}return h=n.ScriptPreprocessUrl(h),V&&(h=n.GetAbsoluteUrl(h)),h}static LoadBabylonScript(h,V,i,S){h=n.GetBabylonScriptURL(h),n.LoadScript(h,V,i)}static async LoadBabylonScriptAsync(h){return h=n.GetBabylonScriptURL(h),await n.LoadScriptAsync(h)}static LoadScript(h,V,i,S){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(h),V&&V()}catch(B){null===i||void 0===i||i(`Unable to load script '${h}' in worker`,B)}return}if(!(0,l.j)())return void(null===i||void 0===i||i(`Cannot load script '${h}' outside of a window or a worker`));const g=document.getElementsByTagName("head")[0],q=document.createElement("script");Y?(q.setAttribute("type","module"),q.innerText=h):(q.setAttribute("type","text/javascript"),q.setAttribute("src",h)),S&&(q.id=S),q.onload=()=>{V&&V()},q.onerror=V=>{i&&i(`Unable to load script '${h}'`,V)},g.appendChild(q)}static async LoadScriptAsync(h,V){return await new Promise(((i,S)=>{this.LoadScript(h,(()=>{i()}),((h,V)=>{S(V||new Error(h))}),V)}))}static ReadFileAsDataURL(h,V,i){const l=new FileReader,Y={onCompleteObservable:new S.d,abort:()=>l.abort()};return l.onloadend=()=>{Y.onCompleteObservable.notifyObservers(Y)},l.onload=h=>{V(h.target.result)},l.onprogress=i,l.readAsDataURL(h),Y}static ReadFile(h,V,i,S,l){return(0,v.w)(h,V,i,S,l)}static FileAsURL(h){const V=new Blob([h]);return window.URL.createObjectURL(V)}static Format(h){let V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h.toFixed(V)}static DeepCopy(h,V,i,S){g.d.DeepCopy(h,V,i,S)}static IsEmpty(h){for(const V in h)if(Object.prototype.hasOwnProperty.call(h,V))return!1;return!0}static RegisterTopRootEvents(h,V){for(let S=0;S<V.length;S++){const l=V[S];h.addEventListener(l.name,l.handler,!1);try{window.parent&&window.parent.addEventListener(l.name,l.handler,!1)}catch(i){}}}static UnregisterTopRootEvents(h,V){for(let S=0;S<V.length;S++){const l=V[S];h.removeEventListener(l.name,l.handler);try{h.parent&&h.parent.removeEventListener(l.name,l.handler)}catch(i){}}}static async DumpFramebuffer(h,V,i,S){throw(0,B.d)("DumpTools")}static DumpData(h,V,i,S){throw(0,B.d)("DumpTools")}static async DumpDataAsync(h,V,i){throw(0,B.d)("DumpTools")}static _IsOffScreenCanvas(h){return void 0!==h.convertToBlob}static ToBlob(h,V){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0;n._IsOffScreenCanvas(h)||h.toBlob||(h.toBlob=function(h,V,i){setTimeout((()=>{const S=atob(this.toDataURL(V,i).split(",")[1]),l=S.length,Y=new Uint8Array(l);for(let h=0;h<l;h++)Y[h]=S.charCodeAt(h);h(new Blob([Y]))}))}),n._IsOffScreenCanvas(h)?h.convertToBlob({type:i,quality:S}).then((h=>V(h))):h.toBlob((function(h){V(h)}),i,S)}static DownloadBlob(h,V){if("download"in document.createElement("a")){if(!V){const h=new Date;V="screenshot_"+((h.getFullYear()+"-"+(h.getMonth()+1)).slice(2)+"-"+h.getDate()+"_"+h.getHours()+"-"+("0"+h.getMinutes()).slice(-2))+".png"}n.Download(h,V)}else if(h&&"undefined"!==typeof URL){const V=URL.createObjectURL(h),i=window.open("");if(!i)return;const S=i.document.createElement("img");S.onload=function(){URL.revokeObjectURL(V)},S.src=V,i.document.body.appendChild(S)}}static EncodeScreenshotCanvasData(h,V){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",S=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;if("string"!==typeof S&&V){if(V){if(n._IsOffScreenCanvas(h))return void h.convertToBlob({type:i,quality:l}).then((h=>{const i=new FileReader;i.readAsDataURL(h),i.onloadend=()=>{const h=i.result;V(h)}}));const S=h.toDataURL(i,l);V(S)}}else this.ToBlob(h,(function(h){h&&n.DownloadBlob(h,S),V&&V("")}),i,l)}static Download(h,V){if("undefined"===typeof URL)return;const i=window.URL.createObjectURL(h),S=document.createElement("a");document.body.appendChild(S),S.style.display="none",S.href=i,S.download=V,S.addEventListener("click",(()=>{S.parentElement&&S.parentElement.removeChild(S)})),S.click(),window.URL.revokeObjectURL(i)}static BackCompatCameraNoPreventDefault(h){return"boolean"===typeof h[0]?h[0]:"boolean"===typeof h[1]&&h[1]}static CreateScreenshot(h,V,i,S){throw(0,B.d)("ScreenshotTools")}static async CreateScreenshotAsync(h,V,i){throw(0,B.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(h,V,i,S){throw(0,B.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(h,V,i){throw(0,B.d)("ScreenshotTools")}static RandomId(){return(0,T.e)()}static IsBase64(h){return(0,v.m)(h)}static DecodeBase64(h){return(0,v.c)(h)}static get errorsCount(){return Y.d.errorsCount}static Log(h){Y.d.Log(h)}static Warn(h){Y.d.Warn(h)}static Error(h){Y.d.Error(h)}static get LogCache(){return Y.d.LogCache}static ClearLogCache(){Y.d.ClearLogCache()}static set LogLevels(h){Y.d.LogLevels=h}static set PerformanceLogLevel(h){return(h&n.PerformanceUserMarkLogLevel)===n.PerformanceUserMarkLogLevel?(n.StartPerformanceCounter=n._StartUserMark,void(n.EndPerformanceCounter=n._EndUserMark)):(h&n.PerformanceConsoleLogLevel)===n.PerformanceConsoleLogLevel?(n.StartPerformanceCounter=n._StartPerformanceConsole,void(n.EndPerformanceCounter=n._EndPerformanceConsole)):(n.StartPerformanceCounter=n._StartPerformanceCounterDisabled,void(n.EndPerformanceCounter=n._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(h,V){}static _EndPerformanceCounterDisabled(h,V){}static _StartUserMark(h){let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n._Performance){if(!(0,l.j)())return;n._Performance=window.performance}V&&n._Performance.mark&&n._Performance.mark(h+"-Begin")}static _EndUserMark(h){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&n._Performance.mark&&(n._Performance.mark(h+"-End"),n._Performance.measure(h,h+"-Begin",h+"-End"))}static _StartPerformanceConsole(h){let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];V&&(n._StartUserMark(h,V),console.time&&console.time(h))}static _EndPerformanceConsole(h){let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];V&&(n._EndUserMark(h,V),console.timeEnd(h))}static get Now(){return q.e.Now}static GetClassName(h){let V=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(!V&&h.getClassName)i=h.getClassName();else{if(h instanceof Object){i=(V?h:Object.getPrototypeOf(h)).constructor.__bjsclassName__}i||(i=typeof h)}return i}static First(h,V){for(const i of h)if(V(i))return i;return null}static getFullClassName(h){let V=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null,S=null;if(!V&&h.getClassName)i=h.getClassName();else{if(h instanceof Object){const l=V?h:Object.getPrototypeOf(h);i=l.constructor.__bjsclassName__,S=l.constructor.__bjsmoduleName__}i||(i=typeof h)}return i?(null!=S?S+".":"")+i:null}static async DelayAsync(h){await new Promise((V=>{setTimeout((()=>{V()}),h)}))}static IsSafari(){return!!(0,l.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function c(h,V){return i=>{i.__bjsclassName__=h,i.__bjsmoduleName__=null!=V?V:null}}n.AssetBaseUrl="",n.UseCustomRequestHeaders=!1,n.CustomRequestHeaders=J.c.CustomRequestHeaders,n.GetDOMTextContent=l.b,n._DefaultCdnUrl="https://cdn.babylonjs.com",n._DefaultAssetsUrl="https://assets.babylonjs.com/core",n.GetAbsoluteUrl="object"===typeof document?h=>{const V=document.createElement("a");return V.href=h,V.href}:"function"===typeof URL&&"object"===typeof location?h=>new URL(h,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},n.NoneLogLevel=Y.d.NoneLogLevel,n.MessageLogLevel=Y.d.MessageLogLevel,n.WarningLogLevel=Y.d.WarningLogLevel,n.ErrorLogLevel=Y.d.ErrorLogLevel,n.AllLogLevel=Y.d.AllLogLevel,n.IsWindowObjectExist=l.j,n.PerformanceNoneLogLevel=0,n.PerformanceUserMarkLogLevel=1,n.PerformanceConsoleLogLevel=2,n.StartPerformanceCounter=n._StartPerformanceCounterDisabled,n.EndPerformanceCounter=n._EndPerformanceCounterDisabled;class f{constructor(h,V,i){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=h,this.index=S-1,this._done=!1,this._fn=V,this._successCallback=i}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(h,V,i){const S=new f(h,V,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return S.executeNext(),S}static SyncAsyncForLoop(h,V,i,S,l){let Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return f.Run(Math.ceil(h/V),(S=>{l&&l()?S.breakLoop():setTimeout((()=>{for(let Y=0;Y<V;++Y){const g=S.index*V+Y;if(g>=h)break;if(i(g),l&&l()){S.breakLoop();break}}S.executeNext()}),Y)}),S)}}n.Mix=e.n,n.IsExponentOfTwo=e.j,I.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11091:(h,V,i)=>{i.d(V,{b:()=>Y,f:()=>l});const S={};function l(h,V){S[h]=V}function Y(h){return S[h]}},10984:(h,V,i)=>{i.d(V,{c:()=>S});class S{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(S.CustomRequestHeaders).length>0||S.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const h in S.CustomRequestHeaders){const V=S.CustomRequestHeaders[h];V&&this._xhr.setRequestHeader(h,V)}}_shouldSkipRequestModifications(h){return S.SkipRequestModificationForBabylonCDN&&(h.includes("preview.babylonjs.com")||h.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(h){this._xhr.onprogress=h}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(h){this._xhr.responseType=h}get timeout(){return this._xhr.timeout}set timeout(h){this._xhr.timeout=h}addEventListener(h,V,i){this._xhr.addEventListener(h,V,i)}removeEventListener(h,V,i){this._xhr.removeEventListener(h,V,i)}abort(){this._xhr.abort()}send(h){S.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(h)}open(h,V){for(const i of S.CustomRequestModifiers){if(this._shouldSkipRequestModifications(V))return;V=i(this._xhr,V)||V}V=(V=V.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=V,this._xhr.open(h,V,!0)}setRequestHeader(h,V){this._xhr.setRequestHeader(h,V)}getResponseHeader(h){return this._xhr.getResponseHeader(h)}}S.CustomRequestHeaders={},S.CustomRequestModifiers=new Array,S.SkipRequestModificationForBabylonCDN=!0}}]);