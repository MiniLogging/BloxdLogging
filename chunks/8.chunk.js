"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11074:(g,w,q)=>{q.d(w,{b:()=>G});var R=q(11034),o=q(11011),r=q(11076),S=q(11101),i=q(11023);class T{constructor(){let g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,g&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(g){this._zOffset!==g&&(this._zOffset=g,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(g){this._zOffsetUnits!==g&&(this._zOffsetUnits=g,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(g){this._cullFace!==g&&(this._cullFace=g,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(g){this._cull!==g&&(this._cull=g,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(g){this._depthFunc!==g&&(this._depthFunc=g,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(g){this._depthMask!==g&&(this._depthMask=g,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(g){this._depthTest!==g&&(this._depthTest=g,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(g){this._frontFace!==g&&(this._frontFace=g,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(g){this.isDirty&&(this._isCullDirty&&(this.cull?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(g.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(g.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(g.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(g.enable(g.POLYGON_OFFSET_FILL),g.polygonOffset(this.zOffset,this.zOffsetUnits)):g.disable(g.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(g.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class z{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(g){this._func!==g&&(this._func=g,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(g){this._funcRef!==g&&(this._funcRef=g,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(g){this._funcMask!==g&&(this._funcMask=g,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(g){this._opStencilFail!==g&&(this._opStencilFail=g,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(g){this._opDepthFail!==g&&(this._opDepthFail=g,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(g){this._opStencilDepthPass!==g&&(this._opStencilDepthPass=g,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(g){this._mask!==g&&(this._mask=g,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(g){this._enabled!==g&&(this._enabled=g,this._isStencilTestDirty=!0)}constructor(){let g=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,g&&this.reset()}reset(){var g;this.stencilMaterial=void 0,null===(g=this.stencilGlobal)||void 0===g||g.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(g){var w;if(!g)return;const q=!this.useStencilGlobalOnly&&!(null===(w=this.stencilMaterial)||void 0===w||!w.enabled);this.enabled=q?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=q?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=q?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=q?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=q?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=q?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=q?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=q?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(g.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(g.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(g.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class t{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=t.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=t.KEEP,this.opDepthFail=t.KEEP,this.opStencilDepthPass=t.REPLACE}get stencilFunc(){return this.func}set stencilFunc(g){this.func=g}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(g){this.funcRef=g}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(g){this.funcMask=g}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(g){this.opStencilFail=g}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(g){this.opDepthFail=g}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(g){this.opStencilDepthPass=g}get stencilMask(){return this.mask}set stencilMask(g){this.mask=g}get stencilTest(){return this.enabled}set stencilTest(g){this.enabled=g}}t.ALWAYS=519,t.KEEP=7680,t.REPLACE=7681;class m{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(g){this._alphaBlend!==g&&(this._alphaBlend=g,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(g,w,q,R){this._blendConstants[0]===g&&this._blendConstants[1]===w&&this._blendConstants[2]===q&&this._blendConstants[3]===R||(this._blendConstants[0]=g,this._blendConstants[1]=w,this._blendConstants[2]=q,this._blendConstants[3]=R,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(g,w,q,R){this._blendFunctionParameters[0]===g&&this._blendFunctionParameters[1]===w&&this._blendFunctionParameters[2]===q&&this._blendFunctionParameters[3]===R||(this._blendFunctionParameters[0]=g,this._blendFunctionParameters[1]=w,this._blendFunctionParameters[2]=q,this._blendFunctionParameters[3]=R,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(g,w){this._blendEquationParameters[0]===g&&this._blendEquationParameters[1]===w||(this._blendEquationParameters[0]=g,this._blendEquationParameters[1]=w,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(g){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?g.enable(g.BLEND):g.disable(g.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(g.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(g.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(g.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var e=q(11029),y=q(11103),L=q(11007),A=q(10998),l=q(11068),J=q(11118);function x(g,w){if((0,L.m)()){const{requestAnimationFrame:q}=w||window;if("function"===typeof q)return q(g)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(g);return setTimeout(g,16)}class G{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(g){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(g){g!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=g,this._depthCullingState.depthFunc=g?518:515)}setColorWrite(g){g!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=g)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(g){if(g)return this.isNDCHalfZRange?g.IS_NDC_HALF_ZRANGE="":delete g.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?g.USE_REVERSE_DEPTHBUFFER="":delete g.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?g.USE_EXACT_SRGB_CONVERSIONS="":delete g.USE_EXACT_SRGB_CONVERSIONS);{let g="";return this.isNDCHalfZRange&&(g+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(g&&(g+="\n"),g+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(g&&(g+="\n"),g+="#define USE_EXACT_SRGB_CONVERSIONS"),g}}_rebuildInternalTextures(){const g=this._internalTexturesCache.slice();for(const w of g)w._rebuild()}_rebuildRenderTargetWrappers(){const g=this._renderTargetWrapperCache.slice();for(const w of g)w._rebuild()}_rebuildEffects(){for(const g in this._compiledEffects){const w=this._compiledEffects[g];w._pipelineContext=null,w._prepareEffect()}r.Effect.ResetCache()}_rebuildGraphicsResources(){var g;this.wipeCaches(!0),this._rebuildEffects(),null===(g=this._rebuildComputeEffects)||void 0===g||g.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){o.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(g){setTimeout((()=>{this._clearEmptyResources();const w=this._depthCullingState.depthTest,q=this._depthCullingState.depthFunc,R=this._depthCullingState.depthMask,o=this._stencilState.stencilTest;g(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=w,this._depthCullingState.depthFunc=q,this._depthCullingState.depthMask=R,this._stencilState.stencilTest=o,this._flagContextRestored()}),0)}get L(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(g){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(g){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const g=new Uint8Array(4),w=[g,g,g,g,g,g];this._emptyCubeTexture=this.createRawCubeTexture(w,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(g){if(!g)return this._activeRenderLoops.length=0,void this._cancelFrame();const w=this._activeRenderLoops.indexOf(g);w>=0&&(this._activeRenderLoops.splice(w,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const g=this._frameHandler;if(this._frameHandler=0,(0,L.m)()){const{cancelAnimationFrame:w}=this.getHostWindow()||window;if("function"===typeof w)return w(g)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(g);return clearTimeout(g)}}uS(){this.onBeginFrameObservable.notifyObservers(this)}nS(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(g){this._maxFPS=g,void 0!==g&&(this._minFrameTime=g<=0?Number.MAX_VALUE:1e3/g)}_isOverFrameTime(g){if(!g||void 0===this._maxFPS)return!1;const w=g-this._lastFrameTime;return this._lastFrameTime=g,this._renderAccumulator+=w,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(g){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(g)){let g=!0;(this.L||!this.renderEvenInBackground&&this._windowIsBackground)&&(g=!1),g&&(this.uS(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.nS())}}_renderLoop(g){this._processFrame(g),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let g=0;g<this._activeRenderLoops.length;g++){(0,this._activeRenderLoops[g])()}}_renderViews(){return!1}_queueNewFrame(g,w){return x(g,w)}runRenderLoop(g){-1===this._activeRenderLoops.indexOf(g)&&(this._activeRenderLoops.push(g),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(g){this._depthCullingState.depthTest=g}setZOffset(g){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-g:g}getZOffset(){const g=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-g:g}setZOffsetUnits(g){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-g:g}getZOffsetUnits(){const g=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-g:g}getHostWindow(){return(0,L.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(g){this._compatibilityMode=!0}_rebuildTextures(){for(const g of this.scenes)g._rebuildTextures();for(const g of this._virtualScenes)g._rebuildTextures()}_releaseRenderTargetWrapper(g){const w=this._renderTargetWrapperCache.indexOf(g);-1!==w&&this._renderTargetWrapperCache.splice(w,1)}get currentViewport(){return this._cachedViewport}setViewport(g,w,q){const R=w||this.getRenderWidth(),o=q||this.getRenderHeight(),r=g.x||0,S=g.y||0;this._cachedViewport=g,this._viewport(r*R,S*o,R*g.width,o*g.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(g){return new Path2D(g)}get description(){let g=this.name+this.version;return this._caps.parallelShaderCompile&&(g+=" - Parallel shader compilation"),g}_createTextureBase(g,w,q,r){let S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,T=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,z=arguments.length>7?arguments[7]:void 0,t=arguments.length>8?arguments[8]:void 0,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,e=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,L=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,A=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,l=arguments.length>13?arguments[13]:void 0,x=arguments.length>14?arguments[14]:void 0,d=arguments.length>15?arguments[15]:void 0;const D="data:"===(g=g||"").substring(0,5),U="blob:"===g.substring(0,5),N=D&&-1!==g.indexOf(";base64,"),a=e||new y.d(this,1);a!==e&&(a.label=g.substring(0,60));const H=g;!this._transformTextureUrl||N||e||m||(g=this._transformTextureUrl(g)),H!==g&&(a._originalUrl=H);const C=g.lastIndexOf(".");let c=A||(C>-1?g.substring(C).toLowerCase():"");c.indexOf("?")>-1&&(c=c.split("?")[0]);const P=(0,J.b)(c,l);r&&r.addPendingData(a),a.url=g,a.generateMipMaps=!w,a.samplingMode=S,a.invertY=q,a._useSRGBBuffer=this._getUseSRGBBuffer(!!d,w),this._doNotHandleContextLost||(a._buffer=m);let j=null;i&&!e&&(j=a.onLoadedObservable.add(i)),e||this._internalTexturesCache.push(a);const M=(q,e)=>{r&&r.removePendingData(a),g===H?(j&&a.onLoadedObservable.remove(j),R.c.UseFallbackTexture&&g!==R.c.FallbackTexture&&this._createTextureBase(R.c.FallbackTexture,w,a.invertY,r,S,null,T,z,t,m,a),q=(q||"Unknown error")+(R.c.UseFallbackTexture?" - Fallback texture was used":""),a.onErrorObservable.notifyObservers({message:q,exception:e}),T&&T(q,e)):(o.d.Warn(`Failed to load ${g}, falling back to ${H}`),this._createTextureBase(H,w,a.invertY,r,S,i,T,z,t,m,a,L,A,l,x,d))};if(P){const w=async g=>{(await P).loadData(g,a,((g,w,q,R,o,i)=>{i?M("TextureLoader failed to load data"):z(a,c,r,{width:g,height:w},a.invertY,!q,R,(()=>(o(),!1)),S)}),x)};m?m instanceof ArrayBuffer?w(new Uint8Array(m)):ArrayBuffer.isView(m)?w(m):T&&T("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(g,(g=>{w(new Uint8Array(g))}),void 0,r?r.offlineProvider:void 0,!0,((g,w)=>{M("Unable to load "+(g&&g.responseURL,w))}))}else{const q=g=>{U&&!this._doNotHandleContextLost&&(a._buffer=g),z(a,c,r,g,a.invertY,w,!1,t,S)};!D||N?m&&("string"===typeof m.decoding||m.close)?q(m):G._FileToolsLoadImage(g||"",q,M,r?r.offlineProvider:null,l,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof m||m instanceof ArrayBuffer||ArrayBuffer.isView(m)||m instanceof Blob?G._FileToolsLoadImage(m,q,M,r?r.offlineProvider:null,l,a.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):m&&q(m)}return a}_rebuildBuffers(){for(const g of this._uniformBuffers)g._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,L.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const g in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,g)&&(this._boundTexturesCache[g]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(g){this._name=g}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(g){this._hardwareScalingLevel=g,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(g){this._doNotHandleContextLost=g}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(g,w,q){var o,r;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new T,this._stencilStateComposer=new z,this._stencilState=new t,this._alphaState=new m,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new A.b,this.onCanvasFocusObservable=new A.b,this.onNewSceneAddedObservable=new A.b,this.onResizeObservable=new A.b,this.onCanvasPointerOutObservable=new A.b,this.onEffectErrorObservable=new A.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new A.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=g=>this._renderLoop(g),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new A.b,this.onAfterShaderCompilationObservable=new A.b,this.onBeginFrameObservable=new A.b,this.onEndFrameObservable=new A.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new A.b,this.onContextRestoredObservable=new A.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.WS=new A.b,this.onReleaseEffectsObservable=new A.b,R.c.Instances.push(this),this.startTime=i.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,S.b.SetMatrixPrecision(!!w.useHighPrecisionMatrix),(0,L.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=q??!1,w.antialias=g??w.antialias,w.deterministicLockstep=w.deterministicLockstep??!1,w.lockstepMaxSteps=w.lockstepMaxSteps??4,w.timeStep=w.timeStep??1/60,w.stencil=w.stencil??!0,this._audioContext=(null===(o=w.audioEngineOptions)||void 0===o?void 0:o.audioContext)??null,this._audioDestination=(null===(r=w.audioEngineOptions)||void 0===r?void 0:r.audioDestination)??null,this.premultipliedAlpha=w.premultipliedAlpha??!0,this._doNotHandleContextLost=!!w.doNotHandleContextLost,this._isStencilEnable=!!w.stencil,this.useExactSrgbConversions=w.useExactSrgbConversions??!1;const e=(0,L.m)()&&window.devicePixelRatio||1,y=w.limitDeviceRatio||e;q=q||w.adaptToDeviceRatio||!1,this._hardwareScalingLevel=q?1/Math.min(y,e):1,this._lastDevicePixelRatio=e,this._creationOptions=w}resize(){let g,w,q=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const g=(0,L.m)()&&window.devicePixelRatio||1,w=this._lastDevicePixelRatio/g;this._lastDevicePixelRatio=g,this._hardwareScalingLevel*=w}if((0,L.m)()&&(0,L.h)())if(this._renderingCanvas){var R,o;const q=null===(R=(o=this._renderingCanvas).getBoundingClientRect)||void 0===R?void 0:R.call(o);g=this._renderingCanvas.clientWidth||(null===q||void 0===q?void 0:q.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,w=this._renderingCanvas.clientHeight||(null===q||void 0===q?void 0:q.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else g=window.innerWidth,w=window.innerHeight;else g=this._renderingCanvas?this._renderingCanvas.width:100,w=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(g/this._hardwareScalingLevel,w/this._hardwareScalingLevel,q)}setSize(g,w){let q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(g|=0,w|=0,!q&&this._renderingCanvas.width===g&&this._renderingCanvas.height===w)return!1;if(this._renderingCanvas.width=g,this._renderingCanvas.height=w,this.scenes){for(let g=0;g<this.scenes.length;g++){const w=this.scenes[g];for(let g=0;g<w.cameras.length;g++){w.cameras[g]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(g,w,q,R,o,r,S,i,T,z,t){throw(0,e.b)("engine.rawTexture")}createRawCubeTexture(g,w,q,R,o,r,S,i){throw(0,e.b)("engine.rawTexture")}createRawTexture3D(g,w,q,R,o,r,S,i,T,z,t){throw(0,e.b)("engine.rawTexture")}createRawTexture2DArray(g,w,q,R,o,r,S,i,T,z,t){throw(0,e.b)("engine.rawTexture")}_sharedInit(g){this._renderingCanvas=g}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const g=navigator.userAgent;this.hostInformation.isMobile=-1!==g.indexOf("Mobile")||-1!==g.indexOf("Mac")&&(0,L.h)()&&"ontouchend"in document},this._checkForMobile(),(0,L.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(g){return document.createElement("video")}_reportDrawCall(){var g;let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(g=this._drawCalls)||void 0===g||g.addCount(w,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(g,w){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(g,w){return createImageBitmap(g,w)}resizeImageBitmap(g,w,q){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(g){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(g,w){if("undefined"===typeof document)return new OffscreenCanvas(g,w);const q=document.createElement("canvas");return q.width=g,q.height=w,q}createCanvas(g,w){return G._CreateCanvas(g,w)}static _FileToolsLoadImage(g,w,q,R,o,r,S){throw(0,e.b)("FileTools")}_loadFile(g,w,q,R,o,r){const S=(0,l.n)(g,w,q,R,o,r);return this._activeRequests.push(S),S.onCompleteObservable.add((()=>{const g=this._activeRequests.indexOf(S);-1!==g&&this._activeRequests.splice(g,1)})),S}static _FileToolsLoadFile(g,w,q,R,o,r){if(l.c.loadFile)return l.c.loadFile(g,w,q,R,o,r);throw(0,e.b)("FileTools")}dispose(){var g;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(g=this.releaseComputeEffects)||void 0===g||g.call(this),r.Effect.ResetCache();for(const q of this._activeRequests)q.abort();this._boundRenderFunction=null,this.WS.notifyObservers(this),this.WS.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,L.m)()&&window.removeEventListener("resize",this._checkForMobile);const w=R.c.Instances.indexOf(this);w>=0&&R.c.Instances.splice(w,1),R.c.Instances.length||(R.c.OnEnginesDisposedObservable.notifyObservers(this),R.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(g){throw(0,e.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(g,w){for(let q=0;q<R.c.Instances.length;q++){const o=R.c.Instances[q];for(let q=0;q<o.scenes.length;q++)o.scenes[q].markAllMaterialsAsDirty(g,w)}}}G._RenderPassIdCounter=0,G._RescalePostProcessFactory=null,G.CollisionsEpsilon=.001,G.QueueNewFrame=x},11034:(g,w,q)=>{q.d(w,{c:()=>o});var R=q(10998);class o{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}o.Instances=[],o.OnEnginesDisposedObservable=new R.b,o._LastCreatedScene=null,o.UseFallbackTexture=!0,o.FallbackTexture=""},11101:(g,w,q)=>{q.d(w,{b:()=>R});class R{static SetMatrixPrecision(g){if(R.MatrixTrackPrecisionChange=!1,g&&!R.MatrixUse64Bits&&R.MatrixTrackedMatrices)for(let w=0;w<R.MatrixTrackedMatrices.length;++w){const g=R.MatrixTrackedMatrices[w],q=g.pS;g.pS=new Array(16);for(let w=0;w<16;++w)g.pS[w]=q[w]}R.MatrixUse64Bits=g,R.MatrixCurrentType=R.MatrixUse64Bits?Array:Float32Array,R.MatrixTrackedMatrices=null}}R.MatrixUse64Bits=!1,R.MatrixTrackPrecisionChange=!0,R.MatrixCurrentType=Float32Array,R.MatrixTrackedMatrices=[]},11118:(g,w,q)=>{q.d(w,{b:()=>S});var R=q(11011);const o=new Map;function r(g,w){(function(g){return o.delete(g)})(g)&&R.d.Warn(`Extension with the name '${g}' already exists`),o.set(g,w)}function S(g,w){"image/ktx"!==w&&"image/ktx2"!==w||(g=".ktx"),o.has(g)||(g.endsWith(".ies")&&r(".ies",(async()=>await q.e(15).then(q.bind(q,13546)).then((g=>new g._IESTextureLoader)))),g.endsWith(".dds")&&r(".dds",(async()=>await Promise.all([q.e(14),q.e(17),q.e(13),q.e(19),q.e(18),q.e(28)]).then(q.bind(q,13554)).then((g=>new g._DDSTextureLoader)))),g.endsWith(".basis")&&r(".basis",(async()=>await Promise.all([q.e(14),q.e(17),q.e(13),q.e(47)]).then(q.bind(q,13570)).then((g=>new g._BasisTextureLoader)))),g.endsWith(".env")&&r(".env",(async()=>await Promise.all([q.e(14),q.e(17),q.e(13),q.e(19),q.e(18),q.e(23),q.e(21),q.e(45),q.e(48)]).then(q.bind(q,13577)).then((g=>new g._ENVTextureLoader)))),g.endsWith(".hdr")&&r(".hdr",(async()=>await Promise.all([q.e(14),q.e(49)]).then(q.bind(q,13581)).then((g=>new g._HDRTextureLoader)))),(g.endsWith(".ktx")||g.endsWith(".ktx2"))&&(r(".ktx",(async()=>await q.e(30).then(q.bind(q,13583)).then((g=>new g._KTXTextureLoader)))),r(".ktx2",(async()=>await q.e(30).then(q.bind(q,13583)).then((g=>new g._KTXTextureLoader))))),g.endsWith(".tga")&&r(".tga",(async()=>await q.e(50).then(q.bind(q,13591)).then((g=>new g._TGATextureLoader)))),g.endsWith(".exr")&&r(".exr",(async()=>await q.e(16).then(q.bind(q,13594)).then((g=>new g._ExrTextureLoader)))));const R=o.get(g);return R?Promise.resolve(R(w)):null}},11103:(g,w,q)=>{q.d(w,{d:()=>S});var R,o=q(10998),r=q(11110);!function(g){g[g.Unknown=0]="Unknown",g[g.Url=1]="Url",g[g.Temp=2]="Temp",g[g.Raw=3]="Raw",g[g.Dynamic=4]="Dynamic",g[g.RenderTarget=5]="RenderTarget",g[g.MultiRenderTarget=6]="MultiRenderTarget",g[g.Cube=7]="Cube",g[g.CubeRaw=8]="CubeRaw",g[g.CubePrefiltered=9]="CubePrefiltered",g[g.Raw3D=10]="Raw3D",g[g.Raw2DArray=11]="Raw2DArray",g[g.DepthStencil=12]="DepthStencil",g[g.CubeRawRGBD=13]="CubeRawRGBD",g[g.Depth=14]="Depth"}(R||(R={}));class S extends r.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(g){this.generateMipMaps=g}get uniqueId(){return this._uniqueId}_setUniqueId(g){this._uniqueId=g}getEngine(){return this._engine}get source(){return this._source}constructor(g,w){let q=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new o.b,this.onErrorObservable=new o.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=g,this._source=w,this._uniqueId=S._Counter++,q||(this._hardwareTexture=g._createHardwareTexture())}incrementReferences(){this._references++}updateSize(g,w){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,g,w,q),this.width=g,this.height=w,this.depth=q,this.baseWidth=g,this.baseHeight=w,this.baseDepth=q,this._size=g*w*q}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const g=this.onRebuildCallback(this),w=w=>{w._swapAndDie(this,!1),this.isReady=g.isReady};return void(g.isAsync?g.proxy.then(w):w(g.proxy))}let g;switch(this.source){case 2:case 12:case 14:break;case 1:return void(g=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(g=>{g._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:g=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),g._swapAndDie(this,!1),this.isReady=!0;break;case 10:g=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),g._swapAndDie(this,!1),this.isReady=!0;break;case 11:g=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),g._swapAndDie(this,!1),this.isReady=!0;break;case 4:g=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),g._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(g=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{g._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:g=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),g._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return g=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(g=>{g&&g._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(g._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(g){var w;let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(w=this._hardwareTexture)||void 0===w||w.setUsage(g._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),g._hardwareTexture=this._hardwareTexture,q&&(g._isRGBD=this._isRGBD),this._lodTextureHigh&&(g._lodTextureHigh&&g._lodTextureHigh.dispose(),g._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(g._lodTextureMid&&g._lodTextureMid.dispose(),g._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(g._lodTextureLow&&g._lodTextureLow.dispose(),g._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(g._irradianceTexture&&g._irradianceTexture.dispose(),g._irradianceTexture=this._irradianceTexture);const R=this._engine.getLoadedTexturesCache();let o=R.indexOf(this);-1!==o&&R.splice(o,1),o=R.indexOf(g),-1===o&&R.push(g)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}S._Counter=0},11110:(g,w,q)=>{q.d(w,{b:()=>R});class R{get wrapU(){return this._cachedWrapU}set wrapU(g){this._cachedWrapU=g}get wrapV(){return this._cachedWrapV}set wrapV(g){this._cachedWrapV=g}get wrapR(){return this._cachedWrapR}set wrapR(g){this._cachedWrapR=g}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(g){this._cachedAnisotropicFilteringLevel=g}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(g){this._comparisonFunction=g}get useMipMaps(){return this._useMipMaps}set useMipMaps(g){this._useMipMaps=g}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=g,this._cachedWrapV=w,this._cachedWrapR=q,this._cachedAnisotropicFilteringLevel=R,this.samplingMode=o,this._comparisonFunction=r,this}compareSampler(g){return this._cachedWrapU===g._cachedWrapU&&this._cachedWrapV===g._cachedWrapV&&this._cachedWrapR===g._cachedWrapR&&this._cachedAnisotropicFilteringLevel===g._cachedAnisotropicFilteringLevel&&this.samplingMode===g.samplingMode&&this._comparisonFunction===g._comparisonFunction&&this._useMipMaps===g._useMipMaps}}},11017:(g,w,q)=>{q.d(w,{d:()=>r});var R=q(11011);const o=(g,w,q)=>g?g.getClassName&&"Mesh"===g.getClassName()?null:!g.getClassName||"SubMesh"!==g.getClassName()&&"PhysicsBody"!==g.getClassName()?g.clone?g.clone():Array.isArray(g)?g.slice():q&&"object"===typeof g?{...g}:null:g.clone(w):null;class r{static DeepCopy(g,w,q,r){let S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=function(g){const w=[];do{const q=Object.getOwnPropertyNames(g);for(const g of q)-1===w.indexOf(g)&&w.push(g)}while(g=Object.getPrototypeOf(g));return w}(g);for(const z of i){if("_"===z[0]&&(!r||-1===r.indexOf(z)))continue;if(z.endsWith("Observable"))continue;if(q&&-1!==q.indexOf(z))continue;const i=g[z],t=typeof i;if("function"!==t)try{if("object"===t)if(i instanceof Uint8Array)w[z]=Uint8Array.from(i);else if(i instanceof Array){if(w[z]=[],i.length>0)if("object"==typeof i[0])for(let g=0;g<i.length;g++){const q=o(i[g],w,S);-1===w[z].indexOf(q)&&w[z].push(q)}else w[z]=i.slice(0)}else w[z]=o(i,w,S);else w[z]=i}catch(T){R.d.Warn(T.message)}}}}},11049:(g,w,q)=>{q.d(w,{b:()=>R,c:()=>o,f:()=>r});class R extends Error{}R._setPrototypeOf=Object.setPrototypeOf||((g,w)=>(g.__proto__=w,g));const o={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class r extends R{constructor(g,w,q){super(g),this.errorCode=w,this.innerError=q,this.name="RuntimeError",R._setPrototypeOf(this,r.prototype)}}},11043:(g,w,q)=>{q.d(w,{b:()=>M,e:()=>G,g:()=>C,h:()=>P,l:()=>a,k:()=>l,n:()=>U,p:()=>N,q:()=>H,t:()=>d});var R=q(11032),o=q(11007),r=q(10998);class S{}S.FilesToLoad={};var i=q(11049),T=q(11056),z=q(11062),t=q(11034),m=q(11011),e=q(11071),y=q(11068),L=q(11074);const A=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class l extends i.f{constructor(g,w){super(g,i.c.LoadFileError),this.name="LoadFileError",i.b._setPrototypeOf(this,l.prototype),w instanceof R.e?this.request=w:this.file=w}}class J extends i.f{constructor(g,w){super(g,i.c.RequestFileError),this.request=w,this.name="RequestFileError",i.b._setPrototypeOf(this,J.prototype)}}class x extends i.f{constructor(g,w){super(g,i.c.ReadFileError),this.file=w,this.name="ReadFileError",i.b._setPrototypeOf(this,x.prototype)}}const G={DefaultRetryStrategy:class{static ExponentialBackoff(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(q,R,o)=>0!==R.status||o>=g||-1!==q.indexOf("file:")?-1:Math.pow(2,o)*w}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:g=>g,ScriptBaseUrl:"",ScriptPreprocessUrl:g=>g,CleanUrl:g=>g=g.replace(/#/gm,"%23")},d=(g,w)=>{if((!g||0!==g.indexOf("data:"))&&G.CorsBehavior)if("string"===typeof G.CorsBehavior||G.CorsBehavior instanceof String)w.crossOrigin=G.CorsBehavior;else{const q=G.CorsBehavior(g);q&&(w.crossOrigin=q)}},D={getRequiredSize:null},U=function(g,w,q,o){let r,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",z=arguments.length>5?arguments[5]:void 0,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===m||void 0===m||!m._features.forceBitmapOverHTMLImageElement))return q("LoadImage is only supported in web or BabylonNative environments."),null;let e=!1;g instanceof ArrayBuffer||ArrayBuffer.isView(g)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(r=URL.createObjectURL(new Blob([g],{type:i})),e=!0):r=`data:${i};base64,`+(0,T.n)(g):g instanceof Blob?(r=URL.createObjectURL(g),e=!0):(r=G.CleanUrl(g),r=G.PreprocessUrl(r));const y=w=>{if(q){const R=r||g.toString();q(`Error while trying to load image: ${0===R.indexOf("http")||R.length<=128?R:R.slice(0,128)+"..."}`,w)}};if(null!==m&&void 0!==m&&m._features.forceBitmapOverHTMLImageElement)return a(r,(R=>{m.createImageBitmap(new Blob([R],{type:i}),{premultiplyAlpha:"none",...z}).then((g=>{w(g),e&&URL.revokeObjectURL(r)})).catch((w=>{q&&q("Error while trying to load image: "+g,w)}))}),void 0,o||void 0,!0,((g,w)=>{y(w)})),null;const L=new Image;if(D.getRequiredSize){const w=D.getRequiredSize(g);w.width&&(L.width=w.width),w.height&&(L.height=w.height)}d(r,L);const A=[],l=()=>{for(const g of A)g.target.removeEventListener(g.name,g.handler);A.length=0};A.push({target:L,name:"load",handler:()=>{l(),w(L),e&&L.src&&URL.revokeObjectURL(L.src)}}),A.push({target:L,name:"error",handler:g=>{l(),y(g),e&&L.src&&URL.revokeObjectURL(L.src)}}),A.push({target:document,name:"securitypolicyviolation",handler:g=>{if(g.blockedURI!==L.src||"ZS"===g.disposition)return;l();const w=new Error(`CSP violation of policy ${g.effectiveDirective} ${g.blockedURI}. Current policy is ${g.originalPolicy}`);t.c.UseFallbackTexture=!1,y(w),e&&L.src&&URL.revokeObjectURL(L.src),L.src=""}}),(()=>{for(const g of A)g.target.addEventListener(g.name,g.handler)})();const J="blob:"===r.substring(0,5),x="data:"===r.substring(0,5),U=()=>{J||x||!R.e.IsCustomRequestAvailable?L.src=r:a(r,((g,w,q)=>{const R=new Blob([g],{type:!i&&q?q:i}),o=URL.createObjectURL(R);e=!0,L.src=o}),void 0,o||void 0,!0,((g,w)=>{y(w)}))},N=()=>{o&&o.loadImage(r,L)};if(!J&&!x&&o&&o.enableTexturesOffline)o.open(N,U);else{if(-1!==r.indexOf("file:")){const g=decodeURIComponent(r.substring(5).toLowerCase());if(S.FilesToLoad[g]&&"undefined"!==typeof URL){try{let w;try{w=URL.createObjectURL(S.FilesToLoad[g])}catch(H){w=URL.createObjectURL(S.FilesToLoad[g])}L.src=w,e=!0}catch(C){L.src=""}return L}}U()}return L},N=(g,w,q,R,o)=>{const S=new FileReader,i={onCompleteObservable:new r.b,abort:()=>S.abort()};return S.onloadend=()=>i.onCompleteObservable.notifyObservers(i),o&&(S.onerror=()=>{o(new x(`Unable to read ${g.name}`,g))}),S.onload=g=>{w(g.target.result)},q&&(S.onprogress=q),R?S.readAsArrayBuffer(g):S.readAsText(g),i},a=(g,w,q,R,o,T,z)=>{if(g.name)return N(g,w,q,o,T?g=>{T(void 0,g)}:void 0);const t=g;if(-1!==t.indexOf("file:")){let g=decodeURIComponent(t.substring(5).toLowerCase());0===g.indexOf("./")&&(g=g.substring(2));const R=S.FilesToLoad[g];if(R)return N(R,w,q,o,T?g=>T(void 0,new l(g.message,g.file)):void 0)}const{match:y,type:L}=j(t);if(y){const g={onCompleteObservable:new r.b,abort:()=>()=>{}};try{const g=o?M(t):V(t);w(g,void 0,L)}catch(i){T?T(void 0,i):m.d.Error(i.message||"Failed to parse the Data URL")}return e.e.SetImmediate((()=>{g.onCompleteObservable.notifyObservers(g)})),g}return H(t,((g,q)=>{w(g,null===q||void 0===q?void 0:q.responseURL,null===q||void 0===q?void 0:q.getResponseHeader("content-type"))}),q,R,o,T?g=>{T(g.request,new l(g.message,g.request))}:void 0,z)},H=(g,w,q,S,i,T,z)=>{g=G.CleanUrl(g),g=G.PreprocessUrl(g);const t=G.BaseUrl+g;let e=!1;const y={onCompleteObservable:new r.b,abort:()=>e=!0},L=()=>{let g,r=new R.e,S=null;const L=()=>{r&&(q&&r.removeEventListener("progress",q),g&&r.removeEventListener("readystatechange",g),r.removeEventListener("loadend",A))};let A=()=>{L(),y.onCompleteObservable.notifyObservers(y),y.onCompleteObservable.clear(),q=void 0,g=null,A=null,T=void 0,z=void 0,w=void 0};y.abort=()=>{e=!0,A&&A(),r&&r.readyState!==(XMLHttpRequest.DONE||4)&&r.abort(),null!==S&&(clearTimeout(S),S=null),r=null};const l=g=>{const w=g.message||"Unknown error";T&&r?T(new J(w,r)):m.d.Error(w)},x=m=>{if(r){if(r.open("GET",t),z)try{z(r)}catch(y){return void l(y)}i&&(r.responseType="arraybuffer"),q&&r.addEventListener("progress",q),A&&r.addEventListener("loadend",A),g=()=>{if(!e&&r&&r.readyState===(XMLHttpRequest.DONE||4)){if(g&&r.removeEventListener("readystatechange",g),r.status>=200&&r.status<300||0===r.status&&(!(0,o.m)()||c())){const g=i?r.response:r.responseText;if(null!==g){try{w&&w(g,r)}catch(y){l(y)}return}}const q=G.DefaultRetryStrategy;if(q){const g=q(t,r,m);if(-1!==g)return L(),r=new R.e,void(S=setTimeout((()=>x(m+1)),g))}const z=new J("Error status: "+r.status+" "+r.statusText+" - Unable to load "+t,r);T&&T(z)}},r.addEventListener("readystatechange",g),r.send()}};x(0)};if(S&&S.enableSceneOffline){const R=g=>{g&&g.status>400?T&&T(g):L()},o=()=>{S&&S.loadFile(G.BaseUrl+g,(g=>{!e&&w&&w(g),y.onCompleteObservable.notifyObservers(y)}),q?g=>{!e&&q&&q(g)}:void 0,R,i)};S.open(o,R)}else L();return y},C=g=>{const{match:w,type:q}=j(g);if(w)return q||void 0;const R=g.lastIndexOf(".");switch(g.substring(R+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"IS":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},c=()=>"undefined"!==typeof location&&"file:"===location.protocol,P=g=>A.test(g),j=g=>{const w=A.exec(g);if(null===w||0===w.length)return{match:!1,type:""};return{match:!0,type:w[0].replace("data:","").replace("base64,","")}};function M(g){return(0,T.d)(g.split(",")[1])}const V=g=>(0,T.g)(g.split(",")[1]);let s;L.b._FileToolsLoadImage=U,y.c.loadFile=a,z.n.loadFile=a;((g,w,q,R,o,r,S,i,T,z)=>{s={DecodeBase64UrlToBinary:g,DecodeBase64UrlToString:w,DefaultRetryStrategy:q.DefaultRetryStrategy,BaseUrl:q.BaseUrl,CorsBehavior:q.CorsBehavior,PreprocessUrl:q.PreprocessUrl,IsBase64DataUrl:R,IsFileURL:o,LoadFile:r,LoadImage:S,ReadFile:i,RequestFile:T,SetCorsBehavior:z},Object.defineProperty(s,"DefaultRetryStrategy",{get:function(){return q.DefaultRetryStrategy},set:function(g){q.DefaultRetryStrategy=g}}),Object.defineProperty(s,"BaseUrl",{get:function(){return q.BaseUrl},set:function(g){q.BaseUrl=g}}),Object.defineProperty(s,"PreprocessUrl",{get:function(){return q.PreprocessUrl},set:function(g){q.PreprocessUrl=g}}),Object.defineProperty(s,"CorsBehavior",{get:function(){return q.CorsBehavior},set:function(g){q.CorsBehavior=g}})})(M,V,G,P,c,a,U,N,H,d)},11136:(g,w,q)=>{function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(g=>{const w=16*Math.random()|0;return("x"===g?w:3&w|8).toString(16)}))}q.d(w,{c:()=>R})},11126:(g,w,q)=>{q.d(w,{d:()=>r});var R=q(11011),o=q(11128);class r{static Instantiate(g){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[g])return this.RegisteredExternalClasses[g];const w=(0,o.e)(g);if(w)return w;R.d.Warn(g+" not found, you may have missed an import.");const q=g.split(".");let r=window||this;for(let R=0,o=q.length;R<o;R++)r=r[q[R]];return"function"!==typeof r?null:r}}r.RegisteredExternalClasses={}},11023:(g,w,q)=>{q.d(w,{e:()=>o});var R=q(11007);class o{static get Now(){return(0,R.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11056:(g,w,q)=>{q.d(w,{d:()=>S,g:()=>r,k:()=>R,n:()=>o});const R=g=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(g);let w="";for(let q=0;q<g.byteLength;q++)w+=String.fromCharCode(g[q]);return w},o=g=>{const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let q,R,o,r,S,i,T,z="",t=0;const m=ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g);for(;t<m.length;)q=m[t++],R=t<m.length?m[t++]:Number.NaN,o=t<m.length?m[t++]:Number.NaN,r=q>>2,S=(3&q)<<4|R>>4,i=(15&R)<<2|o>>6,T=63&o,isNaN(R)?i=T=64:isNaN(o)&&(T=64),z+=w.charAt(r)+w.charAt(S)+w.charAt(i)+w.charAt(T);return z},r=g=>atob(g),S=g=>{const w=r(g),q=w.length,R=new Uint8Array(new ArrayBuffer(q));for(let o=0;o<q;o++)R[o]=w.charCodeAt(o);return R.buffer}},11139:(g,w,q)=>{function R(g){let w=1;do{w*=2}while(w<g);return w===g}function o(g,w,q){return g*(1-q)+w*q}function r(g){const w=S(g),q=i(g);return w-g>g-q?q:w}function S(g){return g--,g|=g>>1,g|=g>>2,g|=g>>4,g|=g>>8,g|=g>>16,++g}function i(g){return g|=g>>1,g|=g>>2,g|=g>>4,g|=g>>8,(g|=g>>16)-(g>>1)}function T(g,w){let q;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:q=i(g);break;case 2:q=r(g);break;default:q=S(g)}return Math.min(q,w)}q.d(w,{e:()=>i,h:()=>T,j:()=>R,l:()=>o,n:()=>r})},10991:(g,w,q)=>{q.r(w),q.d(w,{AsyncLoop:()=>x,Tools:()=>l,className:()=>J});var R=q(10998),o=q(11007),r=q(11011),S=q(11017),i=q(11023),T=q(11029),z=q(11032),t=q(11034),m=q(11043),e=q(11071),y=q(11126),L=q(11136),A=q(11139);class l{static get BaseUrl(){return m.e.BaseUrl}static set BaseUrl(g){m.e.BaseUrl=g}static get CleanUrl(){return m.e.CleanUrl}static set CleanUrl(g){m.e.CleanUrl=g}static IsAbsoluteUrl(g){return 0===g.indexOf("//")||-1!==g.indexOf("://")&&(-1!==g.indexOf(".")&&(-1!==g.indexOf("/")&&(!(g.indexOf(":")>g.indexOf("/"))&&(g.indexOf("://")<g.indexOf(".")||(0===g.indexOf("data:")||0===g.indexOf("blob:"))))))}static set ScriptBaseUrl(g){m.e.ScriptBaseUrl=g}static get ScriptBaseUrl(){return m.e.ScriptBaseUrl}static set CDNBaseUrl(g){l.ScriptBaseUrl=g,l.AssetBaseUrl=g}static set ScriptPreprocessUrl(g){m.e.ScriptPreprocessUrl=g}static get ScriptPreprocessUrl(){return m.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return m.e.DefaultRetryStrategy}static set DefaultRetryStrategy(g){m.e.DefaultRetryStrategy=g}static get CorsBehavior(){return m.e.CorsBehavior}static set CorsBehavior(g){m.e.CorsBehavior=g}static get UseFallbackTexture(){return t.c.UseFallbackTexture}static set UseFallbackTexture(g){t.c.UseFallbackTexture=g}static get RegisteredExternalClasses(){return y.d.RegisteredExternalClasses}static set RegisteredExternalClasses(g){y.d.RegisteredExternalClasses=g}static get fallbackTexture(){return t.c.FallbackTexture}static set fallbackTexture(g){t.c.FallbackTexture=g}static FetchToRef(g,w,q,R,o,r){const S=4*((Math.abs(g)*q%q|0)+(Math.abs(w)*R%R|0)*q);r.r=o[S]/255,r.g=o[S+1]/255,r.b=o[S+2]/255,r.a=o[S+3]/255}static Mix(g,w,q){return 0}static Instantiate(g){return y.d.Instantiate(g)}static SetImmediate(g){e.e.SetImmediate(g)}static IsExponentOfTwo(g){return!0}static FloatRound(g){return Math.fround(g)}static GetFilename(g){const w=g.lastIndexOf("/");return w<0?g:g.substring(w+1)}static GetFolderPath(g){let w=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const q=g.lastIndexOf("/");return q<0?w?g:"":g.substring(0,q+1)}static ToDegrees(g){return 180*g/Math.PI}static ToRadians(g){return g*Math.PI/180}static SmoothAngleChange(g,w){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const R=this.ToRadians(g),o=this.ToRadians(w);return this.ToDegrees(Math.atan2((1-q)*Math.sin(o)+q*Math.sin(R),(1-q)*Math.cos(o)+q*Math.cos(R)))}static MakeArray(g,w){return!0===w||void 0!==g&&null!=g?Array.isArray(g)?g:[g]:null}static GetPointerPrefix(g){return(0,o.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(g,w){(0,m.t)(g,w)}static SetReferrerPolicyBehavior(g,w){w.referrerPolicy=g}static get PreprocessUrl(){return m.e.PreprocessUrl}static set PreprocessUrl(g){m.e.PreprocessUrl=g}static LoadImage(g,w,q,R,o,r){return(0,m.n)(g,w,q,R,o,r)}static LoadFile(g,w,q,R,o,r){return(0,m.l)(g,w,q,R,o,r)}static async LoadFileAsync(g){let w=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((q,R)=>{(0,m.l)(g,(g=>{q(g)}),void 0,void 0,w,((g,w)=>{R(w)}))}))}static GetAssetUrl(g){if(!g)return"";if(l.AssetBaseUrl&&g.startsWith(l._DefaultAssetsUrl)){const w="/"===l.AssetBaseUrl[l.AssetBaseUrl.length-1]?l.AssetBaseUrl.substring(0,l.AssetBaseUrl.length-1):l.AssetBaseUrl;return g.replace(l._DefaultAssetsUrl,w)}return g}static GetBabylonScriptURL(g,w){if(!g)return"";if(l.ScriptBaseUrl&&g.startsWith(l._DefaultCdnUrl)){const w="/"===l.ScriptBaseUrl[l.ScriptBaseUrl.length-1]?l.ScriptBaseUrl.substring(0,l.ScriptBaseUrl.length-1):l.ScriptBaseUrl;g=g.replace(l._DefaultCdnUrl,w)}return g=l.ScriptPreprocessUrl(g),w&&(g=l.GetAbsoluteUrl(g)),g}static LoadBabylonScript(g,w,q,R){g=l.GetBabylonScriptURL(g),l.LoadScript(g,w,q)}static async LoadBabylonScriptAsync(g){return g=l.GetBabylonScriptURL(g),await l.LoadScriptAsync(g)}static LoadScript(g,w,q,R){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(g),w&&w()}catch(T){null===q||void 0===q||q(`Unable to load script '${g}' in worker`,T)}return}if(!(0,o.m)())return void(null===q||void 0===q||q(`Cannot load script '${g}' outside of a window or a worker`));const S=document.getElementsByTagName("head")[0],i=document.createElement("script");r?(i.setAttribute("type","module"),i.innerText=g):(i.setAttribute("type","text/javascript"),i.setAttribute("src",g)),R&&(i.id=R),i.onload=()=>{w&&w()},i.onerror=w=>{q&&q(`Unable to load script '${g}'`,w)},S.appendChild(i)}static async LoadScriptAsync(g,w){return await new Promise(((q,R)=>{this.LoadScript(g,(()=>{q()}),((g,w)=>{R(w||new Error(g))}),w)}))}static ReadFileAsDataURL(g,w,q){const o=new FileReader,r={onCompleteObservable:new R.b,abort:()=>o.abort()};return o.onloadend=()=>{r.onCompleteObservable.notifyObservers(r)},o.onload=g=>{w(g.target.result)},o.onprogress=q,o.readAsDataURL(g),r}static ReadFile(g,w,q,R,o){return(0,m.p)(g,w,q,R,o)}static FileAsURL(g){const w=new Blob([g]);return window.URL.createObjectURL(w)}static Format(g){let w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return g.toFixed(w)}static DeepCopy(g,w,q,R){S.d.DeepCopy(g,w,q,R)}static IsEmpty(g){for(const w in g)if(Object.prototype.hasOwnProperty.call(g,w))return!1;return!0}static RegisterTopRootEvents(g,w){for(let R=0;R<w.length;R++){const o=w[R];g.addEventListener(o.name,o.handler,!1);try{window.parent&&window.parent.addEventListener(o.name,o.handler,!1)}catch(q){}}}static UnregisterTopRootEvents(g,w){for(let R=0;R<w.length;R++){const o=w[R];g.removeEventListener(o.name,o.handler);try{g.parent&&g.parent.removeEventListener(o.name,o.handler)}catch(q){}}}static async DumpFramebuffer(g,w,q,R){throw(0,T.b)("DumpTools")}static DumpData(g,w,q,R){throw(0,T.b)("DumpTools")}static async DumpDataAsync(g,w,q){throw(0,T.b)("DumpTools")}static _IsOffScreenCanvas(g){return void 0!==g.convertToBlob}static ToBlob(g,w){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",R=arguments.length>3?arguments[3]:void 0;l._IsOffScreenCanvas(g)||g.toBlob||(g.toBlob=function(g,w,q){setTimeout((()=>{const R=atob(this.toDataURL(w,q).split(",")[1]),o=R.length,r=new Uint8Array(o);for(let g=0;g<o;g++)r[g]=R.charCodeAt(g);g(new Blob([r]))}))}),l._IsOffScreenCanvas(g)?g.convertToBlob({type:q,quality:R}).then((g=>w(g))):g.toBlob((function(g){w(g)}),q,R)}static DownloadBlob(g,w){if("download"in document.createElement("a")){if(!w){const g=new Date;w="screenshot_"+((g.getFullYear()+"-"+(g.getMonth()+1)).slice(2)+"-"+g.getDate()+"_"+g.getHours()+"-"+("0"+g.getMinutes()).slice(-2))+".png"}l.Download(g,w)}else if(g&&"undefined"!==typeof URL){const w=URL.createObjectURL(g),q=window.open("");if(!q)return;const R=q.document.createElement("img");R.onload=function(){URL.revokeObjectURL(w)},R.src=w,q.document.body.appendChild(R)}}static EncodeScreenshotCanvasData(g,w){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",R=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("string"!==typeof R&&w){if(w){if(l._IsOffScreenCanvas(g))return void g.convertToBlob({type:q,quality:o}).then((g=>{const q=new FileReader;q.readAsDataURL(g),q.onloadend=()=>{const g=q.result;w(g)}}));const R=g.toDataURL(q,o);w(R)}}else this.ToBlob(g,(function(g){g&&l.DownloadBlob(g,R),w&&w("")}),q,o)}static Download(g,w){if("undefined"===typeof URL)return;const q=window.URL.createObjectURL(g),R=document.createElement("a");document.body.appendChild(R),R.style.display="none",R.href=q,R.download=w,R.addEventListener("click",(()=>{R.parentElement&&R.parentElement.removeChild(R)})),R.click(),window.URL.revokeObjectURL(q)}static BackCompatCameraNoPreventDefault(g){return"boolean"===typeof g[0]?g[0]:"boolean"===typeof g[1]&&g[1]}static CreateScreenshot(g,w,q,R){throw(0,T.b)("ScreenshotTools")}static async CreateScreenshotAsync(g,w,q){throw(0,T.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(g,w,q,R){throw(0,T.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(g,w,q){throw(0,T.b)("ScreenshotTools")}static RandomId(){return(0,L.c)()}static IsBase64(g){return(0,m.h)(g)}static DecodeBase64(g){return(0,m.b)(g)}static get errorsCount(){return r.d.errorsCount}static Log(g){r.d.Log(g)}static Warn(g){r.d.Warn(g)}static Error(g){r.d.Error(g)}static get LogCache(){return r.d.LogCache}static ClearLogCache(){r.d.ClearLogCache()}static set LogLevels(g){r.d.LogLevels=g}static set PerformanceLogLevel(g){return(g&l.PerformanceUserMarkLogLevel)===l.PerformanceUserMarkLogLevel?(l.StartPerformanceCounter=l._StartUserMark,void(l.EndPerformanceCounter=l._EndUserMark)):(g&l.PerformanceConsoleLogLevel)===l.PerformanceConsoleLogLevel?(l.StartPerformanceCounter=l._StartPerformanceConsole,void(l.EndPerformanceCounter=l._EndPerformanceConsole)):(l.StartPerformanceCounter=l._StartPerformanceCounterDisabled,void(l.EndPerformanceCounter=l._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(g,w){}static _EndPerformanceCounterDisabled(g,w){}static _StartUserMark(g){let w=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!l._Performance){if(!(0,o.m)())return;l._Performance=window.performance}w&&l._Performance.mark&&l._Performance.mark(g+"-Begin")}static _EndUserMark(g){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&l._Performance.mark&&(l._Performance.mark(g+"-End"),l._Performance.measure(g,g+"-Begin",g+"-End"))}static _StartPerformanceConsole(g){let w=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w&&(l._StartUserMark(g,w),console.time&&console.time(g))}static _EndPerformanceConsole(g){let w=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];w&&(l._EndUserMark(g,w),console.timeEnd(g))}static get Now(){return i.e.Now}static GetClassName(g){let w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],q=null;if(!w&&g.getClassName)q=g.getClassName();else{if(g instanceof Object){q=(w?g:Object.getPrototypeOf(g)).constructor.__bjsclassName__}q||(q=typeof g)}return q}static First(g,w){for(const q of g)if(w(q))return q;return null}static getFullClassName(g){let w=arguments.length>1&&void 0!==arguments[1]&&arguments[1],q=null,R=null;if(!w&&g.getClassName)q=g.getClassName();else{if(g instanceof Object){const o=w?g:Object.getPrototypeOf(g);q=o.constructor.__bjsclassName__,R=o.constructor.__bjsmoduleName__}q||(q=typeof g)}return q?(null!=R?R+".":"")+q:null}static async DelayAsync(g){await new Promise((w=>{setTimeout((()=>{w()}),g)}))}static IsSafari(){return!!(0,o.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function J(g,w){return q=>{q.__bjsclassName__=g,q.__bjsmoduleName__=null!=w?w:null}}l.AssetBaseUrl="",l.UseCustomRequestHeaders=!1,l.CustomRequestHeaders=z.e.CustomRequestHeaders,l.GetDOMTextContent=o.d,l._DefaultCdnUrl="https://cdn.babylonjs.com",l._DefaultAssetsUrl="https://assets.babylonjs.com/core",l.GetAbsoluteUrl="object"===typeof document?g=>{const w=document.createElement("a");return w.href=g,w.href}:"function"===typeof URL&&"object"===typeof location?g=>new URL(g,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},l.NoneLogLevel=r.d.NoneLogLevel,l.MessageLogLevel=r.d.MessageLogLevel,l.WarningLogLevel=r.d.WarningLogLevel,l.ErrorLogLevel=r.d.ErrorLogLevel,l.AllLogLevel=r.d.AllLogLevel,l.IsWindowObjectExist=o.m,l.PerformanceNoneLogLevel=0,l.PerformanceUserMarkLogLevel=1,l.PerformanceConsoleLogLevel=2,l.StartPerformanceCounter=l._StartPerformanceCounterDisabled,l.EndPerformanceCounter=l._EndPerformanceCounterDisabled;class x{constructor(g,w,q){let R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=g,this.index=R-1,this._done=!1,this._fn=w,this._successCallback=q}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(g,w,q){const R=new x(g,w,q,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return R.executeNext(),R}static SyncAsyncForLoop(g,w,q,R,o){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return x.Run(Math.ceil(g/w),(R=>{o&&o()?R.breakLoop():setTimeout((()=>{for(let r=0;r<w;++r){const S=R.index*w+r;if(S>=g)break;if(q(S),o&&o()){R.breakLoop();break}}R.executeNext()}),r)}),R)}}l.Mix=A.l,l.IsExponentOfTwo=A.j,t.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11128:(g,w,q)=>{q.d(w,{e:()=>r,g:()=>o});const R={};function o(g,w){R[g]=w}function r(g){return R[g]}},11032:(g,w,q)=>{q.d(w,{e:()=>R});class R{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(R.CustomRequestHeaders).length>0||R.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const g in R.CustomRequestHeaders){const w=R.CustomRequestHeaders[g];w&&this._xhr.setRequestHeader(g,w)}}_shouldSkipRequestModifications(g){return R.SkipRequestModificationForBabylonCDN&&(g.includes("preview.babylonjs.com")||g.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(g){this._xhr.onprogress=g}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(g){this._xhr.responseType=g}get timeout(){return this._xhr.timeout}set timeout(g){this._xhr.timeout=g}addEventListener(g,w,q){this._xhr.addEventListener(g,w,q)}removeEventListener(g,w,q){this._xhr.removeEventListener(g,w,q)}abort(){this._xhr.abort()}send(g){R.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(g)}open(g,w){for(const q of R.CustomRequestModifiers){if(this._shouldSkipRequestModifications(w))return;w=q(this._xhr,w)||w}w=(w=w.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=w,this._xhr.open(g,w,!0)}setRequestHeader(g,w){this._xhr.setRequestHeader(g,w)}getResponseHeader(g){return this._xhr.getResponseHeader(g)}}R.CustomRequestHeaders={},R.CustomRequestModifiers=new Array,R.SkipRequestModificationForBabylonCDN=!0}}]);