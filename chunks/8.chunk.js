"use strict";(self.fyqbdzs5tyo=self.fyqbdzs5tyo||[]).push([[8],{11137:(V,I,A)=>{A.d(I,{e:()=>o});var B=A(11097),F=A(11064),E=A(11143),Y=A(11164),H=A(11075);class c{constructor(){let V=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,V&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(V){this._zOffset!==V&&(this._zOffset=V,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(V){this._zOffsetUnits!==V&&(this._zOffsetUnits=V,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(V){this._cullFace!==V&&(this._cullFace=V,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(V){this._cull!==V&&(this._cull=V,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(V){this._depthFunc!==V&&(this._depthFunc=V,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(V){this._depthMask!==V&&(this._depthMask=V,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(V){this._depthTest!==V&&(this._depthTest=V,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(V){this._frontFace!==V&&(this._frontFace=V,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(V){this.isDirty&&(this._isCullDirty&&(this.cull?V.enable(V.CULL_FACE):V.disable(V.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(V.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(V.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?V.enable(V.DEPTH_TEST):V.disable(V.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(V.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(V.enable(V.POLYGON_OFFSET_FILL),V.polygonOffset(this.zOffset,this.zOffsetUnits)):V.disable(V.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(V.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class b{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(V){this._func!==V&&(this._func=V,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(V){this._funcRef!==V&&(this._funcRef=V,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(V){this._funcMask!==V&&(this._funcMask=V,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(V){this._opStencilFail!==V&&(this._opStencilFail=V,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(V){this._opDepthFail!==V&&(this._opDepthFail=V,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(V){this._opStencilDepthPass!==V&&(this._opStencilDepthPass=V,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(V){this._mask!==V&&(this._mask=V,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(V){this._enabled!==V&&(this._enabled=V,this._isStencilTestDirty=!0)}constructor(){let V=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,V&&this.reset()}reset(){var V;this.stencilMaterial=void 0,null===(V=this.stencilGlobal)||void 0===V||V.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(V){var I;if(!V)return;const A=!this.useStencilGlobalOnly&&!(null===(I=this.stencilMaterial)||void 0===I||!I.enabled);this.enabled=A?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=A?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=A?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=A?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=A?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=A?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=A?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=A?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?V.enable(V.STENCIL_TEST):V.disable(V.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(V.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(V.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(V.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class X{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=X.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=X.KEEP,this.opDepthFail=X.KEEP,this.opStencilDepthPass=X.REPLACE}get stencilFunc(){return this.func}set stencilFunc(V){this.func=V}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(V){this.funcRef=V}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(V){this.funcMask=V}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(V){this.opStencilFail=V}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(V){this.opDepthFail=V}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(V){this.opStencilDepthPass=V}get stencilMask(){return this.mask}set stencilMask(V){this.mask=V}get stencilTest(){return this.enabled}set stencilTest(V){this.enabled=V}}X.ALWAYS=519,X.KEEP=7680,X.REPLACE=7681;class P{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(V){this._alphaBlend!==V&&(this._alphaBlend=V,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(V,I,A,B){this._blendConstants[0]===V&&this._blendConstants[1]===I&&this._blendConstants[2]===A&&this._blendConstants[3]===B||(this._blendConstants[0]=V,this._blendConstants[1]=I,this._blendConstants[2]=A,this._blendConstants[3]=B,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(V,I,A,B){this._blendFunctionParameters[0]===V&&this._blendFunctionParameters[1]===I&&this._blendFunctionParameters[2]===A&&this._blendFunctionParameters[3]===B||(this._blendFunctionParameters[0]=V,this._blendFunctionParameters[1]=I,this._blendFunctionParameters[2]=A,this._blendFunctionParameters[3]=B,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(V,I){this._blendEquationParameters[0]===V&&this._blendEquationParameters[1]===I||(this._blendEquationParameters[0]=V,this._blendEquationParameters[1]=I,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(V){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?V.enable(V.BLEND):V.disable(V.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(V.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(V.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(V.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var J=A(11084),G=A(11167),w=A(11062),t=A(11057),u=A(11127),W=A(11178);function g(V,I){if((0,w.k)()){const{requestAnimationFrame:A}=I||window;if("function"===typeof A)return A(V)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(V);return setTimeout(V,16)}class o{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(V){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(V){V!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=V,this._depthCullingState.depthFunc=V?518:515)}setColorWrite(V){V!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=V)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(V){if(V)return this.isNDCHalfZRange?V.IS_NDC_HALF_ZRANGE="":delete V.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?V.USE_REVERSE_DEPTHBUFFER="":delete V.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?V.USE_EXACT_SRGB_CONVERSIONS="":delete V.USE_EXACT_SRGB_CONVERSIONS);{let V="";return this.isNDCHalfZRange&&(V+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(V&&(V+="\n"),V+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(V&&(V+="\n"),V+="#define USE_EXACT_SRGB_CONVERSIONS"),V}}_rebuildInternalTextures(){const V=this._internalTexturesCache.slice();for(const I of V)I._rebuild()}_rebuildRenderTargetWrappers(){const V=this._renderTargetWrapperCache.slice();for(const I of V)I._rebuild()}_rebuildEffects(){for(const V in this._compiledEffects){const I=this._compiledEffects[V];I._pipelineContext=null,I._prepareEffect()}E.Effect.ResetCache()}_rebuildGraphicsResources(){var V;this.wipeCaches(!0),this._rebuildEffects(),null===(V=this._rebuildComputeEffects)||void 0===V||V.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){F.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(V){setTimeout((()=>{this._clearEmptyResources();const I=this._depthCullingState.depthTest,A=this._depthCullingState.depthFunc,B=this._depthCullingState.depthMask,F=this._stencilState.stencilTest;V(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=I,this._depthCullingState.depthFunc=A,this._depthCullingState.depthMask=B,this._stencilState.stencilTest=F,this._flagContextRestored()}),0)}get H(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(V){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(V){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const V=new Uint8Array(4),I=[V,V,V,V,V,V];this._emptyCubeTexture=this.createRawCubeTexture(I,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(V){if(!V)return this._activeRenderLoops.length=0,void this._cancelFrame();const I=this._activeRenderLoops.indexOf(V);I>=0&&(this._activeRenderLoops.splice(I,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const V=this._frameHandler;if(this._frameHandler=0,(0,w.k)()){const{cancelAnimationFrame:I}=this.getHostWindow()||window;if("function"===typeof I)return I(V)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(V);return clearTimeout(V)}}OY(){this.onBeginFrameObservable.notifyObservers(this)}ZY(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(V){this._maxFPS=V,void 0!==V&&(this._minFrameTime=V<=0?Number.MAX_VALUE:1e3/V)}_isOverFrameTime(V){if(!V||void 0===this._maxFPS)return!1;const I=V-this._lastFrameTime;return this._lastFrameTime=V,this._renderAccumulator+=I,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(V){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(V)){let V=!0;(this.H||!this.renderEvenInBackground&&this._windowIsBackground)&&(V=!1),V&&(this.OY(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ZY())}}_renderLoop(V){this._processFrame(V),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let V=0;V<this._activeRenderLoops.length;V++){(0,this._activeRenderLoops[V])()}}_renderViews(){return!1}_queueNewFrame(V,I){return g(V,I)}runRenderLoop(V){-1===this._activeRenderLoops.indexOf(V)&&(this._activeRenderLoops.push(V),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(V){this._depthCullingState.depthTest=V}setZOffset(V){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-V:V}getZOffset(){const V=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-V:V}setZOffsetUnits(V){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-V:V}getZOffsetUnits(){const V=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-V:V}getHostWindow(){return(0,w.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(V){this._compatibilityMode=!0}_rebuildTextures(){for(const V of this.scenes)V._rebuildTextures();for(const V of this._virtualScenes)V._rebuildTextures()}_releaseRenderTargetWrapper(V){const I=this._renderTargetWrapperCache.indexOf(V);-1!==I&&this._renderTargetWrapperCache.splice(I,1)}get currentViewport(){return this._cachedViewport}setViewport(V,I,A){const B=I||this.getRenderWidth(),F=A||this.getRenderHeight(),E=V.x||0,Y=V.y||0;this._cachedViewport=V,this._viewport(E*B,Y*F,B*V.width,F*V.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(V){return new Path2D(V)}get description(){let V=this.name+this.version;return this._caps.parallelShaderCompile&&(V+=" - Parallel shader compilation"),V}_createTextureBase(V,I,A,E){let Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7?arguments[7]:void 0,X=arguments.length>8?arguments[8]:void 0,P=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,J=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,w=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,t=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,u=arguments.length>13?arguments[13]:void 0,g=arguments.length>14?arguments[14]:void 0,L=arguments.length>15?arguments[15]:void 0;const z="data:"===(V=V||"").substring(0,5),m="blob:"===V.substring(0,5),s=z&&-1!==V.indexOf(";base64,"),e=J||new G.d(this,1);e!==J&&(e.label=V.substring(0,60));const S=V;!this._transformTextureUrl||s||J||P||(V=this._transformTextureUrl(V)),S!==V&&(e._originalUrl=S);const Q=V.lastIndexOf(".");let h=t||(Q>-1?V.substring(Q).toLowerCase():"");h.indexOf("?")>-1&&(h=h.split("?")[0]);const r=(0,W.b)(h,u);E&&E.addPendingData(e),e.url=V,e.generateMipMaps=!I,e.samplingMode=Y,e.invertY=A,e._useSRGBBuffer=this._getUseSRGBBuffer(!!L,I),this._doNotHandleContextLost||(e._buffer=P);let M=null;H&&!J&&(M=e.onLoadedObservable.add(H)),J||this._internalTexturesCache.push(e);const x=(A,J)=>{E&&E.removePendingData(e),V===S?(M&&e.onLoadedObservable.remove(M),B.e.UseFallbackTexture&&V!==B.e.FallbackTexture&&this._createTextureBase(B.e.FallbackTexture,I,e.invertY,E,Y,null,c,b,X,P,e),A=(A||"Unknown error")+(B.e.UseFallbackTexture?" - Fallback texture was used":""),e.onErrorObservable.notifyObservers({message:A,exception:J}),c&&c(A,J)):(F.b.Warn(`Failed to load ${V}, falling back to ${S}`),this._createTextureBase(S,I,e.invertY,E,Y,H,c,b,X,P,e,w,t,u,g,L))};if(r){const I=async V=>{(await r).loadData(V,e,((V,I,A,B,F,H)=>{H?x("TextureLoader failed to load data"):b(e,h,E,{width:V,height:I},e.invertY,!A,B,(()=>(F(),!1)),Y)}),g)};P?P instanceof ArrayBuffer?I(new Uint8Array(P)):ArrayBuffer.isView(P)?I(P):c&&c("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(V,(V=>{I(new Uint8Array(V))}),void 0,E?E.offlineProvider:void 0,!0,((V,I)=>{x("Unable to load "+(V&&V.responseURL,I))}))}else{const A=V=>{m&&!this._doNotHandleContextLost&&(e._buffer=V),b(e,h,E,V,e.invertY,I,!1,X,Y)};!z||s?P&&("string"===typeof P.decoding||P.close)?A(P):o._FileToolsLoadImage(V||"",A,x,E?E.offlineProvider:null,u,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof P||P instanceof ArrayBuffer||ArrayBuffer.isView(P)||P instanceof Blob?o._FileToolsLoadImage(P,A,x,E?E.offlineProvider:null,u,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):P&&A(P)}return e}_rebuildBuffers(){for(const V of this._uniformBuffers)V._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,w.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const V in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,V)&&(this._boundTexturesCache[V]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(V){this._name=V}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(V){this._hardwareScalingLevel=V,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(V){this._doNotHandleContextLost=V}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(V,I,A){var F,E;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new c,this._stencilStateComposer=new b,this._stencilState=new X,this._alphaState=new P,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new t.c,this.onCanvasFocusObservable=new t.c,this.onNewSceneAddedObservable=new t.c,this.onResizeObservable=new t.c,this.onCanvasPointerOutObservable=new t.c,this.onEffectErrorObservable=new t.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new t.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=V=>this._renderLoop(V),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new t.c,this.onAfterShaderCompilationObservable=new t.c,this.onBeginFrameObservable=new t.c,this.onEndFrameObservable=new t.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new t.c,this.onContextRestoredObservable=new t.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.aY=new t.c,this.onReleaseEffectsObservable=new t.c,B.e.Instances.push(this),this.startTime=H.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Y.d.SetMatrixPrecision(!!I.useHighPrecisionMatrix),(0,w.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=A??!1,I.antialias=V??I.antialias,I.deterministicLockstep=I.deterministicLockstep??!1,I.lockstepMaxSteps=I.lockstepMaxSteps??4,I.timeStep=I.timeStep??1/60,I.stencil=I.stencil??!0,this._audioContext=(null===(F=I.audioEngineOptions)||void 0===F?void 0:F.audioContext)??null,this._audioDestination=(null===(E=I.audioEngineOptions)||void 0===E?void 0:E.audioDestination)??null,this.premultipliedAlpha=I.premultipliedAlpha??!0,this._doNotHandleContextLost=!!I.doNotHandleContextLost,this._isStencilEnable=!!I.stencil,this.useExactSrgbConversions=I.useExactSrgbConversions??!1;const J=(0,w.k)()&&window.devicePixelRatio||1,G=I.limitDeviceRatio||J;A=A||I.adaptToDeviceRatio||!1,this._hardwareScalingLevel=A?1/Math.min(G,J):1,this._lastDevicePixelRatio=J,this._creationOptions=I}resize(){let V,I,A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const V=(0,w.k)()&&window.devicePixelRatio||1,I=this._lastDevicePixelRatio/V;this._lastDevicePixelRatio=V,this._hardwareScalingLevel*=I}if((0,w.k)()&&(0,w.f)())if(this._renderingCanvas){var B,F;const A=null===(B=(F=this._renderingCanvas).getBoundingClientRect)||void 0===B?void 0:B.call(F);V=this._renderingCanvas.clientWidth||(null===A||void 0===A?void 0:A.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,I=this._renderingCanvas.clientHeight||(null===A||void 0===A?void 0:A.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else V=window.innerWidth,I=window.innerHeight;else V=this._renderingCanvas?this._renderingCanvas.width:100,I=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(V/this._hardwareScalingLevel,I/this._hardwareScalingLevel,A)}setSize(V,I){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(V|=0,I|=0,!A&&this._renderingCanvas.width===V&&this._renderingCanvas.height===I)return!1;if(this._renderingCanvas.width=V,this._renderingCanvas.height=I,this.scenes){for(let V=0;V<this.scenes.length;V++){const I=this.scenes[V];for(let V=0;V<I.cameras.length;V++){I.cameras[V]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(V,I,A,B,F,E,Y,H,c,b,X){throw(0,J.e)("engine.rawTexture")}createRawCubeTexture(V,I,A,B,F,E,Y,H){throw(0,J.e)("engine.rawTexture")}createRawTexture3D(V,I,A,B,F,E,Y,H,c,b,X){throw(0,J.e)("engine.rawTexture")}createRawTexture2DArray(V,I,A,B,F,E,Y,H,c,b,X){throw(0,J.e)("engine.rawTexture")}_sharedInit(V){this._renderingCanvas=V}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const V=navigator.userAgent;this.hostInformation.isMobile=-1!==V.indexOf("Mobile")||-1!==V.indexOf("Mac")&&(0,w.f)()&&"ontouchend"in document},this._checkForMobile(),(0,w.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(V){return document.createElement("video")}_reportDrawCall(){var V;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(V=this._drawCalls)||void 0===V||V.addCount(I,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(V,I){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(V,I){return createImageBitmap(V,I)}resizeImageBitmap(V,I,A){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(V){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(V,I){if("undefined"===typeof document)return new OffscreenCanvas(V,I);const A=document.createElement("canvas");return A.width=V,A.height=I,A}createCanvas(V,I){return o._CreateCanvas(V,I)}static _FileToolsLoadImage(V,I,A,B,F,E,Y){throw(0,J.e)("FileTools")}_loadFile(V,I,A,B,F,E){const Y=(0,u.i)(V,I,A,B,F,E);return this._activeRequests.push(Y),Y.onCompleteObservable.add((()=>{const V=this._activeRequests.indexOf(Y);-1!==V&&this._activeRequests.splice(V,1)})),Y}static _FileToolsLoadFile(V,I,A,B,F,E){if(u.c.loadFile)return u.c.loadFile(V,I,A,B,F,E);throw(0,J.e)("FileTools")}dispose(){var V;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(V=this.releaseComputeEffects)||void 0===V||V.call(this),E.Effect.ResetCache();for(const A of this._activeRequests)A.abort();this._boundRenderFunction=null,this.aY.notifyObservers(this),this.aY.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,w.k)()&&window.removeEventListener("resize",this._checkForMobile);const I=B.e.Instances.indexOf(this);I>=0&&B.e.Instances.splice(I,1),B.e.Instances.length||(B.e.OnEnginesDisposedObservable.notifyObservers(this),B.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(V){throw(0,J.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(V,I){for(let A=0;A<B.e.Instances.length;A++){const F=B.e.Instances[A];for(let A=0;A<F.scenes.length;A++)F.scenes[A].markAllMaterialsAsDirty(V,I)}}}o._RenderPassIdCounter=0,o._RescalePostProcessFactory=null,o.CollisionsEpsilon=.001,o.QueueNewFrame=g},11097:(V,I,A)=>{A.d(I,{e:()=>F});var B=A(11057);class F{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}F.Instances=[],F.OnEnginesDisposedObservable=new B.c,F._LastCreatedScene=null,F.UseFallbackTexture=!0,F.FallbackTexture=""},11164:(V,I,A)=>{A.d(I,{d:()=>B});class B{static SetMatrixPrecision(V){if(B.MatrixTrackPrecisionChange=!1,V&&!B.MatrixUse64Bits&&B.MatrixTrackedMatrices)for(let I=0;I<B.MatrixTrackedMatrices.length;++I){const V=B.MatrixTrackedMatrices[I],A=V.kY;V.kY=new Array(16);for(let I=0;I<16;++I)V.kY[I]=A[I]}B.MatrixUse64Bits=V,B.MatrixCurrentType=B.MatrixUse64Bits?Array:Float32Array,B.MatrixTrackedMatrices=null}}B.MatrixUse64Bits=!1,B.MatrixTrackPrecisionChange=!0,B.MatrixCurrentType=Float32Array,B.MatrixTrackedMatrices=[]},11178:(V,I,A)=>{A.d(I,{b:()=>Y});var B=A(11064);const F=new Map;function E(V,I){(function(V){return F.delete(V)})(V)&&B.b.Warn(`Extension with the name '${V}' already exists`),F.set(V,I)}function Y(V,I){"image/ktx"!==I&&"image/ktx2"!==I||(V=".ktx"),F.has(V)||(V.endsWith(".ies")&&E(".ies",(async()=>await A.e(15).then(A.bind(A,13627)).then((V=>new V._IESTextureLoader)))),V.endsWith(".dds")&&E(".dds",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(19),A.e(18),A.e(28)]).then(A.bind(A,13636)).then((V=>new V._DDSTextureLoader)))),V.endsWith(".basis")&&E(".basis",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(47)]).then(A.bind(A,13651)).then((V=>new V._BasisTextureLoader)))),V.endsWith(".env")&&E(".env",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(19),A.e(18),A.e(23),A.e(21),A.e(45),A.e(48)]).then(A.bind(A,13655)).then((V=>new V._ENVTextureLoader)))),V.endsWith(".hdr")&&E(".hdr",(async()=>await Promise.all([A.e(14),A.e(49)]).then(A.bind(A,13657)).then((V=>new V._HDRTextureLoader)))),(V.endsWith(".ktx")||V.endsWith(".ktx2"))&&(E(".ktx",(async()=>await A.e(30).then(A.bind(A,13660)).then((V=>new V._KTXTextureLoader)))),E(".ktx2",(async()=>await A.e(30).then(A.bind(A,13660)).then((V=>new V._KTXTextureLoader))))),V.endsWith(".tga")&&E(".tga",(async()=>await A.e(50).then(A.bind(A,13665)).then((V=>new V._TGATextureLoader)))),V.endsWith(".exr")&&E(".exr",(async()=>await A.e(16).then(A.bind(A,13670)).then((V=>new V._ExrTextureLoader)))));const B=F.get(V);return B?Promise.resolve(B(I)):null}},11167:(V,I,A)=>{A.d(I,{d:()=>Y});var B,F=A(11057),E=A(11169);!function(V){V[V.Unknown=0]="Unknown",V[V.Url=1]="Url",V[V.Temp=2]="Temp",V[V.Raw=3]="Raw",V[V.Dynamic=4]="Dynamic",V[V.RenderTarget=5]="RenderTarget",V[V.MultiRenderTarget=6]="MultiRenderTarget",V[V.Cube=7]="Cube",V[V.CubeRaw=8]="CubeRaw",V[V.CubePrefiltered=9]="CubePrefiltered",V[V.Raw3D=10]="Raw3D",V[V.Raw2DArray=11]="Raw2DArray",V[V.DepthStencil=12]="DepthStencil",V[V.CubeRawRGBD=13]="CubeRawRGBD",V[V.Depth=14]="Depth"}(B||(B={}));class Y extends E.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(V){this.generateMipMaps=V}get uniqueId(){return this._uniqueId}_setUniqueId(V){this._uniqueId=V}getEngine(){return this._engine}get source(){return this._source}constructor(V,I){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new F.c,this.onErrorObservable=new F.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=V,this._source=I,this._uniqueId=Y._Counter++,A||(this._hardwareTexture=V._createHardwareTexture())}incrementReferences(){this._references++}updateSize(V,I){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,V,I,A),this.width=V,this.height=I,this.depth=A,this.baseWidth=V,this.baseHeight=I,this.baseDepth=A,this._size=V*I*A}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const V=this.onRebuildCallback(this),I=I=>{I._swapAndDie(this,!1),this.isReady=V.isReady};return void(V.isAsync?V.proxy.then(I):I(V.proxy))}let V;switch(this.source){case 2:case 12:case 14:break;case 1:return void(V=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(V=>{V._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:V=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),V._swapAndDie(this,!1),this.isReady=!0;break;case 10:V=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),V._swapAndDie(this,!1),this.isReady=!0;break;case 11:V=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),V._swapAndDie(this,!1),this.isReady=!0;break;case 4:V=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),V._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(V=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{V._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:V=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),V._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return V=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(V=>{V&&V._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(V._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(V){var I;let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(I=this._hardwareTexture)||void 0===I||I.setUsage(V._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),V._hardwareTexture=this._hardwareTexture,A&&(V._isRGBD=this._isRGBD),this._lodTextureHigh&&(V._lodTextureHigh&&V._lodTextureHigh.dispose(),V._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(V._lodTextureMid&&V._lodTextureMid.dispose(),V._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(V._lodTextureLow&&V._lodTextureLow.dispose(),V._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(V._irradianceTexture&&V._irradianceTexture.dispose(),V._irradianceTexture=this._irradianceTexture);const B=this._engine.getLoadedTexturesCache();let F=B.indexOf(this);-1!==F&&B.splice(F,1),F=B.indexOf(V),-1===F&&B.push(V)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Y._Counter=0},11169:(V,I,A)=>{A.d(I,{b:()=>B});class B{get wrapU(){return this._cachedWrapU}set wrapU(V){this._cachedWrapU=V}get wrapV(){return this._cachedWrapV}set wrapV(V){this._cachedWrapV=V}get wrapR(){return this._cachedWrapR}set wrapR(V){this._cachedWrapR=V}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(V){this._cachedAnisotropicFilteringLevel=V}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(V){this._comparisonFunction=V}get useMipMaps(){return this._useMipMaps}set useMipMaps(V){this._useMipMaps=V}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,F=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=V,this._cachedWrapV=I,this._cachedWrapR=A,this._cachedAnisotropicFilteringLevel=B,this.samplingMode=F,this._comparisonFunction=E,this}compareSampler(V){return this._cachedWrapU===V._cachedWrapU&&this._cachedWrapV===V._cachedWrapV&&this._cachedWrapR===V._cachedWrapR&&this._cachedAnisotropicFilteringLevel===V._cachedAnisotropicFilteringLevel&&this.samplingMode===V.samplingMode&&this._comparisonFunction===V._comparisonFunction&&this._useMipMaps===V._useMipMaps}}},11070:(V,I,A)=>{A.d(I,{b:()=>E});var B=A(11064);const F=(V,I,A)=>V?V.getClassName&&"Mesh"===V.getClassName()?null:!V.getClassName||"SubMesh"!==V.getClassName()&&"PhysicsBody"!==V.getClassName()?V.clone?V.clone():Array.isArray(V)?V.slice():A&&"object"===typeof V?{...V}:null:V.clone(I):null;class E{static DeepCopy(V,I,A,E){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const H=function(V){const I=[];do{const A=Object.getOwnPropertyNames(V);for(const V of A)-1===I.indexOf(V)&&I.push(V)}while(V=Object.getPrototypeOf(V));return I}(V);for(const b of H){if("_"===b[0]&&(!E||-1===E.indexOf(b)))continue;if(b.endsWith("Observable"))continue;if(A&&-1!==A.indexOf(b))continue;const H=V[b],X=typeof H;if("function"!==X)try{if("object"===X)if(H instanceof Uint8Array)I[b]=Uint8Array.from(H);else if(H instanceof Array){if(I[b]=[],H.length>0)if("object"==typeof H[0])for(let V=0;V<H.length;V++){const A=F(H[V],I,Y);-1===I[b].indexOf(A)&&I[b].push(A)}else I[b]=H.slice(0)}else I[b]=F(H,I,Y);else I[b]=H}catch(c){B.b.Warn(c.message)}}}}},11107:(V,I,A)=>{A.d(I,{e:()=>B,i:()=>F,j:()=>E});class B extends Error{}B._setPrototypeOf=Object.setPrototypeOf||((V,I)=>(V.__proto__=I,V));const F={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class E extends B{constructor(V,I,A){super(V),this.errorCode=I,this.innerError=A,this.name="RuntimeError",B._setPrototypeOf(this,E.prototype)}}},11105:(V,I,A)=>{A.d(I,{c:()=>x,f:()=>o,j:()=>Q,k:()=>r,q:()=>e,o:()=>u,r:()=>m,s:()=>s,v:()=>S,w:()=>L});var B=A(11091),F=A(11062),E=A(11057);class Y{}Y.FilesToLoad={};var H=A(11107),c=A(11115),b=A(11122),X=A(11097),P=A(11064),J=A(11135),G=A(11127),w=A(11137);const t=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class u extends H.j{constructor(V,I){super(V,H.i.LoadFileError),this.name="LoadFileError",H.e._setPrototypeOf(this,u.prototype),I instanceof B.b?this.request=I:this.file=I}}class W extends H.j{constructor(V,I){super(V,H.i.RequestFileError),this.request=I,this.name="RequestFileError",H.e._setPrototypeOf(this,W.prototype)}}class g extends H.j{constructor(V,I){super(V,H.i.ReadFileError),this.file=I,this.name="ReadFileError",H.e._setPrototypeOf(this,g.prototype)}}const o={DefaultRetryStrategy:class{static ExponentialBackoff(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(A,B,F)=>0!==B.status||F>=V||-1!==A.indexOf("file:")?-1:Math.pow(2,F)*I}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:V=>V,ScriptBaseUrl:"",ScriptPreprocessUrl:V=>V,CleanUrl:V=>V=V.replace(/#/gm,"%23")},L=(V,I)=>{if((!V||0!==V.indexOf("data:"))&&o.CorsBehavior)if("string"===typeof o.CorsBehavior||o.CorsBehavior instanceof String)I.crossOrigin=o.CorsBehavior;else{const A=o.CorsBehavior(V);A&&(I.crossOrigin=A)}},z={getRequiredSize:null},m=function(V,I,A,F){let E,H=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",b=arguments.length>5?arguments[5]:void 0,P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:X.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===P||void 0===P||!P._features.forceBitmapOverHTMLImageElement))return A("LoadImage is only supported in web or BabylonNative environments."),null;let J=!1;V instanceof ArrayBuffer||ArrayBuffer.isView(V)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(E=URL.createObjectURL(new Blob([V],{type:H})),J=!0):E=`data:${H};base64,`+(0,c.n)(V):V instanceof Blob?(E=URL.createObjectURL(V),J=!0):(E=o.CleanUrl(V),E=o.PreprocessUrl(E));const G=I=>{if(A){const B=E||V.toString();A(`Error while trying to load image: ${0===B.indexOf("http")||B.length<=128?B:B.slice(0,128)+"..."}`,I)}};if(null!==P&&void 0!==P&&P._features.forceBitmapOverHTMLImageElement)return e(E,(B=>{P.createImageBitmap(new Blob([B],{type:H}),{premultiplyAlpha:"none",...b}).then((V=>{I(V),J&&URL.revokeObjectURL(E)})).catch((I=>{A&&A("Error while trying to load image: "+V,I)}))}),void 0,F||void 0,!0,((V,I)=>{G(I)})),null;const w=new Image;if(z.getRequiredSize){const I=z.getRequiredSize(V);I.width&&(w.width=I.width),I.height&&(w.height=I.height)}L(E,w);const t=[],u=()=>{for(const V of t)V.target.removeEventListener(V.name,V.handler);t.length=0};t.push({target:w,name:"load",handler:()=>{u(),I(w),J&&w.src&&URL.revokeObjectURL(w.src)}}),t.push({target:w,name:"error",handler:V=>{u(),G(V),J&&w.src&&URL.revokeObjectURL(w.src)}}),t.push({target:document,name:"securitypolicyviolation",handler:V=>{if(V.blockedURI!==w.src||"UY"===V.disposition)return;u();const I=new Error(`CSP violation of policy ${V.effectiveDirective} ${V.blockedURI}. Current policy is ${V.originalPolicy}`);X.e.UseFallbackTexture=!1,G(I),J&&w.src&&URL.revokeObjectURL(w.src),w.src=""}}),(()=>{for(const V of t)V.target.addEventListener(V.name,V.handler)})();const W="blob:"===E.substring(0,5),g="data:"===E.substring(0,5),m=()=>{W||g||!B.b.IsCustomRequestAvailable?w.src=E:e(E,((V,I,A)=>{const B=new Blob([V],{type:!H&&A?A:H}),F=URL.createObjectURL(B);J=!0,w.src=F}),void 0,F||void 0,!0,((V,I)=>{G(I)}))},s=()=>{F&&F.loadImage(E,w)};if(!W&&!g&&F&&F.enableTexturesOffline)F.open(s,m);else{if(-1!==E.indexOf("file:")){const V=decodeURIComponent(E.substring(5).toLowerCase());if(Y.FilesToLoad[V]&&"undefined"!==typeof URL){try{let I;try{I=URL.createObjectURL(Y.FilesToLoad[V])}catch(S){I=URL.createObjectURL(Y.FilesToLoad[V])}w.src=I,J=!0}catch(Q){w.src=""}return w}}m()}return w},s=(V,I,A,B,F)=>{const Y=new FileReader,H={onCompleteObservable:new E.c,abort:()=>Y.abort()};return Y.onloadend=()=>H.onCompleteObservable.notifyObservers(H),F&&(Y.onerror=()=>{F(new g(`Unable to read ${V.name}`,V))}),Y.onload=V=>{I(V.target.result)},A&&(Y.onprogress=A),B?Y.readAsArrayBuffer(V):Y.readAsText(V),H},e=(V,I,A,B,F,c,b)=>{if(V.name)return s(V,I,A,F,c?V=>{c(void 0,V)}:void 0);const X=V;if(-1!==X.indexOf("file:")){let V=decodeURIComponent(X.substring(5).toLowerCase());0===V.indexOf("./")&&(V=V.substring(2));const B=Y.FilesToLoad[V];if(B)return s(B,I,A,F,c?V=>c(void 0,new u(V.message,V.file)):void 0)}const{match:G,type:w}=M(X);if(G){const V={onCompleteObservable:new E.c,abort:()=>()=>{}};try{const V=F?x(X):f(X);I(V,void 0,w)}catch(H){c?c(void 0,H):P.b.Error(H.message||"Failed to parse the Data URL")}return J.c.SetImmediate((()=>{V.onCompleteObservable.notifyObservers(V)})),V}return S(X,((V,A)=>{I(V,null===A||void 0===A?void 0:A.responseURL,null===A||void 0===A?void 0:A.getResponseHeader("content-type"))}),A,B,F,c?V=>{c(V.request,new u(V.message,V.request))}:void 0,b)},S=(V,I,A,Y,H,c,b)=>{V=o.CleanUrl(V),V=o.PreprocessUrl(V);const X=o.BaseUrl+V;let J=!1;const G={onCompleteObservable:new E.c,abort:()=>J=!0},w=()=>{let V,E=new B.b,Y=null;const w=()=>{E&&(A&&E.removeEventListener("progress",A),V&&E.removeEventListener("readystatechange",V),E.removeEventListener("loadend",t))};let t=()=>{w(),G.onCompleteObservable.notifyObservers(G),G.onCompleteObservable.clear(),A=void 0,V=null,t=null,c=void 0,b=void 0,I=void 0};G.abort=()=>{J=!0,t&&t(),E&&E.readyState!==(XMLHttpRequest.DONE||4)&&E.abort(),null!==Y&&(clearTimeout(Y),Y=null),E=null};const u=V=>{const I=V.message||"Unknown error";c&&E?c(new W(I,E)):P.b.Error(I)},g=P=>{if(E){if(E.open("GET",X),b)try{b(E)}catch(G){return void u(G)}H&&(E.responseType="arraybuffer"),A&&E.addEventListener("progress",A),t&&E.addEventListener("loadend",t),V=()=>{if(!J&&E&&E.readyState===(XMLHttpRequest.DONE||4)){if(V&&E.removeEventListener("readystatechange",V),E.status>=200&&E.status<300||0===E.status&&(!(0,F.k)()||h())){const V=H?E.response:E.responseText;if(null!==V){try{I&&I(V,E)}catch(G){u(G)}return}}const A=o.DefaultRetryStrategy;if(A){const V=A(X,E,P);if(-1!==V)return w(),E=new B.b,void(Y=setTimeout((()=>g(P+1)),V))}const b=new W("Error status: "+E.status+" "+E.statusText+" - Unable to load "+X,E);c&&c(b)}},E.addEventListener("readystatechange",V),E.send()}};g(0)};if(Y&&Y.enableSceneOffline){const B=V=>{V&&V.status>400?c&&c(V):w()},F=()=>{Y&&Y.loadFile(o.BaseUrl+V,(V=>{!J&&I&&I(V),G.onCompleteObservable.notifyObservers(G)}),A?V=>{!J&&A&&A(V)}:void 0,B,H)};Y.open(F,B)}else w();return G},Q=V=>{const{match:I,type:A}=M(V);if(I)return A||void 0;const B=V.lastIndexOf(".");switch(V.substring(B+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"nY":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},h=()=>"undefined"!==typeof location&&"file:"===location.protocol,r=V=>t.test(V),M=V=>{const I=t.exec(V);if(null===I||0===I.length)return{match:!1,type:""};return{match:!0,type:I[0].replace("data:","").replace("base64,","")}};function x(V){return(0,c.d)(V.split(",")[1])}const f=V=>(0,c.h)(V.split(",")[1]);let R;w.e._FileToolsLoadImage=m,G.c.loadFile=e,b.p.loadFile=e;((V,I,A,B,F,E,Y,H,c,b)=>{R={DecodeBase64UrlToBinary:V,DecodeBase64UrlToString:I,DefaultRetryStrategy:A.DefaultRetryStrategy,BaseUrl:A.BaseUrl,CorsBehavior:A.CorsBehavior,PreprocessUrl:A.PreprocessUrl,IsBase64DataUrl:B,IsFileURL:F,LoadFile:E,LoadImage:Y,ReadFile:H,RequestFile:c,SetCorsBehavior:b},Object.defineProperty(R,"DefaultRetryStrategy",{get:function(){return A.DefaultRetryStrategy},set:function(V){A.DefaultRetryStrategy=V}}),Object.defineProperty(R,"BaseUrl",{get:function(){return A.BaseUrl},set:function(V){A.BaseUrl=V}}),Object.defineProperty(R,"PreprocessUrl",{get:function(){return A.PreprocessUrl},set:function(V){A.PreprocessUrl=V}}),Object.defineProperty(R,"CorsBehavior",{get:function(){return A.CorsBehavior},set:function(V){A.CorsBehavior=V}})})(x,f,o,r,h,e,m,s,S,L)},11194:(V,I,A)=>{function B(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(V=>{const I=16*Math.random()|0;return("x"===V?I:3&I|8).toString(16)}))}A.d(I,{c:()=>B})},11186:(V,I,A)=>{A.d(I,{e:()=>E});var B=A(11064),F=A(11189);class E{static Instantiate(V){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[V])return this.RegisteredExternalClasses[V];const I=(0,F.b)(V);if(I)return I;B.b.Warn(V+" not found, you may have missed an import.");const A=V.split(".");let E=window||this;for(let B=0,F=A.length;B<F;B++)E=E[A[B]];return"function"!==typeof E?null:E}}E.RegisteredExternalClasses={}},11075:(V,I,A)=>{A.d(I,{e:()=>F});var B=A(11062);class F{static get Now(){return(0,B.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11115:(V,I,A)=>{A.d(I,{d:()=>Y,h:()=>E,j:()=>B,n:()=>F});const B=V=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(V);let I="";for(let A=0;A<V.byteLength;A++)I+=String.fromCharCode(V[A]);return I},F=V=>{const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A,B,F,E,Y,H,c,b="",X=0;const P=ArrayBuffer.isView(V)?new Uint8Array(V.buffer,V.byteOffset,V.byteLength):new Uint8Array(V);for(;X<P.length;)A=P[X++],B=X<P.length?P[X++]:Number.NaN,F=X<P.length?P[X++]:Number.NaN,E=A>>2,Y=(3&A)<<4|B>>4,H=(15&B)<<2|F>>6,c=63&F,isNaN(B)?H=c=64:isNaN(F)&&(c=64),b+=I.charAt(E)+I.charAt(Y)+I.charAt(H)+I.charAt(c);return b},E=V=>atob(V),Y=V=>{const I=E(V),A=I.length,B=new Uint8Array(new ArrayBuffer(A));for(let F=0;F<A;F++)B[F]=I.charCodeAt(F);return B.buffer}},11196:(V,I,A)=>{function B(V){let I=1;do{I*=2}while(I<V);return I===V}function F(V,I,A){return V*(1-A)+I*A}function E(V){const I=Y(V),A=H(V);return I-V>V-A?A:I}function Y(V){return V--,V|=V>>1,V|=V>>2,V|=V>>4,V|=V>>8,V|=V>>16,++V}function H(V){return V|=V>>1,V|=V>>2,V|=V>>4,V|=V>>8,(V|=V>>16)-(V>>1)}function c(V,I){let A;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:A=H(V);break;case 2:A=E(V);break;default:A=Y(V)}return Math.min(A,I)}A.d(I,{c:()=>H,e:()=>c,i:()=>B,k:()=>F,o:()=>E})},11052:(V,I,A)=>{A.r(I),A.d(I,{AsyncLoop:()=>g,Tools:()=>u,className:()=>W});var B=A(11057),F=A(11062),E=A(11064),Y=A(11070),H=A(11075),c=A(11084),b=A(11091),X=A(11097),P=A(11105),J=A(11135),G=A(11186),w=A(11194),t=A(11196);class u{static get BaseUrl(){return P.f.BaseUrl}static set BaseUrl(V){P.f.BaseUrl=V}static get CleanUrl(){return P.f.CleanUrl}static set CleanUrl(V){P.f.CleanUrl=V}static IsAbsoluteUrl(V){return 0===V.indexOf("//")||-1!==V.indexOf("://")&&(-1!==V.indexOf(".")&&(-1!==V.indexOf("/")&&(!(V.indexOf(":")>V.indexOf("/"))&&(V.indexOf("://")<V.indexOf(".")||(0===V.indexOf("data:")||0===V.indexOf("blob:"))))))}static set ScriptBaseUrl(V){P.f.ScriptBaseUrl=V}static get ScriptBaseUrl(){return P.f.ScriptBaseUrl}static set CDNBaseUrl(V){u.ScriptBaseUrl=V,u.AssetBaseUrl=V}static set ScriptPreprocessUrl(V){P.f.ScriptPreprocessUrl=V}static get ScriptPreprocessUrl(){return P.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return P.f.DefaultRetryStrategy}static set DefaultRetryStrategy(V){P.f.DefaultRetryStrategy=V}static get CorsBehavior(){return P.f.CorsBehavior}static set CorsBehavior(V){P.f.CorsBehavior=V}static get UseFallbackTexture(){return X.e.UseFallbackTexture}static set UseFallbackTexture(V){X.e.UseFallbackTexture=V}static get RegisteredExternalClasses(){return G.e.RegisteredExternalClasses}static set RegisteredExternalClasses(V){G.e.RegisteredExternalClasses=V}static get fallbackTexture(){return X.e.FallbackTexture}static set fallbackTexture(V){X.e.FallbackTexture=V}static FetchToRef(V,I,A,B,F,E){const Y=4*((Math.abs(V)*A%A|0)+(Math.abs(I)*B%B|0)*A);E.r=F[Y]/255,E.g=F[Y+1]/255,E.b=F[Y+2]/255,E.a=F[Y+3]/255}static Mix(V,I,A){return 0}static Instantiate(V){return G.e.Instantiate(V)}static SetImmediate(V){J.c.SetImmediate(V)}static IsExponentOfTwo(V){return!0}static FloatRound(V){return Math.fround(V)}static GetFilename(V){const I=V.lastIndexOf("/");return I<0?V:V.substring(I+1)}static GetFolderPath(V){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const A=V.lastIndexOf("/");return A<0?I?V:"":V.substring(0,A+1)}static ToDegrees(V){return 180*V/Math.PI}static ToRadians(V){return V*Math.PI/180}static SmoothAngleChange(V,I){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const B=this.ToRadians(V),F=this.ToRadians(I);return this.ToDegrees(Math.atan2((1-A)*Math.sin(F)+A*Math.sin(B),(1-A)*Math.cos(F)+A*Math.cos(B)))}static MakeArray(V,I){return!0===I||void 0!==V&&null!=V?Array.isArray(V)?V:[V]:null}static GetPointerPrefix(V){return(0,F.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(V,I){(0,P.w)(V,I)}static SetReferrerPolicyBehavior(V,I){I.referrerPolicy=V}static get PreprocessUrl(){return P.f.PreprocessUrl}static set PreprocessUrl(V){P.f.PreprocessUrl=V}static LoadImage(V,I,A,B,F,E){return(0,P.r)(V,I,A,B,F,E)}static LoadFile(V,I,A,B,F,E){return(0,P.q)(V,I,A,B,F,E)}static async LoadFileAsync(V){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((A,B)=>{(0,P.q)(V,(V=>{A(V)}),void 0,void 0,I,((V,I)=>{B(I)}))}))}static GetAssetUrl(V){if(!V)return"";if(u.AssetBaseUrl&&V.startsWith(u._DefaultAssetsUrl)){const I="/"===u.AssetBaseUrl[u.AssetBaseUrl.length-1]?u.AssetBaseUrl.substring(0,u.AssetBaseUrl.length-1):u.AssetBaseUrl;return V.replace(u._DefaultAssetsUrl,I)}return V}static GetBabylonScriptURL(V,I){if(!V)return"";if(u.ScriptBaseUrl&&V.startsWith(u._DefaultCdnUrl)){const I="/"===u.ScriptBaseUrl[u.ScriptBaseUrl.length-1]?u.ScriptBaseUrl.substring(0,u.ScriptBaseUrl.length-1):u.ScriptBaseUrl;V=V.replace(u._DefaultCdnUrl,I)}return V=u.ScriptPreprocessUrl(V),I&&(V=u.GetAbsoluteUrl(V)),V}static LoadBabylonScript(V,I,A,B){V=u.GetBabylonScriptURL(V),u.LoadScript(V,I,A)}static async LoadBabylonScriptAsync(V){return V=u.GetBabylonScriptURL(V),await u.LoadScriptAsync(V)}static LoadScript(V,I,A,B){let E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(V),I&&I()}catch(c){null===A||void 0===A||A(`Unable to load script '${V}' in worker`,c)}return}if(!(0,F.k)())return void(null===A||void 0===A||A(`Cannot load script '${V}' outside of a window or a worker`));const Y=document.getElementsByTagName("head")[0],H=document.createElement("script");E?(H.setAttribute("type","module"),H.innerText=V):(H.setAttribute("type","text/javascript"),H.setAttribute("src",V)),B&&(H.id=B),H.onload=()=>{I&&I()},H.onerror=I=>{A&&A(`Unable to load script '${V}'`,I)},Y.appendChild(H)}static async LoadScriptAsync(V,I){return await new Promise(((A,B)=>{this.LoadScript(V,(()=>{A()}),((V,I)=>{B(I||new Error(V))}),I)}))}static ReadFileAsDataURL(V,I,A){const F=new FileReader,E={onCompleteObservable:new B.c,abort:()=>F.abort()};return F.onloadend=()=>{E.onCompleteObservable.notifyObservers(E)},F.onload=V=>{I(V.target.result)},F.onprogress=A,F.readAsDataURL(V),E}static ReadFile(V,I,A,B,F){return(0,P.s)(V,I,A,B,F)}static FileAsURL(V){const I=new Blob([V]);return window.URL.createObjectURL(I)}static Format(V){let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return V.toFixed(I)}static DeepCopy(V,I,A,B){Y.b.DeepCopy(V,I,A,B)}static IsEmpty(V){for(const I in V)if(Object.prototype.hasOwnProperty.call(V,I))return!1;return!0}static RegisterTopRootEvents(V,I){for(let B=0;B<I.length;B++){const F=I[B];V.addEventListener(F.name,F.handler,!1);try{window.parent&&window.parent.addEventListener(F.name,F.handler,!1)}catch(A){}}}static UnregisterTopRootEvents(V,I){for(let B=0;B<I.length;B++){const F=I[B];V.removeEventListener(F.name,F.handler);try{V.parent&&V.parent.removeEventListener(F.name,F.handler)}catch(A){}}}static async DumpFramebuffer(V,I,A,B){throw(0,c.e)("DumpTools")}static DumpData(V,I,A,B){throw(0,c.e)("DumpTools")}static async DumpDataAsync(V,I,A){throw(0,c.e)("DumpTools")}static _IsOffScreenCanvas(V){return void 0!==V.convertToBlob}static ToBlob(V,I){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0;u._IsOffScreenCanvas(V)||V.toBlob||(V.toBlob=function(V,I,A){setTimeout((()=>{const B=atob(this.toDataURL(I,A).split(",")[1]),F=B.length,E=new Uint8Array(F);for(let V=0;V<F;V++)E[V]=B.charCodeAt(V);V(new Blob([E]))}))}),u._IsOffScreenCanvas(V)?V.convertToBlob({type:A,quality:B}).then((V=>I(V))):V.toBlob((function(V){I(V)}),A,B)}static DownloadBlob(V,I){if("download"in document.createElement("a")){if(!I){const V=new Date;I="screenshot_"+((V.getFullYear()+"-"+(V.getMonth()+1)).slice(2)+"-"+V.getDate()+"_"+V.getHours()+"-"+("0"+V.getMinutes()).slice(-2))+".png"}u.Download(V,I)}else if(V&&"undefined"!==typeof URL){const I=URL.createObjectURL(V),A=window.open("");if(!A)return;const B=A.document.createElement("img");B.onload=function(){URL.revokeObjectURL(I)},B.src=I,A.document.body.appendChild(B)}}static EncodeScreenshotCanvasData(V,I){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0,F=arguments.length>4?arguments[4]:void 0;if("string"!==typeof B&&I){if(I){if(u._IsOffScreenCanvas(V))return void V.convertToBlob({type:A,quality:F}).then((V=>{const A=new FileReader;A.readAsDataURL(V),A.onloadend=()=>{const V=A.result;I(V)}}));const B=V.toDataURL(A,F);I(B)}}else this.ToBlob(V,(function(V){V&&u.DownloadBlob(V,B),I&&I("")}),A,F)}static Download(V,I){if("undefined"===typeof URL)return;const A=window.URL.createObjectURL(V),B=document.createElement("a");document.body.appendChild(B),B.style.display="none",B.href=A,B.download=I,B.addEventListener("click",(()=>{B.parentElement&&B.parentElement.removeChild(B)})),B.click(),window.URL.revokeObjectURL(A)}static BackCompatCameraNoPreventDefault(V){return"boolean"===typeof V[0]?V[0]:"boolean"===typeof V[1]&&V[1]}static CreateScreenshot(V,I,A,B){throw(0,c.e)("ScreenshotTools")}static async CreateScreenshotAsync(V,I,A){throw(0,c.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(V,I,A,B){throw(0,c.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(V,I,A){throw(0,c.e)("ScreenshotTools")}static RandomId(){return(0,w.c)()}static IsBase64(V){return(0,P.k)(V)}static DecodeBase64(V){return(0,P.c)(V)}static get errorsCount(){return E.b.errorsCount}static Log(V){E.b.Log(V)}static Warn(V){E.b.Warn(V)}static Error(V){E.b.Error(V)}static get LogCache(){return E.b.LogCache}static ClearLogCache(){E.b.ClearLogCache()}static set LogLevels(V){E.b.LogLevels=V}static set PerformanceLogLevel(V){return(V&u.PerformanceUserMarkLogLevel)===u.PerformanceUserMarkLogLevel?(u.StartPerformanceCounter=u._StartUserMark,void(u.EndPerformanceCounter=u._EndUserMark)):(V&u.PerformanceConsoleLogLevel)===u.PerformanceConsoleLogLevel?(u.StartPerformanceCounter=u._StartPerformanceConsole,void(u.EndPerformanceCounter=u._EndPerformanceConsole)):(u.StartPerformanceCounter=u._StartPerformanceCounterDisabled,void(u.EndPerformanceCounter=u._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(V,I){}static _EndPerformanceCounterDisabled(V,I){}static _StartUserMark(V){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!u._Performance){if(!(0,F.k)())return;u._Performance=window.performance}I&&u._Performance.mark&&u._Performance.mark(V+"-Begin")}static _EndUserMark(V){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&u._Performance.mark&&(u._Performance.mark(V+"-End"),u._Performance.measure(V,V+"-Begin",V+"-End"))}static _StartPerformanceConsole(V){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(u._StartUserMark(V,I),console.time&&console.time(V))}static _EndPerformanceConsole(V){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(u._EndUserMark(V,I),console.timeEnd(V))}static get Now(){return H.e.Now}static GetClassName(V){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=null;if(!I&&V.getClassName)A=V.getClassName();else{if(V instanceof Object){A=(I?V:Object.getPrototypeOf(V)).constructor.__bjsclassName__}A||(A=typeof V)}return A}static First(V,I){for(const A of V)if(I(A))return A;return null}static getFullClassName(V){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=null,B=null;if(!I&&V.getClassName)A=V.getClassName();else{if(V instanceof Object){const F=I?V:Object.getPrototypeOf(V);A=F.constructor.__bjsclassName__,B=F.constructor.__bjsmoduleName__}A||(A=typeof V)}return A?(null!=B?B+".":"")+A:null}static async DelayAsync(V){await new Promise((I=>{setTimeout((()=>{I()}),V)}))}static IsSafari(){return!!(0,F.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function W(V,I){return A=>{A.__bjsclassName__=V,A.__bjsmoduleName__=null!=I?I:null}}u.AssetBaseUrl="",u.UseCustomRequestHeaders=!1,u.CustomRequestHeaders=b.b.CustomRequestHeaders,u.GetDOMTextContent=F.e,u._DefaultCdnUrl="https://cdn.babylonjs.com",u._DefaultAssetsUrl="https://assets.babylonjs.com/core",u.GetAbsoluteUrl="object"===typeof document?V=>{const I=document.createElement("a");return I.href=V,I.href}:"function"===typeof URL&&"object"===typeof location?V=>new URL(V,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},u.NoneLogLevel=E.b.NoneLogLevel,u.MessageLogLevel=E.b.MessageLogLevel,u.WarningLogLevel=E.b.WarningLogLevel,u.ErrorLogLevel=E.b.ErrorLogLevel,u.AllLogLevel=E.b.AllLogLevel,u.IsWindowObjectExist=F.k,u.PerformanceNoneLogLevel=0,u.PerformanceUserMarkLogLevel=1,u.PerformanceConsoleLogLevel=2,u.StartPerformanceCounter=u._StartPerformanceCounterDisabled,u.EndPerformanceCounter=u._EndPerformanceCounterDisabled;class g{constructor(V,I,A){let B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=V,this.index=B-1,this._done=!1,this._fn=I,this._successCallback=A}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(V,I,A){const B=new g(V,I,A,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return B.executeNext(),B}static SyncAsyncForLoop(V,I,A,B,F){let E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return g.Run(Math.ceil(V/I),(B=>{F&&F()?B.breakLoop():setTimeout((()=>{for(let E=0;E<I;++E){const Y=B.index*I+E;if(Y>=V)break;if(A(Y),F&&F()){B.breakLoop();break}}B.executeNext()}),E)}),B)}}u.Mix=t.k,u.IsExponentOfTwo=t.i,X.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11189:(V,I,A)=>{A.d(I,{b:()=>E,e:()=>F});const B={};function F(V,I){B[V]=I}function E(V){return B[V]}},11091:(V,I,A)=>{A.d(I,{b:()=>B});class B{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(B.CustomRequestHeaders).length>0||B.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const V in B.CustomRequestHeaders){const I=B.CustomRequestHeaders[V];I&&this._xhr.setRequestHeader(V,I)}}_shouldSkipRequestModifications(V){return B.SkipRequestModificationForBabylonCDN&&(V.includes("preview.babylonjs.com")||V.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(V){this._xhr.onprogress=V}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(V){this._xhr.responseType=V}get timeout(){return this._xhr.timeout}set timeout(V){this._xhr.timeout=V}addEventListener(V,I,A){this._xhr.addEventListener(V,I,A)}removeEventListener(V,I,A){this._xhr.removeEventListener(V,I,A)}abort(){this._xhr.abort()}send(V){B.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(V)}open(V,I){for(const A of B.CustomRequestModifiers){if(this._shouldSkipRequestModifications(I))return;I=A(this._xhr,I)||I}I=(I=I.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=I,this._xhr.open(V,I,!0)}setRequestHeader(V,I){this._xhr.setRequestHeader(V,I)}getResponseHeader(V){return this._xhr.getResponseHeader(V)}}B.CustomRequestHeaders={},B.CustomRequestModifiers=new Array,B.SkipRequestModificationForBabylonCDN=!0}}]);