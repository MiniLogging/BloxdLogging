"use strict";(self.n52dyox90qa=self.n52dyox90qa||[]).push([[8],{11712:(E,t,z)=>{z.d(t,{b:()=>W});var A=z(11667),X=z(11640),R=z(11717),u=z(11745),p=z(11649);class C{constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,E&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(E){this._zOffset!==E&&(this._zOffset=E,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(E){this._zOffsetUnits!==E&&(this._zOffsetUnits=E,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(E){this._cullFace!==E&&(this._cullFace=E,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(E){this._cull!==E&&(this._cull=E,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(E){this._depthFunc!==E&&(this._depthFunc=E,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(E){this._depthMask!==E&&(this._depthMask=E,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(E){this._depthTest!==E&&(this._depthTest=E,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(E){this._frontFace!==E&&(this._frontFace=E,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(E){this.isDirty&&(this._isCullDirty&&(this.cull?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(E.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(E.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(E.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(E.enable(E.POLYGON_OFFSET_FILL),E.polygonOffset(this.zOffset,this.zOffsetUnits)):E.disable(E.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(E.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class Z{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(E){this._func!==E&&(this._func=E,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(E){this._funcRef!==E&&(this._funcRef=E,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(E){this._funcMask!==E&&(this._funcMask=E,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(E){this._opStencilFail!==E&&(this._opStencilFail=E,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(E){this._opDepthFail!==E&&(this._opDepthFail=E,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(E){this._opStencilDepthPass!==E&&(this._opStencilDepthPass=E,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(E){this._mask!==E&&(this._mask=E,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(E){this._enabled!==E&&(this._enabled=E,this._isStencilTestDirty=!0)}constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,E&&this.reset()}reset(){var E;this.stencilMaterial=void 0,null===(E=this.stencilGlobal)||void 0===E||E.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(E){var t;if(!E)return;const z=!this.useStencilGlobalOnly&&!(null===(t=this.stencilMaterial)||void 0===t||!t.enabled);this.enabled=z?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=z?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=z?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=z?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=z?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=z?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=z?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=z?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?E.enable(E.STENCIL_TEST):E.disable(E.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(E.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(E.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(E.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class H{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=H.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=H.KEEP,this.opDepthFail=H.KEEP,this.opStencilDepthPass=H.REPLACE}get stencilFunc(){return this.func}set stencilFunc(E){this.func=E}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(E){this.funcRef=E}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(E){this.funcMask=E}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(E){this.opStencilFail=E}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(E){this.opDepthFail=E}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(E){this.opStencilDepthPass=E}get stencilMask(){return this.mask}set stencilMask(E){this.mask=E}get stencilTest(){return this.enabled}set stencilTest(E){this.enabled=E}}H.ALWAYS=519,H.KEEP=7680,H.REPLACE=7681;class h{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(E){this._alphaBlend!==E&&(this._alphaBlend=E,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(E,t,z,A){this._blendConstants[0]===E&&this._blendConstants[1]===t&&this._blendConstants[2]===z&&this._blendConstants[3]===A||(this._blendConstants[0]=E,this._blendConstants[1]=t,this._blendConstants[2]=z,this._blendConstants[3]=A,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(E,t,z,A){this._blendFunctionParameters[0]===E&&this._blendFunctionParameters[1]===t&&this._blendFunctionParameters[2]===z&&this._blendFunctionParameters[3]===A||(this._blendFunctionParameters[0]=E,this._blendFunctionParameters[1]=t,this._blendFunctionParameters[2]=z,this._blendFunctionParameters[3]=A,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(E,t){this._blendEquationParameters[0]===E&&this._blendEquationParameters[1]===t||(this._blendEquationParameters[0]=E,this._blendEquationParameters[1]=t,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(E){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?E.enable(E.BLEND):E.disable(E.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(E.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(E.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(E.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var d=z(11657),y=z(11751),O=z(11634),c=z(11632),a=z(11700),L=z(11759);function mE(E,t){if((0,O.m)()){const{requestAnimationFrame:z}=t||window;if("function"===typeof z)return z(E)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(E);return setTimeout(E,16)}class W{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(E){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(E){E!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=E,this._depthCullingState.depthFunc=E?518:515)}setColorWrite(E){E!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=E)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(E){if(E)return this.isNDCHalfZRange?E.IS_NDC_HALF_ZRANGE="":delete E.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?E.USE_REVERSE_DEPTHBUFFER="":delete E.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?E.USE_EXACT_SRGB_CONVERSIONS="":delete E.USE_EXACT_SRGB_CONVERSIONS);{let E="";return this.isNDCHalfZRange&&(E+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(E&&(E+="\n"),E+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(E&&(E+="\n"),E+="#define USE_EXACT_SRGB_CONVERSIONS"),E}}_rebuildInternalTextures(){const E=this._internalTexturesCache.slice();for(const t of E)t._rebuild()}_rebuildRenderTargetWrappers(){const E=this._renderTargetWrapperCache.slice();for(const t of E)t._rebuild()}_rebuildEffects(){for(const E in this._compiledEffects){const t=this._compiledEffects[E];t._pipelineContext=null,t._prepareEffect()}R.Effect.ResetCache()}_rebuildGraphicsResources(){var E;this.wipeCaches(!0),this._rebuildEffects(),null===(E=this._rebuildComputeEffects)||void 0===E||E.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){X.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(E){setTimeout((()=>{this._clearEmptyResources();const t=this._depthCullingState.depthTest,z=this._depthCullingState.depthFunc,A=this._depthCullingState.depthMask,X=this._stencilState.stencilTest;E(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=t,this._depthCullingState.depthFunc=z,this._depthCullingState.depthMask=A,this._stencilState.stencilTest=X,this._flagContextRestored()}),0)}get C(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(E){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(E){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const E=new Uint8Array(4),t=[E,E,E,E,E,E];this._emptyCubeTexture=this.createRawCubeTexture(t,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(E){if(!E)return this._activeRenderLoops.length=0,void this._cancelFrame();const t=this._activeRenderLoops.indexOf(E);t>=0&&(this._activeRenderLoops.splice(t,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const E=this._frameHandler;if(this._frameHandler=0,(0,O.m)()){const{cancelAnimationFrame:t}=this.getHostWindow()||window;if("function"===typeof t)return t(E)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(E);return clearTimeout(E)}}pz(){this.onBeginFrameObservable.notifyObservers(this)}nz(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(E){this._maxFPS=E,void 0!==E&&(this._minFrameTime=E<=0?Number.MAX_VALUE:1e3/E)}_isOverFrameTime(E){if(!E||void 0===this._maxFPS)return!1;const t=E-this._lastFrameTime;return this._lastFrameTime=E,this._renderAccumulator+=t,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(E){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(E)){let E=!0;(this.C||!this.renderEvenInBackground&&this._windowIsBackground)&&(E=!1),E&&(this.pz(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.nz())}}_renderLoop(E){this._processFrame(E),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let E=0;E<this._activeRenderLoops.length;E++){(0,this._activeRenderLoops[E])()}}_renderViews(){return!1}_queueNewFrame(E,t){return mE(E,t)}runRenderLoop(E){-1===this._activeRenderLoops.indexOf(E)&&(this._activeRenderLoops.push(E),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(E){this._depthCullingState.depthTest=E}setZOffset(E){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-E:E}getZOffset(){const E=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-E:E}setZOffsetUnits(E){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-E:E}getZOffsetUnits(){const E=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-E:E}getHostWindow(){return(0,O.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(E){this._compatibilityMode=!0}_rebuildTextures(){for(const E of this.scenes)E._rebuildTextures();for(const E of this._virtualScenes)E._rebuildTextures()}_releaseRenderTargetWrapper(E){const t=this._renderTargetWrapperCache.indexOf(E);-1!==t&&this._renderTargetWrapperCache.splice(t,1)}get currentViewport(){return this._cachedViewport}setViewport(E,t,z){const A=t||this.getRenderWidth(),X=z||this.getRenderHeight(),R=E.x||0,u=E.y||0;this._cachedViewport=E,this._viewport(R*A,u*X,A*E.width,X*E.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(E){return new Path2D(E)}get description(){let E=this.name+this.version;return this._caps.parallelShaderCompile&&(E+=" - Parallel shader compilation"),E}_createTextureBase(E,t,z,R){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Z=arguments.length>7?arguments[7]:void 0,H=arguments.length>8?arguments[8]:void 0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,O=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,c=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,a=arguments.length>13?arguments[13]:void 0,mE=arguments.length>14?arguments[14]:void 0,I=arguments.length>15?arguments[15]:void 0;const e="data:"===(E=E||"").substring(0,5),D="blob:"===E.substring(0,5),S=e&&-1!==E.indexOf(";base64,"),l=d||new y.e(this,1);l!==d&&(l.label=E.substring(0,60));const f=E;!this._transformTextureUrl||S||d||h||(E=this._transformTextureUrl(E)),f!==E&&(l._originalUrl=f);const K=E.lastIndexOf(".");let F=c||(K>-1?E.substring(K).toLowerCase():"");F.indexOf("?")>-1&&(F=F.split("?")[0]);const B=(0,L.d)(F,a);R&&R.addPendingData(l),l.url=E,l.generateMipMaps=!t,l.samplingMode=u,l.invertY=z,l._useSRGBBuffer=this._getUseSRGBBuffer(!!I,t),this._doNotHandleContextLost||(l._buffer=h);let b=null;p&&!d&&(b=l.onLoadedObservable.add(p)),d||this._internalTexturesCache.push(l);const x=(z,d)=>{R&&R.removePendingData(l),E===f?(b&&l.onLoadedObservable.remove(b),A.d.UseFallbackTexture&&E!==A.d.FallbackTexture&&this._createTextureBase(A.d.FallbackTexture,t,l.invertY,R,u,null,C,Z,H,h,l),z=(z||"Unknown error")+(A.d.UseFallbackTexture?" - Fallback texture was used":""),l.onErrorObservable.notifyObservers({message:z,exception:d}),C&&C(z,d)):(X.d.Warn(`Failed to load ${E}, falling back to ${f}`),this._createTextureBase(f,t,l.invertY,R,u,p,C,Z,H,h,l,O,c,a,mE,I))};if(B){const t=async E=>{(await B).loadData(E,l,((E,t,z,A,X,p)=>{p?x("TextureLoader failed to load data"):Z(l,F,R,{width:E,height:t},l.invertY,!z,A,(()=>(X(),!1)),u)}),mE)};h?h instanceof ArrayBuffer?t(new Uint8Array(h)):ArrayBuffer.isView(h)?t(h):C&&C("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(E,(E=>{t(new Uint8Array(E))}),void 0,R?R.offlineProvider:void 0,!0,((E,t)=>{x("Unable to load "+(E&&E.responseURL,t))}))}else{const z=E=>{D&&!this._doNotHandleContextLost&&(l._buffer=E),Z(l,F,R,E,l.invertY,t,!1,H,u)};!e||S?h&&("string"===typeof h.decoding||h.close)?z(h):W._FileToolsLoadImage(E||"",z,x,R?R.offlineProvider:null,a,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof h||h instanceof ArrayBuffer||ArrayBuffer.isView(h)||h instanceof Blob?W._FileToolsLoadImage(h,z,x,R?R.offlineProvider:null,a,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):h&&z(h)}return l}_rebuildBuffers(){for(const E of this._uniformBuffers)E._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,O.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const E in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,E)&&(this._boundTexturesCache[E]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(E){this._name=E}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(E){this._hardwareScalingLevel=E,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(E){this._doNotHandleContextLost=E}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(E,t,z){var X,R;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new C,this._stencilStateComposer=new Z,this._stencilState=new H,this._alphaState=new h,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new c.b,this.onCanvasFocusObservable=new c.b,this.onNewSceneAddedObservable=new c.b,this.onResizeObservable=new c.b,this.onCanvasPointerOutObservable=new c.b,this.onEffectErrorObservable=new c.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new c.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=E=>this._renderLoop(E),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new c.b,this.onAfterShaderCompilationObservable=new c.b,this.onBeginFrameObservable=new c.b,this.onEndFrameObservable=new c.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new c.b,this.onContextRestoredObservable=new c.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.IX=new c.b,this.onReleaseEffectsObservable=new c.b,A.d.Instances.push(this),this.startTime=p.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,u.c.SetMatrixPrecision(!!t.useHighPrecisionMatrix),(0,O.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=z??!1,t.antialias=E??t.antialias,t.deterministicLockstep=t.deterministicLockstep??!1,t.lockstepMaxSteps=t.lockstepMaxSteps??4,t.timeStep=t.timeStep??1/60,t.stencil=t.stencil??!0,this._audioContext=(null===(X=t.audioEngineOptions)||void 0===X?void 0:X.audioContext)??null,this._audioDestination=(null===(R=t.audioEngineOptions)||void 0===R?void 0:R.audioDestination)??null,this.premultipliedAlpha=t.premultipliedAlpha??!0,this._doNotHandleContextLost=!!t.doNotHandleContextLost,this._isStencilEnable=!!t.stencil,this.useExactSrgbConversions=t.useExactSrgbConversions??!1;const d=(0,O.m)()&&window.devicePixelRatio||1,y=t.limitDeviceRatio||d;z=z||t.adaptToDeviceRatio||!1,this._hardwareScalingLevel=z?1/Math.min(y,d):1,this._lastDevicePixelRatio=d,this._creationOptions=t}resize(){let E,t,z=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const E=(0,O.m)()&&window.devicePixelRatio||1,t=this._lastDevicePixelRatio/E;this._lastDevicePixelRatio=E,this._hardwareScalingLevel*=t}if((0,O.m)()&&(0,O.e)())if(this._renderingCanvas){var A,X;const z=null===(A=(X=this._renderingCanvas).getBoundingClientRect)||void 0===A?void 0:A.call(X);E=this._renderingCanvas.clientWidth||(null===z||void 0===z?void 0:z.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,t=this._renderingCanvas.clientHeight||(null===z||void 0===z?void 0:z.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else E=window.innerWidth,t=window.innerHeight;else E=this._renderingCanvas?this._renderingCanvas.width:100,t=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(E/this._hardwareScalingLevel,t/this._hardwareScalingLevel,z)}setSize(E,t){let z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(E|=0,t|=0,!z&&this._renderingCanvas.width===E&&this._renderingCanvas.height===t)return!1;if(this._renderingCanvas.width=E,this._renderingCanvas.height=t,this.scenes){for(let E=0;E<this.scenes.length;E++){const t=this.scenes[E];for(let E=0;E<t.cameras.length;E++){t.cameras[E]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(E,t,z,A,X,R,u,p,C,Z,H){throw(0,d.b)("engine.rawTexture")}createRawCubeTexture(E,t,z,A,X,R,u,p){throw(0,d.b)("engine.rawTexture")}createRawTexture3D(E,t,z,A,X,R,u,p,C,Z,H){throw(0,d.b)("engine.rawTexture")}createRawTexture2DArray(E,t,z,A,X,R,u,p,C,Z,H){throw(0,d.b)("engine.rawTexture")}_sharedInit(E){this._renderingCanvas=E}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const E=navigator.userAgent;this.hostInformation.isMobile=-1!==E.indexOf("Mobile")||-1!==E.indexOf("Mac")&&(0,O.e)()&&"ontouchend"in document},this._checkForMobile(),(0,O.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(E){return document.createElement("video")}_reportDrawCall(){var E;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(E=this._drawCalls)||void 0===E||E.addCount(t,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(E,t){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(E,t){return createImageBitmap(E,t)}resizeImageBitmap(E,t,z){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(E){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(E,t){if("undefined"===typeof document)return new OffscreenCanvas(E,t);const z=document.createElement("canvas");return z.width=E,z.height=t,z}createCanvas(E,t){return W._CreateCanvas(E,t)}static _FileToolsLoadImage(E,t,z,A,X,R,u){throw(0,d.b)("FileTools")}_loadFile(E,t,z,A,X,R){const u=(0,a.j)(E,t,z,A,X,R);return this._activeRequests.push(u),u.onCompleteObservable.add((()=>{const E=this._activeRequests.indexOf(u);-1!==E&&this._activeRequests.splice(E,1)})),u}static _FileToolsLoadFile(E,t,z,A,X,R){if(a.e.loadFile)return a.e.loadFile(E,t,z,A,X,R);throw(0,d.b)("FileTools")}dispose(){var E;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(E=this.releaseComputeEffects)||void 0===E||E.call(this),R.Effect.ResetCache();for(const z of this._activeRequests)z.abort();this._boundRenderFunction=null,this.IX.notifyObservers(this),this.IX.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,O.m)()&&window.removeEventListener("resize",this._checkForMobile);const t=A.d.Instances.indexOf(this);t>=0&&A.d.Instances.splice(t,1),A.d.Instances.length||(A.d.OnEnginesDisposedObservable.notifyObservers(this),A.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(E){throw(0,d.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(E,t){for(let z=0;z<A.d.Instances.length;z++){const X=A.d.Instances[z];for(let z=0;z<X.scenes.length;z++)X.scenes[z].markAllMaterialsAsDirty(E,t)}}}W._RenderPassIdCounter=0,W._RescalePostProcessFactory=null,W.CollisionsEpsilon=.001,W.QueueNewFrame=mE},11667:(E,t,z)=>{z.d(t,{d:()=>X});var A=z(11632);class X{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}X.Instances=[],X.OnEnginesDisposedObservable=new A.b,X._LastCreatedScene=null,X.UseFallbackTexture=!0,X.FallbackTexture=""},11745:(E,t,z)=>{z.d(t,{c:()=>A});class A{static SetMatrixPrecision(E){if(A.MatrixTrackPrecisionChange=!1,E&&!A.MatrixUse64Bits&&A.MatrixTrackedMatrices)for(let t=0;t<A.MatrixTrackedMatrices.length;++t){const E=A.MatrixTrackedMatrices[t],z=E.Ep;E.Ep=new Array(16);for(let t=0;t<16;++t)E.Ep[t]=z[t]}A.MatrixUse64Bits=E,A.MatrixCurrentType=A.MatrixUse64Bits?Array:Float32Array,A.MatrixTrackedMatrices=null}}A.MatrixUse64Bits=!1,A.MatrixTrackPrecisionChange=!0,A.MatrixCurrentType=Float32Array,A.MatrixTrackedMatrices=[]},11759:(E,t,z)=>{z.d(t,{d:()=>u});var A=z(11640);const X=new Map;function R(E,t){(function(E){return X.delete(E)})(E)&&A.d.Warn(`Extension with the name '${E}' already exists`),X.set(E,t)}function u(E,t){"image/ktx"!==t&&"image/ktx2"!==t||(E=".ktx"),X.has(E)||(E.endsWith(".ies")&&R(".ies",(async()=>await z.e(15).then(z.bind(z,14191)).then((E=>new E._IESTextureLoader)))),E.endsWith(".dds")&&R(".dds",(async()=>await Promise.all([z.e(14),z.e(17),z.e(13),z.e(19),z.e(18),z.e(28)]).then(z.bind(z,14195)).then((E=>new E._DDSTextureLoader)))),E.endsWith(".basis")&&R(".basis",(async()=>await Promise.all([z.e(14),z.e(17),z.e(13),z.e(47)]).then(z.bind(z,14205)).then((E=>new E._BasisTextureLoader)))),E.endsWith(".env")&&R(".env",(async()=>await Promise.all([z.e(14),z.e(17),z.e(13),z.e(19),z.e(18),z.e(23),z.e(21),z.e(45),z.e(48)]).then(z.bind(z,14207)).then((E=>new E._ENVTextureLoader)))),E.endsWith(".hdr")&&R(".hdr",(async()=>await Promise.all([z.e(14),z.e(49)]).then(z.bind(z,14216)).then((E=>new E._HDRTextureLoader)))),(E.endsWith(".ktx")||E.endsWith(".ktx2"))&&(R(".ktx",(async()=>await z.e(30).then(z.bind(z,14220)).then((E=>new E._KTXTextureLoader)))),R(".ktx2",(async()=>await z.e(30).then(z.bind(z,14220)).then((E=>new E._KTXTextureLoader))))),E.endsWith(".tga")&&R(".tga",(async()=>await z.e(50).then(z.bind(z,14229)).then((E=>new E._TGATextureLoader)))),E.endsWith(".exr")&&R(".exr",(async()=>await z.e(16).then(z.bind(z,14233)).then((E=>new E._ExrTextureLoader)))));const A=X.get(E);return A?Promise.resolve(A(t)):null}},11751:(E,t,z)=>{z.d(t,{e:()=>u});var A,X=z(11632),R=z(11756);!function(E){E[E.Unknown=0]="Unknown",E[E.Url=1]="Url",E[E.Temp=2]="Temp",E[E.Raw=3]="Raw",E[E.Dynamic=4]="Dynamic",E[E.RenderTarget=5]="RenderTarget",E[E.MultiRenderTarget=6]="MultiRenderTarget",E[E.Cube=7]="Cube",E[E.CubeRaw=8]="CubeRaw",E[E.CubePrefiltered=9]="CubePrefiltered",E[E.Raw3D=10]="Raw3D",E[E.Raw2DArray=11]="Raw2DArray",E[E.DepthStencil=12]="DepthStencil",E[E.CubeRawRGBD=13]="CubeRawRGBD",E[E.Depth=14]="Depth"}(A||(A={}));class u extends R.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(E){this.generateMipMaps=E}get uniqueId(){return this._uniqueId}_setUniqueId(E){this._uniqueId=E}getEngine(){return this._engine}get source(){return this._source}constructor(E,t){let z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new X.b,this.onErrorObservable=new X.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=E,this._source=t,this._uniqueId=u._Counter++,z||(this._hardwareTexture=E._createHardwareTexture())}incrementReferences(){this._references++}updateSize(E,t){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,E,t,z),this.width=E,this.height=t,this.depth=z,this.baseWidth=E,this.baseHeight=t,this.baseDepth=z,this._size=E*t*z}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const E=this.onRebuildCallback(this),t=t=>{t._swapAndDie(this,!1),this.isReady=E.isReady};return void(E.isAsync?E.proxy.then(t):t(E.proxy))}let E;switch(this.source){case 2:case 12:case 14:break;case 1:return void(E=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(E=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:E=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),E._swapAndDie(this,!1),this.isReady=!0;break;case 10:E=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 11:E=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 4:E=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),E._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(E=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:E=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),E._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return E=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(E=>{E&&E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(E._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(E){var t;let z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(t=this._hardwareTexture)||void 0===t||t.setUsage(E._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),E._hardwareTexture=this._hardwareTexture,z&&(E._isRGBD=this._isRGBD),this._lodTextureHigh&&(E._lodTextureHigh&&E._lodTextureHigh.dispose(),E._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(E._lodTextureMid&&E._lodTextureMid.dispose(),E._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(E._lodTextureLow&&E._lodTextureLow.dispose(),E._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(E._irradianceTexture&&E._irradianceTexture.dispose(),E._irradianceTexture=this._irradianceTexture);const A=this._engine.getLoadedTexturesCache();let X=A.indexOf(this);-1!==X&&A.splice(X,1),X=A.indexOf(E),-1===X&&A.push(E)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}u._Counter=0},11756:(E,t,z)=>{z.d(t,{d:()=>A});class A{get wrapU(){return this._cachedWrapU}set wrapU(E){this._cachedWrapU=E}get wrapV(){return this._cachedWrapV}set wrapV(E){this._cachedWrapV=E}get wrapR(){return this._cachedWrapR}set wrapR(E){this._cachedWrapR=E}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(E){this._cachedAnisotropicFilteringLevel=E}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(E){this._comparisonFunction=E}get useMipMaps(){return this._useMipMaps}set useMipMaps(E){this._useMipMaps=E}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=E,this._cachedWrapV=t,this._cachedWrapR=z,this._cachedAnisotropicFilteringLevel=A,this.samplingMode=X,this._comparisonFunction=R,this}compareSampler(E){return this._cachedWrapU===E._cachedWrapU&&this._cachedWrapV===E._cachedWrapV&&this._cachedWrapR===E._cachedWrapR&&this._cachedAnisotropicFilteringLevel===E._cachedAnisotropicFilteringLevel&&this.samplingMode===E.samplingMode&&this._comparisonFunction===E._comparisonFunction&&this._useMipMaps===E._useMipMaps}}},11647:(E,t,z)=>{z.d(t,{d:()=>R});var A=z(11640);const X=(E,t,z)=>E?E.getClassName&&"Mesh"===E.getClassName()?null:!E.getClassName||"SubMesh"!==E.getClassName()&&"PhysicsBody"!==E.getClassName()?E.clone?E.clone():Array.isArray(E)?E.slice():z&&"object"===typeof E?{...E}:null:E.clone(t):null;class R{static DeepCopy(E,t,z,R){let u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const p=function(E){const t=[];do{const z=Object.getOwnPropertyNames(E);for(const E of z)-1===t.indexOf(E)&&t.push(E)}while(E=Object.getPrototypeOf(E));return t}(E);for(const Z of p){if("_"===Z[0]&&(!R||-1===R.indexOf(Z)))continue;if(Z.endsWith("Observable"))continue;if(z&&-1!==z.indexOf(Z))continue;const p=E[Z],H=typeof p;if("function"!==H)try{if("object"===H)if(p instanceof Uint8Array)t[Z]=Uint8Array.from(p);else if(p instanceof Array){if(t[Z]=[],p.length>0)if("object"==typeof p[0])for(let E=0;E<p.length;E++){const z=X(p[E],t,u);-1===t[Z].indexOf(z)&&t[Z].push(z)}else t[Z]=p.slice(0)}else t[Z]=X(p,t,u);else t[Z]=p}catch(C){A.d.Warn(C.message)}}}}},11681:(E,t,z)=>{z.d(t,{c:()=>A,d:()=>X,g:()=>R});class A extends Error{}A._setPrototypeOf=Object.setPrototypeOf||((E,t)=>(E.__proto__=t,E));const X={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class R extends A{constructor(E,t,z){super(E),this.errorCode=t,this.innerError=z,this.name="RuntimeError",A._setPrototypeOf(this,R.prototype)}}},11674:(E,t,z)=>{z.d(t,{d:()=>x,h:()=>W,j:()=>K,l:()=>B,n:()=>l,m:()=>a,p:()=>D,r:()=>S,t:()=>f,v:()=>I});var A=z(11661),X=z(11634),R=z(11632);class u{}u.FilesToLoad={};var p=z(11681),C=z(11689),Z=z(11695),H=z(11667),h=z(11640),d=z(11707),y=z(11700),O=z(11712);const c=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class a extends p.g{constructor(E,t){super(E,p.d.LoadFileError),this.name="LoadFileError",p.c._setPrototypeOf(this,a.prototype),t instanceof A.d?this.request=t:this.file=t}}class L extends p.g{constructor(E,t){super(E,p.d.RequestFileError),this.request=t,this.name="RequestFileError",p.c._setPrototypeOf(this,L.prototype)}}class mE extends p.g{constructor(E,t){super(E,p.d.ReadFileError),this.file=t,this.name="ReadFileError",p.c._setPrototypeOf(this,mE.prototype)}}const W={DefaultRetryStrategy:class{static ExponentialBackoff(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(z,A,X)=>0!==A.status||X>=E||-1!==z.indexOf("file:")?-1:Math.pow(2,X)*t}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:E=>E,ScriptBaseUrl:"",ScriptPreprocessUrl:E=>E,CleanUrl:E=>E=E.replace(/#/gm,"%23")},I=(E,t)=>{if((!E||0!==E.indexOf("data:"))&&W.CorsBehavior)if("string"===typeof W.CorsBehavior||W.CorsBehavior instanceof String)t.crossOrigin=W.CorsBehavior;else{const z=W.CorsBehavior(E);z&&(t.crossOrigin=z)}},e={getRequiredSize:null},D=function(E,t,z,X){let R,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",Z=arguments.length>5?arguments[5]:void 0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:H.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===h||void 0===h||!h._features.forceBitmapOverHTMLImageElement))return z("LoadImage is only supported in web or BabylonNative environments."),null;let d=!1;E instanceof ArrayBuffer||ArrayBuffer.isView(E)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(R=URL.createObjectURL(new Blob([E],{type:p})),d=!0):R=`data:${p};base64,`+(0,C.k)(E):E instanceof Blob?(R=URL.createObjectURL(E),d=!0):(R=W.CleanUrl(E),R=W.PreprocessUrl(R));const y=t=>{if(z){const A=R||E.toString();z(`Error while trying to load image: ${0===A.indexOf("http")||A.length<=128?A:A.slice(0,128)+"..."}`,t)}};if(null!==h&&void 0!==h&&h._features.forceBitmapOverHTMLImageElement)return l(R,(A=>{h.createImageBitmap(new Blob([A],{type:p}),{premultiplyAlpha:"none",...Z}).then((E=>{t(E),d&&URL.revokeObjectURL(R)})).catch((t=>{z&&z("Error while trying to load image: "+E,t)}))}),void 0,X||void 0,!0,((E,t)=>{y(t)})),null;const O=new Image;if(e.getRequiredSize){const t=e.getRequiredSize(E);t.width&&(O.width=t.width),t.height&&(O.height=t.height)}I(R,O);const c=[],a=()=>{for(const E of c)E.target.removeEventListener(E.name,E.handler);c.length=0};c.push({target:O,name:"load",handler:()=>{a(),t(O),d&&O.src&&URL.revokeObjectURL(O.src)}}),c.push({target:O,name:"error",handler:E=>{a(),y(E),d&&O.src&&URL.revokeObjectURL(O.src)}}),c.push({target:document,name:"securitypolicyviolation",handler:E=>{if(E.blockedURI!==O.src||"tp"===E.disposition)return;a();const t=new Error(`CSP violation of policy ${E.effectiveDirective} ${E.blockedURI}. Current policy is ${E.originalPolicy}`);H.d.UseFallbackTexture=!1,y(t),d&&O.src&&URL.revokeObjectURL(O.src),O.src=""}}),(()=>{for(const E of c)E.target.addEventListener(E.name,E.handler)})();const L="blob:"===R.substring(0,5),mE="data:"===R.substring(0,5),D=()=>{L||mE||!A.d.IsCustomRequestAvailable?O.src=R:l(R,((E,t,z)=>{const A=new Blob([E],{type:!p&&z?z:p}),X=URL.createObjectURL(A);d=!0,O.src=X}),void 0,X||void 0,!0,((E,t)=>{y(t)}))},S=()=>{X&&X.loadImage(R,O)};if(!L&&!mE&&X&&X.enableTexturesOffline)X.open(S,D);else{if(-1!==R.indexOf("file:")){const E=decodeURIComponent(R.substring(5).toLowerCase());if(u.FilesToLoad[E]&&"undefined"!==typeof URL){try{let t;try{t=URL.createObjectURL(u.FilesToLoad[E])}catch(f){t=URL.createObjectURL(u.FilesToLoad[E])}O.src=t,d=!0}catch(K){O.src=""}return O}}D()}return O},S=(E,t,z,A,X)=>{const u=new FileReader,p={onCompleteObservable:new R.b,abort:()=>u.abort()};return u.onloadend=()=>p.onCompleteObservable.notifyObservers(p),X&&(u.onerror=()=>{X(new mE(`Unable to read ${E.name}`,E))}),u.onload=E=>{t(E.target.result)},z&&(u.onprogress=z),A?u.readAsArrayBuffer(E):u.readAsText(E),p},l=(E,t,z,A,X,C,Z)=>{if(E.name)return S(E,t,z,X,C?E=>{C(void 0,E)}:void 0);const H=E;if(-1!==H.indexOf("file:")){let E=decodeURIComponent(H.substring(5).toLowerCase());0===E.indexOf("./")&&(E=E.substring(2));const A=u.FilesToLoad[E];if(A)return S(A,t,z,X,C?E=>C(void 0,new a(E.message,E.file)):void 0)}const{match:y,type:O}=b(H);if(y){const E={onCompleteObservable:new R.b,abort:()=>()=>{}};try{const E=X?x(H):J(H);t(E,void 0,O)}catch(p){C?C(void 0,p):h.d.Error(p.message||"Failed to parse the Data URL")}return d.c.SetImmediate((()=>{E.onCompleteObservable.notifyObservers(E)})),E}return f(H,((E,z)=>{t(E,null===z||void 0===z?void 0:z.responseURL,null===z||void 0===z?void 0:z.getResponseHeader("content-type"))}),z,A,X,C?E=>{C(E.request,new a(E.message,E.request))}:void 0,Z)},f=(E,t,z,u,p,C,Z)=>{E=W.CleanUrl(E),E=W.PreprocessUrl(E);const H=W.BaseUrl+E;let d=!1;const y={onCompleteObservable:new R.b,abort:()=>d=!0},O=()=>{let E,R=new A.d,u=null;const O=()=>{R&&(z&&R.removeEventListener("progress",z),E&&R.removeEventListener("readystatechange",E),R.removeEventListener("loadend",c))};let c=()=>{O(),y.onCompleteObservable.notifyObservers(y),y.onCompleteObservable.clear(),z=void 0,E=null,c=null,C=void 0,Z=void 0,t=void 0};y.abort=()=>{d=!0,c&&c(),R&&R.readyState!==(XMLHttpRequest.DONE||4)&&R.abort(),null!==u&&(clearTimeout(u),u=null),R=null};const a=E=>{const t=E.message||"Unknown error";C&&R?C(new L(t,R)):h.d.Error(t)},mE=h=>{if(R){if(R.open("GET",H),Z)try{Z(R)}catch(y){return void a(y)}p&&(R.responseType="arraybuffer"),z&&R.addEventListener("progress",z),c&&R.addEventListener("loadend",c),E=()=>{if(!d&&R&&R.readyState===(XMLHttpRequest.DONE||4)){if(E&&R.removeEventListener("readystatechange",E),R.status>=200&&R.status<300||0===R.status&&(!(0,X.m)()||F())){const E=p?R.response:R.responseText;if(null!==E){try{t&&t(E,R)}catch(y){a(y)}return}}const z=W.DefaultRetryStrategy;if(z){const E=z(H,R,h);if(-1!==E)return O(),R=new A.d,void(u=setTimeout((()=>mE(h+1)),E))}const Z=new L("Error status: "+R.status+" "+R.statusText+" - Unable to load "+H,R);C&&C(Z)}},R.addEventListener("readystatechange",E),R.send()}};mE(0)};if(u&&u.enableSceneOffline){const A=E=>{E&&E.status>400?C&&C(E):O()},X=()=>{u&&u.loadFile(W.BaseUrl+E,(E=>{!d&&t&&t(E),y.onCompleteObservable.notifyObservers(y)}),z?E=>{!d&&z&&z(E)}:void 0,A,p)};u.open(X,A)}else O();return y},K=E=>{const{match:t,type:z}=b(E);if(t)return z||void 0;const A=E.lastIndexOf(".");switch(E.substring(A+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"zp":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},F=()=>"undefined"!==typeof location&&"file:"===location.protocol,B=E=>c.test(E),b=E=>{const t=c.exec(E);if(null===t||0===t.length)return{match:!1,type:""};return{match:!0,type:t[0].replace("data:","").replace("base64,","")}};function x(E){return(0,C.e)(E.split(",")[1])}const J=E=>(0,C.f)(E.split(",")[1]);let V;O.b._FileToolsLoadImage=D,y.e.loadFile=l,Z.k.loadFile=l;((E,t,z,A,X,R,u,p,C,Z)=>{V={DecodeBase64UrlToBinary:E,DecodeBase64UrlToString:t,DefaultRetryStrategy:z.DefaultRetryStrategy,BaseUrl:z.BaseUrl,CorsBehavior:z.CorsBehavior,PreprocessUrl:z.PreprocessUrl,IsBase64DataUrl:A,IsFileURL:X,LoadFile:R,LoadImage:u,ReadFile:p,RequestFile:C,SetCorsBehavior:Z},Object.defineProperty(V,"DefaultRetryStrategy",{get:function(){return z.DefaultRetryStrategy},set:function(E){z.DefaultRetryStrategy=E}}),Object.defineProperty(V,"BaseUrl",{get:function(){return z.BaseUrl},set:function(E){z.BaseUrl=E}}),Object.defineProperty(V,"PreprocessUrl",{get:function(){return z.PreprocessUrl},set:function(E){z.PreprocessUrl=E}}),Object.defineProperty(V,"CorsBehavior",{get:function(){return z.CorsBehavior},set:function(E){z.CorsBehavior=E}})})(x,J,W,B,F,l,D,S,f,I)},11772:(E,t,z)=>{function A(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(E=>{const t=16*Math.random()|0;return("x"===E?t:3&t|8).toString(16)}))}z.d(t,{d:()=>A})},11761:(E,t,z)=>{z.d(t,{b:()=>R});var A=z(11640),X=z(11766);class R{static Instantiate(E){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[E])return this.RegisteredExternalClasses[E];const t=(0,X.d)(E);if(t)return t;A.d.Warn(E+" not found, you may have missed an import.");const z=E.split(".");let R=window||this;for(let A=0,X=z.length;A<X;A++)R=R[z[A]];return"function"!==typeof R?null:R}}R.RegisteredExternalClasses={}},11649:(E,t,z)=>{z.d(t,{c:()=>X});var A=z(11634);class X{static get Now(){return(0,A.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11689:(E,t,z)=>{z.d(t,{e:()=>u,f:()=>R,h:()=>A,k:()=>X});const A=E=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(E);let t="";for(let z=0;z<E.byteLength;z++)t+=String.fromCharCode(E[z]);return t},X=E=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let z,A,X,R,u,p,C,Z="",H=0;const h=ArrayBuffer.isView(E)?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(E);for(;H<h.length;)z=h[H++],A=H<h.length?h[H++]:Number.NaN,X=H<h.length?h[H++]:Number.NaN,R=z>>2,u=(3&z)<<4|A>>4,p=(15&A)<<2|X>>6,C=63&X,isNaN(A)?p=C=64:isNaN(X)&&(C=64),Z+=t.charAt(R)+t.charAt(u)+t.charAt(p)+t.charAt(C);return Z},R=E=>atob(E),u=E=>{const t=R(E),z=t.length,A=new Uint8Array(new ArrayBuffer(z));for(let X=0;X<z;X++)A[X]=t.charCodeAt(X);return A.buffer}},11778:(E,t,z)=>{function A(E){let t=1;do{t*=2}while(t<E);return t===E}function X(E,t,z){return E*(1-z)+t*z}function R(E){const t=u(E),z=p(E);return t-E>E-z?z:t}function u(E){return E--,E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,E|=E>>16,++E}function p(E){return E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,(E|=E>>16)-(E>>1)}function C(E,t){let z;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:z=p(E);break;case 2:z=R(E);break;default:z=u(E)}return Math.min(z,t)}z.d(t,{b:()=>p,d:()=>C,g:()=>A,i:()=>X,m:()=>R})},11630:(E,t,z)=>{z.r(t),z.d(t,{AsyncLoop:()=>mE,Tools:()=>a,className:()=>L});var A=z(11632),X=z(11634),R=z(11640),u=z(11647),p=z(11649),C=z(11657),Z=z(11661),H=z(11667),h=z(11674),d=z(11707),y=z(11761),O=z(11772),c=z(11778);class a{static get BaseUrl(){return h.h.BaseUrl}static set BaseUrl(E){h.h.BaseUrl=E}static get CleanUrl(){return h.h.CleanUrl}static set CleanUrl(E){h.h.CleanUrl=E}static IsAbsoluteUrl(E){return 0===E.indexOf("//")||-1!==E.indexOf("://")&&(-1!==E.indexOf(".")&&(-1!==E.indexOf("/")&&(!(E.indexOf(":")>E.indexOf("/"))&&(E.indexOf("://")<E.indexOf(".")||(0===E.indexOf("data:")||0===E.indexOf("blob:"))))))}static set ScriptBaseUrl(E){h.h.ScriptBaseUrl=E}static get ScriptBaseUrl(){return h.h.ScriptBaseUrl}static set CDNBaseUrl(E){a.ScriptBaseUrl=E,a.AssetBaseUrl=E}static set ScriptPreprocessUrl(E){h.h.ScriptPreprocessUrl=E}static get ScriptPreprocessUrl(){return h.h.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return h.h.DefaultRetryStrategy}static set DefaultRetryStrategy(E){h.h.DefaultRetryStrategy=E}static get CorsBehavior(){return h.h.CorsBehavior}static set CorsBehavior(E){h.h.CorsBehavior=E}static get UseFallbackTexture(){return H.d.UseFallbackTexture}static set UseFallbackTexture(E){H.d.UseFallbackTexture=E}static get RegisteredExternalClasses(){return y.b.RegisteredExternalClasses}static set RegisteredExternalClasses(E){y.b.RegisteredExternalClasses=E}static get fallbackTexture(){return H.d.FallbackTexture}static set fallbackTexture(E){H.d.FallbackTexture=E}static FetchToRef(E,t,z,A,X,R){const u=4*((Math.abs(E)*z%z|0)+(Math.abs(t)*A%A|0)*z);R.r=X[u]/255,R.g=X[u+1]/255,R.b=X[u+2]/255,R.a=X[u+3]/255}static Mix(E,t,z){return 0}static Instantiate(E){return y.b.Instantiate(E)}static SetImmediate(E){d.c.SetImmediate(E)}static IsExponentOfTwo(E){return!0}static FloatRound(E){return Math.fround(E)}static GetFilename(E){const t=E.lastIndexOf("/");return t<0?E:E.substring(t+1)}static GetFolderPath(E){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const z=E.lastIndexOf("/");return z<0?t?E:"":E.substring(0,z+1)}static ToDegrees(E){return 180*E/Math.PI}static ToRadians(E){return E*Math.PI/180}static SmoothAngleChange(E,t){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const A=this.ToRadians(E),X=this.ToRadians(t);return this.ToDegrees(Math.atan2((1-z)*Math.sin(X)+z*Math.sin(A),(1-z)*Math.cos(X)+z*Math.cos(A)))}static MakeArray(E,t){return!0===t||void 0!==E&&null!=E?Array.isArray(E)?E:[E]:null}static GetPointerPrefix(E){return(0,X.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(E,t){(0,h.v)(E,t)}static SetReferrerPolicyBehavior(E,t){t.referrerPolicy=E}static get PreprocessUrl(){return h.h.PreprocessUrl}static set PreprocessUrl(E){h.h.PreprocessUrl=E}static LoadImage(E,t,z,A,X,R){return(0,h.p)(E,t,z,A,X,R)}static LoadFile(E,t,z,A,X,R){return(0,h.n)(E,t,z,A,X,R)}static async LoadFileAsync(E){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((z,A)=>{(0,h.n)(E,(E=>{z(E)}),void 0,void 0,t,((E,t)=>{A(t)}))}))}static GetAssetUrl(E){if(!E)return"";if(a.AssetBaseUrl&&E.startsWith(a._DefaultAssetsUrl)){const t="/"===a.AssetBaseUrl[a.AssetBaseUrl.length-1]?a.AssetBaseUrl.substring(0,a.AssetBaseUrl.length-1):a.AssetBaseUrl;return E.replace(a._DefaultAssetsUrl,t)}return E}static GetBabylonScriptURL(E,t){if(!E)return"";if(a.ScriptBaseUrl&&E.startsWith(a._DefaultCdnUrl)){const t="/"===a.ScriptBaseUrl[a.ScriptBaseUrl.length-1]?a.ScriptBaseUrl.substring(0,a.ScriptBaseUrl.length-1):a.ScriptBaseUrl;E=E.replace(a._DefaultCdnUrl,t)}return E=a.ScriptPreprocessUrl(E),t&&(E=a.GetAbsoluteUrl(E)),E}static LoadBabylonScript(E,t,z,A){E=a.GetBabylonScriptURL(E),a.LoadScript(E,t,z)}static async LoadBabylonScriptAsync(E){return E=a.GetBabylonScriptURL(E),await a.LoadScriptAsync(E)}static LoadScript(E,t,z,A){let R=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(E),t&&t()}catch(C){null===z||void 0===z||z(`Unable to load script '${E}' in worker`,C)}return}if(!(0,X.m)())return void(null===z||void 0===z||z(`Cannot load script '${E}' outside of a window or a worker`));const u=document.getElementsByTagName("head")[0],p=document.createElement("script");R?(p.setAttribute("type","module"),p.innerText=E):(p.setAttribute("type","text/javascript"),p.setAttribute("src",E)),A&&(p.id=A),p.onload=()=>{t&&t()},p.onerror=t=>{z&&z(`Unable to load script '${E}'`,t)},u.appendChild(p)}static async LoadScriptAsync(E,t){return await new Promise(((z,A)=>{this.LoadScript(E,(()=>{z()}),((E,t)=>{A(t||new Error(E))}),t)}))}static ReadFileAsDataURL(E,t,z){const X=new FileReader,R={onCompleteObservable:new A.b,abort:()=>X.abort()};return X.onloadend=()=>{R.onCompleteObservable.notifyObservers(R)},X.onload=E=>{t(E.target.result)},X.onprogress=z,X.readAsDataURL(E),R}static ReadFile(E,t,z,A,X){return(0,h.r)(E,t,z,A,X)}static FileAsURL(E){const t=new Blob([E]);return window.URL.createObjectURL(t)}static Format(E){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return E.toFixed(t)}static DeepCopy(E,t,z,A){u.d.DeepCopy(E,t,z,A)}static IsEmpty(E){for(const t in E)if(Object.prototype.hasOwnProperty.call(E,t))return!1;return!0}static RegisterTopRootEvents(E,t){for(let A=0;A<t.length;A++){const X=t[A];E.addEventListener(X.name,X.handler,!1);try{window.parent&&window.parent.addEventListener(X.name,X.handler,!1)}catch(z){}}}static UnregisterTopRootEvents(E,t){for(let A=0;A<t.length;A++){const X=t[A];E.removeEventListener(X.name,X.handler);try{E.parent&&E.parent.removeEventListener(X.name,X.handler)}catch(z){}}}static async DumpFramebuffer(E,t,z,A){throw(0,C.b)("DumpTools")}static DumpData(E,t,z,A){throw(0,C.b)("DumpTools")}static async DumpDataAsync(E,t,z){throw(0,C.b)("DumpTools")}static _IsOffScreenCanvas(E){return void 0!==E.convertToBlob}static ToBlob(E,t){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0;a._IsOffScreenCanvas(E)||E.toBlob||(E.toBlob=function(E,t,z){setTimeout((()=>{const A=atob(this.toDataURL(t,z).split(",")[1]),X=A.length,R=new Uint8Array(X);for(let E=0;E<X;E++)R[E]=A.charCodeAt(E);E(new Blob([R]))}))}),a._IsOffScreenCanvas(E)?E.convertToBlob({type:z,quality:A}).then((E=>t(E))):E.toBlob((function(E){t(E)}),z,A)}static DownloadBlob(E,t){if("download"in document.createElement("a")){if(!t){const E=new Date;t="screenshot_"+((E.getFullYear()+"-"+(E.getMonth()+1)).slice(2)+"-"+E.getDate()+"_"+E.getHours()+"-"+("0"+E.getMinutes()).slice(-2))+".png"}a.Download(E,t)}else if(E&&"undefined"!==typeof URL){const t=URL.createObjectURL(E),z=window.open("");if(!z)return;const A=z.document.createElement("img");A.onload=function(){URL.revokeObjectURL(t)},A.src=t,z.document.body.appendChild(A)}}static EncodeScreenshotCanvasData(E,t){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0,X=arguments.length>4?arguments[4]:void 0;if("string"!==typeof A&&t){if(t){if(a._IsOffScreenCanvas(E))return void E.convertToBlob({type:z,quality:X}).then((E=>{const z=new FileReader;z.readAsDataURL(E),z.onloadend=()=>{const E=z.result;t(E)}}));const A=E.toDataURL(z,X);t(A)}}else this.ToBlob(E,(function(E){E&&a.DownloadBlob(E,A),t&&t("")}),z,X)}static Download(E,t){if("undefined"===typeof URL)return;const z=window.URL.createObjectURL(E),A=document.createElement("a");document.body.appendChild(A),A.style.display="none",A.href=z,A.download=t,A.addEventListener("click",(()=>{A.parentElement&&A.parentElement.removeChild(A)})),A.click(),window.URL.revokeObjectURL(z)}static BackCompatCameraNoPreventDefault(E){return"boolean"===typeof E[0]?E[0]:"boolean"===typeof E[1]&&E[1]}static CreateScreenshot(E,t,z,A){throw(0,C.b)("ScreenshotTools")}static async CreateScreenshotAsync(E,t,z){throw(0,C.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(E,t,z,A){throw(0,C.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(E,t,z){throw(0,C.b)("ScreenshotTools")}static RandomId(){return(0,O.d)()}static IsBase64(E){return(0,h.l)(E)}static DecodeBase64(E){return(0,h.d)(E)}static get errorsCount(){return R.d.errorsCount}static Log(E){R.d.Log(E)}static Warn(E){R.d.Warn(E)}static Error(E){R.d.Error(E)}static get LogCache(){return R.d.LogCache}static ClearLogCache(){R.d.ClearLogCache()}static set LogLevels(E){R.d.LogLevels=E}static set PerformanceLogLevel(E){return(E&a.PerformanceUserMarkLogLevel)===a.PerformanceUserMarkLogLevel?(a.StartPerformanceCounter=a._StartUserMark,void(a.EndPerformanceCounter=a._EndUserMark)):(E&a.PerformanceConsoleLogLevel)===a.PerformanceConsoleLogLevel?(a.StartPerformanceCounter=a._StartPerformanceConsole,void(a.EndPerformanceCounter=a._EndPerformanceConsole)):(a.StartPerformanceCounter=a._StartPerformanceCounterDisabled,void(a.EndPerformanceCounter=a._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(E,t){}static _EndPerformanceCounterDisabled(E,t){}static _StartUserMark(E){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a._Performance){if(!(0,X.m)())return;a._Performance=window.performance}t&&a._Performance.mark&&a._Performance.mark(E+"-Begin")}static _EndUserMark(E){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&a._Performance.mark&&(a._Performance.mark(E+"-End"),a._Performance.measure(E,E+"-Begin",E+"-End"))}static _StartPerformanceConsole(E){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(a._StartUserMark(E,t),console.time&&console.time(E))}static _EndPerformanceConsole(E){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(a._EndUserMark(E,t),console.timeEnd(E))}static get Now(){return p.c.Now}static GetClassName(E){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],z=null;if(!t&&E.getClassName)z=E.getClassName();else{if(E instanceof Object){z=(t?E:Object.getPrototypeOf(E)).constructor.__bjsclassName__}z||(z=typeof E)}return z}static First(E,t){for(const z of E)if(t(z))return z;return null}static getFullClassName(E){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],z=null,A=null;if(!t&&E.getClassName)z=E.getClassName();else{if(E instanceof Object){const X=t?E:Object.getPrototypeOf(E);z=X.constructor.__bjsclassName__,A=X.constructor.__bjsmoduleName__}z||(z=typeof E)}return z?(null!=A?A+".":"")+z:null}static async DelayAsync(E){await new Promise((t=>{setTimeout((()=>{t()}),E)}))}static IsSafari(){return!!(0,X.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function L(E,t){return z=>{z.__bjsclassName__=E,z.__bjsmoduleName__=null!=t?t:null}}a.AssetBaseUrl="",a.UseCustomRequestHeaders=!1,a.CustomRequestHeaders=Z.d.CustomRequestHeaders,a.GetDOMTextContent=X.b,a._DefaultCdnUrl="https://cdn.babylonjs.com",a._DefaultAssetsUrl="https://assets.babylonjs.com/core",a.GetAbsoluteUrl="object"===typeof document?E=>{const t=document.createElement("a");return t.href=E,t.href}:"function"===typeof URL&&"object"===typeof location?E=>new URL(E,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},a.NoneLogLevel=R.d.NoneLogLevel,a.MessageLogLevel=R.d.MessageLogLevel,a.WarningLogLevel=R.d.WarningLogLevel,a.ErrorLogLevel=R.d.ErrorLogLevel,a.AllLogLevel=R.d.AllLogLevel,a.IsWindowObjectExist=X.m,a.PerformanceNoneLogLevel=0,a.PerformanceUserMarkLogLevel=1,a.PerformanceConsoleLogLevel=2,a.StartPerformanceCounter=a._StartPerformanceCounterDisabled,a.EndPerformanceCounter=a._EndPerformanceCounterDisabled;class mE{constructor(E,t,z){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=E,this.index=A-1,this._done=!1,this._fn=t,this._successCallback=z}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(E,t,z){const A=new mE(E,t,z,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return A.executeNext(),A}static SyncAsyncForLoop(E,t,z,A,X){let R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return mE.Run(Math.ceil(E/t),(A=>{X&&X()?A.breakLoop():setTimeout((()=>{for(let R=0;R<t;++R){const u=A.index*t+R;if(u>=E)break;if(z(u),X&&X()){A.breakLoop();break}}A.executeNext()}),R)}),A)}}a.Mix=c.i,a.IsExponentOfTwo=c.g,H.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11766:(E,t,z)=>{z.d(t,{d:()=>R,f:()=>X});const A={};function X(E,t){A[E]=t}function R(E){return A[E]}},11661:(E,t,z)=>{z.d(t,{d:()=>A});class A{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(A.CustomRequestHeaders).length>0||A.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const E in A.CustomRequestHeaders){const t=A.CustomRequestHeaders[E];t&&this._xhr.setRequestHeader(E,t)}}_shouldSkipRequestModifications(E){return A.SkipRequestModificationForBabylonCDN&&(E.includes("preview.babylonjs.com")||E.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(E){this._xhr.onprogress=E}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(E){this._xhr.responseType=E}get timeout(){return this._xhr.timeout}set timeout(E){this._xhr.timeout=E}addEventListener(E,t,z){this._xhr.addEventListener(E,t,z)}removeEventListener(E,t,z){this._xhr.removeEventListener(E,t,z)}abort(){this._xhr.abort()}send(E){A.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(E)}open(E,t){for(const z of A.CustomRequestModifiers){if(this._shouldSkipRequestModifications(t))return;t=z(this._xhr,t)||t}t=(t=t.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=t,this._xhr.open(E,t,!0)}setRequestHeader(E,t){this._xhr.setRequestHeader(E,t)}getResponseHeader(E){return this._xhr.getResponseHeader(E)}}A.CustomRequestHeaders={},A.CustomRequestModifiers=new Array,A.SkipRequestModificationForBabylonCDN=!0}}]);