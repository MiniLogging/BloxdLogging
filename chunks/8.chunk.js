"use strict";(self["9d4d30r2sf"]=self["9d4d30r2sf"]||[]).push([[8],{12381:(o,v,V)=>{V.d(v,{c:()=>t});var g=V(12339),E=V(12308),I=V(12390),Q=V(12410),U=V(12321);class n{constructor(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,o&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(o){this._zOffset!==o&&(this._zOffset=o,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(o){this._zOffsetUnits!==o&&(this._zOffsetUnits=o,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(o){this._cullFace!==o&&(this._cullFace=o,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(o){this._cull!==o&&(this._cull=o,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(o){this._depthFunc!==o&&(this._depthFunc=o,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(o){this._depthMask!==o&&(this._depthMask=o,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(o){this._depthTest!==o&&(this._depthTest=o,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(o){this._frontFace!==o&&(this._frontFace=o,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(o){this.isDirty&&(this._isCullDirty&&(this.cull?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(o.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(o.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(o.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(this.zOffset,this.zOffsetUnits)):o.disable(o.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(o.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class O{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(o){this._func!==o&&(this._func=o,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(o){this._funcRef!==o&&(this._funcRef=o,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(o){this._funcMask!==o&&(this._funcMask=o,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(o){this._opStencilFail!==o&&(this._opStencilFail=o,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(o){this._opDepthFail!==o&&(this._opDepthFail=o,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(o){this._opStencilDepthPass!==o&&(this._opStencilDepthPass=o,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(o){this._mask!==o&&(this._mask=o,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(o){this._enabled!==o&&(this._enabled=o,this._isStencilTestDirty=!0)}constructor(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,o&&this.reset()}reset(){var o;this.stencilMaterial=void 0,null===(o=this.stencilGlobal)||void 0===o||o.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(o){var v;if(!o)return;const V=!this.useStencilGlobalOnly&&!(null===(v=this.stencilMaterial)||void 0===v||!v.enabled);this.enabled=V?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=V?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=V?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=V?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=V?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=V?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=V?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=V?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(o.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(o.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(o.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class h{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=h.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=h.KEEP,this.opDepthFail=h.KEEP,this.opStencilDepthPass=h.REPLACE}get stencilFunc(){return this.func}set stencilFunc(o){this.func=o}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(o){this.funcRef=o}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(o){this.funcMask=o}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(o){this.opStencilFail=o}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(o){this.opDepthFail=o}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(o){this.opStencilDepthPass=o}get stencilMask(){return this.mask}set stencilMask(o){this.mask=o}get stencilTest(){return this.enabled}set stencilTest(o){this.enabled=o}}h.ALWAYS=519,h.KEEP=7680,h.REPLACE=7681;class x{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(o){this._alphaBlend!==o&&(this._alphaBlend=o,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(o,v,V,g){this._blendConstants[0]===o&&this._blendConstants[1]===v&&this._blendConstants[2]===V&&this._blendConstants[3]===g||(this._blendConstants[0]=o,this._blendConstants[1]=v,this._blendConstants[2]=V,this._blendConstants[3]=g,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(o,v,V,g){this._blendFunctionParameters[0]===o&&this._blendFunctionParameters[1]===v&&this._blendFunctionParameters[2]===V&&this._blendFunctionParameters[3]===g||(this._blendFunctionParameters[0]=o,this._blendFunctionParameters[1]=v,this._blendFunctionParameters[2]=V,this._blendFunctionParameters[3]=g,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(o,v){this._blendEquationParameters[0]===o&&this._blendEquationParameters[1]===v||(this._blendEquationParameters[0]=o,this._blendEquationParameters[1]=v,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(o){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?o.enable(o.BLEND):o.disable(o.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(o.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(o.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(o.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var f=V(12325),l=V(12418),S=V(12302),T=V(12297),c=V(12370),R=V(12436);function j(o,v){if((0,S.n)()){const{requestAnimationFrame:V}=v||window;if("function"===typeof V)return V(o)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(o);return setTimeout(o,16)}class t{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(o){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Ug(){return this._useReverseDepthBuffer}set Ug(o){o!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=o,this._depthCullingState.depthFunc=o?518:515)}setColorWrite(o){o!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=o)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(o){if(o)return this.isNDCHalfZRange?o.IS_NDC_HALF_ZRANGE="":delete o.IS_NDC_HALF_ZRANGE,this.Ug?o.USE_REVERSE_DEPTHBUFFER="":delete o.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?o.USE_EXACT_SRGB_CONVERSIONS="":delete o.USE_EXACT_SRGB_CONVERSIONS);{let o="";return this.isNDCHalfZRange&&(o+="#define IS_NDC_HALF_ZRANGE"),this.Ug&&(o&&(o+="\n"),o+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(o&&(o+="\n"),o+="#define USE_EXACT_SRGB_CONVERSIONS"),o}}_rebuildInternalTextures(){const o=this._internalTexturesCache.slice();for(const v of o)v._rebuild()}_rebuildRenderTargetWrappers(){const o=this._renderTargetWrapperCache.slice();for(const v of o)v._rebuild()}_rebuildEffects(){for(const o in this._compiledEffects){const v=this._compiledEffects[o];v._pipelineContext=null,v._prepareEffect()}I.Effect.ResetCache()}_rebuildGraphicsResources(){var o;this.wipeCaches(!0),this._rebuildEffects(),null===(o=this._rebuildComputeEffects)||void 0===o||o.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){E.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(o){setTimeout((()=>{this._clearEmptyResources();const v=this._depthCullingState.depthTest,V=this._depthCullingState.depthFunc,g=this._depthCullingState.depthMask,E=this._stencilState.stencilTest;o(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=v,this._depthCullingState.depthFunc=V,this._depthCullingState.depthMask=g,this._stencilState.stencilTest=E,this._flagContextRestored()}),0)}get l(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(o){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(o){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const o=new Uint8Array(4),v=[o,o,o,o,o,o];this._emptyCubeTexture=this.createRawCubeTexture(v,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(o){if(!o)return this._activeRenderLoops.length=0,void this._cancelFrame();const v=this._activeRenderLoops.indexOf(o);v>=0&&(this._activeRenderLoops.splice(v,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const o=this._frameHandler;if(this._frameHandler=0,(0,S.n)()){const{cancelAnimationFrame:v}=this.getHostWindow()||window;if("function"===typeof v)return v(o)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(o);return clearTimeout(o)}}hg(){this.onBeginFrameObservable.notifyObservers(this)}fg(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(o){this._maxFPS=o,void 0!==o&&(this._minFrameTime=o<=0?Number.MAX_VALUE:1e3/o)}_isOverFrameTime(o){if(!o||void 0===this._maxFPS)return!1;const v=o-this._lastFrameTime;return this._lastFrameTime=o,this._renderAccumulator+=v,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(o){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(o)){let o=!0;(this.l||!this.renderEvenInBackground&&this._windowIsBackground)&&(o=!1),o&&(this.hg(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.fg())}}_renderLoop(o){this._processFrame(o),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let o=0;o<this._activeRenderLoops.length;o++){(0,this._activeRenderLoops[o])()}}_renderViews(){return!1}_queueNewFrame(o,v){return j(o,v)}runRenderLoop(o){-1===this._activeRenderLoops.indexOf(o)&&(this._activeRenderLoops.push(o),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(o){this._depthCullingState.depthTest=o}setZOffset(o){this._depthCullingState.zOffset=this.Ug?-o:o}getZOffset(){const o=this._depthCullingState.zOffset;return this.Ug?-o:o}setZOffsetUnits(o){this._depthCullingState.zOffsetUnits=this.Ug?-o:o}getZOffsetUnits(){const o=this._depthCullingState.zOffsetUnits;return this.Ug?-o:o}getHostWindow(){return(0,S.n)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(o){this._compatibilityMode=!0}_rebuildTextures(){for(const o of this.scenes)o._rebuildTextures();for(const o of this._virtualScenes)o._rebuildTextures()}_releaseRenderTargetWrapper(o){const v=this._renderTargetWrapperCache.indexOf(o);-1!==v&&this._renderTargetWrapperCache.splice(v,1)}get currentViewport(){return this._cachedViewport}setViewport(o,v,V){const g=v||this.getRenderWidth(),E=V||this.getRenderHeight(),I=o.x||0,Q=o.y||0;this._cachedViewport=o,this._viewport(I*g,Q*E,g*o.width,E*o.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(o){return new Path2D(o)}get description(){let o=this.name+this.version;return this._caps.parallelShaderCompile&&(o+=" - Parallel shader compilation"),o}_createTextureBase(o,v,V,I){let Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,U=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,O=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,S=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,T=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,c=arguments.length>13?arguments[13]:void 0,j=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const L="data:"===(o=o||"").substring(0,5),b="blob:"===o.substring(0,5),u=L&&-1!==o.indexOf(";base64,"),mo=f||new l.c(this,1);mo!==f&&(mo.label=o.substring(0,60));const a=o;!this._transformTextureUrl||u||f||x||(o=this._transformTextureUrl(o)),a!==o&&(mo._originalUrl=a);const F=o.lastIndexOf(".");let i=T||(F>-1?o.substring(F).toLowerCase():"");i.indexOf("?")>-1&&(i=i.split("?")[0]);const J=(0,R.b)(i,c);I&&I.addPendingData(mo),mo.url=o,mo.generateMipMaps=!v,mo.samplingMode=Q,mo.invertY=V,mo._useSRGBBuffer=this._getUseSRGBBuffer(!!s,v),this._doNotHandleContextLost||(mo._buffer=x);let d=null;U&&!f&&(d=mo.onLoadedObservable.add(U)),f||this._internalTexturesCache.push(mo);const N=(V,f)=>{I&&I.removePendingData(mo),o===a?(d&&mo.onLoadedObservable.remove(d),g.d.UseFallbackTexture&&o!==g.d.FallbackTexture&&this._createTextureBase(g.d.FallbackTexture,v,mo.invertY,I,Q,null,n,O,h,x,mo),V=(V||"Unknown error")+(g.d.UseFallbackTexture?" - Fallback texture was used":""),mo.onErrorObservable.notifyObservers({message:V,exception:f}),n&&n(V,f)):(E.b.Warn(`Failed to load ${o}, falling back to ${a}`),this._createTextureBase(a,v,mo.invertY,I,Q,U,n,O,h,x,mo,S,T,c,j,s))};if(J){const v=async o=>{(await J).loadData(o,mo,((o,v,V,g,E,U)=>{U?N("TextureLoader failed to load data"):O(mo,i,I,{width:o,height:v},mo.invertY,!V,g,(()=>(E(),!1)),Q)}),j)};x?x instanceof ArrayBuffer?v(new Uint8Array(x)):ArrayBuffer.isView(x)?v(x):n&&n("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(o,(o=>{v(new Uint8Array(o))}),void 0,I?I.offlineProvider:void 0,!0,((o,v)=>{N("Unable to load "+(o&&o.responseURL,v))}))}else{const V=o=>{b&&!this._doNotHandleContextLost&&(mo._buffer=o),O(mo,i,I,o,mo.invertY,v,!1,h,Q)};!L||u?x&&("string"===typeof x.decoding||x.close)?V(x):t._FileToolsLoadImage(o||"",V,N,I?I.offlineProvider:null,c,mo.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof x||x instanceof ArrayBuffer||ArrayBuffer.isView(x)||x instanceof Blob?t._FileToolsLoadImage(x,V,N,I?I.offlineProvider:null,c,mo.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):x&&V(x)}return mo}_rebuildBuffers(){for(const o of this._uniformBuffers)o._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,S.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const o in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,o)&&(this._boundTexturesCache[o]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(o){this._name=o}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(o){this._hardwareScalingLevel=o,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(o){this._doNotHandleContextLost=o}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(o,v,V){var E,I;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new n,this._stencilStateComposer=new O,this._stencilState=new h,this._alphaState=new x,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new T.e,this.onCanvasFocusObservable=new T.e,this.onNewSceneAddedObservable=new T.e,this.onResizeObservable=new T.e,this.onCanvasPointerOutObservable=new T.e,this.onEffectErrorObservable=new T.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new T.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=o=>this._renderLoop(o),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new T.e,this.onAfterShaderCompilationObservable=new T.e,this.onBeginFrameObservable=new T.e,this.onEndFrameObservable=new T.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new T.e,this.onContextRestoredObservable=new T.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Tg=new T.e,this.onReleaseEffectsObservable=new T.e,g.d.Instances.push(this),this.startTime=U.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Q.d.SetMatrixPrecision(!!v.useHighPrecisionMatrix),(0,S.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=V??!1,v.antialias=o??v.antialias,v.deterministicLockstep=v.deterministicLockstep??!1,v.lockstepMaxSteps=v.lockstepMaxSteps??4,v.timeStep=v.timeStep??1/60,v.Rg=v.Rg??!0,this._audioContext=(null===(E=v.audioEngineOptions)||void 0===E?void 0:E.audioContext)??null,this._audioDestination=(null===(I=v.audioEngineOptions)||void 0===I?void 0:I.audioDestination)??null,this.premultipliedAlpha=v.premultipliedAlpha??!0,this._doNotHandleContextLost=!!v.doNotHandleContextLost,this._isStencilEnable=!!v.Rg,this.useExactSrgbConversions=v.useExactSrgbConversions??!1;const f=(0,S.n)()&&window.devicePixelRatio||1,l=v.limitDeviceRatio||f;V=V||v.adaptToDeviceRatio||!1,this._hardwareScalingLevel=V?1/Math.min(l,f):1,this._lastDevicePixelRatio=f,this._creationOptions=v}resize(){let o,v,V=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const o=(0,S.n)()&&window.devicePixelRatio||1,v=this._lastDevicePixelRatio/o;this._lastDevicePixelRatio=o,this._hardwareScalingLevel*=v}if((0,S.n)()&&(0,S.f)())if(this._renderingCanvas){var g,E;const V=null===(g=(E=this._renderingCanvas).getBoundingClientRect)||void 0===g?void 0:g.call(E);o=this._renderingCanvas.clientWidth||(null===V||void 0===V?void 0:V.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,v=this._renderingCanvas.clientHeight||(null===V||void 0===V?void 0:V.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else o=window.innerWidth,v=window.innerHeight;else o=this._renderingCanvas?this._renderingCanvas.width:100,v=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(o/this._hardwareScalingLevel,v/this._hardwareScalingLevel,V)}setSize(o,v){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(o|=0,v|=0,!V&&this._renderingCanvas.width===o&&this._renderingCanvas.height===v)return!1;if(this._renderingCanvas.width=o,this._renderingCanvas.height=v,this.scenes){for(let o=0;o<this.scenes.length;o++){const v=this.scenes[o];for(let o=0;o<v.cameras.length;o++){v.cameras[o]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(o,v,V,g,E,I,Q,U,n,O,h){throw(0,f.b)("engine.rawTexture")}createRawCubeTexture(o,v,V,g,E,I,Q,U){throw(0,f.b)("engine.rawTexture")}createRawTexture3D(o,v,V,g,E,I,Q,U,n,O,h){throw(0,f.b)("engine.rawTexture")}createRawTexture2DArray(o,v,V,g,E,I,Q,U,n,O,h){throw(0,f.b)("engine.rawTexture")}_sharedInit(o){this._renderingCanvas=o}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const o=navigator.userAgent;this.hostInformation.isMobile=-1!==o.indexOf("Mobile")||-1!==o.indexOf("Mac")&&(0,S.f)()&&"ontouchend"in document},this._checkForMobile(),(0,S.n)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(o){return document.createElement("video")}_reportDrawCall(){var o;let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(o=this._drawCalls)||void 0===o||o.addCount(v,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(o,v){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(o,v){return createImageBitmap(o,v)}resizeImageBitmap(o,v,V){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(o){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(o,v){if("undefined"===typeof document)return new OffscreenCanvas(o,v);const V=document.createElement("canvas");return V.width=o,V.height=v,V}createCanvas(o,v){return t._CreateCanvas(o,v)}static _FileToolsLoadImage(o,v,V,g,E,I,Q){throw(0,f.b)("FileTools")}_loadFile(o,v,V,g,E,I){const Q=(0,c.l)(o,v,V,g,E,I);return this._activeRequests.push(Q),Q.onCompleteObservable.add((()=>{const o=this._activeRequests.indexOf(Q);-1!==o&&this._activeRequests.splice(o,1)})),Q}static _FileToolsLoadFile(o,v,V,g,E,I){if(c.d.loadFile)return c.d.loadFile(o,v,V,g,E,I);throw(0,f.b)("FileTools")}dispose(){var o;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(o=this.releaseComputeEffects)||void 0===o||o.call(this),I.Effect.ResetCache();for(const V of this._activeRequests)V.abort();this._boundRenderFunction=null,this.Tg.notifyObservers(this),this.Tg.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,S.n)()&&window.removeEventListener("resize",this._checkForMobile);const v=g.d.Instances.indexOf(this);v>=0&&g.d.Instances.splice(v,1),g.d.Instances.length||(g.d.OnEnginesDisposedObservable.notifyObservers(this),g.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(o){throw(0,f.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(o,v){for(let V=0;V<g.d.Instances.length;V++){const E=g.d.Instances[V];for(let V=0;V<E.scenes.length;V++)E.scenes[V].markAllMaterialsAsDirty(o,v)}}}t._RenderPassIdCounter=0,t._RescalePostProcessFactory=null,t.CollisionsEpsilon=.001,t.QueueNewFrame=j},12339:(o,v,V)=>{V.d(v,{d:()=>E});var g=V(12297);class E{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}E.Instances=[],E.OnEnginesDisposedObservable=new g.e,E._LastCreatedScene=null,E.UseFallbackTexture=!0,E.FallbackTexture=""},12410:(o,v,V)=>{V.d(v,{d:()=>g});class g{static SetMatrixPrecision(o){if(g.MatrixTrackPrecisionChange=!1,o&&!g.MatrixUse64Bits&&g.MatrixTrackedMatrices)for(let v=0;v<g.MatrixTrackedMatrices.length;++v){const o=g.MatrixTrackedMatrices[v],V=o.tg;o.tg=new Array(16);for(let v=0;v<16;++v)o.tg[v]=V[v]}g.MatrixUse64Bits=o,g.MatrixCurrentType=g.MatrixUse64Bits?Array:Float32Array,g.MatrixTrackedMatrices=null}}g.MatrixUse64Bits=!1,g.MatrixTrackPrecisionChange=!0,g.MatrixCurrentType=Float32Array,g.MatrixTrackedMatrices=[]},12436:(o,v,V)=>{V.d(v,{b:()=>Q});var g=V(12308);const E=new Map;function I(o,v){(function(o){return E.delete(o)})(o)&&g.b.Warn(`Extension with the name '${o}' already exists`),E.set(o,v)}function Q(o,v){"image/ktx"!==v&&"image/ktx2"!==v||(o=".ktx"),E.has(o)||(o.endsWith(".ies")&&I(".ies",(async()=>await V.e(15).then(V.bind(V,14968)).then((o=>new o._IESTextureLoader)))),o.endsWith(".dds")&&I(".dds",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(19),V.e(18),V.e(28)]).then(V.bind(V,14970)).then((o=>new o._DDSTextureLoader)))),o.endsWith(".basis")&&I(".basis",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(47)]).then(V.bind(V,14978)).then((o=>new o._BasisTextureLoader)))),o.endsWith(".env")&&I(".env",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(19),V.e(18),V.e(23),V.e(21),V.e(45),V.e(48)]).then(V.bind(V,14987)).then((o=>new o._ENVTextureLoader)))),o.endsWith(".hdr")&&I(".hdr",(async()=>await Promise.all([V.e(14),V.e(49)]).then(V.bind(V,14993)).then((o=>new o._HDRTextureLoader)))),(o.endsWith(".ktx")||o.endsWith(".ktx2"))&&(I(".ktx",(async()=>await V.e(30).then(V.bind(V,14996)).then((o=>new o._KTXTextureLoader)))),I(".ktx2",(async()=>await V.e(30).then(V.bind(V,14996)).then((o=>new o._KTXTextureLoader))))),o.endsWith(".tga")&&I(".tga",(async()=>await V.e(50).then(V.bind(V,15e3)).then((o=>new o._TGATextureLoader)))),o.endsWith(".exr")&&I(".exr",(async()=>await V.e(16).then(V.bind(V,15006)).then((o=>new o._ExrTextureLoader)))));const g=E.get(o);return g?Promise.resolve(g(v)):null}},12418:(o,v,V)=>{V.d(v,{c:()=>Q});var g,E=V(12297),I=V(12427);!function(o){o[o.Unknown=0]="Unknown",o[o.Url=1]="Url",o[o.Temp=2]="Temp",o[o.Raw=3]="Raw",o[o.Dynamic=4]="Dynamic",o[o.RenderTarget=5]="RenderTarget",o[o.MultiRenderTarget=6]="MultiRenderTarget",o[o.Cube=7]="Cube",o[o.CubeRaw=8]="CubeRaw",o[o.CubePrefiltered=9]="CubePrefiltered",o[o.Raw3D=10]="Raw3D",o[o.Raw2DArray=11]="Raw2DArray",o[o.DepthStencil=12]="DepthStencil",o[o.CubeRawRGBD=13]="CubeRawRGBD",o[o.Depth=14]="Depth"}(g||(g={}));class Q extends I.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(o){this.generateMipMaps=o}get uniqueId(){return this._uniqueId}_setUniqueId(o){this._uniqueId=o}getEngine(){return this._engine}get source(){return this._source}constructor(o,v){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new E.e,this.onErrorObservable=new E.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=o,this._source=v,this._uniqueId=Q._Counter++,V||(this._hardwareTexture=o._createHardwareTexture())}incrementReferences(){this._references++}updateSize(o,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,o,v,V),this.width=o,this.height=v,this.depth=V,this.baseWidth=o,this.baseHeight=v,this.baseDepth=V,this._size=o*v*V}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const o=this.onRebuildCallback(this),v=v=>{v._swapAndDie(this,!1),this.isReady=o.isReady};return void(o.isAsync?o.proxy.then(v):v(o.proxy))}let o;switch(this.source){case 2:case 12:case 14:break;case 1:return void(o=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(o=>{o._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:o=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),o._swapAndDie(this,!1),this.isReady=!0;break;case 10:o=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),o._swapAndDie(this,!1),this.isReady=!0;break;case 11:o=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),o._swapAndDie(this,!1),this.isReady=!0;break;case 4:o=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),o._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(o=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{o._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:o=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),o._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return o=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(o=>{o&&o._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(o._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(o){var v;let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(v=this._hardwareTexture)||void 0===v||v.setUsage(o._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),o._hardwareTexture=this._hardwareTexture,V&&(o._isRGBD=this._isRGBD),this._lodTextureHigh&&(o._lodTextureHigh&&o._lodTextureHigh.dispose(),o._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(o._lodTextureMid&&o._lodTextureMid.dispose(),o._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(o._lodTextureLow&&o._lodTextureLow.dispose(),o._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(o._irradianceTexture&&o._irradianceTexture.dispose(),o._irradianceTexture=this._irradianceTexture);const g=this._engine.getLoadedTexturesCache();let E=g.indexOf(this);-1!==E&&g.splice(E,1),E=g.indexOf(o),-1===E&&g.push(o)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Q._Counter=0},12427:(o,v,V)=>{V.d(v,{c:()=>g});class g{get wrapU(){return this._cachedWrapU}set wrapU(o){this._cachedWrapU=o}get wrapV(){return this._cachedWrapV}set wrapV(o){this._cachedWrapV=o}get wrapR(){return this._cachedWrapR}set wrapR(o){this._cachedWrapR=o}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(o){this._cachedAnisotropicFilteringLevel=o}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(o){this._comparisonFunction=o}get useMipMaps(){return this._useMipMaps}set useMipMaps(o){this._useMipMaps=o}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=o,this._cachedWrapV=v,this._cachedWrapR=V,this._cachedAnisotropicFilteringLevel=g,this.samplingMode=E,this._comparisonFunction=I,this}compareSampler(o){return this._cachedWrapU===o._cachedWrapU&&this._cachedWrapV===o._cachedWrapV&&this._cachedWrapR===o._cachedWrapR&&this._cachedAnisotropicFilteringLevel===o._cachedAnisotropicFilteringLevel&&this.samplingMode===o.samplingMode&&this._comparisonFunction===o._comparisonFunction&&this._useMipMaps===o._useMipMaps}}},12313:(o,v,V)=>{V.d(v,{b:()=>I});var g=V(12308);const E=(o,v,V)=>o?o.getClassName&&"Mesh"===o.getClassName()?null:!o.getClassName||"SubMesh"!==o.getClassName()&&"PhysicsBody"!==o.getClassName()?o.clone?o.clone():Array.isArray(o)?o.slice():V&&"object"===typeof o?{...o}:null:o.clone(v):null;class I{static DeepCopy(o,v,V,I){let Q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const U=function(o){const v=[];do{const V=Object.getOwnPropertyNames(o);for(const o of V)-1===v.indexOf(o)&&v.push(o)}while(o=Object.getPrototypeOf(o));return v}(o);for(const O of U){if("_"===O[0]&&(!I||-1===I.indexOf(O)))continue;if(O.endsWith("Observable"))continue;if(V&&-1!==V.indexOf(O))continue;const U=o[O],h=typeof U;if("function"!==h)try{if("object"===h)if(U instanceof Uint8Array)v[O]=Uint8Array.from(U);else if(U instanceof Array){if(v[O]=[],U.length>0)if("object"==typeof U[0])for(let o=0;o<U.length;o++){const V=E(U[o],v,Q);-1===v[O].indexOf(V)&&v[O].push(V)}else v[O]=U.slice(0)}else v[O]=E(U,v,Q);else v[O]=U}catch(n){g.b.Warn(n.message)}}}}},12354:(o,v,V)=>{V.d(v,{e:()=>g,f:()=>E,i:()=>I});class g extends Error{}g._setPrototypeOf=Object.setPrototypeOf||((o,v)=>(o.__proto__=v,o));const E={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class I extends g{constructor(o,v,V){super(o),this.errorCode=v,this.innerError=V,this.name="RuntimeError",g._setPrototypeOf(this,I.prototype)}}},12347:(o,v,V)=>{V.d(v,{d:()=>N,e:()=>t,g:()=>F,h:()=>J,l:()=>mo,k:()=>c,m:()=>b,q:()=>u,s:()=>a,u:()=>s});var g=V(12332),E=V(12302),I=V(12297);class Q{}Q.FilesToLoad={};var U=V(12354),n=V(12358),O=V(12365),h=V(12339),x=V(12308),f=V(12374),l=V(12370),S=V(12381);const T=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class c extends U.i{constructor(o,v){super(o,U.f.LoadFileError),this.name="LoadFileError",U.e._setPrototypeOf(this,c.prototype),v instanceof g.b?this.request=v:this.file=v}}class R extends U.i{constructor(o,v){super(o,U.f.RequestFileError),this.request=v,this.name="RequestFileError",U.e._setPrototypeOf(this,R.prototype)}}class j extends U.i{constructor(o,v){super(o,U.f.ReadFileError),this.file=v,this.name="ReadFileError",U.e._setPrototypeOf(this,j.prototype)}}const t={DefaultRetryStrategy:class{static ExponentialBackoff(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(V,g,E)=>0!==g.status||E>=o||-1!==V.indexOf("file:")?-1:Math.pow(2,E)*v}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:o=>o,ScriptBaseUrl:"",ScriptPreprocessUrl:o=>o,CleanUrl:o=>o=o.replace(/#/gm,"%23")},s=(o,v)=>{if((!o||0!==o.indexOf("data:"))&&t.CorsBehavior)if("string"===typeof t.CorsBehavior||t.CorsBehavior instanceof String)v.crossOrigin=t.CorsBehavior;else{const V=t.CorsBehavior(o);V&&(v.crossOrigin=V)}},L={getRequiredSize:null},b=function(o,v,V,E){let I,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",O=arguments.length>5?arguments[5]:void 0,x=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===x||void 0===x||!x._features.forceBitmapOverHTMLImageElement))return V("LoadImage is only supported in web or BabylonNative environments."),null;let f=!1;o instanceof ArrayBuffer||ArrayBuffer.isView(o)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(I=URL.createObjectURL(new Blob([o],{type:U})),f=!0):I=`data:${U};base64,`+(0,n.h)(o):o instanceof Blob?(I=URL.createObjectURL(o),f=!0):(I=t.CleanUrl(o),I=t.PreprocessUrl(I));const l=v=>{if(V){const g=I||o.toString();V(`Error while trying to load image: ${0===g.indexOf("http")||g.length<=128?g:g.slice(0,128)+"..."}`,v)}};if(null!==x&&void 0!==x&&x._features.forceBitmapOverHTMLImageElement)return mo(I,(g=>{x.createImageBitmap(new Blob([g],{type:U}),{premultiplyAlpha:"none",...O}).then((o=>{v(o),f&&URL.revokeObjectURL(I)})).catch((v=>{V&&V("Error while trying to load image: "+o,v)}))}),void 0,E||void 0,!0,((o,v)=>{l(v)})),null;const S=new Image;if(L.getRequiredSize){const v=L.getRequiredSize(o);v.width&&(S.width=v.width),v.height&&(S.height=v.height)}s(I,S);const T=[],c=()=>{for(const o of T)o.target.removeEventListener(o.name,o.handler);T.length=0};T.push({target:S,name:"load",handler:()=>{c(),v(S),f&&S.src&&URL.revokeObjectURL(S.src)}}),T.push({target:S,name:"error",handler:o=>{c(),l(o),f&&S.src&&URL.revokeObjectURL(S.src)}}),T.push({target:document,name:"securitypolicyviolation",handler:o=>{if(o.blockedURI!==S.src||"dg"===o.disposition)return;c();const v=new Error(`CSP violation of policy ${o.effectiveDirective} ${o.blockedURI}. Current policy is ${o.originalPolicy}`);h.d.UseFallbackTexture=!1,l(v),f&&S.src&&URL.revokeObjectURL(S.src),S.src=""}}),(()=>{for(const o of T)o.target.addEventListener(o.name,o.handler)})();const R="blob:"===I.substring(0,5),j="data:"===I.substring(0,5),b=()=>{R||j||!g.b.IsCustomRequestAvailable?S.src=I:mo(I,((o,v,V)=>{const g=new Blob([o],{type:!U&&V?V:U}),E=URL.createObjectURL(g);f=!0,S.src=E}),void 0,E||void 0,!0,((o,v)=>{l(v)}))},u=()=>{E&&E.loadImage(I,S)};if(!R&&!j&&E&&E.enableTexturesOffline)E.open(u,b);else{if(-1!==I.indexOf("file:")){const o=decodeURIComponent(I.substring(5).toLowerCase());if(Q.FilesToLoad[o]&&"undefined"!==typeof URL){try{let v;try{v=URL.createObjectURL(Q.FilesToLoad[o])}catch(a){v=URL.createObjectURL(Q.FilesToLoad[o])}S.src=v,f=!0}catch(F){S.src=""}return S}}b()}return S},u=(o,v,V,g,E)=>{const Q=new FileReader,U={onCompleteObservable:new I.e,abort:()=>Q.abort()};return Q.onloadend=()=>U.onCompleteObservable.notifyObservers(U),E&&(Q.onerror=()=>{E(new j(`Unable to read ${o.name}`,o))}),Q.onload=o=>{v(o.target.result)},V&&(Q.onprogress=V),g?Q.readAsArrayBuffer(o):Q.readAsText(o),U},mo=(o,v,V,g,E,n,O)=>{if(o.name)return u(o,v,V,E,n?o=>{n(void 0,o)}:void 0);const h=o;if(-1!==h.indexOf("file:")){let o=decodeURIComponent(h.substring(5).toLowerCase());0===o.indexOf("./")&&(o=o.substring(2));const g=Q.FilesToLoad[o];if(g)return u(g,v,V,E,n?o=>n(void 0,new c(o.message,o.file)):void 0)}const{match:l,type:S}=d(h);if(l){const o={onCompleteObservable:new I.e,abort:()=>()=>{}};try{const o=E?N(h):Y(h);v(o,void 0,S)}catch(U){n?n(void 0,U):x.b.Error(U.message||"Failed to parse the Data URL")}return f.b.SetImmediate((()=>{o.onCompleteObservable.notifyObservers(o)})),o}return a(h,((o,V)=>{v(o,null===V||void 0===V?void 0:V.responseURL,null===V||void 0===V?void 0:V.getResponseHeader("content-type"))}),V,g,E,n?o=>{n(o.request,new c(o.message,o.request))}:void 0,O)},a=(o,v,V,Q,U,n,O)=>{o=t.CleanUrl(o),o=t.PreprocessUrl(o);const h=t.BaseUrl+o;let f=!1;const l={onCompleteObservable:new I.e,abort:()=>f=!0},S=()=>{let o,I=new g.b,Q=null;const S=()=>{I&&(V&&I.removeEventListener("progress",V),o&&I.removeEventListener("readystatechange",o),I.removeEventListener("loadend",T))};let T=()=>{S(),l.onCompleteObservable.notifyObservers(l),l.onCompleteObservable.clear(),V=void 0,o=null,T=null,n=void 0,O=void 0,v=void 0};l.abort=()=>{f=!0,T&&T(),I&&I.readyState!==(XMLHttpRequest.DONE||4)&&I.abort(),null!==Q&&(clearTimeout(Q),Q=null),I=null};const c=o=>{const v=o.message||"Unknown error";n&&I?n(new R(v,I)):x.b.Error(v)},j=x=>{if(I){if(I.open("GET",h),O)try{O(I)}catch(l){return void c(l)}U&&(I.responseType="arraybuffer"),V&&I.addEventListener("progress",V),T&&I.addEventListener("loadend",T),o=()=>{if(!f&&I&&I.readyState===(XMLHttpRequest.DONE||4)){if(o&&I.removeEventListener("readystatechange",o),I.status>=200&&I.status<300||0===I.status&&(!(0,E.n)()||i())){const o=U?I.response:I.responseText;if(null!==o){try{v&&v(o,I)}catch(l){c(l)}return}}const V=t.DefaultRetryStrategy;if(V){const o=V(h,I,x);if(-1!==o)return S(),I=new g.b,void(Q=setTimeout((()=>j(x+1)),o))}const O=new R("Error status: "+I.status+" "+I.statusText+" - Unable to load "+h,I);n&&n(O)}},I.addEventListener("readystatechange",o),I.send()}};j(0)};if(Q&&Q.enableSceneOffline){const g=o=>{o&&o.status>400?n&&n(o):S()},E=()=>{Q&&Q.loadFile(t.BaseUrl+o,(o=>{!f&&v&&v(o),l.onCompleteObservable.notifyObservers(l)}),V?o=>{!f&&V&&V(o)}:void 0,g,U)};Q.open(E,g)}else S();return l},F=o=>{const{match:v,type:V}=d(o);if(v)return V||void 0;const g=o.lastIndexOf(".");switch(o.substring(g+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ng":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},i=()=>"undefined"!==typeof location&&"file:"===location.protocol,J=o=>T.test(o),d=o=>{const v=T.exec(o);if(null===v||0===v.length)return{match:!1,type:""};return{match:!0,type:v[0].replace("data:","").replace("base64,","")}};function N(o){return(0,n.c)(o.split(",")[1])}const Y=o=>(0,n.e)(o.split(",")[1]);let q;S.c._FileToolsLoadImage=b,l.d.loadFile=mo,O.o.loadFile=mo;((o,v,V,g,E,I,Q,U,n,O)=>{q={DecodeBase64UrlToBinary:o,DecodeBase64UrlToString:v,DefaultRetryStrategy:V.DefaultRetryStrategy,BaseUrl:V.BaseUrl,CorsBehavior:V.CorsBehavior,PreprocessUrl:V.PreprocessUrl,IsBase64DataUrl:g,IsFileURL:E,LoadFile:I,LoadImage:Q,ReadFile:U,RequestFile:n,SetCorsBehavior:O},Object.defineProperty(q,"DefaultRetryStrategy",{get:function(){return V.DefaultRetryStrategy},set:function(o){V.DefaultRetryStrategy=o}}),Object.defineProperty(q,"BaseUrl",{get:function(){return V.BaseUrl},set:function(o){V.BaseUrl=o}}),Object.defineProperty(q,"PreprocessUrl",{get:function(){return V.PreprocessUrl},set:function(o){V.PreprocessUrl=o}}),Object.defineProperty(q,"CorsBehavior",{get:function(){return V.CorsBehavior},set:function(o){V.CorsBehavior=o}})})(N,Y,t,J,i,mo,b,u,a,s)},12452:(o,v,V)=>{function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(o=>{const v=16*Math.random()|0;return("x"===o?v:3&v|8).toString(16)}))}V.d(v,{b:()=>g})},12444:(o,v,V)=>{V.d(v,{d:()=>I});var g=V(12308),E=V(12449);class I{static Instantiate(o){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[o])return this.RegisteredExternalClasses[o];const v=(0,E.d)(o);if(v)return v;g.b.Warn(o+" not found, you may have missed an import.");const V=o.split(".");let I=window||this;for(let g=0,E=V.length;g<E;g++)I=I[V[g]];return"function"!==typeof I?null:I}}I.RegisteredExternalClasses={}},12321:(o,v,V)=>{V.d(v,{e:()=>E});var g=V(12302);class E{static get Now(){return(0,g.n)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12358:(o,v,V)=>{V.d(v,{c:()=>Q,e:()=>I,f:()=>g,h:()=>E});const g=o=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(o);let v="";for(let V=0;V<o.byteLength;V++)v+=String.fromCharCode(o[V]);return v},E=o=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let V,g,E,I,Q,U,n,O="",h=0;const x=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o);for(;h<x.length;)V=x[h++],g=h<x.length?x[h++]:Number.NaN,E=h<x.length?x[h++]:Number.NaN,I=V>>2,Q=(3&V)<<4|g>>4,U=(15&g)<<2|E>>6,n=63&E,isNaN(g)?U=n=64:isNaN(E)&&(n=64),O+=v.charAt(I)+v.charAt(Q)+v.charAt(U)+v.charAt(n);return O},I=o=>atob(o),Q=o=>{const v=I(o),V=v.length,g=new Uint8Array(new ArrayBuffer(V));for(let E=0;E<V;E++)g[E]=v.charCodeAt(E);return g.buffer}},12454:(o,v,V)=>{function g(o){let v=1;do{v*=2}while(v<o);return v===o}function E(o,v,V){return o*(1-V)+v*V}function I(o){const v=Q(o),V=U(o);return v-o>o-V?V:v}function Q(o){return o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,++o}function U(o){return o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,(o|=o>>16)-(o>>1)}function n(o,v){let V;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:V=U(o);break;case 2:V=I(o);break;default:V=Q(o)}return Math.min(V,v)}V.d(v,{b:()=>U,d:()=>n,e:()=>g,g:()=>E,i:()=>I})},12291:(o,v,V)=>{V.r(v),V.d(v,{AsyncLoop:()=>j,Tools:()=>c,className:()=>R});var g=V(12297),E=V(12302),I=V(12308),Q=V(12313),U=V(12321),n=V(12325),O=V(12332),h=V(12339),x=V(12347),f=V(12374),l=V(12444),S=V(12452),T=V(12454);class c{static get BaseUrl(){return x.e.BaseUrl}static set BaseUrl(o){x.e.BaseUrl=o}static get CleanUrl(){return x.e.CleanUrl}static set CleanUrl(o){x.e.CleanUrl=o}static IsAbsoluteUrl(o){return 0===o.indexOf("//")||-1!==o.indexOf("://")&&(-1!==o.indexOf(".")&&(-1!==o.indexOf("/")&&(!(o.indexOf(":")>o.indexOf("/"))&&(o.indexOf("://")<o.indexOf(".")||(0===o.indexOf("data:")||0===o.indexOf("blob:"))))))}static set ScriptBaseUrl(o){x.e.ScriptBaseUrl=o}static get ScriptBaseUrl(){return x.e.ScriptBaseUrl}static set CDNBaseUrl(o){c.ScriptBaseUrl=o,c.AssetBaseUrl=o}static set ScriptPreprocessUrl(o){x.e.ScriptPreprocessUrl=o}static get ScriptPreprocessUrl(){return x.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return x.e.DefaultRetryStrategy}static set DefaultRetryStrategy(o){x.e.DefaultRetryStrategy=o}static get CorsBehavior(){return x.e.CorsBehavior}static set CorsBehavior(o){x.e.CorsBehavior=o}static get UseFallbackTexture(){return h.d.UseFallbackTexture}static set UseFallbackTexture(o){h.d.UseFallbackTexture=o}static get RegisteredExternalClasses(){return l.d.RegisteredExternalClasses}static set RegisteredExternalClasses(o){l.d.RegisteredExternalClasses=o}static get fallbackTexture(){return h.d.FallbackTexture}static set fallbackTexture(o){h.d.FallbackTexture=o}static FetchToRef(o,v,V,g,E,I){const Q=4*((Math.abs(o)*V%V|0)+(Math.abs(v)*g%g|0)*V);I.r=E[Q]/255,I.g=E[Q+1]/255,I.b=E[Q+2]/255,I.a=E[Q+3]/255}static Mix(o,v,V){return 0}static Instantiate(o){return l.d.Instantiate(o)}static SetImmediate(o){f.b.SetImmediate(o)}static IsExponentOfTwo(o){return!0}static FloatRound(o){return Math.fround(o)}static GetFilename(o){const v=o.lastIndexOf("/");return v<0?o:o.substring(v+1)}static GetFolderPath(o){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const V=o.lastIndexOf("/");return V<0?v?o:"":o.substring(0,V+1)}static ToDegrees(o){return 180*o/Math.PI}static ToRadians(o){return o*Math.PI/180}static SmoothAngleChange(o,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const g=this.ToRadians(o),E=this.ToRadians(v);return this.ToDegrees(Math.atan2((1-V)*Math.sin(E)+V*Math.sin(g),(1-V)*Math.cos(E)+V*Math.cos(g)))}static MakeArray(o,v){return!0===v||void 0!==o&&null!=o?Array.isArray(o)?o:[o]:null}static GetPointerPrefix(o){return(0,E.n)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(o,v){(0,x.u)(o,v)}static SetReferrerPolicyBehavior(o,v){v.referrerPolicy=o}static get PreprocessUrl(){return x.e.PreprocessUrl}static set PreprocessUrl(o){x.e.PreprocessUrl=o}static LoadImage(o,v,V,g,E,I){return(0,x.m)(o,v,V,g,E,I)}static LoadFile(o,v,V,g,E,I){return(0,x.l)(o,v,V,g,E,I)}static async LoadFileAsync(o){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((V,g)=>{(0,x.l)(o,(o=>{V(o)}),void 0,void 0,v,((o,v)=>{g(v)}))}))}static GetAssetUrl(o){if(!o)return"";if(c.AssetBaseUrl&&o.startsWith(c._DefaultAssetsUrl)){const v="/"===c.AssetBaseUrl[c.AssetBaseUrl.length-1]?c.AssetBaseUrl.substring(0,c.AssetBaseUrl.length-1):c.AssetBaseUrl;return o.replace(c._DefaultAssetsUrl,v)}return o}static GetBabylonScriptURL(o,v){if(!o)return"";if(c.ScriptBaseUrl&&o.startsWith(c._DefaultCdnUrl)){const v="/"===c.ScriptBaseUrl[c.ScriptBaseUrl.length-1]?c.ScriptBaseUrl.substring(0,c.ScriptBaseUrl.length-1):c.ScriptBaseUrl;o=o.replace(c._DefaultCdnUrl,v)}return o=c.ScriptPreprocessUrl(o),v&&(o=c.GetAbsoluteUrl(o)),o}static LoadBabylonScript(o,v,V,g){o=c.GetBabylonScriptURL(o),c.LoadScript(o,v,V)}static async LoadBabylonScriptAsync(o){return o=c.GetBabylonScriptURL(o),await c.LoadScriptAsync(o)}static LoadScript(o,v,V,g){let I=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(o),v&&v()}catch(n){null===V||void 0===V||V(`Unable to load script '${o}' in worker`,n)}return}if(!(0,E.n)())return void(null===V||void 0===V||V(`Cannot load script '${o}' outside of a window or a worker`));const Q=document.getElementsByTagName("head")[0],U=document.createElement("script");I?(U.setAttribute("type","module"),U.innerText=o):(U.setAttribute("type","text/javascript"),U.setAttribute("src",o)),g&&(U.id=g),U.onload=()=>{v&&v()},U.onerror=v=>{V&&V(`Unable to load script '${o}'`,v)},Q.appendChild(U)}static async LoadScriptAsync(o,v){return await new Promise(((V,g)=>{this.LoadScript(o,(()=>{V()}),((o,v)=>{g(v||new Error(o))}),v)}))}static ReadFileAsDataURL(o,v,V){const E=new FileReader,I={onCompleteObservable:new g.e,abort:()=>E.abort()};return E.onloadend=()=>{I.onCompleteObservable.notifyObservers(I)},E.onload=o=>{v(o.target.result)},E.onprogress=V,E.readAsDataURL(o),I}static ReadFile(o,v,V,g,E){return(0,x.q)(o,v,V,g,E)}static FileAsURL(o){const v=new Blob([o]);return window.URL.createObjectURL(v)}static Format(o){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o.toFixed(v)}static DeepCopy(o,v,V,g){Q.b.DeepCopy(o,v,V,g)}static IsEmpty(o){for(const v in o)if(Object.prototype.hasOwnProperty.call(o,v))return!1;return!0}static RegisterTopRootEvents(o,v){for(let g=0;g<v.length;g++){const E=v[g];o.addEventListener(E.name,E.handler,!1);try{window.parent&&window.parent.addEventListener(E.name,E.handler,!1)}catch(V){}}}static UnregisterTopRootEvents(o,v){for(let g=0;g<v.length;g++){const E=v[g];o.removeEventListener(E.name,E.handler);try{o.parent&&o.parent.removeEventListener(E.name,E.handler)}catch(V){}}}static async DumpFramebuffer(o,v,V,g){throw(0,n.b)("DumpTools")}static DumpData(o,v,V,g){throw(0,n.b)("DumpTools")}static async DumpDataAsync(o,v,V){throw(0,n.b)("DumpTools")}static _IsOffScreenCanvas(o){return void 0!==o.convertToBlob}static ToBlob(o,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",g=arguments.length>3?arguments[3]:void 0;c._IsOffScreenCanvas(o)||o.toBlob||(o.toBlob=function(o,v,V){setTimeout((()=>{const g=atob(this.toDataURL(v,V).split(",")[1]),E=g.length,I=new Uint8Array(E);for(let o=0;o<E;o++)I[o]=g.charCodeAt(o);o(new Blob([I]))}))}),c._IsOffScreenCanvas(o)?o.convertToBlob({type:V,quality:g}).then((o=>v(o))):o.toBlob((function(o){v(o)}),V,g)}static DownloadBlob(o,v){if("download"in document.createElement("a")){if(!v){const o=new Date;v="screenshot_"+((o.getFullYear()+"-"+(o.getMonth()+1)).slice(2)+"-"+o.getDate()+"_"+o.getHours()+"-"+("0"+o.getMinutes()).slice(-2))+".png"}c.Download(o,v)}else if(o&&"undefined"!==typeof URL){const v=URL.createObjectURL(o),V=window.open("");if(!V)return;const g=V.document.createElement("img");g.onload=function(){URL.revokeObjectURL(v)},g.src=v,V.document.body.appendChild(g)}}static EncodeScreenshotCanvasData(o,v){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",g=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0;if("string"!==typeof g&&v){if(v){if(c._IsOffScreenCanvas(o))return void o.convertToBlob({type:V,quality:E}).then((o=>{const V=new FileReader;V.readAsDataURL(o),V.onloadend=()=>{const o=V.result;v(o)}}));const g=o.toDataURL(V,E);v(g)}}else this.ToBlob(o,(function(o){o&&c.DownloadBlob(o,g),v&&v("")}),V,E)}static Download(o,v){if("undefined"===typeof URL)return;const V=window.URL.createObjectURL(o),g=document.createElement("a");document.body.appendChild(g),g.style.display="none",g.href=V,g.download=v,g.addEventListener("click",(()=>{g.parentElement&&g.parentElement.removeChild(g)})),g.click(),window.URL.revokeObjectURL(V)}static BackCompatCameraNoPreventDefault(o){return"boolean"===typeof o[0]?o[0]:"boolean"===typeof o[1]&&o[1]}static CreateScreenshot(o,v,V,g){throw(0,n.b)("ScreenshotTools")}static async CreateScreenshotAsync(o,v,V){throw(0,n.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(o,v,V,g){throw(0,n.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(o,v,V){throw(0,n.b)("ScreenshotTools")}static RandomId(){return(0,S.b)()}static IsBase64(o){return(0,x.h)(o)}static DecodeBase64(o){return(0,x.d)(o)}static get errorsCount(){return I.b.errorsCount}static Log(o){I.b.Log(o)}static Warn(o){I.b.Warn(o)}static Error(o){I.b.Error(o)}static get LogCache(){return I.b.LogCache}static ClearLogCache(){I.b.ClearLogCache()}static set LogLevels(o){I.b.LogLevels=o}static set PerformanceLogLevel(o){return(o&c.PerformanceUserMarkLogLevel)===c.PerformanceUserMarkLogLevel?(c.StartPerformanceCounter=c._StartUserMark,void(c.EndPerformanceCounter=c._EndUserMark)):(o&c.PerformanceConsoleLogLevel)===c.PerformanceConsoleLogLevel?(c.StartPerformanceCounter=c._StartPerformanceConsole,void(c.EndPerformanceCounter=c._EndPerformanceConsole)):(c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,void(c.EndPerformanceCounter=c._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(o,v){}static _EndPerformanceCounterDisabled(o,v){}static _StartUserMark(o){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c._Performance){if(!(0,E.n)())return;c._Performance=window.performance}v&&c._Performance.mark&&c._Performance.mark(o+"-Begin")}static _EndUserMark(o){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&c._Performance.mark&&(c._Performance.mark(o+"-End"),c._Performance.measure(o,o+"-Begin",o+"-End"))}static _StartPerformanceConsole(o){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(c._StartUserMark(o,v),console.time&&console.time(o))}static _EndPerformanceConsole(o){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(c._EndUserMark(o,v),console.timeEnd(o))}static get Now(){return U.e.Now}static GetClassName(o){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=null;if(!v&&o.getClassName)V=o.getClassName();else{if(o instanceof Object){V=(v?o:Object.getPrototypeOf(o)).constructor.__bjsclassName__}V||(V=typeof o)}return V}static First(o,v){for(const V of o)if(v(V))return V;return null}static getFullClassName(o){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=null,g=null;if(!v&&o.getClassName)V=o.getClassName();else{if(o instanceof Object){const E=v?o:Object.getPrototypeOf(o);V=E.constructor.__bjsclassName__,g=E.constructor.__bjsmoduleName__}V||(V=typeof o)}return V?(null!=g?g+".":"")+V:null}static async DelayAsync(o){await new Promise((v=>{setTimeout((()=>{v()}),o)}))}static IsSafari(){return!!(0,E.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function R(o,v){return V=>{V.__bjsclassName__=o,V.__bjsmoduleName__=null!=v?v:null}}c.AssetBaseUrl="",c.UseCustomRequestHeaders=!1,c.CustomRequestHeaders=O.b.CustomRequestHeaders,c.GetDOMTextContent=E.d,c._DefaultCdnUrl="https://cdn.babylonjs.com",c._DefaultAssetsUrl="https://assets.babylonjs.com/core",c.GetAbsoluteUrl="object"===typeof document?o=>{const v=document.createElement("a");return v.href=o,v.href}:"function"===typeof URL&&"object"===typeof location?o=>new URL(o,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},c.NoneLogLevel=I.b.NoneLogLevel,c.MessageLogLevel=I.b.MessageLogLevel,c.WarningLogLevel=I.b.WarningLogLevel,c.ErrorLogLevel=I.b.ErrorLogLevel,c.AllLogLevel=I.b.AllLogLevel,c.IsWindowObjectExist=E.n,c.PerformanceNoneLogLevel=0,c.PerformanceUserMarkLogLevel=1,c.PerformanceConsoleLogLevel=2,c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,c.EndPerformanceCounter=c._EndPerformanceCounterDisabled;class j{constructor(o,v,V){let g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=o,this.index=g-1,this._done=!1,this._fn=v,this._successCallback=V}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(o,v,V){const g=new j(o,v,V,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return g.executeNext(),g}static SyncAsyncForLoop(o,v,V,g,E){let I=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return j.Run(Math.ceil(o/v),(g=>{E&&E()?g.breakLoop():setTimeout((()=>{for(let I=0;I<v;++I){const Q=g.index*v+I;if(Q>=o)break;if(V(Q),E&&E()){g.breakLoop();break}}g.executeNext()}),I)}),g)}}c.Mix=T.g,c.IsExponentOfTwo=T.e,h.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12449:(o,v,V)=>{V.d(v,{d:()=>I,h:()=>E});const g={};function E(o,v){g[o]=v}function I(o){return g[o]}},12332:(o,v,V)=>{V.d(v,{b:()=>g});class g{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(g.CustomRequestHeaders).length>0||g.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const o in g.CustomRequestHeaders){const v=g.CustomRequestHeaders[o];v&&this._xhr.setRequestHeader(o,v)}}_shouldSkipRequestModifications(o){return g.SkipRequestModificationForBabylonCDN&&(o.includes("preview.babylonjs.com")||o.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(o){this._xhr.onprogress=o}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(o){this._xhr.responseType=o}get timeout(){return this._xhr.timeout}set timeout(o){this._xhr.timeout=o}addEventListener(o,v,V){this._xhr.addEventListener(o,v,V)}removeEventListener(o,v,V){this._xhr.removeEventListener(o,v,V)}abort(){this._xhr.abort()}send(o){g.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(o)}open(o,v){for(const V of g.CustomRequestModifiers){if(this._shouldSkipRequestModifications(v))return;v=V(this._xhr,v)||v}v=(v=v.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=v,this._xhr.open(o,v,!0)}setRequestHeader(o,v){this._xhr.setRequestHeader(o,v)}getResponseHeader(o){return this._xhr.getResponseHeader(o)}}g.CustomRequestHeaders={},g.CustomRequestModifiers=new Array,g.SkipRequestModificationForBabylonCDN=!0}}]);