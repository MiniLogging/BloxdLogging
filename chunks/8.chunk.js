"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11096:(B,I,C)=>{C.d(I,{e:()=>G});var M=C(11056),x=C(11027),y=C(11101),f=C(11126),L=C(11034);class e{constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,B&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(B){this._zOffset!==B&&(this._zOffset=B,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(B){this._zOffsetUnits!==B&&(this._zOffsetUnits=B,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(B){this._cullFace!==B&&(this._cullFace=B,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(B){this._cull!==B&&(this._cull=B,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(B){this._depthFunc!==B&&(this._depthFunc=B,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(B){this._depthMask!==B&&(this._depthMask=B,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(B){this._depthTest!==B&&(this._depthTest=B,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(B){this._frontFace!==B&&(this._frontFace=B,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(B){this.isDirty&&(this._isCullDirty&&(this.cull?B.enable(B.CULL_FACE):B.disable(B.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(B.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(B.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?B.enable(B.DEPTH_TEST):B.disable(B.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(B.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(B.enable(B.POLYGON_OFFSET_FILL),B.polygonOffset(this.zOffset,this.zOffsetUnits)):B.disable(B.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(B.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class g{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(B){this._func!==B&&(this._func=B,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(B){this._funcRef!==B&&(this._funcRef=B,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(B){this._funcMask!==B&&(this._funcMask=B,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(B){this._opStencilFail!==B&&(this._opStencilFail=B,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(B){this._opDepthFail!==B&&(this._opDepthFail=B,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(B){this._opStencilDepthPass!==B&&(this._opStencilDepthPass=B,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(B){this._mask!==B&&(this._mask=B,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(B){this._enabled!==B&&(this._enabled=B,this._isStencilTestDirty=!0)}constructor(){let B=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,B&&this.reset()}reset(){var B;this.stencilMaterial=void 0,null===(B=this.stencilGlobal)||void 0===B||B.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(B){var I;if(!B)return;const C=!this.useStencilGlobalOnly&&!(null===(I=this.stencilMaterial)||void 0===I||!I.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?B.enable(B.STENCIL_TEST):B.disable(B.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(B.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(B.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(B.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class N{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=N.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=N.KEEP,this.opDepthFail=N.KEEP,this.opStencilDepthPass=N.REPLACE}get stencilFunc(){return this.func}set stencilFunc(B){this.func=B}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(B){this.funcRef=B}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(B){this.funcMask=B}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(B){this.opStencilFail=B}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(B){this.opDepthFail=B}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(B){this.opStencilDepthPass=B}get stencilMask(){return this.mask}set stencilMask(B){this.mask=B}get stencilTest(){return this.enabled}set stencilTest(B){this.enabled=B}}N.ALWAYS=519,N.KEEP=7680,N.REPLACE=7681;class R{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(B){this._alphaBlend!==B&&(this._alphaBlend=B,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(B,I,C,M){this._blendConstants[0]===B&&this._blendConstants[1]===I&&this._blendConstants[2]===C&&this._blendConstants[3]===M||(this._blendConstants[0]=B,this._blendConstants[1]=I,this._blendConstants[2]=C,this._blendConstants[3]=M,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(B,I,C,M){this._blendFunctionParameters[0]===B&&this._blendFunctionParameters[1]===I&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===M||(this._blendFunctionParameters[0]=B,this._blendFunctionParameters[1]=I,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=M,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(B,I){this._blendEquationParameters[0]===B&&this._blendEquationParameters[1]===I||(this._blendEquationParameters[0]=B,this._blendEquationParameters[1]=I,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(B){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?B.enable(B.BLEND):B.disable(B.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(B.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(B.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(B.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var H=C(11042),F=C(11129),k=C(11024),q=C(11022),S=C(11083),o=C(11137);function U(B,I){if((0,k.k)()){const{requestAnimationFrame:C}=I||window;if("function"===typeof C)return C(B)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(B);return setTimeout(B,16)}class G{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(B){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(B){B!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=B,this._depthCullingState.depthFunc=B?518:515)}setColorWrite(B){B!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=B)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(B){if(B)return this.isNDCHalfZRange?B.IS_NDC_HALF_ZRANGE="":delete B.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?B.USE_REVERSE_DEPTHBUFFER="":delete B.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?B.USE_EXACT_SRGB_CONVERSIONS="":delete B.USE_EXACT_SRGB_CONVERSIONS);{let B="";return this.isNDCHalfZRange&&(B+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(B&&(B+="\n"),B+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(B&&(B+="\n"),B+="#define USE_EXACT_SRGB_CONVERSIONS"),B}}_rebuildInternalTextures(){const B=this._internalTexturesCache.slice();for(const I of B)I._rebuild()}_rebuildRenderTargetWrappers(){const B=this._renderTargetWrapperCache.slice();for(const I of B)I._rebuild()}_rebuildEffects(){for(const B in this._compiledEffects){const I=this._compiledEffects[B];I._pipelineContext=null,I._prepareEffect()}y.Effect.ResetCache()}_rebuildGraphicsResources(){var B;this.wipeCaches(!0),this._rebuildEffects(),null===(B=this._rebuildComputeEffects)||void 0===B||B.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){x.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(B){setTimeout((()=>{this._clearEmptyResources();const I=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,M=this._depthCullingState.depthMask,x=this._stencilState.stencilTest;B(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=I,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=M,this._stencilState.stencilTest=x,this._flagContextRestored()}),0)}get R(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(B){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(B){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const B=new Uint8Array(4),I=[B,B,B,B,B,B];this._emptyCubeTexture=this.createRawCubeTexture(I,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(B){if(!B)return this._activeRenderLoops.length=0,void this._cancelFrame();const I=this._activeRenderLoops.indexOf(B);I>=0&&(this._activeRenderLoops.splice(I,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const B=this._frameHandler;if(this._frameHandler=0,(0,k.k)()){const{cancelAnimationFrame:I}=this.getHostWindow()||window;if("function"===typeof I)return I(B)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(B);return clearTimeout(B)}}o(){this.onBeginFrameObservable.notifyObservers(this)}ny(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(B){this._maxFPS=B,void 0!==B&&(this._minFrameTime=B<=0?Number.MAX_VALUE:1e3/B)}_isOverFrameTime(B){if(!B||void 0===this._maxFPS)return!1;const I=B-this._lastFrameTime;return this._lastFrameTime=B,this._renderAccumulator+=I,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(B){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(B)){let B=!0;(this.R||!this.renderEvenInBackground&&this._windowIsBackground)&&(B=!1),B&&(this.o(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ny())}}_renderLoop(B){this._processFrame(B),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let B=0;B<this._activeRenderLoops.length;B++){(0,this._activeRenderLoops[B])()}}_renderViews(){return!1}_queueNewFrame(B,I){return U(B,I)}runRenderLoop(B){-1===this._activeRenderLoops.indexOf(B)&&(this._activeRenderLoops.push(B),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(B){this._depthCullingState.depthTest=B}setZOffset(B){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-B:B}getZOffset(){const B=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-B:B}setZOffsetUnits(B){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-B:B}getZOffsetUnits(){const B=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-B:B}getHostWindow(){return(0,k.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(B){this._compatibilityMode=!0}_rebuildTextures(){for(const B of this.scenes)B._rebuildTextures();for(const B of this._virtualScenes)B._rebuildTextures()}_releaseRenderTargetWrapper(B){const I=this._renderTargetWrapperCache.indexOf(B);-1!==I&&this._renderTargetWrapperCache.splice(I,1)}get currentViewport(){return this._cachedViewport}setViewport(B,I,C){const M=I||this.getRenderWidth(),x=C||this.getRenderHeight(),y=B.x||0,f=B.y||0;this._cachedViewport=B,this._viewport(y*M,f*x,M*B.width,x*B.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(B){return new Path2D(B)}get description(){let B=this.name+this.version;return this._caps.parallelShaderCompile&&(B+=" - Parallel shader compilation"),B}_createTextureBase(B,I,C,y){let f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,g=arguments.length>7?arguments[7]:void 0,N=arguments.length>8?arguments[8]:void 0,R=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,H=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,k=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,q=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,S=arguments.length>13?arguments[13]:void 0,U=arguments.length>14?arguments[14]:void 0,V=arguments.length>15?arguments[15]:void 0;const c="data:"===(B=B||"").substring(0,5),t="blob:"===B.substring(0,5),r=c&&-1!==B.indexOf(";base64,"),A=H||new F.b(this,1);A!==H&&(A.label=B.substring(0,60));const D=B;!this._transformTextureUrl||r||H||R||(B=this._transformTextureUrl(B)),D!==B&&(A._originalUrl=D);const J=B.lastIndexOf(".");let i=q||(J>-1?B.substring(J).toLowerCase():"");i.indexOf("?")>-1&&(i=i.split("?")[0]);const u=(0,o.c)(i,S);y&&y.addPendingData(A),A.url=B,A.generateMipMaps=!I,A.samplingMode=f,A.invertY=C,A._useSRGBBuffer=this._getUseSRGBBuffer(!!V,I),this._doNotHandleContextLost||(A._buffer=R);let p=null;L&&!H&&(p=A.onLoadedObservable.add(L)),H||this._internalTexturesCache.push(A);const n=(C,H)=>{y&&y.removePendingData(A),B===D?(p&&A.onLoadedObservable.remove(p),M.c.UseFallbackTexture&&B!==M.c.FallbackTexture&&this._createTextureBase(M.c.FallbackTexture,I,A.invertY,y,f,null,e,g,N,R,A),C=(C||"Unknown error")+(M.c.UseFallbackTexture?" - Fallback texture was used":""),A.onErrorObservable.notifyObservers({message:C,exception:H}),e&&e(C,H)):(x.b.Warn(`Failed to load ${B}, falling back to ${D}`),this._createTextureBase(D,I,A.invertY,y,f,L,e,g,N,R,A,k,q,S,U,V))};if(u){const I=async B=>{(await u).loadData(B,A,((B,I,C,M,x,L)=>{L?n("TextureLoader failed to load data"):g(A,i,y,{width:B,height:I},A.invertY,!C,M,(()=>(x(),!1)),f)}),U)};R?R instanceof ArrayBuffer?I(new Uint8Array(R)):ArrayBuffer.isView(R)?I(R):e&&e("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(B,(B=>{I(new Uint8Array(B))}),void 0,y?y.offlineProvider:void 0,!0,((B,I)=>{n("Unable to load "+(B&&B.responseURL,I))}))}else{const C=B=>{t&&!this._doNotHandleContextLost&&(A._buffer=B),g(A,i,y,B,A.invertY,I,!1,N,f)};!c||r?R&&("string"===typeof R.decoding||R.close)?C(R):G._FileToolsLoadImage(B||"",C,n,y?y.offlineProvider:null,S,A.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof R||R instanceof ArrayBuffer||ArrayBuffer.isView(R)||R instanceof Blob?G._FileToolsLoadImage(R,C,n,y?y.offlineProvider:null,S,A.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):R&&C(R)}return A}_rebuildBuffers(){for(const B of this._uniformBuffers)B._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,k.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const B in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,B)&&(this._boundTexturesCache[B]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(B){this._name=B}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(B){this._hardwareScalingLevel=B,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(B){this._doNotHandleContextLost=B}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(B,I,C){var x,y;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new e,this._stencilStateComposer=new g,this._stencilState=new N,this._alphaState=new R,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new q.e,this.onCanvasFocusObservable=new q.e,this.onNewSceneAddedObservable=new q.e,this.onResizeObservable=new q.e,this.onCanvasPointerOutObservable=new q.e,this.onEffectErrorObservable=new q.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new q.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=B=>this._renderLoop(B),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new q.e,this.onAfterShaderCompilationObservable=new q.e,this.onBeginFrameObservable=new q.e,this.onEndFrameObservable=new q.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new q.e,this.onContextRestoredObservable=new q.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.If=new q.e,this.onReleaseEffectsObservable=new q.e,M.c.Instances.push(this),this.startTime=L.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,f.e.SetMatrixPrecision(!!I.useHighPrecisionMatrix),(0,k.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=C??!1,I.antialias=B??I.antialias,I.deterministicLockstep=I.deterministicLockstep??!1,I.lockstepMaxSteps=I.lockstepMaxSteps??4,I.timeStep=I.timeStep??1/60,I.stencil=I.stencil??!0,this._audioContext=(null===(x=I.audioEngineOptions)||void 0===x?void 0:x.audioContext)??null,this._audioDestination=(null===(y=I.audioEngineOptions)||void 0===y?void 0:y.audioDestination)??null,this.premultipliedAlpha=I.premultipliedAlpha??!0,this._doNotHandleContextLost=!!I.doNotHandleContextLost,this._isStencilEnable=!!I.stencil,this.useExactSrgbConversions=I.useExactSrgbConversions??!1;const H=(0,k.k)()&&window.devicePixelRatio||1,F=I.limitDeviceRatio||H;C=C||I.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(F,H):1,this._lastDevicePixelRatio=H,this._creationOptions=I}resize(){let B,I,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const B=(0,k.k)()&&window.devicePixelRatio||1,I=this._lastDevicePixelRatio/B;this._lastDevicePixelRatio=B,this._hardwareScalingLevel*=I}if((0,k.k)()&&(0,k.f)())if(this._renderingCanvas){var M,x;const C=null===(M=(x=this._renderingCanvas).getBoundingClientRect)||void 0===M?void 0:M.call(x);B=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,I=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else B=window.innerWidth,I=window.innerHeight;else B=this._renderingCanvas?this._renderingCanvas.width:100,I=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(B/this._hardwareScalingLevel,I/this._hardwareScalingLevel,C)}setSize(B,I){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(B|=0,I|=0,!C&&this._renderingCanvas.width===B&&this._renderingCanvas.height===I)return!1;if(this._renderingCanvas.width=B,this._renderingCanvas.height=I,this.scenes){for(let B=0;B<this.scenes.length;B++){const I=this.scenes[B];for(let B=0;B<I.cameras.length;B++){I.cameras[B]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(B,I,C,M,x,y,f,L,e,g,N){throw(0,H.c)("engine.rawTexture")}createRawCubeTexture(B,I,C,M,x,y,f,L){throw(0,H.c)("engine.rawTexture")}createRawTexture3D(B,I,C,M,x,y,f,L,e,g,N){throw(0,H.c)("engine.rawTexture")}createRawTexture2DArray(B,I,C,M,x,y,f,L,e,g,N){throw(0,H.c)("engine.rawTexture")}_sharedInit(B){this._renderingCanvas=B}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const B=navigator.userAgent;this.hostInformation.isMobile=-1!==B.indexOf("Mobile")||-1!==B.indexOf("Mac")&&(0,k.f)()&&"ontouchend"in document},this._checkForMobile(),(0,k.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(B){return document.createElement("video")}_reportDrawCall(){var B;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(B=this._drawCalls)||void 0===B||B.addCount(I,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(B,I){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(B,I){return createImageBitmap(B,I)}resizeImageBitmap(B,I,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(B){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(B,I){if("undefined"===typeof document)return new OffscreenCanvas(B,I);const C=document.createElement("canvas");return C.width=B,C.height=I,C}createCanvas(B,I){return G._CreateCanvas(B,I)}static _FileToolsLoadImage(B,I,C,M,x,y,f){throw(0,H.c)("FileTools")}_loadFile(B,I,C,M,x,y){const f=(0,S.m)(B,I,C,M,x,y);return this._activeRequests.push(f),f.onCompleteObservable.add((()=>{const B=this._activeRequests.indexOf(f);-1!==B&&this._activeRequests.splice(B,1)})),f}static _FileToolsLoadFile(B,I,C,M,x,y){if(S.e.loadFile)return S.e.loadFile(B,I,C,M,x,y);throw(0,H.c)("FileTools")}dispose(){var B;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(B=this.releaseComputeEffects)||void 0===B||B.call(this),y.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.If.notifyObservers(this),this.If.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,k.k)()&&window.removeEventListener("resize",this._checkForMobile);const I=M.c.Instances.indexOf(this);I>=0&&M.c.Instances.splice(I,1),M.c.Instances.length||(M.c.OnEnginesDisposedObservable.notifyObservers(this),M.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(B){throw(0,H.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(B,I){for(let C=0;C<M.c.Instances.length;C++){const x=M.c.Instances[C];for(let C=0;C<x.scenes.length;C++)x.scenes[C].markAllMaterialsAsDirty(B,I)}}}G._RenderPassIdCounter=0,G._RescalePostProcessFactory=null,G.CollisionsEpsilon=.001,G.QueueNewFrame=U},11056:(B,I,C)=>{C.d(I,{c:()=>x});var M=C(11022);class x{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}x.Instances=[],x.OnEnginesDisposedObservable=new M.e,x._LastCreatedScene=null,x.UseFallbackTexture=!0,x.FallbackTexture=""},11126:(B,I,C)=>{C.d(I,{e:()=>M});class M{static SetMatrixPrecision(B){if(M.MatrixTrackPrecisionChange=!1,B&&!M.MatrixUse64Bits&&M.MatrixTrackedMatrices)for(let I=0;I<M.MatrixTrackedMatrices.length;++I){const B=M.MatrixTrackedMatrices[I],C=B.Mf;B.Mf=new Array(16);for(let I=0;I<16;++I)B.Mf[I]=C[I]}M.MatrixUse64Bits=B,M.MatrixCurrentType=M.MatrixUse64Bits?Array:Float32Array,M.MatrixTrackedMatrices=null}}M.MatrixUse64Bits=!1,M.MatrixTrackPrecisionChange=!0,M.MatrixCurrentType=Float32Array,M.MatrixTrackedMatrices=[]},11137:(B,I,C)=>{C.d(I,{c:()=>f});var M=C(11027);const x=new Map;function y(B,I){(function(B){return x.delete(B)})(B)&&M.b.Warn(`Extension with the name '${B}' already exists`),x.set(B,I)}function f(B,I){"image/ktx"!==I&&"image/ktx2"!==I||(B=".ktx"),x.has(B)||(B.endsWith(".ies")&&y(".ies",(async()=>await C.e(15).then(C.bind(C,13623)).then((B=>new B._IESTextureLoader)))),B.endsWith(".dds")&&y(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,13626)).then((B=>new B._DDSTextureLoader)))),B.endsWith(".basis")&&y(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,13638)).then((B=>new B._BasisTextureLoader)))),B.endsWith(".env")&&y(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,13647)).then((B=>new B._ENVTextureLoader)))),B.endsWith(".hdr")&&y(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,13649)).then((B=>new B._HDRTextureLoader)))),(B.endsWith(".ktx")||B.endsWith(".ktx2"))&&(y(".ktx",(async()=>await C.e(30).then(C.bind(C,13655)).then((B=>new B._KTXTextureLoader)))),y(".ktx2",(async()=>await C.e(30).then(C.bind(C,13655)).then((B=>new B._KTXTextureLoader))))),B.endsWith(".tga")&&y(".tga",(async()=>await C.e(50).then(C.bind(C,13661)).then((B=>new B._TGATextureLoader)))),B.endsWith(".exr")&&y(".exr",(async()=>await C.e(16).then(C.bind(C,13669)).then((B=>new B._ExrTextureLoader)))));const M=x.get(B);return M?Promise.resolve(M(I)):null}},11129:(B,I,C)=>{C.d(I,{b:()=>f});var M,x=C(11022),y=C(11135);!function(B){B[B.Unknown=0]="Unknown",B[B.Url=1]="Url",B[B.Temp=2]="Temp",B[B.Raw=3]="Raw",B[B.Dynamic=4]="Dynamic",B[B.RenderTarget=5]="RenderTarget",B[B.MultiRenderTarget=6]="MultiRenderTarget",B[B.Cube=7]="Cube",B[B.CubeRaw=8]="CubeRaw",B[B.CubePrefiltered=9]="CubePrefiltered",B[B.Raw3D=10]="Raw3D",B[B.Raw2DArray=11]="Raw2DArray",B[B.DepthStencil=12]="DepthStencil",B[B.CubeRawRGBD=13]="CubeRawRGBD",B[B.Depth=14]="Depth"}(M||(M={}));class f extends y.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(B){this.generateMipMaps=B}get uniqueId(){return this._uniqueId}_setUniqueId(B){this._uniqueId=B}getEngine(){return this._engine}get source(){return this._source}constructor(B,I){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new x.e,this.onErrorObservable=new x.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=B,this._source=I,this._uniqueId=f._Counter++,C||(this._hardwareTexture=B._createHardwareTexture())}incrementReferences(){this._references++}updateSize(B,I){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,B,I,C),this.width=B,this.height=I,this.depth=C,this.baseWidth=B,this.baseHeight=I,this.baseDepth=C,this._size=B*I*C}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const B=this.onRebuildCallback(this),I=I=>{I._swapAndDie(this,!1),this.isReady=B.isReady};return void(B.isAsync?B.proxy.then(I):I(B.proxy))}let B;switch(this.source){case 2:case 12:case 14:break;case 1:return void(B=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(B=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:B=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),B._swapAndDie(this,!1),this.isReady=!0;break;case 10:B=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 11:B=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),B._swapAndDie(this,!1),this.isReady=!0;break;case 4:B=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),B._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(B=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:B=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),B._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return B=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(B=>{B&&B._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(B._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(B){var I;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(I=this._hardwareTexture)||void 0===I||I.setUsage(B._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),B._hardwareTexture=this._hardwareTexture,C&&(B._isRGBD=this._isRGBD),this._lodTextureHigh&&(B._lodTextureHigh&&B._lodTextureHigh.dispose(),B._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(B._lodTextureMid&&B._lodTextureMid.dispose(),B._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(B._lodTextureLow&&B._lodTextureLow.dispose(),B._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(B._irradianceTexture&&B._irradianceTexture.dispose(),B._irradianceTexture=this._irradianceTexture);const M=this._engine.getLoadedTexturesCache();let x=M.indexOf(this);-1!==x&&M.splice(x,1),x=M.indexOf(B),-1===x&&M.push(B)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}f._Counter=0},11135:(B,I,C)=>{C.d(I,{d:()=>M});class M{get wrapU(){return this._cachedWrapU}set wrapU(B){this._cachedWrapU=B}get wrapV(){return this._cachedWrapV}set wrapV(B){this._cachedWrapV=B}get wrapR(){return this._cachedWrapR}set wrapR(B){this._cachedWrapR=B}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(B){this._cachedAnisotropicFilteringLevel=B}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(B){this._comparisonFunction=B}get useMipMaps(){return this._useMipMaps}set useMipMaps(B){this._useMipMaps=B}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=B,this._cachedWrapV=I,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=M,this.samplingMode=x,this._comparisonFunction=y,this}compareSampler(B){return this._cachedWrapU===B._cachedWrapU&&this._cachedWrapV===B._cachedWrapV&&this._cachedWrapR===B._cachedWrapR&&this._cachedAnisotropicFilteringLevel===B._cachedAnisotropicFilteringLevel&&this.samplingMode===B.samplingMode&&this._comparisonFunction===B._comparisonFunction&&this._useMipMaps===B._useMipMaps}}},11029:(B,I,C)=>{C.d(I,{d:()=>y});var M=C(11027);const x=(B,I,C)=>B?B.getClassName&&"Mesh"===B.getClassName()?null:!B.getClassName||"SubMesh"!==B.getClassName()&&"PhysicsBody"!==B.getClassName()?B.clone?B.clone():Array.isArray(B)?B.slice():C&&"object"===typeof B?{...B}:null:B.clone(I):null;class y{static DeepCopy(B,I,C,y){let f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const L=function(B){const I=[];do{const C=Object.getOwnPropertyNames(B);for(const B of C)-1===I.indexOf(B)&&I.push(B)}while(B=Object.getPrototypeOf(B));return I}(B);for(const g of L){if("_"===g[0]&&(!y||-1===y.indexOf(g)))continue;if(g.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(g))continue;const L=B[g],N=typeof L;if("function"!==N)try{if("object"===N)if(L instanceof Uint8Array)I[g]=Uint8Array.from(L);else if(L instanceof Array){if(I[g]=[],L.length>0)if("object"==typeof L[0])for(let B=0;B<L.length;B++){const C=x(L[B],I,f);-1===I[g].indexOf(C)&&I[g].push(C)}else I[g]=L.slice(0)}else I[g]=x(L,I,f);else I[g]=L}catch(e){M.b.Warn(e.message)}}}}},11069:(B,I,C)=>{C.d(I,{d:()=>M,f:()=>x,j:()=>y});class M extends Error{}M._setPrototypeOf=Object.setPrototypeOf||((B,I)=>(B.__proto__=I,B));const x={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class y extends M{constructor(B,I,C){super(B),this.errorCode=I,this.innerError=C,this.name="RuntimeError",M._setPrototypeOf(this,y.prototype)}}},11062:(B,I,C)=>{C.d(I,{c:()=>n,g:()=>G,j:()=>J,k:()=>u,p:()=>A,l:()=>S,q:()=>t,t:()=>r,u:()=>D,w:()=>V});var M=C(11051),x=C(11024),y=C(11022);class f{}f.FilesToLoad={};var L=C(11069),e=C(11072),g=C(11074),N=C(11056),R=C(11027),H=C(11091),F=C(11083),k=C(11096);const q=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class S extends L.j{constructor(B,I){super(B,L.f.LoadFileError),this.name="LoadFileError",L.d._setPrototypeOf(this,S.prototype),I instanceof M.c?this.request=I:this.file=I}}class o extends L.j{constructor(B,I){super(B,L.f.RequestFileError),this.request=I,this.name="RequestFileError",L.d._setPrototypeOf(this,o.prototype)}}class U extends L.j{constructor(B,I){super(B,L.f.ReadFileError),this.file=I,this.name="ReadFileError",L.d._setPrototypeOf(this,U.prototype)}}const G={DefaultRetryStrategy:class{static ExponentialBackoff(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,M,x)=>0!==M.status||x>=B||-1!==C.indexOf("file:")?-1:Math.pow(2,x)*I}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:B=>B,ScriptBaseUrl:"",ScriptPreprocessUrl:B=>B,CleanUrl:B=>B=B.replace(/#/gm,"%23")},V=(B,I)=>{if((!B||0!==B.indexOf("data:"))&&G.CorsBehavior)if("string"===typeof G.CorsBehavior||G.CorsBehavior instanceof String)I.crossOrigin=G.CorsBehavior;else{const C=G.CorsBehavior(B);C&&(I.crossOrigin=C)}},c={getRequiredSize:null},t=function(B,I,C,x){let y,L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",g=arguments.length>5?arguments[5]:void 0,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:N.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===R||void 0===R||!R._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let H=!1;B instanceof ArrayBuffer||ArrayBuffer.isView(B)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(y=URL.createObjectURL(new Blob([B],{type:L})),H=!0):y=`data:${L};base64,`+(0,e.j)(B):B instanceof Blob?(y=URL.createObjectURL(B),H=!0):(y=G.CleanUrl(B),y=G.PreprocessUrl(y));const F=I=>{if(C){const M=y||B.toString();C(`Error while trying to load image: ${0===M.indexOf("http")||M.length<=128?M:M.slice(0,128)+"..."}`,I)}};if(null!==R&&void 0!==R&&R._features.forceBitmapOverHTMLImageElement)return A(y,(M=>{R.createImageBitmap(new Blob([M],{type:L}),{premultiplyAlpha:"none",...g}).then((B=>{I(B),H&&URL.revokeObjectURL(y)})).catch((I=>{C&&C("Error while trying to load image: "+B,I)}))}),void 0,x||void 0,!0,((B,I)=>{F(I)})),null;const k=new Image;if(c.getRequiredSize){const I=c.getRequiredSize(B);I.width&&(k.width=I.width),I.height&&(k.height=I.height)}V(y,k);const q=[],S=()=>{for(const B of q)B.target.removeEventListener(B.name,B.handler);q.length=0};q.push({target:k,name:"load",handler:()=>{S(),I(k),H&&k.src&&URL.revokeObjectURL(k.src)}}),q.push({target:k,name:"error",handler:B=>{S(),F(B),H&&k.src&&URL.revokeObjectURL(k.src)}}),q.push({target:document,name:"securitypolicyviolation",handler:B=>{if(B.blockedURI!==k.src||"ef"===B.disposition)return;S();const I=new Error(`CSP violation of policy ${B.effectiveDirective} ${B.blockedURI}. Current policy is ${B.originalPolicy}`);N.c.UseFallbackTexture=!1,F(I),H&&k.src&&URL.revokeObjectURL(k.src),k.src=""}}),(()=>{for(const B of q)B.target.addEventListener(B.name,B.handler)})();const o="blob:"===y.substring(0,5),U="data:"===y.substring(0,5),t=()=>{o||U||!M.c.IsCustomRequestAvailable?k.src=y:A(y,((B,I,C)=>{const M=new Blob([B],{type:!L&&C?C:L}),x=URL.createObjectURL(M);H=!0,k.src=x}),void 0,x||void 0,!0,((B,I)=>{F(I)}))},r=()=>{x&&x.loadImage(y,k)};if(!o&&!U&&x&&x.enableTexturesOffline)x.open(r,t);else{if(-1!==y.indexOf("file:")){const B=decodeURIComponent(y.substring(5).toLowerCase());if(f.FilesToLoad[B]&&"undefined"!==typeof URL){try{let I;try{I=URL.createObjectURL(f.FilesToLoad[B])}catch(D){I=URL.createObjectURL(f.FilesToLoad[B])}k.src=I,H=!0}catch(J){k.src=""}return k}}t()}return k},r=(B,I,C,M,x)=>{const f=new FileReader,L={onCompleteObservable:new y.e,abort:()=>f.abort()};return f.onloadend=()=>L.onCompleteObservable.notifyObservers(L),x&&(f.onerror=()=>{x(new U(`Unable to read ${B.name}`,B))}),f.onload=B=>{I(B.target.result)},C&&(f.onprogress=C),M?f.readAsArrayBuffer(B):f.readAsText(B),L},A=(B,I,C,M,x,e,g)=>{if(B.name)return r(B,I,C,x,e?B=>{e(void 0,B)}:void 0);const N=B;if(-1!==N.indexOf("file:")){let B=decodeURIComponent(N.substring(5).toLowerCase());0===B.indexOf("./")&&(B=B.substring(2));const M=f.FilesToLoad[B];if(M)return r(M,I,C,x,e?B=>e(void 0,new S(B.message,B.file)):void 0)}const{match:F,type:k}=p(N);if(F){const B={onCompleteObservable:new y.e,abort:()=>()=>{}};try{const B=x?n(N):O(N);I(B,void 0,k)}catch(L){e?e(void 0,L):R.b.Error(L.message||"Failed to parse the Data URL")}return H.e.SetImmediate((()=>{B.onCompleteObservable.notifyObservers(B)})),B}return D(N,((B,C)=>{I(B,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,M,x,e?B=>{e(B.request,new S(B.message,B.request))}:void 0,g)},D=(B,I,C,f,L,e,g)=>{B=G.CleanUrl(B),B=G.PreprocessUrl(B);const N=G.BaseUrl+B;let H=!1;const F={onCompleteObservable:new y.e,abort:()=>H=!0},k=()=>{let B,y=new M.c,f=null;const k=()=>{y&&(C&&y.removeEventListener("progress",C),B&&y.removeEventListener("readystatechange",B),y.removeEventListener("loadend",q))};let q=()=>{k(),F.onCompleteObservable.notifyObservers(F),F.onCompleteObservable.clear(),C=void 0,B=null,q=null,e=void 0,g=void 0,I=void 0};F.abort=()=>{H=!0,q&&q(),y&&y.readyState!==(XMLHttpRequest.DONE||4)&&y.abort(),null!==f&&(clearTimeout(f),f=null),y=null};const S=B=>{const I=B.message||"Unknown error";e&&y?e(new o(I,y)):R.b.Error(I)},U=R=>{if(y){if(y.open("GET",N),g)try{g(y)}catch(F){return void S(F)}L&&(y.responseType="arraybuffer"),C&&y.addEventListener("progress",C),q&&y.addEventListener("loadend",q),B=()=>{if(!H&&y&&y.readyState===(XMLHttpRequest.DONE||4)){if(B&&y.removeEventListener("readystatechange",B),y.status>=200&&y.status<300||0===y.status&&(!(0,x.k)()||i())){const B=L?y.response:y.responseText;if(null!==B){try{I&&I(B,y)}catch(F){S(F)}return}}const C=G.DefaultRetryStrategy;if(C){const B=C(N,y,R);if(-1!==B)return k(),y=new M.c,void(f=setTimeout((()=>U(R+1)),B))}const g=new o("Error status: "+y.status+" "+y.statusText+" - Unable to load "+N,y);e&&e(g)}},y.addEventListener("readystatechange",B),y.send()}};U(0)};if(f&&f.enableSceneOffline){const M=B=>{B&&B.status>400?e&&e(B):k()},x=()=>{f&&f.loadFile(G.BaseUrl+B,(B=>{!H&&I&&I(B),F.onCompleteObservable.notifyObservers(F)}),C?B=>{!H&&C&&C(B)}:void 0,M,L)};f.open(x,M)}else k();return F},J=B=>{const{match:I,type:C}=p(B);if(I)return C||void 0;const M=B.lastIndexOf(".");switch(B.substring(M+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"qf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},i=()=>"undefined"!==typeof location&&"file:"===location.protocol,u=B=>q.test(B),p=B=>{const I=q.exec(B);if(null===I||0===I.length)return{match:!1,type:""};return{match:!0,type:I[0].replace("data:","").replace("base64,","")}};function n(B){return(0,e.c)(B.split(",")[1])}const O=B=>(0,e.f)(B.split(",")[1]);let a;k.e._FileToolsLoadImage=t,F.e.loadFile=A,g.r.loadFile=A;((B,I,C,M,x,y,f,L,e,g)=>{a={DecodeBase64UrlToBinary:B,DecodeBase64UrlToString:I,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:M,IsFileURL:x,LoadFile:y,LoadImage:f,ReadFile:L,RequestFile:e,SetCorsBehavior:g},Object.defineProperty(a,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(B){C.DefaultRetryStrategy=B}}),Object.defineProperty(a,"BaseUrl",{get:function(){return C.BaseUrl},set:function(B){C.BaseUrl=B}}),Object.defineProperty(a,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(B){C.PreprocessUrl=B}}),Object.defineProperty(a,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(B){C.CorsBehavior=B}})})(n,O,G,u,i,A,t,r,D,V)},11156:(B,I,C)=>{function M(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(B=>{const I=16*Math.random()|0;return("x"===B?I:3&I|8).toString(16)}))}C.d(I,{c:()=>M})},11141:(B,I,C)=>{C.d(I,{d:()=>y});var M=C(11027),x=C(11149);class y{static Instantiate(B){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[B])return this.RegisteredExternalClasses[B];const I=(0,x.e)(B);if(I)return I;M.b.Warn(B+" not found, you may have missed an import.");const C=B.split(".");let y=window||this;for(let M=0,x=C.length;M<x;M++)y=y[C[M]];return"function"!==typeof y?null:y}}y.RegisteredExternalClasses={}},11034:(B,I,C)=>{C.d(I,{c:()=>x});var M=C(11024);class x{static get Now(){return(0,M.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11072:(B,I,C)=>{C.d(I,{c:()=>f,f:()=>y,g:()=>M,j:()=>x});const M=B=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(B);let I="";for(let C=0;C<B.byteLength;C++)I+=String.fromCharCode(B[C]);return I},x=B=>{const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,M,x,y,f,L,e,g="",N=0;const R=ArrayBuffer.isView(B)?new Uint8Array(B.buffer,B.byteOffset,B.byteLength):new Uint8Array(B);for(;N<R.length;)C=R[N++],M=N<R.length?R[N++]:Number.NaN,x=N<R.length?R[N++]:Number.NaN,y=C>>2,f=(3&C)<<4|M>>4,L=(15&M)<<2|x>>6,e=63&x,isNaN(M)?L=e=64:isNaN(x)&&(e=64),g+=I.charAt(y)+I.charAt(f)+I.charAt(L)+I.charAt(e);return g},y=B=>atob(B),f=B=>{const I=y(B),C=I.length,M=new Uint8Array(new ArrayBuffer(C));for(let x=0;x<C;x++)M[x]=I.charCodeAt(x);return M.buffer}},11161:(B,I,C)=>{function M(B){let I=1;do{I*=2}while(I<B);return I===B}function x(B,I,C){return B*(1-C)+I*C}function y(B){const I=f(B),C=L(B);return I-B>B-C?C:I}function f(B){return B--,B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,B|=B>>16,++B}function L(B){return B|=B>>1,B|=B>>2,B|=B>>4,B|=B>>8,(B|=B>>16)-(B>>1)}function e(B,I){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=L(B);break;case 2:C=y(B);break;default:C=f(B)}return Math.min(C,I)}C.d(I,{c:()=>L,f:()=>e,h:()=>M,i:()=>x,l:()=>y})},11018:(B,I,C)=>{C.r(I),C.d(I,{AsyncLoop:()=>U,Tools:()=>S,className:()=>o});var M=C(11022),x=C(11024),y=C(11027),f=C(11029),L=C(11034),e=C(11042),g=C(11051),N=C(11056),R=C(11062),H=C(11091),F=C(11141),k=C(11156),q=C(11161);class S{static get BaseUrl(){return R.g.BaseUrl}static set BaseUrl(B){R.g.BaseUrl=B}static get CleanUrl(){return R.g.CleanUrl}static set CleanUrl(B){R.g.CleanUrl=B}static IsAbsoluteUrl(B){return 0===B.indexOf("//")||-1!==B.indexOf("://")&&(-1!==B.indexOf(".")&&(-1!==B.indexOf("/")&&(!(B.indexOf(":")>B.indexOf("/"))&&(B.indexOf("://")<B.indexOf(".")||(0===B.indexOf("data:")||0===B.indexOf("blob:"))))))}static set ScriptBaseUrl(B){R.g.ScriptBaseUrl=B}static get ScriptBaseUrl(){return R.g.ScriptBaseUrl}static set CDNBaseUrl(B){S.ScriptBaseUrl=B,S.AssetBaseUrl=B}static set ScriptPreprocessUrl(B){R.g.ScriptPreprocessUrl=B}static get ScriptPreprocessUrl(){return R.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return R.g.DefaultRetryStrategy}static set DefaultRetryStrategy(B){R.g.DefaultRetryStrategy=B}static get CorsBehavior(){return R.g.CorsBehavior}static set CorsBehavior(B){R.g.CorsBehavior=B}static get UseFallbackTexture(){return N.c.UseFallbackTexture}static set UseFallbackTexture(B){N.c.UseFallbackTexture=B}static get RegisteredExternalClasses(){return F.d.RegisteredExternalClasses}static set RegisteredExternalClasses(B){F.d.RegisteredExternalClasses=B}static get fallbackTexture(){return N.c.FallbackTexture}static set fallbackTexture(B){N.c.FallbackTexture=B}static FetchToRef(B,I,C,M,x,y){const f=4*((Math.abs(B)*C%C|0)+(Math.abs(I)*M%M|0)*C);y.r=x[f]/255,y.g=x[f+1]/255,y.b=x[f+2]/255,y.a=x[f+3]/255}static Mix(B,I,C){return 0}static Instantiate(B){return F.d.Instantiate(B)}static SetImmediate(B){H.e.SetImmediate(B)}static IsExponentOfTwo(B){return!0}static FloatRound(B){return Math.fround(B)}static GetFilename(B){const I=B.lastIndexOf("/");return I<0?B:B.substring(I+1)}static GetFolderPath(B){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=B.lastIndexOf("/");return C<0?I?B:"":B.substring(0,C+1)}static ToDegrees(B){return 180*B/Math.PI}static ToRadians(B){return B*Math.PI/180}static SmoothAngleChange(B,I){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const M=this.ToRadians(B),x=this.ToRadians(I);return this.ToDegrees(Math.atan2((1-C)*Math.sin(x)+C*Math.sin(M),(1-C)*Math.cos(x)+C*Math.cos(M)))}static MakeArray(B,I){return!0===I||void 0!==B&&null!=B?Array.isArray(B)?B:[B]:null}static GetPointerPrefix(B){return(0,x.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(B,I){(0,R.w)(B,I)}static SetReferrerPolicyBehavior(B,I){I.referrerPolicy=B}static get PreprocessUrl(){return R.g.PreprocessUrl}static set PreprocessUrl(B){R.g.PreprocessUrl=B}static LoadImage(B,I,C,M,x,y){return(0,R.q)(B,I,C,M,x,y)}static LoadFile(B,I,C,M,x,y){return(0,R.p)(B,I,C,M,x,y)}static async LoadFileAsync(B){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,M)=>{(0,R.p)(B,(B=>{C(B)}),void 0,void 0,I,((B,I)=>{M(I)}))}))}static GetAssetUrl(B){if(!B)return"";if(S.AssetBaseUrl&&B.startsWith(S._DefaultAssetsUrl)){const I="/"===S.AssetBaseUrl[S.AssetBaseUrl.length-1]?S.AssetBaseUrl.substring(0,S.AssetBaseUrl.length-1):S.AssetBaseUrl;return B.replace(S._DefaultAssetsUrl,I)}return B}static GetBabylonScriptURL(B,I){if(!B)return"";if(S.ScriptBaseUrl&&B.startsWith(S._DefaultCdnUrl)){const I="/"===S.ScriptBaseUrl[S.ScriptBaseUrl.length-1]?S.ScriptBaseUrl.substring(0,S.ScriptBaseUrl.length-1):S.ScriptBaseUrl;B=B.replace(S._DefaultCdnUrl,I)}return B=S.ScriptPreprocessUrl(B),I&&(B=S.GetAbsoluteUrl(B)),B}static LoadBabylonScript(B,I,C,M){B=S.GetBabylonScriptURL(B),S.LoadScript(B,I,C)}static async LoadBabylonScriptAsync(B){return B=S.GetBabylonScriptURL(B),await S.LoadScriptAsync(B)}static LoadScript(B,I,C,M){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(B),I&&I()}catch(e){null===C||void 0===C||C(`Unable to load script '${B}' in worker`,e)}return}if(!(0,x.k)())return void(null===C||void 0===C||C(`Cannot load script '${B}' outside of a window or a worker`));const f=document.getElementsByTagName("head")[0],L=document.createElement("script");y?(L.setAttribute("type","module"),L.innerText=B):(L.setAttribute("type","text/javascript"),L.setAttribute("src",B)),M&&(L.id=M),L.onload=()=>{I&&I()},L.onerror=I=>{C&&C(`Unable to load script '${B}'`,I)},f.appendChild(L)}static async LoadScriptAsync(B,I){return await new Promise(((C,M)=>{this.LoadScript(B,(()=>{C()}),((B,I)=>{M(I||new Error(B))}),I)}))}static ReadFileAsDataURL(B,I,C){const x=new FileReader,y={onCompleteObservable:new M.e,abort:()=>x.abort()};return x.onloadend=()=>{y.onCompleteObservable.notifyObservers(y)},x.onload=B=>{I(B.target.result)},x.onprogress=C,x.readAsDataURL(B),y}static ReadFile(B,I,C,M,x){return(0,R.t)(B,I,C,M,x)}static FileAsURL(B){const I=new Blob([B]);return window.URL.createObjectURL(I)}static Format(B){let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return B.toFixed(I)}static DeepCopy(B,I,C,M){f.d.DeepCopy(B,I,C,M)}static IsEmpty(B){for(const I in B)if(Object.prototype.hasOwnProperty.call(B,I))return!1;return!0}static RegisterTopRootEvents(B,I){for(let M=0;M<I.length;M++){const x=I[M];B.addEventListener(x.name,x.handler,!1);try{window.parent&&window.parent.addEventListener(x.name,x.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(B,I){for(let M=0;M<I.length;M++){const x=I[M];B.removeEventListener(x.name,x.handler);try{B.parent&&B.parent.removeEventListener(x.name,x.handler)}catch(C){}}}static async DumpFramebuffer(B,I,C,M){throw(0,e.c)("DumpTools")}static DumpData(B,I,C,M){throw(0,e.c)("DumpTools")}static async DumpDataAsync(B,I,C){throw(0,e.c)("DumpTools")}static _IsOffScreenCanvas(B){return void 0!==B.convertToBlob}static ToBlob(B,I){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",M=arguments.length>3?arguments[3]:void 0;S._IsOffScreenCanvas(B)||B.toBlob||(B.toBlob=function(B,I,C){setTimeout((()=>{const M=atob(this.toDataURL(I,C).split(",")[1]),x=M.length,y=new Uint8Array(x);for(let B=0;B<x;B++)y[B]=M.charCodeAt(B);B(new Blob([y]))}))}),S._IsOffScreenCanvas(B)?B.convertToBlob({type:C,quality:M}).then((B=>I(B))):B.toBlob((function(B){I(B)}),C,M)}static DownloadBlob(B,I){if("download"in document.createElement("a")){if(!I){const B=new Date;I="screenshot_"+((B.getFullYear()+"-"+(B.getMonth()+1)).slice(2)+"-"+B.getDate()+"_"+B.getHours()+"-"+("0"+B.getMinutes()).slice(-2))+".png"}S.Download(B,I)}else if(B&&"undefined"!==typeof URL){const I=URL.createObjectURL(B),C=window.open("");if(!C)return;const M=C.document.createElement("img");M.onload=function(){URL.revokeObjectURL(I)},M.src=I,C.document.body.appendChild(M)}}static EncodeScreenshotCanvasData(B,I){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",M=arguments.length>3?arguments[3]:void 0,x=arguments.length>4?arguments[4]:void 0;if("string"!==typeof M&&I){if(I){if(S._IsOffScreenCanvas(B))return void B.convertToBlob({type:C,quality:x}).then((B=>{const C=new FileReader;C.readAsDataURL(B),C.onloadend=()=>{const B=C.result;I(B)}}));const M=B.toDataURL(C,x);I(M)}}else this.ToBlob(B,(function(B){B&&S.DownloadBlob(B,M),I&&I("")}),C,x)}static Download(B,I){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(B),M=document.createElement("a");document.body.appendChild(M),M.style.display="none",M.href=C,M.download=I,M.addEventListener("click",(()=>{M.parentElement&&M.parentElement.removeChild(M)})),M.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(B){return"boolean"===typeof B[0]?B[0]:"boolean"===typeof B[1]&&B[1]}static CreateScreenshot(B,I,C,M){throw(0,e.c)("ScreenshotTools")}static async CreateScreenshotAsync(B,I,C){throw(0,e.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(B,I,C,M){throw(0,e.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(B,I,C){throw(0,e.c)("ScreenshotTools")}static RandomId(){return(0,k.c)()}static IsBase64(B){return(0,R.k)(B)}static DecodeBase64(B){return(0,R.c)(B)}static get errorsCount(){return y.b.errorsCount}static Log(B){y.b.Log(B)}static Warn(B){y.b.Warn(B)}static Error(B){y.b.Error(B)}static get LogCache(){return y.b.LogCache}static ClearLogCache(){y.b.ClearLogCache()}static set LogLevels(B){y.b.LogLevels=B}static set PerformanceLogLevel(B){return(B&S.PerformanceUserMarkLogLevel)===S.PerformanceUserMarkLogLevel?(S.StartPerformanceCounter=S._StartUserMark,void(S.EndPerformanceCounter=S._EndUserMark)):(B&S.PerformanceConsoleLogLevel)===S.PerformanceConsoleLogLevel?(S.StartPerformanceCounter=S._StartPerformanceConsole,void(S.EndPerformanceCounter=S._EndPerformanceConsole)):(S.StartPerformanceCounter=S._StartPerformanceCounterDisabled,void(S.EndPerformanceCounter=S._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(B,I){}static _EndPerformanceCounterDisabled(B,I){}static _StartUserMark(B){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!S._Performance){if(!(0,x.k)())return;S._Performance=window.performance}I&&S._Performance.mark&&S._Performance.mark(B+"-Begin")}static _EndUserMark(B){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&S._Performance.mark&&(S._Performance.mark(B+"-End"),S._Performance.measure(B,B+"-Begin",B+"-End"))}static _StartPerformanceConsole(B){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(S._StartUserMark(B,I),console.time&&console.time(B))}static _EndPerformanceConsole(B){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(S._EndUserMark(B,I),console.timeEnd(B))}static get Now(){return L.c.Now}static GetClassName(B){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!I&&B.getClassName)C=B.getClassName();else{if(B instanceof Object){C=(I?B:Object.getPrototypeOf(B)).constructor.__bjsclassName__}C||(C=typeof B)}return C}static First(B,I){for(const C of B)if(I(C))return C;return null}static getFullClassName(B){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,M=null;if(!I&&B.getClassName)C=B.getClassName();else{if(B instanceof Object){const x=I?B:Object.getPrototypeOf(B);C=x.constructor.__bjsclassName__,M=x.constructor.__bjsmoduleName__}C||(C=typeof B)}return C?(null!=M?M+".":"")+C:null}static async DelayAsync(B){await new Promise((I=>{setTimeout((()=>{I()}),B)}))}static IsSafari(){return!!(0,x.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function o(B,I){return C=>{C.__bjsclassName__=B,C.__bjsmoduleName__=null!=I?I:null}}S.AssetBaseUrl="",S.UseCustomRequestHeaders=!1,S.CustomRequestHeaders=g.c.CustomRequestHeaders,S.GetDOMTextContent=x.d,S._DefaultCdnUrl="https://cdn.babylonjs.com",S._DefaultAssetsUrl="https://assets.babylonjs.com/core",S.GetAbsoluteUrl="object"===typeof document?B=>{const I=document.createElement("a");return I.href=B,I.href}:"function"===typeof URL&&"object"===typeof location?B=>new URL(B,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},S.NoneLogLevel=y.b.NoneLogLevel,S.MessageLogLevel=y.b.MessageLogLevel,S.WarningLogLevel=y.b.WarningLogLevel,S.ErrorLogLevel=y.b.ErrorLogLevel,S.AllLogLevel=y.b.AllLogLevel,S.IsWindowObjectExist=x.k,S.PerformanceNoneLogLevel=0,S.PerformanceUserMarkLogLevel=1,S.PerformanceConsoleLogLevel=2,S.StartPerformanceCounter=S._StartPerformanceCounterDisabled,S.EndPerformanceCounter=S._EndPerformanceCounterDisabled;class U{constructor(B,I,C){let M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=B,this.index=M-1,this._done=!1,this._fn=I,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(B,I,C){const M=new U(B,I,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return M.executeNext(),M}static SyncAsyncForLoop(B,I,C,M,x){let y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return U.Run(Math.ceil(B/I),(M=>{x&&x()?M.breakLoop():setTimeout((()=>{for(let y=0;y<I;++y){const f=M.index*I+y;if(f>=B)break;if(C(f),x&&x()){M.breakLoop();break}}M.executeNext()}),y)}),M)}}S.Mix=q.i,S.IsExponentOfTwo=q.h,N.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11149:(B,I,C)=>{C.d(I,{e:()=>y,h:()=>x});const M={};function x(B,I){M[B]=I}function y(B){return M[B]}},11051:(B,I,C)=>{C.d(I,{c:()=>M});class M{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(M.CustomRequestHeaders).length>0||M.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const B in M.CustomRequestHeaders){const I=M.CustomRequestHeaders[B];I&&this._xhr.setRequestHeader(B,I)}}_shouldSkipRequestModifications(B){return M.SkipRequestModificationForBabylonCDN&&(B.includes("preview.babylonjs.com")||B.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(B){this._xhr.onprogress=B}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(B){this._xhr.responseType=B}get timeout(){return this._xhr.timeout}set timeout(B){this._xhr.timeout=B}addEventListener(B,I,C){this._xhr.addEventListener(B,I,C)}removeEventListener(B,I,C){this._xhr.removeEventListener(B,I,C)}abort(){this._xhr.abort()}send(B){M.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(B)}open(B,I){for(const C of M.CustomRequestModifiers){if(this._shouldSkipRequestModifications(I))return;I=C(this._xhr,I)||I}I=(I=I.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=I,this._xhr.open(B,I,!0)}setRequestHeader(B,I){this._xhr.setRequestHeader(B,I)}getResponseHeader(B){return this._xhr.getResponseHeader(B)}}M.CustomRequestHeaders={},M.CustomRequestModifiers=new Array,M.SkipRequestModificationForBabylonCDN=!0}}]);