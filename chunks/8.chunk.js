"use strict";(self["9jl1vn4ei5r"]=self["9jl1vn4ei5r"]||[]).push([[8],{11700:(M,p,b)=>{b.d(p,{c:()=>a});var Q=b(11664),q=b(11637),B=b(11703),k=b(11722),u=b(11647);class T{constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,M&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(M){this._zOffset!==M&&(this._zOffset=M,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(M){this._zOffsetUnits!==M&&(this._zOffsetUnits=M,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(M){this._cullFace!==M&&(this._cullFace=M,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(M){this._cull!==M&&(this._cull=M,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(M){this._depthFunc!==M&&(this._depthFunc=M,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(M){this._depthMask!==M&&(this._depthMask=M,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(M){this._depthTest!==M&&(this._depthTest=M,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(M){this._frontFace!==M&&(this._frontFace=M,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(M){this.isDirty&&(this._isCullDirty&&(this.cull?M.enable(M.CULL_FACE):M.disable(M.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(M.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(M.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?M.enable(M.DEPTH_TEST):M.disable(M.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(M.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(M.enable(M.POLYGON_OFFSET_FILL),M.polygonOffset(this.zOffset,this.zOffsetUnits)):M.disable(M.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(M.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class O{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(M){this._func!==M&&(this._func=M,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(M){this._funcRef!==M&&(this._funcRef=M,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(M){this._funcMask!==M&&(this._funcMask=M,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(M){this._opStencilFail!==M&&(this._opStencilFail=M,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(M){this._opDepthFail!==M&&(this._opDepthFail=M,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(M){this._opStencilDepthPass!==M&&(this._opStencilDepthPass=M,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(M){this._mask!==M&&(this._mask=M,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(M){this._enabled!==M&&(this._enabled=M,this._isStencilTestDirty=!0)}constructor(){let M=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,M&&this.reset()}reset(){var M;this.stencilMaterial=void 0,null===(M=this.stencilGlobal)||void 0===M||M.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(M){var p;if(!M)return;const b=!this.useStencilGlobalOnly&&!(null===(p=this.stencilMaterial)||void 0===p||!p.enabled);this.enabled=b?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=b?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=b?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=b?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=b?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=b?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=b?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=b?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?M.enable(M.STENCIL_TEST):M.disable(M.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(M.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(M.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(M.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class H{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=H.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=H.KEEP,this.opDepthFail=H.KEEP,this.opStencilDepthPass=H.REPLACE}get stencilFunc(){return this.func}set stencilFunc(M){this.func=M}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(M){this.funcRef=M}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(M){this.funcMask=M}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(M){this.opStencilFail=M}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(M){this.opDepthFail=M}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(M){this.opStencilDepthPass=M}get stencilMask(){return this.mask}set stencilMask(M){this.mask=M}get stencilTest(){return this.enabled}set stencilTest(M){this.enabled=M}}H.ALWAYS=519,H.KEEP=7680,H.REPLACE=7681;class F{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(M){this._alphaBlend!==M&&(this._alphaBlend=M,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(M,p,b,Q){this._blendConstants[0]===M&&this._blendConstants[1]===p&&this._blendConstants[2]===b&&this._blendConstants[3]===Q||(this._blendConstants[0]=M,this._blendConstants[1]=p,this._blendConstants[2]=b,this._blendConstants[3]=Q,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(M,p,b,Q){this._blendFunctionParameters[0]===M&&this._blendFunctionParameters[1]===p&&this._blendFunctionParameters[2]===b&&this._blendFunctionParameters[3]===Q||(this._blendFunctionParameters[0]=M,this._blendFunctionParameters[1]=p,this._blendFunctionParameters[2]=b,this._blendFunctionParameters[3]=Q,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(M,p){this._blendEquationParameters[0]===M&&this._blendEquationParameters[1]===p||(this._blendEquationParameters[0]=M,this._blendEquationParameters[1]=p,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(M){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?M.enable(M.BLEND):M.disable(M.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(M.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(M.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(M.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var o=b(11651),W=b(11729),i=b(11632),A=b(11624),j=b(11685),K=b(11742);function D(M,p){if((0,i.n)()){const{requestAnimationFrame:b}=p||window;if("function"===typeof b)return b(M)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(M);return setTimeout(M,16)}class a{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(M){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(M){M!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=M,this._depthCullingState.depthFunc=M?518:515)}setColorWrite(M){M!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=M)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(M){if(M)return this.isNDCHalfZRange?M.IS_NDC_HALF_ZRANGE="":delete M.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?M.USE_REVERSE_DEPTHBUFFER="":delete M.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?M.USE_EXACT_SRGB_CONVERSIONS="":delete M.USE_EXACT_SRGB_CONVERSIONS);{let M="";return this.isNDCHalfZRange&&(M+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(M&&(M+="\n"),M+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(M&&(M+="\n"),M+="#define USE_EXACT_SRGB_CONVERSIONS"),M}}_rebuildInternalTextures(){const M=this._internalTexturesCache.slice();for(const p of M)p._rebuild()}_rebuildRenderTargetWrappers(){const M=this._renderTargetWrapperCache.slice();for(const p of M)p._rebuild()}_rebuildEffects(){for(const M in this._compiledEffects){const p=this._compiledEffects[M];p._pipelineContext=null,p._prepareEffect()}B.Effect.ResetCache()}_rebuildGraphicsResources(){var M;this.wipeCaches(!0),this._rebuildEffects(),null===(M=this._rebuildComputeEffects)||void 0===M||M.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){q.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(M){setTimeout((()=>{this._clearEmptyResources();const p=this._depthCullingState.depthTest,b=this._depthCullingState.depthFunc,Q=this._depthCullingState.depthMask,q=this._stencilState.stencilTest;M(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=p,this._depthCullingState.depthFunc=b,this._depthCullingState.depthMask=Q,this._stencilState.stencilTest=q,this._flagContextRestored()}),0)}get O(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(M){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(M){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const M=new Uint8Array(4),p=[M,M,M,M,M,M];this._emptyCubeTexture=this.createRawCubeTexture(p,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(M){if(!M)return this._activeRenderLoops.length=0,void this._cancelFrame();const p=this._activeRenderLoops.indexOf(M);p>=0&&(this._activeRenderLoops.splice(p,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const M=this._frameHandler;if(this._frameHandler=0,(0,i.n)()){const{cancelAnimationFrame:p}=this.getHostWindow()||window;if("function"===typeof p)return p(M)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(M);return clearTimeout(M)}}Mb(){this.onBeginFrameObservable.notifyObservers(this)}pb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(M){this._maxFPS=M,void 0!==M&&(this._minFrameTime=M<=0?Number.MAX_VALUE:1e3/M)}_isOverFrameTime(M){if(!M||void 0===this._maxFPS)return!1;const p=M-this._lastFrameTime;return this._lastFrameTime=M,this._renderAccumulator+=p,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(M){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(M)){let M=!0;(this.O||!this.renderEvenInBackground&&this._windowIsBackground)&&(M=!1),M&&(this.Mb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.pb())}}_renderLoop(M){this._processFrame(M),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let M=0;M<this._activeRenderLoops.length;M++){(0,this._activeRenderLoops[M])()}}_renderViews(){return!1}_queueNewFrame(M,p){return D(M,p)}runRenderLoop(M){-1===this._activeRenderLoops.indexOf(M)&&(this._activeRenderLoops.push(M),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(M){this._depthCullingState.depthTest=M}setZOffset(M){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-M:M}getZOffset(){const M=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-M:M}setZOffsetUnits(M){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-M:M}getZOffsetUnits(){const M=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-M:M}getHostWindow(){return(0,i.n)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(M){this._compatibilityMode=!0}_rebuildTextures(){for(const M of this.scenes)M._rebuildTextures();for(const M of this._virtualScenes)M._rebuildTextures()}_releaseRenderTargetWrapper(M){const p=this._renderTargetWrapperCache.indexOf(M);-1!==p&&this._renderTargetWrapperCache.splice(p,1)}get currentViewport(){return this._cachedViewport}setViewport(M,p,b){const Q=p||this.getRenderWidth(),q=b||this.getRenderHeight(),B=M.x||0,k=M.y||0;this._cachedViewport=M,this._viewport(B*Q,k*q,Q*M.width,q*M.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(M){return new Path2D(M)}get description(){let M=this.name+this.version;return this._caps.parallelShaderCompile&&(M+=" - Parallel shader compilation"),M}_createTextureBase(M,p,b,B){let k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,T=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,O=arguments.length>7?arguments[7]:void 0,H=arguments.length>8?arguments[8]:void 0,F=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,o=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,i=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,A=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,j=arguments.length>13?arguments[13]:void 0,D=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const S="data:"===(M=M||"").substring(0,5),f="blob:"===M.substring(0,5),R=S&&-1!==M.indexOf(";base64,"),y=o||new W.b(this,1);y!==o&&(y.label=M.substring(0,60));const x=M;!this._transformTextureUrl||R||o||F||(M=this._transformTextureUrl(M)),x!==M&&(y._originalUrl=x);const P=M.lastIndexOf(".");let L=A||(P>-1?M.substring(P).toLowerCase():"");L.indexOf("?")>-1&&(L=L.split("?")[0]);const N=(0,K.d)(L,j);B&&B.addPendingData(y),y.url=M,y.generateMipMaps=!p,y.samplingMode=k,y.invertY=b,y._useSRGBBuffer=this._getUseSRGBBuffer(!!s,p),this._doNotHandleContextLost||(y._buffer=F);let r=null;u&&!o&&(r=y.onLoadedObservable.add(u)),o||this._internalTexturesCache.push(y);const Y=(b,o)=>{B&&B.removePendingData(y),M===x?(r&&y.onLoadedObservable.remove(r),Q.c.UseFallbackTexture&&M!==Q.c.FallbackTexture&&this._createTextureBase(Q.c.FallbackTexture,p,y.invertY,B,k,null,T,O,H,F,y),b=(b||"Unknown error")+(Q.c.UseFallbackTexture?" - Fallback texture was used":""),y.onErrorObservable.notifyObservers({message:b,exception:o}),T&&T(b,o)):(q.c.Warn(`Failed to load ${M}, falling back to ${x}`),this._createTextureBase(x,p,y.invertY,B,k,u,T,O,H,F,y,i,A,j,D,s))};if(N){const p=async M=>{(await N).loadData(M,y,((M,p,b,Q,q,u)=>{u?Y("TextureLoader failed to load data"):O(y,L,B,{width:M,height:p},y.invertY,!b,Q,(()=>(q(),!1)),k)}),D)};F?F instanceof ArrayBuffer?p(new Uint8Array(F)):ArrayBuffer.isView(F)?p(F):T&&T("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(M,(M=>{p(new Uint8Array(M))}),void 0,B?B.offlineProvider:void 0,!0,((M,p)=>{Y("Unable to load "+(M&&M.responseURL,p))}))}else{const b=M=>{f&&!this._doNotHandleContextLost&&(y._buffer=M),O(y,L,B,M,y.invertY,p,!1,H,k)};!S||R?F&&("string"===typeof F.decoding||F.close)?b(F):a._FileToolsLoadImage(M||"",b,Y,B?B.offlineProvider:null,j,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof F||F instanceof ArrayBuffer||ArrayBuffer.isView(F)||F instanceof Blob?a._FileToolsLoadImage(F,b,Y,B?B.offlineProvider:null,j,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):F&&b(F)}return y}_rebuildBuffers(){for(const M of this._uniformBuffers)M._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,i.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const M in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,M)&&(this._boundTexturesCache[M]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(M){this._name=M}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(M){this._hardwareScalingLevel=M,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(M){this._doNotHandleContextLost=M}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(M,p,b){var q,B;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new T,this._stencilStateComposer=new O,this._stencilState=new H,this._alphaState=new F,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new A.b,this.onCanvasFocusObservable=new A.b,this.onNewSceneAddedObservable=new A.b,this.onResizeObservable=new A.b,this.onCanvasPointerOutObservable=new A.b,this.onEffectErrorObservable=new A.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new A.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=M=>this._renderLoop(M),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new A.b,this.onAfterShaderCompilationObservable=new A.b,this.onBeginFrameObservable=new A.b,this.onEndFrameObservable=new A.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new A.b,this.onContextRestoredObservable=new A.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.bb=new A.b,this.onReleaseEffectsObservable=new A.b,Q.c.Instances.push(this),this.startTime=u.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,k.d.SetMatrixPrecision(!!p.useHighPrecisionMatrix),(0,i.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=b??!1,p.antialias=M??p.antialias,p.deterministicLockstep=p.deterministicLockstep??!1,p.lockstepMaxSteps=p.lockstepMaxSteps??4,p.timeStep=p.timeStep??1/60,p.stencil=p.stencil??!0,this._audioContext=(null===(q=p.audioEngineOptions)||void 0===q?void 0:q.audioContext)??null,this._audioDestination=(null===(B=p.audioEngineOptions)||void 0===B?void 0:B.audioDestination)??null,this.premultipliedAlpha=p.premultipliedAlpha??!0,this._doNotHandleContextLost=!!p.doNotHandleContextLost,this._isStencilEnable=!!p.stencil,this.useExactSrgbConversions=p.useExactSrgbConversions??!1;const o=(0,i.n)()&&window.devicePixelRatio||1,W=p.limitDeviceRatio||o;b=b||p.adaptToDeviceRatio||!1,this._hardwareScalingLevel=b?1/Math.min(W,o):1,this._lastDevicePixelRatio=o,this._creationOptions=p}resize(){let M,p,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const M=(0,i.n)()&&window.devicePixelRatio||1,p=this._lastDevicePixelRatio/M;this._lastDevicePixelRatio=M,this._hardwareScalingLevel*=p}if((0,i.n)()&&(0,i.f)())if(this._renderingCanvas){var Q,q;const b=null===(Q=(q=this._renderingCanvas).getBoundingClientRect)||void 0===Q?void 0:Q.call(q);M=this._renderingCanvas.clientWidth||(null===b||void 0===b?void 0:b.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,p=this._renderingCanvas.clientHeight||(null===b||void 0===b?void 0:b.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else M=window.innerWidth,p=window.innerHeight;else M=this._renderingCanvas?this._renderingCanvas.width:100,p=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(M/this._hardwareScalingLevel,p/this._hardwareScalingLevel,b)}setSize(M,p){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(M|=0,p|=0,!b&&this._renderingCanvas.width===M&&this._renderingCanvas.height===p)return!1;if(this._renderingCanvas.width=M,this._renderingCanvas.height=p,this.scenes){for(let M=0;M<this.scenes.length;M++){const p=this.scenes[M];for(let M=0;M<p.cameras.length;M++){p.cameras[M]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(M,p,b,Q,q,B,k,u,T,O,H){throw(0,o.c)("engine.rawTexture")}createRawCubeTexture(M,p,b,Q,q,B,k,u){throw(0,o.c)("engine.rawTexture")}createRawTexture3D(M,p,b,Q,q,B,k,u,T,O,H){throw(0,o.c)("engine.rawTexture")}createRawTexture2DArray(M,p,b,Q,q,B,k,u,T,O,H){throw(0,o.c)("engine.rawTexture")}_sharedInit(M){this._renderingCanvas=M}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const M=navigator.userAgent;this.hostInformation.isMobile=-1!==M.indexOf("Mobile")||-1!==M.indexOf("Mac")&&(0,i.f)()&&"ontouchend"in document},this._checkForMobile(),(0,i.n)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(M){return document.createElement("video")}_reportDrawCall(){var M;let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(M=this._drawCalls)||void 0===M||M.addCount(p,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(M,p){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(M,p){return createImageBitmap(M,p)}resizeImageBitmap(M,p,b){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(M){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(M,p){if("undefined"===typeof document)return new OffscreenCanvas(M,p);const b=document.createElement("canvas");return b.width=M,b.height=p,b}createCanvas(M,p){return a._CreateCanvas(M,p)}static _FileToolsLoadImage(M,p,b,Q,q,B,k){throw(0,o.c)("FileTools")}_loadFile(M,p,b,Q,q,B){const k=(0,j.n)(M,p,b,Q,q,B);return this._activeRequests.push(k),k.onCompleteObservable.add((()=>{const M=this._activeRequests.indexOf(k);-1!==M&&this._activeRequests.splice(M,1)})),k}static _FileToolsLoadFile(M,p,b,Q,q,B){if(j.c.loadFile)return j.c.loadFile(M,p,b,Q,q,B);throw(0,o.c)("FileTools")}dispose(){var M;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(M=this.releaseComputeEffects)||void 0===M||M.call(this),B.Effect.ResetCache();for(const b of this._activeRequests)b.abort();this._boundRenderFunction=null,this.bb.notifyObservers(this),this.bb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,i.n)()&&window.removeEventListener("resize",this._checkForMobile);const p=Q.c.Instances.indexOf(this);p>=0&&Q.c.Instances.splice(p,1),Q.c.Instances.length||(Q.c.OnEnginesDisposedObservable.notifyObservers(this),Q.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(M){throw(0,o.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(M,p){for(let b=0;b<Q.c.Instances.length;b++){const q=Q.c.Instances[b];for(let b=0;b<q.scenes.length;b++)q.scenes[b].markAllMaterialsAsDirty(M,p)}}}a._RenderPassIdCounter=0,a._RescalePostProcessFactory=null,a.CollisionsEpsilon=.001,a.QueueNewFrame=D},11664:(M,p,b)=>{b.d(p,{c:()=>q});var Q=b(11624);class q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}q.Instances=[],q.OnEnginesDisposedObservable=new Q.b,q._LastCreatedScene=null,q.UseFallbackTexture=!0,q.FallbackTexture=""},11722:(M,p,b)=>{b.d(p,{d:()=>Q});class Q{static SetMatrixPrecision(M){if(Q.MatrixTrackPrecisionChange=!1,M&&!Q.MatrixUse64Bits&&Q.MatrixTrackedMatrices)for(let p=0;p<Q.MatrixTrackedMatrices.length;++p){const M=Q.MatrixTrackedMatrices[p],b=M.Qb;M.Qb=new Array(16);for(let p=0;p<16;++p)M.Qb[p]=b[p]}Q.MatrixUse64Bits=M,Q.MatrixCurrentType=Q.MatrixUse64Bits?Array:Float32Array,Q.MatrixTrackedMatrices=null}}Q.MatrixUse64Bits=!1,Q.MatrixTrackPrecisionChange=!0,Q.MatrixCurrentType=Float32Array,Q.MatrixTrackedMatrices=[]},11742:(M,p,b)=>{b.d(p,{d:()=>k});var Q=b(11637);const q=new Map;function B(M,p){(function(M){return q.delete(M)})(M)&&Q.c.Warn(`Extension with the name '${M}' already exists`),q.set(M,p)}function k(M,p){"image/ktx"!==p&&"image/ktx2"!==p||(M=".ktx"),q.has(M)||(M.endsWith(".ies")&&B(".ies",(async()=>await b.e(15).then(b.bind(b,14145)).then((M=>new M._IESTextureLoader)))),M.endsWith(".dds")&&B(".dds",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(28)]).then(b.bind(b,14149)).then((M=>new M._DDSTextureLoader)))),M.endsWith(".basis")&&B(".basis",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(47)]).then(b.bind(b,14165)).then((M=>new M._BasisTextureLoader)))),M.endsWith(".env")&&B(".env",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(23),b.e(21),b.e(45),b.e(48)]).then(b.bind(b,14174)).then((M=>new M._ENVTextureLoader)))),M.endsWith(".hdr")&&B(".hdr",(async()=>await Promise.all([b.e(14),b.e(49)]).then(b.bind(b,14183)).then((M=>new M._HDRTextureLoader)))),(M.endsWith(".ktx")||M.endsWith(".ktx2"))&&(B(".ktx",(async()=>await b.e(30).then(b.bind(b,14188)).then((M=>new M._KTXTextureLoader)))),B(".ktx2",(async()=>await b.e(30).then(b.bind(b,14188)).then((M=>new M._KTXTextureLoader))))),M.endsWith(".tga")&&B(".tga",(async()=>await b.e(50).then(b.bind(b,14190)).then((M=>new M._TGATextureLoader)))),M.endsWith(".exr")&&B(".exr",(async()=>await b.e(16).then(b.bind(b,14193)).then((M=>new M._ExrTextureLoader)))));const Q=q.get(M);return Q?Promise.resolve(Q(p)):null}},11729:(M,p,b)=>{b.d(p,{b:()=>k});var Q,q=b(11624),B=b(11736);!function(M){M[M.Unknown=0]="Unknown",M[M.Url=1]="Url",M[M.Temp=2]="Temp",M[M.Raw=3]="Raw",M[M.Dynamic=4]="Dynamic",M[M.RenderTarget=5]="RenderTarget",M[M.MultiRenderTarget=6]="MultiRenderTarget",M[M.Cube=7]="Cube",M[M.CubeRaw=8]="CubeRaw",M[M.CubePrefiltered=9]="CubePrefiltered",M[M.Raw3D=10]="Raw3D",M[M.Raw2DArray=11]="Raw2DArray",M[M.DepthStencil=12]="DepthStencil",M[M.CubeRawRGBD=13]="CubeRawRGBD",M[M.Depth=14]="Depth"}(Q||(Q={}));class k extends B.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(M){this.generateMipMaps=M}get uniqueId(){return this._uniqueId}_setUniqueId(M){this._uniqueId=M}getEngine(){return this._engine}get source(){return this._source}constructor(M,p){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new q.b,this.onErrorObservable=new q.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=M,this._source=p,this._uniqueId=k._Counter++,b||(this._hardwareTexture=M._createHardwareTexture())}incrementReferences(){this._references++}updateSize(M,p){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,M,p,b),this.width=M,this.height=p,this.depth=b,this.baseWidth=M,this.baseHeight=p,this.baseDepth=b,this._size=M*p*b}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const M=this.onRebuildCallback(this),p=p=>{p._swapAndDie(this,!1),this.isReady=M.isReady};return void(M.isAsync?M.proxy.then(p):p(M.proxy))}let M;switch(this.source){case 2:case 12:case 14:break;case 1:return void(M=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(M=>{M._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:M=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),M._swapAndDie(this,!1),this.isReady=!0;break;case 10:M=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),M._swapAndDie(this,!1),this.isReady=!0;break;case 11:M=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),M._swapAndDie(this,!1),this.isReady=!0;break;case 4:M=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),M._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(M=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{M._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:M=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),M._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return M=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(M=>{M&&M._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(M._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(M){var p;let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(p=this._hardwareTexture)||void 0===p||p.setUsage(M._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),M._hardwareTexture=this._hardwareTexture,b&&(M._isRGBD=this._isRGBD),this._lodTextureHigh&&(M._lodTextureHigh&&M._lodTextureHigh.dispose(),M._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(M._lodTextureMid&&M._lodTextureMid.dispose(),M._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(M._lodTextureLow&&M._lodTextureLow.dispose(),M._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(M._irradianceTexture&&M._irradianceTexture.dispose(),M._irradianceTexture=this._irradianceTexture);const Q=this._engine.getLoadedTexturesCache();let q=Q.indexOf(this);-1!==q&&Q.splice(q,1),q=Q.indexOf(M),-1===q&&Q.push(M)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}k._Counter=0},11736:(M,p,b)=>{b.d(p,{d:()=>Q});class Q{get wrapU(){return this._cachedWrapU}set wrapU(M){this._cachedWrapU=M}get wrapV(){return this._cachedWrapV}set wrapV(M){this._cachedWrapV=M}get wrapR(){return this._cachedWrapR}set wrapR(M){this._cachedWrapR=M}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(M){this._cachedAnisotropicFilteringLevel=M}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(M){this._comparisonFunction=M}get useMipMaps(){return this._useMipMaps}set useMipMaps(M){this._useMipMaps=M}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=M,this._cachedWrapV=p,this._cachedWrapR=b,this._cachedAnisotropicFilteringLevel=Q,this.samplingMode=q,this._comparisonFunction=B,this}compareSampler(M){return this._cachedWrapU===M._cachedWrapU&&this._cachedWrapV===M._cachedWrapV&&this._cachedWrapR===M._cachedWrapR&&this._cachedAnisotropicFilteringLevel===M._cachedAnisotropicFilteringLevel&&this.samplingMode===M.samplingMode&&this._comparisonFunction===M._comparisonFunction&&this._useMipMaps===M._useMipMaps}}},11641:(M,p,b)=>{b.d(p,{c:()=>B});var Q=b(11637);const q=(M,p,b)=>M?M.getClassName&&"Mesh"===M.getClassName()?null:!M.getClassName||"SubMesh"!==M.getClassName()&&"PhysicsBody"!==M.getClassName()?M.clone?M.clone():Array.isArray(M)?M.slice():b&&"object"===typeof M?{...M}:null:M.clone(p):null;class B{static DeepCopy(M,p,b,B){let k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const u=function(M){const p=[];do{const b=Object.getOwnPropertyNames(M);for(const M of b)-1===p.indexOf(M)&&p.push(M)}while(M=Object.getPrototypeOf(M));return p}(M);for(const O of u){if("_"===O[0]&&(!B||-1===B.indexOf(O)))continue;if(O.endsWith("Observable"))continue;if(b&&-1!==b.indexOf(O))continue;const u=M[O],H=typeof u;if("function"!==H)try{if("object"===H)if(u instanceof Uint8Array)p[O]=Uint8Array.from(u);else if(u instanceof Array){if(p[O]=[],u.length>0)if("object"==typeof u[0])for(let M=0;M<u.length;M++){const b=q(u[M],p,k);-1===p[O].indexOf(b)&&p[O].push(b)}else p[O]=u.slice(0)}else p[O]=q(u,p,k);else p[O]=u}catch(T){Q.c.Warn(T.message)}}}}},11673:(M,p,b)=>{b.d(p,{e:()=>Q,h:()=>q,k:()=>B});class Q extends Error{}Q._setPrototypeOf=Object.setPrototypeOf||((M,p)=>(M.__proto__=p,M));const q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class B extends Q{constructor(M,p,b){super(M),this.errorCode=p,this.innerError=b,this.name="RuntimeError",Q._setPrototypeOf(this,B.prototype)}}},11671:(M,p,b)=>{b.d(p,{c:()=>Y,f:()=>a,g:()=>P,h:()=>N,o:()=>y,k:()=>j,p:()=>f,q:()=>R,s:()=>x,v:()=>s});var Q=b(11660),q=b(11632),B=b(11624);class k{}k.FilesToLoad={};var u=b(11673),T=b(11678),O=b(11681),H=b(11664),F=b(11637),o=b(11693),W=b(11685),i=b(11700);const A=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class j extends u.k{constructor(M,p){super(M,u.h.LoadFileError),this.name="LoadFileError",u.e._setPrototypeOf(this,j.prototype),p instanceof Q.b?this.request=p:this.file=p}}class K extends u.k{constructor(M,p){super(M,u.h.RequestFileError),this.request=p,this.name="RequestFileError",u.e._setPrototypeOf(this,K.prototype)}}class D extends u.k{constructor(M,p){super(M,u.h.ReadFileError),this.file=p,this.name="ReadFileError",u.e._setPrototypeOf(this,D.prototype)}}const a={DefaultRetryStrategy:class{static ExponentialBackoff(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(b,Q,q)=>0!==Q.status||q>=M||-1!==b.indexOf("file:")?-1:Math.pow(2,q)*p}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:M=>M,ScriptBaseUrl:"",ScriptPreprocessUrl:M=>M,CleanUrl:M=>M=M.replace(/#/gm,"%23")},s=(M,p)=>{if((!M||0!==M.indexOf("data:"))&&a.CorsBehavior)if("string"===typeof a.CorsBehavior||a.CorsBehavior instanceof String)p.crossOrigin=a.CorsBehavior;else{const b=a.CorsBehavior(M);b&&(p.crossOrigin=b)}},S={getRequiredSize:null},f=function(M,p,b,q){let B,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",O=arguments.length>5?arguments[5]:void 0,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:H.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===F||void 0===F||!F._features.forceBitmapOverHTMLImageElement))return b("LoadImage is only supported in web or BabylonNative environments."),null;let o=!1;M instanceof ArrayBuffer||ArrayBuffer.isView(M)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(B=URL.createObjectURL(new Blob([M],{type:u})),o=!0):B=`data:${u};base64,`+(0,T.i)(M):M instanceof Blob?(B=URL.createObjectURL(M),o=!0):(B=a.CleanUrl(M),B=a.PreprocessUrl(B));const W=p=>{if(b){const Q=B||M.toString();b(`Error while trying to load image: ${0===Q.indexOf("http")||Q.length<=128?Q:Q.slice(0,128)+"..."}`,p)}};if(null!==F&&void 0!==F&&F._features.forceBitmapOverHTMLImageElement)return y(B,(Q=>{F.createImageBitmap(new Blob([Q],{type:u}),{premultiplyAlpha:"none",...O}).then((M=>{p(M),o&&URL.revokeObjectURL(B)})).catch((p=>{b&&b("Error while trying to load image: "+M,p)}))}),void 0,q||void 0,!0,((M,p)=>{W(p)})),null;const i=new Image;if(S.getRequiredSize){const p=S.getRequiredSize(M);p.width&&(i.width=p.width),p.height&&(i.height=p.height)}s(B,i);const A=[],j=()=>{for(const M of A)M.target.removeEventListener(M.name,M.handler);A.length=0};A.push({target:i,name:"load",handler:()=>{j(),p(i),o&&i.src&&URL.revokeObjectURL(i.src)}}),A.push({target:i,name:"error",handler:M=>{j(),W(M),o&&i.src&&URL.revokeObjectURL(i.src)}}),A.push({target:document,name:"securitypolicyviolation",handler:M=>{if(M.blockedURI!==i.src||"qb"===M.disposition)return;j();const p=new Error(`CSP violation of policy ${M.effectiveDirective} ${M.blockedURI}. Current policy is ${M.originalPolicy}`);H.c.UseFallbackTexture=!1,W(p),o&&i.src&&URL.revokeObjectURL(i.src),i.src=""}}),(()=>{for(const M of A)M.target.addEventListener(M.name,M.handler)})();const K="blob:"===B.substring(0,5),D="data:"===B.substring(0,5),f=()=>{K||D||!Q.b.IsCustomRequestAvailable?i.src=B:y(B,((M,p,b)=>{const Q=new Blob([M],{type:!u&&b?b:u}),q=URL.createObjectURL(Q);o=!0,i.src=q}),void 0,q||void 0,!0,((M,p)=>{W(p)}))},R=()=>{q&&q.loadImage(B,i)};if(!K&&!D&&q&&q.enableTexturesOffline)q.open(R,f);else{if(-1!==B.indexOf("file:")){const M=decodeURIComponent(B.substring(5).toLowerCase());if(k.FilesToLoad[M]&&"undefined"!==typeof URL){try{let p;try{p=URL.createObjectURL(k.FilesToLoad[M])}catch(x){p=URL.createObjectURL(k.FilesToLoad[M])}i.src=p,o=!0}catch(P){i.src=""}return i}}f()}return i},R=(M,p,b,Q,q)=>{const k=new FileReader,u={onCompleteObservable:new B.b,abort:()=>k.abort()};return k.onloadend=()=>u.onCompleteObservable.notifyObservers(u),q&&(k.onerror=()=>{q(new D(`Unable to read ${M.name}`,M))}),k.onload=M=>{p(M.target.result)},b&&(k.onprogress=b),Q?k.readAsArrayBuffer(M):k.readAsText(M),u},y=(M,p,b,Q,q,T,O)=>{if(M.name)return R(M,p,b,q,T?M=>{T(void 0,M)}:void 0);const H=M;if(-1!==H.indexOf("file:")){let M=decodeURIComponent(H.substring(5).toLowerCase());0===M.indexOf("./")&&(M=M.substring(2));const Q=k.FilesToLoad[M];if(Q)return R(Q,p,b,q,T?M=>T(void 0,new j(M.message,M.file)):void 0)}const{match:W,type:i}=r(H);if(W){const M={onCompleteObservable:new B.b,abort:()=>()=>{}};try{const M=q?Y(H):w(H);p(M,void 0,i)}catch(u){T?T(void 0,u):F.c.Error(u.message||"Failed to parse the Data URL")}return o.e.SetImmediate((()=>{M.onCompleteObservable.notifyObservers(M)})),M}return x(H,((M,b)=>{p(M,null===b||void 0===b?void 0:b.responseURL,null===b||void 0===b?void 0:b.getResponseHeader("content-type"))}),b,Q,q,T?M=>{T(M.request,new j(M.message,M.request))}:void 0,O)},x=(M,p,b,k,u,T,O)=>{M=a.CleanUrl(M),M=a.PreprocessUrl(M);const H=a.BaseUrl+M;let o=!1;const W={onCompleteObservable:new B.b,abort:()=>o=!0},i=()=>{let M,B=new Q.b,k=null;const i=()=>{B&&(b&&B.removeEventListener("progress",b),M&&B.removeEventListener("readystatechange",M),B.removeEventListener("loadend",A))};let A=()=>{i(),W.onCompleteObservable.notifyObservers(W),W.onCompleteObservable.clear(),b=void 0,M=null,A=null,T=void 0,O=void 0,p=void 0};W.abort=()=>{o=!0,A&&A(),B&&B.readyState!==(XMLHttpRequest.DONE||4)&&B.abort(),null!==k&&(clearTimeout(k),k=null),B=null};const j=M=>{const p=M.message||"Unknown error";T&&B?T(new K(p,B)):F.c.Error(p)},D=F=>{if(B){if(B.open("GET",H),O)try{O(B)}catch(W){return void j(W)}u&&(B.responseType="arraybuffer"),b&&B.addEventListener("progress",b),A&&B.addEventListener("loadend",A),M=()=>{if(!o&&B&&B.readyState===(XMLHttpRequest.DONE||4)){if(M&&B.removeEventListener("readystatechange",M),B.status>=200&&B.status<300||0===B.status&&(!(0,q.n)()||L())){const M=u?B.response:B.responseText;if(null!==M){try{p&&p(M,B)}catch(W){j(W)}return}}const b=a.DefaultRetryStrategy;if(b){const M=b(H,B,F);if(-1!==M)return i(),B=new Q.b,void(k=setTimeout((()=>D(F+1)),M))}const O=new K("Error status: "+B.status+" "+B.statusText+" - Unable to load "+H,B);T&&T(O)}},B.addEventListener("readystatechange",M),B.send()}};D(0)};if(k&&k.enableSceneOffline){const Q=M=>{M&&M.status>400?T&&T(M):i()},q=()=>{k&&k.loadFile(a.BaseUrl+M,(M=>{!o&&p&&p(M),W.onCompleteObservable.notifyObservers(W)}),b?M=>{!o&&b&&b(M)}:void 0,Q,u)};k.open(q,Q)}else i();return W},P=M=>{const{match:p,type:b}=r(M);if(p)return b||void 0;const Q=M.lastIndexOf(".");switch(M.substring(Q+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Bb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},L=()=>"undefined"!==typeof location&&"file:"===location.protocol,N=M=>A.test(M),r=M=>{const p=A.exec(M);if(null===p||0===p.length)return{match:!1,type:""};return{match:!0,type:p[0].replace("data:","").replace("base64,","")}};function Y(M){return(0,T.c)(M.split(",")[1])}const w=M=>(0,T.d)(M.split(",")[1]);let E;i.c._FileToolsLoadImage=f,W.c.loadFile=y,O.n.loadFile=y;((M,p,b,Q,q,B,k,u,T,O)=>{E={DecodeBase64UrlToBinary:M,DecodeBase64UrlToString:p,DefaultRetryStrategy:b.DefaultRetryStrategy,BaseUrl:b.BaseUrl,CorsBehavior:b.CorsBehavior,PreprocessUrl:b.PreprocessUrl,IsBase64DataUrl:Q,IsFileURL:q,LoadFile:B,LoadImage:k,ReadFile:u,RequestFile:T,SetCorsBehavior:O},Object.defineProperty(E,"DefaultRetryStrategy",{get:function(){return b.DefaultRetryStrategy},set:function(M){b.DefaultRetryStrategy=M}}),Object.defineProperty(E,"BaseUrl",{get:function(){return b.BaseUrl},set:function(M){b.BaseUrl=M}}),Object.defineProperty(E,"PreprocessUrl",{get:function(){return b.PreprocessUrl},set:function(M){b.PreprocessUrl=M}}),Object.defineProperty(E,"CorsBehavior",{get:function(){return b.CorsBehavior},set:function(M){b.CorsBehavior=M}})})(Y,w,a,N,L,y,f,R,x,s)},11764:(M,p,b)=>{function Q(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(M=>{const p=16*Math.random()|0;return("x"===M?p:3&p|8).toString(16)}))}b.d(p,{c:()=>Q})},11751:(M,p,b)=>{b.d(p,{c:()=>B});var Q=b(11637),q=b(11757);class B{static Instantiate(M){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[M])return this.RegisteredExternalClasses[M];const p=(0,q.c)(M);if(p)return p;Q.c.Warn(M+" not found, you may have missed an import.");const b=M.split(".");let B=window||this;for(let Q=0,q=b.length;Q<q;Q++)B=B[b[Q]];return"function"!==typeof B?null:B}}B.RegisteredExternalClasses={}},11647:(M,p,b)=>{b.d(p,{b:()=>q});var Q=b(11632);class q{static get Now(){return(0,Q.n)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11678:(M,p,b)=>{b.d(p,{c:()=>k,d:()=>B,g:()=>Q,i:()=>q});const Q=M=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(M);let p="";for(let b=0;b<M.byteLength;b++)p+=String.fromCharCode(M[b]);return p},q=M=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b,Q,q,B,k,u,T,O="",H=0;const F=ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(M);for(;H<F.length;)b=F[H++],Q=H<F.length?F[H++]:Number.NaN,q=H<F.length?F[H++]:Number.NaN,B=b>>2,k=(3&b)<<4|Q>>4,u=(15&Q)<<2|q>>6,T=63&q,isNaN(Q)?u=T=64:isNaN(q)&&(T=64),O+=p.charAt(B)+p.charAt(k)+p.charAt(u)+p.charAt(T);return O},B=M=>atob(M),k=M=>{const p=B(M),b=p.length,Q=new Uint8Array(new ArrayBuffer(b));for(let q=0;q<b;q++)Q[q]=p.charCodeAt(q);return Q.buffer}},11767:(M,p,b)=>{function Q(M){let p=1;do{p*=2}while(p<M);return p===M}function q(M,p,b){return M*(1-b)+p*b}function B(M){const p=k(M),b=u(M);return p-M>M-b?b:p}function k(M){return M--,M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,M|=M>>16,++M}function u(M){return M|=M>>1,M|=M>>2,M|=M>>4,M|=M>>8,(M|=M>>16)-(M>>1)}function T(M,p){let b;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:b=u(M);break;case 2:b=B(M);break;default:b=k(M)}return Math.min(b,p)}b.d(p,{d:()=>u,g:()=>T,k:()=>Q,l:()=>q,m:()=>B})},11621:(M,p,b)=>{b.r(p),b.d(p,{AsyncLoop:()=>D,Tools:()=>j,className:()=>K});var Q=b(11624),q=b(11632),B=b(11637),k=b(11641),u=b(11647),T=b(11651),O=b(11660),H=b(11664),F=b(11671),o=b(11693),W=b(11751),i=b(11764),A=b(11767);class j{static get BaseUrl(){return F.f.BaseUrl}static set BaseUrl(M){F.f.BaseUrl=M}static get CleanUrl(){return F.f.CleanUrl}static set CleanUrl(M){F.f.CleanUrl=M}static IsAbsoluteUrl(M){return 0===M.indexOf("//")||-1!==M.indexOf("://")&&(-1!==M.indexOf(".")&&(-1!==M.indexOf("/")&&(!(M.indexOf(":")>M.indexOf("/"))&&(M.indexOf("://")<M.indexOf(".")||(0===M.indexOf("data:")||0===M.indexOf("blob:"))))))}static set ScriptBaseUrl(M){F.f.ScriptBaseUrl=M}static get ScriptBaseUrl(){return F.f.ScriptBaseUrl}static set CDNBaseUrl(M){j.ScriptBaseUrl=M,j.AssetBaseUrl=M}static set ScriptPreprocessUrl(M){F.f.ScriptPreprocessUrl=M}static get ScriptPreprocessUrl(){return F.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return F.f.DefaultRetryStrategy}static set DefaultRetryStrategy(M){F.f.DefaultRetryStrategy=M}static get CorsBehavior(){return F.f.CorsBehavior}static set CorsBehavior(M){F.f.CorsBehavior=M}static get UseFallbackTexture(){return H.c.UseFallbackTexture}static set UseFallbackTexture(M){H.c.UseFallbackTexture=M}static get RegisteredExternalClasses(){return W.c.RegisteredExternalClasses}static set RegisteredExternalClasses(M){W.c.RegisteredExternalClasses=M}static get fallbackTexture(){return H.c.FallbackTexture}static set fallbackTexture(M){H.c.FallbackTexture=M}static FetchToRef(M,p,b,Q,q,B){const k=4*((Math.abs(M)*b%b|0)+(Math.abs(p)*Q%Q|0)*b);B.r=q[k]/255,B.g=q[k+1]/255,B.b=q[k+2]/255,B.a=q[k+3]/255}static Mix(M,p,b){return 0}static Instantiate(M){return W.c.Instantiate(M)}static SetImmediate(M){o.e.SetImmediate(M)}static IsExponentOfTwo(M){return!0}static FloatRound(M){return Math.fround(M)}static GetFilename(M){const p=M.lastIndexOf("/");return p<0?M:M.substring(p+1)}static GetFolderPath(M){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const b=M.lastIndexOf("/");return b<0?p?M:"":M.substring(0,b+1)}static ToDegrees(M){return 180*M/Math.PI}static ToRadians(M){return M*Math.PI/180}static SmoothAngleChange(M,p){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Q=this.ToRadians(M),q=this.ToRadians(p);return this.ToDegrees(Math.atan2((1-b)*Math.sin(q)+b*Math.sin(Q),(1-b)*Math.cos(q)+b*Math.cos(Q)))}static MakeArray(M,p){return!0===p||void 0!==M&&null!=M?Array.isArray(M)?M:[M]:null}static GetPointerPrefix(M){return(0,q.n)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(M,p){(0,F.v)(M,p)}static SetReferrerPolicyBehavior(M,p){p.referrerPolicy=M}static get PreprocessUrl(){return F.f.PreprocessUrl}static set PreprocessUrl(M){F.f.PreprocessUrl=M}static LoadImage(M,p,b,Q,q,B){return(0,F.p)(M,p,b,Q,q,B)}static LoadFile(M,p,b,Q,q,B){return(0,F.o)(M,p,b,Q,q,B)}static async LoadFileAsync(M){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((b,Q)=>{(0,F.o)(M,(M=>{b(M)}),void 0,void 0,p,((M,p)=>{Q(p)}))}))}static GetAssetUrl(M){if(!M)return"";if(j.AssetBaseUrl&&M.startsWith(j._DefaultAssetsUrl)){const p="/"===j.AssetBaseUrl[j.AssetBaseUrl.length-1]?j.AssetBaseUrl.substring(0,j.AssetBaseUrl.length-1):j.AssetBaseUrl;return M.replace(j._DefaultAssetsUrl,p)}return M}static GetBabylonScriptURL(M,p){if(!M)return"";if(j.ScriptBaseUrl&&M.startsWith(j._DefaultCdnUrl)){const p="/"===j.ScriptBaseUrl[j.ScriptBaseUrl.length-1]?j.ScriptBaseUrl.substring(0,j.ScriptBaseUrl.length-1):j.ScriptBaseUrl;M=M.replace(j._DefaultCdnUrl,p)}return M=j.ScriptPreprocessUrl(M),p&&(M=j.GetAbsoluteUrl(M)),M}static LoadBabylonScript(M,p,b,Q){M=j.GetBabylonScriptURL(M),j.LoadScript(M,p,b)}static async LoadBabylonScriptAsync(M){return M=j.GetBabylonScriptURL(M),await j.LoadScriptAsync(M)}static LoadScript(M,p,b,Q){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(M),p&&p()}catch(T){null===b||void 0===b||b(`Unable to load script '${M}' in worker`,T)}return}if(!(0,q.n)())return void(null===b||void 0===b||b(`Cannot load script '${M}' outside of a window or a worker`));const k=document.getElementsByTagName("head")[0],u=document.createElement("script");B?(u.setAttribute("type","module"),u.innerText=M):(u.setAttribute("type","text/javascript"),u.setAttribute("src",M)),Q&&(u.id=Q),u.onload=()=>{p&&p()},u.onerror=p=>{b&&b(`Unable to load script '${M}'`,p)},k.appendChild(u)}static async LoadScriptAsync(M,p){return await new Promise(((b,Q)=>{this.LoadScript(M,(()=>{b()}),((M,p)=>{Q(p||new Error(M))}),p)}))}static ReadFileAsDataURL(M,p,b){const q=new FileReader,B={onCompleteObservable:new Q.b,abort:()=>q.abort()};return q.onloadend=()=>{B.onCompleteObservable.notifyObservers(B)},q.onload=M=>{p(M.target.result)},q.onprogress=b,q.readAsDataURL(M),B}static ReadFile(M,p,b,Q,q){return(0,F.q)(M,p,b,Q,q)}static FileAsURL(M){const p=new Blob([M]);return window.URL.createObjectURL(p)}static Format(M){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return M.toFixed(p)}static DeepCopy(M,p,b,Q){k.c.DeepCopy(M,p,b,Q)}static IsEmpty(M){for(const p in M)if(Object.prototype.hasOwnProperty.call(M,p))return!1;return!0}static RegisterTopRootEvents(M,p){for(let Q=0;Q<p.length;Q++){const q=p[Q];M.addEventListener(q.name,q.handler,!1);try{window.parent&&window.parent.addEventListener(q.name,q.handler,!1)}catch(b){}}}static UnregisterTopRootEvents(M,p){for(let Q=0;Q<p.length;Q++){const q=p[Q];M.removeEventListener(q.name,q.handler);try{M.parent&&M.parent.removeEventListener(q.name,q.handler)}catch(b){}}}static async DumpFramebuffer(M,p,b,Q){throw(0,T.c)("DumpTools")}static DumpData(M,p,b,Q){throw(0,T.c)("DumpTools")}static async DumpDataAsync(M,p,b){throw(0,T.c)("DumpTools")}static _IsOffScreenCanvas(M){return void 0!==M.convertToBlob}static ToBlob(M,p){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0;j._IsOffScreenCanvas(M)||M.toBlob||(M.toBlob=function(M,p,b){setTimeout((()=>{const Q=atob(this.toDataURL(p,b).split(",")[1]),q=Q.length,B=new Uint8Array(q);for(let M=0;M<q;M++)B[M]=Q.charCodeAt(M);M(new Blob([B]))}))}),j._IsOffScreenCanvas(M)?M.convertToBlob({type:b,quality:Q}).then((M=>p(M))):M.toBlob((function(M){p(M)}),b,Q)}static DownloadBlob(M,p){if("download"in document.createElement("a")){if(!p){const M=new Date;p="screenshot_"+((M.getFullYear()+"-"+(M.getMonth()+1)).slice(2)+"-"+M.getDate()+"_"+M.getHours()+"-"+("0"+M.getMinutes()).slice(-2))+".png"}j.Download(M,p)}else if(M&&"undefined"!==typeof URL){const p=URL.createObjectURL(M),b=window.open("");if(!b)return;const Q=b.document.createElement("img");Q.onload=function(){URL.revokeObjectURL(p)},Q.src=p,b.document.body.appendChild(Q)}}static EncodeScreenshotCanvasData(M,p){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Q=arguments.length>3?arguments[3]:void 0,q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Q&&p){if(p){if(j._IsOffScreenCanvas(M))return void M.convertToBlob({type:b,quality:q}).then((M=>{const b=new FileReader;b.readAsDataURL(M),b.onloadend=()=>{const M=b.result;p(M)}}));const Q=M.toDataURL(b,q);p(Q)}}else this.ToBlob(M,(function(M){M&&j.DownloadBlob(M,Q),p&&p("")}),b,q)}static Download(M,p){if("undefined"===typeof URL)return;const b=window.URL.createObjectURL(M),Q=document.createElement("a");document.body.appendChild(Q),Q.style.display="none",Q.href=b,Q.download=p,Q.addEventListener("click",(()=>{Q.parentElement&&Q.parentElement.removeChild(Q)})),Q.click(),window.URL.revokeObjectURL(b)}static BackCompatCameraNoPreventDefault(M){return"boolean"===typeof M[0]?M[0]:"boolean"===typeof M[1]&&M[1]}static CreateScreenshot(M,p,b,Q){throw(0,T.c)("ScreenshotTools")}static async CreateScreenshotAsync(M,p,b){throw(0,T.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(M,p,b,Q){throw(0,T.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(M,p,b){throw(0,T.c)("ScreenshotTools")}static RandomId(){return(0,i.c)()}static IsBase64(M){return(0,F.h)(M)}static DecodeBase64(M){return(0,F.c)(M)}static get errorsCount(){return B.c.errorsCount}static Log(M){B.c.Log(M)}static Warn(M){B.c.Warn(M)}static Error(M){B.c.Error(M)}static get LogCache(){return B.c.LogCache}static ClearLogCache(){B.c.ClearLogCache()}static set LogLevels(M){B.c.LogLevels=M}static set PerformanceLogLevel(M){return(M&j.PerformanceUserMarkLogLevel)===j.PerformanceUserMarkLogLevel?(j.StartPerformanceCounter=j._StartUserMark,void(j.EndPerformanceCounter=j._EndUserMark)):(M&j.PerformanceConsoleLogLevel)===j.PerformanceConsoleLogLevel?(j.StartPerformanceCounter=j._StartPerformanceConsole,void(j.EndPerformanceCounter=j._EndPerformanceConsole)):(j.StartPerformanceCounter=j._StartPerformanceCounterDisabled,void(j.EndPerformanceCounter=j._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(M,p){}static _EndPerformanceCounterDisabled(M,p){}static _StartUserMark(M){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!j._Performance){if(!(0,q.n)())return;j._Performance=window.performance}p&&j._Performance.mark&&j._Performance.mark(M+"-Begin")}static _EndUserMark(M){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&j._Performance.mark&&(j._Performance.mark(M+"-End"),j._Performance.measure(M,M+"-Begin",M+"-End"))}static _StartPerformanceConsole(M){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p&&(j._StartUserMark(M,p),console.time&&console.time(M))}static _EndPerformanceConsole(M){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p&&(j._EndUserMark(M,p),console.timeEnd(M))}static get Now(){return u.b.Now}static GetClassName(M){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null;if(!p&&M.getClassName)b=M.getClassName();else{if(M instanceof Object){b=(p?M:Object.getPrototypeOf(M)).constructor.__bjsclassName__}b||(b=typeof M)}return b}static First(M,p){for(const b of M)if(p(b))return b;return null}static getFullClassName(M){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null,Q=null;if(!p&&M.getClassName)b=M.getClassName();else{if(M instanceof Object){const q=p?M:Object.getPrototypeOf(M);b=q.constructor.__bjsclassName__,Q=q.constructor.__bjsmoduleName__}b||(b=typeof M)}return b?(null!=Q?Q+".":"")+b:null}static async DelayAsync(M){await new Promise((p=>{setTimeout((()=>{p()}),M)}))}static IsSafari(){return!!(0,q.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function K(M,p){return b=>{b.__bjsclassName__=M,b.__bjsmoduleName__=null!=p?p:null}}j.AssetBaseUrl="",j.UseCustomRequestHeaders=!1,j.CustomRequestHeaders=O.b.CustomRequestHeaders,j.GetDOMTextContent=q.d,j._DefaultCdnUrl="https://cdn.babylonjs.com",j._DefaultAssetsUrl="https://assets.babylonjs.com/core",j.GetAbsoluteUrl="object"===typeof document?M=>{const p=document.createElement("a");return p.href=M,p.href}:"function"===typeof URL&&"object"===typeof location?M=>new URL(M,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},j.NoneLogLevel=B.c.NoneLogLevel,j.MessageLogLevel=B.c.MessageLogLevel,j.WarningLogLevel=B.c.WarningLogLevel,j.ErrorLogLevel=B.c.ErrorLogLevel,j.AllLogLevel=B.c.AllLogLevel,j.IsWindowObjectExist=q.n,j.PerformanceNoneLogLevel=0,j.PerformanceUserMarkLogLevel=1,j.PerformanceConsoleLogLevel=2,j.StartPerformanceCounter=j._StartPerformanceCounterDisabled,j.EndPerformanceCounter=j._EndPerformanceCounterDisabled;class D{constructor(M,p,b){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=M,this.index=Q-1,this._done=!1,this._fn=p,this._successCallback=b}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(M,p,b){const Q=new D(M,p,b,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Q.executeNext(),Q}static SyncAsyncForLoop(M,p,b,Q,q){let B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return D.Run(Math.ceil(M/p),(Q=>{q&&q()?Q.breakLoop():setTimeout((()=>{for(let B=0;B<p;++B){const k=Q.index*p+B;if(k>=M)break;if(b(k),q&&q()){Q.breakLoop();break}}Q.executeNext()}),B)}),Q)}}j.Mix=A.l,j.IsExponentOfTwo=A.k,H.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11757:(M,p,b)=>{b.d(p,{c:()=>B,g:()=>q});const Q={};function q(M,p){Q[M]=p}function B(M){return Q[M]}},11660:(M,p,b)=>{b.d(p,{b:()=>Q});class Q{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Q.CustomRequestHeaders).length>0||Q.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const M in Q.CustomRequestHeaders){const p=Q.CustomRequestHeaders[M];p&&this._xhr.setRequestHeader(M,p)}}_shouldSkipRequestModifications(M){return Q.SkipRequestModificationForBabylonCDN&&(M.includes("preview.babylonjs.com")||M.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(M){this._xhr.onprogress=M}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(M){this._xhr.responseType=M}get timeout(){return this._xhr.timeout}set timeout(M){this._xhr.timeout=M}addEventListener(M,p,b){this._xhr.addEventListener(M,p,b)}removeEventListener(M,p,b){this._xhr.removeEventListener(M,p,b)}abort(){this._xhr.abort()}send(M){Q.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(M)}open(M,p){for(const b of Q.CustomRequestModifiers){if(this._shouldSkipRequestModifications(p))return;p=b(this._xhr,p)||p}p=(p=p.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=p,this._xhr.open(M,p,!0)}setRequestHeader(M,p){this._xhr.setRequestHeader(M,p)}getResponseHeader(M){return this._xhr.getResponseHeader(M)}}Q.CustomRequestHeaders={},Q.CustomRequestModifiers=new Array,Q.SkipRequestModificationForBabylonCDN=!0}}]);