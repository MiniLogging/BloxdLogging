"use strict";(self.z22hkk7o33f=self.z22hkk7o33f||[]).push([[8],{12800:(U,G,C)=>{C.d(G,{b:()=>h});var L=C(12763),X=C(12731),l=C(12805),t=C(12820),E=C(12739);class K{constructor(){let U=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,U&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(U){this._zOffset!==U&&(this._zOffset=U,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(U){this._zOffsetUnits!==U&&(this._zOffsetUnits=U,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(U){this._cullFace!==U&&(this._cullFace=U,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(U){this._cull!==U&&(this._cull=U,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(U){this._depthFunc!==U&&(this._depthFunc=U,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(U){this._depthMask!==U&&(this._depthMask=U,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(U){this._depthTest!==U&&(this._depthTest=U,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(U){this._frontFace!==U&&(this._frontFace=U,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(U){this.isDirty&&(this._isCullDirty&&(this.cull?U.enable(U.CULL_FACE):U.disable(U.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(U.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(U.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?U.enable(U.DEPTH_TEST):U.disable(U.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(U.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(U.enable(U.POLYGON_OFFSET_FILL),U.polygonOffset(this.zOffset,this.zOffsetUnits)):U.disable(U.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(U.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class P{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(U){this._func!==U&&(this._func=U,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(U){this._funcRef!==U&&(this._funcRef=U,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(U){this._funcMask!==U&&(this._funcMask=U,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(U){this._opStencilFail!==U&&(this._opStencilFail=U,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(U){this._opDepthFail!==U&&(this._opDepthFail=U,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(U){this._opStencilDepthPass!==U&&(this._opStencilDepthPass=U,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(U){this._mask!==U&&(this._mask=U,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(U){this._enabled!==U&&(this._enabled=U,this._isStencilTestDirty=!0)}constructor(){let U=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,U&&this.reset()}reset(){var U;this.stencilMaterial=void 0,null===(U=this.stencilGlobal)||void 0===U||U.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(U){var G;if(!U)return;const C=!this.useStencilGlobalOnly&&!(null===(G=this.stencilMaterial)||void 0===G||!G.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?U.enable(U.STENCIL_TEST):U.disable(U.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(U.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(U.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(U.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class O{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=O.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=O.KEEP,this.opDepthFail=O.KEEP,this.opStencilDepthPass=O.REPLACE}get stencilFunc(){return this.func}set stencilFunc(U){this.func=U}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(U){this.funcRef=U}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(U){this.funcMask=U}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(U){this.opStencilFail=U}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(U){this.opDepthFail=U}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(U){this.opStencilDepthPass=U}get stencilMask(){return this.mask}set stencilMask(U){this.mask=U}get stencilTest(){return this.enabled}set stencilTest(U){this.enabled=U}}O.ALWAYS=519,O.KEEP=7680,O.REPLACE=7681;class T{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(U){this._alphaBlend!==U&&(this._alphaBlend=U,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(U,G,C,L){this._blendConstants[0]===U&&this._blendConstants[1]===G&&this._blendConstants[2]===C&&this._blendConstants[3]===L||(this._blendConstants[0]=U,this._blendConstants[1]=G,this._blendConstants[2]=C,this._blendConstants[3]=L,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(U,G,C,L){this._blendFunctionParameters[0]===U&&this._blendFunctionParameters[1]===G&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===L||(this._blendFunctionParameters[0]=U,this._blendFunctionParameters[1]=G,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=L,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(U,G){this._blendEquationParameters[0]===U&&this._blendEquationParameters[1]===G||(this._blendEquationParameters[0]=U,this._blendEquationParameters[1]=G,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(U){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?U.enable(U.BLEND):U.disable(U.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(U.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(U.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(U.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var D=C(12747),y=C(12826),V=C(12725),p=C(12721),I=C(12792),H=C(12837);function x(U,G){if((0,V.k)()){const{requestAnimationFrame:C}=G||window;if("function"===typeof C)return C(U)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(U);return setTimeout(U,16)}class h{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(U){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get gt(){return this._useReverseDepthBuffer}set gt(U){U!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=U,this._depthCullingState.depthFunc=U?518:515)}setColorWrite(U){U!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=U)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(U){if(U)return this.isNDCHalfZRange?U.IS_NDC_HALF_ZRANGE="":delete U.IS_NDC_HALF_ZRANGE,this.gt?U.USE_REVERSE_DEPTHBUFFER="":delete U.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?U.USE_EXACT_SRGB_CONVERSIONS="":delete U.USE_EXACT_SRGB_CONVERSIONS);{let U="";return this.isNDCHalfZRange&&(U+="#define IS_NDC_HALF_ZRANGE"),this.gt&&(U&&(U+="\n"),U+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(U&&(U+="\n"),U+="#define USE_EXACT_SRGB_CONVERSIONS"),U}}_rebuildInternalTextures(){const U=this._internalTexturesCache.slice();for(const G of U)G._rebuild()}_rebuildRenderTargetWrappers(){const U=this._renderTargetWrapperCache.slice();for(const G of U)G._rebuild()}_rebuildEffects(){for(const U in this._compiledEffects){const G=this._compiledEffects[U];G._pipelineContext=null,G._prepareEffect()}l.Effect.ResetCache()}_rebuildGraphicsResources(){var U;this.wipeCaches(!0),this._rebuildEffects(),null===(U=this._rebuildComputeEffects)||void 0===U||U.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){X.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(U){setTimeout((()=>{this._clearEmptyResources();const G=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,L=this._depthCullingState.depthMask,X=this._stencilState.stencilTest;U(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=G,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=L,this._stencilState.stencilTest=X,this._flagContextRestored()}),0)}get t(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(U){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(U){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const U=new Uint8Array(4),G=[U,U,U,U,U,U];this._emptyCubeTexture=this.createRawCubeTexture(G,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(U){if(!U)return this._activeRenderLoops.length=0,void this._cancelFrame();const G=this._activeRenderLoops.indexOf(U);G>=0&&(this._activeRenderLoops.splice(G,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const U=this._frameHandler;if(this._frameHandler=0,(0,V.k)()){const{cancelAnimationFrame:G}=this.getHostWindow()||window;if("function"===typeof G)return G(U)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(U);return clearTimeout(U)}}FE(){this.onBeginFrameObservable.notifyObservers(this)}qE(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(U){this._maxFPS=U,void 0!==U&&(this._minFrameTime=U<=0?Number.MAX_VALUE:1e3/U)}_isOverFrameTime(U){if(!U||void 0===this._maxFPS)return!1;const G=U-this._lastFrameTime;return this._lastFrameTime=U,this._renderAccumulator+=G,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(U){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(U)){let U=!0;(this.t||!this.renderEvenInBackground&&this._windowIsBackground)&&(U=!1),U&&(this.FE(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.qE())}}_renderLoop(U){this._processFrame(U),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let U=0;U<this._activeRenderLoops.length;U++){(0,this._activeRenderLoops[U])()}}_renderViews(){return!1}_queueNewFrame(U,G){return x(U,G)}runRenderLoop(U){-1===this._activeRenderLoops.indexOf(U)&&(this._activeRenderLoops.push(U),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(U){this._depthCullingState.depthTest=U}setZOffset(U){this._depthCullingState.zOffset=this.gt?-U:U}getZOffset(){const U=this._depthCullingState.zOffset;return this.gt?-U:U}setZOffsetUnits(U){this._depthCullingState.zOffsetUnits=this.gt?-U:U}getZOffsetUnits(){const U=this._depthCullingState.zOffsetUnits;return this.gt?-U:U}getHostWindow(){return(0,V.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(U){this._compatibilityMode=!0}_rebuildTextures(){for(const U of this.scenes)U._rebuildTextures();for(const U of this._virtualScenes)U._rebuildTextures()}_releaseRenderTargetWrapper(U){const G=this._renderTargetWrapperCache.indexOf(U);-1!==G&&this._renderTargetWrapperCache.splice(G,1)}get currentViewport(){return this._cachedViewport}setViewport(U,G,C){const L=G||this.getRenderWidth(),X=C||this.getRenderHeight(),l=U.x||0,t=U.y||0;this._cachedViewport=U,this._viewport(l*L,t*X,L*U.width,X*U.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(U){return new Path2D(U)}get description(){let U=this.name+this.version;return this._caps.parallelShaderCompile&&(U+=" - Parallel shader compilation"),U}_createTextureBase(U,G,C,l){let t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,E=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,K=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,P=arguments.length>7?arguments[7]:void 0,O=arguments.length>8?arguments[8]:void 0,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,V=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13?arguments[13]:void 0,x=arguments.length>14?arguments[14]:void 0,N=arguments.length>15?arguments[15]:void 0;const b="data:"===(U=U||"").substring(0,5),o="blob:"===U.substring(0,5),w=b&&-1!==U.indexOf(";base64,"),S=D||new y.b(this,1);S!==D&&(S.label=U.substring(0,60));const v=U;!this._transformTextureUrl||w||D||T||(U=this._transformTextureUrl(U)),v!==U&&(S._originalUrl=v);const u=U.lastIndexOf(".");let d=p||(u>-1?U.substring(u).toLowerCase():"");d.indexOf("?")>-1&&(d=d.split("?")[0]);const g=(0,H.b)(d,I);l&&l.addPendingData(S),S.url=U,S.generateMipMaps=!G,S.samplingMode=t,S.invertY=C,S._useSRGBBuffer=this._getUseSRGBBuffer(!!N,G),this._doNotHandleContextLost||(S._buffer=T);let Z=null;E&&!D&&(Z=S.onLoadedObservable.add(E)),D||this._internalTexturesCache.push(S);const F=(C,D)=>{l&&l.removePendingData(S),U===v?(Z&&S.onLoadedObservable.remove(Z),L.d.UseFallbackTexture&&U!==L.d.FallbackTexture&&this._createTextureBase(L.d.FallbackTexture,G,S.invertY,l,t,null,K,P,O,T,S),C=(C||"Unknown error")+(L.d.UseFallbackTexture?" - Fallback texture was used":""),S.onErrorObservable.notifyObservers({message:C,exception:D}),K&&K(C,D)):(X.d.Warn("Failed to load ".concat(U,", falling back to ").concat(v)),this._createTextureBase(v,G,S.invertY,l,t,E,K,P,O,T,S,V,p,I,x,N))};if(g){const G=async U=>{(await g).loadData(U,S,((U,G,C,L,X,E)=>{E?F("TextureLoader failed to load data"):P(S,d,l,{width:U,height:G},S.invertY,!C,L,(()=>(X(),!1)),t)}),x)};T?T instanceof ArrayBuffer?G(new Uint8Array(T)):ArrayBuffer.isView(T)?G(T):K&&K("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(U,(U=>{G(new Uint8Array(U))}),void 0,l?l.offlineProvider:void 0,!0,((U,G)=>{F("Unable to load "+(U&&U.responseURL,G))}))}else{const C=U=>{o&&!this._doNotHandleContextLost&&(S._buffer=U),P(S,d,l,U,S.invertY,G,!1,O,t)};!b||w?T&&("string"===typeof T.decoding||T.close)?C(T):h._FileToolsLoadImage(U||"",C,F,l?l.offlineProvider:null,I,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof T||T instanceof ArrayBuffer||ArrayBuffer.isView(T)||T instanceof Blob?h._FileToolsLoadImage(T,C,F,l?l.offlineProvider:null,I,S.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):T&&C(T)}return S}_rebuildBuffers(){for(const U of this._uniformBuffers)U._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,V.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const U in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,U)&&(this._boundTexturesCache[U]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(U){this._name=U}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(U){this._hardwareScalingLevel=U,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(U){this._doNotHandleContextLost=U}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(U,G,C){var X,l,D,y,I,H,x,h,N,b,o;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new K,this._stencilStateComposer=new P,this._stencilState=new O,this._alphaState=new T,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new p.e,this.onCanvasFocusObservable=new p.e,this.onNewSceneAddedObservable=new p.e,this.onResizeObservable=new p.e,this.onCanvasPointerOutObservable=new p.e,this.onEffectErrorObservable=new p.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new p.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=U=>this._renderLoop(U),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new p.e,this.onAfterShaderCompilationObservable=new p.e,this.onBeginFrameObservable=new p.e,this.onEndFrameObservable=new p.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new p.e,this.onContextRestoredObservable=new p.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.aE=new p.e,this.onReleaseEffectsObservable=new p.e,L.d.Instances.push(this),this.startTime=E.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,t.b.SetMatrixPrecision(!!G.useHighPrecisionMatrix),(0,V.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=null!==(X=C)&&void 0!==X&&X,G.antialias=null!==U&&void 0!==U?U:G.antialias,G.deterministicLockstep=null!==(l=G.deterministicLockstep)&&void 0!==l&&l,G.lockstepMaxSteps=null!==(D=G.lockstepMaxSteps)&&void 0!==D?D:4,G.timeStep=null!==(y=G.timeStep)&&void 0!==y?y:1/60,G.kE=null===(I=G.kE)||void 0===I||I,this._audioContext=null!==(H=null===(x=G.audioEngineOptions)||void 0===x?void 0:x.audioContext)&&void 0!==H?H:null,this._audioDestination=null!==(h=null===(N=G.audioEngineOptions)||void 0===N?void 0:N.audioDestination)&&void 0!==h?h:null,this.premultipliedAlpha=null===(b=G.premultipliedAlpha)||void 0===b||b,this._doNotHandleContextLost=!!G.doNotHandleContextLost,this._isStencilEnable=!!G.kE,this.useExactSrgbConversions=null!==(o=G.useExactSrgbConversions)&&void 0!==o&&o;const w=(0,V.k)()&&window.devicePixelRatio||1,S=G.limitDeviceRatio||w;C=C||G.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(S,w):1,this._lastDevicePixelRatio=w,this._creationOptions=G}resize(){let U,G,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const U=(0,V.k)()&&window.devicePixelRatio||1,G=this._lastDevicePixelRatio/U;this._lastDevicePixelRatio=U,this._hardwareScalingLevel*=G}if((0,V.k)()&&(0,V.e)())if(this._renderingCanvas){var L,X;const C=null===(L=(X=this._renderingCanvas).getBoundingClientRect)||void 0===L?void 0:L.call(X);U=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,G=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else U=window.innerWidth,G=window.innerHeight;else U=this._renderingCanvas?this._renderingCanvas.width:100,G=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(U/this._hardwareScalingLevel,G/this._hardwareScalingLevel,C)}setSize(U,G){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(U|=0,G|=0,!C&&this._renderingCanvas.width===U&&this._renderingCanvas.height===G)return!1;if(this._renderingCanvas.width=U,this._renderingCanvas.height=G,this.scenes){for(let U=0;U<this.scenes.length;U++){const G=this.scenes[U];for(let U=0;U<G.cameras.length;U++){G.cameras[U]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(U,G,C,L,X,l,t,E,K,P,O){throw(0,D.d)("engine.rawTexture")}createRawCubeTexture(U,G,C,L,X,l,t,E){throw(0,D.d)("engine.rawTexture")}createRawTexture3D(U,G,C,L,X,l,t,E,K,P,O){throw(0,D.d)("engine.rawTexture")}createRawTexture2DArray(U,G,C,L,X,l,t,E,K,P,O){throw(0,D.d)("engine.rawTexture")}_sharedInit(U){this._renderingCanvas=U}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const U=navigator.userAgent;this.hostInformation.isMobile=-1!==U.indexOf("Mobile")||-1!==U.indexOf("Mac")&&(0,V.e)()&&"ontouchend"in document},this._checkForMobile(),(0,V.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(U){return document.createElement("video")}_reportDrawCall(){var U;let G=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(U=this._drawCalls)||void 0===U||U.addCount(G,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(U,G){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(U,G){return createImageBitmap(U,G)}resizeImageBitmap(U,G,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(U){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(U,G){if("undefined"===typeof document)return new OffscreenCanvas(U,G);const C=document.createElement("canvas");return C.width=U,C.height=G,C}createCanvas(U,G){return h._CreateCanvas(U,G)}static _FileToolsLoadImage(U,G,C,L,X,l,t){throw(0,D.d)("FileTools")}_loadFile(U,G,C,L,X,l){const t=(0,I.m)(U,G,C,L,X,l);return this._activeRequests.push(t),t.onCompleteObservable.add((()=>{const U=this._activeRequests.indexOf(t);-1!==U&&this._activeRequests.splice(U,1)})),t}static _FileToolsLoadFile(U,G,C,L,X,l){if(I.e.loadFile)return I.e.loadFile(U,G,C,L,X,l);throw(0,D.d)("FileTools")}dispose(){var U;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(U=this.releaseComputeEffects)||void 0===U||U.call(this),l.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.aE.notifyObservers(this),this.aE.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,V.k)()&&window.removeEventListener("resize",this._checkForMobile);const G=L.d.Instances.indexOf(this);G>=0&&L.d.Instances.splice(G,1),L.d.Instances.length||(L.d.OnEnginesDisposedObservable.notifyObservers(this),L.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(U){throw(0,D.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(U,G){for(let C=0;C<L.d.Instances.length;C++){const X=L.d.Instances[C];for(let C=0;C<X.scenes.length;C++)X.scenes[C].markAllMaterialsAsDirty(U,G)}}}h._RenderPassIdCounter=0,h._RescalePostProcessFactory=null,h.CollisionsEpsilon=.001,h.QueueNewFrame=x},12763:(U,G,C)=>{C.d(G,{d:()=>X});var L=C(12721);class X{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}X.Instances=[],X.OnEnginesDisposedObservable=new L.e,X._LastCreatedScene=null,X.UseFallbackTexture=!0,X.FallbackTexture=""},12820:(U,G,C)=>{C.d(G,{b:()=>L});class L{static SetMatrixPrecision(U){if(L.MatrixTrackPrecisionChange=!1,U&&!L.MatrixUse64Bits&&L.MatrixTrackedMatrices)for(let G=0;G<L.MatrixTrackedMatrices.length;++G){const U=L.MatrixTrackedMatrices[G],C=U.nE;U.nE=new Array(16);for(let G=0;G<16;++G)U.nE[G]=C[G]}L.MatrixUse64Bits=U,L.MatrixCurrentType=L.MatrixUse64Bits?Array:Float32Array,L.MatrixTrackedMatrices=null}}L.MatrixUse64Bits=!1,L.MatrixTrackPrecisionChange=!0,L.MatrixCurrentType=Float32Array,L.MatrixTrackedMatrices=[]},12837:(U,G,C)=>{C.d(G,{b:()=>t});var L=C(12731);const X=new Map;function l(U,G){(function(U){return X.delete(U)})(U)&&L.d.Warn("Extension with the name '".concat(U,"' already exists")),X.set(U,G)}function t(U,G){"image/ktx"!==G&&"image/ktx2"!==G||(U=".ktx"),X.has(U)||(U.endsWith(".ies")&&l(".ies",(async()=>await C.e(15).then(C.bind(C,14901)).then((U=>new U._IESTextureLoader)))),U.endsWith(".dds")&&l(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,14903)).then((U=>new U._DDSTextureLoader)))),U.endsWith(".basis")&&l(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,14911)).then((U=>new U._BasisTextureLoader)))),U.endsWith(".env")&&l(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,14914)).then((U=>new U._ENVTextureLoader)))),U.endsWith(".hdr")&&l(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,14921)).then((U=>new U._HDRTextureLoader)))),(U.endsWith(".ktx")||U.endsWith(".ktx2"))&&(l(".ktx",(async()=>await C.e(30).then(C.bind(C,14924)).then((U=>new U._KTXTextureLoader)))),l(".ktx2",(async()=>await C.e(30).then(C.bind(C,14924)).then((U=>new U._KTXTextureLoader))))),U.endsWith(".tga")&&l(".tga",(async()=>await C.e(50).then(C.bind(C,14929)).then((U=>new U._TGATextureLoader)))),U.endsWith(".exr")&&l(".exr",(async()=>await C.e(16).then(C.bind(C,14934)).then((U=>new U._ExrTextureLoader)))));const L=X.get(U);return L?Promise.resolve(L(G)):null}},12826:(U,G,C)=>{C.d(G,{b:()=>t});var L,X=C(12721),l=C(12831);!function(U){U[U.Unknown=0]="Unknown",U[U.Url=1]="Url",U[U.Temp=2]="Temp",U[U.Raw=3]="Raw",U[U.Dynamic=4]="Dynamic",U[U.RenderTarget=5]="RenderTarget",U[U.MultiRenderTarget=6]="MultiRenderTarget",U[U.Cube=7]="Cube",U[U.CubeRaw=8]="CubeRaw",U[U.CubePrefiltered=9]="CubePrefiltered",U[U.Raw3D=10]="Raw3D",U[U.Raw2DArray=11]="Raw2DArray",U[U.DepthStencil=12]="DepthStencil",U[U.CubeRawRGBD=13]="CubeRawRGBD",U[U.Depth=14]="Depth"}(L||(L={}));class t extends l.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(U){this.generateMipMaps=U}get uniqueId(){return this._uniqueId}_setUniqueId(U){this._uniqueId=U}getEngine(){return this._engine}get source(){return this._source}constructor(U,G){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new X.e,this.onErrorObservable=new X.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=U,this._source=G,this._uniqueId=t._Counter++,C||(this._hardwareTexture=U._createHardwareTexture())}incrementReferences(){this._references++}updateSize(U,G){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,U,G,C),this.width=U,this.height=G,this.depth=C,this.baseWidth=U,this.baseHeight=G,this.baseDepth=C,this._size=U*G*C}_rebuild(){var U,G;if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const U=this.onRebuildCallback(this),G=G=>{G._swapAndDie(this,!1),this.isReady=U.isReady};return void(U.isAsync?U.proxy.then(G):G(U.proxy))}let C;switch(this.source){case 2:case 12:case 14:break;case 1:return void(C=this._engine.createTexture(null!==(U=this._originalUrl)&&void 0!==U?U:this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(U=>{U._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:C=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),C._swapAndDie(this,!1),this.isReady=!0;break;case 10:C=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),C._swapAndDie(this,!1),this.isReady=!0;break;case 11:C=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),C._swapAndDie(this,!1),this.isReady=!0;break;case 4:C=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),C._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(C=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{C._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:C=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,null!==(G=this._originalFormat)&&void 0!==G?G:this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),C._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return C=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(U=>{U&&U._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(C._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(U){var G;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(G=this._hardwareTexture)||void 0===G||G.setUsage(U._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),U._hardwareTexture=this._hardwareTexture,C&&(U._isRGBD=this._isRGBD),this._lodTextureHigh&&(U._lodTextureHigh&&U._lodTextureHigh.dispose(),U._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(U._lodTextureMid&&U._lodTextureMid.dispose(),U._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(U._lodTextureLow&&U._lodTextureLow.dispose(),U._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(U._irradianceTexture&&U._irradianceTexture.dispose(),U._irradianceTexture=this._irradianceTexture);const L=this._engine.getLoadedTexturesCache();let X=L.indexOf(this);-1!==X&&L.splice(X,1),X=L.indexOf(U),-1===X&&L.push(U)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}t._Counter=0},12831:(U,G,C)=>{C.d(G,{e:()=>L});class L{get wrapU(){return this._cachedWrapU}set wrapU(U){this._cachedWrapU=U}get wrapV(){return this._cachedWrapV}set wrapV(U){this._cachedWrapV=U}get wrapR(){return this._cachedWrapR}set wrapR(U){this._cachedWrapR=U}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(U){this._cachedAnisotropicFilteringLevel=U}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(U){this._comparisonFunction=U}get useMipMaps(){return this._useMipMaps}set useMipMaps(U){this._useMipMaps=U}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=U,this._cachedWrapV=G,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=L,this.samplingMode=X,this._comparisonFunction=l,this}compareSampler(U){return this._cachedWrapU===U._cachedWrapU&&this._cachedWrapV===U._cachedWrapV&&this._cachedWrapR===U._cachedWrapR&&this._cachedAnisotropicFilteringLevel===U._cachedAnisotropicFilteringLevel&&this.samplingMode===U.samplingMode&&this._comparisonFunction===U._comparisonFunction&&this._useMipMaps===U._useMipMaps}}},12737:(U,G,C)=>{C.d(G,{b:()=>t});var L=C(26),X=C(12731);const l=(U,G,C)=>U?U.getClassName&&"Mesh"===U.getClassName()?null:!U.getClassName||"SubMesh"!==U.getClassName()&&"PhysicsBody"!==U.getClassName()?U.clone?U.clone():Array.isArray(U)?U.slice():C&&"object"===typeof U?(0,L.b)({},U):null:U.clone(G):null;class t{static DeepCopy(U,G,C,L){let t=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const E=function(U){const G=[];do{const C=Object.getOwnPropertyNames(U);for(const U of C)-1===G.indexOf(U)&&G.push(U)}while(U=Object.getPrototypeOf(U));return G}(U);for(const P of E){if("_"===P[0]&&(!L||-1===L.indexOf(P)))continue;if(P.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(P))continue;const E=U[P],O=typeof E;if("function"!==O)try{if("object"===O)if(E instanceof Uint8Array)G[P]=Uint8Array.from(E);else if(E instanceof Array){if(G[P]=[],E.length>0)if("object"==typeof E[0])for(let U=0;U<E.length;U++){const C=l(E[U],G,t);-1===G[P].indexOf(C)&&G[P].push(C)}else G[P]=E.slice(0)}else G[P]=l(E,G,t);else G[P]=E}catch(K){X.d.Warn(K.message)}}}}},12774:(U,G,C)=>{C.d(G,{d:()=>L,e:()=>X,g:()=>l});class L extends Error{}L._setPrototypeOf=Object.setPrototypeOf||((U,G)=>(U.__proto__=G,U));const X={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class l extends L{constructor(U,G,C){super(U),this.errorCode=G,this.innerError=C,this.name="RuntimeError",L._setPrototypeOf(this,l.prototype)}}},12772:(U,G,C)=>{C.d(G,{d:()=>q,f:()=>N,g:()=>d,k:()=>Z,q:()=>v,o:()=>H,t:()=>w,u:()=>S,y:()=>u,A:()=>b});var L=C(26),X=C(12756),l=C(12725),t=C(12721);class E{}E.FilesToLoad={};var K=C(12774),P=C(12783),O=C(12786),T=C(12763),D=C(12731),y=C(12794),V=C(12792),p=C(12800);const I=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class H extends K.g{constructor(U,G){super(U,K.e.LoadFileError),this.name="LoadFileError",K.d._setPrototypeOf(this,H.prototype),G instanceof X.d?this.request=G:this.file=G}}class x extends K.g{constructor(U,G){super(U,K.e.RequestFileError),this.request=G,this.name="RequestFileError",K.d._setPrototypeOf(this,x.prototype)}}class h extends K.g{constructor(U,G){super(U,K.e.ReadFileError),this.file=G,this.name="ReadFileError",K.d._setPrototypeOf(this,h.prototype)}}const N={DefaultRetryStrategy:class{static ExponentialBackoff(){let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,L,X)=>0!==L.status||X>=U||-1!==C.indexOf("file:")?-1:Math.pow(2,X)*G}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:U=>U,ScriptBaseUrl:"",ScriptPreprocessUrl:U=>U,CleanUrl:U=>U=U.replace(/#/gm,"%23")},b=(U,G)=>{if((!U||0!==U.indexOf("data:"))&&N.CorsBehavior)if("string"===typeof N.CorsBehavior||N.CorsBehavior instanceof String)G.crossOrigin=N.CorsBehavior;else{const C=N.CorsBehavior(U);C&&(G.crossOrigin=C)}},o={getRequiredSize:null},w=function(U,G,C,l){let t,K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",O=arguments.length>5?arguments[5]:void 0,D=arguments.length>6&&void 0!==arguments[6]?arguments[6]:T.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===D||void 0===D||!D._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let y=!1;U instanceof ArrayBuffer||ArrayBuffer.isView(U)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(t=URL.createObjectURL(new Blob([U],{type:K})),y=!0):t="data:".concat(K,";base64,")+(0,P.k)(U):U instanceof Blob?(t=URL.createObjectURL(U),y=!0):(t=N.CleanUrl(U),t=N.PreprocessUrl(t));const V=G=>{if(C){const L=t||U.toString();C("Error while trying to load image: ".concat(0===L.indexOf("http")||L.length<=128?L:L.slice(0,128)+"..."),G)}};if(null!==D&&void 0!==D&&D._features.forceBitmapOverHTMLImageElement)return v(t,(X=>{D.createImageBitmap(new Blob([X],{type:K}),(0,L.b)({premultiplyAlpha:"none"},O)).then((U=>{G(U),y&&URL.revokeObjectURL(t)})).catch((G=>{C&&C("Error while trying to load image: "+U,G)}))}),void 0,l||void 0,!0,((U,G)=>{V(G)})),null;const p=new Image;if(o.getRequiredSize){const G=o.getRequiredSize(U);G.width&&(p.width=G.width),G.height&&(p.height=G.height)}b(t,p);const I=[],H=()=>{for(const U of I)U.target.removeEventListener(U.name,U.handler);I.length=0};I.push({target:p,name:"load",handler:()=>{H(),G(p),y&&p.src&&URL.revokeObjectURL(p.src)}}),I.push({target:p,name:"error",handler:U=>{H(),V(U),y&&p.src&&URL.revokeObjectURL(p.src)}}),I.push({target:document,name:"securitypolicyviolation",handler:U=>{if(U.blockedURI!==p.src||"QE"===U.disposition)return;H();const G=new Error("CSP violation of policy ".concat(U.effectiveDirective," ").concat(U.blockedURI,". Current policy is ").concat(U.originalPolicy));T.d.UseFallbackTexture=!1,V(G),y&&p.src&&URL.revokeObjectURL(p.src),p.src=""}}),(()=>{for(const U of I)U.target.addEventListener(U.name,U.handler)})();const x="blob:"===t.substring(0,5),h="data:"===t.substring(0,5),w=()=>{x||h||!X.d.IsCustomRequestAvailable?p.src=t:v(t,((U,G,C)=>{const L=new Blob([U],{type:!K&&C?C:K}),X=URL.createObjectURL(L);y=!0,p.src=X}),void 0,l||void 0,!0,((U,G)=>{V(G)}))},S=()=>{l&&l.loadImage(t,p)};if(!x&&!h&&l&&l.enableTexturesOffline)l.open(S,w);else{if(-1!==t.indexOf("file:")){const U=decodeURIComponent(t.substring(5).toLowerCase());if(E.FilesToLoad[U]&&"undefined"!==typeof URL){try{let G;try{G=URL.createObjectURL(E.FilesToLoad[U])}catch(u){G=URL.createObjectURL(E.FilesToLoad[U])}p.src=G,y=!0}catch(d){p.src=""}return p}}w()}return p},S=(U,G,C,L,X)=>{const l=new FileReader,E={onCompleteObservable:new t.e,abort:()=>l.abort()};return l.onloadend=()=>E.onCompleteObservable.notifyObservers(E),X&&(l.onerror=()=>{X(new h("Unable to read ".concat(U.name),U))}),l.onload=U=>{G(U.target.result)},C&&(l.onprogress=C),L?l.readAsArrayBuffer(U):l.readAsText(U),E},v=(U,G,C,L,X,l,P)=>{if(U.name)return S(U,G,C,X,l?U=>{l(void 0,U)}:void 0);const O=U;if(-1!==O.indexOf("file:")){let U=decodeURIComponent(O.substring(5).toLowerCase());0===U.indexOf("./")&&(U=U.substring(2));const L=E.FilesToLoad[U];if(L)return S(L,G,C,X,l?U=>l(void 0,new H(U.message,U.file)):void 0)}const{match:T,type:V}=F(O);if(T){const U={onCompleteObservable:new t.e,abort:()=>()=>{}};try{const U=X?q(O):a(O);G(U,void 0,V)}catch(K){l?l(void 0,K):D.d.Error(K.message||"Failed to parse the Data URL")}return y.b.SetImmediate((()=>{U.onCompleteObservable.notifyObservers(U)})),U}return u(O,((U,C)=>{G(U,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,L,X,l?U=>{l(U.request,new H(U.message,U.request))}:void 0,P)},u=(U,G,C,L,E,K,P)=>{U=N.CleanUrl(U),U=N.PreprocessUrl(U);const O=N.BaseUrl+U;let T=!1;const y={onCompleteObservable:new t.e,abort:()=>T=!0},V=()=>{let U,L=new X.d,t=null;const V=()=>{L&&(C&&L.removeEventListener("progress",C),U&&L.removeEventListener("readystatechange",U),L.removeEventListener("loadend",p))};let p=()=>{V(),y.onCompleteObservable.notifyObservers(y),y.onCompleteObservable.clear(),C=void 0,U=null,p=null,K=void 0,P=void 0,G=void 0};y.abort=()=>{T=!0,p&&p(),L&&L.readyState!==(XMLHttpRequest.DONE||4)&&L.abort(),null!==t&&(clearTimeout(t),t=null),L=null};const I=U=>{const G=U.message||"Unknown error";K&&L?K(new x(G,L)):D.d.Error(G)},H=D=>{if(L){if(L.open("GET",O),P)try{P(L)}catch(y){return void I(y)}E&&(L.responseType="arraybuffer"),C&&L.addEventListener("progress",C),p&&L.addEventListener("loadend",p),U=()=>{if(!T&&L&&L.readyState===(XMLHttpRequest.DONE||4)){if(U&&L.removeEventListener("readystatechange",U),L.status>=200&&L.status<300||0===L.status&&(!(0,l.k)()||g())){const U=E?L.response:L.responseText;if(null!==U){try{G&&G(U,L)}catch(y){I(y)}return}}const C=N.DefaultRetryStrategy;if(C){const U=C(O,L,D);if(-1!==U)return V(),L=new X.d,void(t=setTimeout((()=>H(D+1)),U))}const P=new x("Error status: "+L.status+" "+L.statusText+" - Unable to load "+O,L);K&&K(P)}},L.addEventListener("readystatechange",U),L.send()}};H(0)};if(L&&L.enableSceneOffline){const X=U=>{U&&U.status>400?K&&K(U):V()},l=()=>{L&&L.loadFile(N.BaseUrl+U,(U=>{!T&&G&&G(U),y.onCompleteObservable.notifyObservers(y)}),C?U=>{!T&&C&&C(U)}:void 0,X,E)};L.open(l,X)}else V();return y},d=U=>{const{match:G,type:C}=F(U);if(G)return C||void 0;const L=U.lastIndexOf(".");switch(U.substring(L+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"mK":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},g=()=>"undefined"!==typeof location&&"file:"===location.protocol,Z=U=>I.test(U),F=U=>{const G=I.exec(U);if(null===G||0===G.length)return{match:!1,type:""};return{match:!0,type:G[0].replace("data:","").replace("base64,","")}};function q(U){return(0,P.c)(U.split(",")[1])}const a=U=>(0,P.e)(U.split(",")[1]);let k;p.b._FileToolsLoadImage=w,V.e.loadFile=v,O.r.loadFile=v;((U,G,C,L,X,l,t,E,K,P)=>{k={DecodeBase64UrlToBinary:U,DecodeBase64UrlToString:G,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:L,IsFileURL:X,LoadFile:l,LoadImage:t,ReadFile:E,RequestFile:K,SetCorsBehavior:P},Object.defineProperty(k,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(U){C.DefaultRetryStrategy=U}}),Object.defineProperty(k,"BaseUrl",{get:function(){return C.BaseUrl},set:function(U){C.BaseUrl=U}}),Object.defineProperty(k,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(U){C.PreprocessUrl=U}}),Object.defineProperty(k,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(U){C.CorsBehavior=U}})})(q,a,N,Z,g,v,w,S,u,b)},12853:(U,G,C)=>{function L(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(U=>{const G=16*Math.random()|0;return("x"===U?G:3&G|8).toString(16)}))}C.d(G,{c:()=>L})},12844:(U,G,C)=>{C.d(G,{c:()=>l});var L=C(12731),X=C(12850);class l{static Instantiate(U){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[U])return this.RegisteredExternalClasses[U];const G=(0,X.c)(U);if(G)return G;L.d.Warn(U+" not found, you may have missed an import.");const C=U.split(".");let l=window||this;for(let L=0,X=C.length;L<X;L++)l=l[C[L]];return"function"!==typeof l?null:l}}l.RegisteredExternalClasses={}},12739:(U,G,C)=>{C.d(G,{d:()=>X});var L=C(12725);class X{static get Now(){return(0,L.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12783:(U,G,C)=>{C.d(G,{c:()=>t,e:()=>l,g:()=>L,k:()=>X});const L=U=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(U);let G="";for(let C=0;C<U.byteLength;C++)G+=String.fromCharCode(U[C]);return G},X=U=>{const G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,L,X,l,t,E,K,P="",O=0;const T=ArrayBuffer.isView(U)?new Uint8Array(U.buffer,U.byteOffset,U.byteLength):new Uint8Array(U);for(;O<T.length;)C=T[O++],L=O<T.length?T[O++]:Number.NaN,X=O<T.length?T[O++]:Number.NaN,l=C>>2,t=(3&C)<<4|L>>4,E=(15&L)<<2|X>>6,K=63&X,isNaN(L)?E=K=64:isNaN(X)&&(K=64),P+=G.charAt(l)+G.charAt(t)+G.charAt(E)+G.charAt(K);return P},l=U=>atob(U),t=U=>{const G=l(U),C=G.length,L=new Uint8Array(new ArrayBuffer(C));for(let X=0;X<C;X++)L[X]=G.charCodeAt(X);return L.buffer}},12861:(U,G,C)=>{function L(U){let G=1;do{G*=2}while(G<U);return G===U}function X(U,G,C){return U*(1-C)+G*C}function l(U){const G=t(U),C=E(U);return G-U>U-C?C:G}function t(U){return U--,U|=U>>1,U|=U>>2,U|=U>>4,U|=U>>8,U|=U>>16,++U}function E(U){return U|=U>>1,U|=U>>2,U|=U>>4,U|=U>>8,(U|=U>>16)-(U>>1)}function K(U,G){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=E(U);break;case 2:C=l(U);break;default:C=t(U)}return Math.min(C,G)}C.d(G,{c:()=>E,e:()=>K,f:()=>L,g:()=>X,j:()=>l})},12718:(U,G,C)=>{C.r(G),C.d(G,{AsyncLoop:()=>x,Tools:()=>I,className:()=>H});var L=C(12721),X=C(12725),l=C(12731),t=C(12737),E=C(12739),K=C(12747),P=C(12756),O=C(12763),T=C(12772),D=C(12794),y=C(12844),V=C(12853),p=C(12861);class I{static get BaseUrl(){return T.f.BaseUrl}static set BaseUrl(U){T.f.BaseUrl=U}static get CleanUrl(){return T.f.CleanUrl}static set CleanUrl(U){T.f.CleanUrl=U}static IsAbsoluteUrl(U){return 0===U.indexOf("//")||-1!==U.indexOf("://")&&(-1!==U.indexOf(".")&&(-1!==U.indexOf("/")&&(!(U.indexOf(":")>U.indexOf("/"))&&(U.indexOf("://")<U.indexOf(".")||(0===U.indexOf("data:")||0===U.indexOf("blob:"))))))}static set ScriptBaseUrl(U){T.f.ScriptBaseUrl=U}static get ScriptBaseUrl(){return T.f.ScriptBaseUrl}static set CDNBaseUrl(U){I.ScriptBaseUrl=U,I.AssetBaseUrl=U}static set ScriptPreprocessUrl(U){T.f.ScriptPreprocessUrl=U}static get ScriptPreprocessUrl(){return T.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return T.f.DefaultRetryStrategy}static set DefaultRetryStrategy(U){T.f.DefaultRetryStrategy=U}static get CorsBehavior(){return T.f.CorsBehavior}static set CorsBehavior(U){T.f.CorsBehavior=U}static get UseFallbackTexture(){return O.d.UseFallbackTexture}static set UseFallbackTexture(U){O.d.UseFallbackTexture=U}static get RegisteredExternalClasses(){return y.c.RegisteredExternalClasses}static set RegisteredExternalClasses(U){y.c.RegisteredExternalClasses=U}static get fallbackTexture(){return O.d.FallbackTexture}static set fallbackTexture(U){O.d.FallbackTexture=U}static FetchToRef(U,G,C,L,X,l){const t=4*((Math.abs(U)*C%C|0)+(Math.abs(G)*L%L|0)*C);l.r=X[t]/255,l.g=X[t+1]/255,l.b=X[t+2]/255,l.a=X[t+3]/255}static Mix(U,G,C){return 0}static Instantiate(U){return y.c.Instantiate(U)}static SetImmediate(U){D.b.SetImmediate(U)}static IsExponentOfTwo(U){return!0}static FloatRound(U){return Math.fround(U)}static GetFilename(U){const G=U.lastIndexOf("/");return G<0?U:U.substring(G+1)}static GetFolderPath(U){let G=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=U.lastIndexOf("/");return C<0?G?U:"":U.substring(0,C+1)}static ToDegrees(U){return 180*U/Math.PI}static ToRadians(U){return U*Math.PI/180}static SmoothAngleChange(U,G){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const L=this.ToRadians(U),X=this.ToRadians(G);return this.ToDegrees(Math.atan2((1-C)*Math.sin(X)+C*Math.sin(L),(1-C)*Math.cos(X)+C*Math.cos(L)))}static MakeArray(U,G){return!0===G||void 0!==U&&null!=U?Array.isArray(U)?U:[U]:null}static GetPointerPrefix(U){return(0,X.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(U,G){(0,T.A)(U,G)}static SetReferrerPolicyBehavior(U,G){G.referrerPolicy=U}static get PreprocessUrl(){return T.f.PreprocessUrl}static set PreprocessUrl(U){T.f.PreprocessUrl=U}static LoadImage(U,G,C,L,X,l){return(0,T.t)(U,G,C,L,X,l)}static LoadFile(U,G,C,L,X,l){return(0,T.q)(U,G,C,L,X,l)}static async LoadFileAsync(U){let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,L)=>{(0,T.q)(U,(U=>{C(U)}),void 0,void 0,G,((U,G)=>{L(G)}))}))}static GetAssetUrl(U){if(!U)return"";if(I.AssetBaseUrl&&U.startsWith(I._DefaultAssetsUrl)){const G="/"===I.AssetBaseUrl[I.AssetBaseUrl.length-1]?I.AssetBaseUrl.substring(0,I.AssetBaseUrl.length-1):I.AssetBaseUrl;return U.replace(I._DefaultAssetsUrl,G)}return U}static GetBabylonScriptURL(U,G){if(!U)return"";if(I.ScriptBaseUrl&&U.startsWith(I._DefaultCdnUrl)){const G="/"===I.ScriptBaseUrl[I.ScriptBaseUrl.length-1]?I.ScriptBaseUrl.substring(0,I.ScriptBaseUrl.length-1):I.ScriptBaseUrl;U=U.replace(I._DefaultCdnUrl,G)}return U=I.ScriptPreprocessUrl(U),G&&(U=I.GetAbsoluteUrl(U)),U}static LoadBabylonScript(U,G,C,L){U=I.GetBabylonScriptURL(U),I.LoadScript(U,G,C)}static async LoadBabylonScriptAsync(U){return U=I.GetBabylonScriptURL(U),await I.LoadScriptAsync(U)}static LoadScript(U,G,C,L){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(U),G&&G()}catch(K){null===C||void 0===C||C("Unable to load script '".concat(U,"' in worker"),K)}return}if(!(0,X.k)())return void(null===C||void 0===C||C("Cannot load script '".concat(U,"' outside of a window or a worker")));const t=document.getElementsByTagName("head")[0],E=document.createElement("script");l?(E.setAttribute("type","module"),E.innerText=U):(E.setAttribute("type","text/javascript"),E.setAttribute("src",U)),L&&(E.id=L),E.onload=()=>{G&&G()},E.onerror=G=>{C&&C("Unable to load script '".concat(U,"'"),G)},t.appendChild(E)}static async LoadScriptAsync(U,G){return await new Promise(((C,L)=>{this.LoadScript(U,(()=>{C()}),((U,G)=>{L(G||new Error(U))}),G)}))}static ReadFileAsDataURL(U,G,C){const X=new FileReader,l={onCompleteObservable:new L.e,abort:()=>X.abort()};return X.onloadend=()=>{l.onCompleteObservable.notifyObservers(l)},X.onload=U=>{G(U.target.result)},X.onprogress=C,X.readAsDataURL(U),l}static ReadFile(U,G,C,L,X){return(0,T.u)(U,G,C,L,X)}static FileAsURL(U){const G=new Blob([U]);return window.URL.createObjectURL(G)}static Format(U){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return U.toFixed(G)}static DeepCopy(U,G,C,L){t.b.DeepCopy(U,G,C,L)}static IsEmpty(U){for(const G in U)if(Object.prototype.hasOwnProperty.call(U,G))return!1;return!0}static RegisterTopRootEvents(U,G){for(let L=0;L<G.length;L++){const X=G[L];U.addEventListener(X.name,X.handler,!1);try{window.parent&&window.parent.addEventListener(X.name,X.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(U,G){for(let L=0;L<G.length;L++){const X=G[L];U.removeEventListener(X.name,X.handler);try{U.parent&&U.parent.removeEventListener(X.name,X.handler)}catch(C){}}}static async DumpFramebuffer(U,G,C,L){throw(0,K.d)("DumpTools")}static DumpData(U,G,C,L){throw(0,K.d)("DumpTools")}static async DumpDataAsync(U,G,C){throw(0,K.d)("DumpTools")}static _IsOffScreenCanvas(U){return void 0!==U.convertToBlob}static ToBlob(U,G){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",L=arguments.length>3?arguments[3]:void 0;I._IsOffScreenCanvas(U)||U.toBlob||(U.toBlob=function(U,G,C){setTimeout((()=>{const L=atob(this.toDataURL(G,C).split(",")[1]),X=L.length,l=new Uint8Array(X);for(let U=0;U<X;U++)l[U]=L.charCodeAt(U);U(new Blob([l]))}))}),I._IsOffScreenCanvas(U)?U.convertToBlob({type:C,quality:L}).then((U=>G(U))):U.toBlob((function(U){G(U)}),C,L)}static DownloadBlob(U,G){if("download"in document.createElement("a")){if(!G){const U=new Date;G="screenshot_"+((U.getFullYear()+"-"+(U.getMonth()+1)).slice(2)+"-"+U.getDate()+"_"+U.getHours()+"-"+("0"+U.getMinutes()).slice(-2))+".png"}I.Download(U,G)}else if(U&&"undefined"!==typeof URL){const G=URL.createObjectURL(U),C=window.open("");if(!C)return;const L=C.document.createElement("img");L.onload=function(){URL.revokeObjectURL(G)},L.src=G,C.document.body.appendChild(L)}}static EncodeScreenshotCanvasData(U,G){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",L=arguments.length>3?arguments[3]:void 0,X=arguments.length>4?arguments[4]:void 0;if("string"!==typeof L&&G){if(G){if(I._IsOffScreenCanvas(U))return void U.convertToBlob({type:C,quality:X}).then((U=>{const C=new FileReader;C.readAsDataURL(U),C.onloadend=()=>{const U=C.result;G(U)}}));const L=U.toDataURL(C,X);G(L)}}else this.ToBlob(U,(function(U){U&&I.DownloadBlob(U,L),G&&G("")}),C,X)}static Download(U,G){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(U),L=document.createElement("a");document.body.appendChild(L),L.style.display="none",L.href=C,L.download=G,L.addEventListener("click",(()=>{L.parentElement&&L.parentElement.removeChild(L)})),L.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(U){return"boolean"===typeof U[0]?U[0]:"boolean"===typeof U[1]&&U[1]}static CreateScreenshot(U,G,C,L){throw(0,K.d)("ScreenshotTools")}static async CreateScreenshotAsync(U,G,C){throw(0,K.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(U,G,C,L){throw(0,K.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(U,G,C){throw(0,K.d)("ScreenshotTools")}static RandomId(){return(0,V.c)()}static IsBase64(U){return(0,T.k)(U)}static DecodeBase64(U){return(0,T.d)(U)}static get errorsCount(){return l.d.errorsCount}static Log(U){l.d.Log(U)}static Warn(U){l.d.Warn(U)}static Error(U){l.d.Error(U)}static get LogCache(){return l.d.LogCache}static ClearLogCache(){l.d.ClearLogCache()}static set LogLevels(U){l.d.LogLevels=U}static set PerformanceLogLevel(U){return(U&I.PerformanceUserMarkLogLevel)===I.PerformanceUserMarkLogLevel?(I.StartPerformanceCounter=I._StartUserMark,void(I.EndPerformanceCounter=I._EndUserMark)):(U&I.PerformanceConsoleLogLevel)===I.PerformanceConsoleLogLevel?(I.StartPerformanceCounter=I._StartPerformanceConsole,void(I.EndPerformanceCounter=I._EndPerformanceConsole)):(I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,void(I.EndPerformanceCounter=I._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(U,G){}static _EndPerformanceCounterDisabled(U,G){}static _StartUserMark(U){let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!I._Performance){if(!(0,X.k)())return;I._Performance=window.performance}G&&I._Performance.mark&&I._Performance.mark(U+"-Begin")}static _EndUserMark(U){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&I._Performance.mark&&(I._Performance.mark(U+"-End"),I._Performance.measure(U,U+"-Begin",U+"-End"))}static _StartPerformanceConsole(U){let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];G&&(I._StartUserMark(U,G),console.time&&console.time(U))}static _EndPerformanceConsole(U){let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];G&&(I._EndUserMark(U,G),console.timeEnd(U))}static get Now(){return E.d.Now}static GetClassName(U){let G=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!G&&U.getClassName)C=U.getClassName();else{if(U instanceof Object){C=(G?U:Object.getPrototypeOf(U)).constructor.__bjsclassName__}C||(C=typeof U)}return C}static First(U,G){for(const C of U)if(G(C))return C;return null}static getFullClassName(U){let G=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,L=null;if(!G&&U.getClassName)C=U.getClassName();else{if(U instanceof Object){const X=G?U:Object.getPrototypeOf(U);C=X.constructor.__bjsclassName__,L=X.constructor.__bjsmoduleName__}C||(C=typeof U)}return C?(null!=L?L+".":"")+C:null}static async DelayAsync(U){await new Promise((G=>{setTimeout((()=>{G()}),U)}))}static IsSafari(){return!!(0,X.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function H(U,G){return C=>{C.__bjsclassName__=U,C.__bjsmoduleName__=null!=G?G:null}}I.AssetBaseUrl="",I.UseCustomRequestHeaders=!1,I.CustomRequestHeaders=P.d.CustomRequestHeaders,I.GetDOMTextContent=X.c,I._DefaultCdnUrl="https://cdn.babylonjs.com",I._DefaultAssetsUrl="https://assets.babylonjs.com/core",I.GetAbsoluteUrl="object"===typeof document?U=>{const G=document.createElement("a");return G.href=U,G.href}:"function"===typeof URL&&"object"===typeof location?U=>new URL(U,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},I.NoneLogLevel=l.d.NoneLogLevel,I.MessageLogLevel=l.d.MessageLogLevel,I.WarningLogLevel=l.d.WarningLogLevel,I.ErrorLogLevel=l.d.ErrorLogLevel,I.AllLogLevel=l.d.AllLogLevel,I.IsWindowObjectExist=X.k,I.PerformanceNoneLogLevel=0,I.PerformanceUserMarkLogLevel=1,I.PerformanceConsoleLogLevel=2,I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,I.EndPerformanceCounter=I._EndPerformanceCounterDisabled;class x{constructor(U,G,C){let L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=U,this.index=L-1,this._done=!1,this._fn=G,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(U,G,C){const L=new x(U,G,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return L.executeNext(),L}static SyncAsyncForLoop(U,G,C,L,X){let l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return x.Run(Math.ceil(U/G),(L=>{X&&X()?L.breakLoop():setTimeout((()=>{for(let l=0;l<G;++l){const t=L.index*G+l;if(t>=U)break;if(C(t),X&&X()){L.breakLoop();break}}L.executeNext()}),l)}),L)}}I.Mix=p.g,I.IsExponentOfTwo=p.f,O.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12850:(U,G,C)=>{C.d(G,{c:()=>l,e:()=>X});const L={};function X(U,G){L[U]=G}function l(U){return L[U]}},12756:(U,G,C)=>{C.d(G,{d:()=>L});class L{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(L.CustomRequestHeaders).length>0||L.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const U in L.CustomRequestHeaders){const G=L.CustomRequestHeaders[U];G&&this._xhr.setRequestHeader(U,G)}}_shouldSkipRequestModifications(U){return L.SkipRequestModificationForBabylonCDN&&(U.includes("preview.babylonjs.com")||U.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(U){this._xhr.onprogress=U}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(U){this._xhr.responseType=U}get timeout(){return this._xhr.timeout}set timeout(U){this._xhr.timeout=U}addEventListener(U,G,C){this._xhr.addEventListener(U,G,C)}removeEventListener(U,G,C){this._xhr.removeEventListener(U,G,C)}abort(){this._xhr.abort()}send(U){L.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(U)}open(U,G){for(const C of L.CustomRequestModifiers){if(this._shouldSkipRequestModifications(G))return;G=C(this._xhr,G)||G}G=(G=G.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=G,this._xhr.open(U,G,!0)}setRequestHeader(U,G){this._xhr.setRequestHeader(U,G)}getResponseHeader(U){return this._xhr.getResponseHeader(U)}}L.CustomRequestHeaders={},L.CustomRequestModifiers=new Array,L.SkipRequestModificationForBabylonCDN=!0}}]);