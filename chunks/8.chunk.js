"use strict";(self["3gghkoft8x"]=self["3gghkoft8x"]||[]).push([[8],{12223:(y,S,I)=>{I.d(S,{c:()=>O});var V=I(12185),i=I(12151),A=I(12231),B=I(12260),d=I(12167);class F{constructor(){let y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,y&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(y){this._zOffset!==y&&(this._zOffset=y,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(y){this._zOffsetUnits!==y&&(this._zOffsetUnits=y,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(y){this._cullFace!==y&&(this._cullFace=y,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(y){this._cull!==y&&(this._cull=y,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(y){this._depthFunc!==y&&(this._depthFunc=y,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(y){this._depthMask!==y&&(this._depthMask=y,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(y){this._depthTest!==y&&(this._depthTest=y,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(y){this._frontFace!==y&&(this._frontFace=y,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(y){this.isDirty&&(this._isCullDirty&&(this.cull?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(y.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(y.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(y.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(this.zOffset,this.zOffsetUnits)):y.disable(y.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(y.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class J{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(y){this._func!==y&&(this._func=y,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(y){this._funcRef!==y&&(this._funcRef=y,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(y){this._funcMask!==y&&(this._funcMask=y,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(y){this._opStencilFail!==y&&(this._opStencilFail=y,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(y){this._opDepthFail!==y&&(this._opDepthFail=y,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(y){this._opStencilDepthPass!==y&&(this._opStencilDepthPass=y,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(y){this._mask!==y&&(this._mask=y,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(y){this._enabled!==y&&(this._enabled=y,this._isStencilTestDirty=!0)}constructor(){let y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,y&&this.reset()}reset(){var y;this.stencilMaterial=void 0,null===(y=this.stencilGlobal)||void 0===y||y.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(y){var S;if(!y)return;const I=!this.useStencilGlobalOnly&&!(null===(S=this.stencilMaterial)||void 0===S||!S.enabled);this.enabled=I?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=I?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=I?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=I?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=I?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=I?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=I?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=I?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(y.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(y.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(y.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class u{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=u.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=u.KEEP,this.opDepthFail=u.KEEP,this.opStencilDepthPass=u.REPLACE}get stencilFunc(){return this.func}set stencilFunc(y){this.func=y}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(y){this.funcRef=y}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(y){this.funcMask=y}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(y){this.opStencilFail=y}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(y){this.opDepthFail=y}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(y){this.opStencilDepthPass=y}get stencilMask(){return this.mask}set stencilMask(y){this.mask=y}get stencilTest(){return this.enabled}set stencilTest(y){this.enabled=y}}u.ALWAYS=519,u.KEEP=7680,u.REPLACE=7681;class K{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(y){this._alphaBlend!==y&&(this._alphaBlend=y,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(y,S,I,V){this._blendConstants[0]===y&&this._blendConstants[1]===S&&this._blendConstants[2]===I&&this._blendConstants[3]===V||(this._blendConstants[0]=y,this._blendConstants[1]=S,this._blendConstants[2]=I,this._blendConstants[3]=V,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(y,S,I,V){this._blendFunctionParameters[0]===y&&this._blendFunctionParameters[1]===S&&this._blendFunctionParameters[2]===I&&this._blendFunctionParameters[3]===V||(this._blendFunctionParameters[0]=y,this._blendFunctionParameters[1]=S,this._blendFunctionParameters[2]=I,this._blendFunctionParameters[3]=V,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(y,S){this._blendEquationParameters[0]===y&&this._blendEquationParameters[1]===S||(this._blendEquationParameters[0]=y,this._blendEquationParameters[1]=S,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(y){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?y.enable(y.BLEND):y.disable(y.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(y.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(y.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(y.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var G=I(12172),p=I(12265),L=I(12142),T=I(12133),l=I(12211),j=I(12276);function s(y,S){if((0,L.n)()){const{requestAnimationFrame:I}=S||window;if("function"===typeof I)return I(y)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(y);return setTimeout(y,16)}class O{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(y){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get si(){return this._useReverseDepthBuffer}set si(y){y!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=y,this._depthCullingState.depthFunc=y?518:515)}setColorWrite(y){y!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=y)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(y){if(y)return this.isNDCHalfZRange?y.IS_NDC_HALF_ZRANGE="":delete y.IS_NDC_HALF_ZRANGE,this.si?y.USE_REVERSE_DEPTHBUFFER="":delete y.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?y.USE_EXACT_SRGB_CONVERSIONS="":delete y.USE_EXACT_SRGB_CONVERSIONS);{let y="";return this.isNDCHalfZRange&&(y+="#define IS_NDC_HALF_ZRANGE"),this.si&&(y&&(y+="\n"),y+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(y&&(y+="\n"),y+="#define USE_EXACT_SRGB_CONVERSIONS"),y}}_rebuildInternalTextures(){const y=this._internalTexturesCache.slice();for(const S of y)S._rebuild()}_rebuildRenderTargetWrappers(){const y=this._renderTargetWrapperCache.slice();for(const S of y)S._rebuild()}_rebuildEffects(){for(const y in this._compiledEffects){const S=this._compiledEffects[y];S._pipelineContext=null,S._prepareEffect()}A.Effect.ResetCache()}_rebuildGraphicsResources(){var y;this.wipeCaches(!0),this._rebuildEffects(),null===(y=this._rebuildComputeEffects)||void 0===y||y.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){i.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(y){setTimeout((()=>{this._clearEmptyResources();const S=this._depthCullingState.depthTest,I=this._depthCullingState.depthFunc,V=this._depthCullingState.depthMask,i=this._stencilState.stencilTest;y(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=S,this._depthCullingState.depthFunc=I,this._depthCullingState.depthMask=V,this._stencilState.stencilTest=i,this._flagContextRestored()}),0)}get J(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(y){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(y){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const y=new Uint8Array(4),S=[y,y,y,y,y,y];this._emptyCubeTexture=this.createRawCubeTexture(S,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(y){if(!y)return this._activeRenderLoops.length=0,void this._cancelFrame();const S=this._activeRenderLoops.indexOf(y);S>=0&&(this._activeRenderLoops.splice(S,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const y=this._frameHandler;if(this._frameHandler=0,(0,L.n)()){const{cancelAnimationFrame:S}=this.getHostWindow()||window;if("function"===typeof S)return S(y)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(y);return clearTimeout(y)}}Di(){this.onBeginFrameObservable.notifyObservers(this)}oi(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(y){this._maxFPS=y,void 0!==y&&(this._minFrameTime=y<=0?Number.MAX_VALUE:1e3/y)}_isOverFrameTime(y){if(!y||void 0===this._maxFPS)return!1;const S=y-this._lastFrameTime;return this._lastFrameTime=y,this._renderAccumulator+=S,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(y){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(y)){let y=!0;(this.J||!this.renderEvenInBackground&&this._windowIsBackground)&&(y=!1),y&&(this.Di(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.oi())}}_renderLoop(y){this._processFrame(y),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let y=0;y<this._activeRenderLoops.length;y++){(0,this._activeRenderLoops[y])()}}_renderViews(){return!1}_queueNewFrame(y,S){return s(y,S)}runRenderLoop(y){-1===this._activeRenderLoops.indexOf(y)&&(this._activeRenderLoops.push(y),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(y){this._depthCullingState.depthTest=y}setZOffset(y){this._depthCullingState.zOffset=this.si?-y:y}getZOffset(){const y=this._depthCullingState.zOffset;return this.si?-y:y}setZOffsetUnits(y){this._depthCullingState.zOffsetUnits=this.si?-y:y}getZOffsetUnits(){const y=this._depthCullingState.zOffsetUnits;return this.si?-y:y}getHostWindow(){return(0,L.n)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(y){this._compatibilityMode=!0}_rebuildTextures(){for(const y of this.scenes)y._rebuildTextures();for(const y of this._virtualScenes)y._rebuildTextures()}_releaseRenderTargetWrapper(y){const S=this._renderTargetWrapperCache.indexOf(y);-1!==S&&this._renderTargetWrapperCache.splice(S,1)}get currentViewport(){return this._cachedViewport}setViewport(y,S,I){const V=S||this.getRenderWidth(),i=I||this.getRenderHeight(),A=y.x||0,B=y.y||0;this._cachedViewport=y,this._viewport(A*V,B*i,V*y.width,i*y.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(y){return new Path2D(y)}get description(){let y=this.name+this.version;return this._caps.parallelShaderCompile&&(y+=" - Parallel shader compilation"),y}_createTextureBase(y,S,I,A){let B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,J=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,G=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,L=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,T=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,l=arguments.length>13?arguments[13]:void 0,s=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0;const my="data:"===(y=y||"").substring(0,5),C="blob:"===y.substring(0,5),D=my&&-1!==y.indexOf(";base64,"),o=G||new p.c(this,1);o!==G&&(o.label=y.substring(0,60));const E=y;!this._transformTextureUrl||D||G||K||(y=this._transformTextureUrl(y)),E!==y&&(o._originalUrl=E);const z=y.lastIndexOf(".");let r=T||(z>-1?y.substring(z).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const h=(0,j.c)(r,l);A&&A.addPendingData(o),o.url=y,o.generateMipMaps=!S,o.samplingMode=B,o.invertY=I,o._useSRGBBuffer=this._getUseSRGBBuffer(!!f,S),this._doNotHandleContextLost||(o._buffer=K);let n=null;d&&!G&&(n=o.onLoadedObservable.add(d)),G||this._internalTexturesCache.push(o);const v=(I,G)=>{A&&A.removePendingData(o),y===E?(n&&o.onLoadedObservable.remove(n),V.e.UseFallbackTexture&&y!==V.e.FallbackTexture&&this._createTextureBase(V.e.FallbackTexture,S,o.invertY,A,B,null,F,J,u,K,o),I=(I||"Unknown error")+(V.e.UseFallbackTexture?" - Fallback texture was used":""),o.onErrorObservable.notifyObservers({message:I,exception:G}),F&&F(I,G)):(i.b.Warn(`Failed to load ${y}, falling back to ${E}`),this._createTextureBase(E,S,o.invertY,A,B,d,F,J,u,K,o,L,T,l,s,f))};if(h){const S=async y=>{(await h).loadData(y,o,((y,S,I,V,i,d)=>{d?v("TextureLoader failed to load data"):J(o,r,A,{width:y,height:S},o.invertY,!I,V,(()=>(i(),!1)),B)}),s)};K?K instanceof ArrayBuffer?S(new Uint8Array(K)):ArrayBuffer.isView(K)?S(K):F&&F("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(y,(y=>{S(new Uint8Array(y))}),void 0,A?A.offlineProvider:void 0,!0,((y,S)=>{v("Unable to load "+(y&&y.responseURL,S))}))}else{const I=y=>{C&&!this._doNotHandleContextLost&&(o._buffer=y),J(o,r,A,y,o.invertY,S,!1,u,B)};!my||D?K&&("string"===typeof K.decoding||K.close)?I(K):O._FileToolsLoadImage(y||"",I,v,A?A.offlineProvider:null,l,o.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof K||K instanceof ArrayBuffer||ArrayBuffer.isView(K)||K instanceof Blob?O._FileToolsLoadImage(K,I,v,A?A.offlineProvider:null,l,o.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):K&&I(K)}return o}_rebuildBuffers(){for(const y of this._uniformBuffers)y._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,L.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const y in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,y)&&(this._boundTexturesCache[y]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(y){this._name=y}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(y){this._hardwareScalingLevel=y,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(y){this._doNotHandleContextLost=y}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(y,S,I){var i,A;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new F,this._stencilStateComposer=new J,this._stencilState=new u,this._alphaState=new K,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new T.b,this.onCanvasFocusObservable=new T.b,this.onNewSceneAddedObservable=new T.b,this.onResizeObservable=new T.b,this.onCanvasPointerOutObservable=new T.b,this.onEffectErrorObservable=new T.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new T.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=y=>this._renderLoop(y),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new T.b,this.onAfterShaderCompilationObservable=new T.b,this.onBeginFrameObservable=new T.b,this.onEndFrameObservable=new T.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new T.b,this.onContextRestoredObservable=new T.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.zi=new T.b,this.onReleaseEffectsObservable=new T.b,V.e.Instances.push(this),this.startTime=d.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,B.d.SetMatrixPrecision(!!S.useHighPrecisionMatrix),(0,L.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=I??!1,S.antialias=y??S.antialias,S.deterministicLockstep=S.deterministicLockstep??!1,S.lockstepMaxSteps=S.lockstepMaxSteps??4,S.timeStep=S.timeStep??1/60,S.gi=S.gi??!0,this._audioContext=(null===(i=S.audioEngineOptions)||void 0===i?void 0:i.audioContext)??null,this._audioDestination=(null===(A=S.audioEngineOptions)||void 0===A?void 0:A.audioDestination)??null,this.premultipliedAlpha=S.premultipliedAlpha??!0,this._doNotHandleContextLost=!!S.doNotHandleContextLost,this._isStencilEnable=!!S.gi,this.useExactSrgbConversions=S.useExactSrgbConversions??!1;const G=(0,L.n)()&&window.devicePixelRatio||1,p=S.limitDeviceRatio||G;I=I||S.adaptToDeviceRatio||!1,this._hardwareScalingLevel=I?1/Math.min(p,G):1,this._lastDevicePixelRatio=G,this._creationOptions=S}resize(){let y,S,I=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const y=(0,L.n)()&&window.devicePixelRatio||1,S=this._lastDevicePixelRatio/y;this._lastDevicePixelRatio=y,this._hardwareScalingLevel*=S}if((0,L.n)()&&(0,L.f)())if(this._renderingCanvas){var V,i;const I=null===(V=(i=this._renderingCanvas).getBoundingClientRect)||void 0===V?void 0:V.call(i);y=this._renderingCanvas.clientWidth||(null===I||void 0===I?void 0:I.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,S=this._renderingCanvas.clientHeight||(null===I||void 0===I?void 0:I.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else y=window.innerWidth,S=window.innerHeight;else y=this._renderingCanvas?this._renderingCanvas.width:100,S=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(y/this._hardwareScalingLevel,S/this._hardwareScalingLevel,I)}setSize(y,S){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(y|=0,S|=0,!I&&this._renderingCanvas.width===y&&this._renderingCanvas.height===S)return!1;if(this._renderingCanvas.width=y,this._renderingCanvas.height=S,this.scenes){for(let y=0;y<this.scenes.length;y++){const S=this.scenes[y];for(let y=0;y<S.cameras.length;y++){S.cameras[y]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(y,S,I,V,i,A,B,d,F,J,u){throw(0,G.b)("engine.rawTexture")}createRawCubeTexture(y,S,I,V,i,A,B,d){throw(0,G.b)("engine.rawTexture")}createRawTexture3D(y,S,I,V,i,A,B,d,F,J,u){throw(0,G.b)("engine.rawTexture")}createRawTexture2DArray(y,S,I,V,i,A,B,d,F,J,u){throw(0,G.b)("engine.rawTexture")}_sharedInit(y){this._renderingCanvas=y}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const y=navigator.userAgent;this.hostInformation.isMobile=-1!==y.indexOf("Mobile")||-1!==y.indexOf("Mac")&&(0,L.f)()&&"ontouchend"in document},this._checkForMobile(),(0,L.n)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(y){return document.createElement("video")}_reportDrawCall(){var y;let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(y=this._drawCalls)||void 0===y||y.addCount(S,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(y,S){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(y,S){return createImageBitmap(y,S)}resizeImageBitmap(y,S,I){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(y){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(y,S){if("undefined"===typeof document)return new OffscreenCanvas(y,S);const I=document.createElement("canvas");return I.width=y,I.height=S,I}createCanvas(y,S){return O._CreateCanvas(y,S)}static _FileToolsLoadImage(y,S,I,V,i,A,B){throw(0,G.b)("FileTools")}_loadFile(y,S,I,V,i,A){const B=(0,l.h)(y,S,I,V,i,A);return this._activeRequests.push(B),B.onCompleteObservable.add((()=>{const y=this._activeRequests.indexOf(B);-1!==y&&this._activeRequests.splice(y,1)})),B}static _FileToolsLoadFile(y,S,I,V,i,A){if(l.b.loadFile)return l.b.loadFile(y,S,I,V,i,A);throw(0,G.b)("FileTools")}dispose(){var y;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(y=this.releaseComputeEffects)||void 0===y||y.call(this),A.Effect.ResetCache();for(const I of this._activeRequests)I.abort();this._boundRenderFunction=null,this.zi.notifyObservers(this),this.zi.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,L.n)()&&window.removeEventListener("resize",this._checkForMobile);const S=V.e.Instances.indexOf(this);S>=0&&V.e.Instances.splice(S,1),V.e.Instances.length||(V.e.OnEnginesDisposedObservable.notifyObservers(this),V.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(y){throw(0,G.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(y,S){for(let I=0;I<V.e.Instances.length;I++){const i=V.e.Instances[I];for(let I=0;I<i.scenes.length;I++)i.scenes[I].markAllMaterialsAsDirty(y,S)}}}O._RenderPassIdCounter=0,O._RescalePostProcessFactory=null,O.CollisionsEpsilon=.001,O.QueueNewFrame=s},12185:(y,S,I)=>{I.d(S,{e:()=>i});var V=I(12133);class i{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}i.Instances=[],i.OnEnginesDisposedObservable=new V.b,i._LastCreatedScene=null,i.UseFallbackTexture=!0,i.FallbackTexture=""},12260:(y,S,I)=>{I.d(S,{d:()=>V});class V{static SetMatrixPrecision(y){if(V.MatrixTrackPrecisionChange=!1,y&&!V.MatrixUse64Bits&&V.MatrixTrackedMatrices)for(let S=0;S<V.MatrixTrackedMatrices.length;++S){const y=V.MatrixTrackedMatrices[S],I=y.ki;y.ki=new Array(16);for(let S=0;S<16;++S)y.ki[S]=I[S]}V.MatrixUse64Bits=y,V.MatrixCurrentType=V.MatrixUse64Bits?Array:Float32Array,V.MatrixTrackedMatrices=null}}V.MatrixUse64Bits=!1,V.MatrixTrackPrecisionChange=!0,V.MatrixCurrentType=Float32Array,V.MatrixTrackedMatrices=[]},12276:(y,S,I)=>{I.d(S,{c:()=>B});var V=I(12151);const i=new Map;function A(y,S){(function(y){return i.delete(y)})(y)&&V.b.Warn(`Extension with the name '${y}' already exists`),i.set(y,S)}function B(y,S){"image/ktx"!==S&&"image/ktx2"!==S||(y=".ktx"),i.has(y)||(y.endsWith(".ies")&&A(".ies",(async()=>await I.e(15).then(I.bind(I,14766)).then((y=>new y._IESTextureLoader)))),y.endsWith(".dds")&&A(".dds",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(19),I.e(18),I.e(28)]).then(I.bind(I,14771)).then((y=>new y._DDSTextureLoader)))),y.endsWith(".basis")&&A(".basis",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(47)]).then(I.bind(I,14784)).then((y=>new y._BasisTextureLoader)))),y.endsWith(".env")&&A(".env",(async()=>await Promise.all([I.e(14),I.e(17),I.e(13),I.e(19),I.e(18),I.e(23),I.e(21),I.e(45),I.e(48)]).then(I.bind(I,14787)).then((y=>new y._ENVTextureLoader)))),y.endsWith(".hdr")&&A(".hdr",(async()=>await Promise.all([I.e(14),I.e(49)]).then(I.bind(I,14792)).then((y=>new y._HDRTextureLoader)))),(y.endsWith(".ktx")||y.endsWith(".ktx2"))&&(A(".ktx",(async()=>await I.e(30).then(I.bind(I,14797)).then((y=>new y._KTXTextureLoader)))),A(".ktx2",(async()=>await I.e(30).then(I.bind(I,14797)).then((y=>new y._KTXTextureLoader))))),y.endsWith(".tga")&&A(".tga",(async()=>await I.e(50).then(I.bind(I,14802)).then((y=>new y._TGATextureLoader)))),y.endsWith(".exr")&&A(".exr",(async()=>await I.e(16).then(I.bind(I,14806)).then((y=>new y._ExrTextureLoader)))));const V=i.get(y);return V?Promise.resolve(V(S)):null}},12265:(y,S,I)=>{I.d(S,{c:()=>B});var V,i=I(12133),A=I(12268);!function(y){y[y.Unknown=0]="Unknown",y[y.Url=1]="Url",y[y.Temp=2]="Temp",y[y.Raw=3]="Raw",y[y.Dynamic=4]="Dynamic",y[y.RenderTarget=5]="RenderTarget",y[y.MultiRenderTarget=6]="MultiRenderTarget",y[y.Cube=7]="Cube",y[y.CubeRaw=8]="CubeRaw",y[y.CubePrefiltered=9]="CubePrefiltered",y[y.Raw3D=10]="Raw3D",y[y.Raw2DArray=11]="Raw2DArray",y[y.DepthStencil=12]="DepthStencil",y[y.CubeRawRGBD=13]="CubeRawRGBD",y[y.Depth=14]="Depth"}(V||(V={}));class B extends A.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(y){this.generateMipMaps=y}get uniqueId(){return this._uniqueId}_setUniqueId(y){this._uniqueId=y}getEngine(){return this._engine}get source(){return this._source}constructor(y,S){let I=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new i.b,this.onErrorObservable=new i.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=y,this._source=S,this._uniqueId=B._Counter++,I||(this._hardwareTexture=y._createHardwareTexture())}incrementReferences(){this._references++}updateSize(y,S){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,y,S,I),this.width=y,this.height=S,this.depth=I,this.baseWidth=y,this.baseHeight=S,this.baseDepth=I,this._size=y*S*I}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const y=this.onRebuildCallback(this),S=S=>{S._swapAndDie(this,!1),this.isReady=y.isReady};return void(y.isAsync?y.proxy.then(S):S(y.proxy))}let y;switch(this.source){case 2:case 12:case 14:break;case 1:return void(y=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(y=>{y._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:y=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),y._swapAndDie(this,!1),this.isReady=!0;break;case 10:y=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),y._swapAndDie(this,!1),this.isReady=!0;break;case 11:y=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),y._swapAndDie(this,!1),this.isReady=!0;break;case 4:y=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),y._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(y=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:y=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),y._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return y=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(y=>{y&&y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(y._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(y){var S;let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(S=this._hardwareTexture)||void 0===S||S.setUsage(y._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),y._hardwareTexture=this._hardwareTexture,I&&(y._isRGBD=this._isRGBD),this._lodTextureHigh&&(y._lodTextureHigh&&y._lodTextureHigh.dispose(),y._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(y._lodTextureMid&&y._lodTextureMid.dispose(),y._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(y._lodTextureLow&&y._lodTextureLow.dispose(),y._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(y._irradianceTexture&&y._irradianceTexture.dispose(),y._irradianceTexture=this._irradianceTexture);const V=this._engine.getLoadedTexturesCache();let i=V.indexOf(this);-1!==i&&V.splice(i,1),i=V.indexOf(y),-1===i&&V.push(y)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}B._Counter=0},12268:(y,S,I)=>{I.d(S,{c:()=>V});class V{get wrapU(){return this._cachedWrapU}set wrapU(y){this._cachedWrapU=y}get wrapV(){return this._cachedWrapV}set wrapV(y){this._cachedWrapV=y}get wrapR(){return this._cachedWrapR}set wrapR(y){this._cachedWrapR=y}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(y){this._cachedAnisotropicFilteringLevel=y}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(y){this._comparisonFunction=y}get useMipMaps(){return this._useMipMaps}set useMipMaps(y){this._useMipMaps=y}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=y,this._cachedWrapV=S,this._cachedWrapR=I,this._cachedAnisotropicFilteringLevel=V,this.samplingMode=i,this._comparisonFunction=A,this}compareSampler(y){return this._cachedWrapU===y._cachedWrapU&&this._cachedWrapV===y._cachedWrapV&&this._cachedWrapR===y._cachedWrapR&&this._cachedAnisotropicFilteringLevel===y._cachedAnisotropicFilteringLevel&&this.samplingMode===y.samplingMode&&this._comparisonFunction===y._comparisonFunction&&this._useMipMaps===y._useMipMaps}}},12159:(y,S,I)=>{I.d(S,{d:()=>A});var V=I(12151);const i=(y,S,I)=>y?y.getClassName&&"Mesh"===y.getClassName()?null:!y.getClassName||"SubMesh"!==y.getClassName()&&"PhysicsBody"!==y.getClassName()?y.clone?y.clone():Array.isArray(y)?y.slice():I&&"object"===typeof y?{...y}:null:y.clone(S):null;class A{static DeepCopy(y,S,I,A){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const d=function(y){const S=[];do{const I=Object.getOwnPropertyNames(y);for(const y of I)-1===S.indexOf(y)&&S.push(y)}while(y=Object.getPrototypeOf(y));return S}(y);for(const J of d){if("_"===J[0]&&(!A||-1===A.indexOf(J)))continue;if(J.endsWith("Observable"))continue;if(I&&-1!==I.indexOf(J))continue;const d=y[J],u=typeof d;if("function"!==u)try{if("object"===u)if(d instanceof Uint8Array)S[J]=Uint8Array.from(d);else if(d instanceof Array){if(S[J]=[],d.length>0)if("object"==typeof d[0])for(let y=0;y<d.length;y++){const I=i(d[y],S,B);-1===S[J].indexOf(I)&&S[J].push(I)}else S[J]=d.slice(0)}else S[J]=i(d,S,B);else S[J]=d}catch(F){V.b.Warn(F.message)}}}}},12197:(y,S,I)=>{I.d(S,{c:()=>V,g:()=>i,k:()=>A});class V extends Error{}V._setPrototypeOf=Object.setPrototypeOf||((y,S)=>(y.__proto__=S,y));const i={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class A extends V{constructor(y,S,I){super(y),this.errorCode=S,this.innerError=I,this.name="RuntimeError",V._setPrototypeOf(this,A.prototype)}}},12193:(y,S,I)=>{I.d(S,{b:()=>v,f:()=>O,j:()=>z,l:()=>h,s:()=>o,o:()=>l,w:()=>C,A:()=>D,B:()=>E,F:()=>f});var V=I(12177),i=I(12142),A=I(12133);class B{}B.FilesToLoad={};var d=I(12197),F=I(12199),J=I(12203),u=I(12185),K=I(12151),G=I(12216),p=I(12211),L=I(12223);const T=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class l extends d.k{constructor(y,S){super(y,d.g.LoadFileError),this.name="LoadFileError",d.c._setPrototypeOf(this,l.prototype),S instanceof V.e?this.request=S:this.file=S}}class j extends d.k{constructor(y,S){super(y,d.g.RequestFileError),this.request=S,this.name="RequestFileError",d.c._setPrototypeOf(this,j.prototype)}}class s extends d.k{constructor(y,S){super(y,d.g.ReadFileError),this.file=S,this.name="ReadFileError",d.c._setPrototypeOf(this,s.prototype)}}const O={DefaultRetryStrategy:class{static ExponentialBackoff(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(I,V,i)=>0!==V.status||i>=y||-1!==I.indexOf("file:")?-1:Math.pow(2,i)*S}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:y=>y,ScriptBaseUrl:"",ScriptPreprocessUrl:y=>y,CleanUrl:y=>y=y.replace(/#/gm,"%23")},f=(y,S)=>{if((!y||0!==y.indexOf("data:"))&&O.CorsBehavior)if("string"===typeof O.CorsBehavior||O.CorsBehavior instanceof String)S.crossOrigin=O.CorsBehavior;else{const I=O.CorsBehavior(y);I&&(S.crossOrigin=I)}},my={getRequiredSize:null},C=function(y,S,I,i){let A,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",J=arguments.length>5?arguments[5]:void 0,K=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===K||void 0===K||!K._features.forceBitmapOverHTMLImageElement))return I("LoadImage is only supported in web or BabylonNative environments."),null;let G=!1;y instanceof ArrayBuffer||ArrayBuffer.isView(y)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(A=URL.createObjectURL(new Blob([y],{type:d})),G=!0):A=`data:${d};base64,`+(0,F.p)(y):y instanceof Blob?(A=URL.createObjectURL(y),G=!0):(A=O.CleanUrl(y),A=O.PreprocessUrl(A));const p=S=>{if(I){const V=A||y.toString();I(`Error while trying to load image: ${0===V.indexOf("http")||V.length<=128?V:V.slice(0,128)+"..."}`,S)}};if(null!==K&&void 0!==K&&K._features.forceBitmapOverHTMLImageElement)return o(A,(V=>{K.createImageBitmap(new Blob([V],{type:d}),{premultiplyAlpha:"none",...J}).then((y=>{S(y),G&&URL.revokeObjectURL(A)})).catch((S=>{I&&I("Error while trying to load image: "+y,S)}))}),void 0,i||void 0,!0,((y,S)=>{p(S)})),null;const L=new Image;if(my.getRequiredSize){const S=my.getRequiredSize(y);S.width&&(L.width=S.width),S.height&&(L.height=S.height)}f(A,L);const T=[],l=()=>{for(const y of T)y.target.removeEventListener(y.name,y.handler);T.length=0};T.push({target:L,name:"load",handler:()=>{l(),S(L),G&&L.src&&URL.revokeObjectURL(L.src)}}),T.push({target:L,name:"error",handler:y=>{l(),p(y),G&&L.src&&URL.revokeObjectURL(L.src)}}),T.push({target:document,name:"securitypolicyviolation",handler:y=>{if(y.blockedURI!==L.src||"bi"===y.disposition)return;l();const S=new Error(`CSP violation of policy ${y.effectiveDirective} ${y.blockedURI}. Current policy is ${y.originalPolicy}`);u.e.UseFallbackTexture=!1,p(S),G&&L.src&&URL.revokeObjectURL(L.src),L.src=""}}),(()=>{for(const y of T)y.target.addEventListener(y.name,y.handler)})();const j="blob:"===A.substring(0,5),s="data:"===A.substring(0,5),C=()=>{j||s||!V.e.IsCustomRequestAvailable?L.src=A:o(A,((y,S,I)=>{const V=new Blob([y],{type:!d&&I?I:d}),i=URL.createObjectURL(V);G=!0,L.src=i}),void 0,i||void 0,!0,((y,S)=>{p(S)}))},D=()=>{i&&i.loadImage(A,L)};if(!j&&!s&&i&&i.enableTexturesOffline)i.open(D,C);else{if(-1!==A.indexOf("file:")){const y=decodeURIComponent(A.substring(5).toLowerCase());if(B.FilesToLoad[y]&&"undefined"!==typeof URL){try{let S;try{S=URL.createObjectURL(B.FilesToLoad[y])}catch(E){S=URL.createObjectURL(B.FilesToLoad[y])}L.src=S,G=!0}catch(z){L.src=""}return L}}C()}return L},D=(y,S,I,V,i)=>{const B=new FileReader,d={onCompleteObservable:new A.b,abort:()=>B.abort()};return B.onloadend=()=>d.onCompleteObservable.notifyObservers(d),i&&(B.onerror=()=>{i(new s(`Unable to read ${y.name}`,y))}),B.onload=y=>{S(y.target.result)},I&&(B.onprogress=I),V?B.readAsArrayBuffer(y):B.readAsText(y),d},o=(y,S,I,V,i,F,J)=>{if(y.name)return D(y,S,I,i,F?y=>{F(void 0,y)}:void 0);const u=y;if(-1!==u.indexOf("file:")){let y=decodeURIComponent(u.substring(5).toLowerCase());0===y.indexOf("./")&&(y=y.substring(2));const V=B.FilesToLoad[y];if(V)return D(V,S,I,i,F?y=>F(void 0,new l(y.message,y.file)):void 0)}const{match:p,type:L}=n(u);if(p){const y={onCompleteObservable:new A.b,abort:()=>()=>{}};try{const y=i?v(u):P(u);S(y,void 0,L)}catch(d){F?F(void 0,d):K.b.Error(d.message||"Failed to parse the Data URL")}return G.b.SetImmediate((()=>{y.onCompleteObservable.notifyObservers(y)})),y}return E(u,((y,I)=>{S(y,null===I||void 0===I?void 0:I.responseURL,null===I||void 0===I?void 0:I.getResponseHeader("content-type"))}),I,V,i,F?y=>{F(y.request,new l(y.message,y.request))}:void 0,J)},E=(y,S,I,B,d,F,J)=>{y=O.CleanUrl(y),y=O.PreprocessUrl(y);const u=O.BaseUrl+y;let G=!1;const p={onCompleteObservable:new A.b,abort:()=>G=!0},L=()=>{let y,A=new V.e,B=null;const L=()=>{A&&(I&&A.removeEventListener("progress",I),y&&A.removeEventListener("readystatechange",y),A.removeEventListener("loadend",T))};let T=()=>{L(),p.onCompleteObservable.notifyObservers(p),p.onCompleteObservable.clear(),I=void 0,y=null,T=null,F=void 0,J=void 0,S=void 0};p.abort=()=>{G=!0,T&&T(),A&&A.readyState!==(XMLHttpRequest.DONE||4)&&A.abort(),null!==B&&(clearTimeout(B),B=null),A=null};const l=y=>{const S=y.message||"Unknown error";F&&A?F(new j(S,A)):K.b.Error(S)},s=K=>{if(A){if(A.open("GET",u),J)try{J(A)}catch(p){return void l(p)}d&&(A.responseType="arraybuffer"),I&&A.addEventListener("progress",I),T&&A.addEventListener("loadend",T),y=()=>{if(!G&&A&&A.readyState===(XMLHttpRequest.DONE||4)){if(y&&A.removeEventListener("readystatechange",y),A.status>=200&&A.status<300||0===A.status&&(!(0,i.n)()||r())){const y=d?A.response:A.responseText;if(null!==y){try{S&&S(y,A)}catch(p){l(p)}return}}const I=O.DefaultRetryStrategy;if(I){const y=I(u,A,K);if(-1!==y)return L(),A=new V.e,void(B=setTimeout((()=>s(K+1)),y))}const J=new j("Error status: "+A.status+" "+A.statusText+" - Unable to load "+u,A);F&&F(J)}},A.addEventListener("readystatechange",y),A.send()}};s(0)};if(B&&B.enableSceneOffline){const V=y=>{y&&y.status>400?F&&F(y):L()},i=()=>{B&&B.loadFile(O.BaseUrl+y,(y=>{!G&&S&&S(y),p.onCompleteObservable.notifyObservers(p)}),I?y=>{!G&&I&&I(y)}:void 0,V,d)};B.open(i,V)}else L();return p},z=y=>{const{match:S,type:I}=n(y);if(S)return I||void 0;const V=y.lastIndexOf(".");switch(y.substring(V+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ai":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,h=y=>T.test(y),n=y=>{const S=T.exec(y);if(null===S||0===S.length)return{match:!1,type:""};return{match:!0,type:S[0].replace("data:","").replace("base64,","")}};function v(y){return(0,F.d)(y.split(",")[1])}const P=y=>(0,F.h)(y.split(",")[1]);let q;L.c._FileToolsLoadImage=C,p.b.loadFile=o,J.p.loadFile=o;((y,S,I,V,i,A,B,d,F,J)=>{q={DecodeBase64UrlToBinary:y,DecodeBase64UrlToString:S,DefaultRetryStrategy:I.DefaultRetryStrategy,BaseUrl:I.BaseUrl,CorsBehavior:I.CorsBehavior,PreprocessUrl:I.PreprocessUrl,IsBase64DataUrl:V,IsFileURL:i,LoadFile:A,LoadImage:B,ReadFile:d,RequestFile:F,SetCorsBehavior:J},Object.defineProperty(q,"DefaultRetryStrategy",{get:function(){return I.DefaultRetryStrategy},set:function(y){I.DefaultRetryStrategy=y}}),Object.defineProperty(q,"BaseUrl",{get:function(){return I.BaseUrl},set:function(y){I.BaseUrl=y}}),Object.defineProperty(q,"PreprocessUrl",{get:function(){return I.PreprocessUrl},set:function(y){I.PreprocessUrl=y}}),Object.defineProperty(q,"CorsBehavior",{get:function(){return I.CorsBehavior},set:function(y){I.CorsBehavior=y}})})(v,P,O,h,r,o,C,D,E,f)},12286:(y,S,I)=>{function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(y=>{const S=16*Math.random()|0;return("x"===y?S:3&S|8).toString(16)}))}I.d(S,{d:()=>V})},12279:(y,S,I)=>{I.d(S,{d:()=>A});var V=I(12151),i=I(12282);class A{static Instantiate(y){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[y])return this.RegisteredExternalClasses[y];const S=(0,i.d)(y);if(S)return S;V.b.Warn(y+" not found, you may have missed an import.");const I=y.split(".");let A=window||this;for(let V=0,i=I.length;V<i;V++)A=A[I[V]];return"function"!==typeof A?null:A}}A.RegisteredExternalClasses={}},12167:(y,S,I)=>{I.d(S,{b:()=>i});var V=I(12142);class i{static get Now(){return(0,V.n)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12199:(y,S,I)=>{I.d(S,{d:()=>B,h:()=>A,l:()=>V,p:()=>i});const V=y=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(y);let S="";for(let I=0;I<y.byteLength;I++)S+=String.fromCharCode(y[I]);return S},i=y=>{const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I,V,i,A,B,d,F,J="",u=0;const K=ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y);for(;u<K.length;)I=K[u++],V=u<K.length?K[u++]:Number.NaN,i=u<K.length?K[u++]:Number.NaN,A=I>>2,B=(3&I)<<4|V>>4,d=(15&V)<<2|i>>6,F=63&i,isNaN(V)?d=F=64:isNaN(i)&&(F=64),J+=S.charAt(A)+S.charAt(B)+S.charAt(d)+S.charAt(F);return J},A=y=>atob(y),B=y=>{const S=A(y),I=S.length,V=new Uint8Array(new ArrayBuffer(I));for(let i=0;i<I;i++)V[i]=S.charCodeAt(i);return V.buffer}},12291:(y,S,I)=>{function V(y){let S=1;do{S*=2}while(S<y);return S===y}function i(y,S,I){return y*(1-I)+S*I}function A(y){const S=B(y),I=d(y);return S-y>y-I?I:S}function B(y){return y--,y|=y>>1,y|=y>>2,y|=y>>4,y|=y>>8,y|=y>>16,++y}function d(y){return y|=y>>1,y|=y>>2,y|=y>>4,y|=y>>8,(y|=y>>16)-(y>>1)}function F(y,S){let I;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:I=d(y);break;case 2:I=A(y);break;default:I=B(y)}return Math.min(I,S)}I.d(S,{d:()=>d,h:()=>F,l:()=>V,n:()=>i,q:()=>A})},12128:(y,S,I)=>{I.r(S),I.d(S,{AsyncLoop:()=>s,Tools:()=>l,className:()=>j});var V=I(12133),i=I(12142),A=I(12151),B=I(12159),d=I(12167),F=I(12172),J=I(12177),u=I(12185),K=I(12193),G=I(12216),p=I(12279),L=I(12286),T=I(12291);class l{static get BaseUrl(){return K.f.BaseUrl}static set BaseUrl(y){K.f.BaseUrl=y}static get CleanUrl(){return K.f.CleanUrl}static set CleanUrl(y){K.f.CleanUrl=y}static IsAbsoluteUrl(y){return 0===y.indexOf("//")||-1!==y.indexOf("://")&&(-1!==y.indexOf(".")&&(-1!==y.indexOf("/")&&(!(y.indexOf(":")>y.indexOf("/"))&&(y.indexOf("://")<y.indexOf(".")||(0===y.indexOf("data:")||0===y.indexOf("blob:"))))))}static set ScriptBaseUrl(y){K.f.ScriptBaseUrl=y}static get ScriptBaseUrl(){return K.f.ScriptBaseUrl}static set CDNBaseUrl(y){l.ScriptBaseUrl=y,l.AssetBaseUrl=y}static set ScriptPreprocessUrl(y){K.f.ScriptPreprocessUrl=y}static get ScriptPreprocessUrl(){return K.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return K.f.DefaultRetryStrategy}static set DefaultRetryStrategy(y){K.f.DefaultRetryStrategy=y}static get CorsBehavior(){return K.f.CorsBehavior}static set CorsBehavior(y){K.f.CorsBehavior=y}static get UseFallbackTexture(){return u.e.UseFallbackTexture}static set UseFallbackTexture(y){u.e.UseFallbackTexture=y}static get RegisteredExternalClasses(){return p.d.RegisteredExternalClasses}static set RegisteredExternalClasses(y){p.d.RegisteredExternalClasses=y}static get fallbackTexture(){return u.e.FallbackTexture}static set fallbackTexture(y){u.e.FallbackTexture=y}static FetchToRef(y,S,I,V,i,A){const B=4*((Math.abs(y)*I%I|0)+(Math.abs(S)*V%V|0)*I);A.r=i[B]/255,A.g=i[B+1]/255,A.b=i[B+2]/255,A.a=i[B+3]/255}static Mix(y,S,I){return 0}static Instantiate(y){return p.d.Instantiate(y)}static SetImmediate(y){G.b.SetImmediate(y)}static IsExponentOfTwo(y){return!0}static FloatRound(y){return Math.fround(y)}static GetFilename(y){const S=y.lastIndexOf("/");return S<0?y:y.substring(S+1)}static GetFolderPath(y){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const I=y.lastIndexOf("/");return I<0?S?y:"":y.substring(0,I+1)}static ToDegrees(y){return 180*y/Math.PI}static ToRadians(y){return y*Math.PI/180}static SmoothAngleChange(y,S){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const V=this.ToRadians(y),i=this.ToRadians(S);return this.ToDegrees(Math.atan2((1-I)*Math.sin(i)+I*Math.sin(V),(1-I)*Math.cos(i)+I*Math.cos(V)))}static MakeArray(y,S){return!0===S||void 0!==y&&null!=y?Array.isArray(y)?y:[y]:null}static GetPointerPrefix(y){return(0,i.n)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(y,S){(0,K.F)(y,S)}static SetReferrerPolicyBehavior(y,S){S.referrerPolicy=y}static get PreprocessUrl(){return K.f.PreprocessUrl}static set PreprocessUrl(y){K.f.PreprocessUrl=y}static LoadImage(y,S,I,V,i,A){return(0,K.w)(y,S,I,V,i,A)}static LoadFile(y,S,I,V,i,A){return(0,K.s)(y,S,I,V,i,A)}static async LoadFileAsync(y){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((I,V)=>{(0,K.s)(y,(y=>{I(y)}),void 0,void 0,S,((y,S)=>{V(S)}))}))}static GetAssetUrl(y){if(!y)return"";if(l.AssetBaseUrl&&y.startsWith(l._DefaultAssetsUrl)){const S="/"===l.AssetBaseUrl[l.AssetBaseUrl.length-1]?l.AssetBaseUrl.substring(0,l.AssetBaseUrl.length-1):l.AssetBaseUrl;return y.replace(l._DefaultAssetsUrl,S)}return y}static GetBabylonScriptURL(y,S){if(!y)return"";if(l.ScriptBaseUrl&&y.startsWith(l._DefaultCdnUrl)){const S="/"===l.ScriptBaseUrl[l.ScriptBaseUrl.length-1]?l.ScriptBaseUrl.substring(0,l.ScriptBaseUrl.length-1):l.ScriptBaseUrl;y=y.replace(l._DefaultCdnUrl,S)}return y=l.ScriptPreprocessUrl(y),S&&(y=l.GetAbsoluteUrl(y)),y}static LoadBabylonScript(y,S,I,V){y=l.GetBabylonScriptURL(y),l.LoadScript(y,S,I)}static async LoadBabylonScriptAsync(y){return y=l.GetBabylonScriptURL(y),await l.LoadScriptAsync(y)}static LoadScript(y,S,I,V){let A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(y),S&&S()}catch(F){null===I||void 0===I||I(`Unable to load script '${y}' in worker`,F)}return}if(!(0,i.n)())return void(null===I||void 0===I||I(`Cannot load script '${y}' outside of a window or a worker`));const B=document.getElementsByTagName("head")[0],d=document.createElement("script");A?(d.setAttribute("type","module"),d.innerText=y):(d.setAttribute("type","text/javascript"),d.setAttribute("src",y)),V&&(d.id=V),d.onload=()=>{S&&S()},d.onerror=S=>{I&&I(`Unable to load script '${y}'`,S)},B.appendChild(d)}static async LoadScriptAsync(y,S){return await new Promise(((I,V)=>{this.LoadScript(y,(()=>{I()}),((y,S)=>{V(S||new Error(y))}),S)}))}static ReadFileAsDataURL(y,S,I){const i=new FileReader,A={onCompleteObservable:new V.b,abort:()=>i.abort()};return i.onloadend=()=>{A.onCompleteObservable.notifyObservers(A)},i.onload=y=>{S(y.target.result)},i.onprogress=I,i.readAsDataURL(y),A}static ReadFile(y,S,I,V,i){return(0,K.A)(y,S,I,V,i)}static FileAsURL(y){const S=new Blob([y]);return window.URL.createObjectURL(S)}static Format(y){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return y.toFixed(S)}static DeepCopy(y,S,I,V){B.d.DeepCopy(y,S,I,V)}static IsEmpty(y){for(const S in y)if(Object.prototype.hasOwnProperty.call(y,S))return!1;return!0}static RegisterTopRootEvents(y,S){for(let V=0;V<S.length;V++){const i=S[V];y.addEventListener(i.name,i.handler,!1);try{window.parent&&window.parent.addEventListener(i.name,i.handler,!1)}catch(I){}}}static UnregisterTopRootEvents(y,S){for(let V=0;V<S.length;V++){const i=S[V];y.removeEventListener(i.name,i.handler);try{y.parent&&y.parent.removeEventListener(i.name,i.handler)}catch(I){}}}static async DumpFramebuffer(y,S,I,V){throw(0,F.b)("DumpTools")}static DumpData(y,S,I,V){throw(0,F.b)("DumpTools")}static async DumpDataAsync(y,S,I){throw(0,F.b)("DumpTools")}static _IsOffScreenCanvas(y){return void 0!==y.convertToBlob}static ToBlob(y,S){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0;l._IsOffScreenCanvas(y)||y.toBlob||(y.toBlob=function(y,S,I){setTimeout((()=>{const V=atob(this.toDataURL(S,I).split(",")[1]),i=V.length,A=new Uint8Array(i);for(let y=0;y<i;y++)A[y]=V.charCodeAt(y);y(new Blob([A]))}))}),l._IsOffScreenCanvas(y)?y.convertToBlob({type:I,quality:V}).then((y=>S(y))):y.toBlob((function(y){S(y)}),I,V)}static DownloadBlob(y,S){if("download"in document.createElement("a")){if(!S){const y=new Date;S="screenshot_"+((y.getFullYear()+"-"+(y.getMonth()+1)).slice(2)+"-"+y.getDate()+"_"+y.getHours()+"-"+("0"+y.getMinutes()).slice(-2))+".png"}l.Download(y,S)}else if(y&&"undefined"!==typeof URL){const S=URL.createObjectURL(y),I=window.open("");if(!I)return;const V=I.document.createElement("img");V.onload=function(){URL.revokeObjectURL(S)},V.src=S,I.document.body.appendChild(V)}}static EncodeScreenshotCanvasData(y,S){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if("string"!==typeof V&&S){if(S){if(l._IsOffScreenCanvas(y))return void y.convertToBlob({type:I,quality:i}).then((y=>{const I=new FileReader;I.readAsDataURL(y),I.onloadend=()=>{const y=I.result;S(y)}}));const V=y.toDataURL(I,i);S(V)}}else this.ToBlob(y,(function(y){y&&l.DownloadBlob(y,V),S&&S("")}),I,i)}static Download(y,S){if("undefined"===typeof URL)return;const I=window.URL.createObjectURL(y),V=document.createElement("a");document.body.appendChild(V),V.style.display="none",V.href=I,V.download=S,V.addEventListener("click",(()=>{V.parentElement&&V.parentElement.removeChild(V)})),V.click(),window.URL.revokeObjectURL(I)}static BackCompatCameraNoPreventDefault(y){return"boolean"===typeof y[0]?y[0]:"boolean"===typeof y[1]&&y[1]}static CreateScreenshot(y,S,I,V){throw(0,F.b)("ScreenshotTools")}static async CreateScreenshotAsync(y,S,I){throw(0,F.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(y,S,I,V){throw(0,F.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(y,S,I){throw(0,F.b)("ScreenshotTools")}static RandomId(){return(0,L.d)()}static IsBase64(y){return(0,K.l)(y)}static DecodeBase64(y){return(0,K.b)(y)}static get errorsCount(){return A.b.errorsCount}static Log(y){A.b.Log(y)}static Warn(y){A.b.Warn(y)}static Error(y){A.b.Error(y)}static get LogCache(){return A.b.LogCache}static ClearLogCache(){A.b.ClearLogCache()}static set LogLevels(y){A.b.LogLevels=y}static set PerformanceLogLevel(y){return(y&l.PerformanceUserMarkLogLevel)===l.PerformanceUserMarkLogLevel?(l.StartPerformanceCounter=l._StartUserMark,void(l.EndPerformanceCounter=l._EndUserMark)):(y&l.PerformanceConsoleLogLevel)===l.PerformanceConsoleLogLevel?(l.StartPerformanceCounter=l._StartPerformanceConsole,void(l.EndPerformanceCounter=l._EndPerformanceConsole)):(l.StartPerformanceCounter=l._StartPerformanceCounterDisabled,void(l.EndPerformanceCounter=l._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(y,S){}static _EndPerformanceCounterDisabled(y,S){}static _StartUserMark(y){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!l._Performance){if(!(0,i.n)())return;l._Performance=window.performance}S&&l._Performance.mark&&l._Performance.mark(y+"-Begin")}static _EndUserMark(y){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&l._Performance.mark&&(l._Performance.mark(y+"-End"),l._Performance.measure(y,y+"-Begin",y+"-End"))}static _StartPerformanceConsole(y){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(l._StartUserMark(y,S),console.time&&console.time(y))}static _EndPerformanceConsole(y){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(l._EndUserMark(y,S),console.timeEnd(y))}static get Now(){return d.b.Now}static GetClassName(y){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=null;if(!S&&y.getClassName)I=y.getClassName();else{if(y instanceof Object){I=(S?y:Object.getPrototypeOf(y)).constructor.__bjsclassName__}I||(I=typeof y)}return I}static First(y,S){for(const I of y)if(S(I))return I;return null}static getFullClassName(y){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=null,V=null;if(!S&&y.getClassName)I=y.getClassName();else{if(y instanceof Object){const i=S?y:Object.getPrototypeOf(y);I=i.constructor.__bjsclassName__,V=i.constructor.__bjsmoduleName__}I||(I=typeof y)}return I?(null!=V?V+".":"")+I:null}static async DelayAsync(y){await new Promise((S=>{setTimeout((()=>{S()}),y)}))}static IsSafari(){return!!(0,i.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function j(y,S){return I=>{I.__bjsclassName__=y,I.__bjsmoduleName__=null!=S?S:null}}l.AssetBaseUrl="",l.UseCustomRequestHeaders=!1,l.CustomRequestHeaders=J.e.CustomRequestHeaders,l.GetDOMTextContent=i.c,l._DefaultCdnUrl="https://cdn.babylonjs.com",l._DefaultAssetsUrl="https://assets.babylonjs.com/core",l.GetAbsoluteUrl="object"===typeof document?y=>{const S=document.createElement("a");return S.href=y,S.href}:"function"===typeof URL&&"object"===typeof location?y=>new URL(y,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},l.NoneLogLevel=A.b.NoneLogLevel,l.MessageLogLevel=A.b.MessageLogLevel,l.WarningLogLevel=A.b.WarningLogLevel,l.ErrorLogLevel=A.b.ErrorLogLevel,l.AllLogLevel=A.b.AllLogLevel,l.IsWindowObjectExist=i.n,l.PerformanceNoneLogLevel=0,l.PerformanceUserMarkLogLevel=1,l.PerformanceConsoleLogLevel=2,l.StartPerformanceCounter=l._StartPerformanceCounterDisabled,l.EndPerformanceCounter=l._EndPerformanceCounterDisabled;class s{constructor(y,S,I){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=y,this.index=V-1,this._done=!1,this._fn=S,this._successCallback=I}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(y,S,I){const V=new s(y,S,I,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return V.executeNext(),V}static SyncAsyncForLoop(y,S,I,V,i){let A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return s.Run(Math.ceil(y/S),(V=>{i&&i()?V.breakLoop():setTimeout((()=>{for(let A=0;A<S;++A){const B=V.index*S+A;if(B>=y)break;if(I(B),i&&i()){V.breakLoop();break}}V.executeNext()}),A)}),V)}}l.Mix=T.n,l.IsExponentOfTwo=T.l,u.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12282:(y,S,I)=>{I.d(S,{d:()=>A,e:()=>i});const V={};function i(y,S){V[y]=S}function A(y){return V[y]}},12177:(y,S,I)=>{I.d(S,{e:()=>V});class V{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(V.CustomRequestHeaders).length>0||V.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const y in V.CustomRequestHeaders){const S=V.CustomRequestHeaders[y];S&&this._xhr.setRequestHeader(y,S)}}_shouldSkipRequestModifications(y){return V.SkipRequestModificationForBabylonCDN&&(y.includes("preview.babylonjs.com")||y.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(y){this._xhr.onprogress=y}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(y){this._xhr.responseType=y}get timeout(){return this._xhr.timeout}set timeout(y){this._xhr.timeout=y}addEventListener(y,S,I){this._xhr.addEventListener(y,S,I)}removeEventListener(y,S,I){this._xhr.removeEventListener(y,S,I)}abort(){this._xhr.abort()}send(y){V.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(y)}open(y,S){for(const I of V.CustomRequestModifiers){if(this._shouldSkipRequestModifications(S))return;S=I(this._xhr,S)||S}S=(S=S.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=S,this._xhr.open(y,S,!0)}setRequestHeader(y,S){this._xhr.setRequestHeader(y,S)}getResponseHeader(y){return this._xhr.getResponseHeader(y)}}V.CustomRequestHeaders={},V.CustomRequestModifiers=new Array,V.SkipRequestModificationForBabylonCDN=!0}}]);