"use strict";(self["3b8bnhi4gzj"]=self["3b8bnhi4gzj"]||[]).push([[8],{11635:(Z,h,V)=>{V.d(h,{d:()=>X});var v=V(11599),A=V(11580),H=V(11644),K=V(11664),d=V(11588);class a{constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,Z&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(Z){this._zOffset!==Z&&(this._zOffset=Z,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(Z){this._zOffsetUnits!==Z&&(this._zOffsetUnits=Z,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(Z){this._cullFace!==Z&&(this._cullFace=Z,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(Z){this._cull!==Z&&(this._cull=Z,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(Z){this._depthFunc!==Z&&(this._depthFunc=Z,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(Z){this._depthMask!==Z&&(this._depthMask=Z,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(Z){this._depthTest!==Z&&(this._depthTest=Z,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(Z){this._frontFace!==Z&&(this._frontFace=Z,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(Z){this.isDirty&&(this._isCullDirty&&(this.cull?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(Z.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(Z.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(Z.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(Z.enable(Z.POLYGON_OFFSET_FILL),Z.polygonOffset(this.zOffset,this.zOffsetUnits)):Z.disable(Z.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(Z.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class n{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(Z){this._func!==Z&&(this._func=Z,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(Z){this._funcRef!==Z&&(this._funcRef=Z,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(Z){this._funcMask!==Z&&(this._funcMask=Z,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(Z){this._opStencilFail!==Z&&(this._opStencilFail=Z,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(Z){this._opDepthFail!==Z&&(this._opDepthFail=Z,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(Z){this._opStencilDepthPass!==Z&&(this._opStencilDepthPass=Z,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(Z){this._mask!==Z&&(this._mask=Z,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(Z){this._enabled!==Z&&(this._enabled=Z,this._isStencilTestDirty=!0)}constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,Z&&this.reset()}reset(){var Z;this.stencilMaterial=void 0,null===(Z=this.stencilGlobal)||void 0===Z||Z.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(Z){var h;if(!Z)return;const V=!this.useStencilGlobalOnly&&!(null===(h=this.stencilMaterial)||void 0===h||!h.enabled);this.enabled=V?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=V?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=V?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=V?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=V?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=V?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=V?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=V?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(Z.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(Z.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(Z.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class x{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=x.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=x.KEEP,this.opDepthFail=x.KEEP,this.opStencilDepthPass=x.REPLACE}get stencilFunc(){return this.func}set stencilFunc(Z){this.func=Z}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(Z){this.funcRef=Z}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(Z){this.funcMask=Z}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(Z){this.opStencilFail=Z}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(Z){this.opDepthFail=Z}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(Z){this.opStencilDepthPass=Z}get stencilMask(){return this.mask}set stencilMask(Z){this.mask=Z}get stencilTest(){return this.enabled}set stencilTest(Z){this.enabled=Z}}x.ALWAYS=519,x.KEEP=7680,x.REPLACE=7681;class N{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(Z){this._alphaBlend!==Z&&(this._alphaBlend=Z,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(Z,h,V,v){this._blendConstants[0]===Z&&this._blendConstants[1]===h&&this._blendConstants[2]===V&&this._blendConstants[3]===v||(this._blendConstants[0]=Z,this._blendConstants[1]=h,this._blendConstants[2]=V,this._blendConstants[3]=v,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(Z,h,V,v){this._blendFunctionParameters[0]===Z&&this._blendFunctionParameters[1]===h&&this._blendFunctionParameters[2]===V&&this._blendFunctionParameters[3]===v||(this._blendFunctionParameters[0]=Z,this._blendFunctionParameters[1]=h,this._blendFunctionParameters[2]=V,this._blendFunctionParameters[3]=v,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(Z,h){this._blendEquationParameters[0]===Z&&this._blendEquationParameters[1]===h||(this._blendEquationParameters[0]=Z,this._blendEquationParameters[1]=h,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(Z){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(Z.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(Z.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(Z.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var D=V(11594),k=V(11673),u=V(11573),F=V(11566),b=V(11624),o=V(11683);function q(Z,h){if((0,u.m)()){const{requestAnimationFrame:V}=h||window;if("function"===typeof V)return V(Z)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(Z);return setTimeout(Z,16)}class X{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(Z){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(Z){Z!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=Z,this._depthCullingState.depthFunc=Z?518:515)}setColorWrite(Z){Z!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=Z)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(Z){if(Z)return this.isNDCHalfZRange?Z.IS_NDC_HALF_ZRANGE="":delete Z.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?Z.USE_REVERSE_DEPTHBUFFER="":delete Z.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?Z.USE_EXACT_SRGB_CONVERSIONS="":delete Z.USE_EXACT_SRGB_CONVERSIONS);{let Z="";return this.isNDCHalfZRange&&(Z+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(Z&&(Z+="\n"),Z+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(Z&&(Z+="\n"),Z+="#define USE_EXACT_SRGB_CONVERSIONS"),Z}}_rebuildInternalTextures(){const Z=this._internalTexturesCache.slice();for(const h of Z)h._rebuild()}_rebuildRenderTargetWrappers(){const Z=this._renderTargetWrapperCache.slice();for(const h of Z)h._rebuild()}_rebuildEffects(){for(const Z in this._compiledEffects){const h=this._compiledEffects[Z];h._pipelineContext=null,h._prepareEffect()}H.Effect.ResetCache()}_rebuildGraphicsResources(){var Z;this.wipeCaches(!0),this._rebuildEffects(),null===(Z=this._rebuildComputeEffects)||void 0===Z||Z.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){A.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(Z){setTimeout((()=>{this._clearEmptyResources();const h=this._depthCullingState.depthTest,V=this._depthCullingState.depthFunc,v=this._depthCullingState.depthMask,A=this._stencilState.stencilTest;Z(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=h,this._depthCullingState.depthFunc=V,this._depthCullingState.depthMask=v,this._stencilState.stencilTest=A,this._flagContextRestored()}),0)}get K(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(Z){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(Z){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const Z=new Uint8Array(4),h=[Z,Z,Z,Z,Z,Z];this._emptyCubeTexture=this.createRawCubeTexture(h,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(Z){if(!Z)return this._activeRenderLoops.length=0,void this._cancelFrame();const h=this._activeRenderLoops.indexOf(Z);h>=0&&(this._activeRenderLoops.splice(h,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const Z=this._frameHandler;if(this._frameHandler=0,(0,u.m)()){const{cancelAnimationFrame:h}=this.getHostWindow()||window;if("function"===typeof h)return h(Z)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(Z);return clearTimeout(Z)}}qh(){this.onBeginFrameObservable.notifyObservers(this)}Xh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(Z){this._maxFPS=Z,void 0!==Z&&(this._minFrameTime=Z<=0?Number.MAX_VALUE:1e3/Z)}_isOverFrameTime(Z){if(!Z||void 0===this._maxFPS)return!1;const h=Z-this._lastFrameTime;return this._lastFrameTime=Z,this._renderAccumulator+=h,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(Z){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(Z)){let Z=!0;(this.K||!this.renderEvenInBackground&&this._windowIsBackground)&&(Z=!1),Z&&(this.qh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Xh())}}_renderLoop(Z){this._processFrame(Z),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let Z=0;Z<this._activeRenderLoops.length;Z++){(0,this._activeRenderLoops[Z])()}}_renderViews(){return!1}_queueNewFrame(Z,h){return q(Z,h)}runRenderLoop(Z){-1===this._activeRenderLoops.indexOf(Z)&&(this._activeRenderLoops.push(Z),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(Z){this._depthCullingState.depthTest=Z}setZOffset(Z){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-Z:Z}getZOffset(){const Z=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-Z:Z}setZOffsetUnits(Z){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-Z:Z}getZOffsetUnits(){const Z=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-Z:Z}getHostWindow(){return(0,u.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(Z){this._compatibilityMode=!0}_rebuildTextures(){for(const Z of this.scenes)Z._rebuildTextures();for(const Z of this._virtualScenes)Z._rebuildTextures()}_releaseRenderTargetWrapper(Z){const h=this._renderTargetWrapperCache.indexOf(Z);-1!==h&&this._renderTargetWrapperCache.splice(h,1)}get currentViewport(){return this._cachedViewport}setViewport(Z,h,V){const v=h||this.getRenderWidth(),A=V||this.getRenderHeight(),H=Z.x||0,K=Z.y||0;this._cachedViewport=Z,this._viewport(H*v,K*A,v*Z.width,A*Z.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(Z){return new Path2D(Z)}get description(){let Z=this.name+this.version;return this._caps.parallelShaderCompile&&(Z+=" - Parallel shader compilation"),Z}_createTextureBase(Z,h,V,H){let K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,n=arguments.length>7?arguments[7]:void 0,x=arguments.length>8?arguments[8]:void 0,N=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,D=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,F=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,b=arguments.length>13?arguments[13]:void 0,q=arguments.length>14?arguments[14]:void 0,E=arguments.length>15?arguments[15]:void 0;const j="data:"===(Z=Z||"").substring(0,5),P="blob:"===Z.substring(0,5),C=j&&-1!==Z.indexOf(";base64,"),l=D||new k.c(this,1);l!==D&&(l.label=Z.substring(0,60));const B=Z;!this._transformTextureUrl||C||D||N||(Z=this._transformTextureUrl(Z)),B!==Z&&(l._originalUrl=B);const S=Z.lastIndexOf(".");let r=F||(S>-1?Z.substring(S).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const L=(0,o.b)(r,b);H&&H.addPendingData(l),l.url=Z,l.generateMipMaps=!h,l.samplingMode=K,l.invertY=V,l._useSRGBBuffer=this._getUseSRGBBuffer(!!E,h),this._doNotHandleContextLost||(l._buffer=N);let y=null;d&&!D&&(y=l.onLoadedObservable.add(d)),D||this._internalTexturesCache.push(l);const W=(V,D)=>{H&&H.removePendingData(l),Z===B?(y&&l.onLoadedObservable.remove(y),v.b.UseFallbackTexture&&Z!==v.b.FallbackTexture&&this._createTextureBase(v.b.FallbackTexture,h,l.invertY,H,K,null,a,n,x,N,l),V=(V||"Unknown error")+(v.b.UseFallbackTexture?" - Fallback texture was used":""),l.onErrorObservable.notifyObservers({message:V,exception:D}),a&&a(V,D)):(A.b.Warn(`Failed to load ${Z}, falling back to ${B}`),this._createTextureBase(B,h,l.invertY,H,K,d,a,n,x,N,l,u,F,b,q,E))};if(L){const h=async Z=>{(await L).loadData(Z,l,((Z,h,V,v,A,d)=>{d?W("TextureLoader failed to load data"):n(l,r,H,{width:Z,height:h},l.invertY,!V,v,(()=>(A(),!1)),K)}),q)};N?N instanceof ArrayBuffer?h(new Uint8Array(N)):ArrayBuffer.isView(N)?h(N):a&&a("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(Z,(Z=>{h(new Uint8Array(Z))}),void 0,H?H.offlineProvider:void 0,!0,((Z,h)=>{W("Unable to load "+(Z&&Z.responseURL,h))}))}else{const V=Z=>{P&&!this._doNotHandleContextLost&&(l._buffer=Z),n(l,r,H,Z,l.invertY,h,!1,x,K)};!j||C?N&&("string"===typeof N.decoding||N.close)?V(N):X._FileToolsLoadImage(Z||"",V,W,H?H.offlineProvider:null,b,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof N||N instanceof ArrayBuffer||ArrayBuffer.isView(N)||N instanceof Blob?X._FileToolsLoadImage(N,V,W,H?H.offlineProvider:null,b,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):N&&V(N)}return l}_rebuildBuffers(){for(const Z of this._uniformBuffers)Z._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,u.g)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const Z in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,Z)&&(this._boundTexturesCache[Z]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(Z){this._name=Z}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(Z){this._hardwareScalingLevel=Z,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(Z){this._doNotHandleContextLost=Z}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(Z,h,V){var A,H;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new a,this._stencilStateComposer=new n,this._stencilState=new x,this._alphaState=new N,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new F.b,this.onCanvasFocusObservable=new F.b,this.onNewSceneAddedObservable=new F.b,this.onResizeObservable=new F.b,this.onCanvasPointerOutObservable=new F.b,this.onEffectErrorObservable=new F.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new F.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=Z=>this._renderLoop(Z),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new F.b,this.onAfterShaderCompilationObservable=new F.b,this.onBeginFrameObservable=new F.b,this.onEndFrameObservable=new F.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new F.b,this.onContextRestoredObservable=new F.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.jh=new F.b,this.onReleaseEffectsObservable=new F.b,v.b.Instances.push(this),this.startTime=d.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,K.c.SetMatrixPrecision(!!h.useHighPrecisionMatrix),(0,u.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=V??!1,h.antialias=Z??h.antialias,h.deterministicLockstep=h.deterministicLockstep??!1,h.lockstepMaxSteps=h.lockstepMaxSteps??4,h.timeStep=h.timeStep??1/60,h.stencil=h.stencil??!0,this._audioContext=(null===(A=h.audioEngineOptions)||void 0===A?void 0:A.audioContext)??null,this._audioDestination=(null===(H=h.audioEngineOptions)||void 0===H?void 0:H.audioDestination)??null,this.premultipliedAlpha=h.premultipliedAlpha??!0,this._doNotHandleContextLost=!!h.doNotHandleContextLost,this._isStencilEnable=!!h.stencil,this.useExactSrgbConversions=h.useExactSrgbConversions??!1;const D=(0,u.m)()&&window.devicePixelRatio||1,k=h.limitDeviceRatio||D;V=V||h.adaptToDeviceRatio||!1,this._hardwareScalingLevel=V?1/Math.min(k,D):1,this._lastDevicePixelRatio=D,this._creationOptions=h}resize(){let Z,h,V=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const Z=(0,u.m)()&&window.devicePixelRatio||1,h=this._lastDevicePixelRatio/Z;this._lastDevicePixelRatio=Z,this._hardwareScalingLevel*=h}if((0,u.m)()&&(0,u.g)())if(this._renderingCanvas){var v,A;const V=null===(v=(A=this._renderingCanvas).getBoundingClientRect)||void 0===v?void 0:v.call(A);Z=this._renderingCanvas.clientWidth||(null===V||void 0===V?void 0:V.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,h=this._renderingCanvas.clientHeight||(null===V||void 0===V?void 0:V.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else Z=window.innerWidth,h=window.innerHeight;else Z=this._renderingCanvas?this._renderingCanvas.width:100,h=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(Z/this._hardwareScalingLevel,h/this._hardwareScalingLevel,V)}setSize(Z,h){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(Z|=0,h|=0,!V&&this._renderingCanvas.width===Z&&this._renderingCanvas.height===h)return!1;if(this._renderingCanvas.width=Z,this._renderingCanvas.height=h,this.scenes){for(let Z=0;Z<this.scenes.length;Z++){const h=this.scenes[Z];for(let Z=0;Z<h.cameras.length;Z++){h.cameras[Z]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(Z,h,V,v,A,H,K,d,a,n,x){throw(0,D.d)("engine.rawTexture")}createRawCubeTexture(Z,h,V,v,A,H,K,d){throw(0,D.d)("engine.rawTexture")}createRawTexture3D(Z,h,V,v,A,H,K,d,a,n,x){throw(0,D.d)("engine.rawTexture")}createRawTexture2DArray(Z,h,V,v,A,H,K,d,a,n,x){throw(0,D.d)("engine.rawTexture")}_sharedInit(Z){this._renderingCanvas=Z}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const Z=navigator.userAgent;this.hostInformation.isMobile=-1!==Z.indexOf("Mobile")||-1!==Z.indexOf("Mac")&&(0,u.g)()&&"ontouchend"in document},this._checkForMobile(),(0,u.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(Z){return document.createElement("video")}_reportDrawCall(){var Z;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(Z=this._drawCalls)||void 0===Z||Z.addCount(h,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(Z,h){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(Z,h){return createImageBitmap(Z,h)}resizeImageBitmap(Z,h,V){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(Z){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(Z,h){if("undefined"===typeof document)return new OffscreenCanvas(Z,h);const V=document.createElement("canvas");return V.width=Z,V.height=h,V}createCanvas(Z,h){return X._CreateCanvas(Z,h)}static _FileToolsLoadImage(Z,h,V,v,A,H,K){throw(0,D.d)("FileTools")}_loadFile(Z,h,V,v,A,H){const K=(0,b.k)(Z,h,V,v,A,H);return this._activeRequests.push(K),K.onCompleteObservable.add((()=>{const Z=this._activeRequests.indexOf(K);-1!==Z&&this._activeRequests.splice(Z,1)})),K}static _FileToolsLoadFile(Z,h,V,v,A,H){if(b.c.loadFile)return b.c.loadFile(Z,h,V,v,A,H);throw(0,D.d)("FileTools")}dispose(){var Z;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(Z=this.releaseComputeEffects)||void 0===Z||Z.call(this),H.Effect.ResetCache();for(const V of this._activeRequests)V.abort();this._boundRenderFunction=null,this.jh.notifyObservers(this),this.jh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,u.m)()&&window.removeEventListener("resize",this._checkForMobile);const h=v.b.Instances.indexOf(this);h>=0&&v.b.Instances.splice(h,1),v.b.Instances.length||(v.b.OnEnginesDisposedObservable.notifyObservers(this),v.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(Z){throw(0,D.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(Z,h){for(let V=0;V<v.b.Instances.length;V++){const A=v.b.Instances[V];for(let V=0;V<A.scenes.length;V++)A.scenes[V].markAllMaterialsAsDirty(Z,h)}}}X._RenderPassIdCounter=0,X._RescalePostProcessFactory=null,X.CollisionsEpsilon=.001,X.QueueNewFrame=q},11599:(Z,h,V)=>{V.d(h,{b:()=>A});var v=V(11566);class A{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}A.Instances=[],A.OnEnginesDisposedObservable=new v.b,A._LastCreatedScene=null,A.UseFallbackTexture=!0,A.FallbackTexture=""},11664:(Z,h,V)=>{V.d(h,{c:()=>v});class v{static SetMatrixPrecision(Z){if(v.MatrixTrackPrecisionChange=!1,Z&&!v.MatrixUse64Bits&&v.MatrixTrackedMatrices)for(let h=0;h<v.MatrixTrackedMatrices.length;++h){const Z=v.MatrixTrackedMatrices[h],V=Z.Bh;Z.Bh=new Array(16);for(let h=0;h<16;++h)Z.Bh[h]=V[h]}v.MatrixUse64Bits=Z,v.MatrixCurrentType=v.MatrixUse64Bits?Array:Float32Array,v.MatrixTrackedMatrices=null}}v.MatrixUse64Bits=!1,v.MatrixTrackPrecisionChange=!0,v.MatrixCurrentType=Float32Array,v.MatrixTrackedMatrices=[]},11683:(Z,h,V)=>{V.d(h,{b:()=>K});var v=V(11580);const A=new Map;function H(Z,h){(function(Z){return A.delete(Z)})(Z)&&v.b.Warn(`Extension with the name '${Z}' already exists`),A.set(Z,h)}function K(Z,h){"image/ktx"!==h&&"image/ktx2"!==h||(Z=".ktx"),A.has(Z)||(Z.endsWith(".ies")&&H(".ies",(async()=>await V.e(15).then(V.bind(V,14237)).then((Z=>new Z._IESTextureLoader)))),Z.endsWith(".dds")&&H(".dds",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(19),V.e(18),V.e(28)]).then(V.bind(V,14241)).then((Z=>new Z._DDSTextureLoader)))),Z.endsWith(".basis")&&H(".basis",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(47)]).then(V.bind(V,14252)).then((Z=>new Z._BasisTextureLoader)))),Z.endsWith(".env")&&H(".env",(async()=>await Promise.all([V.e(14),V.e(17),V.e(13),V.e(19),V.e(18),V.e(23),V.e(21),V.e(45),V.e(48)]).then(V.bind(V,14256)).then((Z=>new Z._ENVTextureLoader)))),Z.endsWith(".hdr")&&H(".hdr",(async()=>await Promise.all([V.e(14),V.e(49)]).then(V.bind(V,14263)).then((Z=>new Z._HDRTextureLoader)))),(Z.endsWith(".ktx")||Z.endsWith(".ktx2"))&&(H(".ktx",(async()=>await V.e(30).then(V.bind(V,14267)).then((Z=>new Z._KTXTextureLoader)))),H(".ktx2",(async()=>await V.e(30).then(V.bind(V,14267)).then((Z=>new Z._KTXTextureLoader))))),Z.endsWith(".tga")&&H(".tga",(async()=>await V.e(50).then(V.bind(V,14271)).then((Z=>new Z._TGATextureLoader)))),Z.endsWith(".exr")&&H(".exr",(async()=>await V.e(16).then(V.bind(V,14275)).then((Z=>new Z._ExrTextureLoader)))));const v=A.get(Z);return v?Promise.resolve(v(h)):null}},11673:(Z,h,V)=>{V.d(h,{c:()=>K});var v,A=V(11566),H=V(11679);!function(Z){Z[Z.Unknown=0]="Unknown",Z[Z.Url=1]="Url",Z[Z.Temp=2]="Temp",Z[Z.Raw=3]="Raw",Z[Z.Dynamic=4]="Dynamic",Z[Z.RenderTarget=5]="RenderTarget",Z[Z.MultiRenderTarget=6]="MultiRenderTarget",Z[Z.Cube=7]="Cube",Z[Z.CubeRaw=8]="CubeRaw",Z[Z.CubePrefiltered=9]="CubePrefiltered",Z[Z.Raw3D=10]="Raw3D",Z[Z.Raw2DArray=11]="Raw2DArray",Z[Z.DepthStencil=12]="DepthStencil",Z[Z.CubeRawRGBD=13]="CubeRawRGBD",Z[Z.Depth=14]="Depth"}(v||(v={}));class K extends H.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(Z){this.generateMipMaps=Z}get uniqueId(){return this._uniqueId}_setUniqueId(Z){this._uniqueId=Z}getEngine(){return this._engine}get source(){return this._source}constructor(Z,h){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new A.b,this.onErrorObservable=new A.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=Z,this._source=h,this._uniqueId=K._Counter++,V||(this._hardwareTexture=Z._createHardwareTexture())}incrementReferences(){this._references++}updateSize(Z,h){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,Z,h,V),this.width=Z,this.height=h,this.depth=V,this.baseWidth=Z,this.baseHeight=h,this.baseDepth=V,this._size=Z*h*V}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const Z=this.onRebuildCallback(this),h=h=>{h._swapAndDie(this,!1),this.isReady=Z.isReady};return void(Z.isAsync?Z.proxy.then(h):h(Z.proxy))}let Z;switch(this.source){case 2:case 12:case 14:break;case 1:return void(Z=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(Z=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:Z=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),Z._swapAndDie(this,!1),this.isReady=!0;break;case 10:Z=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 11:Z=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 4:Z=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),Z._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(Z=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:Z=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),Z._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return Z=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(Z=>{Z&&Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(Z._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(Z){var h;let V=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(h=this._hardwareTexture)||void 0===h||h.setUsage(Z._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),Z._hardwareTexture=this._hardwareTexture,V&&(Z._isRGBD=this._isRGBD),this._lodTextureHigh&&(Z._lodTextureHigh&&Z._lodTextureHigh.dispose(),Z._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(Z._lodTextureMid&&Z._lodTextureMid.dispose(),Z._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(Z._lodTextureLow&&Z._lodTextureLow.dispose(),Z._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(Z._irradianceTexture&&Z._irradianceTexture.dispose(),Z._irradianceTexture=this._irradianceTexture);const v=this._engine.getLoadedTexturesCache();let A=v.indexOf(this);-1!==A&&v.splice(A,1),A=v.indexOf(Z),-1===A&&v.push(Z)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}K._Counter=0},11679:(Z,h,V)=>{V.d(h,{d:()=>v});class v{get wrapU(){return this._cachedWrapU}set wrapU(Z){this._cachedWrapU=Z}get wrapV(){return this._cachedWrapV}set wrapV(Z){this._cachedWrapV=Z}get wrapR(){return this._cachedWrapR}set wrapR(Z){this._cachedWrapR=Z}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(Z){this._cachedAnisotropicFilteringLevel=Z}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(Z){this._comparisonFunction=Z}get useMipMaps(){return this._useMipMaps}set useMipMaps(Z){this._useMipMaps=Z}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=Z,this._cachedWrapV=h,this._cachedWrapR=V,this._cachedAnisotropicFilteringLevel=v,this.samplingMode=A,this._comparisonFunction=H,this}compareSampler(Z){return this._cachedWrapU===Z._cachedWrapU&&this._cachedWrapV===Z._cachedWrapV&&this._cachedWrapR===Z._cachedWrapR&&this._cachedAnisotropicFilteringLevel===Z._cachedAnisotropicFilteringLevel&&this.samplingMode===Z.samplingMode&&this._comparisonFunction===Z._comparisonFunction&&this._useMipMaps===Z._useMipMaps}}},11582:(Z,h,V)=>{V.d(h,{b:()=>H});var v=V(11580);const A=(Z,h,V)=>Z?Z.getClassName&&"Mesh"===Z.getClassName()?null:!Z.getClassName||"SubMesh"!==Z.getClassName()&&"PhysicsBody"!==Z.getClassName()?Z.clone?Z.clone():Array.isArray(Z)?Z.slice():V&&"object"===typeof Z?{...Z}:null:Z.clone(h):null;class H{static DeepCopy(Z,h,V,H){let K=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const d=function(Z){const h=[];do{const V=Object.getOwnPropertyNames(Z);for(const Z of V)-1===h.indexOf(Z)&&h.push(Z)}while(Z=Object.getPrototypeOf(Z));return h}(Z);for(const n of d){if("_"===n[0]&&(!H||-1===H.indexOf(n)))continue;if(n.endsWith("Observable"))continue;if(V&&-1!==V.indexOf(n))continue;const d=Z[n],x=typeof d;if("function"!==x)try{if("object"===x)if(d instanceof Uint8Array)h[n]=Uint8Array.from(d);else if(d instanceof Array){if(h[n]=[],d.length>0)if("object"==typeof d[0])for(let Z=0;Z<d.length;Z++){const V=A(d[Z],h,K);-1===h[n].indexOf(V)&&h[n].push(V)}else h[n]=d.slice(0)}else h[n]=A(d,h,K);else h[n]=d}catch(a){v.b.Warn(a.message)}}}}},11607:(Z,h,V)=>{V.d(h,{e:()=>v,g:()=>A,j:()=>H});class v extends Error{}v._setPrototypeOf=Object.setPrototypeOf||((Z,h)=>(Z.__proto__=h,Z));const A={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class H extends v{constructor(Z,h,V){super(Z),this.errorCode=h,this.innerError=V,this.name="RuntimeError",v._setPrototypeOf(this,H.prototype)}}},11602:(Z,h,V)=>{V.d(h,{d:()=>W,g:()=>X,j:()=>S,k:()=>L,s:()=>l,o:()=>b,u:()=>P,y:()=>C,z:()=>B,A:()=>E});var v=V(11596),A=V(11573),H=V(11566);class K{}K.FilesToLoad={};var d=V(11607),a=V(11612),n=V(11615),x=V(11599),N=V(11580),D=V(11633),k=V(11624),u=V(11635);const F=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class b extends d.j{constructor(Z,h){super(Z,d.g.LoadFileError),this.name="LoadFileError",d.e._setPrototypeOf(this,b.prototype),h instanceof v.e?this.request=h:this.file=h}}class o extends d.j{constructor(Z,h){super(Z,d.g.RequestFileError),this.request=h,this.name="RequestFileError",d.e._setPrototypeOf(this,o.prototype)}}class q extends d.j{constructor(Z,h){super(Z,d.g.ReadFileError),this.file=h,this.name="ReadFileError",d.e._setPrototypeOf(this,q.prototype)}}const X={DefaultRetryStrategy:class{static ExponentialBackoff(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(V,v,A)=>0!==v.status||A>=Z||-1!==V.indexOf("file:")?-1:Math.pow(2,A)*h}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:Z=>Z,ScriptBaseUrl:"",ScriptPreprocessUrl:Z=>Z,CleanUrl:Z=>Z=Z.replace(/#/gm,"%23")},E=(Z,h)=>{if((!Z||0!==Z.indexOf("data:"))&&X.CorsBehavior)if("string"===typeof X.CorsBehavior||X.CorsBehavior instanceof String)h.crossOrigin=X.CorsBehavior;else{const V=X.CorsBehavior(Z);V&&(h.crossOrigin=V)}},j={getRequiredSize:null},P=function(Z,h,V,A){let H,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",n=arguments.length>5?arguments[5]:void 0,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:x.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===N||void 0===N||!N._features.forceBitmapOverHTMLImageElement))return V("LoadImage is only supported in web or BabylonNative environments."),null;let D=!1;Z instanceof ArrayBuffer||ArrayBuffer.isView(Z)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(H=URL.createObjectURL(new Blob([Z],{type:d})),D=!0):H=`data:${d};base64,`+(0,a.l)(Z):Z instanceof Blob?(H=URL.createObjectURL(Z),D=!0):(H=X.CleanUrl(Z),H=X.PreprocessUrl(H));const k=h=>{if(V){const v=H||Z.toString();V(`Error while trying to load image: ${0===v.indexOf("http")||v.length<=128?v:v.slice(0,128)+"..."}`,h)}};if(null!==N&&void 0!==N&&N._features.forceBitmapOverHTMLImageElement)return l(H,(v=>{N.createImageBitmap(new Blob([v],{type:d}),{premultiplyAlpha:"none",...n}).then((Z=>{h(Z),D&&URL.revokeObjectURL(H)})).catch((h=>{V&&V("Error while trying to load image: "+Z,h)}))}),void 0,A||void 0,!0,((Z,h)=>{k(h)})),null;const u=new Image;if(j.getRequiredSize){const h=j.getRequiredSize(Z);h.width&&(u.width=h.width),h.height&&(u.height=h.height)}E(H,u);const F=[],b=()=>{for(const Z of F)Z.target.removeEventListener(Z.name,Z.handler);F.length=0};F.push({target:u,name:"load",handler:()=>{b(),h(u),D&&u.src&&URL.revokeObjectURL(u.src)}}),F.push({target:u,name:"error",handler:Z=>{b(),k(Z),D&&u.src&&URL.revokeObjectURL(u.src)}}),F.push({target:document,name:"securitypolicyviolation",handler:Z=>{if(Z.blockedURI!==u.src||"Sh"===Z.disposition)return;b();const h=new Error(`CSP violation of policy ${Z.effectiveDirective} ${Z.blockedURI}. Current policy is ${Z.originalPolicy}`);x.b.UseFallbackTexture=!1,k(h),D&&u.src&&URL.revokeObjectURL(u.src),u.src=""}}),(()=>{for(const Z of F)Z.target.addEventListener(Z.name,Z.handler)})();const o="blob:"===H.substring(0,5),q="data:"===H.substring(0,5),P=()=>{o||q||!v.e.IsCustomRequestAvailable?u.src=H:l(H,((Z,h,V)=>{const v=new Blob([Z],{type:!d&&V?V:d}),A=URL.createObjectURL(v);D=!0,u.src=A}),void 0,A||void 0,!0,((Z,h)=>{k(h)}))},C=()=>{A&&A.loadImage(H,u)};if(!o&&!q&&A&&A.enableTexturesOffline)A.open(C,P);else{if(-1!==H.indexOf("file:")){const Z=decodeURIComponent(H.substring(5).toLowerCase());if(K.FilesToLoad[Z]&&"undefined"!==typeof URL){try{let h;try{h=URL.createObjectURL(K.FilesToLoad[Z])}catch(B){h=URL.createObjectURL(K.FilesToLoad[Z])}u.src=h,D=!0}catch(S){u.src=""}return u}}P()}return u},C=(Z,h,V,v,A)=>{const K=new FileReader,d={onCompleteObservable:new H.b,abort:()=>K.abort()};return K.onloadend=()=>d.onCompleteObservable.notifyObservers(d),A&&(K.onerror=()=>{A(new q(`Unable to read ${Z.name}`,Z))}),K.onload=Z=>{h(Z.target.result)},V&&(K.onprogress=V),v?K.readAsArrayBuffer(Z):K.readAsText(Z),d},l=(Z,h,V,v,A,a,n)=>{if(Z.name)return C(Z,h,V,A,a?Z=>{a(void 0,Z)}:void 0);const x=Z;if(-1!==x.indexOf("file:")){let Z=decodeURIComponent(x.substring(5).toLowerCase());0===Z.indexOf("./")&&(Z=Z.substring(2));const v=K.FilesToLoad[Z];if(v)return C(v,h,V,A,a?Z=>a(void 0,new b(Z.message,Z.file)):void 0)}const{match:k,type:u}=y(x);if(k){const Z={onCompleteObservable:new H.b,abort:()=>()=>{}};try{const Z=A?W(x):z(x);h(Z,void 0,u)}catch(d){a?a(void 0,d):N.b.Error(d.message||"Failed to parse the Data URL")}return D.e.SetImmediate((()=>{Z.onCompleteObservable.notifyObservers(Z)})),Z}return B(x,((Z,V)=>{h(Z,null===V||void 0===V?void 0:V.responseURL,null===V||void 0===V?void 0:V.getResponseHeader("content-type"))}),V,v,A,a?Z=>{a(Z.request,new b(Z.message,Z.request))}:void 0,n)},B=(Z,h,V,K,d,a,n)=>{Z=X.CleanUrl(Z),Z=X.PreprocessUrl(Z);const x=X.BaseUrl+Z;let D=!1;const k={onCompleteObservable:new H.b,abort:()=>D=!0},u=()=>{let Z,H=new v.e,K=null;const u=()=>{H&&(V&&H.removeEventListener("progress",V),Z&&H.removeEventListener("readystatechange",Z),H.removeEventListener("loadend",F))};let F=()=>{u(),k.onCompleteObservable.notifyObservers(k),k.onCompleteObservable.clear(),V=void 0,Z=null,F=null,a=void 0,n=void 0,h=void 0};k.abort=()=>{D=!0,F&&F(),H&&H.readyState!==(XMLHttpRequest.DONE||4)&&H.abort(),null!==K&&(clearTimeout(K),K=null),H=null};const b=Z=>{const h=Z.message||"Unknown error";a&&H?a(new o(h,H)):N.b.Error(h)},q=N=>{if(H){if(H.open("GET",x),n)try{n(H)}catch(k){return void b(k)}d&&(H.responseType="arraybuffer"),V&&H.addEventListener("progress",V),F&&H.addEventListener("loadend",F),Z=()=>{if(!D&&H&&H.readyState===(XMLHttpRequest.DONE||4)){if(Z&&H.removeEventListener("readystatechange",Z),H.status>=200&&H.status<300||0===H.status&&(!(0,A.m)()||r())){const Z=d?H.response:H.responseText;if(null!==Z){try{h&&h(Z,H)}catch(k){b(k)}return}}const V=X.DefaultRetryStrategy;if(V){const Z=V(x,H,N);if(-1!==Z)return u(),H=new v.e,void(K=setTimeout((()=>q(N+1)),Z))}const n=new o("Error status: "+H.status+" "+H.statusText+" - Unable to load "+x,H);a&&a(n)}},H.addEventListener("readystatechange",Z),H.send()}};q(0)};if(K&&K.enableSceneOffline){const v=Z=>{Z&&Z.status>400?a&&a(Z):u()},A=()=>{K&&K.loadFile(X.BaseUrl+Z,(Z=>{!D&&h&&h(Z),k.onCompleteObservable.notifyObservers(k)}),V?Z=>{!D&&V&&V(Z)}:void 0,v,d)};K.open(A,v)}else u();return k},S=Z=>{const{match:h,type:V}=y(Z);if(h)return V||void 0;const v=Z.lastIndexOf(".");switch(Z.substring(v+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Lh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,L=Z=>F.test(Z),y=Z=>{const h=F.exec(Z);if(null===h||0===h.length)return{match:!1,type:""};return{match:!0,type:h[0].replace("data:","").replace("base64,","")}};function W(Z){return(0,a.b)(Z.split(",")[1])}const z=Z=>(0,a.e)(Z.split(",")[1]);let m;u.d._FileToolsLoadImage=P,k.c.loadFile=l,n.o.loadFile=l;((Z,h,V,v,A,H,K,d,a,n)=>{m={DecodeBase64UrlToBinary:Z,DecodeBase64UrlToString:h,DefaultRetryStrategy:V.DefaultRetryStrategy,BaseUrl:V.BaseUrl,CorsBehavior:V.CorsBehavior,PreprocessUrl:V.PreprocessUrl,IsBase64DataUrl:v,IsFileURL:A,LoadFile:H,LoadImage:K,ReadFile:d,RequestFile:a,SetCorsBehavior:n},Object.defineProperty(m,"DefaultRetryStrategy",{get:function(){return V.DefaultRetryStrategy},set:function(Z){V.DefaultRetryStrategy=Z}}),Object.defineProperty(m,"BaseUrl",{get:function(){return V.BaseUrl},set:function(Z){V.BaseUrl=Z}}),Object.defineProperty(m,"PreprocessUrl",{get:function(){return V.PreprocessUrl},set:function(Z){V.PreprocessUrl=Z}}),Object.defineProperty(m,"CorsBehavior",{get:function(){return V.CorsBehavior},set:function(Z){V.CorsBehavior=Z}})})(W,z,X,L,r,l,P,C,B,E)},11700:(Z,h,V)=>{function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Z=>{const h=16*Math.random()|0;return("x"===Z?h:3&h|8).toString(16)}))}V.d(h,{e:()=>v})},11687:(Z,h,V)=>{V.d(h,{e:()=>H});var v=V(11580),A=V(11691);class H{static Instantiate(Z){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[Z])return this.RegisteredExternalClasses[Z];const h=(0,A.e)(Z);if(h)return h;v.b.Warn(Z+" not found, you may have missed an import.");const V=Z.split(".");let H=window||this;for(let v=0,A=V.length;v<A;v++)H=H[V[v]];return"function"!==typeof H?null:H}}H.RegisteredExternalClasses={}},11588:(Z,h,V)=>{V.d(h,{e:()=>A});var v=V(11573);class A{static get Now(){return(0,v.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11612:(Z,h,V)=>{V.d(h,{b:()=>K,e:()=>H,i:()=>v,l:()=>A});const v=Z=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(Z);let h="";for(let V=0;V<Z.byteLength;V++)h+=String.fromCharCode(Z[V]);return h},A=Z=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let V,v,A,H,K,d,a,n="",x=0;const N=ArrayBuffer.isView(Z)?new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength):new Uint8Array(Z);for(;x<N.length;)V=N[x++],v=x<N.length?N[x++]:Number.NaN,A=x<N.length?N[x++]:Number.NaN,H=V>>2,K=(3&V)<<4|v>>4,d=(15&v)<<2|A>>6,a=63&A,isNaN(v)?d=a=64:isNaN(A)&&(a=64),n+=h.charAt(H)+h.charAt(K)+h.charAt(d)+h.charAt(a);return n},H=Z=>atob(Z),K=Z=>{const h=H(Z),V=h.length,v=new Uint8Array(new ArrayBuffer(V));for(let A=0;A<V;A++)v[A]=h.charCodeAt(A);return v.buffer}},11709:(Z,h,V)=>{function v(Z){let h=1;do{h*=2}while(h<Z);return h===Z}function A(Z,h,V){return Z*(1-V)+h*V}function H(Z){const h=K(Z),V=d(Z);return h-Z>Z-V?V:h}function K(Z){return Z--,Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,Z|=Z>>16,++Z}function d(Z){return Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,(Z|=Z>>16)-(Z>>1)}function a(Z,h){let V;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:V=d(Z);break;case 2:V=H(Z);break;default:V=K(Z)}return Math.min(V,h)}V.d(h,{d:()=>d,e:()=>a,g:()=>v,j:()=>A,n:()=>H})},11564:(Z,h,V)=>{V.r(h),V.d(h,{AsyncLoop:()=>q,Tools:()=>b,className:()=>o});var v=V(11566),A=V(11573),H=V(11580),K=V(11582),d=V(11588),a=V(11594),n=V(11596),x=V(11599),N=V(11602),D=V(11633),k=V(11687),u=V(11700),F=V(11709);class b{static get BaseUrl(){return N.g.BaseUrl}static set BaseUrl(Z){N.g.BaseUrl=Z}static get CleanUrl(){return N.g.CleanUrl}static set CleanUrl(Z){N.g.CleanUrl=Z}static IsAbsoluteUrl(Z){return 0===Z.indexOf("//")||-1!==Z.indexOf("://")&&(-1!==Z.indexOf(".")&&(-1!==Z.indexOf("/")&&(!(Z.indexOf(":")>Z.indexOf("/"))&&(Z.indexOf("://")<Z.indexOf(".")||(0===Z.indexOf("data:")||0===Z.indexOf("blob:"))))))}static set ScriptBaseUrl(Z){N.g.ScriptBaseUrl=Z}static get ScriptBaseUrl(){return N.g.ScriptBaseUrl}static set CDNBaseUrl(Z){b.ScriptBaseUrl=Z,b.AssetBaseUrl=Z}static set ScriptPreprocessUrl(Z){N.g.ScriptPreprocessUrl=Z}static get ScriptPreprocessUrl(){return N.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return N.g.DefaultRetryStrategy}static set DefaultRetryStrategy(Z){N.g.DefaultRetryStrategy=Z}static get CorsBehavior(){return N.g.CorsBehavior}static set CorsBehavior(Z){N.g.CorsBehavior=Z}static get UseFallbackTexture(){return x.b.UseFallbackTexture}static set UseFallbackTexture(Z){x.b.UseFallbackTexture=Z}static get RegisteredExternalClasses(){return k.e.RegisteredExternalClasses}static set RegisteredExternalClasses(Z){k.e.RegisteredExternalClasses=Z}static get fallbackTexture(){return x.b.FallbackTexture}static set fallbackTexture(Z){x.b.FallbackTexture=Z}static FetchToRef(Z,h,V,v,A,H){const K=4*((Math.abs(Z)*V%V|0)+(Math.abs(h)*v%v|0)*V);H.r=A[K]/255,H.g=A[K+1]/255,H.b=A[K+2]/255,H.a=A[K+3]/255}static Mix(Z,h,V){return 0}static Instantiate(Z){return k.e.Instantiate(Z)}static SetImmediate(Z){D.e.SetImmediate(Z)}static IsExponentOfTwo(Z){return!0}static FloatRound(Z){return Math.fround(Z)}static GetFilename(Z){const h=Z.lastIndexOf("/");return h<0?Z:Z.substring(h+1)}static GetFolderPath(Z){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const V=Z.lastIndexOf("/");return V<0?h?Z:"":Z.substring(0,V+1)}static ToDegrees(Z){return 180*Z/Math.PI}static ToRadians(Z){return Z*Math.PI/180}static SmoothAngleChange(Z,h){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const v=this.ToRadians(Z),A=this.ToRadians(h);return this.ToDegrees(Math.atan2((1-V)*Math.sin(A)+V*Math.sin(v),(1-V)*Math.cos(A)+V*Math.cos(v)))}static MakeArray(Z,h){return!0===h||void 0!==Z&&null!=Z?Array.isArray(Z)?Z:[Z]:null}static GetPointerPrefix(Z){return(0,A.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(Z,h){(0,N.A)(Z,h)}static SetReferrerPolicyBehavior(Z,h){h.referrerPolicy=Z}static get PreprocessUrl(){return N.g.PreprocessUrl}static set PreprocessUrl(Z){N.g.PreprocessUrl=Z}static LoadImage(Z,h,V,v,A,H){return(0,N.u)(Z,h,V,v,A,H)}static LoadFile(Z,h,V,v,A,H){return(0,N.s)(Z,h,V,v,A,H)}static async LoadFileAsync(Z){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((V,v)=>{(0,N.s)(Z,(Z=>{V(Z)}),void 0,void 0,h,((Z,h)=>{v(h)}))}))}static GetAssetUrl(Z){if(!Z)return"";if(b.AssetBaseUrl&&Z.startsWith(b._DefaultAssetsUrl)){const h="/"===b.AssetBaseUrl[b.AssetBaseUrl.length-1]?b.AssetBaseUrl.substring(0,b.AssetBaseUrl.length-1):b.AssetBaseUrl;return Z.replace(b._DefaultAssetsUrl,h)}return Z}static GetBabylonScriptURL(Z,h){if(!Z)return"";if(b.ScriptBaseUrl&&Z.startsWith(b._DefaultCdnUrl)){const h="/"===b.ScriptBaseUrl[b.ScriptBaseUrl.length-1]?b.ScriptBaseUrl.substring(0,b.ScriptBaseUrl.length-1):b.ScriptBaseUrl;Z=Z.replace(b._DefaultCdnUrl,h)}return Z=b.ScriptPreprocessUrl(Z),h&&(Z=b.GetAbsoluteUrl(Z)),Z}static LoadBabylonScript(Z,h,V,v){Z=b.GetBabylonScriptURL(Z),b.LoadScript(Z,h,V)}static async LoadBabylonScriptAsync(Z){return Z=b.GetBabylonScriptURL(Z),await b.LoadScriptAsync(Z)}static LoadScript(Z,h,V,v){let H=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(Z),h&&h()}catch(a){null===V||void 0===V||V(`Unable to load script '${Z}' in worker`,a)}return}if(!(0,A.m)())return void(null===V||void 0===V||V(`Cannot load script '${Z}' outside of a window or a worker`));const K=document.getElementsByTagName("head")[0],d=document.createElement("script");H?(d.setAttribute("type","module"),d.innerText=Z):(d.setAttribute("type","text/javascript"),d.setAttribute("src",Z)),v&&(d.id=v),d.onload=()=>{h&&h()},d.onerror=h=>{V&&V(`Unable to load script '${Z}'`,h)},K.appendChild(d)}static async LoadScriptAsync(Z,h){return await new Promise(((V,v)=>{this.LoadScript(Z,(()=>{V()}),((Z,h)=>{v(h||new Error(Z))}),h)}))}static ReadFileAsDataURL(Z,h,V){const A=new FileReader,H={onCompleteObservable:new v.b,abort:()=>A.abort()};return A.onloadend=()=>{H.onCompleteObservable.notifyObservers(H)},A.onload=Z=>{h(Z.target.result)},A.onprogress=V,A.readAsDataURL(Z),H}static ReadFile(Z,h,V,v,A){return(0,N.y)(Z,h,V,v,A)}static FileAsURL(Z){const h=new Blob([Z]);return window.URL.createObjectURL(h)}static Format(Z){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Z.toFixed(h)}static DeepCopy(Z,h,V,v){K.b.DeepCopy(Z,h,V,v)}static IsEmpty(Z){for(const h in Z)if(Object.prototype.hasOwnProperty.call(Z,h))return!1;return!0}static RegisterTopRootEvents(Z,h){for(let v=0;v<h.length;v++){const A=h[v];Z.addEventListener(A.name,A.handler,!1);try{window.parent&&window.parent.addEventListener(A.name,A.handler,!1)}catch(V){}}}static UnregisterTopRootEvents(Z,h){for(let v=0;v<h.length;v++){const A=h[v];Z.removeEventListener(A.name,A.handler);try{Z.parent&&Z.parent.removeEventListener(A.name,A.handler)}catch(V){}}}static async DumpFramebuffer(Z,h,V,v){throw(0,a.d)("DumpTools")}static DumpData(Z,h,V,v){throw(0,a.d)("DumpTools")}static async DumpDataAsync(Z,h,V){throw(0,a.d)("DumpTools")}static _IsOffScreenCanvas(Z){return void 0!==Z.convertToBlob}static ToBlob(Z,h){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",v=arguments.length>3?arguments[3]:void 0;b._IsOffScreenCanvas(Z)||Z.toBlob||(Z.toBlob=function(Z,h,V){setTimeout((()=>{const v=atob(this.toDataURL(h,V).split(",")[1]),A=v.length,H=new Uint8Array(A);for(let Z=0;Z<A;Z++)H[Z]=v.charCodeAt(Z);Z(new Blob([H]))}))}),b._IsOffScreenCanvas(Z)?Z.convertToBlob({type:V,quality:v}).then((Z=>h(Z))):Z.toBlob((function(Z){h(Z)}),V,v)}static DownloadBlob(Z,h){if("download"in document.createElement("a")){if(!h){const Z=new Date;h="screenshot_"+((Z.getFullYear()+"-"+(Z.getMonth()+1)).slice(2)+"-"+Z.getDate()+"_"+Z.getHours()+"-"+("0"+Z.getMinutes()).slice(-2))+".png"}b.Download(Z,h)}else if(Z&&"undefined"!==typeof URL){const h=URL.createObjectURL(Z),V=window.open("");if(!V)return;const v=V.document.createElement("img");v.onload=function(){URL.revokeObjectURL(h)},v.src=h,V.document.body.appendChild(v)}}static EncodeScreenshotCanvasData(Z,h){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",v=arguments.length>3?arguments[3]:void 0,A=arguments.length>4?arguments[4]:void 0;if("string"!==typeof v&&h){if(h){if(b._IsOffScreenCanvas(Z))return void Z.convertToBlob({type:V,quality:A}).then((Z=>{const V=new FileReader;V.readAsDataURL(Z),V.onloadend=()=>{const Z=V.result;h(Z)}}));const v=Z.toDataURL(V,A);h(v)}}else this.ToBlob(Z,(function(Z){Z&&b.DownloadBlob(Z,v),h&&h("")}),V,A)}static Download(Z,h){if("undefined"===typeof URL)return;const V=window.URL.createObjectURL(Z),v=document.createElement("a");document.body.appendChild(v),v.style.display="none",v.href=V,v.download=h,v.addEventListener("click",(()=>{v.parentElement&&v.parentElement.removeChild(v)})),v.click(),window.URL.revokeObjectURL(V)}static BackCompatCameraNoPreventDefault(Z){return"boolean"===typeof Z[0]?Z[0]:"boolean"===typeof Z[1]&&Z[1]}static CreateScreenshot(Z,h,V,v){throw(0,a.d)("ScreenshotTools")}static async CreateScreenshotAsync(Z,h,V){throw(0,a.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(Z,h,V,v){throw(0,a.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(Z,h,V){throw(0,a.d)("ScreenshotTools")}static RandomId(){return(0,u.e)()}static IsBase64(Z){return(0,N.k)(Z)}static DecodeBase64(Z){return(0,N.d)(Z)}static get errorsCount(){return H.b.errorsCount}static Log(Z){H.b.Log(Z)}static Warn(Z){H.b.Warn(Z)}static Error(Z){H.b.Error(Z)}static get LogCache(){return H.b.LogCache}static ClearLogCache(){H.b.ClearLogCache()}static set LogLevels(Z){H.b.LogLevels=Z}static set PerformanceLogLevel(Z){return(Z&b.PerformanceUserMarkLogLevel)===b.PerformanceUserMarkLogLevel?(b.StartPerformanceCounter=b._StartUserMark,void(b.EndPerformanceCounter=b._EndUserMark)):(Z&b.PerformanceConsoleLogLevel)===b.PerformanceConsoleLogLevel?(b.StartPerformanceCounter=b._StartPerformanceConsole,void(b.EndPerformanceCounter=b._EndPerformanceConsole)):(b.StartPerformanceCounter=b._StartPerformanceCounterDisabled,void(b.EndPerformanceCounter=b._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(Z,h){}static _EndPerformanceCounterDisabled(Z,h){}static _StartUserMark(Z){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!b._Performance){if(!(0,A.m)())return;b._Performance=window.performance}h&&b._Performance.mark&&b._Performance.mark(Z+"-Begin")}static _EndUserMark(Z){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&b._Performance.mark&&(b._Performance.mark(Z+"-End"),b._Performance.measure(Z,Z+"-Begin",Z+"-End"))}static _StartPerformanceConsole(Z){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(b._StartUserMark(Z,h),console.time&&console.time(Z))}static _EndPerformanceConsole(Z){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(b._EndUserMark(Z,h),console.timeEnd(Z))}static get Now(){return d.e.Now}static GetClassName(Z){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=null;if(!h&&Z.getClassName)V=Z.getClassName();else{if(Z instanceof Object){V=(h?Z:Object.getPrototypeOf(Z)).constructor.__bjsclassName__}V||(V=typeof Z)}return V}static First(Z,h){for(const V of Z)if(h(V))return V;return null}static getFullClassName(Z){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],V=null,v=null;if(!h&&Z.getClassName)V=Z.getClassName();else{if(Z instanceof Object){const A=h?Z:Object.getPrototypeOf(Z);V=A.constructor.__bjsclassName__,v=A.constructor.__bjsmoduleName__}V||(V=typeof Z)}return V?(null!=v?v+".":"")+V:null}static async DelayAsync(Z){await new Promise((h=>{setTimeout((()=>{h()}),Z)}))}static IsSafari(){return!!(0,A.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function o(Z,h){return V=>{V.__bjsclassName__=Z,V.__bjsmoduleName__=null!=h?h:null}}b.AssetBaseUrl="",b.UseCustomRequestHeaders=!1,b.CustomRequestHeaders=n.e.CustomRequestHeaders,b.GetDOMTextContent=A.d,b._DefaultCdnUrl="https://cdn.babylonjs.com",b._DefaultAssetsUrl="https://assets.babylonjs.com/core",b.GetAbsoluteUrl="object"===typeof document?Z=>{const h=document.createElement("a");return h.href=Z,h.href}:"function"===typeof URL&&"object"===typeof location?Z=>new URL(Z,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},b.NoneLogLevel=H.b.NoneLogLevel,b.MessageLogLevel=H.b.MessageLogLevel,b.WarningLogLevel=H.b.WarningLogLevel,b.ErrorLogLevel=H.b.ErrorLogLevel,b.AllLogLevel=H.b.AllLogLevel,b.IsWindowObjectExist=A.m,b.PerformanceNoneLogLevel=0,b.PerformanceUserMarkLogLevel=1,b.PerformanceConsoleLogLevel=2,b.StartPerformanceCounter=b._StartPerformanceCounterDisabled,b.EndPerformanceCounter=b._EndPerformanceCounterDisabled;class q{constructor(Z,h,V){let v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=Z,this.index=v-1,this._done=!1,this._fn=h,this._successCallback=V}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(Z,h,V){const v=new q(Z,h,V,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return v.executeNext(),v}static SyncAsyncForLoop(Z,h,V,v,A){let H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return q.Run(Math.ceil(Z/h),(v=>{A&&A()?v.breakLoop():setTimeout((()=>{for(let H=0;H<h;++H){const K=v.index*h+H;if(K>=Z)break;if(V(K),A&&A()){v.breakLoop();break}}v.executeNext()}),H)}),v)}}b.Mix=F.j,b.IsExponentOfTwo=F.g,x.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11691:(Z,h,V)=>{V.d(h,{e:()=>H,i:()=>A});const v={};function A(Z,h){v[Z]=h}function H(Z){return v[Z]}},11596:(Z,h,V)=>{V.d(h,{e:()=>v});class v{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(v.CustomRequestHeaders).length>0||v.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const Z in v.CustomRequestHeaders){const h=v.CustomRequestHeaders[Z];h&&this._xhr.setRequestHeader(Z,h)}}_shouldSkipRequestModifications(Z){return v.SkipRequestModificationForBabylonCDN&&(Z.includes("preview.babylonjs.com")||Z.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(Z){this._xhr.onprogress=Z}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(Z){this._xhr.responseType=Z}get timeout(){return this._xhr.timeout}set timeout(Z){this._xhr.timeout=Z}addEventListener(Z,h,V){this._xhr.addEventListener(Z,h,V)}removeEventListener(Z,h,V){this._xhr.removeEventListener(Z,h,V)}abort(){this._xhr.abort()}send(Z){v.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(Z)}open(Z,h){for(const V of v.CustomRequestModifiers){if(this._shouldSkipRequestModifications(h))return;h=V(this._xhr,h)||h}h=(h=h.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=h,this._xhr.open(Z,h,!0)}setRequestHeader(Z,h){this._xhr.setRequestHeader(Z,h)}getResponseHeader(Z){return this._xhr.getResponseHeader(Z)}}v.CustomRequestHeaders={},v.CustomRequestModifiers=new Array,v.SkipRequestModificationForBabylonCDN=!0}}]);