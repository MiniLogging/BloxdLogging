"use strict";(self.zjjkhojdx1=self.zjjkhojdx1||[]).push([[8],{11151:(k,h,o)=>{o.d(h,{e:()=>T});var x=o(11120),I=o(11098),q=o(11153),Y=o(11173),J=o(11106);class G{constructor(){let k=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,k&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(k){this._zOffset!==k&&(this._zOffset=k,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(k){this._zOffsetUnits!==k&&(this._zOffsetUnits=k,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(k){this._cullFace!==k&&(this._cullFace=k,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(k){this._cull!==k&&(this._cull=k,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(k){this._depthFunc!==k&&(this._depthFunc=k,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(k){this._depthMask!==k&&(this._depthMask=k,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(k){this._depthTest!==k&&(this._depthTest=k,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(k){this._frontFace!==k&&(this._frontFace=k,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(k){this.isDirty&&(this._isCullDirty&&(this.cull?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(k.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(k.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(k.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(k.enable(k.POLYGON_OFFSET_FILL),k.polygonOffset(this.zOffset,this.zOffsetUnits)):k.disable(k.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(k.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class l{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(k){this._func!==k&&(this._func=k,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(k){this._funcRef!==k&&(this._funcRef=k,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(k){this._funcMask!==k&&(this._funcMask=k,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(k){this._opStencilFail!==k&&(this._opStencilFail=k,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(k){this._opDepthFail!==k&&(this._opDepthFail=k,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(k){this._opStencilDepthPass!==k&&(this._opStencilDepthPass=k,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(k){this._mask!==k&&(this._mask=k,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(k){this._enabled!==k&&(this._enabled=k,this._isStencilTestDirty=!0)}constructor(){let k=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,k&&this.reset()}reset(){var k;this.stencilMaterial=void 0,null===(k=this.stencilGlobal)||void 0===k||k.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(k){var h;if(!k)return;const o=!this.useStencilGlobalOnly&&!(null===(h=this.stencilMaterial)||void 0===h||!h.enabled);this.enabled=o?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=o?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=o?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=o?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=o?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=o?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=o?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=o?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(k.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(k.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(k.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class A{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=A.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=A.KEEP,this.opDepthFail=A.KEEP,this.opStencilDepthPass=A.REPLACE}get stencilFunc(){return this.func}set stencilFunc(k){this.func=k}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(k){this.funcRef=k}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(k){this.funcMask=k}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(k){this.opStencilFail=k}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(k){this.opDepthFail=k}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(k){this.opStencilDepthPass=k}get stencilMask(){return this.mask}set stencilMask(k){this.mask=k}get stencilTest(){return this.enabled}set stencilTest(k){this.enabled=k}}A.ALWAYS=519,A.KEEP=7680,A.REPLACE=7681;class K{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(k){this._alphaBlend!==k&&(this._alphaBlend=k,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(k,h,o,x){this._blendConstants[0]===k&&this._blendConstants[1]===h&&this._blendConstants[2]===o&&this._blendConstants[3]===x||(this._blendConstants[0]=k,this._blendConstants[1]=h,this._blendConstants[2]=o,this._blendConstants[3]=x,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(k,h,o,x){this._blendFunctionParameters[0]===k&&this._blendFunctionParameters[1]===h&&this._blendFunctionParameters[2]===o&&this._blendFunctionParameters[3]===x||(this._blendFunctionParameters[0]=k,this._blendFunctionParameters[1]=h,this._blendFunctionParameters[2]=o,this._blendFunctionParameters[3]=x,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(k,h){this._blendEquationParameters[0]===k&&this._blendEquationParameters[1]===h||(this._blendEquationParameters[0]=k,this._blendEquationParameters[1]=h,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(k){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?k.enable(k.BLEND):k.disable(k.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(k.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(k.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(k.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var a=o(11108),N=o(11180),X=o(11090),c=o(11082),W=o(11143),f=o(11191);function M(k,h){if((0,X.h)()){const{requestAnimationFrame:o}=h||window;if("function"===typeof o)return o(k)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(k);return setTimeout(k,16)}class T{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(k){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(k){k!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=k,this._depthCullingState.depthFunc=k?518:515)}setColorWrite(k){k!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=k)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(k){if(k)return this.isNDCHalfZRange?k.IS_NDC_HALF_ZRANGE="":delete k.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?k.USE_REVERSE_DEPTHBUFFER="":delete k.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?k.USE_EXACT_SRGB_CONVERSIONS="":delete k.USE_EXACT_SRGB_CONVERSIONS);{let k="";return this.isNDCHalfZRange&&(k+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(k&&(k+="\n"),k+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(k&&(k+="\n"),k+="#define USE_EXACT_SRGB_CONVERSIONS"),k}}_rebuildInternalTextures(){const k=this._internalTexturesCache.slice();for(const h of k)h._rebuild()}_rebuildRenderTargetWrappers(){const k=this._renderTargetWrapperCache.slice();for(const h of k)h._rebuild()}_rebuildEffects(){for(const k in this._compiledEffects){const h=this._compiledEffects[k];h._pipelineContext=null,h._prepareEffect()}q.Effect.ResetCache()}_rebuildGraphicsResources(){var k;this.wipeCaches(!0),this._rebuildEffects(),null===(k=this._rebuildComputeEffects)||void 0===k||k.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){I.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(k){setTimeout((()=>{this._clearEmptyResources();const h=this._depthCullingState.depthTest,o=this._depthCullingState.depthFunc,x=this._depthCullingState.depthMask,I=this._stencilState.stencilTest;k(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=h,this._depthCullingState.depthFunc=o,this._depthCullingState.depthMask=x,this._stencilState.stencilTest=I,this._flagContextRestored()}),0)}get l(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(k){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(k){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const k=new Uint8Array(4),h=[k,k,k,k,k,k];this._emptyCubeTexture=this.createRawCubeTexture(h,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(k){if(!k)return this._activeRenderLoops.length=0,void this._cancelFrame();const h=this._activeRenderLoops.indexOf(k);h>=0&&(this._activeRenderLoops.splice(h,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const k=this._frameHandler;if(this._frameHandler=0,(0,X.h)()){const{cancelAnimationFrame:h}=this.getHostWindow()||window;if("function"===typeof h)return h(k)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(k);return clearTimeout(k)}}jh(){this.onBeginFrameObservable.notifyObservers(this)}dh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(k){this._maxFPS=k,void 0!==k&&(this._minFrameTime=k<=0?Number.MAX_VALUE:1e3/k)}_isOverFrameTime(k){if(!k||void 0===this._maxFPS)return!1;const h=k-this._lastFrameTime;return this._lastFrameTime=k,this._renderAccumulator+=h,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(k){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(k)){let k=!0;(this.l||!this.renderEvenInBackground&&this._windowIsBackground)&&(k=!1),k&&(this.jh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.dh())}}_renderLoop(k){this._processFrame(k),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let k=0;k<this._activeRenderLoops.length;k++){(0,this._activeRenderLoops[k])()}}_renderViews(){return!1}_queueNewFrame(k,h){return M(k,h)}runRenderLoop(k){-1===this._activeRenderLoops.indexOf(k)&&(this._activeRenderLoops.push(k),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(k){this._depthCullingState.depthTest=k}setZOffset(k){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-k:k}getZOffset(){const k=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-k:k}setZOffsetUnits(k){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-k:k}getZOffsetUnits(){const k=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-k:k}getHostWindow(){return(0,X.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(k){this._compatibilityMode=!0}_rebuildTextures(){for(const k of this.scenes)k._rebuildTextures();for(const k of this._virtualScenes)k._rebuildTextures()}_releaseRenderTargetWrapper(k){const h=this._renderTargetWrapperCache.indexOf(k);-1!==h&&this._renderTargetWrapperCache.splice(h,1)}get currentViewport(){return this._cachedViewport}setViewport(k,h,o){const x=h||this.getRenderWidth(),I=o||this.getRenderHeight(),q=k.x||0,Y=k.y||0;this._cachedViewport=k,this._viewport(q*x,Y*I,x*k.width,I*k.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(k){return new Path2D(k)}get description(){let k=this.name+this.version;return this._caps.parallelShaderCompile&&(k+=" - Parallel shader compilation"),k}_createTextureBase(k,h,o,q){let Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7?arguments[7]:void 0,A=arguments.length>8?arguments[8]:void 0,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,a=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,X=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,c=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,W=arguments.length>13?arguments[13]:void 0,M=arguments.length>14?arguments[14]:void 0,j=arguments.length>15?arguments[15]:void 0;const d="data:"===(k=k||"").substring(0,5),b="blob:"===k.substring(0,5),V=d&&-1!==k.indexOf(";base64,"),i=a||new N.c(this,1);i!==a&&(i.label=k.substring(0,60));const F=k;!this._transformTextureUrl||V||a||K||(k=this._transformTextureUrl(k)),F!==k&&(i._originalUrl=F);const R=k.lastIndexOf(".");let s=c||(R>-1?k.substring(R).toLowerCase():"");s.indexOf("?")>-1&&(s=s.split("?")[0]);const Z=(0,f.d)(s,W);q&&q.addPendingData(i),i.url=k,i.generateMipMaps=!h,i.samplingMode=Y,i.invertY=o,i._useSRGBBuffer=this._getUseSRGBBuffer(!!j,h),this._doNotHandleContextLost||(i._buffer=K);let w=null;J&&!a&&(w=i.onLoadedObservable.add(J)),a||this._internalTexturesCache.push(i);const D=(o,a)=>{q&&q.removePendingData(i),k===F?(w&&i.onLoadedObservable.remove(w),x.b.UseFallbackTexture&&k!==x.b.FallbackTexture&&this._createTextureBase(x.b.FallbackTexture,h,i.invertY,q,Y,null,G,l,A,K,i),o=(o||"Unknown error")+(x.b.UseFallbackTexture?" - Fallback texture was used":""),i.onErrorObservable.notifyObservers({message:o,exception:a}),G&&G(o,a)):(I.c.Warn(`Failed to load ${k}, falling back to ${F}`),this._createTextureBase(F,h,i.invertY,q,Y,J,G,l,A,K,i,X,c,W,M,j))};if(Z){const h=async k=>{(await Z).loadData(k,i,((k,h,o,x,I,J)=>{J?D("TextureLoader failed to load data"):l(i,s,q,{width:k,height:h},i.invertY,!o,x,(()=>(I(),!1)),Y)}),M)};K?K instanceof ArrayBuffer?h(new Uint8Array(K)):ArrayBuffer.isView(K)?h(K):G&&G("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(k,(k=>{h(new Uint8Array(k))}),void 0,q?q.offlineProvider:void 0,!0,((k,h)=>{D("Unable to load "+(k&&k.responseURL,h))}))}else{const o=k=>{b&&!this._doNotHandleContextLost&&(i._buffer=k),l(i,s,q,k,i.invertY,h,!1,A,Y)};!d||V?K&&("string"===typeof K.decoding||K.close)?o(K):T._FileToolsLoadImage(k||"",o,D,q?q.offlineProvider:null,W,i.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof K||K instanceof ArrayBuffer||ArrayBuffer.isView(K)||K instanceof Blob?T._FileToolsLoadImage(K,o,D,q?q.offlineProvider:null,W,i.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):K&&o(K)}return i}_rebuildBuffers(){for(const k of this._uniformBuffers)k._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,X.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const k in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,k)&&(this._boundTexturesCache[k]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(k){this._name=k}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(k){this._hardwareScalingLevel=k,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(k){this._doNotHandleContextLost=k}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(k,h,o){var I,q;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new G,this._stencilStateComposer=new l,this._stencilState=new A,this._alphaState=new K,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new c.d,this.onCanvasFocusObservable=new c.d,this.onNewSceneAddedObservable=new c.d,this.onResizeObservable=new c.d,this.onCanvasPointerOutObservable=new c.d,this.onEffectErrorObservable=new c.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new c.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=k=>this._renderLoop(k),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new c.d,this.onAfterShaderCompilationObservable=new c.d,this.onBeginFrameObservable=new c.d,this.onEndFrameObservable=new c.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new c.d,this.onContextRestoredObservable=new c.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.sh=new c.d,this.onReleaseEffectsObservable=new c.d,x.b.Instances.push(this),this.startTime=J.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Y.e.SetMatrixPrecision(!!h.useHighPrecisionMatrix),(0,X.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=o??!1,h.antialias=k??h.antialias,h.deterministicLockstep=h.deterministicLockstep??!1,h.lockstepMaxSteps=h.lockstepMaxSteps??4,h.timeStep=h.timeStep??1/60,h.stencil=h.stencil??!0,this._audioContext=(null===(I=h.audioEngineOptions)||void 0===I?void 0:I.audioContext)??null,this._audioDestination=(null===(q=h.audioEngineOptions)||void 0===q?void 0:q.audioDestination)??null,this.premultipliedAlpha=h.premultipliedAlpha??!0,this._doNotHandleContextLost=!!h.doNotHandleContextLost,this._isStencilEnable=!!h.stencil,this.useExactSrgbConversions=h.useExactSrgbConversions??!1;const a=(0,X.h)()&&window.devicePixelRatio||1,N=h.limitDeviceRatio||a;o=o||h.adaptToDeviceRatio||!1,this._hardwareScalingLevel=o?1/Math.min(N,a):1,this._lastDevicePixelRatio=a,this._creationOptions=h}resize(){let k,h,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const k=(0,X.h)()&&window.devicePixelRatio||1,h=this._lastDevicePixelRatio/k;this._lastDevicePixelRatio=k,this._hardwareScalingLevel*=h}if((0,X.h)()&&(0,X.e)())if(this._renderingCanvas){var x,I;const o=null===(x=(I=this._renderingCanvas).getBoundingClientRect)||void 0===x?void 0:x.call(I);k=this._renderingCanvas.clientWidth||(null===o||void 0===o?void 0:o.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,h=this._renderingCanvas.clientHeight||(null===o||void 0===o?void 0:o.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else k=window.innerWidth,h=window.innerHeight;else k=this._renderingCanvas?this._renderingCanvas.width:100,h=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(k/this._hardwareScalingLevel,h/this._hardwareScalingLevel,o)}setSize(k,h){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(k|=0,h|=0,!o&&this._renderingCanvas.width===k&&this._renderingCanvas.height===h)return!1;if(this._renderingCanvas.width=k,this._renderingCanvas.height=h,this.scenes){for(let k=0;k<this.scenes.length;k++){const h=this.scenes[k];for(let k=0;k<h.cameras.length;k++){h.cameras[k]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(k,h,o,x,I,q,Y,J,G,l,A){throw(0,a.e)("engine.rawTexture")}createRawCubeTexture(k,h,o,x,I,q,Y,J){throw(0,a.e)("engine.rawTexture")}createRawTexture3D(k,h,o,x,I,q,Y,J,G,l,A){throw(0,a.e)("engine.rawTexture")}createRawTexture2DArray(k,h,o,x,I,q,Y,J,G,l,A){throw(0,a.e)("engine.rawTexture")}_sharedInit(k){this._renderingCanvas=k}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const k=navigator.userAgent;this.hostInformation.isMobile=-1!==k.indexOf("Mobile")||-1!==k.indexOf("Mac")&&(0,X.e)()&&"ontouchend"in document},this._checkForMobile(),(0,X.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(k){return document.createElement("video")}_reportDrawCall(){var k;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(k=this._drawCalls)||void 0===k||k.addCount(h,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(k,h){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(k,h){return createImageBitmap(k,h)}resizeImageBitmap(k,h,o){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(k){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(k,h){if("undefined"===typeof document)return new OffscreenCanvas(k,h);const o=document.createElement("canvas");return o.width=k,o.height=h,o}createCanvas(k,h){return T._CreateCanvas(k,h)}static _FileToolsLoadImage(k,h,o,x,I,q,Y){throw(0,a.e)("FileTools")}_loadFile(k,h,o,x,I,q){const Y=(0,W.j)(k,h,o,x,I,q);return this._activeRequests.push(Y),Y.onCompleteObservable.add((()=>{const k=this._activeRequests.indexOf(Y);-1!==k&&this._activeRequests.splice(k,1)})),Y}static _FileToolsLoadFile(k,h,o,x,I,q){if(W.b.loadFile)return W.b.loadFile(k,h,o,x,I,q);throw(0,a.e)("FileTools")}dispose(){var k;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(k=this.releaseComputeEffects)||void 0===k||k.call(this),q.Effect.ResetCache();for(const o of this._activeRequests)o.abort();this._boundRenderFunction=null,this.sh.notifyObservers(this),this.sh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,X.h)()&&window.removeEventListener("resize",this._checkForMobile);const h=x.b.Instances.indexOf(this);h>=0&&x.b.Instances.splice(h,1),x.b.Instances.length||(x.b.OnEnginesDisposedObservable.notifyObservers(this),x.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(k){throw(0,a.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(k,h){for(let o=0;o<x.b.Instances.length;o++){const I=x.b.Instances[o];for(let o=0;o<I.scenes.length;o++)I.scenes[o].markAllMaterialsAsDirty(k,h)}}}T._RenderPassIdCounter=0,T._RescalePostProcessFactory=null,T.CollisionsEpsilon=.001,T.QueueNewFrame=M},11120:(k,h,o)=>{o.d(h,{b:()=>I});var x=o(11082);class I{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}I.Instances=[],I.OnEnginesDisposedObservable=new x.d,I._LastCreatedScene=null,I.UseFallbackTexture=!0,I.FallbackTexture=""},11173:(k,h,o)=>{o.d(h,{e:()=>x});class x{static SetMatrixPrecision(k){if(x.MatrixTrackPrecisionChange=!1,k&&!x.MatrixUse64Bits&&x.MatrixTrackedMatrices)for(let h=0;h<x.MatrixTrackedMatrices.length;++h){const k=x.MatrixTrackedMatrices[h],o=k.wh;k.wh=new Array(16);for(let h=0;h<16;++h)k.wh[h]=o[h]}x.MatrixUse64Bits=k,x.MatrixCurrentType=x.MatrixUse64Bits?Array:Float32Array,x.MatrixTrackedMatrices=null}}x.MatrixUse64Bits=!1,x.MatrixTrackPrecisionChange=!0,x.MatrixCurrentType=Float32Array,x.MatrixTrackedMatrices=[]},11191:(k,h,o)=>{o.d(h,{d:()=>Y});var x=o(11098);const I=new Map;function q(k,h){(function(k){return I.delete(k)})(k)&&x.c.Warn(`Extension with the name '${k}' already exists`),I.set(k,h)}function Y(k,h){"image/ktx"!==h&&"image/ktx2"!==h||(k=".ktx"),I.has(k)||(k.endsWith(".ies")&&q(".ies",(async()=>await o.e(15).then(o.bind(o,13649)).then((k=>new k._IESTextureLoader)))),k.endsWith(".dds")&&q(".dds",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(28)]).then(o.bind(o,13651)).then((k=>new k._DDSTextureLoader)))),k.endsWith(".basis")&&q(".basis",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(47)]).then(o.bind(o,13656)).then((k=>new k._BasisTextureLoader)))),k.endsWith(".env")&&q(".env",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(23),o.e(21),o.e(45),o.e(48)]).then(o.bind(o,13661)).then((k=>new k._ENVTextureLoader)))),k.endsWith(".hdr")&&q(".hdr",(async()=>await Promise.all([o.e(14),o.e(49)]).then(o.bind(o,13666)).then((k=>new k._HDRTextureLoader)))),(k.endsWith(".ktx")||k.endsWith(".ktx2"))&&(q(".ktx",(async()=>await o.e(30).then(o.bind(o,13670)).then((k=>new k._KTXTextureLoader)))),q(".ktx2",(async()=>await o.e(30).then(o.bind(o,13670)).then((k=>new k._KTXTextureLoader))))),k.endsWith(".tga")&&q(".tga",(async()=>await o.e(50).then(o.bind(o,13673)).then((k=>new k._TGATextureLoader)))),k.endsWith(".exr")&&q(".exr",(async()=>await o.e(16).then(o.bind(o,13682)).then((k=>new k._ExrTextureLoader)))));const x=I.get(k);return x?Promise.resolve(x(h)):null}},11180:(k,h,o)=>{o.d(h,{c:()=>Y});var x,I=o(11082),q=o(11183);!function(k){k[k.Unknown=0]="Unknown",k[k.Url=1]="Url",k[k.Temp=2]="Temp",k[k.Raw=3]="Raw",k[k.Dynamic=4]="Dynamic",k[k.RenderTarget=5]="RenderTarget",k[k.MultiRenderTarget=6]="MultiRenderTarget",k[k.Cube=7]="Cube",k[k.CubeRaw=8]="CubeRaw",k[k.CubePrefiltered=9]="CubePrefiltered",k[k.Raw3D=10]="Raw3D",k[k.Raw2DArray=11]="Raw2DArray",k[k.DepthStencil=12]="DepthStencil",k[k.CubeRawRGBD=13]="CubeRawRGBD",k[k.Depth=14]="Depth"}(x||(x={}));class Y extends q.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(k){this.generateMipMaps=k}get uniqueId(){return this._uniqueId}_setUniqueId(k){this._uniqueId=k}getEngine(){return this._engine}get source(){return this._source}constructor(k,h){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new I.d,this.onErrorObservable=new I.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=k,this._source=h,this._uniqueId=Y._Counter++,o||(this._hardwareTexture=k._createHardwareTexture())}incrementReferences(){this._references++}updateSize(k,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,k,h,o),this.width=k,this.height=h,this.depth=o,this.baseWidth=k,this.baseHeight=h,this.baseDepth=o,this._size=k*h*o}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const k=this.onRebuildCallback(this),h=h=>{h._swapAndDie(this,!1),this.isReady=k.isReady};return void(k.isAsync?k.proxy.then(h):h(k.proxy))}let k;switch(this.source){case 2:case 12:case 14:break;case 1:return void(k=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(k=>{k._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:k=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),k._swapAndDie(this,!1),this.isReady=!0;break;case 10:k=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),k._swapAndDie(this,!1),this.isReady=!0;break;case 11:k=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),k._swapAndDie(this,!1),this.isReady=!0;break;case 4:k=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),k._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(k=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{k._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:k=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),k._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return k=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(k=>{k&&k._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(k._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(k){var h;let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(h=this._hardwareTexture)||void 0===h||h.setUsage(k._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),k._hardwareTexture=this._hardwareTexture,o&&(k._isRGBD=this._isRGBD),this._lodTextureHigh&&(k._lodTextureHigh&&k._lodTextureHigh.dispose(),k._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(k._lodTextureMid&&k._lodTextureMid.dispose(),k._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(k._lodTextureLow&&k._lodTextureLow.dispose(),k._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(k._irradianceTexture&&k._irradianceTexture.dispose(),k._irradianceTexture=this._irradianceTexture);const x=this._engine.getLoadedTexturesCache();let I=x.indexOf(this);-1!==I&&x.splice(I,1),I=x.indexOf(k),-1===I&&x.push(k)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Y._Counter=0},11183:(k,h,o)=>{o.d(h,{c:()=>x});class x{get wrapU(){return this._cachedWrapU}set wrapU(k){this._cachedWrapU=k}get wrapV(){return this._cachedWrapV}set wrapV(k){this._cachedWrapV=k}get wrapR(){return this._cachedWrapR}set wrapR(k){this._cachedWrapR=k}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(k){this._cachedAnisotropicFilteringLevel=k}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(k){this._comparisonFunction=k}get useMipMaps(){return this._useMipMaps}set useMipMaps(k){this._useMipMaps=k}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,I=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=k,this._cachedWrapV=h,this._cachedWrapR=o,this._cachedAnisotropicFilteringLevel=x,this.samplingMode=I,this._comparisonFunction=q,this}compareSampler(k){return this._cachedWrapU===k._cachedWrapU&&this._cachedWrapV===k._cachedWrapV&&this._cachedWrapR===k._cachedWrapR&&this._cachedAnisotropicFilteringLevel===k._cachedAnisotropicFilteringLevel&&this.samplingMode===k.samplingMode&&this._comparisonFunction===k._comparisonFunction&&this._useMipMaps===k._useMipMaps}}},11103:(k,h,o)=>{o.d(h,{d:()=>q});var x=o(11098);const I=(k,h,o)=>k?k.getClassName&&"Mesh"===k.getClassName()?null:!k.getClassName||"SubMesh"!==k.getClassName()&&"PhysicsBody"!==k.getClassName()?k.clone?k.clone():Array.isArray(k)?k.slice():o&&"object"===typeof k?{...k}:null:k.clone(h):null;class q{static DeepCopy(k,h,o,q){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const J=function(k){const h=[];do{const o=Object.getOwnPropertyNames(k);for(const k of o)-1===h.indexOf(k)&&h.push(k)}while(k=Object.getPrototypeOf(k));return h}(k);for(const l of J){if("_"===l[0]&&(!q||-1===q.indexOf(l)))continue;if(l.endsWith("Observable"))continue;if(o&&-1!==o.indexOf(l))continue;const J=k[l],A=typeof J;if("function"!==A)try{if("object"===A)if(J instanceof Uint8Array)h[l]=Uint8Array.from(J);else if(J instanceof Array){if(h[l]=[],J.length>0)if("object"==typeof J[0])for(let k=0;k<J.length;k++){const o=I(J[k],h,Y);-1===h[l].indexOf(o)&&h[l].push(o)}else h[l]=J.slice(0)}else h[l]=I(J,h,Y);else h[l]=J}catch(G){x.c.Warn(G.message)}}}}},11129:(k,h,o)=>{o.d(h,{c:()=>x,g:()=>I,h:()=>q});class x extends Error{}x._setPrototypeOf=Object.setPrototypeOf||((k,h)=>(k.__proto__=h,k));const I={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class q extends x{constructor(k,h,o){super(k),this.errorCode=h,this.innerError=o,this.name="RuntimeError",x._setPrototypeOf(this,q.prototype)}}},11127:(k,h,o)=>{o.d(h,{c:()=>D,f:()=>T,g:()=>R,j:()=>Z,o:()=>i,k:()=>W,s:()=>b,u:()=>V,x:()=>F,B:()=>j});var x=o(11112),I=o(11090),q=o(11082);class Y{}Y.FilesToLoad={};var J=o(11129),G=o(11134),l=o(11141),A=o(11120),K=o(11098),a=o(11145),N=o(11143),X=o(11151);const c=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class W extends J.h{constructor(k,h){super(k,J.g.LoadFileError),this.name="LoadFileError",J.c._setPrototypeOf(this,W.prototype),h instanceof x.e?this.request=h:this.file=h}}class f extends J.h{constructor(k,h){super(k,J.g.RequestFileError),this.request=h,this.name="RequestFileError",J.c._setPrototypeOf(this,f.prototype)}}class M extends J.h{constructor(k,h){super(k,J.g.ReadFileError),this.file=h,this.name="ReadFileError",J.c._setPrototypeOf(this,M.prototype)}}const T={DefaultRetryStrategy:class{static ExponentialBackoff(){let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(o,x,I)=>0!==x.status||I>=k||-1!==o.indexOf("file:")?-1:Math.pow(2,I)*h}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:k=>k,ScriptBaseUrl:"",ScriptPreprocessUrl:k=>k,CleanUrl:k=>k=k.replace(/#/gm,"%23")},j=(k,h)=>{if((!k||0!==k.indexOf("data:"))&&T.CorsBehavior)if("string"===typeof T.CorsBehavior||T.CorsBehavior instanceof String)h.crossOrigin=T.CorsBehavior;else{const o=T.CorsBehavior(k);o&&(h.crossOrigin=o)}},d={getRequiredSize:null},b=function(k,h,o,I){let q,J=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5?arguments[5]:void 0,K=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===K||void 0===K||!K._features.forceBitmapOverHTMLImageElement))return o("LoadImage is only supported in web or BabylonNative environments."),null;let a=!1;k instanceof ArrayBuffer||ArrayBuffer.isView(k)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(q=URL.createObjectURL(new Blob([k],{type:J})),a=!0):q=`data:${J};base64,`+(0,G.l)(k):k instanceof Blob?(q=URL.createObjectURL(k),a=!0):(q=T.CleanUrl(k),q=T.PreprocessUrl(q));const N=h=>{if(o){const x=q||k.toString();o(`Error while trying to load image: ${0===x.indexOf("http")||x.length<=128?x:x.slice(0,128)+"..."}`,h)}};if(null!==K&&void 0!==K&&K._features.forceBitmapOverHTMLImageElement)return i(q,(x=>{K.createImageBitmap(new Blob([x],{type:J}),{premultiplyAlpha:"none",...l}).then((k=>{h(k),a&&URL.revokeObjectURL(q)})).catch((h=>{o&&o("Error while trying to load image: "+k,h)}))}),void 0,I||void 0,!0,((k,h)=>{N(h)})),null;const X=new Image;if(d.getRequiredSize){const h=d.getRequiredSize(k);h.width&&(X.width=h.width),h.height&&(X.height=h.height)}j(q,X);const c=[],W=()=>{for(const k of c)k.target.removeEventListener(k.name,k.handler);c.length=0};c.push({target:X,name:"load",handler:()=>{W(),h(X),a&&X.src&&URL.revokeObjectURL(X.src)}}),c.push({target:X,name:"error",handler:k=>{W(),N(k),a&&X.src&&URL.revokeObjectURL(X.src)}}),c.push({target:document,name:"securitypolicyviolation",handler:k=>{if(k.blockedURI!==X.src||"Dh"===k.disposition)return;W();const h=new Error(`CSP violation of policy ${k.effectiveDirective} ${k.blockedURI}. Current policy is ${k.originalPolicy}`);A.b.UseFallbackTexture=!1,N(h),a&&X.src&&URL.revokeObjectURL(X.src),X.src=""}}),(()=>{for(const k of c)k.target.addEventListener(k.name,k.handler)})();const f="blob:"===q.substring(0,5),M="data:"===q.substring(0,5),b=()=>{f||M||!x.e.IsCustomRequestAvailable?X.src=q:i(q,((k,h,o)=>{const x=new Blob([k],{type:!J&&o?o:J}),I=URL.createObjectURL(x);a=!0,X.src=I}),void 0,I||void 0,!0,((k,h)=>{N(h)}))},V=()=>{I&&I.loadImage(q,X)};if(!f&&!M&&I&&I.enableTexturesOffline)I.open(V,b);else{if(-1!==q.indexOf("file:")){const k=decodeURIComponent(q.substring(5).toLowerCase());if(Y.FilesToLoad[k]&&"undefined"!==typeof URL){try{let h;try{h=URL.createObjectURL(Y.FilesToLoad[k])}catch(F){h=URL.createObjectURL(Y.FilesToLoad[k])}X.src=h,a=!0}catch(R){X.src=""}return X}}b()}return X},V=(k,h,o,x,I)=>{const Y=new FileReader,J={onCompleteObservable:new q.d,abort:()=>Y.abort()};return Y.onloadend=()=>J.onCompleteObservable.notifyObservers(J),I&&(Y.onerror=()=>{I(new M(`Unable to read ${k.name}`,k))}),Y.onload=k=>{h(k.target.result)},o&&(Y.onprogress=o),x?Y.readAsArrayBuffer(k):Y.readAsText(k),J},i=(k,h,o,x,I,G,l)=>{if(k.name)return V(k,h,o,I,G?k=>{G(void 0,k)}:void 0);const A=k;if(-1!==A.indexOf("file:")){let k=decodeURIComponent(A.substring(5).toLowerCase());0===k.indexOf("./")&&(k=k.substring(2));const x=Y.FilesToLoad[k];if(x)return V(x,h,o,I,G?k=>G(void 0,new W(k.message,k.file)):void 0)}const{match:N,type:X}=w(A);if(N){const k={onCompleteObservable:new q.d,abort:()=>()=>{}};try{const k=I?D(A):U(A);h(k,void 0,X)}catch(J){G?G(void 0,J):K.c.Error(J.message||"Failed to parse the Data URL")}return a.c.SetImmediate((()=>{k.onCompleteObservable.notifyObservers(k)})),k}return F(A,((k,o)=>{h(k,null===o||void 0===o?void 0:o.responseURL,null===o||void 0===o?void 0:o.getResponseHeader("content-type"))}),o,x,I,G?k=>{G(k.request,new W(k.message,k.request))}:void 0,l)},F=(k,h,o,Y,J,G,l)=>{k=T.CleanUrl(k),k=T.PreprocessUrl(k);const A=T.BaseUrl+k;let a=!1;const N={onCompleteObservable:new q.d,abort:()=>a=!0},X=()=>{let k,q=new x.e,Y=null;const X=()=>{q&&(o&&q.removeEventListener("progress",o),k&&q.removeEventListener("readystatechange",k),q.removeEventListener("loadend",c))};let c=()=>{X(),N.onCompleteObservable.notifyObservers(N),N.onCompleteObservable.clear(),o=void 0,k=null,c=null,G=void 0,l=void 0,h=void 0};N.abort=()=>{a=!0,c&&c(),q&&q.readyState!==(XMLHttpRequest.DONE||4)&&q.abort(),null!==Y&&(clearTimeout(Y),Y=null),q=null};const W=k=>{const h=k.message||"Unknown error";G&&q?G(new f(h,q)):K.c.Error(h)},M=K=>{if(q){if(q.open("GET",A),l)try{l(q)}catch(N){return void W(N)}J&&(q.responseType="arraybuffer"),o&&q.addEventListener("progress",o),c&&q.addEventListener("loadend",c),k=()=>{if(!a&&q&&q.readyState===(XMLHttpRequest.DONE||4)){if(k&&q.removeEventListener("readystatechange",k),q.status>=200&&q.status<300||0===q.status&&(!(0,I.h)()||s())){const k=J?q.response:q.responseText;if(null!==k){try{h&&h(k,q)}catch(N){W(N)}return}}const o=T.DefaultRetryStrategy;if(o){const k=o(A,q,K);if(-1!==k)return X(),q=new x.e,void(Y=setTimeout((()=>M(K+1)),k))}const l=new f("Error status: "+q.status+" "+q.statusText+" - Unable to load "+A,q);G&&G(l)}},q.addEventListener("readystatechange",k),q.send()}};M(0)};if(Y&&Y.enableSceneOffline){const x=k=>{k&&k.status>400?G&&G(k):X()},I=()=>{Y&&Y.loadFile(T.BaseUrl+k,(k=>{!a&&h&&h(k),N.onCompleteObservable.notifyObservers(N)}),o?k=>{!a&&o&&o(k)}:void 0,x,J)};Y.open(I,x)}else X();return N},R=k=>{const{match:h,type:o}=w(k);if(h)return o||void 0;const x=k.lastIndexOf(".");switch(k.substring(x+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Bh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},s=()=>"undefined"!==typeof location&&"file:"===location.protocol,Z=k=>c.test(k),w=k=>{const h=c.exec(k);if(null===h||0===h.length)return{match:!1,type:""};return{match:!0,type:h[0].replace("data:","").replace("base64,","")}};function D(k){return(0,G.c)(k.split(",")[1])}const U=k=>(0,G.f)(k.split(",")[1]);let Q;X.e._FileToolsLoadImage=b,N.b.loadFile=i,l.n.loadFile=i;((k,h,o,x,I,q,Y,J,G,l)=>{Q={DecodeBase64UrlToBinary:k,DecodeBase64UrlToString:h,DefaultRetryStrategy:o.DefaultRetryStrategy,BaseUrl:o.BaseUrl,CorsBehavior:o.CorsBehavior,PreprocessUrl:o.PreprocessUrl,IsBase64DataUrl:x,IsFileURL:I,LoadFile:q,LoadImage:Y,ReadFile:J,RequestFile:G,SetCorsBehavior:l},Object.defineProperty(Q,"DefaultRetryStrategy",{get:function(){return o.DefaultRetryStrategy},set:function(k){o.DefaultRetryStrategy=k}}),Object.defineProperty(Q,"BaseUrl",{get:function(){return o.BaseUrl},set:function(k){o.BaseUrl=k}}),Object.defineProperty(Q,"PreprocessUrl",{get:function(){return o.PreprocessUrl},set:function(k){o.PreprocessUrl=k}}),Object.defineProperty(Q,"CorsBehavior",{get:function(){return o.CorsBehavior},set:function(k){o.CorsBehavior=k}})})(D,U,T,Z,s,i,b,V,F,j)},11208:(k,h,o)=>{function x(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(k=>{const h=16*Math.random()|0;return("x"===k?h:3&h|8).toString(16)}))}o.d(h,{b:()=>x})},11196:(k,h,o)=>{o.d(h,{c:()=>q});var x=o(11098),I=o(11199);class q{static Instantiate(k){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[k])return this.RegisteredExternalClasses[k];const h=(0,I.e)(k);if(h)return h;x.c.Warn(k+" not found, you may have missed an import.");const o=k.split(".");let q=window||this;for(let x=0,I=o.length;x<I;x++)q=q[o[x]];return"function"!==typeof q?null:q}}q.RegisteredExternalClasses={}},11106:(k,h,o)=>{o.d(h,{d:()=>I});var x=o(11090);class I{static get Now(){return(0,x.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11134:(k,h,o)=>{o.d(h,{c:()=>Y,f:()=>q,j:()=>x,l:()=>I});const x=k=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(k);let h="";for(let o=0;o<k.byteLength;o++)h+=String.fromCharCode(k[o]);return h},I=k=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,x,I,q,Y,J,G,l="",A=0;const K=ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k);for(;A<K.length;)o=K[A++],x=A<K.length?K[A++]:Number.NaN,I=A<K.length?K[A++]:Number.NaN,q=o>>2,Y=(3&o)<<4|x>>4,J=(15&x)<<2|I>>6,G=63&I,isNaN(x)?J=G=64:isNaN(I)&&(G=64),l+=h.charAt(q)+h.charAt(Y)+h.charAt(J)+h.charAt(G);return l},q=k=>atob(k),Y=k=>{const h=q(k),o=h.length,x=new Uint8Array(new ArrayBuffer(o));for(let I=0;I<o;I++)x[I]=h.charCodeAt(I);return x.buffer}},11213:(k,h,o)=>{function x(k){let h=1;do{h*=2}while(h<k);return h===k}function I(k,h,o){return k*(1-o)+h*o}function q(k){const h=Y(k),o=J(k);return h-k>k-o?o:h}function Y(k){return k--,k|=k>>1,k|=k>>2,k|=k>>4,k|=k>>8,k|=k>>16,++k}function J(k){return k|=k>>1,k|=k>>2,k|=k>>4,k|=k>>8,(k|=k>>16)-(k>>1)}function G(k,h){let o;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:o=J(k);break;case 2:o=q(k);break;default:o=Y(k)}return Math.min(o,h)}o.d(h,{b:()=>J,e:()=>G,h:()=>x,j:()=>I,l:()=>q})},11078:(k,h,o)=>{o.r(h),o.d(h,{AsyncLoop:()=>M,Tools:()=>W,className:()=>f});var x=o(11082),I=o(11090),q=o(11098),Y=o(11103),J=o(11106),G=o(11108),l=o(11112),A=o(11120),K=o(11127),a=o(11145),N=o(11196),X=o(11208),c=o(11213);class W{static get BaseUrl(){return K.f.BaseUrl}static set BaseUrl(k){K.f.BaseUrl=k}static get CleanUrl(){return K.f.CleanUrl}static set CleanUrl(k){K.f.CleanUrl=k}static IsAbsoluteUrl(k){return 0===k.indexOf("//")||-1!==k.indexOf("://")&&(-1!==k.indexOf(".")&&(-1!==k.indexOf("/")&&(!(k.indexOf(":")>k.indexOf("/"))&&(k.indexOf("://")<k.indexOf(".")||(0===k.indexOf("data:")||0===k.indexOf("blob:"))))))}static set ScriptBaseUrl(k){K.f.ScriptBaseUrl=k}static get ScriptBaseUrl(){return K.f.ScriptBaseUrl}static set CDNBaseUrl(k){W.ScriptBaseUrl=k,W.AssetBaseUrl=k}static set ScriptPreprocessUrl(k){K.f.ScriptPreprocessUrl=k}static get ScriptPreprocessUrl(){return K.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return K.f.DefaultRetryStrategy}static set DefaultRetryStrategy(k){K.f.DefaultRetryStrategy=k}static get CorsBehavior(){return K.f.CorsBehavior}static set CorsBehavior(k){K.f.CorsBehavior=k}static get UseFallbackTexture(){return A.b.UseFallbackTexture}static set UseFallbackTexture(k){A.b.UseFallbackTexture=k}static get RegisteredExternalClasses(){return N.c.RegisteredExternalClasses}static set RegisteredExternalClasses(k){N.c.RegisteredExternalClasses=k}static get fallbackTexture(){return A.b.FallbackTexture}static set fallbackTexture(k){A.b.FallbackTexture=k}static FetchToRef(k,h,o,x,I,q){const Y=4*((Math.abs(k)*o%o|0)+(Math.abs(h)*x%x|0)*o);q.r=I[Y]/255,q.g=I[Y+1]/255,q.b=I[Y+2]/255,q.a=I[Y+3]/255}static Mix(k,h,o){return 0}static Instantiate(k){return N.c.Instantiate(k)}static SetImmediate(k){a.c.SetImmediate(k)}static IsExponentOfTwo(k){return!0}static FloatRound(k){return Math.fround(k)}static GetFilename(k){const h=k.lastIndexOf("/");return h<0?k:k.substring(h+1)}static GetFolderPath(k){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=k.lastIndexOf("/");return o<0?h?k:"":k.substring(0,o+1)}static ToDegrees(k){return 180*k/Math.PI}static ToRadians(k){return k*Math.PI/180}static SmoothAngleChange(k,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const x=this.ToRadians(k),I=this.ToRadians(h);return this.ToDegrees(Math.atan2((1-o)*Math.sin(I)+o*Math.sin(x),(1-o)*Math.cos(I)+o*Math.cos(x)))}static MakeArray(k,h){return!0===h||void 0!==k&&null!=k?Array.isArray(k)?k:[k]:null}static GetPointerPrefix(k){return(0,I.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(k,h){(0,K.B)(k,h)}static SetReferrerPolicyBehavior(k,h){h.referrerPolicy=k}static get PreprocessUrl(){return K.f.PreprocessUrl}static set PreprocessUrl(k){K.f.PreprocessUrl=k}static LoadImage(k,h,o,x,I,q){return(0,K.s)(k,h,o,x,I,q)}static LoadFile(k,h,o,x,I,q){return(0,K.o)(k,h,o,x,I,q)}static async LoadFileAsync(k){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((o,x)=>{(0,K.o)(k,(k=>{o(k)}),void 0,void 0,h,((k,h)=>{x(h)}))}))}static GetAssetUrl(k){if(!k)return"";if(W.AssetBaseUrl&&k.startsWith(W._DefaultAssetsUrl)){const h="/"===W.AssetBaseUrl[W.AssetBaseUrl.length-1]?W.AssetBaseUrl.substring(0,W.AssetBaseUrl.length-1):W.AssetBaseUrl;return k.replace(W._DefaultAssetsUrl,h)}return k}static GetBabylonScriptURL(k,h){if(!k)return"";if(W.ScriptBaseUrl&&k.startsWith(W._DefaultCdnUrl)){const h="/"===W.ScriptBaseUrl[W.ScriptBaseUrl.length-1]?W.ScriptBaseUrl.substring(0,W.ScriptBaseUrl.length-1):W.ScriptBaseUrl;k=k.replace(W._DefaultCdnUrl,h)}return k=W.ScriptPreprocessUrl(k),h&&(k=W.GetAbsoluteUrl(k)),k}static LoadBabylonScript(k,h,o,x){k=W.GetBabylonScriptURL(k),W.LoadScript(k,h,o)}static async LoadBabylonScriptAsync(k){return k=W.GetBabylonScriptURL(k),await W.LoadScriptAsync(k)}static LoadScript(k,h,o,x){let q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(k),h&&h()}catch(G){null===o||void 0===o||o(`Unable to load script '${k}' in worker`,G)}return}if(!(0,I.h)())return void(null===o||void 0===o||o(`Cannot load script '${k}' outside of a window or a worker`));const Y=document.getElementsByTagName("head")[0],J=document.createElement("script");q?(J.setAttribute("type","module"),J.innerText=k):(J.setAttribute("type","text/javascript"),J.setAttribute("src",k)),x&&(J.id=x),J.onload=()=>{h&&h()},J.onerror=h=>{o&&o(`Unable to load script '${k}'`,h)},Y.appendChild(J)}static async LoadScriptAsync(k,h){return await new Promise(((o,x)=>{this.LoadScript(k,(()=>{o()}),((k,h)=>{x(h||new Error(k))}),h)}))}static ReadFileAsDataURL(k,h,o){const I=new FileReader,q={onCompleteObservable:new x.d,abort:()=>I.abort()};return I.onloadend=()=>{q.onCompleteObservable.notifyObservers(q)},I.onload=k=>{h(k.target.result)},I.onprogress=o,I.readAsDataURL(k),q}static ReadFile(k,h,o,x,I){return(0,K.u)(k,h,o,x,I)}static FileAsURL(k){const h=new Blob([k]);return window.URL.createObjectURL(h)}static Format(k){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return k.toFixed(h)}static DeepCopy(k,h,o,x){Y.d.DeepCopy(k,h,o,x)}static IsEmpty(k){for(const h in k)if(Object.prototype.hasOwnProperty.call(k,h))return!1;return!0}static RegisterTopRootEvents(k,h){for(let x=0;x<h.length;x++){const I=h[x];k.addEventListener(I.name,I.handler,!1);try{window.parent&&window.parent.addEventListener(I.name,I.handler,!1)}catch(o){}}}static UnregisterTopRootEvents(k,h){for(let x=0;x<h.length;x++){const I=h[x];k.removeEventListener(I.name,I.handler);try{k.parent&&k.parent.removeEventListener(I.name,I.handler)}catch(o){}}}static async DumpFramebuffer(k,h,o,x){throw(0,G.e)("DumpTools")}static DumpData(k,h,o,x){throw(0,G.e)("DumpTools")}static async DumpDataAsync(k,h,o){throw(0,G.e)("DumpTools")}static _IsOffScreenCanvas(k){return void 0!==k.convertToBlob}static ToBlob(k,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",x=arguments.length>3?arguments[3]:void 0;W._IsOffScreenCanvas(k)||k.toBlob||(k.toBlob=function(k,h,o){setTimeout((()=>{const x=atob(this.toDataURL(h,o).split(",")[1]),I=x.length,q=new Uint8Array(I);for(let k=0;k<I;k++)q[k]=x.charCodeAt(k);k(new Blob([q]))}))}),W._IsOffScreenCanvas(k)?k.convertToBlob({type:o,quality:x}).then((k=>h(k))):k.toBlob((function(k){h(k)}),o,x)}static DownloadBlob(k,h){if("download"in document.createElement("a")){if(!h){const k=new Date;h="screenshot_"+((k.getFullYear()+"-"+(k.getMonth()+1)).slice(2)+"-"+k.getDate()+"_"+k.getHours()+"-"+("0"+k.getMinutes()).slice(-2))+".png"}W.Download(k,h)}else if(k&&"undefined"!==typeof URL){const h=URL.createObjectURL(k),o=window.open("");if(!o)return;const x=o.document.createElement("img");x.onload=function(){URL.revokeObjectURL(h)},x.src=h,o.document.body.appendChild(x)}}static EncodeScreenshotCanvasData(k,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",x=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if("string"!==typeof x&&h){if(h){if(W._IsOffScreenCanvas(k))return void k.convertToBlob({type:o,quality:I}).then((k=>{const o=new FileReader;o.readAsDataURL(k),o.onloadend=()=>{const k=o.result;h(k)}}));const x=k.toDataURL(o,I);h(x)}}else this.ToBlob(k,(function(k){k&&W.DownloadBlob(k,x),h&&h("")}),o,I)}static Download(k,h){if("undefined"===typeof URL)return;const o=window.URL.createObjectURL(k),x=document.createElement("a");document.body.appendChild(x),x.style.display="none",x.href=o,x.download=h,x.addEventListener("click",(()=>{x.parentElement&&x.parentElement.removeChild(x)})),x.click(),window.URL.revokeObjectURL(o)}static BackCompatCameraNoPreventDefault(k){return"boolean"===typeof k[0]?k[0]:"boolean"===typeof k[1]&&k[1]}static CreateScreenshot(k,h,o,x){throw(0,G.e)("ScreenshotTools")}static async CreateScreenshotAsync(k,h,o){throw(0,G.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(k,h,o,x){throw(0,G.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(k,h,o){throw(0,G.e)("ScreenshotTools")}static RandomId(){return(0,X.b)()}static IsBase64(k){return(0,K.j)(k)}static DecodeBase64(k){return(0,K.c)(k)}static get errorsCount(){return q.c.errorsCount}static Log(k){q.c.Log(k)}static Warn(k){q.c.Warn(k)}static Error(k){q.c.Error(k)}static get LogCache(){return q.c.LogCache}static ClearLogCache(){q.c.ClearLogCache()}static set LogLevels(k){q.c.LogLevels=k}static set PerformanceLogLevel(k){return(k&W.PerformanceUserMarkLogLevel)===W.PerformanceUserMarkLogLevel?(W.StartPerformanceCounter=W._StartUserMark,void(W.EndPerformanceCounter=W._EndUserMark)):(k&W.PerformanceConsoleLogLevel)===W.PerformanceConsoleLogLevel?(W.StartPerformanceCounter=W._StartPerformanceConsole,void(W.EndPerformanceCounter=W._EndPerformanceConsole)):(W.StartPerformanceCounter=W._StartPerformanceCounterDisabled,void(W.EndPerformanceCounter=W._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(k,h){}static _EndPerformanceCounterDisabled(k,h){}static _StartUserMark(k){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!W._Performance){if(!(0,I.h)())return;W._Performance=window.performance}h&&W._Performance.mark&&W._Performance.mark(k+"-Begin")}static _EndUserMark(k){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&W._Performance.mark&&(W._Performance.mark(k+"-End"),W._Performance.measure(k,k+"-Begin",k+"-End"))}static _StartPerformanceConsole(k){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(W._StartUserMark(k,h),console.time&&console.time(k))}static _EndPerformanceConsole(k){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(W._EndUserMark(k,h),console.timeEnd(k))}static get Now(){return J.d.Now}static GetClassName(k){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null;if(!h&&k.getClassName)o=k.getClassName();else{if(k instanceof Object){o=(h?k:Object.getPrototypeOf(k)).constructor.__bjsclassName__}o||(o=typeof k)}return o}static First(k,h){for(const o of k)if(h(o))return o;return null}static getFullClassName(k){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null,x=null;if(!h&&k.getClassName)o=k.getClassName();else{if(k instanceof Object){const I=h?k:Object.getPrototypeOf(k);o=I.constructor.__bjsclassName__,x=I.constructor.__bjsmoduleName__}o||(o=typeof k)}return o?(null!=x?x+".":"")+o:null}static async DelayAsync(k){await new Promise((h=>{setTimeout((()=>{h()}),k)}))}static IsSafari(){return!!(0,I.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function f(k,h){return o=>{o.__bjsclassName__=k,o.__bjsmoduleName__=null!=h?h:null}}W.AssetBaseUrl="",W.UseCustomRequestHeaders=!1,W.CustomRequestHeaders=l.e.CustomRequestHeaders,W.GetDOMTextContent=I.c,W._DefaultCdnUrl="https://cdn.babylonjs.com",W._DefaultAssetsUrl="https://assets.babylonjs.com/core",W.GetAbsoluteUrl="object"===typeof document?k=>{const h=document.createElement("a");return h.href=k,h.href}:"function"===typeof URL&&"object"===typeof location?k=>new URL(k,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},W.NoneLogLevel=q.c.NoneLogLevel,W.MessageLogLevel=q.c.MessageLogLevel,W.WarningLogLevel=q.c.WarningLogLevel,W.ErrorLogLevel=q.c.ErrorLogLevel,W.AllLogLevel=q.c.AllLogLevel,W.IsWindowObjectExist=I.h,W.PerformanceNoneLogLevel=0,W.PerformanceUserMarkLogLevel=1,W.PerformanceConsoleLogLevel=2,W.StartPerformanceCounter=W._StartPerformanceCounterDisabled,W.EndPerformanceCounter=W._EndPerformanceCounterDisabled;class M{constructor(k,h,o){let x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=k,this.index=x-1,this._done=!1,this._fn=h,this._successCallback=o}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(k,h,o){const x=new M(k,h,o,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return x.executeNext(),x}static SyncAsyncForLoop(k,h,o,x,I){let q=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return M.Run(Math.ceil(k/h),(x=>{I&&I()?x.breakLoop():setTimeout((()=>{for(let q=0;q<h;++q){const Y=x.index*h+q;if(Y>=k)break;if(o(Y),I&&I()){x.breakLoop();break}}x.executeNext()}),q)}),x)}}W.Mix=c.j,W.IsExponentOfTwo=c.h,A.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11199:(k,h,o)=>{o.d(h,{e:()=>q,g:()=>I});const x={};function I(k,h){x[k]=h}function q(k){return x[k]}},11112:(k,h,o)=>{o.d(h,{e:()=>x});class x{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(x.CustomRequestHeaders).length>0||x.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const k in x.CustomRequestHeaders){const h=x.CustomRequestHeaders[k];h&&this._xhr.setRequestHeader(k,h)}}_shouldSkipRequestModifications(k){return x.SkipRequestModificationForBabylonCDN&&(k.includes("preview.babylonjs.com")||k.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(k){this._xhr.onprogress=k}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(k){this._xhr.responseType=k}get timeout(){return this._xhr.timeout}set timeout(k){this._xhr.timeout=k}addEventListener(k,h,o){this._xhr.addEventListener(k,h,o)}removeEventListener(k,h,o){this._xhr.removeEventListener(k,h,o)}abort(){this._xhr.abort()}send(k){x.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(k)}open(k,h){for(const o of x.CustomRequestModifiers){if(this._shouldSkipRequestModifications(h))return;h=o(this._xhr,h)||h}h=(h=h.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=h,this._xhr.open(k,h,!0)}setRequestHeader(k,h){this._xhr.setRequestHeader(k,h)}getResponseHeader(k){return this._xhr.getResponseHeader(k)}}x.CustomRequestHeaders={},x.CustomRequestModifiers=new Array,x.SkipRequestModificationForBabylonCDN=!0}}]);