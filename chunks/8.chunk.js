"use strict";(self.zy41qorie9=self.zy41qorie9||[]).push([[8],{12346:(Z,l,C)=>{C.d(l,{d:()=>i});var B=C(12295),x=C(12263),b=C(12354),K=C(12379),f=C(12275);class W{constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,Z&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(Z){this._zOffset!==Z&&(this._zOffset=Z,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(Z){this._zOffsetUnits!==Z&&(this._zOffsetUnits=Z,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(Z){this._cullFace!==Z&&(this._cullFace=Z,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(Z){this._cull!==Z&&(this._cull=Z,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(Z){this._depthFunc!==Z&&(this._depthFunc=Z,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(Z){this._depthMask!==Z&&(this._depthMask=Z,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(Z){this._depthTest!==Z&&(this._depthTest=Z,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(Z){this._frontFace!==Z&&(this._frontFace=Z,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(Z){this.isDirty&&(this._isCullDirty&&(this.cull?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(Z.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(Z.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(Z.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(Z.enable(Z.POLYGON_OFFSET_FILL),Z.polygonOffset(this.zOffset,this.zOffsetUnits)):Z.disable(Z.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(Z.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class J{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(Z){this._func!==Z&&(this._func=Z,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(Z){this._funcRef!==Z&&(this._funcRef=Z,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(Z){this._funcMask!==Z&&(this._funcMask=Z,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(Z){this._opStencilFail!==Z&&(this._opStencilFail=Z,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(Z){this._opDepthFail!==Z&&(this._opDepthFail=Z,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(Z){this._opStencilDepthPass!==Z&&(this._opStencilDepthPass=Z,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(Z){this._mask!==Z&&(this._mask=Z,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(Z){this._enabled!==Z&&(this._enabled=Z,this._isStencilTestDirty=!0)}constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,Z&&this.reset()}reset(){var Z;this.stencilMaterial=void 0,null===(Z=this.stencilGlobal)||void 0===Z||Z.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(Z){var l;if(!Z)return;const C=!this.useStencilGlobalOnly&&!(null===(l=this.stencilMaterial)||void 0===l||!l.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(Z.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(Z.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(Z.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class d{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=d.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=d.KEEP,this.opDepthFail=d.KEEP,this.opStencilDepthPass=d.REPLACE}get stencilFunc(){return this.func}set stencilFunc(Z){this.func=Z}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(Z){this.funcRef=Z}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(Z){this.funcMask=Z}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(Z){this.opStencilFail=Z}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(Z){this.opDepthFail=Z}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(Z){this.opStencilDepthPass=Z}get stencilMask(){return this.mask}set stencilMask(Z){this.mask=Z}get stencilTest(){return this.enabled}set stencilTest(Z){this.enabled=Z}}d.ALWAYS=519,d.KEEP=7680,d.REPLACE=7681;class E{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(Z){this._alphaBlend!==Z&&(this._alphaBlend=Z,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(Z,l,C,B){this._blendConstants[0]===Z&&this._blendConstants[1]===l&&this._blendConstants[2]===C&&this._blendConstants[3]===B||(this._blendConstants[0]=Z,this._blendConstants[1]=l,this._blendConstants[2]=C,this._blendConstants[3]=B,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(Z,l,C,B){this._blendFunctionParameters[0]===Z&&this._blendFunctionParameters[1]===l&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===B||(this._blendFunctionParameters[0]=Z,this._blendFunctionParameters[1]=l,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=B,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(Z,l){this._blendEquationParameters[0]===Z&&this._blendEquationParameters[1]===l||(this._blendEquationParameters[0]=Z,this._blendEquationParameters[1]=l,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(Z){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(Z.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(Z.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(Z.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var G=C(12282),a=C(12382),q=C(12255),z=C(12251),Y=C(12332),P=C(12389);function S(Z,l){if((0,q.l)()){const{requestAnimationFrame:C}=l||window;if("function"===typeof C)return C(Z)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(Z);return setTimeout(Z,16)}class i{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(Z){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get lb(){return this._useReverseDepthBuffer}set lb(Z){Z!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=Z,this._depthCullingState.depthFunc=Z?518:515)}setColorWrite(Z){Z!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=Z)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(Z){if(Z)return this.isNDCHalfZRange?Z.IS_NDC_HALF_ZRANGE="":delete Z.IS_NDC_HALF_ZRANGE,this.lb?Z.USE_REVERSE_DEPTHBUFFER="":delete Z.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?Z.USE_EXACT_SRGB_CONVERSIONS="":delete Z.USE_EXACT_SRGB_CONVERSIONS);{let Z="";return this.isNDCHalfZRange&&(Z+="#define IS_NDC_HALF_ZRANGE"),this.lb&&(Z&&(Z+="\n"),Z+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(Z&&(Z+="\n"),Z+="#define USE_EXACT_SRGB_CONVERSIONS"),Z}}_rebuildInternalTextures(){const Z=this._internalTexturesCache.slice();for(const l of Z)l._rebuild()}_rebuildRenderTargetWrappers(){const Z=this._renderTargetWrapperCache.slice();for(const l of Z)l._rebuild()}_rebuildEffects(){for(const Z in this._compiledEffects){const l=this._compiledEffects[Z];l._pipelineContext=null,l._prepareEffect()}b.Effect.ResetCache()}_rebuildGraphicsResources(){var Z;this.wipeCaches(!0),this._rebuildEffects(),null===(Z=this._rebuildComputeEffects)||void 0===Z||Z.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){x.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(Z){setTimeout((()=>{this._clearEmptyResources();const l=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,B=this._depthCullingState.depthMask,x=this._stencilState.stencilTest;Z(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=l,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=B,this._stencilState.stencilTest=x,this._flagContextRestored()}),0)}get J(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(Z){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(Z){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const Z=new Uint8Array(4),l=[Z,Z,Z,Z,Z,Z];this._emptyCubeTexture=this.createRawCubeTexture(l,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(Z){if(!Z)return this._activeRenderLoops.length=0,void this._cancelFrame();const l=this._activeRenderLoops.indexOf(Z);l>=0&&(this._activeRenderLoops.splice(l,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const Z=this._frameHandler;if(this._frameHandler=0,(0,q.l)()){const{cancelAnimationFrame:l}=this.getHostWindow()||window;if("function"===typeof l)return l(Z)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(Z);return clearTimeout(Z)}}Cb(){this.onBeginFrameObservable.notifyObservers(this)}Bb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(Z){this._maxFPS=Z,void 0!==Z&&(this._minFrameTime=Z<=0?Number.MAX_VALUE:1e3/Z)}_isOverFrameTime(Z){if(!Z||void 0===this._maxFPS)return!1;const l=Z-this._lastFrameTime;return this._lastFrameTime=Z,this._renderAccumulator+=l,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(Z){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(Z)){let Z=!0;(this.J||!this.renderEvenInBackground&&this._windowIsBackground)&&(Z=!1),Z&&(this.Cb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Bb())}}_renderLoop(Z){this._processFrame(Z),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let Z=0;Z<this._activeRenderLoops.length;Z++){(0,this._activeRenderLoops[Z])()}}_renderViews(){return!1}_queueNewFrame(Z,l){return S(Z,l)}runRenderLoop(Z){-1===this._activeRenderLoops.indexOf(Z)&&(this._activeRenderLoops.push(Z),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(Z){this._depthCullingState.depthTest=Z}setZOffset(Z){this._depthCullingState.zOffset=this.lb?-Z:Z}getZOffset(){const Z=this._depthCullingState.zOffset;return this.lb?-Z:Z}setZOffsetUnits(Z){this._depthCullingState.zOffsetUnits=this.lb?-Z:Z}getZOffsetUnits(){const Z=this._depthCullingState.zOffsetUnits;return this.lb?-Z:Z}getHostWindow(){return(0,q.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(Z){this._compatibilityMode=!0}_rebuildTextures(){for(const Z of this.scenes)Z._rebuildTextures();for(const Z of this._virtualScenes)Z._rebuildTextures()}_releaseRenderTargetWrapper(Z){const l=this._renderTargetWrapperCache.indexOf(Z);-1!==l&&this._renderTargetWrapperCache.splice(l,1)}get currentViewport(){return this._cachedViewport}setViewport(Z,l,C){const B=l||this.getRenderWidth(),x=C||this.getRenderHeight(),b=Z.x||0,K=Z.y||0;this._cachedViewport=Z,this._viewport(b*B,K*x,B*Z.width,x*Z.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(Z){return new Path2D(Z)}get description(){let Z=this.name+this.version;return this._caps.parallelShaderCompile&&(Z+=" - Parallel shader compilation"),Z}_createTextureBase(Z,l,C,b){let K=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,W=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,J=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,E=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,G=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,q=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,z=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,Y=arguments.length>13?arguments[13]:void 0,S=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const F="data:"===(Z=Z||"").substring(0,5),n="blob:"===Z.substring(0,5),c=F&&-1!==Z.indexOf(";base64,"),U=G||new a.c(this,1);U!==G&&(U.label=Z.substring(0,60));const t=Z;!this._transformTextureUrl||c||G||E||(Z=this._transformTextureUrl(Z)),t!==Z&&(U._originalUrl=t);const r=Z.lastIndexOf(".");let e=z||(r>-1?Z.substring(r).toLowerCase():"");e.indexOf("?")>-1&&(e=e.split("?")[0]);const o=(0,P.d)(e,Y);b&&b.addPendingData(U),U.url=Z,U.generateMipMaps=!l,U.samplingMode=K,U.invertY=C,U._useSRGBBuffer=this._getUseSRGBBuffer(!!s,l),this._doNotHandleContextLost||(U._buffer=E);let v=null;f&&!G&&(v=U.onLoadedObservable.add(f)),G||this._internalTexturesCache.push(U);const R=(C,G)=>{b&&b.removePendingData(U),Z===t?(v&&U.onLoadedObservable.remove(v),B.b.UseFallbackTexture&&Z!==B.b.FallbackTexture&&this._createTextureBase(B.b.FallbackTexture,l,U.invertY,b,K,null,W,J,d,E,U),C=(C||"Unknown error")+(B.b.UseFallbackTexture?" - Fallback texture was used":""),U.onErrorObservable.notifyObservers({message:C,exception:G}),W&&W(C,G)):(x.e.Warn(`Failed to load ${Z}, falling back to ${t}`),this._createTextureBase(t,l,U.invertY,b,K,f,W,J,d,E,U,q,z,Y,S,s))};if(o){const l=async Z=>{(await o).loadData(Z,U,((Z,l,C,B,x,f)=>{f?R("TextureLoader failed to load data"):J(U,e,b,{width:Z,height:l},U.invertY,!C,B,(()=>(x(),!1)),K)}),S)};E?E instanceof ArrayBuffer?l(new Uint8Array(E)):ArrayBuffer.isView(E)?l(E):W&&W("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(Z,(Z=>{l(new Uint8Array(Z))}),void 0,b?b.offlineProvider:void 0,!0,((Z,l)=>{R("Unable to load "+(Z&&Z.responseURL,l))}))}else{const C=Z=>{n&&!this._doNotHandleContextLost&&(U._buffer=Z),J(U,e,b,Z,U.invertY,l,!1,d,K)};!F||c?E&&("string"===typeof E.decoding||E.close)?C(E):i._FileToolsLoadImage(Z||"",C,R,b?b.offlineProvider:null,Y,U.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof E||E instanceof ArrayBuffer||ArrayBuffer.isView(E)||E instanceof Blob?i._FileToolsLoadImage(E,C,R,b?b.offlineProvider:null,Y,U.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):E&&C(E)}return U}_rebuildBuffers(){for(const Z of this._uniformBuffers)Z._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,q.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const Z in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,Z)&&(this._boundTexturesCache[Z]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(Z){this._name=Z}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(Z){this._hardwareScalingLevel=Z,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(Z){this._doNotHandleContextLost=Z}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(Z,l,C){var x,b;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new W,this._stencilStateComposer=new J,this._stencilState=new d,this._alphaState=new E,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new z.b,this.onCanvasFocusObservable=new z.b,this.onNewSceneAddedObservable=new z.b,this.onResizeObservable=new z.b,this.onCanvasPointerOutObservable=new z.b,this.onEffectErrorObservable=new z.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new z.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=Z=>this._renderLoop(Z),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new z.b,this.onAfterShaderCompilationObservable=new z.b,this.onBeginFrameObservable=new z.b,this.onEndFrameObservable=new z.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new z.b,this.onContextRestoredObservable=new z.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.xb=new z.b,this.onReleaseEffectsObservable=new z.b,B.b.Instances.push(this),this.startTime=f.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,K.b.SetMatrixPrecision(!!l.useHighPrecisionMatrix),(0,q.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=C??!1,l.antialias=Z??l.antialias,l.deterministicLockstep=l.deterministicLockstep??!1,l.lockstepMaxSteps=l.lockstepMaxSteps??4,l.timeStep=l.timeStep??1/60,l.bb=l.bb??!0,this._audioContext=(null===(x=l.audioEngineOptions)||void 0===x?void 0:x.audioContext)??null,this._audioDestination=(null===(b=l.audioEngineOptions)||void 0===b?void 0:b.audioDestination)??null,this.premultipliedAlpha=l.premultipliedAlpha??!0,this._doNotHandleContextLost=!!l.doNotHandleContextLost,this._isStencilEnable=!!l.bb,this.useExactSrgbConversions=l.useExactSrgbConversions??!1;const G=(0,q.l)()&&window.devicePixelRatio||1,a=l.limitDeviceRatio||G;C=C||l.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(a,G):1,this._lastDevicePixelRatio=G,this._creationOptions=l}resize(){let Z,l,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const Z=(0,q.l)()&&window.devicePixelRatio||1,l=this._lastDevicePixelRatio/Z;this._lastDevicePixelRatio=Z,this._hardwareScalingLevel*=l}if((0,q.l)()&&(0,q.e)())if(this._renderingCanvas){var B,x;const C=null===(B=(x=this._renderingCanvas).getBoundingClientRect)||void 0===B?void 0:B.call(x);Z=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,l=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else Z=window.innerWidth,l=window.innerHeight;else Z=this._renderingCanvas?this._renderingCanvas.width:100,l=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(Z/this._hardwareScalingLevel,l/this._hardwareScalingLevel,C)}setSize(Z,l){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(Z|=0,l|=0,!C&&this._renderingCanvas.width===Z&&this._renderingCanvas.height===l)return!1;if(this._renderingCanvas.width=Z,this._renderingCanvas.height=l,this.scenes){for(let Z=0;Z<this.scenes.length;Z++){const l=this.scenes[Z];for(let Z=0;Z<l.cameras.length;Z++){l.cameras[Z]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(Z,l,C,B,x,b,K,f,W,J,d){throw(0,G.d)("engine.rawTexture")}createRawCubeTexture(Z,l,C,B,x,b,K,f){throw(0,G.d)("engine.rawTexture")}createRawTexture3D(Z,l,C,B,x,b,K,f,W,J,d){throw(0,G.d)("engine.rawTexture")}createRawTexture2DArray(Z,l,C,B,x,b,K,f,W,J,d){throw(0,G.d)("engine.rawTexture")}_sharedInit(Z){this._renderingCanvas=Z}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const Z=navigator.userAgent;this.hostInformation.isMobile=-1!==Z.indexOf("Mobile")||-1!==Z.indexOf("Mac")&&(0,q.e)()&&"ontouchend"in document},this._checkForMobile(),(0,q.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(Z){return document.createElement("video")}_reportDrawCall(){var Z;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(Z=this._drawCalls)||void 0===Z||Z.addCount(l,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(Z,l){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(Z,l){return createImageBitmap(Z,l)}resizeImageBitmap(Z,l,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(Z){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(Z,l){if("undefined"===typeof document)return new OffscreenCanvas(Z,l);const C=document.createElement("canvas");return C.width=Z,C.height=l,C}createCanvas(Z,l){return i._CreateCanvas(Z,l)}static _FileToolsLoadImage(Z,l,C,B,x,b,K){throw(0,G.d)("FileTools")}_loadFile(Z,l,C,B,x,b){const K=(0,Y.n)(Z,l,C,B,x,b);return this._activeRequests.push(K),K.onCompleteObservable.add((()=>{const Z=this._activeRequests.indexOf(K);-1!==Z&&this._activeRequests.splice(Z,1)})),K}static _FileToolsLoadFile(Z,l,C,B,x,b){if(Y.c.loadFile)return Y.c.loadFile(Z,l,C,B,x,b);throw(0,G.d)("FileTools")}dispose(){var Z;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(Z=this.releaseComputeEffects)||void 0===Z||Z.call(this),b.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.xb.notifyObservers(this),this.xb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,q.l)()&&window.removeEventListener("resize",this._checkForMobile);const l=B.b.Instances.indexOf(this);l>=0&&B.b.Instances.splice(l,1),B.b.Instances.length||(B.b.OnEnginesDisposedObservable.notifyObservers(this),B.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(Z){throw(0,G.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(Z,l){for(let C=0;C<B.b.Instances.length;C++){const x=B.b.Instances[C];for(let C=0;C<x.scenes.length;C++)x.scenes[C].markAllMaterialsAsDirty(Z,l)}}}i._RenderPassIdCounter=0,i._RescalePostProcessFactory=null,i.CollisionsEpsilon=.001,i.QueueNewFrame=S},12295:(Z,l,C)=>{C.d(l,{b:()=>x});var B=C(12251);class x{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}x.Instances=[],x.OnEnginesDisposedObservable=new B.b,x._LastCreatedScene=null,x.UseFallbackTexture=!0,x.FallbackTexture=""},12379:(Z,l,C)=>{C.d(l,{b:()=>B});class B{static SetMatrixPrecision(Z){if(B.MatrixTrackPrecisionChange=!1,Z&&!B.MatrixUse64Bits&&B.MatrixTrackedMatrices)for(let l=0;l<B.MatrixTrackedMatrices.length;++l){const Z=B.MatrixTrackedMatrices[l],C=Z.Kb;Z.Kb=new Array(16);for(let l=0;l<16;++l)Z.Kb[l]=C[l]}B.MatrixUse64Bits=Z,B.MatrixCurrentType=B.MatrixUse64Bits?Array:Float32Array,B.MatrixTrackedMatrices=null}}B.MatrixUse64Bits=!1,B.MatrixTrackPrecisionChange=!0,B.MatrixCurrentType=Float32Array,B.MatrixTrackedMatrices=[]},12389:(Z,l,C)=>{C.d(l,{d:()=>K});var B=C(12263);const x=new Map;function b(Z,l){(function(Z){return x.delete(Z)})(Z)&&B.e.Warn(`Extension with the name '${Z}' already exists`),x.set(Z,l)}function K(Z,l){"image/ktx"!==l&&"image/ktx2"!==l||(Z=".ktx"),x.has(Z)||(Z.endsWith(".ies")&&b(".ies",(async()=>await C.e(15).then(C.bind(C,14555)).then((Z=>new Z._IESTextureLoader)))),Z.endsWith(".dds")&&b(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,14564)).then((Z=>new Z._DDSTextureLoader)))),Z.endsWith(".basis")&&b(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,14572)).then((Z=>new Z._BasisTextureLoader)))),Z.endsWith(".env")&&b(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,14580)).then((Z=>new Z._ENVTextureLoader)))),Z.endsWith(".hdr")&&b(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,14587)).then((Z=>new Z._HDRTextureLoader)))),(Z.endsWith(".ktx")||Z.endsWith(".ktx2"))&&(b(".ktx",(async()=>await C.e(30).then(C.bind(C,14596)).then((Z=>new Z._KTXTextureLoader)))),b(".ktx2",(async()=>await C.e(30).then(C.bind(C,14596)).then((Z=>new Z._KTXTextureLoader))))),Z.endsWith(".tga")&&b(".tga",(async()=>await C.e(50).then(C.bind(C,14604)).then((Z=>new Z._TGATextureLoader)))),Z.endsWith(".exr")&&b(".exr",(async()=>await C.e(16).then(C.bind(C,14609)).then((Z=>new Z._ExrTextureLoader)))));const B=x.get(Z);return B?Promise.resolve(B(l)):null}},12382:(Z,l,C)=>{C.d(l,{c:()=>K});var B,x=C(12251),b=C(12385);!function(Z){Z[Z.Unknown=0]="Unknown",Z[Z.Url=1]="Url",Z[Z.Temp=2]="Temp",Z[Z.Raw=3]="Raw",Z[Z.Dynamic=4]="Dynamic",Z[Z.RenderTarget=5]="RenderTarget",Z[Z.MultiRenderTarget=6]="MultiRenderTarget",Z[Z.Cube=7]="Cube",Z[Z.CubeRaw=8]="CubeRaw",Z[Z.CubePrefiltered=9]="CubePrefiltered",Z[Z.Raw3D=10]="Raw3D",Z[Z.Raw2DArray=11]="Raw2DArray",Z[Z.DepthStencil=12]="DepthStencil",Z[Z.CubeRawRGBD=13]="CubeRawRGBD",Z[Z.Depth=14]="Depth"}(B||(B={}));class K extends b.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(Z){this.generateMipMaps=Z}get uniqueId(){return this._uniqueId}_setUniqueId(Z){this._uniqueId=Z}getEngine(){return this._engine}get source(){return this._source}constructor(Z,l){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new x.b,this.onErrorObservable=new x.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=Z,this._source=l,this._uniqueId=K._Counter++,C||(this._hardwareTexture=Z._createHardwareTexture())}incrementReferences(){this._references++}updateSize(Z,l){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,Z,l,C),this.width=Z,this.height=l,this.depth=C,this.baseWidth=Z,this.baseHeight=l,this.baseDepth=C,this._size=Z*l*C}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const Z=this.onRebuildCallback(this),l=l=>{l._swapAndDie(this,!1),this.isReady=Z.isReady};return void(Z.isAsync?Z.proxy.then(l):l(Z.proxy))}let Z;switch(this.source){case 2:case 12:case 14:break;case 1:return void(Z=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(Z=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:Z=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),Z._swapAndDie(this,!1),this.isReady=!0;break;case 10:Z=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 11:Z=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 4:Z=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),Z._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(Z=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:Z=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),Z._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return Z=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(Z=>{Z&&Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(Z._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(Z){var l;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(l=this._hardwareTexture)||void 0===l||l.setUsage(Z._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),Z._hardwareTexture=this._hardwareTexture,C&&(Z._isRGBD=this._isRGBD),this._lodTextureHigh&&(Z._lodTextureHigh&&Z._lodTextureHigh.dispose(),Z._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(Z._lodTextureMid&&Z._lodTextureMid.dispose(),Z._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(Z._lodTextureLow&&Z._lodTextureLow.dispose(),Z._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(Z._irradianceTexture&&Z._irradianceTexture.dispose(),Z._irradianceTexture=this._irradianceTexture);const B=this._engine.getLoadedTexturesCache();let x=B.indexOf(this);-1!==x&&B.splice(x,1),x=B.indexOf(Z),-1===x&&B.push(Z)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}K._Counter=0},12385:(Z,l,C)=>{C.d(l,{d:()=>B});class B{get wrapU(){return this._cachedWrapU}set wrapU(Z){this._cachedWrapU=Z}get wrapV(){return this._cachedWrapV}set wrapV(Z){this._cachedWrapV=Z}get wrapR(){return this._cachedWrapR}set wrapR(Z){this._cachedWrapR=Z}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(Z){this._cachedAnisotropicFilteringLevel=Z}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(Z){this._comparisonFunction=Z}get useMipMaps(){return this._useMipMaps}set useMipMaps(Z){this._useMipMaps=Z}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=Z,this._cachedWrapV=l,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=B,this.samplingMode=x,this._comparisonFunction=b,this}compareSampler(Z){return this._cachedWrapU===Z._cachedWrapU&&this._cachedWrapV===Z._cachedWrapV&&this._cachedWrapR===Z._cachedWrapR&&this._cachedAnisotropicFilteringLevel===Z._cachedAnisotropicFilteringLevel&&this.samplingMode===Z.samplingMode&&this._comparisonFunction===Z._comparisonFunction&&this._useMipMaps===Z._useMipMaps}}},12266:(Z,l,C)=>{C.d(l,{d:()=>b});var B=C(12263);const x=(Z,l,C)=>Z?Z.getClassName&&"Mesh"===Z.getClassName()?null:!Z.getClassName||"SubMesh"!==Z.getClassName()&&"PhysicsBody"!==Z.getClassName()?Z.clone?Z.clone():Array.isArray(Z)?Z.slice():C&&"object"===typeof Z?{...Z}:null:Z.clone(l):null;class b{static DeepCopy(Z,l,C,b){let K=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const f=function(Z){const l=[];do{const C=Object.getOwnPropertyNames(Z);for(const Z of C)-1===l.indexOf(Z)&&l.push(Z)}while(Z=Object.getPrototypeOf(Z));return l}(Z);for(const J of f){if("_"===J[0]&&(!b||-1===b.indexOf(J)))continue;if(J.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(J))continue;const f=Z[J],d=typeof f;if("function"!==d)try{if("object"===d)if(f instanceof Uint8Array)l[J]=Uint8Array.from(f);else if(f instanceof Array){if(l[J]=[],f.length>0)if("object"==typeof f[0])for(let Z=0;Z<f.length;Z++){const C=x(f[Z],l,K);-1===l[J].indexOf(C)&&l[J].push(C)}else l[J]=f.slice(0)}else l[J]=x(f,l,K);else l[J]=f}catch(W){B.e.Warn(W.message)}}}}},12307:(Z,l,C)=>{C.d(l,{b:()=>B,f:()=>x,g:()=>b});class B extends Error{}B._setPrototypeOf=Object.setPrototypeOf||((Z,l)=>(Z.__proto__=l,Z));const x={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class b extends B{constructor(Z,l,C){super(Z),this.errorCode=l,this.innerError=C,this.name="RuntimeError",B._setPrototypeOf(this,b.prototype)}}},12298:(Z,l,C)=>{C.d(l,{b:()=>R,e:()=>i,g:()=>r,h:()=>o,n:()=>U,l:()=>Y,p:()=>n,q:()=>c,t:()=>t,x:()=>s});var B=C(12288),x=C(12255),b=C(12251);class K{}K.FilesToLoad={};var f=C(12307),W=C(12316),J=C(12325),d=C(12295),E=C(12263),G=C(12339),a=C(12332),q=C(12346);const z=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class Y extends f.g{constructor(Z,l){super(Z,f.f.LoadFileError),this.name="LoadFileError",f.b._setPrototypeOf(this,Y.prototype),l instanceof B.c?this.request=l:this.file=l}}class P extends f.g{constructor(Z,l){super(Z,f.f.RequestFileError),this.request=l,this.name="RequestFileError",f.b._setPrototypeOf(this,P.prototype)}}class S extends f.g{constructor(Z,l){super(Z,f.f.ReadFileError),this.file=l,this.name="ReadFileError",f.b._setPrototypeOf(this,S.prototype)}}const i={DefaultRetryStrategy:class{static ExponentialBackoff(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,B,x)=>0!==B.status||x>=Z||-1!==C.indexOf("file:")?-1:Math.pow(2,x)*l}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:Z=>Z,ScriptBaseUrl:"",ScriptPreprocessUrl:Z=>Z,CleanUrl:Z=>Z=Z.replace(/#/gm,"%23")},s=(Z,l)=>{if((!Z||0!==Z.indexOf("data:"))&&i.CorsBehavior)if("string"===typeof i.CorsBehavior||i.CorsBehavior instanceof String)l.crossOrigin=i.CorsBehavior;else{const C=i.CorsBehavior(Z);C&&(l.crossOrigin=C)}},F={getRequiredSize:null},n=function(Z,l,C,x){let b,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",J=arguments.length>5?arguments[5]:void 0,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===E||void 0===E||!E._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let G=!1;Z instanceof ArrayBuffer||ArrayBuffer.isView(Z)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(b=URL.createObjectURL(new Blob([Z],{type:f})),G=!0):b=`data:${f};base64,`+(0,W.i)(Z):Z instanceof Blob?(b=URL.createObjectURL(Z),G=!0):(b=i.CleanUrl(Z),b=i.PreprocessUrl(b));const a=l=>{if(C){const B=b||Z.toString();C(`Error while trying to load image: ${0===B.indexOf("http")||B.length<=128?B:B.slice(0,128)+"..."}`,l)}};if(null!==E&&void 0!==E&&E._features.forceBitmapOverHTMLImageElement)return U(b,(B=>{E.createImageBitmap(new Blob([B],{type:f}),{premultiplyAlpha:"none",...J}).then((Z=>{l(Z),G&&URL.revokeObjectURL(b)})).catch((l=>{C&&C("Error while trying to load image: "+Z,l)}))}),void 0,x||void 0,!0,((Z,l)=>{a(l)})),null;const q=new Image;if(F.getRequiredSize){const l=F.getRequiredSize(Z);l.width&&(q.width=l.width),l.height&&(q.height=l.height)}s(b,q);const z=[],Y=()=>{for(const Z of z)Z.target.removeEventListener(Z.name,Z.handler);z.length=0};z.push({target:q,name:"load",handler:()=>{Y(),l(q),G&&q.src&&URL.revokeObjectURL(q.src)}}),z.push({target:q,name:"error",handler:Z=>{Y(),a(Z),G&&q.src&&URL.revokeObjectURL(q.src)}}),z.push({target:document,name:"securitypolicyviolation",handler:Z=>{if(Z.blockedURI!==q.src||"fb"===Z.disposition)return;Y();const l=new Error(`CSP violation of policy ${Z.effectiveDirective} ${Z.blockedURI}. Current policy is ${Z.originalPolicy}`);d.b.UseFallbackTexture=!1,a(l),G&&q.src&&URL.revokeObjectURL(q.src),q.src=""}}),(()=>{for(const Z of z)Z.target.addEventListener(Z.name,Z.handler)})();const P="blob:"===b.substring(0,5),S="data:"===b.substring(0,5),n=()=>{P||S||!B.c.IsCustomRequestAvailable?q.src=b:U(b,((Z,l,C)=>{const B=new Blob([Z],{type:!f&&C?C:f}),x=URL.createObjectURL(B);G=!0,q.src=x}),void 0,x||void 0,!0,((Z,l)=>{a(l)}))},c=()=>{x&&x.loadImage(b,q)};if(!P&&!S&&x&&x.enableTexturesOffline)x.open(c,n);else{if(-1!==b.indexOf("file:")){const Z=decodeURIComponent(b.substring(5).toLowerCase());if(K.FilesToLoad[Z]&&"undefined"!==typeof URL){try{let l;try{l=URL.createObjectURL(K.FilesToLoad[Z])}catch(t){l=URL.createObjectURL(K.FilesToLoad[Z])}q.src=l,G=!0}catch(r){q.src=""}return q}}n()}return q},c=(Z,l,C,B,x)=>{const K=new FileReader,f={onCompleteObservable:new b.b,abort:()=>K.abort()};return K.onloadend=()=>f.onCompleteObservable.notifyObservers(f),x&&(K.onerror=()=>{x(new S(`Unable to read ${Z.name}`,Z))}),K.onload=Z=>{l(Z.target.result)},C&&(K.onprogress=C),B?K.readAsArrayBuffer(Z):K.readAsText(Z),f},U=(Z,l,C,B,x,W,J)=>{if(Z.name)return c(Z,l,C,x,W?Z=>{W(void 0,Z)}:void 0);const d=Z;if(-1!==d.indexOf("file:")){let Z=decodeURIComponent(d.substring(5).toLowerCase());0===Z.indexOf("./")&&(Z=Z.substring(2));const B=K.FilesToLoad[Z];if(B)return c(B,l,C,x,W?Z=>W(void 0,new Y(Z.message,Z.file)):void 0)}const{match:a,type:q}=v(d);if(a){const Z={onCompleteObservable:new b.b,abort:()=>()=>{}};try{const Z=x?R(d):k(d);l(Z,void 0,q)}catch(f){W?W(void 0,f):E.e.Error(f.message||"Failed to parse the Data URL")}return G.c.SetImmediate((()=>{Z.onCompleteObservable.notifyObservers(Z)})),Z}return t(d,((Z,C)=>{l(Z,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,B,x,W?Z=>{W(Z.request,new Y(Z.message,Z.request))}:void 0,J)},t=(Z,l,C,K,f,W,J)=>{Z=i.CleanUrl(Z),Z=i.PreprocessUrl(Z);const d=i.BaseUrl+Z;let G=!1;const a={onCompleteObservable:new b.b,abort:()=>G=!0},q=()=>{let Z,b=new B.c,K=null;const q=()=>{b&&(C&&b.removeEventListener("progress",C),Z&&b.removeEventListener("readystatechange",Z),b.removeEventListener("loadend",z))};let z=()=>{q(),a.onCompleteObservable.notifyObservers(a),a.onCompleteObservable.clear(),C=void 0,Z=null,z=null,W=void 0,J=void 0,l=void 0};a.abort=()=>{G=!0,z&&z(),b&&b.readyState!==(XMLHttpRequest.DONE||4)&&b.abort(),null!==K&&(clearTimeout(K),K=null),b=null};const Y=Z=>{const l=Z.message||"Unknown error";W&&b?W(new P(l,b)):E.e.Error(l)},S=E=>{if(b){if(b.open("GET",d),J)try{J(b)}catch(a){return void Y(a)}f&&(b.responseType="arraybuffer"),C&&b.addEventListener("progress",C),z&&b.addEventListener("loadend",z),Z=()=>{if(!G&&b&&b.readyState===(XMLHttpRequest.DONE||4)){if(Z&&b.removeEventListener("readystatechange",Z),b.status>=200&&b.status<300||0===b.status&&(!(0,x.l)()||e())){const Z=f?b.response:b.responseText;if(null!==Z){try{l&&l(Z,b)}catch(a){Y(a)}return}}const C=i.DefaultRetryStrategy;if(C){const Z=C(d,b,E);if(-1!==Z)return q(),b=new B.c,void(K=setTimeout((()=>S(E+1)),Z))}const J=new P("Error status: "+b.status+" "+b.statusText+" - Unable to load "+d,b);W&&W(J)}},b.addEventListener("readystatechange",Z),b.send()}};S(0)};if(K&&K.enableSceneOffline){const B=Z=>{Z&&Z.status>400?W&&W(Z):q()},x=()=>{K&&K.loadFile(i.BaseUrl+Z,(Z=>{!G&&l&&l(Z),a.onCompleteObservable.notifyObservers(a)}),C?Z=>{!G&&C&&C(Z)}:void 0,B,f)};K.open(x,B)}else q();return a},r=Z=>{const{match:l,type:C}=v(Z);if(l)return C||void 0;const B=Z.lastIndexOf(".");switch(Z.substring(B+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Eb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},e=()=>"undefined"!==typeof location&&"file:"===location.protocol,o=Z=>z.test(Z),v=Z=>{const l=z.exec(Z);if(null===l||0===l.length)return{match:!1,type:""};return{match:!0,type:l[0].replace("data:","").replace("base64,","")}};function R(Z){return(0,W.c)(Z.split(",")[1])}const k=Z=>(0,W.e)(Z.split(",")[1]);let V;q.d._FileToolsLoadImage=n,a.c.loadFile=U,J.m.loadFile=U;((Z,l,C,B,x,b,K,f,W,J)=>{V={DecodeBase64UrlToBinary:Z,DecodeBase64UrlToString:l,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:B,IsFileURL:x,LoadFile:b,LoadImage:K,ReadFile:f,RequestFile:W,SetCorsBehavior:J},Object.defineProperty(V,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(Z){C.DefaultRetryStrategy=Z}}),Object.defineProperty(V,"BaseUrl",{get:function(){return C.BaseUrl},set:function(Z){C.BaseUrl=Z}}),Object.defineProperty(V,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(Z){C.PreprocessUrl=Z}}),Object.defineProperty(V,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(Z){C.CorsBehavior=Z}})})(R,k,i,o,e,U,n,c,t,s)},12403:(Z,l,C)=>{function B(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Z=>{const l=16*Math.random()|0;return("x"===Z?l:3&l|8).toString(16)}))}C.d(l,{d:()=>B})},12391:(Z,l,C)=>{C.d(l,{d:()=>b});var B=C(12263),x=C(12400);class b{static Instantiate(Z){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[Z])return this.RegisteredExternalClasses[Z];const l=(0,x.b)(Z);if(l)return l;B.e.Warn(Z+" not found, you may have missed an import.");const C=Z.split(".");let b=window||this;for(let B=0,x=C.length;B<x;B++)b=b[C[B]];return"function"!==typeof b?null:b}}b.RegisteredExternalClasses={}},12275:(Z,l,C)=>{C.d(l,{d:()=>x});var B=C(12255);class x{static get Now(){return(0,B.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12316:(Z,l,C)=>{C.d(l,{c:()=>K,e:()=>b,g:()=>B,i:()=>x});const B=Z=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(Z);let l="";for(let C=0;C<Z.byteLength;C++)l+=String.fromCharCode(Z[C]);return l},x=Z=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,B,x,b,K,f,W,J="",d=0;const E=ArrayBuffer.isView(Z)?new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength):new Uint8Array(Z);for(;d<E.length;)C=E[d++],B=d<E.length?E[d++]:Number.NaN,x=d<E.length?E[d++]:Number.NaN,b=C>>2,K=(3&C)<<4|B>>4,f=(15&B)<<2|x>>6,W=63&x,isNaN(B)?f=W=64:isNaN(x)&&(W=64),J+=l.charAt(b)+l.charAt(K)+l.charAt(f)+l.charAt(W);return J},b=Z=>atob(Z),K=Z=>{const l=b(Z),C=l.length,B=new Uint8Array(new ArrayBuffer(C));for(let x=0;x<C;x++)B[x]=l.charCodeAt(x);return B.buffer}},12411:(Z,l,C)=>{function B(Z){let l=1;do{l*=2}while(l<Z);return l===Z}function x(Z,l,C){return Z*(1-C)+l*C}function b(Z){const l=K(Z),C=f(Z);return l-Z>Z-C?C:l}function K(Z){return Z--,Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,Z|=Z>>16,++Z}function f(Z){return Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,(Z|=Z>>16)-(Z>>1)}function W(Z,l){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=f(Z);break;case 2:C=b(Z);break;default:C=K(Z)}return Math.min(C,l)}C.d(l,{e:()=>f,h:()=>W,j:()=>B,n:()=>x,o:()=>b})},12248:(Z,l,C)=>{C.r(l),C.d(l,{AsyncLoop:()=>S,Tools:()=>Y,className:()=>P});var B=C(12251),x=C(12255),b=C(12263),K=C(12266),f=C(12275),W=C(12282),J=C(12288),d=C(12295),E=C(12298),G=C(12339),a=C(12391),q=C(12403),z=C(12411);class Y{static get BaseUrl(){return E.e.BaseUrl}static set BaseUrl(Z){E.e.BaseUrl=Z}static get CleanUrl(){return E.e.CleanUrl}static set CleanUrl(Z){E.e.CleanUrl=Z}static IsAbsoluteUrl(Z){return 0===Z.indexOf("//")||-1!==Z.indexOf("://")&&(-1!==Z.indexOf(".")&&(-1!==Z.indexOf("/")&&(!(Z.indexOf(":")>Z.indexOf("/"))&&(Z.indexOf("://")<Z.indexOf(".")||(0===Z.indexOf("data:")||0===Z.indexOf("blob:"))))))}static set ScriptBaseUrl(Z){E.e.ScriptBaseUrl=Z}static get ScriptBaseUrl(){return E.e.ScriptBaseUrl}static set CDNBaseUrl(Z){Y.ScriptBaseUrl=Z,Y.AssetBaseUrl=Z}static set ScriptPreprocessUrl(Z){E.e.ScriptPreprocessUrl=Z}static get ScriptPreprocessUrl(){return E.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return E.e.DefaultRetryStrategy}static set DefaultRetryStrategy(Z){E.e.DefaultRetryStrategy=Z}static get CorsBehavior(){return E.e.CorsBehavior}static set CorsBehavior(Z){E.e.CorsBehavior=Z}static get UseFallbackTexture(){return d.b.UseFallbackTexture}static set UseFallbackTexture(Z){d.b.UseFallbackTexture=Z}static get RegisteredExternalClasses(){return a.d.RegisteredExternalClasses}static set RegisteredExternalClasses(Z){a.d.RegisteredExternalClasses=Z}static get fallbackTexture(){return d.b.FallbackTexture}static set fallbackTexture(Z){d.b.FallbackTexture=Z}static FetchToRef(Z,l,C,B,x,b){const K=4*((Math.abs(Z)*C%C|0)+(Math.abs(l)*B%B|0)*C);b.r=x[K]/255,b.g=x[K+1]/255,b.b=x[K+2]/255,b.a=x[K+3]/255}static Mix(Z,l,C){return 0}static Instantiate(Z){return a.d.Instantiate(Z)}static SetImmediate(Z){G.c.SetImmediate(Z)}static IsExponentOfTwo(Z){return!0}static FloatRound(Z){return Math.fround(Z)}static GetFilename(Z){const l=Z.lastIndexOf("/");return l<0?Z:Z.substring(l+1)}static GetFolderPath(Z){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=Z.lastIndexOf("/");return C<0?l?Z:"":Z.substring(0,C+1)}static ToDegrees(Z){return 180*Z/Math.PI}static ToRadians(Z){return Z*Math.PI/180}static SmoothAngleChange(Z,l){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const B=this.ToRadians(Z),x=this.ToRadians(l);return this.ToDegrees(Math.atan2((1-C)*Math.sin(x)+C*Math.sin(B),(1-C)*Math.cos(x)+C*Math.cos(B)))}static MakeArray(Z,l){return!0===l||void 0!==Z&&null!=Z?Array.isArray(Z)?Z:[Z]:null}static GetPointerPrefix(Z){return(0,x.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(Z,l){(0,E.x)(Z,l)}static SetReferrerPolicyBehavior(Z,l){l.referrerPolicy=Z}static get PreprocessUrl(){return E.e.PreprocessUrl}static set PreprocessUrl(Z){E.e.PreprocessUrl=Z}static LoadImage(Z,l,C,B,x,b){return(0,E.p)(Z,l,C,B,x,b)}static LoadFile(Z,l,C,B,x,b){return(0,E.n)(Z,l,C,B,x,b)}static async LoadFileAsync(Z){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,B)=>{(0,E.n)(Z,(Z=>{C(Z)}),void 0,void 0,l,((Z,l)=>{B(l)}))}))}static GetAssetUrl(Z){if(!Z)return"";if(Y.AssetBaseUrl&&Z.startsWith(Y._DefaultAssetsUrl)){const l="/"===Y.AssetBaseUrl[Y.AssetBaseUrl.length-1]?Y.AssetBaseUrl.substring(0,Y.AssetBaseUrl.length-1):Y.AssetBaseUrl;return Z.replace(Y._DefaultAssetsUrl,l)}return Z}static GetBabylonScriptURL(Z,l){if(!Z)return"";if(Y.ScriptBaseUrl&&Z.startsWith(Y._DefaultCdnUrl)){const l="/"===Y.ScriptBaseUrl[Y.ScriptBaseUrl.length-1]?Y.ScriptBaseUrl.substring(0,Y.ScriptBaseUrl.length-1):Y.ScriptBaseUrl;Z=Z.replace(Y._DefaultCdnUrl,l)}return Z=Y.ScriptPreprocessUrl(Z),l&&(Z=Y.GetAbsoluteUrl(Z)),Z}static LoadBabylonScript(Z,l,C,B){Z=Y.GetBabylonScriptURL(Z),Y.LoadScript(Z,l,C)}static async LoadBabylonScriptAsync(Z){return Z=Y.GetBabylonScriptURL(Z),await Y.LoadScriptAsync(Z)}static LoadScript(Z,l,C,B){let b=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(Z),l&&l()}catch(W){null===C||void 0===C||C(`Unable to load script '${Z}' in worker`,W)}return}if(!(0,x.l)())return void(null===C||void 0===C||C(`Cannot load script '${Z}' outside of a window or a worker`));const K=document.getElementsByTagName("head")[0],f=document.createElement("script");b?(f.setAttribute("type","module"),f.innerText=Z):(f.setAttribute("type","text/javascript"),f.setAttribute("src",Z)),B&&(f.id=B),f.onload=()=>{l&&l()},f.onerror=l=>{C&&C(`Unable to load script '${Z}'`,l)},K.appendChild(f)}static async LoadScriptAsync(Z,l){return await new Promise(((C,B)=>{this.LoadScript(Z,(()=>{C()}),((Z,l)=>{B(l||new Error(Z))}),l)}))}static ReadFileAsDataURL(Z,l,C){const x=new FileReader,b={onCompleteObservable:new B.b,abort:()=>x.abort()};return x.onloadend=()=>{b.onCompleteObservable.notifyObservers(b)},x.onload=Z=>{l(Z.target.result)},x.onprogress=C,x.readAsDataURL(Z),b}static ReadFile(Z,l,C,B,x){return(0,E.q)(Z,l,C,B,x)}static FileAsURL(Z){const l=new Blob([Z]);return window.URL.createObjectURL(l)}static Format(Z){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Z.toFixed(l)}static DeepCopy(Z,l,C,B){K.d.DeepCopy(Z,l,C,B)}static IsEmpty(Z){for(const l in Z)if(Object.prototype.hasOwnProperty.call(Z,l))return!1;return!0}static RegisterTopRootEvents(Z,l){for(let B=0;B<l.length;B++){const x=l[B];Z.addEventListener(x.name,x.handler,!1);try{window.parent&&window.parent.addEventListener(x.name,x.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(Z,l){for(let B=0;B<l.length;B++){const x=l[B];Z.removeEventListener(x.name,x.handler);try{Z.parent&&Z.parent.removeEventListener(x.name,x.handler)}catch(C){}}}static async DumpFramebuffer(Z,l,C,B){throw(0,W.d)("DumpTools")}static DumpData(Z,l,C,B){throw(0,W.d)("DumpTools")}static async DumpDataAsync(Z,l,C){throw(0,W.d)("DumpTools")}static _IsOffScreenCanvas(Z){return void 0!==Z.convertToBlob}static ToBlob(Z,l){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0;Y._IsOffScreenCanvas(Z)||Z.toBlob||(Z.toBlob=function(Z,l,C){setTimeout((()=>{const B=atob(this.toDataURL(l,C).split(",")[1]),x=B.length,b=new Uint8Array(x);for(let Z=0;Z<x;Z++)b[Z]=B.charCodeAt(Z);Z(new Blob([b]))}))}),Y._IsOffScreenCanvas(Z)?Z.convertToBlob({type:C,quality:B}).then((Z=>l(Z))):Z.toBlob((function(Z){l(Z)}),C,B)}static DownloadBlob(Z,l){if("download"in document.createElement("a")){if(!l){const Z=new Date;l="screenshot_"+((Z.getFullYear()+"-"+(Z.getMonth()+1)).slice(2)+"-"+Z.getDate()+"_"+Z.getHours()+"-"+("0"+Z.getMinutes()).slice(-2))+".png"}Y.Download(Z,l)}else if(Z&&"undefined"!==typeof URL){const l=URL.createObjectURL(Z),C=window.open("");if(!C)return;const B=C.document.createElement("img");B.onload=function(){URL.revokeObjectURL(l)},B.src=l,C.document.body.appendChild(B)}}static EncodeScreenshotCanvasData(Z,l){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",B=arguments.length>3?arguments[3]:void 0,x=arguments.length>4?arguments[4]:void 0;if("string"!==typeof B&&l){if(l){if(Y._IsOffScreenCanvas(Z))return void Z.convertToBlob({type:C,quality:x}).then((Z=>{const C=new FileReader;C.readAsDataURL(Z),C.onloadend=()=>{const Z=C.result;l(Z)}}));const B=Z.toDataURL(C,x);l(B)}}else this.ToBlob(Z,(function(Z){Z&&Y.DownloadBlob(Z,B),l&&l("")}),C,x)}static Download(Z,l){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(Z),B=document.createElement("a");document.body.appendChild(B),B.style.display="none",B.href=C,B.download=l,B.addEventListener("click",(()=>{B.parentElement&&B.parentElement.removeChild(B)})),B.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(Z){return"boolean"===typeof Z[0]?Z[0]:"boolean"===typeof Z[1]&&Z[1]}static CreateScreenshot(Z,l,C,B){throw(0,W.d)("ScreenshotTools")}static async CreateScreenshotAsync(Z,l,C){throw(0,W.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(Z,l,C,B){throw(0,W.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(Z,l,C){throw(0,W.d)("ScreenshotTools")}static RandomId(){return(0,q.d)()}static IsBase64(Z){return(0,E.h)(Z)}static DecodeBase64(Z){return(0,E.b)(Z)}static get errorsCount(){return b.e.errorsCount}static Log(Z){b.e.Log(Z)}static Warn(Z){b.e.Warn(Z)}static Error(Z){b.e.Error(Z)}static get LogCache(){return b.e.LogCache}static ClearLogCache(){b.e.ClearLogCache()}static set LogLevels(Z){b.e.LogLevels=Z}static set PerformanceLogLevel(Z){return(Z&Y.PerformanceUserMarkLogLevel)===Y.PerformanceUserMarkLogLevel?(Y.StartPerformanceCounter=Y._StartUserMark,void(Y.EndPerformanceCounter=Y._EndUserMark)):(Z&Y.PerformanceConsoleLogLevel)===Y.PerformanceConsoleLogLevel?(Y.StartPerformanceCounter=Y._StartPerformanceConsole,void(Y.EndPerformanceCounter=Y._EndPerformanceConsole)):(Y.StartPerformanceCounter=Y._StartPerformanceCounterDisabled,void(Y.EndPerformanceCounter=Y._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(Z,l){}static _EndPerformanceCounterDisabled(Z,l){}static _StartUserMark(Z){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Y._Performance){if(!(0,x.l)())return;Y._Performance=window.performance}l&&Y._Performance.mark&&Y._Performance.mark(Z+"-Begin")}static _EndUserMark(Z){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&Y._Performance.mark&&(Y._Performance.mark(Z+"-End"),Y._Performance.measure(Z,Z+"-Begin",Z+"-End"))}static _StartPerformanceConsole(Z){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l&&(Y._StartUserMark(Z,l),console.time&&console.time(Z))}static _EndPerformanceConsole(Z){let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l&&(Y._EndUserMark(Z,l),console.timeEnd(Z))}static get Now(){return f.d.Now}static GetClassName(Z){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!l&&Z.getClassName)C=Z.getClassName();else{if(Z instanceof Object){C=(l?Z:Object.getPrototypeOf(Z)).constructor.__bjsclassName__}C||(C=typeof Z)}return C}static First(Z,l){for(const C of Z)if(l(C))return C;return null}static getFullClassName(Z){let l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,B=null;if(!l&&Z.getClassName)C=Z.getClassName();else{if(Z instanceof Object){const x=l?Z:Object.getPrototypeOf(Z);C=x.constructor.__bjsclassName__,B=x.constructor.__bjsmoduleName__}C||(C=typeof Z)}return C?(null!=B?B+".":"")+C:null}static async DelayAsync(Z){await new Promise((l=>{setTimeout((()=>{l()}),Z)}))}static IsSafari(){return!!(0,x.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function P(Z,l){return C=>{C.__bjsclassName__=Z,C.__bjsmoduleName__=null!=l?l:null}}Y.AssetBaseUrl="",Y.UseCustomRequestHeaders=!1,Y.CustomRequestHeaders=J.c.CustomRequestHeaders,Y.GetDOMTextContent=x.c,Y._DefaultCdnUrl="https://cdn.babylonjs.com",Y._DefaultAssetsUrl="https://assets.babylonjs.com/core",Y.GetAbsoluteUrl="object"===typeof document?Z=>{const l=document.createElement("a");return l.href=Z,l.href}:"function"===typeof URL&&"object"===typeof location?Z=>new URL(Z,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},Y.NoneLogLevel=b.e.NoneLogLevel,Y.MessageLogLevel=b.e.MessageLogLevel,Y.WarningLogLevel=b.e.WarningLogLevel,Y.ErrorLogLevel=b.e.ErrorLogLevel,Y.AllLogLevel=b.e.AllLogLevel,Y.IsWindowObjectExist=x.l,Y.PerformanceNoneLogLevel=0,Y.PerformanceUserMarkLogLevel=1,Y.PerformanceConsoleLogLevel=2,Y.StartPerformanceCounter=Y._StartPerformanceCounterDisabled,Y.EndPerformanceCounter=Y._EndPerformanceCounterDisabled;class S{constructor(Z,l,C){let B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=Z,this.index=B-1,this._done=!1,this._fn=l,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(Z,l,C){const B=new S(Z,l,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return B.executeNext(),B}static SyncAsyncForLoop(Z,l,C,B,x){let b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return S.Run(Math.ceil(Z/l),(B=>{x&&x()?B.breakLoop():setTimeout((()=>{for(let b=0;b<l;++b){const K=B.index*l+b;if(K>=Z)break;if(C(K),x&&x()){B.breakLoop();break}}B.executeNext()}),b)}),B)}}Y.Mix=z.n,Y.IsExponentOfTwo=z.j,d.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12400:(Z,l,C)=>{C.d(l,{b:()=>b,c:()=>x});const B={};function x(Z,l){B[Z]=l}function b(Z){return B[Z]}},12288:(Z,l,C)=>{C.d(l,{c:()=>B});class B{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(B.CustomRequestHeaders).length>0||B.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const Z in B.CustomRequestHeaders){const l=B.CustomRequestHeaders[Z];l&&this._xhr.setRequestHeader(Z,l)}}_shouldSkipRequestModifications(Z){return B.SkipRequestModificationForBabylonCDN&&(Z.includes("preview.babylonjs.com")||Z.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(Z){this._xhr.onprogress=Z}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(Z){this._xhr.responseType=Z}get timeout(){return this._xhr.timeout}set timeout(Z){this._xhr.timeout=Z}addEventListener(Z,l,C){this._xhr.addEventListener(Z,l,C)}removeEventListener(Z,l,C){this._xhr.removeEventListener(Z,l,C)}abort(){this._xhr.abort()}send(Z){B.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(Z)}open(Z,l){for(const C of B.CustomRequestModifiers){if(this._shouldSkipRequestModifications(l))return;l=C(this._xhr,l)||l}l=(l=l.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=l,this._xhr.open(Z,l,!0)}setRequestHeader(Z,l){this._xhr.setRequestHeader(Z,l)}getResponseHeader(Z){return this._xhr.getResponseHeader(Z)}}B.CustomRequestHeaders={},B.CustomRequestModifiers=new Array,B.SkipRequestModificationForBabylonCDN=!0}}]);