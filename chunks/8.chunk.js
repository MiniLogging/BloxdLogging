"use strict";(self.vb3rpbgyozo=self.vb3rpbgyozo||[]).push([[8],{12656:(q,I,l)=>{l.d(I,{d:()=>v});var w=l(12612),t=l(12591),O=l(12660),c=l(12683),a=l(12601);class F{constructor(){let q=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,q&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(q){this._zOffset!==q&&(this._zOffset=q,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(q){this._zOffsetUnits!==q&&(this._zOffsetUnits=q,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(q){this._cullFace!==q&&(this._cullFace=q,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(q){this._cull!==q&&(this._cull=q,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(q){this._depthFunc!==q&&(this._depthFunc=q,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(q){this._depthMask!==q&&(this._depthMask=q,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(q){this._depthTest!==q&&(this._depthTest=q,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(q){this._frontFace!==q&&(this._frontFace=q,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(q){this.isDirty&&(this._isCullDirty&&(this.cull?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(q.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(q.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(q.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(q.enable(q.POLYGON_OFFSET_FILL),q.polygonOffset(this.zOffset,this.zOffsetUnits)):q.disable(q.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(q.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class s{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(q){this._func!==q&&(this._func=q,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(q){this._funcRef!==q&&(this._funcRef=q,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(q){this._funcMask!==q&&(this._funcMask=q,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(q){this._opStencilFail!==q&&(this._opStencilFail=q,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(q){this._opDepthFail!==q&&(this._opDepthFail=q,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(q){this._opStencilDepthPass!==q&&(this._opStencilDepthPass=q,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(q){this._mask!==q&&(this._mask=q,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(q){this._enabled!==q&&(this._enabled=q,this._isStencilTestDirty=!0)}constructor(){let q=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,q&&this.reset()}reset(){var q;this.stencilMaterial=void 0,null===(q=this.stencilGlobal)||void 0===q||q.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(q){var I;if(!q)return;const l=!this.useStencilGlobalOnly&&!(null===(I=this.stencilMaterial)||void 0===I||!I.enabled);this.enabled=l?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=l?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=l?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=l?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=l?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=l?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=l?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=l?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(q.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(q.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(q.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class Z{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=Z.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=Z.KEEP,this.opDepthFail=Z.KEEP,this.opStencilDepthPass=Z.REPLACE}get stencilFunc(){return this.func}set stencilFunc(q){this.func=q}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(q){this.funcRef=q}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(q){this.funcMask=q}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(q){this.opStencilFail=q}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(q){this.opDepthFail=q}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(q){this.opStencilDepthPass=q}get stencilMask(){return this.mask}set stencilMask(q){this.mask=q}get stencilTest(){return this.enabled}set stencilTest(q){this.enabled=q}}Z.ALWAYS=519,Z.KEEP=7680,Z.REPLACE=7681;class r{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(q){this._alphaBlend!==q&&(this._alphaBlend=q,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(q,I,l,w){this._blendConstants[0]===q&&this._blendConstants[1]===I&&this._blendConstants[2]===l&&this._blendConstants[3]===w||(this._blendConstants[0]=q,this._blendConstants[1]=I,this._blendConstants[2]=l,this._blendConstants[3]=w,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(q,I,l,w){this._blendFunctionParameters[0]===q&&this._blendFunctionParameters[1]===I&&this._blendFunctionParameters[2]===l&&this._blendFunctionParameters[3]===w||(this._blendFunctionParameters[0]=q,this._blendFunctionParameters[1]=I,this._blendFunctionParameters[2]=l,this._blendFunctionParameters[3]=w,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(q,I){this._blendEquationParameters[0]===q&&this._blendEquationParameters[1]===I||(this._blendEquationParameters[0]=q,this._blendEquationParameters[1]=I,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(q){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?q.enable(q.BLEND):q.disable(q.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(q.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(q.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(q.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var x=l(12603),o=l(12687),d=l(12582),T=l(12573),V=l(12641),U=l(12700);function B(q,I){if((0,d.f)()){const{requestAnimationFrame:l}=I||window;if("function"===typeof l)return l(q)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(q);return setTimeout(q,16)}class v{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(q){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Ic(){return this._useReverseDepthBuffer}set Ic(q){q!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=q,this._depthCullingState.depthFunc=q?518:515)}setColorWrite(q){q!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=q)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(q){if(q)return this.isNDCHalfZRange?q.IS_NDC_HALF_ZRANGE="":delete q.IS_NDC_HALF_ZRANGE,this.Ic?q.USE_REVERSE_DEPTHBUFFER="":delete q.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?q.USE_EXACT_SRGB_CONVERSIONS="":delete q.USE_EXACT_SRGB_CONVERSIONS);{let q="";return this.isNDCHalfZRange&&(q+="#define IS_NDC_HALF_ZRANGE"),this.Ic&&(q&&(q+="\n"),q+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(q&&(q+="\n"),q+="#define USE_EXACT_SRGB_CONVERSIONS"),q}}_rebuildInternalTextures(){const q=this._internalTexturesCache.slice();for(const I of q)I._rebuild()}_rebuildRenderTargetWrappers(){const q=this._renderTargetWrapperCache.slice();for(const I of q)I._rebuild()}_rebuildEffects(){for(const q in this._compiledEffects){const I=this._compiledEffects[q];I._pipelineContext=null,I._prepareEffect()}O.Effect.ResetCache()}_rebuildGraphicsResources(){var q;this.wipeCaches(!0),this._rebuildEffects(),null===(q=this._rebuildComputeEffects)||void 0===q||q.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){t.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(q){setTimeout((()=>{this._clearEmptyResources();const I=this._depthCullingState.depthTest,l=this._depthCullingState.depthFunc,w=this._depthCullingState.depthMask,t=this._stencilState.stencilTest;q(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=I,this._depthCullingState.depthFunc=l,this._depthCullingState.depthMask=w,this._stencilState.stencilTest=t,this._flagContextRestored()}),0)}get Z(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(q){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(q){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const q=new Uint8Array(4),I=[q,q,q,q,q,q];this._emptyCubeTexture=this.createRawCubeTexture(I,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(q){if(!q)return this._activeRenderLoops.length=0,void this._cancelFrame();const I=this._activeRenderLoops.indexOf(q);I>=0&&(this._activeRenderLoops.splice(I,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const q=this._frameHandler;if(this._frameHandler=0,(0,d.f)()){const{cancelAnimationFrame:I}=this.getHostWindow()||window;if("function"===typeof I)return I(q)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(q);return clearTimeout(q)}}lc(){this.onBeginFrameObservable.notifyObservers(this)}wc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(q){this._maxFPS=q,void 0!==q&&(this._minFrameTime=q<=0?Number.MAX_VALUE:1e3/q)}_isOverFrameTime(q){if(!q||void 0===this._maxFPS)return!1;const I=q-this._lastFrameTime;return this._lastFrameTime=q,this._renderAccumulator+=I,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(q){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(q)){let q=!0;(this.Z||!this.renderEvenInBackground&&this._windowIsBackground)&&(q=!1),q&&(this.lc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.wc())}}_renderLoop(q){this._processFrame(q),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let q=0;q<this._activeRenderLoops.length;q++){(0,this._activeRenderLoops[q])()}}_renderViews(){return!1}_queueNewFrame(q,I){return B(q,I)}runRenderLoop(q){-1===this._activeRenderLoops.indexOf(q)&&(this._activeRenderLoops.push(q),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(q){this._depthCullingState.depthTest=q}setZOffset(q){this._depthCullingState.zOffset=this.Ic?-q:q}getZOffset(){const q=this._depthCullingState.zOffset;return this.Ic?-q:q}setZOffsetUnits(q){this._depthCullingState.zOffsetUnits=this.Ic?-q:q}getZOffsetUnits(){const q=this._depthCullingState.zOffsetUnits;return this.Ic?-q:q}getHostWindow(){return(0,d.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(q){this._compatibilityMode=!0}_rebuildTextures(){for(const q of this.scenes)q._rebuildTextures();for(const q of this._virtualScenes)q._rebuildTextures()}_releaseRenderTargetWrapper(q){const I=this._renderTargetWrapperCache.indexOf(q);-1!==I&&this._renderTargetWrapperCache.splice(I,1)}get currentViewport(){return this._cachedViewport}setViewport(q,I,l){const w=I||this.getRenderWidth(),t=l||this.getRenderHeight(),O=q.x||0,c=q.y||0;this._cachedViewport=q,this._viewport(O*w,c*t,w*q.width,t*q.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(q){return new Path2D(q)}get description(){let q=this.name+this.version;return this._caps.parallelShaderCompile&&(q+=" - Parallel shader compilation"),q}_createTextureBase(q,I,l,O){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7?arguments[7]:void 0,Z=arguments.length>8?arguments[8]:void 0,r=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,x=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,T=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,V=arguments.length>13?arguments[13]:void 0,B=arguments.length>14?arguments[14]:void 0,k=arguments.length>15?arguments[15]:void 0;const C="data:"===(q=q||"").substring(0,5),R="blob:"===q.substring(0,5),W=C&&-1!==q.indexOf(";base64,"),e=x||new o.b(this,1);e!==x&&(e.label=q.substring(0,60));const i=q;!this._transformTextureUrl||W||x||r||(q=this._transformTextureUrl(q)),i!==q&&(e._originalUrl=i);const S=q.lastIndexOf(".");let g=T||(S>-1?q.substring(S).toLowerCase():"");g.indexOf("?")>-1&&(g=g.split("?")[0]);const p=(0,U.b)(g,V);O&&O.addPendingData(e),e.url=q,e.generateMipMaps=!I,e.samplingMode=c,e.invertY=l,e._useSRGBBuffer=this._getUseSRGBBuffer(!!k,I),this._doNotHandleContextLost||(e._buffer=r);let X=null;a&&!x&&(X=e.onLoadedObservable.add(a)),x||this._internalTexturesCache.push(e);const K=(l,x)=>{O&&O.removePendingData(e),q===i?(X&&e.onLoadedObservable.remove(X),w.e.UseFallbackTexture&&q!==w.e.FallbackTexture&&this._createTextureBase(w.e.FallbackTexture,I,e.invertY,O,c,null,F,s,Z,r,e),l=(l||"Unknown error")+(w.e.UseFallbackTexture?" - Fallback texture was used":""),e.onErrorObservable.notifyObservers({message:l,exception:x}),F&&F(l,x)):(t.b.Warn(`Failed to load ${q}, falling back to ${i}`),this._createTextureBase(i,I,e.invertY,O,c,a,F,s,Z,r,e,d,T,V,B,k))};if(p){const I=async q=>{(await p).loadData(q,e,((q,I,l,w,t,a)=>{a?K("TextureLoader failed to load data"):s(e,g,O,{width:q,height:I},e.invertY,!l,w,(()=>(t(),!1)),c)}),B)};r?r instanceof ArrayBuffer?I(new Uint8Array(r)):ArrayBuffer.isView(r)?I(r):F&&F("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(q,(q=>{I(new Uint8Array(q))}),void 0,O?O.offlineProvider:void 0,!0,((q,I)=>{K("Unable to load "+(q&&q.responseURL,I))}))}else{const l=q=>{R&&!this._doNotHandleContextLost&&(e._buffer=q),s(e,g,O,q,e.invertY,I,!1,Z,c)};!C||W?r&&("string"===typeof r.decoding||r.close)?l(r):v._FileToolsLoadImage(q||"",l,K,O?O.offlineProvider:null,V,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof r||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||r instanceof Blob?v._FileToolsLoadImage(r,l,K,O?O.offlineProvider:null,V,e.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):r&&l(r)}return e}_rebuildBuffers(){for(const q of this._uniformBuffers)q._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,d.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const q in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,q)&&(this._boundTexturesCache[q]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(q){this._name=q}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(q){this._hardwareScalingLevel=q,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(q){this._doNotHandleContextLost=q}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(q,I,l){var t,O;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new F,this._stencilStateComposer=new s,this._stencilState=new Z,this._alphaState=new r,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new T.d,this.onCanvasFocusObservable=new T.d,this.onNewSceneAddedObservable=new T.d,this.onResizeObservable=new T.d,this.onCanvasPointerOutObservable=new T.d,this.onEffectErrorObservable=new T.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new T.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=q=>this._renderLoop(q),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new T.d,this.onAfterShaderCompilationObservable=new T.d,this.onBeginFrameObservable=new T.d,this.onEndFrameObservable=new T.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new T.d,this.onContextRestoredObservable=new T.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.tc=new T.d,this.onReleaseEffectsObservable=new T.d,w.e.Instances.push(this),this.startTime=a.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,c.b.SetMatrixPrecision(!!I.useHighPrecisionMatrix),(0,d.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=l??!1,I.antialias=q??I.antialias,I.deterministicLockstep=I.deterministicLockstep??!1,I.lockstepMaxSteps=I.lockstepMaxSteps??4,I.timeStep=I.timeStep??1/60,I.cc=I.cc??!0,this._audioContext=(null===(t=I.audioEngineOptions)||void 0===t?void 0:t.audioContext)??null,this._audioDestination=(null===(O=I.audioEngineOptions)||void 0===O?void 0:O.audioDestination)??null,this.premultipliedAlpha=I.premultipliedAlpha??!0,this._doNotHandleContextLost=!!I.doNotHandleContextLost,this._isStencilEnable=!!I.cc,this.useExactSrgbConversions=I.useExactSrgbConversions??!1;const x=(0,d.f)()&&window.devicePixelRatio||1,o=I.limitDeviceRatio||x;l=l||I.adaptToDeviceRatio||!1,this._hardwareScalingLevel=l?1/Math.min(o,x):1,this._lastDevicePixelRatio=x,this._creationOptions=I}resize(){let q,I,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const q=(0,d.f)()&&window.devicePixelRatio||1,I=this._lastDevicePixelRatio/q;this._lastDevicePixelRatio=q,this._hardwareScalingLevel*=I}if((0,d.f)()&&(0,d.d)())if(this._renderingCanvas){var w,t;const l=null===(w=(t=this._renderingCanvas).getBoundingClientRect)||void 0===w?void 0:w.call(t);q=this._renderingCanvas.clientWidth||(null===l||void 0===l?void 0:l.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,I=this._renderingCanvas.clientHeight||(null===l||void 0===l?void 0:l.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else q=window.innerWidth,I=window.innerHeight;else q=this._renderingCanvas?this._renderingCanvas.width:100,I=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(q/this._hardwareScalingLevel,I/this._hardwareScalingLevel,l)}setSize(q,I){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(q|=0,I|=0,!l&&this._renderingCanvas.width===q&&this._renderingCanvas.height===I)return!1;if(this._renderingCanvas.width=q,this._renderingCanvas.height=I,this.scenes){for(let q=0;q<this.scenes.length;q++){const I=this.scenes[q];for(let q=0;q<I.cameras.length;q++){I.cameras[q]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(q,I,l,w,t,O,c,a,F,s,Z){throw(0,x.b)("engine.rawTexture")}createRawCubeTexture(q,I,l,w,t,O,c,a){throw(0,x.b)("engine.rawTexture")}createRawTexture3D(q,I,l,w,t,O,c,a,F,s,Z){throw(0,x.b)("engine.rawTexture")}createRawTexture2DArray(q,I,l,w,t,O,c,a,F,s,Z){throw(0,x.b)("engine.rawTexture")}_sharedInit(q){this._renderingCanvas=q}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const q=navigator.userAgent;this.hostInformation.isMobile=-1!==q.indexOf("Mobile")||-1!==q.indexOf("Mac")&&(0,d.d)()&&"ontouchend"in document},this._checkForMobile(),(0,d.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(q){return document.createElement("video")}_reportDrawCall(){var q;let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(q=this._drawCalls)||void 0===q||q.addCount(I,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(q,I){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(q,I){return createImageBitmap(q,I)}resizeImageBitmap(q,I,l){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(q){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(q,I){if("undefined"===typeof document)return new OffscreenCanvas(q,I);const l=document.createElement("canvas");return l.width=q,l.height=I,l}createCanvas(q,I){return v._CreateCanvas(q,I)}static _FileToolsLoadImage(q,I,l,w,t,O,c){throw(0,x.b)("FileTools")}_loadFile(q,I,l,w,t,O){const c=(0,V.k)(q,I,l,w,t,O);return this._activeRequests.push(c),c.onCompleteObservable.add((()=>{const q=this._activeRequests.indexOf(c);-1!==q&&this._activeRequests.splice(q,1)})),c}static _FileToolsLoadFile(q,I,l,w,t,O){if(V.c.loadFile)return V.c.loadFile(q,I,l,w,t,O);throw(0,x.b)("FileTools")}dispose(){var q;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(q=this.releaseComputeEffects)||void 0===q||q.call(this),O.Effect.ResetCache();for(const l of this._activeRequests)l.abort();this._boundRenderFunction=null,this.tc.notifyObservers(this),this.tc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,d.f)()&&window.removeEventListener("resize",this._checkForMobile);const I=w.e.Instances.indexOf(this);I>=0&&w.e.Instances.splice(I,1),w.e.Instances.length||(w.e.OnEnginesDisposedObservable.notifyObservers(this),w.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(q){throw(0,x.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(q,I){for(let l=0;l<w.e.Instances.length;l++){const t=w.e.Instances[l];for(let l=0;l<t.scenes.length;l++)t.scenes[l].markAllMaterialsAsDirty(q,I)}}}v._RenderPassIdCounter=0,v._RescalePostProcessFactory=null,v.CollisionsEpsilon=.001,v.QueueNewFrame=B},12612:(q,I,l)=>{l.d(I,{e:()=>t});var w=l(12573);class t{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}t.Instances=[],t.OnEnginesDisposedObservable=new w.d,t._LastCreatedScene=null,t.UseFallbackTexture=!0,t.FallbackTexture=""},12683:(q,I,l)=>{l.d(I,{b:()=>w});class w{static SetMatrixPrecision(q){if(w.MatrixTrackPrecisionChange=!1,q&&!w.MatrixUse64Bits&&w.MatrixTrackedMatrices)for(let I=0;I<w.MatrixTrackedMatrices.length;++I){const q=w.MatrixTrackedMatrices[I],l=q.ac;q.ac=new Array(16);for(let I=0;I<16;++I)q.ac[I]=l[I]}w.MatrixUse64Bits=q,w.MatrixCurrentType=w.MatrixUse64Bits?Array:Float32Array,w.MatrixTrackedMatrices=null}}w.MatrixUse64Bits=!1,w.MatrixTrackPrecisionChange=!0,w.MatrixCurrentType=Float32Array,w.MatrixTrackedMatrices=[]},12700:(q,I,l)=>{l.d(I,{b:()=>c});var w=l(12591);const t=new Map;function O(q,I){(function(q){return t.delete(q)})(q)&&w.b.Warn(`Extension with the name '${q}' already exists`),t.set(q,I)}function c(q,I){"image/ktx"!==I&&"image/ktx2"!==I||(q=".ktx"),t.has(q)||(q.endsWith(".ies")&&O(".ies",(async()=>await l.e(15).then(l.bind(l,15184)).then((q=>new q._IESTextureLoader)))),q.endsWith(".dds")&&O(".dds",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(19),l.e(18),l.e(28)]).then(l.bind(l,15186)).then((q=>new q._DDSTextureLoader)))),q.endsWith(".basis")&&O(".basis",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(47)]).then(l.bind(l,15197)).then((q=>new q._BasisTextureLoader)))),q.endsWith(".env")&&O(".env",(async()=>await Promise.all([l.e(14),l.e(17),l.e(13),l.e(19),l.e(18),l.e(23),l.e(21),l.e(45),l.e(48)]).then(l.bind(l,15199)).then((q=>new q._ENVTextureLoader)))),q.endsWith(".hdr")&&O(".hdr",(async()=>await Promise.all([l.e(14),l.e(49)]).then(l.bind(l,15204)).then((q=>new q._HDRTextureLoader)))),(q.endsWith(".ktx")||q.endsWith(".ktx2"))&&(O(".ktx",(async()=>await l.e(30).then(l.bind(l,15211)).then((q=>new q._KTXTextureLoader)))),O(".ktx2",(async()=>await l.e(30).then(l.bind(l,15211)).then((q=>new q._KTXTextureLoader))))),q.endsWith(".tga")&&O(".tga",(async()=>await l.e(50).then(l.bind(l,15214)).then((q=>new q._TGATextureLoader)))),q.endsWith(".exr")&&O(".exr",(async()=>await l.e(16).then(l.bind(l,15217)).then((q=>new q._ExrTextureLoader)))));const w=t.get(q);return w?Promise.resolve(w(I)):null}},12687:(q,I,l)=>{l.d(I,{b:()=>c});var w,t=l(12573),O=l(12696);!function(q){q[q.Unknown=0]="Unknown",q[q.Url=1]="Url",q[q.Temp=2]="Temp",q[q.Raw=3]="Raw",q[q.Dynamic=4]="Dynamic",q[q.RenderTarget=5]="RenderTarget",q[q.MultiRenderTarget=6]="MultiRenderTarget",q[q.Cube=7]="Cube",q[q.CubeRaw=8]="CubeRaw",q[q.CubePrefiltered=9]="CubePrefiltered",q[q.Raw3D=10]="Raw3D",q[q.Raw2DArray=11]="Raw2DArray",q[q.DepthStencil=12]="DepthStencil",q[q.CubeRawRGBD=13]="CubeRawRGBD",q[q.Depth=14]="Depth"}(w||(w={}));class c extends O.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(q){this.generateMipMaps=q}get uniqueId(){return this._uniqueId}_setUniqueId(q){this._uniqueId=q}getEngine(){return this._engine}get source(){return this._source}constructor(q,I){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new t.d,this.onErrorObservable=new t.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=q,this._source=I,this._uniqueId=c._Counter++,l||(this._hardwareTexture=q._createHardwareTexture())}incrementReferences(){this._references++}updateSize(q,I){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,q,I,l),this.width=q,this.height=I,this.depth=l,this.baseWidth=q,this.baseHeight=I,this.baseDepth=l,this._size=q*I*l}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const q=this.onRebuildCallback(this),I=I=>{I._swapAndDie(this,!1),this.isReady=q.isReady};return void(q.isAsync?q.proxy.then(I):I(q.proxy))}let q;switch(this.source){case 2:case 12:case 14:break;case 1:return void(q=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(q=>{q._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:q=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),q._swapAndDie(this,!1),this.isReady=!0;break;case 10:q=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),q._swapAndDie(this,!1),this.isReady=!0;break;case 11:q=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),q._swapAndDie(this,!1),this.isReady=!0;break;case 4:q=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),q._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(q=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{q._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:q=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),q._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return q=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(q=>{q&&q._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(q._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(q){var I;let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(I=this._hardwareTexture)||void 0===I||I.setUsage(q._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),q._hardwareTexture=this._hardwareTexture,l&&(q._isRGBD=this._isRGBD),this._lodTextureHigh&&(q._lodTextureHigh&&q._lodTextureHigh.dispose(),q._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(q._lodTextureMid&&q._lodTextureMid.dispose(),q._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(q._lodTextureLow&&q._lodTextureLow.dispose(),q._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(q._irradianceTexture&&q._irradianceTexture.dispose(),q._irradianceTexture=this._irradianceTexture);const w=this._engine.getLoadedTexturesCache();let t=w.indexOf(this);-1!==t&&w.splice(t,1),t=w.indexOf(q),-1===t&&w.push(q)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}c._Counter=0},12696:(q,I,l)=>{l.d(I,{b:()=>w});class w{get wrapU(){return this._cachedWrapU}set wrapU(q){this._cachedWrapU=q}get wrapV(){return this._cachedWrapV}set wrapV(q){this._cachedWrapV=q}get wrapR(){return this._cachedWrapR}set wrapR(q){this._cachedWrapR=q}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(q){this._cachedAnisotropicFilteringLevel=q}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(q){this._comparisonFunction=q}get useMipMaps(){return this._useMipMaps}set useMipMaps(q){this._useMipMaps=q}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=q,this._cachedWrapV=I,this._cachedWrapR=l,this._cachedAnisotropicFilteringLevel=w,this.samplingMode=t,this._comparisonFunction=O,this}compareSampler(q){return this._cachedWrapU===q._cachedWrapU&&this._cachedWrapV===q._cachedWrapV&&this._cachedWrapR===q._cachedWrapR&&this._cachedAnisotropicFilteringLevel===q._cachedAnisotropicFilteringLevel&&this.samplingMode===q.samplingMode&&this._comparisonFunction===q._comparisonFunction&&this._useMipMaps===q._useMipMaps}}},12599:(q,I,l)=>{l.d(I,{d:()=>O});var w=l(12591);const t=(q,I,l)=>q?q.getClassName&&"Mesh"===q.getClassName()?null:!q.getClassName||"SubMesh"!==q.getClassName()&&"PhysicsBody"!==q.getClassName()?q.clone?q.clone():Array.isArray(q)?q.slice():l&&"object"===typeof q?{...q}:null:q.clone(I):null;class O{static DeepCopy(q,I,l,O){let c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=function(q){const I=[];do{const l=Object.getOwnPropertyNames(q);for(const q of l)-1===I.indexOf(q)&&I.push(q)}while(q=Object.getPrototypeOf(q));return I}(q);for(const s of a){if("_"===s[0]&&(!O||-1===O.indexOf(s)))continue;if(s.endsWith("Observable"))continue;if(l&&-1!==l.indexOf(s))continue;const a=q[s],Z=typeof a;if("function"!==Z)try{if("object"===Z)if(a instanceof Uint8Array)I[s]=Uint8Array.from(a);else if(a instanceof Array){if(I[s]=[],a.length>0)if("object"==typeof a[0])for(let q=0;q<a.length;q++){const l=t(a[q],I,c);-1===I[s].indexOf(l)&&I[s].push(l)}else I[s]=a.slice(0)}else I[s]=t(a,I,c);else I[s]=a}catch(F){w.b.Warn(F.message)}}}}},12619:(q,I,l)=>{l.d(I,{b:()=>w,e:()=>t,f:()=>O});class w extends Error{}w._setPrototypeOf=Object.setPrototypeOf||((q,I)=>(q.__proto__=I,q));const t={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class O extends w{constructor(q,I,l){super(q),this.errorCode=I,this.innerError=l,this.name="RuntimeError",w._setPrototypeOf(this,O.prototype)}}},12615:(q,I,l)=>{l.d(I,{e:()=>K,f:()=>v,i:()=>S,k:()=>p,n:()=>e,m:()=>V,r:()=>R,v:()=>W,z:()=>i,B:()=>k});var w=l(12607),t=l(12582),O=l(12573);class c{}c.FilesToLoad={};var a=l(12619),F=l(12625),s=l(12634),Z=l(12612),r=l(12591),x=l(12647),o=l(12641),d=l(12656);const T=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class V extends a.f{constructor(q,I){super(q,a.e.LoadFileError),this.name="LoadFileError",a.b._setPrototypeOf(this,V.prototype),I instanceof w.c?this.request=I:this.file=I}}class U extends a.f{constructor(q,I){super(q,a.e.RequestFileError),this.request=I,this.name="RequestFileError",a.b._setPrototypeOf(this,U.prototype)}}class B extends a.f{constructor(q,I){super(q,a.e.ReadFileError),this.file=I,this.name="ReadFileError",a.b._setPrototypeOf(this,B.prototype)}}const v={DefaultRetryStrategy:class{static ExponentialBackoff(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(l,w,t)=>0!==w.status||t>=q||-1!==l.indexOf("file:")?-1:Math.pow(2,t)*I}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:q=>q,ScriptBaseUrl:"",ScriptPreprocessUrl:q=>q,CleanUrl:q=>q=q.replace(/#/gm,"%23")},k=(q,I)=>{if((!q||0!==q.indexOf("data:"))&&v.CorsBehavior)if("string"===typeof v.CorsBehavior||v.CorsBehavior instanceof String)I.crossOrigin=v.CorsBehavior;else{const l=v.CorsBehavior(q);l&&(I.crossOrigin=l)}},C={getRequiredSize:null},R=function(q,I,l,t){let O,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5?arguments[5]:void 0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Z.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===r||void 0===r||!r._features.forceBitmapOverHTMLImageElement))return l("LoadImage is only supported in web or BabylonNative environments."),null;let x=!1;q instanceof ArrayBuffer||ArrayBuffer.isView(q)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(O=URL.createObjectURL(new Blob([q],{type:a})),x=!0):O=`data:${a};base64,`+(0,F.h)(q):q instanceof Blob?(O=URL.createObjectURL(q),x=!0):(O=v.CleanUrl(q),O=v.PreprocessUrl(O));const o=I=>{if(l){const w=O||q.toString();l(`Error while trying to load image: ${0===w.indexOf("http")||w.length<=128?w:w.slice(0,128)+"..."}`,I)}};if(null!==r&&void 0!==r&&r._features.forceBitmapOverHTMLImageElement)return e(O,(w=>{r.createImageBitmap(new Blob([w],{type:a}),{premultiplyAlpha:"none",...s}).then((q=>{I(q),x&&URL.revokeObjectURL(O)})).catch((I=>{l&&l("Error while trying to load image: "+q,I)}))}),void 0,t||void 0,!0,((q,I)=>{o(I)})),null;const d=new Image;if(C.getRequiredSize){const I=C.getRequiredSize(q);I.width&&(d.width=I.width),I.height&&(d.height=I.height)}k(O,d);const T=[],V=()=>{for(const q of T)q.target.removeEventListener(q.name,q.handler);T.length=0};T.push({target:d,name:"load",handler:()=>{V(),I(d),x&&d.src&&URL.revokeObjectURL(d.src)}}),T.push({target:d,name:"error",handler:q=>{V(),o(q),x&&d.src&&URL.revokeObjectURL(d.src)}}),T.push({target:document,name:"securitypolicyviolation",handler:q=>{if(q.blockedURI!==d.src||"Fc"===q.disposition)return;V();const I=new Error(`CSP violation of policy ${q.effectiveDirective} ${q.blockedURI}. Current policy is ${q.originalPolicy}`);Z.e.UseFallbackTexture=!1,o(I),x&&d.src&&URL.revokeObjectURL(d.src),d.src=""}}),(()=>{for(const q of T)q.target.addEventListener(q.name,q.handler)})();const U="blob:"===O.substring(0,5),B="data:"===O.substring(0,5),R=()=>{U||B||!w.c.IsCustomRequestAvailable?d.src=O:e(O,((q,I,l)=>{const w=new Blob([q],{type:!a&&l?l:a}),t=URL.createObjectURL(w);x=!0,d.src=t}),void 0,t||void 0,!0,((q,I)=>{o(I)}))},W=()=>{t&&t.loadImage(O,d)};if(!U&&!B&&t&&t.enableTexturesOffline)t.open(W,R);else{if(-1!==O.indexOf("file:")){const q=decodeURIComponent(O.substring(5).toLowerCase());if(c.FilesToLoad[q]&&"undefined"!==typeof URL){try{let I;try{I=URL.createObjectURL(c.FilesToLoad[q])}catch(i){I=URL.createObjectURL(c.FilesToLoad[q])}d.src=I,x=!0}catch(S){d.src=""}return d}}R()}return d},W=(q,I,l,w,t)=>{const c=new FileReader,a={onCompleteObservable:new O.d,abort:()=>c.abort()};return c.onloadend=()=>a.onCompleteObservable.notifyObservers(a),t&&(c.onerror=()=>{t(new B(`Unable to read ${q.name}`,q))}),c.onload=q=>{I(q.target.result)},l&&(c.onprogress=l),w?c.readAsArrayBuffer(q):c.readAsText(q),a},e=(q,I,l,w,t,F,s)=>{if(q.name)return W(q,I,l,t,F?q=>{F(void 0,q)}:void 0);const Z=q;if(-1!==Z.indexOf("file:")){let q=decodeURIComponent(Z.substring(5).toLowerCase());0===q.indexOf("./")&&(q=q.substring(2));const w=c.FilesToLoad[q];if(w)return W(w,I,l,t,F?q=>F(void 0,new V(q.message,q.file)):void 0)}const{match:o,type:d}=X(Z);if(o){const q={onCompleteObservable:new O.d,abort:()=>()=>{}};try{const q=t?K(Z):D(Z);I(q,void 0,d)}catch(a){F?F(void 0,a):r.b.Error(a.message||"Failed to parse the Data URL")}return x.c.SetImmediate((()=>{q.onCompleteObservable.notifyObservers(q)})),q}return i(Z,((q,l)=>{I(q,null===l||void 0===l?void 0:l.responseURL,null===l||void 0===l?void 0:l.getResponseHeader("content-type"))}),l,w,t,F?q=>{F(q.request,new V(q.message,q.request))}:void 0,s)},i=(q,I,l,c,a,F,s)=>{q=v.CleanUrl(q),q=v.PreprocessUrl(q);const Z=v.BaseUrl+q;let x=!1;const o={onCompleteObservable:new O.d,abort:()=>x=!0},d=()=>{let q,O=new w.c,c=null;const d=()=>{O&&(l&&O.removeEventListener("progress",l),q&&O.removeEventListener("readystatechange",q),O.removeEventListener("loadend",T))};let T=()=>{d(),o.onCompleteObservable.notifyObservers(o),o.onCompleteObservable.clear(),l=void 0,q=null,T=null,F=void 0,s=void 0,I=void 0};o.abort=()=>{x=!0,T&&T(),O&&O.readyState!==(XMLHttpRequest.DONE||4)&&O.abort(),null!==c&&(clearTimeout(c),c=null),O=null};const V=q=>{const I=q.message||"Unknown error";F&&O?F(new U(I,O)):r.b.Error(I)},B=r=>{if(O){if(O.open("GET",Z),s)try{s(O)}catch(o){return void V(o)}a&&(O.responseType="arraybuffer"),l&&O.addEventListener("progress",l),T&&O.addEventListener("loadend",T),q=()=>{if(!x&&O&&O.readyState===(XMLHttpRequest.DONE||4)){if(q&&O.removeEventListener("readystatechange",q),O.status>=200&&O.status<300||0===O.status&&(!(0,t.f)()||g())){const q=a?O.response:O.responseText;if(null!==q){try{I&&I(q,O)}catch(o){V(o)}return}}const l=v.DefaultRetryStrategy;if(l){const q=l(Z,O,r);if(-1!==q)return d(),O=new w.c,void(c=setTimeout((()=>B(r+1)),q))}const s=new U("Error status: "+O.status+" "+O.statusText+" - Unable to load "+Z,O);F&&F(s)}},O.addEventListener("readystatechange",q),O.send()}};B(0)};if(c&&c.enableSceneOffline){const w=q=>{q&&q.status>400?F&&F(q):d()},t=()=>{c&&c.loadFile(v.BaseUrl+q,(q=>{!x&&I&&I(q),o.onCompleteObservable.notifyObservers(o)}),l?q=>{!x&&l&&l(q)}:void 0,w,a)};c.open(t,w)}else d();return o},S=q=>{const{match:I,type:l}=X(q);if(I)return l||void 0;const w=q.lastIndexOf(".");switch(q.substring(w+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"rc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},g=()=>"undefined"!==typeof location&&"file:"===location.protocol,p=q=>T.test(q),X=q=>{const I=T.exec(q);if(null===I||0===I.length)return{match:!1,type:""};return{match:!0,type:I[0].replace("data:","").replace("base64,","")}};function K(q){return(0,F.d)(q.split(",")[1])}const D=q=>(0,F.f)(q.split(",")[1]);let M;d.d._FileToolsLoadImage=R,o.c.loadFile=e,s.j.loadFile=e;((q,I,l,w,t,O,c,a,F,s)=>{M={DecodeBase64UrlToBinary:q,DecodeBase64UrlToString:I,DefaultRetryStrategy:l.DefaultRetryStrategy,BaseUrl:l.BaseUrl,CorsBehavior:l.CorsBehavior,PreprocessUrl:l.PreprocessUrl,IsBase64DataUrl:w,IsFileURL:t,LoadFile:O,LoadImage:c,ReadFile:a,RequestFile:F,SetCorsBehavior:s},Object.defineProperty(M,"DefaultRetryStrategy",{get:function(){return l.DefaultRetryStrategy},set:function(q){l.DefaultRetryStrategy=q}}),Object.defineProperty(M,"BaseUrl",{get:function(){return l.BaseUrl},set:function(q){l.BaseUrl=q}}),Object.defineProperty(M,"PreprocessUrl",{get:function(){return l.PreprocessUrl},set:function(q){l.PreprocessUrl=q}}),Object.defineProperty(M,"CorsBehavior",{get:function(){return l.CorsBehavior},set:function(q){l.CorsBehavior=q}})})(K,D,v,p,g,e,R,W,i,k)},12718:(q,I,l)=>{function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(q=>{const I=16*Math.random()|0;return("x"===q?I:3&I|8).toString(16)}))}l.d(I,{d:()=>w})},12704:(q,I,l)=>{l.d(I,{e:()=>O});var w=l(12591),t=l(12711);class O{static Instantiate(q){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[q])return this.RegisteredExternalClasses[q];const I=(0,t.b)(q);if(I)return I;w.b.Warn(q+" not found, you may have missed an import.");const l=q.split(".");let O=window||this;for(let w=0,t=l.length;w<t;w++)O=O[l[w]];return"function"!==typeof O?null:O}}O.RegisteredExternalClasses={}},12601:(q,I,l)=>{l.d(I,{e:()=>t});var w=l(12582);class t{static get Now(){return(0,w.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12625:(q,I,l)=>{l.d(I,{d:()=>c,f:()=>O,g:()=>w,h:()=>t});const w=q=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(q);let I="";for(let l=0;l<q.byteLength;l++)I+=String.fromCharCode(q[l]);return I},t=q=>{const I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let l,w,t,O,c,a,F,s="",Z=0;const r=ArrayBuffer.isView(q)?new Uint8Array(q.buffer,q.byteOffset,q.byteLength):new Uint8Array(q);for(;Z<r.length;)l=r[Z++],w=Z<r.length?r[Z++]:Number.NaN,t=Z<r.length?r[Z++]:Number.NaN,O=l>>2,c=(3&l)<<4|w>>4,a=(15&w)<<2|t>>6,F=63&t,isNaN(w)?a=F=64:isNaN(t)&&(F=64),s+=I.charAt(O)+I.charAt(c)+I.charAt(a)+I.charAt(F);return s},O=q=>atob(q),c=q=>{const I=O(q),l=I.length,w=new Uint8Array(new ArrayBuffer(l));for(let t=0;t<l;t++)w[t]=I.charCodeAt(t);return w.buffer}},12720:(q,I,l)=>{function w(q){let I=1;do{I*=2}while(I<q);return I===q}function t(q,I,l){return q*(1-l)+I*l}function O(q){const I=c(q),l=a(q);return I-q>q-l?l:I}function c(q){return q--,q|=q>>1,q|=q>>2,q|=q>>4,q|=q>>8,q|=q>>16,++q}function a(q){return q|=q>>1,q|=q>>2,q|=q>>4,q|=q>>8,(q|=q>>16)-(q>>1)}function F(q,I){let l;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:l=a(q);break;case 2:l=O(q);break;default:l=c(q)}return Math.min(l,I)}l.d(I,{e:()=>a,f:()=>F,j:()=>w,n:()=>t,o:()=>O})},12564:(q,I,l)=>{l.r(I),l.d(I,{AsyncLoop:()=>B,Tools:()=>V,className:()=>U});var w=l(12573),t=l(12582),O=l(12591),c=l(12599),a=l(12601),F=l(12603),s=l(12607),Z=l(12612),r=l(12615),x=l(12647),o=l(12704),d=l(12718),T=l(12720);class V{static get BaseUrl(){return r.f.BaseUrl}static set BaseUrl(q){r.f.BaseUrl=q}static get CleanUrl(){return r.f.CleanUrl}static set CleanUrl(q){r.f.CleanUrl=q}static IsAbsoluteUrl(q){return 0===q.indexOf("//")||-1!==q.indexOf("://")&&(-1!==q.indexOf(".")&&(-1!==q.indexOf("/")&&(!(q.indexOf(":")>q.indexOf("/"))&&(q.indexOf("://")<q.indexOf(".")||(0===q.indexOf("data:")||0===q.indexOf("blob:"))))))}static set ScriptBaseUrl(q){r.f.ScriptBaseUrl=q}static get ScriptBaseUrl(){return r.f.ScriptBaseUrl}static set CDNBaseUrl(q){V.ScriptBaseUrl=q,V.AssetBaseUrl=q}static set ScriptPreprocessUrl(q){r.f.ScriptPreprocessUrl=q}static get ScriptPreprocessUrl(){return r.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return r.f.DefaultRetryStrategy}static set DefaultRetryStrategy(q){r.f.DefaultRetryStrategy=q}static get CorsBehavior(){return r.f.CorsBehavior}static set CorsBehavior(q){r.f.CorsBehavior=q}static get UseFallbackTexture(){return Z.e.UseFallbackTexture}static set UseFallbackTexture(q){Z.e.UseFallbackTexture=q}static get RegisteredExternalClasses(){return o.e.RegisteredExternalClasses}static set RegisteredExternalClasses(q){o.e.RegisteredExternalClasses=q}static get fallbackTexture(){return Z.e.FallbackTexture}static set fallbackTexture(q){Z.e.FallbackTexture=q}static FetchToRef(q,I,l,w,t,O){const c=4*((Math.abs(q)*l%l|0)+(Math.abs(I)*w%w|0)*l);O.r=t[c]/255,O.g=t[c+1]/255,O.b=t[c+2]/255,O.a=t[c+3]/255}static Mix(q,I,l){return 0}static Instantiate(q){return o.e.Instantiate(q)}static SetImmediate(q){x.c.SetImmediate(q)}static IsExponentOfTwo(q){return!0}static FloatRound(q){return Math.fround(q)}static GetFilename(q){const I=q.lastIndexOf("/");return I<0?q:q.substring(I+1)}static GetFolderPath(q){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=q.lastIndexOf("/");return l<0?I?q:"":q.substring(0,l+1)}static ToDegrees(q){return 180*q/Math.PI}static ToRadians(q){return q*Math.PI/180}static SmoothAngleChange(q,I){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const w=this.ToRadians(q),t=this.ToRadians(I);return this.ToDegrees(Math.atan2((1-l)*Math.sin(t)+l*Math.sin(w),(1-l)*Math.cos(t)+l*Math.cos(w)))}static MakeArray(q,I){return!0===I||void 0!==q&&null!=q?Array.isArray(q)?q:[q]:null}static GetPointerPrefix(q){return(0,t.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(q,I){(0,r.B)(q,I)}static SetReferrerPolicyBehavior(q,I){I.referrerPolicy=q}static get PreprocessUrl(){return r.f.PreprocessUrl}static set PreprocessUrl(q){r.f.PreprocessUrl=q}static LoadImage(q,I,l,w,t,O){return(0,r.r)(q,I,l,w,t,O)}static LoadFile(q,I,l,w,t,O){return(0,r.n)(q,I,l,w,t,O)}static async LoadFileAsync(q){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((l,w)=>{(0,r.n)(q,(q=>{l(q)}),void 0,void 0,I,((q,I)=>{w(I)}))}))}static GetAssetUrl(q){if(!q)return"";if(V.AssetBaseUrl&&q.startsWith(V._DefaultAssetsUrl)){const I="/"===V.AssetBaseUrl[V.AssetBaseUrl.length-1]?V.AssetBaseUrl.substring(0,V.AssetBaseUrl.length-1):V.AssetBaseUrl;return q.replace(V._DefaultAssetsUrl,I)}return q}static GetBabylonScriptURL(q,I){if(!q)return"";if(V.ScriptBaseUrl&&q.startsWith(V._DefaultCdnUrl)){const I="/"===V.ScriptBaseUrl[V.ScriptBaseUrl.length-1]?V.ScriptBaseUrl.substring(0,V.ScriptBaseUrl.length-1):V.ScriptBaseUrl;q=q.replace(V._DefaultCdnUrl,I)}return q=V.ScriptPreprocessUrl(q),I&&(q=V.GetAbsoluteUrl(q)),q}static LoadBabylonScript(q,I,l,w){q=V.GetBabylonScriptURL(q),V.LoadScript(q,I,l)}static async LoadBabylonScriptAsync(q){return q=V.GetBabylonScriptURL(q),await V.LoadScriptAsync(q)}static LoadScript(q,I,l,w){let O=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(q),I&&I()}catch(F){null===l||void 0===l||l(`Unable to load script '${q}' in worker`,F)}return}if(!(0,t.f)())return void(null===l||void 0===l||l(`Cannot load script '${q}' outside of a window or a worker`));const c=document.getElementsByTagName("head")[0],a=document.createElement("script");O?(a.setAttribute("type","module"),a.innerText=q):(a.setAttribute("type","text/javascript"),a.setAttribute("src",q)),w&&(a.id=w),a.onload=()=>{I&&I()},a.onerror=I=>{l&&l(`Unable to load script '${q}'`,I)},c.appendChild(a)}static async LoadScriptAsync(q,I){return await new Promise(((l,w)=>{this.LoadScript(q,(()=>{l()}),((q,I)=>{w(I||new Error(q))}),I)}))}static ReadFileAsDataURL(q,I,l){const t=new FileReader,O={onCompleteObservable:new w.d,abort:()=>t.abort()};return t.onloadend=()=>{O.onCompleteObservable.notifyObservers(O)},t.onload=q=>{I(q.target.result)},t.onprogress=l,t.readAsDataURL(q),O}static ReadFile(q,I,l,w,t){return(0,r.v)(q,I,l,w,t)}static FileAsURL(q){const I=new Blob([q]);return window.URL.createObjectURL(I)}static Format(q){let I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return q.toFixed(I)}static DeepCopy(q,I,l,w){c.d.DeepCopy(q,I,l,w)}static IsEmpty(q){for(const I in q)if(Object.prototype.hasOwnProperty.call(q,I))return!1;return!0}static RegisterTopRootEvents(q,I){for(let w=0;w<I.length;w++){const t=I[w];q.addEventListener(t.name,t.handler,!1);try{window.parent&&window.parent.addEventListener(t.name,t.handler,!1)}catch(l){}}}static UnregisterTopRootEvents(q,I){for(let w=0;w<I.length;w++){const t=I[w];q.removeEventListener(t.name,t.handler);try{q.parent&&q.parent.removeEventListener(t.name,t.handler)}catch(l){}}}static async DumpFramebuffer(q,I,l,w){throw(0,F.b)("DumpTools")}static DumpData(q,I,l,w){throw(0,F.b)("DumpTools")}static async DumpDataAsync(q,I,l){throw(0,F.b)("DumpTools")}static _IsOffScreenCanvas(q){return void 0!==q.convertToBlob}static ToBlob(q,I){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",w=arguments.length>3?arguments[3]:void 0;V._IsOffScreenCanvas(q)||q.toBlob||(q.toBlob=function(q,I,l){setTimeout((()=>{const w=atob(this.toDataURL(I,l).split(",")[1]),t=w.length,O=new Uint8Array(t);for(let q=0;q<t;q++)O[q]=w.charCodeAt(q);q(new Blob([O]))}))}),V._IsOffScreenCanvas(q)?q.convertToBlob({type:l,quality:w}).then((q=>I(q))):q.toBlob((function(q){I(q)}),l,w)}static DownloadBlob(q,I){if("download"in document.createElement("a")){if(!I){const q=new Date;I="screenshot_"+((q.getFullYear()+"-"+(q.getMonth()+1)).slice(2)+"-"+q.getDate()+"_"+q.getHours()+"-"+("0"+q.getMinutes()).slice(-2))+".png"}V.Download(q,I)}else if(q&&"undefined"!==typeof URL){const I=URL.createObjectURL(q),l=window.open("");if(!l)return;const w=l.document.createElement("img");w.onload=function(){URL.revokeObjectURL(I)},w.src=I,l.document.body.appendChild(w)}}static EncodeScreenshotCanvasData(q,I){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",w=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0;if("string"!==typeof w&&I){if(I){if(V._IsOffScreenCanvas(q))return void q.convertToBlob({type:l,quality:t}).then((q=>{const l=new FileReader;l.readAsDataURL(q),l.onloadend=()=>{const q=l.result;I(q)}}));const w=q.toDataURL(l,t);I(w)}}else this.ToBlob(q,(function(q){q&&V.DownloadBlob(q,w),I&&I("")}),l,t)}static Download(q,I){if("undefined"===typeof URL)return;const l=window.URL.createObjectURL(q),w=document.createElement("a");document.body.appendChild(w),w.style.display="none",w.href=l,w.download=I,w.addEventListener("click",(()=>{w.parentElement&&w.parentElement.removeChild(w)})),w.click(),window.URL.revokeObjectURL(l)}static BackCompatCameraNoPreventDefault(q){return"boolean"===typeof q[0]?q[0]:"boolean"===typeof q[1]&&q[1]}static CreateScreenshot(q,I,l,w){throw(0,F.b)("ScreenshotTools")}static async CreateScreenshotAsync(q,I,l){throw(0,F.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(q,I,l,w){throw(0,F.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(q,I,l){throw(0,F.b)("ScreenshotTools")}static RandomId(){return(0,d.d)()}static IsBase64(q){return(0,r.k)(q)}static DecodeBase64(q){return(0,r.e)(q)}static get errorsCount(){return O.b.errorsCount}static Log(q){O.b.Log(q)}static Warn(q){O.b.Warn(q)}static Error(q){O.b.Error(q)}static get LogCache(){return O.b.LogCache}static ClearLogCache(){O.b.ClearLogCache()}static set LogLevels(q){O.b.LogLevels=q}static set PerformanceLogLevel(q){return(q&V.PerformanceUserMarkLogLevel)===V.PerformanceUserMarkLogLevel?(V.StartPerformanceCounter=V._StartUserMark,void(V.EndPerformanceCounter=V._EndUserMark)):(q&V.PerformanceConsoleLogLevel)===V.PerformanceConsoleLogLevel?(V.StartPerformanceCounter=V._StartPerformanceConsole,void(V.EndPerformanceCounter=V._EndPerformanceConsole)):(V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,void(V.EndPerformanceCounter=V._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(q,I){}static _EndPerformanceCounterDisabled(q,I){}static _StartUserMark(q){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!V._Performance){if(!(0,t.f)())return;V._Performance=window.performance}I&&V._Performance.mark&&V._Performance.mark(q+"-Begin")}static _EndUserMark(q){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&V._Performance.mark&&(V._Performance.mark(q+"-End"),V._Performance.measure(q,q+"-Begin",q+"-End"))}static _StartPerformanceConsole(q){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(V._StartUserMark(q,I),console.time&&console.time(q))}static _EndPerformanceConsole(q){let I=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];I&&(V._EndUserMark(q,I),console.timeEnd(q))}static get Now(){return a.e.Now}static GetClassName(q){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null;if(!I&&q.getClassName)l=q.getClassName();else{if(q instanceof Object){l=(I?q:Object.getPrototypeOf(q)).constructor.__bjsclassName__}l||(l=typeof q)}return l}static First(q,I){for(const l of q)if(I(l))return l;return null}static getFullClassName(q){let I=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=null,w=null;if(!I&&q.getClassName)l=q.getClassName();else{if(q instanceof Object){const t=I?q:Object.getPrototypeOf(q);l=t.constructor.__bjsclassName__,w=t.constructor.__bjsmoduleName__}l||(l=typeof q)}return l?(null!=w?w+".":"")+l:null}static async DelayAsync(q){await new Promise((I=>{setTimeout((()=>{I()}),q)}))}static IsSafari(){return!!(0,t.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function U(q,I){return l=>{l.__bjsclassName__=q,l.__bjsmoduleName__=null!=I?I:null}}V.AssetBaseUrl="",V.UseCustomRequestHeaders=!1,V.CustomRequestHeaders=s.c.CustomRequestHeaders,V.GetDOMTextContent=t.c,V._DefaultCdnUrl="https://cdn.babylonjs.com",V._DefaultAssetsUrl="https://assets.babylonjs.com/core",V.GetAbsoluteUrl="object"===typeof document?q=>{const I=document.createElement("a");return I.href=q,I.href}:"function"===typeof URL&&"object"===typeof location?q=>new URL(q,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},V.NoneLogLevel=O.b.NoneLogLevel,V.MessageLogLevel=O.b.MessageLogLevel,V.WarningLogLevel=O.b.WarningLogLevel,V.ErrorLogLevel=O.b.ErrorLogLevel,V.AllLogLevel=O.b.AllLogLevel,V.IsWindowObjectExist=t.f,V.PerformanceNoneLogLevel=0,V.PerformanceUserMarkLogLevel=1,V.PerformanceConsoleLogLevel=2,V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,V.EndPerformanceCounter=V._EndPerformanceCounterDisabled;class B{constructor(q,I,l){let w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=q,this.index=w-1,this._done=!1,this._fn=I,this._successCallback=l}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(q,I,l){const w=new B(q,I,l,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return w.executeNext(),w}static SyncAsyncForLoop(q,I,l,w,t){let O=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return B.Run(Math.ceil(q/I),(w=>{t&&t()?w.breakLoop():setTimeout((()=>{for(let O=0;O<I;++O){const c=w.index*I+O;if(c>=q)break;if(l(c),t&&t()){w.breakLoop();break}}w.executeNext()}),O)}),w)}}V.Mix=T.n,V.IsExponentOfTwo=T.j,Z.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12711:(q,I,l)=>{l.d(I,{b:()=>O,e:()=>t});const w={};function t(q,I){w[q]=I}function O(q){return w[q]}},12607:(q,I,l)=>{l.d(I,{c:()=>w});class w{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(w.CustomRequestHeaders).length>0||w.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const q in w.CustomRequestHeaders){const I=w.CustomRequestHeaders[q];I&&this._xhr.setRequestHeader(q,I)}}_shouldSkipRequestModifications(q){return w.SkipRequestModificationForBabylonCDN&&(q.includes("preview.babylonjs.com")||q.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(q){this._xhr.onprogress=q}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(q){this._xhr.responseType=q}get timeout(){return this._xhr.timeout}set timeout(q){this._xhr.timeout=q}addEventListener(q,I,l){this._xhr.addEventListener(q,I,l)}removeEventListener(q,I,l){this._xhr.removeEventListener(q,I,l)}abort(){this._xhr.abort()}send(q){w.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(q)}open(q,I){for(const l of w.CustomRequestModifiers){if(this._shouldSkipRequestModifications(I))return;I=l(this._xhr,I)||I}I=(I=I.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=I,this._xhr.open(q,I,!0)}setRequestHeader(q,I){this._xhr.setRequestHeader(q,I)}getResponseHeader(q){return this._xhr.getResponseHeader(q)}}w.CustomRequestHeaders={},w.CustomRequestModifiers=new Array,w.SkipRequestModificationForBabylonCDN=!0}}]);