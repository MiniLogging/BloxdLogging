"use strict";(self.wy695la1oic=self.wy695la1oic||[]).push([[8],{11269:(S,v,D)=>{D.d(v,{d:()=>u});var z=D(11222),e=D(11190),N=D(11277),m=D(11294),B=D(11199);class g{constructor(){let S=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,S&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(S){this._zOffset!==S&&(this._zOffset=S,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(S){this._zOffsetUnits!==S&&(this._zOffsetUnits=S,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(S){this._cullFace!==S&&(this._cullFace=S,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(S){this._cull!==S&&(this._cull=S,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(S){this._depthFunc!==S&&(this._depthFunc=S,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(S){this._depthMask!==S&&(this._depthMask=S,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(S){this._depthTest!==S&&(this._depthTest=S,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(S){this._frontFace!==S&&(this._frontFace=S,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(S){this.isDirty&&(this._isCullDirty&&(this.cull?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(S.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(S.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(S.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(S.enable(S.POLYGON_OFFSET_FILL),S.polygonOffset(this.zOffset,this.zOffsetUnits)):S.disable(S.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(S.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class E{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(S){this._func!==S&&(this._func=S,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(S){this._funcRef!==S&&(this._funcRef=S,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(S){this._funcMask!==S&&(this._funcMask=S,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(S){this._opStencilFail!==S&&(this._opStencilFail=S,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(S){this._opDepthFail!==S&&(this._opDepthFail=S,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(S){this._opStencilDepthPass!==S&&(this._opStencilDepthPass=S,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(S){this._mask!==S&&(this._mask=S,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(S){this._enabled!==S&&(this._enabled=S,this._isStencilTestDirty=!0)}constructor(){let S=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,S&&this.reset()}reset(){var S;this.stencilMaterial=void 0,null===(S=this.stencilGlobal)||void 0===S||S.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(S){var v;if(!S)return;const D=!this.useStencilGlobalOnly&&!(null===(v=this.stencilMaterial)||void 0===v||!v.enabled);this.enabled=D?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=D?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=D?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=D?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=D?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=D?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=D?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=D?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?S.enable(S.STENCIL_TEST):S.disable(S.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(S.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(S.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(S.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class h{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=h.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=h.KEEP,this.opDepthFail=h.KEEP,this.opStencilDepthPass=h.REPLACE}get stencilFunc(){return this.func}set stencilFunc(S){this.func=S}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(S){this.funcRef=S}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(S){this.funcMask=S}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(S){this.opStencilFail=S}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(S){this.opDepthFail=S}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(S){this.opStencilDepthPass=S}get stencilMask(){return this.mask}set stencilMask(S){this.mask=S}get stencilTest(){return this.enabled}set stencilTest(S){this.enabled=S}}h.ALWAYS=519,h.KEEP=7680,h.REPLACE=7681;class A{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(S){this._alphaBlend!==S&&(this._alphaBlend=S,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(S,v,D,z){this._blendConstants[0]===S&&this._blendConstants[1]===v&&this._blendConstants[2]===D&&this._blendConstants[3]===z||(this._blendConstants[0]=S,this._blendConstants[1]=v,this._blendConstants[2]=D,this._blendConstants[3]=z,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(S,v,D,z){this._blendFunctionParameters[0]===S&&this._blendFunctionParameters[1]===v&&this._blendFunctionParameters[2]===D&&this._blendFunctionParameters[3]===z||(this._blendFunctionParameters[0]=S,this._blendFunctionParameters[1]=v,this._blendFunctionParameters[2]=D,this._blendFunctionParameters[3]=z,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(S,v){this._blendEquationParameters[0]===S&&this._blendEquationParameters[1]===v||(this._blendEquationParameters[0]=S,this._blendEquationParameters[1]=v,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(S){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?S.enable(S.BLEND):S.disable(S.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(S.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(S.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(S.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var w=D(11207),n=D(11301),R=D(11182),O=D(11179),I=D(11254),K=D(11314);function q(S,v){if((0,R.j)()){const{requestAnimationFrame:D}=v||window;if("function"===typeof D)return D(S)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(S);return setTimeout(S,16)}class u{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(S){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(S){S!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=S,this._depthCullingState.depthFunc=S?518:515)}setColorWrite(S){S!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=S)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(S){if(S)return this.isNDCHalfZRange?S.IS_NDC_HALF_ZRANGE="":delete S.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?S.USE_REVERSE_DEPTHBUFFER="":delete S.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?S.USE_EXACT_SRGB_CONVERSIONS="":delete S.USE_EXACT_SRGB_CONVERSIONS);{let S="";return this.isNDCHalfZRange&&(S+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(S&&(S+="\n"),S+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(S&&(S+="\n"),S+="#define USE_EXACT_SRGB_CONVERSIONS"),S}}_rebuildInternalTextures(){const S=this._internalTexturesCache.slice();for(const v of S)v._rebuild()}_rebuildRenderTargetWrappers(){const S=this._renderTargetWrapperCache.slice();for(const v of S)v._rebuild()}_rebuildEffects(){for(const S in this._compiledEffects){const v=this._compiledEffects[S];v._pipelineContext=null,v._prepareEffect()}N.Effect.ResetCache()}_rebuildGraphicsResources(){var S;this.wipeCaches(!0),this._rebuildEffects(),null===(S=this._rebuildComputeEffects)||void 0===S||S.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){e.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(S){setTimeout((()=>{this._clearEmptyResources();const v=this._depthCullingState.depthTest,D=this._depthCullingState.depthFunc,z=this._depthCullingState.depthMask,e=this._stencilState.stencilTest;S(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=v,this._depthCullingState.depthFunc=D,this._depthCullingState.depthMask=z,this._stencilState.stencilTest=e,this._flagContextRestored()}),0)}get h(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(S){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(S){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const S=new Uint8Array(4),v=[S,S,S,S,S,S];this._emptyCubeTexture=this.createRawCubeTexture(v,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(S){if(!S)return this._activeRenderLoops.length=0,void this._cancelFrame();const v=this._activeRenderLoops.indexOf(S);v>=0&&(this._activeRenderLoops.splice(v,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const S=this._frameHandler;if(this._frameHandler=0,(0,R.j)()){const{cancelAnimationFrame:v}=this.getHostWindow()||window;if("function"===typeof v)return v(S)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(S);return clearTimeout(S)}}pz(){this.onBeginFrameObservable.notifyObservers(this)}tz(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(S){this._maxFPS=S,void 0!==S&&(this._minFrameTime=S<=0?Number.MAX_VALUE:1e3/S)}_isOverFrameTime(S){if(!S||void 0===this._maxFPS)return!1;const v=S-this._lastFrameTime;return this._lastFrameTime=S,this._renderAccumulator+=v,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(S){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(S)){let S=!0;(this.h||!this.renderEvenInBackground&&this._windowIsBackground)&&(S=!1),S&&(this.pz(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.tz())}}_renderLoop(S){this._processFrame(S),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let S=0;S<this._activeRenderLoops.length;S++){(0,this._activeRenderLoops[S])()}}_renderViews(){return!1}_queueNewFrame(S,v){return q(S,v)}runRenderLoop(S){-1===this._activeRenderLoops.indexOf(S)&&(this._activeRenderLoops.push(S),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(S){this._depthCullingState.depthTest=S}setZOffset(S){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-S:S}getZOffset(){const S=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-S:S}setZOffsetUnits(S){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-S:S}getZOffsetUnits(){const S=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-S:S}getHostWindow(){return(0,R.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(S){this._compatibilityMode=!0}_rebuildTextures(){for(const S of this.scenes)S._rebuildTextures();for(const S of this._virtualScenes)S._rebuildTextures()}_releaseRenderTargetWrapper(S){const v=this._renderTargetWrapperCache.indexOf(S);-1!==v&&this._renderTargetWrapperCache.splice(v,1)}get currentViewport(){return this._cachedViewport}setViewport(S,v,D){const z=v||this.getRenderWidth(),e=D||this.getRenderHeight(),N=S.x||0,m=S.y||0;this._cachedViewport=S,this._viewport(N*z,m*e,z*S.width,e*S.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(S){return new Path2D(S)}get description(){let S=this.name+this.version;return this._caps.parallelShaderCompile&&(S+=" - Parallel shader compilation"),S}_createTextureBase(S,v,D,N){let m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,E=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,w=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,R=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,O=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13?arguments[13]:void 0,q=arguments.length>14?arguments[14]:void 0,s=arguments.length>15?arguments[15]:void 0;const r="data:"===(S=S||"").substring(0,5),d="blob:"===S.substring(0,5),x=r&&-1!==S.indexOf(";base64,"),W=w||new n.b(this,1);W!==w&&(W.label=S.substring(0,60));const p=S;!this._transformTextureUrl||x||w||A||(S=this._transformTextureUrl(S)),p!==S&&(W._originalUrl=p);const b=S.lastIndexOf(".");let k=O||(b>-1?S.substring(b).toLowerCase():"");k.indexOf("?")>-1&&(k=k.split("?")[0]);const Z=(0,K.c)(k,I);N&&N.addPendingData(W),W.url=S,W.generateMipMaps=!v,W.samplingMode=m,W.invertY=D,W._useSRGBBuffer=this._getUseSRGBBuffer(!!s,v),this._doNotHandleContextLost||(W._buffer=A);let i=null;B&&!w&&(i=W.onLoadedObservable.add(B)),w||this._internalTexturesCache.push(W);const t=(D,w)=>{N&&N.removePendingData(W),S===p?(i&&W.onLoadedObservable.remove(i),z.c.UseFallbackTexture&&S!==z.c.FallbackTexture&&this._createTextureBase(z.c.FallbackTexture,v,W.invertY,N,m,null,g,E,h,A,W),D=(D||"Unknown error")+(z.c.UseFallbackTexture?" - Fallback texture was used":""),W.onErrorObservable.notifyObservers({message:D,exception:w}),g&&g(D,w)):(e.b.Warn(`Failed to load ${S}, falling back to ${p}`),this._createTextureBase(p,v,W.invertY,N,m,B,g,E,h,A,W,R,O,I,q,s))};if(Z){const v=async S=>{(await Z).loadData(S,W,((S,v,D,z,e,B)=>{B?t("TextureLoader failed to load data"):E(W,k,N,{width:S,height:v},W.invertY,!D,z,(()=>(e(),!1)),m)}),q)};A?A instanceof ArrayBuffer?v(new Uint8Array(A)):ArrayBuffer.isView(A)?v(A):g&&g("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(S,(S=>{v(new Uint8Array(S))}),void 0,N?N.offlineProvider:void 0,!0,((S,v)=>{t("Unable to load "+(S&&S.responseURL,v))}))}else{const D=S=>{d&&!this._doNotHandleContextLost&&(W._buffer=S),E(W,k,N,S,W.invertY,v,!1,h,m)};!r||x?A&&("string"===typeof A.decoding||A.close)?D(A):u._FileToolsLoadImage(S||"",D,t,N?N.offlineProvider:null,I,W.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof A||A instanceof ArrayBuffer||ArrayBuffer.isView(A)||A instanceof Blob?u._FileToolsLoadImage(A,D,t,N?N.offlineProvider:null,I,W.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):A&&D(A)}return W}_rebuildBuffers(){for(const S of this._uniformBuffers)S._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,R.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const S in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,S)&&(this._boundTexturesCache[S]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(S){this._name=S}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(S){this._hardwareScalingLevel=S,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(S){this._doNotHandleContextLost=S}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(S,v,D){var e,N;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new g,this._stencilStateComposer=new E,this._stencilState=new h,this._alphaState=new A,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new O.d,this.onCanvasFocusObservable=new O.d,this.onNewSceneAddedObservable=new O.d,this.onResizeObservable=new O.d,this.onCanvasPointerOutObservable=new O.d,this.onEffectErrorObservable=new O.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new O.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=S=>this._renderLoop(S),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new O.d,this.onAfterShaderCompilationObservable=new O.d,this.onBeginFrameObservable=new O.d,this.onEndFrameObservable=new O.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new O.d,this.onContextRestoredObservable=new O.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Se=new O.d,this.onReleaseEffectsObservable=new O.d,z.c.Instances.push(this),this.startTime=B.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,m.e.SetMatrixPrecision(!!v.useHighPrecisionMatrix),(0,R.i)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=D??!1,v.antialias=S??v.antialias,v.deterministicLockstep=v.deterministicLockstep??!1,v.lockstepMaxSteps=v.lockstepMaxSteps??4,v.timeStep=v.timeStep??1/60,v.stencil=v.stencil??!0,this._audioContext=(null===(e=v.audioEngineOptions)||void 0===e?void 0:e.audioContext)??null,this._audioDestination=(null===(N=v.audioEngineOptions)||void 0===N?void 0:N.audioDestination)??null,this.premultipliedAlpha=v.premultipliedAlpha??!0,this._doNotHandleContextLost=!!v.doNotHandleContextLost,this._isStencilEnable=!!v.stencil,this.useExactSrgbConversions=v.useExactSrgbConversions??!1;const w=(0,R.j)()&&window.devicePixelRatio||1,n=v.limitDeviceRatio||w;D=D||v.adaptToDeviceRatio||!1,this._hardwareScalingLevel=D?1/Math.min(n,w):1,this._lastDevicePixelRatio=w,this._creationOptions=v}resize(){let S,v,D=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const S=(0,R.j)()&&window.devicePixelRatio||1,v=this._lastDevicePixelRatio/S;this._lastDevicePixelRatio=S,this._hardwareScalingLevel*=v}if((0,R.j)()&&(0,R.e)())if(this._renderingCanvas){var z,e;const D=null===(z=(e=this._renderingCanvas).getBoundingClientRect)||void 0===z?void 0:z.call(e);S=this._renderingCanvas.clientWidth||(null===D||void 0===D?void 0:D.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,v=this._renderingCanvas.clientHeight||(null===D||void 0===D?void 0:D.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else S=window.innerWidth,v=window.innerHeight;else S=this._renderingCanvas?this._renderingCanvas.width:100,v=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(S/this._hardwareScalingLevel,v/this._hardwareScalingLevel,D)}setSize(S,v){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(S|=0,v|=0,!D&&this._renderingCanvas.width===S&&this._renderingCanvas.height===v)return!1;if(this._renderingCanvas.width=S,this._renderingCanvas.height=v,this.scenes){for(let S=0;S<this.scenes.length;S++){const v=this.scenes[S];for(let S=0;S<v.cameras.length;S++){v.cameras[S]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(S,v,D,z,e,N,m,B,g,E,h){throw(0,w.e)("engine.rawTexture")}createRawCubeTexture(S,v,D,z,e,N,m,B){throw(0,w.e)("engine.rawTexture")}createRawTexture3D(S,v,D,z,e,N,m,B,g,E,h){throw(0,w.e)("engine.rawTexture")}createRawTexture2DArray(S,v,D,z,e,N,m,B,g,E,h){throw(0,w.e)("engine.rawTexture")}_sharedInit(S){this._renderingCanvas=S}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const S=navigator.userAgent;this.hostInformation.isMobile=-1!==S.indexOf("Mobile")||-1!==S.indexOf("Mac")&&(0,R.e)()&&"ontouchend"in document},this._checkForMobile(),(0,R.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(S){return document.createElement("video")}_reportDrawCall(){var S;let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(S=this._drawCalls)||void 0===S||S.addCount(v,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(S,v){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(S,v){return createImageBitmap(S,v)}resizeImageBitmap(S,v,D){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(S){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(S,v){if("undefined"===typeof document)return new OffscreenCanvas(S,v);const D=document.createElement("canvas");return D.width=S,D.height=v,D}createCanvas(S,v){return u._CreateCanvas(S,v)}static _FileToolsLoadImage(S,v,D,z,e,N,m){throw(0,w.e)("FileTools")}_loadFile(S,v,D,z,e,N){const m=(0,I.m)(S,v,D,z,e,N);return this._activeRequests.push(m),m.onCompleteObservable.add((()=>{const S=this._activeRequests.indexOf(m);-1!==S&&this._activeRequests.splice(S,1)})),m}static _FileToolsLoadFile(S,v,D,z,e,N){if(I.e.loadFile)return I.e.loadFile(S,v,D,z,e,N);throw(0,w.e)("FileTools")}dispose(){var S;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(S=this.releaseComputeEffects)||void 0===S||S.call(this),N.Effect.ResetCache();for(const D of this._activeRequests)D.abort();this._boundRenderFunction=null,this.Se.notifyObservers(this),this.Se.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,R.j)()&&window.removeEventListener("resize",this._checkForMobile);const v=z.c.Instances.indexOf(this);v>=0&&z.c.Instances.splice(v,1),z.c.Instances.length||(z.c.OnEnginesDisposedObservable.notifyObservers(this),z.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(S){throw(0,w.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(S,v){for(let D=0;D<z.c.Instances.length;D++){const e=z.c.Instances[D];for(let D=0;D<e.scenes.length;D++)e.scenes[D].markAllMaterialsAsDirty(S,v)}}}u._RenderPassIdCounter=0,u._RescalePostProcessFactory=null,u.CollisionsEpsilon=.001,u.QueueNewFrame=q},11222:(S,v,D)=>{D.d(v,{c:()=>e});var z=D(11179);class e{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}e.Instances=[],e.OnEnginesDisposedObservable=new z.d,e._LastCreatedScene=null,e.UseFallbackTexture=!0,e.FallbackTexture=""},11294:(S,v,D)=>{D.d(v,{e:()=>z});class z{static SetMatrixPrecision(S){if(z.MatrixTrackPrecisionChange=!1,S&&!z.MatrixUse64Bits&&z.MatrixTrackedMatrices)for(let v=0;v<z.MatrixTrackedMatrices.length;++v){const S=z.MatrixTrackedMatrices[v],D=S.ve;S.ve=new Array(16);for(let v=0;v<16;++v)S.ve[v]=D[v]}z.MatrixUse64Bits=S,z.MatrixCurrentType=z.MatrixUse64Bits?Array:Float32Array,z.MatrixTrackedMatrices=null}}z.MatrixUse64Bits=!1,z.MatrixTrackPrecisionChange=!0,z.MatrixCurrentType=Float32Array,z.MatrixTrackedMatrices=[]},11314:(S,v,D)=>{D.d(v,{c:()=>m});var z=D(11190);const e=new Map;function N(S,v){(function(S){return e.delete(S)})(S)&&z.b.Warn(`Extension with the name '${S}' already exists`),e.set(S,v)}function m(S,v){"image/ktx"!==v&&"image/ktx2"!==v||(S=".ktx"),e.has(S)||(S.endsWith(".ies")&&N(".ies",(async()=>await D.e(15).then(D.bind(D,13834)).then((S=>new S._IESTextureLoader)))),S.endsWith(".dds")&&N(".dds",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(19),D.e(18),D.e(28)]).then(D.bind(D,13843)).then((S=>new S._DDSTextureLoader)))),S.endsWith(".basis")&&N(".basis",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(47)]).then(D.bind(D,13853)).then((S=>new S._BasisTextureLoader)))),S.endsWith(".env")&&N(".env",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(19),D.e(18),D.e(23),D.e(21),D.e(45),D.e(48)]).then(D.bind(D,13861)).then((S=>new S._ENVTextureLoader)))),S.endsWith(".hdr")&&N(".hdr",(async()=>await Promise.all([D.e(14),D.e(49)]).then(D.bind(D,13864)).then((S=>new S._HDRTextureLoader)))),(S.endsWith(".ktx")||S.endsWith(".ktx2"))&&(N(".ktx",(async()=>await D.e(30).then(D.bind(D,13869)).then((S=>new S._KTXTextureLoader)))),N(".ktx2",(async()=>await D.e(30).then(D.bind(D,13869)).then((S=>new S._KTXTextureLoader))))),S.endsWith(".tga")&&N(".tga",(async()=>await D.e(50).then(D.bind(D,13872)).then((S=>new S._TGATextureLoader)))),S.endsWith(".exr")&&N(".exr",(async()=>await D.e(16).then(D.bind(D,13877)).then((S=>new S._ExrTextureLoader)))));const z=e.get(S);return z?Promise.resolve(z(v)):null}},11301:(S,v,D)=>{D.d(v,{b:()=>m});var z,e=D(11179),N=D(11309);!function(S){S[S.Unknown=0]="Unknown",S[S.Url=1]="Url",S[S.Temp=2]="Temp",S[S.Raw=3]="Raw",S[S.Dynamic=4]="Dynamic",S[S.RenderTarget=5]="RenderTarget",S[S.MultiRenderTarget=6]="MultiRenderTarget",S[S.Cube=7]="Cube",S[S.CubeRaw=8]="CubeRaw",S[S.CubePrefiltered=9]="CubePrefiltered",S[S.Raw3D=10]="Raw3D",S[S.Raw2DArray=11]="Raw2DArray",S[S.DepthStencil=12]="DepthStencil",S[S.CubeRawRGBD=13]="CubeRawRGBD",S[S.Depth=14]="Depth"}(z||(z={}));class m extends N.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(S){this.generateMipMaps=S}get uniqueId(){return this._uniqueId}_setUniqueId(S){this._uniqueId=S}getEngine(){return this._engine}get source(){return this._source}constructor(S,v){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new e.d,this.onErrorObservable=new e.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=S,this._source=v,this._uniqueId=m._Counter++,D||(this._hardwareTexture=S._createHardwareTexture())}incrementReferences(){this._references++}updateSize(S,v){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,S,v,D),this.width=S,this.height=v,this.depth=D,this.baseWidth=S,this.baseHeight=v,this.baseDepth=D,this._size=S*v*D}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const S=this.onRebuildCallback(this),v=v=>{v._swapAndDie(this,!1),this.isReady=S.isReady};return void(S.isAsync?S.proxy.then(v):v(S.proxy))}let S;switch(this.source){case 2:case 12:case 14:break;case 1:return void(S=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(S=>{S._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:S=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),S._swapAndDie(this,!1),this.isReady=!0;break;case 10:S=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),S._swapAndDie(this,!1),this.isReady=!0;break;case 11:S=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),S._swapAndDie(this,!1),this.isReady=!0;break;case 4:S=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),S._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(S=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{S._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:S=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),S._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return S=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(S=>{S&&S._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(S._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(S){var v;let D=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(v=this._hardwareTexture)||void 0===v||v.setUsage(S._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),S._hardwareTexture=this._hardwareTexture,D&&(S._isRGBD=this._isRGBD),this._lodTextureHigh&&(S._lodTextureHigh&&S._lodTextureHigh.dispose(),S._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(S._lodTextureMid&&S._lodTextureMid.dispose(),S._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(S._lodTextureLow&&S._lodTextureLow.dispose(),S._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(S._irradianceTexture&&S._irradianceTexture.dispose(),S._irradianceTexture=this._irradianceTexture);const z=this._engine.getLoadedTexturesCache();let e=z.indexOf(this);-1!==e&&z.splice(e,1),e=z.indexOf(S),-1===e&&z.push(S)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}m._Counter=0},11309:(S,v,D)=>{D.d(v,{b:()=>z});class z{get wrapU(){return this._cachedWrapU}set wrapU(S){this._cachedWrapU=S}get wrapV(){return this._cachedWrapV}set wrapV(S){this._cachedWrapV=S}get wrapR(){return this._cachedWrapR}set wrapR(S){this._cachedWrapR=S}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(S){this._cachedAnisotropicFilteringLevel=S}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(S){this._comparisonFunction=S}get useMipMaps(){return this._useMipMaps}set useMipMaps(S){this._useMipMaps=S}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=S,this._cachedWrapV=v,this._cachedWrapR=D,this._cachedAnisotropicFilteringLevel=z,this.samplingMode=e,this._comparisonFunction=N,this}compareSampler(S){return this._cachedWrapU===S._cachedWrapU&&this._cachedWrapV===S._cachedWrapV&&this._cachedWrapR===S._cachedWrapR&&this._cachedAnisotropicFilteringLevel===S._cachedAnisotropicFilteringLevel&&this.samplingMode===S.samplingMode&&this._comparisonFunction===S._comparisonFunction&&this._useMipMaps===S._useMipMaps}}},11193:(S,v,D)=>{D.d(v,{e:()=>N});var z=D(11190);const e=(S,v,D)=>S?S.getClassName&&"Mesh"===S.getClassName()?null:!S.getClassName||"SubMesh"!==S.getClassName()&&"PhysicsBody"!==S.getClassName()?S.clone?S.clone():Array.isArray(S)?S.slice():D&&"object"===typeof S?{...S}:null:S.clone(v):null;class N{static DeepCopy(S,v,D,N){let m=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const B=function(S){const v=[];do{const D=Object.getOwnPropertyNames(S);for(const S of D)-1===v.indexOf(S)&&v.push(S)}while(S=Object.getPrototypeOf(S));return v}(S);for(const E of B){if("_"===E[0]&&(!N||-1===N.indexOf(E)))continue;if(E.endsWith("Observable"))continue;if(D&&-1!==D.indexOf(E))continue;const B=S[E],h=typeof B;if("function"!==h)try{if("object"===h)if(B instanceof Uint8Array)v[E]=Uint8Array.from(B);else if(B instanceof Array){if(v[E]=[],B.length>0)if("object"==typeof B[0])for(let S=0;S<B.length;S++){const D=e(B[S],v,m);-1===v[E].indexOf(D)&&v[E].push(D)}else v[E]=B.slice(0)}else v[E]=e(B,v,m);else v[E]=B}catch(g){z.b.Warn(g.message)}}}}},11237:(S,v,D)=>{D.d(v,{e:()=>z,f:()=>e,g:()=>N});class z extends Error{}z._setPrototypeOf=Object.setPrototypeOf||((S,v)=>(S.__proto__=v,S));const e={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class N extends z{constructor(S,v,D){super(S),this.errorCode=v,this.innerError=D,this.name="RuntimeError",z._setPrototypeOf(this,N.prototype)}}},11229:(S,v,D)=>{D.d(v,{c:()=>t,d:()=>u,h:()=>b,j:()=>Z,m:()=>W,k:()=>I,n:()=>d,p:()=>x,t:()=>p,w:()=>s});var z=D(11214),e=D(11182),N=D(11179);class m{}m.FilesToLoad={};var B=D(11237),g=D(11244),E=D(11251),h=D(11222),A=D(11190),w=D(11262),n=D(11254),R=D(11269);const O=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class I extends B.g{constructor(S,v){super(S,B.f.LoadFileError),this.name="LoadFileError",B.e._setPrototypeOf(this,I.prototype),v instanceof z.c?this.request=v:this.file=v}}class K extends B.g{constructor(S,v){super(S,B.f.RequestFileError),this.request=v,this.name="RequestFileError",B.e._setPrototypeOf(this,K.prototype)}}class q extends B.g{constructor(S,v){super(S,B.f.ReadFileError),this.file=v,this.name="ReadFileError",B.e._setPrototypeOf(this,q.prototype)}}const u={DefaultRetryStrategy:class{static ExponentialBackoff(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(D,z,e)=>0!==z.status||e>=S||-1!==D.indexOf("file:")?-1:Math.pow(2,e)*v}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:S=>S,ScriptBaseUrl:"",ScriptPreprocessUrl:S=>S,CleanUrl:S=>S=S.replace(/#/gm,"%23")},s=(S,v)=>{if((!S||0!==S.indexOf("data:"))&&u.CorsBehavior)if("string"===typeof u.CorsBehavior||u.CorsBehavior instanceof String)v.crossOrigin=u.CorsBehavior;else{const D=u.CorsBehavior(S);D&&(v.crossOrigin=D)}},r={getRequiredSize:null},d=function(S,v,D,e){let N,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",E=arguments.length>5?arguments[5]:void 0,A=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===A||void 0===A||!A._features.forceBitmapOverHTMLImageElement))return D("LoadImage is only supported in web or BabylonNative environments."),null;let w=!1;S instanceof ArrayBuffer||ArrayBuffer.isView(S)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(N=URL.createObjectURL(new Blob([S],{type:B})),w=!0):N=`data:${B};base64,`+(0,g.n)(S):S instanceof Blob?(N=URL.createObjectURL(S),w=!0):(N=u.CleanUrl(S),N=u.PreprocessUrl(N));const n=v=>{if(D){const z=N||S.toString();D(`Error while trying to load image: ${0===z.indexOf("http")||z.length<=128?z:z.slice(0,128)+"..."}`,v)}};if(null!==A&&void 0!==A&&A._features.forceBitmapOverHTMLImageElement)return W(N,(z=>{A.createImageBitmap(new Blob([z],{type:B}),{premultiplyAlpha:"none",...E}).then((S=>{v(S),w&&URL.revokeObjectURL(N)})).catch((v=>{D&&D("Error while trying to load image: "+S,v)}))}),void 0,e||void 0,!0,((S,v)=>{n(v)})),null;const R=new Image;if(r.getRequiredSize){const v=r.getRequiredSize(S);v.width&&(R.width=v.width),v.height&&(R.height=v.height)}s(N,R);const O=[],I=()=>{for(const S of O)S.target.removeEventListener(S.name,S.handler);O.length=0};O.push({target:R,name:"load",handler:()=>{I(),v(R),w&&R.src&&URL.revokeObjectURL(R.src)}}),O.push({target:R,name:"error",handler:S=>{I(),n(S),w&&R.src&&URL.revokeObjectURL(R.src)}}),O.push({target:document,name:"securitypolicyviolation",handler:S=>{if(S.blockedURI!==R.src||"Ne"===S.disposition)return;I();const v=new Error(`CSP violation of policy ${S.effectiveDirective} ${S.blockedURI}. Current policy is ${S.originalPolicy}`);h.c.UseFallbackTexture=!1,n(v),w&&R.src&&URL.revokeObjectURL(R.src),R.src=""}}),(()=>{for(const S of O)S.target.addEventListener(S.name,S.handler)})();const K="blob:"===N.substring(0,5),q="data:"===N.substring(0,5),d=()=>{K||q||!z.c.IsCustomRequestAvailable?R.src=N:W(N,((S,v,D)=>{const z=new Blob([S],{type:!B&&D?D:B}),e=URL.createObjectURL(z);w=!0,R.src=e}),void 0,e||void 0,!0,((S,v)=>{n(v)}))},x=()=>{e&&e.loadImage(N,R)};if(!K&&!q&&e&&e.enableTexturesOffline)e.open(x,d);else{if(-1!==N.indexOf("file:")){const S=decodeURIComponent(N.substring(5).toLowerCase());if(m.FilesToLoad[S]&&"undefined"!==typeof URL){try{let v;try{v=URL.createObjectURL(m.FilesToLoad[S])}catch(p){v=URL.createObjectURL(m.FilesToLoad[S])}R.src=v,w=!0}catch(b){R.src=""}return R}}d()}return R},x=(S,v,D,z,e)=>{const m=new FileReader,B={onCompleteObservable:new N.d,abort:()=>m.abort()};return m.onloadend=()=>B.onCompleteObservable.notifyObservers(B),e&&(m.onerror=()=>{e(new q(`Unable to read ${S.name}`,S))}),m.onload=S=>{v(S.target.result)},D&&(m.onprogress=D),z?m.readAsArrayBuffer(S):m.readAsText(S),B},W=(S,v,D,z,e,g,E)=>{if(S.name)return x(S,v,D,e,g?S=>{g(void 0,S)}:void 0);const h=S;if(-1!==h.indexOf("file:")){let S=decodeURIComponent(h.substring(5).toLowerCase());0===S.indexOf("./")&&(S=S.substring(2));const z=m.FilesToLoad[S];if(z)return x(z,v,D,e,g?S=>g(void 0,new I(S.message,S.file)):void 0)}const{match:n,type:R}=i(h);if(n){const S={onCompleteObservable:new N.d,abort:()=>()=>{}};try{const S=e?t(h):X(h);v(S,void 0,R)}catch(B){g?g(void 0,B):A.b.Error(B.message||"Failed to parse the Data URL")}return w.b.SetImmediate((()=>{S.onCompleteObservable.notifyObservers(S)})),S}return p(h,((S,D)=>{v(S,null===D||void 0===D?void 0:D.responseURL,null===D||void 0===D?void 0:D.getResponseHeader("content-type"))}),D,z,e,g?S=>{g(S.request,new I(S.message,S.request))}:void 0,E)},p=(S,v,D,m,B,g,E)=>{S=u.CleanUrl(S),S=u.PreprocessUrl(S);const h=u.BaseUrl+S;let w=!1;const n={onCompleteObservable:new N.d,abort:()=>w=!0},R=()=>{let S,N=new z.c,m=null;const R=()=>{N&&(D&&N.removeEventListener("progress",D),S&&N.removeEventListener("readystatechange",S),N.removeEventListener("loadend",O))};let O=()=>{R(),n.onCompleteObservable.notifyObservers(n),n.onCompleteObservable.clear(),D=void 0,S=null,O=null,g=void 0,E=void 0,v=void 0};n.abort=()=>{w=!0,O&&O(),N&&N.readyState!==(XMLHttpRequest.DONE||4)&&N.abort(),null!==m&&(clearTimeout(m),m=null),N=null};const I=S=>{const v=S.message||"Unknown error";g&&N?g(new K(v,N)):A.b.Error(v)},q=A=>{if(N){if(N.open("GET",h),E)try{E(N)}catch(n){return void I(n)}B&&(N.responseType="arraybuffer"),D&&N.addEventListener("progress",D),O&&N.addEventListener("loadend",O),S=()=>{if(!w&&N&&N.readyState===(XMLHttpRequest.DONE||4)){if(S&&N.removeEventListener("readystatechange",S),N.status>=200&&N.status<300||0===N.status&&(!(0,e.j)()||k())){const S=B?N.response:N.responseText;if(null!==S){try{v&&v(S,N)}catch(n){I(n)}return}}const D=u.DefaultRetryStrategy;if(D){const S=D(h,N,A);if(-1!==S)return R(),N=new z.c,void(m=setTimeout((()=>q(A+1)),S))}const E=new K("Error status: "+N.status+" "+N.statusText+" - Unable to load "+h,N);g&&g(E)}},N.addEventListener("readystatechange",S),N.send()}};q(0)};if(m&&m.enableSceneOffline){const z=S=>{S&&S.status>400?g&&g(S):R()},e=()=>{m&&m.loadFile(u.BaseUrl+S,(S=>{!w&&v&&v(S),n.onCompleteObservable.notifyObservers(n)}),D?S=>{!w&&D&&D(S)}:void 0,z,B)};m.open(e,z)}else R();return n},b=S=>{const{match:v,type:D}=i(S);if(v)return D||void 0;const z=S.lastIndexOf(".");switch(S.substring(z+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"me":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},k=()=>"undefined"!==typeof location&&"file:"===location.protocol,Z=S=>O.test(S),i=S=>{const v=O.exec(S);if(null===v||0===v.length)return{match:!1,type:""};return{match:!0,type:v[0].replace("data:","").replace("base64,","")}};function t(S){return(0,g.e)(S.split(",")[1])}const X=S=>(0,g.h)(S.split(",")[1]);let a;R.d._FileToolsLoadImage=d,n.e.loadFile=W,E.h.loadFile=W;((S,v,D,z,e,N,m,B,g,E)=>{a={DecodeBase64UrlToBinary:S,DecodeBase64UrlToString:v,DefaultRetryStrategy:D.DefaultRetryStrategy,BaseUrl:D.BaseUrl,CorsBehavior:D.CorsBehavior,PreprocessUrl:D.PreprocessUrl,IsBase64DataUrl:z,IsFileURL:e,LoadFile:N,LoadImage:m,ReadFile:B,RequestFile:g,SetCorsBehavior:E},Object.defineProperty(a,"DefaultRetryStrategy",{get:function(){return D.DefaultRetryStrategy},set:function(S){D.DefaultRetryStrategy=S}}),Object.defineProperty(a,"BaseUrl",{get:function(){return D.BaseUrl},set:function(S){D.BaseUrl=S}}),Object.defineProperty(a,"PreprocessUrl",{get:function(){return D.PreprocessUrl},set:function(S){D.PreprocessUrl=S}}),Object.defineProperty(a,"CorsBehavior",{get:function(){return D.CorsBehavior},set:function(S){D.CorsBehavior=S}})})(t,X,u,Z,k,W,d,x,p,s)},11336:(S,v,D)=>{function z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(S=>{const v=16*Math.random()|0;return("x"===S?v:3&v|8).toString(16)}))}D.d(v,{e:()=>z})},11321:(S,v,D)=>{D.d(v,{b:()=>N});var z=D(11190),e=D(11329);class N{static Instantiate(S){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[S])return this.RegisteredExternalClasses[S];const v=(0,e.e)(S);if(v)return v;z.b.Warn(S+" not found, you may have missed an import.");const D=S.split(".");let N=window||this;for(let z=0,e=D.length;z<e;z++)N=N[D[z]];return"function"!==typeof N?null:N}}N.RegisteredExternalClasses={}},11199:(S,v,D)=>{D.d(v,{c:()=>e});var z=D(11182);class e{static get Now(){return(0,z.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11244:(S,v,D)=>{D.d(v,{e:()=>m,h:()=>N,l:()=>z,n:()=>e});const z=S=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(S);let v="";for(let D=0;D<S.byteLength;D++)v+=String.fromCharCode(S[D]);return v},e=S=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let D,z,e,N,m,B,g,E="",h=0;const A=ArrayBuffer.isView(S)?new Uint8Array(S.buffer,S.byteOffset,S.byteLength):new Uint8Array(S);for(;h<A.length;)D=A[h++],z=h<A.length?A[h++]:Number.NaN,e=h<A.length?A[h++]:Number.NaN,N=D>>2,m=(3&D)<<4|z>>4,B=(15&z)<<2|e>>6,g=63&e,isNaN(z)?B=g=64:isNaN(e)&&(g=64),E+=v.charAt(N)+v.charAt(m)+v.charAt(B)+v.charAt(g);return E},N=S=>atob(S),m=S=>{const v=N(S),D=v.length,z=new Uint8Array(new ArrayBuffer(D));for(let e=0;e<D;e++)z[e]=v.charCodeAt(e);return z.buffer}},11345:(S,v,D)=>{function z(S){let v=1;do{v*=2}while(v<S);return v===S}function e(S,v,D){return S*(1-D)+v*D}function N(S){const v=m(S),D=B(S);return v-S>S-D?D:v}function m(S){return S--,S|=S>>1,S|=S>>2,S|=S>>4,S|=S>>8,S|=S>>16,++S}function B(S){return S|=S>>1,S|=S>>2,S|=S>>4,S|=S>>8,(S|=S>>16)-(S>>1)}function g(S,v){let D;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:D=B(S);break;case 2:D=N(S);break;default:D=m(S)}return Math.min(D,v)}D.d(v,{c:()=>B,d:()=>g,h:()=>z,l:()=>e,o:()=>N})},11175:(S,v,D)=>{D.r(v),D.d(v,{AsyncLoop:()=>q,Tools:()=>I,className:()=>K});var z=D(11179),e=D(11182),N=D(11190),m=D(11193),B=D(11199),g=D(11207),E=D(11214),h=D(11222),A=D(11229),w=D(11262),n=D(11321),R=D(11336),O=D(11345);class I{static get BaseUrl(){return A.d.BaseUrl}static set BaseUrl(S){A.d.BaseUrl=S}static get CleanUrl(){return A.d.CleanUrl}static set CleanUrl(S){A.d.CleanUrl=S}static IsAbsoluteUrl(S){return 0===S.indexOf("//")||-1!==S.indexOf("://")&&(-1!==S.indexOf(".")&&(-1!==S.indexOf("/")&&(!(S.indexOf(":")>S.indexOf("/"))&&(S.indexOf("://")<S.indexOf(".")||(0===S.indexOf("data:")||0===S.indexOf("blob:"))))))}static set ScriptBaseUrl(S){A.d.ScriptBaseUrl=S}static get ScriptBaseUrl(){return A.d.ScriptBaseUrl}static set CDNBaseUrl(S){I.ScriptBaseUrl=S,I.AssetBaseUrl=S}static set ScriptPreprocessUrl(S){A.d.ScriptPreprocessUrl=S}static get ScriptPreprocessUrl(){return A.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return A.d.DefaultRetryStrategy}static set DefaultRetryStrategy(S){A.d.DefaultRetryStrategy=S}static get CorsBehavior(){return A.d.CorsBehavior}static set CorsBehavior(S){A.d.CorsBehavior=S}static get UseFallbackTexture(){return h.c.UseFallbackTexture}static set UseFallbackTexture(S){h.c.UseFallbackTexture=S}static get RegisteredExternalClasses(){return n.b.RegisteredExternalClasses}static set RegisteredExternalClasses(S){n.b.RegisteredExternalClasses=S}static get fallbackTexture(){return h.c.FallbackTexture}static set fallbackTexture(S){h.c.FallbackTexture=S}static FetchToRef(S,v,D,z,e,N){const m=4*((Math.abs(S)*D%D|0)+(Math.abs(v)*z%z|0)*D);N.r=e[m]/255,N.g=e[m+1]/255,N.b=e[m+2]/255,N.a=e[m+3]/255}static Mix(S,v,D){return 0}static Instantiate(S){return n.b.Instantiate(S)}static SetImmediate(S){w.b.SetImmediate(S)}static IsExponentOfTwo(S){return!0}static FloatRound(S){return Math.fround(S)}static GetFilename(S){const v=S.lastIndexOf("/");return v<0?S:S.substring(v+1)}static GetFolderPath(S){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const D=S.lastIndexOf("/");return D<0?v?S:"":S.substring(0,D+1)}static ToDegrees(S){return 180*S/Math.PI}static ToRadians(S){return S*Math.PI/180}static SmoothAngleChange(S,v){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const z=this.ToRadians(S),e=this.ToRadians(v);return this.ToDegrees(Math.atan2((1-D)*Math.sin(e)+D*Math.sin(z),(1-D)*Math.cos(e)+D*Math.cos(z)))}static MakeArray(S,v){return!0===v||void 0!==S&&null!=S?Array.isArray(S)?S:[S]:null}static GetPointerPrefix(S){return(0,e.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(S,v){(0,A.w)(S,v)}static SetReferrerPolicyBehavior(S,v){v.referrerPolicy=S}static get PreprocessUrl(){return A.d.PreprocessUrl}static set PreprocessUrl(S){A.d.PreprocessUrl=S}static LoadImage(S,v,D,z,e,N){return(0,A.n)(S,v,D,z,e,N)}static LoadFile(S,v,D,z,e,N){return(0,A.m)(S,v,D,z,e,N)}static async LoadFileAsync(S){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((D,z)=>{(0,A.m)(S,(S=>{D(S)}),void 0,void 0,v,((S,v)=>{z(v)}))}))}static GetAssetUrl(S){if(!S)return"";if(I.AssetBaseUrl&&S.startsWith(I._DefaultAssetsUrl)){const v="/"===I.AssetBaseUrl[I.AssetBaseUrl.length-1]?I.AssetBaseUrl.substring(0,I.AssetBaseUrl.length-1):I.AssetBaseUrl;return S.replace(I._DefaultAssetsUrl,v)}return S}static GetBabylonScriptURL(S,v){if(!S)return"";if(I.ScriptBaseUrl&&S.startsWith(I._DefaultCdnUrl)){const v="/"===I.ScriptBaseUrl[I.ScriptBaseUrl.length-1]?I.ScriptBaseUrl.substring(0,I.ScriptBaseUrl.length-1):I.ScriptBaseUrl;S=S.replace(I._DefaultCdnUrl,v)}return S=I.ScriptPreprocessUrl(S),v&&(S=I.GetAbsoluteUrl(S)),S}static LoadBabylonScript(S,v,D,z){S=I.GetBabylonScriptURL(S),I.LoadScript(S,v,D)}static async LoadBabylonScriptAsync(S){return S=I.GetBabylonScriptURL(S),await I.LoadScriptAsync(S)}static LoadScript(S,v,D,z){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(S),v&&v()}catch(g){null===D||void 0===D||D(`Unable to load script '${S}' in worker`,g)}return}if(!(0,e.j)())return void(null===D||void 0===D||D(`Cannot load script '${S}' outside of a window or a worker`));const m=document.getElementsByTagName("head")[0],B=document.createElement("script");N?(B.setAttribute("type","module"),B.innerText=S):(B.setAttribute("type","text/javascript"),B.setAttribute("src",S)),z&&(B.id=z),B.onload=()=>{v&&v()},B.onerror=v=>{D&&D(`Unable to load script '${S}'`,v)},m.appendChild(B)}static async LoadScriptAsync(S,v){return await new Promise(((D,z)=>{this.LoadScript(S,(()=>{D()}),((S,v)=>{z(v||new Error(S))}),v)}))}static ReadFileAsDataURL(S,v,D){const e=new FileReader,N={onCompleteObservable:new z.d,abort:()=>e.abort()};return e.onloadend=()=>{N.onCompleteObservable.notifyObservers(N)},e.onload=S=>{v(S.target.result)},e.onprogress=D,e.readAsDataURL(S),N}static ReadFile(S,v,D,z,e){return(0,A.p)(S,v,D,z,e)}static FileAsURL(S){const v=new Blob([S]);return window.URL.createObjectURL(v)}static Format(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return S.toFixed(v)}static DeepCopy(S,v,D,z){m.e.DeepCopy(S,v,D,z)}static IsEmpty(S){for(const v in S)if(Object.prototype.hasOwnProperty.call(S,v))return!1;return!0}static RegisterTopRootEvents(S,v){for(let z=0;z<v.length;z++){const e=v[z];S.addEventListener(e.name,e.handler,!1);try{window.parent&&window.parent.addEventListener(e.name,e.handler,!1)}catch(D){}}}static UnregisterTopRootEvents(S,v){for(let z=0;z<v.length;z++){const e=v[z];S.removeEventListener(e.name,e.handler);try{S.parent&&S.parent.removeEventListener(e.name,e.handler)}catch(D){}}}static async DumpFramebuffer(S,v,D,z){throw(0,g.e)("DumpTools")}static DumpData(S,v,D,z){throw(0,g.e)("DumpTools")}static async DumpDataAsync(S,v,D){throw(0,g.e)("DumpTools")}static _IsOffScreenCanvas(S){return void 0!==S.convertToBlob}static ToBlob(S,v){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0;I._IsOffScreenCanvas(S)||S.toBlob||(S.toBlob=function(S,v,D){setTimeout((()=>{const z=atob(this.toDataURL(v,D).split(",")[1]),e=z.length,N=new Uint8Array(e);for(let S=0;S<e;S++)N[S]=z.charCodeAt(S);S(new Blob([N]))}))}),I._IsOffScreenCanvas(S)?S.convertToBlob({type:D,quality:z}).then((S=>v(S))):S.toBlob((function(S){v(S)}),D,z)}static DownloadBlob(S,v){if("download"in document.createElement("a")){if(!v){const S=new Date;v="screenshot_"+((S.getFullYear()+"-"+(S.getMonth()+1)).slice(2)+"-"+S.getDate()+"_"+S.getHours()+"-"+("0"+S.getMinutes()).slice(-2))+".png"}I.Download(S,v)}else if(S&&"undefined"!==typeof URL){const v=URL.createObjectURL(S),D=window.open("");if(!D)return;const z=D.document.createElement("img");z.onload=function(){URL.revokeObjectURL(v)},z.src=v,D.document.body.appendChild(z)}}static EncodeScreenshotCanvasData(S,v){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0;if("string"!==typeof z&&v){if(v){if(I._IsOffScreenCanvas(S))return void S.convertToBlob({type:D,quality:e}).then((S=>{const D=new FileReader;D.readAsDataURL(S),D.onloadend=()=>{const S=D.result;v(S)}}));const z=S.toDataURL(D,e);v(z)}}else this.ToBlob(S,(function(S){S&&I.DownloadBlob(S,z),v&&v("")}),D,e)}static Download(S,v){if("undefined"===typeof URL)return;const D=window.URL.createObjectURL(S),z=document.createElement("a");document.body.appendChild(z),z.style.display="none",z.href=D,z.download=v,z.addEventListener("click",(()=>{z.parentElement&&z.parentElement.removeChild(z)})),z.click(),window.URL.revokeObjectURL(D)}static BackCompatCameraNoPreventDefault(S){return"boolean"===typeof S[0]?S[0]:"boolean"===typeof S[1]&&S[1]}static CreateScreenshot(S,v,D,z){throw(0,g.e)("ScreenshotTools")}static async CreateScreenshotAsync(S,v,D){throw(0,g.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(S,v,D,z){throw(0,g.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(S,v,D){throw(0,g.e)("ScreenshotTools")}static RandomId(){return(0,R.e)()}static IsBase64(S){return(0,A.j)(S)}static DecodeBase64(S){return(0,A.c)(S)}static get errorsCount(){return N.b.errorsCount}static Log(S){N.b.Log(S)}static Warn(S){N.b.Warn(S)}static Error(S){N.b.Error(S)}static get LogCache(){return N.b.LogCache}static ClearLogCache(){N.b.ClearLogCache()}static set LogLevels(S){N.b.LogLevels=S}static set PerformanceLogLevel(S){return(S&I.PerformanceUserMarkLogLevel)===I.PerformanceUserMarkLogLevel?(I.StartPerformanceCounter=I._StartUserMark,void(I.EndPerformanceCounter=I._EndUserMark)):(S&I.PerformanceConsoleLogLevel)===I.PerformanceConsoleLogLevel?(I.StartPerformanceCounter=I._StartPerformanceConsole,void(I.EndPerformanceCounter=I._EndPerformanceConsole)):(I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,void(I.EndPerformanceCounter=I._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(S,v){}static _EndPerformanceCounterDisabled(S,v){}static _StartUserMark(S){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!I._Performance){if(!(0,e.j)())return;I._Performance=window.performance}v&&I._Performance.mark&&I._Performance.mark(S+"-Begin")}static _EndUserMark(S){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&I._Performance.mark&&(I._Performance.mark(S+"-End"),I._Performance.measure(S,S+"-Begin",S+"-End"))}static _StartPerformanceConsole(S){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(I._StartUserMark(S,v),console.time&&console.time(S))}static _EndPerformanceConsole(S){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(I._EndUserMark(S,v),console.timeEnd(S))}static get Now(){return B.c.Now}static GetClassName(S){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=null;if(!v&&S.getClassName)D=S.getClassName();else{if(S instanceof Object){D=(v?S:Object.getPrototypeOf(S)).constructor.__bjsclassName__}D||(D=typeof S)}return D}static First(S,v){for(const D of S)if(v(D))return D;return null}static getFullClassName(S){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=null,z=null;if(!v&&S.getClassName)D=S.getClassName();else{if(S instanceof Object){const e=v?S:Object.getPrototypeOf(S);D=e.constructor.__bjsclassName__,z=e.constructor.__bjsmoduleName__}D||(D=typeof S)}return D?(null!=z?z+".":"")+D:null}static async DelayAsync(S){await new Promise((v=>{setTimeout((()=>{v()}),S)}))}static IsSafari(){return!!(0,e.i)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function K(S,v){return D=>{D.__bjsclassName__=S,D.__bjsmoduleName__=null!=v?v:null}}I.AssetBaseUrl="",I.UseCustomRequestHeaders=!1,I.CustomRequestHeaders=E.c.CustomRequestHeaders,I.GetDOMTextContent=e.b,I._DefaultCdnUrl="https://cdn.babylonjs.com",I._DefaultAssetsUrl="https://assets.babylonjs.com/core",I.GetAbsoluteUrl="object"===typeof document?S=>{const v=document.createElement("a");return v.href=S,v.href}:"function"===typeof URL&&"object"===typeof location?S=>new URL(S,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},I.NoneLogLevel=N.b.NoneLogLevel,I.MessageLogLevel=N.b.MessageLogLevel,I.WarningLogLevel=N.b.WarningLogLevel,I.ErrorLogLevel=N.b.ErrorLogLevel,I.AllLogLevel=N.b.AllLogLevel,I.IsWindowObjectExist=e.j,I.PerformanceNoneLogLevel=0,I.PerformanceUserMarkLogLevel=1,I.PerformanceConsoleLogLevel=2,I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,I.EndPerformanceCounter=I._EndPerformanceCounterDisabled;class q{constructor(S,v,D){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=S,this.index=z-1,this._done=!1,this._fn=v,this._successCallback=D}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(S,v,D){const z=new q(S,v,D,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return z.executeNext(),z}static SyncAsyncForLoop(S,v,D,z,e){let N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return q.Run(Math.ceil(S/v),(z=>{e&&e()?z.breakLoop():setTimeout((()=>{for(let N=0;N<v;++N){const m=z.index*v+N;if(m>=S)break;if(D(m),e&&e()){z.breakLoop();break}}z.executeNext()}),N)}),z)}}I.Mix=O.l,I.IsExponentOfTwo=O.h,h.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11329:(S,v,D)=>{D.d(v,{e:()=>N,f:()=>e});const z={};function e(S,v){z[S]=v}function N(S){return z[S]}},11214:(S,v,D)=>{D.d(v,{c:()=>z});class z{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(z.CustomRequestHeaders).length>0||z.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const S in z.CustomRequestHeaders){const v=z.CustomRequestHeaders[S];v&&this._xhr.setRequestHeader(S,v)}}_shouldSkipRequestModifications(S){return z.SkipRequestModificationForBabylonCDN&&(S.includes("preview.babylonjs.com")||S.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(S){this._xhr.onprogress=S}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(S){this._xhr.responseType=S}get timeout(){return this._xhr.timeout}set timeout(S){this._xhr.timeout=S}addEventListener(S,v,D){this._xhr.addEventListener(S,v,D)}removeEventListener(S,v,D){this._xhr.removeEventListener(S,v,D)}abort(){this._xhr.abort()}send(S){z.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(S)}open(S,v){for(const D of z.CustomRequestModifiers){if(this._shouldSkipRequestModifications(v))return;v=D(this._xhr,v)||v}v=(v=v.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=v,this._xhr.open(S,v,!0)}setRequestHeader(S,v){this._xhr.setRequestHeader(S,v)}getResponseHeader(S){return this._xhr.getResponseHeader(S)}}z.CustomRequestHeaders={},z.CustomRequestModifiers=new Array,z.SkipRequestModificationForBabylonCDN=!0}}]);