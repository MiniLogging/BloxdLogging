"use strict";(self.ozi0exxand9=self.ozi0exxand9||[]).push([[8],{11318:(f,v,Z)=>{Z.d(v,{b:()=>M});var V=Z(11281),h=Z(11247),J=Z(11325),l=Z(11354),e=Z(11254);class C{constructor(){let f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,f&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(f){this._zOffset!==f&&(this._zOffset=f,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(f){this._zOffsetUnits!==f&&(this._zOffsetUnits=f,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(f){this._cullFace!==f&&(this._cullFace=f,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(f){this._cull!==f&&(this._cull=f,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(f){this._depthFunc!==f&&(this._depthFunc=f,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(f){this._depthMask!==f&&(this._depthMask=f,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(f){this._depthTest!==f&&(this._depthTest=f,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(f){this._frontFace!==f&&(this._frontFace=f,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(f){this.isDirty&&(this._isCullDirty&&(this.cull?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(f.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(f.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(f.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(f.enable(f.POLYGON_OFFSET_FILL),f.polygonOffset(this.zOffset,this.zOffsetUnits)):f.disable(f.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(f.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class H{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(f){this._func!==f&&(this._func=f,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(f){this._funcRef!==f&&(this._funcRef=f,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(f){this._funcMask!==f&&(this._funcMask=f,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(f){this._opStencilFail!==f&&(this._opStencilFail=f,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(f){this._opDepthFail!==f&&(this._opDepthFail=f,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(f){this._opStencilDepthPass!==f&&(this._opStencilDepthPass=f,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(f){this._mask!==f&&(this._mask=f,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(f){this._enabled!==f&&(this._enabled=f,this._isStencilTestDirty=!0)}constructor(){let f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,f&&this.reset()}reset(){var f;this.stencilMaterial=void 0,null===(f=this.stencilGlobal)||void 0===f||f.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(f){var v;if(!f)return;const Z=!this.useStencilGlobalOnly&&!(null===(v=this.stencilMaterial)||void 0===v||!v.enabled);this.enabled=Z?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=Z?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=Z?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=Z?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=Z?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=Z?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=Z?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=Z?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(f.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(f.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(f.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class O{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=O.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=O.KEEP,this.opDepthFail=O.KEEP,this.opStencilDepthPass=O.REPLACE}get stencilFunc(){return this.func}set stencilFunc(f){this.func=f}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(f){this.funcRef=f}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(f){this.funcMask=f}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(f){this.opStencilFail=f}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(f){this.opDepthFail=f}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(f){this.opStencilDepthPass=f}get stencilMask(){return this.mask}set stencilMask(f){this.mask=f}get stencilTest(){return this.enabled}set stencilTest(f){this.enabled=f}}O.ALWAYS=519,O.KEEP=7680,O.REPLACE=7681;class u{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(f){this._alphaBlend!==f&&(this._alphaBlend=f,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(f,v,Z,V){this._blendConstants[0]===f&&this._blendConstants[1]===v&&this._blendConstants[2]===Z&&this._blendConstants[3]===V||(this._blendConstants[0]=f,this._blendConstants[1]=v,this._blendConstants[2]=Z,this._blendConstants[3]=V,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(f,v,Z,V){this._blendFunctionParameters[0]===f&&this._blendFunctionParameters[1]===v&&this._blendFunctionParameters[2]===Z&&this._blendFunctionParameters[3]===V||(this._blendFunctionParameters[0]=f,this._blendFunctionParameters[1]=v,this._blendFunctionParameters[2]=Z,this._blendFunctionParameters[3]=V,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(f,v){this._blendEquationParameters[0]===f&&this._blendEquationParameters[1]===v||(this._blendEquationParameters[0]=f,this._blendEquationParameters[1]=v,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(f){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?f.enable(f.BLEND):f.disable(f.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(f.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(f.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(f.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var W=Z(11263),a=Z(11360),b=Z(11239),X=Z(11235),F=Z(11314),U=Z(11366);function K(f,v){if((0,b.m)()){const{requestAnimationFrame:Z}=v||window;if("function"===typeof Z)return Z(f)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(f);return setTimeout(f,16)}class M{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(f){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(f){f!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=f,this._depthCullingState.depthFunc=f?518:515)}setColorWrite(f){f!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=f)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(f){if(f)return this.isNDCHalfZRange?f.IS_NDC_HALF_ZRANGE="":delete f.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?f.USE_REVERSE_DEPTHBUFFER="":delete f.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?f.USE_EXACT_SRGB_CONVERSIONS="":delete f.USE_EXACT_SRGB_CONVERSIONS);{let f="";return this.isNDCHalfZRange&&(f+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(f&&(f+="\n"),f+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(f&&(f+="\n"),f+="#define USE_EXACT_SRGB_CONVERSIONS"),f}}_rebuildInternalTextures(){const f=this._internalTexturesCache.slice();for(const v of f)v._rebuild()}_rebuildRenderTargetWrappers(){const f=this._renderTargetWrapperCache.slice();for(const v of f)v._rebuild()}_rebuildEffects(){for(const f in this._compiledEffects){const v=this._compiledEffects[f];v._pipelineContext=null,v._prepareEffect()}J.Effect.ResetCache()}_rebuildGraphicsResources(){var f;this.wipeCaches(!0),this._rebuildEffects(),null===(f=this._rebuildComputeEffects)||void 0===f||f.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){h.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(f){setTimeout((()=>{this._clearEmptyResources();const v=this._depthCullingState.depthTest,Z=this._depthCullingState.depthFunc,V=this._depthCullingState.depthMask,h=this._stencilState.stencilTest;f(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=v,this._depthCullingState.depthFunc=Z,this._depthCullingState.depthMask=V,this._stencilState.stencilTest=h,this._flagContextRestored()}),0)}get C(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(f){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(f){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const f=new Uint8Array(4),v=[f,f,f,f,f,f];this._emptyCubeTexture=this.createRawCubeTexture(v,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(f){if(!f)return this._activeRenderLoops.length=0,void this._cancelFrame();const v=this._activeRenderLoops.indexOf(f);v>=0&&(this._activeRenderLoops.splice(v,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const f=this._frameHandler;if(this._frameHandler=0,(0,b.m)()){const{cancelAnimationFrame:v}=this.getHostWindow()||window;if("function"===typeof v)return v(f)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(f);return clearTimeout(f)}}Hh(){this.onBeginFrameObservable.notifyObservers(this)}ah(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(f){this._maxFPS=f,void 0!==f&&(this._minFrameTime=f<=0?Number.MAX_VALUE:1e3/f)}_isOverFrameTime(f){if(!f||void 0===this._maxFPS)return!1;const v=f-this._lastFrameTime;return this._lastFrameTime=f,this._renderAccumulator+=v,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(f){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(f)){let f=!0;(this.C||!this.renderEvenInBackground&&this._windowIsBackground)&&(f=!1),f&&(this.Hh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ah())}}_renderLoop(f){this._processFrame(f),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let f=0;f<this._activeRenderLoops.length;f++){(0,this._activeRenderLoops[f])()}}_renderViews(){return!1}_queueNewFrame(f,v){return K(f,v)}runRenderLoop(f){-1===this._activeRenderLoops.indexOf(f)&&(this._activeRenderLoops.push(f),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(f){this._depthCullingState.depthTest=f}setZOffset(f){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-f:f}getZOffset(){const f=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-f:f}setZOffsetUnits(f){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-f:f}getZOffsetUnits(){const f=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-f:f}getHostWindow(){return(0,b.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(f){this._compatibilityMode=!0}_rebuildTextures(){for(const f of this.scenes)f._rebuildTextures();for(const f of this._virtualScenes)f._rebuildTextures()}_releaseRenderTargetWrapper(f){const v=this._renderTargetWrapperCache.indexOf(f);-1!==v&&this._renderTargetWrapperCache.splice(v,1)}get currentViewport(){return this._cachedViewport}setViewport(f,v,Z){const V=v||this.getRenderWidth(),h=Z||this.getRenderHeight(),J=f.x||0,l=f.y||0;this._cachedViewport=f,this._viewport(J*V,l*h,V*f.width,h*f.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(f){return new Path2D(f)}get description(){let f=this.name+this.version;return this._caps.parallelShaderCompile&&(f+=" - Parallel shader compilation"),f}_createTextureBase(f,v,Z,J){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=arguments.length>7?arguments[7]:void 0,O=arguments.length>8?arguments[8]:void 0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,W=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,X=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,F=arguments.length>13?arguments[13]:void 0,K=arguments.length>14?arguments[14]:void 0,A=arguments.length>15?arguments[15]:void 0;const s="data:"===(f=f||"").substring(0,5),z="blob:"===f.substring(0,5),Y=s&&-1!==f.indexOf(";base64,"),y=W||new a.c(this,1);y!==W&&(y.label=f.substring(0,60));const N=f;!this._transformTextureUrl||Y||W||u||(f=this._transformTextureUrl(f)),N!==f&&(y._originalUrl=N);const i=f.lastIndexOf(".");let I=X||(i>-1?f.substring(i).toLowerCase():"");I.indexOf("?")>-1&&(I=I.split("?")[0]);const T=(0,U.d)(I,F);J&&J.addPendingData(y),y.url=f,y.generateMipMaps=!v,y.samplingMode=l,y.invertY=Z,y._useSRGBBuffer=this._getUseSRGBBuffer(!!A,v),this._doNotHandleContextLost||(y._buffer=u);let B=null;e&&!W&&(B=y.onLoadedObservable.add(e)),W||this._internalTexturesCache.push(y);const P=(Z,W)=>{J&&J.removePendingData(y),f===N?(B&&y.onLoadedObservable.remove(B),V.c.UseFallbackTexture&&f!==V.c.FallbackTexture&&this._createTextureBase(V.c.FallbackTexture,v,y.invertY,J,l,null,C,H,O,u,y),Z=(Z||"Unknown error")+(V.c.UseFallbackTexture?" - Fallback texture was used":""),y.onErrorObservable.notifyObservers({message:Z,exception:W}),C&&C(Z,W)):(h.e.Warn(`Failed to load ${f}, falling back to ${N}`),this._createTextureBase(N,v,y.invertY,J,l,e,C,H,O,u,y,b,X,F,K,A))};if(T){const v=async f=>{(await T).loadData(f,y,((f,v,Z,V,h,e)=>{e?P("TextureLoader failed to load data"):H(y,I,J,{width:f,height:v},y.invertY,!Z,V,(()=>(h(),!1)),l)}),K)};u?u instanceof ArrayBuffer?v(new Uint8Array(u)):ArrayBuffer.isView(u)?v(u):C&&C("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(f,(f=>{v(new Uint8Array(f))}),void 0,J?J.offlineProvider:void 0,!0,((f,v)=>{P("Unable to load "+(f&&f.responseURL,v))}))}else{const Z=f=>{z&&!this._doNotHandleContextLost&&(y._buffer=f),H(y,I,J,f,y.invertY,v,!1,O,l)};!s||Y?u&&("string"===typeof u.decoding||u.close)?Z(u):M._FileToolsLoadImage(f||"",Z,P,J?J.offlineProvider:null,F,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof u||u instanceof ArrayBuffer||ArrayBuffer.isView(u)||u instanceof Blob?M._FileToolsLoadImage(u,Z,P,J?J.offlineProvider:null,F,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):u&&Z(u)}return y}_rebuildBuffers(){for(const f of this._uniformBuffers)f._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,b.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const f in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,f)&&(this._boundTexturesCache[f]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(f){this._name=f}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(f){this._hardwareScalingLevel=f,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(f){this._doNotHandleContextLost=f}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(f,v,Z){var h,J;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new C,this._stencilStateComposer=new H,this._stencilState=new O,this._alphaState=new u,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new X.c,this.onCanvasFocusObservable=new X.c,this.onNewSceneAddedObservable=new X.c,this.onResizeObservable=new X.c,this.onCanvasPointerOutObservable=new X.c,this.onEffectErrorObservable=new X.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new X.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=f=>this._renderLoop(f),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new X.c,this.onAfterShaderCompilationObservable=new X.c,this.onBeginFrameObservable=new X.c,this.onEndFrameObservable=new X.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new X.c,this.onContextRestoredObservable=new X.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Kh=new X.c,this.onReleaseEffectsObservable=new X.c,V.c.Instances.push(this),this.startTime=e.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,l.e.SetMatrixPrecision(!!v.useHighPrecisionMatrix),(0,b.l)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=Z??!1,v.antialias=f??v.antialias,v.deterministicLockstep=v.deterministicLockstep??!1,v.lockstepMaxSteps=v.lockstepMaxSteps??4,v.timeStep=v.timeStep??1/60,v.stencil=v.stencil??!0,this._audioContext=(null===(h=v.audioEngineOptions)||void 0===h?void 0:h.audioContext)??null,this._audioDestination=(null===(J=v.audioEngineOptions)||void 0===J?void 0:J.audioDestination)??null,this.premultipliedAlpha=v.premultipliedAlpha??!0,this._doNotHandleContextLost=!!v.doNotHandleContextLost,this._isStencilEnable=!!v.stencil,this.useExactSrgbConversions=v.useExactSrgbConversions??!1;const W=(0,b.m)()&&window.devicePixelRatio||1,a=v.limitDeviceRatio||W;Z=Z||v.adaptToDeviceRatio||!1,this._hardwareScalingLevel=Z?1/Math.min(a,W):1,this._lastDevicePixelRatio=W,this._creationOptions=v}resize(){let f,v,Z=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const f=(0,b.m)()&&window.devicePixelRatio||1,v=this._lastDevicePixelRatio/f;this._lastDevicePixelRatio=f,this._hardwareScalingLevel*=v}if((0,b.m)()&&(0,b.h)())if(this._renderingCanvas){var V,h;const Z=null===(V=(h=this._renderingCanvas).getBoundingClientRect)||void 0===V?void 0:V.call(h);f=this._renderingCanvas.clientWidth||(null===Z||void 0===Z?void 0:Z.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,v=this._renderingCanvas.clientHeight||(null===Z||void 0===Z?void 0:Z.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else f=window.innerWidth,v=window.innerHeight;else f=this._renderingCanvas?this._renderingCanvas.width:100,v=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(f/this._hardwareScalingLevel,v/this._hardwareScalingLevel,Z)}setSize(f,v){let Z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(f|=0,v|=0,!Z&&this._renderingCanvas.width===f&&this._renderingCanvas.height===v)return!1;if(this._renderingCanvas.width=f,this._renderingCanvas.height=v,this.scenes){for(let f=0;f<this.scenes.length;f++){const v=this.scenes[f];for(let f=0;f<v.cameras.length;f++){v.cameras[f]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(f,v,Z,V,h,J,l,e,C,H,O){throw(0,W.e)("engine.rawTexture")}createRawCubeTexture(f,v,Z,V,h,J,l,e){throw(0,W.e)("engine.rawTexture")}createRawTexture3D(f,v,Z,V,h,J,l,e,C,H,O){throw(0,W.e)("engine.rawTexture")}createRawTexture2DArray(f,v,Z,V,h,J,l,e,C,H,O){throw(0,W.e)("engine.rawTexture")}_sharedInit(f){this._renderingCanvas=f}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const f=navigator.userAgent;this.hostInformation.isMobile=-1!==f.indexOf("Mobile")||-1!==f.indexOf("Mac")&&(0,b.h)()&&"ontouchend"in document},this._checkForMobile(),(0,b.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(f){return document.createElement("video")}_reportDrawCall(){var f;let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(f=this._drawCalls)||void 0===f||f.addCount(v,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(f,v){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(f,v){return createImageBitmap(f,v)}resizeImageBitmap(f,v,Z){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(f){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(f,v){if("undefined"===typeof document)return new OffscreenCanvas(f,v);const Z=document.createElement("canvas");return Z.width=f,Z.height=v,Z}createCanvas(f,v){return M._CreateCanvas(f,v)}static _FileToolsLoadImage(f,v,Z,V,h,J,l){throw(0,W.e)("FileTools")}_loadFile(f,v,Z,V,h,J){const l=(0,F.o)(f,v,Z,V,h,J);return this._activeRequests.push(l),l.onCompleteObservable.add((()=>{const f=this._activeRequests.indexOf(l);-1!==f&&this._activeRequests.splice(f,1)})),l}static _FileToolsLoadFile(f,v,Z,V,h,J){if(F.e.loadFile)return F.e.loadFile(f,v,Z,V,h,J);throw(0,W.e)("FileTools")}dispose(){var f;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(f=this.releaseComputeEffects)||void 0===f||f.call(this),J.Effect.ResetCache();for(const Z of this._activeRequests)Z.abort();this._boundRenderFunction=null,this.Kh.notifyObservers(this),this.Kh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,b.m)()&&window.removeEventListener("resize",this._checkForMobile);const v=V.c.Instances.indexOf(this);v>=0&&V.c.Instances.splice(v,1),V.c.Instances.length||(V.c.OnEnginesDisposedObservable.notifyObservers(this),V.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(f){throw(0,W.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(f,v){for(let Z=0;Z<V.c.Instances.length;Z++){const h=V.c.Instances[Z];for(let Z=0;Z<h.scenes.length;Z++)h.scenes[Z].markAllMaterialsAsDirty(f,v)}}}M._RenderPassIdCounter=0,M._RescalePostProcessFactory=null,M.CollisionsEpsilon=.001,M.QueueNewFrame=K},11281:(f,v,Z)=>{Z.d(v,{c:()=>h});var V=Z(11235);class h{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}h.Instances=[],h.OnEnginesDisposedObservable=new V.c,h._LastCreatedScene=null,h.UseFallbackTexture=!0,h.FallbackTexture=""},11354:(f,v,Z)=>{Z.d(v,{e:()=>V});class V{static SetMatrixPrecision(f){if(V.MatrixTrackPrecisionChange=!1,f&&!V.MatrixUse64Bits&&V.MatrixTrackedMatrices)for(let v=0;v<V.MatrixTrackedMatrices.length;++v){const f=V.MatrixTrackedMatrices[v],Z=f.Mh;f.Mh=new Array(16);for(let v=0;v<16;++v)f.Mh[v]=Z[v]}V.MatrixUse64Bits=f,V.MatrixCurrentType=V.MatrixUse64Bits?Array:Float32Array,V.MatrixTrackedMatrices=null}}V.MatrixUse64Bits=!1,V.MatrixTrackPrecisionChange=!0,V.MatrixCurrentType=Float32Array,V.MatrixTrackedMatrices=[]},11366:(f,v,Z)=>{Z.d(v,{d:()=>l});var V=Z(11247);const h=new Map;function J(f,v){(function(f){return h.delete(f)})(f)&&V.e.Warn(`Extension with the name '${f}' already exists`),h.set(f,v)}function l(f,v){"image/ktx"!==v&&"image/ktx2"!==v||(f=".ktx"),h.has(f)||(f.endsWith(".ies")&&J(".ies",(async()=>await Z.e(15).then(Z.bind(Z,13808)).then((f=>new f._IESTextureLoader)))),f.endsWith(".dds")&&J(".dds",(async()=>await Promise.all([Z.e(14),Z.e(17),Z.e(13),Z.e(19),Z.e(18),Z.e(28)]).then(Z.bind(Z,13816)).then((f=>new f._DDSTextureLoader)))),f.endsWith(".basis")&&J(".basis",(async()=>await Promise.all([Z.e(14),Z.e(17),Z.e(13),Z.e(47)]).then(Z.bind(Z,13829)).then((f=>new f._BasisTextureLoader)))),f.endsWith(".env")&&J(".env",(async()=>await Promise.all([Z.e(14),Z.e(17),Z.e(13),Z.e(19),Z.e(18),Z.e(23),Z.e(21),Z.e(45),Z.e(48)]).then(Z.bind(Z,13831)).then((f=>new f._ENVTextureLoader)))),f.endsWith(".hdr")&&J(".hdr",(async()=>await Promise.all([Z.e(14),Z.e(49)]).then(Z.bind(Z,13839)).then((f=>new f._HDRTextureLoader)))),(f.endsWith(".ktx")||f.endsWith(".ktx2"))&&(J(".ktx",(async()=>await Z.e(30).then(Z.bind(Z,13842)).then((f=>new f._KTXTextureLoader)))),J(".ktx2",(async()=>await Z.e(30).then(Z.bind(Z,13842)).then((f=>new f._KTXTextureLoader))))),f.endsWith(".tga")&&J(".tga",(async()=>await Z.e(50).then(Z.bind(Z,13846)).then((f=>new f._TGATextureLoader)))),f.endsWith(".exr")&&J(".exr",(async()=>await Z.e(16).then(Z.bind(Z,13853)).then((f=>new f._ExrTextureLoader)))));const V=h.get(f);return V?Promise.resolve(V(v)):null}},11360:(f,v,Z)=>{Z.d(v,{c:()=>l});var V,h=Z(11235),J=Z(11362);!function(f){f[f.Unknown=0]="Unknown",f[f.Url=1]="Url",f[f.Temp=2]="Temp",f[f.Raw=3]="Raw",f[f.Dynamic=4]="Dynamic",f[f.RenderTarget=5]="RenderTarget",f[f.MultiRenderTarget=6]="MultiRenderTarget",f[f.Cube=7]="Cube",f[f.CubeRaw=8]="CubeRaw",f[f.CubePrefiltered=9]="CubePrefiltered",f[f.Raw3D=10]="Raw3D",f[f.Raw2DArray=11]="Raw2DArray",f[f.DepthStencil=12]="DepthStencil",f[f.CubeRawRGBD=13]="CubeRawRGBD",f[f.Depth=14]="Depth"}(V||(V={}));class l extends J.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(f){this.generateMipMaps=f}get uniqueId(){return this._uniqueId}_setUniqueId(f){this._uniqueId=f}getEngine(){return this._engine}get source(){return this._source}constructor(f,v){let Z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new h.c,this.onErrorObservable=new h.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=f,this._source=v,this._uniqueId=l._Counter++,Z||(this._hardwareTexture=f._createHardwareTexture())}incrementReferences(){this._references++}updateSize(f,v){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,f,v,Z),this.width=f,this.height=v,this.depth=Z,this.baseWidth=f,this.baseHeight=v,this.baseDepth=Z,this._size=f*v*Z}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const f=this.onRebuildCallback(this),v=v=>{v._swapAndDie(this,!1),this.isReady=f.isReady};return void(f.isAsync?f.proxy.then(v):v(f.proxy))}let f;switch(this.source){case 2:case 12:case 14:break;case 1:return void(f=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(f=>{f._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:f=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),f._swapAndDie(this,!1),this.isReady=!0;break;case 10:f=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),f._swapAndDie(this,!1),this.isReady=!0;break;case 11:f=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),f._swapAndDie(this,!1),this.isReady=!0;break;case 4:f=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),f._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(f=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{f._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:f=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),f._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return f=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(f=>{f&&f._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(f._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(f){var v;let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(v=this._hardwareTexture)||void 0===v||v.setUsage(f._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),f._hardwareTexture=this._hardwareTexture,Z&&(f._isRGBD=this._isRGBD),this._lodTextureHigh&&(f._lodTextureHigh&&f._lodTextureHigh.dispose(),f._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(f._lodTextureMid&&f._lodTextureMid.dispose(),f._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(f._lodTextureLow&&f._lodTextureLow.dispose(),f._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(f._irradianceTexture&&f._irradianceTexture.dispose(),f._irradianceTexture=this._irradianceTexture);const V=this._engine.getLoadedTexturesCache();let h=V.indexOf(this);-1!==h&&V.splice(h,1),h=V.indexOf(f),-1===h&&V.push(f)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}l._Counter=0},11362:(f,v,Z)=>{Z.d(v,{d:()=>V});class V{get wrapU(){return this._cachedWrapU}set wrapU(f){this._cachedWrapU=f}get wrapV(){return this._cachedWrapV}set wrapV(f){this._cachedWrapV=f}get wrapR(){return this._cachedWrapR}set wrapR(f){this._cachedWrapR=f}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(f){this._cachedAnisotropicFilteringLevel=f}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(f){this._comparisonFunction=f}get useMipMaps(){return this._useMipMaps}set useMipMaps(f){this._useMipMaps=f}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=f,this._cachedWrapV=v,this._cachedWrapR=Z,this._cachedAnisotropicFilteringLevel=V,this.samplingMode=h,this._comparisonFunction=J,this}compareSampler(f){return this._cachedWrapU===f._cachedWrapU&&this._cachedWrapV===f._cachedWrapV&&this._cachedWrapR===f._cachedWrapR&&this._cachedAnisotropicFilteringLevel===f._cachedAnisotropicFilteringLevel&&this.samplingMode===f.samplingMode&&this._comparisonFunction===f._comparisonFunction&&this._useMipMaps===f._useMipMaps}}},11251:(f,v,Z)=>{Z.d(v,{c:()=>J});var V=Z(11247);const h=(f,v,Z)=>f?f.getClassName&&"Mesh"===f.getClassName()?null:!f.getClassName||"SubMesh"!==f.getClassName()&&"PhysicsBody"!==f.getClassName()?f.clone?f.clone():Array.isArray(f)?f.slice():Z&&"object"===typeof f?{...f}:null:f.clone(v):null;class J{static DeepCopy(f,v,Z,J){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const e=function(f){const v=[];do{const Z=Object.getOwnPropertyNames(f);for(const f of Z)-1===v.indexOf(f)&&v.push(f)}while(f=Object.getPrototypeOf(f));return v}(f);for(const H of e){if("_"===H[0]&&(!J||-1===J.indexOf(H)))continue;if(H.endsWith("Observable"))continue;if(Z&&-1!==Z.indexOf(H))continue;const e=f[H],O=typeof e;if("function"!==O)try{if("object"===O)if(e instanceof Uint8Array)v[H]=Uint8Array.from(e);else if(e instanceof Array){if(v[H]=[],e.length>0)if("object"==typeof e[0])for(let f=0;f<e.length;f++){const Z=h(e[f],v,l);-1===v[H].indexOf(Z)&&v[H].push(Z)}else v[H]=e.slice(0)}else v[H]=h(e,v,l);else v[H]=e}catch(C){V.e.Warn(C.message)}}}}},11294:(f,v,Z)=>{Z.d(v,{c:()=>V,g:()=>h,h:()=>J});class V extends Error{}V._setPrototypeOf=Object.setPrototypeOf||((f,v)=>(f.__proto__=v,f));const h={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class J extends V{constructor(f,v,Z){super(f),this.errorCode=v,this.innerError=Z,this.name="RuntimeError",V._setPrototypeOf(this,J.prototype)}}},11290:(f,v,Z)=>{Z.d(v,{d:()=>P,g:()=>M,i:()=>i,m:()=>T,u:()=>y,q:()=>F,x:()=>z,A:()=>Y,D:()=>N,E:()=>A});var V=Z(11272),h=Z(11239),J=Z(11235);class l{}l.FilesToLoad={};var e=Z(11294),C=Z(11301),H=Z(11306),O=Z(11281),u=Z(11247),W=Z(11316),a=Z(11314),b=Z(11318);const X=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class F extends e.h{constructor(f,v){super(f,e.g.LoadFileError),this.name="LoadFileError",e.c._setPrototypeOf(this,F.prototype),v instanceof V.c?this.request=v:this.file=v}}class U extends e.h{constructor(f,v){super(f,e.g.RequestFileError),this.request=v,this.name="RequestFileError",e.c._setPrototypeOf(this,U.prototype)}}class K extends e.h{constructor(f,v){super(f,e.g.ReadFileError),this.file=v,this.name="ReadFileError",e.c._setPrototypeOf(this,K.prototype)}}const M={DefaultRetryStrategy:class{static ExponentialBackoff(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(Z,V,h)=>0!==V.status||h>=f||-1!==Z.indexOf("file:")?-1:Math.pow(2,h)*v}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:f=>f,ScriptBaseUrl:"",ScriptPreprocessUrl:f=>f,CleanUrl:f=>f=f.replace(/#/gm,"%23")},A=(f,v)=>{if((!f||0!==f.indexOf("data:"))&&M.CorsBehavior)if("string"===typeof M.CorsBehavior||M.CorsBehavior instanceof String)v.crossOrigin=M.CorsBehavior;else{const Z=M.CorsBehavior(f);Z&&(v.crossOrigin=Z)}},s={getRequiredSize:null},z=function(f,v,Z,h){let J,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",H=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:O.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===u||void 0===u||!u._features.forceBitmapOverHTMLImageElement))return Z("LoadImage is only supported in web or BabylonNative environments."),null;let W=!1;f instanceof ArrayBuffer||ArrayBuffer.isView(f)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(J=URL.createObjectURL(new Blob([f],{type:e})),W=!0):J=`data:${e};base64,`+(0,C.l)(f):f instanceof Blob?(J=URL.createObjectURL(f),W=!0):(J=M.CleanUrl(f),J=M.PreprocessUrl(J));const a=v=>{if(Z){const V=J||f.toString();Z(`Error while trying to load image: ${0===V.indexOf("http")||V.length<=128?V:V.slice(0,128)+"..."}`,v)}};if(null!==u&&void 0!==u&&u._features.forceBitmapOverHTMLImageElement)return y(J,(V=>{u.createImageBitmap(new Blob([V],{type:e}),{premultiplyAlpha:"none",...H}).then((f=>{v(f),W&&URL.revokeObjectURL(J)})).catch((v=>{Z&&Z("Error while trying to load image: "+f,v)}))}),void 0,h||void 0,!0,((f,v)=>{a(v)})),null;const b=new Image;if(s.getRequiredSize){const v=s.getRequiredSize(f);v.width&&(b.width=v.width),v.height&&(b.height=v.height)}A(J,b);const X=[],F=()=>{for(const f of X)f.target.removeEventListener(f.name,f.handler);X.length=0};X.push({target:b,name:"load",handler:()=>{F(),v(b),W&&b.src&&URL.revokeObjectURL(b.src)}}),X.push({target:b,name:"error",handler:f=>{F(),a(f),W&&b.src&&URL.revokeObjectURL(b.src)}}),X.push({target:document,name:"securitypolicyviolation",handler:f=>{if(f.blockedURI!==b.src||"sh"===f.disposition)return;F();const v=new Error(`CSP violation of policy ${f.effectiveDirective} ${f.blockedURI}. Current policy is ${f.originalPolicy}`);O.c.UseFallbackTexture=!1,a(v),W&&b.src&&URL.revokeObjectURL(b.src),b.src=""}}),(()=>{for(const f of X)f.target.addEventListener(f.name,f.handler)})();const U="blob:"===J.substring(0,5),K="data:"===J.substring(0,5),z=()=>{U||K||!V.c.IsCustomRequestAvailable?b.src=J:y(J,((f,v,Z)=>{const V=new Blob([f],{type:!e&&Z?Z:e}),h=URL.createObjectURL(V);W=!0,b.src=h}),void 0,h||void 0,!0,((f,v)=>{a(v)}))},Y=()=>{h&&h.loadImage(J,b)};if(!U&&!K&&h&&h.enableTexturesOffline)h.open(Y,z);else{if(-1!==J.indexOf("file:")){const f=decodeURIComponent(J.substring(5).toLowerCase());if(l.FilesToLoad[f]&&"undefined"!==typeof URL){try{let v;try{v=URL.createObjectURL(l.FilesToLoad[f])}catch(N){v=URL.createObjectURL(l.FilesToLoad[f])}b.src=v,W=!0}catch(i){b.src=""}return b}}z()}return b},Y=(f,v,Z,V,h)=>{const l=new FileReader,e={onCompleteObservable:new J.c,abort:()=>l.abort()};return l.onloadend=()=>e.onCompleteObservable.notifyObservers(e),h&&(l.onerror=()=>{h(new K(`Unable to read ${f.name}`,f))}),l.onload=f=>{v(f.target.result)},Z&&(l.onprogress=Z),V?l.readAsArrayBuffer(f):l.readAsText(f),e},y=(f,v,Z,V,h,C,H)=>{if(f.name)return Y(f,v,Z,h,C?f=>{C(void 0,f)}:void 0);const O=f;if(-1!==O.indexOf("file:")){let f=decodeURIComponent(O.substring(5).toLowerCase());0===f.indexOf("./")&&(f=f.substring(2));const V=l.FilesToLoad[f];if(V)return Y(V,v,Z,h,C?f=>C(void 0,new F(f.message,f.file)):void 0)}const{match:a,type:b}=B(O);if(a){const f={onCompleteObservable:new J.c,abort:()=>()=>{}};try{const f=h?P(O):g(O);v(f,void 0,b)}catch(e){C?C(void 0,e):u.e.Error(e.message||"Failed to parse the Data URL")}return W.d.SetImmediate((()=>{f.onCompleteObservable.notifyObservers(f)})),f}return N(O,((f,Z)=>{v(f,null===Z||void 0===Z?void 0:Z.responseURL,null===Z||void 0===Z?void 0:Z.getResponseHeader("content-type"))}),Z,V,h,C?f=>{C(f.request,new F(f.message,f.request))}:void 0,H)},N=(f,v,Z,l,e,C,H)=>{f=M.CleanUrl(f),f=M.PreprocessUrl(f);const O=M.BaseUrl+f;let W=!1;const a={onCompleteObservable:new J.c,abort:()=>W=!0},b=()=>{let f,J=new V.c,l=null;const b=()=>{J&&(Z&&J.removeEventListener("progress",Z),f&&J.removeEventListener("readystatechange",f),J.removeEventListener("loadend",X))};let X=()=>{b(),a.onCompleteObservable.notifyObservers(a),a.onCompleteObservable.clear(),Z=void 0,f=null,X=null,C=void 0,H=void 0,v=void 0};a.abort=()=>{W=!0,X&&X(),J&&J.readyState!==(XMLHttpRequest.DONE||4)&&J.abort(),null!==l&&(clearTimeout(l),l=null),J=null};const F=f=>{const v=f.message||"Unknown error";C&&J?C(new U(v,J)):u.e.Error(v)},K=u=>{if(J){if(J.open("GET",O),H)try{H(J)}catch(a){return void F(a)}e&&(J.responseType="arraybuffer"),Z&&J.addEventListener("progress",Z),X&&J.addEventListener("loadend",X),f=()=>{if(!W&&J&&J.readyState===(XMLHttpRequest.DONE||4)){if(f&&J.removeEventListener("readystatechange",f),J.status>=200&&J.status<300||0===J.status&&(!(0,h.m)()||I())){const f=e?J.response:J.responseText;if(null!==f){try{v&&v(f,J)}catch(a){F(a)}return}}const Z=M.DefaultRetryStrategy;if(Z){const f=Z(O,J,u);if(-1!==f)return b(),J=new V.c,void(l=setTimeout((()=>K(u+1)),f))}const H=new U("Error status: "+J.status+" "+J.statusText+" - Unable to load "+O,J);C&&C(H)}},J.addEventListener("readystatechange",f),J.send()}};K(0)};if(l&&l.enableSceneOffline){const V=f=>{f&&f.status>400?C&&C(f):b()},h=()=>{l&&l.loadFile(M.BaseUrl+f,(f=>{!W&&v&&v(f),a.onCompleteObservable.notifyObservers(a)}),Z?f=>{!W&&Z&&Z(f)}:void 0,V,e)};l.open(h,V)}else b();return a},i=f=>{const{match:v,type:Z}=B(f);if(v)return Z||void 0;const V=f.lastIndexOf(".");switch(f.substring(V+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"yh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},I=()=>"undefined"!==typeof location&&"file:"===location.protocol,T=f=>X.test(f),B=f=>{const v=X.exec(f);if(null===v||0===v.length)return{match:!1,type:""};return{match:!0,type:v[0].replace("data:","").replace("base64,","")}};function P(f){return(0,C.c)(f.split(",")[1])}const g=f=>(0,C.d)(f.split(",")[1]);let w;b.b._FileToolsLoadImage=z,a.e.loadFile=y,H.m.loadFile=y;((f,v,Z,V,h,J,l,e,C,H)=>{w={DecodeBase64UrlToBinary:f,DecodeBase64UrlToString:v,DefaultRetryStrategy:Z.DefaultRetryStrategy,BaseUrl:Z.BaseUrl,CorsBehavior:Z.CorsBehavior,PreprocessUrl:Z.PreprocessUrl,IsBase64DataUrl:V,IsFileURL:h,LoadFile:J,LoadImage:l,ReadFile:e,RequestFile:C,SetCorsBehavior:H},Object.defineProperty(w,"DefaultRetryStrategy",{get:function(){return Z.DefaultRetryStrategy},set:function(f){Z.DefaultRetryStrategy=f}}),Object.defineProperty(w,"BaseUrl",{get:function(){return Z.BaseUrl},set:function(f){Z.BaseUrl=f}}),Object.defineProperty(w,"PreprocessUrl",{get:function(){return Z.PreprocessUrl},set:function(f){Z.PreprocessUrl=f}}),Object.defineProperty(w,"CorsBehavior",{get:function(){return Z.CorsBehavior},set:function(f){Z.CorsBehavior=f}})})(P,g,M,T,I,y,z,Y,N,A)},11378:(f,v,Z)=>{function V(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(f=>{const v=16*Math.random()|0;return("x"===f?v:3&v|8).toString(16)}))}Z.d(v,{c:()=>V})},11370:(f,v,Z)=>{Z.d(v,{b:()=>J});var V=Z(11247),h=Z(11372);class J{static Instantiate(f){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[f])return this.RegisteredExternalClasses[f];const v=(0,h.e)(f);if(v)return v;V.e.Warn(f+" not found, you may have missed an import.");const Z=f.split(".");let J=window||this;for(let V=0,h=Z.length;V<h;V++)J=J[Z[V]];return"function"!==typeof J?null:J}}J.RegisteredExternalClasses={}},11254:(f,v,Z)=>{Z.d(v,{b:()=>h});var V=Z(11239);class h{static get Now(){return(0,V.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11301:(f,v,Z)=>{Z.d(v,{c:()=>l,d:()=>J,h:()=>V,l:()=>h});const V=f=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(f);let v="";for(let Z=0;Z<f.byteLength;Z++)v+=String.fromCharCode(f[Z]);return v},h=f=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Z,V,h,J,l,e,C,H="",O=0;const u=ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f);for(;O<u.length;)Z=u[O++],V=O<u.length?u[O++]:Number.NaN,h=O<u.length?u[O++]:Number.NaN,J=Z>>2,l=(3&Z)<<4|V>>4,e=(15&V)<<2|h>>6,C=63&h,isNaN(V)?e=C=64:isNaN(h)&&(C=64),H+=v.charAt(J)+v.charAt(l)+v.charAt(e)+v.charAt(C);return H},J=f=>atob(f),l=f=>{const v=J(f),Z=v.length,V=new Uint8Array(new ArrayBuffer(Z));for(let h=0;h<Z;h++)V[h]=v.charCodeAt(h);return V.buffer}},11385:(f,v,Z)=>{function V(f){let v=1;do{v*=2}while(v<f);return v===f}function h(f,v,Z){return f*(1-Z)+v*Z}function J(f){const v=l(f),Z=e(f);return v-f>f-Z?Z:v}function l(f){return f--,f|=f>>1,f|=f>>2,f|=f>>4,f|=f>>8,f|=f>>16,++f}function e(f){return f|=f>>1,f|=f>>2,f|=f>>4,f|=f>>8,(f|=f>>16)-(f>>1)}function C(f,v){let Z;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:Z=e(f);break;case 2:Z=J(f);break;default:Z=l(f)}return Math.min(Z,v)}Z.d(v,{d:()=>e,h:()=>C,j:()=>V,n:()=>h,r:()=>J})},11230:(f,v,Z)=>{Z.r(v),Z.d(v,{AsyncLoop:()=>K,Tools:()=>F,className:()=>U});var V=Z(11235),h=Z(11239),J=Z(11247),l=Z(11251),e=Z(11254),C=Z(11263),H=Z(11272),O=Z(11281),u=Z(11290),W=Z(11316),a=Z(11370),b=Z(11378),X=Z(11385);class F{static get BaseUrl(){return u.g.BaseUrl}static set BaseUrl(f){u.g.BaseUrl=f}static get CleanUrl(){return u.g.CleanUrl}static set CleanUrl(f){u.g.CleanUrl=f}static IsAbsoluteUrl(f){return 0===f.indexOf("//")||-1!==f.indexOf("://")&&(-1!==f.indexOf(".")&&(-1!==f.indexOf("/")&&(!(f.indexOf(":")>f.indexOf("/"))&&(f.indexOf("://")<f.indexOf(".")||(0===f.indexOf("data:")||0===f.indexOf("blob:"))))))}static set ScriptBaseUrl(f){u.g.ScriptBaseUrl=f}static get ScriptBaseUrl(){return u.g.ScriptBaseUrl}static set CDNBaseUrl(f){F.ScriptBaseUrl=f,F.AssetBaseUrl=f}static set ScriptPreprocessUrl(f){u.g.ScriptPreprocessUrl=f}static get ScriptPreprocessUrl(){return u.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return u.g.DefaultRetryStrategy}static set DefaultRetryStrategy(f){u.g.DefaultRetryStrategy=f}static get CorsBehavior(){return u.g.CorsBehavior}static set CorsBehavior(f){u.g.CorsBehavior=f}static get UseFallbackTexture(){return O.c.UseFallbackTexture}static set UseFallbackTexture(f){O.c.UseFallbackTexture=f}static get RegisteredExternalClasses(){return a.b.RegisteredExternalClasses}static set RegisteredExternalClasses(f){a.b.RegisteredExternalClasses=f}static get fallbackTexture(){return O.c.FallbackTexture}static set fallbackTexture(f){O.c.FallbackTexture=f}static FetchToRef(f,v,Z,V,h,J){const l=4*((Math.abs(f)*Z%Z|0)+(Math.abs(v)*V%V|0)*Z);J.r=h[l]/255,J.g=h[l+1]/255,J.b=h[l+2]/255,J.a=h[l+3]/255}static Mix(f,v,Z){return 0}static Instantiate(f){return a.b.Instantiate(f)}static SetImmediate(f){W.d.SetImmediate(f)}static IsExponentOfTwo(f){return!0}static FloatRound(f){return Math.fround(f)}static GetFilename(f){const v=f.lastIndexOf("/");return v<0?f:f.substring(v+1)}static GetFolderPath(f){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Z=f.lastIndexOf("/");return Z<0?v?f:"":f.substring(0,Z+1)}static ToDegrees(f){return 180*f/Math.PI}static ToRadians(f){return f*Math.PI/180}static SmoothAngleChange(f,v){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const V=this.ToRadians(f),h=this.ToRadians(v);return this.ToDegrees(Math.atan2((1-Z)*Math.sin(h)+Z*Math.sin(V),(1-Z)*Math.cos(h)+Z*Math.cos(V)))}static MakeArray(f,v){return!0===v||void 0!==f&&null!=f?Array.isArray(f)?f:[f]:null}static GetPointerPrefix(f){return(0,h.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(f,v){(0,u.E)(f,v)}static SetReferrerPolicyBehavior(f,v){v.referrerPolicy=f}static get PreprocessUrl(){return u.g.PreprocessUrl}static set PreprocessUrl(f){u.g.PreprocessUrl=f}static LoadImage(f,v,Z,V,h,J){return(0,u.x)(f,v,Z,V,h,J)}static LoadFile(f,v,Z,V,h,J){return(0,u.u)(f,v,Z,V,h,J)}static async LoadFileAsync(f){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((Z,V)=>{(0,u.u)(f,(f=>{Z(f)}),void 0,void 0,v,((f,v)=>{V(v)}))}))}static GetAssetUrl(f){if(!f)return"";if(F.AssetBaseUrl&&f.startsWith(F._DefaultAssetsUrl)){const v="/"===F.AssetBaseUrl[F.AssetBaseUrl.length-1]?F.AssetBaseUrl.substring(0,F.AssetBaseUrl.length-1):F.AssetBaseUrl;return f.replace(F._DefaultAssetsUrl,v)}return f}static GetBabylonScriptURL(f,v){if(!f)return"";if(F.ScriptBaseUrl&&f.startsWith(F._DefaultCdnUrl)){const v="/"===F.ScriptBaseUrl[F.ScriptBaseUrl.length-1]?F.ScriptBaseUrl.substring(0,F.ScriptBaseUrl.length-1):F.ScriptBaseUrl;f=f.replace(F._DefaultCdnUrl,v)}return f=F.ScriptPreprocessUrl(f),v&&(f=F.GetAbsoluteUrl(f)),f}static LoadBabylonScript(f,v,Z,V){f=F.GetBabylonScriptURL(f),F.LoadScript(f,v,Z)}static async LoadBabylonScriptAsync(f){return f=F.GetBabylonScriptURL(f),await F.LoadScriptAsync(f)}static LoadScript(f,v,Z,V){let J=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(f),v&&v()}catch(C){null===Z||void 0===Z||Z(`Unable to load script '${f}' in worker`,C)}return}if(!(0,h.m)())return void(null===Z||void 0===Z||Z(`Cannot load script '${f}' outside of a window or a worker`));const l=document.getElementsByTagName("head")[0],e=document.createElement("script");J?(e.setAttribute("type","module"),e.innerText=f):(e.setAttribute("type","text/javascript"),e.setAttribute("src",f)),V&&(e.id=V),e.onload=()=>{v&&v()},e.onerror=v=>{Z&&Z(`Unable to load script '${f}'`,v)},l.appendChild(e)}static async LoadScriptAsync(f,v){return await new Promise(((Z,V)=>{this.LoadScript(f,(()=>{Z()}),((f,v)=>{V(v||new Error(f))}),v)}))}static ReadFileAsDataURL(f,v,Z){const h=new FileReader,J={onCompleteObservable:new V.c,abort:()=>h.abort()};return h.onloadend=()=>{J.onCompleteObservable.notifyObservers(J)},h.onload=f=>{v(f.target.result)},h.onprogress=Z,h.readAsDataURL(f),J}static ReadFile(f,v,Z,V,h){return(0,u.A)(f,v,Z,V,h)}static FileAsURL(f){const v=new Blob([f]);return window.URL.createObjectURL(v)}static Format(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return f.toFixed(v)}static DeepCopy(f,v,Z,V){l.c.DeepCopy(f,v,Z,V)}static IsEmpty(f){for(const v in f)if(Object.prototype.hasOwnProperty.call(f,v))return!1;return!0}static RegisterTopRootEvents(f,v){for(let V=0;V<v.length;V++){const h=v[V];f.addEventListener(h.name,h.handler,!1);try{window.parent&&window.parent.addEventListener(h.name,h.handler,!1)}catch(Z){}}}static UnregisterTopRootEvents(f,v){for(let V=0;V<v.length;V++){const h=v[V];f.removeEventListener(h.name,h.handler);try{f.parent&&f.parent.removeEventListener(h.name,h.handler)}catch(Z){}}}static async DumpFramebuffer(f,v,Z,V){throw(0,C.e)("DumpTools")}static DumpData(f,v,Z,V){throw(0,C.e)("DumpTools")}static async DumpDataAsync(f,v,Z){throw(0,C.e)("DumpTools")}static _IsOffScreenCanvas(f){return void 0!==f.convertToBlob}static ToBlob(f,v){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0;F._IsOffScreenCanvas(f)||f.toBlob||(f.toBlob=function(f,v,Z){setTimeout((()=>{const V=atob(this.toDataURL(v,Z).split(",")[1]),h=V.length,J=new Uint8Array(h);for(let f=0;f<h;f++)J[f]=V.charCodeAt(f);f(new Blob([J]))}))}),F._IsOffScreenCanvas(f)?f.convertToBlob({type:Z,quality:V}).then((f=>v(f))):f.toBlob((function(f){v(f)}),Z,V)}static DownloadBlob(f,v){if("download"in document.createElement("a")){if(!v){const f=new Date;v="screenshot_"+((f.getFullYear()+"-"+(f.getMonth()+1)).slice(2)+"-"+f.getDate()+"_"+f.getHours()+"-"+("0"+f.getMinutes()).slice(-2))+".png"}F.Download(f,v)}else if(f&&"undefined"!==typeof URL){const v=URL.createObjectURL(f),Z=window.open("");if(!Z)return;const V=Z.document.createElement("img");V.onload=function(){URL.revokeObjectURL(v)},V.src=v,Z.document.body.appendChild(V)}}static EncodeScreenshotCanvasData(f,v){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",V=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0;if("string"!==typeof V&&v){if(v){if(F._IsOffScreenCanvas(f))return void f.convertToBlob({type:Z,quality:h}).then((f=>{const Z=new FileReader;Z.readAsDataURL(f),Z.onloadend=()=>{const f=Z.result;v(f)}}));const V=f.toDataURL(Z,h);v(V)}}else this.ToBlob(f,(function(f){f&&F.DownloadBlob(f,V),v&&v("")}),Z,h)}static Download(f,v){if("undefined"===typeof URL)return;const Z=window.URL.createObjectURL(f),V=document.createElement("a");document.body.appendChild(V),V.style.display="none",V.href=Z,V.download=v,V.addEventListener("click",(()=>{V.parentElement&&V.parentElement.removeChild(V)})),V.click(),window.URL.revokeObjectURL(Z)}static BackCompatCameraNoPreventDefault(f){return"boolean"===typeof f[0]?f[0]:"boolean"===typeof f[1]&&f[1]}static CreateScreenshot(f,v,Z,V){throw(0,C.e)("ScreenshotTools")}static async CreateScreenshotAsync(f,v,Z){throw(0,C.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(f,v,Z,V){throw(0,C.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(f,v,Z){throw(0,C.e)("ScreenshotTools")}static RandomId(){return(0,b.c)()}static IsBase64(f){return(0,u.m)(f)}static DecodeBase64(f){return(0,u.d)(f)}static get errorsCount(){return J.e.errorsCount}static Log(f){J.e.Log(f)}static Warn(f){J.e.Warn(f)}static Error(f){J.e.Error(f)}static get LogCache(){return J.e.LogCache}static ClearLogCache(){J.e.ClearLogCache()}static set LogLevels(f){J.e.LogLevels=f}static set PerformanceLogLevel(f){return(f&F.PerformanceUserMarkLogLevel)===F.PerformanceUserMarkLogLevel?(F.StartPerformanceCounter=F._StartUserMark,void(F.EndPerformanceCounter=F._EndUserMark)):(f&F.PerformanceConsoleLogLevel)===F.PerformanceConsoleLogLevel?(F.StartPerformanceCounter=F._StartPerformanceConsole,void(F.EndPerformanceCounter=F._EndPerformanceConsole)):(F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,void(F.EndPerformanceCounter=F._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(f,v){}static _EndPerformanceCounterDisabled(f,v){}static _StartUserMark(f){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!F._Performance){if(!(0,h.m)())return;F._Performance=window.performance}v&&F._Performance.mark&&F._Performance.mark(f+"-Begin")}static _EndUserMark(f){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&F._Performance.mark&&(F._Performance.mark(f+"-End"),F._Performance.measure(f,f+"-Begin",f+"-End"))}static _StartPerformanceConsole(f){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(F._StartUserMark(f,v),console.time&&console.time(f))}static _EndPerformanceConsole(f){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];v&&(F._EndUserMark(f,v),console.timeEnd(f))}static get Now(){return e.b.Now}static GetClassName(f){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=null;if(!v&&f.getClassName)Z=f.getClassName();else{if(f instanceof Object){Z=(v?f:Object.getPrototypeOf(f)).constructor.__bjsclassName__}Z||(Z=typeof f)}return Z}static First(f,v){for(const Z of f)if(v(Z))return Z;return null}static getFullClassName(f){let v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Z=null,V=null;if(!v&&f.getClassName)Z=f.getClassName();else{if(f instanceof Object){const h=v?f:Object.getPrototypeOf(f);Z=h.constructor.__bjsclassName__,V=h.constructor.__bjsmoduleName__}Z||(Z=typeof f)}return Z?(null!=V?V+".":"")+Z:null}static async DelayAsync(f){await new Promise((v=>{setTimeout((()=>{v()}),f)}))}static IsSafari(){return!!(0,h.l)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function U(f,v){return Z=>{Z.__bjsclassName__=f,Z.__bjsmoduleName__=null!=v?v:null}}F.AssetBaseUrl="",F.UseCustomRequestHeaders=!1,F.CustomRequestHeaders=H.c.CustomRequestHeaders,F.GetDOMTextContent=h.d,F._DefaultCdnUrl="https://cdn.babylonjs.com",F._DefaultAssetsUrl="https://assets.babylonjs.com/core",F.GetAbsoluteUrl="object"===typeof document?f=>{const v=document.createElement("a");return v.href=f,v.href}:"function"===typeof URL&&"object"===typeof location?f=>new URL(f,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},F.NoneLogLevel=J.e.NoneLogLevel,F.MessageLogLevel=J.e.MessageLogLevel,F.WarningLogLevel=J.e.WarningLogLevel,F.ErrorLogLevel=J.e.ErrorLogLevel,F.AllLogLevel=J.e.AllLogLevel,F.IsWindowObjectExist=h.m,F.PerformanceNoneLogLevel=0,F.PerformanceUserMarkLogLevel=1,F.PerformanceConsoleLogLevel=2,F.StartPerformanceCounter=F._StartPerformanceCounterDisabled,F.EndPerformanceCounter=F._EndPerformanceCounterDisabled;class K{constructor(f,v,Z){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=f,this.index=V-1,this._done=!1,this._fn=v,this._successCallback=Z}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(f,v,Z){const V=new K(f,v,Z,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return V.executeNext(),V}static SyncAsyncForLoop(f,v,Z,V,h){let J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return K.Run(Math.ceil(f/v),(V=>{h&&h()?V.breakLoop():setTimeout((()=>{for(let J=0;J<v;++J){const l=V.index*v+J;if(l>=f)break;if(Z(l),h&&h()){V.breakLoop();break}}V.executeNext()}),J)}),V)}}F.Mix=X.n,F.IsExponentOfTwo=X.j,O.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11372:(f,v,Z)=>{Z.d(v,{e:()=>J,h:()=>h});const V={};function h(f,v){V[f]=v}function J(f){return V[f]}},11272:(f,v,Z)=>{Z.d(v,{c:()=>V});class V{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(V.CustomRequestHeaders).length>0||V.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const f in V.CustomRequestHeaders){const v=V.CustomRequestHeaders[f];v&&this._xhr.setRequestHeader(f,v)}}_shouldSkipRequestModifications(f){return V.SkipRequestModificationForBabylonCDN&&(f.includes("preview.babylonjs.com")||f.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(f){this._xhr.onprogress=f}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(f){this._xhr.responseType=f}get timeout(){return this._xhr.timeout}set timeout(f){this._xhr.timeout=f}addEventListener(f,v,Z){this._xhr.addEventListener(f,v,Z)}removeEventListener(f,v,Z){this._xhr.removeEventListener(f,v,Z)}abort(){this._xhr.abort()}send(f){V.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(f)}open(f,v){for(const Z of V.CustomRequestModifiers){if(this._shouldSkipRequestModifications(v))return;v=Z(this._xhr,v)||v}v=(v=v.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=v,this._xhr.open(f,v,!0)}setRequestHeader(f,v){this._xhr.setRequestHeader(f,v)}getResponseHeader(f){return this._xhr.getResponseHeader(f)}}V.CustomRequestHeaders={},V.CustomRequestModifiers=new Array,V.SkipRequestModificationForBabylonCDN=!0}}]);