"use strict";(self.k9ivgwsw3f=self.k9ivgwsw3f||[]).push([[8],{12733:(Y,b,C)=>{C.d(b,{b:()=>N});var R=C(12702),q=C(12669),A=C(12738),E=C(12764),B=C(12681);class g{constructor(){let Y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,Y&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(Y){this._zOffset!==Y&&(this._zOffset=Y,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(Y){this._zOffsetUnits!==Y&&(this._zOffsetUnits=Y,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(Y){this._cullFace!==Y&&(this._cullFace=Y,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(Y){this._cull!==Y&&(this._cull=Y,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(Y){this._depthFunc!==Y&&(this._depthFunc=Y,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(Y){this._depthMask!==Y&&(this._depthMask=Y,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(Y){this._depthTest!==Y&&(this._depthTest=Y,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(Y){this._frontFace!==Y&&(this._frontFace=Y,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(Y){this.isDirty&&(this._isCullDirty&&(this.cull?Y.enable(Y.CULL_FACE):Y.disable(Y.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(Y.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(Y.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?Y.enable(Y.DEPTH_TEST):Y.disable(Y.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(Y.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(Y.enable(Y.POLYGON_OFFSET_FILL),Y.polygonOffset(this.zOffset,this.zOffsetUnits)):Y.disable(Y.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(Y.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class r{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(Y){this._func!==Y&&(this._func=Y,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(Y){this._funcRef!==Y&&(this._funcRef=Y,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(Y){this._funcMask!==Y&&(this._funcMask=Y,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(Y){this._opStencilFail!==Y&&(this._opStencilFail=Y,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(Y){this._opDepthFail!==Y&&(this._opDepthFail=Y,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(Y){this._opStencilDepthPass!==Y&&(this._opStencilDepthPass=Y,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(Y){this._mask!==Y&&(this._mask=Y,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(Y){this._enabled!==Y&&(this._enabled=Y,this._isStencilTestDirty=!0)}constructor(){let Y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,Y&&this.reset()}reset(){var Y;this.stencilMaterial=void 0,null===(Y=this.stencilGlobal)||void 0===Y||Y.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(Y){var b;if(!Y)return;const C=!this.useStencilGlobalOnly&&!(null===(b=this.stencilMaterial)||void 0===b||!b.enabled);this.enabled=C?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=C?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=C?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=C?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=C?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=C?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=C?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=C?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?Y.enable(Y.STENCIL_TEST):Y.disable(Y.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(Y.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(Y.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(Y.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class O{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=O.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=O.KEEP,this.opDepthFail=O.KEEP,this.opStencilDepthPass=O.REPLACE}get stencilFunc(){return this.func}set stencilFunc(Y){this.func=Y}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(Y){this.funcRef=Y}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(Y){this.funcMask=Y}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(Y){this.opStencilFail=Y}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(Y){this.opDepthFail=Y}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(Y){this.opStencilDepthPass=Y}get stencilMask(){return this.mask}set stencilMask(Y){this.mask=Y}get stencilTest(){return this.enabled}set stencilTest(Y){this.enabled=Y}}O.ALWAYS=519,O.KEEP=7680,O.REPLACE=7681;class F{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(Y){this._alphaBlend!==Y&&(this._alphaBlend=Y,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(Y,b,C,R){this._blendConstants[0]===Y&&this._blendConstants[1]===b&&this._blendConstants[2]===C&&this._blendConstants[3]===R||(this._blendConstants[0]=Y,this._blendConstants[1]=b,this._blendConstants[2]=C,this._blendConstants[3]=R,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(Y,b,C,R){this._blendFunctionParameters[0]===Y&&this._blendFunctionParameters[1]===b&&this._blendFunctionParameters[2]===C&&this._blendFunctionParameters[3]===R||(this._blendFunctionParameters[0]=Y,this._blendFunctionParameters[1]=b,this._blendFunctionParameters[2]=C,this._blendFunctionParameters[3]=R,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(Y,b){this._blendEquationParameters[0]===Y&&this._blendEquationParameters[1]===b||(this._blendEquationParameters[0]=Y,this._blendEquationParameters[1]=b,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(Y){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?Y.enable(Y.BLEND):Y.disable(Y.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(Y.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(Y.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(Y.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var y=C(12687),S=C(12767),n=C(12660),t=C(12652),I=C(12724),w=C(12779);function Q(Y,b){if((0,n.h)()){const{requestAnimationFrame:C}=b||window;if("function"===typeof C)return C(Y)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(Y);return setTimeout(Y,16)}class N{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(Y){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get o(){return this._useReverseDepthBuffer}set o(Y){Y!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=Y,this._depthCullingState.depthFunc=Y?518:515)}setColorWrite(Y){Y!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=Y)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(Y){if(Y)return this.isNDCHalfZRange?Y.IS_NDC_HALF_ZRANGE="":delete Y.IS_NDC_HALF_ZRANGE,this.o?Y.USE_REVERSE_DEPTHBUFFER="":delete Y.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?Y.USE_EXACT_SRGB_CONVERSIONS="":delete Y.USE_EXACT_SRGB_CONVERSIONS);{let Y="";return this.isNDCHalfZRange&&(Y+="#define IS_NDC_HALF_ZRANGE"),this.o&&(Y&&(Y+="\n"),Y+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(Y&&(Y+="\n"),Y+="#define USE_EXACT_SRGB_CONVERSIONS"),Y}}_rebuildInternalTextures(){const Y=this._internalTexturesCache.slice();for(const b of Y)b._rebuild()}_rebuildRenderTargetWrappers(){const Y=this._renderTargetWrapperCache.slice();for(const b of Y)b._rebuild()}_rebuildEffects(){for(const Y in this._compiledEffects){const b=this._compiledEffects[Y];b._pipelineContext=null,b._prepareEffect()}A.Effect.ResetCache()}_rebuildGraphicsResources(){var Y;this.wipeCaches(!0),this._rebuildEffects(),null===(Y=this._rebuildComputeEffects)||void 0===Y||Y.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){q.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(Y){setTimeout((()=>{this._clearEmptyResources();const b=this._depthCullingState.depthTest,C=this._depthCullingState.depthFunc,R=this._depthCullingState.depthMask,q=this._stencilState.stencilTest;Y(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=b,this._depthCullingState.depthFunc=C,this._depthCullingState.depthMask=R,this._stencilState.stencilTest=q,this._flagContextRestored()}),0)}get O(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(Y){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(Y){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const Y=new Uint8Array(4),b=[Y,Y,Y,Y,Y,Y];this._emptyCubeTexture=this.createRawCubeTexture(b,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(Y){if(!Y)return this._activeRenderLoops.length=0,void this._cancelFrame();const b=this._activeRenderLoops.indexOf(Y);b>=0&&(this._activeRenderLoops.splice(b,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const Y=this._frameHandler;if(this._frameHandler=0,(0,n.h)()){const{cancelAnimationFrame:b}=this.getHostWindow()||window;if("function"===typeof b)return b(Y)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(Y);return clearTimeout(Y)}}Fb(){this.onBeginFrameObservable.notifyObservers(this)}yb(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(Y){this._maxFPS=Y,void 0!==Y&&(this._minFrameTime=Y<=0?Number.MAX_VALUE:1e3/Y)}_isOverFrameTime(Y){if(!Y||void 0===this._maxFPS)return!1;const b=Y-this._lastFrameTime;return this._lastFrameTime=Y,this._renderAccumulator+=b,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(Y){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(Y)){let Y=!0;(this.O||!this.renderEvenInBackground&&this._windowIsBackground)&&(Y=!1),Y&&(this.Fb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.yb())}}_renderLoop(Y){this._processFrame(Y),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let Y=0;Y<this._activeRenderLoops.length;Y++){(0,this._activeRenderLoops[Y])()}}_renderViews(){return!1}_queueNewFrame(Y,b){return Q(Y,b)}runRenderLoop(Y){-1===this._activeRenderLoops.indexOf(Y)&&(this._activeRenderLoops.push(Y),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(Y){this._depthCullingState.depthTest=Y}setZOffset(Y){this._depthCullingState.zOffset=this.o?-Y:Y}getZOffset(){const Y=this._depthCullingState.zOffset;return this.o?-Y:Y}setZOffsetUnits(Y){this._depthCullingState.zOffsetUnits=this.o?-Y:Y}getZOffsetUnits(){const Y=this._depthCullingState.zOffsetUnits;return this.o?-Y:Y}getHostWindow(){return(0,n.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(Y){this._compatibilityMode=!0}_rebuildTextures(){for(const Y of this.scenes)Y._rebuildTextures();for(const Y of this._virtualScenes)Y._rebuildTextures()}_releaseRenderTargetWrapper(Y){const b=this._renderTargetWrapperCache.indexOf(Y);-1!==b&&this._renderTargetWrapperCache.splice(b,1)}get currentViewport(){return this._cachedViewport}setViewport(Y,b,C){const R=b||this.getRenderWidth(),q=C||this.getRenderHeight(),A=Y.x||0,E=Y.y||0;this._cachedViewport=Y,this._viewport(A*R,E*q,R*Y.width,q*Y.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(Y){return new Path2D(Y)}get description(){let Y=this.name+this.version;return this._caps.parallelShaderCompile&&(Y+=" - Parallel shader compilation"),Y}_createTextureBase(Y,b,C,A){let E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,r=arguments.length>7?arguments[7]:void 0,O=arguments.length>8?arguments[8]:void 0,F=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,n=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,t=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13?arguments[13]:void 0,Q=arguments.length>14?arguments[14]:void 0,p=arguments.length>15?arguments[15]:void 0;const mY="data:"===(Y=Y||"").substring(0,5),L="blob:"===Y.substring(0,5),u=mY&&-1!==Y.indexOf(";base64,"),c=y||new S.b(this,1);c!==y&&(c.label=Y.substring(0,60));const l=Y;!this._transformTextureUrl||u||y||F||(Y=this._transformTextureUrl(Y)),l!==Y&&(c._originalUrl=l);const X=Y.lastIndexOf(".");let j=t||(X>-1?Y.substring(X).toLowerCase():"");j.indexOf("?")>-1&&(j=j.split("?")[0]);const T=(0,w.c)(j,I);A&&A.addPendingData(c),c.url=Y,c.generateMipMaps=!b,c.samplingMode=E,c.invertY=C,c._useSRGBBuffer=this._getUseSRGBBuffer(!!p,b),this._doNotHandleContextLost||(c._buffer=F);let P=null;B&&!y&&(P=c.onLoadedObservable.add(B)),y||this._internalTexturesCache.push(c);const v=(C,y)=>{A&&A.removePendingData(c),Y===l?(P&&c.onLoadedObservable.remove(P),R.d.UseFallbackTexture&&Y!==R.d.FallbackTexture&&this._createTextureBase(R.d.FallbackTexture,b,c.invertY,A,E,null,g,r,O,F,c),C=(C||"Unknown error")+(R.d.UseFallbackTexture?" - Fallback texture was used":""),c.onErrorObservable.notifyObservers({message:C,exception:y}),g&&g(C,y)):(q.e.Warn(`Failed to load ${Y}, falling back to ${l}`),this._createTextureBase(l,b,c.invertY,A,E,B,g,r,O,F,c,n,t,I,Q,p))};if(T){const b=async Y=>{(await T).loadData(Y,c,((Y,b,C,R,q,B)=>{B?v("TextureLoader failed to load data"):r(c,j,A,{width:Y,height:b},c.invertY,!C,R,(()=>(q(),!1)),E)}),Q)};F?F instanceof ArrayBuffer?b(new Uint8Array(F)):ArrayBuffer.isView(F)?b(F):g&&g("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(Y,(Y=>{b(new Uint8Array(Y))}),void 0,A?A.offlineProvider:void 0,!0,((Y,b)=>{v("Unable to load "+(Y&&Y.responseURL,b))}))}else{const C=Y=>{L&&!this._doNotHandleContextLost&&(c._buffer=Y),r(c,j,A,Y,c.invertY,b,!1,O,E)};!mY||u?F&&("string"===typeof F.decoding||F.close)?C(F):N._FileToolsLoadImage(Y||"",C,v,A?A.offlineProvider:null,I,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof F||F instanceof ArrayBuffer||ArrayBuffer.isView(F)||F instanceof Blob?N._FileToolsLoadImage(F,C,v,A?A.offlineProvider:null,I,c.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):F&&C(F)}return c}_rebuildBuffers(){for(const Y of this._uniformBuffers)Y._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,n.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const Y in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,Y)&&(this._boundTexturesCache[Y]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(Y){this._name=Y}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(Y){this._hardwareScalingLevel=Y,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(Y){this._doNotHandleContextLost=Y}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(Y,b,C){var q,A;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new g,this._stencilStateComposer=new r,this._stencilState=new O,this._alphaState=new F,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new t.d,this.onCanvasFocusObservable=new t.d,this.onNewSceneAddedObservable=new t.d,this.onResizeObservable=new t.d,this.onCanvasPointerOutObservable=new t.d,this.onEffectErrorObservable=new t.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new t.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=Y=>this._renderLoop(Y),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new t.d,this.onAfterShaderCompilationObservable=new t.d,this.onBeginFrameObservable=new t.d,this.onEndFrameObservable=new t.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new t.d,this.onContextRestoredObservable=new t.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Sb=new t.d,this.onReleaseEffectsObservable=new t.d,R.d.Instances.push(this),this.startTime=B.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,E.c.SetMatrixPrecision(!!b.useHighPrecisionMatrix),(0,n.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=C??!1,b.antialias=Y??b.antialias,b.deterministicLockstep=b.deterministicLockstep??!1,b.lockstepMaxSteps=b.lockstepMaxSteps??4,b.timeStep=b.timeStep??1/60,b.nb=b.nb??!0,this._audioContext=(null===(q=b.audioEngineOptions)||void 0===q?void 0:q.audioContext)??null,this._audioDestination=(null===(A=b.audioEngineOptions)||void 0===A?void 0:A.audioDestination)??null,this.premultipliedAlpha=b.premultipliedAlpha??!0,this._doNotHandleContextLost=!!b.doNotHandleContextLost,this._isStencilEnable=!!b.nb,this.useExactSrgbConversions=b.useExactSrgbConversions??!1;const y=(0,n.h)()&&window.devicePixelRatio||1,S=b.limitDeviceRatio||y;C=C||b.adaptToDeviceRatio||!1,this._hardwareScalingLevel=C?1/Math.min(S,y):1,this._lastDevicePixelRatio=y,this._creationOptions=b}resize(){let Y,b,C=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const Y=(0,n.h)()&&window.devicePixelRatio||1,b=this._lastDevicePixelRatio/Y;this._lastDevicePixelRatio=Y,this._hardwareScalingLevel*=b}if((0,n.h)()&&(0,n.e)())if(this._renderingCanvas){var R,q;const C=null===(R=(q=this._renderingCanvas).getBoundingClientRect)||void 0===R?void 0:R.call(q);Y=this._renderingCanvas.clientWidth||(null===C||void 0===C?void 0:C.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,b=this._renderingCanvas.clientHeight||(null===C||void 0===C?void 0:C.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else Y=window.innerWidth,b=window.innerHeight;else Y=this._renderingCanvas?this._renderingCanvas.width:100,b=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(Y/this._hardwareScalingLevel,b/this._hardwareScalingLevel,C)}setSize(Y,b){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(Y|=0,b|=0,!C&&this._renderingCanvas.width===Y&&this._renderingCanvas.height===b)return!1;if(this._renderingCanvas.width=Y,this._renderingCanvas.height=b,this.scenes){for(let Y=0;Y<this.scenes.length;Y++){const b=this.scenes[Y];for(let Y=0;Y<b.cameras.length;Y++){b.cameras[Y]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(Y,b,C,R,q,A,E,B,g,r,O){throw(0,y.d)("engine.rawTexture")}createRawCubeTexture(Y,b,C,R,q,A,E,B){throw(0,y.d)("engine.rawTexture")}createRawTexture3D(Y,b,C,R,q,A,E,B,g,r,O){throw(0,y.d)("engine.rawTexture")}createRawTexture2DArray(Y,b,C,R,q,A,E,B,g,r,O){throw(0,y.d)("engine.rawTexture")}_sharedInit(Y){this._renderingCanvas=Y}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const Y=navigator.userAgent;this.hostInformation.isMobile=-1!==Y.indexOf("Mobile")||-1!==Y.indexOf("Mac")&&(0,n.e)()&&"ontouchend"in document},this._checkForMobile(),(0,n.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(Y){return document.createElement("video")}_reportDrawCall(){var Y;let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(Y=this._drawCalls)||void 0===Y||Y.addCount(b,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(Y,b){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(Y,b){return createImageBitmap(Y,b)}resizeImageBitmap(Y,b,C){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(Y){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(Y,b){if("undefined"===typeof document)return new OffscreenCanvas(Y,b);const C=document.createElement("canvas");return C.width=Y,C.height=b,C}createCanvas(Y,b){return N._CreateCanvas(Y,b)}static _FileToolsLoadImage(Y,b,C,R,q,A,E){throw(0,y.d)("FileTools")}_loadFile(Y,b,C,R,q,A){const E=(0,I.k)(Y,b,C,R,q,A);return this._activeRequests.push(E),E.onCompleteObservable.add((()=>{const Y=this._activeRequests.indexOf(E);-1!==Y&&this._activeRequests.splice(Y,1)})),E}static _FileToolsLoadFile(Y,b,C,R,q,A){if(I.b.loadFile)return I.b.loadFile(Y,b,C,R,q,A);throw(0,y.d)("FileTools")}dispose(){var Y;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(Y=this.releaseComputeEffects)||void 0===Y||Y.call(this),A.Effect.ResetCache();for(const C of this._activeRequests)C.abort();this._boundRenderFunction=null,this.Sb.notifyObservers(this),this.Sb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,n.h)()&&window.removeEventListener("resize",this._checkForMobile);const b=R.d.Instances.indexOf(this);b>=0&&R.d.Instances.splice(b,1),R.d.Instances.length||(R.d.OnEnginesDisposedObservable.notifyObservers(this),R.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(Y){throw(0,y.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(Y,b){for(let C=0;C<R.d.Instances.length;C++){const q=R.d.Instances[C];for(let C=0;C<q.scenes.length;C++)q.scenes[C].markAllMaterialsAsDirty(Y,b)}}}N._RenderPassIdCounter=0,N._RescalePostProcessFactory=null,N.CollisionsEpsilon=.001,N.QueueNewFrame=Q},12702:(Y,b,C)=>{C.d(b,{d:()=>q});var R=C(12652);class q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}q.Instances=[],q.OnEnginesDisposedObservable=new R.d,q._LastCreatedScene=null,q.UseFallbackTexture=!0,q.FallbackTexture=""},12764:(Y,b,C)=>{C.d(b,{c:()=>R});class R{static SetMatrixPrecision(Y){if(R.MatrixTrackPrecisionChange=!1,Y&&!R.MatrixUse64Bits&&R.MatrixTrackedMatrices)for(let b=0;b<R.MatrixTrackedMatrices.length;++b){const Y=R.MatrixTrackedMatrices[b],C=Y.Ib;Y.Ib=new Array(16);for(let b=0;b<16;++b)Y.Ib[b]=C[b]}R.MatrixUse64Bits=Y,R.MatrixCurrentType=R.MatrixUse64Bits?Array:Float32Array,R.MatrixTrackedMatrices=null}}R.MatrixUse64Bits=!1,R.MatrixTrackPrecisionChange=!0,R.MatrixCurrentType=Float32Array,R.MatrixTrackedMatrices=[]},12779:(Y,b,C)=>{C.d(b,{c:()=>E});var R=C(12669);const q=new Map;function A(Y,b){(function(Y){return q.delete(Y)})(Y)&&R.e.Warn(`Extension with the name '${Y}' already exists`),q.set(Y,b)}function E(Y,b){"image/ktx"!==b&&"image/ktx2"!==b||(Y=".ktx"),q.has(Y)||(Y.endsWith(".ies")&&A(".ies",(async()=>await C.e(15).then(C.bind(C,15352)).then((Y=>new Y._IESTextureLoader)))),Y.endsWith(".dds")&&A(".dds",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(28)]).then(C.bind(C,15357)).then((Y=>new Y._DDSTextureLoader)))),Y.endsWith(".basis")&&A(".basis",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(47)]).then(C.bind(C,15365)).then((Y=>new Y._BasisTextureLoader)))),Y.endsWith(".env")&&A(".env",(async()=>await Promise.all([C.e(14),C.e(17),C.e(13),C.e(19),C.e(18),C.e(23),C.e(21),C.e(45),C.e(48)]).then(C.bind(C,15373)).then((Y=>new Y._ENVTextureLoader)))),Y.endsWith(".hdr")&&A(".hdr",(async()=>await Promise.all([C.e(14),C.e(49)]).then(C.bind(C,15376)).then((Y=>new Y._HDRTextureLoader)))),(Y.endsWith(".ktx")||Y.endsWith(".ktx2"))&&(A(".ktx",(async()=>await C.e(30).then(C.bind(C,15380)).then((Y=>new Y._KTXTextureLoader)))),A(".ktx2",(async()=>await C.e(30).then(C.bind(C,15380)).then((Y=>new Y._KTXTextureLoader))))),Y.endsWith(".tga")&&A(".tga",(async()=>await C.e(50).then(C.bind(C,15389)).then((Y=>new Y._TGATextureLoader)))),Y.endsWith(".exr")&&A(".exr",(async()=>await C.e(16).then(C.bind(C,15397)).then((Y=>new Y._ExrTextureLoader)))));const R=q.get(Y);return R?Promise.resolve(R(b)):null}},12767:(Y,b,C)=>{C.d(b,{b:()=>E});var R,q=C(12652),A=C(12771);!function(Y){Y[Y.Unknown=0]="Unknown",Y[Y.Url=1]="Url",Y[Y.Temp=2]="Temp",Y[Y.Raw=3]="Raw",Y[Y.Dynamic=4]="Dynamic",Y[Y.RenderTarget=5]="RenderTarget",Y[Y.MultiRenderTarget=6]="MultiRenderTarget",Y[Y.Cube=7]="Cube",Y[Y.CubeRaw=8]="CubeRaw",Y[Y.CubePrefiltered=9]="CubePrefiltered",Y[Y.Raw3D=10]="Raw3D",Y[Y.Raw2DArray=11]="Raw2DArray",Y[Y.DepthStencil=12]="DepthStencil",Y[Y.CubeRawRGBD=13]="CubeRawRGBD",Y[Y.Depth=14]="Depth"}(R||(R={}));class E extends A.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(Y){this.generateMipMaps=Y}get uniqueId(){return this._uniqueId}_setUniqueId(Y){this._uniqueId=Y}getEngine(){return this._engine}get source(){return this._source}constructor(Y,b){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new q.d,this.onErrorObservable=new q.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=Y,this._source=b,this._uniqueId=E._Counter++,C||(this._hardwareTexture=Y._createHardwareTexture())}incrementReferences(){this._references++}updateSize(Y,b){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,Y,b,C),this.width=Y,this.height=b,this.depth=C,this.baseWidth=Y,this.baseHeight=b,this.baseDepth=C,this._size=Y*b*C}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const Y=this.onRebuildCallback(this),b=b=>{b._swapAndDie(this,!1),this.isReady=Y.isReady};return void(Y.isAsync?Y.proxy.then(b):b(Y.proxy))}let Y;switch(this.source){case 2:case 12:case 14:break;case 1:return void(Y=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(Y=>{Y._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:Y=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),Y._swapAndDie(this,!1),this.isReady=!0;break;case 10:Y=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Y._swapAndDie(this,!1),this.isReady=!0;break;case 11:Y=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Y._swapAndDie(this,!1),this.isReady=!0;break;case 4:Y=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),Y._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(Y=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{Y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:Y=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),Y._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return Y=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(Y=>{Y&&Y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(Y._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(Y){var b;let C=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(b=this._hardwareTexture)||void 0===b||b.setUsage(Y._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),Y._hardwareTexture=this._hardwareTexture,C&&(Y._isRGBD=this._isRGBD),this._lodTextureHigh&&(Y._lodTextureHigh&&Y._lodTextureHigh.dispose(),Y._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(Y._lodTextureMid&&Y._lodTextureMid.dispose(),Y._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(Y._lodTextureLow&&Y._lodTextureLow.dispose(),Y._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(Y._irradianceTexture&&Y._irradianceTexture.dispose(),Y._irradianceTexture=this._irradianceTexture);const R=this._engine.getLoadedTexturesCache();let q=R.indexOf(this);-1!==q&&R.splice(q,1),q=R.indexOf(Y),-1===q&&R.push(Y)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}E._Counter=0},12771:(Y,b,C)=>{C.d(b,{d:()=>R});class R{get wrapU(){return this._cachedWrapU}set wrapU(Y){this._cachedWrapU=Y}get wrapV(){return this._cachedWrapV}set wrapV(Y){this._cachedWrapV=Y}get wrapR(){return this._cachedWrapR}set wrapR(Y){this._cachedWrapR=Y}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(Y){this._cachedAnisotropicFilteringLevel=Y}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(Y){this._comparisonFunction=Y}get useMipMaps(){return this._useMipMaps}set useMipMaps(Y){this._useMipMaps=Y}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=Y,this._cachedWrapV=b,this._cachedWrapR=C,this._cachedAnisotropicFilteringLevel=R,this.samplingMode=q,this._comparisonFunction=A,this}compareSampler(Y){return this._cachedWrapU===Y._cachedWrapU&&this._cachedWrapV===Y._cachedWrapV&&this._cachedWrapR===Y._cachedWrapR&&this._cachedAnisotropicFilteringLevel===Y._cachedAnisotropicFilteringLevel&&this.samplingMode===Y.samplingMode&&this._comparisonFunction===Y._comparisonFunction&&this._useMipMaps===Y._useMipMaps}}},12678:(Y,b,C)=>{C.d(b,{c:()=>A});var R=C(12669);const q=(Y,b,C)=>Y?Y.getClassName&&"Mesh"===Y.getClassName()?null:!Y.getClassName||"SubMesh"!==Y.getClassName()&&"PhysicsBody"!==Y.getClassName()?Y.clone?Y.clone():Array.isArray(Y)?Y.slice():C&&"object"===typeof Y?{...Y}:null:Y.clone(b):null;class A{static DeepCopy(Y,b,C,A){let E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const B=function(Y){const b=[];do{const C=Object.getOwnPropertyNames(Y);for(const Y of C)-1===b.indexOf(Y)&&b.push(Y)}while(Y=Object.getPrototypeOf(Y));return b}(Y);for(const r of B){if("_"===r[0]&&(!A||-1===A.indexOf(r)))continue;if(r.endsWith("Observable"))continue;if(C&&-1!==C.indexOf(r))continue;const B=Y[r],O=typeof B;if("function"!==O)try{if("object"===O)if(B instanceof Uint8Array)b[r]=Uint8Array.from(B);else if(B instanceof Array){if(b[r]=[],B.length>0)if("object"==typeof B[0])for(let Y=0;Y<B.length;Y++){const C=q(B[Y],b,E);-1===b[r].indexOf(C)&&b[r].push(C)}else b[r]=B.slice(0)}else b[r]=q(B,b,E);else b[r]=B}catch(g){R.e.Warn(g.message)}}}}},12715:(Y,b,C)=>{C.d(b,{b:()=>R,e:()=>q,i:()=>A});class R extends Error{}R._setPrototypeOf=Object.setPrototypeOf||((Y,b)=>(Y.__proto__=b,Y));const q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class A extends R{constructor(Y,b,C){super(Y),this.errorCode=b,this.innerError=C,this.name="RuntimeError",R._setPrototypeOf(this,A.prototype)}}},12709:(Y,b,C)=>{C.d(b,{e:()=>v,h:()=>N,l:()=>X,p:()=>T,t:()=>c,s:()=>I,x:()=>L,z:()=>u,D:()=>l,H:()=>p});var R=C(12696),q=C(12660),A=C(12652);class E{}E.FilesToLoad={};var B=C(12715),g=C(12720),r=C(12722),O=C(12702),F=C(12669),y=C(12726),S=C(12724),n=C(12733);const t=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class I extends B.i{constructor(Y,b){super(Y,B.e.LoadFileError),this.name="LoadFileError",B.b._setPrototypeOf(this,I.prototype),b instanceof R.e?this.request=b:this.file=b}}class w extends B.i{constructor(Y,b){super(Y,B.e.RequestFileError),this.request=b,this.name="RequestFileError",B.b._setPrototypeOf(this,w.prototype)}}class Q extends B.i{constructor(Y,b){super(Y,B.e.ReadFileError),this.file=b,this.name="ReadFileError",B.b._setPrototypeOf(this,Q.prototype)}}const N={DefaultRetryStrategy:class{static ExponentialBackoff(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(C,R,q)=>0!==R.status||q>=Y||-1!==C.indexOf("file:")?-1:Math.pow(2,q)*b}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:Y=>Y,ScriptBaseUrl:"",ScriptPreprocessUrl:Y=>Y,CleanUrl:Y=>Y=Y.replace(/#/gm,"%23")},p=(Y,b)=>{if((!Y||0!==Y.indexOf("data:"))&&N.CorsBehavior)if("string"===typeof N.CorsBehavior||N.CorsBehavior instanceof String)b.crossOrigin=N.CorsBehavior;else{const C=N.CorsBehavior(Y);C&&(b.crossOrigin=C)}},mY={getRequiredSize:null},L=function(Y,b,C,q){let A,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5?arguments[5]:void 0,F=arguments.length>6&&void 0!==arguments[6]?arguments[6]:O.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===F||void 0===F||!F._features.forceBitmapOverHTMLImageElement))return C("LoadImage is only supported in web or BabylonNative environments."),null;let y=!1;Y instanceof ArrayBuffer||ArrayBuffer.isView(Y)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(A=URL.createObjectURL(new Blob([Y],{type:B})),y=!0):A=`data:${B};base64,`+(0,g.l)(Y):Y instanceof Blob?(A=URL.createObjectURL(Y),y=!0):(A=N.CleanUrl(Y),A=N.PreprocessUrl(A));const S=b=>{if(C){const R=A||Y.toString();C(`Error while trying to load image: ${0===R.indexOf("http")||R.length<=128?R:R.slice(0,128)+"..."}`,b)}};if(null!==F&&void 0!==F&&F._features.forceBitmapOverHTMLImageElement)return c(A,(R=>{F.createImageBitmap(new Blob([R],{type:B}),{premultiplyAlpha:"none",...r}).then((Y=>{b(Y),y&&URL.revokeObjectURL(A)})).catch((b=>{C&&C("Error while trying to load image: "+Y,b)}))}),void 0,q||void 0,!0,((Y,b)=>{S(b)})),null;const n=new Image;if(mY.getRequiredSize){const b=mY.getRequiredSize(Y);b.width&&(n.width=b.width),b.height&&(n.height=b.height)}p(A,n);const t=[],I=()=>{for(const Y of t)Y.target.removeEventListener(Y.name,Y.handler);t.length=0};t.push({target:n,name:"load",handler:()=>{I(),b(n),y&&n.src&&URL.revokeObjectURL(n.src)}}),t.push({target:n,name:"error",handler:Y=>{I(),S(Y),y&&n.src&&URL.revokeObjectURL(n.src)}}),t.push({target:document,name:"securitypolicyviolation",handler:Y=>{if(Y.blockedURI!==n.src||"wb"===Y.disposition)return;I();const b=new Error(`CSP violation of policy ${Y.effectiveDirective} ${Y.blockedURI}. Current policy is ${Y.originalPolicy}`);O.d.UseFallbackTexture=!1,S(b),y&&n.src&&URL.revokeObjectURL(n.src),n.src=""}}),(()=>{for(const Y of t)Y.target.addEventListener(Y.name,Y.handler)})();const w="blob:"===A.substring(0,5),Q="data:"===A.substring(0,5),L=()=>{w||Q||!R.e.IsCustomRequestAvailable?n.src=A:c(A,((Y,b,C)=>{const R=new Blob([Y],{type:!B&&C?C:B}),q=URL.createObjectURL(R);y=!0,n.src=q}),void 0,q||void 0,!0,((Y,b)=>{S(b)}))},u=()=>{q&&q.loadImage(A,n)};if(!w&&!Q&&q&&q.enableTexturesOffline)q.open(u,L);else{if(-1!==A.indexOf("file:")){const Y=decodeURIComponent(A.substring(5).toLowerCase());if(E.FilesToLoad[Y]&&"undefined"!==typeof URL){try{let b;try{b=URL.createObjectURL(E.FilesToLoad[Y])}catch(l){b=URL.createObjectURL(E.FilesToLoad[Y])}n.src=b,y=!0}catch(X){n.src=""}return n}}L()}return n},u=(Y,b,C,R,q)=>{const E=new FileReader,B={onCompleteObservable:new A.d,abort:()=>E.abort()};return E.onloadend=()=>B.onCompleteObservable.notifyObservers(B),q&&(E.onerror=()=>{q(new Q(`Unable to read ${Y.name}`,Y))}),E.onload=Y=>{b(Y.target.result)},C&&(E.onprogress=C),R?E.readAsArrayBuffer(Y):E.readAsText(Y),B},c=(Y,b,C,R,q,g,r)=>{if(Y.name)return u(Y,b,C,q,g?Y=>{g(void 0,Y)}:void 0);const O=Y;if(-1!==O.indexOf("file:")){let Y=decodeURIComponent(O.substring(5).toLowerCase());0===Y.indexOf("./")&&(Y=Y.substring(2));const R=E.FilesToLoad[Y];if(R)return u(R,b,C,q,g?Y=>g(void 0,new I(Y.message,Y.file)):void 0)}const{match:S,type:n}=P(O);if(S){const Y={onCompleteObservable:new A.d,abort:()=>()=>{}};try{const Y=q?v(O):z(O);b(Y,void 0,n)}catch(B){g?g(void 0,B):F.e.Error(B.message||"Failed to parse the Data URL")}return y.d.SetImmediate((()=>{Y.onCompleteObservable.notifyObservers(Y)})),Y}return l(O,((Y,C)=>{b(Y,null===C||void 0===C?void 0:C.responseURL,null===C||void 0===C?void 0:C.getResponseHeader("content-type"))}),C,R,q,g?Y=>{g(Y.request,new I(Y.message,Y.request))}:void 0,r)},l=(Y,b,C,E,B,g,r)=>{Y=N.CleanUrl(Y),Y=N.PreprocessUrl(Y);const O=N.BaseUrl+Y;let y=!1;const S={onCompleteObservable:new A.d,abort:()=>y=!0},n=()=>{let Y,A=new R.e,E=null;const n=()=>{A&&(C&&A.removeEventListener("progress",C),Y&&A.removeEventListener("readystatechange",Y),A.removeEventListener("loadend",t))};let t=()=>{n(),S.onCompleteObservable.notifyObservers(S),S.onCompleteObservable.clear(),C=void 0,Y=null,t=null,g=void 0,r=void 0,b=void 0};S.abort=()=>{y=!0,t&&t(),A&&A.readyState!==(XMLHttpRequest.DONE||4)&&A.abort(),null!==E&&(clearTimeout(E),E=null),A=null};const I=Y=>{const b=Y.message||"Unknown error";g&&A?g(new w(b,A)):F.e.Error(b)},Q=F=>{if(A){if(A.open("GET",O),r)try{r(A)}catch(S){return void I(S)}B&&(A.responseType="arraybuffer"),C&&A.addEventListener("progress",C),t&&A.addEventListener("loadend",t),Y=()=>{if(!y&&A&&A.readyState===(XMLHttpRequest.DONE||4)){if(Y&&A.removeEventListener("readystatechange",Y),A.status>=200&&A.status<300||0===A.status&&(!(0,q.h)()||j())){const Y=B?A.response:A.responseText;if(null!==Y){try{b&&b(Y,A)}catch(S){I(S)}return}}const C=N.DefaultRetryStrategy;if(C){const Y=C(O,A,F);if(-1!==Y)return n(),A=new R.e,void(E=setTimeout((()=>Q(F+1)),Y))}const r=new w("Error status: "+A.status+" "+A.statusText+" - Unable to load "+O,A);g&&g(r)}},A.addEventListener("readystatechange",Y),A.send()}};Q(0)};if(E&&E.enableSceneOffline){const R=Y=>{Y&&Y.status>400?g&&g(Y):n()},q=()=>{E&&E.loadFile(N.BaseUrl+Y,(Y=>{!y&&b&&b(Y),S.onCompleteObservable.notifyObservers(S)}),C?Y=>{!y&&C&&C(Y)}:void 0,R,B)};E.open(q,R)}else n();return S},X=Y=>{const{match:b,type:C}=P(Y);if(b)return C||void 0;const R=Y.lastIndexOf(".");switch(Y.substring(R+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Qb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},j=()=>"undefined"!==typeof location&&"file:"===location.protocol,T=Y=>t.test(Y),P=Y=>{const b=t.exec(Y);if(null===b||0===b.length)return{match:!1,type:""};return{match:!0,type:b[0].replace("data:","").replace("base64,","")}};function v(Y){return(0,g.b)(Y.split(",")[1])}const z=Y=>(0,g.e)(Y.split(",")[1]);let J;n.b._FileToolsLoadImage=L,S.b.loadFile=c,r.p.loadFile=c;((Y,b,C,R,q,A,E,B,g,r)=>{J={DecodeBase64UrlToBinary:Y,DecodeBase64UrlToString:b,DefaultRetryStrategy:C.DefaultRetryStrategy,BaseUrl:C.BaseUrl,CorsBehavior:C.CorsBehavior,PreprocessUrl:C.PreprocessUrl,IsBase64DataUrl:R,IsFileURL:q,LoadFile:A,LoadImage:E,ReadFile:B,RequestFile:g,SetCorsBehavior:r},Object.defineProperty(J,"DefaultRetryStrategy",{get:function(){return C.DefaultRetryStrategy},set:function(Y){C.DefaultRetryStrategy=Y}}),Object.defineProperty(J,"BaseUrl",{get:function(){return C.BaseUrl},set:function(Y){C.BaseUrl=Y}}),Object.defineProperty(J,"PreprocessUrl",{get:function(){return C.PreprocessUrl},set:function(Y){C.PreprocessUrl=Y}}),Object.defineProperty(J,"CorsBehavior",{get:function(){return C.CorsBehavior},set:function(Y){C.CorsBehavior=Y}})})(v,z,N,T,j,c,L,u,l,p)},12799:(Y,b,C)=>{function R(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Y=>{const b=16*Math.random()|0;return("x"===Y?b:3&b|8).toString(16)}))}C.d(b,{e:()=>R})},12787:(Y,b,C)=>{C.d(b,{b:()=>A});var R=C(12669),q=C(12790);class A{static Instantiate(Y){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[Y])return this.RegisteredExternalClasses[Y];const b=(0,q.c)(Y);if(b)return b;R.e.Warn(Y+" not found, you may have missed an import.");const C=Y.split(".");let A=window||this;for(let R=0,q=C.length;R<q;R++)A=A[C[R]];return"function"!==typeof A?null:A}}A.RegisteredExternalClasses={}},12681:(Y,b,C)=>{C.d(b,{d:()=>q});var R=C(12660);class q{static get Now(){return(0,R.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12720:(Y,b,C)=>{C.d(b,{b:()=>E,e:()=>A,h:()=>R,l:()=>q});const R=Y=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(Y);let b="";for(let C=0;C<Y.byteLength;C++)b+=String.fromCharCode(Y[C]);return b},q=Y=>{const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let C,R,q,A,E,B,g,r="",O=0;const F=ArrayBuffer.isView(Y)?new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength):new Uint8Array(Y);for(;O<F.length;)C=F[O++],R=O<F.length?F[O++]:Number.NaN,q=O<F.length?F[O++]:Number.NaN,A=C>>2,E=(3&C)<<4|R>>4,B=(15&R)<<2|q>>6,g=63&q,isNaN(R)?B=g=64:isNaN(q)&&(g=64),r+=b.charAt(A)+b.charAt(E)+b.charAt(B)+b.charAt(g);return r},A=Y=>atob(Y),E=Y=>{const b=A(Y),C=b.length,R=new Uint8Array(new ArrayBuffer(C));for(let q=0;q<C;q++)R[q]=b.charCodeAt(q);return R.buffer}},12805:(Y,b,C)=>{function R(Y){let b=1;do{b*=2}while(b<Y);return b===Y}function q(Y,b,C){return Y*(1-C)+b*C}function A(Y){const b=E(Y),C=B(Y);return b-Y>Y-C?C:b}function E(Y){return Y--,Y|=Y>>1,Y|=Y>>2,Y|=Y>>4,Y|=Y>>8,Y|=Y>>16,++Y}function B(Y){return Y|=Y>>1,Y|=Y>>2,Y|=Y>>4,Y|=Y>>8,(Y|=Y>>16)-(Y>>1)}function g(Y,b){let C;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:C=B(Y);break;case 2:C=A(Y);break;default:C=E(Y)}return Math.min(C,b)}C.d(b,{e:()=>B,g:()=>g,k:()=>R,m:()=>q,p:()=>A})},12645:(Y,b,C)=>{C.r(b),C.d(b,{AsyncLoop:()=>Q,Tools:()=>I,className:()=>w});var R=C(12652),q=C(12660),A=C(12669),E=C(12678),B=C(12681),g=C(12687),r=C(12696),O=C(12702),F=C(12709),y=C(12726),S=C(12787),n=C(12799),t=C(12805);class I{static get BaseUrl(){return F.h.BaseUrl}static set BaseUrl(Y){F.h.BaseUrl=Y}static get CleanUrl(){return F.h.CleanUrl}static set CleanUrl(Y){F.h.CleanUrl=Y}static IsAbsoluteUrl(Y){return 0===Y.indexOf("//")||-1!==Y.indexOf("://")&&(-1!==Y.indexOf(".")&&(-1!==Y.indexOf("/")&&(!(Y.indexOf(":")>Y.indexOf("/"))&&(Y.indexOf("://")<Y.indexOf(".")||(0===Y.indexOf("data:")||0===Y.indexOf("blob:"))))))}static set ScriptBaseUrl(Y){F.h.ScriptBaseUrl=Y}static get ScriptBaseUrl(){return F.h.ScriptBaseUrl}static set CDNBaseUrl(Y){I.ScriptBaseUrl=Y,I.AssetBaseUrl=Y}static set ScriptPreprocessUrl(Y){F.h.ScriptPreprocessUrl=Y}static get ScriptPreprocessUrl(){return F.h.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return F.h.DefaultRetryStrategy}static set DefaultRetryStrategy(Y){F.h.DefaultRetryStrategy=Y}static get CorsBehavior(){return F.h.CorsBehavior}static set CorsBehavior(Y){F.h.CorsBehavior=Y}static get UseFallbackTexture(){return O.d.UseFallbackTexture}static set UseFallbackTexture(Y){O.d.UseFallbackTexture=Y}static get RegisteredExternalClasses(){return S.b.RegisteredExternalClasses}static set RegisteredExternalClasses(Y){S.b.RegisteredExternalClasses=Y}static get fallbackTexture(){return O.d.FallbackTexture}static set fallbackTexture(Y){O.d.FallbackTexture=Y}static FetchToRef(Y,b,C,R,q,A){const E=4*((Math.abs(Y)*C%C|0)+(Math.abs(b)*R%R|0)*C);A.r=q[E]/255,A.g=q[E+1]/255,A.b=q[E+2]/255,A.a=q[E+3]/255}static Mix(Y,b,C){return 0}static Instantiate(Y){return S.b.Instantiate(Y)}static SetImmediate(Y){y.d.SetImmediate(Y)}static IsExponentOfTwo(Y){return!0}static FloatRound(Y){return Math.fround(Y)}static GetFilename(Y){const b=Y.lastIndexOf("/");return b<0?Y:Y.substring(b+1)}static GetFolderPath(Y){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const C=Y.lastIndexOf("/");return C<0?b?Y:"":Y.substring(0,C+1)}static ToDegrees(Y){return 180*Y/Math.PI}static ToRadians(Y){return Y*Math.PI/180}static SmoothAngleChange(Y,b){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const R=this.ToRadians(Y),q=this.ToRadians(b);return this.ToDegrees(Math.atan2((1-C)*Math.sin(q)+C*Math.sin(R),(1-C)*Math.cos(q)+C*Math.cos(R)))}static MakeArray(Y,b){return!0===b||void 0!==Y&&null!=Y?Array.isArray(Y)?Y:[Y]:null}static GetPointerPrefix(Y){return(0,q.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(Y,b){(0,F.H)(Y,b)}static SetReferrerPolicyBehavior(Y,b){b.referrerPolicy=Y}static get PreprocessUrl(){return F.h.PreprocessUrl}static set PreprocessUrl(Y){F.h.PreprocessUrl=Y}static LoadImage(Y,b,C,R,q,A){return(0,F.x)(Y,b,C,R,q,A)}static LoadFile(Y,b,C,R,q,A){return(0,F.t)(Y,b,C,R,q,A)}static async LoadFileAsync(Y){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((C,R)=>{(0,F.t)(Y,(Y=>{C(Y)}),void 0,void 0,b,((Y,b)=>{R(b)}))}))}static GetAssetUrl(Y){if(!Y)return"";if(I.AssetBaseUrl&&Y.startsWith(I._DefaultAssetsUrl)){const b="/"===I.AssetBaseUrl[I.AssetBaseUrl.length-1]?I.AssetBaseUrl.substring(0,I.AssetBaseUrl.length-1):I.AssetBaseUrl;return Y.replace(I._DefaultAssetsUrl,b)}return Y}static GetBabylonScriptURL(Y,b){if(!Y)return"";if(I.ScriptBaseUrl&&Y.startsWith(I._DefaultCdnUrl)){const b="/"===I.ScriptBaseUrl[I.ScriptBaseUrl.length-1]?I.ScriptBaseUrl.substring(0,I.ScriptBaseUrl.length-1):I.ScriptBaseUrl;Y=Y.replace(I._DefaultCdnUrl,b)}return Y=I.ScriptPreprocessUrl(Y),b&&(Y=I.GetAbsoluteUrl(Y)),Y}static LoadBabylonScript(Y,b,C,R){Y=I.GetBabylonScriptURL(Y),I.LoadScript(Y,b,C)}static async LoadBabylonScriptAsync(Y){return Y=I.GetBabylonScriptURL(Y),await I.LoadScriptAsync(Y)}static LoadScript(Y,b,C,R){let A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(Y),b&&b()}catch(g){null===C||void 0===C||C(`Unable to load script '${Y}' in worker`,g)}return}if(!(0,q.h)())return void(null===C||void 0===C||C(`Cannot load script '${Y}' outside of a window or a worker`));const E=document.getElementsByTagName("head")[0],B=document.createElement("script");A?(B.setAttribute("type","module"),B.innerText=Y):(B.setAttribute("type","text/javascript"),B.setAttribute("src",Y)),R&&(B.id=R),B.onload=()=>{b&&b()},B.onerror=b=>{C&&C(`Unable to load script '${Y}'`,b)},E.appendChild(B)}static async LoadScriptAsync(Y,b){return await new Promise(((C,R)=>{this.LoadScript(Y,(()=>{C()}),((Y,b)=>{R(b||new Error(Y))}),b)}))}static ReadFileAsDataURL(Y,b,C){const q=new FileReader,A={onCompleteObservable:new R.d,abort:()=>q.abort()};return q.onloadend=()=>{A.onCompleteObservable.notifyObservers(A)},q.onload=Y=>{b(Y.target.result)},q.onprogress=C,q.readAsDataURL(Y),A}static ReadFile(Y,b,C,R,q){return(0,F.z)(Y,b,C,R,q)}static FileAsURL(Y){const b=new Blob([Y]);return window.URL.createObjectURL(b)}static Format(Y){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Y.toFixed(b)}static DeepCopy(Y,b,C,R){E.c.DeepCopy(Y,b,C,R)}static IsEmpty(Y){for(const b in Y)if(Object.prototype.hasOwnProperty.call(Y,b))return!1;return!0}static RegisterTopRootEvents(Y,b){for(let R=0;R<b.length;R++){const q=b[R];Y.addEventListener(q.name,q.handler,!1);try{window.parent&&window.parent.addEventListener(q.name,q.handler,!1)}catch(C){}}}static UnregisterTopRootEvents(Y,b){for(let R=0;R<b.length;R++){const q=b[R];Y.removeEventListener(q.name,q.handler);try{Y.parent&&Y.parent.removeEventListener(q.name,q.handler)}catch(C){}}}static async DumpFramebuffer(Y,b,C,R){throw(0,g.d)("DumpTools")}static DumpData(Y,b,C,R){throw(0,g.d)("DumpTools")}static async DumpDataAsync(Y,b,C){throw(0,g.d)("DumpTools")}static _IsOffScreenCanvas(Y){return void 0!==Y.convertToBlob}static ToBlob(Y,b){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",R=arguments.length>3?arguments[3]:void 0;I._IsOffScreenCanvas(Y)||Y.toBlob||(Y.toBlob=function(Y,b,C){setTimeout((()=>{const R=atob(this.toDataURL(b,C).split(",")[1]),q=R.length,A=new Uint8Array(q);for(let Y=0;Y<q;Y++)A[Y]=R.charCodeAt(Y);Y(new Blob([A]))}))}),I._IsOffScreenCanvas(Y)?Y.convertToBlob({type:C,quality:R}).then((Y=>b(Y))):Y.toBlob((function(Y){b(Y)}),C,R)}static DownloadBlob(Y,b){if("download"in document.createElement("a")){if(!b){const Y=new Date;b="screenshot_"+((Y.getFullYear()+"-"+(Y.getMonth()+1)).slice(2)+"-"+Y.getDate()+"_"+Y.getHours()+"-"+("0"+Y.getMinutes()).slice(-2))+".png"}I.Download(Y,b)}else if(Y&&"undefined"!==typeof URL){const b=URL.createObjectURL(Y),C=window.open("");if(!C)return;const R=C.document.createElement("img");R.onload=function(){URL.revokeObjectURL(b)},R.src=b,C.document.body.appendChild(R)}}static EncodeScreenshotCanvasData(Y,b){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",R=arguments.length>3?arguments[3]:void 0,q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof R&&b){if(b){if(I._IsOffScreenCanvas(Y))return void Y.convertToBlob({type:C,quality:q}).then((Y=>{const C=new FileReader;C.readAsDataURL(Y),C.onloadend=()=>{const Y=C.result;b(Y)}}));const R=Y.toDataURL(C,q);b(R)}}else this.ToBlob(Y,(function(Y){Y&&I.DownloadBlob(Y,R),b&&b("")}),C,q)}static Download(Y,b){if("undefined"===typeof URL)return;const C=window.URL.createObjectURL(Y),R=document.createElement("a");document.body.appendChild(R),R.style.display="none",R.href=C,R.download=b,R.addEventListener("click",(()=>{R.parentElement&&R.parentElement.removeChild(R)})),R.click(),window.URL.revokeObjectURL(C)}static BackCompatCameraNoPreventDefault(Y){return"boolean"===typeof Y[0]?Y[0]:"boolean"===typeof Y[1]&&Y[1]}static CreateScreenshot(Y,b,C,R){throw(0,g.d)("ScreenshotTools")}static async CreateScreenshotAsync(Y,b,C){throw(0,g.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(Y,b,C,R){throw(0,g.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(Y,b,C){throw(0,g.d)("ScreenshotTools")}static RandomId(){return(0,n.e)()}static IsBase64(Y){return(0,F.p)(Y)}static DecodeBase64(Y){return(0,F.e)(Y)}static get errorsCount(){return A.e.errorsCount}static Log(Y){A.e.Log(Y)}static Warn(Y){A.e.Warn(Y)}static Error(Y){A.e.Error(Y)}static get LogCache(){return A.e.LogCache}static ClearLogCache(){A.e.ClearLogCache()}static set LogLevels(Y){A.e.LogLevels=Y}static set PerformanceLogLevel(Y){return(Y&I.PerformanceUserMarkLogLevel)===I.PerformanceUserMarkLogLevel?(I.StartPerformanceCounter=I._StartUserMark,void(I.EndPerformanceCounter=I._EndUserMark)):(Y&I.PerformanceConsoleLogLevel)===I.PerformanceConsoleLogLevel?(I.StartPerformanceCounter=I._StartPerformanceConsole,void(I.EndPerformanceCounter=I._EndPerformanceConsole)):(I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,void(I.EndPerformanceCounter=I._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(Y,b){}static _EndPerformanceCounterDisabled(Y,b){}static _StartUserMark(Y){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!I._Performance){if(!(0,q.h)())return;I._Performance=window.performance}b&&I._Performance.mark&&I._Performance.mark(Y+"-Begin")}static _EndUserMark(Y){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&I._Performance.mark&&(I._Performance.mark(Y+"-End"),I._Performance.measure(Y,Y+"-Begin",Y+"-End"))}static _StartPerformanceConsole(Y){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(I._StartUserMark(Y,b),console.time&&console.time(Y))}static _EndPerformanceConsole(Y){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];b&&(I._EndUserMark(Y,b),console.timeEnd(Y))}static get Now(){return B.d.Now}static GetClassName(Y){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null;if(!b&&Y.getClassName)C=Y.getClassName();else{if(Y instanceof Object){C=(b?Y:Object.getPrototypeOf(Y)).constructor.__bjsclassName__}C||(C=typeof Y)}return C}static First(Y,b){for(const C of Y)if(b(C))return C;return null}static getFullClassName(Y){let b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],C=null,R=null;if(!b&&Y.getClassName)C=Y.getClassName();else{if(Y instanceof Object){const q=b?Y:Object.getPrototypeOf(Y);C=q.constructor.__bjsclassName__,R=q.constructor.__bjsmoduleName__}C||(C=typeof Y)}return C?(null!=R?R+".":"")+C:null}static async DelayAsync(Y){await new Promise((b=>{setTimeout((()=>{b()}),Y)}))}static IsSafari(){return!!(0,q.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function w(Y,b){return C=>{C.__bjsclassName__=Y,C.__bjsmoduleName__=null!=b?b:null}}I.AssetBaseUrl="",I.UseCustomRequestHeaders=!1,I.CustomRequestHeaders=r.e.CustomRequestHeaders,I.GetDOMTextContent=q.b,I._DefaultCdnUrl="https://cdn.babylonjs.com",I._DefaultAssetsUrl="https://assets.babylonjs.com/core",I.GetAbsoluteUrl="object"===typeof document?Y=>{const b=document.createElement("a");return b.href=Y,b.href}:"function"===typeof URL&&"object"===typeof location?Y=>new URL(Y,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},I.NoneLogLevel=A.e.NoneLogLevel,I.MessageLogLevel=A.e.MessageLogLevel,I.WarningLogLevel=A.e.WarningLogLevel,I.ErrorLogLevel=A.e.ErrorLogLevel,I.AllLogLevel=A.e.AllLogLevel,I.IsWindowObjectExist=q.h,I.PerformanceNoneLogLevel=0,I.PerformanceUserMarkLogLevel=1,I.PerformanceConsoleLogLevel=2,I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,I.EndPerformanceCounter=I._EndPerformanceCounterDisabled;class Q{constructor(Y,b,C){let R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=Y,this.index=R-1,this._done=!1,this._fn=b,this._successCallback=C}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(Y,b,C){const R=new Q(Y,b,C,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return R.executeNext(),R}static SyncAsyncForLoop(Y,b,C,R,q){let A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Q.Run(Math.ceil(Y/b),(R=>{q&&q()?R.breakLoop():setTimeout((()=>{for(let A=0;A<b;++A){const E=R.index*b+A;if(E>=Y)break;if(C(E),q&&q()){R.breakLoop();break}}R.executeNext()}),A)}),R)}}I.Mix=t.m,I.IsExponentOfTwo=t.k,O.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12790:(Y,b,C)=>{C.d(b,{c:()=>A,g:()=>q});const R={};function q(Y,b){R[Y]=b}function A(Y){return R[Y]}},12696:(Y,b,C)=>{C.d(b,{e:()=>R});class R{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(R.CustomRequestHeaders).length>0||R.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const Y in R.CustomRequestHeaders){const b=R.CustomRequestHeaders[Y];b&&this._xhr.setRequestHeader(Y,b)}}_shouldSkipRequestModifications(Y){return R.SkipRequestModificationForBabylonCDN&&(Y.includes("preview.babylonjs.com")||Y.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(Y){this._xhr.onprogress=Y}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(Y){this._xhr.responseType=Y}get timeout(){return this._xhr.timeout}set timeout(Y){this._xhr.timeout=Y}addEventListener(Y,b,C){this._xhr.addEventListener(Y,b,C)}removeEventListener(Y,b,C){this._xhr.removeEventListener(Y,b,C)}abort(){this._xhr.abort()}send(Y){R.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(Y)}open(Y,b){for(const C of R.CustomRequestModifiers){if(this._shouldSkipRequestModifications(b))return;b=C(this._xhr,b)||b}b=(b=b.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=b,this._xhr.open(Y,b,!0)}setRequestHeader(Y,b){this._xhr.setRequestHeader(Y,b)}getResponseHeader(Y){return this._xhr.getResponseHeader(Y)}}R.CustomRequestHeaders={},R.CustomRequestModifiers=new Array,R.SkipRequestModificationForBabylonCDN=!0}}]);