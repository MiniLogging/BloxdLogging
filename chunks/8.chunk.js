"use strict";(self["9x1utqq1axc"]=self["9x1utqq1axc"]||[]).push([[8],{12220:(y,c,A)=>{A.d(c,{b:()=>s});var l=A(12184),w=A(12161),N=A(12224),p=A(12251),W=A(12171);class h{constructor(){let y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,y&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(y){this._zOffset!==y&&(this._zOffset=y,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(y){this._zOffsetUnits!==y&&(this._zOffsetUnits=y,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(y){this._cullFace!==y&&(this._cullFace=y,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(y){this._cull!==y&&(this._cull=y,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(y){this._depthFunc!==y&&(this._depthFunc=y,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(y){this._depthMask!==y&&(this._depthMask=y,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(y){this._depthTest!==y&&(this._depthTest=y,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(y){this._frontFace!==y&&(this._frontFace=y,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(y){this.isDirty&&(this._isCullDirty&&(this.cull?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(y.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(y.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(y.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(this.zOffset,this.zOffsetUnits)):y.disable(y.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(y.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class I{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(y){this._func!==y&&(this._func=y,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(y){this._funcRef!==y&&(this._funcRef=y,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(y){this._funcMask!==y&&(this._funcMask=y,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(y){this._opStencilFail!==y&&(this._opStencilFail=y,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(y){this._opDepthFail!==y&&(this._opDepthFail=y,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(y){this._opStencilDepthPass!==y&&(this._opStencilDepthPass=y,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(y){this._mask!==y&&(this._mask=y,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(y){this._enabled!==y&&(this._enabled=y,this._isStencilTestDirty=!0)}constructor(){let y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,y&&this.reset()}reset(){var y;this.stencilMaterial=void 0,null===(y=this.stencilGlobal)||void 0===y||y.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(y){var c;if(!y)return;const A=!this.useStencilGlobalOnly&&!(null===(c=this.stencilMaterial)||void 0===c||!c.enabled);this.enabled=A?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=A?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=A?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=A?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=A?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=A?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=A?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=A?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(y.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(y.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(y.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class q{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=q.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=q.KEEP,this.opDepthFail=q.KEEP,this.opStencilDepthPass=q.REPLACE}get stencilFunc(){return this.func}set stencilFunc(y){this.func=y}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(y){this.funcRef=y}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(y){this.funcMask=y}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(y){this.opStencilFail=y}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(y){this.opDepthFail=y}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(y){this.opStencilDepthPass=y}get stencilMask(){return this.mask}set stencilMask(y){this.mask=y}get stencilTest(){return this.enabled}set stencilTest(y){this.enabled=y}}q.ALWAYS=519,q.KEEP=7680,q.REPLACE=7681;class o{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(y){this._alphaBlend!==y&&(this._alphaBlend=y,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(y,c,A,l){this._blendConstants[0]===y&&this._blendConstants[1]===c&&this._blendConstants[2]===A&&this._blendConstants[3]===l||(this._blendConstants[0]=y,this._blendConstants[1]=c,this._blendConstants[2]=A,this._blendConstants[3]=l,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(y,c,A,l){this._blendFunctionParameters[0]===y&&this._blendFunctionParameters[1]===c&&this._blendFunctionParameters[2]===A&&this._blendFunctionParameters[3]===l||(this._blendFunctionParameters[0]=y,this._blendFunctionParameters[1]=c,this._blendFunctionParameters[2]=A,this._blendFunctionParameters[3]=l,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(y,c){this._blendEquationParameters[0]===y&&this._blendEquationParameters[1]===c||(this._blendEquationParameters[0]=y,this._blendEquationParameters[1]=c,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(y){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?y.enable(y.BLEND):y.disable(y.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(y.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(y.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(y.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var O=A(12178),L=A(12255),i=A(12159),H=A(12153),P=A(12207),D=A(12267);function t(y,c){if((0,i.m)()){const{requestAnimationFrame:A}=c||window;if("function"===typeof A)return A(y)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(y);return setTimeout(y,16)}class s{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(y){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Xc(){return this._useReverseDepthBuffer}set Xc(y){y!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=y,this._depthCullingState.depthFunc=y?518:515)}setColorWrite(y){y!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=y)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(y){if(y)return this.isNDCHalfZRange?y.IS_NDC_HALF_ZRANGE="":delete y.IS_NDC_HALF_ZRANGE,this.Xc?y.USE_REVERSE_DEPTHBUFFER="":delete y.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?y.USE_EXACT_SRGB_CONVERSIONS="":delete y.USE_EXACT_SRGB_CONVERSIONS);{let y="";return this.isNDCHalfZRange&&(y+="#define IS_NDC_HALF_ZRANGE"),this.Xc&&(y&&(y+="\n"),y+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(y&&(y+="\n"),y+="#define USE_EXACT_SRGB_CONVERSIONS"),y}}_rebuildInternalTextures(){const y=this._internalTexturesCache.slice();for(const c of y)c._rebuild()}_rebuildRenderTargetWrappers(){const y=this._renderTargetWrapperCache.slice();for(const c of y)c._rebuild()}_rebuildEffects(){for(const y in this._compiledEffects){const c=this._compiledEffects[y];c._pipelineContext=null,c._prepareEffect()}N.Effect.ResetCache()}_rebuildGraphicsResources(){var y;this.wipeCaches(!0),this._rebuildEffects(),null===(y=this._rebuildComputeEffects)||void 0===y||y.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){w.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(y){setTimeout((()=>{this._clearEmptyResources();const c=this._depthCullingState.depthTest,A=this._depthCullingState.depthFunc,l=this._depthCullingState.depthMask,w=this._stencilState.stencilTest;y(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=c,this._depthCullingState.depthFunc=A,this._depthCullingState.depthMask=l,this._stencilState.stencilTest=w,this._flagContextRestored()}),0)}get I(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(y){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(y){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const y=new Uint8Array(4),c=[y,y,y,y,y,y];this._emptyCubeTexture=this.createRawCubeTexture(c,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(y){if(!y)return this._activeRenderLoops.length=0,void this._cancelFrame();const c=this._activeRenderLoops.indexOf(y);c>=0&&(this._activeRenderLoops.splice(c,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const y=this._frameHandler;if(this._frameHandler=0,(0,i.m)()){const{cancelAnimationFrame:c}=this.getHostWindow()||window;if("function"===typeof c)return c(y)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(y);return clearTimeout(y)}}Kc(){this.onBeginFrameObservable.notifyObservers(this)}Tc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(y){this._maxFPS=y,void 0!==y&&(this._minFrameTime=y<=0?Number.MAX_VALUE:1e3/y)}_isOverFrameTime(y){if(!y||void 0===this._maxFPS)return!1;const c=y-this._lastFrameTime;return this._lastFrameTime=y,this._renderAccumulator+=c,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(y){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(y)){let y=!0;(this.I||!this.renderEvenInBackground&&this._windowIsBackground)&&(y=!1),y&&(this.Kc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Tc())}}_renderLoop(y){this._processFrame(y),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let y=0;y<this._activeRenderLoops.length;y++){(0,this._activeRenderLoops[y])()}}_renderViews(){return!1}_queueNewFrame(y,c){return t(y,c)}runRenderLoop(y){-1===this._activeRenderLoops.indexOf(y)&&(this._activeRenderLoops.push(y),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(y){this._depthCullingState.depthTest=y}setZOffset(y){this._depthCullingState.zOffset=this.Xc?-y:y}getZOffset(){const y=this._depthCullingState.zOffset;return this.Xc?-y:y}setZOffsetUnits(y){this._depthCullingState.zOffsetUnits=this.Xc?-y:y}getZOffsetUnits(){const y=this._depthCullingState.zOffsetUnits;return this.Xc?-y:y}getHostWindow(){return(0,i.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(y){this._compatibilityMode=!0}_rebuildTextures(){for(const y of this.scenes)y._rebuildTextures();for(const y of this._virtualScenes)y._rebuildTextures()}_releaseRenderTargetWrapper(y){const c=this._renderTargetWrapperCache.indexOf(y);-1!==c&&this._renderTargetWrapperCache.splice(c,1)}get currentViewport(){return this._cachedViewport}setViewport(y,c,A){const l=c||this.getRenderWidth(),w=A||this.getRenderHeight(),N=y.x||0,p=y.y||0;this._cachedViewport=y,this._viewport(N*l,p*w,l*y.width,w*y.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(y){return new Path2D(y)}get description(){let y=this.name+this.version;return this._caps.parallelShaderCompile&&(y+=" - Parallel shader compilation"),y}_createTextureBase(y,c,A,N){let p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7?arguments[7]:void 0,q=arguments.length>8?arguments[8]:void 0,o=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,O=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,i=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,H=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,P=arguments.length>13?arguments[13]:void 0,t=arguments.length>14?arguments[14]:void 0,B=arguments.length>15?arguments[15]:void 0;const X="data:"===(y=y||"").substring(0,5),C="blob:"===y.substring(0,5),K=X&&-1!==y.indexOf(";base64,"),my=O||new L.c(this,1);my!==O&&(my.label=y.substring(0,60));const T=y;!this._transformTextureUrl||K||O||o||(y=this._transformTextureUrl(y)),T!==y&&(my._originalUrl=T);const z=y.lastIndexOf(".");let S=H||(z>-1?y.substring(z).toLowerCase():"");S.indexOf("?")>-1&&(S=S.split("?")[0]);const M=(0,D.b)(S,P);N&&N.addPendingData(my),my.url=y,my.generateMipMaps=!c,my.samplingMode=p,my.invertY=A,my._useSRGBBuffer=this._getUseSRGBBuffer(!!B,c),this._doNotHandleContextLost||(my._buffer=o);let k=null;W&&!O&&(k=my.onLoadedObservable.add(W)),O||this._internalTexturesCache.push(my);const a=(A,O)=>{N&&N.removePendingData(my),y===T?(k&&my.onLoadedObservable.remove(k),l.c.UseFallbackTexture&&y!==l.c.FallbackTexture&&this._createTextureBase(l.c.FallbackTexture,c,my.invertY,N,p,null,h,I,q,o,my),A=(A||"Unknown error")+(l.c.UseFallbackTexture?" - Fallback texture was used":""),my.onErrorObservable.notifyObservers({message:A,exception:O}),h&&h(A,O)):(w.c.Warn(`Failed to load ${y}, falling back to ${T}`),this._createTextureBase(T,c,my.invertY,N,p,W,h,I,q,o,my,i,H,P,t,B))};if(M){const c=async y=>{(await M).loadData(y,my,((y,c,A,l,w,W)=>{W?a("TextureLoader failed to load data"):I(my,S,N,{width:y,height:c},my.invertY,!A,l,(()=>(w(),!1)),p)}),t)};o?o instanceof ArrayBuffer?c(new Uint8Array(o)):ArrayBuffer.isView(o)?c(o):h&&h("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(y,(y=>{c(new Uint8Array(y))}),void 0,N?N.offlineProvider:void 0,!0,((y,c)=>{a("Unable to load "+(y&&y.responseURL,c))}))}else{const A=y=>{C&&!this._doNotHandleContextLost&&(my._buffer=y),I(my,S,N,y,my.invertY,c,!1,q,p)};!X||K?o&&("string"===typeof o.decoding||o.close)?A(o):s._FileToolsLoadImage(y||"",A,a,N?N.offlineProvider:null,P,my.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof o||o instanceof ArrayBuffer||ArrayBuffer.isView(o)||o instanceof Blob?s._FileToolsLoadImage(o,A,a,N?N.offlineProvider:null,P,my.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):o&&A(o)}return my}_rebuildBuffers(){for(const y of this._uniformBuffers)y._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,i.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const y in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,y)&&(this._boundTexturesCache[y]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(y){this._name=y}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(y){this._hardwareScalingLevel=y,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(y){this._doNotHandleContextLost=y}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(y,c,A){var w,N;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new h,this._stencilStateComposer=new I,this._stencilState=new q,this._alphaState=new o,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new H.d,this.onCanvasFocusObservable=new H.d,this.onNewSceneAddedObservable=new H.d,this.onResizeObservable=new H.d,this.onCanvasPointerOutObservable=new H.d,this.onEffectErrorObservable=new H.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new H.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=y=>this._renderLoop(y),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new H.d,this.onAfterShaderCompilationObservable=new H.d,this.onBeginFrameObservable=new H.d,this.onEndFrameObservable=new H.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new H.d,this.onContextRestoredObservable=new H.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.zc=new H.d,this.onReleaseEffectsObservable=new H.d,l.c.Instances.push(this),this.startTime=W.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,p.c.SetMatrixPrecision(!!c.useHighPrecisionMatrix),(0,i.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=A??!1,c.antialias=y??c.antialias,c.deterministicLockstep=c.deterministicLockstep??!1,c.lockstepMaxSteps=c.lockstepMaxSteps??4,c.timeStep=c.timeStep??1/60,c.Sc=c.Sc??!0,this._audioContext=(null===(w=c.audioEngineOptions)||void 0===w?void 0:w.audioContext)??null,this._audioDestination=(null===(N=c.audioEngineOptions)||void 0===N?void 0:N.audioDestination)??null,this.premultipliedAlpha=c.premultipliedAlpha??!0,this._doNotHandleContextLost=!!c.doNotHandleContextLost,this._isStencilEnable=!!c.Sc,this.useExactSrgbConversions=c.useExactSrgbConversions??!1;const O=(0,i.m)()&&window.devicePixelRatio||1,L=c.limitDeviceRatio||O;A=A||c.adaptToDeviceRatio||!1,this._hardwareScalingLevel=A?1/Math.min(L,O):1,this._lastDevicePixelRatio=O,this._creationOptions=c}resize(){let y,c,A=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const y=(0,i.m)()&&window.devicePixelRatio||1,c=this._lastDevicePixelRatio/y;this._lastDevicePixelRatio=y,this._hardwareScalingLevel*=c}if((0,i.m)()&&(0,i.h)())if(this._renderingCanvas){var l,w;const A=null===(l=(w=this._renderingCanvas).getBoundingClientRect)||void 0===l?void 0:l.call(w);y=this._renderingCanvas.clientWidth||(null===A||void 0===A?void 0:A.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,c=this._renderingCanvas.clientHeight||(null===A||void 0===A?void 0:A.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else y=window.innerWidth,c=window.innerHeight;else y=this._renderingCanvas?this._renderingCanvas.width:100,c=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(y/this._hardwareScalingLevel,c/this._hardwareScalingLevel,A)}setSize(y,c){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(y|=0,c|=0,!A&&this._renderingCanvas.width===y&&this._renderingCanvas.height===c)return!1;if(this._renderingCanvas.width=y,this._renderingCanvas.height=c,this.scenes){for(let y=0;y<this.scenes.length;y++){const c=this.scenes[y];for(let y=0;y<c.cameras.length;y++){c.cameras[y]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(y,c,A,l,w,N,p,W,h,I,q){throw(0,O.d)("engine.rawTexture")}createRawCubeTexture(y,c,A,l,w,N,p,W){throw(0,O.d)("engine.rawTexture")}createRawTexture3D(y,c,A,l,w,N,p,W,h,I,q){throw(0,O.d)("engine.rawTexture")}createRawTexture2DArray(y,c,A,l,w,N,p,W,h,I,q){throw(0,O.d)("engine.rawTexture")}_sharedInit(y){this._renderingCanvas=y}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const y=navigator.userAgent;this.hostInformation.isMobile=-1!==y.indexOf("Mobile")||-1!==y.indexOf("Mac")&&(0,i.h)()&&"ontouchend"in document},this._checkForMobile(),(0,i.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(y){return document.createElement("video")}_reportDrawCall(){var y;let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(y=this._drawCalls)||void 0===y||y.addCount(c,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(y,c){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(y,c){return createImageBitmap(y,c)}resizeImageBitmap(y,c,A){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(y){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(y,c){if("undefined"===typeof document)return new OffscreenCanvas(y,c);const A=document.createElement("canvas");return A.width=y,A.height=c,A}createCanvas(y,c){return s._CreateCanvas(y,c)}static _FileToolsLoadImage(y,c,A,l,w,N,p){throw(0,O.d)("FileTools")}_loadFile(y,c,A,l,w,N){const p=(0,P.o)(y,c,A,l,w,N);return this._activeRequests.push(p),p.onCompleteObservable.add((()=>{const y=this._activeRequests.indexOf(p);-1!==y&&this._activeRequests.splice(y,1)})),p}static _FileToolsLoadFile(y,c,A,l,w,N){if(P.d.loadFile)return P.d.loadFile(y,c,A,l,w,N);throw(0,O.d)("FileTools")}dispose(){var y;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(y=this.releaseComputeEffects)||void 0===y||y.call(this),N.Effect.ResetCache();for(const A of this._activeRequests)A.abort();this._boundRenderFunction=null,this.zc.notifyObservers(this),this.zc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,i.m)()&&window.removeEventListener("resize",this._checkForMobile);const c=l.c.Instances.indexOf(this);c>=0&&l.c.Instances.splice(c,1),l.c.Instances.length||(l.c.OnEnginesDisposedObservable.notifyObservers(this),l.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(y){throw(0,O.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(y,c){for(let A=0;A<l.c.Instances.length;A++){const w=l.c.Instances[A];for(let A=0;A<w.scenes.length;A++)w.scenes[A].markAllMaterialsAsDirty(y,c)}}}s._RenderPassIdCounter=0,s._RescalePostProcessFactory=null,s.CollisionsEpsilon=.001,s.QueueNewFrame=t},12184:(y,c,A)=>{A.d(c,{c:()=>w});var l=A(12153);class w{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}w.Instances=[],w.OnEnginesDisposedObservable=new l.d,w._LastCreatedScene=null,w.UseFallbackTexture=!0,w.FallbackTexture=""},12251:(y,c,A)=>{A.d(c,{c:()=>l});class l{static SetMatrixPrecision(y){if(l.MatrixTrackPrecisionChange=!1,y&&!l.MatrixUse64Bits&&l.MatrixTrackedMatrices)for(let c=0;c<l.MatrixTrackedMatrices.length;++c){const y=l.MatrixTrackedMatrices[c],A=y.kc;y.kc=new Array(16);for(let c=0;c<16;++c)y.kc[c]=A[c]}l.MatrixUse64Bits=y,l.MatrixCurrentType=l.MatrixUse64Bits?Array:Float32Array,l.MatrixTrackedMatrices=null}}l.MatrixUse64Bits=!1,l.MatrixTrackPrecisionChange=!0,l.MatrixCurrentType=Float32Array,l.MatrixTrackedMatrices=[]},12267:(y,c,A)=>{A.d(c,{b:()=>p});var l=A(12161);const w=new Map;function N(y,c){(function(y){return w.delete(y)})(y)&&l.c.Warn(`Extension with the name '${y}' already exists`),w.set(y,c)}function p(y,c){"image/ktx"!==c&&"image/ktx2"!==c||(y=".ktx"),w.has(y)||(y.endsWith(".ies")&&N(".ies",(async()=>await A.e(15).then(A.bind(A,14755)).then((y=>new y._IESTextureLoader)))),y.endsWith(".dds")&&N(".dds",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(19),A.e(18),A.e(28)]).then(A.bind(A,14760)).then((y=>new y._DDSTextureLoader)))),y.endsWith(".basis")&&N(".basis",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(47)]).then(A.bind(A,14769)).then((y=>new y._BasisTextureLoader)))),y.endsWith(".env")&&N(".env",(async()=>await Promise.all([A.e(14),A.e(17),A.e(13),A.e(19),A.e(18),A.e(23),A.e(21),A.e(45),A.e(48)]).then(A.bind(A,14771)).then((y=>new y._ENVTextureLoader)))),y.endsWith(".hdr")&&N(".hdr",(async()=>await Promise.all([A.e(14),A.e(49)]).then(A.bind(A,14777)).then((y=>new y._HDRTextureLoader)))),(y.endsWith(".ktx")||y.endsWith(".ktx2"))&&(N(".ktx",(async()=>await A.e(30).then(A.bind(A,14786)).then((y=>new y._KTXTextureLoader)))),N(".ktx2",(async()=>await A.e(30).then(A.bind(A,14786)).then((y=>new y._KTXTextureLoader))))),y.endsWith(".tga")&&N(".tga",(async()=>await A.e(50).then(A.bind(A,14789)).then((y=>new y._TGATextureLoader)))),y.endsWith(".exr")&&N(".exr",(async()=>await A.e(16).then(A.bind(A,14797)).then((y=>new y._ExrTextureLoader)))));const l=w.get(y);return l?Promise.resolve(l(c)):null}},12255:(y,c,A)=>{A.d(c,{c:()=>p});var l,w=A(12153),N=A(12258);!function(y){y[y.Unknown=0]="Unknown",y[y.Url=1]="Url",y[y.Temp=2]="Temp",y[y.Raw=3]="Raw",y[y.Dynamic=4]="Dynamic",y[y.RenderTarget=5]="RenderTarget",y[y.MultiRenderTarget=6]="MultiRenderTarget",y[y.Cube=7]="Cube",y[y.CubeRaw=8]="CubeRaw",y[y.CubePrefiltered=9]="CubePrefiltered",y[y.Raw3D=10]="Raw3D",y[y.Raw2DArray=11]="Raw2DArray",y[y.DepthStencil=12]="DepthStencil",y[y.CubeRawRGBD=13]="CubeRawRGBD",y[y.Depth=14]="Depth"}(l||(l={}));class p extends N.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(y){this.generateMipMaps=y}get uniqueId(){return this._uniqueId}_setUniqueId(y){this._uniqueId=y}getEngine(){return this._engine}get source(){return this._source}constructor(y,c){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new w.d,this.onErrorObservable=new w.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=y,this._source=c,this._uniqueId=p._Counter++,A||(this._hardwareTexture=y._createHardwareTexture())}incrementReferences(){this._references++}updateSize(y,c){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,y,c,A),this.width=y,this.height=c,this.depth=A,this.baseWidth=y,this.baseHeight=c,this.baseDepth=A,this._size=y*c*A}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const y=this.onRebuildCallback(this),c=c=>{c._swapAndDie(this,!1),this.isReady=y.isReady};return void(y.isAsync?y.proxy.then(c):c(y.proxy))}let y;switch(this.source){case 2:case 12:case 14:break;case 1:return void(y=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(y=>{y._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:y=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),y._swapAndDie(this,!1),this.isReady=!0;break;case 10:y=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),y._swapAndDie(this,!1),this.isReady=!0;break;case 11:y=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),y._swapAndDie(this,!1),this.isReady=!0;break;case 4:y=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),y._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(y=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:y=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),y._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return y=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(y=>{y&&y._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(y._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(y){var c;let A=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(c=this._hardwareTexture)||void 0===c||c.setUsage(y._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),y._hardwareTexture=this._hardwareTexture,A&&(y._isRGBD=this._isRGBD),this._lodTextureHigh&&(y._lodTextureHigh&&y._lodTextureHigh.dispose(),y._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(y._lodTextureMid&&y._lodTextureMid.dispose(),y._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(y._lodTextureLow&&y._lodTextureLow.dispose(),y._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(y._irradianceTexture&&y._irradianceTexture.dispose(),y._irradianceTexture=this._irradianceTexture);const l=this._engine.getLoadedTexturesCache();let w=l.indexOf(this);-1!==w&&l.splice(w,1),w=l.indexOf(y),-1===w&&l.push(y)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}p._Counter=0},12258:(y,c,A)=>{A.d(c,{b:()=>l});class l{get wrapU(){return this._cachedWrapU}set wrapU(y){this._cachedWrapU=y}get wrapV(){return this._cachedWrapV}set wrapV(y){this._cachedWrapV=y}get wrapR(){return this._cachedWrapR}set wrapR(y){this._cachedWrapR=y}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(y){this._cachedAnisotropicFilteringLevel=y}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(y){this._comparisonFunction=y}get useMipMaps(){return this._useMipMaps}set useMipMaps(y){this._useMipMaps=y}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=y,this._cachedWrapV=c,this._cachedWrapR=A,this._cachedAnisotropicFilteringLevel=l,this.samplingMode=w,this._comparisonFunction=N,this}compareSampler(y){return this._cachedWrapU===y._cachedWrapU&&this._cachedWrapV===y._cachedWrapV&&this._cachedWrapR===y._cachedWrapR&&this._cachedAnisotropicFilteringLevel===y._cachedAnisotropicFilteringLevel&&this.samplingMode===y.samplingMode&&this._comparisonFunction===y._comparisonFunction&&this._useMipMaps===y._useMipMaps}}},12167:(y,c,A)=>{A.d(c,{e:()=>N});var l=A(12161);const w=(y,c,A)=>y?y.getClassName&&"Mesh"===y.getClassName()?null:!y.getClassName||"SubMesh"!==y.getClassName()&&"PhysicsBody"!==y.getClassName()?y.clone?y.clone():Array.isArray(y)?y.slice():A&&"object"===typeof y?{...y}:null:y.clone(c):null;class N{static DeepCopy(y,c,A,N){let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const W=function(y){const c=[];do{const A=Object.getOwnPropertyNames(y);for(const y of A)-1===c.indexOf(y)&&c.push(y)}while(y=Object.getPrototypeOf(y));return c}(y);for(const I of W){if("_"===I[0]&&(!N||-1===N.indexOf(I)))continue;if(I.endsWith("Observable"))continue;if(A&&-1!==A.indexOf(I))continue;const W=y[I],q=typeof W;if("function"!==q)try{if("object"===q)if(W instanceof Uint8Array)c[I]=Uint8Array.from(W);else if(W instanceof Array){if(c[I]=[],W.length>0)if("object"==typeof W[0])for(let y=0;y<W.length;y++){const A=w(W[y],c,p);-1===c[I].indexOf(A)&&c[I].push(A)}else c[I]=W.slice(0)}else c[I]=w(W,c,p);else c[I]=W}catch(h){l.c.Warn(h.message)}}}}},12193:(y,c,A)=>{A.d(c,{b:()=>l,d:()=>w,f:()=>N});class l extends Error{}l._setPrototypeOf=Object.setPrototypeOf||((y,c)=>(y.__proto__=c,y));const w={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class N extends l{constructor(y,c,A){super(y),this.errorCode=c,this.innerError=A,this.name="RuntimeError",l._setPrototypeOf(this,N.prototype)}}},12191:(y,c,A)=>{A.d(c,{d:()=>a,g:()=>s,k:()=>z,o:()=>M,s:()=>my,q:()=>P,t:()=>C,x:()=>K,A:()=>T,D:()=>B});var l=A(12182),w=A(12159),N=A(12153);class p{}p.FilesToLoad={};var W=A(12193),h=A(12197),I=A(12204),q=A(12184),o=A(12161),O=A(12212),L=A(12207),i=A(12220);const H=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class P extends W.f{constructor(y,c){super(y,W.d.LoadFileError),this.name="LoadFileError",W.b._setPrototypeOf(this,P.prototype),c instanceof l.d?this.request=c:this.file=c}}class D extends W.f{constructor(y,c){super(y,W.d.RequestFileError),this.request=c,this.name="RequestFileError",W.b._setPrototypeOf(this,D.prototype)}}class t extends W.f{constructor(y,c){super(y,W.d.ReadFileError),this.file=c,this.name="ReadFileError",W.b._setPrototypeOf(this,t.prototype)}}const s={DefaultRetryStrategy:class{static ExponentialBackoff(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(A,l,w)=>0!==l.status||w>=y||-1!==A.indexOf("file:")?-1:Math.pow(2,w)*c}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:y=>y,ScriptBaseUrl:"",ScriptPreprocessUrl:y=>y,CleanUrl:y=>y=y.replace(/#/gm,"%23")},B=(y,c)=>{if((!y||0!==y.indexOf("data:"))&&s.CorsBehavior)if("string"===typeof s.CorsBehavior||s.CorsBehavior instanceof String)c.crossOrigin=s.CorsBehavior;else{const A=s.CorsBehavior(y);A&&(c.crossOrigin=A)}},X={getRequiredSize:null},C=function(y,c,A,w){let N,W=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",I=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===o||void 0===o||!o._features.forceBitmapOverHTMLImageElement))return A("LoadImage is only supported in web or BabylonNative environments."),null;let O=!1;y instanceof ArrayBuffer||ArrayBuffer.isView(y)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(N=URL.createObjectURL(new Blob([y],{type:W})),O=!0):N=`data:${W};base64,`+(0,h.j)(y):y instanceof Blob?(N=URL.createObjectURL(y),O=!0):(N=s.CleanUrl(y),N=s.PreprocessUrl(N));const L=c=>{if(A){const l=N||y.toString();A(`Error while trying to load image: ${0===l.indexOf("http")||l.length<=128?l:l.slice(0,128)+"..."}`,c)}};if(null!==o&&void 0!==o&&o._features.forceBitmapOverHTMLImageElement)return my(N,(l=>{o.createImageBitmap(new Blob([l],{type:W}),{premultiplyAlpha:"none",...I}).then((y=>{c(y),O&&URL.revokeObjectURL(N)})).catch((c=>{A&&A("Error while trying to load image: "+y,c)}))}),void 0,w||void 0,!0,((y,c)=>{L(c)})),null;const i=new Image;if(X.getRequiredSize){const c=X.getRequiredSize(y);c.width&&(i.width=c.width),c.height&&(i.height=c.height)}B(N,i);const H=[],P=()=>{for(const y of H)y.target.removeEventListener(y.name,y.handler);H.length=0};H.push({target:i,name:"load",handler:()=>{P(),c(i),O&&i.src&&URL.revokeObjectURL(i.src)}}),H.push({target:i,name:"error",handler:y=>{P(),L(y),O&&i.src&&URL.revokeObjectURL(i.src)}}),H.push({target:document,name:"securitypolicyviolation",handler:y=>{if(y.blockedURI!==i.src||"ac"===y.disposition)return;P();const c=new Error(`CSP violation of policy ${y.effectiveDirective} ${y.blockedURI}. Current policy is ${y.originalPolicy}`);q.c.UseFallbackTexture=!1,L(c),O&&i.src&&URL.revokeObjectURL(i.src),i.src=""}}),(()=>{for(const y of H)y.target.addEventListener(y.name,y.handler)})();const D="blob:"===N.substring(0,5),t="data:"===N.substring(0,5),C=()=>{D||t||!l.d.IsCustomRequestAvailable?i.src=N:my(N,((y,c,A)=>{const l=new Blob([y],{type:!W&&A?A:W}),w=URL.createObjectURL(l);O=!0,i.src=w}),void 0,w||void 0,!0,((y,c)=>{L(c)}))},K=()=>{w&&w.loadImage(N,i)};if(!D&&!t&&w&&w.enableTexturesOffline)w.open(K,C);else{if(-1!==N.indexOf("file:")){const y=decodeURIComponent(N.substring(5).toLowerCase());if(p.FilesToLoad[y]&&"undefined"!==typeof URL){try{let c;try{c=URL.createObjectURL(p.FilesToLoad[y])}catch(T){c=URL.createObjectURL(p.FilesToLoad[y])}i.src=c,O=!0}catch(z){i.src=""}return i}}C()}return i},K=(y,c,A,l,w)=>{const p=new FileReader,W={onCompleteObservable:new N.d,abort:()=>p.abort()};return p.onloadend=()=>W.onCompleteObservable.notifyObservers(W),w&&(p.onerror=()=>{w(new t(`Unable to read ${y.name}`,y))}),p.onload=y=>{c(y.target.result)},A&&(p.onprogress=A),l?p.readAsArrayBuffer(y):p.readAsText(y),W},my=(y,c,A,l,w,h,I)=>{if(y.name)return K(y,c,A,w,h?y=>{h(void 0,y)}:void 0);const q=y;if(-1!==q.indexOf("file:")){let y=decodeURIComponent(q.substring(5).toLowerCase());0===y.indexOf("./")&&(y=y.substring(2));const l=p.FilesToLoad[y];if(l)return K(l,c,A,w,h?y=>h(void 0,new P(y.message,y.file)):void 0)}const{match:L,type:i}=k(q);if(L){const y={onCompleteObservable:new N.d,abort:()=>()=>{}};try{const y=w?a(q):u(q);c(y,void 0,i)}catch(W){h?h(void 0,W):o.c.Error(W.message||"Failed to parse the Data URL")}return O.c.SetImmediate((()=>{y.onCompleteObservable.notifyObservers(y)})),y}return T(q,((y,A)=>{c(y,null===A||void 0===A?void 0:A.responseURL,null===A||void 0===A?void 0:A.getResponseHeader("content-type"))}),A,l,w,h?y=>{h(y.request,new P(y.message,y.request))}:void 0,I)},T=(y,c,A,p,W,h,I)=>{y=s.CleanUrl(y),y=s.PreprocessUrl(y);const q=s.BaseUrl+y;let O=!1;const L={onCompleteObservable:new N.d,abort:()=>O=!0},i=()=>{let y,N=new l.d,p=null;const i=()=>{N&&(A&&N.removeEventListener("progress",A),y&&N.removeEventListener("readystatechange",y),N.removeEventListener("loadend",H))};let H=()=>{i(),L.onCompleteObservable.notifyObservers(L),L.onCompleteObservable.clear(),A=void 0,y=null,H=null,h=void 0,I=void 0,c=void 0};L.abort=()=>{O=!0,H&&H(),N&&N.readyState!==(XMLHttpRequest.DONE||4)&&N.abort(),null!==p&&(clearTimeout(p),p=null),N=null};const P=y=>{const c=y.message||"Unknown error";h&&N?h(new D(c,N)):o.c.Error(c)},t=o=>{if(N){if(N.open("GET",q),I)try{I(N)}catch(L){return void P(L)}W&&(N.responseType="arraybuffer"),A&&N.addEventListener("progress",A),H&&N.addEventListener("loadend",H),y=()=>{if(!O&&N&&N.readyState===(XMLHttpRequest.DONE||4)){if(y&&N.removeEventListener("readystatechange",y),N.status>=200&&N.status<300||0===N.status&&(!(0,w.m)()||S())){const y=W?N.response:N.responseText;if(null!==y){try{c&&c(y,N)}catch(L){P(L)}return}}const A=s.DefaultRetryStrategy;if(A){const y=A(q,N,o);if(-1!==y)return i(),N=new l.d,void(p=setTimeout((()=>t(o+1)),y))}const I=new D("Error status: "+N.status+" "+N.statusText+" - Unable to load "+q,N);h&&h(I)}},N.addEventListener("readystatechange",y),N.send()}};t(0)};if(p&&p.enableSceneOffline){const l=y=>{y&&y.status>400?h&&h(y):i()},w=()=>{p&&p.loadFile(s.BaseUrl+y,(y=>{!O&&c&&c(y),L.onCompleteObservable.notifyObservers(L)}),A?y=>{!O&&A&&A(y)}:void 0,l,W)};p.open(w,l)}else i();return L},z=y=>{const{match:c,type:A}=k(y);if(c)return A||void 0;const l=y.lastIndexOf(".");switch(y.substring(l+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"uc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},S=()=>"undefined"!==typeof location&&"file:"===location.protocol,M=y=>H.test(y),k=y=>{const c=H.exec(y);if(null===c||0===c.length)return{match:!1,type:""};return{match:!0,type:c[0].replace("data:","").replace("base64,","")}};function a(y){return(0,h.b)(y.split(",")[1])}const u=y=>(0,h.f)(y.split(",")[1]);let G;i.b._FileToolsLoadImage=C,L.d.loadFile=my,I.r.loadFile=my;((y,c,A,l,w,N,p,W,h,I)=>{G={DecodeBase64UrlToBinary:y,DecodeBase64UrlToString:c,DefaultRetryStrategy:A.DefaultRetryStrategy,BaseUrl:A.BaseUrl,CorsBehavior:A.CorsBehavior,PreprocessUrl:A.PreprocessUrl,IsBase64DataUrl:l,IsFileURL:w,LoadFile:N,LoadImage:p,ReadFile:W,RequestFile:h,SetCorsBehavior:I},Object.defineProperty(G,"DefaultRetryStrategy",{get:function(){return A.DefaultRetryStrategy},set:function(y){A.DefaultRetryStrategy=y}}),Object.defineProperty(G,"BaseUrl",{get:function(){return A.BaseUrl},set:function(y){A.BaseUrl=y}}),Object.defineProperty(G,"PreprocessUrl",{get:function(){return A.PreprocessUrl},set:function(y){A.PreprocessUrl=y}}),Object.defineProperty(G,"CorsBehavior",{get:function(){return A.CorsBehavior},set:function(y){A.CorsBehavior=y}})})(a,u,s,M,S,my,C,K,T,B)},12287:(y,c,A)=>{function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(y=>{const c=16*Math.random()|0;return("x"===y?c:3&c|8).toString(16)}))}A.d(c,{e:()=>l})},12274:(y,c,A)=>{A.d(c,{e:()=>N});var l=A(12161),w=A(12283);class N{static Instantiate(y){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[y])return this.RegisteredExternalClasses[y];const c=(0,w.d)(y);if(c)return c;l.c.Warn(y+" not found, you may have missed an import.");const A=y.split(".");let N=window||this;for(let l=0,w=A.length;l<w;l++)N=N[A[l]];return"function"!==typeof N?null:N}}N.RegisteredExternalClasses={}},12171:(y,c,A)=>{A.d(c,{d:()=>w});var l=A(12159);class w{static get Now(){return(0,l.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12197:(y,c,A)=>{A.d(c,{b:()=>p,f:()=>N,g:()=>l,j:()=>w});const l=y=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(y);let c="";for(let A=0;A<y.byteLength;A++)c+=String.fromCharCode(y[A]);return c},w=y=>{const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let A,l,w,N,p,W,h,I="",q=0;const o=ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y);for(;q<o.length;)A=o[q++],l=q<o.length?o[q++]:Number.NaN,w=q<o.length?o[q++]:Number.NaN,N=A>>2,p=(3&A)<<4|l>>4,W=(15&l)<<2|w>>6,h=63&w,isNaN(l)?W=h=64:isNaN(w)&&(h=64),I+=c.charAt(N)+c.charAt(p)+c.charAt(W)+c.charAt(h);return I},N=y=>atob(y),p=y=>{const c=N(y),A=c.length,l=new Uint8Array(new ArrayBuffer(A));for(let w=0;w<A;w++)l[w]=c.charCodeAt(w);return l.buffer}},12291:(y,c,A)=>{function l(y){let c=1;do{c*=2}while(c<y);return c===y}function w(y,c,A){return y*(1-A)+c*A}function N(y){const c=p(y),A=W(y);return c-y>y-A?A:c}function p(y){return y--,y|=y>>1,y|=y>>2,y|=y>>4,y|=y>>8,y|=y>>16,++y}function W(y){return y|=y>>1,y|=y>>2,y|=y>>4,y|=y>>8,(y|=y>>16)-(y>>1)}function h(y,c){let A;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:A=W(y);break;case 2:A=N(y);break;default:A=p(y)}return Math.min(A,c)}A.d(c,{b:()=>W,f:()=>h,j:()=>l,m:()=>w,p:()=>N})},12144:(y,c,A)=>{A.r(c),A.d(c,{AsyncLoop:()=>t,Tools:()=>P,className:()=>D});var l=A(12153),w=A(12159),N=A(12161),p=A(12167),W=A(12171),h=A(12178),I=A(12182),q=A(12184),o=A(12191),O=A(12212),L=A(12274),i=A(12287),H=A(12291);class P{static get BaseUrl(){return o.g.BaseUrl}static set BaseUrl(y){o.g.BaseUrl=y}static get CleanUrl(){return o.g.CleanUrl}static set CleanUrl(y){o.g.CleanUrl=y}static IsAbsoluteUrl(y){return 0===y.indexOf("//")||-1!==y.indexOf("://")&&(-1!==y.indexOf(".")&&(-1!==y.indexOf("/")&&(!(y.indexOf(":")>y.indexOf("/"))&&(y.indexOf("://")<y.indexOf(".")||(0===y.indexOf("data:")||0===y.indexOf("blob:"))))))}static set ScriptBaseUrl(y){o.g.ScriptBaseUrl=y}static get ScriptBaseUrl(){return o.g.ScriptBaseUrl}static set CDNBaseUrl(y){P.ScriptBaseUrl=y,P.AssetBaseUrl=y}static set ScriptPreprocessUrl(y){o.g.ScriptPreprocessUrl=y}static get ScriptPreprocessUrl(){return o.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return o.g.DefaultRetryStrategy}static set DefaultRetryStrategy(y){o.g.DefaultRetryStrategy=y}static get CorsBehavior(){return o.g.CorsBehavior}static set CorsBehavior(y){o.g.CorsBehavior=y}static get UseFallbackTexture(){return q.c.UseFallbackTexture}static set UseFallbackTexture(y){q.c.UseFallbackTexture=y}static get RegisteredExternalClasses(){return L.e.RegisteredExternalClasses}static set RegisteredExternalClasses(y){L.e.RegisteredExternalClasses=y}static get fallbackTexture(){return q.c.FallbackTexture}static set fallbackTexture(y){q.c.FallbackTexture=y}static FetchToRef(y,c,A,l,w,N){const p=4*((Math.abs(y)*A%A|0)+(Math.abs(c)*l%l|0)*A);N.r=w[p]/255,N.g=w[p+1]/255,N.b=w[p+2]/255,N.a=w[p+3]/255}static Mix(y,c,A){return 0}static Instantiate(y){return L.e.Instantiate(y)}static SetImmediate(y){O.c.SetImmediate(y)}static IsExponentOfTwo(y){return!0}static FloatRound(y){return Math.fround(y)}static GetFilename(y){const c=y.lastIndexOf("/");return c<0?y:y.substring(c+1)}static GetFolderPath(y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const A=y.lastIndexOf("/");return A<0?c?y:"":y.substring(0,A+1)}static ToDegrees(y){return 180*y/Math.PI}static ToRadians(y){return y*Math.PI/180}static SmoothAngleChange(y,c){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const l=this.ToRadians(y),w=this.ToRadians(c);return this.ToDegrees(Math.atan2((1-A)*Math.sin(w)+A*Math.sin(l),(1-A)*Math.cos(w)+A*Math.cos(l)))}static MakeArray(y,c){return!0===c||void 0!==y&&null!=y?Array.isArray(y)?y:[y]:null}static GetPointerPrefix(y){return(0,w.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(y,c){(0,o.D)(y,c)}static SetReferrerPolicyBehavior(y,c){c.referrerPolicy=y}static get PreprocessUrl(){return o.g.PreprocessUrl}static set PreprocessUrl(y){o.g.PreprocessUrl=y}static LoadImage(y,c,A,l,w,N){return(0,o.t)(y,c,A,l,w,N)}static LoadFile(y,c,A,l,w,N){return(0,o.s)(y,c,A,l,w,N)}static async LoadFileAsync(y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((A,l)=>{(0,o.s)(y,(y=>{A(y)}),void 0,void 0,c,((y,c)=>{l(c)}))}))}static GetAssetUrl(y){if(!y)return"";if(P.AssetBaseUrl&&y.startsWith(P._DefaultAssetsUrl)){const c="/"===P.AssetBaseUrl[P.AssetBaseUrl.length-1]?P.AssetBaseUrl.substring(0,P.AssetBaseUrl.length-1):P.AssetBaseUrl;return y.replace(P._DefaultAssetsUrl,c)}return y}static GetBabylonScriptURL(y,c){if(!y)return"";if(P.ScriptBaseUrl&&y.startsWith(P._DefaultCdnUrl)){const c="/"===P.ScriptBaseUrl[P.ScriptBaseUrl.length-1]?P.ScriptBaseUrl.substring(0,P.ScriptBaseUrl.length-1):P.ScriptBaseUrl;y=y.replace(P._DefaultCdnUrl,c)}return y=P.ScriptPreprocessUrl(y),c&&(y=P.GetAbsoluteUrl(y)),y}static LoadBabylonScript(y,c,A,l){y=P.GetBabylonScriptURL(y),P.LoadScript(y,c,A)}static async LoadBabylonScriptAsync(y){return y=P.GetBabylonScriptURL(y),await P.LoadScriptAsync(y)}static LoadScript(y,c,A,l){let N=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(y),c&&c()}catch(h){null===A||void 0===A||A(`Unable to load script '${y}' in worker`,h)}return}if(!(0,w.m)())return void(null===A||void 0===A||A(`Cannot load script '${y}' outside of a window or a worker`));const p=document.getElementsByTagName("head")[0],W=document.createElement("script");N?(W.setAttribute("type","module"),W.innerText=y):(W.setAttribute("type","text/javascript"),W.setAttribute("src",y)),l&&(W.id=l),W.onload=()=>{c&&c()},W.onerror=c=>{A&&A(`Unable to load script '${y}'`,c)},p.appendChild(W)}static async LoadScriptAsync(y,c){return await new Promise(((A,l)=>{this.LoadScript(y,(()=>{A()}),((y,c)=>{l(c||new Error(y))}),c)}))}static ReadFileAsDataURL(y,c,A){const w=new FileReader,N={onCompleteObservable:new l.d,abort:()=>w.abort()};return w.onloadend=()=>{N.onCompleteObservable.notifyObservers(N)},w.onload=y=>{c(y.target.result)},w.onprogress=A,w.readAsDataURL(y),N}static ReadFile(y,c,A,l,w){return(0,o.x)(y,c,A,l,w)}static FileAsURL(y){const c=new Blob([y]);return window.URL.createObjectURL(c)}static Format(y){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return y.toFixed(c)}static DeepCopy(y,c,A,l){p.e.DeepCopy(y,c,A,l)}static IsEmpty(y){for(const c in y)if(Object.prototype.hasOwnProperty.call(y,c))return!1;return!0}static RegisterTopRootEvents(y,c){for(let l=0;l<c.length;l++){const w=c[l];y.addEventListener(w.name,w.handler,!1);try{window.parent&&window.parent.addEventListener(w.name,w.handler,!1)}catch(A){}}}static UnregisterTopRootEvents(y,c){for(let l=0;l<c.length;l++){const w=c[l];y.removeEventListener(w.name,w.handler);try{y.parent&&y.parent.removeEventListener(w.name,w.handler)}catch(A){}}}static async DumpFramebuffer(y,c,A,l){throw(0,h.d)("DumpTools")}static DumpData(y,c,A,l){throw(0,h.d)("DumpTools")}static async DumpDataAsync(y,c,A){throw(0,h.d)("DumpTools")}static _IsOffScreenCanvas(y){return void 0!==y.convertToBlob}static ToBlob(y,c){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",l=arguments.length>3?arguments[3]:void 0;P._IsOffScreenCanvas(y)||y.toBlob||(y.toBlob=function(y,c,A){setTimeout((()=>{const l=atob(this.toDataURL(c,A).split(",")[1]),w=l.length,N=new Uint8Array(w);for(let y=0;y<w;y++)N[y]=l.charCodeAt(y);y(new Blob([N]))}))}),P._IsOffScreenCanvas(y)?y.convertToBlob({type:A,quality:l}).then((y=>c(y))):y.toBlob((function(y){c(y)}),A,l)}static DownloadBlob(y,c){if("download"in document.createElement("a")){if(!c){const y=new Date;c="screenshot_"+((y.getFullYear()+"-"+(y.getMonth()+1)).slice(2)+"-"+y.getDate()+"_"+y.getHours()+"-"+("0"+y.getMinutes()).slice(-2))+".png"}P.Download(y,c)}else if(y&&"undefined"!==typeof URL){const c=URL.createObjectURL(y),A=window.open("");if(!A)return;const l=A.document.createElement("img");l.onload=function(){URL.revokeObjectURL(c)},l.src=c,A.document.body.appendChild(l)}}static EncodeScreenshotCanvasData(y,c){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",l=arguments.length>3?arguments[3]:void 0,w=arguments.length>4?arguments[4]:void 0;if("string"!==typeof l&&c){if(c){if(P._IsOffScreenCanvas(y))return void y.convertToBlob({type:A,quality:w}).then((y=>{const A=new FileReader;A.readAsDataURL(y),A.onloadend=()=>{const y=A.result;c(y)}}));const l=y.toDataURL(A,w);c(l)}}else this.ToBlob(y,(function(y){y&&P.DownloadBlob(y,l),c&&c("")}),A,w)}static Download(y,c){if("undefined"===typeof URL)return;const A=window.URL.createObjectURL(y),l=document.createElement("a");document.body.appendChild(l),l.style.display="none",l.href=A,l.download=c,l.addEventListener("click",(()=>{l.parentElement&&l.parentElement.removeChild(l)})),l.click(),window.URL.revokeObjectURL(A)}static BackCompatCameraNoPreventDefault(y){return"boolean"===typeof y[0]?y[0]:"boolean"===typeof y[1]&&y[1]}static CreateScreenshot(y,c,A,l){throw(0,h.d)("ScreenshotTools")}static async CreateScreenshotAsync(y,c,A){throw(0,h.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(y,c,A,l){throw(0,h.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(y,c,A){throw(0,h.d)("ScreenshotTools")}static RandomId(){return(0,i.e)()}static IsBase64(y){return(0,o.o)(y)}static DecodeBase64(y){return(0,o.d)(y)}static get errorsCount(){return N.c.errorsCount}static Log(y){N.c.Log(y)}static Warn(y){N.c.Warn(y)}static Error(y){N.c.Error(y)}static get LogCache(){return N.c.LogCache}static ClearLogCache(){N.c.ClearLogCache()}static set LogLevels(y){N.c.LogLevels=y}static set PerformanceLogLevel(y){return(y&P.PerformanceUserMarkLogLevel)===P.PerformanceUserMarkLogLevel?(P.StartPerformanceCounter=P._StartUserMark,void(P.EndPerformanceCounter=P._EndUserMark)):(y&P.PerformanceConsoleLogLevel)===P.PerformanceConsoleLogLevel?(P.StartPerformanceCounter=P._StartPerformanceConsole,void(P.EndPerformanceCounter=P._EndPerformanceConsole)):(P.StartPerformanceCounter=P._StartPerformanceCounterDisabled,void(P.EndPerformanceCounter=P._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(y,c){}static _EndPerformanceCounterDisabled(y,c){}static _StartUserMark(y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!P._Performance){if(!(0,w.m)())return;P._Performance=window.performance}c&&P._Performance.mark&&P._Performance.mark(y+"-Begin")}static _EndUserMark(y){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&P._Performance.mark&&(P._Performance.mark(y+"-End"),P._Performance.measure(y,y+"-Begin",y+"-End"))}static _StartPerformanceConsole(y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(P._StartUserMark(y,c),console.time&&console.time(y))}static _EndPerformanceConsole(y){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c&&(P._EndUserMark(y,c),console.timeEnd(y))}static get Now(){return W.d.Now}static GetClassName(y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=null;if(!c&&y.getClassName)A=y.getClassName();else{if(y instanceof Object){A=(c?y:Object.getPrototypeOf(y)).constructor.__bjsclassName__}A||(A=typeof y)}return A}static First(y,c){for(const A of y)if(c(A))return A;return null}static getFullClassName(y){let c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=null,l=null;if(!c&&y.getClassName)A=y.getClassName();else{if(y instanceof Object){const w=c?y:Object.getPrototypeOf(y);A=w.constructor.__bjsclassName__,l=w.constructor.__bjsmoduleName__}A||(A=typeof y)}return A?(null!=l?l+".":"")+A:null}static async DelayAsync(y){await new Promise((c=>{setTimeout((()=>{c()}),y)}))}static IsSafari(){return!!(0,w.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function D(y,c){return A=>{A.__bjsclassName__=y,A.__bjsmoduleName__=null!=c?c:null}}P.AssetBaseUrl="",P.UseCustomRequestHeaders=!1,P.CustomRequestHeaders=I.d.CustomRequestHeaders,P.GetDOMTextContent=w.e,P._DefaultCdnUrl="https://cdn.babylonjs.com",P._DefaultAssetsUrl="https://assets.babylonjs.com/core",P.GetAbsoluteUrl="object"===typeof document?y=>{const c=document.createElement("a");return c.href=y,c.href}:"function"===typeof URL&&"object"===typeof location?y=>new URL(y,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},P.NoneLogLevel=N.c.NoneLogLevel,P.MessageLogLevel=N.c.MessageLogLevel,P.WarningLogLevel=N.c.WarningLogLevel,P.ErrorLogLevel=N.c.ErrorLogLevel,P.AllLogLevel=N.c.AllLogLevel,P.IsWindowObjectExist=w.m,P.PerformanceNoneLogLevel=0,P.PerformanceUserMarkLogLevel=1,P.PerformanceConsoleLogLevel=2,P.StartPerformanceCounter=P._StartPerformanceCounterDisabled,P.EndPerformanceCounter=P._EndPerformanceCounterDisabled;class t{constructor(y,c,A){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=y,this.index=l-1,this._done=!1,this._fn=c,this._successCallback=A}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(y,c,A){const l=new t(y,c,A,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return l.executeNext(),l}static SyncAsyncForLoop(y,c,A,l,w){let N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return t.Run(Math.ceil(y/c),(l=>{w&&w()?l.breakLoop():setTimeout((()=>{for(let N=0;N<c;++N){const p=l.index*c+N;if(p>=y)break;if(A(p),w&&w()){l.breakLoop();break}}l.executeNext()}),N)}),l)}}P.Mix=H.m,P.IsExponentOfTwo=H.j,q.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12283:(y,c,A)=>{A.d(c,{d:()=>N,f:()=>w});const l={};function w(y,c){l[y]=c}function N(y){return l[y]}},12182:(y,c,A)=>{A.d(c,{d:()=>l});class l{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(l.CustomRequestHeaders).length>0||l.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const y in l.CustomRequestHeaders){const c=l.CustomRequestHeaders[y];c&&this._xhr.setRequestHeader(y,c)}}_shouldSkipRequestModifications(y){return l.SkipRequestModificationForBabylonCDN&&(y.includes("preview.babylonjs.com")||y.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(y){this._xhr.onprogress=y}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(y){this._xhr.responseType=y}get timeout(){return this._xhr.timeout}set timeout(y){this._xhr.timeout=y}addEventListener(y,c,A){this._xhr.addEventListener(y,c,A)}removeEventListener(y,c,A){this._xhr.removeEventListener(y,c,A)}abort(){this._xhr.abort()}send(y){l.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(y)}open(y,c){for(const A of l.CustomRequestModifiers){if(this._shouldSkipRequestModifications(c))return;c=A(this._xhr,c)||c}c=(c=c.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=c,this._xhr.open(y,c,!0)}setRequestHeader(y,c){this._xhr.setRequestHeader(y,c)}getResponseHeader(y){return this._xhr.getResponseHeader(y)}}l.CustomRequestHeaders={},l.CustomRequestModifiers=new Array,l.SkipRequestModificationForBabylonCDN=!0}}]);