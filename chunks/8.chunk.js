"use strict";(self.vfdo5lmva5i=self.vfdo5lmva5i||[]).push([[8],{11615:(w,o,H)=>{H.d(o,{c:()=>r});var h=H(11571),E=H(11551),e=H(11623),D=H(11635),t=H(11560);class X{constructor(){let w=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,w&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(w){this._zOffset!==w&&(this._zOffset=w,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(w){this._zOffsetUnits!==w&&(this._zOffsetUnits=w,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(w){this._cullFace!==w&&(this._cullFace=w,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(w){this._cull!==w&&(this._cull=w,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(w){this._depthFunc!==w&&(this._depthFunc=w,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(w){this._depthMask!==w&&(this._depthMask=w,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(w){this._depthTest!==w&&(this._depthTest=w,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(w){this._frontFace!==w&&(this._frontFace=w,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(w){this.isDirty&&(this._isCullDirty&&(this.cull?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(w.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(w.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(w.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(w.enable(w.POLYGON_OFFSET_FILL),w.polygonOffset(this.zOffset,this.zOffsetUnits)):w.disable(w.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(w.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class L{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(w){this._func!==w&&(this._func=w,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(w){this._funcRef!==w&&(this._funcRef=w,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(w){this._funcMask!==w&&(this._funcMask=w,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(w){this._opStencilFail!==w&&(this._opStencilFail=w,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(w){this._opDepthFail!==w&&(this._opDepthFail=w,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(w){this._opStencilDepthPass!==w&&(this._opStencilDepthPass=w,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(w){this._mask!==w&&(this._mask=w,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(w){this._enabled!==w&&(this._enabled=w,this._isStencilTestDirty=!0)}constructor(){let w=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,w&&this.reset()}reset(){var w;this.stencilMaterial=void 0,null===(w=this.stencilGlobal)||void 0===w||w.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(w){var o;if(!w)return;const H=!this.useStencilGlobalOnly&&!(null===(o=this.stencilMaterial)||void 0===o||!o.enabled);this.enabled=H?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=H?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=H?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=H?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=H?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=H?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=H?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=H?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(w.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(w.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(w.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class A{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=A.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=A.KEEP,this.opDepthFail=A.KEEP,this.opStencilDepthPass=A.REPLACE}get stencilFunc(){return this.func}set stencilFunc(w){this.func=w}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(w){this.funcRef=w}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(w){this.funcMask=w}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(w){this.opStencilFail=w}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(w){this.opDepthFail=w}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(w){this.opStencilDepthPass=w}get stencilMask(){return this.mask}set stencilMask(w){this.mask=w}get stencilTest(){return this.enabled}set stencilTest(w){this.enabled=w}}A.ALWAYS=519,A.KEEP=7680,A.REPLACE=7681;class y{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(w){this._alphaBlend!==w&&(this._alphaBlend=w,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(w,o,H,h){this._blendConstants[0]===w&&this._blendConstants[1]===o&&this._blendConstants[2]===H&&this._blendConstants[3]===h||(this._blendConstants[0]=w,this._blendConstants[1]=o,this._blendConstants[2]=H,this._blendConstants[3]=h,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(w,o,H,h){this._blendFunctionParameters[0]===w&&this._blendFunctionParameters[1]===o&&this._blendFunctionParameters[2]===H&&this._blendFunctionParameters[3]===h||(this._blendFunctionParameters[0]=w,this._blendFunctionParameters[1]=o,this._blendFunctionParameters[2]=H,this._blendFunctionParameters[3]=h,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(w,o){this._blendEquationParameters[0]===w&&this._blendEquationParameters[1]===o||(this._blendEquationParameters[0]=w,this._blendEquationParameters[1]=o,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(w){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?w.enable(w.BLEND):w.disable(w.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(w.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(w.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(w.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var z=H(11564),C=H(11640),Q=H(11545),M=H(11540),i=H(11603),s=H(11656);function V(w,o){if((0,Q.i)()){const{requestAnimationFrame:H}=o||window;if("function"===typeof H)return H(w)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(w);return setTimeout(w,16)}class r{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(w){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(w){w!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=w,this._depthCullingState.depthFunc=w?518:515)}setColorWrite(w){w!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=w)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(w){if(w)return this.isNDCHalfZRange?w.IS_NDC_HALF_ZRANGE="":delete w.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?w.USE_REVERSE_DEPTHBUFFER="":delete w.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?w.USE_EXACT_SRGB_CONVERSIONS="":delete w.USE_EXACT_SRGB_CONVERSIONS);{let w="";return this.isNDCHalfZRange&&(w+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(w&&(w+="\n"),w+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(w&&(w+="\n"),w+="#define USE_EXACT_SRGB_CONVERSIONS"),w}}_rebuildInternalTextures(){const w=this._internalTexturesCache.slice();for(const o of w)o._rebuild()}_rebuildRenderTargetWrappers(){const w=this._renderTargetWrapperCache.slice();for(const o of w)o._rebuild()}_rebuildEffects(){for(const w in this._compiledEffects){const o=this._compiledEffects[w];o._pipelineContext=null,o._prepareEffect()}e.Effect.ResetCache()}_rebuildGraphicsResources(){var w;this.wipeCaches(!0),this._rebuildEffects(),null===(w=this._rebuildComputeEffects)||void 0===w||w.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){E.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(w){setTimeout((()=>{this._clearEmptyResources();const o=this._depthCullingState.depthTest,H=this._depthCullingState.depthFunc,h=this._depthCullingState.depthMask,E=this._stencilState.stencilTest;w(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=o,this._depthCullingState.depthFunc=H,this._depthCullingState.depthMask=h,this._stencilState.stencilTest=E,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(w){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(w){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const w=new Uint8Array(4),o=[w,w,w,w,w,w];this._emptyCubeTexture=this.createRawCubeTexture(o,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(w){if(!w)return this._activeRenderLoops.length=0,void this._cancelFrame();const o=this._activeRenderLoops.indexOf(w);o>=0&&(this._activeRenderLoops.splice(o,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const w=this._frameHandler;if(this._frameHandler=0,(0,Q.i)()){const{cancelAnimationFrame:o}=this.getHostWindow()||window;if("function"===typeof o)return o(w)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(w);return clearTimeout(w)}}nh(){this.onBeginFrameObservable.notifyObservers(this)}xh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(w){this._maxFPS=w,void 0!==w&&(this._minFrameTime=w<=0?Number.MAX_VALUE:1e3/w)}_isOverFrameTime(w){if(!w||void 0===this._maxFPS)return!1;const o=w-this._lastFrameTime;return this._lastFrameTime=w,this._renderAccumulator+=o,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(w){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(w)){let w=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(w=!1),w&&(this.nh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.xh())}}_renderLoop(w){this._processFrame(w),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let w=0;w<this._activeRenderLoops.length;w++){(0,this._activeRenderLoops[w])()}}_renderViews(){return!1}_queueNewFrame(w,o){return V(w,o)}runRenderLoop(w){-1===this._activeRenderLoops.indexOf(w)&&(this._activeRenderLoops.push(w),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(w){this._depthCullingState.depthTest=w}setZOffset(w){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-w:w}getZOffset(){const w=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-w:w}setZOffsetUnits(w){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-w:w}getZOffsetUnits(){const w=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-w:w}getHostWindow(){return(0,Q.i)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(w){this._compatibilityMode=!0}_rebuildTextures(){for(const w of this.scenes)w._rebuildTextures();for(const w of this._virtualScenes)w._rebuildTextures()}_releaseRenderTargetWrapper(w){const o=this._renderTargetWrapperCache.indexOf(w);-1!==o&&this._renderTargetWrapperCache.splice(o,1)}get currentViewport(){return this._cachedViewport}setViewport(w,o,H){const h=o||this.getRenderWidth(),E=H||this.getRenderHeight(),e=w.x||0,D=w.y||0;this._cachedViewport=w,this._viewport(e*h,D*E,h*w.width,E*w.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(w){return new Path2D(w)}get description(){let w=this.name+this.version;return this._caps.parallelShaderCompile&&(w+=" - Parallel shader compilation"),w}_createTextureBase(w,o,H,e){let D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,X=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,L=arguments.length>7?arguments[7]:void 0,A=arguments.length>8?arguments[8]:void 0,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,z=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,Q=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,M=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,i=arguments.length>13?arguments[13]:void 0,V=arguments.length>14?arguments[14]:void 0,k=arguments.length>15?arguments[15]:void 0;const P="data:"===(w=w||"").substring(0,5),l="blob:"===w.substring(0,5),O=P&&-1!==w.indexOf(";base64,"),T=z||new C.c(this,1);T!==z&&(T.label=w.substring(0,60));const S=w;!this._transformTextureUrl||O||z||y||(w=this._transformTextureUrl(w)),S!==w&&(T._originalUrl=S);const c=w.lastIndexOf(".");let W=M||(c>-1?w.substring(c).toLowerCase():"");W.indexOf("?")>-1&&(W=W.split("?")[0]);const B=(0,s.b)(W,i);e&&e.addPendingData(T),T.url=w,T.generateMipMaps=!o,T.samplingMode=D,T.invertY=H,T._useSRGBBuffer=this._getUseSRGBBuffer(!!k,o),this._doNotHandleContextLost||(T._buffer=y);let J=null;t&&!z&&(J=T.onLoadedObservable.add(t)),z||this._internalTexturesCache.push(T);const g=(H,z)=>{e&&e.removePendingData(T),w===S?(J&&T.onLoadedObservable.remove(J),h.e.UseFallbackTexture&&w!==h.e.FallbackTexture&&this._createTextureBase(h.e.FallbackTexture,o,T.invertY,e,D,null,X,L,A,y,T),H=(H||"Unknown error")+(h.e.UseFallbackTexture?" - Fallback texture was used":""),T.onErrorObservable.notifyObservers({message:H,exception:z}),X&&X(H,z)):(E.d.Warn(`Failed to load ${w}, falling back to ${S}`),this._createTextureBase(S,o,T.invertY,e,D,t,X,L,A,y,T,Q,M,i,V,k))};if(B){const o=async w=>{(await B).loadData(w,T,((w,o,H,h,E,t)=>{t?g("TextureLoader failed to load data"):L(T,W,e,{width:w,height:o},T.invertY,!H,h,(()=>(E(),!1)),D)}),V)};y?y instanceof ArrayBuffer?o(new Uint8Array(y)):ArrayBuffer.isView(y)?o(y):X&&X("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(w,(w=>{o(new Uint8Array(w))}),void 0,e?e.offlineProvider:void 0,!0,((w,o)=>{g("Unable to load "+(w&&w.responseURL,o))}))}else{const H=w=>{l&&!this._doNotHandleContextLost&&(T._buffer=w),L(T,W,e,w,T.invertY,o,!1,A,D)};!P||O?y&&("string"===typeof y.decoding||y.close)?H(y):r._FileToolsLoadImage(w||"",H,g,e?e.offlineProvider:null,i,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof y||y instanceof ArrayBuffer||ArrayBuffer.isView(y)||y instanceof Blob?r._FileToolsLoadImage(y,H,g,e?e.offlineProvider:null,i,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):y&&H(y)}return T}_rebuildBuffers(){for(const w of this._uniformBuffers)w._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,Q.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const w in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,w)&&(this._boundTexturesCache[w]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(w){this._name=w}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(w){this._hardwareScalingLevel=w,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(w){this._doNotHandleContextLost=w}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(w,o,H){var E,e;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new X,this._stencilStateComposer=new L,this._stencilState=new A,this._alphaState=new y,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new M.b,this.onCanvasFocusObservable=new M.b,this.onNewSceneAddedObservable=new M.b,this.onResizeObservable=new M.b,this.onCanvasPointerOutObservable=new M.b,this.onEffectErrorObservable=new M.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new M.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=w=>this._renderLoop(w),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new M.b,this.onAfterShaderCompilationObservable=new M.b,this.onBeginFrameObservable=new M.b,this.onEndFrameObservable=new M.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new M.b,this.onContextRestoredObservable=new M.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.me=new M.b,this.onReleaseEffectsObservable=new M.b,h.e.Instances.push(this),this.startTime=t.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,D.d.SetMatrixPrecision(!!o.useHighPrecisionMatrix),(0,Q.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=H??!1,o.antialias=w??o.antialias,o.deterministicLockstep=o.deterministicLockstep??!1,o.lockstepMaxSteps=o.lockstepMaxSteps??4,o.timeStep=o.timeStep??1/60,o.stencil=o.stencil??!0,this._audioContext=(null===(E=o.audioEngineOptions)||void 0===E?void 0:E.audioContext)??null,this._audioDestination=(null===(e=o.audioEngineOptions)||void 0===e?void 0:e.audioDestination)??null,this.premultipliedAlpha=o.premultipliedAlpha??!0,this._doNotHandleContextLost=!!o.doNotHandleContextLost,this._isStencilEnable=!!o.stencil,this.useExactSrgbConversions=o.useExactSrgbConversions??!1;const z=(0,Q.i)()&&window.devicePixelRatio||1,C=o.limitDeviceRatio||z;H=H||o.adaptToDeviceRatio||!1,this._hardwareScalingLevel=H?1/Math.min(C,z):1,this._lastDevicePixelRatio=z,this._creationOptions=o}resize(){let w,o,H=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const w=(0,Q.i)()&&window.devicePixelRatio||1,o=this._lastDevicePixelRatio/w;this._lastDevicePixelRatio=w,this._hardwareScalingLevel*=o}if((0,Q.i)()&&(0,Q.d)())if(this._renderingCanvas){var h,E;const H=null===(h=(E=this._renderingCanvas).getBoundingClientRect)||void 0===h?void 0:h.call(E);w=this._renderingCanvas.clientWidth||(null===H||void 0===H?void 0:H.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,o=this._renderingCanvas.clientHeight||(null===H||void 0===H?void 0:H.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else w=window.innerWidth,o=window.innerHeight;else w=this._renderingCanvas?this._renderingCanvas.width:100,o=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(w/this._hardwareScalingLevel,o/this._hardwareScalingLevel,H)}setSize(w,o){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(w|=0,o|=0,!H&&this._renderingCanvas.width===w&&this._renderingCanvas.height===o)return!1;if(this._renderingCanvas.width=w,this._renderingCanvas.height=o,this.scenes){for(let w=0;w<this.scenes.length;w++){const o=this.scenes[w];for(let w=0;w<o.cameras.length;w++){o.cameras[w]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(w,o,H,h,E,e,D,t,X,L,A){throw(0,z.b)("engine.rawTexture")}createRawCubeTexture(w,o,H,h,E,e,D,t){throw(0,z.b)("engine.rawTexture")}createRawTexture3D(w,o,H,h,E,e,D,t,X,L,A){throw(0,z.b)("engine.rawTexture")}createRawTexture2DArray(w,o,H,h,E,e,D,t,X,L,A){throw(0,z.b)("engine.rawTexture")}_sharedInit(w){this._renderingCanvas=w}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const w=navigator.userAgent;this.hostInformation.isMobile=-1!==w.indexOf("Mobile")||-1!==w.indexOf("Mac")&&(0,Q.d)()&&"ontouchend"in document},this._checkForMobile(),(0,Q.i)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(w){return document.createElement("video")}_reportDrawCall(){var w;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(w=this._drawCalls)||void 0===w||w.addCount(o,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(w,o){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(w,o){return createImageBitmap(w,o)}resizeImageBitmap(w,o,H){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(w){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(w,o){if("undefined"===typeof document)return new OffscreenCanvas(w,o);const H=document.createElement("canvas");return H.width=w,H.height=o,H}createCanvas(w,o){return r._CreateCanvas(w,o)}static _FileToolsLoadImage(w,o,H,h,E,e,D){throw(0,z.b)("FileTools")}_loadFile(w,o,H,h,E,e){const D=(0,i.i)(w,o,H,h,E,e);return this._activeRequests.push(D),D.onCompleteObservable.add((()=>{const w=this._activeRequests.indexOf(D);-1!==w&&this._activeRequests.splice(w,1)})),D}static _FileToolsLoadFile(w,o,H,h,E,e){if(i.c.loadFile)return i.c.loadFile(w,o,H,h,E,e);throw(0,z.b)("FileTools")}dispose(){var w;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(w=this.releaseComputeEffects)||void 0===w||w.call(this),e.Effect.ResetCache();for(const H of this._activeRequests)H.abort();this._boundRenderFunction=null,this.me.notifyObservers(this),this.me.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,Q.i)()&&window.removeEventListener("resize",this._checkForMobile);const o=h.e.Instances.indexOf(this);o>=0&&h.e.Instances.splice(o,1),h.e.Instances.length||(h.e.OnEnginesDisposedObservable.notifyObservers(this),h.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(w){throw(0,z.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(w,o){for(let H=0;H<h.e.Instances.length;H++){const E=h.e.Instances[H];for(let H=0;H<E.scenes.length;H++)E.scenes[H].markAllMaterialsAsDirty(w,o)}}}r._RenderPassIdCounter=0,r._RescalePostProcessFactory=null,r.CollisionsEpsilon=.001,r.QueueNewFrame=V},11571:(w,o,H)=>{H.d(o,{e:()=>E});var h=H(11540);class E{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}E.Instances=[],E.OnEnginesDisposedObservable=new h.b,E._LastCreatedScene=null,E.UseFallbackTexture=!0,E.FallbackTexture=""},11635:(w,o,H)=>{H.d(o,{d:()=>h});class h{static SetMatrixPrecision(w){if(h.MatrixTrackPrecisionChange=!1,w&&!h.MatrixUse64Bits&&h.MatrixTrackedMatrices)for(let o=0;o<h.MatrixTrackedMatrices.length;++o){const w=h.MatrixTrackedMatrices[o],H=w.we;w.we=new Array(16);for(let o=0;o<16;++o)w.we[o]=H[o]}h.MatrixUse64Bits=w,h.MatrixCurrentType=h.MatrixUse64Bits?Array:Float32Array,h.MatrixTrackedMatrices=null}}h.MatrixUse64Bits=!1,h.MatrixTrackPrecisionChange=!0,h.MatrixCurrentType=Float32Array,h.MatrixTrackedMatrices=[]},11656:(w,o,H)=>{H.d(o,{b:()=>D});var h=H(11551);const E=new Map;function e(w,o){(function(w){return E.delete(w)})(w)&&h.d.Warn(`Extension with the name '${w}' already exists`),E.set(w,o)}function D(w,o){"image/ktx"!==o&&"image/ktx2"!==o||(w=".ktx"),E.has(w)||(w.endsWith(".ies")&&e(".ies",(async()=>await H.e(15).then(H.bind(H,14236)).then((w=>new w._IESTextureLoader)))),w.endsWith(".dds")&&e(".dds",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(19),H.e(18),H.e(28)]).then(H.bind(H,14240)).then((w=>new w._DDSTextureLoader)))),w.endsWith(".basis")&&e(".basis",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(47)]).then(H.bind(H,14247)).then((w=>new w._BasisTextureLoader)))),w.endsWith(".env")&&e(".env",(async()=>await Promise.all([H.e(14),H.e(17),H.e(13),H.e(19),H.e(18),H.e(23),H.e(21),H.e(45),H.e(48)]).then(H.bind(H,14252)).then((w=>new w._ENVTextureLoader)))),w.endsWith(".hdr")&&e(".hdr",(async()=>await Promise.all([H.e(14),H.e(49)]).then(H.bind(H,14260)).then((w=>new w._HDRTextureLoader)))),(w.endsWith(".ktx")||w.endsWith(".ktx2"))&&(e(".ktx",(async()=>await H.e(30).then(H.bind(H,14262)).then((w=>new w._KTXTextureLoader)))),e(".ktx2",(async()=>await H.e(30).then(H.bind(H,14262)).then((w=>new w._KTXTextureLoader))))),w.endsWith(".tga")&&e(".tga",(async()=>await H.e(50).then(H.bind(H,14267)).then((w=>new w._TGATextureLoader)))),w.endsWith(".exr")&&e(".exr",(async()=>await H.e(16).then(H.bind(H,14272)).then((w=>new w._ExrTextureLoader)))));const h=E.get(w);return h?Promise.resolve(h(o)):null}},11640:(w,o,H)=>{H.d(o,{c:()=>D});var h,E=H(11540),e=H(11648);!function(w){w[w.Unknown=0]="Unknown",w[w.Url=1]="Url",w[w.Temp=2]="Temp",w[w.Raw=3]="Raw",w[w.Dynamic=4]="Dynamic",w[w.RenderTarget=5]="RenderTarget",w[w.MultiRenderTarget=6]="MultiRenderTarget",w[w.Cube=7]="Cube",w[w.CubeRaw=8]="CubeRaw",w[w.CubePrefiltered=9]="CubePrefiltered",w[w.Raw3D=10]="Raw3D",w[w.Raw2DArray=11]="Raw2DArray",w[w.DepthStencil=12]="DepthStencil",w[w.CubeRawRGBD=13]="CubeRawRGBD",w[w.Depth=14]="Depth"}(h||(h={}));class D extends e.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(w){this.generateMipMaps=w}get uniqueId(){return this._uniqueId}_setUniqueId(w){this._uniqueId=w}getEngine(){return this._engine}get source(){return this._source}constructor(w,o){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new E.b,this.onErrorObservable=new E.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=w,this._source=o,this._uniqueId=D._Counter++,H||(this._hardwareTexture=w._createHardwareTexture())}incrementReferences(){this._references++}updateSize(w,o){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,w,o,H),this.width=w,this.height=o,this.depth=H,this.baseWidth=w,this.baseHeight=o,this.baseDepth=H,this._size=w*o*H}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const w=this.onRebuildCallback(this),o=o=>{o._swapAndDie(this,!1),this.isReady=w.isReady};return void(w.isAsync?w.proxy.then(o):o(w.proxy))}let w;switch(this.source){case 2:case 12:case 14:break;case 1:return void(w=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(w=>{w._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:w=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),w._swapAndDie(this,!1),this.isReady=!0;break;case 10:w=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),w._swapAndDie(this,!1),this.isReady=!0;break;case 11:w=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),w._swapAndDie(this,!1),this.isReady=!0;break;case 4:w=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),w._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(w=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{w._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:w=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),w._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return w=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(w=>{w&&w._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(w._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(w){var o;let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(o=this._hardwareTexture)||void 0===o||o.setUsage(w._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),w._hardwareTexture=this._hardwareTexture,H&&(w._isRGBD=this._isRGBD),this._lodTextureHigh&&(w._lodTextureHigh&&w._lodTextureHigh.dispose(),w._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(w._lodTextureMid&&w._lodTextureMid.dispose(),w._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(w._lodTextureLow&&w._lodTextureLow.dispose(),w._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(w._irradianceTexture&&w._irradianceTexture.dispose(),w._irradianceTexture=this._irradianceTexture);const h=this._engine.getLoadedTexturesCache();let E=h.indexOf(this);-1!==E&&h.splice(E,1),E=h.indexOf(w),-1===E&&h.push(w)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}D._Counter=0},11648:(w,o,H)=>{H.d(o,{e:()=>h});class h{get wrapU(){return this._cachedWrapU}set wrapU(w){this._cachedWrapU=w}get wrapV(){return this._cachedWrapV}set wrapV(w){this._cachedWrapV=w}get wrapR(){return this._cachedWrapR}set wrapR(w){this._cachedWrapR=w}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(w){this._cachedAnisotropicFilteringLevel=w}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(w){this._comparisonFunction=w}get useMipMaps(){return this._useMipMaps}set useMipMaps(w){this._useMipMaps=w}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,E=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=w,this._cachedWrapV=o,this._cachedWrapR=H,this._cachedAnisotropicFilteringLevel=h,this.samplingMode=E,this._comparisonFunction=e,this}compareSampler(w){return this._cachedWrapU===w._cachedWrapU&&this._cachedWrapV===w._cachedWrapV&&this._cachedWrapR===w._cachedWrapR&&this._cachedAnisotropicFilteringLevel===w._cachedAnisotropicFilteringLevel&&this.samplingMode===w.samplingMode&&this._comparisonFunction===w._comparisonFunction&&this._useMipMaps===w._useMipMaps}}},11556:(w,o,H)=>{H.d(o,{d:()=>e});var h=H(11551);const E=(w,o,H)=>w?w.getClassName&&"Mesh"===w.getClassName()?null:!w.getClassName||"SubMesh"!==w.getClassName()&&"PhysicsBody"!==w.getClassName()?w.clone?w.clone():Array.isArray(w)?w.slice():H&&"object"===typeof w?{...w}:null:w.clone(o):null;class e{static DeepCopy(w,o,H,e){let D=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const t=function(w){const o=[];do{const H=Object.getOwnPropertyNames(w);for(const w of H)-1===o.indexOf(w)&&o.push(w)}while(w=Object.getPrototypeOf(w));return o}(w);for(const L of t){if("_"===L[0]&&(!e||-1===e.indexOf(L)))continue;if(L.endsWith("Observable"))continue;if(H&&-1!==H.indexOf(L))continue;const t=w[L],A=typeof t;if("function"!==A)try{if("object"===A)if(t instanceof Uint8Array)o[L]=Uint8Array.from(t);else if(t instanceof Array){if(o[L]=[],t.length>0)if("object"==typeof t[0])for(let w=0;w<t.length;w++){const H=E(t[w],o,D);-1===o[L].indexOf(H)&&o[L].push(H)}else o[L]=t.slice(0)}else o[L]=E(t,o,D);else o[L]=t}catch(X){h.d.Warn(X.message)}}}}},11582:(w,o,H)=>{H.d(o,{b:()=>h,e:()=>E,i:()=>e});class h extends Error{}h._setPrototypeOf=Object.setPrototypeOf||((w,o)=>(w.__proto__=o,w));const E={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class e extends h{constructor(w,o,H){super(w),this.errorCode=o,this.innerError=H,this.name="RuntimeError",h._setPrototypeOf(this,e.prototype)}}},11573:(w,o,H)=>{H.d(o,{d:()=>g,g:()=>r,k:()=>c,m:()=>B,p:()=>T,n:()=>i,q:()=>l,r:()=>O,t:()=>S,x:()=>k});var h=H(11566),E=H(11545),e=H(11540);class D{}D.FilesToLoad={};var t=H(11582),X=H(11589),L=H(11595),A=H(11571),y=H(11551),z=H(11606),C=H(11603),Q=H(11615);const M=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class i extends t.i{constructor(w,o){super(w,t.e.LoadFileError),this.name="LoadFileError",t.b._setPrototypeOf(this,i.prototype),o instanceof h.b?this.request=o:this.file=o}}class s extends t.i{constructor(w,o){super(w,t.e.RequestFileError),this.request=o,this.name="RequestFileError",t.b._setPrototypeOf(this,s.prototype)}}class V extends t.i{constructor(w,o){super(w,t.e.ReadFileError),this.file=o,this.name="ReadFileError",t.b._setPrototypeOf(this,V.prototype)}}const r={DefaultRetryStrategy:class{static ExponentialBackoff(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(H,h,E)=>0!==h.status||E>=w||-1!==H.indexOf("file:")?-1:Math.pow(2,E)*o}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:w=>w,ScriptBaseUrl:"",ScriptPreprocessUrl:w=>w,CleanUrl:w=>w=w.replace(/#/gm,"%23")},k=(w,o)=>{if((!w||0!==w.indexOf("data:"))&&r.CorsBehavior)if("string"===typeof r.CorsBehavior||r.CorsBehavior instanceof String)o.crossOrigin=r.CorsBehavior;else{const H=r.CorsBehavior(w);H&&(o.crossOrigin=H)}},P={getRequiredSize:null},l=function(w,o,H,E){let e,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",L=arguments.length>5?arguments[5]:void 0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:A.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===y||void 0===y||!y._features.forceBitmapOverHTMLImageElement))return H("LoadImage is only supported in web or BabylonNative environments."),null;let z=!1;w instanceof ArrayBuffer||ArrayBuffer.isView(w)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(e=URL.createObjectURL(new Blob([w],{type:t})),z=!0):e=`data:${t};base64,`+(0,X.g)(w):w instanceof Blob?(e=URL.createObjectURL(w),z=!0):(e=r.CleanUrl(w),e=r.PreprocessUrl(e));const C=o=>{if(H){const h=e||w.toString();H(`Error while trying to load image: ${0===h.indexOf("http")||h.length<=128?h:h.slice(0,128)+"..."}`,o)}};if(null!==y&&void 0!==y&&y._features.forceBitmapOverHTMLImageElement)return T(e,(h=>{y.createImageBitmap(new Blob([h],{type:t}),{premultiplyAlpha:"none",...L}).then((w=>{o(w),z&&URL.revokeObjectURL(e)})).catch((o=>{H&&H("Error while trying to load image: "+w,o)}))}),void 0,E||void 0,!0,((w,o)=>{C(o)})),null;const Q=new Image;if(P.getRequiredSize){const o=P.getRequiredSize(w);o.width&&(Q.width=o.width),o.height&&(Q.height=o.height)}k(e,Q);const M=[],i=()=>{for(const w of M)w.target.removeEventListener(w.name,w.handler);M.length=0};M.push({target:Q,name:"load",handler:()=>{i(),o(Q),z&&Q.src&&URL.revokeObjectURL(Q.src)}}),M.push({target:Q,name:"error",handler:w=>{i(),C(w),z&&Q.src&&URL.revokeObjectURL(Q.src)}}),M.push({target:document,name:"securitypolicyviolation",handler:w=>{if(w.blockedURI!==Q.src||"oe"===w.disposition)return;i();const o=new Error(`CSP violation of policy ${w.effectiveDirective} ${w.blockedURI}. Current policy is ${w.originalPolicy}`);A.e.UseFallbackTexture=!1,C(o),z&&Q.src&&URL.revokeObjectURL(Q.src),Q.src=""}}),(()=>{for(const w of M)w.target.addEventListener(w.name,w.handler)})();const s="blob:"===e.substring(0,5),V="data:"===e.substring(0,5),l=()=>{s||V||!h.b.IsCustomRequestAvailable?Q.src=e:T(e,((w,o,H)=>{const h=new Blob([w],{type:!t&&H?H:t}),E=URL.createObjectURL(h);z=!0,Q.src=E}),void 0,E||void 0,!0,((w,o)=>{C(o)}))},O=()=>{E&&E.loadImage(e,Q)};if(!s&&!V&&E&&E.enableTexturesOffline)E.open(O,l);else{if(-1!==e.indexOf("file:")){const w=decodeURIComponent(e.substring(5).toLowerCase());if(D.FilesToLoad[w]&&"undefined"!==typeof URL){try{let o;try{o=URL.createObjectURL(D.FilesToLoad[w])}catch(S){o=URL.createObjectURL(D.FilesToLoad[w])}Q.src=o,z=!0}catch(c){Q.src=""}return Q}}l()}return Q},O=(w,o,H,h,E)=>{const D=new FileReader,t={onCompleteObservable:new e.b,abort:()=>D.abort()};return D.onloadend=()=>t.onCompleteObservable.notifyObservers(t),E&&(D.onerror=()=>{E(new V(`Unable to read ${w.name}`,w))}),D.onload=w=>{o(w.target.result)},H&&(D.onprogress=H),h?D.readAsArrayBuffer(w):D.readAsText(w),t},T=(w,o,H,h,E,X,L)=>{if(w.name)return O(w,o,H,E,X?w=>{X(void 0,w)}:void 0);const A=w;if(-1!==A.indexOf("file:")){let w=decodeURIComponent(A.substring(5).toLowerCase());0===w.indexOf("./")&&(w=w.substring(2));const h=D.FilesToLoad[w];if(h)return O(h,o,H,E,X?w=>X(void 0,new i(w.message,w.file)):void 0)}const{match:C,type:Q}=J(A);if(C){const w={onCompleteObservable:new e.b,abort:()=>()=>{}};try{const w=E?g(A):b(A);o(w,void 0,Q)}catch(t){X?X(void 0,t):y.d.Error(t.message||"Failed to parse the Data URL")}return z.d.SetImmediate((()=>{w.onCompleteObservable.notifyObservers(w)})),w}return S(A,((w,H)=>{o(w,null===H||void 0===H?void 0:H.responseURL,null===H||void 0===H?void 0:H.getResponseHeader("content-type"))}),H,h,E,X?w=>{X(w.request,new i(w.message,w.request))}:void 0,L)},S=(w,o,H,D,t,X,L)=>{w=r.CleanUrl(w),w=r.PreprocessUrl(w);const A=r.BaseUrl+w;let z=!1;const C={onCompleteObservable:new e.b,abort:()=>z=!0},Q=()=>{let w,e=new h.b,D=null;const Q=()=>{e&&(H&&e.removeEventListener("progress",H),w&&e.removeEventListener("readystatechange",w),e.removeEventListener("loadend",M))};let M=()=>{Q(),C.onCompleteObservable.notifyObservers(C),C.onCompleteObservable.clear(),H=void 0,w=null,M=null,X=void 0,L=void 0,o=void 0};C.abort=()=>{z=!0,M&&M(),e&&e.readyState!==(XMLHttpRequest.DONE||4)&&e.abort(),null!==D&&(clearTimeout(D),D=null),e=null};const i=w=>{const o=w.message||"Unknown error";X&&e?X(new s(o,e)):y.d.Error(o)},V=y=>{if(e){if(e.open("GET",A),L)try{L(e)}catch(C){return void i(C)}t&&(e.responseType="arraybuffer"),H&&e.addEventListener("progress",H),M&&e.addEventListener("loadend",M),w=()=>{if(!z&&e&&e.readyState===(XMLHttpRequest.DONE||4)){if(w&&e.removeEventListener("readystatechange",w),e.status>=200&&e.status<300||0===e.status&&(!(0,E.i)()||W())){const w=t?e.response:e.responseText;if(null!==w){try{o&&o(w,e)}catch(C){i(C)}return}}const H=r.DefaultRetryStrategy;if(H){const w=H(A,e,y);if(-1!==w)return Q(),e=new h.b,void(D=setTimeout((()=>V(y+1)),w))}const L=new s("Error status: "+e.status+" "+e.statusText+" - Unable to load "+A,e);X&&X(L)}},e.addEventListener("readystatechange",w),e.send()}};V(0)};if(D&&D.enableSceneOffline){const h=w=>{w&&w.status>400?X&&X(w):Q()},E=()=>{D&&D.loadFile(r.BaseUrl+w,(w=>{!z&&o&&o(w),C.onCompleteObservable.notifyObservers(C)}),H?w=>{!z&&H&&H(w)}:void 0,h,t)};D.open(E,h)}else Q();return C},c=w=>{const{match:o,type:H}=J(w);if(o)return H||void 0;const h=w.lastIndexOf(".");switch(w.substring(h+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"he":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},W=()=>"undefined"!==typeof location&&"file:"===location.protocol,B=w=>M.test(w),J=w=>{const o=M.exec(w);if(null===o||0===o.length)return{match:!1,type:""};return{match:!0,type:o[0].replace("data:","").replace("base64,","")}};function g(w){return(0,X.b)(w.split(",")[1])}const b=w=>(0,X.d)(w.split(",")[1]);let p;Q.c._FileToolsLoadImage=l,C.c.loadFile=T,L.o.loadFile=T;((w,o,H,h,E,e,D,t,X,L)=>{p={DecodeBase64UrlToBinary:w,DecodeBase64UrlToString:o,DefaultRetryStrategy:H.DefaultRetryStrategy,BaseUrl:H.BaseUrl,CorsBehavior:H.CorsBehavior,PreprocessUrl:H.PreprocessUrl,IsBase64DataUrl:h,IsFileURL:E,LoadFile:e,LoadImage:D,ReadFile:t,RequestFile:X,SetCorsBehavior:L},Object.defineProperty(p,"DefaultRetryStrategy",{get:function(){return H.DefaultRetryStrategy},set:function(w){H.DefaultRetryStrategy=w}}),Object.defineProperty(p,"BaseUrl",{get:function(){return H.BaseUrl},set:function(w){H.BaseUrl=w}}),Object.defineProperty(p,"PreprocessUrl",{get:function(){return H.PreprocessUrl},set:function(w){H.PreprocessUrl=w}}),Object.defineProperty(p,"CorsBehavior",{get:function(){return H.CorsBehavior},set:function(w){H.CorsBehavior=w}})})(g,b,r,B,W,T,l,O,S,k)},11675:(w,o,H)=>{function h(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(w=>{const o=16*Math.random()|0;return("x"===w?o:3&o|8).toString(16)}))}H.d(o,{e:()=>h})},11661:(w,o,H)=>{H.d(o,{c:()=>e});var h=H(11551),E=H(11666);class e{static Instantiate(w){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[w])return this.RegisteredExternalClasses[w];const o=(0,E.e)(w);if(o)return o;h.d.Warn(w+" not found, you may have missed an import.");const H=w.split(".");let e=window||this;for(let h=0,E=H.length;h<E;h++)e=e[H[h]];return"function"!==typeof e?null:e}}e.RegisteredExternalClasses={}},11560:(w,o,H)=>{H.d(o,{c:()=>E});var h=H(11545);class E{static get Now(){return(0,h.i)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11589:(w,o,H)=>{H.d(o,{b:()=>D,d:()=>e,e:()=>h,g:()=>E});const h=w=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(w);let o="";for(let H=0;H<w.byteLength;H++)o+=String.fromCharCode(w[H]);return o},E=w=>{const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let H,h,E,e,D,t,X,L="",A=0;const y=ArrayBuffer.isView(w)?new Uint8Array(w.buffer,w.byteOffset,w.byteLength):new Uint8Array(w);for(;A<y.length;)H=y[A++],h=A<y.length?y[A++]:Number.NaN,E=A<y.length?y[A++]:Number.NaN,e=H>>2,D=(3&H)<<4|h>>4,t=(15&h)<<2|E>>6,X=63&E,isNaN(h)?t=X=64:isNaN(E)&&(X=64),L+=o.charAt(e)+o.charAt(D)+o.charAt(t)+o.charAt(X);return L},e=w=>atob(w),D=w=>{const o=e(w),H=o.length,h=new Uint8Array(new ArrayBuffer(H));for(let E=0;E<H;E++)h[E]=o.charCodeAt(E);return h.buffer}},11683:(w,o,H)=>{function h(w){let o=1;do{o*=2}while(o<w);return o===w}function E(w,o,H){return w*(1-H)+o*H}function e(w){const o=D(w),H=t(w);return o-w>w-H?H:o}function D(w){return w--,w|=w>>1,w|=w>>2,w|=w>>4,w|=w>>8,w|=w>>16,++w}function t(w){return w|=w>>1,w|=w>>2,w|=w>>4,w|=w>>8,(w|=w>>16)-(w>>1)}function X(w,o){let H;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:H=t(w);break;case 2:H=e(w);break;default:H=D(w)}return Math.min(H,o)}H.d(o,{d:()=>t,e:()=>X,i:()=>h,m:()=>E,o:()=>e})},11531:(w,o,H)=>{H.r(o),H.d(o,{AsyncLoop:()=>V,Tools:()=>i,className:()=>s});var h=H(11540),E=H(11545),e=H(11551),D=H(11556),t=H(11560),X=H(11564),L=H(11566),A=H(11571),y=H(11573),z=H(11606),C=H(11661),Q=H(11675),M=H(11683);class i{static get BaseUrl(){return y.g.BaseUrl}static set BaseUrl(w){y.g.BaseUrl=w}static get CleanUrl(){return y.g.CleanUrl}static set CleanUrl(w){y.g.CleanUrl=w}static IsAbsoluteUrl(w){return 0===w.indexOf("//")||-1!==w.indexOf("://")&&(-1!==w.indexOf(".")&&(-1!==w.indexOf("/")&&(!(w.indexOf(":")>w.indexOf("/"))&&(w.indexOf("://")<w.indexOf(".")||(0===w.indexOf("data:")||0===w.indexOf("blob:"))))))}static set ScriptBaseUrl(w){y.g.ScriptBaseUrl=w}static get ScriptBaseUrl(){return y.g.ScriptBaseUrl}static set CDNBaseUrl(w){i.ScriptBaseUrl=w,i.AssetBaseUrl=w}static set ScriptPreprocessUrl(w){y.g.ScriptPreprocessUrl=w}static get ScriptPreprocessUrl(){return y.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return y.g.DefaultRetryStrategy}static set DefaultRetryStrategy(w){y.g.DefaultRetryStrategy=w}static get CorsBehavior(){return y.g.CorsBehavior}static set CorsBehavior(w){y.g.CorsBehavior=w}static get UseFallbackTexture(){return A.e.UseFallbackTexture}static set UseFallbackTexture(w){A.e.UseFallbackTexture=w}static get RegisteredExternalClasses(){return C.c.RegisteredExternalClasses}static set RegisteredExternalClasses(w){C.c.RegisteredExternalClasses=w}static get fallbackTexture(){return A.e.FallbackTexture}static set fallbackTexture(w){A.e.FallbackTexture=w}static FetchToRef(w,o,H,h,E,e){const D=4*((Math.abs(w)*H%H|0)+(Math.abs(o)*h%h|0)*H);e.r=E[D]/255,e.g=E[D+1]/255,e.b=E[D+2]/255,e.a=E[D+3]/255}static Mix(w,o,H){return 0}static Instantiate(w){return C.c.Instantiate(w)}static SetImmediate(w){z.d.SetImmediate(w)}static IsExponentOfTwo(w){return!0}static FloatRound(w){return Math.fround(w)}static GetFilename(w){const o=w.lastIndexOf("/");return o<0?w:w.substring(o+1)}static GetFolderPath(w){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const H=w.lastIndexOf("/");return H<0?o?w:"":w.substring(0,H+1)}static ToDegrees(w){return 180*w/Math.PI}static ToRadians(w){return w*Math.PI/180}static SmoothAngleChange(w,o){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const h=this.ToRadians(w),E=this.ToRadians(o);return this.ToDegrees(Math.atan2((1-H)*Math.sin(E)+H*Math.sin(h),(1-H)*Math.cos(E)+H*Math.cos(h)))}static MakeArray(w,o){return!0===o||void 0!==w&&null!=w?Array.isArray(w)?w:[w]:null}static GetPointerPrefix(w){return(0,E.i)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(w,o){(0,y.x)(w,o)}static SetReferrerPolicyBehavior(w,o){o.referrerPolicy=w}static get PreprocessUrl(){return y.g.PreprocessUrl}static set PreprocessUrl(w){y.g.PreprocessUrl=w}static LoadImage(w,o,H,h,E,e){return(0,y.q)(w,o,H,h,E,e)}static LoadFile(w,o,H,h,E,e){return(0,y.p)(w,o,H,h,E,e)}static async LoadFileAsync(w){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((H,h)=>{(0,y.p)(w,(w=>{H(w)}),void 0,void 0,o,((w,o)=>{h(o)}))}))}static GetAssetUrl(w){if(!w)return"";if(i.AssetBaseUrl&&w.startsWith(i._DefaultAssetsUrl)){const o="/"===i.AssetBaseUrl[i.AssetBaseUrl.length-1]?i.AssetBaseUrl.substring(0,i.AssetBaseUrl.length-1):i.AssetBaseUrl;return w.replace(i._DefaultAssetsUrl,o)}return w}static GetBabylonScriptURL(w,o){if(!w)return"";if(i.ScriptBaseUrl&&w.startsWith(i._DefaultCdnUrl)){const o="/"===i.ScriptBaseUrl[i.ScriptBaseUrl.length-1]?i.ScriptBaseUrl.substring(0,i.ScriptBaseUrl.length-1):i.ScriptBaseUrl;w=w.replace(i._DefaultCdnUrl,o)}return w=i.ScriptPreprocessUrl(w),o&&(w=i.GetAbsoluteUrl(w)),w}static LoadBabylonScript(w,o,H,h){w=i.GetBabylonScriptURL(w),i.LoadScript(w,o,H)}static async LoadBabylonScriptAsync(w){return w=i.GetBabylonScriptURL(w),await i.LoadScriptAsync(w)}static LoadScript(w,o,H,h){let e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(w),o&&o()}catch(X){null===H||void 0===H||H(`Unable to load script '${w}' in worker`,X)}return}if(!(0,E.i)())return void(null===H||void 0===H||H(`Cannot load script '${w}' outside of a window or a worker`));const D=document.getElementsByTagName("head")[0],t=document.createElement("script");e?(t.setAttribute("type","module"),t.innerText=w):(t.setAttribute("type","text/javascript"),t.setAttribute("src",w)),h&&(t.id=h),t.onload=()=>{o&&o()},t.onerror=o=>{H&&H(`Unable to load script '${w}'`,o)},D.appendChild(t)}static async LoadScriptAsync(w,o){return await new Promise(((H,h)=>{this.LoadScript(w,(()=>{H()}),((w,o)=>{h(o||new Error(w))}),o)}))}static ReadFileAsDataURL(w,o,H){const E=new FileReader,e={onCompleteObservable:new h.b,abort:()=>E.abort()};return E.onloadend=()=>{e.onCompleteObservable.notifyObservers(e)},E.onload=w=>{o(w.target.result)},E.onprogress=H,E.readAsDataURL(w),e}static ReadFile(w,o,H,h,E){return(0,y.r)(w,o,H,h,E)}static FileAsURL(w){const o=new Blob([w]);return window.URL.createObjectURL(o)}static Format(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return w.toFixed(o)}static DeepCopy(w,o,H,h){D.d.DeepCopy(w,o,H,h)}static IsEmpty(w){for(const o in w)if(Object.prototype.hasOwnProperty.call(w,o))return!1;return!0}static RegisterTopRootEvents(w,o){for(let h=0;h<o.length;h++){const E=o[h];w.addEventListener(E.name,E.handler,!1);try{window.parent&&window.parent.addEventListener(E.name,E.handler,!1)}catch(H){}}}static UnregisterTopRootEvents(w,o){for(let h=0;h<o.length;h++){const E=o[h];w.removeEventListener(E.name,E.handler);try{w.parent&&w.parent.removeEventListener(E.name,E.handler)}catch(H){}}}static async DumpFramebuffer(w,o,H,h){throw(0,X.b)("DumpTools")}static DumpData(w,o,H,h){throw(0,X.b)("DumpTools")}static async DumpDataAsync(w,o,H){throw(0,X.b)("DumpTools")}static _IsOffScreenCanvas(w){return void 0!==w.convertToBlob}static ToBlob(w,o){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",h=arguments.length>3?arguments[3]:void 0;i._IsOffScreenCanvas(w)||w.toBlob||(w.toBlob=function(w,o,H){setTimeout((()=>{const h=atob(this.toDataURL(o,H).split(",")[1]),E=h.length,e=new Uint8Array(E);for(let w=0;w<E;w++)e[w]=h.charCodeAt(w);w(new Blob([e]))}))}),i._IsOffScreenCanvas(w)?w.convertToBlob({type:H,quality:h}).then((w=>o(w))):w.toBlob((function(w){o(w)}),H,h)}static DownloadBlob(w,o){if("download"in document.createElement("a")){if(!o){const w=new Date;o="screenshot_"+((w.getFullYear()+"-"+(w.getMonth()+1)).slice(2)+"-"+w.getDate()+"_"+w.getHours()+"-"+("0"+w.getMinutes()).slice(-2))+".png"}i.Download(w,o)}else if(w&&"undefined"!==typeof URL){const o=URL.createObjectURL(w),H=window.open("");if(!H)return;const h=H.document.createElement("img");h.onload=function(){URL.revokeObjectURL(o)},h.src=o,H.document.body.appendChild(h)}}static EncodeScreenshotCanvasData(w,o){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",h=arguments.length>3?arguments[3]:void 0,E=arguments.length>4?arguments[4]:void 0;if("string"!==typeof h&&o){if(o){if(i._IsOffScreenCanvas(w))return void w.convertToBlob({type:H,quality:E}).then((w=>{const H=new FileReader;H.readAsDataURL(w),H.onloadend=()=>{const w=H.result;o(w)}}));const h=w.toDataURL(H,E);o(h)}}else this.ToBlob(w,(function(w){w&&i.DownloadBlob(w,h),o&&o("")}),H,E)}static Download(w,o){if("undefined"===typeof URL)return;const H=window.URL.createObjectURL(w),h=document.createElement("a");document.body.appendChild(h),h.style.display="none",h.href=H,h.download=o,h.addEventListener("click",(()=>{h.parentElement&&h.parentElement.removeChild(h)})),h.click(),window.URL.revokeObjectURL(H)}static BackCompatCameraNoPreventDefault(w){return"boolean"===typeof w[0]?w[0]:"boolean"===typeof w[1]&&w[1]}static CreateScreenshot(w,o,H,h){throw(0,X.b)("ScreenshotTools")}static async CreateScreenshotAsync(w,o,H){throw(0,X.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(w,o,H,h){throw(0,X.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(w,o,H){throw(0,X.b)("ScreenshotTools")}static RandomId(){return(0,Q.e)()}static IsBase64(w){return(0,y.m)(w)}static DecodeBase64(w){return(0,y.d)(w)}static get errorsCount(){return e.d.errorsCount}static Log(w){e.d.Log(w)}static Warn(w){e.d.Warn(w)}static Error(w){e.d.Error(w)}static get LogCache(){return e.d.LogCache}static ClearLogCache(){e.d.ClearLogCache()}static set LogLevels(w){e.d.LogLevels=w}static set PerformanceLogLevel(w){return(w&i.PerformanceUserMarkLogLevel)===i.PerformanceUserMarkLogLevel?(i.StartPerformanceCounter=i._StartUserMark,void(i.EndPerformanceCounter=i._EndUserMark)):(w&i.PerformanceConsoleLogLevel)===i.PerformanceConsoleLogLevel?(i.StartPerformanceCounter=i._StartPerformanceConsole,void(i.EndPerformanceCounter=i._EndPerformanceConsole)):(i.StartPerformanceCounter=i._StartPerformanceCounterDisabled,void(i.EndPerformanceCounter=i._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(w,o){}static _EndPerformanceCounterDisabled(w,o){}static _StartUserMark(w){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!i._Performance){if(!(0,E.i)())return;i._Performance=window.performance}o&&i._Performance.mark&&i._Performance.mark(w+"-Begin")}static _EndUserMark(w){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&i._Performance.mark&&(i._Performance.mark(w+"-End"),i._Performance.measure(w,w+"-Begin",w+"-End"))}static _StartPerformanceConsole(w){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o&&(i._StartUserMark(w,o),console.time&&console.time(w))}static _EndPerformanceConsole(w){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o&&(i._EndUserMark(w,o),console.timeEnd(w))}static get Now(){return t.c.Now}static GetClassName(w){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],H=null;if(!o&&w.getClassName)H=w.getClassName();else{if(w instanceof Object){H=(o?w:Object.getPrototypeOf(w)).constructor.__bjsclassName__}H||(H=typeof w)}return H}static First(w,o){for(const H of w)if(o(H))return H;return null}static getFullClassName(w){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],H=null,h=null;if(!o&&w.getClassName)H=w.getClassName();else{if(w instanceof Object){const E=o?w:Object.getPrototypeOf(w);H=E.constructor.__bjsclassName__,h=E.constructor.__bjsmoduleName__}H||(H=typeof w)}return H?(null!=h?h+".":"")+H:null}static async DelayAsync(w){await new Promise((o=>{setTimeout((()=>{o()}),w)}))}static IsSafari(){return!!(0,E.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function s(w,o){return H=>{H.__bjsclassName__=w,H.__bjsmoduleName__=null!=o?o:null}}i.AssetBaseUrl="",i.UseCustomRequestHeaders=!1,i.CustomRequestHeaders=L.b.CustomRequestHeaders,i.GetDOMTextContent=E.c,i._DefaultCdnUrl="https://cdn.babylonjs.com",i._DefaultAssetsUrl="https://assets.babylonjs.com/core",i.GetAbsoluteUrl="object"===typeof document?w=>{const o=document.createElement("a");return o.href=w,o.href}:"function"===typeof URL&&"object"===typeof location?w=>new URL(w,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},i.NoneLogLevel=e.d.NoneLogLevel,i.MessageLogLevel=e.d.MessageLogLevel,i.WarningLogLevel=e.d.WarningLogLevel,i.ErrorLogLevel=e.d.ErrorLogLevel,i.AllLogLevel=e.d.AllLogLevel,i.IsWindowObjectExist=E.i,i.PerformanceNoneLogLevel=0,i.PerformanceUserMarkLogLevel=1,i.PerformanceConsoleLogLevel=2,i.StartPerformanceCounter=i._StartPerformanceCounterDisabled,i.EndPerformanceCounter=i._EndPerformanceCounterDisabled;class V{constructor(w,o,H){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=w,this.index=h-1,this._done=!1,this._fn=o,this._successCallback=H}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(w,o,H){const h=new V(w,o,H,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return h.executeNext(),h}static SyncAsyncForLoop(w,o,H,h,E){let e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return V.Run(Math.ceil(w/o),(h=>{E&&E()?h.breakLoop():setTimeout((()=>{for(let e=0;e<o;++e){const D=h.index*o+e;if(D>=w)break;if(H(D),E&&E()){h.breakLoop();break}}h.executeNext()}),e)}),h)}}i.Mix=M.m,i.IsExponentOfTwo=M.i,A.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11666:(w,o,H)=>{H.d(o,{e:()=>e,g:()=>E});const h={};function E(w,o){h[w]=o}function e(w){return h[w]}},11566:(w,o,H)=>{H.d(o,{b:()=>h});class h{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(h.CustomRequestHeaders).length>0||h.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const w in h.CustomRequestHeaders){const o=h.CustomRequestHeaders[w];o&&this._xhr.setRequestHeader(w,o)}}_shouldSkipRequestModifications(w){return h.SkipRequestModificationForBabylonCDN&&(w.includes("preview.babylonjs.com")||w.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(w){this._xhr.onprogress=w}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(w){this._xhr.responseType=w}get timeout(){return this._xhr.timeout}set timeout(w){this._xhr.timeout=w}addEventListener(w,o,H){this._xhr.addEventListener(w,o,H)}removeEventListener(w,o,H){this._xhr.removeEventListener(w,o,H)}abort(){this._xhr.abort()}send(w){h.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(w)}open(w,o){for(const H of h.CustomRequestModifiers){if(this._shouldSkipRequestModifications(o))return;o=H(this._xhr,o)||o}o=(o=o.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=o,this._xhr.open(w,o,!0)}setRequestHeader(w,o){this._xhr.setRequestHeader(w,o)}getResponseHeader(w){return this._xhr.getResponseHeader(w)}}h.CustomRequestHeaders={},h.CustomRequestModifiers=new Array,h.SkipRequestModificationForBabylonCDN=!0}}]);