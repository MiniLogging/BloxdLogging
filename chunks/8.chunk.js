"use strict";(self.isj1uwvwrek=self.isj1uwvwrek||[]).push([[8],{12872:(I,x,L)=>{L.d(x,{d:()=>q});var F=L(12840),X=L(12809),G=L(12878),Y=L(12901),p=L(12823);class B{constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,I&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(I){this._zOffset!==I&&(this._zOffset=I,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(I){this._zOffsetUnits!==I&&(this._zOffsetUnits=I,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(I){this._cullFace!==I&&(this._cullFace=I,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(I){this._cull!==I&&(this._cull=I,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(I){this._depthFunc!==I&&(this._depthFunc=I,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(I){this._depthMask!==I&&(this._depthMask=I,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(I){this._depthTest!==I&&(this._depthTest=I,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(I){this._frontFace!==I&&(this._frontFace=I,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(I){this.isDirty&&(this._isCullDirty&&(this.cull?I.enable(I.CULL_FACE):I.disable(I.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(I.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(I.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?I.enable(I.DEPTH_TEST):I.disable(I.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(I.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(I.enable(I.POLYGON_OFFSET_FILL),I.polygonOffset(this.zOffset,this.zOffsetUnits)):I.disable(I.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(I.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class l{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(I){this._func!==I&&(this._func=I,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(I){this._funcRef!==I&&(this._funcRef=I,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(I){this._funcMask!==I&&(this._funcMask=I,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(I){this._opStencilFail!==I&&(this._opStencilFail=I,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(I){this._opDepthFail!==I&&(this._opDepthFail=I,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(I){this._opStencilDepthPass!==I&&(this._opStencilDepthPass=I,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(I){this._mask!==I&&(this._mask=I,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(I){this._enabled!==I&&(this._enabled=I,this._isStencilTestDirty=!0)}constructor(){let I=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,I&&this.reset()}reset(){var I;this.stencilMaterial=void 0,null===(I=this.stencilGlobal)||void 0===I||I.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(I){var x;if(!I)return;const L=!this.useStencilGlobalOnly&&!(null===(x=this.stencilMaterial)||void 0===x||!x.enabled);this.enabled=L?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=L?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=L?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=L?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=L?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=L?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=L?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=L?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?I.enable(I.STENCIL_TEST):I.disable(I.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(I.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(I.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(I.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class W{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=W.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=W.KEEP,this.opDepthFail=W.KEEP,this.opStencilDepthPass=W.REPLACE}get stencilFunc(){return this.func}set stencilFunc(I){this.func=I}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(I){this.funcRef=I}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(I){this.funcMask=I}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(I){this.opStencilFail=I}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(I){this.opDepthFail=I}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(I){this.opStencilDepthPass=I}get stencilMask(){return this.mask}set stencilMask(I){this.mask=I}get stencilTest(){return this.enabled}set stencilTest(I){this.enabled=I}}W.ALWAYS=519,W.KEEP=7680,W.REPLACE=7681;class Q{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(I){this._alphaBlend!==I&&(this._alphaBlend=I,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(I,x,L,F){this._blendConstants[0]===I&&this._blendConstants[1]===x&&this._blendConstants[2]===L&&this._blendConstants[3]===F||(this._blendConstants[0]=I,this._blendConstants[1]=x,this._blendConstants[2]=L,this._blendConstants[3]=F,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(I,x,L,F){this._blendFunctionParameters[0]===I&&this._blendFunctionParameters[1]===x&&this._blendFunctionParameters[2]===L&&this._blendFunctionParameters[3]===F||(this._blendFunctionParameters[0]=I,this._blendFunctionParameters[1]=x,this._blendFunctionParameters[2]=L,this._blendFunctionParameters[3]=F,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(I,x){this._blendEquationParameters[0]===I&&this._blendEquationParameters[1]===x||(this._blendEquationParameters[0]=I,this._blendEquationParameters[1]=x,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(I){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?I.enable(I.BLEND):I.disable(I.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(I.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(I.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(I.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var e=L(12825),g=L(12909),v=L(12805),z=L(12797),H=L(12858),s=L(12924);function U(I,x){if((0,v.l)()){const{requestAnimationFrame:L}=x||window;if("function"===typeof L)return L(I)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(I);return setTimeout(I,16)}class q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(I){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get dp(){return this._useReverseDepthBuffer}set dp(I){I!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=I,this._depthCullingState.depthFunc=I?518:515)}setColorWrite(I){I!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=I)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(I){if(I)return this.isNDCHalfZRange?I.IS_NDC_HALF_ZRANGE="":delete I.IS_NDC_HALF_ZRANGE,this.dp?I.USE_REVERSE_DEPTHBUFFER="":delete I.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?I.USE_EXACT_SRGB_CONVERSIONS="":delete I.USE_EXACT_SRGB_CONVERSIONS);{let I="";return this.isNDCHalfZRange&&(I+="#define IS_NDC_HALF_ZRANGE"),this.dp&&(I&&(I+="\n"),I+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(I&&(I+="\n"),I+="#define USE_EXACT_SRGB_CONVERSIONS"),I}}_rebuildInternalTextures(){const I=this._internalTexturesCache.slice();for(const x of I)x._rebuild()}_rebuildRenderTargetWrappers(){const I=this._renderTargetWrapperCache.slice();for(const x of I)x._rebuild()}_rebuildEffects(){for(const I in this._compiledEffects){const x=this._compiledEffects[I];x._pipelineContext=null,x._prepareEffect()}G.Effect.ResetCache()}_rebuildGraphicsResources(){var I;this.wipeCaches(!0),this._rebuildEffects(),null===(I=this._rebuildComputeEffects)||void 0===I||I.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){X.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(I){setTimeout((()=>{this._clearEmptyResources();const x=this._depthCullingState.depthTest,L=this._depthCullingState.depthFunc,F=this._depthCullingState.depthMask,X=this._stencilState.stencilTest;I(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=x,this._depthCullingState.depthFunc=L,this._depthCullingState.depthMask=F,this._stencilState.stencilTest=X,this._flagContextRestored()}),0)}get p(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(I){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(I){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const I=new Uint8Array(4),x=[I,I,I,I,I,I];this._emptyCubeTexture=this.createRawCubeTexture(x,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(I){if(!I)return this._activeRenderLoops.length=0,void this._cancelFrame();const x=this._activeRenderLoops.indexOf(I);x>=0&&(this._activeRenderLoops.splice(x,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const I=this._frameHandler;if(this._frameHandler=0,(0,v.l)()){const{cancelAnimationFrame:x}=this.getHostWindow()||window;if("function"===typeof x)return x(I)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(I);return clearTimeout(I)}}Np(){this.onBeginFrameObservable.notifyObservers(this)}Sp(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(I){this._maxFPS=I,void 0!==I&&(this._minFrameTime=I<=0?Number.MAX_VALUE:1e3/I)}_isOverFrameTime(I){if(!I||void 0===this._maxFPS)return!1;const x=I-this._lastFrameTime;return this._lastFrameTime=I,this._renderAccumulator+=x,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(I){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(I)){let I=!0;(this.p||!this.renderEvenInBackground&&this._windowIsBackground)&&(I=!1),I&&(this.Np(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Sp())}}_renderLoop(I){this._processFrame(I),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let I=0;I<this._activeRenderLoops.length;I++){(0,this._activeRenderLoops[I])()}}_renderViews(){return!1}_queueNewFrame(I,x){return U(I,x)}runRenderLoop(I){-1===this._activeRenderLoops.indexOf(I)&&(this._activeRenderLoops.push(I),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(I){this._depthCullingState.depthTest=I}setZOffset(I){this._depthCullingState.zOffset=this.dp?-I:I}getZOffset(){const I=this._depthCullingState.zOffset;return this.dp?-I:I}setZOffsetUnits(I){this._depthCullingState.zOffsetUnits=this.dp?-I:I}getZOffsetUnits(){const I=this._depthCullingState.zOffsetUnits;return this.dp?-I:I}getHostWindow(){return(0,v.l)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(I){this._compatibilityMode=!0}_rebuildTextures(){for(const I of this.scenes)I._rebuildTextures();for(const I of this._virtualScenes)I._rebuildTextures()}_releaseRenderTargetWrapper(I){const x=this._renderTargetWrapperCache.indexOf(I);-1!==x&&this._renderTargetWrapperCache.splice(x,1)}get currentViewport(){return this._cachedViewport}setViewport(I,x,L){const F=x||this.getRenderWidth(),X=L||this.getRenderHeight(),G=I.x||0,Y=I.y||0;this._cachedViewport=I,this._viewport(G*F,Y*X,F*I.width,X*I.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(I){return new Path2D(I)}get description(){let I=this.name+this.version;return this._caps.parallelShaderCompile&&(I+=" - Parallel shader compilation"),I}_createTextureBase(I,x,L,G){let Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7?arguments[7]:void 0,W=arguments.length>8?arguments[8]:void 0,Q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,e=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,z=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,H=arguments.length>13?arguments[13]:void 0,U=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0;const T="data:"===(I=I||"").substring(0,5),Z="blob:"===I.substring(0,5),t=T&&-1!==I.indexOf(";base64,"),f=e||new g.d(this,1);f!==e&&(f.label=I.substring(0,60));const R=I;!this._transformTextureUrl||t||e||Q||(I=this._transformTextureUrl(I)),R!==I&&(f._originalUrl=R);const n=I.lastIndexOf(".");let P=z||(n>-1?I.substring(n).toLowerCase():"");P.indexOf("?")>-1&&(P=P.split("?")[0]);const d=(0,s.d)(P,H);G&&G.addPendingData(f),f.url=I,f.generateMipMaps=!x,f.samplingMode=Y,f.invertY=L,f._useSRGBBuffer=this._getUseSRGBBuffer(!!y,x),this._doNotHandleContextLost||(f._buffer=Q);let M=null;p&&!e&&(M=f.onLoadedObservable.add(p)),e||this._internalTexturesCache.push(f);const K=(L,e)=>{G&&G.removePendingData(f),I===R?(M&&f.onLoadedObservable.remove(M),F.e.UseFallbackTexture&&I!==F.e.FallbackTexture&&this._createTextureBase(F.e.FallbackTexture,x,f.invertY,G,Y,null,B,l,W,Q,f),L=(L||"Unknown error")+(F.e.UseFallbackTexture?" - Fallback texture was used":""),f.onErrorObservable.notifyObservers({message:L,exception:e}),B&&B(L,e)):(X.c.Warn(`Failed to load ${I}, falling back to ${R}`),this._createTextureBase(R,x,f.invertY,G,Y,p,B,l,W,Q,f,v,z,H,U,y))};if(d){const x=async I=>{(await d).loadData(I,f,((I,x,L,F,X,p)=>{p?K("TextureLoader failed to load data"):l(f,P,G,{width:I,height:x},f.invertY,!L,F,(()=>(X(),!1)),Y)}),U)};Q?Q instanceof ArrayBuffer?x(new Uint8Array(Q)):ArrayBuffer.isView(Q)?x(Q):B&&B("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(I,(I=>{x(new Uint8Array(I))}),void 0,G?G.offlineProvider:void 0,!0,((I,x)=>{K("Unable to load "+(I&&I.responseURL,x))}))}else{const L=I=>{Z&&!this._doNotHandleContextLost&&(f._buffer=I),l(f,P,G,I,f.invertY,x,!1,W,Y)};!T||t?Q&&("string"===typeof Q.decoding||Q.close)?L(Q):q._FileToolsLoadImage(I||"",L,K,G?G.offlineProvider:null,H,f.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof Q||Q instanceof ArrayBuffer||ArrayBuffer.isView(Q)||Q instanceof Blob?q._FileToolsLoadImage(Q,L,K,G?G.offlineProvider:null,H,f.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):Q&&L(Q)}return f}_rebuildBuffers(){for(const I of this._uniformBuffers)I._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,v.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const I in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,I)&&(this._boundTexturesCache[I]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(I){this._name=I}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(I){this._hardwareScalingLevel=I,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(I){this._doNotHandleContextLost=I}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(I,x,L){var X,G;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new B,this._stencilStateComposer=new l,this._stencilState=new W,this._alphaState=new Q,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new z.c,this.onCanvasFocusObservable=new z.c,this.onNewSceneAddedObservable=new z.c,this.onResizeObservable=new z.c,this.onCanvasPointerOutObservable=new z.c,this.onEffectErrorObservable=new z.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new z.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=I=>this._renderLoop(I),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new z.c,this.onAfterShaderCompilationObservable=new z.c,this.onBeginFrameObservable=new z.c,this.onEndFrameObservable=new z.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new z.c,this.onContextRestoredObservable=new z.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.cp=new z.c,this.onReleaseEffectsObservable=new z.c,F.e.Instances.push(this),this.startTime=p.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Y.d.SetMatrixPrecision(!!x.useHighPrecisionMatrix),(0,v.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=L??!1,x.antialias=I??x.antialias,x.deterministicLockstep=x.deterministicLockstep??!1,x.lockstepMaxSteps=x.lockstepMaxSteps??4,x.timeStep=x.timeStep??1/60,x.op=x.op??!0,this._audioContext=(null===(X=x.audioEngineOptions)||void 0===X?void 0:X.audioContext)??null,this._audioDestination=(null===(G=x.audioEngineOptions)||void 0===G?void 0:G.audioDestination)??null,this.premultipliedAlpha=x.premultipliedAlpha??!0,this._doNotHandleContextLost=!!x.doNotHandleContextLost,this._isStencilEnable=!!x.op,this.useExactSrgbConversions=x.useExactSrgbConversions??!1;const e=(0,v.l)()&&window.devicePixelRatio||1,g=x.limitDeviceRatio||e;L=L||x.adaptToDeviceRatio||!1,this._hardwareScalingLevel=L?1/Math.min(g,e):1,this._lastDevicePixelRatio=e,this._creationOptions=x}resize(){let I,x,L=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const I=(0,v.l)()&&window.devicePixelRatio||1,x=this._lastDevicePixelRatio/I;this._lastDevicePixelRatio=I,this._hardwareScalingLevel*=x}if((0,v.l)()&&(0,v.h)())if(this._renderingCanvas){var F,X;const L=null===(F=(X=this._renderingCanvas).getBoundingClientRect)||void 0===F?void 0:F.call(X);I=this._renderingCanvas.clientWidth||(null===L||void 0===L?void 0:L.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,x=this._renderingCanvas.clientHeight||(null===L||void 0===L?void 0:L.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else I=window.innerWidth,x=window.innerHeight;else I=this._renderingCanvas?this._renderingCanvas.width:100,x=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(I/this._hardwareScalingLevel,x/this._hardwareScalingLevel,L)}setSize(I,x){let L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(I|=0,x|=0,!L&&this._renderingCanvas.width===I&&this._renderingCanvas.height===x)return!1;if(this._renderingCanvas.width=I,this._renderingCanvas.height=x,this.scenes){for(let I=0;I<this.scenes.length;I++){const x=this.scenes[I];for(let I=0;I<x.cameras.length;I++){x.cameras[I]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(I,x,L,F,X,G,Y,p,B,l,W){throw(0,e.e)("engine.rawTexture")}createRawCubeTexture(I,x,L,F,X,G,Y,p){throw(0,e.e)("engine.rawTexture")}createRawTexture3D(I,x,L,F,X,G,Y,p,B,l,W){throw(0,e.e)("engine.rawTexture")}createRawTexture2DArray(I,x,L,F,X,G,Y,p,B,l,W){throw(0,e.e)("engine.rawTexture")}_sharedInit(I){this._renderingCanvas=I}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const I=navigator.userAgent;this.hostInformation.isMobile=-1!==I.indexOf("Mobile")||-1!==I.indexOf("Mac")&&(0,v.h)()&&"ontouchend"in document},this._checkForMobile(),(0,v.l)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(I){return document.createElement("video")}_reportDrawCall(){var I;let x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(I=this._drawCalls)||void 0===I||I.addCount(x,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(I,x){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(I,x){return createImageBitmap(I,x)}resizeImageBitmap(I,x,L){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(I){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(I,x){if("undefined"===typeof document)return new OffscreenCanvas(I,x);const L=document.createElement("canvas");return L.width=I,L.height=x,L}createCanvas(I,x){return q._CreateCanvas(I,x)}static _FileToolsLoadImage(I,x,L,F,X,G,Y){throw(0,e.e)("FileTools")}_loadFile(I,x,L,F,X,G){const Y=(0,H.i)(I,x,L,F,X,G);return this._activeRequests.push(Y),Y.onCompleteObservable.add((()=>{const I=this._activeRequests.indexOf(Y);-1!==I&&this._activeRequests.splice(I,1)})),Y}static _FileToolsLoadFile(I,x,L,F,X,G){if(H.c.loadFile)return H.c.loadFile(I,x,L,F,X,G);throw(0,e.e)("FileTools")}dispose(){var I;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(I=this.releaseComputeEffects)||void 0===I||I.call(this),G.Effect.ResetCache();for(const L of this._activeRequests)L.abort();this._boundRenderFunction=null,this.cp.notifyObservers(this),this.cp.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,v.l)()&&window.removeEventListener("resize",this._checkForMobile);const x=F.e.Instances.indexOf(this);x>=0&&F.e.Instances.splice(x,1),F.e.Instances.length||(F.e.OnEnginesDisposedObservable.notifyObservers(this),F.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(I){throw(0,e.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(I,x){for(let L=0;L<F.e.Instances.length;L++){const X=F.e.Instances[L];for(let L=0;L<X.scenes.length;L++)X.scenes[L].markAllMaterialsAsDirty(I,x)}}}q._RenderPassIdCounter=0,q._RescalePostProcessFactory=null,q.CollisionsEpsilon=.001,q.QueueNewFrame=U},12840:(I,x,L)=>{L.d(x,{e:()=>X});var F=L(12797);class X{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}X.Instances=[],X.OnEnginesDisposedObservable=new F.c,X._LastCreatedScene=null,X.UseFallbackTexture=!0,X.FallbackTexture=""},12901:(I,x,L)=>{L.d(x,{d:()=>F});class F{static SetMatrixPrecision(I){if(F.MatrixTrackPrecisionChange=!1,I&&!F.MatrixUse64Bits&&F.MatrixTrackedMatrices)for(let x=0;x<F.MatrixTrackedMatrices.length;++x){const I=F.MatrixTrackedMatrices[x],L=I.Jp;I.Jp=new Array(16);for(let x=0;x<16;++x)I.Jp[x]=L[x]}F.MatrixUse64Bits=I,F.MatrixCurrentType=F.MatrixUse64Bits?Array:Float32Array,F.MatrixTrackedMatrices=null}}F.MatrixUse64Bits=!1,F.MatrixTrackPrecisionChange=!0,F.MatrixCurrentType=Float32Array,F.MatrixTrackedMatrices=[]},12924:(I,x,L)=>{L.d(x,{d:()=>Y});var F=L(12809);const X=new Map;function G(I,x){(function(I){return X.delete(I)})(I)&&F.c.Warn(`Extension with the name '${I}' already exists`),X.set(I,x)}function Y(I,x){"image/ktx"!==x&&"image/ktx2"!==x||(I=".ktx"),X.has(I)||(I.endsWith(".ies")&&G(".ies",(async()=>await L.e(15).then(L.bind(L,15321)).then((I=>new I._IESTextureLoader)))),I.endsWith(".dds")&&G(".dds",(async()=>await Promise.all([L.e(14),L.e(17),L.e(13),L.e(19),L.e(18),L.e(28)]).then(L.bind(L,15324)).then((I=>new I._DDSTextureLoader)))),I.endsWith(".basis")&&G(".basis",(async()=>await Promise.all([L.e(14),L.e(17),L.e(13),L.e(47)]).then(L.bind(L,15330)).then((I=>new I._BasisTextureLoader)))),I.endsWith(".env")&&G(".env",(async()=>await Promise.all([L.e(14),L.e(17),L.e(13),L.e(19),L.e(18),L.e(23),L.e(21),L.e(45),L.e(48)]).then(L.bind(L,15332)).then((I=>new I._ENVTextureLoader)))),I.endsWith(".hdr")&&G(".hdr",(async()=>await Promise.all([L.e(14),L.e(49)]).then(L.bind(L,15339)).then((I=>new I._HDRTextureLoader)))),(I.endsWith(".ktx")||I.endsWith(".ktx2"))&&(G(".ktx",(async()=>await L.e(30).then(L.bind(L,15342)).then((I=>new I._KTXTextureLoader)))),G(".ktx2",(async()=>await L.e(30).then(L.bind(L,15342)).then((I=>new I._KTXTextureLoader))))),I.endsWith(".tga")&&G(".tga",(async()=>await L.e(50).then(L.bind(L,15351)).then((I=>new I._TGATextureLoader)))),I.endsWith(".exr")&&G(".exr",(async()=>await L.e(16).then(L.bind(L,15359)).then((I=>new I._ExrTextureLoader)))));const F=X.get(I);return F?Promise.resolve(F(x)):null}},12909:(I,x,L)=>{L.d(x,{d:()=>Y});var F,X=L(12797),G=L(12916);!function(I){I[I.Unknown=0]="Unknown",I[I.Url=1]="Url",I[I.Temp=2]="Temp",I[I.Raw=3]="Raw",I[I.Dynamic=4]="Dynamic",I[I.RenderTarget=5]="RenderTarget",I[I.MultiRenderTarget=6]="MultiRenderTarget",I[I.Cube=7]="Cube",I[I.CubeRaw=8]="CubeRaw",I[I.CubePrefiltered=9]="CubePrefiltered",I[I.Raw3D=10]="Raw3D",I[I.Raw2DArray=11]="Raw2DArray",I[I.DepthStencil=12]="DepthStencil",I[I.CubeRawRGBD=13]="CubeRawRGBD",I[I.Depth=14]="Depth"}(F||(F={}));class Y extends G.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(I){this.generateMipMaps=I}get uniqueId(){return this._uniqueId}_setUniqueId(I){this._uniqueId=I}getEngine(){return this._engine}get source(){return this._source}constructor(I,x){let L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new X.c,this.onErrorObservable=new X.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=I,this._source=x,this._uniqueId=Y._Counter++,L||(this._hardwareTexture=I._createHardwareTexture())}incrementReferences(){this._references++}updateSize(I,x){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,I,x,L),this.width=I,this.height=x,this.depth=L,this.baseWidth=I,this.baseHeight=x,this.baseDepth=L,this._size=I*x*L}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const I=this.onRebuildCallback(this),x=x=>{x._swapAndDie(this,!1),this.isReady=I.isReady};return void(I.isAsync?I.proxy.then(x):x(I.proxy))}let I;switch(this.source){case 2:case 12:case 14:break;case 1:return void(I=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(I=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:I=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),I._swapAndDie(this,!1),this.isReady=!0;break;case 10:I=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 11:I=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),I._swapAndDie(this,!1),this.isReady=!0;break;case 4:I=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),I._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(I=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:I=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),I._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return I=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(I=>{I&&I._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(I._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(I){var x;let L=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(x=this._hardwareTexture)||void 0===x||x.setUsage(I._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),I._hardwareTexture=this._hardwareTexture,L&&(I._isRGBD=this._isRGBD),this._lodTextureHigh&&(I._lodTextureHigh&&I._lodTextureHigh.dispose(),I._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(I._lodTextureMid&&I._lodTextureMid.dispose(),I._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(I._lodTextureLow&&I._lodTextureLow.dispose(),I._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(I._irradianceTexture&&I._irradianceTexture.dispose(),I._irradianceTexture=this._irradianceTexture);const F=this._engine.getLoadedTexturesCache();let X=F.indexOf(this);-1!==X&&F.splice(X,1),X=F.indexOf(I),-1===X&&F.push(I)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Y._Counter=0},12916:(I,x,L)=>{L.d(x,{c:()=>F});class F{get wrapU(){return this._cachedWrapU}set wrapU(I){this._cachedWrapU=I}get wrapV(){return this._cachedWrapV}set wrapV(I){this._cachedWrapV=I}get wrapR(){return this._cachedWrapR}set wrapR(I){this._cachedWrapR=I}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(I){this._cachedAnisotropicFilteringLevel=I}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(I){this._comparisonFunction=I}get useMipMaps(){return this._useMipMaps}set useMipMaps(I){this._useMipMaps=I}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=I,this._cachedWrapV=x,this._cachedWrapR=L,this._cachedAnisotropicFilteringLevel=F,this.samplingMode=X,this._comparisonFunction=G,this}compareSampler(I){return this._cachedWrapU===I._cachedWrapU&&this._cachedWrapV===I._cachedWrapV&&this._cachedWrapR===I._cachedWrapR&&this._cachedAnisotropicFilteringLevel===I._cachedAnisotropicFilteringLevel&&this.samplingMode===I.samplingMode&&this._comparisonFunction===I._comparisonFunction&&this._useMipMaps===I._useMipMaps}}},12818:(I,x,L)=>{L.d(x,{b:()=>G});var F=L(12809);const X=(I,x,L)=>I?I.getClassName&&"Mesh"===I.getClassName()?null:!I.getClassName||"SubMesh"!==I.getClassName()&&"PhysicsBody"!==I.getClassName()?I.clone?I.clone():Array.isArray(I)?I.slice():L&&"object"===typeof I?{...I}:null:I.clone(x):null;class G{static DeepCopy(I,x,L,G){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const p=function(I){const x=[];do{const L=Object.getOwnPropertyNames(I);for(const I of L)-1===x.indexOf(I)&&x.push(I)}while(I=Object.getPrototypeOf(I));return x}(I);for(const l of p){if("_"===l[0]&&(!G||-1===G.indexOf(l)))continue;if(l.endsWith("Observable"))continue;if(L&&-1!==L.indexOf(l))continue;const p=I[l],W=typeof p;if("function"!==W)try{if("object"===W)if(p instanceof Uint8Array)x[l]=Uint8Array.from(p);else if(p instanceof Array){if(x[l]=[],p.length>0)if("object"==typeof p[0])for(let I=0;I<p.length;I++){const L=X(p[I],x,Y);-1===x[l].indexOf(L)&&x[l].push(L)}else x[l]=p.slice(0)}else x[l]=X(p,x,Y);else x[l]=p}catch(B){F.c.Warn(B.message)}}}}},12847:(I,x,L)=>{L.d(x,{e:()=>F,f:()=>X,j:()=>G});class F extends Error{}F._setPrototypeOf=Object.setPrototypeOf||((I,x)=>(I.__proto__=x,I));const X={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class G extends F{constructor(I,x,L){super(I),this.errorCode=x,this.innerError=L,this.name="RuntimeError",F._setPrototypeOf(this,G.prototype)}}},12842:(I,x,L)=>{L.d(x,{c:()=>K,e:()=>q,i:()=>n,j:()=>d,n:()=>f,m:()=>H,p:()=>Z,t:()=>t,v:()=>R,y:()=>y});var F=L(12832),X=L(12805),G=L(12797);class Y{}Y.FilesToLoad={};var p=L(12847),B=L(12849),l=L(12855),W=L(12840),Q=L(12809),e=L(12865),g=L(12858),v=L(12872);const z=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class H extends p.j{constructor(I,x){super(I,p.f.LoadFileError),this.name="LoadFileError",p.e._setPrototypeOf(this,H.prototype),x instanceof F.d?this.request=x:this.file=x}}class s extends p.j{constructor(I,x){super(I,p.f.RequestFileError),this.request=x,this.name="RequestFileError",p.e._setPrototypeOf(this,s.prototype)}}class U extends p.j{constructor(I,x){super(I,p.f.ReadFileError),this.file=x,this.name="ReadFileError",p.e._setPrototypeOf(this,U.prototype)}}const q={DefaultRetryStrategy:class{static ExponentialBackoff(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(L,F,X)=>0!==F.status||X>=I||-1!==L.indexOf("file:")?-1:Math.pow(2,X)*x}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:I=>I,ScriptBaseUrl:"",ScriptPreprocessUrl:I=>I,CleanUrl:I=>I=I.replace(/#/gm,"%23")},y=(I,x)=>{if((!I||0!==I.indexOf("data:"))&&q.CorsBehavior)if("string"===typeof q.CorsBehavior||q.CorsBehavior instanceof String)x.crossOrigin=q.CorsBehavior;else{const L=q.CorsBehavior(I);L&&(x.crossOrigin=L)}},T={getRequiredSize:null},Z=function(I,x,L,X){let G,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5?arguments[5]:void 0,Q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===Q||void 0===Q||!Q._features.forceBitmapOverHTMLImageElement))return L("LoadImage is only supported in web or BabylonNative environments."),null;let e=!1;I instanceof ArrayBuffer||ArrayBuffer.isView(I)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(G=URL.createObjectURL(new Blob([I],{type:p})),e=!0):G=`data:${p};base64,`+(0,B.l)(I):I instanceof Blob?(G=URL.createObjectURL(I),e=!0):(G=q.CleanUrl(I),G=q.PreprocessUrl(G));const g=x=>{if(L){const F=G||I.toString();L(`Error while trying to load image: ${0===F.indexOf("http")||F.length<=128?F:F.slice(0,128)+"..."}`,x)}};if(null!==Q&&void 0!==Q&&Q._features.forceBitmapOverHTMLImageElement)return f(G,(F=>{Q.createImageBitmap(new Blob([F],{type:p}),{premultiplyAlpha:"none",...l}).then((I=>{x(I),e&&URL.revokeObjectURL(G)})).catch((x=>{L&&L("Error while trying to load image: "+I,x)}))}),void 0,X||void 0,!0,((I,x)=>{g(x)})),null;const v=new Image;if(T.getRequiredSize){const x=T.getRequiredSize(I);x.width&&(v.width=x.width),x.height&&(v.height=x.height)}y(G,v);const z=[],H=()=>{for(const I of z)I.target.removeEventListener(I.name,I.handler);z.length=0};z.push({target:v,name:"load",handler:()=>{H(),x(v),e&&v.src&&URL.revokeObjectURL(v.src)}}),z.push({target:v,name:"error",handler:I=>{H(),g(I),e&&v.src&&URL.revokeObjectURL(v.src)}}),z.push({target:document,name:"securitypolicyviolation",handler:I=>{if(I.blockedURI!==v.src||"hp"===I.disposition)return;H();const x=new Error(`CSP violation of policy ${I.effectiveDirective} ${I.blockedURI}. Current policy is ${I.originalPolicy}`);W.e.UseFallbackTexture=!1,g(x),e&&v.src&&URL.revokeObjectURL(v.src),v.src=""}}),(()=>{for(const I of z)I.target.addEventListener(I.name,I.handler)})();const s="blob:"===G.substring(0,5),U="data:"===G.substring(0,5),Z=()=>{s||U||!F.d.IsCustomRequestAvailable?v.src=G:f(G,((I,x,L)=>{const F=new Blob([I],{type:!p&&L?L:p}),X=URL.createObjectURL(F);e=!0,v.src=X}),void 0,X||void 0,!0,((I,x)=>{g(x)}))},t=()=>{X&&X.loadImage(G,v)};if(!s&&!U&&X&&X.enableTexturesOffline)X.open(t,Z);else{if(-1!==G.indexOf("file:")){const I=decodeURIComponent(G.substring(5).toLowerCase());if(Y.FilesToLoad[I]&&"undefined"!==typeof URL){try{let x;try{x=URL.createObjectURL(Y.FilesToLoad[I])}catch(R){x=URL.createObjectURL(Y.FilesToLoad[I])}v.src=x,e=!0}catch(n){v.src=""}return v}}Z()}return v},t=(I,x,L,F,X)=>{const Y=new FileReader,p={onCompleteObservable:new G.c,abort:()=>Y.abort()};return Y.onloadend=()=>p.onCompleteObservable.notifyObservers(p),X&&(Y.onerror=()=>{X(new U(`Unable to read ${I.name}`,I))}),Y.onload=I=>{x(I.target.result)},L&&(Y.onprogress=L),F?Y.readAsArrayBuffer(I):Y.readAsText(I),p},f=(I,x,L,F,X,B,l)=>{if(I.name)return t(I,x,L,X,B?I=>{B(void 0,I)}:void 0);const W=I;if(-1!==W.indexOf("file:")){let I=decodeURIComponent(W.substring(5).toLowerCase());0===I.indexOf("./")&&(I=I.substring(2));const F=Y.FilesToLoad[I];if(F)return t(F,x,L,X,B?I=>B(void 0,new H(I.message,I.file)):void 0)}const{match:g,type:v}=M(W);if(g){const I={onCompleteObservable:new G.c,abort:()=>()=>{}};try{const I=X?K(W):u(W);x(I,void 0,v)}catch(p){B?B(void 0,p):Q.c.Error(p.message||"Failed to parse the Data URL")}return e.c.SetImmediate((()=>{I.onCompleteObservable.notifyObservers(I)})),I}return R(W,((I,L)=>{x(I,null===L||void 0===L?void 0:L.responseURL,null===L||void 0===L?void 0:L.getResponseHeader("content-type"))}),L,F,X,B?I=>{B(I.request,new H(I.message,I.request))}:void 0,l)},R=(I,x,L,Y,p,B,l)=>{I=q.CleanUrl(I),I=q.PreprocessUrl(I);const W=q.BaseUrl+I;let e=!1;const g={onCompleteObservable:new G.c,abort:()=>e=!0},v=()=>{let I,G=new F.d,Y=null;const v=()=>{G&&(L&&G.removeEventListener("progress",L),I&&G.removeEventListener("readystatechange",I),G.removeEventListener("loadend",z))};let z=()=>{v(),g.onCompleteObservable.notifyObservers(g),g.onCompleteObservable.clear(),L=void 0,I=null,z=null,B=void 0,l=void 0,x=void 0};g.abort=()=>{e=!0,z&&z(),G&&G.readyState!==(XMLHttpRequest.DONE||4)&&G.abort(),null!==Y&&(clearTimeout(Y),Y=null),G=null};const H=I=>{const x=I.message||"Unknown error";B&&G?B(new s(x,G)):Q.c.Error(x)},U=Q=>{if(G){if(G.open("GET",W),l)try{l(G)}catch(g){return void H(g)}p&&(G.responseType="arraybuffer"),L&&G.addEventListener("progress",L),z&&G.addEventListener("loadend",z),I=()=>{if(!e&&G&&G.readyState===(XMLHttpRequest.DONE||4)){if(I&&G.removeEventListener("readystatechange",I),G.status>=200&&G.status<300||0===G.status&&(!(0,X.l)()||P())){const I=p?G.response:G.responseText;if(null!==I){try{x&&x(I,G)}catch(g){H(g)}return}}const L=q.DefaultRetryStrategy;if(L){const I=L(W,G,Q);if(-1!==I)return v(),G=new F.d,void(Y=setTimeout((()=>U(Q+1)),I))}const l=new s("Error status: "+G.status+" "+G.statusText+" - Unable to load "+W,G);B&&B(l)}},G.addEventListener("readystatechange",I),G.send()}};U(0)};if(Y&&Y.enableSceneOffline){const F=I=>{I&&I.status>400?B&&B(I):v()},X=()=>{Y&&Y.loadFile(q.BaseUrl+I,(I=>{!e&&x&&x(I),g.onCompleteObservable.notifyObservers(g)}),L?I=>{!e&&L&&L(I)}:void 0,F,p)};Y.open(X,F)}else v();return g},n=I=>{const{match:x,type:L}=M(I);if(x)return L||void 0;const F=I.lastIndexOf(".");switch(I.substring(F+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ep":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},P=()=>"undefined"!==typeof location&&"file:"===location.protocol,d=I=>z.test(I),M=I=>{const x=z.exec(I);if(null===x||0===x.length)return{match:!1,type:""};return{match:!0,type:x[0].replace("data:","").replace("base64,","")}};function K(I){return(0,B.d)(I.split(",")[1])}const u=I=>(0,B.f)(I.split(",")[1]);let A;v.d._FileToolsLoadImage=Z,g.c.loadFile=f,l.o.loadFile=f;((I,x,L,F,X,G,Y,p,B,l)=>{A={DecodeBase64UrlToBinary:I,DecodeBase64UrlToString:x,DefaultRetryStrategy:L.DefaultRetryStrategy,BaseUrl:L.BaseUrl,CorsBehavior:L.CorsBehavior,PreprocessUrl:L.PreprocessUrl,IsBase64DataUrl:F,IsFileURL:X,LoadFile:G,LoadImage:Y,ReadFile:p,RequestFile:B,SetCorsBehavior:l},Object.defineProperty(A,"DefaultRetryStrategy",{get:function(){return L.DefaultRetryStrategy},set:function(I){L.DefaultRetryStrategy=I}}),Object.defineProperty(A,"BaseUrl",{get:function(){return L.BaseUrl},set:function(I){L.BaseUrl=I}}),Object.defineProperty(A,"PreprocessUrl",{get:function(){return L.PreprocessUrl},set:function(I){L.PreprocessUrl=I}}),Object.defineProperty(A,"CorsBehavior",{get:function(){return L.CorsBehavior},set:function(I){L.CorsBehavior=I}})})(K,u,q,d,P,f,Z,t,R,y)},12945:(I,x,L)=>{function F(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(I=>{const x=16*Math.random()|0;return("x"===I?x:3&x|8).toString(16)}))}L.d(x,{e:()=>F})},12929:(I,x,L)=>{L.d(x,{c:()=>G});var F=L(12809),X=L(12938);class G{static Instantiate(I){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[I])return this.RegisteredExternalClasses[I];const x=(0,X.b)(I);if(x)return x;F.c.Warn(I+" not found, you may have missed an import.");const L=I.split(".");let G=window||this;for(let F=0,X=L.length;F<X;F++)G=G[L[F]];return"function"!==typeof G?null:G}}G.RegisteredExternalClasses={}},12823:(I,x,L)=>{L.d(x,{c:()=>X});var F=L(12805);class X{static get Now(){return(0,F.l)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12849:(I,x,L)=>{L.d(x,{d:()=>Y,f:()=>G,i:()=>F,l:()=>X});const F=I=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(I);let x="";for(let L=0;L<I.byteLength;L++)x+=String.fromCharCode(I[L]);return x},X=I=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let L,F,X,G,Y,p,B,l="",W=0;const Q=ArrayBuffer.isView(I)?new Uint8Array(I.buffer,I.byteOffset,I.byteLength):new Uint8Array(I);for(;W<Q.length;)L=Q[W++],F=W<Q.length?Q[W++]:Number.NaN,X=W<Q.length?Q[W++]:Number.NaN,G=L>>2,Y=(3&L)<<4|F>>4,p=(15&F)<<2|X>>6,B=63&X,isNaN(F)?p=B=64:isNaN(X)&&(B=64),l+=x.charAt(G)+x.charAt(Y)+x.charAt(p)+x.charAt(B);return l},G=I=>atob(I),Y=I=>{const x=G(I),L=x.length,F=new Uint8Array(new ArrayBuffer(L));for(let X=0;X<L;X++)F[X]=x.charCodeAt(X);return F.buffer}},12954:(I,x,L)=>{function F(I){let x=1;do{x*=2}while(x<I);return x===I}function X(I,x,L){return I*(1-L)+x*L}function G(I){const x=Y(I),L=p(I);return x-I>I-L?L:x}function Y(I){return I--,I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,I|=I>>16,++I}function p(I){return I|=I>>1,I|=I>>2,I|=I>>4,I|=I>>8,(I|=I>>16)-(I>>1)}function B(I,x){let L;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:L=p(I);break;case 2:L=G(I);break;default:L=Y(I)}return Math.min(L,x)}L.d(x,{d:()=>p,g:()=>B,i:()=>F,j:()=>X,m:()=>G})},12791:(I,x,L)=>{L.r(x),L.d(x,{AsyncLoop:()=>U,Tools:()=>H,className:()=>s});var F=L(12797),X=L(12805),G=L(12809),Y=L(12818),p=L(12823),B=L(12825),l=L(12832),W=L(12840),Q=L(12842),e=L(12865),g=L(12929),v=L(12945),z=L(12954);class H{static get BaseUrl(){return Q.e.BaseUrl}static set BaseUrl(I){Q.e.BaseUrl=I}static get CleanUrl(){return Q.e.CleanUrl}static set CleanUrl(I){Q.e.CleanUrl=I}static IsAbsoluteUrl(I){return 0===I.indexOf("//")||-1!==I.indexOf("://")&&(-1!==I.indexOf(".")&&(-1!==I.indexOf("/")&&(!(I.indexOf(":")>I.indexOf("/"))&&(I.indexOf("://")<I.indexOf(".")||(0===I.indexOf("data:")||0===I.indexOf("blob:"))))))}static set ScriptBaseUrl(I){Q.e.ScriptBaseUrl=I}static get ScriptBaseUrl(){return Q.e.ScriptBaseUrl}static set CDNBaseUrl(I){H.ScriptBaseUrl=I,H.AssetBaseUrl=I}static set ScriptPreprocessUrl(I){Q.e.ScriptPreprocessUrl=I}static get ScriptPreprocessUrl(){return Q.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return Q.e.DefaultRetryStrategy}static set DefaultRetryStrategy(I){Q.e.DefaultRetryStrategy=I}static get CorsBehavior(){return Q.e.CorsBehavior}static set CorsBehavior(I){Q.e.CorsBehavior=I}static get UseFallbackTexture(){return W.e.UseFallbackTexture}static set UseFallbackTexture(I){W.e.UseFallbackTexture=I}static get RegisteredExternalClasses(){return g.c.RegisteredExternalClasses}static set RegisteredExternalClasses(I){g.c.RegisteredExternalClasses=I}static get fallbackTexture(){return W.e.FallbackTexture}static set fallbackTexture(I){W.e.FallbackTexture=I}static FetchToRef(I,x,L,F,X,G){const Y=4*((Math.abs(I)*L%L|0)+(Math.abs(x)*F%F|0)*L);G.r=X[Y]/255,G.g=X[Y+1]/255,G.b=X[Y+2]/255,G.a=X[Y+3]/255}static Mix(I,x,L){return 0}static Instantiate(I){return g.c.Instantiate(I)}static SetImmediate(I){e.c.SetImmediate(I)}static IsExponentOfTwo(I){return!0}static FloatRound(I){return Math.fround(I)}static GetFilename(I){const x=I.lastIndexOf("/");return x<0?I:I.substring(x+1)}static GetFolderPath(I){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const L=I.lastIndexOf("/");return L<0?x?I:"":I.substring(0,L+1)}static ToDegrees(I){return 180*I/Math.PI}static ToRadians(I){return I*Math.PI/180}static SmoothAngleChange(I,x){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const F=this.ToRadians(I),X=this.ToRadians(x);return this.ToDegrees(Math.atan2((1-L)*Math.sin(X)+L*Math.sin(F),(1-L)*Math.cos(X)+L*Math.cos(F)))}static MakeArray(I,x){return!0===x||void 0!==I&&null!=I?Array.isArray(I)?I:[I]:null}static GetPointerPrefix(I){return(0,X.l)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(I,x){(0,Q.y)(I,x)}static SetReferrerPolicyBehavior(I,x){x.referrerPolicy=I}static get PreprocessUrl(){return Q.e.PreprocessUrl}static set PreprocessUrl(I){Q.e.PreprocessUrl=I}static LoadImage(I,x,L,F,X,G){return(0,Q.p)(I,x,L,F,X,G)}static LoadFile(I,x,L,F,X,G){return(0,Q.n)(I,x,L,F,X,G)}static async LoadFileAsync(I){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((L,F)=>{(0,Q.n)(I,(I=>{L(I)}),void 0,void 0,x,((I,x)=>{F(x)}))}))}static GetAssetUrl(I){if(!I)return"";if(H.AssetBaseUrl&&I.startsWith(H._DefaultAssetsUrl)){const x="/"===H.AssetBaseUrl[H.AssetBaseUrl.length-1]?H.AssetBaseUrl.substring(0,H.AssetBaseUrl.length-1):H.AssetBaseUrl;return I.replace(H._DefaultAssetsUrl,x)}return I}static GetBabylonScriptURL(I,x){if(!I)return"";if(H.ScriptBaseUrl&&I.startsWith(H._DefaultCdnUrl)){const x="/"===H.ScriptBaseUrl[H.ScriptBaseUrl.length-1]?H.ScriptBaseUrl.substring(0,H.ScriptBaseUrl.length-1):H.ScriptBaseUrl;I=I.replace(H._DefaultCdnUrl,x)}return I=H.ScriptPreprocessUrl(I),x&&(I=H.GetAbsoluteUrl(I)),I}static LoadBabylonScript(I,x,L,F){I=H.GetBabylonScriptURL(I),H.LoadScript(I,x,L)}static async LoadBabylonScriptAsync(I){return I=H.GetBabylonScriptURL(I),await H.LoadScriptAsync(I)}static LoadScript(I,x,L,F){let G=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(I),x&&x()}catch(B){null===L||void 0===L||L(`Unable to load script '${I}' in worker`,B)}return}if(!(0,X.l)())return void(null===L||void 0===L||L(`Cannot load script '${I}' outside of a window or a worker`));const Y=document.getElementsByTagName("head")[0],p=document.createElement("script");G?(p.setAttribute("type","module"),p.innerText=I):(p.setAttribute("type","text/javascript"),p.setAttribute("src",I)),F&&(p.id=F),p.onload=()=>{x&&x()},p.onerror=x=>{L&&L(`Unable to load script '${I}'`,x)},Y.appendChild(p)}static async LoadScriptAsync(I,x){return await new Promise(((L,F)=>{this.LoadScript(I,(()=>{L()}),((I,x)=>{F(x||new Error(I))}),x)}))}static ReadFileAsDataURL(I,x,L){const X=new FileReader,G={onCompleteObservable:new F.c,abort:()=>X.abort()};return X.onloadend=()=>{G.onCompleteObservable.notifyObservers(G)},X.onload=I=>{x(I.target.result)},X.onprogress=L,X.readAsDataURL(I),G}static ReadFile(I,x,L,F,X){return(0,Q.t)(I,x,L,F,X)}static FileAsURL(I){const x=new Blob([I]);return window.URL.createObjectURL(x)}static Format(I){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return I.toFixed(x)}static DeepCopy(I,x,L,F){Y.b.DeepCopy(I,x,L,F)}static IsEmpty(I){for(const x in I)if(Object.prototype.hasOwnProperty.call(I,x))return!1;return!0}static RegisterTopRootEvents(I,x){for(let F=0;F<x.length;F++){const X=x[F];I.addEventListener(X.name,X.handler,!1);try{window.parent&&window.parent.addEventListener(X.name,X.handler,!1)}catch(L){}}}static UnregisterTopRootEvents(I,x){for(let F=0;F<x.length;F++){const X=x[F];I.removeEventListener(X.name,X.handler);try{I.parent&&I.parent.removeEventListener(X.name,X.handler)}catch(L){}}}static async DumpFramebuffer(I,x,L,F){throw(0,B.e)("DumpTools")}static DumpData(I,x,L,F){throw(0,B.e)("DumpTools")}static async DumpDataAsync(I,x,L){throw(0,B.e)("DumpTools")}static _IsOffScreenCanvas(I){return void 0!==I.convertToBlob}static ToBlob(I,x){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",F=arguments.length>3?arguments[3]:void 0;H._IsOffScreenCanvas(I)||I.toBlob||(I.toBlob=function(I,x,L){setTimeout((()=>{const F=atob(this.toDataURL(x,L).split(",")[1]),X=F.length,G=new Uint8Array(X);for(let I=0;I<X;I++)G[I]=F.charCodeAt(I);I(new Blob([G]))}))}),H._IsOffScreenCanvas(I)?I.convertToBlob({type:L,quality:F}).then((I=>x(I))):I.toBlob((function(I){x(I)}),L,F)}static DownloadBlob(I,x){if("download"in document.createElement("a")){if(!x){const I=new Date;x="screenshot_"+((I.getFullYear()+"-"+(I.getMonth()+1)).slice(2)+"-"+I.getDate()+"_"+I.getHours()+"-"+("0"+I.getMinutes()).slice(-2))+".png"}H.Download(I,x)}else if(I&&"undefined"!==typeof URL){const x=URL.createObjectURL(I),L=window.open("");if(!L)return;const F=L.document.createElement("img");F.onload=function(){URL.revokeObjectURL(x)},F.src=x,L.document.body.appendChild(F)}}static EncodeScreenshotCanvasData(I,x){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",F=arguments.length>3?arguments[3]:void 0,X=arguments.length>4?arguments[4]:void 0;if("string"!==typeof F&&x){if(x){if(H._IsOffScreenCanvas(I))return void I.convertToBlob({type:L,quality:X}).then((I=>{const L=new FileReader;L.readAsDataURL(I),L.onloadend=()=>{const I=L.result;x(I)}}));const F=I.toDataURL(L,X);x(F)}}else this.ToBlob(I,(function(I){I&&H.DownloadBlob(I,F),x&&x("")}),L,X)}static Download(I,x){if("undefined"===typeof URL)return;const L=window.URL.createObjectURL(I),F=document.createElement("a");document.body.appendChild(F),F.style.display="none",F.href=L,F.download=x,F.addEventListener("click",(()=>{F.parentElement&&F.parentElement.removeChild(F)})),F.click(),window.URL.revokeObjectURL(L)}static BackCompatCameraNoPreventDefault(I){return"boolean"===typeof I[0]?I[0]:"boolean"===typeof I[1]&&I[1]}static CreateScreenshot(I,x,L,F){throw(0,B.e)("ScreenshotTools")}static async CreateScreenshotAsync(I,x,L){throw(0,B.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(I,x,L,F){throw(0,B.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(I,x,L){throw(0,B.e)("ScreenshotTools")}static RandomId(){return(0,v.e)()}static IsBase64(I){return(0,Q.j)(I)}static DecodeBase64(I){return(0,Q.c)(I)}static get errorsCount(){return G.c.errorsCount}static Log(I){G.c.Log(I)}static Warn(I){G.c.Warn(I)}static Error(I){G.c.Error(I)}static get LogCache(){return G.c.LogCache}static ClearLogCache(){G.c.ClearLogCache()}static set LogLevels(I){G.c.LogLevels=I}static set PerformanceLogLevel(I){return(I&H.PerformanceUserMarkLogLevel)===H.PerformanceUserMarkLogLevel?(H.StartPerformanceCounter=H._StartUserMark,void(H.EndPerformanceCounter=H._EndUserMark)):(I&H.PerformanceConsoleLogLevel)===H.PerformanceConsoleLogLevel?(H.StartPerformanceCounter=H._StartPerformanceConsole,void(H.EndPerformanceCounter=H._EndPerformanceConsole)):(H.StartPerformanceCounter=H._StartPerformanceCounterDisabled,void(H.EndPerformanceCounter=H._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(I,x){}static _EndPerformanceCounterDisabled(I,x){}static _StartUserMark(I){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!H._Performance){if(!(0,X.l)())return;H._Performance=window.performance}x&&H._Performance.mark&&H._Performance.mark(I+"-Begin")}static _EndUserMark(I){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&H._Performance.mark&&(H._Performance.mark(I+"-End"),H._Performance.measure(I,I+"-Begin",I+"-End"))}static _StartPerformanceConsole(I){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(H._StartUserMark(I,x),console.time&&console.time(I))}static _EndPerformanceConsole(I){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(H._EndUserMark(I,x),console.timeEnd(I))}static get Now(){return p.c.Now}static GetClassName(I){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],L=null;if(!x&&I.getClassName)L=I.getClassName();else{if(I instanceof Object){L=(x?I:Object.getPrototypeOf(I)).constructor.__bjsclassName__}L||(L=typeof I)}return L}static First(I,x){for(const L of I)if(x(L))return L;return null}static getFullClassName(I){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],L=null,F=null;if(!x&&I.getClassName)L=I.getClassName();else{if(I instanceof Object){const X=x?I:Object.getPrototypeOf(I);L=X.constructor.__bjsclassName__,F=X.constructor.__bjsmoduleName__}L||(L=typeof I)}return L?(null!=F?F+".":"")+L:null}static async DelayAsync(I){await new Promise((x=>{setTimeout((()=>{x()}),I)}))}static IsSafari(){return!!(0,X.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function s(I,x){return L=>{L.__bjsclassName__=I,L.__bjsmoduleName__=null!=x?x:null}}H.AssetBaseUrl="",H.UseCustomRequestHeaders=!1,H.CustomRequestHeaders=l.d.CustomRequestHeaders,H.GetDOMTextContent=X.d,H._DefaultCdnUrl="https://cdn.babylonjs.com",H._DefaultAssetsUrl="https://assets.babylonjs.com/core",H.GetAbsoluteUrl="object"===typeof document?I=>{const x=document.createElement("a");return x.href=I,x.href}:"function"===typeof URL&&"object"===typeof location?I=>new URL(I,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},H.NoneLogLevel=G.c.NoneLogLevel,H.MessageLogLevel=G.c.MessageLogLevel,H.WarningLogLevel=G.c.WarningLogLevel,H.ErrorLogLevel=G.c.ErrorLogLevel,H.AllLogLevel=G.c.AllLogLevel,H.IsWindowObjectExist=X.l,H.PerformanceNoneLogLevel=0,H.PerformanceUserMarkLogLevel=1,H.PerformanceConsoleLogLevel=2,H.StartPerformanceCounter=H._StartPerformanceCounterDisabled,H.EndPerformanceCounter=H._EndPerformanceCounterDisabled;class U{constructor(I,x,L){let F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=I,this.index=F-1,this._done=!1,this._fn=x,this._successCallback=L}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(I,x,L){const F=new U(I,x,L,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return F.executeNext(),F}static SyncAsyncForLoop(I,x,L,F,X){let G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return U.Run(Math.ceil(I/x),(F=>{X&&X()?F.breakLoop():setTimeout((()=>{for(let G=0;G<x;++G){const Y=F.index*x+G;if(Y>=I)break;if(L(Y),X&&X()){F.breakLoop();break}}F.executeNext()}),G)}),F)}}H.Mix=z.j,H.IsExponentOfTwo=z.i,W.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12938:(I,x,L)=>{L.d(x,{b:()=>G,d:()=>X});const F={};function X(I,x){F[I]=x}function G(I){return F[I]}},12832:(I,x,L)=>{L.d(x,{d:()=>F});class F{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(F.CustomRequestHeaders).length>0||F.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const I in F.CustomRequestHeaders){const x=F.CustomRequestHeaders[I];x&&this._xhr.setRequestHeader(I,x)}}_shouldSkipRequestModifications(I){return F.SkipRequestModificationForBabylonCDN&&(I.includes("preview.babylonjs.com")||I.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(I){this._xhr.onprogress=I}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(I){this._xhr.responseType=I}get timeout(){return this._xhr.timeout}set timeout(I){this._xhr.timeout=I}addEventListener(I,x,L){this._xhr.addEventListener(I,x,L)}removeEventListener(I,x,L){this._xhr.removeEventListener(I,x,L)}abort(){this._xhr.abort()}send(I){F.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(I)}open(I,x){for(const L of F.CustomRequestModifiers){if(this._shouldSkipRequestModifications(x))return;x=L(this._xhr,x)||x}x=(x=x.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=x,this._xhr.open(I,x,!0)}setRequestHeader(I,x){this._xhr.setRequestHeader(I,x)}getResponseHeader(I){return this._xhr.getResponseHeader(I)}}F.CustomRequestHeaders={},F.CustomRequestModifiers=new Array,F.SkipRequestModificationForBabylonCDN=!0}}]);