"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11081:(Z,x,F)=>{F.d(x,{d:()=>C});var u=F(11037),G=F(11012),f=F(11088),Y=F(11110),j=F(11022);class d{constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,Z&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(Z){this._zOffset!==Z&&(this._zOffset=Z,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(Z){this._zOffsetUnits!==Z&&(this._zOffsetUnits=Z,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(Z){this._cullFace!==Z&&(this._cullFace=Z,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(Z){this._cull!==Z&&(this._cull=Z,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(Z){this._depthFunc!==Z&&(this._depthFunc=Z,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(Z){this._depthMask!==Z&&(this._depthMask=Z,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(Z){this._depthTest!==Z&&(this._depthTest=Z,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(Z){this._frontFace!==Z&&(this._frontFace=Z,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(Z){this.isDirty&&(this._isCullDirty&&(this.cull?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(Z.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(Z.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(Z.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(Z.enable(Z.POLYGON_OFFSET_FILL),Z.polygonOffset(this.zOffset,this.zOffsetUnits)):Z.disable(Z.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(Z.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class t{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(Z){this._func!==Z&&(this._func=Z,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(Z){this._funcRef!==Z&&(this._funcRef=Z,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(Z){this._funcMask!==Z&&(this._funcMask=Z,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(Z){this._opStencilFail!==Z&&(this._opStencilFail=Z,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(Z){this._opDepthFail!==Z&&(this._opDepthFail=Z,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(Z){this._opStencilDepthPass!==Z&&(this._opStencilDepthPass=Z,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(Z){this._mask!==Z&&(this._mask=Z,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(Z){this._enabled!==Z&&(this._enabled=Z,this._isStencilTestDirty=!0)}constructor(){let Z=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,Z&&this.reset()}reset(){var Z;this.stencilMaterial=void 0,null===(Z=this.stencilGlobal)||void 0===Z||Z.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(Z){var x;if(!Z)return;const F=!this.useStencilGlobalOnly&&!(null===(x=this.stencilMaterial)||void 0===x||!x.enabled);this.enabled=F?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=F?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=F?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=F?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=F?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=F?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=F?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=F?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(Z.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(Z.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(Z.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class o{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=o.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=o.KEEP,this.opDepthFail=o.KEEP,this.opStencilDepthPass=o.REPLACE}get stencilFunc(){return this.func}set stencilFunc(Z){this.func=Z}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(Z){this.funcRef=Z}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(Z){this.funcMask=Z}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(Z){this.opStencilFail=Z}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(Z){this.opDepthFail=Z}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(Z){this.opStencilDepthPass=Z}get stencilMask(){return this.mask}set stencilMask(Z){this.mask=Z}get stencilTest(){return this.enabled}set stencilTest(Z){this.enabled=Z}}o.ALWAYS=519,o.KEEP=7680,o.REPLACE=7681;class c{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(Z){this._alphaBlend!==Z&&(this._alphaBlend=Z,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(Z,x,F,u){this._blendConstants[0]===Z&&this._blendConstants[1]===x&&this._blendConstants[2]===F&&this._blendConstants[3]===u||(this._blendConstants[0]=Z,this._blendConstants[1]=x,this._blendConstants[2]=F,this._blendConstants[3]=u,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(Z,x,F,u){this._blendFunctionParameters[0]===Z&&this._blendFunctionParameters[1]===x&&this._blendFunctionParameters[2]===F&&this._blendFunctionParameters[3]===u||(this._blendFunctionParameters[0]=Z,this._blendFunctionParameters[1]=x,this._blendFunctionParameters[2]=F,this._blendFunctionParameters[3]=u,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(Z,x){this._blendEquationParameters[0]===Z&&this._blendEquationParameters[1]===x||(this._blendEquationParameters[0]=Z,this._blendEquationParameters[1]=x,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(Z){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(Z.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(Z.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(Z.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var s=F(11029),J=F(11117),p=F(11004),U=F(11e3),k=F(11067),M=F(11129);function m(Z,x){if((0,p.h)()){const{requestAnimationFrame:F}=x||window;if("function"===typeof F)return F(Z)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(Z);return setTimeout(Z,16)}class C{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(Z){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(Z){Z!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=Z,this._depthCullingState.depthFunc=Z?518:515)}setColorWrite(Z){Z!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=Z)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(Z){if(Z)return this.isNDCHalfZRange?Z.IS_NDC_HALF_ZRANGE="":delete Z.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?Z.USE_REVERSE_DEPTHBUFFER="":delete Z.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?Z.USE_EXACT_SRGB_CONVERSIONS="":delete Z.USE_EXACT_SRGB_CONVERSIONS);{let Z="";return this.isNDCHalfZRange&&(Z+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(Z&&(Z+="\n"),Z+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(Z&&(Z+="\n"),Z+="#define USE_EXACT_SRGB_CONVERSIONS"),Z}}_rebuildInternalTextures(){const Z=this._internalTexturesCache.slice();for(const x of Z)x._rebuild()}_rebuildRenderTargetWrappers(){const Z=this._renderTargetWrapperCache.slice();for(const x of Z)x._rebuild()}_rebuildEffects(){for(const Z in this._compiledEffects){const x=this._compiledEffects[Z];x._pipelineContext=null,x._prepareEffect()}f.Effect.ResetCache()}_rebuildGraphicsResources(){var Z;this.wipeCaches(!0),this._rebuildEffects(),null===(Z=this._rebuildComputeEffects)||void 0===Z||Z.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){G.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(Z){setTimeout((()=>{this._clearEmptyResources();const x=this._depthCullingState.depthTest,F=this._depthCullingState.depthFunc,u=this._depthCullingState.depthMask,G=this._stencilState.stencilTest;Z(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=x,this._depthCullingState.depthFunc=F,this._depthCullingState.depthMask=u,this._stencilState.stencilTest=G,this._flagContextRestored()}),0)}get J(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(Z){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(Z){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const Z=new Uint8Array(4),x=[Z,Z,Z,Z,Z,Z];this._emptyCubeTexture=this.createRawCubeTexture(x,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(Z){if(!Z)return this._activeRenderLoops.length=0,void this._cancelFrame();const x=this._activeRenderLoops.indexOf(Z);x>=0&&(this._activeRenderLoops.splice(x,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const Z=this._frameHandler;if(this._frameHandler=0,(0,p.h)()){const{cancelAnimationFrame:x}=this.getHostWindow()||window;if("function"===typeof x)return x(Z)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(Z);return clearTimeout(Z)}}o(){this.onBeginFrameObservable.notifyObservers(this)}pf(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(Z){this._maxFPS=Z,void 0!==Z&&(this._minFrameTime=Z<=0?Number.MAX_VALUE:1e3/Z)}_isOverFrameTime(Z){if(!Z||void 0===this._maxFPS)return!1;const x=Z-this._lastFrameTime;return this._lastFrameTime=Z,this._renderAccumulator+=x,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(Z){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(Z)){let Z=!0;(this.J||!this.renderEvenInBackground&&this._windowIsBackground)&&(Z=!1),Z&&(this.o(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.pf())}}_renderLoop(Z){this._processFrame(Z),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let Z=0;Z<this._activeRenderLoops.length;Z++){(0,this._activeRenderLoops[Z])()}}_renderViews(){return!1}_queueNewFrame(Z,x){return m(Z,x)}runRenderLoop(Z){-1===this._activeRenderLoops.indexOf(Z)&&(this._activeRenderLoops.push(Z),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(Z){this._depthCullingState.depthTest=Z}setZOffset(Z){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-Z:Z}getZOffset(){const Z=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-Z:Z}setZOffsetUnits(Z){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-Z:Z}getZOffsetUnits(){const Z=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-Z:Z}getHostWindow(){return(0,p.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(Z){this._compatibilityMode=!0}_rebuildTextures(){for(const Z of this.scenes)Z._rebuildTextures();for(const Z of this._virtualScenes)Z._rebuildTextures()}_releaseRenderTargetWrapper(Z){const x=this._renderTargetWrapperCache.indexOf(Z);-1!==x&&this._renderTargetWrapperCache.splice(x,1)}get currentViewport(){return this._cachedViewport}setViewport(Z,x,F){const u=x||this.getRenderWidth(),G=F||this.getRenderHeight(),f=Z.x||0,Y=Z.y||0;this._cachedViewport=Z,this._viewport(f*u,Y*G,u*Z.width,G*Z.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(Z){return new Path2D(Z)}get description(){let Z=this.name+this.version;return this._caps.parallelShaderCompile&&(Z+=" - Parallel shader compilation"),Z}_createTextureBase(Z,x,F,f){let Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,t=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,p=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,U=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,k=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,L=arguments.length>15?arguments[15]:void 0;const H="data:"===(Z=Z||"").substring(0,5),S="blob:"===Z.substring(0,5),K=H&&-1!==Z.indexOf(";base64,"),y=s||new J.e(this,1);y!==s&&(y.label=Z.substring(0,60));const q=Z;!this._transformTextureUrl||K||s||c||(Z=this._transformTextureUrl(Z)),q!==Z&&(y._originalUrl=q);const R=Z.lastIndexOf(".");let B=U||(R>-1?Z.substring(R).toLowerCase():"");B.indexOf("?")>-1&&(B=B.split("?")[0]);const v=(0,M.b)(B,k);f&&f.addPendingData(y),y.url=Z,y.generateMipMaps=!x,y.samplingMode=Y,y.invertY=F,y._useSRGBBuffer=this._getUseSRGBBuffer(!!L,x),this._doNotHandleContextLost||(y._buffer=c);let l=null;j&&!s&&(l=y.onLoadedObservable.add(j)),s||this._internalTexturesCache.push(y);const i=(F,s)=>{f&&f.removePendingData(y),Z===q?(l&&y.onLoadedObservable.remove(l),u.c.UseFallbackTexture&&Z!==u.c.FallbackTexture&&this._createTextureBase(u.c.FallbackTexture,x,y.invertY,f,Y,null,d,t,o,c,y),F=(F||"Unknown error")+(u.c.UseFallbackTexture?" - Fallback texture was used":""),y.onErrorObservable.notifyObservers({message:F,exception:s}),d&&d(F,s)):(G.d.Warn(`Failed to load ${Z}, falling back to ${q}`),this._createTextureBase(q,x,y.invertY,f,Y,j,d,t,o,c,y,p,U,k,m,L))};if(v){const x=async Z=>{(await v).loadData(Z,y,((Z,x,F,u,G,j)=>{j?i("TextureLoader failed to load data"):t(y,B,f,{width:Z,height:x},y.invertY,!F,u,(()=>(G(),!1)),Y)}),m)};c?c instanceof ArrayBuffer?x(new Uint8Array(c)):ArrayBuffer.isView(c)?x(c):d&&d("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(Z,(Z=>{x(new Uint8Array(Z))}),void 0,f?f.offlineProvider:void 0,!0,((Z,x)=>{i("Unable to load "+(Z&&Z.responseURL,x))}))}else{const F=Z=>{S&&!this._doNotHandleContextLost&&(y._buffer=Z),t(y,B,f,Z,y.invertY,x,!1,o,Y)};!H||K?c&&("string"===typeof c.decoding||c.close)?F(c):C._FileToolsLoadImage(Z||"",F,i,f?f.offlineProvider:null,k,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof c||c instanceof ArrayBuffer||ArrayBuffer.isView(c)||c instanceof Blob?C._FileToolsLoadImage(c,F,i,f?f.offlineProvider:null,k,y.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):c&&F(c)}return y}_rebuildBuffers(){for(const Z of this._uniformBuffers)Z._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,p.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const Z in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,Z)&&(this._boundTexturesCache[Z]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(Z){this._name=Z}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(Z){this._hardwareScalingLevel=Z,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(Z){this._doNotHandleContextLost=Z}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(Z,x,F){var G,f;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new d,this._stencilStateComposer=new t,this._stencilState=new o,this._alphaState=new c,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new U.b,this.onCanvasFocusObservable=new U.b,this.onNewSceneAddedObservable=new U.b,this.onResizeObservable=new U.b,this.onCanvasPointerOutObservable=new U.b,this.onEffectErrorObservable=new U.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new U.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=Z=>this._renderLoop(Z),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new U.b,this.onAfterShaderCompilationObservable=new U.b,this.onBeginFrameObservable=new U.b,this.onEndFrameObservable=new U.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new U.b,this.onContextRestoredObservable=new U.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Uf=new U.b,this.onReleaseEffectsObservable=new U.b,u.c.Instances.push(this),this.startTime=j.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Y.b.SetMatrixPrecision(!!x.useHighPrecisionMatrix),(0,p.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=F??!1,x.antialias=Z??x.antialias,x.deterministicLockstep=x.deterministicLockstep??!1,x.lockstepMaxSteps=x.lockstepMaxSteps??4,x.timeStep=x.timeStep??1/60,x.stencil=x.stencil??!0,this._audioContext=(null===(G=x.audioEngineOptions)||void 0===G?void 0:G.audioContext)??null,this._audioDestination=(null===(f=x.audioEngineOptions)||void 0===f?void 0:f.audioDestination)??null,this.premultipliedAlpha=x.premultipliedAlpha??!0,this._doNotHandleContextLost=!!x.doNotHandleContextLost,this._isStencilEnable=!!x.stencil,this.useExactSrgbConversions=x.useExactSrgbConversions??!1;const s=(0,p.h)()&&window.devicePixelRatio||1,J=x.limitDeviceRatio||s;F=F||x.adaptToDeviceRatio||!1,this._hardwareScalingLevel=F?1/Math.min(J,s):1,this._lastDevicePixelRatio=s,this._creationOptions=x}resize(){let Z,x,F=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const Z=(0,p.h)()&&window.devicePixelRatio||1,x=this._lastDevicePixelRatio/Z;this._lastDevicePixelRatio=Z,this._hardwareScalingLevel*=x}if((0,p.h)()&&(0,p.e)())if(this._renderingCanvas){var u,G;const F=null===(u=(G=this._renderingCanvas).getBoundingClientRect)||void 0===u?void 0:u.call(G);Z=this._renderingCanvas.clientWidth||(null===F||void 0===F?void 0:F.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,x=this._renderingCanvas.clientHeight||(null===F||void 0===F?void 0:F.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else Z=window.innerWidth,x=window.innerHeight;else Z=this._renderingCanvas?this._renderingCanvas.width:100,x=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(Z/this._hardwareScalingLevel,x/this._hardwareScalingLevel,F)}setSize(Z,x){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(Z|=0,x|=0,!F&&this._renderingCanvas.width===Z&&this._renderingCanvas.height===x)return!1;if(this._renderingCanvas.width=Z,this._renderingCanvas.height=x,this.scenes){for(let Z=0;Z<this.scenes.length;Z++){const x=this.scenes[Z];for(let Z=0;Z<x.cameras.length;Z++){x.cameras[Z]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(Z,x,F,u,G,f,Y,j,d,t,o){throw(0,s.e)("engine.rawTexture")}createRawCubeTexture(Z,x,F,u,G,f,Y,j){throw(0,s.e)("engine.rawTexture")}createRawTexture3D(Z,x,F,u,G,f,Y,j,d,t,o){throw(0,s.e)("engine.rawTexture")}createRawTexture2DArray(Z,x,F,u,G,f,Y,j,d,t,o){throw(0,s.e)("engine.rawTexture")}_sharedInit(Z){this._renderingCanvas=Z}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const Z=navigator.userAgent;this.hostInformation.isMobile=-1!==Z.indexOf("Mobile")||-1!==Z.indexOf("Mac")&&(0,p.e)()&&"ontouchend"in document},this._checkForMobile(),(0,p.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(Z){return document.createElement("video")}_reportDrawCall(){var Z;let x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(Z=this._drawCalls)||void 0===Z||Z.addCount(x,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(Z,x){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(Z,x){return createImageBitmap(Z,x)}resizeImageBitmap(Z,x,F){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(Z){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(Z,x){if("undefined"===typeof document)return new OffscreenCanvas(Z,x);const F=document.createElement("canvas");return F.width=Z,F.height=x,F}createCanvas(Z,x){return C._CreateCanvas(Z,x)}static _FileToolsLoadImage(Z,x,F,u,G,f,Y){throw(0,s.e)("FileTools")}_loadFile(Z,x,F,u,G,f){const Y=(0,k.k)(Z,x,F,u,G,f);return this._activeRequests.push(Y),Y.onCompleteObservable.add((()=>{const Z=this._activeRequests.indexOf(Y);-1!==Z&&this._activeRequests.splice(Z,1)})),Y}static _FileToolsLoadFile(Z,x,F,u,G,f){if(k.c.loadFile)return k.c.loadFile(Z,x,F,u,G,f);throw(0,s.e)("FileTools")}dispose(){var Z;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(Z=this.releaseComputeEffects)||void 0===Z||Z.call(this),f.Effect.ResetCache();for(const F of this._activeRequests)F.abort();this._boundRenderFunction=null,this.Uf.notifyObservers(this),this.Uf.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,p.h)()&&window.removeEventListener("resize",this._checkForMobile);const x=u.c.Instances.indexOf(this);x>=0&&u.c.Instances.splice(x,1),u.c.Instances.length||(u.c.OnEnginesDisposedObservable.notifyObservers(this),u.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(Z){throw(0,s.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(Z,x){for(let F=0;F<u.c.Instances.length;F++){const G=u.c.Instances[F];for(let F=0;F<G.scenes.length;F++)G.scenes[F].markAllMaterialsAsDirty(Z,x)}}}C._RenderPassIdCounter=0,C._RescalePostProcessFactory=null,C.CollisionsEpsilon=.001,C.QueueNewFrame=m},11037:(Z,x,F)=>{F.d(x,{c:()=>G});var u=F(11e3);class G{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}G.Instances=[],G.OnEnginesDisposedObservable=new u.b,G._LastCreatedScene=null,G.UseFallbackTexture=!0,G.FallbackTexture=""},11110:(Z,x,F)=>{F.d(x,{b:()=>u});class u{static SetMatrixPrecision(Z){if(u.MatrixTrackPrecisionChange=!1,Z&&!u.MatrixUse64Bits&&u.MatrixTrackedMatrices)for(let x=0;x<u.MatrixTrackedMatrices.length;++x){const Z=u.MatrixTrackedMatrices[x],F=Z.Mf;Z.Mf=new Array(16);for(let x=0;x<16;++x)Z.Mf[x]=F[x]}u.MatrixUse64Bits=Z,u.MatrixCurrentType=u.MatrixUse64Bits?Array:Float32Array,u.MatrixTrackedMatrices=null}}u.MatrixUse64Bits=!1,u.MatrixTrackPrecisionChange=!0,u.MatrixCurrentType=Float32Array,u.MatrixTrackedMatrices=[]},11129:(Z,x,F)=>{F.d(x,{b:()=>Y});var u=F(11012);const G=new Map;function f(Z,x){(function(Z){return G.delete(Z)})(Z)&&u.d.Warn(`Extension with the name '${Z}' already exists`),G.set(Z,x)}function Y(Z,x){"image/ktx"!==x&&"image/ktx2"!==x||(Z=".ktx"),G.has(Z)||(Z.endsWith(".ies")&&f(".ies",(async()=>await F.e(15).then(F.bind(F,13683)).then((Z=>new Z._IESTextureLoader)))),Z.endsWith(".dds")&&f(".dds",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(28)]).then(F.bind(F,13687)).then((Z=>new Z._DDSTextureLoader)))),Z.endsWith(".basis")&&f(".basis",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(47)]).then(F.bind(F,13698)).then((Z=>new Z._BasisTextureLoader)))),Z.endsWith(".env")&&f(".env",(async()=>await Promise.all([F.e(14),F.e(17),F.e(13),F.e(19),F.e(18),F.e(23),F.e(21),F.e(45),F.e(48)]).then(F.bind(F,13706)).then((Z=>new Z._ENVTextureLoader)))),Z.endsWith(".hdr")&&f(".hdr",(async()=>await Promise.all([F.e(14),F.e(49)]).then(F.bind(F,13715)).then((Z=>new Z._HDRTextureLoader)))),(Z.endsWith(".ktx")||Z.endsWith(".ktx2"))&&(f(".ktx",(async()=>await F.e(30).then(F.bind(F,13717)).then((Z=>new Z._KTXTextureLoader)))),f(".ktx2",(async()=>await F.e(30).then(F.bind(F,13717)).then((Z=>new Z._KTXTextureLoader))))),Z.endsWith(".tga")&&f(".tga",(async()=>await F.e(50).then(F.bind(F,13724)).then((Z=>new Z._TGATextureLoader)))),Z.endsWith(".exr")&&f(".exr",(async()=>await F.e(16).then(F.bind(F,13733)).then((Z=>new Z._ExrTextureLoader)))));const u=G.get(Z);return u?Promise.resolve(u(x)):null}},11117:(Z,x,F)=>{F.d(x,{e:()=>Y});var u,G=F(11e3),f=F(11121);!function(Z){Z[Z.Unknown=0]="Unknown",Z[Z.Url=1]="Url",Z[Z.Temp=2]="Temp",Z[Z.Raw=3]="Raw",Z[Z.Dynamic=4]="Dynamic",Z[Z.RenderTarget=5]="RenderTarget",Z[Z.MultiRenderTarget=6]="MultiRenderTarget",Z[Z.Cube=7]="Cube",Z[Z.CubeRaw=8]="CubeRaw",Z[Z.CubePrefiltered=9]="CubePrefiltered",Z[Z.Raw3D=10]="Raw3D",Z[Z.Raw2DArray=11]="Raw2DArray",Z[Z.DepthStencil=12]="DepthStencil",Z[Z.CubeRawRGBD=13]="CubeRawRGBD",Z[Z.Depth=14]="Depth"}(u||(u={}));class Y extends f.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(Z){this.generateMipMaps=Z}get uniqueId(){return this._uniqueId}_setUniqueId(Z){this._uniqueId=Z}getEngine(){return this._engine}get source(){return this._source}constructor(Z,x){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new G.b,this.onErrorObservable=new G.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=Z,this._source=x,this._uniqueId=Y._Counter++,F||(this._hardwareTexture=Z._createHardwareTexture())}incrementReferences(){this._references++}updateSize(Z,x){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,Z,x,F),this.width=Z,this.height=x,this.depth=F,this.baseWidth=Z,this.baseHeight=x,this.baseDepth=F,this._size=Z*x*F}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const Z=this.onRebuildCallback(this),x=x=>{x._swapAndDie(this,!1),this.isReady=Z.isReady};return void(Z.isAsync?Z.proxy.then(x):x(Z.proxy))}let Z;switch(this.source){case 2:case 12:case 14:break;case 1:return void(Z=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(Z=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:Z=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),Z._swapAndDie(this,!1),this.isReady=!0;break;case 10:Z=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 11:Z=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),Z._swapAndDie(this,!1),this.isReady=!0;break;case 4:Z=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),Z._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(Z=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:Z=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),Z._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return Z=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(Z=>{Z&&Z._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(Z._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(Z){var x;let F=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(x=this._hardwareTexture)||void 0===x||x.setUsage(Z._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),Z._hardwareTexture=this._hardwareTexture,F&&(Z._isRGBD=this._isRGBD),this._lodTextureHigh&&(Z._lodTextureHigh&&Z._lodTextureHigh.dispose(),Z._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(Z._lodTextureMid&&Z._lodTextureMid.dispose(),Z._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(Z._lodTextureLow&&Z._lodTextureLow.dispose(),Z._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(Z._irradianceTexture&&Z._irradianceTexture.dispose(),Z._irradianceTexture=this._irradianceTexture);const u=this._engine.getLoadedTexturesCache();let G=u.indexOf(this);-1!==G&&u.splice(G,1),G=u.indexOf(Z),-1===G&&u.push(Z)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Y._Counter=0},11121:(Z,x,F)=>{F.d(x,{d:()=>u});class u{get wrapU(){return this._cachedWrapU}set wrapU(Z){this._cachedWrapU=Z}get wrapV(){return this._cachedWrapV}set wrapV(Z){this._cachedWrapV=Z}get wrapR(){return this._cachedWrapR}set wrapR(Z){this._cachedWrapR=Z}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(Z){this._cachedAnisotropicFilteringLevel=Z}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(Z){this._comparisonFunction=Z}get useMipMaps(){return this._useMipMaps}set useMipMaps(Z){this._useMipMaps=Z}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=Z,this._cachedWrapV=x,this._cachedWrapR=F,this._cachedAnisotropicFilteringLevel=u,this.samplingMode=G,this._comparisonFunction=f,this}compareSampler(Z){return this._cachedWrapU===Z._cachedWrapU&&this._cachedWrapV===Z._cachedWrapV&&this._cachedWrapR===Z._cachedWrapR&&this._cachedAnisotropicFilteringLevel===Z._cachedAnisotropicFilteringLevel&&this.samplingMode===Z.samplingMode&&this._comparisonFunction===Z._comparisonFunction&&this._useMipMaps===Z._useMipMaps}}},11018:(Z,x,F)=>{F.d(x,{b:()=>f});var u=F(11012);const G=(Z,x,F)=>Z?Z.getClassName&&"Mesh"===Z.getClassName()?null:!Z.getClassName||"SubMesh"!==Z.getClassName()&&"PhysicsBody"!==Z.getClassName()?Z.clone?Z.clone():Array.isArray(Z)?Z.slice():F&&"object"===typeof Z?{...Z}:null:Z.clone(x):null;class f{static DeepCopy(Z,x,F,f){let Y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const j=function(Z){const x=[];do{const F=Object.getOwnPropertyNames(Z);for(const Z of F)-1===x.indexOf(Z)&&x.push(Z)}while(Z=Object.getPrototypeOf(Z));return x}(Z);for(const t of j){if("_"===t[0]&&(!f||-1===f.indexOf(t)))continue;if(t.endsWith("Observable"))continue;if(F&&-1!==F.indexOf(t))continue;const j=Z[t],o=typeof j;if("function"!==o)try{if("object"===o)if(j instanceof Uint8Array)x[t]=Uint8Array.from(j);else if(j instanceof Array){if(x[t]=[],j.length>0)if("object"==typeof j[0])for(let Z=0;Z<j.length;Z++){const F=G(j[Z],x,Y);-1===x[t].indexOf(F)&&x[t].push(F)}else x[t]=j.slice(0)}else x[t]=G(j,x,Y);else x[t]=j}catch(d){u.d.Warn(d.message)}}}}},11050:(Z,x,F)=>{F.d(x,{c:()=>u,g:()=>G,i:()=>f});class u extends Error{}u._setPrototypeOf=Object.setPrototypeOf||((Z,x)=>(Z.__proto__=x,Z));const G={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class f extends u{constructor(Z,x,F){super(Z),this.errorCode=x,this.innerError=F,this.name="RuntimeError",u._setPrototypeOf(this,f.prototype)}}},11041:(Z,x,F)=>{F.d(x,{c:()=>i,e:()=>C,g:()=>R,k:()=>v,p:()=>y,m:()=>k,q:()=>S,u:()=>K,v:()=>q,z:()=>L});var u=F(11031),G=F(11004),f=F(11e3);class Y{}Y.FilesToLoad={};var j=F(11050),d=F(11056),t=F(11063),o=F(11037),c=F(11012),s=F(11072),J=F(11067),p=F(11081);const U=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class k extends j.i{constructor(Z,x){super(Z,j.g.LoadFileError),this.name="LoadFileError",j.c._setPrototypeOf(this,k.prototype),x instanceof u.b?this.request=x:this.file=x}}class M extends j.i{constructor(Z,x){super(Z,j.g.RequestFileError),this.request=x,this.name="RequestFileError",j.c._setPrototypeOf(this,M.prototype)}}class m extends j.i{constructor(Z,x){super(Z,j.g.ReadFileError),this.file=x,this.name="ReadFileError",j.c._setPrototypeOf(this,m.prototype)}}const C={DefaultRetryStrategy:class{static ExponentialBackoff(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(F,u,G)=>0!==u.status||G>=Z||-1!==F.indexOf("file:")?-1:Math.pow(2,G)*x}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:Z=>Z,ScriptBaseUrl:"",ScriptPreprocessUrl:Z=>Z,CleanUrl:Z=>Z=Z.replace(/#/gm,"%23")},L=(Z,x)=>{if((!Z||0!==Z.indexOf("data:"))&&C.CorsBehavior)if("string"===typeof C.CorsBehavior||C.CorsBehavior instanceof String)x.crossOrigin=C.CorsBehavior;else{const F=C.CorsBehavior(Z);F&&(x.crossOrigin=F)}},H={getRequiredSize:null},S=function(Z,x,F,G){let f,j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",t=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===c||void 0===c||!c._features.forceBitmapOverHTMLImageElement))return F("LoadImage is only supported in web or BabylonNative environments."),null;let s=!1;Z instanceof ArrayBuffer||ArrayBuffer.isView(Z)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(f=URL.createObjectURL(new Blob([Z],{type:j})),s=!0):f=`data:${j};base64,`+(0,d.j)(Z):Z instanceof Blob?(f=URL.createObjectURL(Z),s=!0):(f=C.CleanUrl(Z),f=C.PreprocessUrl(f));const J=x=>{if(F){const u=f||Z.toString();F(`Error while trying to load image: ${0===u.indexOf("http")||u.length<=128?u:u.slice(0,128)+"..."}`,x)}};if(null!==c&&void 0!==c&&c._features.forceBitmapOverHTMLImageElement)return y(f,(u=>{c.createImageBitmap(new Blob([u],{type:j}),{premultiplyAlpha:"none",...t}).then((Z=>{x(Z),s&&URL.revokeObjectURL(f)})).catch((x=>{F&&F("Error while trying to load image: "+Z,x)}))}),void 0,G||void 0,!0,((Z,x)=>{J(x)})),null;const p=new Image;if(H.getRequiredSize){const x=H.getRequiredSize(Z);x.width&&(p.width=x.width),x.height&&(p.height=x.height)}L(f,p);const U=[],k=()=>{for(const Z of U)Z.target.removeEventListener(Z.name,Z.handler);U.length=0};U.push({target:p,name:"load",handler:()=>{k(),x(p),s&&p.src&&URL.revokeObjectURL(p.src)}}),U.push({target:p,name:"error",handler:Z=>{k(),J(Z),s&&p.src&&URL.revokeObjectURL(p.src)}}),U.push({target:document,name:"securitypolicyviolation",handler:Z=>{if(Z.blockedURI!==p.src||"mf"===Z.disposition)return;k();const x=new Error(`CSP violation of policy ${Z.effectiveDirective} ${Z.blockedURI}. Current policy is ${Z.originalPolicy}`);o.c.UseFallbackTexture=!1,J(x),s&&p.src&&URL.revokeObjectURL(p.src),p.src=""}}),(()=>{for(const Z of U)Z.target.addEventListener(Z.name,Z.handler)})();const M="blob:"===f.substring(0,5),m="data:"===f.substring(0,5),S=()=>{M||m||!u.b.IsCustomRequestAvailable?p.src=f:y(f,((Z,x,F)=>{const u=new Blob([Z],{type:!j&&F?F:j}),G=URL.createObjectURL(u);s=!0,p.src=G}),void 0,G||void 0,!0,((Z,x)=>{J(x)}))},K=()=>{G&&G.loadImage(f,p)};if(!M&&!m&&G&&G.enableTexturesOffline)G.open(K,S);else{if(-1!==f.indexOf("file:")){const Z=decodeURIComponent(f.substring(5).toLowerCase());if(Y.FilesToLoad[Z]&&"undefined"!==typeof URL){try{let x;try{x=URL.createObjectURL(Y.FilesToLoad[Z])}catch(q){x=URL.createObjectURL(Y.FilesToLoad[Z])}p.src=x,s=!0}catch(R){p.src=""}return p}}S()}return p},K=(Z,x,F,u,G)=>{const Y=new FileReader,j={onCompleteObservable:new f.b,abort:()=>Y.abort()};return Y.onloadend=()=>j.onCompleteObservable.notifyObservers(j),G&&(Y.onerror=()=>{G(new m(`Unable to read ${Z.name}`,Z))}),Y.onload=Z=>{x(Z.target.result)},F&&(Y.onprogress=F),u?Y.readAsArrayBuffer(Z):Y.readAsText(Z),j},y=(Z,x,F,u,G,d,t)=>{if(Z.name)return K(Z,x,F,G,d?Z=>{d(void 0,Z)}:void 0);const o=Z;if(-1!==o.indexOf("file:")){let Z=decodeURIComponent(o.substring(5).toLowerCase());0===Z.indexOf("./")&&(Z=Z.substring(2));const u=Y.FilesToLoad[Z];if(u)return K(u,x,F,G,d?Z=>d(void 0,new k(Z.message,Z.file)):void 0)}const{match:J,type:p}=l(o);if(J){const Z={onCompleteObservable:new f.b,abort:()=>()=>{}};try{const Z=G?i(o):e(o);x(Z,void 0,p)}catch(j){d?d(void 0,j):c.d.Error(j.message||"Failed to parse the Data URL")}return s.d.SetImmediate((()=>{Z.onCompleteObservable.notifyObservers(Z)})),Z}return q(o,((Z,F)=>{x(Z,null===F||void 0===F?void 0:F.responseURL,null===F||void 0===F?void 0:F.getResponseHeader("content-type"))}),F,u,G,d?Z=>{d(Z.request,new k(Z.message,Z.request))}:void 0,t)},q=(Z,x,F,Y,j,d,t)=>{Z=C.CleanUrl(Z),Z=C.PreprocessUrl(Z);const o=C.BaseUrl+Z;let s=!1;const J={onCompleteObservable:new f.b,abort:()=>s=!0},p=()=>{let Z,f=new u.b,Y=null;const p=()=>{f&&(F&&f.removeEventListener("progress",F),Z&&f.removeEventListener("readystatechange",Z),f.removeEventListener("loadend",U))};let U=()=>{p(),J.onCompleteObservable.notifyObservers(J),J.onCompleteObservable.clear(),F=void 0,Z=null,U=null,d=void 0,t=void 0,x=void 0};J.abort=()=>{s=!0,U&&U(),f&&f.readyState!==(XMLHttpRequest.DONE||4)&&f.abort(),null!==Y&&(clearTimeout(Y),Y=null),f=null};const k=Z=>{const x=Z.message||"Unknown error";d&&f?d(new M(x,f)):c.d.Error(x)},m=c=>{if(f){if(f.open("GET",o),t)try{t(f)}catch(J){return void k(J)}j&&(f.responseType="arraybuffer"),F&&f.addEventListener("progress",F),U&&f.addEventListener("loadend",U),Z=()=>{if(!s&&f&&f.readyState===(XMLHttpRequest.DONE||4)){if(Z&&f.removeEventListener("readystatechange",Z),f.status>=200&&f.status<300||0===f.status&&(!(0,G.h)()||B())){const Z=j?f.response:f.responseText;if(null!==Z){try{x&&x(Z,f)}catch(J){k(J)}return}}const F=C.DefaultRetryStrategy;if(F){const Z=F(o,f,c);if(-1!==Z)return p(),f=new u.b,void(Y=setTimeout((()=>m(c+1)),Z))}const t=new M("Error status: "+f.status+" "+f.statusText+" - Unable to load "+o,f);d&&d(t)}},f.addEventListener("readystatechange",Z),f.send()}};m(0)};if(Y&&Y.enableSceneOffline){const u=Z=>{Z&&Z.status>400?d&&d(Z):p()},G=()=>{Y&&Y.loadFile(C.BaseUrl+Z,(Z=>{!s&&x&&x(Z),J.onCompleteObservable.notifyObservers(J)}),F?Z=>{!s&&F&&F(Z)}:void 0,u,j)};Y.open(G,u)}else p();return J},R=Z=>{const{match:x,type:F}=l(Z);if(x)return F||void 0;const u=Z.lastIndexOf(".");switch(Z.substring(u+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Cf":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},B=()=>"undefined"!==typeof location&&"file:"===location.protocol,v=Z=>U.test(Z),l=Z=>{const x=U.exec(Z);if(null===x||0===x.length)return{match:!1,type:""};return{match:!0,type:x[0].replace("data:","").replace("base64,","")}};function i(Z){return(0,d.c)(Z.split(",")[1])}const e=Z=>(0,d.e)(Z.split(",")[1]);let b;p.d._FileToolsLoadImage=S,J.c.loadFile=y,t.r.loadFile=y;((Z,x,F,u,G,f,Y,j,d,t)=>{b={DecodeBase64UrlToBinary:Z,DecodeBase64UrlToString:x,DefaultRetryStrategy:F.DefaultRetryStrategy,BaseUrl:F.BaseUrl,CorsBehavior:F.CorsBehavior,PreprocessUrl:F.PreprocessUrl,IsBase64DataUrl:u,IsFileURL:G,LoadFile:f,LoadImage:Y,ReadFile:j,RequestFile:d,SetCorsBehavior:t},Object.defineProperty(b,"DefaultRetryStrategy",{get:function(){return F.DefaultRetryStrategy},set:function(Z){F.DefaultRetryStrategy=Z}}),Object.defineProperty(b,"BaseUrl",{get:function(){return F.BaseUrl},set:function(Z){F.BaseUrl=Z}}),Object.defineProperty(b,"PreprocessUrl",{get:function(){return F.PreprocessUrl},set:function(Z){F.PreprocessUrl=Z}}),Object.defineProperty(b,"CorsBehavior",{get:function(){return F.CorsBehavior},set:function(Z){F.CorsBehavior=Z}})})(i,e,C,v,B,y,S,K,q,L)},11144:(Z,x,F)=>{function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(Z=>{const x=16*Math.random()|0;return("x"===Z?x:3&x|8).toString(16)}))}F.d(x,{c:()=>u})},11134:(Z,x,F)=>{F.d(x,{c:()=>f});var u=F(11012),G=F(11136);class f{static Instantiate(Z){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[Z])return this.RegisteredExternalClasses[Z];const x=(0,G.e)(Z);if(x)return x;u.d.Warn(Z+" not found, you may have missed an import.");const F=Z.split(".");let f=window||this;for(let u=0,G=F.length;u<G;u++)f=f[F[u]];return"function"!==typeof f?null:f}}f.RegisteredExternalClasses={}},11022:(Z,x,F)=>{F.d(x,{e:()=>G});var u=F(11004);class G{static get Now(){return(0,u.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11056:(Z,x,F)=>{F.d(x,{c:()=>Y,e:()=>f,i:()=>u,j:()=>G});const u=Z=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(Z);let x="";for(let F=0;F<Z.byteLength;F++)x+=String.fromCharCode(Z[F]);return x},G=Z=>{const x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F,u,G,f,Y,j,d,t="",o=0;const c=ArrayBuffer.isView(Z)?new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength):new Uint8Array(Z);for(;o<c.length;)F=c[o++],u=o<c.length?c[o++]:Number.NaN,G=o<c.length?c[o++]:Number.NaN,f=F>>2,Y=(3&F)<<4|u>>4,j=(15&u)<<2|G>>6,d=63&G,isNaN(u)?j=d=64:isNaN(G)&&(d=64),t+=x.charAt(f)+x.charAt(Y)+x.charAt(j)+x.charAt(d);return t},f=Z=>atob(Z),Y=Z=>{const x=f(Z),F=x.length,u=new Uint8Array(new ArrayBuffer(F));for(let G=0;G<F;G++)u[G]=x.charCodeAt(G);return u.buffer}},11147:(Z,x,F)=>{function u(Z){let x=1;do{x*=2}while(x<Z);return x===Z}function G(Z,x,F){return Z*(1-F)+x*F}function f(Z){const x=Y(Z),F=j(Z);return x-Z>Z-F?F:x}function Y(Z){return Z--,Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,Z|=Z>>16,++Z}function j(Z){return Z|=Z>>1,Z|=Z>>2,Z|=Z>>4,Z|=Z>>8,(Z|=Z>>16)-(Z>>1)}function d(Z,x){let F;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:F=j(Z);break;case 2:F=f(Z);break;default:F=Y(Z)}return Math.min(F,x)}F.d(x,{c:()=>j,g:()=>d,i:()=>u,m:()=>G,q:()=>f})},10994:(Z,x,F)=>{F.r(x),F.d(x,{AsyncLoop:()=>m,Tools:()=>k,className:()=>M});var u=F(11e3),G=F(11004),f=F(11012),Y=F(11018),j=F(11022),d=F(11029),t=F(11031),o=F(11037),c=F(11041),s=F(11072),J=F(11134),p=F(11144),U=F(11147);class k{static get BaseUrl(){return c.e.BaseUrl}static set BaseUrl(Z){c.e.BaseUrl=Z}static get CleanUrl(){return c.e.CleanUrl}static set CleanUrl(Z){c.e.CleanUrl=Z}static IsAbsoluteUrl(Z){return 0===Z.indexOf("//")||-1!==Z.indexOf("://")&&(-1!==Z.indexOf(".")&&(-1!==Z.indexOf("/")&&(!(Z.indexOf(":")>Z.indexOf("/"))&&(Z.indexOf("://")<Z.indexOf(".")||(0===Z.indexOf("data:")||0===Z.indexOf("blob:"))))))}static set ScriptBaseUrl(Z){c.e.ScriptBaseUrl=Z}static get ScriptBaseUrl(){return c.e.ScriptBaseUrl}static set CDNBaseUrl(Z){k.ScriptBaseUrl=Z,k.AssetBaseUrl=Z}static set ScriptPreprocessUrl(Z){c.e.ScriptPreprocessUrl=Z}static get ScriptPreprocessUrl(){return c.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return c.e.DefaultRetryStrategy}static set DefaultRetryStrategy(Z){c.e.DefaultRetryStrategy=Z}static get CorsBehavior(){return c.e.CorsBehavior}static set CorsBehavior(Z){c.e.CorsBehavior=Z}static get UseFallbackTexture(){return o.c.UseFallbackTexture}static set UseFallbackTexture(Z){o.c.UseFallbackTexture=Z}static get RegisteredExternalClasses(){return J.c.RegisteredExternalClasses}static set RegisteredExternalClasses(Z){J.c.RegisteredExternalClasses=Z}static get fallbackTexture(){return o.c.FallbackTexture}static set fallbackTexture(Z){o.c.FallbackTexture=Z}static FetchToRef(Z,x,F,u,G,f){const Y=4*((Math.abs(Z)*F%F|0)+(Math.abs(x)*u%u|0)*F);f.r=G[Y]/255,f.g=G[Y+1]/255,f.b=G[Y+2]/255,f.a=G[Y+3]/255}static Mix(Z,x,F){return 0}static Instantiate(Z){return J.c.Instantiate(Z)}static SetImmediate(Z){s.d.SetImmediate(Z)}static IsExponentOfTwo(Z){return!0}static FloatRound(Z){return Math.fround(Z)}static GetFilename(Z){const x=Z.lastIndexOf("/");return x<0?Z:Z.substring(x+1)}static GetFolderPath(Z){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const F=Z.lastIndexOf("/");return F<0?x?Z:"":Z.substring(0,F+1)}static ToDegrees(Z){return 180*Z/Math.PI}static ToRadians(Z){return Z*Math.PI/180}static SmoothAngleChange(Z,x){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const u=this.ToRadians(Z),G=this.ToRadians(x);return this.ToDegrees(Math.atan2((1-F)*Math.sin(G)+F*Math.sin(u),(1-F)*Math.cos(G)+F*Math.cos(u)))}static MakeArray(Z,x){return!0===x||void 0!==Z&&null!=Z?Array.isArray(Z)?Z:[Z]:null}static GetPointerPrefix(Z){return(0,G.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(Z,x){(0,c.z)(Z,x)}static SetReferrerPolicyBehavior(Z,x){x.referrerPolicy=Z}static get PreprocessUrl(){return c.e.PreprocessUrl}static set PreprocessUrl(Z){c.e.PreprocessUrl=Z}static LoadImage(Z,x,F,u,G,f){return(0,c.q)(Z,x,F,u,G,f)}static LoadFile(Z,x,F,u,G,f){return(0,c.p)(Z,x,F,u,G,f)}static async LoadFileAsync(Z){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((F,u)=>{(0,c.p)(Z,(Z=>{F(Z)}),void 0,void 0,x,((Z,x)=>{u(x)}))}))}static GetAssetUrl(Z){if(!Z)return"";if(k.AssetBaseUrl&&Z.startsWith(k._DefaultAssetsUrl)){const x="/"===k.AssetBaseUrl[k.AssetBaseUrl.length-1]?k.AssetBaseUrl.substring(0,k.AssetBaseUrl.length-1):k.AssetBaseUrl;return Z.replace(k._DefaultAssetsUrl,x)}return Z}static GetBabylonScriptURL(Z,x){if(!Z)return"";if(k.ScriptBaseUrl&&Z.startsWith(k._DefaultCdnUrl)){const x="/"===k.ScriptBaseUrl[k.ScriptBaseUrl.length-1]?k.ScriptBaseUrl.substring(0,k.ScriptBaseUrl.length-1):k.ScriptBaseUrl;Z=Z.replace(k._DefaultCdnUrl,x)}return Z=k.ScriptPreprocessUrl(Z),x&&(Z=k.GetAbsoluteUrl(Z)),Z}static LoadBabylonScript(Z,x,F,u){Z=k.GetBabylonScriptURL(Z),k.LoadScript(Z,x,F)}static async LoadBabylonScriptAsync(Z){return Z=k.GetBabylonScriptURL(Z),await k.LoadScriptAsync(Z)}static LoadScript(Z,x,F,u){let f=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(Z),x&&x()}catch(d){null===F||void 0===F||F(`Unable to load script '${Z}' in worker`,d)}return}if(!(0,G.h)())return void(null===F||void 0===F||F(`Cannot load script '${Z}' outside of a window or a worker`));const Y=document.getElementsByTagName("head")[0],j=document.createElement("script");f?(j.setAttribute("type","module"),j.innerText=Z):(j.setAttribute("type","text/javascript"),j.setAttribute("src",Z)),u&&(j.id=u),j.onload=()=>{x&&x()},j.onerror=x=>{F&&F(`Unable to load script '${Z}'`,x)},Y.appendChild(j)}static async LoadScriptAsync(Z,x){return await new Promise(((F,u)=>{this.LoadScript(Z,(()=>{F()}),((Z,x)=>{u(x||new Error(Z))}),x)}))}static ReadFileAsDataURL(Z,x,F){const G=new FileReader,f={onCompleteObservable:new u.b,abort:()=>G.abort()};return G.onloadend=()=>{f.onCompleteObservable.notifyObservers(f)},G.onload=Z=>{x(Z.target.result)},G.onprogress=F,G.readAsDataURL(Z),f}static ReadFile(Z,x,F,u,G){return(0,c.u)(Z,x,F,u,G)}static FileAsURL(Z){const x=new Blob([Z]);return window.URL.createObjectURL(x)}static Format(Z){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Z.toFixed(x)}static DeepCopy(Z,x,F,u){Y.b.DeepCopy(Z,x,F,u)}static IsEmpty(Z){for(const x in Z)if(Object.prototype.hasOwnProperty.call(Z,x))return!1;return!0}static RegisterTopRootEvents(Z,x){for(let u=0;u<x.length;u++){const G=x[u];Z.addEventListener(G.name,G.handler,!1);try{window.parent&&window.parent.addEventListener(G.name,G.handler,!1)}catch(F){}}}static UnregisterTopRootEvents(Z,x){for(let u=0;u<x.length;u++){const G=x[u];Z.removeEventListener(G.name,G.handler);try{Z.parent&&Z.parent.removeEventListener(G.name,G.handler)}catch(F){}}}static async DumpFramebuffer(Z,x,F,u){throw(0,d.e)("DumpTools")}static DumpData(Z,x,F,u){throw(0,d.e)("DumpTools")}static async DumpDataAsync(Z,x,F){throw(0,d.e)("DumpTools")}static _IsOffScreenCanvas(Z){return void 0!==Z.convertToBlob}static ToBlob(Z,x){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",u=arguments.length>3?arguments[3]:void 0;k._IsOffScreenCanvas(Z)||Z.toBlob||(Z.toBlob=function(Z,x,F){setTimeout((()=>{const u=atob(this.toDataURL(x,F).split(",")[1]),G=u.length,f=new Uint8Array(G);for(let Z=0;Z<G;Z++)f[Z]=u.charCodeAt(Z);Z(new Blob([f]))}))}),k._IsOffScreenCanvas(Z)?Z.convertToBlob({type:F,quality:u}).then((Z=>x(Z))):Z.toBlob((function(Z){x(Z)}),F,u)}static DownloadBlob(Z,x){if("download"in document.createElement("a")){if(!x){const Z=new Date;x="screenshot_"+((Z.getFullYear()+"-"+(Z.getMonth()+1)).slice(2)+"-"+Z.getDate()+"_"+Z.getHours()+"-"+("0"+Z.getMinutes()).slice(-2))+".png"}k.Download(Z,x)}else if(Z&&"undefined"!==typeof URL){const x=URL.createObjectURL(Z),F=window.open("");if(!F)return;const u=F.document.createElement("img");u.onload=function(){URL.revokeObjectURL(x)},u.src=x,F.document.body.appendChild(u)}}static EncodeScreenshotCanvasData(Z,x){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",u=arguments.length>3?arguments[3]:void 0,G=arguments.length>4?arguments[4]:void 0;if("string"!==typeof u&&x){if(x){if(k._IsOffScreenCanvas(Z))return void Z.convertToBlob({type:F,quality:G}).then((Z=>{const F=new FileReader;F.readAsDataURL(Z),F.onloadend=()=>{const Z=F.result;x(Z)}}));const u=Z.toDataURL(F,G);x(u)}}else this.ToBlob(Z,(function(Z){Z&&k.DownloadBlob(Z,u),x&&x("")}),F,G)}static Download(Z,x){if("undefined"===typeof URL)return;const F=window.URL.createObjectURL(Z),u=document.createElement("a");document.body.appendChild(u),u.style.display="none",u.href=F,u.download=x,u.addEventListener("click",(()=>{u.parentElement&&u.parentElement.removeChild(u)})),u.click(),window.URL.revokeObjectURL(F)}static BackCompatCameraNoPreventDefault(Z){return"boolean"===typeof Z[0]?Z[0]:"boolean"===typeof Z[1]&&Z[1]}static CreateScreenshot(Z,x,F,u){throw(0,d.e)("ScreenshotTools")}static async CreateScreenshotAsync(Z,x,F){throw(0,d.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(Z,x,F,u){throw(0,d.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(Z,x,F){throw(0,d.e)("ScreenshotTools")}static RandomId(){return(0,p.c)()}static IsBase64(Z){return(0,c.k)(Z)}static DecodeBase64(Z){return(0,c.c)(Z)}static get errorsCount(){return f.d.errorsCount}static Log(Z){f.d.Log(Z)}static Warn(Z){f.d.Warn(Z)}static Error(Z){f.d.Error(Z)}static get LogCache(){return f.d.LogCache}static ClearLogCache(){f.d.ClearLogCache()}static set LogLevels(Z){f.d.LogLevels=Z}static set PerformanceLogLevel(Z){return(Z&k.PerformanceUserMarkLogLevel)===k.PerformanceUserMarkLogLevel?(k.StartPerformanceCounter=k._StartUserMark,void(k.EndPerformanceCounter=k._EndUserMark)):(Z&k.PerformanceConsoleLogLevel)===k.PerformanceConsoleLogLevel?(k.StartPerformanceCounter=k._StartPerformanceConsole,void(k.EndPerformanceCounter=k._EndPerformanceConsole)):(k.StartPerformanceCounter=k._StartPerformanceCounterDisabled,void(k.EndPerformanceCounter=k._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(Z,x){}static _EndPerformanceCounterDisabled(Z,x){}static _StartUserMark(Z){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!k._Performance){if(!(0,G.h)())return;k._Performance=window.performance}x&&k._Performance.mark&&k._Performance.mark(Z+"-Begin")}static _EndUserMark(Z){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&k._Performance.mark&&(k._Performance.mark(Z+"-End"),k._Performance.measure(Z,Z+"-Begin",Z+"-End"))}static _StartPerformanceConsole(Z){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(k._StartUserMark(Z,x),console.time&&console.time(Z))}static _EndPerformanceConsole(Z){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];x&&(k._EndUserMark(Z,x),console.timeEnd(Z))}static get Now(){return j.e.Now}static GetClassName(Z){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null;if(!x&&Z.getClassName)F=Z.getClassName();else{if(Z instanceof Object){F=(x?Z:Object.getPrototypeOf(Z)).constructor.__bjsclassName__}F||(F=typeof Z)}return F}static First(Z,x){for(const F of Z)if(x(F))return F;return null}static getFullClassName(Z){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1],F=null,u=null;if(!x&&Z.getClassName)F=Z.getClassName();else{if(Z instanceof Object){const G=x?Z:Object.getPrototypeOf(Z);F=G.constructor.__bjsclassName__,u=G.constructor.__bjsmoduleName__}F||(F=typeof Z)}return F?(null!=u?u+".":"")+F:null}static async DelayAsync(Z){await new Promise((x=>{setTimeout((()=>{x()}),Z)}))}static IsSafari(){return!!(0,G.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function M(Z,x){return F=>{F.__bjsclassName__=Z,F.__bjsmoduleName__=null!=x?x:null}}k.AssetBaseUrl="",k.UseCustomRequestHeaders=!1,k.CustomRequestHeaders=t.b.CustomRequestHeaders,k.GetDOMTextContent=G.b,k._DefaultCdnUrl="https://cdn.babylonjs.com",k._DefaultAssetsUrl="https://assets.babylonjs.com/core",k.GetAbsoluteUrl="object"===typeof document?Z=>{const x=document.createElement("a");return x.href=Z,x.href}:"function"===typeof URL&&"object"===typeof location?Z=>new URL(Z,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},k.NoneLogLevel=f.d.NoneLogLevel,k.MessageLogLevel=f.d.MessageLogLevel,k.WarningLogLevel=f.d.WarningLogLevel,k.ErrorLogLevel=f.d.ErrorLogLevel,k.AllLogLevel=f.d.AllLogLevel,k.IsWindowObjectExist=G.h,k.PerformanceNoneLogLevel=0,k.PerformanceUserMarkLogLevel=1,k.PerformanceConsoleLogLevel=2,k.StartPerformanceCounter=k._StartPerformanceCounterDisabled,k.EndPerformanceCounter=k._EndPerformanceCounterDisabled;class m{constructor(Z,x,F){let u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=Z,this.index=u-1,this._done=!1,this._fn=x,this._successCallback=F}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(Z,x,F){const u=new m(Z,x,F,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return u.executeNext(),u}static SyncAsyncForLoop(Z,x,F,u,G){let f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return m.Run(Math.ceil(Z/x),(u=>{G&&G()?u.breakLoop():setTimeout((()=>{for(let f=0;f<x;++f){const Y=u.index*x+f;if(Y>=Z)break;if(F(Y),G&&G()){u.breakLoop();break}}u.executeNext()}),f)}),u)}}k.Mix=U.m,k.IsExponentOfTwo=U.i,o.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11136:(Z,x,F)=>{F.d(x,{e:()=>f,g:()=>G});const u={};function G(Z,x){u[Z]=x}function f(Z){return u[Z]}},11031:(Z,x,F)=>{F.d(x,{b:()=>u});class u{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(u.CustomRequestHeaders).length>0||u.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const Z in u.CustomRequestHeaders){const x=u.CustomRequestHeaders[Z];x&&this._xhr.setRequestHeader(Z,x)}}_shouldSkipRequestModifications(Z){return u.SkipRequestModificationForBabylonCDN&&(Z.includes("preview.babylonjs.com")||Z.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(Z){this._xhr.onprogress=Z}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(Z){this._xhr.responseType=Z}get timeout(){return this._xhr.timeout}set timeout(Z){this._xhr.timeout=Z}addEventListener(Z,x,F){this._xhr.addEventListener(Z,x,F)}removeEventListener(Z,x,F){this._xhr.removeEventListener(Z,x,F)}abort(){this._xhr.abort()}send(Z){u.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(Z)}open(Z,x){for(const F of u.CustomRequestModifiers){if(this._shouldSkipRequestModifications(x))return;x=F(this._xhr,x)||x}x=(x=x.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=x,this._xhr.open(Z,x,!0)}setRequestHeader(Z,x){this._xhr.setRequestHeader(Z,x)}getResponseHeader(Z){return this._xhr.getResponseHeader(Z)}}u.CustomRequestHeaders={},u.CustomRequestModifiers=new Array,u.SkipRequestModificationForBabylonCDN=!0}}]);