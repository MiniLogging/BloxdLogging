"use strict";(self.rsqbdnwe5e=self.rsqbdnwe5e||[]).push([[8],{12270:(N,p,T)=>{T.d(p,{c:()=>w});var A=T(12231),a=T(12205),C=T(12276),U=T(12297),X=T(12216);class y{constructor(){let N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,N&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(N){this._zOffset!==N&&(this._zOffset=N,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(N){this._zOffsetUnits!==N&&(this._zOffsetUnits=N,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(N){this._cullFace!==N&&(this._cullFace=N,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(N){this._cull!==N&&(this._cull=N,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(N){this._depthFunc!==N&&(this._depthFunc=N,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(N){this._depthMask!==N&&(this._depthMask=N,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(N){this._depthTest!==N&&(this._depthTest=N,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(N){this._frontFace!==N&&(this._frontFace=N,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(N){this.isDirty&&(this._isCullDirty&&(this.cull?N.enable(N.CULL_FACE):N.disable(N.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(N.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(N.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?N.enable(N.DEPTH_TEST):N.disable(N.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(N.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(N.enable(N.POLYGON_OFFSET_FILL),N.polygonOffset(this.zOffset,this.zOffsetUnits)):N.disable(N.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(N.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class e{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(N){this._func!==N&&(this._func=N,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(N){this._funcRef!==N&&(this._funcRef=N,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(N){this._funcMask!==N&&(this._funcMask=N,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(N){this._opStencilFail!==N&&(this._opStencilFail=N,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(N){this._opDepthFail!==N&&(this._opDepthFail=N,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(N){this._opStencilDepthPass!==N&&(this._opStencilDepthPass=N,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(N){this._mask!==N&&(this._mask=N,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(N){this._enabled!==N&&(this._enabled=N,this._isStencilTestDirty=!0)}constructor(){let N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,N&&this.reset()}reset(){var N;this.stencilMaterial=void 0,null===(N=this.stencilGlobal)||void 0===N||N.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(N){var p;if(!N)return;const T=!this.useStencilGlobalOnly&&!(null===(p=this.stencilMaterial)||void 0===p||!p.enabled);this.enabled=T?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=T?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=T?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=T?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=T?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=T?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=T?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=T?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?N.enable(N.STENCIL_TEST):N.disable(N.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(N.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(N.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(N.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class H{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=H.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=H.KEEP,this.opDepthFail=H.KEEP,this.opStencilDepthPass=H.REPLACE}get stencilFunc(){return this.func}set stencilFunc(N){this.func=N}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(N){this.funcRef=N}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(N){this.funcMask=N}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(N){this.opStencilFail=N}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(N){this.opDepthFail=N}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(N){this.opStencilDepthPass=N}get stencilMask(){return this.mask}set stencilMask(N){this.mask=N}get stencilTest(){return this.enabled}set stencilTest(N){this.enabled=N}}H.ALWAYS=519,H.KEEP=7680,H.REPLACE=7681;class M{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(N){this._alphaBlend!==N&&(this._alphaBlend=N,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(N,p,T,A){this._blendConstants[0]===N&&this._blendConstants[1]===p&&this._blendConstants[2]===T&&this._blendConstants[3]===A||(this._blendConstants[0]=N,this._blendConstants[1]=p,this._blendConstants[2]=T,this._blendConstants[3]=A,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(N,p,T,A){this._blendFunctionParameters[0]===N&&this._blendFunctionParameters[1]===p&&this._blendFunctionParameters[2]===T&&this._blendFunctionParameters[3]===A||(this._blendFunctionParameters[0]=N,this._blendFunctionParameters[1]=p,this._blendFunctionParameters[2]=T,this._blendFunctionParameters[3]=A,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(N,p){this._blendEquationParameters[0]===N&&this._blendEquationParameters[1]===p||(this._blendEquationParameters[0]=N,this._blendEquationParameters[1]=p,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(N){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?N.enable(N.BLEND):N.disable(N.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(N.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(N.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(N.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var b=T(12218),l=T(12302),k=T(12198),x=T(12194),I=T(12261),L=T(12314);function n(N,p){if((0,k.h)()){const{requestAnimationFrame:T}=p||window;if("function"===typeof T)return T(N)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(N);return setTimeout(N,16)}class w{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(N){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get BU(){return this._useReverseDepthBuffer}set BU(N){N!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=N,this._depthCullingState.depthFunc=N?518:515)}setColorWrite(N){N!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=N)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(N){if(N)return this.isNDCHalfZRange?N.IS_NDC_HALF_ZRANGE="":delete N.IS_NDC_HALF_ZRANGE,this.BU?N.USE_REVERSE_DEPTHBUFFER="":delete N.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?N.USE_EXACT_SRGB_CONVERSIONS="":delete N.USE_EXACT_SRGB_CONVERSIONS);{let N="";return this.isNDCHalfZRange&&(N+="#define IS_NDC_HALF_ZRANGE"),this.BU&&(N&&(N+="\n"),N+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(N&&(N+="\n"),N+="#define USE_EXACT_SRGB_CONVERSIONS"),N}}_rebuildInternalTextures(){const N=this._internalTexturesCache.slice();for(const p of N)p._rebuild()}_rebuildRenderTargetWrappers(){const N=this._renderTargetWrapperCache.slice();for(const p of N)p._rebuild()}_rebuildEffects(){for(const N in this._compiledEffects){const p=this._compiledEffects[N];p._pipelineContext=null,p._prepareEffect()}C.Effect.ResetCache()}_rebuildGraphicsResources(){var N;this.wipeCaches(!0),this._rebuildEffects(),null===(N=this._rebuildComputeEffects)||void 0===N||N.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){a.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(N){setTimeout((()=>{this._clearEmptyResources();const p=this._depthCullingState.depthTest,T=this._depthCullingState.depthFunc,A=this._depthCullingState.depthMask,a=this._stencilState.stencilTest;N(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=p,this._depthCullingState.depthFunc=T,this._depthCullingState.depthMask=A,this._stencilState.stencilTest=a,this._flagContextRestored()}),0)}get X(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(N){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(N){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const N=new Uint8Array(4),p=[N,N,N,N,N,N];this._emptyCubeTexture=this.createRawCubeTexture(p,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(N){if(!N)return this._activeRenderLoops.length=0,void this._cancelFrame();const p=this._activeRenderLoops.indexOf(N);p>=0&&(this._activeRenderLoops.splice(p,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const N=this._frameHandler;if(this._frameHandler=0,(0,k.h)()){const{cancelAnimationFrame:p}=this.getHostWindow()||window;if("function"===typeof p)return p(N)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(N);return clearTimeout(N)}}dU(){this.onBeginFrameObservable.notifyObservers(this)}tU(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(N){this._maxFPS=N,void 0!==N&&(this._minFrameTime=N<=0?Number.MAX_VALUE:1e3/N)}_isOverFrameTime(N){if(!N||void 0===this._maxFPS)return!1;const p=N-this._lastFrameTime;return this._lastFrameTime=N,this._renderAccumulator+=p,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(N){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(N)){let N=!0;(this.X||!this.renderEvenInBackground&&this._windowIsBackground)&&(N=!1),N&&(this.dU(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.tU())}}_renderLoop(N){this._processFrame(N),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let N=0;N<this._activeRenderLoops.length;N++){(0,this._activeRenderLoops[N])()}}_renderViews(){return!1}_queueNewFrame(N,p){return n(N,p)}runRenderLoop(N){-1===this._activeRenderLoops.indexOf(N)&&(this._activeRenderLoops.push(N),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(N){this._depthCullingState.depthTest=N}setZOffset(N){this._depthCullingState.zOffset=this.BU?-N:N}getZOffset(){const N=this._depthCullingState.zOffset;return this.BU?-N:N}setZOffsetUnits(N){this._depthCullingState.zOffsetUnits=this.BU?-N:N}getZOffsetUnits(){const N=this._depthCullingState.zOffsetUnits;return this.BU?-N:N}getHostWindow(){return(0,k.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(N){this._compatibilityMode=!0}_rebuildTextures(){for(const N of this.scenes)N._rebuildTextures();for(const N of this._virtualScenes)N._rebuildTextures()}_releaseRenderTargetWrapper(N){const p=this._renderTargetWrapperCache.indexOf(N);-1!==p&&this._renderTargetWrapperCache.splice(p,1)}get currentViewport(){return this._cachedViewport}setViewport(N,p,T){const A=p||this.getRenderWidth(),a=T||this.getRenderHeight(),C=N.x||0,U=N.y||0;this._cachedViewport=N,this._viewport(C*A,U*a,A*N.width,a*N.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(N){return new Path2D(N)}get description(){let N=this.name+this.version;return this._caps.parallelShaderCompile&&(N+=" - Parallel shader compilation"),N}_createTextureBase(N,p,T,C){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,e=arguments.length>7?arguments[7]:void 0,H=arguments.length>8?arguments[8]:void 0,M=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,b=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,k=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,x=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,I=arguments.length>13?arguments[13]:void 0,n=arguments.length>14?arguments[14]:void 0,g=arguments.length>15?arguments[15]:void 0;const P="data:"===(N=N||"").substring(0,5),i="blob:"===N.substring(0,5),K=P&&-1!==N.indexOf(";base64,"),F=b||new l.d(this,1);F!==b&&(F.label=N.substring(0,60));const v=N;!this._transformTextureUrl||K||b||M||(N=this._transformTextureUrl(N)),v!==N&&(F._originalUrl=v);const W=N.lastIndexOf(".");let z=x||(W>-1?N.substring(W).toLowerCase():"");z.indexOf("?")>-1&&(z=z.split("?")[0]);const R=(0,L.e)(z,I);C&&C.addPendingData(F),F.url=N,F.generateMipMaps=!p,F.samplingMode=U,F.invertY=T,F._useSRGBBuffer=this._getUseSRGBBuffer(!!g,p),this._doNotHandleContextLost||(F._buffer=M);let J=null;X&&!b&&(J=F.onLoadedObservable.add(X)),b||this._internalTexturesCache.push(F);const f=(T,b)=>{C&&C.removePendingData(F),N===v?(J&&F.onLoadedObservable.remove(J),A.b.UseFallbackTexture&&N!==A.b.FallbackTexture&&this._createTextureBase(A.b.FallbackTexture,p,F.invertY,C,U,null,y,e,H,M,F),T=(T||"Unknown error")+(A.b.UseFallbackTexture?" - Fallback texture was used":""),F.onErrorObservable.notifyObservers({message:T,exception:b}),y&&y(T,b)):(a.d.Warn(`Failed to load ${N}, falling back to ${v}`),this._createTextureBase(v,p,F.invertY,C,U,X,y,e,H,M,F,k,x,I,n,g))};if(R){const p=async N=>{(await R).loadData(N,F,((N,p,T,A,a,X)=>{X?f("TextureLoader failed to load data"):e(F,z,C,{width:N,height:p},F.invertY,!T,A,(()=>(a(),!1)),U)}),n)};M?M instanceof ArrayBuffer?p(new Uint8Array(M)):ArrayBuffer.isView(M)?p(M):y&&y("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(N,(N=>{p(new Uint8Array(N))}),void 0,C?C.offlineProvider:void 0,!0,((N,p)=>{f("Unable to load "+(N&&N.responseURL,p))}))}else{const T=N=>{i&&!this._doNotHandleContextLost&&(F._buffer=N),e(F,z,C,N,F.invertY,p,!1,H,U)};!P||K?M&&("string"===typeof M.decoding||M.close)?T(M):w._FileToolsLoadImage(N||"",T,f,C?C.offlineProvider:null,I,F.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof M||M instanceof ArrayBuffer||ArrayBuffer.isView(M)||M instanceof Blob?w._FileToolsLoadImage(M,T,f,C?C.offlineProvider:null,I,F.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):M&&T(M)}return F}_rebuildBuffers(){for(const N of this._uniformBuffers)N._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,k.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const N in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,N)&&(this._boundTexturesCache[N]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(N){this._name=N}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(N){this._hardwareScalingLevel=N,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(N){this._doNotHandleContextLost=N}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(N,p,T){var a,C;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new y,this._stencilStateComposer=new e,this._stencilState=new H,this._alphaState=new M,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new x.c,this.onCanvasFocusObservable=new x.c,this.onNewSceneAddedObservable=new x.c,this.onResizeObservable=new x.c,this.onCanvasPointerOutObservable=new x.c,this.onEffectErrorObservable=new x.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new x.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=N=>this._renderLoop(N),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new x.c,this.onAfterShaderCompilationObservable=new x.c,this.onBeginFrameObservable=new x.c,this.onEndFrameObservable=new x.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new x.c,this.onContextRestoredObservable=new x.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.SU=new x.c,this.onReleaseEffectsObservable=new x.c,A.b.Instances.push(this),this.startTime=X.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,U.b.SetMatrixPrecision(!!p.useHighPrecisionMatrix),(0,k.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=T??!1,p.antialias=N??p.antialias,p.deterministicLockstep=p.deterministicLockstep??!1,p.lockstepMaxSteps=p.lockstepMaxSteps??4,p.timeStep=p.timeStep??1/60,p.sU=p.sU??!0,this._audioContext=(null===(a=p.audioEngineOptions)||void 0===a?void 0:a.audioContext)??null,this._audioDestination=(null===(C=p.audioEngineOptions)||void 0===C?void 0:C.audioDestination)??null,this.premultipliedAlpha=p.premultipliedAlpha??!0,this._doNotHandleContextLost=!!p.doNotHandleContextLost,this._isStencilEnable=!!p.sU,this.useExactSrgbConversions=p.useExactSrgbConversions??!1;const b=(0,k.h)()&&window.devicePixelRatio||1,l=p.limitDeviceRatio||b;T=T||p.adaptToDeviceRatio||!1,this._hardwareScalingLevel=T?1/Math.min(l,b):1,this._lastDevicePixelRatio=b,this._creationOptions=p}resize(){let N,p,T=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const N=(0,k.h)()&&window.devicePixelRatio||1,p=this._lastDevicePixelRatio/N;this._lastDevicePixelRatio=N,this._hardwareScalingLevel*=p}if((0,k.h)()&&(0,k.d)())if(this._renderingCanvas){var A,a;const T=null===(A=(a=this._renderingCanvas).getBoundingClientRect)||void 0===A?void 0:A.call(a);N=this._renderingCanvas.clientWidth||(null===T||void 0===T?void 0:T.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,p=this._renderingCanvas.clientHeight||(null===T||void 0===T?void 0:T.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else N=window.innerWidth,p=window.innerHeight;else N=this._renderingCanvas?this._renderingCanvas.width:100,p=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(N/this._hardwareScalingLevel,p/this._hardwareScalingLevel,T)}setSize(N,p){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(N|=0,p|=0,!T&&this._renderingCanvas.width===N&&this._renderingCanvas.height===p)return!1;if(this._renderingCanvas.width=N,this._renderingCanvas.height=p,this.scenes){for(let N=0;N<this.scenes.length;N++){const p=this.scenes[N];for(let N=0;N<p.cameras.length;N++){p.cameras[N]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(N,p,T,A,a,C,U,X,y,e,H){throw(0,b.c)("engine.rawTexture")}createRawCubeTexture(N,p,T,A,a,C,U,X){throw(0,b.c)("engine.rawTexture")}createRawTexture3D(N,p,T,A,a,C,U,X,y,e,H){throw(0,b.c)("engine.rawTexture")}createRawTexture2DArray(N,p,T,A,a,C,U,X,y,e,H){throw(0,b.c)("engine.rawTexture")}_sharedInit(N){this._renderingCanvas=N}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const N=navigator.userAgent;this.hostInformation.isMobile=-1!==N.indexOf("Mobile")||-1!==N.indexOf("Mac")&&(0,k.d)()&&"ontouchend"in document},this._checkForMobile(),(0,k.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(N){return document.createElement("video")}_reportDrawCall(){var N;let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(N=this._drawCalls)||void 0===N||N.addCount(p,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(N,p){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(N,p){return createImageBitmap(N,p)}resizeImageBitmap(N,p,T){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(N){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(N,p){if("undefined"===typeof document)return new OffscreenCanvas(N,p);const T=document.createElement("canvas");return T.width=N,T.height=p,T}createCanvas(N,p){return w._CreateCanvas(N,p)}static _FileToolsLoadImage(N,p,T,A,a,C,U){throw(0,b.c)("FileTools")}_loadFile(N,p,T,A,a,C){const U=(0,I.l)(N,p,T,A,a,C);return this._activeRequests.push(U),U.onCompleteObservable.add((()=>{const N=this._activeRequests.indexOf(U);-1!==N&&this._activeRequests.splice(N,1)})),U}static _FileToolsLoadFile(N,p,T,A,a,C){if(I.d.loadFile)return I.d.loadFile(N,p,T,A,a,C);throw(0,b.c)("FileTools")}dispose(){var N;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(N=this.releaseComputeEffects)||void 0===N||N.call(this),C.Effect.ResetCache();for(const T of this._activeRequests)T.abort();this._boundRenderFunction=null,this.SU.notifyObservers(this),this.SU.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,k.h)()&&window.removeEventListener("resize",this._checkForMobile);const p=A.b.Instances.indexOf(this);p>=0&&A.b.Instances.splice(p,1),A.b.Instances.length||(A.b.OnEnginesDisposedObservable.notifyObservers(this),A.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(N){throw(0,b.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(N,p){for(let T=0;T<A.b.Instances.length;T++){const a=A.b.Instances[T];for(let T=0;T<a.scenes.length;T++)a.scenes[T].markAllMaterialsAsDirty(N,p)}}}w._RenderPassIdCounter=0,w._RescalePostProcessFactory=null,w.CollisionsEpsilon=.001,w.QueueNewFrame=n},12231:(N,p,T)=>{T.d(p,{b:()=>a});var A=T(12194);class a{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}a.Instances=[],a.OnEnginesDisposedObservable=new A.c,a._LastCreatedScene=null,a.UseFallbackTexture=!0,a.FallbackTexture=""},12297:(N,p,T)=>{T.d(p,{b:()=>A});class A{static SetMatrixPrecision(N){if(A.MatrixTrackPrecisionChange=!1,N&&!A.MatrixUse64Bits&&A.MatrixTrackedMatrices)for(let p=0;p<A.MatrixTrackedMatrices.length;++p){const N=A.MatrixTrackedMatrices[p],T=N.NX;N.NX=new Array(16);for(let p=0;p<16;++p)N.NX[p]=T[p]}A.MatrixUse64Bits=N,A.MatrixCurrentType=A.MatrixUse64Bits?Array:Float32Array,A.MatrixTrackedMatrices=null}}A.MatrixUse64Bits=!1,A.MatrixTrackPrecisionChange=!0,A.MatrixCurrentType=Float32Array,A.MatrixTrackedMatrices=[]},12314:(N,p,T)=>{T.d(p,{e:()=>U});var A=T(12205);const a=new Map;function C(N,p){(function(N){return a.delete(N)})(N)&&A.d.Warn(`Extension with the name '${N}' already exists`),a.set(N,p)}function U(N,p){"image/ktx"!==p&&"image/ktx2"!==p||(N=".ktx"),a.has(N)||(N.endsWith(".ies")&&C(".ies",(async()=>await T.e(15).then(T.bind(T,14783)).then((N=>new N._IESTextureLoader)))),N.endsWith(".dds")&&C(".dds",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(28)]).then(T.bind(T,14788)).then((N=>new N._DDSTextureLoader)))),N.endsWith(".basis")&&C(".basis",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(47)]).then(T.bind(T,14796)).then((N=>new N._BasisTextureLoader)))),N.endsWith(".env")&&C(".env",(async()=>await Promise.all([T.e(14),T.e(17),T.e(13),T.e(19),T.e(18),T.e(23),T.e(21),T.e(45),T.e(48)]).then(T.bind(T,14798)).then((N=>new N._ENVTextureLoader)))),N.endsWith(".hdr")&&C(".hdr",(async()=>await Promise.all([T.e(14),T.e(49)]).then(T.bind(T,14804)).then((N=>new N._HDRTextureLoader)))),(N.endsWith(".ktx")||N.endsWith(".ktx2"))&&(C(".ktx",(async()=>await T.e(30).then(T.bind(T,14808)).then((N=>new N._KTXTextureLoader)))),C(".ktx2",(async()=>await T.e(30).then(T.bind(T,14808)).then((N=>new N._KTXTextureLoader))))),N.endsWith(".tga")&&C(".tga",(async()=>await T.e(50).then(T.bind(T,14814)).then((N=>new N._TGATextureLoader)))),N.endsWith(".exr")&&C(".exr",(async()=>await T.e(16).then(T.bind(T,14819)).then((N=>new N._ExrTextureLoader)))));const A=a.get(N);return A?Promise.resolve(A(p)):null}},12302:(N,p,T)=>{T.d(p,{d:()=>U});var A,a=T(12194),C=T(12309);!function(N){N[N.Unknown=0]="Unknown",N[N.Url=1]="Url",N[N.Temp=2]="Temp",N[N.Raw=3]="Raw",N[N.Dynamic=4]="Dynamic",N[N.RenderTarget=5]="RenderTarget",N[N.MultiRenderTarget=6]="MultiRenderTarget",N[N.Cube=7]="Cube",N[N.CubeRaw=8]="CubeRaw",N[N.CubePrefiltered=9]="CubePrefiltered",N[N.Raw3D=10]="Raw3D",N[N.Raw2DArray=11]="Raw2DArray",N[N.DepthStencil=12]="DepthStencil",N[N.CubeRawRGBD=13]="CubeRawRGBD",N[N.Depth=14]="Depth"}(A||(A={}));class U extends C.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(N){this.generateMipMaps=N}get uniqueId(){return this._uniqueId}_setUniqueId(N){this._uniqueId=N}getEngine(){return this._engine}get source(){return this._source}constructor(N,p){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new a.c,this.onErrorObservable=new a.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=N,this._source=p,this._uniqueId=U._Counter++,T||(this._hardwareTexture=N._createHardwareTexture())}incrementReferences(){this._references++}updateSize(N,p){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,N,p,T),this.width=N,this.height=p,this.depth=T,this.baseWidth=N,this.baseHeight=p,this.baseDepth=T,this._size=N*p*T}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const N=this.onRebuildCallback(this),p=p=>{p._swapAndDie(this,!1),this.isReady=N.isReady};return void(N.isAsync?N.proxy.then(p):p(N.proxy))}let N;switch(this.source){case 2:case 12:case 14:break;case 1:return void(N=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(N=>{N._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:N=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),N._swapAndDie(this,!1),this.isReady=!0;break;case 10:N=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),N._swapAndDie(this,!1),this.isReady=!0;break;case 11:N=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),N._swapAndDie(this,!1),this.isReady=!0;break;case 4:N=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),N._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(N=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{N._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:N=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),N._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return N=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(N=>{N&&N._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(N._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(N){var p;let T=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(p=this._hardwareTexture)||void 0===p||p.setUsage(N._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),N._hardwareTexture=this._hardwareTexture,T&&(N._isRGBD=this._isRGBD),this._lodTextureHigh&&(N._lodTextureHigh&&N._lodTextureHigh.dispose(),N._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(N._lodTextureMid&&N._lodTextureMid.dispose(),N._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(N._lodTextureLow&&N._lodTextureLow.dispose(),N._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(N._irradianceTexture&&N._irradianceTexture.dispose(),N._irradianceTexture=this._irradianceTexture);const A=this._engine.getLoadedTexturesCache();let a=A.indexOf(this);-1!==a&&A.splice(a,1),a=A.indexOf(N),-1===a&&A.push(N)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}U._Counter=0},12309:(N,p,T)=>{T.d(p,{c:()=>A});class A{get wrapU(){return this._cachedWrapU}set wrapU(N){this._cachedWrapU=N}get wrapV(){return this._cachedWrapV}set wrapV(N){this._cachedWrapV=N}get wrapR(){return this._cachedWrapR}set wrapR(N){this._cachedWrapR=N}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(N){this._cachedAnisotropicFilteringLevel=N}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(N){this._comparisonFunction=N}get useMipMaps(){return this._useMipMaps}set useMipMaps(N){this._useMipMaps=N}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=N,this._cachedWrapV=p,this._cachedWrapR=T,this._cachedAnisotropicFilteringLevel=A,this.samplingMode=a,this._comparisonFunction=C,this}compareSampler(N){return this._cachedWrapU===N._cachedWrapU&&this._cachedWrapV===N._cachedWrapV&&this._cachedWrapR===N._cachedWrapR&&this._cachedAnisotropicFilteringLevel===N._cachedAnisotropicFilteringLevel&&this.samplingMode===N.samplingMode&&this._comparisonFunction===N._comparisonFunction&&this._useMipMaps===N._useMipMaps}}},12211:(N,p,T)=>{T.d(p,{d:()=>C});var A=T(12205);const a=(N,p,T)=>N?N.getClassName&&"Mesh"===N.getClassName()?null:!N.getClassName||"SubMesh"!==N.getClassName()&&"PhysicsBody"!==N.getClassName()?N.clone?N.clone():Array.isArray(N)?N.slice():T&&"object"===typeof N?{...N}:null:N.clone(p):null;class C{static DeepCopy(N,p,T,C){let U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const X=function(N){const p=[];do{const T=Object.getOwnPropertyNames(N);for(const N of T)-1===p.indexOf(N)&&p.push(N)}while(N=Object.getPrototypeOf(N));return p}(N);for(const e of X){if("_"===e[0]&&(!C||-1===C.indexOf(e)))continue;if(e.endsWith("Observable"))continue;if(T&&-1!==T.indexOf(e))continue;const X=N[e],H=typeof X;if("function"!==H)try{if("object"===H)if(X instanceof Uint8Array)p[e]=Uint8Array.from(X);else if(X instanceof Array){if(p[e]=[],X.length>0)if("object"==typeof X[0])for(let N=0;N<X.length;N++){const T=a(X[N],p,U);-1===p[e].indexOf(T)&&p[e].push(T)}else p[e]=X.slice(0)}else p[e]=a(X,p,U);else p[e]=X}catch(y){A.d.Warn(y.message)}}}}},12245:(N,p,T)=>{T.d(p,{e:()=>A,i:()=>a,l:()=>C});class A extends Error{}A._setPrototypeOf=Object.setPrototypeOf||((N,p)=>(N.__proto__=p,N));const a={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class C extends A{constructor(N,p,T){super(N),this.errorCode=p,this.innerError=T,this.name="RuntimeError",A._setPrototypeOf(this,C.prototype)}}},12240:(N,p,T)=>{T.d(p,{e:()=>f,f:()=>w,h:()=>W,i:()=>R,n:()=>F,k:()=>I,q:()=>i,t:()=>K,u:()=>v,w:()=>g});var A=T(12223),a=T(12198),C=T(12194);class U{}U.FilesToLoad={};var X=T(12245),y=T(12253),e=T(12257),H=T(12231),M=T(12205),b=T(12264),l=T(12261),k=T(12270);const x=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class I extends X.l{constructor(N,p){super(N,X.i.LoadFileError),this.name="LoadFileError",X.e._setPrototypeOf(this,I.prototype),p instanceof A.b?this.request=p:this.file=p}}class L extends X.l{constructor(N,p){super(N,X.i.RequestFileError),this.request=p,this.name="RequestFileError",X.e._setPrototypeOf(this,L.prototype)}}class n extends X.l{constructor(N,p){super(N,X.i.ReadFileError),this.file=p,this.name="ReadFileError",X.e._setPrototypeOf(this,n.prototype)}}const w={DefaultRetryStrategy:class{static ExponentialBackoff(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(T,A,a)=>0!==A.status||a>=N||-1!==T.indexOf("file:")?-1:Math.pow(2,a)*p}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:N=>N,ScriptBaseUrl:"",ScriptPreprocessUrl:N=>N,CleanUrl:N=>N=N.replace(/#/gm,"%23")},g=(N,p)=>{if((!N||0!==N.indexOf("data:"))&&w.CorsBehavior)if("string"===typeof w.CorsBehavior||w.CorsBehavior instanceof String)p.crossOrigin=w.CorsBehavior;else{const T=w.CorsBehavior(N);T&&(p.crossOrigin=T)}},P={getRequiredSize:null},i=function(N,p,T,a){let C,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",e=arguments.length>5?arguments[5]:void 0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:H.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===M||void 0===M||!M._features.forceBitmapOverHTMLImageElement))return T("LoadImage is only supported in web or BabylonNative environments."),null;let b=!1;N instanceof ArrayBuffer||ArrayBuffer.isView(N)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(C=URL.createObjectURL(new Blob([N],{type:X})),b=!0):C=`data:${X};base64,`+(0,y.g)(N):N instanceof Blob?(C=URL.createObjectURL(N),b=!0):(C=w.CleanUrl(N),C=w.PreprocessUrl(C));const l=p=>{if(T){const A=C||N.toString();T(`Error while trying to load image: ${0===A.indexOf("http")||A.length<=128?A:A.slice(0,128)+"..."}`,p)}};if(null!==M&&void 0!==M&&M._features.forceBitmapOverHTMLImageElement)return F(C,(A=>{M.createImageBitmap(new Blob([A],{type:X}),{premultiplyAlpha:"none",...e}).then((N=>{p(N),b&&URL.revokeObjectURL(C)})).catch((p=>{T&&T("Error while trying to load image: "+N,p)}))}),void 0,a||void 0,!0,((N,p)=>{l(p)})),null;const k=new Image;if(P.getRequiredSize){const p=P.getRequiredSize(N);p.width&&(k.width=p.width),p.height&&(k.height=p.height)}g(C,k);const x=[],I=()=>{for(const N of x)N.target.removeEventListener(N.name,N.handler);x.length=0};x.push({target:k,name:"load",handler:()=>{I(),p(k),b&&k.src&&URL.revokeObjectURL(k.src)}}),x.push({target:k,name:"error",handler:N=>{I(),l(N),b&&k.src&&URL.revokeObjectURL(k.src)}}),x.push({target:document,name:"securitypolicyviolation",handler:N=>{if(N.blockedURI!==k.src||"pX"===N.disposition)return;I();const p=new Error(`CSP violation of policy ${N.effectiveDirective} ${N.blockedURI}. Current policy is ${N.originalPolicy}`);H.b.UseFallbackTexture=!1,l(p),b&&k.src&&URL.revokeObjectURL(k.src),k.src=""}}),(()=>{for(const N of x)N.target.addEventListener(N.name,N.handler)})();const L="blob:"===C.substring(0,5),n="data:"===C.substring(0,5),i=()=>{L||n||!A.b.IsCustomRequestAvailable?k.src=C:F(C,((N,p,T)=>{const A=new Blob([N],{type:!X&&T?T:X}),a=URL.createObjectURL(A);b=!0,k.src=a}),void 0,a||void 0,!0,((N,p)=>{l(p)}))},K=()=>{a&&a.loadImage(C,k)};if(!L&&!n&&a&&a.enableTexturesOffline)a.open(K,i);else{if(-1!==C.indexOf("file:")){const N=decodeURIComponent(C.substring(5).toLowerCase());if(U.FilesToLoad[N]&&"undefined"!==typeof URL){try{let p;try{p=URL.createObjectURL(U.FilesToLoad[N])}catch(v){p=URL.createObjectURL(U.FilesToLoad[N])}k.src=p,b=!0}catch(W){k.src=""}return k}}i()}return k},K=(N,p,T,A,a)=>{const U=new FileReader,X={onCompleteObservable:new C.c,abort:()=>U.abort()};return U.onloadend=()=>X.onCompleteObservable.notifyObservers(X),a&&(U.onerror=()=>{a(new n(`Unable to read ${N.name}`,N))}),U.onload=N=>{p(N.target.result)},T&&(U.onprogress=T),A?U.readAsArrayBuffer(N):U.readAsText(N),X},F=(N,p,T,A,a,y,e)=>{if(N.name)return K(N,p,T,a,y?N=>{y(void 0,N)}:void 0);const H=N;if(-1!==H.indexOf("file:")){let N=decodeURIComponent(H.substring(5).toLowerCase());0===N.indexOf("./")&&(N=N.substring(2));const A=U.FilesToLoad[N];if(A)return K(A,p,T,a,y?N=>y(void 0,new I(N.message,N.file)):void 0)}const{match:l,type:k}=J(H);if(l){const N={onCompleteObservable:new C.c,abort:()=>()=>{}};try{const N=a?f(H):G(H);p(N,void 0,k)}catch(X){y?y(void 0,X):M.d.Error(X.message||"Failed to parse the Data URL")}return b.d.SetImmediate((()=>{N.onCompleteObservable.notifyObservers(N)})),N}return v(H,((N,T)=>{p(N,null===T||void 0===T?void 0:T.responseURL,null===T||void 0===T?void 0:T.getResponseHeader("content-type"))}),T,A,a,y?N=>{y(N.request,new I(N.message,N.request))}:void 0,e)},v=(N,p,T,U,X,y,e)=>{N=w.CleanUrl(N),N=w.PreprocessUrl(N);const H=w.BaseUrl+N;let b=!1;const l={onCompleteObservable:new C.c,abort:()=>b=!0},k=()=>{let N,C=new A.b,U=null;const k=()=>{C&&(T&&C.removeEventListener("progress",T),N&&C.removeEventListener("readystatechange",N),C.removeEventListener("loadend",x))};let x=()=>{k(),l.onCompleteObservable.notifyObservers(l),l.onCompleteObservable.clear(),T=void 0,N=null,x=null,y=void 0,e=void 0,p=void 0};l.abort=()=>{b=!0,x&&x(),C&&C.readyState!==(XMLHttpRequest.DONE||4)&&C.abort(),null!==U&&(clearTimeout(U),U=null),C=null};const I=N=>{const p=N.message||"Unknown error";y&&C?y(new L(p,C)):M.d.Error(p)},n=M=>{if(C){if(C.open("GET",H),e)try{e(C)}catch(l){return void I(l)}X&&(C.responseType="arraybuffer"),T&&C.addEventListener("progress",T),x&&C.addEventListener("loadend",x),N=()=>{if(!b&&C&&C.readyState===(XMLHttpRequest.DONE||4)){if(N&&C.removeEventListener("readystatechange",N),C.status>=200&&C.status<300||0===C.status&&(!(0,a.h)()||z())){const N=X?C.response:C.responseText;if(null!==N){try{p&&p(N,C)}catch(l){I(l)}return}}const T=w.DefaultRetryStrategy;if(T){const N=T(H,C,M);if(-1!==N)return k(),C=new A.b,void(U=setTimeout((()=>n(M+1)),N))}const e=new L("Error status: "+C.status+" "+C.statusText+" - Unable to load "+H,C);y&&y(e)}},C.addEventListener("readystatechange",N),C.send()}};n(0)};if(U&&U.enableSceneOffline){const A=N=>{N&&N.status>400?y&&y(N):k()},a=()=>{U&&U.loadFile(w.BaseUrl+N,(N=>{!b&&p&&p(N),l.onCompleteObservable.notifyObservers(l)}),T?N=>{!b&&T&&T(N)}:void 0,A,X)};U.open(a,A)}else k();return l},W=N=>{const{match:p,type:T}=J(N);if(p)return T||void 0;const A=N.lastIndexOf(".");switch(N.substring(A+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"TX":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},z=()=>"undefined"!==typeof location&&"file:"===location.protocol,R=N=>x.test(N),J=N=>{const p=x.exec(N);if(null===p||0===p.length)return{match:!1,type:""};return{match:!0,type:p[0].replace("data:","").replace("base64,","")}};function f(N){return(0,y.b)(N.split(",")[1])}const G=N=>(0,y.d)(N.split(",")[1]);let o;k.c._FileToolsLoadImage=i,l.d.loadFile=F,e.j.loadFile=F;((N,p,T,A,a,C,U,X,y,e)=>{o={DecodeBase64UrlToBinary:N,DecodeBase64UrlToString:p,DefaultRetryStrategy:T.DefaultRetryStrategy,BaseUrl:T.BaseUrl,CorsBehavior:T.CorsBehavior,PreprocessUrl:T.PreprocessUrl,IsBase64DataUrl:A,IsFileURL:a,LoadFile:C,LoadImage:U,ReadFile:X,RequestFile:y,SetCorsBehavior:e},Object.defineProperty(o,"DefaultRetryStrategy",{get:function(){return T.DefaultRetryStrategy},set:function(N){T.DefaultRetryStrategy=N}}),Object.defineProperty(o,"BaseUrl",{get:function(){return T.BaseUrl},set:function(N){T.BaseUrl=N}}),Object.defineProperty(o,"PreprocessUrl",{get:function(){return T.PreprocessUrl},set:function(N){T.PreprocessUrl=N}}),Object.defineProperty(o,"CorsBehavior",{get:function(){return T.CorsBehavior},set:function(N){T.CorsBehavior=N}})})(f,G,w,R,z,F,i,K,v,g)},12333:(N,p,T)=>{function A(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(N=>{const p=16*Math.random()|0;return("x"===N?p:3&p|8).toString(16)}))}T.d(p,{b:()=>A})},12322:(N,p,T)=>{T.d(p,{c:()=>C});var A=T(12205),a=T(12331);class C{static Instantiate(N){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[N])return this.RegisteredExternalClasses[N];const p=(0,a.c)(N);if(p)return p;A.d.Warn(N+" not found, you may have missed an import.");const T=N.split(".");let C=window||this;for(let A=0,a=T.length;A<a;A++)C=C[T[A]];return"function"!==typeof C?null:C}}C.RegisteredExternalClasses={}},12216:(N,p,T)=>{T.d(p,{d:()=>a});var A=T(12198);class a{static get Now(){return(0,A.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12253:(N,p,T)=>{T.d(p,{b:()=>U,d:()=>C,f:()=>A,g:()=>a});const A=N=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(N);let p="";for(let T=0;T<N.byteLength;T++)p+=String.fromCharCode(N[T]);return p},a=N=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T,A,a,C,U,X,y,e="",H=0;const M=ArrayBuffer.isView(N)?new Uint8Array(N.buffer,N.byteOffset,N.byteLength):new Uint8Array(N);for(;H<M.length;)T=M[H++],A=H<M.length?M[H++]:Number.NaN,a=H<M.length?M[H++]:Number.NaN,C=T>>2,U=(3&T)<<4|A>>4,X=(15&A)<<2|a>>6,y=63&a,isNaN(A)?X=y=64:isNaN(a)&&(y=64),e+=p.charAt(C)+p.charAt(U)+p.charAt(X)+p.charAt(y);return e},C=N=>atob(N),U=N=>{const p=C(N),T=p.length,A=new Uint8Array(new ArrayBuffer(T));for(let a=0;a<T;a++)A[a]=p.charCodeAt(a);return A.buffer}},12341:(N,p,T)=>{function A(N){let p=1;do{p*=2}while(p<N);return p===N}function a(N,p,T){return N*(1-T)+p*T}function C(N){const p=U(N),T=X(N);return p-N>N-T?T:p}function U(N){return N--,N|=N>>1,N|=N>>2,N|=N>>4,N|=N>>8,N|=N>>16,++N}function X(N){return N|=N>>1,N|=N>>2,N|=N>>4,N|=N>>8,(N|=N>>16)-(N>>1)}function y(N,p){let T;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:T=X(N);break;case 2:T=C(N);break;default:T=U(N)}return Math.min(T,p)}T.d(p,{c:()=>X,e:()=>y,f:()=>A,h:()=>a,l:()=>C})},12190:(N,p,T)=>{T.r(p),T.d(p,{AsyncLoop:()=>n,Tools:()=>I,className:()=>L});var A=T(12194),a=T(12198),C=T(12205),U=T(12211),X=T(12216),y=T(12218),e=T(12223),H=T(12231),M=T(12240),b=T(12264),l=T(12322),k=T(12333),x=T(12341);class I{static get BaseUrl(){return M.f.BaseUrl}static set BaseUrl(N){M.f.BaseUrl=N}static get CleanUrl(){return M.f.CleanUrl}static set CleanUrl(N){M.f.CleanUrl=N}static IsAbsoluteUrl(N){return 0===N.indexOf("//")||-1!==N.indexOf("://")&&(-1!==N.indexOf(".")&&(-1!==N.indexOf("/")&&(!(N.indexOf(":")>N.indexOf("/"))&&(N.indexOf("://")<N.indexOf(".")||(0===N.indexOf("data:")||0===N.indexOf("blob:"))))))}static set ScriptBaseUrl(N){M.f.ScriptBaseUrl=N}static get ScriptBaseUrl(){return M.f.ScriptBaseUrl}static set CDNBaseUrl(N){I.ScriptBaseUrl=N,I.AssetBaseUrl=N}static set ScriptPreprocessUrl(N){M.f.ScriptPreprocessUrl=N}static get ScriptPreprocessUrl(){return M.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return M.f.DefaultRetryStrategy}static set DefaultRetryStrategy(N){M.f.DefaultRetryStrategy=N}static get CorsBehavior(){return M.f.CorsBehavior}static set CorsBehavior(N){M.f.CorsBehavior=N}static get UseFallbackTexture(){return H.b.UseFallbackTexture}static set UseFallbackTexture(N){H.b.UseFallbackTexture=N}static get RegisteredExternalClasses(){return l.c.RegisteredExternalClasses}static set RegisteredExternalClasses(N){l.c.RegisteredExternalClasses=N}static get fallbackTexture(){return H.b.FallbackTexture}static set fallbackTexture(N){H.b.FallbackTexture=N}static FetchToRef(N,p,T,A,a,C){const U=4*((Math.abs(N)*T%T|0)+(Math.abs(p)*A%A|0)*T);C.r=a[U]/255,C.g=a[U+1]/255,C.b=a[U+2]/255,C.a=a[U+3]/255}static Mix(N,p,T){return 0}static Instantiate(N){return l.c.Instantiate(N)}static SetImmediate(N){b.d.SetImmediate(N)}static IsExponentOfTwo(N){return!0}static FloatRound(N){return Math.fround(N)}static GetFilename(N){const p=N.lastIndexOf("/");return p<0?N:N.substring(p+1)}static GetFolderPath(N){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const T=N.lastIndexOf("/");return T<0?p?N:"":N.substring(0,T+1)}static ToDegrees(N){return 180*N/Math.PI}static ToRadians(N){return N*Math.PI/180}static SmoothAngleChange(N,p){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const A=this.ToRadians(N),a=this.ToRadians(p);return this.ToDegrees(Math.atan2((1-T)*Math.sin(a)+T*Math.sin(A),(1-T)*Math.cos(a)+T*Math.cos(A)))}static MakeArray(N,p){return!0===p||void 0!==N&&null!=N?Array.isArray(N)?N:[N]:null}static GetPointerPrefix(N){return(0,a.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(N,p){(0,M.w)(N,p)}static SetReferrerPolicyBehavior(N,p){p.referrerPolicy=N}static get PreprocessUrl(){return M.f.PreprocessUrl}static set PreprocessUrl(N){M.f.PreprocessUrl=N}static LoadImage(N,p,T,A,a,C){return(0,M.q)(N,p,T,A,a,C)}static LoadFile(N,p,T,A,a,C){return(0,M.n)(N,p,T,A,a,C)}static async LoadFileAsync(N){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((T,A)=>{(0,M.n)(N,(N=>{T(N)}),void 0,void 0,p,((N,p)=>{A(p)}))}))}static GetAssetUrl(N){if(!N)return"";if(I.AssetBaseUrl&&N.startsWith(I._DefaultAssetsUrl)){const p="/"===I.AssetBaseUrl[I.AssetBaseUrl.length-1]?I.AssetBaseUrl.substring(0,I.AssetBaseUrl.length-1):I.AssetBaseUrl;return N.replace(I._DefaultAssetsUrl,p)}return N}static GetBabylonScriptURL(N,p){if(!N)return"";if(I.ScriptBaseUrl&&N.startsWith(I._DefaultCdnUrl)){const p="/"===I.ScriptBaseUrl[I.ScriptBaseUrl.length-1]?I.ScriptBaseUrl.substring(0,I.ScriptBaseUrl.length-1):I.ScriptBaseUrl;N=N.replace(I._DefaultCdnUrl,p)}return N=I.ScriptPreprocessUrl(N),p&&(N=I.GetAbsoluteUrl(N)),N}static LoadBabylonScript(N,p,T,A){N=I.GetBabylonScriptURL(N),I.LoadScript(N,p,T)}static async LoadBabylonScriptAsync(N){return N=I.GetBabylonScriptURL(N),await I.LoadScriptAsync(N)}static LoadScript(N,p,T,A){let C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(N),p&&p()}catch(y){null===T||void 0===T||T(`Unable to load script '${N}' in worker`,y)}return}if(!(0,a.h)())return void(null===T||void 0===T||T(`Cannot load script '${N}' outside of a window or a worker`));const U=document.getElementsByTagName("head")[0],X=document.createElement("script");C?(X.setAttribute("type","module"),X.innerText=N):(X.setAttribute("type","text/javascript"),X.setAttribute("src",N)),A&&(X.id=A),X.onload=()=>{p&&p()},X.onerror=p=>{T&&T(`Unable to load script '${N}'`,p)},U.appendChild(X)}static async LoadScriptAsync(N,p){return await new Promise(((T,A)=>{this.LoadScript(N,(()=>{T()}),((N,p)=>{A(p||new Error(N))}),p)}))}static ReadFileAsDataURL(N,p,T){const a=new FileReader,C={onCompleteObservable:new A.c,abort:()=>a.abort()};return a.onloadend=()=>{C.onCompleteObservable.notifyObservers(C)},a.onload=N=>{p(N.target.result)},a.onprogress=T,a.readAsDataURL(N),C}static ReadFile(N,p,T,A,a){return(0,M.t)(N,p,T,A,a)}static FileAsURL(N){const p=new Blob([N]);return window.URL.createObjectURL(p)}static Format(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return N.toFixed(p)}static DeepCopy(N,p,T,A){U.d.DeepCopy(N,p,T,A)}static IsEmpty(N){for(const p in N)if(Object.prototype.hasOwnProperty.call(N,p))return!1;return!0}static RegisterTopRootEvents(N,p){for(let A=0;A<p.length;A++){const a=p[A];N.addEventListener(a.name,a.handler,!1);try{window.parent&&window.parent.addEventListener(a.name,a.handler,!1)}catch(T){}}}static UnregisterTopRootEvents(N,p){for(let A=0;A<p.length;A++){const a=p[A];N.removeEventListener(a.name,a.handler);try{N.parent&&N.parent.removeEventListener(a.name,a.handler)}catch(T){}}}static async DumpFramebuffer(N,p,T,A){throw(0,y.c)("DumpTools")}static DumpData(N,p,T,A){throw(0,y.c)("DumpTools")}static async DumpDataAsync(N,p,T){throw(0,y.c)("DumpTools")}static _IsOffScreenCanvas(N){return void 0!==N.convertToBlob}static ToBlob(N,p){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0;I._IsOffScreenCanvas(N)||N.toBlob||(N.toBlob=function(N,p,T){setTimeout((()=>{const A=atob(this.toDataURL(p,T).split(",")[1]),a=A.length,C=new Uint8Array(a);for(let N=0;N<a;N++)C[N]=A.charCodeAt(N);N(new Blob([C]))}))}),I._IsOffScreenCanvas(N)?N.convertToBlob({type:T,quality:A}).then((N=>p(N))):N.toBlob((function(N){p(N)}),T,A)}static DownloadBlob(N,p){if("download"in document.createElement("a")){if(!p){const N=new Date;p="screenshot_"+((N.getFullYear()+"-"+(N.getMonth()+1)).slice(2)+"-"+N.getDate()+"_"+N.getHours()+"-"+("0"+N.getMinutes()).slice(-2))+".png"}I.Download(N,p)}else if(N&&"undefined"!==typeof URL){const p=URL.createObjectURL(N),T=window.open("");if(!T)return;const A=T.document.createElement("img");A.onload=function(){URL.revokeObjectURL(p)},A.src=p,T.document.body.appendChild(A)}}static EncodeScreenshotCanvasData(N,p){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",A=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if("string"!==typeof A&&p){if(p){if(I._IsOffScreenCanvas(N))return void N.convertToBlob({type:T,quality:a}).then((N=>{const T=new FileReader;T.readAsDataURL(N),T.onloadend=()=>{const N=T.result;p(N)}}));const A=N.toDataURL(T,a);p(A)}}else this.ToBlob(N,(function(N){N&&I.DownloadBlob(N,A),p&&p("")}),T,a)}static Download(N,p){if("undefined"===typeof URL)return;const T=window.URL.createObjectURL(N),A=document.createElement("a");document.body.appendChild(A),A.style.display="none",A.href=T,A.download=p,A.addEventListener("click",(()=>{A.parentElement&&A.parentElement.removeChild(A)})),A.click(),window.URL.revokeObjectURL(T)}static BackCompatCameraNoPreventDefault(N){return"boolean"===typeof N[0]?N[0]:"boolean"===typeof N[1]&&N[1]}static CreateScreenshot(N,p,T,A){throw(0,y.c)("ScreenshotTools")}static async CreateScreenshotAsync(N,p,T){throw(0,y.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(N,p,T,A){throw(0,y.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(N,p,T){throw(0,y.c)("ScreenshotTools")}static RandomId(){return(0,k.b)()}static IsBase64(N){return(0,M.i)(N)}static DecodeBase64(N){return(0,M.e)(N)}static get errorsCount(){return C.d.errorsCount}static Log(N){C.d.Log(N)}static Warn(N){C.d.Warn(N)}static Error(N){C.d.Error(N)}static get LogCache(){return C.d.LogCache}static ClearLogCache(){C.d.ClearLogCache()}static set LogLevels(N){C.d.LogLevels=N}static set PerformanceLogLevel(N){return(N&I.PerformanceUserMarkLogLevel)===I.PerformanceUserMarkLogLevel?(I.StartPerformanceCounter=I._StartUserMark,void(I.EndPerformanceCounter=I._EndUserMark)):(N&I.PerformanceConsoleLogLevel)===I.PerformanceConsoleLogLevel?(I.StartPerformanceCounter=I._StartPerformanceConsole,void(I.EndPerformanceCounter=I._EndPerformanceConsole)):(I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,void(I.EndPerformanceCounter=I._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(N,p){}static _EndPerformanceCounterDisabled(N,p){}static _StartUserMark(N){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!I._Performance){if(!(0,a.h)())return;I._Performance=window.performance}p&&I._Performance.mark&&I._Performance.mark(N+"-Begin")}static _EndUserMark(N){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&I._Performance.mark&&(I._Performance.mark(N+"-End"),I._Performance.measure(N,N+"-Begin",N+"-End"))}static _StartPerformanceConsole(N){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p&&(I._StartUserMark(N,p),console.time&&console.time(N))}static _EndPerformanceConsole(N){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];p&&(I._EndUserMark(N,p),console.timeEnd(N))}static get Now(){return X.d.Now}static GetClassName(N){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null;if(!p&&N.getClassName)T=N.getClassName();else{if(N instanceof Object){T=(p?N:Object.getPrototypeOf(N)).constructor.__bjsclassName__}T||(T=typeof N)}return T}static First(N,p){for(const T of N)if(p(T))return T;return null}static getFullClassName(N){let p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],T=null,A=null;if(!p&&N.getClassName)T=N.getClassName();else{if(N instanceof Object){const a=p?N:Object.getPrototypeOf(N);T=a.constructor.__bjsclassName__,A=a.constructor.__bjsmoduleName__}T||(T=typeof N)}return T?(null!=A?A+".":"")+T:null}static async DelayAsync(N){await new Promise((p=>{setTimeout((()=>{p()}),N)}))}static IsSafari(){return!!(0,a.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function L(N,p){return T=>{T.__bjsclassName__=N,T.__bjsmoduleName__=null!=p?p:null}}I.AssetBaseUrl="",I.UseCustomRequestHeaders=!1,I.CustomRequestHeaders=e.b.CustomRequestHeaders,I.GetDOMTextContent=a.c,I._DefaultCdnUrl="https://cdn.babylonjs.com",I._DefaultAssetsUrl="https://assets.babylonjs.com/core",I.GetAbsoluteUrl="object"===typeof document?N=>{const p=document.createElement("a");return p.href=N,p.href}:"function"===typeof URL&&"object"===typeof location?N=>new URL(N,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},I.NoneLogLevel=C.d.NoneLogLevel,I.MessageLogLevel=C.d.MessageLogLevel,I.WarningLogLevel=C.d.WarningLogLevel,I.ErrorLogLevel=C.d.ErrorLogLevel,I.AllLogLevel=C.d.AllLogLevel,I.IsWindowObjectExist=a.h,I.PerformanceNoneLogLevel=0,I.PerformanceUserMarkLogLevel=1,I.PerformanceConsoleLogLevel=2,I.StartPerformanceCounter=I._StartPerformanceCounterDisabled,I.EndPerformanceCounter=I._EndPerformanceCounterDisabled;class n{constructor(N,p,T){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=N,this.index=A-1,this._done=!1,this._fn=p,this._successCallback=T}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(N,p,T){const A=new n(N,p,T,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return A.executeNext(),A}static SyncAsyncForLoop(N,p,T,A,a){let C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return n.Run(Math.ceil(N/p),(A=>{a&&a()?A.breakLoop():setTimeout((()=>{for(let C=0;C<p;++C){const U=A.index*p+C;if(U>=N)break;if(T(U),a&&a()){A.breakLoop();break}}A.executeNext()}),C)}),A)}}I.Mix=x.h,I.IsExponentOfTwo=x.f,H.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12331:(N,p,T)=>{T.d(p,{c:()=>C,d:()=>a});const A={};function a(N,p){A[N]=p}function C(N){return A[N]}},12223:(N,p,T)=>{T.d(p,{b:()=>A});class A{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(A.CustomRequestHeaders).length>0||A.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const N in A.CustomRequestHeaders){const p=A.CustomRequestHeaders[N];p&&this._xhr.setRequestHeader(N,p)}}_shouldSkipRequestModifications(N){return A.SkipRequestModificationForBabylonCDN&&(N.includes("preview.babylonjs.com")||N.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(N){this._xhr.onprogress=N}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(N){this._xhr.responseType=N}get timeout(){return this._xhr.timeout}set timeout(N){this._xhr.timeout=N}addEventListener(N,p,T){this._xhr.addEventListener(N,p,T)}removeEventListener(N,p,T){this._xhr.removeEventListener(N,p,T)}abort(){this._xhr.abort()}send(N){A.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(N)}open(N,p){for(const T of A.CustomRequestModifiers){if(this._shouldSkipRequestModifications(p))return;p=T(this._xhr,p)||p}p=(p=p.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=p,this._xhr.open(N,p,!0)}setRequestHeader(N,p){this._xhr.setRequestHeader(N,p)}getResponseHeader(N){return this._xhr.getResponseHeader(N)}}A.CustomRequestHeaders={},A.CustomRequestModifiers=new Array,A.SkipRequestModificationForBabylonCDN=!0}}]);