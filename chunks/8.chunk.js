"use strict";(self.uw9p3pwwsje=self.uw9p3pwwsje||[]).push([[8],{12731:(D,h,o)=>{o.d(h,{e:()=>c});var H=o(12683),g=o(12658),j=o(12737),M=o(12762),R=o(12667);class t{constructor(){let D=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,D&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(D){this._zOffset!==D&&(this._zOffset=D,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(D){this._zOffsetUnits!==D&&(this._zOffsetUnits=D,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(D){this._cullFace!==D&&(this._cullFace=D,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(D){this._cull!==D&&(this._cull=D,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(D){this._depthFunc!==D&&(this._depthFunc=D,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(D){this._depthMask!==D&&(this._depthMask=D,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(D){this._depthTest!==D&&(this._depthTest=D,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(D){this._frontFace!==D&&(this._frontFace=D,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(D){this.isDirty&&(this._isCullDirty&&(this.cull?D.enable(D.CULL_FACE):D.disable(D.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(D.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(D.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?D.enable(D.DEPTH_TEST):D.disable(D.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(D.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(D.enable(D.POLYGON_OFFSET_FILL),D.polygonOffset(this.zOffset,this.zOffsetUnits)):D.disable(D.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(D.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class S{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(D){this._func!==D&&(this._func=D,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(D){this._funcRef!==D&&(this._funcRef=D,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(D){this._funcMask!==D&&(this._funcMask=D,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(D){this._opStencilFail!==D&&(this._opStencilFail=D,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(D){this._opDepthFail!==D&&(this._opDepthFail=D,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(D){this._opStencilDepthPass!==D&&(this._opStencilDepthPass=D,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(D){this._mask!==D&&(this._mask=D,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(D){this._enabled!==D&&(this._enabled=D,this._isStencilTestDirty=!0)}constructor(){let D=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,D&&this.reset()}reset(){var D;this.stencilMaterial=void 0,null===(D=this.stencilGlobal)||void 0===D||D.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(D){var h;if(!D)return;const o=!this.useStencilGlobalOnly&&!(null===(h=this.stencilMaterial)||void 0===h||!h.enabled);this.enabled=o?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=o?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=o?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=o?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=o?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=o?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=o?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=o?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?D.enable(D.STENCIL_TEST):D.disable(D.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(D.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(D.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(D.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class k{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=k.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=k.KEEP,this.opDepthFail=k.KEEP,this.opStencilDepthPass=k.REPLACE}get stencilFunc(){return this.func}set stencilFunc(D){this.func=D}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(D){this.funcRef=D}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(D){this.funcMask=D}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(D){this.opStencilFail=D}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(D){this.opDepthFail=D}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(D){this.opStencilDepthPass=D}get stencilMask(){return this.mask}set stencilMask(D){this.mask=D}get stencilTest(){return this.enabled}set stencilTest(D){this.enabled=D}}k.ALWAYS=519,k.KEEP=7680,k.REPLACE=7681;class K{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(D){this._alphaBlend!==D&&(this._alphaBlend=D,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(D,h,o,H){this._blendConstants[0]===D&&this._blendConstants[1]===h&&this._blendConstants[2]===o&&this._blendConstants[3]===H||(this._blendConstants[0]=D,this._blendConstants[1]=h,this._blendConstants[2]=o,this._blendConstants[3]=H,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(D,h,o,H){this._blendFunctionParameters[0]===D&&this._blendFunctionParameters[1]===h&&this._blendFunctionParameters[2]===o&&this._blendFunctionParameters[3]===H||(this._blendFunctionParameters[0]=D,this._blendFunctionParameters[1]=h,this._blendFunctionParameters[2]=o,this._blendFunctionParameters[3]=H,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(D,h){this._blendEquationParameters[0]===D&&this._blendEquationParameters[1]===h||(this._blendEquationParameters[0]=D,this._blendEquationParameters[1]=h,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(D){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?D.enable(D.BLEND):D.disable(D.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(D.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(D.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(D.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var Q=o(12672),v=o(12771),r=o(12656),B=o(12648),s=o(12715),U=o(12784);function q(D,h){if((0,r.m)()){const{requestAnimationFrame:o}=h||window;if("function"===typeof o)return o(D)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(D);return setTimeout(D,16)}class c{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(D){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Bh(){return this._useReverseDepthBuffer}set Bh(D){D!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=D,this._depthCullingState.depthFunc=D?518:515)}setColorWrite(D){D!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=D)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(D){if(D)return this.isNDCHalfZRange?D.IS_NDC_HALF_ZRANGE="":delete D.IS_NDC_HALF_ZRANGE,this.Bh?D.USE_REVERSE_DEPTHBUFFER="":delete D.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?D.USE_EXACT_SRGB_CONVERSIONS="":delete D.USE_EXACT_SRGB_CONVERSIONS);{let D="";return this.isNDCHalfZRange&&(D+="#define IS_NDC_HALF_ZRANGE"),this.Bh&&(D&&(D+="\n"),D+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(D&&(D+="\n"),D+="#define USE_EXACT_SRGB_CONVERSIONS"),D}}_rebuildInternalTextures(){const D=this._internalTexturesCache.slice();for(const h of D)h._rebuild()}_rebuildRenderTargetWrappers(){const D=this._renderTargetWrapperCache.slice();for(const h of D)h._rebuild()}_rebuildEffects(){for(const D in this._compiledEffects){const h=this._compiledEffects[D];h._pipelineContext=null,h._prepareEffect()}j.Effect.ResetCache()}_rebuildGraphicsResources(){var D;this.wipeCaches(!0),this._rebuildEffects(),null===(D=this._rebuildComputeEffects)||void 0===D||D.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){g.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(D){setTimeout((()=>{this._clearEmptyResources();const h=this._depthCullingState.depthTest,o=this._depthCullingState.depthFunc,H=this._depthCullingState.depthMask,g=this._stencilState.stencilTest;D(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=h,this._depthCullingState.depthFunc=o,this._depthCullingState.depthMask=H,this._stencilState.stencilTest=g,this._flagContextRestored()}),0)}get S(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(D){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(D){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const D=new Uint8Array(4),h=[D,D,D,D,D,D];this._emptyCubeTexture=this.createRawCubeTexture(h,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(D){if(!D)return this._activeRenderLoops.length=0,void this._cancelFrame();const h=this._activeRenderLoops.indexOf(D);h>=0&&(this._activeRenderLoops.splice(h,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const D=this._frameHandler;if(this._frameHandler=0,(0,r.m)()){const{cancelAnimationFrame:h}=this.getHostWindow()||window;if("function"===typeof h)return h(D)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(D);return clearTimeout(D)}}Uh(){this.onBeginFrameObservable.notifyObservers(this)}ih(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(D){this._maxFPS=D,void 0!==D&&(this._minFrameTime=D<=0?Number.MAX_VALUE:1e3/D)}_isOverFrameTime(D){if(!D||void 0===this._maxFPS)return!1;const h=D-this._lastFrameTime;return this._lastFrameTime=D,this._renderAccumulator+=h,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(D){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(D)){let D=!0;(this.S||!this.renderEvenInBackground&&this._windowIsBackground)&&(D=!1),D&&(this.Uh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.ih())}}_renderLoop(D){this._processFrame(D),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let D=0;D<this._activeRenderLoops.length;D++){(0,this._activeRenderLoops[D])()}}_renderViews(){return!1}_queueNewFrame(D,h){return q(D,h)}runRenderLoop(D){-1===this._activeRenderLoops.indexOf(D)&&(this._activeRenderLoops.push(D),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(D){this._depthCullingState.depthTest=D}setZOffset(D){this._depthCullingState.zOffset=this.Bh?-D:D}getZOffset(){const D=this._depthCullingState.zOffset;return this.Bh?-D:D}setZOffsetUnits(D){this._depthCullingState.zOffsetUnits=this.Bh?-D:D}getZOffsetUnits(){const D=this._depthCullingState.zOffsetUnits;return this.Bh?-D:D}getHostWindow(){return(0,r.m)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(D){this._compatibilityMode=!0}_rebuildTextures(){for(const D of this.scenes)D._rebuildTextures();for(const D of this._virtualScenes)D._rebuildTextures()}_releaseRenderTargetWrapper(D){const h=this._renderTargetWrapperCache.indexOf(D);-1!==h&&this._renderTargetWrapperCache.splice(h,1)}get currentViewport(){return this._cachedViewport}setViewport(D,h,o){const H=h||this.getRenderWidth(),g=o||this.getRenderHeight(),j=D.x||0,M=D.y||0;this._cachedViewport=D,this._viewport(j*H,M*g,H*D.width,g*D.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(D){return new Path2D(D)}get description(){let D=this.name+this.version;return this._caps.parallelShaderCompile&&(D+=" - Parallel shader compilation"),D}_createTextureBase(D,h,o,j){let M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,S=arguments.length>7?arguments[7]:void 0,k=arguments.length>8?arguments[8]:void 0,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,Q=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,r=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,B=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,s=arguments.length>13?arguments[13]:void 0,q=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0;const b="data:"===(D=D||"").substring(0,5),i="blob:"===D.substring(0,5),G=b&&-1!==D.indexOf(";base64,"),N=Q||new v.c(this,1);N!==Q&&(N.label=D.substring(0,60));const J=D;!this._transformTextureUrl||G||Q||K||(D=this._transformTextureUrl(D)),J!==D&&(N._originalUrl=J);const O=D.lastIndexOf(".");let E=B||(O>-1?D.substring(O).toLowerCase():"");E.indexOf("?")>-1&&(E=E.split("?")[0]);const L=(0,U.d)(E,s);j&&j.addPendingData(N),N.url=D,N.generateMipMaps=!h,N.samplingMode=M,N.invertY=o,N._useSRGBBuffer=this._getUseSRGBBuffer(!!y,h),this._doNotHandleContextLost||(N._buffer=K);let T=null;R&&!Q&&(T=N.onLoadedObservable.add(R)),Q||this._internalTexturesCache.push(N);const Z=(o,Q)=>{j&&j.removePendingData(N),D===J?(T&&N.onLoadedObservable.remove(T),H.d.UseFallbackTexture&&D!==H.d.FallbackTexture&&this._createTextureBase(H.d.FallbackTexture,h,N.invertY,j,M,null,t,S,k,K,N),o=(o||"Unknown error")+(H.d.UseFallbackTexture?" - Fallback texture was used":""),N.onErrorObservable.notifyObservers({message:o,exception:Q}),t&&t(o,Q)):(g.d.Warn(`Failed to load ${D}, falling back to ${J}`),this._createTextureBase(J,h,N.invertY,j,M,R,t,S,k,K,N,r,B,s,q,y))};if(L){const h=async D=>{(await L).loadData(D,N,((D,h,o,H,g,R)=>{R?Z("TextureLoader failed to load data"):S(N,E,j,{width:D,height:h},N.invertY,!o,H,(()=>(g(),!1)),M)}),q)};K?K instanceof ArrayBuffer?h(new Uint8Array(K)):ArrayBuffer.isView(K)?h(K):t&&t("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(D,(D=>{h(new Uint8Array(D))}),void 0,j?j.offlineProvider:void 0,!0,((D,h)=>{Z("Unable to load "+(D&&D.responseURL,h))}))}else{const o=D=>{i&&!this._doNotHandleContextLost&&(N._buffer=D),S(N,E,j,D,N.invertY,h,!1,k,M)};!b||G?K&&("string"===typeof K.decoding||K.close)?o(K):c._FileToolsLoadImage(D||"",o,Z,j?j.offlineProvider:null,s,N.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof K||K instanceof ArrayBuffer||ArrayBuffer.isView(K)||K instanceof Blob?c._FileToolsLoadImage(K,o,Z,j?j.offlineProvider:null,s,N.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):K&&o(K)}return N}_rebuildBuffers(){for(const D of this._uniformBuffers)D._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,r.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const D in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,D)&&(this._boundTexturesCache[D]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(D){this._name=D}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(D){this._hardwareScalingLevel=D,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(D){this._doNotHandleContextLost=D}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(D,h,o){var g,j;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new t,this._stencilStateComposer=new S,this._stencilState=new k,this._alphaState=new K,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new B.c,this.onCanvasFocusObservable=new B.c,this.onNewSceneAddedObservable=new B.c,this.onResizeObservable=new B.c,this.onCanvasPointerOutObservable=new B.c,this.onEffectErrorObservable=new B.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new B.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=D=>this._renderLoop(D),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new B.c,this.onAfterShaderCompilationObservable=new B.c,this.onBeginFrameObservable=new B.c,this.onEndFrameObservable=new B.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new B.c,this.onContextRestoredObservable=new B.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Jh=new B.c,this.onReleaseEffectsObservable=new B.c,H.d.Instances.push(this),this.startTime=R.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,M.b.SetMatrixPrecision(!!h.useHighPrecisionMatrix),(0,r.l)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=o??!1,h.antialias=D??h.antialias,h.deterministicLockstep=h.deterministicLockstep??!1,h.lockstepMaxSteps=h.lockstepMaxSteps??4,h.timeStep=h.timeStep??1/60,h.Oh=h.Oh??!0,this._audioContext=(null===(g=h.audioEngineOptions)||void 0===g?void 0:g.audioContext)??null,this._audioDestination=(null===(j=h.audioEngineOptions)||void 0===j?void 0:j.audioDestination)??null,this.premultipliedAlpha=h.premultipliedAlpha??!0,this._doNotHandleContextLost=!!h.doNotHandleContextLost,this._isStencilEnable=!!h.Oh,this.useExactSrgbConversions=h.useExactSrgbConversions??!1;const Q=(0,r.m)()&&window.devicePixelRatio||1,v=h.limitDeviceRatio||Q;o=o||h.adaptToDeviceRatio||!1,this._hardwareScalingLevel=o?1/Math.min(v,Q):1,this._lastDevicePixelRatio=Q,this._creationOptions=h}resize(){let D,h,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const D=(0,r.m)()&&window.devicePixelRatio||1,h=this._lastDevicePixelRatio/D;this._lastDevicePixelRatio=D,this._hardwareScalingLevel*=h}if((0,r.m)()&&(0,r.h)())if(this._renderingCanvas){var H,g;const o=null===(H=(g=this._renderingCanvas).getBoundingClientRect)||void 0===H?void 0:H.call(g);D=this._renderingCanvas.clientWidth||(null===o||void 0===o?void 0:o.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,h=this._renderingCanvas.clientHeight||(null===o||void 0===o?void 0:o.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else D=window.innerWidth,h=window.innerHeight;else D=this._renderingCanvas?this._renderingCanvas.width:100,h=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(D/this._hardwareScalingLevel,h/this._hardwareScalingLevel,o)}setSize(D,h){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(D|=0,h|=0,!o&&this._renderingCanvas.width===D&&this._renderingCanvas.height===h)return!1;if(this._renderingCanvas.width=D,this._renderingCanvas.height=h,this.scenes){for(let D=0;D<this.scenes.length;D++){const h=this.scenes[D];for(let D=0;D<h.cameras.length;D++){h.cameras[D]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(D,h,o,H,g,j,M,R,t,S,k){throw(0,Q.e)("engine.rawTexture")}createRawCubeTexture(D,h,o,H,g,j,M,R){throw(0,Q.e)("engine.rawTexture")}createRawTexture3D(D,h,o,H,g,j,M,R,t,S,k){throw(0,Q.e)("engine.rawTexture")}createRawTexture2DArray(D,h,o,H,g,j,M,R,t,S,k){throw(0,Q.e)("engine.rawTexture")}_sharedInit(D){this._renderingCanvas=D}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const D=navigator.userAgent;this.hostInformation.isMobile=-1!==D.indexOf("Mobile")||-1!==D.indexOf("Mac")&&(0,r.h)()&&"ontouchend"in document},this._checkForMobile(),(0,r.m)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(D){return document.createElement("video")}_reportDrawCall(){var D;let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(D=this._drawCalls)||void 0===D||D.addCount(h,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(D,h){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(D,h){return createImageBitmap(D,h)}resizeImageBitmap(D,h,o){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(D){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(D,h){if("undefined"===typeof document)return new OffscreenCanvas(D,h);const o=document.createElement("canvas");return o.width=D,o.height=h,o}createCanvas(D,h){return c._CreateCanvas(D,h)}static _FileToolsLoadImage(D,h,o,H,g,j,M){throw(0,Q.e)("FileTools")}_loadFile(D,h,o,H,g,j){const M=(0,s.h)(D,h,o,H,g,j);return this._activeRequests.push(M),M.onCompleteObservable.add((()=>{const D=this._activeRequests.indexOf(M);-1!==D&&this._activeRequests.splice(D,1)})),M}static _FileToolsLoadFile(D,h,o,H,g,j){if(s.c.loadFile)return s.c.loadFile(D,h,o,H,g,j);throw(0,Q.e)("FileTools")}dispose(){var D;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(D=this.releaseComputeEffects)||void 0===D||D.call(this),j.Effect.ResetCache();for(const o of this._activeRequests)o.abort();this._boundRenderFunction=null,this.Jh.notifyObservers(this),this.Jh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,r.m)()&&window.removeEventListener("resize",this._checkForMobile);const h=H.d.Instances.indexOf(this);h>=0&&H.d.Instances.splice(h,1),H.d.Instances.length||(H.d.OnEnginesDisposedObservable.notifyObservers(this),H.d.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(D){throw(0,Q.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(D,h){for(let o=0;o<H.d.Instances.length;o++){const g=H.d.Instances[o];for(let o=0;o<g.scenes.length;o++)g.scenes[o].markAllMaterialsAsDirty(D,h)}}}c._RenderPassIdCounter=0,c._RescalePostProcessFactory=null,c.CollisionsEpsilon=.001,c.QueueNewFrame=q},12683:(D,h,o)=>{o.d(h,{d:()=>g});var H=o(12648);class g{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}g.Instances=[],g.OnEnginesDisposedObservable=new H.c,g._LastCreatedScene=null,g.UseFallbackTexture=!0,g.FallbackTexture=""},12762:(D,h,o)=>{o.d(h,{b:()=>H});class H{static SetMatrixPrecision(D){if(H.MatrixTrackPrecisionChange=!1,D&&!H.MatrixUse64Bits&&H.MatrixTrackedMatrices)for(let h=0;h<H.MatrixTrackedMatrices.length;++h){const D=H.MatrixTrackedMatrices[h],o=D.Eh;D.Eh=new Array(16);for(let h=0;h<16;++h)D.Eh[h]=o[h]}H.MatrixUse64Bits=D,H.MatrixCurrentType=H.MatrixUse64Bits?Array:Float32Array,H.MatrixTrackedMatrices=null}}H.MatrixUse64Bits=!1,H.MatrixTrackPrecisionChange=!0,H.MatrixCurrentType=Float32Array,H.MatrixTrackedMatrices=[]},12784:(D,h,o)=>{o.d(h,{d:()=>M});var H=o(12658);const g=new Map;function j(D,h){(function(D){return g.delete(D)})(D)&&H.d.Warn(`Extension with the name '${D}' already exists`),g.set(D,h)}function M(D,h){"image/ktx"!==h&&"image/ktx2"!==h||(D=".ktx"),g.has(D)||(D.endsWith(".ies")&&j(".ies",(async()=>await o.e(15).then(o.bind(o,15150)).then((D=>new D._IESTextureLoader)))),D.endsWith(".dds")&&j(".dds",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(28)]).then(o.bind(o,15154)).then((D=>new D._DDSTextureLoader)))),D.endsWith(".basis")&&j(".basis",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(47)]).then(o.bind(o,15162)).then((D=>new D._BasisTextureLoader)))),D.endsWith(".env")&&j(".env",(async()=>await Promise.all([o.e(14),o.e(17),o.e(13),o.e(19),o.e(18),o.e(23),o.e(21),o.e(45),o.e(48)]).then(o.bind(o,15165)).then((D=>new D._ENVTextureLoader)))),D.endsWith(".hdr")&&j(".hdr",(async()=>await Promise.all([o.e(14),o.e(49)]).then(o.bind(o,15169)).then((D=>new D._HDRTextureLoader)))),(D.endsWith(".ktx")||D.endsWith(".ktx2"))&&(j(".ktx",(async()=>await o.e(30).then(o.bind(o,15172)).then((D=>new D._KTXTextureLoader)))),j(".ktx2",(async()=>await o.e(30).then(o.bind(o,15172)).then((D=>new D._KTXTextureLoader))))),D.endsWith(".tga")&&j(".tga",(async()=>await o.e(50).then(o.bind(o,15176)).then((D=>new D._TGATextureLoader)))),D.endsWith(".exr")&&j(".exr",(async()=>await o.e(16).then(o.bind(o,15181)).then((D=>new D._ExrTextureLoader)))));const H=g.get(D);return H?Promise.resolve(H(h)):null}},12771:(D,h,o)=>{o.d(h,{c:()=>M});var H,g=o(12648),j=o(12778);!function(D){D[D.Unknown=0]="Unknown",D[D.Url=1]="Url",D[D.Temp=2]="Temp",D[D.Raw=3]="Raw",D[D.Dynamic=4]="Dynamic",D[D.RenderTarget=5]="RenderTarget",D[D.MultiRenderTarget=6]="MultiRenderTarget",D[D.Cube=7]="Cube",D[D.CubeRaw=8]="CubeRaw",D[D.CubePrefiltered=9]="CubePrefiltered",D[D.Raw3D=10]="Raw3D",D[D.Raw2DArray=11]="Raw2DArray",D[D.DepthStencil=12]="DepthStencil",D[D.CubeRawRGBD=13]="CubeRawRGBD",D[D.Depth=14]="Depth"}(H||(H={}));class M extends j.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(D){this.generateMipMaps=D}get uniqueId(){return this._uniqueId}_setUniqueId(D){this._uniqueId=D}getEngine(){return this._engine}get source(){return this._source}constructor(D,h){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new g.c,this.onErrorObservable=new g.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=D,this._source=h,this._uniqueId=M._Counter++,o||(this._hardwareTexture=D._createHardwareTexture())}incrementReferences(){this._references++}updateSize(D,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,D,h,o),this.width=D,this.height=h,this.depth=o,this.baseWidth=D,this.baseHeight=h,this.baseDepth=o,this._size=D*h*o}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const D=this.onRebuildCallback(this),h=h=>{h._swapAndDie(this,!1),this.isReady=D.isReady};return void(D.isAsync?D.proxy.then(h):h(D.proxy))}let D;switch(this.source){case 2:case 12:case 14:break;case 1:return void(D=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(D=>{D._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:D=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),D._swapAndDie(this,!1),this.isReady=!0;break;case 10:D=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),D._swapAndDie(this,!1),this.isReady=!0;break;case 11:D=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),D._swapAndDie(this,!1),this.isReady=!0;break;case 4:D=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),D._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(D=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{D._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:D=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),D._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return D=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(D=>{D&&D._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(D._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(D){var h;let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(h=this._hardwareTexture)||void 0===h||h.setUsage(D._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),D._hardwareTexture=this._hardwareTexture,o&&(D._isRGBD=this._isRGBD),this._lodTextureHigh&&(D._lodTextureHigh&&D._lodTextureHigh.dispose(),D._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(D._lodTextureMid&&D._lodTextureMid.dispose(),D._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(D._lodTextureLow&&D._lodTextureLow.dispose(),D._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(D._irradianceTexture&&D._irradianceTexture.dispose(),D._irradianceTexture=this._irradianceTexture);const H=this._engine.getLoadedTexturesCache();let g=H.indexOf(this);-1!==g&&H.splice(g,1),g=H.indexOf(D),-1===g&&H.push(D)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}M._Counter=0},12778:(D,h,o)=>{o.d(h,{e:()=>H});class H{get wrapU(){return this._cachedWrapU}set wrapU(D){this._cachedWrapU=D}get wrapV(){return this._cachedWrapV}set wrapV(D){this._cachedWrapV=D}get wrapR(){return this._cachedWrapR}set wrapR(D){this._cachedWrapR=D}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(D){this._cachedAnisotropicFilteringLevel=D}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(D){this._comparisonFunction=D}get useMipMaps(){return this._useMipMaps}set useMipMaps(D){this._useMipMaps=D}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=D,this._cachedWrapV=h,this._cachedWrapR=o,this._cachedAnisotropicFilteringLevel=H,this.samplingMode=g,this._comparisonFunction=j,this}compareSampler(D){return this._cachedWrapU===D._cachedWrapU&&this._cachedWrapV===D._cachedWrapV&&this._cachedWrapR===D._cachedWrapR&&this._cachedAnisotropicFilteringLevel===D._cachedAnisotropicFilteringLevel&&this.samplingMode===D.samplingMode&&this._comparisonFunction===D._comparisonFunction&&this._useMipMaps===D._useMipMaps}}},12664:(D,h,o)=>{o.d(h,{d:()=>j});var H=o(12658);const g=(D,h,o)=>D?D.getClassName&&"Mesh"===D.getClassName()?null:!D.getClassName||"SubMesh"!==D.getClassName()&&"PhysicsBody"!==D.getClassName()?D.clone?D.clone():Array.isArray(D)?D.slice():o&&"object"===typeof D?{...D}:null:D.clone(h):null;class j{static DeepCopy(D,h,o,j){let M=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const R=function(D){const h=[];do{const o=Object.getOwnPropertyNames(D);for(const D of o)-1===h.indexOf(D)&&h.push(D)}while(D=Object.getPrototypeOf(D));return h}(D);for(const S of R){if("_"===S[0]&&(!j||-1===j.indexOf(S)))continue;if(S.endsWith("Observable"))continue;if(o&&-1!==o.indexOf(S))continue;const R=D[S],k=typeof R;if("function"!==k)try{if("object"===k)if(R instanceof Uint8Array)h[S]=Uint8Array.from(R);else if(R instanceof Array){if(h[S]=[],R.length>0)if("object"==typeof R[0])for(let D=0;D<R.length;D++){const o=g(R[D],h,M);-1===h[S].indexOf(o)&&h[S].push(o)}else h[S]=R.slice(0)}else h[S]=g(R,h,M);else h[S]=R}catch(t){H.d.Warn(t.message)}}}}},12698:(D,h,o)=>{o.d(h,{d:()=>H,g:()=>g,i:()=>j});class H extends Error{}H._setPrototypeOf=Object.setPrototypeOf||((D,h)=>(D.__proto__=h,D));const g={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class j extends H{constructor(D,h,o){super(D),this.errorCode=h,this.innerError=o,this.name="RuntimeError",H._setPrototypeOf(this,j.prototype)}}},12691:(D,h,o)=>{o.d(h,{e:()=>Z,i:()=>c,k:()=>O,l:()=>L,r:()=>N,o:()=>s,s:()=>i,t:()=>G,x:()=>J,A:()=>y});var H=o(12674),g=o(12656),j=o(12648);class M{}M.FilesToLoad={};var R=o(12698),t=o(12702),S=o(12709),k=o(12683),K=o(12658),Q=o(12722),v=o(12715),r=o(12731);const B=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class s extends R.i{constructor(D,h){super(D,R.g.LoadFileError),this.name="LoadFileError",R.d._setPrototypeOf(this,s.prototype),h instanceof H.e?this.request=h:this.file=h}}class U extends R.i{constructor(D,h){super(D,R.g.RequestFileError),this.request=h,this.name="RequestFileError",R.d._setPrototypeOf(this,U.prototype)}}class q extends R.i{constructor(D,h){super(D,R.g.ReadFileError),this.file=h,this.name="ReadFileError",R.d._setPrototypeOf(this,q.prototype)}}const c={DefaultRetryStrategy:class{static ExponentialBackoff(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(o,H,g)=>0!==H.status||g>=D||-1!==o.indexOf("file:")?-1:Math.pow(2,g)*h}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:D=>D,ScriptBaseUrl:"",ScriptPreprocessUrl:D=>D,CleanUrl:D=>D=D.replace(/#/gm,"%23")},y=(D,h)=>{if((!D||0!==D.indexOf("data:"))&&c.CorsBehavior)if("string"===typeof c.CorsBehavior||c.CorsBehavior instanceof String)h.crossOrigin=c.CorsBehavior;else{const o=c.CorsBehavior(D);o&&(h.crossOrigin=o)}},b={getRequiredSize:null},i=function(D,h,o,g){let j,R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",S=arguments.length>5?arguments[5]:void 0,K=arguments.length>6&&void 0!==arguments[6]?arguments[6]:k.d.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===K||void 0===K||!K._features.forceBitmapOverHTMLImageElement))return o("LoadImage is only supported in web or BabylonNative environments."),null;let Q=!1;D instanceof ArrayBuffer||ArrayBuffer.isView(D)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(j=URL.createObjectURL(new Blob([D],{type:R})),Q=!0):j=`data:${R};base64,`+(0,t.k)(D):D instanceof Blob?(j=URL.createObjectURL(D),Q=!0):(j=c.CleanUrl(D),j=c.PreprocessUrl(j));const v=h=>{if(o){const H=j||D.toString();o(`Error while trying to load image: ${0===H.indexOf("http")||H.length<=128?H:H.slice(0,128)+"..."}`,h)}};if(null!==K&&void 0!==K&&K._features.forceBitmapOverHTMLImageElement)return N(j,(H=>{K.createImageBitmap(new Blob([H],{type:R}),{premultiplyAlpha:"none",...S}).then((D=>{h(D),Q&&URL.revokeObjectURL(j)})).catch((h=>{o&&o("Error while trying to load image: "+D,h)}))}),void 0,g||void 0,!0,((D,h)=>{v(h)})),null;const r=new Image;if(b.getRequiredSize){const h=b.getRequiredSize(D);h.width&&(r.width=h.width),h.height&&(r.height=h.height)}y(j,r);const B=[],s=()=>{for(const D of B)D.target.removeEventListener(D.name,D.handler);B.length=0};B.push({target:r,name:"load",handler:()=>{s(),h(r),Q&&r.src&&URL.revokeObjectURL(r.src)}}),B.push({target:r,name:"error",handler:D=>{s(),v(D),Q&&r.src&&URL.revokeObjectURL(r.src)}}),B.push({target:document,name:"securitypolicyviolation",handler:D=>{if(D.blockedURI!==r.src||"Lh"===D.disposition)return;s();const h=new Error(`CSP violation of policy ${D.effectiveDirective} ${D.blockedURI}. Current policy is ${D.originalPolicy}`);k.d.UseFallbackTexture=!1,v(h),Q&&r.src&&URL.revokeObjectURL(r.src),r.src=""}}),(()=>{for(const D of B)D.target.addEventListener(D.name,D.handler)})();const U="blob:"===j.substring(0,5),q="data:"===j.substring(0,5),i=()=>{U||q||!H.e.IsCustomRequestAvailable?r.src=j:N(j,((D,h,o)=>{const H=new Blob([D],{type:!R&&o?o:R}),g=URL.createObjectURL(H);Q=!0,r.src=g}),void 0,g||void 0,!0,((D,h)=>{v(h)}))},G=()=>{g&&g.loadImage(j,r)};if(!U&&!q&&g&&g.enableTexturesOffline)g.open(G,i);else{if(-1!==j.indexOf("file:")){const D=decodeURIComponent(j.substring(5).toLowerCase());if(M.FilesToLoad[D]&&"undefined"!==typeof URL){try{let h;try{h=URL.createObjectURL(M.FilesToLoad[D])}catch(J){h=URL.createObjectURL(M.FilesToLoad[D])}r.src=h,Q=!0}catch(O){r.src=""}return r}}i()}return r},G=(D,h,o,H,g)=>{const M=new FileReader,R={onCompleteObservable:new j.c,abort:()=>M.abort()};return M.onloadend=()=>R.onCompleteObservable.notifyObservers(R),g&&(M.onerror=()=>{g(new q(`Unable to read ${D.name}`,D))}),M.onload=D=>{h(D.target.result)},o&&(M.onprogress=o),H?M.readAsArrayBuffer(D):M.readAsText(D),R},N=(D,h,o,H,g,t,S)=>{if(D.name)return G(D,h,o,g,t?D=>{t(void 0,D)}:void 0);const k=D;if(-1!==k.indexOf("file:")){let D=decodeURIComponent(k.substring(5).toLowerCase());0===D.indexOf("./")&&(D=D.substring(2));const H=M.FilesToLoad[D];if(H)return G(H,h,o,g,t?D=>t(void 0,new s(D.message,D.file)):void 0)}const{match:v,type:r}=T(k);if(v){const D={onCompleteObservable:new j.c,abort:()=>()=>{}};try{const D=g?Z(k):e(k);h(D,void 0,r)}catch(R){t?t(void 0,R):K.d.Error(R.message||"Failed to parse the Data URL")}return Q.e.SetImmediate((()=>{D.onCompleteObservable.notifyObservers(D)})),D}return J(k,((D,o)=>{h(D,null===o||void 0===o?void 0:o.responseURL,null===o||void 0===o?void 0:o.getResponseHeader("content-type"))}),o,H,g,t?D=>{t(D.request,new s(D.message,D.request))}:void 0,S)},J=(D,h,o,M,R,t,S)=>{D=c.CleanUrl(D),D=c.PreprocessUrl(D);const k=c.BaseUrl+D;let Q=!1;const v={onCompleteObservable:new j.c,abort:()=>Q=!0},r=()=>{let D,j=new H.e,M=null;const r=()=>{j&&(o&&j.removeEventListener("progress",o),D&&j.removeEventListener("readystatechange",D),j.removeEventListener("loadend",B))};let B=()=>{r(),v.onCompleteObservable.notifyObservers(v),v.onCompleteObservable.clear(),o=void 0,D=null,B=null,t=void 0,S=void 0,h=void 0};v.abort=()=>{Q=!0,B&&B(),j&&j.readyState!==(XMLHttpRequest.DONE||4)&&j.abort(),null!==M&&(clearTimeout(M),M=null),j=null};const s=D=>{const h=D.message||"Unknown error";t&&j?t(new U(h,j)):K.d.Error(h)},q=K=>{if(j){if(j.open("GET",k),S)try{S(j)}catch(v){return void s(v)}R&&(j.responseType="arraybuffer"),o&&j.addEventListener("progress",o),B&&j.addEventListener("loadend",B),D=()=>{if(!Q&&j&&j.readyState===(XMLHttpRequest.DONE||4)){if(D&&j.removeEventListener("readystatechange",D),j.status>=200&&j.status<300||0===j.status&&(!(0,g.m)()||E())){const D=R?j.response:j.responseText;if(null!==D){try{h&&h(D,j)}catch(v){s(v)}return}}const o=c.DefaultRetryStrategy;if(o){const D=o(k,j,K);if(-1!==D)return r(),j=new H.e,void(M=setTimeout((()=>q(K+1)),D))}const S=new U("Error status: "+j.status+" "+j.statusText+" - Unable to load "+k,j);t&&t(S)}},j.addEventListener("readystatechange",D),j.send()}};q(0)};if(M&&M.enableSceneOffline){const H=D=>{D&&D.status>400?t&&t(D):r()},g=()=>{M&&M.loadFile(c.BaseUrl+D,(D=>{!Q&&h&&h(D),v.onCompleteObservable.notifyObservers(v)}),o?D=>{!Q&&o&&o(D)}:void 0,H,R)};M.open(g,H)}else r();return v},O=D=>{const{match:h,type:o}=T(D);if(h)return o||void 0;const H=D.lastIndexOf(".");switch(D.substring(H+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"eh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},E=()=>"undefined"!==typeof location&&"file:"===location.protocol,L=D=>B.test(D),T=D=>{const h=B.exec(D);if(null===h||0===h.length)return{match:!1,type:""};return{match:!0,type:h[0].replace("data:","").replace("base64,","")}};function Z(D){return(0,t.c)(D.split(",")[1])}const e=D=>(0,t.e)(D.split(",")[1]);let p;r.e._FileToolsLoadImage=i,v.c.loadFile=N,S.r.loadFile=N;((D,h,o,H,g,j,M,R,t,S)=>{p={DecodeBase64UrlToBinary:D,DecodeBase64UrlToString:h,DefaultRetryStrategy:o.DefaultRetryStrategy,BaseUrl:o.BaseUrl,CorsBehavior:o.CorsBehavior,PreprocessUrl:o.PreprocessUrl,IsBase64DataUrl:H,IsFileURL:g,LoadFile:j,LoadImage:M,ReadFile:R,RequestFile:t,SetCorsBehavior:S},Object.defineProperty(p,"DefaultRetryStrategy",{get:function(){return o.DefaultRetryStrategy},set:function(D){o.DefaultRetryStrategy=D}}),Object.defineProperty(p,"BaseUrl",{get:function(){return o.BaseUrl},set:function(D){o.BaseUrl=D}}),Object.defineProperty(p,"PreprocessUrl",{get:function(){return o.PreprocessUrl},set:function(D){o.PreprocessUrl=D}}),Object.defineProperty(p,"CorsBehavior",{get:function(){return o.CorsBehavior},set:function(D){o.CorsBehavior=D}})})(Z,e,c,L,E,N,i,G,J,y)},12798:(D,h,o)=>{function H(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(D=>{const h=16*Math.random()|0;return("x"===D?h:3&h|8).toString(16)}))}o.d(h,{d:()=>H})},12791:(D,h,o)=>{o.d(h,{e:()=>j});var H=o(12658),g=o(12793);class j{static Instantiate(D){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[D])return this.RegisteredExternalClasses[D];const h=(0,g.d)(D);if(h)return h;H.d.Warn(D+" not found, you may have missed an import.");const o=D.split(".");let j=window||this;for(let H=0,g=o.length;H<g;H++)j=j[o[H]];return"function"!==typeof j?null:j}}j.RegisteredExternalClasses={}},12667:(D,h,o)=>{o.d(h,{b:()=>g});var H=o(12656);class g{static get Now(){return(0,H.m)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12702:(D,h,o)=>{o.d(h,{c:()=>M,e:()=>j,g:()=>H,k:()=>g});const H=D=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(D);let h="";for(let o=0;o<D.byteLength;o++)h+=String.fromCharCode(D[o]);return h},g=D=>{const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,H,g,j,M,R,t,S="",k=0;const K=ArrayBuffer.isView(D)?new Uint8Array(D.buffer,D.byteOffset,D.byteLength):new Uint8Array(D);for(;k<K.length;)o=K[k++],H=k<K.length?K[k++]:Number.NaN,g=k<K.length?K[k++]:Number.NaN,j=o>>2,M=(3&o)<<4|H>>4,R=(15&H)<<2|g>>6,t=63&g,isNaN(H)?R=t=64:isNaN(g)&&(t=64),S+=h.charAt(j)+h.charAt(M)+h.charAt(R)+h.charAt(t);return S},j=D=>atob(D),M=D=>{const h=j(D),o=h.length,H=new Uint8Array(new ArrayBuffer(o));for(let g=0;g<o;g++)H[g]=h.charCodeAt(g);return H.buffer}},12801:(D,h,o)=>{function H(D){let h=1;do{h*=2}while(h<D);return h===D}function g(D,h,o){return D*(1-o)+h*o}function j(D){const h=M(D),o=R(D);return h-D>D-o?o:h}function M(D){return D--,D|=D>>1,D|=D>>2,D|=D>>4,D|=D>>8,D|=D>>16,++D}function R(D){return D|=D>>1,D|=D>>2,D|=D>>4,D|=D>>8,(D|=D>>16)-(D>>1)}function t(D,h){let o;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:o=R(D);break;case 2:o=j(D);break;default:o=M(D)}return Math.min(o,h)}o.d(h,{e:()=>R,h:()=>t,j:()=>H,l:()=>g,n:()=>j})},12642:(D,h,o)=>{o.r(h),o.d(h,{AsyncLoop:()=>q,Tools:()=>s,className:()=>U});var H=o(12648),g=o(12656),j=o(12658),M=o(12664),R=o(12667),t=o(12672),S=o(12674),k=o(12683),K=o(12691),Q=o(12722),v=o(12791),r=o(12798),B=o(12801);class s{static get BaseUrl(){return K.i.BaseUrl}static set BaseUrl(D){K.i.BaseUrl=D}static get CleanUrl(){return K.i.CleanUrl}static set CleanUrl(D){K.i.CleanUrl=D}static IsAbsoluteUrl(D){return 0===D.indexOf("//")||-1!==D.indexOf("://")&&(-1!==D.indexOf(".")&&(-1!==D.indexOf("/")&&(!(D.indexOf(":")>D.indexOf("/"))&&(D.indexOf("://")<D.indexOf(".")||(0===D.indexOf("data:")||0===D.indexOf("blob:"))))))}static set ScriptBaseUrl(D){K.i.ScriptBaseUrl=D}static get ScriptBaseUrl(){return K.i.ScriptBaseUrl}static set CDNBaseUrl(D){s.ScriptBaseUrl=D,s.AssetBaseUrl=D}static set ScriptPreprocessUrl(D){K.i.ScriptPreprocessUrl=D}static get ScriptPreprocessUrl(){return K.i.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return K.i.DefaultRetryStrategy}static set DefaultRetryStrategy(D){K.i.DefaultRetryStrategy=D}static get CorsBehavior(){return K.i.CorsBehavior}static set CorsBehavior(D){K.i.CorsBehavior=D}static get UseFallbackTexture(){return k.d.UseFallbackTexture}static set UseFallbackTexture(D){k.d.UseFallbackTexture=D}static get RegisteredExternalClasses(){return v.e.RegisteredExternalClasses}static set RegisteredExternalClasses(D){v.e.RegisteredExternalClasses=D}static get fallbackTexture(){return k.d.FallbackTexture}static set fallbackTexture(D){k.d.FallbackTexture=D}static FetchToRef(D,h,o,H,g,j){const M=4*((Math.abs(D)*o%o|0)+(Math.abs(h)*H%H|0)*o);j.r=g[M]/255,j.g=g[M+1]/255,j.b=g[M+2]/255,j.a=g[M+3]/255}static Mix(D,h,o){return 0}static Instantiate(D){return v.e.Instantiate(D)}static SetImmediate(D){Q.e.SetImmediate(D)}static IsExponentOfTwo(D){return!0}static FloatRound(D){return Math.fround(D)}static GetFilename(D){const h=D.lastIndexOf("/");return h<0?D:D.substring(h+1)}static GetFolderPath(D){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=D.lastIndexOf("/");return o<0?h?D:"":D.substring(0,o+1)}static ToDegrees(D){return 180*D/Math.PI}static ToRadians(D){return D*Math.PI/180}static SmoothAngleChange(D,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const H=this.ToRadians(D),g=this.ToRadians(h);return this.ToDegrees(Math.atan2((1-o)*Math.sin(g)+o*Math.sin(H),(1-o)*Math.cos(g)+o*Math.cos(H)))}static MakeArray(D,h){return!0===h||void 0!==D&&null!=D?Array.isArray(D)?D:[D]:null}static GetPointerPrefix(D){return(0,g.m)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(D,h){(0,K.A)(D,h)}static SetReferrerPolicyBehavior(D,h){h.referrerPolicy=D}static get PreprocessUrl(){return K.i.PreprocessUrl}static set PreprocessUrl(D){K.i.PreprocessUrl=D}static LoadImage(D,h,o,H,g,j){return(0,K.s)(D,h,o,H,g,j)}static LoadFile(D,h,o,H,g,j){return(0,K.r)(D,h,o,H,g,j)}static async LoadFileAsync(D){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((o,H)=>{(0,K.r)(D,(D=>{o(D)}),void 0,void 0,h,((D,h)=>{H(h)}))}))}static GetAssetUrl(D){if(!D)return"";if(s.AssetBaseUrl&&D.startsWith(s._DefaultAssetsUrl)){const h="/"===s.AssetBaseUrl[s.AssetBaseUrl.length-1]?s.AssetBaseUrl.substring(0,s.AssetBaseUrl.length-1):s.AssetBaseUrl;return D.replace(s._DefaultAssetsUrl,h)}return D}static GetBabylonScriptURL(D,h){if(!D)return"";if(s.ScriptBaseUrl&&D.startsWith(s._DefaultCdnUrl)){const h="/"===s.ScriptBaseUrl[s.ScriptBaseUrl.length-1]?s.ScriptBaseUrl.substring(0,s.ScriptBaseUrl.length-1):s.ScriptBaseUrl;D=D.replace(s._DefaultCdnUrl,h)}return D=s.ScriptPreprocessUrl(D),h&&(D=s.GetAbsoluteUrl(D)),D}static LoadBabylonScript(D,h,o,H){D=s.GetBabylonScriptURL(D),s.LoadScript(D,h,o)}static async LoadBabylonScriptAsync(D){return D=s.GetBabylonScriptURL(D),await s.LoadScriptAsync(D)}static LoadScript(D,h,o,H){let j=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(D),h&&h()}catch(t){null===o||void 0===o||o(`Unable to load script '${D}' in worker`,t)}return}if(!(0,g.m)())return void(null===o||void 0===o||o(`Cannot load script '${D}' outside of a window or a worker`));const M=document.getElementsByTagName("head")[0],R=document.createElement("script");j?(R.setAttribute("type","module"),R.innerText=D):(R.setAttribute("type","text/javascript"),R.setAttribute("src",D)),H&&(R.id=H),R.onload=()=>{h&&h()},R.onerror=h=>{o&&o(`Unable to load script '${D}'`,h)},M.appendChild(R)}static async LoadScriptAsync(D,h){return await new Promise(((o,H)=>{this.LoadScript(D,(()=>{o()}),((D,h)=>{H(h||new Error(D))}),h)}))}static ReadFileAsDataURL(D,h,o){const g=new FileReader,j={onCompleteObservable:new H.c,abort:()=>g.abort()};return g.onloadend=()=>{j.onCompleteObservable.notifyObservers(j)},g.onload=D=>{h(D.target.result)},g.onprogress=o,g.readAsDataURL(D),j}static ReadFile(D,h,o,H,g){return(0,K.t)(D,h,o,H,g)}static FileAsURL(D){const h=new Blob([D]);return window.URL.createObjectURL(h)}static Format(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return D.toFixed(h)}static DeepCopy(D,h,o,H){M.d.DeepCopy(D,h,o,H)}static IsEmpty(D){for(const h in D)if(Object.prototype.hasOwnProperty.call(D,h))return!1;return!0}static RegisterTopRootEvents(D,h){for(let H=0;H<h.length;H++){const g=h[H];D.addEventListener(g.name,g.handler,!1);try{window.parent&&window.parent.addEventListener(g.name,g.handler,!1)}catch(o){}}}static UnregisterTopRootEvents(D,h){for(let H=0;H<h.length;H++){const g=h[H];D.removeEventListener(g.name,g.handler);try{D.parent&&D.parent.removeEventListener(g.name,g.handler)}catch(o){}}}static async DumpFramebuffer(D,h,o,H){throw(0,t.e)("DumpTools")}static DumpData(D,h,o,H){throw(0,t.e)("DumpTools")}static async DumpDataAsync(D,h,o){throw(0,t.e)("DumpTools")}static _IsOffScreenCanvas(D){return void 0!==D.convertToBlob}static ToBlob(D,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0;s._IsOffScreenCanvas(D)||D.toBlob||(D.toBlob=function(D,h,o){setTimeout((()=>{const H=atob(this.toDataURL(h,o).split(",")[1]),g=H.length,j=new Uint8Array(g);for(let D=0;D<g;D++)j[D]=H.charCodeAt(D);D(new Blob([j]))}))}),s._IsOffScreenCanvas(D)?D.convertToBlob({type:o,quality:H}).then((D=>h(D))):D.toBlob((function(D){h(D)}),o,H)}static DownloadBlob(D,h){if("download"in document.createElement("a")){if(!h){const D=new Date;h="screenshot_"+((D.getFullYear()+"-"+(D.getMonth()+1)).slice(2)+"-"+D.getDate()+"_"+D.getHours()+"-"+("0"+D.getMinutes()).slice(-2))+".png"}s.Download(D,h)}else if(D&&"undefined"!==typeof URL){const h=URL.createObjectURL(D),o=window.open("");if(!o)return;const H=o.document.createElement("img");H.onload=function(){URL.revokeObjectURL(h)},H.src=h,o.document.body.appendChild(H)}}static EncodeScreenshotCanvasData(D,h){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",H=arguments.length>3?arguments[3]:void 0,g=arguments.length>4?arguments[4]:void 0;if("string"!==typeof H&&h){if(h){if(s._IsOffScreenCanvas(D))return void D.convertToBlob({type:o,quality:g}).then((D=>{const o=new FileReader;o.readAsDataURL(D),o.onloadend=()=>{const D=o.result;h(D)}}));const H=D.toDataURL(o,g);h(H)}}else this.ToBlob(D,(function(D){D&&s.DownloadBlob(D,H),h&&h("")}),o,g)}static Download(D,h){if("undefined"===typeof URL)return;const o=window.URL.createObjectURL(D),H=document.createElement("a");document.body.appendChild(H),H.style.display="none",H.href=o,H.download=h,H.addEventListener("click",(()=>{H.parentElement&&H.parentElement.removeChild(H)})),H.click(),window.URL.revokeObjectURL(o)}static BackCompatCameraNoPreventDefault(D){return"boolean"===typeof D[0]?D[0]:"boolean"===typeof D[1]&&D[1]}static CreateScreenshot(D,h,o,H){throw(0,t.e)("ScreenshotTools")}static async CreateScreenshotAsync(D,h,o){throw(0,t.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(D,h,o,H){throw(0,t.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(D,h,o){throw(0,t.e)("ScreenshotTools")}static RandomId(){return(0,r.d)()}static IsBase64(D){return(0,K.l)(D)}static DecodeBase64(D){return(0,K.e)(D)}static get errorsCount(){return j.d.errorsCount}static Log(D){j.d.Log(D)}static Warn(D){j.d.Warn(D)}static Error(D){j.d.Error(D)}static get LogCache(){return j.d.LogCache}static ClearLogCache(){j.d.ClearLogCache()}static set LogLevels(D){j.d.LogLevels=D}static set PerformanceLogLevel(D){return(D&s.PerformanceUserMarkLogLevel)===s.PerformanceUserMarkLogLevel?(s.StartPerformanceCounter=s._StartUserMark,void(s.EndPerformanceCounter=s._EndUserMark)):(D&s.PerformanceConsoleLogLevel)===s.PerformanceConsoleLogLevel?(s.StartPerformanceCounter=s._StartPerformanceConsole,void(s.EndPerformanceCounter=s._EndPerformanceConsole)):(s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,void(s.EndPerformanceCounter=s._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(D,h){}static _EndPerformanceCounterDisabled(D,h){}static _StartUserMark(D){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s._Performance){if(!(0,g.m)())return;s._Performance=window.performance}h&&s._Performance.mark&&s._Performance.mark(D+"-Begin")}static _EndUserMark(D){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&s._Performance.mark&&(s._Performance.mark(D+"-End"),s._Performance.measure(D,D+"-Begin",D+"-End"))}static _StartPerformanceConsole(D){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(s._StartUserMark(D,h),console.time&&console.time(D))}static _EndPerformanceConsole(D){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];h&&(s._EndUserMark(D,h),console.timeEnd(D))}static get Now(){return R.b.Now}static GetClassName(D){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null;if(!h&&D.getClassName)o=D.getClassName();else{if(D instanceof Object){o=(h?D:Object.getPrototypeOf(D)).constructor.__bjsclassName__}o||(o=typeof D)}return o}static First(D,h){for(const o of D)if(h(o))return o;return null}static getFullClassName(D){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null,H=null;if(!h&&D.getClassName)o=D.getClassName();else{if(D instanceof Object){const g=h?D:Object.getPrototypeOf(D);o=g.constructor.__bjsclassName__,H=g.constructor.__bjsmoduleName__}o||(o=typeof D)}return o?(null!=H?H+".":"")+o:null}static async DelayAsync(D){await new Promise((h=>{setTimeout((()=>{h()}),D)}))}static IsSafari(){return!!(0,g.l)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function U(D,h){return o=>{o.__bjsclassName__=D,o.__bjsmoduleName__=null!=h?h:null}}s.AssetBaseUrl="",s.UseCustomRequestHeaders=!1,s.CustomRequestHeaders=S.e.CustomRequestHeaders,s.GetDOMTextContent=g.d,s._DefaultCdnUrl="https://cdn.babylonjs.com",s._DefaultAssetsUrl="https://assets.babylonjs.com/core",s.GetAbsoluteUrl="object"===typeof document?D=>{const h=document.createElement("a");return h.href=D,h.href}:"function"===typeof URL&&"object"===typeof location?D=>new URL(D,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},s.NoneLogLevel=j.d.NoneLogLevel,s.MessageLogLevel=j.d.MessageLogLevel,s.WarningLogLevel=j.d.WarningLogLevel,s.ErrorLogLevel=j.d.ErrorLogLevel,s.AllLogLevel=j.d.AllLogLevel,s.IsWindowObjectExist=g.m,s.PerformanceNoneLogLevel=0,s.PerformanceUserMarkLogLevel=1,s.PerformanceConsoleLogLevel=2,s.StartPerformanceCounter=s._StartPerformanceCounterDisabled,s.EndPerformanceCounter=s._EndPerformanceCounterDisabled;class q{constructor(D,h,o){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=D,this.index=H-1,this._done=!1,this._fn=h,this._successCallback=o}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(D,h,o){const H=new q(D,h,o,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return H.executeNext(),H}static SyncAsyncForLoop(D,h,o,H,g){let j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return q.Run(Math.ceil(D/h),(H=>{g&&g()?H.breakLoop():setTimeout((()=>{for(let j=0;j<h;++j){const M=H.index*h+j;if(M>=D)break;if(o(M),g&&g()){H.breakLoop();break}}H.executeNext()}),j)}),H)}}s.Mix=B.l,s.IsExponentOfTwo=B.j,k.d.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12793:(D,h,o)=>{o.d(h,{d:()=>j,g:()=>g});const H={};function g(D,h){H[D]=h}function j(D){return H[D]}},12674:(D,h,o)=>{o.d(h,{e:()=>H});class H{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(H.CustomRequestHeaders).length>0||H.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const D in H.CustomRequestHeaders){const h=H.CustomRequestHeaders[D];h&&this._xhr.setRequestHeader(D,h)}}_shouldSkipRequestModifications(D){return H.SkipRequestModificationForBabylonCDN&&(D.includes("preview.babylonjs.com")||D.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(D){this._xhr.onprogress=D}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(D){this._xhr.responseType=D}get timeout(){return this._xhr.timeout}set timeout(D){this._xhr.timeout=D}addEventListener(D,h,o){this._xhr.addEventListener(D,h,o)}removeEventListener(D,h,o){this._xhr.removeEventListener(D,h,o)}abort(){this._xhr.abort()}send(D){H.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(D)}open(D,h){for(const o of H.CustomRequestModifiers){if(this._shouldSkipRequestModifications(h))return;h=o(this._xhr,h)||h}h=(h=h.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=h,this._xhr.open(D,h,!0)}setRequestHeader(D,h){this._xhr.setRequestHeader(D,h)}getResponseHeader(D){return this._xhr.getResponseHeader(D)}}H.CustomRequestHeaders={},H.CustomRequestModifiers=new Array,H.SkipRequestModificationForBabylonCDN=!0}}]);