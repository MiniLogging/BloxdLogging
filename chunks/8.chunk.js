"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11093:(o,H,n)=>{n.d(H,{e:()=>h});var E=n(11060),k=n(11038),g=n(11096),O=n(11115),Y=n(11042);class y{constructor(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,o&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(o){this._zOffset!==o&&(this._zOffset=o,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(o){this._zOffsetUnits!==o&&(this._zOffsetUnits=o,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(o){this._cullFace!==o&&(this._cullFace=o,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(o){this._cull!==o&&(this._cull=o,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(o){this._depthFunc!==o&&(this._depthFunc=o,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(o){this._depthMask!==o&&(this._depthMask=o,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(o){this._depthTest!==o&&(this._depthTest=o,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(o){this._frontFace!==o&&(this._frontFace=o,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(o){this.isDirty&&(this._isCullDirty&&(this.cull?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(o.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(o.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(o.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(this.zOffset,this.zOffsetUnits)):o.disable(o.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(o.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class S{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(o){this._func!==o&&(this._func=o,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(o){this._funcRef!==o&&(this._funcRef=o,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(o){this._funcMask!==o&&(this._funcMask=o,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(o){this._opStencilFail!==o&&(this._opStencilFail=o,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(o){this._opDepthFail!==o&&(this._opDepthFail=o,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(o){this._opStencilDepthPass!==o&&(this._opStencilDepthPass=o,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(o){this._mask!==o&&(this._mask=o,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(o){this._enabled!==o&&(this._enabled=o,this._isStencilTestDirty=!0)}constructor(){let o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,o&&this.reset()}reset(){var o;this.stencilMaterial=void 0,null===(o=this.stencilGlobal)||void 0===o||o.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(o){var H;if(!o)return;const n=!this.useStencilGlobalOnly&&!(null===(H=this.stencilMaterial)||void 0===H||!H.enabled);this.enabled=n?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=n?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=n?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=n?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=n?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=n?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=n?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=n?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(o.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(o.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(o.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class G{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=G.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=G.KEEP,this.opDepthFail=G.KEEP,this.opStencilDepthPass=G.REPLACE}get stencilFunc(){return this.func}set stencilFunc(o){this.func=o}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(o){this.funcRef=o}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(o){this.funcMask=o}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(o){this.opStencilFail=o}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(o){this.opDepthFail=o}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(o){this.opStencilDepthPass=o}get stencilMask(){return this.mask}set stencilMask(o){this.mask=o}get stencilTest(){return this.enabled}set stencilTest(o){this.enabled=o}}G.ALWAYS=519,G.KEEP=7680,G.REPLACE=7681;class c{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(o){this._alphaBlend!==o&&(this._alphaBlend=o,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(o,H,n,E){this._blendConstants[0]===o&&this._blendConstants[1]===H&&this._blendConstants[2]===n&&this._blendConstants[3]===E||(this._blendConstants[0]=o,this._blendConstants[1]=H,this._blendConstants[2]=n,this._blendConstants[3]=E,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(o,H,n,E){this._blendFunctionParameters[0]===o&&this._blendFunctionParameters[1]===H&&this._blendFunctionParameters[2]===n&&this._blendFunctionParameters[3]===E||(this._blendFunctionParameters[0]=o,this._blendFunctionParameters[1]=H,this._blendFunctionParameters[2]=n,this._blendFunctionParameters[3]=E,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(o,H){this._blendEquationParameters[0]===o&&this._blendEquationParameters[1]===H||(this._blendEquationParameters[0]=o,this._blendEquationParameters[1]=H,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(o){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?o.enable(o.BLEND):o.disable(o.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(o.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(o.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(o.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var A=n(11051),l=n(11120),x=n(11035),z=n(11026),V=n(11083),J=n(11134);function N(o,H){if((0,x.f)()){const{requestAnimationFrame:n}=H||window;if("function"===typeof n)return n(o)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(o);return setTimeout(o,16)}class h{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(o){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(o){o!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=o,this._depthCullingState.depthFunc=o?518:515)}setColorWrite(o){o!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=o)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(o){if(o)return this.isNDCHalfZRange?o.IS_NDC_HALF_ZRANGE="":delete o.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?o.USE_REVERSE_DEPTHBUFFER="":delete o.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?o.USE_EXACT_SRGB_CONVERSIONS="":delete o.USE_EXACT_SRGB_CONVERSIONS);{let o="";return this.isNDCHalfZRange&&(o+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(o&&(o+="\n"),o+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(o&&(o+="\n"),o+="#define USE_EXACT_SRGB_CONVERSIONS"),o}}_rebuildInternalTextures(){const o=this._internalTexturesCache.slice();for(const H of o)H._rebuild()}_rebuildRenderTargetWrappers(){const o=this._renderTargetWrapperCache.slice();for(const H of o)H._rebuild()}_rebuildEffects(){for(const o in this._compiledEffects){const H=this._compiledEffects[o];H._pipelineContext=null,H._prepareEffect()}g.Effect.ResetCache()}_rebuildGraphicsResources(){var o;this.wipeCaches(!0),this._rebuildEffects(),null===(o=this._rebuildComputeEffects)||void 0===o||o.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){k.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(o){setTimeout((()=>{this._clearEmptyResources();const H=this._depthCullingState.depthTest,n=this._depthCullingState.depthFunc,E=this._depthCullingState.depthMask,k=this._stencilState.stencilTest;o(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=H,this._depthCullingState.depthFunc=n,this._depthCullingState.depthMask=E,this._stencilState.stencilTest=k,this._flagContextRestored()}),0)}get l(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(o){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(o){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const o=new Uint8Array(4),H=[o,o,o,o,o,o];this._emptyCubeTexture=this.createRawCubeTexture(H,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(o){if(!o)return this._activeRenderLoops.length=0,void this._cancelFrame();const H=this._activeRenderLoops.indexOf(o);H>=0&&(this._activeRenderLoops.splice(H,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const o=this._frameHandler;if(this._frameHandler=0,(0,x.f)()){const{cancelAnimationFrame:H}=this.getHostWindow()||window;if("function"===typeof H)return H(o)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(o);return clearTimeout(o)}}kg(){this.onBeginFrameObservable.notifyObservers(this)}gg(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(o){this._maxFPS=o,void 0!==o&&(this._minFrameTime=o<=0?Number.MAX_VALUE:1e3/o)}_isOverFrameTime(o){if(!o||void 0===this._maxFPS)return!1;const H=o-this._lastFrameTime;return this._lastFrameTime=o,this._renderAccumulator+=H,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(o){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(o)){let o=!0;(this.l||!this.renderEvenInBackground&&this._windowIsBackground)&&(o=!1),o&&(this.kg(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.gg())}}_renderLoop(o){this._processFrame(o),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let o=0;o<this._activeRenderLoops.length;o++){(0,this._activeRenderLoops[o])()}}_renderViews(){return!1}_queueNewFrame(o,H){return N(o,H)}runRenderLoop(o){-1===this._activeRenderLoops.indexOf(o)&&(this._activeRenderLoops.push(o),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(o){this._depthCullingState.depthTest=o}setZOffset(o){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-o:o}getZOffset(){const o=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-o:o}setZOffsetUnits(o){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-o:o}getZOffsetUnits(){const o=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-o:o}getHostWindow(){return(0,x.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(o){this._compatibilityMode=!0}_rebuildTextures(){for(const o of this.scenes)o._rebuildTextures();for(const o of this._virtualScenes)o._rebuildTextures()}_releaseRenderTargetWrapper(o){const H=this._renderTargetWrapperCache.indexOf(o);-1!==H&&this._renderTargetWrapperCache.splice(H,1)}get currentViewport(){return this._cachedViewport}setViewport(o,H,n){const E=H||this.getRenderWidth(),k=n||this.getRenderHeight(),g=o.x||0,O=o.y||0;this._cachedViewport=o,this._viewport(g*E,O*k,E*o.width,k*o.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(o){return new Path2D(o)}get description(){let o=this.name+this.version;return this._caps.parallelShaderCompile&&(o+=" - Parallel shader compilation"),o}_createTextureBase(o,H,n,g){let O=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,Y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,S=arguments.length>7?arguments[7]:void 0,G=arguments.length>8?arguments[8]:void 0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,A=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,x=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,z=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,V=arguments.length>13?arguments[13]:void 0,N=arguments.length>14?arguments[14]:void 0,Q=arguments.length>15?arguments[15]:void 0;const p="data:"===(o=o||"").substring(0,5),j="blob:"===o.substring(0,5),m=p&&-1!==o.indexOf(";base64,"),P=A||new l.d(this,1);P!==A&&(P.label=o.substring(0,60));const b=o;!this._transformTextureUrl||m||A||c||(o=this._transformTextureUrl(o)),b!==o&&(P._originalUrl=b);const e=o.lastIndexOf(".");let Z=z||(e>-1?o.substring(e).toLowerCase():"");Z.indexOf("?")>-1&&(Z=Z.split("?")[0]);const M=(0,J.b)(Z,V);g&&g.addPendingData(P),P.url=o,P.generateMipMaps=!H,P.samplingMode=O,P.invertY=n,P._useSRGBBuffer=this._getUseSRGBBuffer(!!Q,H),this._doNotHandleContextLost||(P._buffer=c);let K=null;Y&&!A&&(K=P.onLoadedObservable.add(Y)),A||this._internalTexturesCache.push(P);const f=(n,A)=>{g&&g.removePendingData(P),o===b?(K&&P.onLoadedObservable.remove(K),E.e.UseFallbackTexture&&o!==E.e.FallbackTexture&&this._createTextureBase(E.e.FallbackTexture,H,P.invertY,g,O,null,y,S,G,c,P),n=(n||"Unknown error")+(E.e.UseFallbackTexture?" - Fallback texture was used":""),P.onErrorObservable.notifyObservers({message:n,exception:A}),y&&y(n,A)):(k.d.Warn(`Failed to load ${o}, falling back to ${b}`),this._createTextureBase(b,H,P.invertY,g,O,Y,y,S,G,c,P,x,z,V,N,Q))};if(M){const H=async o=>{(await M).loadData(o,P,((o,H,n,E,k,Y)=>{Y?f("TextureLoader failed to load data"):S(P,Z,g,{width:o,height:H},P.invertY,!n,E,(()=>(k(),!1)),O)}),N)};c?c instanceof ArrayBuffer?H(new Uint8Array(c)):ArrayBuffer.isView(c)?H(c):y&&y("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(o,(o=>{H(new Uint8Array(o))}),void 0,g?g.offlineProvider:void 0,!0,((o,H)=>{f("Unable to load "+(o&&o.responseURL,H))}))}else{const n=o=>{j&&!this._doNotHandleContextLost&&(P._buffer=o),S(P,Z,g,o,P.invertY,H,!1,G,O)};!p||m?c&&("string"===typeof c.decoding||c.close)?n(c):h._FileToolsLoadImage(o||"",n,f,g?g.offlineProvider:null,V,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof c||c instanceof ArrayBuffer||ArrayBuffer.isView(c)||c instanceof Blob?h._FileToolsLoadImage(c,n,f,g?g.offlineProvider:null,V,P.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):c&&n(c)}return P}_rebuildBuffers(){for(const o of this._uniformBuffers)o._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,x.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const o in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,o)&&(this._boundTexturesCache[o]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(o){this._name=o}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(o){this._hardwareScalingLevel=o,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(o){this._doNotHandleContextLost=o}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(o,H,n){var k,g;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new y,this._stencilStateComposer=new S,this._stencilState=new G,this._alphaState=new c,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new z.d,this.onCanvasFocusObservable=new z.d,this.onNewSceneAddedObservable=new z.d,this.onResizeObservable=new z.d,this.onCanvasPointerOutObservable=new z.d,this.onEffectErrorObservable=new z.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new z.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=o=>this._renderLoop(o),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new z.d,this.onAfterShaderCompilationObservable=new z.d,this.onBeginFrameObservable=new z.d,this.onEndFrameObservable=new z.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new z.d,this.onContextRestoredObservable=new z.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.yg=new z.d,this.onReleaseEffectsObservable=new z.d,E.e.Instances.push(this),this.startTime=Y.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,O.c.SetMatrixPrecision(!!H.useHighPrecisionMatrix),(0,x.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=n??!1,H.antialias=o??H.antialias,H.deterministicLockstep=H.deterministicLockstep??!1,H.lockstepMaxSteps=H.lockstepMaxSteps??4,H.timeStep=H.timeStep??1/60,H.stencil=H.stencil??!0,this._audioContext=(null===(k=H.audioEngineOptions)||void 0===k?void 0:k.audioContext)??null,this._audioDestination=(null===(g=H.audioEngineOptions)||void 0===g?void 0:g.audioDestination)??null,this.premultipliedAlpha=H.premultipliedAlpha??!0,this._doNotHandleContextLost=!!H.doNotHandleContextLost,this._isStencilEnable=!!H.stencil,this.useExactSrgbConversions=H.useExactSrgbConversions??!1;const A=(0,x.f)()&&window.devicePixelRatio||1,l=H.limitDeviceRatio||A;n=n||H.adaptToDeviceRatio||!1,this._hardwareScalingLevel=n?1/Math.min(l,A):1,this._lastDevicePixelRatio=A,this._creationOptions=H}resize(){let o,H,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const o=(0,x.f)()&&window.devicePixelRatio||1,H=this._lastDevicePixelRatio/o;this._lastDevicePixelRatio=o,this._hardwareScalingLevel*=H}if((0,x.f)()&&(0,x.d)())if(this._renderingCanvas){var E,k;const n=null===(E=(k=this._renderingCanvas).getBoundingClientRect)||void 0===E?void 0:E.call(k);o=this._renderingCanvas.clientWidth||(null===n||void 0===n?void 0:n.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,H=this._renderingCanvas.clientHeight||(null===n||void 0===n?void 0:n.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else o=window.innerWidth,H=window.innerHeight;else o=this._renderingCanvas?this._renderingCanvas.width:100,H=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(o/this._hardwareScalingLevel,H/this._hardwareScalingLevel,n)}setSize(o,H){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(o|=0,H|=0,!n&&this._renderingCanvas.width===o&&this._renderingCanvas.height===H)return!1;if(this._renderingCanvas.width=o,this._renderingCanvas.height=H,this.scenes){for(let o=0;o<this.scenes.length;o++){const H=this.scenes[o];for(let o=0;o<H.cameras.length;o++){H.cameras[o]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(o,H,n,E,k,g,O,Y,y,S,G){throw(0,A.c)("engine.rawTexture")}createRawCubeTexture(o,H,n,E,k,g,O,Y){throw(0,A.c)("engine.rawTexture")}createRawTexture3D(o,H,n,E,k,g,O,Y,y,S,G){throw(0,A.c)("engine.rawTexture")}createRawTexture2DArray(o,H,n,E,k,g,O,Y,y,S,G){throw(0,A.c)("engine.rawTexture")}_sharedInit(o){this._renderingCanvas=o}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const o=navigator.userAgent;this.hostInformation.isMobile=-1!==o.indexOf("Mobile")||-1!==o.indexOf("Mac")&&(0,x.d)()&&"ontouchend"in document},this._checkForMobile(),(0,x.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(o){return document.createElement("video")}_reportDrawCall(){var o;let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(o=this._drawCalls)||void 0===o||o.addCount(H,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(o,H){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(o,H){return createImageBitmap(o,H)}resizeImageBitmap(o,H,n){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(o){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(o,H){if("undefined"===typeof document)return new OffscreenCanvas(o,H);const n=document.createElement("canvas");return n.width=o,n.height=H,n}createCanvas(o,H){return h._CreateCanvas(o,H)}static _FileToolsLoadImage(o,H,n,E,k,g,O){throw(0,A.c)("FileTools")}_loadFile(o,H,n,E,k,g){const O=(0,V.k)(o,H,n,E,k,g);return this._activeRequests.push(O),O.onCompleteObservable.add((()=>{const o=this._activeRequests.indexOf(O);-1!==o&&this._activeRequests.splice(o,1)})),O}static _FileToolsLoadFile(o,H,n,E,k,g){if(V.b.loadFile)return V.b.loadFile(o,H,n,E,k,g);throw(0,A.c)("FileTools")}dispose(){var o;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(o=this.releaseComputeEffects)||void 0===o||o.call(this),g.Effect.ResetCache();for(const n of this._activeRequests)n.abort();this._boundRenderFunction=null,this.yg.notifyObservers(this),this.yg.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,x.f)()&&window.removeEventListener("resize",this._checkForMobile);const H=E.e.Instances.indexOf(this);H>=0&&E.e.Instances.splice(H,1),E.e.Instances.length||(E.e.OnEnginesDisposedObservable.notifyObservers(this),E.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(o){throw(0,A.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(o,H){for(let n=0;n<E.e.Instances.length;n++){const k=E.e.Instances[n];for(let n=0;n<k.scenes.length;n++)k.scenes[n].markAllMaterialsAsDirty(o,H)}}}h._RenderPassIdCounter=0,h._RescalePostProcessFactory=null,h.CollisionsEpsilon=.001,h.QueueNewFrame=N},11060:(o,H,n)=>{n.d(H,{e:()=>k});var E=n(11026);class k{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}k.Instances=[],k.OnEnginesDisposedObservable=new E.d,k._LastCreatedScene=null,k.UseFallbackTexture=!0,k.FallbackTexture=""},11115:(o,H,n)=>{n.d(H,{c:()=>E});class E{static SetMatrixPrecision(o){if(E.MatrixTrackPrecisionChange=!1,o&&!E.MatrixUse64Bits&&E.MatrixTrackedMatrices)for(let H=0;H<E.MatrixTrackedMatrices.length;++H){const o=E.MatrixTrackedMatrices[H],n=o.Sg;o.Sg=new Array(16);for(let H=0;H<16;++H)o.Sg[H]=n[H]}E.MatrixUse64Bits=o,E.MatrixCurrentType=E.MatrixUse64Bits?Array:Float32Array,E.MatrixTrackedMatrices=null}}E.MatrixUse64Bits=!1,E.MatrixTrackPrecisionChange=!0,E.MatrixCurrentType=Float32Array,E.MatrixTrackedMatrices=[]},11134:(o,H,n)=>{n.d(H,{b:()=>O});var E=n(11038);const k=new Map;function g(o,H){(function(o){return k.delete(o)})(o)&&E.d.Warn(`Extension with the name '${o}' already exists`),k.set(o,H)}function O(o,H){"image/ktx"!==H&&"image/ktx2"!==H||(o=".ktx"),k.has(o)||(o.endsWith(".ies")&&g(".ies",(async()=>await n.e(15).then(n.bind(n,13652)).then((o=>new o._IESTextureLoader)))),o.endsWith(".dds")&&g(".dds",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(19),n.e(18),n.e(28)]).then(n.bind(n,13655)).then((o=>new o._DDSTextureLoader)))),o.endsWith(".basis")&&g(".basis",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(47)]).then(n.bind(n,13673)).then((o=>new o._BasisTextureLoader)))),o.endsWith(".env")&&g(".env",(async()=>await Promise.all([n.e(14),n.e(17),n.e(13),n.e(19),n.e(18),n.e(23),n.e(21),n.e(45),n.e(48)]).then(n.bind(n,13681)).then((o=>new o._ENVTextureLoader)))),o.endsWith(".hdr")&&g(".hdr",(async()=>await Promise.all([n.e(14),n.e(49)]).then(n.bind(n,13689)).then((o=>new o._HDRTextureLoader)))),(o.endsWith(".ktx")||o.endsWith(".ktx2"))&&(g(".ktx",(async()=>await n.e(30).then(n.bind(n,13698)).then((o=>new o._KTXTextureLoader)))),g(".ktx2",(async()=>await n.e(30).then(n.bind(n,13698)).then((o=>new o._KTXTextureLoader))))),o.endsWith(".tga")&&g(".tga",(async()=>await n.e(50).then(n.bind(n,13706)).then((o=>new o._TGATextureLoader)))),o.endsWith(".exr")&&g(".exr",(async()=>await n.e(16).then(n.bind(n,13712)).then((o=>new o._ExrTextureLoader)))));const E=k.get(o);return E?Promise.resolve(E(H)):null}},11120:(o,H,n)=>{n.d(H,{d:()=>O});var E,k=n(11026),g=n(11128);!function(o){o[o.Unknown=0]="Unknown",o[o.Url=1]="Url",o[o.Temp=2]="Temp",o[o.Raw=3]="Raw",o[o.Dynamic=4]="Dynamic",o[o.RenderTarget=5]="RenderTarget",o[o.MultiRenderTarget=6]="MultiRenderTarget",o[o.Cube=7]="Cube",o[o.CubeRaw=8]="CubeRaw",o[o.CubePrefiltered=9]="CubePrefiltered",o[o.Raw3D=10]="Raw3D",o[o.Raw2DArray=11]="Raw2DArray",o[o.DepthStencil=12]="DepthStencil",o[o.CubeRawRGBD=13]="CubeRawRGBD",o[o.Depth=14]="Depth"}(E||(E={}));class O extends g.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(o){this.generateMipMaps=o}get uniqueId(){return this._uniqueId}_setUniqueId(o){this._uniqueId=o}getEngine(){return this._engine}get source(){return this._source}constructor(o,H){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new k.d,this.onErrorObservable=new k.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=o,this._source=H,this._uniqueId=O._Counter++,n||(this._hardwareTexture=o._createHardwareTexture())}incrementReferences(){this._references++}updateSize(o,H){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,o,H,n),this.width=o,this.height=H,this.depth=n,this.baseWidth=o,this.baseHeight=H,this.baseDepth=n,this._size=o*H*n}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const o=this.onRebuildCallback(this),H=H=>{H._swapAndDie(this,!1),this.isReady=o.isReady};return void(o.isAsync?o.proxy.then(H):H(o.proxy))}let o;switch(this.source){case 2:case 12:case 14:break;case 1:return void(o=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(o=>{o._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:o=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),o._swapAndDie(this,!1),this.isReady=!0;break;case 10:o=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),o._swapAndDie(this,!1),this.isReady=!0;break;case 11:o=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),o._swapAndDie(this,!1),this.isReady=!0;break;case 4:o=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),o._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(o=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{o._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:o=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),o._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return o=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(o=>{o&&o._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(o._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(o){var H;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(H=this._hardwareTexture)||void 0===H||H.setUsage(o._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),o._hardwareTexture=this._hardwareTexture,n&&(o._isRGBD=this._isRGBD),this._lodTextureHigh&&(o._lodTextureHigh&&o._lodTextureHigh.dispose(),o._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(o._lodTextureMid&&o._lodTextureMid.dispose(),o._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(o._lodTextureLow&&o._lodTextureLow.dispose(),o._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(o._irradianceTexture&&o._irradianceTexture.dispose(),o._irradianceTexture=this._irradianceTexture);const E=this._engine.getLoadedTexturesCache();let k=E.indexOf(this);-1!==k&&E.splice(k,1),k=E.indexOf(o),-1===k&&E.push(o)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}O._Counter=0},11128:(o,H,n)=>{n.d(H,{d:()=>E});class E{get wrapU(){return this._cachedWrapU}set wrapU(o){this._cachedWrapU=o}get wrapV(){return this._cachedWrapV}set wrapV(o){this._cachedWrapV=o}get wrapR(){return this._cachedWrapR}set wrapR(o){this._cachedWrapR=o}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(o){this._cachedAnisotropicFilteringLevel=o}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(o){this._comparisonFunction=o}get useMipMaps(){return this._useMipMaps}set useMipMaps(o){this._useMipMaps=o}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=o,this._cachedWrapV=H,this._cachedWrapR=n,this._cachedAnisotropicFilteringLevel=E,this.samplingMode=k,this._comparisonFunction=g,this}compareSampler(o){return this._cachedWrapU===o._cachedWrapU&&this._cachedWrapV===o._cachedWrapV&&this._cachedWrapR===o._cachedWrapR&&this._cachedAnisotropicFilteringLevel===o._cachedAnisotropicFilteringLevel&&this.samplingMode===o.samplingMode&&this._comparisonFunction===o._comparisonFunction&&this._useMipMaps===o._useMipMaps}}},11040:(o,H,n)=>{n.d(H,{b:()=>g});var E=n(11038);const k=(o,H,n)=>o?o.getClassName&&"Mesh"===o.getClassName()?null:!o.getClassName||"SubMesh"!==o.getClassName()&&"PhysicsBody"!==o.getClassName()?o.clone?o.clone():Array.isArray(o)?o.slice():n&&"object"===typeof o?{...o}:null:o.clone(H):null;class g{static DeepCopy(o,H,n,g){let O=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const Y=function(o){const H=[];do{const n=Object.getOwnPropertyNames(o);for(const o of n)-1===H.indexOf(o)&&H.push(o)}while(o=Object.getPrototypeOf(o));return H}(o);for(const S of Y){if("_"===S[0]&&(!g||-1===g.indexOf(S)))continue;if(S.endsWith("Observable"))continue;if(n&&-1!==n.indexOf(S))continue;const Y=o[S],G=typeof Y;if("function"!==G)try{if("object"===G)if(Y instanceof Uint8Array)H[S]=Uint8Array.from(Y);else if(Y instanceof Array){if(H[S]=[],Y.length>0)if("object"==typeof Y[0])for(let o=0;o<Y.length;o++){const n=k(Y[o],H,O);-1===H[S].indexOf(n)&&H[S].push(n)}else H[S]=Y.slice(0)}else H[S]=k(Y,H,O);else H[S]=Y}catch(y){E.d.Warn(y.message)}}}}},11068:(o,H,n)=>{n.d(H,{e:()=>E,i:()=>k,l:()=>g});class E extends Error{}E._setPrototypeOf=Object.setPrototypeOf||((o,H)=>(o.__proto__=H,o));const k={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class g extends E{constructor(o,H,n){super(o),this.errorCode=H,this.innerError=n,this.name="RuntimeError",E._setPrototypeOf(this,g.prototype)}}},11066:(o,H,n)=>{n.d(H,{c:()=>f,e:()=>h,f:()=>e,i:()=>M,k:()=>P,j:()=>V,n:()=>j,q:()=>m,r:()=>b,u:()=>Q});var E=n(11057),k=n(11035),g=n(11026);class O{}O.FilesToLoad={};var Y=n(11068),y=n(11072),S=n(11078),G=n(11060),c=n(11038),A=n(11088),l=n(11083),x=n(11093);const z=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class V extends Y.l{constructor(o,H){super(o,Y.i.LoadFileError),this.name="LoadFileError",Y.e._setPrototypeOf(this,V.prototype),H instanceof E.d?this.request=H:this.file=H}}class J extends Y.l{constructor(o,H){super(o,Y.i.RequestFileError),this.request=H,this.name="RequestFileError",Y.e._setPrototypeOf(this,J.prototype)}}class N extends Y.l{constructor(o,H){super(o,Y.i.ReadFileError),this.file=H,this.name="ReadFileError",Y.e._setPrototypeOf(this,N.prototype)}}const h={DefaultRetryStrategy:class{static ExponentialBackoff(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(n,E,k)=>0!==E.status||k>=o||-1!==n.indexOf("file:")?-1:Math.pow(2,k)*H}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:o=>o,ScriptBaseUrl:"",ScriptPreprocessUrl:o=>o,CleanUrl:o=>o=o.replace(/#/gm,"%23")},Q=(o,H)=>{if((!o||0!==o.indexOf("data:"))&&h.CorsBehavior)if("string"===typeof h.CorsBehavior||h.CorsBehavior instanceof String)H.crossOrigin=h.CorsBehavior;else{const n=h.CorsBehavior(o);n&&(H.crossOrigin=n)}},p={getRequiredSize:null},j=function(o,H,n,k){let g,Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",S=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:G.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===c||void 0===c||!c._features.forceBitmapOverHTMLImageElement))return n("LoadImage is only supported in web or BabylonNative environments."),null;let A=!1;o instanceof ArrayBuffer||ArrayBuffer.isView(o)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(g=URL.createObjectURL(new Blob([o],{type:Y})),A=!0):g=`data:${Y};base64,`+(0,y.k)(o):o instanceof Blob?(g=URL.createObjectURL(o),A=!0):(g=h.CleanUrl(o),g=h.PreprocessUrl(g));const l=H=>{if(n){const E=g||o.toString();n(`Error while trying to load image: ${0===E.indexOf("http")||E.length<=128?E:E.slice(0,128)+"..."}`,H)}};if(null!==c&&void 0!==c&&c._features.forceBitmapOverHTMLImageElement)return P(g,(E=>{c.createImageBitmap(new Blob([E],{type:Y}),{premultiplyAlpha:"none",...S}).then((o=>{H(o),A&&URL.revokeObjectURL(g)})).catch((H=>{n&&n("Error while trying to load image: "+o,H)}))}),void 0,k||void 0,!0,((o,H)=>{l(H)})),null;const x=new Image;if(p.getRequiredSize){const H=p.getRequiredSize(o);H.width&&(x.width=H.width),H.height&&(x.height=H.height)}Q(g,x);const z=[],V=()=>{for(const o of z)o.target.removeEventListener(o.name,o.handler);z.length=0};z.push({target:x,name:"load",handler:()=>{V(),H(x),A&&x.src&&URL.revokeObjectURL(x.src)}}),z.push({target:x,name:"error",handler:o=>{V(),l(o),A&&x.src&&URL.revokeObjectURL(x.src)}}),z.push({target:document,name:"securitypolicyviolation",handler:o=>{if(o.blockedURI!==x.src||"Gg"===o.disposition)return;V();const H=new Error(`CSP violation of policy ${o.effectiveDirective} ${o.blockedURI}. Current policy is ${o.originalPolicy}`);G.e.UseFallbackTexture=!1,l(H),A&&x.src&&URL.revokeObjectURL(x.src),x.src=""}}),(()=>{for(const o of z)o.target.addEventListener(o.name,o.handler)})();const J="blob:"===g.substring(0,5),N="data:"===g.substring(0,5),j=()=>{J||N||!E.d.IsCustomRequestAvailable?x.src=g:P(g,((o,H,n)=>{const E=new Blob([o],{type:!Y&&n?n:Y}),k=URL.createObjectURL(E);A=!0,x.src=k}),void 0,k||void 0,!0,((o,H)=>{l(H)}))},m=()=>{k&&k.loadImage(g,x)};if(!J&&!N&&k&&k.enableTexturesOffline)k.open(m,j);else{if(-1!==g.indexOf("file:")){const o=decodeURIComponent(g.substring(5).toLowerCase());if(O.FilesToLoad[o]&&"undefined"!==typeof URL){try{let H;try{H=URL.createObjectURL(O.FilesToLoad[o])}catch(b){H=URL.createObjectURL(O.FilesToLoad[o])}x.src=H,A=!0}catch(e){x.src=""}return x}}j()}return x},m=(o,H,n,E,k)=>{const O=new FileReader,Y={onCompleteObservable:new g.d,abort:()=>O.abort()};return O.onloadend=()=>Y.onCompleteObservable.notifyObservers(Y),k&&(O.onerror=()=>{k(new N(`Unable to read ${o.name}`,o))}),O.onload=o=>{H(o.target.result)},n&&(O.onprogress=n),E?O.readAsArrayBuffer(o):O.readAsText(o),Y},P=(o,H,n,E,k,y,S)=>{if(o.name)return m(o,H,n,k,y?o=>{y(void 0,o)}:void 0);const G=o;if(-1!==G.indexOf("file:")){let o=decodeURIComponent(G.substring(5).toLowerCase());0===o.indexOf("./")&&(o=o.substring(2));const E=O.FilesToLoad[o];if(E)return m(E,H,n,k,y?o=>y(void 0,new V(o.message,o.file)):void 0)}const{match:l,type:x}=K(G);if(l){const o={onCompleteObservable:new g.d,abort:()=>()=>{}};try{const o=k?f(G):B(G);H(o,void 0,x)}catch(Y){y?y(void 0,Y):c.d.Error(Y.message||"Failed to parse the Data URL")}return A.c.SetImmediate((()=>{o.onCompleteObservable.notifyObservers(o)})),o}return b(G,((o,n)=>{H(o,null===n||void 0===n?void 0:n.responseURL,null===n||void 0===n?void 0:n.getResponseHeader("content-type"))}),n,E,k,y?o=>{y(o.request,new V(o.message,o.request))}:void 0,S)},b=(o,H,n,O,Y,y,S)=>{o=h.CleanUrl(o),o=h.PreprocessUrl(o);const G=h.BaseUrl+o;let A=!1;const l={onCompleteObservable:new g.d,abort:()=>A=!0},x=()=>{let o,g=new E.d,O=null;const x=()=>{g&&(n&&g.removeEventListener("progress",n),o&&g.removeEventListener("readystatechange",o),g.removeEventListener("loadend",z))};let z=()=>{x(),l.onCompleteObservable.notifyObservers(l),l.onCompleteObservable.clear(),n=void 0,o=null,z=null,y=void 0,S=void 0,H=void 0};l.abort=()=>{A=!0,z&&z(),g&&g.readyState!==(XMLHttpRequest.DONE||4)&&g.abort(),null!==O&&(clearTimeout(O),O=null),g=null};const V=o=>{const H=o.message||"Unknown error";y&&g?y(new J(H,g)):c.d.Error(H)},N=c=>{if(g){if(g.open("GET",G),S)try{S(g)}catch(l){return void V(l)}Y&&(g.responseType="arraybuffer"),n&&g.addEventListener("progress",n),z&&g.addEventListener("loadend",z),o=()=>{if(!A&&g&&g.readyState===(XMLHttpRequest.DONE||4)){if(o&&g.removeEventListener("readystatechange",o),g.status>=200&&g.status<300||0===g.status&&(!(0,k.f)()||Z())){const o=Y?g.response:g.responseText;if(null!==o){try{H&&H(o,g)}catch(l){V(l)}return}}const n=h.DefaultRetryStrategy;if(n){const o=n(G,g,c);if(-1!==o)return x(),g=new E.d,void(O=setTimeout((()=>N(c+1)),o))}const S=new J("Error status: "+g.status+" "+g.statusText+" - Unable to load "+G,g);y&&y(S)}},g.addEventListener("readystatechange",o),g.send()}};N(0)};if(O&&O.enableSceneOffline){const E=o=>{o&&o.status>400?y&&y(o):x()},k=()=>{O&&O.loadFile(h.BaseUrl+o,(o=>{!A&&H&&H(o),l.onCompleteObservable.notifyObservers(l)}),n?o=>{!A&&n&&n(o)}:void 0,E,Y)};O.open(k,E)}else x();return l},e=o=>{const{match:H,type:n}=K(o);if(H)return n||void 0;const E=o.lastIndexOf(".");switch(o.substring(E+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ag":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},Z=()=>"undefined"!==typeof location&&"file:"===location.protocol,M=o=>z.test(o),K=o=>{const H=z.exec(o);if(null===H||0===H.length)return{match:!1,type:""};return{match:!0,type:H[0].replace("data:","").replace("base64,","")}};function f(o){return(0,y.d)(o.split(",")[1])}const B=o=>(0,y.h)(o.split(",")[1]);let q;x.e._FileToolsLoadImage=j,l.b.loadFile=P,S.o.loadFile=P;((o,H,n,E,k,g,O,Y,y,S)=>{q={DecodeBase64UrlToBinary:o,DecodeBase64UrlToString:H,DefaultRetryStrategy:n.DefaultRetryStrategy,BaseUrl:n.BaseUrl,CorsBehavior:n.CorsBehavior,PreprocessUrl:n.PreprocessUrl,IsBase64DataUrl:E,IsFileURL:k,LoadFile:g,LoadImage:O,ReadFile:Y,RequestFile:y,SetCorsBehavior:S},Object.defineProperty(q,"DefaultRetryStrategy",{get:function(){return n.DefaultRetryStrategy},set:function(o){n.DefaultRetryStrategy=o}}),Object.defineProperty(q,"BaseUrl",{get:function(){return n.BaseUrl},set:function(o){n.BaseUrl=o}}),Object.defineProperty(q,"PreprocessUrl",{get:function(){return n.PreprocessUrl},set:function(o){n.PreprocessUrl=o}}),Object.defineProperty(q,"CorsBehavior",{get:function(){return n.CorsBehavior},set:function(o){n.CorsBehavior=o}})})(f,B,h,M,Z,P,j,m,b,Q)},11149:(o,H,n)=>{function E(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(o=>{const H=16*Math.random()|0;return("x"===o?H:3&H|8).toString(16)}))}n.d(H,{b:()=>E})},11136:(o,H,n)=>{n.d(H,{e:()=>g});var E=n(11038),k=n(11140);class g{static Instantiate(o){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[o])return this.RegisteredExternalClasses[o];const H=(0,k.b)(o);if(H)return H;E.d.Warn(o+" not found, you may have missed an import.");const n=o.split(".");let g=window||this;for(let E=0,k=n.length;E<k;E++)g=g[n[E]];return"function"!==typeof g?null:g}}g.RegisteredExternalClasses={}},11042:(o,H,n)=>{n.d(H,{b:()=>k});var E=n(11035);class k{static get Now(){return(0,E.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11072:(o,H,n)=>{n.d(H,{d:()=>O,h:()=>g,j:()=>E,k:()=>k});const E=o=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(o);let H="";for(let n=0;n<o.byteLength;n++)H+=String.fromCharCode(o[n]);return H},k=o=>{const H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,E,k,g,O,Y,y,S="",G=0;const c=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o);for(;G<c.length;)n=c[G++],E=G<c.length?c[G++]:Number.NaN,k=G<c.length?c[G++]:Number.NaN,g=n>>2,O=(3&n)<<4|E>>4,Y=(15&E)<<2|k>>6,y=63&k,isNaN(E)?Y=y=64:isNaN(k)&&(y=64),S+=H.charAt(g)+H.charAt(O)+H.charAt(Y)+H.charAt(y);return S},g=o=>atob(o),O=o=>{const H=g(o),n=H.length,E=new Uint8Array(new ArrayBuffer(n));for(let k=0;k<n;k++)E[k]=H.charCodeAt(k);return E.buffer}},11158:(o,H,n)=>{function E(o){let H=1;do{H*=2}while(H<o);return H===o}function k(o,H,n){return o*(1-n)+H*n}function g(o){const H=O(o),n=Y(o);return H-o>o-n?n:H}function O(o){return o--,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o|=o>>16,++o}function Y(o){return o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,(o|=o>>16)-(o>>1)}function y(o,H){let n;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:n=Y(o);break;case 2:n=g(o);break;default:n=O(o)}return Math.min(n,H)}n.d(H,{b:()=>Y,d:()=>y,g:()=>E,j:()=>k,l:()=>g})},11024:(o,H,n)=>{n.r(H),n.d(H,{AsyncLoop:()=>N,Tools:()=>V,className:()=>J});var E=n(11026),k=n(11035),g=n(11038),O=n(11040),Y=n(11042),y=n(11051),S=n(11057),G=n(11060),c=n(11066),A=n(11088),l=n(11136),x=n(11149),z=n(11158);class V{static get BaseUrl(){return c.e.BaseUrl}static set BaseUrl(o){c.e.BaseUrl=o}static get CleanUrl(){return c.e.CleanUrl}static set CleanUrl(o){c.e.CleanUrl=o}static IsAbsoluteUrl(o){return 0===o.indexOf("//")||-1!==o.indexOf("://")&&(-1!==o.indexOf(".")&&(-1!==o.indexOf("/")&&(!(o.indexOf(":")>o.indexOf("/"))&&(o.indexOf("://")<o.indexOf(".")||(0===o.indexOf("data:")||0===o.indexOf("blob:"))))))}static set ScriptBaseUrl(o){c.e.ScriptBaseUrl=o}static get ScriptBaseUrl(){return c.e.ScriptBaseUrl}static set CDNBaseUrl(o){V.ScriptBaseUrl=o,V.AssetBaseUrl=o}static set ScriptPreprocessUrl(o){c.e.ScriptPreprocessUrl=o}static get ScriptPreprocessUrl(){return c.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return c.e.DefaultRetryStrategy}static set DefaultRetryStrategy(o){c.e.DefaultRetryStrategy=o}static get CorsBehavior(){return c.e.CorsBehavior}static set CorsBehavior(o){c.e.CorsBehavior=o}static get UseFallbackTexture(){return G.e.UseFallbackTexture}static set UseFallbackTexture(o){G.e.UseFallbackTexture=o}static get RegisteredExternalClasses(){return l.e.RegisteredExternalClasses}static set RegisteredExternalClasses(o){l.e.RegisteredExternalClasses=o}static get fallbackTexture(){return G.e.FallbackTexture}static set fallbackTexture(o){G.e.FallbackTexture=o}static FetchToRef(o,H,n,E,k,g){const O=4*((Math.abs(o)*n%n|0)+(Math.abs(H)*E%E|0)*n);g.r=k[O]/255,g.g=k[O+1]/255,g.b=k[O+2]/255,g.a=k[O+3]/255}static Mix(o,H,n){return 0}static Instantiate(o){return l.e.Instantiate(o)}static SetImmediate(o){A.c.SetImmediate(o)}static IsExponentOfTwo(o){return!0}static FloatRound(o){return Math.fround(o)}static GetFilename(o){const H=o.lastIndexOf("/");return H<0?o:o.substring(H+1)}static GetFolderPath(o){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=o.lastIndexOf("/");return n<0?H?o:"":o.substring(0,n+1)}static ToDegrees(o){return 180*o/Math.PI}static ToRadians(o){return o*Math.PI/180}static SmoothAngleChange(o,H){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const E=this.ToRadians(o),k=this.ToRadians(H);return this.ToDegrees(Math.atan2((1-n)*Math.sin(k)+n*Math.sin(E),(1-n)*Math.cos(k)+n*Math.cos(E)))}static MakeArray(o,H){return!0===H||void 0!==o&&null!=o?Array.isArray(o)?o:[o]:null}static GetPointerPrefix(o){return(0,k.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(o,H){(0,c.u)(o,H)}static SetReferrerPolicyBehavior(o,H){H.referrerPolicy=o}static get PreprocessUrl(){return c.e.PreprocessUrl}static set PreprocessUrl(o){c.e.PreprocessUrl=o}static LoadImage(o,H,n,E,k,g){return(0,c.n)(o,H,n,E,k,g)}static LoadFile(o,H,n,E,k,g){return(0,c.k)(o,H,n,E,k,g)}static async LoadFileAsync(o){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((n,E)=>{(0,c.k)(o,(o=>{n(o)}),void 0,void 0,H,((o,H)=>{E(H)}))}))}static GetAssetUrl(o){if(!o)return"";if(V.AssetBaseUrl&&o.startsWith(V._DefaultAssetsUrl)){const H="/"===V.AssetBaseUrl[V.AssetBaseUrl.length-1]?V.AssetBaseUrl.substring(0,V.AssetBaseUrl.length-1):V.AssetBaseUrl;return o.replace(V._DefaultAssetsUrl,H)}return o}static GetBabylonScriptURL(o,H){if(!o)return"";if(V.ScriptBaseUrl&&o.startsWith(V._DefaultCdnUrl)){const H="/"===V.ScriptBaseUrl[V.ScriptBaseUrl.length-1]?V.ScriptBaseUrl.substring(0,V.ScriptBaseUrl.length-1):V.ScriptBaseUrl;o=o.replace(V._DefaultCdnUrl,H)}return o=V.ScriptPreprocessUrl(o),H&&(o=V.GetAbsoluteUrl(o)),o}static LoadBabylonScript(o,H,n,E){o=V.GetBabylonScriptURL(o),V.LoadScript(o,H,n)}static async LoadBabylonScriptAsync(o){return o=V.GetBabylonScriptURL(o),await V.LoadScriptAsync(o)}static LoadScript(o,H,n,E){let g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(o),H&&H()}catch(y){null===n||void 0===n||n(`Unable to load script '${o}' in worker`,y)}return}if(!(0,k.f)())return void(null===n||void 0===n||n(`Cannot load script '${o}' outside of a window or a worker`));const O=document.getElementsByTagName("head")[0],Y=document.createElement("script");g?(Y.setAttribute("type","module"),Y.innerText=o):(Y.setAttribute("type","text/javascript"),Y.setAttribute("src",o)),E&&(Y.id=E),Y.onload=()=>{H&&H()},Y.onerror=H=>{n&&n(`Unable to load script '${o}'`,H)},O.appendChild(Y)}static async LoadScriptAsync(o,H){return await new Promise(((n,E)=>{this.LoadScript(o,(()=>{n()}),((o,H)=>{E(H||new Error(o))}),H)}))}static ReadFileAsDataURL(o,H,n){const k=new FileReader,g={onCompleteObservable:new E.d,abort:()=>k.abort()};return k.onloadend=()=>{g.onCompleteObservable.notifyObservers(g)},k.onload=o=>{H(o.target.result)},k.onprogress=n,k.readAsDataURL(o),g}static ReadFile(o,H,n,E,k){return(0,c.q)(o,H,n,E,k)}static FileAsURL(o){const H=new Blob([o]);return window.URL.createObjectURL(H)}static Format(o){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o.toFixed(H)}static DeepCopy(o,H,n,E){O.b.DeepCopy(o,H,n,E)}static IsEmpty(o){for(const H in o)if(Object.prototype.hasOwnProperty.call(o,H))return!1;return!0}static RegisterTopRootEvents(o,H){for(let E=0;E<H.length;E++){const k=H[E];o.addEventListener(k.name,k.handler,!1);try{window.parent&&window.parent.addEventListener(k.name,k.handler,!1)}catch(n){}}}static UnregisterTopRootEvents(o,H){for(let E=0;E<H.length;E++){const k=H[E];o.removeEventListener(k.name,k.handler);try{o.parent&&o.parent.removeEventListener(k.name,k.handler)}catch(n){}}}static async DumpFramebuffer(o,H,n,E){throw(0,y.c)("DumpTools")}static DumpData(o,H,n,E){throw(0,y.c)("DumpTools")}static async DumpDataAsync(o,H,n){throw(0,y.c)("DumpTools")}static _IsOffScreenCanvas(o){return void 0!==o.convertToBlob}static ToBlob(o,H){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",E=arguments.length>3?arguments[3]:void 0;V._IsOffScreenCanvas(o)||o.toBlob||(o.toBlob=function(o,H,n){setTimeout((()=>{const E=atob(this.toDataURL(H,n).split(",")[1]),k=E.length,g=new Uint8Array(k);for(let o=0;o<k;o++)g[o]=E.charCodeAt(o);o(new Blob([g]))}))}),V._IsOffScreenCanvas(o)?o.convertToBlob({type:n,quality:E}).then((o=>H(o))):o.toBlob((function(o){H(o)}),n,E)}static DownloadBlob(o,H){if("download"in document.createElement("a")){if(!H){const o=new Date;H="screenshot_"+((o.getFullYear()+"-"+(o.getMonth()+1)).slice(2)+"-"+o.getDate()+"_"+o.getHours()+"-"+("0"+o.getMinutes()).slice(-2))+".png"}V.Download(o,H)}else if(o&&"undefined"!==typeof URL){const H=URL.createObjectURL(o),n=window.open("");if(!n)return;const E=n.document.createElement("img");E.onload=function(){URL.revokeObjectURL(H)},E.src=H,n.document.body.appendChild(E)}}static EncodeScreenshotCanvasData(o,H){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",E=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0;if("string"!==typeof E&&H){if(H){if(V._IsOffScreenCanvas(o))return void o.convertToBlob({type:n,quality:k}).then((o=>{const n=new FileReader;n.readAsDataURL(o),n.onloadend=()=>{const o=n.result;H(o)}}));const E=o.toDataURL(n,k);H(E)}}else this.ToBlob(o,(function(o){o&&V.DownloadBlob(o,E),H&&H("")}),n,k)}static Download(o,H){if("undefined"===typeof URL)return;const n=window.URL.createObjectURL(o),E=document.createElement("a");document.body.appendChild(E),E.style.display="none",E.href=n,E.download=H,E.addEventListener("click",(()=>{E.parentElement&&E.parentElement.removeChild(E)})),E.click(),window.URL.revokeObjectURL(n)}static BackCompatCameraNoPreventDefault(o){return"boolean"===typeof o[0]?o[0]:"boolean"===typeof o[1]&&o[1]}static CreateScreenshot(o,H,n,E){throw(0,y.c)("ScreenshotTools")}static async CreateScreenshotAsync(o,H,n){throw(0,y.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(o,H,n,E){throw(0,y.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(o,H,n){throw(0,y.c)("ScreenshotTools")}static RandomId(){return(0,x.b)()}static IsBase64(o){return(0,c.i)(o)}static DecodeBase64(o){return(0,c.c)(o)}static get errorsCount(){return g.d.errorsCount}static Log(o){g.d.Log(o)}static Warn(o){g.d.Warn(o)}static Error(o){g.d.Error(o)}static get LogCache(){return g.d.LogCache}static ClearLogCache(){g.d.ClearLogCache()}static set LogLevels(o){g.d.LogLevels=o}static set PerformanceLogLevel(o){return(o&V.PerformanceUserMarkLogLevel)===V.PerformanceUserMarkLogLevel?(V.StartPerformanceCounter=V._StartUserMark,void(V.EndPerformanceCounter=V._EndUserMark)):(o&V.PerformanceConsoleLogLevel)===V.PerformanceConsoleLogLevel?(V.StartPerformanceCounter=V._StartPerformanceConsole,void(V.EndPerformanceCounter=V._EndPerformanceConsole)):(V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,void(V.EndPerformanceCounter=V._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(o,H){}static _EndPerformanceCounterDisabled(o,H){}static _StartUserMark(o){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!V._Performance){if(!(0,k.f)())return;V._Performance=window.performance}H&&V._Performance.mark&&V._Performance.mark(o+"-Begin")}static _EndUserMark(o){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&V._Performance.mark&&(V._Performance.mark(o+"-End"),V._Performance.measure(o,o+"-Begin",o+"-End"))}static _StartPerformanceConsole(o){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(V._StartUserMark(o,H),console.time&&console.time(o))}static _EndPerformanceConsole(o){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H&&(V._EndUserMark(o,H),console.timeEnd(o))}static get Now(){return Y.b.Now}static GetClassName(o){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null;if(!H&&o.getClassName)n=o.getClassName();else{if(o instanceof Object){n=(H?o:Object.getPrototypeOf(o)).constructor.__bjsclassName__}n||(n=typeof o)}return n}static First(o,H){for(const n of o)if(H(n))return n;return null}static getFullClassName(o){let H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null,E=null;if(!H&&o.getClassName)n=o.getClassName();else{if(o instanceof Object){const k=H?o:Object.getPrototypeOf(o);n=k.constructor.__bjsclassName__,E=k.constructor.__bjsmoduleName__}n||(n=typeof o)}return n?(null!=E?E+".":"")+n:null}static async DelayAsync(o){await new Promise((H=>{setTimeout((()=>{H()}),o)}))}static IsSafari(){return!!(0,k.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function J(o,H){return n=>{n.__bjsclassName__=o,n.__bjsmoduleName__=null!=H?H:null}}V.AssetBaseUrl="",V.UseCustomRequestHeaders=!1,V.CustomRequestHeaders=S.d.CustomRequestHeaders,V.GetDOMTextContent=k.b,V._DefaultCdnUrl="https://cdn.babylonjs.com",V._DefaultAssetsUrl="https://assets.babylonjs.com/core",V.GetAbsoluteUrl="object"===typeof document?o=>{const H=document.createElement("a");return H.href=o,H.href}:"function"===typeof URL&&"object"===typeof location?o=>new URL(o,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},V.NoneLogLevel=g.d.NoneLogLevel,V.MessageLogLevel=g.d.MessageLogLevel,V.WarningLogLevel=g.d.WarningLogLevel,V.ErrorLogLevel=g.d.ErrorLogLevel,V.AllLogLevel=g.d.AllLogLevel,V.IsWindowObjectExist=k.f,V.PerformanceNoneLogLevel=0,V.PerformanceUserMarkLogLevel=1,V.PerformanceConsoleLogLevel=2,V.StartPerformanceCounter=V._StartPerformanceCounterDisabled,V.EndPerformanceCounter=V._EndPerformanceCounterDisabled;class N{constructor(o,H,n){let E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=o,this.index=E-1,this._done=!1,this._fn=H,this._successCallback=n}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(o,H,n){const E=new N(o,H,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return E.executeNext(),E}static SyncAsyncForLoop(o,H,n,E,k){let g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return N.Run(Math.ceil(o/H),(E=>{k&&k()?E.breakLoop():setTimeout((()=>{for(let g=0;g<H;++g){const O=E.index*H+g;if(O>=o)break;if(n(O),k&&k()){E.breakLoop();break}}E.executeNext()}),g)}),E)}}V.Mix=z.j,V.IsExponentOfTwo=z.g,G.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11140:(o,H,n)=>{n.d(H,{b:()=>g,e:()=>k});const E={};function k(o,H){E[o]=H}function g(o){return E[o]}},11057:(o,H,n)=>{n.d(H,{d:()=>E});class E{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(E.CustomRequestHeaders).length>0||E.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const o in E.CustomRequestHeaders){const H=E.CustomRequestHeaders[o];H&&this._xhr.setRequestHeader(o,H)}}_shouldSkipRequestModifications(o){return E.SkipRequestModificationForBabylonCDN&&(o.includes("preview.babylonjs.com")||o.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(o){this._xhr.onprogress=o}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(o){this._xhr.responseType=o}get timeout(){return this._xhr.timeout}set timeout(o){this._xhr.timeout=o}addEventListener(o,H,n){this._xhr.addEventListener(o,H,n)}removeEventListener(o,H,n){this._xhr.removeEventListener(o,H,n)}abort(){this._xhr.abort()}send(o){E.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(o)}open(o,H){for(const n of E.CustomRequestModifiers){if(this._shouldSkipRequestModifications(H))return;H=n(this._xhr,H)||H}H=(H=H.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=H,this._xhr.open(o,H,!0)}setRequestHeader(o,H){this._xhr.setRequestHeader(o,H)}getResponseHeader(o){return this._xhr.getResponseHeader(o)}}E.CustomRequestHeaders={},E.CustomRequestModifiers=new Array,E.SkipRequestModificationForBabylonCDN=!0}}]);