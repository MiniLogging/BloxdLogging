"use strict";(self.c2c3ycupenc=self.c2c3ycupenc||[]).push([[8],{11584:(c,r,D)=>{D.d(r,{b:()=>q});var W=D(11538),B=D(11509),t=D(11586),u=D(11608),a=D(11517);class H{constructor(){let c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,c&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(c){this._zOffset!==c&&(this._zOffset=c,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(c){this._zOffsetUnits!==c&&(this._zOffsetUnits=c,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(c){this._cullFace!==c&&(this._cullFace=c,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(c){this._cull!==c&&(this._cull=c,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(c){this._depthFunc!==c&&(this._depthFunc=c,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(c){this._depthMask!==c&&(this._depthMask=c,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(c){this._depthTest!==c&&(this._depthTest=c,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(c){this._frontFace!==c&&(this._frontFace=c,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(c){this.isDirty&&(this._isCullDirty&&(this.cull?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(c.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(c.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(c.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(c.enable(c.POLYGON_OFFSET_FILL),c.polygonOffset(this.zOffset,this.zOffsetUnits)):c.disable(c.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(c.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class x{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(c){this._func!==c&&(this._func=c,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(c){this._funcRef!==c&&(this._funcRef=c,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(c){this._funcMask!==c&&(this._funcMask=c,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(c){this._opStencilFail!==c&&(this._opStencilFail=c,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(c){this._opDepthFail!==c&&(this._opDepthFail=c,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(c){this._opStencilDepthPass!==c&&(this._opStencilDepthPass=c,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(c){this._mask!==c&&(this._mask=c,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(c){this._enabled!==c&&(this._enabled=c,this._isStencilTestDirty=!0)}constructor(){let c=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,c&&this.reset()}reset(){var c;this.stencilMaterial=void 0,null===(c=this.stencilGlobal)||void 0===c||c.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(c){var r;if(!c)return;const D=!this.useStencilGlobalOnly&&!(null===(r=this.stencilMaterial)||void 0===r||!r.enabled);this.enabled=D?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=D?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=D?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=D?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=D?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=D?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=D?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=D?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(c.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(c.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(c.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class M{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=M.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=M.KEEP,this.opDepthFail=M.KEEP,this.opStencilDepthPass=M.REPLACE}get stencilFunc(){return this.func}set stencilFunc(c){this.func=c}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(c){this.funcRef=c}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(c){this.funcMask=c}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(c){this.opStencilFail=c}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(c){this.opDepthFail=c}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(c){this.opStencilDepthPass=c}get stencilMask(){return this.mask}set stencilMask(c){this.mask=c}get stencilTest(){return this.enabled}set stencilTest(c){this.enabled=c}}M.ALWAYS=519,M.KEEP=7680,M.REPLACE=7681;class E{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(c){this._alphaBlend!==c&&(this._alphaBlend=c,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(c,r,D,W){this._blendConstants[0]===c&&this._blendConstants[1]===r&&this._blendConstants[2]===D&&this._blendConstants[3]===W||(this._blendConstants[0]=c,this._blendConstants[1]=r,this._blendConstants[2]=D,this._blendConstants[3]=W,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(c,r,D,W){this._blendFunctionParameters[0]===c&&this._blendFunctionParameters[1]===r&&this._blendFunctionParameters[2]===D&&this._blendFunctionParameters[3]===W||(this._blendFunctionParameters[0]=c,this._blendFunctionParameters[1]=r,this._blendFunctionParameters[2]=D,this._blendFunctionParameters[3]=W,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(c,r){this._blendEquationParameters[0]===c&&this._blendEquationParameters[1]===r||(this._blendEquationParameters[0]=c,this._blendEquationParameters[1]=r,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(c){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?c.enable(c.BLEND):c.disable(c.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(c.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(c.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(c.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var m=D(11524),Y=D(11615),v=D(11501),k=D(11494),w=D(11572),Z=D(11624);function J(c,r){if((0,v.f)()){const{requestAnimationFrame:D}=r||window;if("function"===typeof D)return D(c)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(c);return setTimeout(c,16)}class q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(c){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(c){c!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=c,this._depthCullingState.depthFunc=c?518:515)}setColorWrite(c){c!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=c)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(c){if(c)return this.isNDCHalfZRange?c.IS_NDC_HALF_ZRANGE="":delete c.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?c.USE_REVERSE_DEPTHBUFFER="":delete c.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?c.USE_EXACT_SRGB_CONVERSIONS="":delete c.USE_EXACT_SRGB_CONVERSIONS);{let c="";return this.isNDCHalfZRange&&(c+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(c&&(c+="\n"),c+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(c&&(c+="\n"),c+="#define USE_EXACT_SRGB_CONVERSIONS"),c}}_rebuildInternalTextures(){const c=this._internalTexturesCache.slice();for(const r of c)r._rebuild()}_rebuildRenderTargetWrappers(){const c=this._renderTargetWrapperCache.slice();for(const r of c)r._rebuild()}_rebuildEffects(){for(const c in this._compiledEffects){const r=this._compiledEffects[c];r._pipelineContext=null,r._prepareEffect()}t.Effect.ResetCache()}_rebuildGraphicsResources(){var c;this.wipeCaches(!0),this._rebuildEffects(),null===(c=this._rebuildComputeEffects)||void 0===c||c.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){B.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(c){setTimeout((()=>{this._clearEmptyResources();const r=this._depthCullingState.depthTest,D=this._depthCullingState.depthFunc,W=this._depthCullingState.depthMask,B=this._stencilState.stencilTest;c(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=r,this._depthCullingState.depthFunc=D,this._depthCullingState.depthMask=W,this._stencilState.stencilTest=B,this._flagContextRestored()}),0)}get M(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(c){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(c){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const c=new Uint8Array(4),r=[c,c,c,c,c,c];this._emptyCubeTexture=this.createRawCubeTexture(r,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(c){if(!c)return this._activeRenderLoops.length=0,void this._cancelFrame();const r=this._activeRenderLoops.indexOf(c);r>=0&&(this._activeRenderLoops.splice(r,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const c=this._frameHandler;if(this._frameHandler=0,(0,v.f)()){const{cancelAnimationFrame:r}=this.getHostWindow()||window;if("function"===typeof r)return r(c)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(c);return clearTimeout(c)}}lt(){this.onBeginFrameObservable.notifyObservers(this)}Da(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(c){this._maxFPS=c,void 0!==c&&(this._minFrameTime=c<=0?Number.MAX_VALUE:1e3/c)}_isOverFrameTime(c){if(!c||void 0===this._maxFPS)return!1;const r=c-this._lastFrameTime;return this._lastFrameTime=c,this._renderAccumulator+=r,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(c){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(c)){let c=!0;(this.M||!this.renderEvenInBackground&&this._windowIsBackground)&&(c=!1),c&&(this.lt(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Da())}}_renderLoop(c){this._processFrame(c),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let c=0;c<this._activeRenderLoops.length;c++){(0,this._activeRenderLoops[c])()}}_renderViews(){return!1}_queueNewFrame(c,r){return J(c,r)}runRenderLoop(c){-1===this._activeRenderLoops.indexOf(c)&&(this._activeRenderLoops.push(c),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(c){this._depthCullingState.depthTest=c}setZOffset(c){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-c:c}getZOffset(){const c=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-c:c}setZOffsetUnits(c){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-c:c}getZOffsetUnits(){const c=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-c:c}getHostWindow(){return(0,v.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(c){this._compatibilityMode=!0}_rebuildTextures(){for(const c of this.scenes)c._rebuildTextures();for(const c of this._virtualScenes)c._rebuildTextures()}_releaseRenderTargetWrapper(c){const r=this._renderTargetWrapperCache.indexOf(c);-1!==r&&this._renderTargetWrapperCache.splice(r,1)}get currentViewport(){return this._cachedViewport}setViewport(c,r,D){const W=r||this.getRenderWidth(),B=D||this.getRenderHeight(),t=c.x||0,u=c.y||0;this._cachedViewport=c,this._viewport(t*W,u*B,W*c.width,B*c.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(c){return new Path2D(c)}get description(){let c=this.name+this.version;return this._caps.parallelShaderCompile&&(c+=" - Parallel shader compilation"),c}_createTextureBase(c,r,D,t){let u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,x=arguments.length>7?arguments[7]:void 0,M=arguments.length>8?arguments[8]:void 0,E=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,v=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,k=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,w=arguments.length>13?arguments[13]:void 0,J=arguments.length>14?arguments[14]:void 0,j=arguments.length>15?arguments[15]:void 0;const X="data:"===(c=c||"").substring(0,5),e="blob:"===c.substring(0,5),y=X&&-1!==c.indexOf(";base64,"),U=m||new Y.e(this,1);U!==m&&(U.label=c.substring(0,60));const N=c;!this._transformTextureUrl||y||m||E||(c=this._transformTextureUrl(c)),N!==c&&(U._originalUrl=N);const g=c.lastIndexOf(".");let z=k||(g>-1?c.substring(g).toLowerCase():"");z.indexOf("?")>-1&&(z=z.split("?")[0]);const S=(0,Z.e)(z,w);t&&t.addPendingData(U),U.url=c,U.generateMipMaps=!r,U.samplingMode=u,U.invertY=D,U._useSRGBBuffer=this._getUseSRGBBuffer(!!j,r),this._doNotHandleContextLost||(U._buffer=E);let K=null;a&&!m&&(K=U.onLoadedObservable.add(a)),m||this._internalTexturesCache.push(U);const f=(D,m)=>{t&&t.removePendingData(U),c===N?(K&&U.onLoadedObservable.remove(K),W.c.UseFallbackTexture&&c!==W.c.FallbackTexture&&this._createTextureBase(W.c.FallbackTexture,r,U.invertY,t,u,null,H,x,M,E,U),D=(D||"Unknown error")+(W.c.UseFallbackTexture?" - Fallback texture was used":""),U.onErrorObservable.notifyObservers({message:D,exception:m}),H&&H(D,m)):(B.e.Warn(`Failed to load ${c}, falling back to ${N}`),this._createTextureBase(N,r,U.invertY,t,u,a,H,x,M,E,U,v,k,w,J,j))};if(S){const r=async c=>{(await S).loadData(c,U,((c,r,D,W,B,a)=>{a?f("TextureLoader failed to load data"):x(U,z,t,{width:c,height:r},U.invertY,!D,W,(()=>(B(),!1)),u)}),J)};E?E instanceof ArrayBuffer?r(new Uint8Array(E)):ArrayBuffer.isView(E)?r(E):H&&H("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(c,(c=>{r(new Uint8Array(c))}),void 0,t?t.offlineProvider:void 0,!0,((c,r)=>{f("Unable to load "+(c&&c.responseURL,r))}))}else{const D=c=>{e&&!this._doNotHandleContextLost&&(U._buffer=c),x(U,z,t,c,U.invertY,r,!1,M,u)};!X||y?E&&("string"===typeof E.decoding||E.close)?D(E):q._FileToolsLoadImage(c||"",D,f,t?t.offlineProvider:null,w,U.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof E||E instanceof ArrayBuffer||ArrayBuffer.isView(E)||E instanceof Blob?q._FileToolsLoadImage(E,D,f,t?t.offlineProvider:null,w,U.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):E&&D(E)}return U}_rebuildBuffers(){for(const c of this._uniformBuffers)c._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,v.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const c in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,c)&&(this._boundTexturesCache[c]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(c){this._name=c}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(c){this._hardwareScalingLevel=c,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(c){this._doNotHandleContextLost=c}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(c,r,D){var B,t;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new H,this._stencilStateComposer=new x,this._stencilState=new M,this._alphaState=new E,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new k.c,this.onCanvasFocusObservable=new k.c,this.onNewSceneAddedObservable=new k.c,this.onResizeObservable=new k.c,this.onCanvasPointerOutObservable=new k.c,this.onEffectErrorObservable=new k.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new k.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=c=>this._renderLoop(c),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new k.c,this.onAfterShaderCompilationObservable=new k.c,this.onBeginFrameObservable=new k.c,this.onEndFrameObservable=new k.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new k.c,this.onContextRestoredObservable=new k.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Wa=new k.c,this.onReleaseEffectsObservable=new k.c,W.c.Instances.push(this),this.startTime=a.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,u.d.SetMatrixPrecision(!!r.useHighPrecisionMatrix),(0,v.e)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=D??!1,r.antialias=c??r.antialias,r.deterministicLockstep=r.deterministicLockstep??!1,r.lockstepMaxSteps=r.lockstepMaxSteps??4,r.timeStep=r.timeStep??1/60,r.stencil=r.stencil??!0,this._audioContext=(null===(B=r.audioEngineOptions)||void 0===B?void 0:B.audioContext)??null,this._audioDestination=(null===(t=r.audioEngineOptions)||void 0===t?void 0:t.audioDestination)??null,this.premultipliedAlpha=r.premultipliedAlpha??!0,this._doNotHandleContextLost=!!r.doNotHandleContextLost,this._isStencilEnable=!!r.stencil,this.useExactSrgbConversions=r.useExactSrgbConversions??!1;const m=(0,v.f)()&&window.devicePixelRatio||1,Y=r.limitDeviceRatio||m;D=D||r.adaptToDeviceRatio||!1,this._hardwareScalingLevel=D?1/Math.min(Y,m):1,this._lastDevicePixelRatio=m,this._creationOptions=r}resize(){let c,r,D=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const c=(0,v.f)()&&window.devicePixelRatio||1,r=this._lastDevicePixelRatio/c;this._lastDevicePixelRatio=c,this._hardwareScalingLevel*=r}if((0,v.f)()&&(0,v.d)())if(this._renderingCanvas){var W,B;const D=null===(W=(B=this._renderingCanvas).getBoundingClientRect)||void 0===W?void 0:W.call(B);c=this._renderingCanvas.clientWidth||(null===D||void 0===D?void 0:D.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,r=this._renderingCanvas.clientHeight||(null===D||void 0===D?void 0:D.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else c=window.innerWidth,r=window.innerHeight;else c=this._renderingCanvas?this._renderingCanvas.width:100,r=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(c/this._hardwareScalingLevel,r/this._hardwareScalingLevel,D)}setSize(c,r){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(c|=0,r|=0,!D&&this._renderingCanvas.width===c&&this._renderingCanvas.height===r)return!1;if(this._renderingCanvas.width=c,this._renderingCanvas.height=r,this.scenes){for(let c=0;c<this.scenes.length;c++){const r=this.scenes[c];for(let c=0;c<r.cameras.length;c++){r.cameras[c]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(c,r,D,W,B,t,u,a,H,x,M){throw(0,m.e)("engine.rawTexture")}createRawCubeTexture(c,r,D,W,B,t,u,a){throw(0,m.e)("engine.rawTexture")}createRawTexture3D(c,r,D,W,B,t,u,a,H,x,M){throw(0,m.e)("engine.rawTexture")}createRawTexture2DArray(c,r,D,W,B,t,u,a,H,x,M){throw(0,m.e)("engine.rawTexture")}_sharedInit(c){this._renderingCanvas=c}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const c=navigator.userAgent;this.hostInformation.isMobile=-1!==c.indexOf("Mobile")||-1!==c.indexOf("Mac")&&(0,v.d)()&&"ontouchend"in document},this._checkForMobile(),(0,v.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(c){return document.createElement("video")}_reportDrawCall(){var c;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(c=this._drawCalls)||void 0===c||c.addCount(r,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(c,r){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(c,r){return createImageBitmap(c,r)}resizeImageBitmap(c,r,D){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(c){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(c,r){if("undefined"===typeof document)return new OffscreenCanvas(c,r);const D=document.createElement("canvas");return D.width=c,D.height=r,D}createCanvas(c,r){return q._CreateCanvas(c,r)}static _FileToolsLoadImage(c,r,D,W,B,t,u){throw(0,m.e)("FileTools")}_loadFile(c,r,D,W,B,t){const u=(0,w.i)(c,r,D,W,B,t);return this._activeRequests.push(u),u.onCompleteObservable.add((()=>{const c=this._activeRequests.indexOf(u);-1!==c&&this._activeRequests.splice(c,1)})),u}static _FileToolsLoadFile(c,r,D,W,B,t){if(w.b.loadFile)return w.b.loadFile(c,r,D,W,B,t);throw(0,m.e)("FileTools")}dispose(){var c;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(c=this.releaseComputeEffects)||void 0===c||c.call(this),t.Effect.ResetCache();for(const D of this._activeRequests)D.abort();this._boundRenderFunction=null,this.Wa.notifyObservers(this),this.Wa.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,v.f)()&&window.removeEventListener("resize",this._checkForMobile);const r=W.c.Instances.indexOf(this);r>=0&&W.c.Instances.splice(r,1),W.c.Instances.length||(W.c.OnEnginesDisposedObservable.notifyObservers(this),W.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(c){throw(0,m.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(c,r){for(let D=0;D<W.c.Instances.length;D++){const B=W.c.Instances[D];for(let D=0;D<B.scenes.length;D++)B.scenes[D].markAllMaterialsAsDirty(c,r)}}}q._RenderPassIdCounter=0,q._RescalePostProcessFactory=null,q.CollisionsEpsilon=.001,q.QueueNewFrame=J},11538:(c,r,D)=>{D.d(r,{c:()=>B});var W=D(11494);class B{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}B.Instances=[],B.OnEnginesDisposedObservable=new W.c,B._LastCreatedScene=null,B.UseFallbackTexture=!0,B.FallbackTexture=""},11608:(c,r,D)=>{D.d(r,{d:()=>W});class W{static SetMatrixPrecision(c){if(W.MatrixTrackPrecisionChange=!1,c&&!W.MatrixUse64Bits&&W.MatrixTrackedMatrices)for(let r=0;r<W.MatrixTrackedMatrices.length;++r){const c=W.MatrixTrackedMatrices[r],D=c.Ba;c.Ba=new Array(16);for(let r=0;r<16;++r)c.Ba[r]=D[r]}W.MatrixUse64Bits=c,W.MatrixCurrentType=W.MatrixUse64Bits?Array:Float32Array,W.MatrixTrackedMatrices=null}}W.MatrixUse64Bits=!1,W.MatrixTrackPrecisionChange=!0,W.MatrixCurrentType=Float32Array,W.MatrixTrackedMatrices=[]},11624:(c,r,D)=>{D.d(r,{e:()=>u});var W=D(11509);const B=new Map;function t(c,r){(function(c){return B.delete(c)})(c)&&W.e.Warn(`Extension with the name '${c}' already exists`),B.set(c,r)}function u(c,r){"image/ktx"!==r&&"image/ktx2"!==r||(c=".ktx"),B.has(c)||(c.endsWith(".ies")&&t(".ies",(async()=>await D.e(15).then(D.bind(D,14099)).then((c=>new c._IESTextureLoader)))),c.endsWith(".dds")&&t(".dds",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(19),D.e(18),D.e(28)]).then(D.bind(D,14108)).then((c=>new c._DDSTextureLoader)))),c.endsWith(".basis")&&t(".basis",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(47)]).then(D.bind(D,14119)).then((c=>new c._BasisTextureLoader)))),c.endsWith(".env")&&t(".env",(async()=>await Promise.all([D.e(14),D.e(17),D.e(13),D.e(19),D.e(18),D.e(23),D.e(21),D.e(45),D.e(48)]).then(D.bind(D,14124)).then((c=>new c._ENVTextureLoader)))),c.endsWith(".hdr")&&t(".hdr",(async()=>await Promise.all([D.e(14),D.e(49)]).then(D.bind(D,14132)).then((c=>new c._HDRTextureLoader)))),(c.endsWith(".ktx")||c.endsWith(".ktx2"))&&(t(".ktx",(async()=>await D.e(30).then(D.bind(D,14137)).then((c=>new c._KTXTextureLoader)))),t(".ktx2",(async()=>await D.e(30).then(D.bind(D,14137)).then((c=>new c._KTXTextureLoader))))),c.endsWith(".tga")&&t(".tga",(async()=>await D.e(50).then(D.bind(D,14140)).then((c=>new c._TGATextureLoader)))),c.endsWith(".exr")&&t(".exr",(async()=>await D.e(16).then(D.bind(D,14142)).then((c=>new c._ExrTextureLoader)))));const W=B.get(c);return W?Promise.resolve(W(r)):null}},11615:(c,r,D)=>{D.d(r,{e:()=>u});var W,B=D(11494),t=D(11617);!function(c){c[c.Unknown=0]="Unknown",c[c.Url=1]="Url",c[c.Temp=2]="Temp",c[c.Raw=3]="Raw",c[c.Dynamic=4]="Dynamic",c[c.RenderTarget=5]="RenderTarget",c[c.MultiRenderTarget=6]="MultiRenderTarget",c[c.Cube=7]="Cube",c[c.CubeRaw=8]="CubeRaw",c[c.CubePrefiltered=9]="CubePrefiltered",c[c.Raw3D=10]="Raw3D",c[c.Raw2DArray=11]="Raw2DArray",c[c.DepthStencil=12]="DepthStencil",c[c.CubeRawRGBD=13]="CubeRawRGBD",c[c.Depth=14]="Depth"}(W||(W={}));class u extends t.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(c){this.generateMipMaps=c}get uniqueId(){return this._uniqueId}_setUniqueId(c){this._uniqueId=c}getEngine(){return this._engine}get source(){return this._source}constructor(c,r){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new B.c,this.onErrorObservable=new B.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=c,this._source=r,this._uniqueId=u._Counter++,D||(this._hardwareTexture=c._createHardwareTexture())}incrementReferences(){this._references++}updateSize(c,r){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,c,r,D),this.width=c,this.height=r,this.depth=D,this.baseWidth=c,this.baseHeight=r,this.baseDepth=D,this._size=c*r*D}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const c=this.onRebuildCallback(this),r=r=>{r._swapAndDie(this,!1),this.isReady=c.isReady};return void(c.isAsync?c.proxy.then(r):r(c.proxy))}let c;switch(this.source){case 2:case 12:case 14:break;case 1:return void(c=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(c=>{c._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:c=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),c._swapAndDie(this,!1),this.isReady=!0;break;case 10:c=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),c._swapAndDie(this,!1),this.isReady=!0;break;case 11:c=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),c._swapAndDie(this,!1),this.isReady=!0;break;case 4:c=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),c._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(c=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{c._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:c=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),c._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return c=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(c=>{c&&c._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(c._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(c){var r;let D=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(r=this._hardwareTexture)||void 0===r||r.setUsage(c._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),c._hardwareTexture=this._hardwareTexture,D&&(c._isRGBD=this._isRGBD),this._lodTextureHigh&&(c._lodTextureHigh&&c._lodTextureHigh.dispose(),c._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(c._lodTextureMid&&c._lodTextureMid.dispose(),c._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(c._lodTextureLow&&c._lodTextureLow.dispose(),c._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(c._irradianceTexture&&c._irradianceTexture.dispose(),c._irradianceTexture=this._irradianceTexture);const W=this._engine.getLoadedTexturesCache();let B=W.indexOf(this);-1!==B&&W.splice(B,1),B=W.indexOf(c),-1===B&&W.push(c)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}u._Counter=0},11617:(c,r,D)=>{D.d(r,{e:()=>W});class W{get wrapU(){return this._cachedWrapU}set wrapU(c){this._cachedWrapU=c}get wrapV(){return this._cachedWrapV}set wrapV(c){this._cachedWrapV=c}get wrapR(){return this._cachedWrapR}set wrapR(c){this._cachedWrapR=c}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(c){this._cachedAnisotropicFilteringLevel=c}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(c){this._comparisonFunction=c}get useMipMaps(){return this._useMipMaps}set useMipMaps(c){this._useMipMaps=c}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,W=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=c,this._cachedWrapV=r,this._cachedWrapR=D,this._cachedAnisotropicFilteringLevel=W,this.samplingMode=B,this._comparisonFunction=t,this}compareSampler(c){return this._cachedWrapU===c._cachedWrapU&&this._cachedWrapV===c._cachedWrapV&&this._cachedWrapR===c._cachedWrapR&&this._cachedAnisotropicFilteringLevel===c._cachedAnisotropicFilteringLevel&&this.samplingMode===c.samplingMode&&this._comparisonFunction===c._comparisonFunction&&this._useMipMaps===c._useMipMaps}}},11515:(c,r,D)=>{D.d(r,{e:()=>t});var W=D(11509);const B=(c,r,D)=>c?c.getClassName&&"Mesh"===c.getClassName()?null:!c.getClassName||"SubMesh"!==c.getClassName()&&"PhysicsBody"!==c.getClassName()?c.clone?c.clone():Array.isArray(c)?c.slice():D&&"object"===typeof c?{...c}:null:c.clone(r):null;class t{static DeepCopy(c,r,D,t){let u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=function(c){const r=[];do{const D=Object.getOwnPropertyNames(c);for(const c of D)-1===r.indexOf(c)&&r.push(c)}while(c=Object.getPrototypeOf(c));return r}(c);for(const x of a){if("_"===x[0]&&(!t||-1===t.indexOf(x)))continue;if(x.endsWith("Observable"))continue;if(D&&-1!==D.indexOf(x))continue;const a=c[x],M=typeof a;if("function"!==M)try{if("object"===M)if(a instanceof Uint8Array)r[x]=Uint8Array.from(a);else if(a instanceof Array){if(r[x]=[],a.length>0)if("object"==typeof a[0])for(let c=0;c<a.length;c++){const D=B(a[c],r,u);-1===r[x].indexOf(D)&&r[x].push(D)}else r[x]=a.slice(0)}else r[x]=B(a,r,u);else r[x]=a}catch(H){W.e.Warn(H.message)}}}}},11550:(c,r,D)=>{D.d(r,{e:()=>W,g:()=>B,k:()=>t});class W extends Error{}W._setPrototypeOf=Object.setPrototypeOf||((c,r)=>(c.__proto__=r,c));const B={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class t extends W{constructor(c,r,D){super(c),this.errorCode=r,this.innerError=D,this.name="RuntimeError",W._setPrototypeOf(this,t.prototype)}}},11545:(c,r,D)=>{D.d(r,{b:()=>f,f:()=>q,i:()=>g,j:()=>S,m:()=>U,l:()=>w,q:()=>e,u:()=>y,w:()=>N,x:()=>j});var W=D(11532),B=D(11501),t=D(11494);class u{}u.FilesToLoad={};var a=D(11550),H=D(11555),x=D(11564),M=D(11538),E=D(11509),m=D(11581),Y=D(11572),v=D(11584);const k=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class w extends a.k{constructor(c,r){super(c,a.g.LoadFileError),this.name="LoadFileError",a.e._setPrototypeOf(this,w.prototype),r instanceof W.d?this.request=r:this.file=r}}class Z extends a.k{constructor(c,r){super(c,a.g.RequestFileError),this.request=r,this.name="RequestFileError",a.e._setPrototypeOf(this,Z.prototype)}}class J extends a.k{constructor(c,r){super(c,a.g.ReadFileError),this.file=r,this.name="ReadFileError",a.e._setPrototypeOf(this,J.prototype)}}const q={DefaultRetryStrategy:class{static ExponentialBackoff(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(D,W,B)=>0!==W.status||B>=c||-1!==D.indexOf("file:")?-1:Math.pow(2,B)*r}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:c=>c,ScriptBaseUrl:"",ScriptPreprocessUrl:c=>c,CleanUrl:c=>c=c.replace(/#/gm,"%23")},j=(c,r)=>{if((!c||0!==c.indexOf("data:"))&&q.CorsBehavior)if("string"===typeof q.CorsBehavior||q.CorsBehavior instanceof String)r.crossOrigin=q.CorsBehavior;else{const D=q.CorsBehavior(c);D&&(r.crossOrigin=D)}},X={getRequiredSize:null},e=function(c,r,D,B){let t,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",x=arguments.length>5?arguments[5]:void 0,E=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===E||void 0===E||!E._features.forceBitmapOverHTMLImageElement))return D("LoadImage is only supported in web or BabylonNative environments."),null;let m=!1;c instanceof ArrayBuffer||ArrayBuffer.isView(c)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(t=URL.createObjectURL(new Blob([c],{type:a})),m=!0):t=`data:${a};base64,`+(0,H.h)(c):c instanceof Blob?(t=URL.createObjectURL(c),m=!0):(t=q.CleanUrl(c),t=q.PreprocessUrl(t));const Y=r=>{if(D){const W=t||c.toString();D(`Error while trying to load image: ${0===W.indexOf("http")||W.length<=128?W:W.slice(0,128)+"..."}`,r)}};if(null!==E&&void 0!==E&&E._features.forceBitmapOverHTMLImageElement)return U(t,(W=>{E.createImageBitmap(new Blob([W],{type:a}),{premultiplyAlpha:"none",...x}).then((c=>{r(c),m&&URL.revokeObjectURL(t)})).catch((r=>{D&&D("Error while trying to load image: "+c,r)}))}),void 0,B||void 0,!0,((c,r)=>{Y(r)})),null;const v=new Image;if(X.getRequiredSize){const r=X.getRequiredSize(c);r.width&&(v.width=r.width),r.height&&(v.height=r.height)}j(t,v);const k=[],w=()=>{for(const c of k)c.target.removeEventListener(c.name,c.handler);k.length=0};k.push({target:v,name:"load",handler:()=>{w(),r(v),m&&v.src&&URL.revokeObjectURL(v.src)}}),k.push({target:v,name:"error",handler:c=>{w(),Y(c),m&&v.src&&URL.revokeObjectURL(v.src)}}),k.push({target:document,name:"securitypolicyviolation",handler:c=>{if(c.blockedURI!==v.src||"ta"===c.disposition)return;w();const r=new Error(`CSP violation of policy ${c.effectiveDirective} ${c.blockedURI}. Current policy is ${c.originalPolicy}`);M.c.UseFallbackTexture=!1,Y(r),m&&v.src&&URL.revokeObjectURL(v.src),v.src=""}}),(()=>{for(const c of k)c.target.addEventListener(c.name,c.handler)})();const Z="blob:"===t.substring(0,5),J="data:"===t.substring(0,5),e=()=>{Z||J||!W.d.IsCustomRequestAvailable?v.src=t:U(t,((c,r,D)=>{const W=new Blob([c],{type:!a&&D?D:a}),B=URL.createObjectURL(W);m=!0,v.src=B}),void 0,B||void 0,!0,((c,r)=>{Y(r)}))},y=()=>{B&&B.loadImage(t,v)};if(!Z&&!J&&B&&B.enableTexturesOffline)B.open(y,e);else{if(-1!==t.indexOf("file:")){const c=decodeURIComponent(t.substring(5).toLowerCase());if(u.FilesToLoad[c]&&"undefined"!==typeof URL){try{let r;try{r=URL.createObjectURL(u.FilesToLoad[c])}catch(N){r=URL.createObjectURL(u.FilesToLoad[c])}v.src=r,m=!0}catch(g){v.src=""}return v}}e()}return v},y=(c,r,D,W,B)=>{const u=new FileReader,a={onCompleteObservable:new t.c,abort:()=>u.abort()};return u.onloadend=()=>a.onCompleteObservable.notifyObservers(a),B&&(u.onerror=()=>{B(new J(`Unable to read ${c.name}`,c))}),u.onload=c=>{r(c.target.result)},D&&(u.onprogress=D),W?u.readAsArrayBuffer(c):u.readAsText(c),a},U=(c,r,D,W,B,H,x)=>{if(c.name)return y(c,r,D,B,H?c=>{H(void 0,c)}:void 0);const M=c;if(-1!==M.indexOf("file:")){let c=decodeURIComponent(M.substring(5).toLowerCase());0===c.indexOf("./")&&(c=c.substring(2));const W=u.FilesToLoad[c];if(W)return y(W,r,D,B,H?c=>H(void 0,new w(c.message,c.file)):void 0)}const{match:Y,type:v}=K(M);if(Y){const c={onCompleteObservable:new t.c,abort:()=>()=>{}};try{const c=B?f(M):A(M);r(c,void 0,v)}catch(a){H?H(void 0,a):E.e.Error(a.message||"Failed to parse the Data URL")}return m.d.SetImmediate((()=>{c.onCompleteObservable.notifyObservers(c)})),c}return N(M,((c,D)=>{r(c,null===D||void 0===D?void 0:D.responseURL,null===D||void 0===D?void 0:D.getResponseHeader("content-type"))}),D,W,B,H?c=>{H(c.request,new w(c.message,c.request))}:void 0,x)},N=(c,r,D,u,a,H,x)=>{c=q.CleanUrl(c),c=q.PreprocessUrl(c);const M=q.BaseUrl+c;let m=!1;const Y={onCompleteObservable:new t.c,abort:()=>m=!0},v=()=>{let c,t=new W.d,u=null;const v=()=>{t&&(D&&t.removeEventListener("progress",D),c&&t.removeEventListener("readystatechange",c),t.removeEventListener("loadend",k))};let k=()=>{v(),Y.onCompleteObservable.notifyObservers(Y),Y.onCompleteObservable.clear(),D=void 0,c=null,k=null,H=void 0,x=void 0,r=void 0};Y.abort=()=>{m=!0,k&&k(),t&&t.readyState!==(XMLHttpRequest.DONE||4)&&t.abort(),null!==u&&(clearTimeout(u),u=null),t=null};const w=c=>{const r=c.message||"Unknown error";H&&t?H(new Z(r,t)):E.e.Error(r)},J=E=>{if(t){if(t.open("GET",M),x)try{x(t)}catch(Y){return void w(Y)}a&&(t.responseType="arraybuffer"),D&&t.addEventListener("progress",D),k&&t.addEventListener("loadend",k),c=()=>{if(!m&&t&&t.readyState===(XMLHttpRequest.DONE||4)){if(c&&t.removeEventListener("readystatechange",c),t.status>=200&&t.status<300||0===t.status&&(!(0,B.f)()||z())){const c=a?t.response:t.responseText;if(null!==c){try{r&&r(c,t)}catch(Y){w(Y)}return}}const D=q.DefaultRetryStrategy;if(D){const c=D(M,t,E);if(-1!==c)return v(),t=new W.d,void(u=setTimeout((()=>J(E+1)),c))}const x=new Z("Error status: "+t.status+" "+t.statusText+" - Unable to load "+M,t);H&&H(x)}},t.addEventListener("readystatechange",c),t.send()}};J(0)};if(u&&u.enableSceneOffline){const W=c=>{c&&c.status>400?H&&H(c):v()},B=()=>{u&&u.loadFile(q.BaseUrl+c,(c=>{!m&&r&&r(c),Y.onCompleteObservable.notifyObservers(Y)}),D?c=>{!m&&D&&D(c)}:void 0,W,a)};u.open(B,W)}else v();return Y},g=c=>{const{match:r,type:D}=K(c);if(r)return D||void 0;const W=c.lastIndexOf(".");switch(c.substring(W+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"ua":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},z=()=>"undefined"!==typeof location&&"file:"===location.protocol,S=c=>k.test(c),K=c=>{const r=k.exec(c);if(null===r||0===r.length)return{match:!1,type:""};return{match:!0,type:r[0].replace("data:","").replace("base64,","")}};function f(c){return(0,H.c)(c.split(",")[1])}const A=c=>(0,H.d)(c.split(",")[1]);let h;v.b._FileToolsLoadImage=e,Y.b.loadFile=U,x.n.loadFile=U;((c,r,D,W,B,t,u,a,H,x)=>{h={DecodeBase64UrlToBinary:c,DecodeBase64UrlToString:r,DefaultRetryStrategy:D.DefaultRetryStrategy,BaseUrl:D.BaseUrl,CorsBehavior:D.CorsBehavior,PreprocessUrl:D.PreprocessUrl,IsBase64DataUrl:W,IsFileURL:B,LoadFile:t,LoadImage:u,ReadFile:a,RequestFile:H,SetCorsBehavior:x},Object.defineProperty(h,"DefaultRetryStrategy",{get:function(){return D.DefaultRetryStrategy},set:function(c){D.DefaultRetryStrategy=c}}),Object.defineProperty(h,"BaseUrl",{get:function(){return D.BaseUrl},set:function(c){D.BaseUrl=c}}),Object.defineProperty(h,"PreprocessUrl",{get:function(){return D.PreprocessUrl},set:function(c){D.PreprocessUrl=c}}),Object.defineProperty(h,"CorsBehavior",{get:function(){return D.CorsBehavior},set:function(c){D.CorsBehavior=c}})})(f,A,q,S,z,U,e,y,N,j)},11646:(c,r,D)=>{function W(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(c=>{const r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}D.d(r,{c:()=>W})},11628:(c,r,D)=>{D.d(r,{b:()=>t});var W=D(11509),B=D(11637);class t{static Instantiate(c){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[c])return this.RegisteredExternalClasses[c];const r=(0,B.b)(c);if(r)return r;W.e.Warn(c+" not found, you may have missed an import.");const D=c.split(".");let t=window||this;for(let W=0,B=D.length;W<B;W++)t=t[D[W]];return"function"!==typeof t?null:t}}t.RegisteredExternalClasses={}},11517:(c,r,D)=>{D.d(r,{e:()=>B});var W=D(11501);class B{static get Now(){return(0,W.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11555:(c,r,D)=>{D.d(r,{c:()=>u,d:()=>t,f:()=>W,h:()=>B});const W=c=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(c);let r="";for(let D=0;D<c.byteLength;D++)r+=String.fromCharCode(c[D]);return r},B=c=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let D,W,B,t,u,a,H,x="",M=0;const E=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c);for(;M<E.length;)D=E[M++],W=M<E.length?E[M++]:Number.NaN,B=M<E.length?E[M++]:Number.NaN,t=D>>2,u=(3&D)<<4|W>>4,a=(15&W)<<2|B>>6,H=63&B,isNaN(W)?a=H=64:isNaN(B)&&(H=64),x+=r.charAt(t)+r.charAt(u)+r.charAt(a)+r.charAt(H);return x},t=c=>atob(c),u=c=>{const r=t(c),D=r.length,W=new Uint8Array(new ArrayBuffer(D));for(let B=0;B<D;B++)W[B]=r.charCodeAt(B);return W.buffer}},11648:(c,r,D)=>{function W(c){let r=1;do{r*=2}while(r<c);return r===c}function B(c,r,D){return c*(1-D)+r*D}function t(c){const r=u(c),D=a(c);return r-c>c-D?D:r}function u(c){return c--,c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,c|=c>>16,++c}function a(c){return c|=c>>1,c|=c>>2,c|=c>>4,c|=c>>8,(c|=c>>16)-(c>>1)}function H(c,r){let D;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:D=a(c);break;case 2:D=t(c);break;default:D=u(c)}return Math.min(D,r)}D.d(r,{b:()=>a,e:()=>H,h:()=>W,l:()=>B,m:()=>t})},11487:(c,r,D)=>{D.r(r),D.d(r,{AsyncLoop:()=>J,Tools:()=>w,className:()=>Z});var W=D(11494),B=D(11501),t=D(11509),u=D(11515),a=D(11517),H=D(11524),x=D(11532),M=D(11538),E=D(11545),m=D(11581),Y=D(11628),v=D(11646),k=D(11648);class w{static get BaseUrl(){return E.f.BaseUrl}static set BaseUrl(c){E.f.BaseUrl=c}static get CleanUrl(){return E.f.CleanUrl}static set CleanUrl(c){E.f.CleanUrl=c}static IsAbsoluteUrl(c){return 0===c.indexOf("//")||-1!==c.indexOf("://")&&(-1!==c.indexOf(".")&&(-1!==c.indexOf("/")&&(!(c.indexOf(":")>c.indexOf("/"))&&(c.indexOf("://")<c.indexOf(".")||(0===c.indexOf("data:")||0===c.indexOf("blob:"))))))}static set ScriptBaseUrl(c){E.f.ScriptBaseUrl=c}static get ScriptBaseUrl(){return E.f.ScriptBaseUrl}static set CDNBaseUrl(c){w.ScriptBaseUrl=c,w.AssetBaseUrl=c}static set ScriptPreprocessUrl(c){E.f.ScriptPreprocessUrl=c}static get ScriptPreprocessUrl(){return E.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return E.f.DefaultRetryStrategy}static set DefaultRetryStrategy(c){E.f.DefaultRetryStrategy=c}static get CorsBehavior(){return E.f.CorsBehavior}static set CorsBehavior(c){E.f.CorsBehavior=c}static get UseFallbackTexture(){return M.c.UseFallbackTexture}static set UseFallbackTexture(c){M.c.UseFallbackTexture=c}static get RegisteredExternalClasses(){return Y.b.RegisteredExternalClasses}static set RegisteredExternalClasses(c){Y.b.RegisteredExternalClasses=c}static get fallbackTexture(){return M.c.FallbackTexture}static set fallbackTexture(c){M.c.FallbackTexture=c}static FetchToRef(c,r,D,W,B,t){const u=4*((Math.abs(c)*D%D|0)+(Math.abs(r)*W%W|0)*D);t.r=B[u]/255,t.g=B[u+1]/255,t.b=B[u+2]/255,t.a=B[u+3]/255}static Mix(c,r,D){return 0}static Instantiate(c){return Y.b.Instantiate(c)}static SetImmediate(c){m.d.SetImmediate(c)}static IsExponentOfTwo(c){return!0}static FloatRound(c){return Math.fround(c)}static GetFilename(c){const r=c.lastIndexOf("/");return r<0?c:c.substring(r+1)}static GetFolderPath(c){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const D=c.lastIndexOf("/");return D<0?r?c:"":c.substring(0,D+1)}static ToDegrees(c){return 180*c/Math.PI}static ToRadians(c){return c*Math.PI/180}static SmoothAngleChange(c,r){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const W=this.ToRadians(c),B=this.ToRadians(r);return this.ToDegrees(Math.atan2((1-D)*Math.sin(B)+D*Math.sin(W),(1-D)*Math.cos(B)+D*Math.cos(W)))}static MakeArray(c,r){return!0===r||void 0!==c&&null!=c?Array.isArray(c)?c:[c]:null}static GetPointerPrefix(c){return(0,B.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(c,r){(0,E.x)(c,r)}static SetReferrerPolicyBehavior(c,r){r.referrerPolicy=c}static get PreprocessUrl(){return E.f.PreprocessUrl}static set PreprocessUrl(c){E.f.PreprocessUrl=c}static LoadImage(c,r,D,W,B,t){return(0,E.q)(c,r,D,W,B,t)}static LoadFile(c,r,D,W,B,t){return(0,E.m)(c,r,D,W,B,t)}static async LoadFileAsync(c){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((D,W)=>{(0,E.m)(c,(c=>{D(c)}),void 0,void 0,r,((c,r)=>{W(r)}))}))}static GetAssetUrl(c){if(!c)return"";if(w.AssetBaseUrl&&c.startsWith(w._DefaultAssetsUrl)){const r="/"===w.AssetBaseUrl[w.AssetBaseUrl.length-1]?w.AssetBaseUrl.substring(0,w.AssetBaseUrl.length-1):w.AssetBaseUrl;return c.replace(w._DefaultAssetsUrl,r)}return c}static GetBabylonScriptURL(c,r){if(!c)return"";if(w.ScriptBaseUrl&&c.startsWith(w._DefaultCdnUrl)){const r="/"===w.ScriptBaseUrl[w.ScriptBaseUrl.length-1]?w.ScriptBaseUrl.substring(0,w.ScriptBaseUrl.length-1):w.ScriptBaseUrl;c=c.replace(w._DefaultCdnUrl,r)}return c=w.ScriptPreprocessUrl(c),r&&(c=w.GetAbsoluteUrl(c)),c}static LoadBabylonScript(c,r,D,W){c=w.GetBabylonScriptURL(c),w.LoadScript(c,r,D)}static async LoadBabylonScriptAsync(c){return c=w.GetBabylonScriptURL(c),await w.LoadScriptAsync(c)}static LoadScript(c,r,D,W){let t=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(c),r&&r()}catch(H){null===D||void 0===D||D(`Unable to load script '${c}' in worker`,H)}return}if(!(0,B.f)())return void(null===D||void 0===D||D(`Cannot load script '${c}' outside of a window or a worker`));const u=document.getElementsByTagName("head")[0],a=document.createElement("script");t?(a.setAttribute("type","module"),a.innerText=c):(a.setAttribute("type","text/javascript"),a.setAttribute("src",c)),W&&(a.id=W),a.onload=()=>{r&&r()},a.onerror=r=>{D&&D(`Unable to load script '${c}'`,r)},u.appendChild(a)}static async LoadScriptAsync(c,r){return await new Promise(((D,W)=>{this.LoadScript(c,(()=>{D()}),((c,r)=>{W(r||new Error(c))}),r)}))}static ReadFileAsDataURL(c,r,D){const B=new FileReader,t={onCompleteObservable:new W.c,abort:()=>B.abort()};return B.onloadend=()=>{t.onCompleteObservable.notifyObservers(t)},B.onload=c=>{r(c.target.result)},B.onprogress=D,B.readAsDataURL(c),t}static ReadFile(c,r,D,W,B){return(0,E.u)(c,r,D,W,B)}static FileAsURL(c){const r=new Blob([c]);return window.URL.createObjectURL(r)}static Format(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return c.toFixed(r)}static DeepCopy(c,r,D,W){u.e.DeepCopy(c,r,D,W)}static IsEmpty(c){for(const r in c)if(Object.prototype.hasOwnProperty.call(c,r))return!1;return!0}static RegisterTopRootEvents(c,r){for(let W=0;W<r.length;W++){const B=r[W];c.addEventListener(B.name,B.handler,!1);try{window.parent&&window.parent.addEventListener(B.name,B.handler,!1)}catch(D){}}}static UnregisterTopRootEvents(c,r){for(let W=0;W<r.length;W++){const B=r[W];c.removeEventListener(B.name,B.handler);try{c.parent&&c.parent.removeEventListener(B.name,B.handler)}catch(D){}}}static async DumpFramebuffer(c,r,D,W){throw(0,H.e)("DumpTools")}static DumpData(c,r,D,W){throw(0,H.e)("DumpTools")}static async DumpDataAsync(c,r,D){throw(0,H.e)("DumpTools")}static _IsOffScreenCanvas(c){return void 0!==c.convertToBlob}static ToBlob(c,r){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",W=arguments.length>3?arguments[3]:void 0;w._IsOffScreenCanvas(c)||c.toBlob||(c.toBlob=function(c,r,D){setTimeout((()=>{const W=atob(this.toDataURL(r,D).split(",")[1]),B=W.length,t=new Uint8Array(B);for(let c=0;c<B;c++)t[c]=W.charCodeAt(c);c(new Blob([t]))}))}),w._IsOffScreenCanvas(c)?c.convertToBlob({type:D,quality:W}).then((c=>r(c))):c.toBlob((function(c){r(c)}),D,W)}static DownloadBlob(c,r){if("download"in document.createElement("a")){if(!r){const c=new Date;r="screenshot_"+((c.getFullYear()+"-"+(c.getMonth()+1)).slice(2)+"-"+c.getDate()+"_"+c.getHours()+"-"+("0"+c.getMinutes()).slice(-2))+".png"}w.Download(c,r)}else if(c&&"undefined"!==typeof URL){const r=URL.createObjectURL(c),D=window.open("");if(!D)return;const W=D.document.createElement("img");W.onload=function(){URL.revokeObjectURL(r)},W.src=r,D.document.body.appendChild(W)}}static EncodeScreenshotCanvasData(c,r){let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",W=arguments.length>3?arguments[3]:void 0,B=arguments.length>4?arguments[4]:void 0;if("string"!==typeof W&&r){if(r){if(w._IsOffScreenCanvas(c))return void c.convertToBlob({type:D,quality:B}).then((c=>{const D=new FileReader;D.readAsDataURL(c),D.onloadend=()=>{const c=D.result;r(c)}}));const W=c.toDataURL(D,B);r(W)}}else this.ToBlob(c,(function(c){c&&w.DownloadBlob(c,W),r&&r("")}),D,B)}static Download(c,r){if("undefined"===typeof URL)return;const D=window.URL.createObjectURL(c),W=document.createElement("a");document.body.appendChild(W),W.style.display="none",W.href=D,W.download=r,W.addEventListener("click",(()=>{W.parentElement&&W.parentElement.removeChild(W)})),W.click(),window.URL.revokeObjectURL(D)}static BackCompatCameraNoPreventDefault(c){return"boolean"===typeof c[0]?c[0]:"boolean"===typeof c[1]&&c[1]}static CreateScreenshot(c,r,D,W){throw(0,H.e)("ScreenshotTools")}static async CreateScreenshotAsync(c,r,D){throw(0,H.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(c,r,D,W){throw(0,H.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(c,r,D){throw(0,H.e)("ScreenshotTools")}static RandomId(){return(0,v.c)()}static IsBase64(c){return(0,E.j)(c)}static DecodeBase64(c){return(0,E.b)(c)}static get errorsCount(){return t.e.errorsCount}static Log(c){t.e.Log(c)}static Warn(c){t.e.Warn(c)}static Error(c){t.e.Error(c)}static get LogCache(){return t.e.LogCache}static ClearLogCache(){t.e.ClearLogCache()}static set LogLevels(c){t.e.LogLevels=c}static set PerformanceLogLevel(c){return(c&w.PerformanceUserMarkLogLevel)===w.PerformanceUserMarkLogLevel?(w.StartPerformanceCounter=w._StartUserMark,void(w.EndPerformanceCounter=w._EndUserMark)):(c&w.PerformanceConsoleLogLevel)===w.PerformanceConsoleLogLevel?(w.StartPerformanceCounter=w._StartPerformanceConsole,void(w.EndPerformanceCounter=w._EndPerformanceConsole)):(w.StartPerformanceCounter=w._StartPerformanceCounterDisabled,void(w.EndPerformanceCounter=w._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(c,r){}static _EndPerformanceCounterDisabled(c,r){}static _StartUserMark(c){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!w._Performance){if(!(0,B.f)())return;w._Performance=window.performance}r&&w._Performance.mark&&w._Performance.mark(c+"-Begin")}static _EndUserMark(c){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&w._Performance.mark&&(w._Performance.mark(c+"-End"),w._Performance.measure(c,c+"-Begin",c+"-End"))}static _StartPerformanceConsole(c){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&(w._StartUserMark(c,r),console.time&&console.time(c))}static _EndPerformanceConsole(c){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&(w._EndUserMark(c,r),console.timeEnd(c))}static get Now(){return a.e.Now}static GetClassName(c){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=null;if(!r&&c.getClassName)D=c.getClassName();else{if(c instanceof Object){D=(r?c:Object.getPrototypeOf(c)).constructor.__bjsclassName__}D||(D=typeof c)}return D}static First(c,r){for(const D of c)if(r(D))return D;return null}static getFullClassName(c){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=null,W=null;if(!r&&c.getClassName)D=c.getClassName();else{if(c instanceof Object){const B=r?c:Object.getPrototypeOf(c);D=B.constructor.__bjsclassName__,W=B.constructor.__bjsmoduleName__}D||(D=typeof c)}return D?(null!=W?W+".":"")+D:null}static async DelayAsync(c){await new Promise((r=>{setTimeout((()=>{r()}),c)}))}static IsSafari(){return!!(0,B.e)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function Z(c,r){return D=>{D.__bjsclassName__=c,D.__bjsmoduleName__=null!=r?r:null}}w.AssetBaseUrl="",w.UseCustomRequestHeaders=!1,w.CustomRequestHeaders=x.d.CustomRequestHeaders,w.GetDOMTextContent=B.c,w._DefaultCdnUrl="https://cdn.babylonjs.com",w._DefaultAssetsUrl="https://assets.babylonjs.com/core",w.GetAbsoluteUrl="object"===typeof document?c=>{const r=document.createElement("a");return r.href=c,r.href}:"function"===typeof URL&&"object"===typeof location?c=>new URL(c,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},w.NoneLogLevel=t.e.NoneLogLevel,w.MessageLogLevel=t.e.MessageLogLevel,w.WarningLogLevel=t.e.WarningLogLevel,w.ErrorLogLevel=t.e.ErrorLogLevel,w.AllLogLevel=t.e.AllLogLevel,w.IsWindowObjectExist=B.f,w.PerformanceNoneLogLevel=0,w.PerformanceUserMarkLogLevel=1,w.PerformanceConsoleLogLevel=2,w.StartPerformanceCounter=w._StartPerformanceCounterDisabled,w.EndPerformanceCounter=w._EndPerformanceCounterDisabled;class J{constructor(c,r,D){let W=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=c,this.index=W-1,this._done=!1,this._fn=r,this._successCallback=D}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(c,r,D){const W=new J(c,r,D,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return W.executeNext(),W}static SyncAsyncForLoop(c,r,D,W,B){let t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return J.Run(Math.ceil(c/r),(W=>{B&&B()?W.breakLoop():setTimeout((()=>{for(let t=0;t<r;++t){const u=W.index*r+t;if(u>=c)break;if(D(u),B&&B()){W.breakLoop();break}}W.executeNext()}),t)}),W)}}w.Mix=k.l,w.IsExponentOfTwo=k.h,M.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11637:(c,r,D)=>{D.d(r,{b:()=>t,e:()=>B});const W={};function B(c,r){W[c]=r}function t(c){return W[c]}},11532:(c,r,D)=>{D.d(r,{d:()=>W});class W{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(W.CustomRequestHeaders).length>0||W.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const c in W.CustomRequestHeaders){const r=W.CustomRequestHeaders[c];r&&this._xhr.setRequestHeader(c,r)}}_shouldSkipRequestModifications(c){return W.SkipRequestModificationForBabylonCDN&&(c.includes("preview.babylonjs.com")||c.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(c){this._xhr.onprogress=c}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(c){this._xhr.responseType=c}get timeout(){return this._xhr.timeout}set timeout(c){this._xhr.timeout=c}addEventListener(c,r,D){this._xhr.addEventListener(c,r,D)}removeEventListener(c,r,D){this._xhr.removeEventListener(c,r,D)}abort(){this._xhr.abort()}send(c){W.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(c)}open(c,r){for(const D of W.CustomRequestModifiers){if(this._shouldSkipRequestModifications(r))return;r=D(this._xhr,r)||r}r=(r=r.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=r,this._xhr.open(c,r,!0)}setRequestHeader(c,r){this._xhr.setRequestHeader(c,r)}getResponseHeader(c){return this._xhr.getResponseHeader(c)}}W.CustomRequestHeaders={},W.CustomRequestModifiers=new Array,W.SkipRequestModificationForBabylonCDN=!0}}]);