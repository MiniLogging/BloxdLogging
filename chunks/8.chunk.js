"use strict";(self.ufnpnb83drd=self.ufnpnb83drd||[]).push([[8],{12243:(E,U,g)=>{g.d(U,{b:()=>e});var N=g(12205),L=g(12186),D=g(12247),S=g(12264),u=g(12197);class s{constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,E&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(E){this._zOffset!==E&&(this._zOffset=E,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(E){this._zOffsetUnits!==E&&(this._zOffsetUnits=E,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(E){this._cullFace!==E&&(this._cullFace=E,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(E){this._cull!==E&&(this._cull=E,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(E){this._depthFunc!==E&&(this._depthFunc=E,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(E){this._depthMask!==E&&(this._depthMask=E,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(E){this._depthTest!==E&&(this._depthTest=E,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(E){this._frontFace!==E&&(this._frontFace=E,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(E){this.isDirty&&(this._isCullDirty&&(this.cull?E.enable(E.CULL_FACE):E.disable(E.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(E.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(E.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?E.enable(E.DEPTH_TEST):E.disable(E.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(E.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(E.enable(E.POLYGON_OFFSET_FILL),E.polygonOffset(this.zOffset,this.zOffsetUnits)):E.disable(E.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(E.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class C{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(E){this._func!==E&&(this._func=E,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(E){this._funcRef!==E&&(this._funcRef=E,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(E){this._funcMask!==E&&(this._funcMask=E,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(E){this._opStencilFail!==E&&(this._opStencilFail=E,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(E){this._opDepthFail!==E&&(this._opDepthFail=E,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(E){this._opStencilDepthPass!==E&&(this._opStencilDepthPass=E,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(E){this._mask!==E&&(this._mask=E,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(E){this._enabled!==E&&(this._enabled=E,this._isStencilTestDirty=!0)}constructor(){let E=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,E&&this.reset()}reset(){var E;this.stencilMaterial=void 0,null===(E=this.stencilGlobal)||void 0===E||E.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(E){var U;if(!E)return;const g=!this.useStencilGlobalOnly&&!(null===(U=this.stencilMaterial)||void 0===U||!U.enabled);this.enabled=g?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=g?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=g?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=g?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=g?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=g?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=g?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=g?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?E.enable(E.STENCIL_TEST):E.disable(E.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(E.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(E.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(E.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class B{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=B.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=B.KEEP,this.opDepthFail=B.KEEP,this.opStencilDepthPass=B.REPLACE}get stencilFunc(){return this.func}set stencilFunc(E){this.func=E}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(E){this.funcRef=E}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(E){this.funcMask=E}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(E){this.opStencilFail=E}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(E){this.opDepthFail=E}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(E){this.opStencilDepthPass=E}get stencilMask(){return this.mask}set stencilMask(E){this.mask=E}get stencilTest(){return this.enabled}set stencilTest(E){this.enabled=E}}B.ALWAYS=519,B.KEEP=7680,B.REPLACE=7681;class P{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(E){this._alphaBlend!==E&&(this._alphaBlend=E,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(E,U,g,N){this._blendConstants[0]===E&&this._blendConstants[1]===U&&this._blendConstants[2]===g&&this._blendConstants[3]===N||(this._blendConstants[0]=E,this._blendConstants[1]=U,this._blendConstants[2]=g,this._blendConstants[3]=N,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(E,U,g,N){this._blendFunctionParameters[0]===E&&this._blendFunctionParameters[1]===U&&this._blendFunctionParameters[2]===g&&this._blendFunctionParameters[3]===N||(this._blendFunctionParameters[0]=E,this._blendFunctionParameters[1]=U,this._blendFunctionParameters[2]=g,this._blendFunctionParameters[3]=N,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(E,U){this._blendEquationParameters[0]===E&&this._blendEquationParameters[1]===U||(this._blendEquationParameters[0]=E,this._blendEquationParameters[1]=U,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(E){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?E.enable(E.BLEND):E.disable(E.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(E.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(E.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(E.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var F=g(12199),f=g(12273),d=g(12183),I=g(12174),y=g(12229),h=g(12282);function V(E,U){if((0,d.f)()){const{requestAnimationFrame:g}=U||window;if("function"===typeof g)return g(E)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(E);return setTimeout(E,16)}class e{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(E){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Fg(){return this._useReverseDepthBuffer}set Fg(E){E!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=E,this._depthCullingState.depthFunc=E?518:515)}setColorWrite(E){E!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=E)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(E){if(E)return this.isNDCHalfZRange?E.IS_NDC_HALF_ZRANGE="":delete E.IS_NDC_HALF_ZRANGE,this.Fg?E.USE_REVERSE_DEPTHBUFFER="":delete E.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?E.USE_EXACT_SRGB_CONVERSIONS="":delete E.USE_EXACT_SRGB_CONVERSIONS);{let E="";return this.isNDCHalfZRange&&(E+="#define IS_NDC_HALF_ZRANGE"),this.Fg&&(E&&(E+="\n"),E+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(E&&(E+="\n"),E+="#define USE_EXACT_SRGB_CONVERSIONS"),E}}_rebuildInternalTextures(){const E=this._internalTexturesCache.slice();for(const U of E)U._rebuild()}_rebuildRenderTargetWrappers(){const E=this._renderTargetWrapperCache.slice();for(const U of E)U._rebuild()}_rebuildEffects(){for(const E in this._compiledEffects){const U=this._compiledEffects[E];U._pipelineContext=null,U._prepareEffect()}D.Effect.ResetCache()}_rebuildGraphicsResources(){var E;this.wipeCaches(!0),this._rebuildEffects(),null===(E=this._rebuildComputeEffects)||void 0===E||E.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){L.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(E){setTimeout((()=>{this._clearEmptyResources();const U=this._depthCullingState.depthTest,g=this._depthCullingState.depthFunc,N=this._depthCullingState.depthMask,L=this._stencilState.stencilTest;E(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=U,this._depthCullingState.depthFunc=g,this._depthCullingState.depthMask=N,this._stencilState.stencilTest=L,this._flagContextRestored()}),0)}get C(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(E){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(E){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const E=new Uint8Array(4),U=[E,E,E,E,E,E];this._emptyCubeTexture=this.createRawCubeTexture(U,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(E){if(!E)return this._activeRenderLoops.length=0,void this._cancelFrame();const U=this._activeRenderLoops.indexOf(E);U>=0&&(this._activeRenderLoops.splice(U,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const E=this._frameHandler;if(this._frameHandler=0,(0,d.f)()){const{cancelAnimationFrame:U}=this.getHostWindow()||window;if("function"===typeof U)return U(E)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(E);return clearTimeout(E)}}dg(){this.onBeginFrameObservable.notifyObservers(this)}Ig(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(E){this._maxFPS=E,void 0!==E&&(this._minFrameTime=E<=0?Number.MAX_VALUE:1e3/E)}_isOverFrameTime(E){if(!E||void 0===this._maxFPS)return!1;const U=E-this._lastFrameTime;return this._lastFrameTime=E,this._renderAccumulator+=U,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(E){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(E)){let E=!0;(this.C||!this.renderEvenInBackground&&this._windowIsBackground)&&(E=!1),E&&(this.dg(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ig())}}_renderLoop(E){this._processFrame(E),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let E=0;E<this._activeRenderLoops.length;E++){(0,this._activeRenderLoops[E])()}}_renderViews(){return!1}_queueNewFrame(E,U){return V(E,U)}runRenderLoop(E){-1===this._activeRenderLoops.indexOf(E)&&(this._activeRenderLoops.push(E),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(E){this._depthCullingState.depthTest=E}setZOffset(E){this._depthCullingState.zOffset=this.Fg?-E:E}getZOffset(){const E=this._depthCullingState.zOffset;return this.Fg?-E:E}setZOffsetUnits(E){this._depthCullingState.zOffsetUnits=this.Fg?-E:E}getZOffsetUnits(){const E=this._depthCullingState.zOffsetUnits;return this.Fg?-E:E}getHostWindow(){return(0,d.f)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(E){this._compatibilityMode=!0}_rebuildTextures(){for(const E of this.scenes)E._rebuildTextures();for(const E of this._virtualScenes)E._rebuildTextures()}_releaseRenderTargetWrapper(E){const U=this._renderTargetWrapperCache.indexOf(E);-1!==U&&this._renderTargetWrapperCache.splice(U,1)}get currentViewport(){return this._cachedViewport}setViewport(E,U,g){const N=U||this.getRenderWidth(),L=g||this.getRenderHeight(),D=E.x||0,S=E.y||0;this._cachedViewport=E,this._viewport(D*N,S*L,N*E.width,L*E.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(E){return new Path2D(E)}get description(){let E=this.name+this.version;return this._caps.parallelShaderCompile&&(E+=" - Parallel shader compilation"),E}_createTextureBase(E,U,g,D){let S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,C=arguments.length>7?arguments[7]:void 0,B=arguments.length>8?arguments[8]:void 0,P=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,F=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,I=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,y=arguments.length>13?arguments[13]:void 0,V=arguments.length>14?arguments[14]:void 0,x=arguments.length>15?arguments[15]:void 0;const l="data:"===(E=E||"").substring(0,5),Y="blob:"===E.substring(0,5),t=l&&-1!==E.indexOf(";base64,"),G=F||new f.c(this,1);G!==F&&(G.label=E.substring(0,60));const b=E;!this._transformTextureUrl||t||F||P||(E=this._transformTextureUrl(E)),b!==E&&(G._originalUrl=b);const T=E.lastIndexOf(".");let v=I||(T>-1?E.substring(T).toLowerCase():"");v.indexOf("?")>-1&&(v=v.split("?")[0]);const o=(0,h.b)(v,y);D&&D.addPendingData(G),G.url=E,G.generateMipMaps=!U,G.samplingMode=S,G.invertY=g,G._useSRGBBuffer=this._getUseSRGBBuffer(!!x,U),this._doNotHandleContextLost||(G._buffer=P);let c=null;u&&!F&&(c=G.onLoadedObservable.add(u)),F||this._internalTexturesCache.push(G);const r=(g,F)=>{D&&D.removePendingData(G),E===b?(c&&G.onLoadedObservable.remove(c),N.b.UseFallbackTexture&&E!==N.b.FallbackTexture&&this._createTextureBase(N.b.FallbackTexture,U,G.invertY,D,S,null,s,C,B,P,G),g=(g||"Unknown error")+(N.b.UseFallbackTexture?" - Fallback texture was used":""),G.onErrorObservable.notifyObservers({message:g,exception:F}),s&&s(g,F)):(L.d.Warn(`Failed to load ${E}, falling back to ${b}`),this._createTextureBase(b,U,G.invertY,D,S,u,s,C,B,P,G,d,I,y,V,x))};if(o){const U=async E=>{(await o).loadData(E,G,((E,U,g,N,L,u)=>{u?r("TextureLoader failed to load data"):C(G,v,D,{width:E,height:U},G.invertY,!g,N,(()=>(L(),!1)),S)}),V)};P?P instanceof ArrayBuffer?U(new Uint8Array(P)):ArrayBuffer.isView(P)?U(P):s&&s("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(E,(E=>{U(new Uint8Array(E))}),void 0,D?D.offlineProvider:void 0,!0,((E,U)=>{r("Unable to load "+(E&&E.responseURL,U))}))}else{const g=E=>{Y&&!this._doNotHandleContextLost&&(G._buffer=E),C(G,v,D,E,G.invertY,U,!1,B,S)};!l||t?P&&("string"===typeof P.decoding||P.close)?g(P):e._FileToolsLoadImage(E||"",g,r,D?D.offlineProvider:null,y,G.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof P||P instanceof ArrayBuffer||ArrayBuffer.isView(P)||P instanceof Blob?e._FileToolsLoadImage(P,g,r,D?D.offlineProvider:null,y,G.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):P&&g(P)}return G}_rebuildBuffers(){for(const E of this._uniformBuffers)E._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,d.c)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const E in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,E)&&(this._boundTexturesCache[E]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(E){this._name=E}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(E){this._hardwareScalingLevel=E,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(E){this._doNotHandleContextLost=E}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(E,U,g){var L,D;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new s,this._stencilStateComposer=new C,this._stencilState=new B,this._alphaState=new P,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new I.b,this.onCanvasFocusObservable=new I.b,this.onNewSceneAddedObservable=new I.b,this.onResizeObservable=new I.b,this.onCanvasPointerOutObservable=new I.b,this.onEffectErrorObservable=new I.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new I.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=E=>this._renderLoop(E),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new I.b,this.onAfterShaderCompilationObservable=new I.b,this.onBeginFrameObservable=new I.b,this.onEndFrameObservable=new I.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new I.b,this.onContextRestoredObservable=new I.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.hg=new I.b,this.onReleaseEffectsObservable=new I.b,N.b.Instances.push(this),this.startTime=u.b.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,S.e.SetMatrixPrecision(!!U.useHighPrecisionMatrix),(0,d.d)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=g??!1,U.antialias=E??U.antialias,U.deterministicLockstep=U.deterministicLockstep??!1,U.lockstepMaxSteps=U.lockstepMaxSteps??4,U.timeStep=U.timeStep??1/60,U.Vg=U.Vg??!0,this._audioContext=(null===(L=U.audioEngineOptions)||void 0===L?void 0:L.audioContext)??null,this._audioDestination=(null===(D=U.audioEngineOptions)||void 0===D?void 0:D.audioDestination)??null,this.premultipliedAlpha=U.premultipliedAlpha??!0,this._doNotHandleContextLost=!!U.doNotHandleContextLost,this._isStencilEnable=!!U.Vg,this.useExactSrgbConversions=U.useExactSrgbConversions??!1;const F=(0,d.f)()&&window.devicePixelRatio||1,f=U.limitDeviceRatio||F;g=g||U.adaptToDeviceRatio||!1,this._hardwareScalingLevel=g?1/Math.min(f,F):1,this._lastDevicePixelRatio=F,this._creationOptions=U}resize(){let E,U,g=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const E=(0,d.f)()&&window.devicePixelRatio||1,U=this._lastDevicePixelRatio/E;this._lastDevicePixelRatio=E,this._hardwareScalingLevel*=U}if((0,d.f)()&&(0,d.c)())if(this._renderingCanvas){var N,L;const g=null===(N=(L=this._renderingCanvas).getBoundingClientRect)||void 0===N?void 0:N.call(L);E=this._renderingCanvas.clientWidth||(null===g||void 0===g?void 0:g.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,U=this._renderingCanvas.clientHeight||(null===g||void 0===g?void 0:g.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else E=window.innerWidth,U=window.innerHeight;else E=this._renderingCanvas?this._renderingCanvas.width:100,U=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(E/this._hardwareScalingLevel,U/this._hardwareScalingLevel,g)}setSize(E,U){let g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(E|=0,U|=0,!g&&this._renderingCanvas.width===E&&this._renderingCanvas.height===U)return!1;if(this._renderingCanvas.width=E,this._renderingCanvas.height=U,this.scenes){for(let E=0;E<this.scenes.length;E++){const U=this.scenes[E];for(let E=0;E<U.cameras.length;E++){U.cameras[E]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(E,U,g,N,L,D,S,u,s,C,B){throw(0,F.e)("engine.rawTexture")}createRawCubeTexture(E,U,g,N,L,D,S,u){throw(0,F.e)("engine.rawTexture")}createRawTexture3D(E,U,g,N,L,D,S,u,s,C,B){throw(0,F.e)("engine.rawTexture")}createRawTexture2DArray(E,U,g,N,L,D,S,u,s,C,B){throw(0,F.e)("engine.rawTexture")}_sharedInit(E){this._renderingCanvas=E}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const E=navigator.userAgent;this.hostInformation.isMobile=-1!==E.indexOf("Mobile")||-1!==E.indexOf("Mac")&&(0,d.c)()&&"ontouchend"in document},this._checkForMobile(),(0,d.f)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(E){return document.createElement("video")}_reportDrawCall(){var E;let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(E=this._drawCalls)||void 0===E||E.addCount(U,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(E,U){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(E,U){return createImageBitmap(E,U)}resizeImageBitmap(E,U,g){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(E){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(E,U){if("undefined"===typeof document)return new OffscreenCanvas(E,U);const g=document.createElement("canvas");return g.width=E,g.height=U,g}createCanvas(E,U){return e._CreateCanvas(E,U)}static _FileToolsLoadImage(E,U,g,N,L,D,S){throw(0,F.e)("FileTools")}_loadFile(E,U,g,N,L,D){const S=(0,y.h)(E,U,g,N,L,D);return this._activeRequests.push(S),S.onCompleteObservable.add((()=>{const E=this._activeRequests.indexOf(S);-1!==E&&this._activeRequests.splice(E,1)})),S}static _FileToolsLoadFile(E,U,g,N,L,D){if(y.b.loadFile)return y.b.loadFile(E,U,g,N,L,D);throw(0,F.e)("FileTools")}dispose(){var E;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(E=this.releaseComputeEffects)||void 0===E||E.call(this),D.Effect.ResetCache();for(const g of this._activeRequests)g.abort();this._boundRenderFunction=null,this.hg.notifyObservers(this),this.hg.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,d.f)()&&window.removeEventListener("resize",this._checkForMobile);const U=N.b.Instances.indexOf(this);U>=0&&N.b.Instances.splice(U,1),N.b.Instances.length||(N.b.OnEnginesDisposedObservable.notifyObservers(this),N.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(E){throw(0,F.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(E,U){for(let g=0;g<N.b.Instances.length;g++){const L=N.b.Instances[g];for(let g=0;g<L.scenes.length;g++)L.scenes[g].markAllMaterialsAsDirty(E,U)}}}e._RenderPassIdCounter=0,e._RescalePostProcessFactory=null,e.CollisionsEpsilon=.001,e.QueueNewFrame=V},12205:(E,U,g)=>{g.d(U,{b:()=>L});var N=g(12174);class L{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}L.Instances=[],L.OnEnginesDisposedObservable=new N.b,L._LastCreatedScene=null,L.UseFallbackTexture=!0,L.FallbackTexture=""},12264:(E,U,g)=>{g.d(U,{e:()=>N});class N{static SetMatrixPrecision(E){if(N.MatrixTrackPrecisionChange=!1,E&&!N.MatrixUse64Bits&&N.MatrixTrackedMatrices)for(let U=0;U<N.MatrixTrackedMatrices.length;++U){const E=N.MatrixTrackedMatrices[U],g=E.vg;E.vg=new Array(16);for(let U=0;U<16;++U)E.vg[U]=g[U]}N.MatrixUse64Bits=E,N.MatrixCurrentType=N.MatrixUse64Bits?Array:Float32Array,N.MatrixTrackedMatrices=null}}N.MatrixUse64Bits=!1,N.MatrixTrackPrecisionChange=!0,N.MatrixCurrentType=Float32Array,N.MatrixTrackedMatrices=[]},12282:(E,U,g)=>{g.d(U,{b:()=>S});var N=g(12186);const L=new Map;function D(E,U){(function(E){return L.delete(E)})(E)&&N.d.Warn(`Extension with the name '${E}' already exists`),L.set(E,U)}function S(E,U){"image/ktx"!==U&&"image/ktx2"!==U||(E=".ktx"),L.has(E)||(E.endsWith(".ies")&&D(".ies",(async()=>await g.e(15).then(g.bind(g,14808)).then((E=>new E._IESTextureLoader)))),E.endsWith(".dds")&&D(".dds",(async()=>await Promise.all([g.e(14),g.e(17),g.e(13),g.e(19),g.e(18),g.e(28)]).then(g.bind(g,14810)).then((E=>new E._DDSTextureLoader)))),E.endsWith(".basis")&&D(".basis",(async()=>await Promise.all([g.e(14),g.e(17),g.e(13),g.e(47)]).then(g.bind(g,14822)).then((E=>new E._BasisTextureLoader)))),E.endsWith(".env")&&D(".env",(async()=>await Promise.all([g.e(14),g.e(17),g.e(13),g.e(19),g.e(18),g.e(23),g.e(21),g.e(45),g.e(48)]).then(g.bind(g,14826)).then((E=>new E._ENVTextureLoader)))),E.endsWith(".hdr")&&D(".hdr",(async()=>await Promise.all([g.e(14),g.e(49)]).then(g.bind(g,14833)).then((E=>new E._HDRTextureLoader)))),(E.endsWith(".ktx")||E.endsWith(".ktx2"))&&(D(".ktx",(async()=>await g.e(30).then(g.bind(g,14838)).then((E=>new E._KTXTextureLoader)))),D(".ktx2",(async()=>await g.e(30).then(g.bind(g,14838)).then((E=>new E._KTXTextureLoader))))),E.endsWith(".tga")&&D(".tga",(async()=>await g.e(50).then(g.bind(g,14847)).then((E=>new E._TGATextureLoader)))),E.endsWith(".exr")&&D(".exr",(async()=>await g.e(16).then(g.bind(g,14855)).then((E=>new E._ExrTextureLoader)))));const N=L.get(E);return N?Promise.resolve(N(U)):null}},12273:(E,U,g)=>{g.d(U,{c:()=>S});var N,L=g(12174),D=g(12280);!function(E){E[E.Unknown=0]="Unknown",E[E.Url=1]="Url",E[E.Temp=2]="Temp",E[E.Raw=3]="Raw",E[E.Dynamic=4]="Dynamic",E[E.RenderTarget=5]="RenderTarget",E[E.MultiRenderTarget=6]="MultiRenderTarget",E[E.Cube=7]="Cube",E[E.CubeRaw=8]="CubeRaw",E[E.CubePrefiltered=9]="CubePrefiltered",E[E.Raw3D=10]="Raw3D",E[E.Raw2DArray=11]="Raw2DArray",E[E.DepthStencil=12]="DepthStencil",E[E.CubeRawRGBD=13]="CubeRawRGBD",E[E.Depth=14]="Depth"}(N||(N={}));class S extends D.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(E){this.generateMipMaps=E}get uniqueId(){return this._uniqueId}_setUniqueId(E){this._uniqueId=E}getEngine(){return this._engine}get source(){return this._source}constructor(E,U){let g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new L.b,this.onErrorObservable=new L.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=E,this._source=U,this._uniqueId=S._Counter++,g||(this._hardwareTexture=E._createHardwareTexture())}incrementReferences(){this._references++}updateSize(E,U){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,E,U,g),this.width=E,this.height=U,this.depth=g,this.baseWidth=E,this.baseHeight=U,this.baseDepth=g,this._size=E*U*g}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const E=this.onRebuildCallback(this),U=U=>{U._swapAndDie(this,!1),this.isReady=E.isReady};return void(E.isAsync?E.proxy.then(U):U(E.proxy))}let E;switch(this.source){case 2:case 12:case 14:break;case 1:return void(E=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(E=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:E=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),E._swapAndDie(this,!1),this.isReady=!0;break;case 10:E=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 11:E=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),E._swapAndDie(this,!1),this.isReady=!0;break;case 4:E=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),E._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(E=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:E=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),E._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return E=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(E=>{E&&E._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(E._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(E){var U;let g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(U=this._hardwareTexture)||void 0===U||U.setUsage(E._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),E._hardwareTexture=this._hardwareTexture,g&&(E._isRGBD=this._isRGBD),this._lodTextureHigh&&(E._lodTextureHigh&&E._lodTextureHigh.dispose(),E._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(E._lodTextureMid&&E._lodTextureMid.dispose(),E._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(E._lodTextureLow&&E._lodTextureLow.dispose(),E._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(E._irradianceTexture&&E._irradianceTexture.dispose(),E._irradianceTexture=this._irradianceTexture);const N=this._engine.getLoadedTexturesCache();let L=N.indexOf(this);-1!==L&&N.splice(L,1),L=N.indexOf(E),-1===L&&N.push(E)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}S._Counter=0},12280:(E,U,g)=>{g.d(U,{c:()=>N});class N{get wrapU(){return this._cachedWrapU}set wrapU(E){this._cachedWrapU=E}get wrapV(){return this._cachedWrapV}set wrapV(E){this._cachedWrapV=E}get wrapR(){return this._cachedWrapR}set wrapR(E){this._cachedWrapR=E}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(E){this._cachedAnisotropicFilteringLevel=E}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(E){this._comparisonFunction=E}get useMipMaps(){return this._useMipMaps}set useMipMaps(E){this._useMipMaps=E}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=E,this._cachedWrapV=U,this._cachedWrapR=g,this._cachedAnisotropicFilteringLevel=N,this.samplingMode=L,this._comparisonFunction=D,this}compareSampler(E){return this._cachedWrapU===E._cachedWrapU&&this._cachedWrapV===E._cachedWrapV&&this._cachedWrapR===E._cachedWrapR&&this._cachedAnisotropicFilteringLevel===E._cachedAnisotropicFilteringLevel&&this.samplingMode===E.samplingMode&&this._comparisonFunction===E._comparisonFunction&&this._useMipMaps===E._useMipMaps}}},12188:(E,U,g)=>{g.d(U,{b:()=>D});var N=g(12186);const L=(E,U,g)=>E?E.getClassName&&"Mesh"===E.getClassName()?null:!E.getClassName||"SubMesh"!==E.getClassName()&&"PhysicsBody"!==E.getClassName()?E.clone?E.clone():Array.isArray(E)?E.slice():g&&"object"===typeof E?{...E}:null:E.clone(U):null;class D{static DeepCopy(E,U,g,D){let S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const u=function(E){const U=[];do{const g=Object.getOwnPropertyNames(E);for(const E of g)-1===U.indexOf(E)&&U.push(E)}while(E=Object.getPrototypeOf(E));return U}(E);for(const C of u){if("_"===C[0]&&(!D||-1===D.indexOf(C)))continue;if(C.endsWith("Observable"))continue;if(g&&-1!==g.indexOf(C))continue;const u=E[C],B=typeof u;if("function"!==B)try{if("object"===B)if(u instanceof Uint8Array)U[C]=Uint8Array.from(u);else if(u instanceof Array){if(U[C]=[],u.length>0)if("object"==typeof u[0])for(let E=0;E<u.length;E++){const g=L(u[E],U,S);-1===U[C].indexOf(g)&&U[C].push(g)}else U[C]=u.slice(0)}else U[C]=L(u,U,S);else U[C]=u}catch(s){N.d.Warn(s.message)}}}}},12212:(E,U,g)=>{g.d(U,{b:()=>N,f:()=>L,h:()=>D});class N extends Error{}N._setPrototypeOf=Object.setPrototypeOf||((E,U)=>(E.__proto__=U,E));const L={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class D extends N{constructor(E,U,g){super(E),this.errorCode=U,this.innerError=g,this.name="RuntimeError",N._setPrototypeOf(this,D.prototype)}}},12210:(E,U,g)=>{g.d(U,{b:()=>r,c:()=>e,e:()=>T,h:()=>o,k:()=>G,j:()=>y,n:()=>Y,p:()=>t,r:()=>b,v:()=>x});var N=g(12202),L=g(12183),D=g(12174);class S{}S.FilesToLoad={};var u=g(12212),s=g(12221),C=g(12226),B=g(12205),P=g(12186),F=g(12234),f=g(12229),d=g(12243);const I=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class y extends u.h{constructor(E,U){super(E,u.f.LoadFileError),this.name="LoadFileError",u.b._setPrototypeOf(this,y.prototype),U instanceof N.e?this.request=U:this.file=U}}class h extends u.h{constructor(E,U){super(E,u.f.RequestFileError),this.request=U,this.name="RequestFileError",u.b._setPrototypeOf(this,h.prototype)}}class V extends u.h{constructor(E,U){super(E,u.f.ReadFileError),this.file=U,this.name="ReadFileError",u.b._setPrototypeOf(this,V.prototype)}}const e={DefaultRetryStrategy:class{static ExponentialBackoff(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(g,N,L)=>0!==N.status||L>=E||-1!==g.indexOf("file:")?-1:Math.pow(2,L)*U}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:E=>E,ScriptBaseUrl:"",ScriptPreprocessUrl:E=>E,CleanUrl:E=>E=E.replace(/#/gm,"%23")},x=(E,U)=>{if((!E||0!==E.indexOf("data:"))&&e.CorsBehavior)if("string"===typeof e.CorsBehavior||e.CorsBehavior instanceof String)U.crossOrigin=e.CorsBehavior;else{const g=e.CorsBehavior(E);g&&(U.crossOrigin=g)}},l={getRequiredSize:null},Y=function(E,U,g,L){let D,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",C=arguments.length>5?arguments[5]:void 0,P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:B.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===P||void 0===P||!P._features.forceBitmapOverHTMLImageElement))return g("LoadImage is only supported in web or BabylonNative environments."),null;let F=!1;E instanceof ArrayBuffer||ArrayBuffer.isView(E)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(D=URL.createObjectURL(new Blob([E],{type:u})),F=!0):D=`data:${u};base64,`+(0,s.i)(E):E instanceof Blob?(D=URL.createObjectURL(E),F=!0):(D=e.CleanUrl(E),D=e.PreprocessUrl(D));const f=U=>{if(g){const N=D||E.toString();g(`Error while trying to load image: ${0===N.indexOf("http")||N.length<=128?N:N.slice(0,128)+"..."}`,U)}};if(null!==P&&void 0!==P&&P._features.forceBitmapOverHTMLImageElement)return G(D,(N=>{P.createImageBitmap(new Blob([N],{type:u}),{premultiplyAlpha:"none",...C}).then((E=>{U(E),F&&URL.revokeObjectURL(D)})).catch((U=>{g&&g("Error while trying to load image: "+E,U)}))}),void 0,L||void 0,!0,((E,U)=>{f(U)})),null;const d=new Image;if(l.getRequiredSize){const U=l.getRequiredSize(E);U.width&&(d.width=U.width),U.height&&(d.height=U.height)}x(D,d);const I=[],y=()=>{for(const E of I)E.target.removeEventListener(E.name,E.handler);I.length=0};I.push({target:d,name:"load",handler:()=>{y(),U(d),F&&d.src&&URL.revokeObjectURL(d.src)}}),I.push({target:d,name:"error",handler:E=>{y(),f(E),F&&d.src&&URL.revokeObjectURL(d.src)}}),I.push({target:document,name:"securitypolicyviolation",handler:E=>{if(E.blockedURI!==d.src||"rg"===E.disposition)return;y();const U=new Error(`CSP violation of policy ${E.effectiveDirective} ${E.blockedURI}. Current policy is ${E.originalPolicy}`);B.b.UseFallbackTexture=!1,f(U),F&&d.src&&URL.revokeObjectURL(d.src),d.src=""}}),(()=>{for(const E of I)E.target.addEventListener(E.name,E.handler)})();const h="blob:"===D.substring(0,5),V="data:"===D.substring(0,5),Y=()=>{h||V||!N.e.IsCustomRequestAvailable?d.src=D:G(D,((E,U,g)=>{const N=new Blob([E],{type:!u&&g?g:u}),L=URL.createObjectURL(N);F=!0,d.src=L}),void 0,L||void 0,!0,((E,U)=>{f(U)}))},t=()=>{L&&L.loadImage(D,d)};if(!h&&!V&&L&&L.enableTexturesOffline)L.open(t,Y);else{if(-1!==D.indexOf("file:")){const E=decodeURIComponent(D.substring(5).toLowerCase());if(S.FilesToLoad[E]&&"undefined"!==typeof URL){try{let U;try{U=URL.createObjectURL(S.FilesToLoad[E])}catch(b){U=URL.createObjectURL(S.FilesToLoad[E])}d.src=U,F=!0}catch(T){d.src=""}return d}}Y()}return d},t=(E,U,g,N,L)=>{const S=new FileReader,u={onCompleteObservable:new D.b,abort:()=>S.abort()};return S.onloadend=()=>u.onCompleteObservable.notifyObservers(u),L&&(S.onerror=()=>{L(new V(`Unable to read ${E.name}`,E))}),S.onload=E=>{U(E.target.result)},g&&(S.onprogress=g),N?S.readAsArrayBuffer(E):S.readAsText(E),u},G=(E,U,g,N,L,s,C)=>{if(E.name)return t(E,U,g,L,s?E=>{s(void 0,E)}:void 0);const B=E;if(-1!==B.indexOf("file:")){let E=decodeURIComponent(B.substring(5).toLowerCase());0===E.indexOf("./")&&(E=E.substring(2));const N=S.FilesToLoad[E];if(N)return t(N,U,g,L,s?E=>s(void 0,new y(E.message,E.file)):void 0)}const{match:f,type:d}=c(B);if(f){const E={onCompleteObservable:new D.b,abort:()=>()=>{}};try{const E=L?r(B):j(B);U(E,void 0,d)}catch(u){s?s(void 0,u):P.d.Error(u.message||"Failed to parse the Data URL")}return F.c.SetImmediate((()=>{E.onCompleteObservable.notifyObservers(E)})),E}return b(B,((E,g)=>{U(E,null===g||void 0===g?void 0:g.responseURL,null===g||void 0===g?void 0:g.getResponseHeader("content-type"))}),g,N,L,s?E=>{s(E.request,new y(E.message,E.request))}:void 0,C)},b=(E,U,g,S,u,s,C)=>{E=e.CleanUrl(E),E=e.PreprocessUrl(E);const B=e.BaseUrl+E;let F=!1;const f={onCompleteObservable:new D.b,abort:()=>F=!0},d=()=>{let E,D=new N.e,S=null;const d=()=>{D&&(g&&D.removeEventListener("progress",g),E&&D.removeEventListener("readystatechange",E),D.removeEventListener("loadend",I))};let I=()=>{d(),f.onCompleteObservable.notifyObservers(f),f.onCompleteObservable.clear(),g=void 0,E=null,I=null,s=void 0,C=void 0,U=void 0};f.abort=()=>{F=!0,I&&I(),D&&D.readyState!==(XMLHttpRequest.DONE||4)&&D.abort(),null!==S&&(clearTimeout(S),S=null),D=null};const y=E=>{const U=E.message||"Unknown error";s&&D?s(new h(U,D)):P.d.Error(U)},V=P=>{if(D){if(D.open("GET",B),C)try{C(D)}catch(f){return void y(f)}u&&(D.responseType="arraybuffer"),g&&D.addEventListener("progress",g),I&&D.addEventListener("loadend",I),E=()=>{if(!F&&D&&D.readyState===(XMLHttpRequest.DONE||4)){if(E&&D.removeEventListener("readystatechange",E),D.status>=200&&D.status<300||0===D.status&&(!(0,L.f)()||v())){const E=u?D.response:D.responseText;if(null!==E){try{U&&U(E,D)}catch(f){y(f)}return}}const g=e.DefaultRetryStrategy;if(g){const E=g(B,D,P);if(-1!==E)return d(),D=new N.e,void(S=setTimeout((()=>V(P+1)),E))}const C=new h("Error status: "+D.status+" "+D.statusText+" - Unable to load "+B,D);s&&s(C)}},D.addEventListener("readystatechange",E),D.send()}};V(0)};if(S&&S.enableSceneOffline){const N=E=>{E&&E.status>400?s&&s(E):d()},L=()=>{S&&S.loadFile(e.BaseUrl+E,(E=>{!F&&U&&U(E),f.onCompleteObservable.notifyObservers(f)}),g?E=>{!F&&g&&g(E)}:void 0,N,u)};S.open(L,N)}else d();return f},T=E=>{const{match:U,type:g}=c(E);if(U)return g||void 0;const N=E.lastIndexOf(".");switch(E.substring(N+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Zg":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},v=()=>"undefined"!==typeof location&&"file:"===location.protocol,o=E=>I.test(E),c=E=>{const U=I.exec(E);if(null===U||0===U.length)return{match:!1,type:""};return{match:!0,type:U[0].replace("data:","").replace("base64,","")}};function r(E){return(0,s.d)(E.split(",")[1])}const j=E=>(0,s.e)(E.split(",")[1]);let Z;d.b._FileToolsLoadImage=Y,f.b.loadFile=G,C.k.loadFile=G;((E,U,g,N,L,D,S,u,s,C)=>{Z={DecodeBase64UrlToBinary:E,DecodeBase64UrlToString:U,DefaultRetryStrategy:g.DefaultRetryStrategy,BaseUrl:g.BaseUrl,CorsBehavior:g.CorsBehavior,PreprocessUrl:g.PreprocessUrl,IsBase64DataUrl:N,IsFileURL:L,LoadFile:D,LoadImage:S,ReadFile:u,RequestFile:s,SetCorsBehavior:C},Object.defineProperty(Z,"DefaultRetryStrategy",{get:function(){return g.DefaultRetryStrategy},set:function(E){g.DefaultRetryStrategy=E}}),Object.defineProperty(Z,"BaseUrl",{get:function(){return g.BaseUrl},set:function(E){g.BaseUrl=E}}),Object.defineProperty(Z,"PreprocessUrl",{get:function(){return g.PreprocessUrl},set:function(E){g.PreprocessUrl=E}}),Object.defineProperty(Z,"CorsBehavior",{get:function(){return g.CorsBehavior},set:function(E){g.CorsBehavior=E}})})(r,j,e,o,v,G,Y,t,b,x)},12296:(E,U,g)=>{function N(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(E=>{const U=16*Math.random()|0;return("x"===E?U:3&U|8).toString(16)}))}g.d(U,{e:()=>N})},12286:(E,U,g)=>{g.d(U,{d:()=>D});var N=g(12186),L=g(12292);class D{static Instantiate(E){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[E])return this.RegisteredExternalClasses[E];const U=(0,L.d)(E);if(U)return U;N.d.Warn(E+" not found, you may have missed an import.");const g=E.split(".");let D=window||this;for(let N=0,L=g.length;N<L;N++)D=D[g[N]];return"function"!==typeof D?null:D}}D.RegisteredExternalClasses={}},12197:(E,U,g)=>{g.d(U,{b:()=>L});var N=g(12183);class L{static get Now(){return(0,N.f)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12221:(E,U,g)=>{g.d(U,{d:()=>S,e:()=>D,h:()=>N,i:()=>L});const N=E=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(E);let U="";for(let g=0;g<E.byteLength;g++)U+=String.fromCharCode(E[g]);return U},L=E=>{const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let g,N,L,D,S,u,s,C="",B=0;const P=ArrayBuffer.isView(E)?new Uint8Array(E.buffer,E.byteOffset,E.byteLength):new Uint8Array(E);for(;B<P.length;)g=P[B++],N=B<P.length?P[B++]:Number.NaN,L=B<P.length?P[B++]:Number.NaN,D=g>>2,S=(3&g)<<4|N>>4,u=(15&N)<<2|L>>6,s=63&L,isNaN(N)?u=s=64:isNaN(L)&&(s=64),C+=U.charAt(D)+U.charAt(S)+U.charAt(u)+U.charAt(s);return C},D=E=>atob(E),S=E=>{const U=D(E),g=U.length,N=new Uint8Array(new ArrayBuffer(g));for(let L=0;L<g;L++)N[L]=U.charCodeAt(L);return N.buffer}},12300:(E,U,g)=>{function N(E){let U=1;do{U*=2}while(U<E);return U===E}function L(E,U,g){return E*(1-g)+U*g}function D(E){const U=S(E),g=u(E);return U-E>E-g?g:U}function S(E){return E--,E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,E|=E>>16,++E}function u(E){return E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,(E|=E>>16)-(E>>1)}function s(E,U){let g;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:g=u(E);break;case 2:g=D(E);break;default:g=S(E)}return Math.min(g,U)}g.d(U,{d:()=>u,f:()=>s,h:()=>N,k:()=>L,n:()=>D})},12165:(E,U,g)=>{g.r(U),g.d(U,{AsyncLoop:()=>V,Tools:()=>y,className:()=>h});var N=g(12174),L=g(12183),D=g(12186),S=g(12188),u=g(12197),s=g(12199),C=g(12202),B=g(12205),P=g(12210),F=g(12234),f=g(12286),d=g(12296),I=g(12300);class y{static get BaseUrl(){return P.c.BaseUrl}static set BaseUrl(E){P.c.BaseUrl=E}static get CleanUrl(){return P.c.CleanUrl}static set CleanUrl(E){P.c.CleanUrl=E}static IsAbsoluteUrl(E){return 0===E.indexOf("//")||-1!==E.indexOf("://")&&(-1!==E.indexOf(".")&&(-1!==E.indexOf("/")&&(!(E.indexOf(":")>E.indexOf("/"))&&(E.indexOf("://")<E.indexOf(".")||(0===E.indexOf("data:")||0===E.indexOf("blob:"))))))}static set ScriptBaseUrl(E){P.c.ScriptBaseUrl=E}static get ScriptBaseUrl(){return P.c.ScriptBaseUrl}static set CDNBaseUrl(E){y.ScriptBaseUrl=E,y.AssetBaseUrl=E}static set ScriptPreprocessUrl(E){P.c.ScriptPreprocessUrl=E}static get ScriptPreprocessUrl(){return P.c.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return P.c.DefaultRetryStrategy}static set DefaultRetryStrategy(E){P.c.DefaultRetryStrategy=E}static get CorsBehavior(){return P.c.CorsBehavior}static set CorsBehavior(E){P.c.CorsBehavior=E}static get UseFallbackTexture(){return B.b.UseFallbackTexture}static set UseFallbackTexture(E){B.b.UseFallbackTexture=E}static get RegisteredExternalClasses(){return f.d.RegisteredExternalClasses}static set RegisteredExternalClasses(E){f.d.RegisteredExternalClasses=E}static get fallbackTexture(){return B.b.FallbackTexture}static set fallbackTexture(E){B.b.FallbackTexture=E}static FetchToRef(E,U,g,N,L,D){const S=4*((Math.abs(E)*g%g|0)+(Math.abs(U)*N%N|0)*g);D.r=L[S]/255,D.g=L[S+1]/255,D.b=L[S+2]/255,D.a=L[S+3]/255}static Mix(E,U,g){return 0}static Instantiate(E){return f.d.Instantiate(E)}static SetImmediate(E){F.c.SetImmediate(E)}static IsExponentOfTwo(E){return!0}static FloatRound(E){return Math.fround(E)}static GetFilename(E){const U=E.lastIndexOf("/");return U<0?E:E.substring(U+1)}static GetFolderPath(E){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const g=E.lastIndexOf("/");return g<0?U?E:"":E.substring(0,g+1)}static ToDegrees(E){return 180*E/Math.PI}static ToRadians(E){return E*Math.PI/180}static SmoothAngleChange(E,U){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const N=this.ToRadians(E),L=this.ToRadians(U);return this.ToDegrees(Math.atan2((1-g)*Math.sin(L)+g*Math.sin(N),(1-g)*Math.cos(L)+g*Math.cos(N)))}static MakeArray(E,U){return!0===U||void 0!==E&&null!=E?Array.isArray(E)?E:[E]:null}static GetPointerPrefix(E){return(0,L.f)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(E,U){(0,P.v)(E,U)}static SetReferrerPolicyBehavior(E,U){U.referrerPolicy=E}static get PreprocessUrl(){return P.c.PreprocessUrl}static set PreprocessUrl(E){P.c.PreprocessUrl=E}static LoadImage(E,U,g,N,L,D){return(0,P.n)(E,U,g,N,L,D)}static LoadFile(E,U,g,N,L,D){return(0,P.k)(E,U,g,N,L,D)}static async LoadFileAsync(E){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((g,N)=>{(0,P.k)(E,(E=>{g(E)}),void 0,void 0,U,((E,U)=>{N(U)}))}))}static GetAssetUrl(E){if(!E)return"";if(y.AssetBaseUrl&&E.startsWith(y._DefaultAssetsUrl)){const U="/"===y.AssetBaseUrl[y.AssetBaseUrl.length-1]?y.AssetBaseUrl.substring(0,y.AssetBaseUrl.length-1):y.AssetBaseUrl;return E.replace(y._DefaultAssetsUrl,U)}return E}static GetBabylonScriptURL(E,U){if(!E)return"";if(y.ScriptBaseUrl&&E.startsWith(y._DefaultCdnUrl)){const U="/"===y.ScriptBaseUrl[y.ScriptBaseUrl.length-1]?y.ScriptBaseUrl.substring(0,y.ScriptBaseUrl.length-1):y.ScriptBaseUrl;E=E.replace(y._DefaultCdnUrl,U)}return E=y.ScriptPreprocessUrl(E),U&&(E=y.GetAbsoluteUrl(E)),E}static LoadBabylonScript(E,U,g,N){E=y.GetBabylonScriptURL(E),y.LoadScript(E,U,g)}static async LoadBabylonScriptAsync(E){return E=y.GetBabylonScriptURL(E),await y.LoadScriptAsync(E)}static LoadScript(E,U,g,N){let D=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(E),U&&U()}catch(s){null===g||void 0===g||g(`Unable to load script '${E}' in worker`,s)}return}if(!(0,L.f)())return void(null===g||void 0===g||g(`Cannot load script '${E}' outside of a window or a worker`));const S=document.getElementsByTagName("head")[0],u=document.createElement("script");D?(u.setAttribute("type","module"),u.innerText=E):(u.setAttribute("type","text/javascript"),u.setAttribute("src",E)),N&&(u.id=N),u.onload=()=>{U&&U()},u.onerror=U=>{g&&g(`Unable to load script '${E}'`,U)},S.appendChild(u)}static async LoadScriptAsync(E,U){return await new Promise(((g,N)=>{this.LoadScript(E,(()=>{g()}),((E,U)=>{N(U||new Error(E))}),U)}))}static ReadFileAsDataURL(E,U,g){const L=new FileReader,D={onCompleteObservable:new N.b,abort:()=>L.abort()};return L.onloadend=()=>{D.onCompleteObservable.notifyObservers(D)},L.onload=E=>{U(E.target.result)},L.onprogress=g,L.readAsDataURL(E),D}static ReadFile(E,U,g,N,L){return(0,P.p)(E,U,g,N,L)}static FileAsURL(E){const U=new Blob([E]);return window.URL.createObjectURL(U)}static Format(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return E.toFixed(U)}static DeepCopy(E,U,g,N){S.b.DeepCopy(E,U,g,N)}static IsEmpty(E){for(const U in E)if(Object.prototype.hasOwnProperty.call(E,U))return!1;return!0}static RegisterTopRootEvents(E,U){for(let N=0;N<U.length;N++){const L=U[N];E.addEventListener(L.name,L.handler,!1);try{window.parent&&window.parent.addEventListener(L.name,L.handler,!1)}catch(g){}}}static UnregisterTopRootEvents(E,U){for(let N=0;N<U.length;N++){const L=U[N];E.removeEventListener(L.name,L.handler);try{E.parent&&E.parent.removeEventListener(L.name,L.handler)}catch(g){}}}static async DumpFramebuffer(E,U,g,N){throw(0,s.e)("DumpTools")}static DumpData(E,U,g,N){throw(0,s.e)("DumpTools")}static async DumpDataAsync(E,U,g){throw(0,s.e)("DumpTools")}static _IsOffScreenCanvas(E){return void 0!==E.convertToBlob}static ToBlob(E,U){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",N=arguments.length>3?arguments[3]:void 0;y._IsOffScreenCanvas(E)||E.toBlob||(E.toBlob=function(E,U,g){setTimeout((()=>{const N=atob(this.toDataURL(U,g).split(",")[1]),L=N.length,D=new Uint8Array(L);for(let E=0;E<L;E++)D[E]=N.charCodeAt(E);E(new Blob([D]))}))}),y._IsOffScreenCanvas(E)?E.convertToBlob({type:g,quality:N}).then((E=>U(E))):E.toBlob((function(E){U(E)}),g,N)}static DownloadBlob(E,U){if("download"in document.createElement("a")){if(!U){const E=new Date;U="screenshot_"+((E.getFullYear()+"-"+(E.getMonth()+1)).slice(2)+"-"+E.getDate()+"_"+E.getHours()+"-"+("0"+E.getMinutes()).slice(-2))+".png"}y.Download(E,U)}else if(E&&"undefined"!==typeof URL){const U=URL.createObjectURL(E),g=window.open("");if(!g)return;const N=g.document.createElement("img");N.onload=function(){URL.revokeObjectURL(U)},N.src=U,g.document.body.appendChild(N)}}static EncodeScreenshotCanvasData(E,U){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",N=arguments.length>3?arguments[3]:void 0,L=arguments.length>4?arguments[4]:void 0;if("string"!==typeof N&&U){if(U){if(y._IsOffScreenCanvas(E))return void E.convertToBlob({type:g,quality:L}).then((E=>{const g=new FileReader;g.readAsDataURL(E),g.onloadend=()=>{const E=g.result;U(E)}}));const N=E.toDataURL(g,L);U(N)}}else this.ToBlob(E,(function(E){E&&y.DownloadBlob(E,N),U&&U("")}),g,L)}static Download(E,U){if("undefined"===typeof URL)return;const g=window.URL.createObjectURL(E),N=document.createElement("a");document.body.appendChild(N),N.style.display="none",N.href=g,N.download=U,N.addEventListener("click",(()=>{N.parentElement&&N.parentElement.removeChild(N)})),N.click(),window.URL.revokeObjectURL(g)}static BackCompatCameraNoPreventDefault(E){return"boolean"===typeof E[0]?E[0]:"boolean"===typeof E[1]&&E[1]}static CreateScreenshot(E,U,g,N){throw(0,s.e)("ScreenshotTools")}static async CreateScreenshotAsync(E,U,g){throw(0,s.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(E,U,g,N){throw(0,s.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(E,U,g){throw(0,s.e)("ScreenshotTools")}static RandomId(){return(0,d.e)()}static IsBase64(E){return(0,P.h)(E)}static DecodeBase64(E){return(0,P.b)(E)}static get errorsCount(){return D.d.errorsCount}static Log(E){D.d.Log(E)}static Warn(E){D.d.Warn(E)}static Error(E){D.d.Error(E)}static get LogCache(){return D.d.LogCache}static ClearLogCache(){D.d.ClearLogCache()}static set LogLevels(E){D.d.LogLevels=E}static set PerformanceLogLevel(E){return(E&y.PerformanceUserMarkLogLevel)===y.PerformanceUserMarkLogLevel?(y.StartPerformanceCounter=y._StartUserMark,void(y.EndPerformanceCounter=y._EndUserMark)):(E&y.PerformanceConsoleLogLevel)===y.PerformanceConsoleLogLevel?(y.StartPerformanceCounter=y._StartPerformanceConsole,void(y.EndPerformanceCounter=y._EndPerformanceConsole)):(y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,void(y.EndPerformanceCounter=y._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(E,U){}static _EndPerformanceCounterDisabled(E,U){}static _StartUserMark(E){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!y._Performance){if(!(0,L.f)())return;y._Performance=window.performance}U&&y._Performance.mark&&y._Performance.mark(E+"-Begin")}static _EndUserMark(E){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&y._Performance.mark&&(y._Performance.mark(E+"-End"),y._Performance.measure(E,E+"-Begin",E+"-End"))}static _StartPerformanceConsole(E){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(y._StartUserMark(E,U),console.time&&console.time(E))}static _EndPerformanceConsole(E){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(y._EndUserMark(E,U),console.timeEnd(E))}static get Now(){return u.b.Now}static GetClassName(E){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=null;if(!U&&E.getClassName)g=E.getClassName();else{if(E instanceof Object){g=(U?E:Object.getPrototypeOf(E)).constructor.__bjsclassName__}g||(g=typeof E)}return g}static First(E,U){for(const g of E)if(U(g))return g;return null}static getFullClassName(E){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=null,N=null;if(!U&&E.getClassName)g=E.getClassName();else{if(E instanceof Object){const L=U?E:Object.getPrototypeOf(E);g=L.constructor.__bjsclassName__,N=L.constructor.__bjsmoduleName__}g||(g=typeof E)}return g?(null!=N?N+".":"")+g:null}static async DelayAsync(E){await new Promise((U=>{setTimeout((()=>{U()}),E)}))}static IsSafari(){return!!(0,L.d)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function h(E,U){return g=>{g.__bjsclassName__=E,g.__bjsmoduleName__=null!=U?U:null}}y.AssetBaseUrl="",y.UseCustomRequestHeaders=!1,y.CustomRequestHeaders=C.e.CustomRequestHeaders,y.GetDOMTextContent=L.b,y._DefaultCdnUrl="https://cdn.babylonjs.com",y._DefaultAssetsUrl="https://assets.babylonjs.com/core",y.GetAbsoluteUrl="object"===typeof document?E=>{const U=document.createElement("a");return U.href=E,U.href}:"function"===typeof URL&&"object"===typeof location?E=>new URL(E,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},y.NoneLogLevel=D.d.NoneLogLevel,y.MessageLogLevel=D.d.MessageLogLevel,y.WarningLogLevel=D.d.WarningLogLevel,y.ErrorLogLevel=D.d.ErrorLogLevel,y.AllLogLevel=D.d.AllLogLevel,y.IsWindowObjectExist=L.f,y.PerformanceNoneLogLevel=0,y.PerformanceUserMarkLogLevel=1,y.PerformanceConsoleLogLevel=2,y.StartPerformanceCounter=y._StartPerformanceCounterDisabled,y.EndPerformanceCounter=y._EndPerformanceCounterDisabled;class V{constructor(E,U,g){let N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=E,this.index=N-1,this._done=!1,this._fn=U,this._successCallback=g}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(E,U,g){const N=new V(E,U,g,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return N.executeNext(),N}static SyncAsyncForLoop(E,U,g,N,L){let D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return V.Run(Math.ceil(E/U),(N=>{L&&L()?N.breakLoop():setTimeout((()=>{for(let D=0;D<U;++D){const S=N.index*U+D;if(S>=E)break;if(g(S),L&&L()){N.breakLoop();break}}N.executeNext()}),D)}),N)}}y.Mix=I.k,y.IsExponentOfTwo=I.h,B.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12292:(E,U,g)=>{g.d(U,{d:()=>D,f:()=>L});const N={};function L(E,U){N[E]=U}function D(E){return N[E]}},12202:(E,U,g)=>{g.d(U,{e:()=>N});class N{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(N.CustomRequestHeaders).length>0||N.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const E in N.CustomRequestHeaders){const U=N.CustomRequestHeaders[E];U&&this._xhr.setRequestHeader(E,U)}}_shouldSkipRequestModifications(E){return N.SkipRequestModificationForBabylonCDN&&(E.includes("preview.babylonjs.com")||E.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(E){this._xhr.onprogress=E}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(E){this._xhr.responseType=E}get timeout(){return this._xhr.timeout}set timeout(E){this._xhr.timeout=E}addEventListener(E,U,g){this._xhr.addEventListener(E,U,g)}removeEventListener(E,U,g){this._xhr.removeEventListener(E,U,g)}abort(){this._xhr.abort()}send(E){N.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(E)}open(E,U){for(const g of N.CustomRequestModifiers){if(this._shouldSkipRequestModifications(U))return;U=g(this._xhr,U)||U}U=(U=U.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=U,this._xhr.open(E,U,!0)}setRequestHeader(E,U){this._xhr.setRequestHeader(E,U)}getResponseHeader(E){return this._xhr.getResponseHeader(E)}}N.CustomRequestHeaders={},N.CustomRequestModifiers=new Array,N.SkipRequestModificationForBabylonCDN=!0}}]);