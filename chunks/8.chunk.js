"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[8],{11006:(q,S,b)=>{b.d(S,{c:()=>W});var z=b(10975),C=b(10943),v=b(11009),U=b(11029),g=b(10957);class r{constructor(){let q=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,q&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(q){this._zOffset!==q&&(this._zOffset=q,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(q){this._zOffsetUnits!==q&&(this._zOffsetUnits=q,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(q){this._cullFace!==q&&(this._cullFace=q,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(q){this._cull!==q&&(this._cull=q,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(q){this._depthFunc!==q&&(this._depthFunc=q,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(q){this._depthMask!==q&&(this._depthMask=q,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(q){this._depthTest!==q&&(this._depthTest=q,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(q){this._frontFace!==q&&(this._frontFace=q,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(q){this.isDirty&&(this._isCullDirty&&(this.cull?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(q.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(q.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(q.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(q.enable(q.POLYGON_OFFSET_FILL),q.polygonOffset(this.zOffset,this.zOffsetUnits)):q.disable(q.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(q.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class I{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(q){this._func!==q&&(this._func=q,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(q){this._funcRef!==q&&(this._funcRef=q,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(q){this._funcMask!==q&&(this._funcMask=q,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(q){this._opStencilFail!==q&&(this._opStencilFail=q,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(q){this._opDepthFail!==q&&(this._opDepthFail=q,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(q){this._opStencilDepthPass!==q&&(this._opStencilDepthPass=q,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(q){this._mask!==q&&(this._mask=q,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(q){this._enabled!==q&&(this._enabled=q,this._isStencilTestDirty=!0)}constructor(){let q=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,q&&this.reset()}reset(){var q;this.stencilMaterial=void 0,null===(q=this.stencilGlobal)||void 0===q||q.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(q){var S;if(!q)return;const b=!this.useStencilGlobalOnly&&!(null===(S=this.stencilMaterial)||void 0===S||!S.enabled);this.enabled=b?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=b?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=b?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=b?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=b?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=b?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=b?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=b?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(q.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(q.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(q.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class V{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=V.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=V.KEEP,this.opDepthFail=V.KEEP,this.opStencilDepthPass=V.REPLACE}get stencilFunc(){return this.func}set stencilFunc(q){this.func=q}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(q){this.funcRef=q}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(q){this.funcMask=q}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(q){this.opStencilFail=q}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(q){this.opDepthFail=q}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(q){this.opStencilDepthPass=q}get stencilMask(){return this.mask}set stencilMask(q){this.mask=q}get stencilTest(){return this.enabled}set stencilTest(q){this.enabled=q}}V.ALWAYS=519,V.KEEP=7680,V.REPLACE=7681;class l{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(q){this._alphaBlend!==q&&(this._alphaBlend=q,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(q,S,b,z){this._blendConstants[0]===q&&this._blendConstants[1]===S&&this._blendConstants[2]===b&&this._blendConstants[3]===z||(this._blendConstants[0]=q,this._blendConstants[1]=S,this._blendConstants[2]=b,this._blendConstants[3]=z,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(q,S,b,z){this._blendFunctionParameters[0]===q&&this._blendFunctionParameters[1]===S&&this._blendFunctionParameters[2]===b&&this._blendFunctionParameters[3]===z||(this._blendFunctionParameters[0]=q,this._blendFunctionParameters[1]=S,this._blendFunctionParameters[2]=b,this._blendFunctionParameters[3]=z,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(q,S){this._blendEquationParameters[0]===q&&this._blendEquationParameters[1]===S||(this._blendEquationParameters[0]=q,this._blendEquationParameters[1]=S,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(q){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?q.enable(q.BLEND):q.disable(q.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(q.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(q.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(q.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var y=b(10964),R=b(11033),G=b(10934),Z=b(10929),H=b(10997),Q=b(11045);function k(q,S){if((0,G.k)()){const{requestAnimationFrame:b}=S||window;if("function"===typeof b)return b(q)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(q);return setTimeout(q,16)}class W{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(q){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(q){q!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=q,this._depthCullingState.depthFunc=q?518:515)}setColorWrite(q){q!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=q)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(q){if(q)return this.isNDCHalfZRange?q.IS_NDC_HALF_ZRANGE="":delete q.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?q.USE_REVERSE_DEPTHBUFFER="":delete q.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?q.USE_EXACT_SRGB_CONVERSIONS="":delete q.USE_EXACT_SRGB_CONVERSIONS);{let q="";return this.isNDCHalfZRange&&(q+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(q&&(q+="\n"),q+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(q&&(q+="\n"),q+="#define USE_EXACT_SRGB_CONVERSIONS"),q}}_rebuildInternalTextures(){const q=this._internalTexturesCache.slice();for(const S of q)S._rebuild()}_rebuildRenderTargetWrappers(){const q=this._renderTargetWrapperCache.slice();for(const S of q)S._rebuild()}_rebuildEffects(){for(const q in this._compiledEffects){const S=this._compiledEffects[q];S._pipelineContext=null,S._prepareEffect()}v.Effect.ResetCache()}_rebuildGraphicsResources(){var q;this.wipeCaches(!0),this._rebuildEffects(),null===(q=this._rebuildComputeEffects)||void 0===q||q.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){C.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(q){setTimeout((()=>{this._clearEmptyResources();const S=this._depthCullingState.depthTest,b=this._depthCullingState.depthFunc,z=this._depthCullingState.depthMask,C=this._stencilState.stencilTest;q(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=S,this._depthCullingState.depthFunc=b,this._depthCullingState.depthMask=z,this._stencilState.stencilTest=C,this._flagContextRestored()}),0)}get V(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(q){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(q){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const q=new Uint8Array(4),S=[q,q,q,q,q,q];this._emptyCubeTexture=this.createRawCubeTexture(S,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(q){if(!q)return this._activeRenderLoops.length=0,void this._cancelFrame();const S=this._activeRenderLoops.indexOf(q);S>=0&&(this._activeRenderLoops.splice(S,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const q=this._frameHandler;if(this._frameHandler=0,(0,G.k)()){const{cancelAnimationFrame:S}=this.getHostWindow()||window;if("function"===typeof S)return S(q)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(q);return clearTimeout(q)}}Cb(){this.onBeginFrameObservable.notifyObservers(this)}Ub(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(q){this._maxFPS=q,void 0!==q&&(this._minFrameTime=q<=0?Number.MAX_VALUE:1e3/q)}_isOverFrameTime(q){if(!q||void 0===this._maxFPS)return!1;const S=q-this._lastFrameTime;return this._lastFrameTime=q,this._renderAccumulator+=S,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(q){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(q)){let q=!0;(this.V||!this.renderEvenInBackground&&this._windowIsBackground)&&(q=!1),q&&(this.Cb(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Ub())}}_renderLoop(q){this._processFrame(q),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let q=0;q<this._activeRenderLoops.length;q++){(0,this._activeRenderLoops[q])()}}_renderViews(){return!1}_queueNewFrame(q,S){return k(q,S)}runRenderLoop(q){-1===this._activeRenderLoops.indexOf(q)&&(this._activeRenderLoops.push(q),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(q){this._depthCullingState.depthTest=q}setZOffset(q){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-q:q}getZOffset(){const q=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-q:q}setZOffsetUnits(q){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-q:q}getZOffsetUnits(){const q=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-q:q}getHostWindow(){return(0,G.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(q){this._compatibilityMode=!0}_rebuildTextures(){for(const q of this.scenes)q._rebuildTextures();for(const q of this._virtualScenes)q._rebuildTextures()}_releaseRenderTargetWrapper(q){const S=this._renderTargetWrapperCache.indexOf(q);-1!==S&&this._renderTargetWrapperCache.splice(S,1)}get currentViewport(){return this._cachedViewport}setViewport(q,S,b){const z=S||this.getRenderWidth(),C=b||this.getRenderHeight(),v=q.x||0,U=q.y||0;this._cachedViewport=q,this._viewport(v*z,U*C,z*q.width,C*q.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(q){return new Path2D(q)}get description(){let q=this.name+this.version;return this._caps.parallelShaderCompile&&(q+=" - Parallel shader compilation"),q}_createTextureBase(q,S,b,v){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7?arguments[7]:void 0,V=arguments.length>8?arguments[8]:void 0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,G=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Z=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,H=arguments.length>13?arguments[13]:void 0,k=arguments.length>14?arguments[14]:void 0,N=arguments.length>15?arguments[15]:void 0;const u="data:"===(q=q||"").substring(0,5),X="blob:"===q.substring(0,5),T=u&&-1!==q.indexOf(";base64,"),B=y||new R.d(this,1);B!==y&&(B.label=q.substring(0,60));const t=q;!this._transformTextureUrl||T||y||l||(q=this._transformTextureUrl(q)),t!==q&&(B._originalUrl=t);const f=q.lastIndexOf(".");let m=Z||(f>-1?q.substring(f).toLowerCase():"");m.indexOf("?")>-1&&(m=m.split("?")[0]);const E=(0,Q.d)(m,H);v&&v.addPendingData(B),B.url=q,B.generateMipMaps=!S,B.samplingMode=U,B.invertY=b,B._useSRGBBuffer=this._getUseSRGBBuffer(!!N,S),this._doNotHandleContextLost||(B._buffer=l);let e=null;g&&!y&&(e=B.onLoadedObservable.add(g)),y||this._internalTexturesCache.push(B);const i=(b,y)=>{v&&v.removePendingData(B),q===t?(e&&B.onLoadedObservable.remove(e),z.b.UseFallbackTexture&&q!==z.b.FallbackTexture&&this._createTextureBase(z.b.FallbackTexture,S,B.invertY,v,U,null,r,I,V,l,B),b=(b||"Unknown error")+(z.b.UseFallbackTexture?" - Fallback texture was used":""),B.onErrorObservable.notifyObservers({message:b,exception:y}),r&&r(b,y)):(C.b.Warn(`Failed to load ${q}, falling back to ${t}`),this._createTextureBase(t,S,B.invertY,v,U,g,r,I,V,l,B,G,Z,H,k,N))};if(E){const S=async q=>{(await E).loadData(q,B,((q,S,b,z,C,g)=>{g?i("TextureLoader failed to load data"):I(B,m,v,{width:q,height:S},B.invertY,!b,z,(()=>(C(),!1)),U)}),k)};l?l instanceof ArrayBuffer?S(new Uint8Array(l)):ArrayBuffer.isView(l)?S(l):r&&r("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(q,(q=>{S(new Uint8Array(q))}),void 0,v?v.offlineProvider:void 0,!0,((q,S)=>{i("Unable to load "+(q&&q.responseURL,S))}))}else{const b=q=>{X&&!this._doNotHandleContextLost&&(B._buffer=q),I(B,m,v,q,B.invertY,S,!1,V,U)};!u||T?l&&("string"===typeof l.decoding||l.close)?b(l):W._FileToolsLoadImage(q||"",b,i,v?v.offlineProvider:null,H,B.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof l||l instanceof ArrayBuffer||ArrayBuffer.isView(l)||l instanceof Blob?W._FileToolsLoadImage(l,b,i,v?v.offlineProvider:null,H,B.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):l&&b(l)}return B}_rebuildBuffers(){for(const q of this._uniformBuffers)q._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,G.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const q in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,q)&&(this._boundTexturesCache[q]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(q){this._name=q}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(q){this._hardwareScalingLevel=q,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(q){this._doNotHandleContextLost=q}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(q,S,b){var C,v;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new r,this._stencilStateComposer=new I,this._stencilState=new V,this._alphaState=new l,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new Z.d,this.onCanvasFocusObservable=new Z.d,this.onNewSceneAddedObservable=new Z.d,this.onResizeObservable=new Z.d,this.onCanvasPointerOutObservable=new Z.d,this.onEffectErrorObservable=new Z.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new Z.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=q=>this._renderLoop(q),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new Z.d,this.onAfterShaderCompilationObservable=new Z.d,this.onBeginFrameObservable=new Z.d,this.onEndFrameObservable=new Z.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new Z.d,this.onContextRestoredObservable=new Z.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.gb=new Z.d,this.onReleaseEffectsObservable=new Z.d,z.b.Instances.push(this),this.startTime=g.e.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,U.c.SetMatrixPrecision(!!S.useHighPrecisionMatrix),(0,G.h)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=b??!1,S.antialias=q??S.antialias,S.deterministicLockstep=S.deterministicLockstep??!1,S.lockstepMaxSteps=S.lockstepMaxSteps??4,S.timeStep=S.timeStep??1/60,S.stencil=S.stencil??!0,this._audioContext=(null===(C=S.audioEngineOptions)||void 0===C?void 0:C.audioContext)??null,this._audioDestination=(null===(v=S.audioEngineOptions)||void 0===v?void 0:v.audioDestination)??null,this.premultipliedAlpha=S.premultipliedAlpha??!0,this._doNotHandleContextLost=!!S.doNotHandleContextLost,this._isStencilEnable=!!S.stencil,this.useExactSrgbConversions=S.useExactSrgbConversions??!1;const y=(0,G.k)()&&window.devicePixelRatio||1,R=S.limitDeviceRatio||y;b=b||S.adaptToDeviceRatio||!1,this._hardwareScalingLevel=b?1/Math.min(R,y):1,this._lastDevicePixelRatio=y,this._creationOptions=S}resize(){let q,S,b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const q=(0,G.k)()&&window.devicePixelRatio||1,S=this._lastDevicePixelRatio/q;this._lastDevicePixelRatio=q,this._hardwareScalingLevel*=S}if((0,G.k)()&&(0,G.e)())if(this._renderingCanvas){var z,C;const b=null===(z=(C=this._renderingCanvas).getBoundingClientRect)||void 0===z?void 0:z.call(C);q=this._renderingCanvas.clientWidth||(null===b||void 0===b?void 0:b.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,S=this._renderingCanvas.clientHeight||(null===b||void 0===b?void 0:b.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else q=window.innerWidth,S=window.innerHeight;else q=this._renderingCanvas?this._renderingCanvas.width:100,S=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(q/this._hardwareScalingLevel,S/this._hardwareScalingLevel,b)}setSize(q,S){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(q|=0,S|=0,!b&&this._renderingCanvas.width===q&&this._renderingCanvas.height===S)return!1;if(this._renderingCanvas.width=q,this._renderingCanvas.height=S,this.scenes){for(let q=0;q<this.scenes.length;q++){const S=this.scenes[q];for(let q=0;q<S.cameras.length;q++){S.cameras[q]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(q,S,b,z,C,v,U,g,r,I,V){throw(0,y.c)("engine.rawTexture")}createRawCubeTexture(q,S,b,z,C,v,U,g){throw(0,y.c)("engine.rawTexture")}createRawTexture3D(q,S,b,z,C,v,U,g,r,I,V){throw(0,y.c)("engine.rawTexture")}createRawTexture2DArray(q,S,b,z,C,v,U,g,r,I,V){throw(0,y.c)("engine.rawTexture")}_sharedInit(q){this._renderingCanvas=q}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const q=navigator.userAgent;this.hostInformation.isMobile=-1!==q.indexOf("Mobile")||-1!==q.indexOf("Mac")&&(0,G.e)()&&"ontouchend"in document},this._checkForMobile(),(0,G.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(q){return document.createElement("video")}_reportDrawCall(){var q;let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(q=this._drawCalls)||void 0===q||q.addCount(S,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(q,S){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(q,S){return createImageBitmap(q,S)}resizeImageBitmap(q,S,b){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(q){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(q,S){if("undefined"===typeof document)return new OffscreenCanvas(q,S);const b=document.createElement("canvas");return b.width=q,b.height=S,b}createCanvas(q,S){return W._CreateCanvas(q,S)}static _FileToolsLoadImage(q,S,b,z,C,v,U){throw(0,y.c)("FileTools")}_loadFile(q,S,b,z,C,v){const U=(0,H.l)(q,S,b,z,C,v);return this._activeRequests.push(U),U.onCompleteObservable.add((()=>{const q=this._activeRequests.indexOf(U);-1!==q&&this._activeRequests.splice(q,1)})),U}static _FileToolsLoadFile(q,S,b,z,C,v){if(H.c.loadFile)return H.c.loadFile(q,S,b,z,C,v);throw(0,y.c)("FileTools")}dispose(){var q;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(q=this.releaseComputeEffects)||void 0===q||q.call(this),v.Effect.ResetCache();for(const b of this._activeRequests)b.abort();this._boundRenderFunction=null,this.gb.notifyObservers(this),this.gb.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,G.k)()&&window.removeEventListener("resize",this._checkForMobile);const S=z.b.Instances.indexOf(this);S>=0&&z.b.Instances.splice(S,1),z.b.Instances.length||(z.b.OnEnginesDisposedObservable.notifyObservers(this),z.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(q){throw(0,y.c)("LoadingScreen")}static MarkAllMaterialsAsDirty(q,S){for(let b=0;b<z.b.Instances.length;b++){const C=z.b.Instances[b];for(let b=0;b<C.scenes.length;b++)C.scenes[b].markAllMaterialsAsDirty(q,S)}}}W._RenderPassIdCounter=0,W._RescalePostProcessFactory=null,W.CollisionsEpsilon=.001,W.QueueNewFrame=k},10975:(q,S,b)=>{b.d(S,{b:()=>C});var z=b(10929);class C{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}C.Instances=[],C.OnEnginesDisposedObservable=new z.d,C._LastCreatedScene=null,C.UseFallbackTexture=!0,C.FallbackTexture=""},11029:(q,S,b)=>{b.d(S,{c:()=>z});class z{static SetMatrixPrecision(q){if(z.MatrixTrackPrecisionChange=!1,q&&!z.MatrixUse64Bits&&z.MatrixTrackedMatrices)for(let S=0;S<z.MatrixTrackedMatrices.length;++S){const q=z.MatrixTrackedMatrices[S],b=q.rb;q.rb=new Array(16);for(let S=0;S<16;++S)q.rb[S]=b[S]}z.MatrixUse64Bits=q,z.MatrixCurrentType=z.MatrixUse64Bits?Array:Float32Array,z.MatrixTrackedMatrices=null}}z.MatrixUse64Bits=!1,z.MatrixTrackPrecisionChange=!0,z.MatrixCurrentType=Float32Array,z.MatrixTrackedMatrices=[]},11045:(q,S,b)=>{b.d(S,{d:()=>U});var z=b(10943);const C=new Map;function v(q,S){(function(q){return C.delete(q)})(q)&&z.b.Warn(`Extension with the name '${q}' already exists`),C.set(q,S)}function U(q,S){"image/ktx"!==S&&"image/ktx2"!==S||(q=".ktx"),C.has(q)||(q.endsWith(".ies")&&v(".ies",(async()=>await b.e(15).then(b.bind(b,13538)).then((q=>new q._IESTextureLoader)))),q.endsWith(".dds")&&v(".dds",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(28)]).then(b.bind(b,13541)).then((q=>new q._DDSTextureLoader)))),q.endsWith(".basis")&&v(".basis",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(47)]).then(b.bind(b,13553)).then((q=>new q._BasisTextureLoader)))),q.endsWith(".env")&&v(".env",(async()=>await Promise.all([b.e(14),b.e(17),b.e(13),b.e(19),b.e(18),b.e(23),b.e(21),b.e(45),b.e(48)]).then(b.bind(b,13560)).then((q=>new q._ENVTextureLoader)))),q.endsWith(".hdr")&&v(".hdr",(async()=>await Promise.all([b.e(14),b.e(49)]).then(b.bind(b,13564)).then((q=>new q._HDRTextureLoader)))),(q.endsWith(".ktx")||q.endsWith(".ktx2"))&&(v(".ktx",(async()=>await b.e(30).then(b.bind(b,13573)).then((q=>new q._KTXTextureLoader)))),v(".ktx2",(async()=>await b.e(30).then(b.bind(b,13573)).then((q=>new q._KTXTextureLoader))))),q.endsWith(".tga")&&v(".tga",(async()=>await b.e(50).then(b.bind(b,13580)).then((q=>new q._TGATextureLoader)))),q.endsWith(".exr")&&v(".exr",(async()=>await b.e(16).then(b.bind(b,13588)).then((q=>new q._ExrTextureLoader)))));const z=C.get(q);return z?Promise.resolve(z(S)):null}},11033:(q,S,b)=>{b.d(S,{d:()=>U});var z,C=b(10929),v=b(11039);!function(q){q[q.Unknown=0]="Unknown",q[q.Url=1]="Url",q[q.Temp=2]="Temp",q[q.Raw=3]="Raw",q[q.Dynamic=4]="Dynamic",q[q.RenderTarget=5]="RenderTarget",q[q.MultiRenderTarget=6]="MultiRenderTarget",q[q.Cube=7]="Cube",q[q.CubeRaw=8]="CubeRaw",q[q.CubePrefiltered=9]="CubePrefiltered",q[q.Raw3D=10]="Raw3D",q[q.Raw2DArray=11]="Raw2DArray",q[q.DepthStencil=12]="DepthStencil",q[q.CubeRawRGBD=13]="CubeRawRGBD",q[q.Depth=14]="Depth"}(z||(z={}));class U extends v.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(q){this.generateMipMaps=q}get uniqueId(){return this._uniqueId}_setUniqueId(q){this._uniqueId=q}getEngine(){return this._engine}get source(){return this._source}constructor(q,S){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new C.d,this.onErrorObservable=new C.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=q,this._source=S,this._uniqueId=U._Counter++,b||(this._hardwareTexture=q._createHardwareTexture())}incrementReferences(){this._references++}updateSize(q,S){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,q,S,b),this.width=q,this.height=S,this.depth=b,this.baseWidth=q,this.baseHeight=S,this.baseDepth=b,this._size=q*S*b}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const q=this.onRebuildCallback(this),S=S=>{S._swapAndDie(this,!1),this.isReady=q.isReady};return void(q.isAsync?q.proxy.then(S):S(q.proxy))}let q;switch(this.source){case 2:case 12:case 14:break;case 1:return void(q=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(q=>{q._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:q=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),q._swapAndDie(this,!1),this.isReady=!0;break;case 10:q=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),q._swapAndDie(this,!1),this.isReady=!0;break;case 11:q=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),q._swapAndDie(this,!1),this.isReady=!0;break;case 4:q=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),q._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(q=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{q._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:q=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),q._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return q=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(q=>{q&&q._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(q._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(q){var S;let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(S=this._hardwareTexture)||void 0===S||S.setUsage(q._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),q._hardwareTexture=this._hardwareTexture,b&&(q._isRGBD=this._isRGBD),this._lodTextureHigh&&(q._lodTextureHigh&&q._lodTextureHigh.dispose(),q._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(q._lodTextureMid&&q._lodTextureMid.dispose(),q._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(q._lodTextureLow&&q._lodTextureLow.dispose(),q._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(q._irradianceTexture&&q._irradianceTexture.dispose(),q._irradianceTexture=this._irradianceTexture);const z=this._engine.getLoadedTexturesCache();let C=z.indexOf(this);-1!==C&&z.splice(C,1),C=z.indexOf(q),-1===C&&z.push(q)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}U._Counter=0},11039:(q,S,b)=>{b.d(S,{b:()=>z});class z{get wrapU(){return this._cachedWrapU}set wrapU(q){this._cachedWrapU=q}get wrapV(){return this._cachedWrapV}set wrapV(q){this._cachedWrapV=q}get wrapR(){return this._cachedWrapR}set wrapR(q){this._cachedWrapR=q}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(q){this._cachedAnisotropicFilteringLevel=q}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(q){this._comparisonFunction=q}get useMipMaps(){return this._useMipMaps}set useMipMaps(q){this._useMipMaps=q}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=q,this._cachedWrapV=S,this._cachedWrapR=b,this._cachedAnisotropicFilteringLevel=z,this.samplingMode=C,this._comparisonFunction=v,this}compareSampler(q){return this._cachedWrapU===q._cachedWrapU&&this._cachedWrapV===q._cachedWrapV&&this._cachedWrapR===q._cachedWrapR&&this._cachedAnisotropicFilteringLevel===q._cachedAnisotropicFilteringLevel&&this.samplingMode===q.samplingMode&&this._comparisonFunction===q._comparisonFunction&&this._useMipMaps===q._useMipMaps}}},10948:(q,S,b)=>{b.d(S,{d:()=>v});var z=b(10943);const C=(q,S,b)=>q?q.getClassName&&"Mesh"===q.getClassName()?null:!q.getClassName||"SubMesh"!==q.getClassName()&&"PhysicsBody"!==q.getClassName()?q.clone?q.clone():Array.isArray(q)?q.slice():b&&"object"===typeof q?{...q}:null:q.clone(S):null;class v{static DeepCopy(q,S,b,v){let U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const g=function(q){const S=[];do{const b=Object.getOwnPropertyNames(q);for(const q of b)-1===S.indexOf(q)&&S.push(q)}while(q=Object.getPrototypeOf(q));return S}(q);for(const I of g){if("_"===I[0]&&(!v||-1===v.indexOf(I)))continue;if(I.endsWith("Observable"))continue;if(b&&-1!==b.indexOf(I))continue;const g=q[I],V=typeof g;if("function"!==V)try{if("object"===V)if(g instanceof Uint8Array)S[I]=Uint8Array.from(g);else if(g instanceof Array){if(S[I]=[],g.length>0)if("object"==typeof g[0])for(let q=0;q<g.length;q++){const b=C(g[q],S,U);-1===S[I].indexOf(b)&&S[I].push(b)}else S[I]=g.slice(0)}else S[I]=C(g,S,U);else S[I]=g}catch(r){z.b.Warn(r.message)}}}}},10982:(q,S,b)=>{b.d(S,{e:()=>z,f:()=>C,j:()=>v});class z extends Error{}z._setPrototypeOf=Object.setPrototypeOf||((q,S)=>(q.__proto__=S,q));const C={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class v extends z{constructor(q,S,b){super(q),this.errorCode=S,this.innerError=b,this.name="RuntimeError",z._setPrototypeOf(this,v.prototype)}}},10977:(q,S,b)=>{b.d(S,{b:()=>i,d:()=>W,g:()=>f,j:()=>E,r:()=>B,n:()=>H,t:()=>X,w:()=>T,A:()=>t,C:()=>N});var z=b(10966),C=b(10934),v=b(10929);class U{}U.FilesToLoad={};var g=b(10982),r=b(10990),I=b(10995),V=b(10975),l=b(10943),y=b(11e3),R=b(10997),G=b(11006);const Z=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class H extends g.j{constructor(q,S){super(q,g.f.LoadFileError),this.name="LoadFileError",g.e._setPrototypeOf(this,H.prototype),S instanceof z.c?this.request=S:this.file=S}}class Q extends g.j{constructor(q,S){super(q,g.f.RequestFileError),this.request=S,this.name="RequestFileError",g.e._setPrototypeOf(this,Q.prototype)}}class k extends g.j{constructor(q,S){super(q,g.f.ReadFileError),this.file=S,this.name="ReadFileError",g.e._setPrototypeOf(this,k.prototype)}}const W={DefaultRetryStrategy:class{static ExponentialBackoff(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(b,z,C)=>0!==z.status||C>=q||-1!==b.indexOf("file:")?-1:Math.pow(2,C)*S}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:q=>q,ScriptBaseUrl:"",ScriptPreprocessUrl:q=>q,CleanUrl:q=>q=q.replace(/#/gm,"%23")},N=(q,S)=>{if((!q||0!==q.indexOf("data:"))&&W.CorsBehavior)if("string"===typeof W.CorsBehavior||W.CorsBehavior instanceof String)S.crossOrigin=W.CorsBehavior;else{const b=W.CorsBehavior(q);b&&(S.crossOrigin=b)}},u={getRequiredSize:null},X=function(q,S,b,C){let v,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",I=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:V.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===l||void 0===l||!l._features.forceBitmapOverHTMLImageElement))return b("LoadImage is only supported in web or BabylonNative environments."),null;let y=!1;q instanceof ArrayBuffer||ArrayBuffer.isView(q)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(v=URL.createObjectURL(new Blob([q],{type:g})),y=!0):v=`data:${g};base64,`+(0,r.k)(q):q instanceof Blob?(v=URL.createObjectURL(q),y=!0):(v=W.CleanUrl(q),v=W.PreprocessUrl(v));const R=S=>{if(b){const z=v||q.toString();b(`Error while trying to load image: ${0===z.indexOf("http")||z.length<=128?z:z.slice(0,128)+"..."}`,S)}};if(null!==l&&void 0!==l&&l._features.forceBitmapOverHTMLImageElement)return B(v,(z=>{l.createImageBitmap(new Blob([z],{type:g}),{premultiplyAlpha:"none",...I}).then((q=>{S(q),y&&URL.revokeObjectURL(v)})).catch((S=>{b&&b("Error while trying to load image: "+q,S)}))}),void 0,C||void 0,!0,((q,S)=>{R(S)})),null;const G=new Image;if(u.getRequiredSize){const S=u.getRequiredSize(q);S.width&&(G.width=S.width),S.height&&(G.height=S.height)}N(v,G);const Z=[],H=()=>{for(const q of Z)q.target.removeEventListener(q.name,q.handler);Z.length=0};Z.push({target:G,name:"load",handler:()=>{H(),S(G),y&&G.src&&URL.revokeObjectURL(G.src)}}),Z.push({target:G,name:"error",handler:q=>{H(),R(q),y&&G.src&&URL.revokeObjectURL(G.src)}}),Z.push({target:document,name:"securitypolicyviolation",handler:q=>{if(q.blockedURI!==G.src||"Vb"===q.disposition)return;H();const S=new Error(`CSP violation of policy ${q.effectiveDirective} ${q.blockedURI}. Current policy is ${q.originalPolicy}`);V.b.UseFallbackTexture=!1,R(S),y&&G.src&&URL.revokeObjectURL(G.src),G.src=""}}),(()=>{for(const q of Z)q.target.addEventListener(q.name,q.handler)})();const Q="blob:"===v.substring(0,5),k="data:"===v.substring(0,5),X=()=>{Q||k||!z.c.IsCustomRequestAvailable?G.src=v:B(v,((q,S,b)=>{const z=new Blob([q],{type:!g&&b?b:g}),C=URL.createObjectURL(z);y=!0,G.src=C}),void 0,C||void 0,!0,((q,S)=>{R(S)}))},T=()=>{C&&C.loadImage(v,G)};if(!Q&&!k&&C&&C.enableTexturesOffline)C.open(T,X);else{if(-1!==v.indexOf("file:")){const q=decodeURIComponent(v.substring(5).toLowerCase());if(U.FilesToLoad[q]&&"undefined"!==typeof URL){try{let S;try{S=URL.createObjectURL(U.FilesToLoad[q])}catch(t){S=URL.createObjectURL(U.FilesToLoad[q])}G.src=S,y=!0}catch(f){G.src=""}return G}}X()}return G},T=(q,S,b,z,C)=>{const U=new FileReader,g={onCompleteObservable:new v.d,abort:()=>U.abort()};return U.onloadend=()=>g.onCompleteObservable.notifyObservers(g),C&&(U.onerror=()=>{C(new k(`Unable to read ${q.name}`,q))}),U.onload=q=>{S(q.target.result)},b&&(U.onprogress=b),z?U.readAsArrayBuffer(q):U.readAsText(q),g},B=(q,S,b,z,C,r,I)=>{if(q.name)return T(q,S,b,C,r?q=>{r(void 0,q)}:void 0);const V=q;if(-1!==V.indexOf("file:")){let q=decodeURIComponent(V.substring(5).toLowerCase());0===q.indexOf("./")&&(q=q.substring(2));const z=U.FilesToLoad[q];if(z)return T(z,S,b,C,r?q=>r(void 0,new H(q.message,q.file)):void 0)}const{match:R,type:G}=e(V);if(R){const q={onCompleteObservable:new v.d,abort:()=>()=>{}};try{const q=C?i(V):J(V);S(q,void 0,G)}catch(g){r?r(void 0,g):l.b.Error(g.message||"Failed to parse the Data URL")}return y.e.SetImmediate((()=>{q.onCompleteObservable.notifyObservers(q)})),q}return t(V,((q,b)=>{S(q,null===b||void 0===b?void 0:b.responseURL,null===b||void 0===b?void 0:b.getResponseHeader("content-type"))}),b,z,C,r?q=>{r(q.request,new H(q.message,q.request))}:void 0,I)},t=(q,S,b,U,g,r,I)=>{q=W.CleanUrl(q),q=W.PreprocessUrl(q);const V=W.BaseUrl+q;let y=!1;const R={onCompleteObservable:new v.d,abort:()=>y=!0},G=()=>{let q,v=new z.c,U=null;const G=()=>{v&&(b&&v.removeEventListener("progress",b),q&&v.removeEventListener("readystatechange",q),v.removeEventListener("loadend",Z))};let Z=()=>{G(),R.onCompleteObservable.notifyObservers(R),R.onCompleteObservable.clear(),b=void 0,q=null,Z=null,r=void 0,I=void 0,S=void 0};R.abort=()=>{y=!0,Z&&Z(),v&&v.readyState!==(XMLHttpRequest.DONE||4)&&v.abort(),null!==U&&(clearTimeout(U),U=null),v=null};const H=q=>{const S=q.message||"Unknown error";r&&v?r(new Q(S,v)):l.b.Error(S)},k=l=>{if(v){if(v.open("GET",V),I)try{I(v)}catch(R){return void H(R)}g&&(v.responseType="arraybuffer"),b&&v.addEventListener("progress",b),Z&&v.addEventListener("loadend",Z),q=()=>{if(!y&&v&&v.readyState===(XMLHttpRequest.DONE||4)){if(q&&v.removeEventListener("readystatechange",q),v.status>=200&&v.status<300||0===v.status&&(!(0,C.k)()||m())){const q=g?v.response:v.responseText;if(null!==q){try{S&&S(q,v)}catch(R){H(R)}return}}const b=W.DefaultRetryStrategy;if(b){const q=b(V,v,l);if(-1!==q)return G(),v=new z.c,void(U=setTimeout((()=>k(l+1)),q))}const I=new Q("Error status: "+v.status+" "+v.statusText+" - Unable to load "+V,v);r&&r(I)}},v.addEventListener("readystatechange",q),v.send()}};k(0)};if(U&&U.enableSceneOffline){const z=q=>{q&&q.status>400?r&&r(q):G()},C=()=>{U&&U.loadFile(W.BaseUrl+q,(q=>{!y&&S&&S(q),R.onCompleteObservable.notifyObservers(R)}),b?q=>{!y&&b&&b(q)}:void 0,z,g)};U.open(C,z)}else G();return R},f=q=>{const{match:S,type:b}=e(q);if(S)return b||void 0;const z=q.lastIndexOf(".");switch(q.substring(z+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"lb":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},m=()=>"undefined"!==typeof location&&"file:"===location.protocol,E=q=>Z.test(q),e=q=>{const S=Z.exec(q);if(null===S||0===S.length)return{match:!1,type:""};return{match:!0,type:S[0].replace("data:","").replace("base64,","")}};function i(q){return(0,r.c)(q.split(",")[1])}const J=q=>(0,r.d)(q.split(",")[1]);let L;G.c._FileToolsLoadImage=X,R.c.loadFile=B,I.l.loadFile=B;((q,S,b,z,C,v,U,g,r,I)=>{L={DecodeBase64UrlToBinary:q,DecodeBase64UrlToString:S,DefaultRetryStrategy:b.DefaultRetryStrategy,BaseUrl:b.BaseUrl,CorsBehavior:b.CorsBehavior,PreprocessUrl:b.PreprocessUrl,IsBase64DataUrl:z,IsFileURL:C,LoadFile:v,LoadImage:U,ReadFile:g,RequestFile:r,SetCorsBehavior:I},Object.defineProperty(L,"DefaultRetryStrategy",{get:function(){return b.DefaultRetryStrategy},set:function(q){b.DefaultRetryStrategy=q}}),Object.defineProperty(L,"BaseUrl",{get:function(){return b.BaseUrl},set:function(q){b.BaseUrl=q}}),Object.defineProperty(L,"PreprocessUrl",{get:function(){return b.PreprocessUrl},set:function(q){b.PreprocessUrl=q}}),Object.defineProperty(L,"CorsBehavior",{get:function(){return b.CorsBehavior},set:function(q){b.CorsBehavior=q}})})(i,J,W,E,m,B,X,T,t,N)},11060:(q,S,b)=>{function z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(q=>{const S=16*Math.random()|0;return("x"===q?S:3&S|8).toString(16)}))}b.d(S,{d:()=>z})},11054:(q,S,b)=>{b.d(S,{c:()=>v});var z=b(10943),C=b(11058);class v{static Instantiate(q){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[q])return this.RegisteredExternalClasses[q];const S=(0,C.c)(q);if(S)return S;z.b.Warn(q+" not found, you may have missed an import.");const b=q.split(".");let v=window||this;for(let z=0,C=b.length;z<C;z++)v=v[b[z]];return"function"!==typeof v?null:v}}v.RegisteredExternalClasses={}},10957:(q,S,b)=>{b.d(S,{e:()=>C});var z=b(10934);class C{static get Now(){return(0,z.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},10990:(q,S,b)=>{b.d(S,{c:()=>U,d:()=>v,h:()=>z,k:()=>C});const z=q=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(q);let S="";for(let b=0;b<q.byteLength;b++)S+=String.fromCharCode(q[b]);return S},C=q=>{const S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b,z,C,v,U,g,r,I="",V=0;const l=ArrayBuffer.isView(q)?new Uint8Array(q.buffer,q.byteOffset,q.byteLength):new Uint8Array(q);for(;V<l.length;)b=l[V++],z=V<l.length?l[V++]:Number.NaN,C=V<l.length?l[V++]:Number.NaN,v=b>>2,U=(3&b)<<4|z>>4,g=(15&z)<<2|C>>6,r=63&C,isNaN(z)?g=r=64:isNaN(C)&&(r=64),I+=S.charAt(v)+S.charAt(U)+S.charAt(g)+S.charAt(r);return I},v=q=>atob(q),U=q=>{const S=v(q),b=S.length,z=new Uint8Array(new ArrayBuffer(b));for(let C=0;C<b;C++)z[C]=S.charCodeAt(C);return z.buffer}},11064:(q,S,b)=>{function z(q){let S=1;do{S*=2}while(S<q);return S===q}function C(q,S,b){return q*(1-b)+S*b}function v(q){const S=U(q),b=g(q);return S-q>q-b?b:S}function U(q){return q--,q|=q>>1,q|=q>>2,q|=q>>4,q|=q>>8,q|=q>>16,++q}function g(q){return q|=q>>1,q|=q>>2,q|=q>>4,q|=q>>8,(q|=q>>16)-(q>>1)}function r(q,S){let b;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:b=g(q);break;case 2:b=v(q);break;default:b=U(q)}return Math.min(b,S)}b.d(S,{c:()=>g,g:()=>r,i:()=>z,m:()=>C,p:()=>v})},10921:(q,S,b)=>{b.r(S),b.d(S,{AsyncLoop:()=>k,Tools:()=>H,className:()=>Q});var z=b(10929),C=b(10934),v=b(10943),U=b(10948),g=b(10957),r=b(10964),I=b(10966),V=b(10975),l=b(10977),y=b(11e3),R=b(11054),G=b(11060),Z=b(11064);class H{static get BaseUrl(){return l.d.BaseUrl}static set BaseUrl(q){l.d.BaseUrl=q}static get CleanUrl(){return l.d.CleanUrl}static set CleanUrl(q){l.d.CleanUrl=q}static IsAbsoluteUrl(q){return 0===q.indexOf("//")||-1!==q.indexOf("://")&&(-1!==q.indexOf(".")&&(-1!==q.indexOf("/")&&(!(q.indexOf(":")>q.indexOf("/"))&&(q.indexOf("://")<q.indexOf(".")||(0===q.indexOf("data:")||0===q.indexOf("blob:"))))))}static set ScriptBaseUrl(q){l.d.ScriptBaseUrl=q}static get ScriptBaseUrl(){return l.d.ScriptBaseUrl}static set CDNBaseUrl(q){H.ScriptBaseUrl=q,H.AssetBaseUrl=q}static set ScriptPreprocessUrl(q){l.d.ScriptPreprocessUrl=q}static get ScriptPreprocessUrl(){return l.d.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return l.d.DefaultRetryStrategy}static set DefaultRetryStrategy(q){l.d.DefaultRetryStrategy=q}static get CorsBehavior(){return l.d.CorsBehavior}static set CorsBehavior(q){l.d.CorsBehavior=q}static get UseFallbackTexture(){return V.b.UseFallbackTexture}static set UseFallbackTexture(q){V.b.UseFallbackTexture=q}static get RegisteredExternalClasses(){return R.c.RegisteredExternalClasses}static set RegisteredExternalClasses(q){R.c.RegisteredExternalClasses=q}static get fallbackTexture(){return V.b.FallbackTexture}static set fallbackTexture(q){V.b.FallbackTexture=q}static FetchToRef(q,S,b,z,C,v){const U=4*((Math.abs(q)*b%b|0)+(Math.abs(S)*z%z|0)*b);v.r=C[U]/255,v.g=C[U+1]/255,v.b=C[U+2]/255,v.a=C[U+3]/255}static Mix(q,S,b){return 0}static Instantiate(q){return R.c.Instantiate(q)}static SetImmediate(q){y.e.SetImmediate(q)}static IsExponentOfTwo(q){return!0}static FloatRound(q){return Math.fround(q)}static GetFilename(q){const S=q.lastIndexOf("/");return S<0?q:q.substring(S+1)}static GetFolderPath(q){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const b=q.lastIndexOf("/");return b<0?S?q:"":q.substring(0,b+1)}static ToDegrees(q){return 180*q/Math.PI}static ToRadians(q){return q*Math.PI/180}static SmoothAngleChange(q,S){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const z=this.ToRadians(q),C=this.ToRadians(S);return this.ToDegrees(Math.atan2((1-b)*Math.sin(C)+b*Math.sin(z),(1-b)*Math.cos(C)+b*Math.cos(z)))}static MakeArray(q,S){return!0===S||void 0!==q&&null!=q?Array.isArray(q)?q:[q]:null}static GetPointerPrefix(q){return(0,C.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(q,S){(0,l.C)(q,S)}static SetReferrerPolicyBehavior(q,S){S.referrerPolicy=q}static get PreprocessUrl(){return l.d.PreprocessUrl}static set PreprocessUrl(q){l.d.PreprocessUrl=q}static LoadImage(q,S,b,z,C,v){return(0,l.t)(q,S,b,z,C,v)}static LoadFile(q,S,b,z,C,v){return(0,l.r)(q,S,b,z,C,v)}static async LoadFileAsync(q){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((b,z)=>{(0,l.r)(q,(q=>{b(q)}),void 0,void 0,S,((q,S)=>{z(S)}))}))}static GetAssetUrl(q){if(!q)return"";if(H.AssetBaseUrl&&q.startsWith(H._DefaultAssetsUrl)){const S="/"===H.AssetBaseUrl[H.AssetBaseUrl.length-1]?H.AssetBaseUrl.substring(0,H.AssetBaseUrl.length-1):H.AssetBaseUrl;return q.replace(H._DefaultAssetsUrl,S)}return q}static GetBabylonScriptURL(q,S){if(!q)return"";if(H.ScriptBaseUrl&&q.startsWith(H._DefaultCdnUrl)){const S="/"===H.ScriptBaseUrl[H.ScriptBaseUrl.length-1]?H.ScriptBaseUrl.substring(0,H.ScriptBaseUrl.length-1):H.ScriptBaseUrl;q=q.replace(H._DefaultCdnUrl,S)}return q=H.ScriptPreprocessUrl(q),S&&(q=H.GetAbsoluteUrl(q)),q}static LoadBabylonScript(q,S,b,z){q=H.GetBabylonScriptURL(q),H.LoadScript(q,S,b)}static async LoadBabylonScriptAsync(q){return q=H.GetBabylonScriptURL(q),await H.LoadScriptAsync(q)}static LoadScript(q,S,b,z){let v=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(q),S&&S()}catch(r){null===b||void 0===b||b(`Unable to load script '${q}' in worker`,r)}return}if(!(0,C.k)())return void(null===b||void 0===b||b(`Cannot load script '${q}' outside of a window or a worker`));const U=document.getElementsByTagName("head")[0],g=document.createElement("script");v?(g.setAttribute("type","module"),g.innerText=q):(g.setAttribute("type","text/javascript"),g.setAttribute("src",q)),z&&(g.id=z),g.onload=()=>{S&&S()},g.onerror=S=>{b&&b(`Unable to load script '${q}'`,S)},U.appendChild(g)}static async LoadScriptAsync(q,S){return await new Promise(((b,z)=>{this.LoadScript(q,(()=>{b()}),((q,S)=>{z(S||new Error(q))}),S)}))}static ReadFileAsDataURL(q,S,b){const C=new FileReader,v={onCompleteObservable:new z.d,abort:()=>C.abort()};return C.onloadend=()=>{v.onCompleteObservable.notifyObservers(v)},C.onload=q=>{S(q.target.result)},C.onprogress=b,C.readAsDataURL(q),v}static ReadFile(q,S,b,z,C){return(0,l.w)(q,S,b,z,C)}static FileAsURL(q){const S=new Blob([q]);return window.URL.createObjectURL(S)}static Format(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return q.toFixed(S)}static DeepCopy(q,S,b,z){U.d.DeepCopy(q,S,b,z)}static IsEmpty(q){for(const S in q)if(Object.prototype.hasOwnProperty.call(q,S))return!1;return!0}static RegisterTopRootEvents(q,S){for(let z=0;z<S.length;z++){const C=S[z];q.addEventListener(C.name,C.handler,!1);try{window.parent&&window.parent.addEventListener(C.name,C.handler,!1)}catch(b){}}}static UnregisterTopRootEvents(q,S){for(let z=0;z<S.length;z++){const C=S[z];q.removeEventListener(C.name,C.handler);try{q.parent&&q.parent.removeEventListener(C.name,C.handler)}catch(b){}}}static async DumpFramebuffer(q,S,b,z){throw(0,r.c)("DumpTools")}static DumpData(q,S,b,z){throw(0,r.c)("DumpTools")}static async DumpDataAsync(q,S,b){throw(0,r.c)("DumpTools")}static _IsOffScreenCanvas(q){return void 0!==q.convertToBlob}static ToBlob(q,S){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0;H._IsOffScreenCanvas(q)||q.toBlob||(q.toBlob=function(q,S,b){setTimeout((()=>{const z=atob(this.toDataURL(S,b).split(",")[1]),C=z.length,v=new Uint8Array(C);for(let q=0;q<C;q++)v[q]=z.charCodeAt(q);q(new Blob([v]))}))}),H._IsOffScreenCanvas(q)?q.convertToBlob({type:b,quality:z}).then((q=>S(q))):q.toBlob((function(q){S(q)}),b,z)}static DownloadBlob(q,S){if("download"in document.createElement("a")){if(!S){const q=new Date;S="screenshot_"+((q.getFullYear()+"-"+(q.getMonth()+1)).slice(2)+"-"+q.getDate()+"_"+q.getHours()+"-"+("0"+q.getMinutes()).slice(-2))+".png"}H.Download(q,S)}else if(q&&"undefined"!==typeof URL){const S=URL.createObjectURL(q),b=window.open("");if(!b)return;const z=b.document.createElement("img");z.onload=function(){URL.revokeObjectURL(S)},z.src=S,b.document.body.appendChild(z)}}static EncodeScreenshotCanvasData(q,S){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",z=arguments.length>3?arguments[3]:void 0,C=arguments.length>4?arguments[4]:void 0;if("string"!==typeof z&&S){if(S){if(H._IsOffScreenCanvas(q))return void q.convertToBlob({type:b,quality:C}).then((q=>{const b=new FileReader;b.readAsDataURL(q),b.onloadend=()=>{const q=b.result;S(q)}}));const z=q.toDataURL(b,C);S(z)}}else this.ToBlob(q,(function(q){q&&H.DownloadBlob(q,z),S&&S("")}),b,C)}static Download(q,S){if("undefined"===typeof URL)return;const b=window.URL.createObjectURL(q),z=document.createElement("a");document.body.appendChild(z),z.style.display="none",z.href=b,z.download=S,z.addEventListener("click",(()=>{z.parentElement&&z.parentElement.removeChild(z)})),z.click(),window.URL.revokeObjectURL(b)}static BackCompatCameraNoPreventDefault(q){return"boolean"===typeof q[0]?q[0]:"boolean"===typeof q[1]&&q[1]}static CreateScreenshot(q,S,b,z){throw(0,r.c)("ScreenshotTools")}static async CreateScreenshotAsync(q,S,b){throw(0,r.c)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(q,S,b,z){throw(0,r.c)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(q,S,b){throw(0,r.c)("ScreenshotTools")}static RandomId(){return(0,G.d)()}static IsBase64(q){return(0,l.j)(q)}static DecodeBase64(q){return(0,l.b)(q)}static get errorsCount(){return v.b.errorsCount}static Log(q){v.b.Log(q)}static Warn(q){v.b.Warn(q)}static Error(q){v.b.Error(q)}static get LogCache(){return v.b.LogCache}static ClearLogCache(){v.b.ClearLogCache()}static set LogLevels(q){v.b.LogLevels=q}static set PerformanceLogLevel(q){return(q&H.PerformanceUserMarkLogLevel)===H.PerformanceUserMarkLogLevel?(H.StartPerformanceCounter=H._StartUserMark,void(H.EndPerformanceCounter=H._EndUserMark)):(q&H.PerformanceConsoleLogLevel)===H.PerformanceConsoleLogLevel?(H.StartPerformanceCounter=H._StartPerformanceConsole,void(H.EndPerformanceCounter=H._EndPerformanceConsole)):(H.StartPerformanceCounter=H._StartPerformanceCounterDisabled,void(H.EndPerformanceCounter=H._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(q,S){}static _EndPerformanceCounterDisabled(q,S){}static _StartUserMark(q){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!H._Performance){if(!(0,C.k)())return;H._Performance=window.performance}S&&H._Performance.mark&&H._Performance.mark(q+"-Begin")}static _EndUserMark(q){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&H._Performance.mark&&(H._Performance.mark(q+"-End"),H._Performance.measure(q,q+"-Begin",q+"-End"))}static _StartPerformanceConsole(q){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(H._StartUserMark(q,S),console.time&&console.time(q))}static _EndPerformanceConsole(q){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S&&(H._EndUserMark(q,S),console.timeEnd(q))}static get Now(){return g.e.Now}static GetClassName(q){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null;if(!S&&q.getClassName)b=q.getClassName();else{if(q instanceof Object){b=(S?q:Object.getPrototypeOf(q)).constructor.__bjsclassName__}b||(b=typeof q)}return b}static First(q,S){for(const b of q)if(S(b))return b;return null}static getFullClassName(q){let S=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=null,z=null;if(!S&&q.getClassName)b=q.getClassName();else{if(q instanceof Object){const C=S?q:Object.getPrototypeOf(q);b=C.constructor.__bjsclassName__,z=C.constructor.__bjsmoduleName__}b||(b=typeof q)}return b?(null!=z?z+".":"")+b:null}static async DelayAsync(q){await new Promise((S=>{setTimeout((()=>{S()}),q)}))}static IsSafari(){return!!(0,C.h)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function Q(q,S){return b=>{b.__bjsclassName__=q,b.__bjsmoduleName__=null!=S?S:null}}H.AssetBaseUrl="",H.UseCustomRequestHeaders=!1,H.CustomRequestHeaders=I.c.CustomRequestHeaders,H.GetDOMTextContent=C.b,H._DefaultCdnUrl="https://cdn.babylonjs.com",H._DefaultAssetsUrl="https://assets.babylonjs.com/core",H.GetAbsoluteUrl="object"===typeof document?q=>{const S=document.createElement("a");return S.href=q,S.href}:"function"===typeof URL&&"object"===typeof location?q=>new URL(q,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},H.NoneLogLevel=v.b.NoneLogLevel,H.MessageLogLevel=v.b.MessageLogLevel,H.WarningLogLevel=v.b.WarningLogLevel,H.ErrorLogLevel=v.b.ErrorLogLevel,H.AllLogLevel=v.b.AllLogLevel,H.IsWindowObjectExist=C.k,H.PerformanceNoneLogLevel=0,H.PerformanceUserMarkLogLevel=1,H.PerformanceConsoleLogLevel=2,H.StartPerformanceCounter=H._StartPerformanceCounterDisabled,H.EndPerformanceCounter=H._EndPerformanceCounterDisabled;class k{constructor(q,S,b){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=q,this.index=z-1,this._done=!1,this._fn=S,this._successCallback=b}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(q,S,b){const z=new k(q,S,b,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return z.executeNext(),z}static SyncAsyncForLoop(q,S,b,z,C){let v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return k.Run(Math.ceil(q/S),(z=>{C&&C()?z.breakLoop():setTimeout((()=>{for(let v=0;v<S;++v){const U=z.index*S+v;if(U>=q)break;if(b(U),C&&C()){z.breakLoop();break}}z.executeNext()}),v)}),z)}}H.Mix=Z.m,H.IsExponentOfTwo=Z.i,V.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11058:(q,S,b)=>{b.d(S,{c:()=>v,f:()=>C});const z={};function C(q,S){z[q]=S}function v(q){return z[q]}},10966:(q,S,b)=>{b.d(S,{c:()=>z});class z{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(z.CustomRequestHeaders).length>0||z.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const q in z.CustomRequestHeaders){const S=z.CustomRequestHeaders[q];S&&this._xhr.setRequestHeader(q,S)}}_shouldSkipRequestModifications(q){return z.SkipRequestModificationForBabylonCDN&&(q.includes("preview.babylonjs.com")||q.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(q){this._xhr.onprogress=q}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(q){this._xhr.responseType=q}get timeout(){return this._xhr.timeout}set timeout(q){this._xhr.timeout=q}addEventListener(q,S,b){this._xhr.addEventListener(q,S,b)}removeEventListener(q,S,b){this._xhr.removeEventListener(q,S,b)}abort(){this._xhr.abort()}send(q){z.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(q)}open(q,S){for(const b of z.CustomRequestModifiers){if(this._shouldSkipRequestModifications(S))return;S=b(this._xhr,S)||S}S=(S=S.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=S,this._xhr.open(q,S,!0)}setRequestHeader(q,S){this._xhr.setRequestHeader(q,S)}getResponseHeader(q){return this._xhr.getResponseHeader(q)}}z.CustomRequestHeaders={},z.CustomRequestModifiers=new Array,z.SkipRequestModificationForBabylonCDN=!0}}]);