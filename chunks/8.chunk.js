"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[8],{12319:(e,d,v)=>{v.d(d,{b:()=>q});var P=v(12281),p=v(12253),L=v(12321),B=v(12350),X=v(12265);class z{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,e&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(e){this._zOffset!==e&&(this._zOffset=e,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(e){this._zOffsetUnits!==e&&(this._zOffsetUnits=e,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(e){this._cullFace!==e&&(this._cullFace=e,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(e){this._cull!==e&&(this._cull=e,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(e){this._depthFunc!==e&&(this._depthFunc=e,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(e){this._depthMask!==e&&(this._depthMask=e,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(e){this._depthTest!==e&&(this._depthTest=e,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(e){this._frontFace!==e&&(this._frontFace=e,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(e){this.isDirty&&(this._isCullDirty&&(this.cull?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(e.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(e.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(e.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.zOffset,this.zOffsetUnits)):e.disable(e.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(e.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class W{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(e){this._func!==e&&(this._func=e,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(e){this._funcRef!==e&&(this._funcRef=e,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(e){this._funcMask!==e&&(this._funcMask=e,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(e){this._opStencilFail!==e&&(this._opStencilFail=e,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(e){this._opDepthFail!==e&&(this._opDepthFail=e,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(e){this._opStencilDepthPass!==e&&(this._opStencilDepthPass=e,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(e){this._mask!==e&&(this._mask=e,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this._isStencilTestDirty=!0)}constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,e&&this.reset()}reset(){var e;this.stencilMaterial=void 0,null===(e=this.stencilGlobal)||void 0===e||e.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(e){var d;if(!e)return;const v=!this.useStencilGlobalOnly&&!(null===(d=this.stencilMaterial)||void 0===d||!d.enabled);this.enabled=v?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=v?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=v?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=v?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=v?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=v?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=v?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=v?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(e.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(e.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(e.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class V{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=V.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=V.KEEP,this.opDepthFail=V.KEEP,this.opStencilDepthPass=V.REPLACE}get stencilFunc(){return this.func}set stencilFunc(e){this.func=e}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(e){this.funcRef=e}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(e){this.funcMask=e}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(e){this.opStencilFail=e}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(e){this.opDepthFail=e}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(e){this.opStencilDepthPass=e}get stencilMask(){return this.mask}set stencilMask(e){this.mask=e}get stencilTest(){return this.enabled}set stencilTest(e){this.enabled=e}}V.ALWAYS=519,V.KEEP=7680,V.REPLACE=7681;class k{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(e){this._alphaBlend!==e&&(this._alphaBlend=e,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(e,d,v,P){this._blendConstants[0]===e&&this._blendConstants[1]===d&&this._blendConstants[2]===v&&this._blendConstants[3]===P||(this._blendConstants[0]=e,this._blendConstants[1]=d,this._blendConstants[2]=v,this._blendConstants[3]=P,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(e,d,v,P){this._blendFunctionParameters[0]===e&&this._blendFunctionParameters[1]===d&&this._blendFunctionParameters[2]===v&&this._blendFunctionParameters[3]===P||(this._blendFunctionParameters[0]=e,this._blendFunctionParameters[1]=d,this._blendFunctionParameters[2]=v,this._blendFunctionParameters[3]=P,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(e,d){this._blendEquationParameters[0]===e&&this._blendEquationParameters[1]===d||(this._blendEquationParameters[0]=e,this._blendEquationParameters[1]=d,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(e){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?e.enable(e.BLEND):e.disable(e.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(e.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(e.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(e.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var g=v(12268),F=v(12357),w=v(12250),G=v(12248),U=v(12306),D=v(12366);function C(e,d){if((0,w.k)()){const{requestAnimationFrame:v}=d||window;if("function"===typeof v)return v(e)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(e);return setTimeout(e,16)}class q{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(e){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Wd(){return this._useReverseDepthBuffer}set Wd(e){e!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=e,this._depthCullingState.depthFunc=e?518:515)}setColorWrite(e){e!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=e)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(e){if(e)return this.isNDCHalfZRange?e.IS_NDC_HALF_ZRANGE="":delete e.IS_NDC_HALF_ZRANGE,this.Wd?e.USE_REVERSE_DEPTHBUFFER="":delete e.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?e.USE_EXACT_SRGB_CONVERSIONS="":delete e.USE_EXACT_SRGB_CONVERSIONS);{let e="";return this.isNDCHalfZRange&&(e+="#define IS_NDC_HALF_ZRANGE"),this.Wd&&(e&&(e+="\n"),e+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(e&&(e+="\n"),e+="#define USE_EXACT_SRGB_CONVERSIONS"),e}}_rebuildInternalTextures(){const e=this._internalTexturesCache.slice();for(const d of e)d._rebuild()}_rebuildRenderTargetWrappers(){const e=this._renderTargetWrapperCache.slice();for(const d of e)d._rebuild()}_rebuildEffects(){for(const e in this._compiledEffects){const d=this._compiledEffects[e];d._pipelineContext=null,d._prepareEffect()}L.Effect.ResetCache()}_rebuildGraphicsResources(){var e;this.wipeCaches(!0),this._rebuildEffects(),null===(e=this._rebuildComputeEffects)||void 0===e||e.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){p.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(e){setTimeout((()=>{this._clearEmptyResources();const d=this._depthCullingState.depthTest,v=this._depthCullingState.depthFunc,P=this._depthCullingState.depthMask,p=this._stencilState.stencilTest;e(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=d,this._depthCullingState.depthFunc=v,this._depthCullingState.depthMask=P,this._stencilState.stencilTest=p,this._flagContextRestored()}),0)}get W(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(e){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(e){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const e=new Uint8Array(4),d=[e,e,e,e,e,e];this._emptyCubeTexture=this.createRawCubeTexture(d,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(e){if(!e)return this._activeRenderLoops.length=0,void this._cancelFrame();const d=this._activeRenderLoops.indexOf(e);d>=0&&(this._activeRenderLoops.splice(d,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const e=this._frameHandler;if(this._frameHandler=0,(0,w.k)()){const{cancelAnimationFrame:d}=this.getHostWindow()||window;if("function"===typeof d)return d(e)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(e);return clearTimeout(e)}}kd(){this.onBeginFrameObservable.notifyObservers(this)}gd(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(e){this._maxFPS=e,void 0!==e&&(this._minFrameTime=e<=0?Number.MAX_VALUE:1e3/e)}_isOverFrameTime(e){if(!e||void 0===this._maxFPS)return!1;const d=e-this._lastFrameTime;return this._lastFrameTime=e,this._renderAccumulator+=d,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(e){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(e)){let e=!0;(this.W||!this.renderEvenInBackground&&this._windowIsBackground)&&(e=!1),e&&(this.kd(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.gd())}}_renderLoop(e){this._processFrame(e),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let e=0;e<this._activeRenderLoops.length;e++){(0,this._activeRenderLoops[e])()}}_renderViews(){return!1}_queueNewFrame(e,d){return C(e,d)}runRenderLoop(e){-1===this._activeRenderLoops.indexOf(e)&&(this._activeRenderLoops.push(e),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(e){this._depthCullingState.depthTest=e}setZOffset(e){this._depthCullingState.zOffset=this.Wd?-e:e}getZOffset(){const e=this._depthCullingState.zOffset;return this.Wd?-e:e}setZOffsetUnits(e){this._depthCullingState.zOffsetUnits=this.Wd?-e:e}getZOffsetUnits(){const e=this._depthCullingState.zOffsetUnits;return this.Wd?-e:e}getHostWindow(){return(0,w.k)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(e){this._compatibilityMode=!0}_rebuildTextures(){for(const e of this.scenes)e._rebuildTextures();for(const e of this._virtualScenes)e._rebuildTextures()}_releaseRenderTargetWrapper(e){const d=this._renderTargetWrapperCache.indexOf(e);-1!==d&&this._renderTargetWrapperCache.splice(d,1)}get currentViewport(){return this._cachedViewport}setViewport(e,d,v){const P=d||this.getRenderWidth(),p=v||this.getRenderHeight(),L=e.x||0,B=e.y||0;this._cachedViewport=e,this._viewport(L*P,B*p,P*e.width,p*e.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(e){return new Path2D(e)}get description(){let e=this.name+this.version;return this._caps.parallelShaderCompile&&(e+=" - Parallel shader compilation"),e}_createTextureBase(e,d,v,L){let B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,W=arguments.length>7?arguments[7]:void 0,V=arguments.length>8?arguments[8]:void 0,k=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,w=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,G=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,U=arguments.length>13?arguments[13]:void 0,C=arguments.length>14?arguments[14]:void 0,h=arguments.length>15?arguments[15]:void 0;const l="data:"===(e=e||"").substring(0,5),n="blob:"===e.substring(0,5),A=l&&-1!==e.indexOf(";base64,"),x=g||new F.b(this,1);x!==g&&(x.label=e.substring(0,60));const i=e;!this._transformTextureUrl||A||g||k||(e=this._transformTextureUrl(e)),i!==e&&(x._originalUrl=i);const me=e.lastIndexOf(".");let r=G||(me>-1?e.substring(me).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const Z=(0,D.e)(r,U);L&&L.addPendingData(x),x.url=e,x.generateMipMaps=!d,x.samplingMode=B,x.invertY=v,x._useSRGBBuffer=this._getUseSRGBBuffer(!!h,d),this._doNotHandleContextLost||(x._buffer=k);let f=null;X&&!g&&(f=x.onLoadedObservable.add(X)),g||this._internalTexturesCache.push(x);const T=(v,g)=>{L&&L.removePendingData(x),e===i?(f&&x.onLoadedObservable.remove(f),P.c.UseFallbackTexture&&e!==P.c.FallbackTexture&&this._createTextureBase(P.c.FallbackTexture,d,x.invertY,L,B,null,z,W,V,k,x),v=(v||"Unknown error")+(P.c.UseFallbackTexture?" - Fallback texture was used":""),x.onErrorObservable.notifyObservers({message:v,exception:g}),z&&z(v,g)):(p.c.Warn(`Failed to load ${e}, falling back to ${i}`),this._createTextureBase(i,d,x.invertY,L,B,X,z,W,V,k,x,w,G,U,C,h))};if(Z){const d=async e=>{(await Z).loadData(e,x,((e,d,v,P,p,X)=>{X?T("TextureLoader failed to load data"):W(x,r,L,{width:e,height:d},x.invertY,!v,P,(()=>(p(),!1)),B)}),C)};k?k instanceof ArrayBuffer?d(new Uint8Array(k)):ArrayBuffer.isView(k)?d(k):z&&z("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(e,(e=>{d(new Uint8Array(e))}),void 0,L?L.offlineProvider:void 0,!0,((e,d)=>{T("Unable to load "+(e&&e.responseURL,d))}))}else{const v=e=>{n&&!this._doNotHandleContextLost&&(x._buffer=e),W(x,r,L,e,x.invertY,d,!1,V,B)};!l||A?k&&("string"===typeof k.decoding||k.close)?v(k):q._FileToolsLoadImage(e||"",v,T,L?L.offlineProvider:null,U,x.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof k||k instanceof ArrayBuffer||ArrayBuffer.isView(k)||k instanceof Blob?q._FileToolsLoadImage(k,v,T,L?L.offlineProvider:null,U,x.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):k&&v(k)}return x}_rebuildBuffers(){for(const e of this._uniformBuffers)e._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,w.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const e in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,e)&&(this._boundTexturesCache[e]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(e){this._name=e}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(e){this._hardwareScalingLevel=e,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(e){this._doNotHandleContextLost=e}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(e,d,v){var p,L;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new z,this._stencilStateComposer=new W,this._stencilState=new V,this._alphaState=new k,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new G.d,this.onCanvasFocusObservable=new G.d,this.onNewSceneAddedObservable=new G.d,this.onResizeObservable=new G.d,this.onCanvasPointerOutObservable=new G.d,this.onEffectErrorObservable=new G.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new G.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=e=>this._renderLoop(e),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new G.d,this.onAfterShaderCompilationObservable=new G.d,this.onBeginFrameObservable=new G.d,this.onEndFrameObservable=new G.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new G.d,this.onContextRestoredObservable=new G.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Fd=new G.d,this.onReleaseEffectsObservable=new G.d,P.c.Instances.push(this),this.startTime=X.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,B.b.SetMatrixPrecision(!!d.useHighPrecisionMatrix),(0,w.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=v??!1,d.antialias=e??d.antialias,d.deterministicLockstep=d.deterministicLockstep??!1,d.lockstepMaxSteps=d.lockstepMaxSteps??4,d.timeStep=d.timeStep??1/60,d.hd=d.hd??!0,this._audioContext=(null===(p=d.audioEngineOptions)||void 0===p?void 0:p.audioContext)??null,this._audioDestination=(null===(L=d.audioEngineOptions)||void 0===L?void 0:L.audioDestination)??null,this.premultipliedAlpha=d.premultipliedAlpha??!0,this._doNotHandleContextLost=!!d.doNotHandleContextLost,this._isStencilEnable=!!d.hd,this.useExactSrgbConversions=d.useExactSrgbConversions??!1;const g=(0,w.k)()&&window.devicePixelRatio||1,F=d.limitDeviceRatio||g;v=v||d.adaptToDeviceRatio||!1,this._hardwareScalingLevel=v?1/Math.min(F,g):1,this._lastDevicePixelRatio=g,this._creationOptions=d}resize(){let e,d,v=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const e=(0,w.k)()&&window.devicePixelRatio||1,d=this._lastDevicePixelRatio/e;this._lastDevicePixelRatio=e,this._hardwareScalingLevel*=d}if((0,w.k)()&&(0,w.h)())if(this._renderingCanvas){var P,p;const v=null===(P=(p=this._renderingCanvas).getBoundingClientRect)||void 0===P?void 0:P.call(p);e=this._renderingCanvas.clientWidth||(null===v||void 0===v?void 0:v.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,d=this._renderingCanvas.clientHeight||(null===v||void 0===v?void 0:v.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else e=window.innerWidth,d=window.innerHeight;else e=this._renderingCanvas?this._renderingCanvas.width:100,d=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(e/this._hardwareScalingLevel,d/this._hardwareScalingLevel,v)}setSize(e,d){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(e|=0,d|=0,!v&&this._renderingCanvas.width===e&&this._renderingCanvas.height===d)return!1;if(this._renderingCanvas.width=e,this._renderingCanvas.height=d,this.scenes){for(let e=0;e<this.scenes.length;e++){const d=this.scenes[e];for(let e=0;e<d.cameras.length;e++){d.cameras[e]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(e,d,v,P,p,L,B,X,z,W,V){throw(0,g.e)("engine.rawTexture")}createRawCubeTexture(e,d,v,P,p,L,B,X){throw(0,g.e)("engine.rawTexture")}createRawTexture3D(e,d,v,P,p,L,B,X,z,W,V){throw(0,g.e)("engine.rawTexture")}createRawTexture2DArray(e,d,v,P,p,L,B,X,z,W,V){throw(0,g.e)("engine.rawTexture")}_sharedInit(e){this._renderingCanvas=e}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const e=navigator.userAgent;this.hostInformation.isMobile=-1!==e.indexOf("Mobile")||-1!==e.indexOf("Mac")&&(0,w.h)()&&"ontouchend"in document},this._checkForMobile(),(0,w.k)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(e){return document.createElement("video")}_reportDrawCall(){var e;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(e=this._drawCalls)||void 0===e||e.addCount(d,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(e,d){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(e,d){return createImageBitmap(e,d)}resizeImageBitmap(e,d,v){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(e){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(e,d){if("undefined"===typeof document)return new OffscreenCanvas(e,d);const v=document.createElement("canvas");return v.width=e,v.height=d,v}createCanvas(e,d){return q._CreateCanvas(e,d)}static _FileToolsLoadImage(e,d,v,P,p,L,B){throw(0,g.e)("FileTools")}_loadFile(e,d,v,P,p,L){const B=(0,U.k)(e,d,v,P,p,L);return this._activeRequests.push(B),B.onCompleteObservable.add((()=>{const e=this._activeRequests.indexOf(B);-1!==e&&this._activeRequests.splice(e,1)})),B}static _FileToolsLoadFile(e,d,v,P,p,L){if(U.e.loadFile)return U.e.loadFile(e,d,v,P,p,L);throw(0,g.e)("FileTools")}dispose(){var e;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(e=this.releaseComputeEffects)||void 0===e||e.call(this),L.Effect.ResetCache();for(const v of this._activeRequests)v.abort();this._boundRenderFunction=null,this.Fd.notifyObservers(this),this.Fd.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,w.k)()&&window.removeEventListener("resize",this._checkForMobile);const d=P.c.Instances.indexOf(this);d>=0&&P.c.Instances.splice(d,1),P.c.Instances.length||(P.c.OnEnginesDisposedObservable.notifyObservers(this),P.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(e){throw(0,g.e)("LoadingScreen")}static MarkAllMaterialsAsDirty(e,d){for(let v=0;v<P.c.Instances.length;v++){const p=P.c.Instances[v];for(let v=0;v<p.scenes.length;v++)p.scenes[v].markAllMaterialsAsDirty(e,d)}}}q._RenderPassIdCounter=0,q._RescalePostProcessFactory=null,q.CollisionsEpsilon=.001,q.QueueNewFrame=C},12281:(e,d,v)=>{v.d(d,{c:()=>p});var P=v(12248);class p{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}p.Instances=[],p.OnEnginesDisposedObservable=new P.d,p._LastCreatedScene=null,p.UseFallbackTexture=!0,p.FallbackTexture=""},12350:(e,d,v)=>{v.d(d,{b:()=>P});class P{static SetMatrixPrecision(e){if(P.MatrixTrackPrecisionChange=!1,e&&!P.MatrixUse64Bits&&P.MatrixTrackedMatrices)for(let d=0;d<P.MatrixTrackedMatrices.length;++d){const e=P.MatrixTrackedMatrices[d],v=e.ld;e.ld=new Array(16);for(let d=0;d<16;++d)e.ld[d]=v[d]}P.MatrixUse64Bits=e,P.MatrixCurrentType=P.MatrixUse64Bits?Array:Float32Array,P.MatrixTrackedMatrices=null}}P.MatrixUse64Bits=!1,P.MatrixTrackPrecisionChange=!0,P.MatrixCurrentType=Float32Array,P.MatrixTrackedMatrices=[]},12366:(e,d,v)=>{v.d(d,{e:()=>B});var P=v(12253);const p=new Map;function L(e,d){(function(e){return p.delete(e)})(e)&&P.c.Warn(`Extension with the name '${e}' already exists`),p.set(e,d)}function B(e,d){"image/ktx"!==d&&"image/ktx2"!==d||(e=".ktx"),p.has(e)||(e.endsWith(".ies")&&L(".ies",(async()=>await v.e(15).then(v.bind(v,14863)).then((e=>new e._IESTextureLoader)))),e.endsWith(".dds")&&L(".dds",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(19),v.e(18),v.e(28)]).then(v.bind(v,14868)).then((e=>new e._DDSTextureLoader)))),e.endsWith(".basis")&&L(".basis",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(47)]).then(v.bind(v,14882)).then((e=>new e._BasisTextureLoader)))),e.endsWith(".env")&&L(".env",(async()=>await Promise.all([v.e(14),v.e(17),v.e(13),v.e(19),v.e(18),v.e(23),v.e(21),v.e(45),v.e(48)]).then(v.bind(v,14890)).then((e=>new e._ENVTextureLoader)))),e.endsWith(".hdr")&&L(".hdr",(async()=>await Promise.all([v.e(14),v.e(49)]).then(v.bind(v,14898)).then((e=>new e._HDRTextureLoader)))),(e.endsWith(".ktx")||e.endsWith(".ktx2"))&&(L(".ktx",(async()=>await v.e(30).then(v.bind(v,14905)).then((e=>new e._KTXTextureLoader)))),L(".ktx2",(async()=>await v.e(30).then(v.bind(v,14905)).then((e=>new e._KTXTextureLoader))))),e.endsWith(".tga")&&L(".tga",(async()=>await v.e(50).then(v.bind(v,14912)).then((e=>new e._TGATextureLoader)))),e.endsWith(".exr")&&L(".exr",(async()=>await v.e(16).then(v.bind(v,14918)).then((e=>new e._ExrTextureLoader)))));const P=p.get(e);return P?Promise.resolve(P(d)):null}},12357:(e,d,v)=>{v.d(d,{b:()=>B});var P,p=v(12248),L=v(12359);!function(e){e[e.Unknown=0]="Unknown",e[e.Url=1]="Url",e[e.Temp=2]="Temp",e[e.Raw=3]="Raw",e[e.Dynamic=4]="Dynamic",e[e.RenderTarget=5]="RenderTarget",e[e.MultiRenderTarget=6]="MultiRenderTarget",e[e.Cube=7]="Cube",e[e.CubeRaw=8]="CubeRaw",e[e.CubePrefiltered=9]="CubePrefiltered",e[e.Raw3D=10]="Raw3D",e[e.Raw2DArray=11]="Raw2DArray",e[e.DepthStencil=12]="DepthStencil",e[e.CubeRawRGBD=13]="CubeRawRGBD",e[e.Depth=14]="Depth"}(P||(P={}));class B extends L.b{get useMipMaps(){return this.generateMipMaps}set useMipMaps(e){this.generateMipMaps=e}get uniqueId(){return this._uniqueId}_setUniqueId(e){this._uniqueId=e}getEngine(){return this._engine}get source(){return this._source}constructor(e,d){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new p.d,this.onErrorObservable=new p.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=e,this._source=d,this._uniqueId=B._Counter++,v||(this._hardwareTexture=e._createHardwareTexture())}incrementReferences(){this._references++}updateSize(e,d){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,e,d,v),this.width=e,this.height=d,this.depth=v,this.baseWidth=e,this.baseHeight=d,this.baseDepth=v,this._size=e*d*v}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const e=this.onRebuildCallback(this),d=d=>{d._swapAndDie(this,!1),this.isReady=e.isReady};return void(e.isAsync?e.proxy.then(d):d(e.proxy))}let e;switch(this.source){case 2:case 12:case 14:break;case 1:return void(e=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(e=>{e._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:e=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),e._swapAndDie(this,!1),this.isReady=!0;break;case 10:e=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),e._swapAndDie(this,!1),this.isReady=!0;break;case 11:e=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),e._swapAndDie(this,!1),this.isReady=!0;break;case 4:e=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),e._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(e=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{e._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:e=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),e._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return e=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(e=>{e&&e._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(e._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(e){var d;let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(d=this._hardwareTexture)||void 0===d||d.setUsage(e._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),e._hardwareTexture=this._hardwareTexture,v&&(e._isRGBD=this._isRGBD),this._lodTextureHigh&&(e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(e._lodTextureLow&&e._lodTextureLow.dispose(),e._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(e._irradianceTexture&&e._irradianceTexture.dispose(),e._irradianceTexture=this._irradianceTexture);const P=this._engine.getLoadedTexturesCache();let p=P.indexOf(this);-1!==p&&P.splice(p,1),p=P.indexOf(e),-1===p&&P.push(e)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}B._Counter=0},12359:(e,d,v)=>{v.d(d,{b:()=>P});class P{get wrapU(){return this._cachedWrapU}set wrapU(e){this._cachedWrapU=e}get wrapV(){return this._cachedWrapV}set wrapV(e){this._cachedWrapV=e}get wrapR(){return this._cachedWrapR}set wrapR(e){this._cachedWrapR=e}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(e){this._cachedAnisotropicFilteringLevel=e}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(e){this._comparisonFunction=e}get useMipMaps(){return this._useMipMaps}set useMipMaps(e){this._useMipMaps=e}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=e,this._cachedWrapV=d,this._cachedWrapR=v,this._cachedAnisotropicFilteringLevel=P,this.samplingMode=p,this._comparisonFunction=L,this}compareSampler(e){return this._cachedWrapU===e._cachedWrapU&&this._cachedWrapV===e._cachedWrapV&&this._cachedWrapR===e._cachedWrapR&&this._cachedAnisotropicFilteringLevel===e._cachedAnisotropicFilteringLevel&&this.samplingMode===e.samplingMode&&this._comparisonFunction===e._comparisonFunction&&this._useMipMaps===e._useMipMaps}}},12262:(e,d,v)=>{v.d(d,{e:()=>L});var P=v(12253);const p=(e,d,v)=>e?e.getClassName&&"Mesh"===e.getClassName()?null:!e.getClassName||"SubMesh"!==e.getClassName()&&"PhysicsBody"!==e.getClassName()?e.clone?e.clone():Array.isArray(e)?e.slice():v&&"object"===typeof e?{...e}:null:e.clone(d):null;class L{static DeepCopy(e,d,v,L){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const X=function(e){const d=[];do{const v=Object.getOwnPropertyNames(e);for(const e of v)-1===d.indexOf(e)&&d.push(e)}while(e=Object.getPrototypeOf(e));return d}(e);for(const W of X){if("_"===W[0]&&(!L||-1===L.indexOf(W)))continue;if(W.endsWith("Observable"))continue;if(v&&-1!==v.indexOf(W))continue;const X=e[W],V=typeof X;if("function"!==V)try{if("object"===V)if(X instanceof Uint8Array)d[W]=Uint8Array.from(X);else if(X instanceof Array){if(d[W]=[],X.length>0)if("object"==typeof X[0])for(let e=0;e<X.length;e++){const v=p(X[e],d,B);-1===d[W].indexOf(v)&&d[W].push(v)}else d[W]=X.slice(0)}else d[W]=p(X,d,B);else d[W]=X}catch(z){P.c.Warn(z.message)}}}}},12291:(e,d,v)=>{v.d(d,{e:()=>P,h:()=>p,i:()=>L});class P extends Error{}P._setPrototypeOf=Object.setPrototypeOf||((e,d)=>(e.__proto__=d,e));const p={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class L extends P{constructor(e,d,v){super(e),this.errorCode=d,this.innerError=v,this.name="RuntimeError",P._setPrototypeOf(this,L.prototype)}}},12283:(e,d,v)=>{v.d(d,{c:()=>T,e:()=>q,f:()=>me,g:()=>Z,n:()=>x,k:()=>U,q:()=>n,t:()=>A,x:()=>i,z:()=>h});var P=v(12277),p=v(12250),L=v(12248);class B{}B.FilesToLoad={};var X=v(12291),z=v(12295),W=v(12303),V=v(12281),k=v(12253),g=v(12314),F=v(12306),w=v(12319);const G=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class U extends X.i{constructor(e,d){super(e,X.h.LoadFileError),this.name="LoadFileError",X.e._setPrototypeOf(this,U.prototype),d instanceof P.d?this.request=d:this.file=d}}class D extends X.i{constructor(e,d){super(e,X.h.RequestFileError),this.request=d,this.name="RequestFileError",X.e._setPrototypeOf(this,D.prototype)}}class C extends X.i{constructor(e,d){super(e,X.h.ReadFileError),this.file=d,this.name="ReadFileError",X.e._setPrototypeOf(this,C.prototype)}}const q={DefaultRetryStrategy:class{static ExponentialBackoff(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(v,P,p)=>0!==P.status||p>=e||-1!==v.indexOf("file:")?-1:Math.pow(2,p)*d}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:e=>e,ScriptBaseUrl:"",ScriptPreprocessUrl:e=>e,CleanUrl:e=>e=e.replace(/#/gm,"%23")},h=(e,d)=>{if((!e||0!==e.indexOf("data:"))&&q.CorsBehavior)if("string"===typeof q.CorsBehavior||q.CorsBehavior instanceof String)d.crossOrigin=q.CorsBehavior;else{const v=q.CorsBehavior(e);v&&(d.crossOrigin=v)}},l={getRequiredSize:null},n=function(e,d,v,p){let L,X=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",W=arguments.length>5?arguments[5]:void 0,k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:V.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===k||void 0===k||!k._features.forceBitmapOverHTMLImageElement))return v("LoadImage is only supported in web or BabylonNative environments."),null;let g=!1;e instanceof ArrayBuffer||ArrayBuffer.isView(e)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(L=URL.createObjectURL(new Blob([e],{type:X})),g=!0):L=`data:${X};base64,`+(0,z.k)(e):e instanceof Blob?(L=URL.createObjectURL(e),g=!0):(L=q.CleanUrl(e),L=q.PreprocessUrl(L));const F=d=>{if(v){const P=L||e.toString();v(`Error while trying to load image: ${0===P.indexOf("http")||P.length<=128?P:P.slice(0,128)+"..."}`,d)}};if(null!==k&&void 0!==k&&k._features.forceBitmapOverHTMLImageElement)return x(L,(P=>{k.createImageBitmap(new Blob([P],{type:X}),{premultiplyAlpha:"none",...W}).then((e=>{d(e),g&&URL.revokeObjectURL(L)})).catch((d=>{v&&v("Error while trying to load image: "+e,d)}))}),void 0,p||void 0,!0,((e,d)=>{F(d)})),null;const w=new Image;if(l.getRequiredSize){const d=l.getRequiredSize(e);d.width&&(w.width=d.width),d.height&&(w.height=d.height)}h(L,w);const G=[],U=()=>{for(const e of G)e.target.removeEventListener(e.name,e.handler);G.length=0};G.push({target:w,name:"load",handler:()=>{U(),d(w),g&&w.src&&URL.revokeObjectURL(w.src)}}),G.push({target:w,name:"error",handler:e=>{U(),F(e),g&&w.src&&URL.revokeObjectURL(w.src)}}),G.push({target:document,name:"securitypolicyviolation",handler:e=>{if(e.blockedURI!==w.src||"xd"===e.disposition)return;U();const d=new Error(`CSP violation of policy ${e.effectiveDirective} ${e.blockedURI}. Current policy is ${e.originalPolicy}`);V.c.UseFallbackTexture=!1,F(d),g&&w.src&&URL.revokeObjectURL(w.src),w.src=""}}),(()=>{for(const e of G)e.target.addEventListener(e.name,e.handler)})();const D="blob:"===L.substring(0,5),C="data:"===L.substring(0,5),n=()=>{D||C||!P.d.IsCustomRequestAvailable?w.src=L:x(L,((e,d,v)=>{const P=new Blob([e],{type:!X&&v?v:X}),p=URL.createObjectURL(P);g=!0,w.src=p}),void 0,p||void 0,!0,((e,d)=>{F(d)}))},A=()=>{p&&p.loadImage(L,w)};if(!D&&!C&&p&&p.enableTexturesOffline)p.open(A,n);else{if(-1!==L.indexOf("file:")){const e=decodeURIComponent(L.substring(5).toLowerCase());if(B.FilesToLoad[e]&&"undefined"!==typeof URL){try{let d;try{d=URL.createObjectURL(B.FilesToLoad[e])}catch(i){d=URL.createObjectURL(B.FilesToLoad[e])}w.src=d,g=!0}catch(me){w.src=""}return w}}n()}return w},A=(e,d,v,P,p)=>{const B=new FileReader,X={onCompleteObservable:new L.d,abort:()=>B.abort()};return B.onloadend=()=>X.onCompleteObservable.notifyObservers(X),p&&(B.onerror=()=>{p(new C(`Unable to read ${e.name}`,e))}),B.onload=e=>{d(e.target.result)},v&&(B.onprogress=v),P?B.readAsArrayBuffer(e):B.readAsText(e),X},x=(e,d,v,P,p,z,W)=>{if(e.name)return A(e,d,v,p,z?e=>{z(void 0,e)}:void 0);const V=e;if(-1!==V.indexOf("file:")){let e=decodeURIComponent(V.substring(5).toLowerCase());0===e.indexOf("./")&&(e=e.substring(2));const P=B.FilesToLoad[e];if(P)return A(P,d,v,p,z?e=>z(void 0,new U(e.message,e.file)):void 0)}const{match:F,type:w}=f(V);if(F){const e={onCompleteObservable:new L.d,abort:()=>()=>{}};try{const e=p?T(V):S(V);d(e,void 0,w)}catch(X){z?z(void 0,X):k.c.Error(X.message||"Failed to parse the Data URL")}return g.e.SetImmediate((()=>{e.onCompleteObservable.notifyObservers(e)})),e}return i(V,((e,v)=>{d(e,null===v||void 0===v?void 0:v.responseURL,null===v||void 0===v?void 0:v.getResponseHeader("content-type"))}),v,P,p,z?e=>{z(e.request,new U(e.message,e.request))}:void 0,W)},i=(e,d,v,B,X,z,W)=>{e=q.CleanUrl(e),e=q.PreprocessUrl(e);const V=q.BaseUrl+e;let g=!1;const F={onCompleteObservable:new L.d,abort:()=>g=!0},w=()=>{let e,L=new P.d,B=null;const w=()=>{L&&(v&&L.removeEventListener("progress",v),e&&L.removeEventListener("readystatechange",e),L.removeEventListener("loadend",G))};let G=()=>{w(),F.onCompleteObservable.notifyObservers(F),F.onCompleteObservable.clear(),v=void 0,e=null,G=null,z=void 0,W=void 0,d=void 0};F.abort=()=>{g=!0,G&&G(),L&&L.readyState!==(XMLHttpRequest.DONE||4)&&L.abort(),null!==B&&(clearTimeout(B),B=null),L=null};const U=e=>{const d=e.message||"Unknown error";z&&L?z(new D(d,L)):k.c.Error(d)},C=k=>{if(L){if(L.open("GET",V),W)try{W(L)}catch(F){return void U(F)}X&&(L.responseType="arraybuffer"),v&&L.addEventListener("progress",v),G&&L.addEventListener("loadend",G),e=()=>{if(!g&&L&&L.readyState===(XMLHttpRequest.DONE||4)){if(e&&L.removeEventListener("readystatechange",e),L.status>=200&&L.status<300||0===L.status&&(!(0,p.k)()||r())){const e=X?L.response:L.responseText;if(null!==e){try{d&&d(e,L)}catch(F){U(F)}return}}const v=q.DefaultRetryStrategy;if(v){const e=v(V,L,k);if(-1!==e)return w(),L=new P.d,void(B=setTimeout((()=>C(k+1)),e))}const W=new D("Error status: "+L.status+" "+L.statusText+" - Unable to load "+V,L);z&&z(W)}},L.addEventListener("readystatechange",e),L.send()}};C(0)};if(B&&B.enableSceneOffline){const P=e=>{e&&e.status>400?z&&z(e):w()},p=()=>{B&&B.loadFile(q.BaseUrl+e,(e=>{!g&&d&&d(e),F.onCompleteObservable.notifyObservers(F)}),v?e=>{!g&&v&&v(e)}:void 0,P,X)};B.open(p,P)}else w();return F},me=e=>{const{match:d,type:v}=f(e);if(d)return v||void 0;const P=e.lastIndexOf(".");switch(e.substring(P+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"rd":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,Z=e=>G.test(e),f=e=>{const d=G.exec(e);if(null===d||0===d.length)return{match:!1,type:""};return{match:!0,type:d[0].replace("data:","").replace("base64,","")}};function T(e){return(0,z.e)(e.split(",")[1])}const S=e=>(0,z.f)(e.split(",")[1]);let o;w.b._FileToolsLoadImage=n,F.e.loadFile=x,W.l.loadFile=x;((e,d,v,P,p,L,B,X,z,W)=>{o={DecodeBase64UrlToBinary:e,DecodeBase64UrlToString:d,DefaultRetryStrategy:v.DefaultRetryStrategy,BaseUrl:v.BaseUrl,CorsBehavior:v.CorsBehavior,PreprocessUrl:v.PreprocessUrl,IsBase64DataUrl:P,IsFileURL:p,LoadFile:L,LoadImage:B,ReadFile:X,RequestFile:z,SetCorsBehavior:W},Object.defineProperty(o,"DefaultRetryStrategy",{get:function(){return v.DefaultRetryStrategy},set:function(e){v.DefaultRetryStrategy=e}}),Object.defineProperty(o,"BaseUrl",{get:function(){return v.BaseUrl},set:function(e){v.BaseUrl=e}}),Object.defineProperty(o,"PreprocessUrl",{get:function(){return v.PreprocessUrl},set:function(e){v.PreprocessUrl=e}}),Object.defineProperty(o,"CorsBehavior",{get:function(){return v.CorsBehavior},set:function(e){v.CorsBehavior=e}})})(T,S,q,Z,r,x,n,A,i,h)},12384:(e,d,v)=>{function P(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const d=16*Math.random()|0;return("x"===e?d:3&d|8).toString(16)}))}v.d(d,{b:()=>P})},12372:(e,d,v)=>{v.d(d,{e:()=>L});var P=v(12253),p=v(12381);class L{static Instantiate(e){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[e])return this.RegisteredExternalClasses[e];const d=(0,p.e)(e);if(d)return d;P.c.Warn(e+" not found, you may have missed an import.");const v=e.split(".");let L=window||this;for(let P=0,p=v.length;P<p;P++)L=L[v[P]];return"function"!==typeof L?null:L}}L.RegisteredExternalClasses={}},12265:(e,d,v)=>{v.d(d,{d:()=>p});var P=v(12250);class p{static get Now(){return(0,P.k)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12295:(e,d,v)=>{v.d(d,{e:()=>B,f:()=>L,j:()=>P,k:()=>p});const P=e=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let d="";for(let v=0;v<e.byteLength;v++)d+=String.fromCharCode(e[v]);return d},p=e=>{const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let v,P,p,L,B,X,z,W="",V=0;const k=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);for(;V<k.length;)v=k[V++],P=V<k.length?k[V++]:Number.NaN,p=V<k.length?k[V++]:Number.NaN,L=v>>2,B=(3&v)<<4|P>>4,X=(15&P)<<2|p>>6,z=63&p,isNaN(P)?X=z=64:isNaN(p)&&(z=64),W+=d.charAt(L)+d.charAt(B)+d.charAt(X)+d.charAt(z);return W},L=e=>atob(e),B=e=>{const d=L(e),v=d.length,P=new Uint8Array(new ArrayBuffer(v));for(let p=0;p<v;p++)P[p]=d.charCodeAt(p);return P.buffer}},12388:(e,d,v)=>{function P(e){let d=1;do{d*=2}while(d<e);return d===e}function p(e,d,v){return e*(1-v)+d*v}function L(e){const d=B(e),v=X(e);return d-e>e-v?v:d}function B(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function X(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)-(e>>1)}function z(e,d){let v;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:v=X(e);break;case 2:v=L(e);break;default:v=B(e)}return Math.min(v,d)}v.d(d,{b:()=>X,f:()=>z,j:()=>P,l:()=>p,m:()=>L})},12240:(e,d,v)=>{v.r(d),v.d(d,{AsyncLoop:()=>C,Tools:()=>U,className:()=>D});var P=v(12248),p=v(12250),L=v(12253),B=v(12262),X=v(12265),z=v(12268),W=v(12277),V=v(12281),k=v(12283),g=v(12314),F=v(12372),w=v(12384),G=v(12388);class U{static get BaseUrl(){return k.e.BaseUrl}static set BaseUrl(e){k.e.BaseUrl=e}static get CleanUrl(){return k.e.CleanUrl}static set CleanUrl(e){k.e.CleanUrl=e}static IsAbsoluteUrl(e){return 0===e.indexOf("//")||-1!==e.indexOf("://")&&(-1!==e.indexOf(".")&&(-1!==e.indexOf("/")&&(!(e.indexOf(":")>e.indexOf("/"))&&(e.indexOf("://")<e.indexOf(".")||(0===e.indexOf("data:")||0===e.indexOf("blob:"))))))}static set ScriptBaseUrl(e){k.e.ScriptBaseUrl=e}static get ScriptBaseUrl(){return k.e.ScriptBaseUrl}static set CDNBaseUrl(e){U.ScriptBaseUrl=e,U.AssetBaseUrl=e}static set ScriptPreprocessUrl(e){k.e.ScriptPreprocessUrl=e}static get ScriptPreprocessUrl(){return k.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return k.e.DefaultRetryStrategy}static set DefaultRetryStrategy(e){k.e.DefaultRetryStrategy=e}static get CorsBehavior(){return k.e.CorsBehavior}static set CorsBehavior(e){k.e.CorsBehavior=e}static get UseFallbackTexture(){return V.c.UseFallbackTexture}static set UseFallbackTexture(e){V.c.UseFallbackTexture=e}static get RegisteredExternalClasses(){return F.e.RegisteredExternalClasses}static set RegisteredExternalClasses(e){F.e.RegisteredExternalClasses=e}static get fallbackTexture(){return V.c.FallbackTexture}static set fallbackTexture(e){V.c.FallbackTexture=e}static FetchToRef(e,d,v,P,p,L){const B=4*((Math.abs(e)*v%v|0)+(Math.abs(d)*P%P|0)*v);L.r=p[B]/255,L.g=p[B+1]/255,L.b=p[B+2]/255,L.a=p[B+3]/255}static Mix(e,d,v){return 0}static Instantiate(e){return F.e.Instantiate(e)}static SetImmediate(e){g.e.SetImmediate(e)}static IsExponentOfTwo(e){return!0}static FloatRound(e){return Math.fround(e)}static GetFilename(e){const d=e.lastIndexOf("/");return d<0?e:e.substring(d+1)}static GetFolderPath(e){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const v=e.lastIndexOf("/");return v<0?d?e:"":e.substring(0,v+1)}static ToDegrees(e){return 180*e/Math.PI}static ToRadians(e){return e*Math.PI/180}static SmoothAngleChange(e,d){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const P=this.ToRadians(e),p=this.ToRadians(d);return this.ToDegrees(Math.atan2((1-v)*Math.sin(p)+v*Math.sin(P),(1-v)*Math.cos(p)+v*Math.cos(P)))}static MakeArray(e,d){return!0===d||void 0!==e&&null!=e?Array.isArray(e)?e:[e]:null}static GetPointerPrefix(e){return(0,p.k)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(e,d){(0,k.z)(e,d)}static SetReferrerPolicyBehavior(e,d){d.referrerPolicy=e}static get PreprocessUrl(){return k.e.PreprocessUrl}static set PreprocessUrl(e){k.e.PreprocessUrl=e}static LoadImage(e,d,v,P,p,L){return(0,k.q)(e,d,v,P,p,L)}static LoadFile(e,d,v,P,p,L){return(0,k.n)(e,d,v,P,p,L)}static async LoadFileAsync(e){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((v,P)=>{(0,k.n)(e,(e=>{v(e)}),void 0,void 0,d,((e,d)=>{P(d)}))}))}static GetAssetUrl(e){if(!e)return"";if(U.AssetBaseUrl&&e.startsWith(U._DefaultAssetsUrl)){const d="/"===U.AssetBaseUrl[U.AssetBaseUrl.length-1]?U.AssetBaseUrl.substring(0,U.AssetBaseUrl.length-1):U.AssetBaseUrl;return e.replace(U._DefaultAssetsUrl,d)}return e}static GetBabylonScriptURL(e,d){if(!e)return"";if(U.ScriptBaseUrl&&e.startsWith(U._DefaultCdnUrl)){const d="/"===U.ScriptBaseUrl[U.ScriptBaseUrl.length-1]?U.ScriptBaseUrl.substring(0,U.ScriptBaseUrl.length-1):U.ScriptBaseUrl;e=e.replace(U._DefaultCdnUrl,d)}return e=U.ScriptPreprocessUrl(e),d&&(e=U.GetAbsoluteUrl(e)),e}static LoadBabylonScript(e,d,v,P){e=U.GetBabylonScriptURL(e),U.LoadScript(e,d,v)}static async LoadBabylonScriptAsync(e){return e=U.GetBabylonScriptURL(e),await U.LoadScriptAsync(e)}static LoadScript(e,d,v,P){let L=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(e),d&&d()}catch(z){null===v||void 0===v||v(`Unable to load script '${e}' in worker`,z)}return}if(!(0,p.k)())return void(null===v||void 0===v||v(`Cannot load script '${e}' outside of a window or a worker`));const B=document.getElementsByTagName("head")[0],X=document.createElement("script");L?(X.setAttribute("type","module"),X.innerText=e):(X.setAttribute("type","text/javascript"),X.setAttribute("src",e)),P&&(X.id=P),X.onload=()=>{d&&d()},X.onerror=d=>{v&&v(`Unable to load script '${e}'`,d)},B.appendChild(X)}static async LoadScriptAsync(e,d){return await new Promise(((v,P)=>{this.LoadScript(e,(()=>{v()}),((e,d)=>{P(d||new Error(e))}),d)}))}static ReadFileAsDataURL(e,d,v){const p=new FileReader,L={onCompleteObservable:new P.d,abort:()=>p.abort()};return p.onloadend=()=>{L.onCompleteObservable.notifyObservers(L)},p.onload=e=>{d(e.target.result)},p.onprogress=v,p.readAsDataURL(e),L}static ReadFile(e,d,v,P,p){return(0,k.t)(e,d,v,P,p)}static FileAsURL(e){const d=new Blob([e]);return window.URL.createObjectURL(d)}static Format(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toFixed(d)}static DeepCopy(e,d,v,P){B.e.DeepCopy(e,d,v,P)}static IsEmpty(e){for(const d in e)if(Object.prototype.hasOwnProperty.call(e,d))return!1;return!0}static RegisterTopRootEvents(e,d){for(let P=0;P<d.length;P++){const p=d[P];e.addEventListener(p.name,p.handler,!1);try{window.parent&&window.parent.addEventListener(p.name,p.handler,!1)}catch(v){}}}static UnregisterTopRootEvents(e,d){for(let P=0;P<d.length;P++){const p=d[P];e.removeEventListener(p.name,p.handler);try{e.parent&&e.parent.removeEventListener(p.name,p.handler)}catch(v){}}}static async DumpFramebuffer(e,d,v,P){throw(0,z.e)("DumpTools")}static DumpData(e,d,v,P){throw(0,z.e)("DumpTools")}static async DumpDataAsync(e,d,v){throw(0,z.e)("DumpTools")}static _IsOffScreenCanvas(e){return void 0!==e.convertToBlob}static ToBlob(e,d){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",P=arguments.length>3?arguments[3]:void 0;U._IsOffScreenCanvas(e)||e.toBlob||(e.toBlob=function(e,d,v){setTimeout((()=>{const P=atob(this.toDataURL(d,v).split(",")[1]),p=P.length,L=new Uint8Array(p);for(let e=0;e<p;e++)L[e]=P.charCodeAt(e);e(new Blob([L]))}))}),U._IsOffScreenCanvas(e)?e.convertToBlob({type:v,quality:P}).then((e=>d(e))):e.toBlob((function(e){d(e)}),v,P)}static DownloadBlob(e,d){if("download"in document.createElement("a")){if(!d){const e=new Date;d="screenshot_"+((e.getFullYear()+"-"+(e.getMonth()+1)).slice(2)+"-"+e.getDate()+"_"+e.getHours()+"-"+("0"+e.getMinutes()).slice(-2))+".png"}U.Download(e,d)}else if(e&&"undefined"!==typeof URL){const d=URL.createObjectURL(e),v=window.open("");if(!v)return;const P=v.document.createElement("img");P.onload=function(){URL.revokeObjectURL(d)},P.src=d,v.document.body.appendChild(P)}}static EncodeScreenshotCanvasData(e,d){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",P=arguments.length>3?arguments[3]:void 0,p=arguments.length>4?arguments[4]:void 0;if("string"!==typeof P&&d){if(d){if(U._IsOffScreenCanvas(e))return void e.convertToBlob({type:v,quality:p}).then((e=>{const v=new FileReader;v.readAsDataURL(e),v.onloadend=()=>{const e=v.result;d(e)}}));const P=e.toDataURL(v,p);d(P)}}else this.ToBlob(e,(function(e){e&&U.DownloadBlob(e,P),d&&d("")}),v,p)}static Download(e,d){if("undefined"===typeof URL)return;const v=window.URL.createObjectURL(e),P=document.createElement("a");document.body.appendChild(P),P.style.display="none",P.href=v,P.download=d,P.addEventListener("click",(()=>{P.parentElement&&P.parentElement.removeChild(P)})),P.click(),window.URL.revokeObjectURL(v)}static BackCompatCameraNoPreventDefault(e){return"boolean"===typeof e[0]?e[0]:"boolean"===typeof e[1]&&e[1]}static CreateScreenshot(e,d,v,P){throw(0,z.e)("ScreenshotTools")}static async CreateScreenshotAsync(e,d,v){throw(0,z.e)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(e,d,v,P){throw(0,z.e)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(e,d,v){throw(0,z.e)("ScreenshotTools")}static RandomId(){return(0,w.b)()}static IsBase64(e){return(0,k.g)(e)}static DecodeBase64(e){return(0,k.c)(e)}static get errorsCount(){return L.c.errorsCount}static Log(e){L.c.Log(e)}static Warn(e){L.c.Warn(e)}static Error(e){L.c.Error(e)}static get LogCache(){return L.c.LogCache}static ClearLogCache(){L.c.ClearLogCache()}static set LogLevels(e){L.c.LogLevels=e}static set PerformanceLogLevel(e){return(e&U.PerformanceUserMarkLogLevel)===U.PerformanceUserMarkLogLevel?(U.StartPerformanceCounter=U._StartUserMark,void(U.EndPerformanceCounter=U._EndUserMark)):(e&U.PerformanceConsoleLogLevel)===U.PerformanceConsoleLogLevel?(U.StartPerformanceCounter=U._StartPerformanceConsole,void(U.EndPerformanceCounter=U._EndPerformanceConsole)):(U.StartPerformanceCounter=U._StartPerformanceCounterDisabled,void(U.EndPerformanceCounter=U._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(e,d){}static _EndPerformanceCounterDisabled(e,d){}static _StartUserMark(e){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!U._Performance){if(!(0,p.k)())return;U._Performance=window.performance}d&&U._Performance.mark&&U._Performance.mark(e+"-Begin")}static _EndUserMark(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&U._Performance.mark&&(U._Performance.mark(e+"-End"),U._Performance.measure(e,e+"-Begin",e+"-End"))}static _StartPerformanceConsole(e){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(U._StartUserMark(e,d),console.time&&console.time(e))}static _EndPerformanceConsole(e){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d&&(U._EndUserMark(e,d),console.timeEnd(e))}static get Now(){return X.d.Now}static GetClassName(e){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=null;if(!d&&e.getClassName)v=e.getClassName();else{if(e instanceof Object){v=(d?e:Object.getPrototypeOf(e)).constructor.__bjsclassName__}v||(v=typeof e)}return v}static First(e,d){for(const v of e)if(d(v))return v;return null}static getFullClassName(e){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=null,P=null;if(!d&&e.getClassName)v=e.getClassName();else{if(e instanceof Object){const p=d?e:Object.getPrototypeOf(e);v=p.constructor.__bjsclassName__,P=p.constructor.__bjsmoduleName__}v||(v=typeof e)}return v?(null!=P?P+".":"")+v:null}static async DelayAsync(e){await new Promise((d=>{setTimeout((()=>{d()}),e)}))}static IsSafari(){return!!(0,p.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function D(e,d){return v=>{v.__bjsclassName__=e,v.__bjsmoduleName__=null!=d?d:null}}U.AssetBaseUrl="",U.UseCustomRequestHeaders=!1,U.CustomRequestHeaders=W.d.CustomRequestHeaders,U.GetDOMTextContent=p.d,U._DefaultCdnUrl="https://cdn.babylonjs.com",U._DefaultAssetsUrl="https://assets.babylonjs.com/core",U.GetAbsoluteUrl="object"===typeof document?e=>{const d=document.createElement("a");return d.href=e,d.href}:"function"===typeof URL&&"object"===typeof location?e=>new URL(e,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},U.NoneLogLevel=L.c.NoneLogLevel,U.MessageLogLevel=L.c.MessageLogLevel,U.WarningLogLevel=L.c.WarningLogLevel,U.ErrorLogLevel=L.c.ErrorLogLevel,U.AllLogLevel=L.c.AllLogLevel,U.IsWindowObjectExist=p.k,U.PerformanceNoneLogLevel=0,U.PerformanceUserMarkLogLevel=1,U.PerformanceConsoleLogLevel=2,U.StartPerformanceCounter=U._StartPerformanceCounterDisabled,U.EndPerformanceCounter=U._EndPerformanceCounterDisabled;class C{constructor(e,d,v){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=e,this.index=P-1,this._done=!1,this._fn=d,this._successCallback=v}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(e,d,v){const P=new C(e,d,v,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return P.executeNext(),P}static SyncAsyncForLoop(e,d,v,P,p){let L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return C.Run(Math.ceil(e/d),(P=>{p&&p()?P.breakLoop():setTimeout((()=>{for(let L=0;L<d;++L){const B=P.index*d+L;if(B>=e)break;if(v(B),p&&p()){P.breakLoop();break}}P.executeNext()}),L)}),P)}}U.Mix=G.l,U.IsExponentOfTwo=G.j,V.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12381:(e,d,v)=>{v.d(d,{e:()=>L,h:()=>p});const P={};function p(e,d){P[e]=d}function L(e){return P[e]}},12277:(e,d,v)=>{v.d(d,{d:()=>P});class P{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(P.CustomRequestHeaders).length>0||P.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const e in P.CustomRequestHeaders){const d=P.CustomRequestHeaders[e];d&&this._xhr.setRequestHeader(e,d)}}_shouldSkipRequestModifications(e){return P.SkipRequestModificationForBabylonCDN&&(e.includes("preview.babylonjs.com")||e.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(e){this._xhr.onprogress=e}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(e){this._xhr.responseType=e}get timeout(){return this._xhr.timeout}set timeout(e){this._xhr.timeout=e}addEventListener(e,d,v){this._xhr.addEventListener(e,d,v)}removeEventListener(e,d,v){this._xhr.removeEventListener(e,d,v)}abort(){this._xhr.abort()}send(e){P.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(e)}open(e,d){for(const v of P.CustomRequestModifiers){if(this._shouldSkipRequestModifications(d))return;d=v(this._xhr,d)||d}d=(d=d.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=d,this._xhr.open(e,d,!0)}setRequestHeader(e,d){this._xhr.setRequestHeader(e,d)}getResponseHeader(e){return this._xhr.getResponseHeader(e)}}P.CustomRequestHeaders={},P.CustomRequestModifiers=new Array,P.SkipRequestModificationForBabylonCDN=!0}}]);