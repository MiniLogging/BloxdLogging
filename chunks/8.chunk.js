"use strict";(self.zcqpiao938m=self.zcqpiao938m||[]).push([[8],{11735:(C,U,K)=>{K.d(U,{b:()=>F});var m=K(11703),O=K(11679),X=K(11741),A=K(11764),e=K(11688);class t{constructor(){let C=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,C&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(C){this._zOffset!==C&&(this._zOffset=C,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(C){this._zOffsetUnits!==C&&(this._zOffsetUnits=C,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(C){this._cullFace!==C&&(this._cullFace=C,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(C){this._cull!==C&&(this._cull=C,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(C){this._depthFunc!==C&&(this._depthFunc=C,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(C){this._depthMask!==C&&(this._depthMask=C,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(C){this._depthTest!==C&&(this._depthTest=C,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(C){this._frontFace!==C&&(this._frontFace=C,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(C){this.isDirty&&(this._isCullDirty&&(this.cull?C.enable(C.CULL_FACE):C.disable(C.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(C.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(C.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?C.enable(C.DEPTH_TEST):C.disable(C.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(C.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(C.enable(C.POLYGON_OFFSET_FILL),C.polygonOffset(this.zOffset,this.zOffsetUnits)):C.disable(C.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(C.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class z{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(C){this._func!==C&&(this._func=C,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(C){this._funcRef!==C&&(this._funcRef=C,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(C){this._funcMask!==C&&(this._funcMask=C,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(C){this._opStencilFail!==C&&(this._opStencilFail=C,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(C){this._opDepthFail!==C&&(this._opDepthFail=C,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(C){this._opStencilDepthPass!==C&&(this._opStencilDepthPass=C,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(C){this._mask!==C&&(this._mask=C,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(C){this._enabled!==C&&(this._enabled=C,this._isStencilTestDirty=!0)}constructor(){let C=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,C&&this.reset()}reset(){var C;this.stencilMaterial=void 0,null===(C=this.stencilGlobal)||void 0===C||C.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(C){var U;if(!C)return;const K=!this.useStencilGlobalOnly&&!(null===(U=this.stencilMaterial)||void 0===U||!U.enabled);this.enabled=K?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=K?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=K?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=K?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=K?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=K?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=K?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=K?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?C.enable(C.STENCIL_TEST):C.disable(C.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(C.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(C.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(C.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class j{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=j.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=j.KEEP,this.opDepthFail=j.KEEP,this.opStencilDepthPass=j.REPLACE}get stencilFunc(){return this.func}set stencilFunc(C){this.func=C}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(C){this.funcRef=C}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(C){this.funcMask=C}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(C){this.opStencilFail=C}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(C){this.opDepthFail=C}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(C){this.opStencilDepthPass=C}get stencilMask(){return this.mask}set stencilMask(C){this.mask=C}get stencilTest(){return this.enabled}set stencilTest(C){this.enabled=C}}j.ALWAYS=519,j.KEEP=7680,j.REPLACE=7681;class p{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(C){this._alphaBlend!==C&&(this._alphaBlend=C,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(C,U,K,m){this._blendConstants[0]===C&&this._blendConstants[1]===U&&this._blendConstants[2]===K&&this._blendConstants[3]===m||(this._blendConstants[0]=C,this._blendConstants[1]=U,this._blendConstants[2]=K,this._blendConstants[3]=m,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(C,U,K,m){this._blendFunctionParameters[0]===C&&this._blendFunctionParameters[1]===U&&this._blendFunctionParameters[2]===K&&this._blendFunctionParameters[3]===m||(this._blendFunctionParameters[0]=C,this._blendFunctionParameters[1]=U,this._blendFunctionParameters[2]=K,this._blendFunctionParameters[3]=m,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(C,U){this._blendEquationParameters[0]===C&&this._blendEquationParameters[1]===U||(this._blendEquationParameters[0]=C,this._blendEquationParameters[1]=U,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(C){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?C.enable(C.BLEND):C.disable(C.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(C.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(C.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(C.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var E=K(11696),u=K(11773),b=K(11670),v=K(11663),Q=K(11726),V=K(11779);function f(C,U){if((0,b.g)()){const{requestAnimationFrame:K}=U||window;if("function"===typeof K)return K(C)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(C);return setTimeout(C,16)}class F{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(C){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(C){C!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=C,this._depthCullingState.depthFunc=C?518:515)}setColorWrite(C){C!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=C)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(C){if(C)return this.isNDCHalfZRange?C.IS_NDC_HALF_ZRANGE="":delete C.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?C.USE_REVERSE_DEPTHBUFFER="":delete C.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?C.USE_EXACT_SRGB_CONVERSIONS="":delete C.USE_EXACT_SRGB_CONVERSIONS);{let C="";return this.isNDCHalfZRange&&(C+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(C&&(C+="\n"),C+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(C&&(C+="\n"),C+="#define USE_EXACT_SRGB_CONVERSIONS"),C}}_rebuildInternalTextures(){const C=this._internalTexturesCache.slice();for(const U of C)U._rebuild()}_rebuildRenderTargetWrappers(){const C=this._renderTargetWrapperCache.slice();for(const U of C)U._rebuild()}_rebuildEffects(){for(const C in this._compiledEffects){const U=this._compiledEffects[C];U._pipelineContext=null,U._prepareEffect()}X.Effect.ResetCache()}_rebuildGraphicsResources(){var C;this.wipeCaches(!0),this._rebuildEffects(),null===(C=this._rebuildComputeEffects)||void 0===C||C.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){O.d.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(C){setTimeout((()=>{this._clearEmptyResources();const U=this._depthCullingState.depthTest,K=this._depthCullingState.depthFunc,m=this._depthCullingState.depthMask,O=this._stencilState.stencilTest;C(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=U,this._depthCullingState.depthFunc=K,this._depthCullingState.depthMask=m,this._stencilState.stencilTest=O,this._flagContextRestored()}),0)}get A(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(C){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(C){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const C=new Uint8Array(4),U=[C,C,C,C,C,C];this._emptyCubeTexture=this.createRawCubeTexture(U,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(C){if(!C)return this._activeRenderLoops.length=0,void this._cancelFrame();const U=this._activeRenderLoops.indexOf(C);U>=0&&(this._activeRenderLoops.splice(U,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const C=this._frameHandler;if(this._frameHandler=0,(0,b.g)()){const{cancelAnimationFrame:U}=this.getHostWindow()||window;if("function"===typeof U)return U(C)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(C);return clearTimeout(C)}}o(){this.onBeginFrameObservable.notifyObservers(this)}sA(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(C){this._maxFPS=C,void 0!==C&&(this._minFrameTime=C<=0?Number.MAX_VALUE:1e3/C)}_isOverFrameTime(C){if(!C||void 0===this._maxFPS)return!1;const U=C-this._lastFrameTime;return this._lastFrameTime=C,this._renderAccumulator+=U,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(C){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(C)){let C=!0;(this.A||!this.renderEvenInBackground&&this._windowIsBackground)&&(C=!1),C&&(this.o(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.sA())}}_renderLoop(C){this._processFrame(C),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let C=0;C<this._activeRenderLoops.length;C++){(0,this._activeRenderLoops[C])()}}_renderViews(){return!1}_queueNewFrame(C,U){return f(C,U)}runRenderLoop(C){-1===this._activeRenderLoops.indexOf(C)&&(this._activeRenderLoops.push(C),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(C){this._depthCullingState.depthTest=C}setZOffset(C){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-C:C}getZOffset(){const C=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-C:C}setZOffsetUnits(C){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-C:C}getZOffsetUnits(){const C=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-C:C}getHostWindow(){return(0,b.g)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(C){this._compatibilityMode=!0}_rebuildTextures(){for(const C of this.scenes)C._rebuildTextures();for(const C of this._virtualScenes)C._rebuildTextures()}_releaseRenderTargetWrapper(C){const U=this._renderTargetWrapperCache.indexOf(C);-1!==U&&this._renderTargetWrapperCache.splice(U,1)}get currentViewport(){return this._cachedViewport}setViewport(C,U,K){const m=U||this.getRenderWidth(),O=K||this.getRenderHeight(),X=C.x||0,A=C.y||0;this._cachedViewport=C,this._viewport(X*m,A*O,m*C.width,O*C.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(C){return new Path2D(C)}get description(){let C=this.name+this.version;return this._caps.parallelShaderCompile&&(C+=" - Parallel shader compilation"),C}_createTextureBase(C,U,K,X){let A=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,z=arguments.length>7?arguments[7]:void 0,j=arguments.length>8?arguments[8]:void 0,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,E=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,Q=arguments.length>13?arguments[13]:void 0,f=arguments.length>14?arguments[14]:void 0,Z=arguments.length>15?arguments[15]:void 0;const P="data:"===(C=C||"").substring(0,5),H="blob:"===C.substring(0,5),d=P&&-1!==C.indexOf(";base64,"),T=E||new u.d(this,1);T!==E&&(T.label=C.substring(0,60));const y=C;!this._transformTextureUrl||d||E||p||(C=this._transformTextureUrl(C)),y!==C&&(T._originalUrl=y);const a=C.lastIndexOf(".");let r=v||(a>-1?C.substring(a).toLowerCase():"");r.indexOf("?")>-1&&(r=r.split("?")[0]);const i=(0,V.b)(r,Q);X&&X.addPendingData(T),T.url=C,T.generateMipMaps=!U,T.samplingMode=A,T.invertY=K,T._useSRGBBuffer=this._getUseSRGBBuffer(!!Z,U),this._doNotHandleContextLost||(T._buffer=p);let D=null;e&&!E&&(D=T.onLoadedObservable.add(e)),E||this._internalTexturesCache.push(T);const l=(K,E)=>{X&&X.removePendingData(T),C===y?(D&&T.onLoadedObservable.remove(D),m.c.UseFallbackTexture&&C!==m.c.FallbackTexture&&this._createTextureBase(m.c.FallbackTexture,U,T.invertY,X,A,null,t,z,j,p,T),K=(K||"Unknown error")+(m.c.UseFallbackTexture?" - Fallback texture was used":""),T.onErrorObservable.notifyObservers({message:K,exception:E}),t&&t(K,E)):(O.d.Warn(`Failed to load ${C}, falling back to ${y}`),this._createTextureBase(y,U,T.invertY,X,A,e,t,z,j,p,T,b,v,Q,f,Z))};if(i){const U=async C=>{(await i).loadData(C,T,((C,U,K,m,O,e)=>{e?l("TextureLoader failed to load data"):z(T,r,X,{width:C,height:U},T.invertY,!K,m,(()=>(O(),!1)),A)}),f)};p?p instanceof ArrayBuffer?U(new Uint8Array(p)):ArrayBuffer.isView(p)?U(p):t&&t("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(C,(C=>{U(new Uint8Array(C))}),void 0,X?X.offlineProvider:void 0,!0,((C,U)=>{l("Unable to load "+(C&&C.responseURL,U))}))}else{const K=C=>{H&&!this._doNotHandleContextLost&&(T._buffer=C),z(T,r,X,C,T.invertY,U,!1,j,A)};!P||d?p&&("string"===typeof p.decoding||p.close)?K(p):F._FileToolsLoadImage(C||"",K,l,X?X.offlineProvider:null,Q,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof p||p instanceof ArrayBuffer||ArrayBuffer.isView(p)||p instanceof Blob?F._FileToolsLoadImage(p,K,l,X?X.offlineProvider:null,Q,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):p&&K(p)}return T}_rebuildBuffers(){for(const C of this._uniformBuffers)C._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,b.d)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const C in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,C)&&(this._boundTexturesCache[C]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(C){this._name=C}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(C){this._hardwareScalingLevel=C,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(C){this._doNotHandleContextLost=C}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(C,U,K){var O,X;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new t,this._stencilStateComposer=new z,this._stencilState=new j,this._alphaState=new p,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new v.b,this.onCanvasFocusObservable=new v.b,this.onNewSceneAddedObservable=new v.b,this.onResizeObservable=new v.b,this.onCanvasPointerOutObservable=new v.b,this.onEffectErrorObservable=new v.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new v.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=C=>this._renderLoop(C),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new v.b,this.onAfterShaderCompilationObservable=new v.b,this.onBeginFrameObservable=new v.b,this.onEndFrameObservable=new v.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new v.b,this.onContextRestoredObservable=new v.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.RA=new v.b,this.onReleaseEffectsObservable=new v.b,m.c.Instances.push(this),this.startTime=e.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,A.d.SetMatrixPrecision(!!U.useHighPrecisionMatrix),(0,b.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=K??!1,U.antialias=C??U.antialias,U.deterministicLockstep=U.deterministicLockstep??!1,U.lockstepMaxSteps=U.lockstepMaxSteps??4,U.timeStep=U.timeStep??1/60,U.stencil=U.stencil??!0,this._audioContext=(null===(O=U.audioEngineOptions)||void 0===O?void 0:O.audioContext)??null,this._audioDestination=(null===(X=U.audioEngineOptions)||void 0===X?void 0:X.audioDestination)??null,this.premultipliedAlpha=U.premultipliedAlpha??!0,this._doNotHandleContextLost=!!U.doNotHandleContextLost,this._isStencilEnable=!!U.stencil,this.useExactSrgbConversions=U.useExactSrgbConversions??!1;const E=(0,b.g)()&&window.devicePixelRatio||1,u=U.limitDeviceRatio||E;K=K||U.adaptToDeviceRatio||!1,this._hardwareScalingLevel=K?1/Math.min(u,E):1,this._lastDevicePixelRatio=E,this._creationOptions=U}resize(){let C,U,K=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const C=(0,b.g)()&&window.devicePixelRatio||1,U=this._lastDevicePixelRatio/C;this._lastDevicePixelRatio=C,this._hardwareScalingLevel*=U}if((0,b.g)()&&(0,b.d)())if(this._renderingCanvas){var m,O;const K=null===(m=(O=this._renderingCanvas).getBoundingClientRect)||void 0===m?void 0:m.call(O);C=this._renderingCanvas.clientWidth||(null===K||void 0===K?void 0:K.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,U=this._renderingCanvas.clientHeight||(null===K||void 0===K?void 0:K.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else C=window.innerWidth,U=window.innerHeight;else C=this._renderingCanvas?this._renderingCanvas.width:100,U=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(C/this._hardwareScalingLevel,U/this._hardwareScalingLevel,K)}setSize(C,U){let K=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(C|=0,U|=0,!K&&this._renderingCanvas.width===C&&this._renderingCanvas.height===U)return!1;if(this._renderingCanvas.width=C,this._renderingCanvas.height=U,this.scenes){for(let C=0;C<this.scenes.length;C++){const U=this.scenes[C];for(let C=0;C<U.cameras.length;C++){U.cameras[C]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(C,U,K,m,O,X,A,e,t,z,j){throw(0,E.b)("engine.rawTexture")}createRawCubeTexture(C,U,K,m,O,X,A,e){throw(0,E.b)("engine.rawTexture")}createRawTexture3D(C,U,K,m,O,X,A,e,t,z,j){throw(0,E.b)("engine.rawTexture")}createRawTexture2DArray(C,U,K,m,O,X,A,e,t,z,j){throw(0,E.b)("engine.rawTexture")}_sharedInit(C){this._renderingCanvas=C}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const C=navigator.userAgent;this.hostInformation.isMobile=-1!==C.indexOf("Mobile")||-1!==C.indexOf("Mac")&&(0,b.d)()&&"ontouchend"in document},this._checkForMobile(),(0,b.g)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(C){return document.createElement("video")}_reportDrawCall(){var C;let U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(C=this._drawCalls)||void 0===C||C.addCount(U,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(C,U){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(C,U){return createImageBitmap(C,U)}resizeImageBitmap(C,U,K){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(C){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(C,U){if("undefined"===typeof document)return new OffscreenCanvas(C,U);const K=document.createElement("canvas");return K.width=C,K.height=U,K}createCanvas(C,U){return F._CreateCanvas(C,U)}static _FileToolsLoadImage(C,U,K,m,O,X,A){throw(0,E.b)("FileTools")}_loadFile(C,U,K,m,O,X){const A=(0,Q.m)(C,U,K,m,O,X);return this._activeRequests.push(A),A.onCompleteObservable.add((()=>{const C=this._activeRequests.indexOf(A);-1!==C&&this._activeRequests.splice(C,1)})),A}static _FileToolsLoadFile(C,U,K,m,O,X){if(Q.e.loadFile)return Q.e.loadFile(C,U,K,m,O,X);throw(0,E.b)("FileTools")}dispose(){var C;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(C=this.releaseComputeEffects)||void 0===C||C.call(this),X.Effect.ResetCache();for(const K of this._activeRequests)K.abort();this._boundRenderFunction=null,this.RA.notifyObservers(this),this.RA.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,b.g)()&&window.removeEventListener("resize",this._checkForMobile);const U=m.c.Instances.indexOf(this);U>=0&&m.c.Instances.splice(U,1),m.c.Instances.length||(m.c.OnEnginesDisposedObservable.notifyObservers(this),m.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(C){throw(0,E.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(C,U){for(let K=0;K<m.c.Instances.length;K++){const O=m.c.Instances[K];for(let K=0;K<O.scenes.length;K++)O.scenes[K].markAllMaterialsAsDirty(C,U)}}}F._RenderPassIdCounter=0,F._RescalePostProcessFactory=null,F.CollisionsEpsilon=.001,F.QueueNewFrame=f},11703:(C,U,K)=>{K.d(U,{c:()=>O});var m=K(11663);class O{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}O.Instances=[],O.OnEnginesDisposedObservable=new m.b,O._LastCreatedScene=null,O.UseFallbackTexture=!0,O.FallbackTexture=""},11764:(C,U,K)=>{K.d(U,{d:()=>m});class m{static SetMatrixPrecision(C){if(m.MatrixTrackPrecisionChange=!1,C&&!m.MatrixUse64Bits&&m.MatrixTrackedMatrices)for(let U=0;U<m.MatrixTrackedMatrices.length;++U){const C=m.MatrixTrackedMatrices[U],K=C.qA;C.qA=new Array(16);for(let U=0;U<16;++U)C.qA[U]=K[U]}m.MatrixUse64Bits=C,m.MatrixCurrentType=m.MatrixUse64Bits?Array:Float32Array,m.MatrixTrackedMatrices=null}}m.MatrixUse64Bits=!1,m.MatrixTrackPrecisionChange=!0,m.MatrixCurrentType=Float32Array,m.MatrixTrackedMatrices=[]},11779:(C,U,K)=>{K.d(U,{b:()=>A});var m=K(11679);const O=new Map;function X(C,U){(function(C){return O.delete(C)})(C)&&m.d.Warn(`Extension with the name '${C}' already exists`),O.set(C,U)}function A(C,U){"image/ktx"!==U&&"image/ktx2"!==U||(C=".ktx"),O.has(C)||(C.endsWith(".ies")&&X(".ies",(async()=>await K.e(15).then(K.bind(K,14223)).then((C=>new C._IESTextureLoader)))),C.endsWith(".dds")&&X(".dds",(async()=>await Promise.all([K.e(14),K.e(17),K.e(13),K.e(19),K.e(18),K.e(28)]).then(K.bind(K,14230)).then((C=>new C._DDSTextureLoader)))),C.endsWith(".basis")&&X(".basis",(async()=>await Promise.all([K.e(14),K.e(17),K.e(13),K.e(47)]).then(K.bind(K,14245)).then((C=>new C._BasisTextureLoader)))),C.endsWith(".env")&&X(".env",(async()=>await Promise.all([K.e(14),K.e(17),K.e(13),K.e(19),K.e(18),K.e(23),K.e(21),K.e(45),K.e(48)]).then(K.bind(K,14251)).then((C=>new C._ENVTextureLoader)))),C.endsWith(".hdr")&&X(".hdr",(async()=>await Promise.all([K.e(14),K.e(49)]).then(K.bind(K,14259)).then((C=>new C._HDRTextureLoader)))),(C.endsWith(".ktx")||C.endsWith(".ktx2"))&&(X(".ktx",(async()=>await K.e(30).then(K.bind(K,14261)).then((C=>new C._KTXTextureLoader)))),X(".ktx2",(async()=>await K.e(30).then(K.bind(K,14261)).then((C=>new C._KTXTextureLoader))))),C.endsWith(".tga")&&X(".tga",(async()=>await K.e(50).then(K.bind(K,14266)).then((C=>new C._TGATextureLoader)))),C.endsWith(".exr")&&X(".exr",(async()=>await K.e(16).then(K.bind(K,14272)).then((C=>new C._ExrTextureLoader)))));const m=O.get(C);return m?Promise.resolve(m(U)):null}},11773:(C,U,K)=>{K.d(U,{d:()=>A});var m,O=K(11663),X=K(11775);!function(C){C[C.Unknown=0]="Unknown",C[C.Url=1]="Url",C[C.Temp=2]="Temp",C[C.Raw=3]="Raw",C[C.Dynamic=4]="Dynamic",C[C.RenderTarget=5]="RenderTarget",C[C.MultiRenderTarget=6]="MultiRenderTarget",C[C.Cube=7]="Cube",C[C.CubeRaw=8]="CubeRaw",C[C.CubePrefiltered=9]="CubePrefiltered",C[C.Raw3D=10]="Raw3D",C[C.Raw2DArray=11]="Raw2DArray",C[C.DepthStencil=12]="DepthStencil",C[C.CubeRawRGBD=13]="CubeRawRGBD",C[C.Depth=14]="Depth"}(m||(m={}));class A extends X.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(C){this.generateMipMaps=C}get uniqueId(){return this._uniqueId}_setUniqueId(C){this._uniqueId=C}getEngine(){return this._engine}get source(){return this._source}constructor(C,U){let K=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new O.b,this.onErrorObservable=new O.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=C,this._source=U,this._uniqueId=A._Counter++,K||(this._hardwareTexture=C._createHardwareTexture())}incrementReferences(){this._references++}updateSize(C,U){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,C,U,K),this.width=C,this.height=U,this.depth=K,this.baseWidth=C,this.baseHeight=U,this.baseDepth=K,this._size=C*U*K}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const C=this.onRebuildCallback(this),U=U=>{U._swapAndDie(this,!1),this.isReady=C.isReady};return void(C.isAsync?C.proxy.then(U):U(C.proxy))}let C;switch(this.source){case 2:case 12:case 14:break;case 1:return void(C=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(C=>{C._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:C=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),C._swapAndDie(this,!1),this.isReady=!0;break;case 10:C=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),C._swapAndDie(this,!1),this.isReady=!0;break;case 11:C=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),C._swapAndDie(this,!1),this.isReady=!0;break;case 4:C=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),C._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(C=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{C._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:C=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),C._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return C=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(C=>{C&&C._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(C._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(C){var U;let K=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(U=this._hardwareTexture)||void 0===U||U.setUsage(C._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),C._hardwareTexture=this._hardwareTexture,K&&(C._isRGBD=this._isRGBD),this._lodTextureHigh&&(C._lodTextureHigh&&C._lodTextureHigh.dispose(),C._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(C._lodTextureMid&&C._lodTextureMid.dispose(),C._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(C._lodTextureLow&&C._lodTextureLow.dispose(),C._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(C._irradianceTexture&&C._irradianceTexture.dispose(),C._irradianceTexture=this._irradianceTexture);const m=this._engine.getLoadedTexturesCache();let O=m.indexOf(this);-1!==O&&m.splice(O,1),O=m.indexOf(C),-1===O&&m.push(C)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}A._Counter=0},11775:(C,U,K)=>{K.d(U,{d:()=>m});class m{get wrapU(){return this._cachedWrapU}set wrapU(C){this._cachedWrapU=C}get wrapV(){return this._cachedWrapV}set wrapV(C){this._cachedWrapV=C}get wrapR(){return this._cachedWrapR}set wrapR(C){this._cachedWrapR=C}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(C){this._cachedAnisotropicFilteringLevel=C}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(C){this._comparisonFunction=C}get useMipMaps(){return this._useMipMaps}set useMipMaps(C){this._useMipMaps=C}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,O=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=C,this._cachedWrapV=U,this._cachedWrapR=K,this._cachedAnisotropicFilteringLevel=m,this.samplingMode=O,this._comparisonFunction=X,this}compareSampler(C){return this._cachedWrapU===C._cachedWrapU&&this._cachedWrapV===C._cachedWrapV&&this._cachedWrapR===C._cachedWrapR&&this._cachedAnisotropicFilteringLevel===C._cachedAnisotropicFilteringLevel&&this.samplingMode===C.samplingMode&&this._comparisonFunction===C._comparisonFunction&&this._useMipMaps===C._useMipMaps}}},11685:(C,U,K)=>{K.d(U,{b:()=>X});var m=K(11679);const O=(C,U,K)=>C?C.getClassName&&"Mesh"===C.getClassName()?null:!C.getClassName||"SubMesh"!==C.getClassName()&&"PhysicsBody"!==C.getClassName()?C.clone?C.clone():Array.isArray(C)?C.slice():K&&"object"===typeof C?{...C}:null:C.clone(U):null;class X{static DeepCopy(C,U,K,X){let A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const e=function(C){const U=[];do{const K=Object.getOwnPropertyNames(C);for(const C of K)-1===U.indexOf(C)&&U.push(C)}while(C=Object.getPrototypeOf(C));return U}(C);for(const z of e){if("_"===z[0]&&(!X||-1===X.indexOf(z)))continue;if(z.endsWith("Observable"))continue;if(K&&-1!==K.indexOf(z))continue;const e=C[z],j=typeof e;if("function"!==j)try{if("object"===j)if(e instanceof Uint8Array)U[z]=Uint8Array.from(e);else if(e instanceof Array){if(U[z]=[],e.length>0)if("object"==typeof e[0])for(let C=0;C<e.length;C++){const K=O(e[C],U,A);-1===U[z].indexOf(K)&&U[z].push(K)}else U[z]=e.slice(0)}else U[z]=O(e,U,A);else U[z]=e}catch(t){m.d.Warn(t.message)}}}}},11717:(C,U,K)=>{K.d(U,{c:()=>m,f:()=>O,j:()=>X});class m extends Error{}m._setPrototypeOf=Object.setPrototypeOf||((C,U)=>(C.__proto__=U,C));const O={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class X extends m{constructor(C,U,K){super(C),this.errorCode=U,this.innerError=K,this.name="RuntimeError",m._setPrototypeOf(this,X.prototype)}}},11709:(C,U,K)=>{K.d(U,{d:()=>l,g:()=>F,h:()=>a,i:()=>i,n:()=>T,j:()=>Q,r:()=>H,t:()=>d,w:()=>y,x:()=>Z});var m=K(11701),O=K(11670),X=K(11663);class A{}A.FilesToLoad={};var e=K(11717),t=K(11719),z=K(11724),j=K(11703),p=K(11679),E=K(11733),u=K(11726),b=K(11735);const v=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class Q extends e.j{constructor(C,U){super(C,e.f.LoadFileError),this.name="LoadFileError",e.c._setPrototypeOf(this,Q.prototype),U instanceof m.b?this.request=U:this.file=U}}class V extends e.j{constructor(C,U){super(C,e.f.RequestFileError),this.request=U,this.name="RequestFileError",e.c._setPrototypeOf(this,V.prototype)}}class f extends e.j{constructor(C,U){super(C,e.f.ReadFileError),this.file=U,this.name="ReadFileError",e.c._setPrototypeOf(this,f.prototype)}}const F={DefaultRetryStrategy:class{static ExponentialBackoff(){let C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(K,m,O)=>0!==m.status||O>=C||-1!==K.indexOf("file:")?-1:Math.pow(2,O)*U}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:C=>C,ScriptBaseUrl:"",ScriptPreprocessUrl:C=>C,CleanUrl:C=>C=C.replace(/#/gm,"%23")},Z=(C,U)=>{if((!C||0!==C.indexOf("data:"))&&F.CorsBehavior)if("string"===typeof F.CorsBehavior||F.CorsBehavior instanceof String)U.crossOrigin=F.CorsBehavior;else{const K=F.CorsBehavior(C);K&&(U.crossOrigin=K)}},P={getRequiredSize:null},H=function(C,U,K,O){let X,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",z=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:j.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===p||void 0===p||!p._features.forceBitmapOverHTMLImageElement))return K("LoadImage is only supported in web or BabylonNative environments."),null;let E=!1;C instanceof ArrayBuffer||ArrayBuffer.isView(C)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(X=URL.createObjectURL(new Blob([C],{type:e})),E=!0):X=`data:${e};base64,`+(0,t.m)(C):C instanceof Blob?(X=URL.createObjectURL(C),E=!0):(X=F.CleanUrl(C),X=F.PreprocessUrl(X));const u=U=>{if(K){const m=X||C.toString();K(`Error while trying to load image: ${0===m.indexOf("http")||m.length<=128?m:m.slice(0,128)+"..."}`,U)}};if(null!==p&&void 0!==p&&p._features.forceBitmapOverHTMLImageElement)return T(X,(m=>{p.createImageBitmap(new Blob([m],{type:e}),{premultiplyAlpha:"none",...z}).then((C=>{U(C),E&&URL.revokeObjectURL(X)})).catch((U=>{K&&K("Error while trying to load image: "+C,U)}))}),void 0,O||void 0,!0,((C,U)=>{u(U)})),null;const b=new Image;if(P.getRequiredSize){const U=P.getRequiredSize(C);U.width&&(b.width=U.width),U.height&&(b.height=U.height)}Z(X,b);const v=[],Q=()=>{for(const C of v)C.target.removeEventListener(C.name,C.handler);v.length=0};v.push({target:b,name:"load",handler:()=>{Q(),U(b),E&&b.src&&URL.revokeObjectURL(b.src)}}),v.push({target:b,name:"error",handler:C=>{Q(),u(C),E&&b.src&&URL.revokeObjectURL(b.src)}}),v.push({target:document,name:"securitypolicyviolation",handler:C=>{if(C.blockedURI!==b.src||"IA"===C.disposition)return;Q();const U=new Error(`CSP violation of policy ${C.effectiveDirective} ${C.blockedURI}. Current policy is ${C.originalPolicy}`);j.c.UseFallbackTexture=!1,u(U),E&&b.src&&URL.revokeObjectURL(b.src),b.src=""}}),(()=>{for(const C of v)C.target.addEventListener(C.name,C.handler)})();const V="blob:"===X.substring(0,5),f="data:"===X.substring(0,5),H=()=>{V||f||!m.b.IsCustomRequestAvailable?b.src=X:T(X,((C,U,K)=>{const m=new Blob([C],{type:!e&&K?K:e}),O=URL.createObjectURL(m);E=!0,b.src=O}),void 0,O||void 0,!0,((C,U)=>{u(U)}))},d=()=>{O&&O.loadImage(X,b)};if(!V&&!f&&O&&O.enableTexturesOffline)O.open(d,H);else{if(-1!==X.indexOf("file:")){const C=decodeURIComponent(X.substring(5).toLowerCase());if(A.FilesToLoad[C]&&"undefined"!==typeof URL){try{let U;try{U=URL.createObjectURL(A.FilesToLoad[C])}catch(y){U=URL.createObjectURL(A.FilesToLoad[C])}b.src=U,E=!0}catch(a){b.src=""}return b}}H()}return b},d=(C,U,K,m,O)=>{const A=new FileReader,e={onCompleteObservable:new X.b,abort:()=>A.abort()};return A.onloadend=()=>e.onCompleteObservable.notifyObservers(e),O&&(A.onerror=()=>{O(new f(`Unable to read ${C.name}`,C))}),A.onload=C=>{U(C.target.result)},K&&(A.onprogress=K),m?A.readAsArrayBuffer(C):A.readAsText(C),e},T=(C,U,K,m,O,t,z)=>{if(C.name)return d(C,U,K,O,t?C=>{t(void 0,C)}:void 0);const j=C;if(-1!==j.indexOf("file:")){let C=decodeURIComponent(j.substring(5).toLowerCase());0===C.indexOf("./")&&(C=C.substring(2));const m=A.FilesToLoad[C];if(m)return d(m,U,K,O,t?C=>t(void 0,new Q(C.message,C.file)):void 0)}const{match:u,type:b}=D(j);if(u){const C={onCompleteObservable:new X.b,abort:()=>()=>{}};try{const C=O?l(j):G(j);U(C,void 0,b)}catch(e){t?t(void 0,e):p.d.Error(e.message||"Failed to parse the Data URL")}return E.b.SetImmediate((()=>{C.onCompleteObservable.notifyObservers(C)})),C}return y(j,((C,K)=>{U(C,null===K||void 0===K?void 0:K.responseURL,null===K||void 0===K?void 0:K.getResponseHeader("content-type"))}),K,m,O,t?C=>{t(C.request,new Q(C.message,C.request))}:void 0,z)},y=(C,U,K,A,e,t,z)=>{C=F.CleanUrl(C),C=F.PreprocessUrl(C);const j=F.BaseUrl+C;let E=!1;const u={onCompleteObservable:new X.b,abort:()=>E=!0},b=()=>{let C,X=new m.b,A=null;const b=()=>{X&&(K&&X.removeEventListener("progress",K),C&&X.removeEventListener("readystatechange",C),X.removeEventListener("loadend",v))};let v=()=>{b(),u.onCompleteObservable.notifyObservers(u),u.onCompleteObservable.clear(),K=void 0,C=null,v=null,t=void 0,z=void 0,U=void 0};u.abort=()=>{E=!0,v&&v(),X&&X.readyState!==(XMLHttpRequest.DONE||4)&&X.abort(),null!==A&&(clearTimeout(A),A=null),X=null};const Q=C=>{const U=C.message||"Unknown error";t&&X?t(new V(U,X)):p.d.Error(U)},f=p=>{if(X){if(X.open("GET",j),z)try{z(X)}catch(u){return void Q(u)}e&&(X.responseType="arraybuffer"),K&&X.addEventListener("progress",K),v&&X.addEventListener("loadend",v),C=()=>{if(!E&&X&&X.readyState===(XMLHttpRequest.DONE||4)){if(C&&X.removeEventListener("readystatechange",C),X.status>=200&&X.status<300||0===X.status&&(!(0,O.g)()||r())){const C=e?X.response:X.responseText;if(null!==C){try{U&&U(C,X)}catch(u){Q(u)}return}}const K=F.DefaultRetryStrategy;if(K){const C=K(j,X,p);if(-1!==C)return b(),X=new m.b,void(A=setTimeout((()=>f(p+1)),C))}const z=new V("Error status: "+X.status+" "+X.statusText+" - Unable to load "+j,X);t&&t(z)}},X.addEventListener("readystatechange",C),X.send()}};f(0)};if(A&&A.enableSceneOffline){const m=C=>{C&&C.status>400?t&&t(C):b()},O=()=>{A&&A.loadFile(F.BaseUrl+C,(C=>{!E&&U&&U(C),u.onCompleteObservable.notifyObservers(u)}),K?C=>{!E&&K&&K(C)}:void 0,m,e)};A.open(O,m)}else b();return u},a=C=>{const{match:U,type:K}=D(C);if(U)return K||void 0;const m=C.lastIndexOf(".");switch(C.substring(m+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Ce":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},r=()=>"undefined"!==typeof location&&"file:"===location.protocol,i=C=>v.test(C),D=C=>{const U=v.exec(C);if(null===U||0===U.length)return{match:!1,type:""};return{match:!0,type:U[0].replace("data:","").replace("base64,","")}};function l(C){return(0,t.e)(C.split(",")[1])}const G=C=>(0,t.h)(C.split(",")[1]);let J;b.b._FileToolsLoadImage=H,u.e.loadFile=T,z.n.loadFile=T;((C,U,K,m,O,X,A,e,t,z)=>{J={DecodeBase64UrlToBinary:C,DecodeBase64UrlToString:U,DefaultRetryStrategy:K.DefaultRetryStrategy,BaseUrl:K.BaseUrl,CorsBehavior:K.CorsBehavior,PreprocessUrl:K.PreprocessUrl,IsBase64DataUrl:m,IsFileURL:O,LoadFile:X,LoadImage:A,ReadFile:e,RequestFile:t,SetCorsBehavior:z},Object.defineProperty(J,"DefaultRetryStrategy",{get:function(){return K.DefaultRetryStrategy},set:function(C){K.DefaultRetryStrategy=C}}),Object.defineProperty(J,"BaseUrl",{get:function(){return K.BaseUrl},set:function(C){K.BaseUrl=C}}),Object.defineProperty(J,"PreprocessUrl",{get:function(){return K.PreprocessUrl},set:function(C){K.PreprocessUrl=C}}),Object.defineProperty(J,"CorsBehavior",{get:function(){return K.CorsBehavior},set:function(C){K.CorsBehavior=C}})})(l,G,F,i,r,T,H,d,y,Z)},11793:(C,U,K)=>{function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(C=>{const U=16*Math.random()|0;return("x"===C?U:3&U|8).toString(16)}))}K.d(U,{d:()=>m})},11784:(C,U,K)=>{K.d(U,{e:()=>X});var m=K(11679),O=K(11789);class X{static Instantiate(C){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[C])return this.RegisteredExternalClasses[C];const U=(0,O.d)(C);if(U)return U;m.d.Warn(C+" not found, you may have missed an import.");const K=C.split(".");let X=window||this;for(let m=0,O=K.length;m<O;m++)X=X[K[m]];return"function"!==typeof X?null:X}}X.RegisteredExternalClasses={}},11688:(C,U,K)=>{K.d(U,{c:()=>O});var m=K(11670);class O{static get Now(){return(0,m.g)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11719:(C,U,K)=>{K.d(U,{e:()=>A,h:()=>X,j:()=>m,m:()=>O});const m=C=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(C);let U="";for(let K=0;K<C.byteLength;K++)U+=String.fromCharCode(C[K]);return U},O=C=>{const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let K,m,O,X,A,e,t,z="",j=0;const p=ArrayBuffer.isView(C)?new Uint8Array(C.buffer,C.byteOffset,C.byteLength):new Uint8Array(C);for(;j<p.length;)K=p[j++],m=j<p.length?p[j++]:Number.NaN,O=j<p.length?p[j++]:Number.NaN,X=K>>2,A=(3&K)<<4|m>>4,e=(15&m)<<2|O>>6,t=63&O,isNaN(m)?e=t=64:isNaN(O)&&(t=64),z+=U.charAt(X)+U.charAt(A)+U.charAt(e)+U.charAt(t);return z},X=C=>atob(C),A=C=>{const U=X(C),K=U.length,m=new Uint8Array(new ArrayBuffer(K));for(let O=0;O<K;O++)m[O]=U.charCodeAt(O);return m.buffer}},11802:(C,U,K)=>{function m(C){let U=1;do{U*=2}while(U<C);return U===C}function O(C,U,K){return C*(1-K)+U*K}function X(C){const U=A(C),K=e(C);return U-C>C-K?K:U}function A(C){return C--,C|=C>>1,C|=C>>2,C|=C>>4,C|=C>>8,C|=C>>16,++C}function e(C){return C|=C>>1,C|=C>>2,C|=C>>4,C|=C>>8,(C|=C>>16)-(C>>1)}function t(C,U){let K;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:K=e(C);break;case 2:K=X(C);break;default:K=A(C)}return Math.min(K,U)}K.d(U,{c:()=>e,g:()=>t,h:()=>m,i:()=>O,k:()=>X})},11660:(C,U,K)=>{K.r(U),K.d(U,{AsyncLoop:()=>f,Tools:()=>Q,className:()=>V});var m=K(11663),O=K(11670),X=K(11679),A=K(11685),e=K(11688),t=K(11696),z=K(11701),j=K(11703),p=K(11709),E=K(11733),u=K(11784),b=K(11793),v=K(11802);class Q{static get BaseUrl(){return p.g.BaseUrl}static set BaseUrl(C){p.g.BaseUrl=C}static get CleanUrl(){return p.g.CleanUrl}static set CleanUrl(C){p.g.CleanUrl=C}static IsAbsoluteUrl(C){return 0===C.indexOf("//")||-1!==C.indexOf("://")&&(-1!==C.indexOf(".")&&(-1!==C.indexOf("/")&&(!(C.indexOf(":")>C.indexOf("/"))&&(C.indexOf("://")<C.indexOf(".")||(0===C.indexOf("data:")||0===C.indexOf("blob:"))))))}static set ScriptBaseUrl(C){p.g.ScriptBaseUrl=C}static get ScriptBaseUrl(){return p.g.ScriptBaseUrl}static set CDNBaseUrl(C){Q.ScriptBaseUrl=C,Q.AssetBaseUrl=C}static set ScriptPreprocessUrl(C){p.g.ScriptPreprocessUrl=C}static get ScriptPreprocessUrl(){return p.g.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return p.g.DefaultRetryStrategy}static set DefaultRetryStrategy(C){p.g.DefaultRetryStrategy=C}static get CorsBehavior(){return p.g.CorsBehavior}static set CorsBehavior(C){p.g.CorsBehavior=C}static get UseFallbackTexture(){return j.c.UseFallbackTexture}static set UseFallbackTexture(C){j.c.UseFallbackTexture=C}static get RegisteredExternalClasses(){return u.e.RegisteredExternalClasses}static set RegisteredExternalClasses(C){u.e.RegisteredExternalClasses=C}static get fallbackTexture(){return j.c.FallbackTexture}static set fallbackTexture(C){j.c.FallbackTexture=C}static FetchToRef(C,U,K,m,O,X){const A=4*((Math.abs(C)*K%K|0)+(Math.abs(U)*m%m|0)*K);X.r=O[A]/255,X.g=O[A+1]/255,X.b=O[A+2]/255,X.a=O[A+3]/255}static Mix(C,U,K){return 0}static Instantiate(C){return u.e.Instantiate(C)}static SetImmediate(C){E.b.SetImmediate(C)}static IsExponentOfTwo(C){return!0}static FloatRound(C){return Math.fround(C)}static GetFilename(C){const U=C.lastIndexOf("/");return U<0?C:C.substring(U+1)}static GetFolderPath(C){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const K=C.lastIndexOf("/");return K<0?U?C:"":C.substring(0,K+1)}static ToDegrees(C){return 180*C/Math.PI}static ToRadians(C){return C*Math.PI/180}static SmoothAngleChange(C,U){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const m=this.ToRadians(C),O=this.ToRadians(U);return this.ToDegrees(Math.atan2((1-K)*Math.sin(O)+K*Math.sin(m),(1-K)*Math.cos(O)+K*Math.cos(m)))}static MakeArray(C,U){return!0===U||void 0!==C&&null!=C?Array.isArray(C)?C:[C]:null}static GetPointerPrefix(C){return(0,O.g)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(C,U){(0,p.x)(C,U)}static SetReferrerPolicyBehavior(C,U){U.referrerPolicy=C}static get PreprocessUrl(){return p.g.PreprocessUrl}static set PreprocessUrl(C){p.g.PreprocessUrl=C}static LoadImage(C,U,K,m,O,X){return(0,p.r)(C,U,K,m,O,X)}static LoadFile(C,U,K,m,O,X){return(0,p.n)(C,U,K,m,O,X)}static async LoadFileAsync(C){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((K,m)=>{(0,p.n)(C,(C=>{K(C)}),void 0,void 0,U,((C,U)=>{m(U)}))}))}static GetAssetUrl(C){if(!C)return"";if(Q.AssetBaseUrl&&C.startsWith(Q._DefaultAssetsUrl)){const U="/"===Q.AssetBaseUrl[Q.AssetBaseUrl.length-1]?Q.AssetBaseUrl.substring(0,Q.AssetBaseUrl.length-1):Q.AssetBaseUrl;return C.replace(Q._DefaultAssetsUrl,U)}return C}static GetBabylonScriptURL(C,U){if(!C)return"";if(Q.ScriptBaseUrl&&C.startsWith(Q._DefaultCdnUrl)){const U="/"===Q.ScriptBaseUrl[Q.ScriptBaseUrl.length-1]?Q.ScriptBaseUrl.substring(0,Q.ScriptBaseUrl.length-1):Q.ScriptBaseUrl;C=C.replace(Q._DefaultCdnUrl,U)}return C=Q.ScriptPreprocessUrl(C),U&&(C=Q.GetAbsoluteUrl(C)),C}static LoadBabylonScript(C,U,K,m){C=Q.GetBabylonScriptURL(C),Q.LoadScript(C,U,K)}static async LoadBabylonScriptAsync(C){return C=Q.GetBabylonScriptURL(C),await Q.LoadScriptAsync(C)}static LoadScript(C,U,K,m){let X=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(C),U&&U()}catch(t){null===K||void 0===K||K(`Unable to load script '${C}' in worker`,t)}return}if(!(0,O.g)())return void(null===K||void 0===K||K(`Cannot load script '${C}' outside of a window or a worker`));const A=document.getElementsByTagName("head")[0],e=document.createElement("script");X?(e.setAttribute("type","module"),e.innerText=C):(e.setAttribute("type","text/javascript"),e.setAttribute("src",C)),m&&(e.id=m),e.onload=()=>{U&&U()},e.onerror=U=>{K&&K(`Unable to load script '${C}'`,U)},A.appendChild(e)}static async LoadScriptAsync(C,U){return await new Promise(((K,m)=>{this.LoadScript(C,(()=>{K()}),((C,U)=>{m(U||new Error(C))}),U)}))}static ReadFileAsDataURL(C,U,K){const O=new FileReader,X={onCompleteObservable:new m.b,abort:()=>O.abort()};return O.onloadend=()=>{X.onCompleteObservable.notifyObservers(X)},O.onload=C=>{U(C.target.result)},O.onprogress=K,O.readAsDataURL(C),X}static ReadFile(C,U,K,m,O){return(0,p.t)(C,U,K,m,O)}static FileAsURL(C){const U=new Blob([C]);return window.URL.createObjectURL(U)}static Format(C){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return C.toFixed(U)}static DeepCopy(C,U,K,m){A.b.DeepCopy(C,U,K,m)}static IsEmpty(C){for(const U in C)if(Object.prototype.hasOwnProperty.call(C,U))return!1;return!0}static RegisterTopRootEvents(C,U){for(let m=0;m<U.length;m++){const O=U[m];C.addEventListener(O.name,O.handler,!1);try{window.parent&&window.parent.addEventListener(O.name,O.handler,!1)}catch(K){}}}static UnregisterTopRootEvents(C,U){for(let m=0;m<U.length;m++){const O=U[m];C.removeEventListener(O.name,O.handler);try{C.parent&&C.parent.removeEventListener(O.name,O.handler)}catch(K){}}}static async DumpFramebuffer(C,U,K,m){throw(0,t.b)("DumpTools")}static DumpData(C,U,K,m){throw(0,t.b)("DumpTools")}static async DumpDataAsync(C,U,K){throw(0,t.b)("DumpTools")}static _IsOffScreenCanvas(C){return void 0!==C.convertToBlob}static ToBlob(C,U){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",m=arguments.length>3?arguments[3]:void 0;Q._IsOffScreenCanvas(C)||C.toBlob||(C.toBlob=function(C,U,K){setTimeout((()=>{const m=atob(this.toDataURL(U,K).split(",")[1]),O=m.length,X=new Uint8Array(O);for(let C=0;C<O;C++)X[C]=m.charCodeAt(C);C(new Blob([X]))}))}),Q._IsOffScreenCanvas(C)?C.convertToBlob({type:K,quality:m}).then((C=>U(C))):C.toBlob((function(C){U(C)}),K,m)}static DownloadBlob(C,U){if("download"in document.createElement("a")){if(!U){const C=new Date;U="screenshot_"+((C.getFullYear()+"-"+(C.getMonth()+1)).slice(2)+"-"+C.getDate()+"_"+C.getHours()+"-"+("0"+C.getMinutes()).slice(-2))+".png"}Q.Download(C,U)}else if(C&&"undefined"!==typeof URL){const U=URL.createObjectURL(C),K=window.open("");if(!K)return;const m=K.document.createElement("img");m.onload=function(){URL.revokeObjectURL(U)},m.src=U,K.document.body.appendChild(m)}}static EncodeScreenshotCanvasData(C,U){let K=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",m=arguments.length>3?arguments[3]:void 0,O=arguments.length>4?arguments[4]:void 0;if("string"!==typeof m&&U){if(U){if(Q._IsOffScreenCanvas(C))return void C.convertToBlob({type:K,quality:O}).then((C=>{const K=new FileReader;K.readAsDataURL(C),K.onloadend=()=>{const C=K.result;U(C)}}));const m=C.toDataURL(K,O);U(m)}}else this.ToBlob(C,(function(C){C&&Q.DownloadBlob(C,m),U&&U("")}),K,O)}static Download(C,U){if("undefined"===typeof URL)return;const K=window.URL.createObjectURL(C),m=document.createElement("a");document.body.appendChild(m),m.style.display="none",m.href=K,m.download=U,m.addEventListener("click",(()=>{m.parentElement&&m.parentElement.removeChild(m)})),m.click(),window.URL.revokeObjectURL(K)}static BackCompatCameraNoPreventDefault(C){return"boolean"===typeof C[0]?C[0]:"boolean"===typeof C[1]&&C[1]}static CreateScreenshot(C,U,K,m){throw(0,t.b)("ScreenshotTools")}static async CreateScreenshotAsync(C,U,K){throw(0,t.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(C,U,K,m){throw(0,t.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(C,U,K){throw(0,t.b)("ScreenshotTools")}static RandomId(){return(0,b.d)()}static IsBase64(C){return(0,p.i)(C)}static DecodeBase64(C){return(0,p.d)(C)}static get errorsCount(){return X.d.errorsCount}static Log(C){X.d.Log(C)}static Warn(C){X.d.Warn(C)}static Error(C){X.d.Error(C)}static get LogCache(){return X.d.LogCache}static ClearLogCache(){X.d.ClearLogCache()}static set LogLevels(C){X.d.LogLevels=C}static set PerformanceLogLevel(C){return(C&Q.PerformanceUserMarkLogLevel)===Q.PerformanceUserMarkLogLevel?(Q.StartPerformanceCounter=Q._StartUserMark,void(Q.EndPerformanceCounter=Q._EndUserMark)):(C&Q.PerformanceConsoleLogLevel)===Q.PerformanceConsoleLogLevel?(Q.StartPerformanceCounter=Q._StartPerformanceConsole,void(Q.EndPerformanceCounter=Q._EndPerformanceConsole)):(Q.StartPerformanceCounter=Q._StartPerformanceCounterDisabled,void(Q.EndPerformanceCounter=Q._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(C,U){}static _EndPerformanceCounterDisabled(C,U){}static _StartUserMark(C){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Q._Performance){if(!(0,O.g)())return;Q._Performance=window.performance}U&&Q._Performance.mark&&Q._Performance.mark(C+"-Begin")}static _EndUserMark(C){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&Q._Performance.mark&&(Q._Performance.mark(C+"-End"),Q._Performance.measure(C,C+"-Begin",C+"-End"))}static _StartPerformanceConsole(C){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(Q._StartUserMark(C,U),console.time&&console.time(C))}static _EndPerformanceConsole(C){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];U&&(Q._EndUserMark(C,U),console.timeEnd(C))}static get Now(){return e.c.Now}static GetClassName(C){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],K=null;if(!U&&C.getClassName)K=C.getClassName();else{if(C instanceof Object){K=(U?C:Object.getPrototypeOf(C)).constructor.__bjsclassName__}K||(K=typeof C)}return K}static First(C,U){for(const K of C)if(U(K))return K;return null}static getFullClassName(C){let U=arguments.length>1&&void 0!==arguments[1]&&arguments[1],K=null,m=null;if(!U&&C.getClassName)K=C.getClassName();else{if(C instanceof Object){const O=U?C:Object.getPrototypeOf(C);K=O.constructor.__bjsclassName__,m=O.constructor.__bjsmoduleName__}K||(K=typeof C)}return K?(null!=m?m+".":"")+K:null}static async DelayAsync(C){await new Promise((U=>{setTimeout((()=>{U()}),C)}))}static IsSafari(){return!!(0,O.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function V(C,U){return K=>{K.__bjsclassName__=C,K.__bjsmoduleName__=null!=U?U:null}}Q.AssetBaseUrl="",Q.UseCustomRequestHeaders=!1,Q.CustomRequestHeaders=z.b.CustomRequestHeaders,Q.GetDOMTextContent=O.c,Q._DefaultCdnUrl="https://cdn.babylonjs.com",Q._DefaultAssetsUrl="https://assets.babylonjs.com/core",Q.GetAbsoluteUrl="object"===typeof document?C=>{const U=document.createElement("a");return U.href=C,U.href}:"function"===typeof URL&&"object"===typeof location?C=>new URL(C,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},Q.NoneLogLevel=X.d.NoneLogLevel,Q.MessageLogLevel=X.d.MessageLogLevel,Q.WarningLogLevel=X.d.WarningLogLevel,Q.ErrorLogLevel=X.d.ErrorLogLevel,Q.AllLogLevel=X.d.AllLogLevel,Q.IsWindowObjectExist=O.g,Q.PerformanceNoneLogLevel=0,Q.PerformanceUserMarkLogLevel=1,Q.PerformanceConsoleLogLevel=2,Q.StartPerformanceCounter=Q._StartPerformanceCounterDisabled,Q.EndPerformanceCounter=Q._EndPerformanceCounterDisabled;class f{constructor(C,U,K){let m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=C,this.index=m-1,this._done=!1,this._fn=U,this._successCallback=K}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(C,U,K){const m=new f(C,U,K,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return m.executeNext(),m}static SyncAsyncForLoop(C,U,K,m,O){let X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return f.Run(Math.ceil(C/U),(m=>{O&&O()?m.breakLoop():setTimeout((()=>{for(let X=0;X<U;++X){const A=m.index*U+X;if(A>=C)break;if(K(A),O&&O()){m.breakLoop();break}}m.executeNext()}),X)}),m)}}Q.Mix=v.i,Q.IsExponentOfTwo=v.h,j.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11789:(C,U,K)=>{K.d(U,{d:()=>X,h:()=>O});const m={};function O(C,U){m[C]=U}function X(C){return m[C]}},11701:(C,U,K)=>{K.d(U,{b:()=>m});class m{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(m.CustomRequestHeaders).length>0||m.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const C in m.CustomRequestHeaders){const U=m.CustomRequestHeaders[C];U&&this._xhr.setRequestHeader(C,U)}}_shouldSkipRequestModifications(C){return m.SkipRequestModificationForBabylonCDN&&(C.includes("preview.babylonjs.com")||C.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(C){this._xhr.onprogress=C}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(C){this._xhr.responseType=C}get timeout(){return this._xhr.timeout}set timeout(C){this._xhr.timeout=C}addEventListener(C,U,K){this._xhr.addEventListener(C,U,K)}removeEventListener(C,U,K){this._xhr.removeEventListener(C,U,K)}abort(){this._xhr.abort()}send(C){m.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(C)}open(C,U){for(const K of m.CustomRequestModifiers){if(this._shouldSkipRequestModifications(U))return;U=K(this._xhr,U)||U}U=(U=U.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=U,this._xhr.open(C,U,!0)}setRequestHeader(C,U){this._xhr.setRequestHeader(C,U)}getResponseHeader(C){return this._xhr.getResponseHeader(C)}}m.CustomRequestHeaders={},m.CustomRequestModifiers=new Array,m.SkipRequestModificationForBabylonCDN=!0}}]);