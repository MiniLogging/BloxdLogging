"use strict";(self.xeuzlpp225k=self.xeuzlpp225k||[]).push([[8],{11195:(k,Q,i)=>{i.d(Q,{b:()=>c});var Z=i(11157),U=i(11134),C=i(11203),B=i(11230),o=i(11144);class m{constructor(){let k=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,k&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(k){this._zOffset!==k&&(this._zOffset=k,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(k){this._zOffsetUnits!==k&&(this._zOffsetUnits=k,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(k){this._cullFace!==k&&(this._cullFace=k,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(k){this._cull!==k&&(this._cull=k,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(k){this._depthFunc!==k&&(this._depthFunc=k,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(k){this._depthMask!==k&&(this._depthMask=k,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(k){this._depthTest!==k&&(this._depthTest=k,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(k){this._frontFace!==k&&(this._frontFace=k,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(k){this.isDirty&&(this._isCullDirty&&(this.cull?k.enable(k.CULL_FACE):k.disable(k.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(k.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(k.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?k.enable(k.DEPTH_TEST):k.disable(k.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(k.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(k.enable(k.POLYGON_OFFSET_FILL),k.polygonOffset(this.zOffset,this.zOffsetUnits)):k.disable(k.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(k.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class O{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(k){this._func!==k&&(this._func=k,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(k){this._funcRef!==k&&(this._funcRef=k,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(k){this._funcMask!==k&&(this._funcMask=k,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(k){this._opStencilFail!==k&&(this._opStencilFail=k,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(k){this._opDepthFail!==k&&(this._opDepthFail=k,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(k){this._opStencilDepthPass!==k&&(this._opStencilDepthPass=k,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(k){this._mask!==k&&(this._mask=k,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(k){this._enabled!==k&&(this._enabled=k,this._isStencilTestDirty=!0)}constructor(){let k=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,k&&this.reset()}reset(){var k;this.stencilMaterial=void 0,null===(k=this.stencilGlobal)||void 0===k||k.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(k){var Q;if(!k)return;const i=!this.useStencilGlobalOnly&&!(null===(Q=this.stencilMaterial)||void 0===Q||!Q.enabled);this.enabled=i?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=i?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=i?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=i?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=i?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=i?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=i?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=i?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?k.enable(k.STENCIL_TEST):k.disable(k.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(k.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(k.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(k.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class J{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=J.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=J.KEEP,this.opDepthFail=J.KEEP,this.opStencilDepthPass=J.REPLACE}get stencilFunc(){return this.func}set stencilFunc(k){this.func=k}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(k){this.funcRef=k}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(k){this.funcMask=k}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(k){this.opStencilFail=k}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(k){this.opDepthFail=k}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(k){this.opStencilDepthPass=k}get stencilMask(){return this.mask}set stencilMask(k){this.mask=k}get stencilTest(){return this.enabled}set stencilTest(k){this.enabled=k}}J.ALWAYS=519,J.KEEP=7680,J.REPLACE=7681;class G{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(k){this._alphaBlend!==k&&(this._alphaBlend=k,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(k,Q,i,Z){this._blendConstants[0]===k&&this._blendConstants[1]===Q&&this._blendConstants[2]===i&&this._blendConstants[3]===Z||(this._blendConstants[0]=k,this._blendConstants[1]=Q,this._blendConstants[2]=i,this._blendConstants[3]=Z,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(k,Q,i,Z){this._blendFunctionParameters[0]===k&&this._blendFunctionParameters[1]===Q&&this._blendFunctionParameters[2]===i&&this._blendFunctionParameters[3]===Z||(this._blendFunctionParameters[0]=k,this._blendFunctionParameters[1]=Q,this._blendFunctionParameters[2]=i,this._blendFunctionParameters[3]=Z,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(k,Q){this._blendEquationParameters[0]===k&&this._blendEquationParameters[1]===Q||(this._blendEquationParameters[0]=k,this._blendEquationParameters[1]=Q,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(k){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?k.enable(k.BLEND):k.disable(k.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(k.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(k.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(k.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var H=i(11146),e=i(11235),F=i(11131),z=i(11122),E=i(11187),l=i(11245);function h(k,Q){if((0,F.j)()){const{requestAnimationFrame:i}=Q||window;if("function"===typeof i)return i(k)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(k);return setTimeout(k,16)}class c{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(k){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(k){k!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=k,this._depthCullingState.depthFunc=k?518:515)}setColorWrite(k){k!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=k)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(k){if(k)return this.isNDCHalfZRange?k.IS_NDC_HALF_ZRANGE="":delete k.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?k.USE_REVERSE_DEPTHBUFFER="":delete k.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?k.USE_EXACT_SRGB_CONVERSIONS="":delete k.USE_EXACT_SRGB_CONVERSIONS);{let k="";return this.isNDCHalfZRange&&(k+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(k&&(k+="\n"),k+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(k&&(k+="\n"),k+="#define USE_EXACT_SRGB_CONVERSIONS"),k}}_rebuildInternalTextures(){const k=this._internalTexturesCache.slice();for(const Q of k)Q._rebuild()}_rebuildRenderTargetWrappers(){const k=this._renderTargetWrapperCache.slice();for(const Q of k)Q._rebuild()}_rebuildEffects(){for(const k in this._compiledEffects){const Q=this._compiledEffects[k];Q._pipelineContext=null,Q._prepareEffect()}C.Effect.ResetCache()}_rebuildGraphicsResources(){var k;this.wipeCaches(!0),this._rebuildEffects(),null===(k=this._rebuildComputeEffects)||void 0===k||k.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){U.c.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(k){setTimeout((()=>{this._clearEmptyResources();const Q=this._depthCullingState.depthTest,i=this._depthCullingState.depthFunc,Z=this._depthCullingState.depthMask,U=this._stencilState.stencilTest;k(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=Q,this._depthCullingState.depthFunc=i,this._depthCullingState.depthMask=Z,this._stencilState.stencilTest=U,this._flagContextRestored()}),0)}get J(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(k){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(k){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const k=new Uint8Array(4),Q=[k,k,k,k,k,k];this._emptyCubeTexture=this.createRawCubeTexture(Q,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(k){if(!k)return this._activeRenderLoops.length=0,void this._cancelFrame();const Q=this._activeRenderLoops.indexOf(k);Q>=0&&(this._activeRenderLoops.splice(Q,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const k=this._frameHandler;if(this._frameHandler=0,(0,F.j)()){const{cancelAnimationFrame:Q}=this.getHostWindow()||window;if("function"===typeof Q)return Q(k)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(k);return clearTimeout(k)}}ai(){this.onBeginFrameObservable.notifyObservers(this)}pi(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(k){this._maxFPS=k,void 0!==k&&(this._minFrameTime=k<=0?Number.MAX_VALUE:1e3/k)}_isOverFrameTime(k){if(!k||void 0===this._maxFPS)return!1;const Q=k-this._lastFrameTime;return this._lastFrameTime=k,this._renderAccumulator+=Q,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(k){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(k)){let k=!0;(this.J||!this.renderEvenInBackground&&this._windowIsBackground)&&(k=!1),k&&(this.ai(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.pi())}}_renderLoop(k){this._processFrame(k),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let k=0;k<this._activeRenderLoops.length;k++){(0,this._activeRenderLoops[k])()}}_renderViews(){return!1}_queueNewFrame(k,Q){return h(k,Q)}runRenderLoop(k){-1===this._activeRenderLoops.indexOf(k)&&(this._activeRenderLoops.push(k),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(k){this._depthCullingState.depthTest=k}setZOffset(k){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-k:k}getZOffset(){const k=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-k:k}setZOffsetUnits(k){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-k:k}getZOffsetUnits(){const k=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-k:k}getHostWindow(){return(0,F.j)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(k){this._compatibilityMode=!0}_rebuildTextures(){for(const k of this.scenes)k._rebuildTextures();for(const k of this._virtualScenes)k._rebuildTextures()}_releaseRenderTargetWrapper(k){const Q=this._renderTargetWrapperCache.indexOf(k);-1!==Q&&this._renderTargetWrapperCache.splice(Q,1)}get currentViewport(){return this._cachedViewport}setViewport(k,Q,i){const Z=Q||this.getRenderWidth(),U=i||this.getRenderHeight(),C=k.x||0,B=k.y||0;this._cachedViewport=k,this._viewport(C*Z,B*U,Z*k.width,U*k.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(k){return new Path2D(k)}get description(){let k=this.name+this.version;return this._caps.parallelShaderCompile&&(k+=" - Parallel shader compilation"),k}_createTextureBase(k,Q,i,C){let B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,O=arguments.length>7?arguments[7]:void 0,J=arguments.length>8?arguments[8]:void 0,G=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,H=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,F=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,z=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,E=arguments.length>13?arguments[13]:void 0,h=arguments.length>14?arguments[14]:void 0,f=arguments.length>15?arguments[15]:void 0;const Y="data:"===(k=k||"").substring(0,5),y="blob:"===k.substring(0,5),L=Y&&-1!==k.indexOf(";base64,"),s=H||new e.c(this,1);s!==H&&(s.label=k.substring(0,60));const u=k;!this._transformTextureUrl||L||H||G||(k=this._transformTextureUrl(k)),u!==k&&(s._originalUrl=u);const a=k.lastIndexOf(".");let j=z||(a>-1?k.substring(a).toLowerCase():"");j.indexOf("?")>-1&&(j=j.split("?")[0]);const T=(0,l.b)(j,E);C&&C.addPendingData(s),s.url=k,s.generateMipMaps=!Q,s.samplingMode=B,s.invertY=i,s._useSRGBBuffer=this._getUseSRGBBuffer(!!f,Q),this._doNotHandleContextLost||(s._buffer=G);let K=null;o&&!H&&(K=s.onLoadedObservable.add(o)),H||this._internalTexturesCache.push(s);const v=(i,H)=>{C&&C.removePendingData(s),k===u?(K&&s.onLoadedObservable.remove(K),Z.b.UseFallbackTexture&&k!==Z.b.FallbackTexture&&this._createTextureBase(Z.b.FallbackTexture,Q,s.invertY,C,B,null,m,O,J,G,s),i=(i||"Unknown error")+(Z.b.UseFallbackTexture?" - Fallback texture was used":""),s.onErrorObservable.notifyObservers({message:i,exception:H}),m&&m(i,H)):(U.c.Warn(`Failed to load ${k}, falling back to ${u}`),this._createTextureBase(u,Q,s.invertY,C,B,o,m,O,J,G,s,F,z,E,h,f))};if(T){const Q=async k=>{(await T).loadData(k,s,((k,Q,i,Z,U,o)=>{o?v("TextureLoader failed to load data"):O(s,j,C,{width:k,height:Q},s.invertY,!i,Z,(()=>(U(),!1)),B)}),h)};G?G instanceof ArrayBuffer?Q(new Uint8Array(G)):ArrayBuffer.isView(G)?Q(G):m&&m("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(k,(k=>{Q(new Uint8Array(k))}),void 0,C?C.offlineProvider:void 0,!0,((k,Q)=>{v("Unable to load "+(k&&k.responseURL,Q))}))}else{const i=k=>{y&&!this._doNotHandleContextLost&&(s._buffer=k),O(s,j,C,k,s.invertY,Q,!1,J,B)};!Y||L?G&&("string"===typeof G.decoding||G.close)?i(G):c._FileToolsLoadImage(k||"",i,v,C?C.offlineProvider:null,E,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof G||G instanceof ArrayBuffer||ArrayBuffer.isView(G)||G instanceof Blob?c._FileToolsLoadImage(G,i,v,C?C.offlineProvider:null,E,s.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):G&&i(G)}return s}_rebuildBuffers(){for(const k of this._uniformBuffers)k._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,F.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const k in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,k)&&(this._boundTexturesCache[k]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(k){this._name=k}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(k){this._hardwareScalingLevel=k,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(k){this._doNotHandleContextLost=k}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(k,Q,i){var U,C;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new m,this._stencilStateComposer=new O,this._stencilState=new J,this._alphaState=new G,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new z.c,this.onCanvasFocusObservable=new z.c,this.onNewSceneAddedObservable=new z.c,this.onResizeObservable=new z.c,this.onCanvasPointerOutObservable=new z.c,this.onEffectErrorObservable=new z.c,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new z.c,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=k=>this._renderLoop(k),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new z.c,this.onAfterShaderCompilationObservable=new z.c,this.onBeginFrameObservable=new z.c,this.onEndFrameObservable=new z.c,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new z.c,this.onContextRestoredObservable=new z.c,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.gi=new z.c,this.onReleaseEffectsObservable=new z.c,Z.b.Instances.push(this),this.startTime=o.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,B.d.SetMatrixPrecision(!!Q.useHighPrecisionMatrix),(0,F.f)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=i??!1,Q.antialias=k??Q.antialias,Q.deterministicLockstep=Q.deterministicLockstep??!1,Q.lockstepMaxSteps=Q.lockstepMaxSteps??4,Q.timeStep=Q.timeStep??1/60,Q.stencil=Q.stencil??!0,this._audioContext=(null===(U=Q.audioEngineOptions)||void 0===U?void 0:U.audioContext)??null,this._audioDestination=(null===(C=Q.audioEngineOptions)||void 0===C?void 0:C.audioDestination)??null,this.premultipliedAlpha=Q.premultipliedAlpha??!0,this._doNotHandleContextLost=!!Q.doNotHandleContextLost,this._isStencilEnable=!!Q.stencil,this.useExactSrgbConversions=Q.useExactSrgbConversions??!1;const H=(0,F.j)()&&window.devicePixelRatio||1,e=Q.limitDeviceRatio||H;i=i||Q.adaptToDeviceRatio||!1,this._hardwareScalingLevel=i?1/Math.min(e,H):1,this._lastDevicePixelRatio=H,this._creationOptions=Q}resize(){let k,Q,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const k=(0,F.j)()&&window.devicePixelRatio||1,Q=this._lastDevicePixelRatio/k;this._lastDevicePixelRatio=k,this._hardwareScalingLevel*=Q}if((0,F.j)()&&(0,F.e)())if(this._renderingCanvas){var Z,U;const i=null===(Z=(U=this._renderingCanvas).getBoundingClientRect)||void 0===Z?void 0:Z.call(U);k=this._renderingCanvas.clientWidth||(null===i||void 0===i?void 0:i.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,Q=this._renderingCanvas.clientHeight||(null===i||void 0===i?void 0:i.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else k=window.innerWidth,Q=window.innerHeight;else k=this._renderingCanvas?this._renderingCanvas.width:100,Q=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(k/this._hardwareScalingLevel,Q/this._hardwareScalingLevel,i)}setSize(k,Q){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(k|=0,Q|=0,!i&&this._renderingCanvas.width===k&&this._renderingCanvas.height===Q)return!1;if(this._renderingCanvas.width=k,this._renderingCanvas.height=Q,this.scenes){for(let k=0;k<this.scenes.length;k++){const Q=this.scenes[k];for(let k=0;k<Q.cameras.length;k++){Q.cameras[k]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(k,Q,i,Z,U,C,B,o,m,O,J){throw(0,H.d)("engine.rawTexture")}createRawCubeTexture(k,Q,i,Z,U,C,B,o){throw(0,H.d)("engine.rawTexture")}createRawTexture3D(k,Q,i,Z,U,C,B,o,m,O,J){throw(0,H.d)("engine.rawTexture")}createRawTexture2DArray(k,Q,i,Z,U,C,B,o,m,O,J){throw(0,H.d)("engine.rawTexture")}_sharedInit(k){this._renderingCanvas=k}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const k=navigator.userAgent;this.hostInformation.isMobile=-1!==k.indexOf("Mobile")||-1!==k.indexOf("Mac")&&(0,F.e)()&&"ontouchend"in document},this._checkForMobile(),(0,F.j)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(k){return document.createElement("video")}_reportDrawCall(){var k;let Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(k=this._drawCalls)||void 0===k||k.addCount(Q,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(k,Q){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(k,Q){return createImageBitmap(k,Q)}resizeImageBitmap(k,Q,i){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(k){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(k,Q){if("undefined"===typeof document)return new OffscreenCanvas(k,Q);const i=document.createElement("canvas");return i.width=k,i.height=Q,i}createCanvas(k,Q){return c._CreateCanvas(k,Q)}static _FileToolsLoadImage(k,Q,i,Z,U,C,B){throw(0,H.d)("FileTools")}_loadFile(k,Q,i,Z,U,C){const B=(0,E.n)(k,Q,i,Z,U,C);return this._activeRequests.push(B),B.onCompleteObservable.add((()=>{const k=this._activeRequests.indexOf(B);-1!==k&&this._activeRequests.splice(k,1)})),B}static _FileToolsLoadFile(k,Q,i,Z,U,C){if(E.c.loadFile)return E.c.loadFile(k,Q,i,Z,U,C);throw(0,H.d)("FileTools")}dispose(){var k;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(k=this.releaseComputeEffects)||void 0===k||k.call(this),C.Effect.ResetCache();for(const i of this._activeRequests)i.abort();this._boundRenderFunction=null,this.gi.notifyObservers(this),this.gi.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,F.j)()&&window.removeEventListener("resize",this._checkForMobile);const Q=Z.b.Instances.indexOf(this);Q>=0&&Z.b.Instances.splice(Q,1),Z.b.Instances.length||(Z.b.OnEnginesDisposedObservable.notifyObservers(this),Z.b.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(k){throw(0,H.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(k,Q){for(let i=0;i<Z.b.Instances.length;i++){const U=Z.b.Instances[i];for(let i=0;i<U.scenes.length;i++)U.scenes[i].markAllMaterialsAsDirty(k,Q)}}}c._RenderPassIdCounter=0,c._RescalePostProcessFactory=null,c.CollisionsEpsilon=.001,c.QueueNewFrame=h},11157:(k,Q,i)=>{i.d(Q,{b:()=>U});var Z=i(11122);class U{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}U.Instances=[],U.OnEnginesDisposedObservable=new Z.c,U._LastCreatedScene=null,U.UseFallbackTexture=!0,U.FallbackTexture=""},11230:(k,Q,i)=>{i.d(Q,{d:()=>Z});class Z{static SetMatrixPrecision(k){if(Z.MatrixTrackPrecisionChange=!1,k&&!Z.MatrixUse64Bits&&Z.MatrixTrackedMatrices)for(let Q=0;Q<Z.MatrixTrackedMatrices.length;++Q){const k=Z.MatrixTrackedMatrices[Q],i=k.ri;k.ri=new Array(16);for(let Q=0;Q<16;++Q)k.ri[Q]=i[Q]}Z.MatrixUse64Bits=k,Z.MatrixCurrentType=Z.MatrixUse64Bits?Array:Float32Array,Z.MatrixTrackedMatrices=null}}Z.MatrixUse64Bits=!1,Z.MatrixTrackPrecisionChange=!0,Z.MatrixCurrentType=Float32Array,Z.MatrixTrackedMatrices=[]},11245:(k,Q,i)=>{i.d(Q,{b:()=>B});var Z=i(11134);const U=new Map;function C(k,Q){(function(k){return U.delete(k)})(k)&&Z.c.Warn(`Extension with the name '${k}' already exists`),U.set(k,Q)}function B(k,Q){"image/ktx"!==Q&&"image/ktx2"!==Q||(k=".ktx"),U.has(k)||(k.endsWith(".ies")&&C(".ies",(async()=>await i.e(15).then(i.bind(i,13798)).then((k=>new k._IESTextureLoader)))),k.endsWith(".dds")&&C(".dds",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(28)]).then(i.bind(i,13803)).then((k=>new k._DDSTextureLoader)))),k.endsWith(".basis")&&C(".basis",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(47)]).then(i.bind(i,13812)).then((k=>new k._BasisTextureLoader)))),k.endsWith(".env")&&C(".env",(async()=>await Promise.all([i.e(14),i.e(17),i.e(13),i.e(19),i.e(18),i.e(23),i.e(21),i.e(45),i.e(48)]).then(i.bind(i,13815)).then((k=>new k._ENVTextureLoader)))),k.endsWith(".hdr")&&C(".hdr",(async()=>await Promise.all([i.e(14),i.e(49)]).then(i.bind(i,13818)).then((k=>new k._HDRTextureLoader)))),(k.endsWith(".ktx")||k.endsWith(".ktx2"))&&(C(".ktx",(async()=>await i.e(30).then(i.bind(i,13821)).then((k=>new k._KTXTextureLoader)))),C(".ktx2",(async()=>await i.e(30).then(i.bind(i,13821)).then((k=>new k._KTXTextureLoader))))),k.endsWith(".tga")&&C(".tga",(async()=>await i.e(50).then(i.bind(i,13829)).then((k=>new k._TGATextureLoader)))),k.endsWith(".exr")&&C(".exr",(async()=>await i.e(16).then(i.bind(i,13836)).then((k=>new k._ExrTextureLoader)))));const Z=U.get(k);return Z?Promise.resolve(Z(Q)):null}},11235:(k,Q,i)=>{i.d(Q,{c:()=>B});var Z,U=i(11122),C=i(11242);!function(k){k[k.Unknown=0]="Unknown",k[k.Url=1]="Url",k[k.Temp=2]="Temp",k[k.Raw=3]="Raw",k[k.Dynamic=4]="Dynamic",k[k.RenderTarget=5]="RenderTarget",k[k.MultiRenderTarget=6]="MultiRenderTarget",k[k.Cube=7]="Cube",k[k.CubeRaw=8]="CubeRaw",k[k.CubePrefiltered=9]="CubePrefiltered",k[k.Raw3D=10]="Raw3D",k[k.Raw2DArray=11]="Raw2DArray",k[k.DepthStencil=12]="DepthStencil",k[k.CubeRawRGBD=13]="CubeRawRGBD",k[k.Depth=14]="Depth"}(Z||(Z={}));class B extends C.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(k){this.generateMipMaps=k}get uniqueId(){return this._uniqueId}_setUniqueId(k){this._uniqueId=k}getEngine(){return this._engine}get source(){return this._source}constructor(k,Q){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new U.c,this.onErrorObservable=new U.c,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=k,this._source=Q,this._uniqueId=B._Counter++,i||(this._hardwareTexture=k._createHardwareTexture())}incrementReferences(){this._references++}updateSize(k,Q){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,k,Q,i),this.width=k,this.height=Q,this.depth=i,this.baseWidth=k,this.baseHeight=Q,this.baseDepth=i,this._size=k*Q*i}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const k=this.onRebuildCallback(this),Q=Q=>{Q._swapAndDie(this,!1),this.isReady=k.isReady};return void(k.isAsync?k.proxy.then(Q):Q(k.proxy))}let k;switch(this.source){case 2:case 12:case 14:break;case 1:return void(k=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(k=>{k._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:k=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),k._swapAndDie(this,!1),this.isReady=!0;break;case 10:k=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),k._swapAndDie(this,!1),this.isReady=!0;break;case 11:k=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),k._swapAndDie(this,!1),this.isReady=!0;break;case 4:k=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),k._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(k=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{k._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:k=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),k._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return k=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(k=>{k&&k._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(k._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(k){var Q;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(Q=this._hardwareTexture)||void 0===Q||Q.setUsage(k._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),k._hardwareTexture=this._hardwareTexture,i&&(k._isRGBD=this._isRGBD),this._lodTextureHigh&&(k._lodTextureHigh&&k._lodTextureHigh.dispose(),k._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(k._lodTextureMid&&k._lodTextureMid.dispose(),k._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(k._lodTextureLow&&k._lodTextureLow.dispose(),k._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(k._irradianceTexture&&k._irradianceTexture.dispose(),k._irradianceTexture=this._irradianceTexture);const Z=this._engine.getLoadedTexturesCache();let U=Z.indexOf(this);-1!==U&&Z.splice(U,1),U=Z.indexOf(k),-1===U&&Z.push(k)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}B._Counter=0},11242:(k,Q,i)=>{i.d(Q,{d:()=>Z});class Z{get wrapU(){return this._cachedWrapU}set wrapU(k){this._cachedWrapU=k}get wrapV(){return this._cachedWrapV}set wrapV(k){this._cachedWrapV=k}get wrapR(){return this._cachedWrapR}set wrapR(k){this._cachedWrapR=k}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(k){this._cachedAnisotropicFilteringLevel=k}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(k){this._comparisonFunction=k}get useMipMaps(){return this._useMipMaps}set useMipMaps(k){this._useMipMaps=k}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=k,this._cachedWrapV=Q,this._cachedWrapR=i,this._cachedAnisotropicFilteringLevel=Z,this.samplingMode=U,this._comparisonFunction=C,this}compareSampler(k){return this._cachedWrapU===k._cachedWrapU&&this._cachedWrapV===k._cachedWrapV&&this._cachedWrapR===k._cachedWrapR&&this._cachedAnisotropicFilteringLevel===k._cachedAnisotropicFilteringLevel&&this.samplingMode===k.samplingMode&&this._comparisonFunction===k._comparisonFunction&&this._useMipMaps===k._useMipMaps}}},11142:(k,Q,i)=>{i.d(Q,{b:()=>C});var Z=i(11134);const U=(k,Q,i)=>k?k.getClassName&&"Mesh"===k.getClassName()?null:!k.getClassName||"SubMesh"!==k.getClassName()&&"PhysicsBody"!==k.getClassName()?k.clone?k.clone():Array.isArray(k)?k.slice():i&&"object"===typeof k?{...k}:null:k.clone(Q):null;class C{static DeepCopy(k,Q,i,C){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=function(k){const Q=[];do{const i=Object.getOwnPropertyNames(k);for(const k of i)-1===Q.indexOf(k)&&Q.push(k)}while(k=Object.getPrototypeOf(k));return Q}(k);for(const O of o){if("_"===O[0]&&(!C||-1===C.indexOf(O)))continue;if(O.endsWith("Observable"))continue;if(i&&-1!==i.indexOf(O))continue;const o=k[O],J=typeof o;if("function"!==J)try{if("object"===J)if(o instanceof Uint8Array)Q[O]=Uint8Array.from(o);else if(o instanceof Array){if(Q[O]=[],o.length>0)if("object"==typeof o[0])for(let k=0;k<o.length;k++){const i=U(o[k],Q,B);-1===Q[O].indexOf(i)&&Q[O].push(i)}else Q[O]=o.slice(0)}else Q[O]=U(o,Q,B);else Q[O]=o}catch(m){Z.c.Warn(m.message)}}}}},11172:(k,Q,i)=>{i.d(Q,{d:()=>Z,e:()=>U,f:()=>C});class Z extends Error{}Z._setPrototypeOf=Object.setPrototypeOf||((k,Q)=>(k.__proto__=Q,k));const U={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class C extends Z{constructor(k,Q,i){super(k),this.errorCode=Q,this.innerError=i,this.name="RuntimeError",Z._setPrototypeOf(this,C.prototype)}}},11163:(k,Q,i)=>{i.d(Q,{c:()=>v,f:()=>c,j:()=>a,l:()=>T,p:()=>s,n:()=>E,r:()=>y,u:()=>L,w:()=>u,x:()=>f});var Z=i(11150),U=i(11131),C=i(11122);class B{}B.FilesToLoad={};var o=i(11172),m=i(11178),O=i(11183),J=i(11157),G=i(11134),H=i(11189),e=i(11187),F=i(11195);const z=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class E extends o.f{constructor(k,Q){super(k,o.e.LoadFileError),this.name="LoadFileError",o.d._setPrototypeOf(this,E.prototype),Q instanceof Z.d?this.request=Q:this.file=Q}}class l extends o.f{constructor(k,Q){super(k,o.e.RequestFileError),this.request=Q,this.name="RequestFileError",o.d._setPrototypeOf(this,l.prototype)}}class h extends o.f{constructor(k,Q){super(k,o.e.ReadFileError),this.file=Q,this.name="ReadFileError",o.d._setPrototypeOf(this,h.prototype)}}const c={DefaultRetryStrategy:class{static ExponentialBackoff(){let k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(i,Z,U)=>0!==Z.status||U>=k||-1!==i.indexOf("file:")?-1:Math.pow(2,U)*Q}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:k=>k,ScriptBaseUrl:"",ScriptPreprocessUrl:k=>k,CleanUrl:k=>k=k.replace(/#/gm,"%23")},f=(k,Q)=>{if((!k||0!==k.indexOf("data:"))&&c.CorsBehavior)if("string"===typeof c.CorsBehavior||c.CorsBehavior instanceof String)Q.crossOrigin=c.CorsBehavior;else{const i=c.CorsBehavior(k);i&&(Q.crossOrigin=i)}},Y={getRequiredSize:null},y=function(k,Q,i,U){let C,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",O=arguments.length>5?arguments[5]:void 0,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:J.b.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===G||void 0===G||!G._features.forceBitmapOverHTMLImageElement))return i("LoadImage is only supported in web or BabylonNative environments."),null;let H=!1;k instanceof ArrayBuffer||ArrayBuffer.isView(k)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(C=URL.createObjectURL(new Blob([k],{type:o})),H=!0):C=`data:${o};base64,`+(0,m.h)(k):k instanceof Blob?(C=URL.createObjectURL(k),H=!0):(C=c.CleanUrl(k),C=c.PreprocessUrl(C));const e=Q=>{if(i){const Z=C||k.toString();i(`Error while trying to load image: ${0===Z.indexOf("http")||Z.length<=128?Z:Z.slice(0,128)+"..."}`,Q)}};if(null!==G&&void 0!==G&&G._features.forceBitmapOverHTMLImageElement)return s(C,(Z=>{G.createImageBitmap(new Blob([Z],{type:o}),{premultiplyAlpha:"none",...O}).then((k=>{Q(k),H&&URL.revokeObjectURL(C)})).catch((Q=>{i&&i("Error while trying to load image: "+k,Q)}))}),void 0,U||void 0,!0,((k,Q)=>{e(Q)})),null;const F=new Image;if(Y.getRequiredSize){const Q=Y.getRequiredSize(k);Q.width&&(F.width=Q.width),Q.height&&(F.height=Q.height)}f(C,F);const z=[],E=()=>{for(const k of z)k.target.removeEventListener(k.name,k.handler);z.length=0};z.push({target:F,name:"load",handler:()=>{E(),Q(F),H&&F.src&&URL.revokeObjectURL(F.src)}}),z.push({target:F,name:"error",handler:k=>{E(),e(k),H&&F.src&&URL.revokeObjectURL(F.src)}}),z.push({target:document,name:"securitypolicyviolation",handler:k=>{if(k.blockedURI!==F.src||"ni"===k.disposition)return;E();const Q=new Error(`CSP violation of policy ${k.effectiveDirective} ${k.blockedURI}. Current policy is ${k.originalPolicy}`);J.b.UseFallbackTexture=!1,e(Q),H&&F.src&&URL.revokeObjectURL(F.src),F.src=""}}),(()=>{for(const k of z)k.target.addEventListener(k.name,k.handler)})();const l="blob:"===C.substring(0,5),h="data:"===C.substring(0,5),y=()=>{l||h||!Z.d.IsCustomRequestAvailable?F.src=C:s(C,((k,Q,i)=>{const Z=new Blob([k],{type:!o&&i?i:o}),U=URL.createObjectURL(Z);H=!0,F.src=U}),void 0,U||void 0,!0,((k,Q)=>{e(Q)}))},L=()=>{U&&U.loadImage(C,F)};if(!l&&!h&&U&&U.enableTexturesOffline)U.open(L,y);else{if(-1!==C.indexOf("file:")){const k=decodeURIComponent(C.substring(5).toLowerCase());if(B.FilesToLoad[k]&&"undefined"!==typeof URL){try{let Q;try{Q=URL.createObjectURL(B.FilesToLoad[k])}catch(u){Q=URL.createObjectURL(B.FilesToLoad[k])}F.src=Q,H=!0}catch(a){F.src=""}return F}}y()}return F},L=(k,Q,i,Z,U)=>{const B=new FileReader,o={onCompleteObservable:new C.c,abort:()=>B.abort()};return B.onloadend=()=>o.onCompleteObservable.notifyObservers(o),U&&(B.onerror=()=>{U(new h(`Unable to read ${k.name}`,k))}),B.onload=k=>{Q(k.target.result)},i&&(B.onprogress=i),Z?B.readAsArrayBuffer(k):B.readAsText(k),o},s=(k,Q,i,Z,U,m,O)=>{if(k.name)return L(k,Q,i,U,m?k=>{m(void 0,k)}:void 0);const J=k;if(-1!==J.indexOf("file:")){let k=decodeURIComponent(J.substring(5).toLowerCase());0===k.indexOf("./")&&(k=k.substring(2));const Z=B.FilesToLoad[k];if(Z)return L(Z,Q,i,U,m?k=>m(void 0,new E(k.message,k.file)):void 0)}const{match:e,type:F}=K(J);if(e){const k={onCompleteObservable:new C.c,abort:()=>()=>{}};try{const k=U?v(J):N(J);Q(k,void 0,F)}catch(o){m?m(void 0,o):G.c.Error(o.message||"Failed to parse the Data URL")}return H.c.SetImmediate((()=>{k.onCompleteObservable.notifyObservers(k)})),k}return u(J,((k,i)=>{Q(k,null===i||void 0===i?void 0:i.responseURL,null===i||void 0===i?void 0:i.getResponseHeader("content-type"))}),i,Z,U,m?k=>{m(k.request,new E(k.message,k.request))}:void 0,O)},u=(k,Q,i,B,o,m,O)=>{k=c.CleanUrl(k),k=c.PreprocessUrl(k);const J=c.BaseUrl+k;let H=!1;const e={onCompleteObservable:new C.c,abort:()=>H=!0},F=()=>{let k,C=new Z.d,B=null;const F=()=>{C&&(i&&C.removeEventListener("progress",i),k&&C.removeEventListener("readystatechange",k),C.removeEventListener("loadend",z))};let z=()=>{F(),e.onCompleteObservable.notifyObservers(e),e.onCompleteObservable.clear(),i=void 0,k=null,z=null,m=void 0,O=void 0,Q=void 0};e.abort=()=>{H=!0,z&&z(),C&&C.readyState!==(XMLHttpRequest.DONE||4)&&C.abort(),null!==B&&(clearTimeout(B),B=null),C=null};const E=k=>{const Q=k.message||"Unknown error";m&&C?m(new l(Q,C)):G.c.Error(Q)},h=G=>{if(C){if(C.open("GET",J),O)try{O(C)}catch(e){return void E(e)}o&&(C.responseType="arraybuffer"),i&&C.addEventListener("progress",i),z&&C.addEventListener("loadend",z),k=()=>{if(!H&&C&&C.readyState===(XMLHttpRequest.DONE||4)){if(k&&C.removeEventListener("readystatechange",k),C.status>=200&&C.status<300||0===C.status&&(!(0,U.j)()||j())){const k=o?C.response:C.responseText;if(null!==k){try{Q&&Q(k,C)}catch(e){E(e)}return}}const i=c.DefaultRetryStrategy;if(i){const k=i(J,C,G);if(-1!==k)return F(),C=new Z.d,void(B=setTimeout((()=>h(G+1)),k))}const O=new l("Error status: "+C.status+" "+C.statusText+" - Unable to load "+J,C);m&&m(O)}},C.addEventListener("readystatechange",k),C.send()}};h(0)};if(B&&B.enableSceneOffline){const Z=k=>{k&&k.status>400?m&&m(k):F()},U=()=>{B&&B.loadFile(c.BaseUrl+k,(k=>{!H&&Q&&Q(k),e.onCompleteObservable.notifyObservers(e)}),i?k=>{!H&&i&&i(k)}:void 0,Z,o)};B.open(U,Z)}else F();return e},a=k=>{const{match:Q,type:i}=K(k);if(Q)return i||void 0;const Z=k.lastIndexOf(".");switch(k.substring(Z+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"XC":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},j=()=>"undefined"!==typeof location&&"file:"===location.protocol,T=k=>z.test(k),K=k=>{const Q=z.exec(k);if(null===Q||0===Q.length)return{match:!1,type:""};return{match:!0,type:Q[0].replace("data:","").replace("base64,","")}};function v(k){return(0,m.b)(k.split(",")[1])}const N=k=>(0,m.e)(k.split(",")[1]);let X;F.b._FileToolsLoadImage=y,e.c.loadFile=s,O.q.loadFile=s;((k,Q,i,Z,U,C,B,o,m,O)=>{X={DecodeBase64UrlToBinary:k,DecodeBase64UrlToString:Q,DefaultRetryStrategy:i.DefaultRetryStrategy,BaseUrl:i.BaseUrl,CorsBehavior:i.CorsBehavior,PreprocessUrl:i.PreprocessUrl,IsBase64DataUrl:Z,IsFileURL:U,LoadFile:C,LoadImage:B,ReadFile:o,RequestFile:m,SetCorsBehavior:O},Object.defineProperty(X,"DefaultRetryStrategy",{get:function(){return i.DefaultRetryStrategy},set:function(k){i.DefaultRetryStrategy=k}}),Object.defineProperty(X,"BaseUrl",{get:function(){return i.BaseUrl},set:function(k){i.BaseUrl=k}}),Object.defineProperty(X,"PreprocessUrl",{get:function(){return i.PreprocessUrl},set:function(k){i.PreprocessUrl=k}}),Object.defineProperty(X,"CorsBehavior",{get:function(){return i.CorsBehavior},set:function(k){i.CorsBehavior=k}})})(v,N,c,T,j,s,y,L,u,f)},11255:(k,Q,i)=>{function Z(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(k=>{const Q=16*Math.random()|0;return("x"===k?Q:3&Q|8).toString(16)}))}i.d(Q,{b:()=>Z})},11251:(k,Q,i)=>{i.d(Q,{c:()=>C});var Z=i(11134),U=i(11253);class C{static Instantiate(k){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[k])return this.RegisteredExternalClasses[k];const Q=(0,U.b)(k);if(Q)return Q;Z.c.Warn(k+" not found, you may have missed an import.");const i=k.split(".");let C=window||this;for(let Z=0,U=i.length;Z<U;Z++)C=C[i[Z]];return"function"!==typeof C?null:C}}C.RegisteredExternalClasses={}},11144:(k,Q,i)=>{i.d(Q,{c:()=>U});var Z=i(11131);class U{static get Now(){return(0,Z.j)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11178:(k,Q,i)=>{i.d(Q,{b:()=>B,e:()=>C,g:()=>Z,h:()=>U});const Z=k=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(k);let Q="";for(let i=0;i<k.byteLength;i++)Q+=String.fromCharCode(k[i]);return Q},U=k=>{const Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i,Z,U,C,B,o,m,O="",J=0;const G=ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k);for(;J<G.length;)i=G[J++],Z=J<G.length?G[J++]:Number.NaN,U=J<G.length?G[J++]:Number.NaN,C=i>>2,B=(3&i)<<4|Z>>4,o=(15&Z)<<2|U>>6,m=63&U,isNaN(Z)?o=m=64:isNaN(U)&&(m=64),O+=Q.charAt(C)+Q.charAt(B)+Q.charAt(o)+Q.charAt(m);return O},C=k=>atob(k),B=k=>{const Q=C(k),i=Q.length,Z=new Uint8Array(new ArrayBuffer(i));for(let U=0;U<i;U++)Z[U]=Q.charCodeAt(U);return Z.buffer}},11259:(k,Q,i)=>{function Z(k){let Q=1;do{Q*=2}while(Q<k);return Q===k}function U(k,Q,i){return k*(1-i)+Q*i}function C(k){const Q=B(k),i=o(k);return Q-k>k-i?i:Q}function B(k){return k--,k|=k>>1,k|=k>>2,k|=k>>4,k|=k>>8,k|=k>>16,++k}function o(k){return k|=k>>1,k|=k>>2,k|=k>>4,k|=k>>8,(k|=k>>16)-(k>>1)}function m(k,Q){let i;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:i=o(k);break;case 2:i=C(k);break;default:i=B(k)}return Math.min(i,Q)}i.d(Q,{e:()=>o,g:()=>m,k:()=>Z,l:()=>U,m:()=>C})},11119:(k,Q,i)=>{i.r(Q),i.d(Q,{AsyncLoop:()=>h,Tools:()=>E,className:()=>l});var Z=i(11122),U=i(11131),C=i(11134),B=i(11142),o=i(11144),m=i(11146),O=i(11150),J=i(11157),G=i(11163),H=i(11189),e=i(11251),F=i(11255),z=i(11259);class E{static get BaseUrl(){return G.f.BaseUrl}static set BaseUrl(k){G.f.BaseUrl=k}static get CleanUrl(){return G.f.CleanUrl}static set CleanUrl(k){G.f.CleanUrl=k}static IsAbsoluteUrl(k){return 0===k.indexOf("//")||-1!==k.indexOf("://")&&(-1!==k.indexOf(".")&&(-1!==k.indexOf("/")&&(!(k.indexOf(":")>k.indexOf("/"))&&(k.indexOf("://")<k.indexOf(".")||(0===k.indexOf("data:")||0===k.indexOf("blob:"))))))}static set ScriptBaseUrl(k){G.f.ScriptBaseUrl=k}static get ScriptBaseUrl(){return G.f.ScriptBaseUrl}static set CDNBaseUrl(k){E.ScriptBaseUrl=k,E.AssetBaseUrl=k}static set ScriptPreprocessUrl(k){G.f.ScriptPreprocessUrl=k}static get ScriptPreprocessUrl(){return G.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return G.f.DefaultRetryStrategy}static set DefaultRetryStrategy(k){G.f.DefaultRetryStrategy=k}static get CorsBehavior(){return G.f.CorsBehavior}static set CorsBehavior(k){G.f.CorsBehavior=k}static get UseFallbackTexture(){return J.b.UseFallbackTexture}static set UseFallbackTexture(k){J.b.UseFallbackTexture=k}static get RegisteredExternalClasses(){return e.c.RegisteredExternalClasses}static set RegisteredExternalClasses(k){e.c.RegisteredExternalClasses=k}static get fallbackTexture(){return J.b.FallbackTexture}static set fallbackTexture(k){J.b.FallbackTexture=k}static FetchToRef(k,Q,i,Z,U,C){const B=4*((Math.abs(k)*i%i|0)+(Math.abs(Q)*Z%Z|0)*i);C.r=U[B]/255,C.g=U[B+1]/255,C.b=U[B+2]/255,C.a=U[B+3]/255}static Mix(k,Q,i){return 0}static Instantiate(k){return e.c.Instantiate(k)}static SetImmediate(k){H.c.SetImmediate(k)}static IsExponentOfTwo(k){return!0}static FloatRound(k){return Math.fround(k)}static GetFilename(k){const Q=k.lastIndexOf("/");return Q<0?k:k.substring(Q+1)}static GetFolderPath(k){let Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=k.lastIndexOf("/");return i<0?Q?k:"":k.substring(0,i+1)}static ToDegrees(k){return 180*k/Math.PI}static ToRadians(k){return k*Math.PI/180}static SmoothAngleChange(k,Q){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const Z=this.ToRadians(k),U=this.ToRadians(Q);return this.ToDegrees(Math.atan2((1-i)*Math.sin(U)+i*Math.sin(Z),(1-i)*Math.cos(U)+i*Math.cos(Z)))}static MakeArray(k,Q){return!0===Q||void 0!==k&&null!=k?Array.isArray(k)?k:[k]:null}static GetPointerPrefix(k){return(0,U.j)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(k,Q){(0,G.x)(k,Q)}static SetReferrerPolicyBehavior(k,Q){Q.referrerPolicy=k}static get PreprocessUrl(){return G.f.PreprocessUrl}static set PreprocessUrl(k){G.f.PreprocessUrl=k}static LoadImage(k,Q,i,Z,U,C){return(0,G.r)(k,Q,i,Z,U,C)}static LoadFile(k,Q,i,Z,U,C){return(0,G.p)(k,Q,i,Z,U,C)}static async LoadFileAsync(k){let Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((i,Z)=>{(0,G.p)(k,(k=>{i(k)}),void 0,void 0,Q,((k,Q)=>{Z(Q)}))}))}static GetAssetUrl(k){if(!k)return"";if(E.AssetBaseUrl&&k.startsWith(E._DefaultAssetsUrl)){const Q="/"===E.AssetBaseUrl[E.AssetBaseUrl.length-1]?E.AssetBaseUrl.substring(0,E.AssetBaseUrl.length-1):E.AssetBaseUrl;return k.replace(E._DefaultAssetsUrl,Q)}return k}static GetBabylonScriptURL(k,Q){if(!k)return"";if(E.ScriptBaseUrl&&k.startsWith(E._DefaultCdnUrl)){const Q="/"===E.ScriptBaseUrl[E.ScriptBaseUrl.length-1]?E.ScriptBaseUrl.substring(0,E.ScriptBaseUrl.length-1):E.ScriptBaseUrl;k=k.replace(E._DefaultCdnUrl,Q)}return k=E.ScriptPreprocessUrl(k),Q&&(k=E.GetAbsoluteUrl(k)),k}static LoadBabylonScript(k,Q,i,Z){k=E.GetBabylonScriptURL(k),E.LoadScript(k,Q,i)}static async LoadBabylonScriptAsync(k){return k=E.GetBabylonScriptURL(k),await E.LoadScriptAsync(k)}static LoadScript(k,Q,i,Z){let C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(k),Q&&Q()}catch(m){null===i||void 0===i||i(`Unable to load script '${k}' in worker`,m)}return}if(!(0,U.j)())return void(null===i||void 0===i||i(`Cannot load script '${k}' outside of a window or a worker`));const B=document.getElementsByTagName("head")[0],o=document.createElement("script");C?(o.setAttribute("type","module"),o.innerText=k):(o.setAttribute("type","text/javascript"),o.setAttribute("src",k)),Z&&(o.id=Z),o.onload=()=>{Q&&Q()},o.onerror=Q=>{i&&i(`Unable to load script '${k}'`,Q)},B.appendChild(o)}static async LoadScriptAsync(k,Q){return await new Promise(((i,Z)=>{this.LoadScript(k,(()=>{i()}),((k,Q)=>{Z(Q||new Error(k))}),Q)}))}static ReadFileAsDataURL(k,Q,i){const U=new FileReader,C={onCompleteObservable:new Z.c,abort:()=>U.abort()};return U.onloadend=()=>{C.onCompleteObservable.notifyObservers(C)},U.onload=k=>{Q(k.target.result)},U.onprogress=i,U.readAsDataURL(k),C}static ReadFile(k,Q,i,Z,U){return(0,G.u)(k,Q,i,Z,U)}static FileAsURL(k){const Q=new Blob([k]);return window.URL.createObjectURL(Q)}static Format(k){let Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return k.toFixed(Q)}static DeepCopy(k,Q,i,Z){B.b.DeepCopy(k,Q,i,Z)}static IsEmpty(k){for(const Q in k)if(Object.prototype.hasOwnProperty.call(k,Q))return!1;return!0}static RegisterTopRootEvents(k,Q){for(let Z=0;Z<Q.length;Z++){const U=Q[Z];k.addEventListener(U.name,U.handler,!1);try{window.parent&&window.parent.addEventListener(U.name,U.handler,!1)}catch(i){}}}static UnregisterTopRootEvents(k,Q){for(let Z=0;Z<Q.length;Z++){const U=Q[Z];k.removeEventListener(U.name,U.handler);try{k.parent&&k.parent.removeEventListener(U.name,U.handler)}catch(i){}}}static async DumpFramebuffer(k,Q,i,Z){throw(0,m.d)("DumpTools")}static DumpData(k,Q,i,Z){throw(0,m.d)("DumpTools")}static async DumpDataAsync(k,Q,i){throw(0,m.d)("DumpTools")}static _IsOffScreenCanvas(k){return void 0!==k.convertToBlob}static ToBlob(k,Q){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Z=arguments.length>3?arguments[3]:void 0;E._IsOffScreenCanvas(k)||k.toBlob||(k.toBlob=function(k,Q,i){setTimeout((()=>{const Z=atob(this.toDataURL(Q,i).split(",")[1]),U=Z.length,C=new Uint8Array(U);for(let k=0;k<U;k++)C[k]=Z.charCodeAt(k);k(new Blob([C]))}))}),E._IsOffScreenCanvas(k)?k.convertToBlob({type:i,quality:Z}).then((k=>Q(k))):k.toBlob((function(k){Q(k)}),i,Z)}static DownloadBlob(k,Q){if("download"in document.createElement("a")){if(!Q){const k=new Date;Q="screenshot_"+((k.getFullYear()+"-"+(k.getMonth()+1)).slice(2)+"-"+k.getDate()+"_"+k.getHours()+"-"+("0"+k.getMinutes()).slice(-2))+".png"}E.Download(k,Q)}else if(k&&"undefined"!==typeof URL){const Q=URL.createObjectURL(k),i=window.open("");if(!i)return;const Z=i.document.createElement("img");Z.onload=function(){URL.revokeObjectURL(Q)},Z.src=Q,i.document.body.appendChild(Z)}}static EncodeScreenshotCanvasData(k,Q){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",Z=arguments.length>3?arguments[3]:void 0,U=arguments.length>4?arguments[4]:void 0;if("string"!==typeof Z&&Q){if(Q){if(E._IsOffScreenCanvas(k))return void k.convertToBlob({type:i,quality:U}).then((k=>{const i=new FileReader;i.readAsDataURL(k),i.onloadend=()=>{const k=i.result;Q(k)}}));const Z=k.toDataURL(i,U);Q(Z)}}else this.ToBlob(k,(function(k){k&&E.DownloadBlob(k,Z),Q&&Q("")}),i,U)}static Download(k,Q){if("undefined"===typeof URL)return;const i=window.URL.createObjectURL(k),Z=document.createElement("a");document.body.appendChild(Z),Z.style.display="none",Z.href=i,Z.download=Q,Z.addEventListener("click",(()=>{Z.parentElement&&Z.parentElement.removeChild(Z)})),Z.click(),window.URL.revokeObjectURL(i)}static BackCompatCameraNoPreventDefault(k){return"boolean"===typeof k[0]?k[0]:"boolean"===typeof k[1]&&k[1]}static CreateScreenshot(k,Q,i,Z){throw(0,m.d)("ScreenshotTools")}static async CreateScreenshotAsync(k,Q,i){throw(0,m.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(k,Q,i,Z){throw(0,m.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(k,Q,i){throw(0,m.d)("ScreenshotTools")}static RandomId(){return(0,F.b)()}static IsBase64(k){return(0,G.l)(k)}static DecodeBase64(k){return(0,G.c)(k)}static get errorsCount(){return C.c.errorsCount}static Log(k){C.c.Log(k)}static Warn(k){C.c.Warn(k)}static Error(k){C.c.Error(k)}static get LogCache(){return C.c.LogCache}static ClearLogCache(){C.c.ClearLogCache()}static set LogLevels(k){C.c.LogLevels=k}static set PerformanceLogLevel(k){return(k&E.PerformanceUserMarkLogLevel)===E.PerformanceUserMarkLogLevel?(E.StartPerformanceCounter=E._StartUserMark,void(E.EndPerformanceCounter=E._EndUserMark)):(k&E.PerformanceConsoleLogLevel)===E.PerformanceConsoleLogLevel?(E.StartPerformanceCounter=E._StartPerformanceConsole,void(E.EndPerformanceCounter=E._EndPerformanceConsole)):(E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,void(E.EndPerformanceCounter=E._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(k,Q){}static _EndPerformanceCounterDisabled(k,Q){}static _StartUserMark(k){let Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._Performance){if(!(0,U.j)())return;E._Performance=window.performance}Q&&E._Performance.mark&&E._Performance.mark(k+"-Begin")}static _EndUserMark(k){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&E._Performance.mark&&(E._Performance.mark(k+"-End"),E._Performance.measure(k,k+"-Begin",k+"-End"))}static _StartPerformanceConsole(k){let Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Q&&(E._StartUserMark(k,Q),console.time&&console.time(k))}static _EndPerformanceConsole(k){let Q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Q&&(E._EndUserMark(k,Q),console.timeEnd(k))}static get Now(){return o.c.Now}static GetClassName(k){let Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null;if(!Q&&k.getClassName)i=k.getClassName();else{if(k instanceof Object){i=(Q?k:Object.getPrototypeOf(k)).constructor.__bjsclassName__}i||(i=typeof k)}return i}static First(k,Q){for(const i of k)if(Q(i))return i;return null}static getFullClassName(k){let Q=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=null,Z=null;if(!Q&&k.getClassName)i=k.getClassName();else{if(k instanceof Object){const U=Q?k:Object.getPrototypeOf(k);i=U.constructor.__bjsclassName__,Z=U.constructor.__bjsmoduleName__}i||(i=typeof k)}return i?(null!=Z?Z+".":"")+i:null}static async DelayAsync(k){await new Promise((Q=>{setTimeout((()=>{Q()}),k)}))}static IsSafari(){return!!(0,U.f)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function l(k,Q){return i=>{i.__bjsclassName__=k,i.__bjsmoduleName__=null!=Q?Q:null}}E.AssetBaseUrl="",E.UseCustomRequestHeaders=!1,E.CustomRequestHeaders=O.d.CustomRequestHeaders,E.GetDOMTextContent=U.b,E._DefaultCdnUrl="https://cdn.babylonjs.com",E._DefaultAssetsUrl="https://assets.babylonjs.com/core",E.GetAbsoluteUrl="object"===typeof document?k=>{const Q=document.createElement("a");return Q.href=k,Q.href}:"function"===typeof URL&&"object"===typeof location?k=>new URL(k,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},E.NoneLogLevel=C.c.NoneLogLevel,E.MessageLogLevel=C.c.MessageLogLevel,E.WarningLogLevel=C.c.WarningLogLevel,E.ErrorLogLevel=C.c.ErrorLogLevel,E.AllLogLevel=C.c.AllLogLevel,E.IsWindowObjectExist=U.j,E.PerformanceNoneLogLevel=0,E.PerformanceUserMarkLogLevel=1,E.PerformanceConsoleLogLevel=2,E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,E.EndPerformanceCounter=E._EndPerformanceCounterDisabled;class h{constructor(k,Q,i){let Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=k,this.index=Z-1,this._done=!1,this._fn=Q,this._successCallback=i}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(k,Q,i){const Z=new h(k,Q,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return Z.executeNext(),Z}static SyncAsyncForLoop(k,Q,i,Z,U){let C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return h.Run(Math.ceil(k/Q),(Z=>{U&&U()?Z.breakLoop():setTimeout((()=>{for(let C=0;C<Q;++C){const B=Z.index*Q+C;if(B>=k)break;if(i(B),U&&U()){Z.breakLoop();break}}Z.executeNext()}),C)}),Z)}}E.Mix=z.l,E.IsExponentOfTwo=z.k,J.b.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11253:(k,Q,i)=>{i.d(Q,{b:()=>C,e:()=>U});const Z={};function U(k,Q){Z[k]=Q}function C(k){return Z[k]}},11150:(k,Q,i)=>{i.d(Q,{d:()=>Z});class Z{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(Z.CustomRequestHeaders).length>0||Z.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const k in Z.CustomRequestHeaders){const Q=Z.CustomRequestHeaders[k];Q&&this._xhr.setRequestHeader(k,Q)}}_shouldSkipRequestModifications(k){return Z.SkipRequestModificationForBabylonCDN&&(k.includes("preview.babylonjs.com")||k.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(k){this._xhr.onprogress=k}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(k){this._xhr.responseType=k}get timeout(){return this._xhr.timeout}set timeout(k){this._xhr.timeout=k}addEventListener(k,Q,i){this._xhr.addEventListener(k,Q,i)}removeEventListener(k,Q,i){this._xhr.removeEventListener(k,Q,i)}abort(){this._xhr.abort()}send(k){Z.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(k)}open(k,Q){for(const i of Z.CustomRequestModifiers){if(this._shouldSkipRequestModifications(Q))return;Q=i(this._xhr,Q)||Q}Q=(Q=Q.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=Q,this._xhr.open(k,Q,!0)}setRequestHeader(k,Q){this._xhr.setRequestHeader(k,Q)}getResponseHeader(k){return this._xhr.getResponseHeader(k)}}Z.CustomRequestHeaders={},Z.CustomRequestModifiers=new Array,Z.SkipRequestModificationForBabylonCDN=!0}}]);