"use strict";(self.r00gjvkwa6=self.r00gjvkwa6||[]).push([[8],{11213:(H,O,S)=>{S.d(O,{b:()=>K});var t=S(11180),q=S(11151),p=S(11216),G=S(11234),U=S(11162);class V{constructor(){let H=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,H&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(H){this._zOffset!==H&&(this._zOffset=H,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(H){this._zOffsetUnits!==H&&(this._zOffsetUnits=H,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(H){this._cullFace!==H&&(this._cullFace=H,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(H){this._cull!==H&&(this._cull=H,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(H){this._depthFunc!==H&&(this._depthFunc=H,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(H){this._depthMask!==H&&(this._depthMask=H,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(H){this._depthTest!==H&&(this._depthTest=H,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(H){this._frontFace!==H&&(this._frontFace=H,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(H){this.isDirty&&(this._isCullDirty&&(this.cull?H.enable(H.CULL_FACE):H.disable(H.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(H.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(H.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?H.enable(H.DEPTH_TEST):H.disable(H.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(H.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(H.enable(H.POLYGON_OFFSET_FILL),H.polygonOffset(this.zOffset,this.zOffsetUnits)):H.disable(H.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(H.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class w{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(H){this._func!==H&&(this._func=H,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(H){this._funcRef!==H&&(this._funcRef=H,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(H){this._funcMask!==H&&(this._funcMask=H,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(H){this._opStencilFail!==H&&(this._opStencilFail=H,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(H){this._opDepthFail!==H&&(this._opDepthFail=H,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(H){this._opStencilDepthPass!==H&&(this._opStencilDepthPass=H,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(H){this._mask!==H&&(this._mask=H,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(H){this._enabled!==H&&(this._enabled=H,this._isStencilTestDirty=!0)}constructor(){let H=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,H&&this.reset()}reset(){var H;this.stencilMaterial=void 0,null===(H=this.stencilGlobal)||void 0===H||H.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(H){var O;if(!H)return;const S=!this.useStencilGlobalOnly&&!(null===(O=this.stencilMaterial)||void 0===O||!O.enabled);this.enabled=S?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=S?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=S?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=S?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=S?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=S?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=S?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=S?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?H.enable(H.STENCIL_TEST):H.disable(H.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(H.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(H.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(H.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class o{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=o.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=o.KEEP,this.opDepthFail=o.KEEP,this.opStencilDepthPass=o.REPLACE}get stencilFunc(){return this.func}set stencilFunc(H){this.func=H}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(H){this.funcRef=H}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(H){this.funcMask=H}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(H){this.opStencilFail=H}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(H){this.opDepthFail=H}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(H){this.opStencilDepthPass=H}get stencilMask(){return this.mask}set stencilMask(H){this.mask=H}get stencilTest(){return this.enabled}set stencilTest(H){this.enabled=H}}o.ALWAYS=519,o.KEEP=7680,o.REPLACE=7681;class h{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(H){this._alphaBlend!==H&&(this._alphaBlend=H,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(H,O,S,t){this._blendConstants[0]===H&&this._blendConstants[1]===O&&this._blendConstants[2]===S&&this._blendConstants[3]===t||(this._blendConstants[0]=H,this._blendConstants[1]=O,this._blendConstants[2]=S,this._blendConstants[3]=t,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(H,O,S,t){this._blendFunctionParameters[0]===H&&this._blendFunctionParameters[1]===O&&this._blendFunctionParameters[2]===S&&this._blendFunctionParameters[3]===t||(this._blendFunctionParameters[0]=H,this._blendFunctionParameters[1]=O,this._blendFunctionParameters[2]=S,this._blendFunctionParameters[3]=t,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(H,O){this._blendEquationParameters[0]===H&&this._blendEquationParameters[1]===O||(this._blendEquationParameters[0]=H,this._blendEquationParameters[1]=O,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(H){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?H.enable(H.BLEND):H.disable(H.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(H.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(H.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(H.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var a=S(11169),j=S(11239),e=S(11148),X=S(11140),E=S(11200),y=S(11246);function T(H,O){if((0,e.n)()){const{requestAnimationFrame:S}=O||window;if("function"===typeof S)return S(H)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(H);return setTimeout(H,16)}class K{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(H){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(H){H!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=H,this._depthCullingState.depthFunc=H?518:515)}setColorWrite(H){H!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=H)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(H){if(H)return this.isNDCHalfZRange?H.IS_NDC_HALF_ZRANGE="":delete H.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?H.USE_REVERSE_DEPTHBUFFER="":delete H.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?H.USE_EXACT_SRGB_CONVERSIONS="":delete H.USE_EXACT_SRGB_CONVERSIONS);{let H="";return this.isNDCHalfZRange&&(H+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(H&&(H+="\n"),H+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(H&&(H+="\n"),H+="#define USE_EXACT_SRGB_CONVERSIONS"),H}}_rebuildInternalTextures(){const H=this._internalTexturesCache.slice();for(const O of H)O._rebuild()}_rebuildRenderTargetWrappers(){const H=this._renderTargetWrapperCache.slice();for(const O of H)O._rebuild()}_rebuildEffects(){for(const H in this._compiledEffects){const O=this._compiledEffects[H];O._pipelineContext=null,O._prepareEffect()}p.Effect.ResetCache()}_rebuildGraphicsResources(){var H;this.wipeCaches(!0),this._rebuildEffects(),null===(H=this._rebuildComputeEffects)||void 0===H||H.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){q.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(H){setTimeout((()=>{this._clearEmptyResources();const O=this._depthCullingState.depthTest,S=this._depthCullingState.depthFunc,t=this._depthCullingState.depthMask,q=this._stencilState.stencilTest;H(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=O,this._depthCullingState.depthFunc=S,this._depthCullingState.depthMask=t,this._stencilState.stencilTest=q,this._flagContextRestored()}),0)}get G(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(H){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(H){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const H=new Uint8Array(4),O=[H,H,H,H,H,H];this._emptyCubeTexture=this.createRawCubeTexture(O,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(H){if(!H)return this._activeRenderLoops.length=0,void this._cancelFrame();const O=this._activeRenderLoops.indexOf(H);O>=0&&(this._activeRenderLoops.splice(O,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const H=this._frameHandler;if(this._frameHandler=0,(0,e.n)()){const{cancelAnimationFrame:O}=this.getHostWindow()||window;if("function"===typeof O)return O(H)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(H);return clearTimeout(H)}}Up(){this.onBeginFrameObservable.notifyObservers(this)}dp(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(H){this._maxFPS=H,void 0!==H&&(this._minFrameTime=H<=0?Number.MAX_VALUE:1e3/H)}_isOverFrameTime(H){if(!H||void 0===this._maxFPS)return!1;const O=H-this._lastFrameTime;return this._lastFrameTime=H,this._renderAccumulator+=O,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(H){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(H)){let H=!0;(this.G||!this.renderEvenInBackground&&this._windowIsBackground)&&(H=!1),H&&(this.Up(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.dp())}}_renderLoop(H){this._processFrame(H),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let H=0;H<this._activeRenderLoops.length;H++){(0,this._activeRenderLoops[H])()}}_renderViews(){return!1}_queueNewFrame(H,O){return T(H,O)}runRenderLoop(H){-1===this._activeRenderLoops.indexOf(H)&&(this._activeRenderLoops.push(H),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(H){this._depthCullingState.depthTest=H}setZOffset(H){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-H:H}getZOffset(){const H=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-H:H}setZOffsetUnits(H){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-H:H}getZOffsetUnits(){const H=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-H:H}getHostWindow(){return(0,e.n)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(H){this._compatibilityMode=!0}_rebuildTextures(){for(const H of this.scenes)H._rebuildTextures();for(const H of this._virtualScenes)H._rebuildTextures()}_releaseRenderTargetWrapper(H){const O=this._renderTargetWrapperCache.indexOf(H);-1!==O&&this._renderTargetWrapperCache.splice(O,1)}get currentViewport(){return this._cachedViewport}setViewport(H,O,S){const t=O||this.getRenderWidth(),q=S||this.getRenderHeight(),p=H.x||0,G=H.y||0;this._cachedViewport=H,this._viewport(p*t,G*q,t*H.width,q*H.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(H){return new Path2D(H)}get description(){let H=this.name+this.version;return this._caps.parallelShaderCompile&&(H+=" - Parallel shader compilation"),H}_createTextureBase(H,O,S,p){let G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,U=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,V=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,w=arguments.length>7?arguments[7]:void 0,o=arguments.length>8?arguments[8]:void 0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,a=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,e=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,X=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,E=arguments.length>13?arguments[13]:void 0,T=arguments.length>14?arguments[14]:void 0,b=arguments.length>15?arguments[15]:void 0;const D="data:"===(H=H||"").substring(0,5),F="blob:"===H.substring(0,5),Y=D&&-1!==H.indexOf(";base64,"),l=a||new j.d(this,1);l!==a&&(l.label=H.substring(0,60));const d=H;!this._transformTextureUrl||Y||a||h||(H=this._transformTextureUrl(H)),d!==H&&(l._originalUrl=d);const v=H.lastIndexOf(".");let z=X||(v>-1?H.substring(v).toLowerCase():"");z.indexOf("?")>-1&&(z=z.split("?")[0]);const m=(0,y.e)(z,E);p&&p.addPendingData(l),l.url=H,l.generateMipMaps=!O,l.samplingMode=G,l.invertY=S,l._useSRGBBuffer=this._getUseSRGBBuffer(!!b,O),this._doNotHandleContextLost||(l._buffer=h);let r=null;U&&!a&&(r=l.onLoadedObservable.add(U)),a||this._internalTexturesCache.push(l);const W=(S,a)=>{p&&p.removePendingData(l),H===d?(r&&l.onLoadedObservable.remove(r),t.c.UseFallbackTexture&&H!==t.c.FallbackTexture&&this._createTextureBase(t.c.FallbackTexture,O,l.invertY,p,G,null,V,w,o,h,l),S=(S||"Unknown error")+(t.c.UseFallbackTexture?" - Fallback texture was used":""),l.onErrorObservable.notifyObservers({message:S,exception:a}),V&&V(S,a)):(q.b.Warn(`Failed to load ${H}, falling back to ${d}`),this._createTextureBase(d,O,l.invertY,p,G,U,V,w,o,h,l,e,X,E,T,b))};if(m){const O=async H=>{(await m).loadData(H,l,((H,O,S,t,q,U)=>{U?W("TextureLoader failed to load data"):w(l,z,p,{width:H,height:O},l.invertY,!S,t,(()=>(q(),!1)),G)}),T)};h?h instanceof ArrayBuffer?O(new Uint8Array(h)):ArrayBuffer.isView(h)?O(h):V&&V("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(H,(H=>{O(new Uint8Array(H))}),void 0,p?p.offlineProvider:void 0,!0,((H,O)=>{W("Unable to load "+(H&&H.responseURL,O))}))}else{const S=H=>{F&&!this._doNotHandleContextLost&&(l._buffer=H),w(l,z,p,H,l.invertY,O,!1,o,G)};!D||Y?h&&("string"===typeof h.decoding||h.close)?S(h):K._FileToolsLoadImage(H||"",S,W,p?p.offlineProvider:null,E,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof h||h instanceof ArrayBuffer||ArrayBuffer.isView(h)||h instanceof Blob?K._FileToolsLoadImage(h,S,W,p?p.offlineProvider:null,E,l.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):h&&S(h)}return l}_rebuildBuffers(){for(const H of this._uniformBuffers)H._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,e.f)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const H in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,H)&&(this._boundTexturesCache[H]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(H){this._name=H}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(H){this._hardwareScalingLevel=H,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(H){this._doNotHandleContextLost=H}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(H,O,S){var q,p;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new V,this._stencilStateComposer=new w,this._stencilState=new o,this._alphaState=new h,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new X.b,this.onCanvasFocusObservable=new X.b,this.onNewSceneAddedObservable=new X.b,this.onResizeObservable=new X.b,this.onCanvasPointerOutObservable=new X.b,this.onEffectErrorObservable=new X.b,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new X.b,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=H=>this._renderLoop(H),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new X.b,this.onAfterShaderCompilationObservable=new X.b,this.onBeginFrameObservable=new X.b,this.onEndFrameObservable=new X.b,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new X.b,this.onContextRestoredObservable=new X.b,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.up=new X.b,this.onReleaseEffectsObservable=new X.b,t.c.Instances.push(this),this.startTime=U.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,G.d.SetMatrixPrecision(!!O.useHighPrecisionMatrix),(0,e.j)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=S??!1,O.antialias=H??O.antialias,O.deterministicLockstep=O.deterministicLockstep??!1,O.lockstepMaxSteps=O.lockstepMaxSteps??4,O.timeStep=O.timeStep??1/60,O.stencil=O.stencil??!0,this._audioContext=(null===(q=O.audioEngineOptions)||void 0===q?void 0:q.audioContext)??null,this._audioDestination=(null===(p=O.audioEngineOptions)||void 0===p?void 0:p.audioDestination)??null,this.premultipliedAlpha=O.premultipliedAlpha??!0,this._doNotHandleContextLost=!!O.doNotHandleContextLost,this._isStencilEnable=!!O.stencil,this.useExactSrgbConversions=O.useExactSrgbConversions??!1;const a=(0,e.n)()&&window.devicePixelRatio||1,j=O.limitDeviceRatio||a;S=S||O.adaptToDeviceRatio||!1,this._hardwareScalingLevel=S?1/Math.min(j,a):1,this._lastDevicePixelRatio=a,this._creationOptions=O}resize(){let H,O,S=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const H=(0,e.n)()&&window.devicePixelRatio||1,O=this._lastDevicePixelRatio/H;this._lastDevicePixelRatio=H,this._hardwareScalingLevel*=O}if((0,e.n)()&&(0,e.f)())if(this._renderingCanvas){var t,q;const S=null===(t=(q=this._renderingCanvas).getBoundingClientRect)||void 0===t?void 0:t.call(q);H=this._renderingCanvas.clientWidth||(null===S||void 0===S?void 0:S.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,O=this._renderingCanvas.clientHeight||(null===S||void 0===S?void 0:S.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else H=window.innerWidth,O=window.innerHeight;else H=this._renderingCanvas?this._renderingCanvas.width:100,O=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(H/this._hardwareScalingLevel,O/this._hardwareScalingLevel,S)}setSize(H,O){let S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(H|=0,O|=0,!S&&this._renderingCanvas.width===H&&this._renderingCanvas.height===O)return!1;if(this._renderingCanvas.width=H,this._renderingCanvas.height=O,this.scenes){for(let H=0;H<this.scenes.length;H++){const O=this.scenes[H];for(let H=0;H<O.cameras.length;H++){O.cameras[H]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(H,O,S,t,q,p,G,U,V,w,o){throw(0,a.b)("engine.rawTexture")}createRawCubeTexture(H,O,S,t,q,p,G,U){throw(0,a.b)("engine.rawTexture")}createRawTexture3D(H,O,S,t,q,p,G,U,V,w,o){throw(0,a.b)("engine.rawTexture")}createRawTexture2DArray(H,O,S,t,q,p,G,U,V,w,o){throw(0,a.b)("engine.rawTexture")}_sharedInit(H){this._renderingCanvas=H}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const H=navigator.userAgent;this.hostInformation.isMobile=-1!==H.indexOf("Mobile")||-1!==H.indexOf("Mac")&&(0,e.f)()&&"ontouchend"in document},this._checkForMobile(),(0,e.n)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(H){return document.createElement("video")}_reportDrawCall(){var H;let O=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(H=this._drawCalls)||void 0===H||H.addCount(O,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(H,O){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(H,O){return createImageBitmap(H,O)}resizeImageBitmap(H,O,S){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(H){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(H,O){if("undefined"===typeof document)return new OffscreenCanvas(H,O);const S=document.createElement("canvas");return S.width=H,S.height=O,S}createCanvas(H,O){return K._CreateCanvas(H,O)}static _FileToolsLoadImage(H,O,S,t,q,p,G){throw(0,a.b)("FileTools")}_loadFile(H,O,S,t,q,p){const G=(0,E.l)(H,O,S,t,q,p);return this._activeRequests.push(G),G.onCompleteObservable.add((()=>{const H=this._activeRequests.indexOf(G);-1!==H&&this._activeRequests.splice(H,1)})),G}static _FileToolsLoadFile(H,O,S,t,q,p){if(E.e.loadFile)return E.e.loadFile(H,O,S,t,q,p);throw(0,a.b)("FileTools")}dispose(){var H;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(H=this.releaseComputeEffects)||void 0===H||H.call(this),p.Effect.ResetCache();for(const S of this._activeRequests)S.abort();this._boundRenderFunction=null,this.up.notifyObservers(this),this.up.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,e.n)()&&window.removeEventListener("resize",this._checkForMobile);const O=t.c.Instances.indexOf(this);O>=0&&t.c.Instances.splice(O,1),t.c.Instances.length||(t.c.OnEnginesDisposedObservable.notifyObservers(this),t.c.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(H){throw(0,a.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(H,O){for(let S=0;S<t.c.Instances.length;S++){const q=t.c.Instances[S];for(let S=0;S<q.scenes.length;S++)q.scenes[S].markAllMaterialsAsDirty(H,O)}}}K._RenderPassIdCounter=0,K._RescalePostProcessFactory=null,K.CollisionsEpsilon=.001,K.QueueNewFrame=T},11180:(H,O,S)=>{S.d(O,{c:()=>q});var t=S(11140);class q{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}q.Instances=[],q.OnEnginesDisposedObservable=new t.b,q._LastCreatedScene=null,q.UseFallbackTexture=!0,q.FallbackTexture=""},11234:(H,O,S)=>{S.d(O,{d:()=>t});class t{static SetMatrixPrecision(H){if(t.MatrixTrackPrecisionChange=!1,H&&!t.MatrixUse64Bits&&t.MatrixTrackedMatrices)for(let O=0;O<t.MatrixTrackedMatrices.length;++O){const H=t.MatrixTrackedMatrices[O],S=H.ip;H.ip=new Array(16);for(let O=0;O<16;++O)H.ip[O]=S[O]}t.MatrixUse64Bits=H,t.MatrixCurrentType=t.MatrixUse64Bits?Array:Float32Array,t.MatrixTrackedMatrices=null}}t.MatrixUse64Bits=!1,t.MatrixTrackPrecisionChange=!0,t.MatrixCurrentType=Float32Array,t.MatrixTrackedMatrices=[]},11246:(H,O,S)=>{S.d(O,{e:()=>G});var t=S(11151);const q=new Map;function p(H,O){(function(H){return q.delete(H)})(H)&&t.b.Warn(`Extension with the name '${H}' already exists`),q.set(H,O)}function G(H,O){"image/ktx"!==O&&"image/ktx2"!==O||(H=".ktx"),q.has(H)||(H.endsWith(".ies")&&p(".ies",(async()=>await S.e(15).then(S.bind(S,13738)).then((H=>new H._IESTextureLoader)))),H.endsWith(".dds")&&p(".dds",(async()=>await Promise.all([S.e(14),S.e(17),S.e(13),S.e(19),S.e(18),S.e(28)]).then(S.bind(S,13743)).then((H=>new H._DDSTextureLoader)))),H.endsWith(".basis")&&p(".basis",(async()=>await Promise.all([S.e(14),S.e(17),S.e(13),S.e(47)]).then(S.bind(S,13748)).then((H=>new H._BasisTextureLoader)))),H.endsWith(".env")&&p(".env",(async()=>await Promise.all([S.e(14),S.e(17),S.e(13),S.e(19),S.e(18),S.e(23),S.e(21),S.e(45),S.e(48)]).then(S.bind(S,13750)).then((H=>new H._ENVTextureLoader)))),H.endsWith(".hdr")&&p(".hdr",(async()=>await Promise.all([S.e(14),S.e(49)]).then(S.bind(S,13752)).then((H=>new H._HDRTextureLoader)))),(H.endsWith(".ktx")||H.endsWith(".ktx2"))&&(p(".ktx",(async()=>await S.e(30).then(S.bind(S,13761)).then((H=>new H._KTXTextureLoader)))),p(".ktx2",(async()=>await S.e(30).then(S.bind(S,13761)).then((H=>new H._KTXTextureLoader))))),H.endsWith(".tga")&&p(".tga",(async()=>await S.e(50).then(S.bind(S,13766)).then((H=>new H._TGATextureLoader)))),H.endsWith(".exr")&&p(".exr",(async()=>await S.e(16).then(S.bind(S,13775)).then((H=>new H._ExrTextureLoader)))));const t=q.get(H);return t?Promise.resolve(t(O)):null}},11239:(H,O,S)=>{S.d(O,{d:()=>G});var t,q=S(11140),p=S(11242);!function(H){H[H.Unknown=0]="Unknown",H[H.Url=1]="Url",H[H.Temp=2]="Temp",H[H.Raw=3]="Raw",H[H.Dynamic=4]="Dynamic",H[H.RenderTarget=5]="RenderTarget",H[H.MultiRenderTarget=6]="MultiRenderTarget",H[H.Cube=7]="Cube",H[H.CubeRaw=8]="CubeRaw",H[H.CubePrefiltered=9]="CubePrefiltered",H[H.Raw3D=10]="Raw3D",H[H.Raw2DArray=11]="Raw2DArray",H[H.DepthStencil=12]="DepthStencil",H[H.CubeRawRGBD=13]="CubeRawRGBD",H[H.Depth=14]="Depth"}(t||(t={}));class G extends p.d{get useMipMaps(){return this.generateMipMaps}set useMipMaps(H){this.generateMipMaps=H}get uniqueId(){return this._uniqueId}_setUniqueId(H){this._uniqueId=H}getEngine(){return this._engine}get source(){return this._source}constructor(H,O){let S=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new q.b,this.onErrorObservable=new q.b,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=H,this._source=O,this._uniqueId=G._Counter++,S||(this._hardwareTexture=H._createHardwareTexture())}incrementReferences(){this._references++}updateSize(H,O){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,H,O,S),this.width=H,this.height=O,this.depth=S,this.baseWidth=H,this.baseHeight=O,this.baseDepth=S,this._size=H*O*S}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const H=this.onRebuildCallback(this),O=O=>{O._swapAndDie(this,!1),this.isReady=H.isReady};return void(H.isAsync?H.proxy.then(O):O(H.proxy))}let H;switch(this.source){case 2:case 12:case 14:break;case 1:return void(H=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(H=>{H._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:H=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),H._swapAndDie(this,!1),this.isReady=!0;break;case 10:H=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),H._swapAndDie(this,!1),this.isReady=!0;break;case 11:H=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),H._swapAndDie(this,!1),this.isReady=!0;break;case 4:H=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),H._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(H=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{H._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:H=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),H._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return H=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(H=>{H&&H._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(H._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(H){var O;let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(O=this._hardwareTexture)||void 0===O||O.setUsage(H._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),H._hardwareTexture=this._hardwareTexture,S&&(H._isRGBD=this._isRGBD),this._lodTextureHigh&&(H._lodTextureHigh&&H._lodTextureHigh.dispose(),H._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(H._lodTextureMid&&H._lodTextureMid.dispose(),H._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(H._lodTextureLow&&H._lodTextureLow.dispose(),H._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(H._irradianceTexture&&H._irradianceTexture.dispose(),H._irradianceTexture=this._irradianceTexture);const t=this._engine.getLoadedTexturesCache();let q=t.indexOf(this);-1!==q&&t.splice(q,1),q=t.indexOf(H),-1===q&&t.push(H)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}G._Counter=0},11242:(H,O,S)=>{S.d(O,{d:()=>t});class t{get wrapU(){return this._cachedWrapU}set wrapU(H){this._cachedWrapU=H}get wrapV(){return this._cachedWrapV}set wrapV(H){this._cachedWrapV=H}get wrapR(){return this._cachedWrapR}set wrapR(H){this._cachedWrapR=H}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(H){this._cachedAnisotropicFilteringLevel=H}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(H){this._comparisonFunction=H}get useMipMaps(){return this._useMipMaps}set useMipMaps(H){this._useMipMaps=H}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=H,this._cachedWrapV=O,this._cachedWrapR=S,this._cachedAnisotropicFilteringLevel=t,this.samplingMode=q,this._comparisonFunction=p,this}compareSampler(H){return this._cachedWrapU===H._cachedWrapU&&this._cachedWrapV===H._cachedWrapV&&this._cachedWrapR===H._cachedWrapR&&this._cachedAnisotropicFilteringLevel===H._cachedAnisotropicFilteringLevel&&this.samplingMode===H.samplingMode&&this._comparisonFunction===H._comparisonFunction&&this._useMipMaps===H._useMipMaps}}},11160:(H,O,S)=>{S.d(O,{e:()=>p});var t=S(11151);const q=(H,O,S)=>H?H.getClassName&&"Mesh"===H.getClassName()?null:!H.getClassName||"SubMesh"!==H.getClassName()&&"PhysicsBody"!==H.getClassName()?H.clone?H.clone():Array.isArray(H)?H.slice():S&&"object"===typeof H?{...H}:null:H.clone(O):null;class p{static DeepCopy(H,O,S,p){let G=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const U=function(H){const O=[];do{const S=Object.getOwnPropertyNames(H);for(const H of S)-1===O.indexOf(H)&&O.push(H)}while(H=Object.getPrototypeOf(H));return O}(H);for(const w of U){if("_"===w[0]&&(!p||-1===p.indexOf(w)))continue;if(w.endsWith("Observable"))continue;if(S&&-1!==S.indexOf(w))continue;const U=H[w],o=typeof U;if("function"!==o)try{if("object"===o)if(U instanceof Uint8Array)O[w]=Uint8Array.from(U);else if(U instanceof Array){if(O[w]=[],U.length>0)if("object"==typeof U[0])for(let H=0;H<U.length;H++){const S=q(U[H],O,G);-1===O[w].indexOf(S)&&O[w].push(S)}else O[w]=U.slice(0)}else O[w]=q(U,O,G);else O[w]=U}catch(V){t.b.Warn(V.message)}}}}},11190:(H,O,S)=>{S.d(O,{d:()=>t,e:()=>q,f:()=>p});class t extends Error{}t._setPrototypeOf=Object.setPrototypeOf||((H,O)=>(H.__proto__=O,H));const q={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class p extends t{constructor(H,O,S){super(H),this.errorCode=O,this.innerError=S,this.name="RuntimeError",t._setPrototypeOf(this,p.prototype)}}},11188:(H,O,S)=>{S.d(O,{d:()=>W,e:()=>K,i:()=>v,m:()=>m,o:()=>l,n:()=>E,s:()=>F,w:()=>Y,x:()=>d,z:()=>b});var t=S(11175),q=S(11148),p=S(11140);class G{}G.FilesToLoad={};var U=S(11190),V=S(11192),w=S(11194),o=S(11180),h=S(11151),a=S(11205),j=S(11200),e=S(11213);const X=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class E extends U.f{constructor(H,O){super(H,U.e.LoadFileError),this.name="LoadFileError",U.d._setPrototypeOf(this,E.prototype),O instanceof t.c?this.request=O:this.file=O}}class y extends U.f{constructor(H,O){super(H,U.e.RequestFileError),this.request=O,this.name="RequestFileError",U.d._setPrototypeOf(this,y.prototype)}}class T extends U.f{constructor(H,O){super(H,U.e.ReadFileError),this.file=O,this.name="ReadFileError",U.d._setPrototypeOf(this,T.prototype)}}const K={DefaultRetryStrategy:class{static ExponentialBackoff(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(S,t,q)=>0!==t.status||q>=H||-1!==S.indexOf("file:")?-1:Math.pow(2,q)*O}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:H=>H,ScriptBaseUrl:"",ScriptPreprocessUrl:H=>H,CleanUrl:H=>H=H.replace(/#/gm,"%23")},b=(H,O)=>{if((!H||0!==H.indexOf("data:"))&&K.CorsBehavior)if("string"===typeof K.CorsBehavior||K.CorsBehavior instanceof String)O.crossOrigin=K.CorsBehavior;else{const S=K.CorsBehavior(H);S&&(O.crossOrigin=S)}},D={getRequiredSize:null},F=function(H,O,S,q){let p,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",w=arguments.length>5?arguments[5]:void 0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.c.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===h||void 0===h||!h._features.forceBitmapOverHTMLImageElement))return S("LoadImage is only supported in web or BabylonNative environments."),null;let a=!1;H instanceof ArrayBuffer||ArrayBuffer.isView(H)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(p=URL.createObjectURL(new Blob([H],{type:U})),a=!0):p=`data:${U};base64,`+(0,V.l)(H):H instanceof Blob?(p=URL.createObjectURL(H),a=!0):(p=K.CleanUrl(H),p=K.PreprocessUrl(p));const j=O=>{if(S){const t=p||H.toString();S(`Error while trying to load image: ${0===t.indexOf("http")||t.length<=128?t:t.slice(0,128)+"..."}`,O)}};if(null!==h&&void 0!==h&&h._features.forceBitmapOverHTMLImageElement)return l(p,(t=>{h.createImageBitmap(new Blob([t],{type:U}),{premultiplyAlpha:"none",...w}).then((H=>{O(H),a&&URL.revokeObjectURL(p)})).catch((O=>{S&&S("Error while trying to load image: "+H,O)}))}),void 0,q||void 0,!0,((H,O)=>{j(O)})),null;const e=new Image;if(D.getRequiredSize){const O=D.getRequiredSize(H);O.width&&(e.width=O.width),O.height&&(e.height=O.height)}b(p,e);const X=[],E=()=>{for(const H of X)H.target.removeEventListener(H.name,H.handler);X.length=0};X.push({target:e,name:"load",handler:()=>{E(),O(e),a&&e.src&&URL.revokeObjectURL(e.src)}}),X.push({target:e,name:"error",handler:H=>{E(),j(H),a&&e.src&&URL.revokeObjectURL(e.src)}}),X.push({target:document,name:"securitypolicyviolation",handler:H=>{if(H.blockedURI!==e.src||"HU"===H.disposition)return;E();const O=new Error(`CSP violation of policy ${H.effectiveDirective} ${H.blockedURI}. Current policy is ${H.originalPolicy}`);o.c.UseFallbackTexture=!1,j(O),a&&e.src&&URL.revokeObjectURL(e.src),e.src=""}}),(()=>{for(const H of X)H.target.addEventListener(H.name,H.handler)})();const y="blob:"===p.substring(0,5),T="data:"===p.substring(0,5),F=()=>{y||T||!t.c.IsCustomRequestAvailable?e.src=p:l(p,((H,O,S)=>{const t=new Blob([H],{type:!U&&S?S:U}),q=URL.createObjectURL(t);a=!0,e.src=q}),void 0,q||void 0,!0,((H,O)=>{j(O)}))},Y=()=>{q&&q.loadImage(p,e)};if(!y&&!T&&q&&q.enableTexturesOffline)q.open(Y,F);else{if(-1!==p.indexOf("file:")){const H=decodeURIComponent(p.substring(5).toLowerCase());if(G.FilesToLoad[H]&&"undefined"!==typeof URL){try{let O;try{O=URL.createObjectURL(G.FilesToLoad[H])}catch(d){O=URL.createObjectURL(G.FilesToLoad[H])}e.src=O,a=!0}catch(v){e.src=""}return e}}F()}return e},Y=(H,O,S,t,q)=>{const G=new FileReader,U={onCompleteObservable:new p.b,abort:()=>G.abort()};return G.onloadend=()=>U.onCompleteObservable.notifyObservers(U),q&&(G.onerror=()=>{q(new T(`Unable to read ${H.name}`,H))}),G.onload=H=>{O(H.target.result)},S&&(G.onprogress=S),t?G.readAsArrayBuffer(H):G.readAsText(H),U},l=(H,O,S,t,q,V,w)=>{if(H.name)return Y(H,O,S,q,V?H=>{V(void 0,H)}:void 0);const o=H;if(-1!==o.indexOf("file:")){let H=decodeURIComponent(o.substring(5).toLowerCase());0===H.indexOf("./")&&(H=H.substring(2));const t=G.FilesToLoad[H];if(t)return Y(t,O,S,q,V?H=>V(void 0,new E(H.message,H.file)):void 0)}const{match:j,type:e}=r(o);if(j){const H={onCompleteObservable:new p.b,abort:()=>()=>{}};try{const H=q?W(o):g(o);O(H,void 0,e)}catch(U){V?V(void 0,U):h.b.Error(U.message||"Failed to parse the Data URL")}return a.b.SetImmediate((()=>{H.onCompleteObservable.notifyObservers(H)})),H}return d(o,((H,S)=>{O(H,null===S||void 0===S?void 0:S.responseURL,null===S||void 0===S?void 0:S.getResponseHeader("content-type"))}),S,t,q,V?H=>{V(H.request,new E(H.message,H.request))}:void 0,w)},d=(H,O,S,G,U,V,w)=>{H=K.CleanUrl(H),H=K.PreprocessUrl(H);const o=K.BaseUrl+H;let a=!1;const j={onCompleteObservable:new p.b,abort:()=>a=!0},e=()=>{let H,p=new t.c,G=null;const e=()=>{p&&(S&&p.removeEventListener("progress",S),H&&p.removeEventListener("readystatechange",H),p.removeEventListener("loadend",X))};let X=()=>{e(),j.onCompleteObservable.notifyObservers(j),j.onCompleteObservable.clear(),S=void 0,H=null,X=null,V=void 0,w=void 0,O=void 0};j.abort=()=>{a=!0,X&&X(),p&&p.readyState!==(XMLHttpRequest.DONE||4)&&p.abort(),null!==G&&(clearTimeout(G),G=null),p=null};const E=H=>{const O=H.message||"Unknown error";V&&p?V(new y(O,p)):h.b.Error(O)},T=h=>{if(p){if(p.open("GET",o),w)try{w(p)}catch(j){return void E(j)}U&&(p.responseType="arraybuffer"),S&&p.addEventListener("progress",S),X&&p.addEventListener("loadend",X),H=()=>{if(!a&&p&&p.readyState===(XMLHttpRequest.DONE||4)){if(H&&p.removeEventListener("readystatechange",H),p.status>=200&&p.status<300||0===p.status&&(!(0,q.n)()||z())){const H=U?p.response:p.responseText;if(null!==H){try{O&&O(H,p)}catch(j){E(j)}return}}const S=K.DefaultRetryStrategy;if(S){const H=S(o,p,h);if(-1!==H)return e(),p=new t.c,void(G=setTimeout((()=>T(h+1)),H))}const w=new y("Error status: "+p.status+" "+p.statusText+" - Unable to load "+o,p);V&&V(w)}},p.addEventListener("readystatechange",H),p.send()}};T(0)};if(G&&G.enableSceneOffline){const t=H=>{H&&H.status>400?V&&V(H):e()},q=()=>{G&&G.loadFile(K.BaseUrl+H,(H=>{!a&&O&&O(H),j.onCompleteObservable.notifyObservers(j)}),S?H=>{!a&&S&&S(H)}:void 0,t,U)};G.open(q,t)}else e();return j},v=H=>{const{match:O,type:S}=r(H);if(O)return S||void 0;const t=H.lastIndexOf(".");switch(H.substring(t+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"OU":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},z=()=>"undefined"!==typeof location&&"file:"===location.protocol,m=H=>X.test(H),r=H=>{const O=X.exec(H);if(null===O||0===O.length)return{match:!1,type:""};return{match:!0,type:O[0].replace("data:","").replace("base64,","")}};function W(H){return(0,V.b)(H.split(",")[1])}const g=H=>(0,V.e)(H.split(",")[1]);let N;e.b._FileToolsLoadImage=F,j.e.loadFile=l,w.l.loadFile=l;((H,O,S,t,q,p,G,U,V,w)=>{N={DecodeBase64UrlToBinary:H,DecodeBase64UrlToString:O,DefaultRetryStrategy:S.DefaultRetryStrategy,BaseUrl:S.BaseUrl,CorsBehavior:S.CorsBehavior,PreprocessUrl:S.PreprocessUrl,IsBase64DataUrl:t,IsFileURL:q,LoadFile:p,LoadImage:G,ReadFile:U,RequestFile:V,SetCorsBehavior:w},Object.defineProperty(N,"DefaultRetryStrategy",{get:function(){return S.DefaultRetryStrategy},set:function(H){S.DefaultRetryStrategy=H}}),Object.defineProperty(N,"BaseUrl",{get:function(){return S.BaseUrl},set:function(H){S.BaseUrl=H}}),Object.defineProperty(N,"PreprocessUrl",{get:function(){return S.PreprocessUrl},set:function(H){S.PreprocessUrl=H}}),Object.defineProperty(N,"CorsBehavior",{get:function(){return S.CorsBehavior},set:function(H){S.CorsBehavior=H}})})(W,g,K,m,z,l,F,Y,d,b)},11266:(H,O,S)=>{function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(H=>{const O=16*Math.random()|0;return("x"===H?O:3&O|8).toString(16)}))}S.d(O,{d:()=>t})},11255:(H,O,S)=>{S.d(O,{b:()=>p});var t=S(11151),q=S(11262);class p{static Instantiate(H){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[H])return this.RegisteredExternalClasses[H];const O=(0,q.e)(H);if(O)return O;t.b.Warn(H+" not found, you may have missed an import.");const S=H.split(".");let p=window||this;for(let t=0,q=S.length;t<q;t++)p=p[S[t]];return"function"!==typeof p?null:p}}p.RegisteredExternalClasses={}},11162:(H,O,S)=>{S.d(O,{d:()=>q});var t=S(11148);class q{static get Now(){return(0,t.n)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11192:(H,O,S)=>{S.d(O,{b:()=>G,e:()=>p,i:()=>t,l:()=>q});const t=H=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(H);let O="";for(let S=0;S<H.byteLength;S++)O+=String.fromCharCode(H[S]);return O},q=H=>{const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S,t,q,p,G,U,V,w="",o=0;const h=ArrayBuffer.isView(H)?new Uint8Array(H.buffer,H.byteOffset,H.byteLength):new Uint8Array(H);for(;o<h.length;)S=h[o++],t=o<h.length?h[o++]:Number.NaN,q=o<h.length?h[o++]:Number.NaN,p=S>>2,G=(3&S)<<4|t>>4,U=(15&t)<<2|q>>6,V=63&q,isNaN(t)?U=V=64:isNaN(q)&&(V=64),w+=O.charAt(p)+O.charAt(G)+O.charAt(U)+O.charAt(V);return w},p=H=>atob(H),G=H=>{const O=p(H),S=O.length,t=new Uint8Array(new ArrayBuffer(S));for(let q=0;q<S;q++)t[q]=O.charCodeAt(q);return t.buffer}},11271:(H,O,S)=>{function t(H){let O=1;do{O*=2}while(O<H);return O===H}function q(H,O,S){return H*(1-S)+O*S}function p(H){const O=G(H),S=U(H);return O-H>H-S?S:O}function G(H){return H--,H|=H>>1,H|=H>>2,H|=H>>4,H|=H>>8,H|=H>>16,++H}function U(H){return H|=H>>1,H|=H>>2,H|=H>>4,H|=H>>8,(H|=H>>16)-(H>>1)}function V(H,O){let S;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:S=U(H);break;case 2:S=p(H);break;default:S=G(H)}return Math.min(S,O)}S.d(O,{c:()=>U,f:()=>V,i:()=>t,l:()=>q,p:()=>p})},11131:(H,O,S)=>{S.r(O),S.d(O,{AsyncLoop:()=>T,Tools:()=>E,className:()=>y});var t=S(11140),q=S(11148),p=S(11151),G=S(11160),U=S(11162),V=S(11169),w=S(11175),o=S(11180),h=S(11188),a=S(11205),j=S(11255),e=S(11266),X=S(11271);class E{static get BaseUrl(){return h.e.BaseUrl}static set BaseUrl(H){h.e.BaseUrl=H}static get CleanUrl(){return h.e.CleanUrl}static set CleanUrl(H){h.e.CleanUrl=H}static IsAbsoluteUrl(H){return 0===H.indexOf("//")||-1!==H.indexOf("://")&&(-1!==H.indexOf(".")&&(-1!==H.indexOf("/")&&(!(H.indexOf(":")>H.indexOf("/"))&&(H.indexOf("://")<H.indexOf(".")||(0===H.indexOf("data:")||0===H.indexOf("blob:"))))))}static set ScriptBaseUrl(H){h.e.ScriptBaseUrl=H}static get ScriptBaseUrl(){return h.e.ScriptBaseUrl}static set CDNBaseUrl(H){E.ScriptBaseUrl=H,E.AssetBaseUrl=H}static set ScriptPreprocessUrl(H){h.e.ScriptPreprocessUrl=H}static get ScriptPreprocessUrl(){return h.e.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return h.e.DefaultRetryStrategy}static set DefaultRetryStrategy(H){h.e.DefaultRetryStrategy=H}static get CorsBehavior(){return h.e.CorsBehavior}static set CorsBehavior(H){h.e.CorsBehavior=H}static get UseFallbackTexture(){return o.c.UseFallbackTexture}static set UseFallbackTexture(H){o.c.UseFallbackTexture=H}static get RegisteredExternalClasses(){return j.b.RegisteredExternalClasses}static set RegisteredExternalClasses(H){j.b.RegisteredExternalClasses=H}static get fallbackTexture(){return o.c.FallbackTexture}static set fallbackTexture(H){o.c.FallbackTexture=H}static FetchToRef(H,O,S,t,q,p){const G=4*((Math.abs(H)*S%S|0)+(Math.abs(O)*t%t|0)*S);p.r=q[G]/255,p.g=q[G+1]/255,p.b=q[G+2]/255,p.a=q[G+3]/255}static Mix(H,O,S){return 0}static Instantiate(H){return j.b.Instantiate(H)}static SetImmediate(H){a.b.SetImmediate(H)}static IsExponentOfTwo(H){return!0}static FloatRound(H){return Math.fround(H)}static GetFilename(H){const O=H.lastIndexOf("/");return O<0?H:H.substring(O+1)}static GetFolderPath(H){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const S=H.lastIndexOf("/");return S<0?O?H:"":H.substring(0,S+1)}static ToDegrees(H){return 180*H/Math.PI}static ToRadians(H){return H*Math.PI/180}static SmoothAngleChange(H,O){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const t=this.ToRadians(H),q=this.ToRadians(O);return this.ToDegrees(Math.atan2((1-S)*Math.sin(q)+S*Math.sin(t),(1-S)*Math.cos(q)+S*Math.cos(t)))}static MakeArray(H,O){return!0===O||void 0!==H&&null!=H?Array.isArray(H)?H:[H]:null}static GetPointerPrefix(H){return(0,q.n)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(H,O){(0,h.z)(H,O)}static SetReferrerPolicyBehavior(H,O){O.referrerPolicy=H}static get PreprocessUrl(){return h.e.PreprocessUrl}static set PreprocessUrl(H){h.e.PreprocessUrl=H}static LoadImage(H,O,S,t,q,p){return(0,h.s)(H,O,S,t,q,p)}static LoadFile(H,O,S,t,q,p){return(0,h.o)(H,O,S,t,q,p)}static async LoadFileAsync(H){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((S,t)=>{(0,h.o)(H,(H=>{S(H)}),void 0,void 0,O,((H,O)=>{t(O)}))}))}static GetAssetUrl(H){if(!H)return"";if(E.AssetBaseUrl&&H.startsWith(E._DefaultAssetsUrl)){const O="/"===E.AssetBaseUrl[E.AssetBaseUrl.length-1]?E.AssetBaseUrl.substring(0,E.AssetBaseUrl.length-1):E.AssetBaseUrl;return H.replace(E._DefaultAssetsUrl,O)}return H}static GetBabylonScriptURL(H,O){if(!H)return"";if(E.ScriptBaseUrl&&H.startsWith(E._DefaultCdnUrl)){const O="/"===E.ScriptBaseUrl[E.ScriptBaseUrl.length-1]?E.ScriptBaseUrl.substring(0,E.ScriptBaseUrl.length-1):E.ScriptBaseUrl;H=H.replace(E._DefaultCdnUrl,O)}return H=E.ScriptPreprocessUrl(H),O&&(H=E.GetAbsoluteUrl(H)),H}static LoadBabylonScript(H,O,S,t){H=E.GetBabylonScriptURL(H),E.LoadScript(H,O,S)}static async LoadBabylonScriptAsync(H){return H=E.GetBabylonScriptURL(H),await E.LoadScriptAsync(H)}static LoadScript(H,O,S,t){let p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(H),O&&O()}catch(V){null===S||void 0===S||S(`Unable to load script '${H}' in worker`,V)}return}if(!(0,q.n)())return void(null===S||void 0===S||S(`Cannot load script '${H}' outside of a window or a worker`));const G=document.getElementsByTagName("head")[0],U=document.createElement("script");p?(U.setAttribute("type","module"),U.innerText=H):(U.setAttribute("type","text/javascript"),U.setAttribute("src",H)),t&&(U.id=t),U.onload=()=>{O&&O()},U.onerror=O=>{S&&S(`Unable to load script '${H}'`,O)},G.appendChild(U)}static async LoadScriptAsync(H,O){return await new Promise(((S,t)=>{this.LoadScript(H,(()=>{S()}),((H,O)=>{t(O||new Error(H))}),O)}))}static ReadFileAsDataURL(H,O,S){const q=new FileReader,p={onCompleteObservable:new t.b,abort:()=>q.abort()};return q.onloadend=()=>{p.onCompleteObservable.notifyObservers(p)},q.onload=H=>{O(H.target.result)},q.onprogress=S,q.readAsDataURL(H),p}static ReadFile(H,O,S,t,q){return(0,h.w)(H,O,S,t,q)}static FileAsURL(H){const O=new Blob([H]);return window.URL.createObjectURL(O)}static Format(H){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return H.toFixed(O)}static DeepCopy(H,O,S,t){G.e.DeepCopy(H,O,S,t)}static IsEmpty(H){for(const O in H)if(Object.prototype.hasOwnProperty.call(H,O))return!1;return!0}static RegisterTopRootEvents(H,O){for(let t=0;t<O.length;t++){const q=O[t];H.addEventListener(q.name,q.handler,!1);try{window.parent&&window.parent.addEventListener(q.name,q.handler,!1)}catch(S){}}}static UnregisterTopRootEvents(H,O){for(let t=0;t<O.length;t++){const q=O[t];H.removeEventListener(q.name,q.handler);try{H.parent&&H.parent.removeEventListener(q.name,q.handler)}catch(S){}}}static async DumpFramebuffer(H,O,S,t){throw(0,V.b)("DumpTools")}static DumpData(H,O,S,t){throw(0,V.b)("DumpTools")}static async DumpDataAsync(H,O,S){throw(0,V.b)("DumpTools")}static _IsOffScreenCanvas(H){return void 0!==H.convertToBlob}static ToBlob(H,O){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",t=arguments.length>3?arguments[3]:void 0;E._IsOffScreenCanvas(H)||H.toBlob||(H.toBlob=function(H,O,S){setTimeout((()=>{const t=atob(this.toDataURL(O,S).split(",")[1]),q=t.length,p=new Uint8Array(q);for(let H=0;H<q;H++)p[H]=t.charCodeAt(H);H(new Blob([p]))}))}),E._IsOffScreenCanvas(H)?H.convertToBlob({type:S,quality:t}).then((H=>O(H))):H.toBlob((function(H){O(H)}),S,t)}static DownloadBlob(H,O){if("download"in document.createElement("a")){if(!O){const H=new Date;O="screenshot_"+((H.getFullYear()+"-"+(H.getMonth()+1)).slice(2)+"-"+H.getDate()+"_"+H.getHours()+"-"+("0"+H.getMinutes()).slice(-2))+".png"}E.Download(H,O)}else if(H&&"undefined"!==typeof URL){const O=URL.createObjectURL(H),S=window.open("");if(!S)return;const t=S.document.createElement("img");t.onload=function(){URL.revokeObjectURL(O)},t.src=O,S.document.body.appendChild(t)}}static EncodeScreenshotCanvasData(H,O){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",t=arguments.length>3?arguments[3]:void 0,q=arguments.length>4?arguments[4]:void 0;if("string"!==typeof t&&O){if(O){if(E._IsOffScreenCanvas(H))return void H.convertToBlob({type:S,quality:q}).then((H=>{const S=new FileReader;S.readAsDataURL(H),S.onloadend=()=>{const H=S.result;O(H)}}));const t=H.toDataURL(S,q);O(t)}}else this.ToBlob(H,(function(H){H&&E.DownloadBlob(H,t),O&&O("")}),S,q)}static Download(H,O){if("undefined"===typeof URL)return;const S=window.URL.createObjectURL(H),t=document.createElement("a");document.body.appendChild(t),t.style.display="none",t.href=S,t.download=O,t.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),t.click(),window.URL.revokeObjectURL(S)}static BackCompatCameraNoPreventDefault(H){return"boolean"===typeof H[0]?H[0]:"boolean"===typeof H[1]&&H[1]}static CreateScreenshot(H,O,S,t){throw(0,V.b)("ScreenshotTools")}static async CreateScreenshotAsync(H,O,S){throw(0,V.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(H,O,S,t){throw(0,V.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(H,O,S){throw(0,V.b)("ScreenshotTools")}static RandomId(){return(0,e.d)()}static IsBase64(H){return(0,h.m)(H)}static DecodeBase64(H){return(0,h.d)(H)}static get errorsCount(){return p.b.errorsCount}static Log(H){p.b.Log(H)}static Warn(H){p.b.Warn(H)}static Error(H){p.b.Error(H)}static get LogCache(){return p.b.LogCache}static ClearLogCache(){p.b.ClearLogCache()}static set LogLevels(H){p.b.LogLevels=H}static set PerformanceLogLevel(H){return(H&E.PerformanceUserMarkLogLevel)===E.PerformanceUserMarkLogLevel?(E.StartPerformanceCounter=E._StartUserMark,void(E.EndPerformanceCounter=E._EndUserMark)):(H&E.PerformanceConsoleLogLevel)===E.PerformanceConsoleLogLevel?(E.StartPerformanceCounter=E._StartPerformanceConsole,void(E.EndPerformanceCounter=E._EndPerformanceConsole)):(E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,void(E.EndPerformanceCounter=E._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(H,O){}static _EndPerformanceCounterDisabled(H,O){}static _StartUserMark(H){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._Performance){if(!(0,q.n)())return;E._Performance=window.performance}O&&E._Performance.mark&&E._Performance.mark(H+"-Begin")}static _EndUserMark(H){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&E._Performance.mark&&(E._Performance.mark(H+"-End"),E._Performance.measure(H,H+"-Begin",H+"-End"))}static _StartPerformanceConsole(H){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(E._StartUserMark(H,O),console.time&&console.time(H))}static _EndPerformanceConsole(H){let O=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O&&(E._EndUserMark(H,O),console.timeEnd(H))}static get Now(){return U.d.Now}static GetClassName(H){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=null;if(!O&&H.getClassName)S=H.getClassName();else{if(H instanceof Object){S=(O?H:Object.getPrototypeOf(H)).constructor.__bjsclassName__}S||(S=typeof H)}return S}static First(H,O){for(const S of H)if(O(S))return S;return null}static getFullClassName(H){let O=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=null,t=null;if(!O&&H.getClassName)S=H.getClassName();else{if(H instanceof Object){const q=O?H:Object.getPrototypeOf(H);S=q.constructor.__bjsclassName__,t=q.constructor.__bjsmoduleName__}S||(S=typeof H)}return S?(null!=t?t+".":"")+S:null}static async DelayAsync(H){await new Promise((O=>{setTimeout((()=>{O()}),H)}))}static IsSafari(){return!!(0,q.j)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function y(H,O){return S=>{S.__bjsclassName__=H,S.__bjsmoduleName__=null!=O?O:null}}E.AssetBaseUrl="",E.UseCustomRequestHeaders=!1,E.CustomRequestHeaders=w.c.CustomRequestHeaders,E.GetDOMTextContent=q.c,E._DefaultCdnUrl="https://cdn.babylonjs.com",E._DefaultAssetsUrl="https://assets.babylonjs.com/core",E.GetAbsoluteUrl="object"===typeof document?H=>{const O=document.createElement("a");return O.href=H,O.href}:"function"===typeof URL&&"object"===typeof location?H=>new URL(H,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},E.NoneLogLevel=p.b.NoneLogLevel,E.MessageLogLevel=p.b.MessageLogLevel,E.WarningLogLevel=p.b.WarningLogLevel,E.ErrorLogLevel=p.b.ErrorLogLevel,E.AllLogLevel=p.b.AllLogLevel,E.IsWindowObjectExist=q.n,E.PerformanceNoneLogLevel=0,E.PerformanceUserMarkLogLevel=1,E.PerformanceConsoleLogLevel=2,E.StartPerformanceCounter=E._StartPerformanceCounterDisabled,E.EndPerformanceCounter=E._EndPerformanceCounterDisabled;class T{constructor(H,O,S){let t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=H,this.index=t-1,this._done=!1,this._fn=O,this._successCallback=S}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(H,O,S){const t=new T(H,O,S,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return t.executeNext(),t}static SyncAsyncForLoop(H,O,S,t,q){let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return T.Run(Math.ceil(H/O),(t=>{q&&q()?t.breakLoop():setTimeout((()=>{for(let p=0;p<O;++p){const G=t.index*O+p;if(G>=H)break;if(S(G),q&&q()){t.breakLoop();break}}t.executeNext()}),p)}),t)}}E.Mix=X.l,E.IsExponentOfTwo=X.i,o.c.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11262:(H,O,S)=>{S.d(O,{e:()=>p,g:()=>q});const t={};function q(H,O){t[H]=O}function p(H){return t[H]}},11175:(H,O,S)=>{S.d(O,{c:()=>t});class t{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(t.CustomRequestHeaders).length>0||t.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const H in t.CustomRequestHeaders){const O=t.CustomRequestHeaders[H];O&&this._xhr.setRequestHeader(H,O)}}_shouldSkipRequestModifications(H){return t.SkipRequestModificationForBabylonCDN&&(H.includes("preview.babylonjs.com")||H.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(H){this._xhr.onprogress=H}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(H){this._xhr.responseType=H}get timeout(){return this._xhr.timeout}set timeout(H){this._xhr.timeout=H}addEventListener(H,O,S){this._xhr.addEventListener(H,O,S)}removeEventListener(H,O,S){this._xhr.removeEventListener(H,O,S)}abort(){this._xhr.abort()}send(H){t.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(H)}open(H,O){for(const S of t.CustomRequestModifiers){if(this._shouldSkipRequestModifications(O))return;O=S(this._xhr,O)||O}O=(O=O.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=O,this._xhr.open(H,O,!0)}setRequestHeader(H,O){this._xhr.setRequestHeader(H,O)}getResponseHeader(H){return this._xhr.getResponseHeader(H)}}t.CustomRequestHeaders={},t.CustomRequestModifiers=new Array,t.SkipRequestModificationForBabylonCDN=!0}}]);