"use strict";(self.v2pspxy442l=self.v2pspxy442l||[]).push([[8],{12336:(l,a,N)=>{N.d(a,{c:()=>M});var U=N(12296),c=N(12268),K=N(12344),Z=N(12367),w=N(12283);class S{constructor(){let l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,l&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(l){this._zOffset!==l&&(this._zOffset=l,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(l){this._zOffsetUnits!==l&&(this._zOffsetUnits=l,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(l){this._cullFace!==l&&(this._cullFace=l,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(l){this._cull!==l&&(this._cull=l,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(l){this._depthFunc!==l&&(this._depthFunc=l,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(l){this._depthMask!==l&&(this._depthMask=l,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(l){this._depthTest!==l&&(this._depthTest=l,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(l){this._frontFace!==l&&(this._frontFace=l,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(l){this.isDirty&&(this._isCullDirty&&(this.cull?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(l.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(l.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(l.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(this.zOffset,this.zOffsetUnits)):l.disable(l.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(l.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class T{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(l){this._func!==l&&(this._func=l,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(l){this._funcRef!==l&&(this._funcRef=l,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(l){this._funcMask!==l&&(this._funcMask=l,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(l){this._opStencilFail!==l&&(this._opStencilFail=l,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(l){this._opDepthFail!==l&&(this._opDepthFail=l,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(l){this._opStencilDepthPass!==l&&(this._opStencilDepthPass=l,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(l){this._mask!==l&&(this._mask=l,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(l){this._enabled!==l&&(this._enabled=l,this._isStencilTestDirty=!0)}constructor(){let l=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,l&&this.reset()}reset(){var l;this.stencilMaterial=void 0,null===(l=this.stencilGlobal)||void 0===l||l.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(l){var a;if(!l)return;const N=!this.useStencilGlobalOnly&&!(null===(a=this.stencilMaterial)||void 0===a||!a.enabled);this.enabled=N?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=N?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=N?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=N?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=N?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=N?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=N?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=N?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(l.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(l.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(l.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class J{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=J.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=J.KEEP,this.opDepthFail=J.KEEP,this.opStencilDepthPass=J.REPLACE}get stencilFunc(){return this.func}set stencilFunc(l){this.func=l}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(l){this.funcRef=l}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(l){this.funcMask=l}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(l){this.opStencilFail=l}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(l){this.opDepthFail=l}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(l){this.opStencilDepthPass=l}get stencilMask(){return this.mask}set stencilMask(l){this.mask=l}get stencilTest(){return this.enabled}set stencilTest(l){this.enabled=l}}J.ALWAYS=519,J.KEEP=7680,J.REPLACE=7681;class n{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(l){this._alphaBlend!==l&&(this._alphaBlend=l,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(l,a,N,U){this._blendConstants[0]===l&&this._blendConstants[1]===a&&this._blendConstants[2]===N&&this._blendConstants[3]===U||(this._blendConstants[0]=l,this._blendConstants[1]=a,this._blendConstants[2]=N,this._blendConstants[3]=U,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(l,a,N,U){this._blendFunctionParameters[0]===l&&this._blendFunctionParameters[1]===a&&this._blendFunctionParameters[2]===N&&this._blendFunctionParameters[3]===U||(this._blendFunctionParameters[0]=l,this._blendFunctionParameters[1]=a,this._blendFunctionParameters[2]=N,this._blendFunctionParameters[3]=U,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(l,a){this._blendEquationParameters[0]===l&&this._blendEquationParameters[1]===a||(this._blendEquationParameters[0]=l,this._blendEquationParameters[1]=a,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(l){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?l.enable(l.BLEND):l.disable(l.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(l.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(l.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(l.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var y=N(12288),H=N(12373),u=N(12266),W=N(12260),B=N(12319),Y=N(12386);function C(l,a){if((0,u.o)()){const{requestAnimationFrame:N}=a||window;if("function"===typeof N)return N(l)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(l);return setTimeout(l,16)}class M{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(l){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get Zc(){return this._useReverseDepthBuffer}set Zc(l){l!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=l,this._depthCullingState.depthFunc=l?518:515)}setColorWrite(l){l!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=l)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(l){if(l)return this.isNDCHalfZRange?l.IS_NDC_HALF_ZRANGE="":delete l.IS_NDC_HALF_ZRANGE,this.Zc?l.USE_REVERSE_DEPTHBUFFER="":delete l.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?l.USE_EXACT_SRGB_CONVERSIONS="":delete l.USE_EXACT_SRGB_CONVERSIONS);{let l="";return this.isNDCHalfZRange&&(l+="#define IS_NDC_HALF_ZRANGE"),this.Zc&&(l&&(l+="\n"),l+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(l&&(l+="\n"),l+="#define USE_EXACT_SRGB_CONVERSIONS"),l}}_rebuildInternalTextures(){const l=this._internalTexturesCache.slice();for(const a of l)a._rebuild()}_rebuildRenderTargetWrappers(){const l=this._renderTargetWrapperCache.slice();for(const a of l)a._rebuild()}_rebuildEffects(){for(const l in this._compiledEffects){const a=this._compiledEffects[l];a._pipelineContext=null,a._prepareEffect()}K.Effect.ResetCache()}_rebuildGraphicsResources(){var l;this.wipeCaches(!0),this._rebuildEffects(),null===(l=this._rebuildComputeEffects)||void 0===l||l.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){c.b.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(l){setTimeout((()=>{this._clearEmptyResources();const a=this._depthCullingState.depthTest,N=this._depthCullingState.depthFunc,U=this._depthCullingState.depthMask,c=this._stencilState.stencilTest;l(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=a,this._depthCullingState.depthFunc=N,this._depthCullingState.depthMask=U,this._stencilState.stencilTest=c,this._flagContextRestored()}),0)}get T(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(l){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(l){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const l=new Uint8Array(4),a=[l,l,l,l,l,l];this._emptyCubeTexture=this.createRawCubeTexture(a,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(l){if(!l)return this._activeRenderLoops.length=0,void this._cancelFrame();const a=this._activeRenderLoops.indexOf(l);a>=0&&(this._activeRenderLoops.splice(a,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const l=this._frameHandler;if(this._frameHandler=0,(0,u.o)()){const{cancelAnimationFrame:a}=this.getHostWindow()||window;if("function"===typeof a)return a(l)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(l);return clearTimeout(l)}}wc(){this.onBeginFrameObservable.notifyObservers(this)}Sc(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(l){this._maxFPS=l,void 0!==l&&(this._minFrameTime=l<=0?Number.MAX_VALUE:1e3/l)}_isOverFrameTime(l){if(!l||void 0===this._maxFPS)return!1;const a=l-this._lastFrameTime;return this._lastFrameTime=l,this._renderAccumulator+=a,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(l){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(l)){let l=!0;(this.T||!this.renderEvenInBackground&&this._windowIsBackground)&&(l=!1),l&&(this.wc(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Sc())}}_renderLoop(l){this._processFrame(l),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let l=0;l<this._activeRenderLoops.length;l++){(0,this._activeRenderLoops[l])()}}_renderViews(){return!1}_queueNewFrame(l,a){return C(l,a)}runRenderLoop(l){-1===this._activeRenderLoops.indexOf(l)&&(this._activeRenderLoops.push(l),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(l){this._depthCullingState.depthTest=l}setZOffset(l){this._depthCullingState.zOffset=this.Zc?-l:l}getZOffset(){const l=this._depthCullingState.zOffset;return this.Zc?-l:l}setZOffsetUnits(l){this._depthCullingState.zOffsetUnits=this.Zc?-l:l}getZOffsetUnits(){const l=this._depthCullingState.zOffsetUnits;return this.Zc?-l:l}getHostWindow(){return(0,u.o)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(l){this._compatibilityMode=!0}_rebuildTextures(){for(const l of this.scenes)l._rebuildTextures();for(const l of this._virtualScenes)l._rebuildTextures()}_releaseRenderTargetWrapper(l){const a=this._renderTargetWrapperCache.indexOf(l);-1!==a&&this._renderTargetWrapperCache.splice(a,1)}get currentViewport(){return this._cachedViewport}setViewport(l,a,N){const U=a||this.getRenderWidth(),c=N||this.getRenderHeight(),K=l.x||0,Z=l.y||0;this._cachedViewport=l,this._viewport(K*U,Z*c,U*l.width,c*l.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(l){return new Path2D(l)}get description(){let l=this.name+this.version;return this._caps.parallelShaderCompile&&(l+=" - Parallel shader compilation"),l}_createTextureBase(l,a,N,K){let Z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,T=arguments.length>7?arguments[7]:void 0,J=arguments.length>8?arguments[8]:void 0,n=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,W=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,B=arguments.length>13?arguments[13]:void 0,C=arguments.length>14?arguments[14]:void 0,A=arguments.length>15?arguments[15]:void 0;const E="data:"===(l=l||"").substring(0,5),q="blob:"===l.substring(0,5),b=E&&-1!==l.indexOf(";base64,"),z=y||new H.c(this,1);z!==y&&(z.label=l.substring(0,60));const I=l;!this._transformTextureUrl||b||y||n||(l=this._transformTextureUrl(l)),I!==l&&(z._originalUrl=I);const t=l.lastIndexOf(".");let O=W||(t>-1?l.substring(t).toLowerCase():"");O.indexOf("?")>-1&&(O=O.split("?")[0]);const h=(0,Y.d)(O,B);K&&K.addPendingData(z),z.url=l,z.generateMipMaps=!a,z.samplingMode=Z,z.invertY=N,z._useSRGBBuffer=this._getUseSRGBBuffer(!!A,a),this._doNotHandleContextLost||(z._buffer=n);let i=null;w&&!y&&(i=z.onLoadedObservable.add(w)),y||this._internalTexturesCache.push(z);const k=(N,y)=>{K&&K.removePendingData(z),l===I?(i&&z.onLoadedObservable.remove(i),U.e.UseFallbackTexture&&l!==U.e.FallbackTexture&&this._createTextureBase(U.e.FallbackTexture,a,z.invertY,K,Z,null,S,T,J,n,z),N=(N||"Unknown error")+(U.e.UseFallbackTexture?" - Fallback texture was used":""),z.onErrorObservable.notifyObservers({message:N,exception:y}),S&&S(N,y)):(c.b.Warn(`Failed to load ${l}, falling back to ${I}`),this._createTextureBase(I,a,z.invertY,K,Z,w,S,T,J,n,z,u,W,B,C,A))};if(h){const a=async l=>{(await h).loadData(l,z,((l,a,N,U,c,w)=>{w?k("TextureLoader failed to load data"):T(z,O,K,{width:l,height:a},z.invertY,!N,U,(()=>(c(),!1)),Z)}),C)};n?n instanceof ArrayBuffer?a(new Uint8Array(n)):ArrayBuffer.isView(n)?a(n):S&&S("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(l,(l=>{a(new Uint8Array(l))}),void 0,K?K.offlineProvider:void 0,!0,((l,a)=>{k("Unable to load "+(l&&l.responseURL,a))}))}else{const N=l=>{q&&!this._doNotHandleContextLost&&(z._buffer=l),T(z,O,K,l,z.invertY,a,!1,J,Z)};!E||b?n&&("string"===typeof n.decoding||n.close)?N(n):M._FileToolsLoadImage(l||"",N,k,K?K.offlineProvider:null,B,z.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof n||n instanceof ArrayBuffer||ArrayBuffer.isView(n)||n instanceof Blob?M._FileToolsLoadImage(n,N,k,K?K.offlineProvider:null,B,z.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):n&&N(n)}return z}_rebuildBuffers(){for(const l of this._uniformBuffers)l._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,u.h)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const l in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,l)&&(this._boundTexturesCache[l]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(l){this._name=l}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(l){this._hardwareScalingLevel=l,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(l){this._doNotHandleContextLost=l}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(l,a,N){var c,K;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new S,this._stencilStateComposer=new T,this._stencilState=new J,this._alphaState=new n,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new W.e,this.onCanvasFocusObservable=new W.e,this.onNewSceneAddedObservable=new W.e,this.onResizeObservable=new W.e,this.onCanvasPointerOutObservable=new W.e,this.onEffectErrorObservable=new W.e,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new W.e,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=l=>this._renderLoop(l),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new W.e,this.onAfterShaderCompilationObservable=new W.e,this.onBeginFrameObservable=new W.e,this.onEndFrameObservable=new W.e,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new W.e,this.onContextRestoredObservable=new W.e,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.Tc=new W.e,this.onReleaseEffectsObservable=new W.e,U.e.Instances.push(this),this.startTime=w.d.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,Z.d.SetMatrixPrecision(!!a.useHighPrecisionMatrix),(0,u.k)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=N??!1,a.antialias=l??a.antialias,a.deterministicLockstep=a.deterministicLockstep??!1,a.lockstepMaxSteps=a.lockstepMaxSteps??4,a.timeStep=a.timeStep??1/60,a.Jc=a.Jc??!0,this._audioContext=(null===(c=a.audioEngineOptions)||void 0===c?void 0:c.audioContext)??null,this._audioDestination=(null===(K=a.audioEngineOptions)||void 0===K?void 0:K.audioDestination)??null,this.premultipliedAlpha=a.premultipliedAlpha??!0,this._doNotHandleContextLost=!!a.doNotHandleContextLost,this._isStencilEnable=!!a.Jc,this.useExactSrgbConversions=a.useExactSrgbConversions??!1;const y=(0,u.o)()&&window.devicePixelRatio||1,H=a.limitDeviceRatio||y;N=N||a.adaptToDeviceRatio||!1,this._hardwareScalingLevel=N?1/Math.min(H,y):1,this._lastDevicePixelRatio=y,this._creationOptions=a}resize(){let l,a,N=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const l=(0,u.o)()&&window.devicePixelRatio||1,a=this._lastDevicePixelRatio/l;this._lastDevicePixelRatio=l,this._hardwareScalingLevel*=a}if((0,u.o)()&&(0,u.h)())if(this._renderingCanvas){var U,c;const N=null===(U=(c=this._renderingCanvas).getBoundingClientRect)||void 0===U?void 0:U.call(c);l=this._renderingCanvas.clientWidth||(null===N||void 0===N?void 0:N.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,a=this._renderingCanvas.clientHeight||(null===N||void 0===N?void 0:N.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else l=window.innerWidth,a=window.innerHeight;else l=this._renderingCanvas?this._renderingCanvas.width:100,a=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(l/this._hardwareScalingLevel,a/this._hardwareScalingLevel,N)}setSize(l,a){let N=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(l|=0,a|=0,!N&&this._renderingCanvas.width===l&&this._renderingCanvas.height===a)return!1;if(this._renderingCanvas.width=l,this._renderingCanvas.height=a,this.scenes){for(let l=0;l<this.scenes.length;l++){const a=this.scenes[l];for(let l=0;l<a.cameras.length;l++){a.cameras[l]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(l,a,N,U,c,K,Z,w,S,T,J){throw(0,y.b)("engine.rawTexture")}createRawCubeTexture(l,a,N,U,c,K,Z,w){throw(0,y.b)("engine.rawTexture")}createRawTexture3D(l,a,N,U,c,K,Z,w,S,T,J){throw(0,y.b)("engine.rawTexture")}createRawTexture2DArray(l,a,N,U,c,K,Z,w,S,T,J){throw(0,y.b)("engine.rawTexture")}_sharedInit(l){this._renderingCanvas=l}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const l=navigator.userAgent;this.hostInformation.isMobile=-1!==l.indexOf("Mobile")||-1!==l.indexOf("Mac")&&(0,u.h)()&&"ontouchend"in document},this._checkForMobile(),(0,u.o)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(l){return document.createElement("video")}_reportDrawCall(){var l;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(l=this._drawCalls)||void 0===l||l.addCount(a,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(l,a){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(l,a){return createImageBitmap(l,a)}resizeImageBitmap(l,a,N){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(l){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(l,a){if("undefined"===typeof document)return new OffscreenCanvas(l,a);const N=document.createElement("canvas");return N.width=l,N.height=a,N}createCanvas(l,a){return M._CreateCanvas(l,a)}static _FileToolsLoadImage(l,a,N,U,c,K,Z){throw(0,y.b)("FileTools")}_loadFile(l,a,N,U,c,K){const Z=(0,B.j)(l,a,N,U,c,K);return this._activeRequests.push(Z),Z.onCompleteObservable.add((()=>{const l=this._activeRequests.indexOf(Z);-1!==l&&this._activeRequests.splice(l,1)})),Z}static _FileToolsLoadFile(l,a,N,U,c,K){if(B.b.loadFile)return B.b.loadFile(l,a,N,U,c,K);throw(0,y.b)("FileTools")}dispose(){var l;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(l=this.releaseComputeEffects)||void 0===l||l.call(this),K.Effect.ResetCache();for(const N of this._activeRequests)N.abort();this._boundRenderFunction=null,this.Tc.notifyObservers(this),this.Tc.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,u.o)()&&window.removeEventListener("resize",this._checkForMobile);const a=U.e.Instances.indexOf(this);a>=0&&U.e.Instances.splice(a,1),U.e.Instances.length||(U.e.OnEnginesDisposedObservable.notifyObservers(this),U.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(l){throw(0,y.b)("LoadingScreen")}static MarkAllMaterialsAsDirty(l,a){for(let N=0;N<U.e.Instances.length;N++){const c=U.e.Instances[N];for(let N=0;N<c.scenes.length;N++)c.scenes[N].markAllMaterialsAsDirty(l,a)}}}M._RenderPassIdCounter=0,M._RescalePostProcessFactory=null,M.CollisionsEpsilon=.001,M.QueueNewFrame=C},12296:(l,a,N)=>{N.d(a,{e:()=>c});var U=N(12260);class c{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}c.Instances=[],c.OnEnginesDisposedObservable=new U.e,c._LastCreatedScene=null,c.UseFallbackTexture=!0,c.FallbackTexture=""},12367:(l,a,N)=>{N.d(a,{d:()=>U});class U{static SetMatrixPrecision(l){if(U.MatrixTrackPrecisionChange=!1,l&&!U.MatrixUse64Bits&&U.MatrixTrackedMatrices)for(let a=0;a<U.MatrixTrackedMatrices.length;++a){const l=U.MatrixTrackedMatrices[a],N=l.nc;l.nc=new Array(16);for(let a=0;a<16;++a)l.nc[a]=N[a]}U.MatrixUse64Bits=l,U.MatrixCurrentType=U.MatrixUse64Bits?Array:Float32Array,U.MatrixTrackedMatrices=null}}U.MatrixUse64Bits=!1,U.MatrixTrackPrecisionChange=!0,U.MatrixCurrentType=Float32Array,U.MatrixTrackedMatrices=[]},12386:(l,a,N)=>{N.d(a,{d:()=>Z});var U=N(12268);const c=new Map;function K(l,a){(function(l){return c.delete(l)})(l)&&U.b.Warn(`Extension with the name '${l}' already exists`),c.set(l,a)}function Z(l,a){"image/ktx"!==a&&"image/ktx2"!==a||(l=".ktx"),c.has(l)||(l.endsWith(".ies")&&K(".ies",(async()=>await N.e(15).then(N.bind(N,14867)).then((l=>new l._IESTextureLoader)))),l.endsWith(".dds")&&K(".dds",(async()=>await Promise.all([N.e(14),N.e(17),N.e(13),N.e(19),N.e(18),N.e(28)]).then(N.bind(N,14872)).then((l=>new l._DDSTextureLoader)))),l.endsWith(".basis")&&K(".basis",(async()=>await Promise.all([N.e(14),N.e(17),N.e(13),N.e(47)]).then(N.bind(N,14886)).then((l=>new l._BasisTextureLoader)))),l.endsWith(".env")&&K(".env",(async()=>await Promise.all([N.e(14),N.e(17),N.e(13),N.e(19),N.e(18),N.e(23),N.e(21),N.e(45),N.e(48)]).then(N.bind(N,14893)).then((l=>new l._ENVTextureLoader)))),l.endsWith(".hdr")&&K(".hdr",(async()=>await Promise.all([N.e(14),N.e(49)]).then(N.bind(N,14896)).then((l=>new l._HDRTextureLoader)))),(l.endsWith(".ktx")||l.endsWith(".ktx2"))&&(K(".ktx",(async()=>await N.e(30).then(N.bind(N,14901)).then((l=>new l._KTXTextureLoader)))),K(".ktx2",(async()=>await N.e(30).then(N.bind(N,14901)).then((l=>new l._KTXTextureLoader))))),l.endsWith(".tga")&&K(".tga",(async()=>await N.e(50).then(N.bind(N,14903)).then((l=>new l._TGATextureLoader)))),l.endsWith(".exr")&&K(".exr",(async()=>await N.e(16).then(N.bind(N,14909)).then((l=>new l._ExrTextureLoader)))));const U=c.get(l);return U?Promise.resolve(U(a)):null}},12373:(l,a,N)=>{N.d(a,{c:()=>Z});var U,c=N(12260),K=N(12381);!function(l){l[l.Unknown=0]="Unknown",l[l.Url=1]="Url",l[l.Temp=2]="Temp",l[l.Raw=3]="Raw",l[l.Dynamic=4]="Dynamic",l[l.RenderTarget=5]="RenderTarget",l[l.MultiRenderTarget=6]="MultiRenderTarget",l[l.Cube=7]="Cube",l[l.CubeRaw=8]="CubeRaw",l[l.CubePrefiltered=9]="CubePrefiltered",l[l.Raw3D=10]="Raw3D",l[l.Raw2DArray=11]="Raw2DArray",l[l.DepthStencil=12]="DepthStencil",l[l.CubeRawRGBD=13]="CubeRawRGBD",l[l.Depth=14]="Depth"}(U||(U={}));class Z extends K.e{get useMipMaps(){return this.generateMipMaps}set useMipMaps(l){this.generateMipMaps=l}get uniqueId(){return this._uniqueId}_setUniqueId(l){this._uniqueId=l}getEngine(){return this._engine}get source(){return this._source}constructor(l,a){let N=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new c.e,this.onErrorObservable=new c.e,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=l,this._source=a,this._uniqueId=Z._Counter++,N||(this._hardwareTexture=l._createHardwareTexture())}incrementReferences(){this._references++}updateSize(l,a){let N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,l,a,N),this.width=l,this.height=a,this.depth=N,this.baseWidth=l,this.baseHeight=a,this.baseDepth=N,this._size=l*a*N}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const l=this.onRebuildCallback(this),a=a=>{a._swapAndDie(this,!1),this.isReady=l.isReady};return void(l.isAsync?l.proxy.then(a):a(l.proxy))}let l;switch(this.source){case 2:case 12:case 14:break;case 1:return void(l=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(l=>{l._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:l=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),l._swapAndDie(this,!1),this.isReady=!0;break;case 10:l=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),l._swapAndDie(this,!1),this.isReady=!0;break;case 11:l=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),l._swapAndDie(this,!1),this.isReady=!0;break;case 4:l=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),l._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(l=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{l._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:l=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),l._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return l=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(l=>{l&&l._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(l._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(l){var a;let N=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(a=this._hardwareTexture)||void 0===a||a.setUsage(l._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),l._hardwareTexture=this._hardwareTexture,N&&(l._isRGBD=this._isRGBD),this._lodTextureHigh&&(l._lodTextureHigh&&l._lodTextureHigh.dispose(),l._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(l._lodTextureMid&&l._lodTextureMid.dispose(),l._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(l._lodTextureLow&&l._lodTextureLow.dispose(),l._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(l._irradianceTexture&&l._irradianceTexture.dispose(),l._irradianceTexture=this._irradianceTexture);const U=this._engine.getLoadedTexturesCache();let c=U.indexOf(this);-1!==c&&U.splice(c,1),c=U.indexOf(l),-1===c&&U.push(l)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}Z._Counter=0},12381:(l,a,N)=>{N.d(a,{e:()=>U});class U{get wrapU(){return this._cachedWrapU}set wrapU(l){this._cachedWrapU=l}get wrapV(){return this._cachedWrapV}set wrapV(l){this._cachedWrapV=l}get wrapR(){return this._cachedWrapR}set wrapR(l){this._cachedWrapR=l}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(l){this._cachedAnisotropicFilteringLevel=l}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(l){this._comparisonFunction=l}get useMipMaps(){return this._useMipMaps}set useMipMaps(l){this._useMipMaps=l}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=l,this._cachedWrapV=a,this._cachedWrapR=N,this._cachedAnisotropicFilteringLevel=U,this.samplingMode=c,this._comparisonFunction=K,this}compareSampler(l){return this._cachedWrapU===l._cachedWrapU&&this._cachedWrapV===l._cachedWrapV&&this._cachedWrapR===l._cachedWrapR&&this._cachedAnisotropicFilteringLevel===l._cachedAnisotropicFilteringLevel&&this.samplingMode===l.samplingMode&&this._comparisonFunction===l._comparisonFunction&&this._useMipMaps===l._useMipMaps}}},12274:(l,a,N)=>{N.d(a,{b:()=>K});var U=N(12268);const c=(l,a,N)=>l?l.getClassName&&"Mesh"===l.getClassName()?null:!l.getClassName||"SubMesh"!==l.getClassName()&&"PhysicsBody"!==l.getClassName()?l.clone?l.clone():Array.isArray(l)?l.slice():N&&"object"===typeof l?{...l}:null:l.clone(a):null;class K{static DeepCopy(l,a,N,K){let Z=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const w=function(l){const a=[];do{const N=Object.getOwnPropertyNames(l);for(const l of N)-1===a.indexOf(l)&&a.push(l)}while(l=Object.getPrototypeOf(l));return a}(l);for(const T of w){if("_"===T[0]&&(!K||-1===K.indexOf(T)))continue;if(T.endsWith("Observable"))continue;if(N&&-1!==N.indexOf(T))continue;const w=l[T],J=typeof w;if("function"!==J)try{if("object"===J)if(w instanceof Uint8Array)a[T]=Uint8Array.from(w);else if(w instanceof Array){if(a[T]=[],w.length>0)if("object"==typeof w[0])for(let l=0;l<w.length;l++){const N=c(w[l],a,Z);-1===a[T].indexOf(N)&&a[T].push(N)}else a[T]=w.slice(0)}else a[T]=c(w,a,Z);else a[T]=w}catch(S){U.b.Warn(S.message)}}}}},12301:(l,a,N)=>{N.d(a,{c:()=>U,e:()=>c,f:()=>K});class U extends Error{}U._setPrototypeOf=Object.setPrototypeOf||((l,a)=>(l.__proto__=a,l));const c={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class K extends U{constructor(l,a,N){super(l),this.errorCode=a,this.innerError=N,this.name="RuntimeError",U._setPrototypeOf(this,K.prototype)}}},12298:(l,a,N)=>{N.d(a,{e:()=>k,f:()=>M,i:()=>t,m:()=>h,r:()=>z,o:()=>B,s:()=>q,v:()=>b,y:()=>I,z:()=>A});var U=N(12292),c=N(12266),K=N(12260);class Z{}Z.FilesToLoad={};var w=N(12301),S=N(12305),T=N(12312),J=N(12296),n=N(12268),y=N(12328),H=N(12319),u=N(12336);const W=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class B extends w.f{constructor(l,a){super(l,w.e.LoadFileError),this.name="LoadFileError",w.c._setPrototypeOf(this,B.prototype),a instanceof U.c?this.request=a:this.file=a}}class Y extends w.f{constructor(l,a){super(l,w.e.RequestFileError),this.request=a,this.name="RequestFileError",w.c._setPrototypeOf(this,Y.prototype)}}class C extends w.f{constructor(l,a){super(l,w.e.ReadFileError),this.file=a,this.name="ReadFileError",w.c._setPrototypeOf(this,C.prototype)}}const M={DefaultRetryStrategy:class{static ExponentialBackoff(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(N,U,c)=>0!==U.status||c>=l||-1!==N.indexOf("file:")?-1:Math.pow(2,c)*a}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:l=>l,ScriptBaseUrl:"",ScriptPreprocessUrl:l=>l,CleanUrl:l=>l=l.replace(/#/gm,"%23")},A=(l,a)=>{if((!l||0!==l.indexOf("data:"))&&M.CorsBehavior)if("string"===typeof M.CorsBehavior||M.CorsBehavior instanceof String)a.crossOrigin=M.CorsBehavior;else{const N=M.CorsBehavior(l);N&&(a.crossOrigin=N)}},E={getRequiredSize:null},q=function(l,a,N,c){let K,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",T=arguments.length>5?arguments[5]:void 0,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:J.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===n||void 0===n||!n._features.forceBitmapOverHTMLImageElement))return N("LoadImage is only supported in web or BabylonNative environments."),null;let y=!1;l instanceof ArrayBuffer||ArrayBuffer.isView(l)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(K=URL.createObjectURL(new Blob([l],{type:w})),y=!0):K=`data:${w};base64,`+(0,S.k)(l):l instanceof Blob?(K=URL.createObjectURL(l),y=!0):(K=M.CleanUrl(l),K=M.PreprocessUrl(K));const H=a=>{if(N){const U=K||l.toString();N(`Error while trying to load image: ${0===U.indexOf("http")||U.length<=128?U:U.slice(0,128)+"..."}`,a)}};if(null!==n&&void 0!==n&&n._features.forceBitmapOverHTMLImageElement)return z(K,(U=>{n.createImageBitmap(new Blob([U],{type:w}),{premultiplyAlpha:"none",...T}).then((l=>{a(l),y&&URL.revokeObjectURL(K)})).catch((a=>{N&&N("Error while trying to load image: "+l,a)}))}),void 0,c||void 0,!0,((l,a)=>{H(a)})),null;const u=new Image;if(E.getRequiredSize){const a=E.getRequiredSize(l);a.width&&(u.width=a.width),a.height&&(u.height=a.height)}A(K,u);const W=[],B=()=>{for(const l of W)l.target.removeEventListener(l.name,l.handler);W.length=0};W.push({target:u,name:"load",handler:()=>{B(),a(u),y&&u.src&&URL.revokeObjectURL(u.src)}}),W.push({target:u,name:"error",handler:l=>{B(),H(l),y&&u.src&&URL.revokeObjectURL(u.src)}}),W.push({target:document,name:"securitypolicyviolation",handler:l=>{if(l.blockedURI!==u.src||"yc"===l.disposition)return;B();const a=new Error(`CSP violation of policy ${l.effectiveDirective} ${l.blockedURI}. Current policy is ${l.originalPolicy}`);J.e.UseFallbackTexture=!1,H(a),y&&u.src&&URL.revokeObjectURL(u.src),u.src=""}}),(()=>{for(const l of W)l.target.addEventListener(l.name,l.handler)})();const Y="blob:"===K.substring(0,5),C="data:"===K.substring(0,5),q=()=>{Y||C||!U.c.IsCustomRequestAvailable?u.src=K:z(K,((l,a,N)=>{const U=new Blob([l],{type:!w&&N?N:w}),c=URL.createObjectURL(U);y=!0,u.src=c}),void 0,c||void 0,!0,((l,a)=>{H(a)}))},b=()=>{c&&c.loadImage(K,u)};if(!Y&&!C&&c&&c.enableTexturesOffline)c.open(b,q);else{if(-1!==K.indexOf("file:")){const l=decodeURIComponent(K.substring(5).toLowerCase());if(Z.FilesToLoad[l]&&"undefined"!==typeof URL){try{let a;try{a=URL.createObjectURL(Z.FilesToLoad[l])}catch(I){a=URL.createObjectURL(Z.FilesToLoad[l])}u.src=a,y=!0}catch(t){u.src=""}return u}}q()}return u},b=(l,a,N,U,c)=>{const Z=new FileReader,w={onCompleteObservable:new K.e,abort:()=>Z.abort()};return Z.onloadend=()=>w.onCompleteObservable.notifyObservers(w),c&&(Z.onerror=()=>{c(new C(`Unable to read ${l.name}`,l))}),Z.onload=l=>{a(l.target.result)},N&&(Z.onprogress=N),U?Z.readAsArrayBuffer(l):Z.readAsText(l),w},z=(l,a,N,U,c,S,T)=>{if(l.name)return b(l,a,N,c,S?l=>{S(void 0,l)}:void 0);const J=l;if(-1!==J.indexOf("file:")){let l=decodeURIComponent(J.substring(5).toLowerCase());0===l.indexOf("./")&&(l=l.substring(2));const U=Z.FilesToLoad[l];if(U)return b(U,a,N,c,S?l=>S(void 0,new B(l.message,l.file)):void 0)}const{match:H,type:u}=i(J);if(H){const l={onCompleteObservable:new K.e,abort:()=>()=>{}};try{const l=c?k(J):Q(J);a(l,void 0,u)}catch(w){S?S(void 0,w):n.b.Error(w.message||"Failed to parse the Data URL")}return y.b.SetImmediate((()=>{l.onCompleteObservable.notifyObservers(l)})),l}return I(J,((l,N)=>{a(l,null===N||void 0===N?void 0:N.responseURL,null===N||void 0===N?void 0:N.getResponseHeader("content-type"))}),N,U,c,S?l=>{S(l.request,new B(l.message,l.request))}:void 0,T)},I=(l,a,N,Z,w,S,T)=>{l=M.CleanUrl(l),l=M.PreprocessUrl(l);const J=M.BaseUrl+l;let y=!1;const H={onCompleteObservable:new K.e,abort:()=>y=!0},u=()=>{let l,K=new U.c,Z=null;const u=()=>{K&&(N&&K.removeEventListener("progress",N),l&&K.removeEventListener("readystatechange",l),K.removeEventListener("loadend",W))};let W=()=>{u(),H.onCompleteObservable.notifyObservers(H),H.onCompleteObservable.clear(),N=void 0,l=null,W=null,S=void 0,T=void 0,a=void 0};H.abort=()=>{y=!0,W&&W(),K&&K.readyState!==(XMLHttpRequest.DONE||4)&&K.abort(),null!==Z&&(clearTimeout(Z),Z=null),K=null};const B=l=>{const a=l.message||"Unknown error";S&&K?S(new Y(a,K)):n.b.Error(a)},C=n=>{if(K){if(K.open("GET",J),T)try{T(K)}catch(H){return void B(H)}w&&(K.responseType="arraybuffer"),N&&K.addEventListener("progress",N),W&&K.addEventListener("loadend",W),l=()=>{if(!y&&K&&K.readyState===(XMLHttpRequest.DONE||4)){if(l&&K.removeEventListener("readystatechange",l),K.status>=200&&K.status<300||0===K.status&&(!(0,c.o)()||O())){const l=w?K.response:K.responseText;if(null!==l){try{a&&a(l,K)}catch(H){B(H)}return}}const N=M.DefaultRetryStrategy;if(N){const l=N(J,K,n);if(-1!==l)return u(),K=new U.c,void(Z=setTimeout((()=>C(n+1)),l))}const T=new Y("Error status: "+K.status+" "+K.statusText+" - Unable to load "+J,K);S&&S(T)}},K.addEventListener("readystatechange",l),K.send()}};C(0)};if(Z&&Z.enableSceneOffline){const U=l=>{l&&l.status>400?S&&S(l):u()},c=()=>{Z&&Z.loadFile(M.BaseUrl+l,(l=>{!y&&a&&a(l),H.onCompleteObservable.notifyObservers(H)}),N?l=>{!y&&N&&N(l)}:void 0,U,w)};Z.open(c,U)}else u();return H},t=l=>{const{match:a,type:N}=i(l);if(a)return N||void 0;const U=l.lastIndexOf(".");switch(l.substring(U+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"Hc":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},O=()=>"undefined"!==typeof location&&"file:"===location.protocol,h=l=>W.test(l),i=l=>{const a=W.exec(l);if(null===a||0===a.length)return{match:!1,type:""};return{match:!0,type:a[0].replace("data:","").replace("base64,","")}};function k(l){return(0,S.d)(l.split(",")[1])}const Q=l=>(0,S.e)(l.split(",")[1]);let j;u.c._FileToolsLoadImage=q,H.b.loadFile=z,T.p.loadFile=z;((l,a,N,U,c,K,Z,w,S,T)=>{j={DecodeBase64UrlToBinary:l,DecodeBase64UrlToString:a,DefaultRetryStrategy:N.DefaultRetryStrategy,BaseUrl:N.BaseUrl,CorsBehavior:N.CorsBehavior,PreprocessUrl:N.PreprocessUrl,IsBase64DataUrl:U,IsFileURL:c,LoadFile:K,LoadImage:Z,ReadFile:w,RequestFile:S,SetCorsBehavior:T},Object.defineProperty(j,"DefaultRetryStrategy",{get:function(){return N.DefaultRetryStrategy},set:function(l){N.DefaultRetryStrategy=l}}),Object.defineProperty(j,"BaseUrl",{get:function(){return N.BaseUrl},set:function(l){N.BaseUrl=l}}),Object.defineProperty(j,"PreprocessUrl",{get:function(){return N.PreprocessUrl},set:function(l){N.PreprocessUrl=l}}),Object.defineProperty(j,"CorsBehavior",{get:function(){return N.CorsBehavior},set:function(l){N.CorsBehavior=l}})})(k,Q,M,h,O,z,q,b,I,A)},12403:(l,a,N)=>{function U(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(l=>{const a=16*Math.random()|0;return("x"===l?a:3&a|8).toString(16)}))}N.d(a,{b:()=>U})},12392:(l,a,N)=>{N.d(a,{b:()=>K});var U=N(12268),c=N(12394);class K{static Instantiate(l){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[l])return this.RegisteredExternalClasses[l];const a=(0,c.e)(l);if(a)return a;U.b.Warn(l+" not found, you may have missed an import.");const N=l.split(".");let K=window||this;for(let U=0,c=N.length;U<c;U++)K=K[N[U]];return"function"!==typeof K?null:K}}K.RegisteredExternalClasses={}},12283:(l,a,N)=>{N.d(a,{d:()=>c});var U=N(12266);class c{static get Now(){return(0,U.o)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},12305:(l,a,N)=>{N.d(a,{d:()=>Z,e:()=>K,g:()=>U,k:()=>c});const U=l=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(l);let a="";for(let N=0;N<l.byteLength;N++)a+=String.fromCharCode(l[N]);return a},c=l=>{const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let N,U,c,K,Z,w,S,T="",J=0;const n=ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l);for(;J<n.length;)N=n[J++],U=J<n.length?n[J++]:Number.NaN,c=J<n.length?n[J++]:Number.NaN,K=N>>2,Z=(3&N)<<4|U>>4,w=(15&U)<<2|c>>6,S=63&c,isNaN(U)?w=S=64:isNaN(c)&&(S=64),T+=a.charAt(K)+a.charAt(Z)+a.charAt(w)+a.charAt(S);return T},K=l=>atob(l),Z=l=>{const a=K(l),N=a.length,U=new Uint8Array(new ArrayBuffer(N));for(let c=0;c<N;c++)U[c]=a.charCodeAt(c);return U.buffer}},12411:(l,a,N)=>{function U(l){let a=1;do{a*=2}while(a<l);return a===l}function c(l,a,N){return l*(1-N)+a*N}function K(l){const a=Z(l),N=w(l);return a-l>l-N?N:a}function Z(l){return l--,l|=l>>1,l|=l>>2,l|=l>>4,l|=l>>8,l|=l>>16,++l}function w(l){return l|=l>>1,l|=l>>2,l|=l>>4,l|=l>>8,(l|=l>>16)-(l>>1)}function S(l,a){let N;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:N=w(l);break;case 2:N=K(l);break;default:N=Z(l)}return Math.min(N,a)}N.d(a,{d:()=>w,f:()=>S,j:()=>U,l:()=>c,m:()=>K})},12254:(l,a,N)=>{N.r(a),N.d(a,{AsyncLoop:()=>C,Tools:()=>B,className:()=>Y});var U=N(12260),c=N(12266),K=N(12268),Z=N(12274),w=N(12283),S=N(12288),T=N(12292),J=N(12296),n=N(12298),y=N(12328),H=N(12392),u=N(12403),W=N(12411);class B{static get BaseUrl(){return n.f.BaseUrl}static set BaseUrl(l){n.f.BaseUrl=l}static get CleanUrl(){return n.f.CleanUrl}static set CleanUrl(l){n.f.CleanUrl=l}static IsAbsoluteUrl(l){return 0===l.indexOf("//")||-1!==l.indexOf("://")&&(-1!==l.indexOf(".")&&(-1!==l.indexOf("/")&&(!(l.indexOf(":")>l.indexOf("/"))&&(l.indexOf("://")<l.indexOf(".")||(0===l.indexOf("data:")||0===l.indexOf("blob:"))))))}static set ScriptBaseUrl(l){n.f.ScriptBaseUrl=l}static get ScriptBaseUrl(){return n.f.ScriptBaseUrl}static set CDNBaseUrl(l){B.ScriptBaseUrl=l,B.AssetBaseUrl=l}static set ScriptPreprocessUrl(l){n.f.ScriptPreprocessUrl=l}static get ScriptPreprocessUrl(){return n.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return n.f.DefaultRetryStrategy}static set DefaultRetryStrategy(l){n.f.DefaultRetryStrategy=l}static get CorsBehavior(){return n.f.CorsBehavior}static set CorsBehavior(l){n.f.CorsBehavior=l}static get UseFallbackTexture(){return J.e.UseFallbackTexture}static set UseFallbackTexture(l){J.e.UseFallbackTexture=l}static get RegisteredExternalClasses(){return H.b.RegisteredExternalClasses}static set RegisteredExternalClasses(l){H.b.RegisteredExternalClasses=l}static get fallbackTexture(){return J.e.FallbackTexture}static set fallbackTexture(l){J.e.FallbackTexture=l}static FetchToRef(l,a,N,U,c,K){const Z=4*((Math.abs(l)*N%N|0)+(Math.abs(a)*U%U|0)*N);K.r=c[Z]/255,K.g=c[Z+1]/255,K.b=c[Z+2]/255,K.a=c[Z+3]/255}static Mix(l,a,N){return 0}static Instantiate(l){return H.b.Instantiate(l)}static SetImmediate(l){y.b.SetImmediate(l)}static IsExponentOfTwo(l){return!0}static FloatRound(l){return Math.fround(l)}static GetFilename(l){const a=l.lastIndexOf("/");return a<0?l:l.substring(a+1)}static GetFolderPath(l){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const N=l.lastIndexOf("/");return N<0?a?l:"":l.substring(0,N+1)}static ToDegrees(l){return 180*l/Math.PI}static ToRadians(l){return l*Math.PI/180}static SmoothAngleChange(l,a){let N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const U=this.ToRadians(l),c=this.ToRadians(a);return this.ToDegrees(Math.atan2((1-N)*Math.sin(c)+N*Math.sin(U),(1-N)*Math.cos(c)+N*Math.cos(U)))}static MakeArray(l,a){return!0===a||void 0!==l&&null!=l?Array.isArray(l)?l:[l]:null}static GetPointerPrefix(l){return(0,c.o)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(l,a){(0,n.z)(l,a)}static SetReferrerPolicyBehavior(l,a){a.referrerPolicy=l}static get PreprocessUrl(){return n.f.PreprocessUrl}static set PreprocessUrl(l){n.f.PreprocessUrl=l}static LoadImage(l,a,N,U,c,K){return(0,n.s)(l,a,N,U,c,K)}static LoadFile(l,a,N,U,c,K){return(0,n.r)(l,a,N,U,c,K)}static async LoadFileAsync(l){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((N,U)=>{(0,n.r)(l,(l=>{N(l)}),void 0,void 0,a,((l,a)=>{U(a)}))}))}static GetAssetUrl(l){if(!l)return"";if(B.AssetBaseUrl&&l.startsWith(B._DefaultAssetsUrl)){const a="/"===B.AssetBaseUrl[B.AssetBaseUrl.length-1]?B.AssetBaseUrl.substring(0,B.AssetBaseUrl.length-1):B.AssetBaseUrl;return l.replace(B._DefaultAssetsUrl,a)}return l}static GetBabylonScriptURL(l,a){if(!l)return"";if(B.ScriptBaseUrl&&l.startsWith(B._DefaultCdnUrl)){const a="/"===B.ScriptBaseUrl[B.ScriptBaseUrl.length-1]?B.ScriptBaseUrl.substring(0,B.ScriptBaseUrl.length-1):B.ScriptBaseUrl;l=l.replace(B._DefaultCdnUrl,a)}return l=B.ScriptPreprocessUrl(l),a&&(l=B.GetAbsoluteUrl(l)),l}static LoadBabylonScript(l,a,N,U){l=B.GetBabylonScriptURL(l),B.LoadScript(l,a,N)}static async LoadBabylonScriptAsync(l){return l=B.GetBabylonScriptURL(l),await B.LoadScriptAsync(l)}static LoadScript(l,a,N,U){let K=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(l),a&&a()}catch(S){null===N||void 0===N||N(`Unable to load script '${l}' in worker`,S)}return}if(!(0,c.o)())return void(null===N||void 0===N||N(`Cannot load script '${l}' outside of a window or a worker`));const Z=document.getElementsByTagName("head")[0],w=document.createElement("script");K?(w.setAttribute("type","module"),w.innerText=l):(w.setAttribute("type","text/javascript"),w.setAttribute("src",l)),U&&(w.id=U),w.onload=()=>{a&&a()},w.onerror=a=>{N&&N(`Unable to load script '${l}'`,a)},Z.appendChild(w)}static async LoadScriptAsync(l,a){return await new Promise(((N,U)=>{this.LoadScript(l,(()=>{N()}),((l,a)=>{U(a||new Error(l))}),a)}))}static ReadFileAsDataURL(l,a,N){const c=new FileReader,K={onCompleteObservable:new U.e,abort:()=>c.abort()};return c.onloadend=()=>{K.onCompleteObservable.notifyObservers(K)},c.onload=l=>{a(l.target.result)},c.onprogress=N,c.readAsDataURL(l),K}static ReadFile(l,a,N,U,c){return(0,n.v)(l,a,N,U,c)}static FileAsURL(l){const a=new Blob([l]);return window.URL.createObjectURL(a)}static Format(l){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return l.toFixed(a)}static DeepCopy(l,a,N,U){Z.b.DeepCopy(l,a,N,U)}static IsEmpty(l){for(const a in l)if(Object.prototype.hasOwnProperty.call(l,a))return!1;return!0}static RegisterTopRootEvents(l,a){for(let U=0;U<a.length;U++){const c=a[U];l.addEventListener(c.name,c.handler,!1);try{window.parent&&window.parent.addEventListener(c.name,c.handler,!1)}catch(N){}}}static UnregisterTopRootEvents(l,a){for(let U=0;U<a.length;U++){const c=a[U];l.removeEventListener(c.name,c.handler);try{l.parent&&l.parent.removeEventListener(c.name,c.handler)}catch(N){}}}static async DumpFramebuffer(l,a,N,U){throw(0,S.b)("DumpTools")}static DumpData(l,a,N,U){throw(0,S.b)("DumpTools")}static async DumpDataAsync(l,a,N){throw(0,S.b)("DumpTools")}static _IsOffScreenCanvas(l){return void 0!==l.convertToBlob}static ToBlob(l,a){let N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",U=arguments.length>3?arguments[3]:void 0;B._IsOffScreenCanvas(l)||l.toBlob||(l.toBlob=function(l,a,N){setTimeout((()=>{const U=atob(this.toDataURL(a,N).split(",")[1]),c=U.length,K=new Uint8Array(c);for(let l=0;l<c;l++)K[l]=U.charCodeAt(l);l(new Blob([K]))}))}),B._IsOffScreenCanvas(l)?l.convertToBlob({type:N,quality:U}).then((l=>a(l))):l.toBlob((function(l){a(l)}),N,U)}static DownloadBlob(l,a){if("download"in document.createElement("a")){if(!a){const l=new Date;a="screenshot_"+((l.getFullYear()+"-"+(l.getMonth()+1)).slice(2)+"-"+l.getDate()+"_"+l.getHours()+"-"+("0"+l.getMinutes()).slice(-2))+".png"}B.Download(l,a)}else if(l&&"undefined"!==typeof URL){const a=URL.createObjectURL(l),N=window.open("");if(!N)return;const U=N.document.createElement("img");U.onload=function(){URL.revokeObjectURL(a)},U.src=a,N.document.body.appendChild(U)}}static EncodeScreenshotCanvasData(l,a){let N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",U=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;if("string"!==typeof U&&a){if(a){if(B._IsOffScreenCanvas(l))return void l.convertToBlob({type:N,quality:c}).then((l=>{const N=new FileReader;N.readAsDataURL(l),N.onloadend=()=>{const l=N.result;a(l)}}));const U=l.toDataURL(N,c);a(U)}}else this.ToBlob(l,(function(l){l&&B.DownloadBlob(l,U),a&&a("")}),N,c)}static Download(l,a){if("undefined"===typeof URL)return;const N=window.URL.createObjectURL(l),U=document.createElement("a");document.body.appendChild(U),U.style.display="none",U.href=N,U.download=a,U.addEventListener("click",(()=>{U.parentElement&&U.parentElement.removeChild(U)})),U.click(),window.URL.revokeObjectURL(N)}static BackCompatCameraNoPreventDefault(l){return"boolean"===typeof l[0]?l[0]:"boolean"===typeof l[1]&&l[1]}static CreateScreenshot(l,a,N,U){throw(0,S.b)("ScreenshotTools")}static async CreateScreenshotAsync(l,a,N){throw(0,S.b)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(l,a,N,U){throw(0,S.b)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(l,a,N){throw(0,S.b)("ScreenshotTools")}static RandomId(){return(0,u.b)()}static IsBase64(l){return(0,n.m)(l)}static DecodeBase64(l){return(0,n.e)(l)}static get errorsCount(){return K.b.errorsCount}static Log(l){K.b.Log(l)}static Warn(l){K.b.Warn(l)}static Error(l){K.b.Error(l)}static get LogCache(){return K.b.LogCache}static ClearLogCache(){K.b.ClearLogCache()}static set LogLevels(l){K.b.LogLevels=l}static set PerformanceLogLevel(l){return(l&B.PerformanceUserMarkLogLevel)===B.PerformanceUserMarkLogLevel?(B.StartPerformanceCounter=B._StartUserMark,void(B.EndPerformanceCounter=B._EndUserMark)):(l&B.PerformanceConsoleLogLevel)===B.PerformanceConsoleLogLevel?(B.StartPerformanceCounter=B._StartPerformanceConsole,void(B.EndPerformanceCounter=B._EndPerformanceConsole)):(B.StartPerformanceCounter=B._StartPerformanceCounterDisabled,void(B.EndPerformanceCounter=B._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(l,a){}static _EndPerformanceCounterDisabled(l,a){}static _StartUserMark(l){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!B._Performance){if(!(0,c.o)())return;B._Performance=window.performance}a&&B._Performance.mark&&B._Performance.mark(l+"-Begin")}static _EndUserMark(l){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&B._Performance.mark&&(B._Performance.mark(l+"-End"),B._Performance.measure(l,l+"-Begin",l+"-End"))}static _StartPerformanceConsole(l){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&(B._StartUserMark(l,a),console.time&&console.time(l))}static _EndPerformanceConsole(l){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a&&(B._EndUserMark(l,a),console.timeEnd(l))}static get Now(){return w.d.Now}static GetClassName(l){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],N=null;if(!a&&l.getClassName)N=l.getClassName();else{if(l instanceof Object){N=(a?l:Object.getPrototypeOf(l)).constructor.__bjsclassName__}N||(N=typeof l)}return N}static First(l,a){for(const N of l)if(a(N))return N;return null}static getFullClassName(l){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],N=null,U=null;if(!a&&l.getClassName)N=l.getClassName();else{if(l instanceof Object){const c=a?l:Object.getPrototypeOf(l);N=c.constructor.__bjsclassName__,U=c.constructor.__bjsmoduleName__}N||(N=typeof l)}return N?(null!=U?U+".":"")+N:null}static async DelayAsync(l){await new Promise((a=>{setTimeout((()=>{a()}),l)}))}static IsSafari(){return!!(0,c.k)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function Y(l,a){return N=>{N.__bjsclassName__=l,N.__bjsmoduleName__=null!=a?a:null}}B.AssetBaseUrl="",B.UseCustomRequestHeaders=!1,B.CustomRequestHeaders=T.c.CustomRequestHeaders,B.GetDOMTextContent=c.d,B._DefaultCdnUrl="https://cdn.babylonjs.com",B._DefaultAssetsUrl="https://assets.babylonjs.com/core",B.GetAbsoluteUrl="object"===typeof document?l=>{const a=document.createElement("a");return a.href=l,a.href}:"function"===typeof URL&&"object"===typeof location?l=>new URL(l,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},B.NoneLogLevel=K.b.NoneLogLevel,B.MessageLogLevel=K.b.MessageLogLevel,B.WarningLogLevel=K.b.WarningLogLevel,B.ErrorLogLevel=K.b.ErrorLogLevel,B.AllLogLevel=K.b.AllLogLevel,B.IsWindowObjectExist=c.o,B.PerformanceNoneLogLevel=0,B.PerformanceUserMarkLogLevel=1,B.PerformanceConsoleLogLevel=2,B.StartPerformanceCounter=B._StartPerformanceCounterDisabled,B.EndPerformanceCounter=B._EndPerformanceCounterDisabled;class C{constructor(l,a,N){let U=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=l,this.index=U-1,this._done=!1,this._fn=a,this._successCallback=N}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(l,a,N){const U=new C(l,a,N,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return U.executeNext(),U}static SyncAsyncForLoop(l,a,N,U,c){let K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return C.Run(Math.ceil(l/a),(U=>{c&&c()?U.breakLoop():setTimeout((()=>{for(let K=0;K<a;++K){const Z=U.index*a+K;if(Z>=l)break;if(N(Z),c&&c()){U.breakLoop();break}}U.executeNext()}),K)}),U)}}B.Mix=W.l,B.IsExponentOfTwo=W.j,J.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},12394:(l,a,N)=>{N.d(a,{e:()=>K,g:()=>c});const U={};function c(l,a){U[l]=a}function K(l){return U[l]}},12292:(l,a,N)=>{N.d(a,{c:()=>U});class U{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(U.CustomRequestHeaders).length>0||U.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const l in U.CustomRequestHeaders){const a=U.CustomRequestHeaders[l];a&&this._xhr.setRequestHeader(l,a)}}_shouldSkipRequestModifications(l){return U.SkipRequestModificationForBabylonCDN&&(l.includes("preview.babylonjs.com")||l.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(l){this._xhr.onprogress=l}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(l){this._xhr.responseType=l}get timeout(){return this._xhr.timeout}set timeout(l){this._xhr.timeout=l}addEventListener(l,a,N){this._xhr.addEventListener(l,a,N)}removeEventListener(l,a,N){this._xhr.removeEventListener(l,a,N)}abort(){this._xhr.abort()}send(l){U.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(l)}open(l,a){for(const N of U.CustomRequestModifiers){if(this._shouldSkipRequestModifications(a))return;a=N(this._xhr,a)||a}a=(a=a.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=a,this._xhr.open(l,a,!0)}setRequestHeader(l,a){this._xhr.setRequestHeader(l,a)}getResponseHeader(l){return this._xhr.getResponseHeader(l)}}U.CustomRequestHeaders={},U.CustomRequestModifiers=new Array,U.SkipRequestModificationForBabylonCDN=!0}}]);