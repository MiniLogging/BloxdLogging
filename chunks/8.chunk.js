"use strict";(self["1kjc9ee3uyt"]=self["1kjc9ee3uyt"]||[]).push([[8],{11578:(w,E,G)=>{G.d(E,{b:()=>d});var P=G(11543),h=G(11518),B=G(11587),y=G(11618),x=G(11528);class U{constructor(){let w=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,w&&this.reset()}get isDirty(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty}get zOffset(){return this._zOffset}set zOffset(w){this._zOffset!==w&&(this._zOffset=w,this._isZOffsetDirty=!0)}get zOffsetUnits(){return this._zOffsetUnits}set zOffsetUnits(w){this._zOffsetUnits!==w&&(this._zOffsetUnits=w,this._isZOffsetDirty=!0)}get cullFace(){return this._cullFace}set cullFace(w){this._cullFace!==w&&(this._cullFace=w,this._isCullFaceDirty=!0)}get cull(){return this._cull}set cull(w){this._cull!==w&&(this._cull=w,this._isCullDirty=!0)}get depthFunc(){return this._depthFunc}set depthFunc(w){this._depthFunc!==w&&(this._depthFunc=w,this._isDepthFuncDirty=!0)}get depthMask(){return this._depthMask}set depthMask(w){this._depthMask!==w&&(this._depthMask=w,this._isDepthMaskDirty=!0)}get depthTest(){return this._depthTest}set depthTest(w){this._depthTest!==w&&(this._depthTest=w,this._isDepthTestDirty=!0)}get frontFace(){return this._frontFace}set frontFace(w){this._frontFace!==w&&(this._frontFace=w,this._isFrontFaceDirty=!0)}reset(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._zOffsetUnits=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!0,this._isFrontFaceDirty=!1}apply(w){this.isDirty&&(this._isCullDirty&&(this.cull?w.enable(w.CULL_FACE):w.disable(w.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(w.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(w.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?w.enable(w.DEPTH_TEST):w.disable(w.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(w.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset||this.zOffsetUnits?(w.enable(w.POLYGON_OFFSET_FILL),w.polygonOffset(this.zOffset,this.zOffsetUnits)):w.disable(w.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(w.frontFace(this.frontFace),this._isFrontFaceDirty=!1))}}class l{get isDirty(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty}get func(){return this._func}set func(w){this._func!==w&&(this._func=w,this._isStencilFuncDirty=!0)}get funcRef(){return this._funcRef}set funcRef(w){this._funcRef!==w&&(this._funcRef=w,this._isStencilFuncDirty=!0)}get funcMask(){return this._funcMask}set funcMask(w){this._funcMask!==w&&(this._funcMask=w,this._isStencilFuncDirty=!0)}get opStencilFail(){return this._opStencilFail}set opStencilFail(w){this._opStencilFail!==w&&(this._opStencilFail=w,this._isStencilOpDirty=!0)}get opDepthFail(){return this._opDepthFail}set opDepthFail(w){this._opDepthFail!==w&&(this._opDepthFail=w,this._isStencilOpDirty=!0)}get opStencilDepthPass(){return this._opStencilDepthPass}set opStencilDepthPass(w){this._opStencilDepthPass!==w&&(this._opStencilDepthPass=w,this._isStencilOpDirty=!0)}get mask(){return this._mask}set mask(w){this._mask!==w&&(this._mask=w,this._isStencilMaskDirty=!0)}get enabled(){return this._enabled}set enabled(w){this._enabled!==w&&(this._enabled=w,this._isStencilTestDirty=!0)}constructor(){let w=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.useStencilGlobalOnly=!1,w&&this.reset()}reset(){var w;this.stencilMaterial=void 0,null===(w=this.stencilGlobal)||void 0===w||w.reset(),this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0}apply(w){var E;if(!w)return;const G=!this.useStencilGlobalOnly&&!(null===(E=this.stencilMaterial)||void 0===E||!E.enabled);this.enabled=G?this.stencilMaterial.enabled:this.stencilGlobal.enabled,this.func=G?this.stencilMaterial.func:this.stencilGlobal.func,this.funcRef=G?this.stencilMaterial.funcRef:this.stencilGlobal.funcRef,this.funcMask=G?this.stencilMaterial.funcMask:this.stencilGlobal.funcMask,this.opStencilFail=G?this.stencilMaterial.opStencilFail:this.stencilGlobal.opStencilFail,this.opDepthFail=G?this.stencilMaterial.opDepthFail:this.stencilGlobal.opDepthFail,this.opStencilDepthPass=G?this.stencilMaterial.opStencilDepthPass:this.stencilGlobal.opStencilDepthPass,this.mask=G?this.stencilMaterial.mask:this.stencilGlobal.mask,this.isDirty&&(this._isStencilTestDirty&&(this.enabled?w.enable(w.STENCIL_TEST):w.disable(w.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(w.stencilMask(this.mask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(w.stencilFunc(this.func,this.funcRef,this.funcMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(w.stencilOp(this.opStencilFail,this.opDepthFail,this.opStencilDepthPass),this._isStencilOpDirty=!1))}}class i{constructor(){this.reset()}reset(){this.enabled=!1,this.mask=255,this.func=i.ALWAYS,this.funcRef=1,this.funcMask=255,this.opStencilFail=i.KEEP,this.opDepthFail=i.KEEP,this.opStencilDepthPass=i.REPLACE}get stencilFunc(){return this.func}set stencilFunc(w){this.func=w}get stencilFuncRef(){return this.funcRef}set stencilFuncRef(w){this.funcRef=w}get stencilFuncMask(){return this.funcMask}set stencilFuncMask(w){this.funcMask=w}get stencilOpStencilFail(){return this.opStencilFail}set stencilOpStencilFail(w){this.opStencilFail=w}get stencilOpDepthFail(){return this.opDepthFail}set stencilOpDepthFail(w){this.opDepthFail=w}get stencilOpStencilDepthPass(){return this.opStencilDepthPass}set stencilOpStencilDepthPass(w){this.opStencilDepthPass=w}get stencilMask(){return this.mask}set stencilMask(w){this.mask=w}get stencilTest(){return this.enabled}set stencilTest(w){this.enabled=w}}i.ALWAYS=519,i.KEEP=7680,i.REPLACE=7681;class O{constructor(){this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this.reset()}get isDirty(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty||this._isBlendEquationParametersDirty}get alphaBlend(){return this._alphaBlend}set alphaBlend(w){this._alphaBlend!==w&&(this._alphaBlend=w,this._isAlphaBlendDirty=!0)}setAlphaBlendConstants(w,E,G,P){this._blendConstants[0]===w&&this._blendConstants[1]===E&&this._blendConstants[2]===G&&this._blendConstants[3]===P||(this._blendConstants[0]=w,this._blendConstants[1]=E,this._blendConstants[2]=G,this._blendConstants[3]=P,this._isBlendConstantsDirty=!0)}setAlphaBlendFunctionParameters(w,E,G,P){this._blendFunctionParameters[0]===w&&this._blendFunctionParameters[1]===E&&this._blendFunctionParameters[2]===G&&this._blendFunctionParameters[3]===P||(this._blendFunctionParameters[0]=w,this._blendFunctionParameters[1]=E,this._blendFunctionParameters[2]=G,this._blendFunctionParameters[3]=P,this._isBlendFunctionParametersDirty=!0)}setAlphaEquationParameters(w,E){this._blendEquationParameters[0]===w&&this._blendEquationParameters[1]===E||(this._blendEquationParameters[0]=w,this._blendEquationParameters[1]=E,this._isBlendEquationParametersDirty=!0)}reset(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1}apply(w){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?w.enable(w.BLEND):w.disable(w.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(w.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(w.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(w.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))}}var u=G(11536),V=G(11626),a=G(11513),Q=G(11504),c=G(11568),Z=G(11635);function J(w,E){if((0,a.h)()){const{requestAnimationFrame:G}=E||window;if("function"===typeof G)return G(w)}else if("function"===typeof requestAnimationFrame)return requestAnimationFrame(w);return setTimeout(w,16)}class d{get frameId(){return this._frameId}get isWebGPU(){return this._isWebGPU}_getShaderProcessor(w){return this._shaderProcessor}get shaderPlatformName(){return this._shaderPlatformName}_clearEmptyResources(){this._emptyTexture=null,this._emptyCubeTexture=null,this._emptyTexture3D=null,this._emptyTexture2DArray=null}get useReverseDepthBuffer(){return this._useReverseDepthBuffer}set useReverseDepthBuffer(w){w!==this._useReverseDepthBuffer&&(this._useReverseDepthBuffer=w,this._depthCullingState.depthFunc=w?518:515)}setColorWrite(w){w!==this._colorWrite&&(this._colorWriteChanged=!0,this._colorWrite=w)}getColorWrite(){return this._colorWrite}get depthCullingState(){return this._depthCullingState}get alphaState(){return this._alphaState}get stencilState(){return this._stencilState}get stencilStateComposer(){return this._stencilStateComposer}_getGlobalDefines(w){if(w)return this.isNDCHalfZRange?w.IS_NDC_HALF_ZRANGE="":delete w.IS_NDC_HALF_ZRANGE,this.useReverseDepthBuffer?w.USE_REVERSE_DEPTHBUFFER="":delete w.USE_REVERSE_DEPTHBUFFER,void(this.useExactSrgbConversions?w.USE_EXACT_SRGB_CONVERSIONS="":delete w.USE_EXACT_SRGB_CONVERSIONS);{let w="";return this.isNDCHalfZRange&&(w+="#define IS_NDC_HALF_ZRANGE"),this.useReverseDepthBuffer&&(w&&(w+="\n"),w+="#define USE_REVERSE_DEPTHBUFFER"),this.useExactSrgbConversions&&(w&&(w+="\n"),w+="#define USE_EXACT_SRGB_CONVERSIONS"),w}}_rebuildInternalTextures(){const w=this._internalTexturesCache.slice();for(const E of w)E._rebuild()}_rebuildRenderTargetWrappers(){const w=this._renderTargetWrapperCache.slice();for(const E of w)E._rebuild()}_rebuildEffects(){for(const w in this._compiledEffects){const E=this._compiledEffects[w];E._pipelineContext=null,E._prepareEffect()}B.Effect.ResetCache()}_rebuildGraphicsResources(){var w;this.wipeCaches(!0),this._rebuildEffects(),null===(w=this._rebuildComputeEffects)||void 0===w||w.call(this),this._rebuildBuffers(),this._rebuildInternalTextures(),this._rebuildTextures(),this._rebuildRenderTargetWrappers(),this.wipeCaches(!0)}_flagContextRestored(){h.e.Warn(this.name+" context successfully restored."),this.onContextRestoredObservable.notifyObservers(this),this._contextWasLost=!1}_restoreEngineAfterContextLost(w){setTimeout((()=>{this._clearEmptyResources();const E=this._depthCullingState.depthTest,G=this._depthCullingState.depthFunc,P=this._depthCullingState.depthMask,h=this._stencilState.stencilTest;w(),this._rebuildGraphicsResources(),this._depthCullingState.depthTest=E,this._depthCullingState.depthFunc=G,this._depthCullingState.depthMask=P,this._stencilState.stencilTest=h,this._flagContextRestored()}),0)}get O(){return this._isDisposed}get snapshotRendering(){return!1}set snapshotRendering(w){}get snapshotRenderingMode(){return 0}set snapshotRenderingMode(w){}getClassName(){return"AbstractEngine"}get emptyTexture(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,5,!1,!1,1)),this._emptyTexture}get emptyTexture3D(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture3D}get emptyTexture2DArray(){return this._emptyTexture2DArray||(this._emptyTexture2DArray=this.createRawTexture2DArray(new Uint8Array(4),1,1,1,5,!1,!1,1)),this._emptyTexture2DArray}get emptyCubeTexture(){if(!this._emptyCubeTexture){const w=new Uint8Array(4),E=[w,w,w,w,w,w];this._emptyCubeTexture=this.createRawCubeTexture(E,1,5,0,!1,!1,1)}return this._emptyCubeTexture}get activeRenderLoops(){return this._activeRenderLoops}stopRenderLoop(w){if(!w)return this._activeRenderLoops.length=0,void this._cancelFrame();const E=this._activeRenderLoops.indexOf(w);E>=0&&(this._activeRenderLoops.splice(E,1),0==this._activeRenderLoops.length&&this._cancelFrame())}_cancelFrame(){if(0!==this._frameHandler){const w=this._frameHandler;if(this._frameHandler=0,(0,a.h)()){const{cancelAnimationFrame:E}=this.getHostWindow()||window;if("function"===typeof E)return E(w)}else if("function"===typeof cancelAnimationFrame)return cancelAnimationFrame(w);return clearTimeout(w)}}uh(){this.onBeginFrameObservable.notifyObservers(this)}Kh(){this._frameId++,this.onEndFrameObservable.notifyObservers(this)}get maxFPS(){return this._maxFPS}set maxFPS(w){this._maxFPS=w,void 0!==w&&(this._minFrameTime=w<=0?Number.MAX_VALUE:1e3/w)}_isOverFrameTime(w){if(!w||void 0===this._maxFPS)return!1;const E=w-this._lastFrameTime;return this._lastFrameTime=w,this._renderAccumulator+=E,this._renderAccumulator<this._minFrameTime||(this._renderAccumulator-=this._minFrameTime,this._renderAccumulator>this._minFrameTime&&(this._renderAccumulator=this._minFrameTime),!1)}_processFrame(w){if(this._frameHandler=0,!this._contextWasLost&&!this._isOverFrameTime(w)){let w=!0;(this.O||!this.renderEvenInBackground&&this._windowIsBackground)&&(w=!1),w&&(this.uh(),this.skipFrameRender||this._renderViews()||this._renderFrame(),this.Kh())}}_renderLoop(w){this._processFrame(w),this._activeRenderLoops.length>0&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow()))}_renderFrame(){for(let w=0;w<this._activeRenderLoops.length;w++){(0,this._activeRenderLoops[w])()}}_renderViews(){return!1}_queueNewFrame(w,E){return J(w,E)}runRenderLoop(w){-1===this._activeRenderLoops.indexOf(w)&&(this._activeRenderLoops.push(w),1===this._activeRenderLoops.length&&0===this._frameHandler&&(this._frameHandler=this._queueNewFrame(this._boundRenderFunction,this.getHostWindow())))}getDepthBuffer(){return this._depthCullingState.depthTest}setDepthBuffer(w){this._depthCullingState.depthTest=w}setZOffset(w){this._depthCullingState.zOffset=this.useReverseDepthBuffer?-w:w}getZOffset(){const w=this._depthCullingState.zOffset;return this.useReverseDepthBuffer?-w:w}setZOffsetUnits(w){this._depthCullingState.zOffsetUnits=this.useReverseDepthBuffer?-w:w}getZOffsetUnits(){const w=this._depthCullingState.zOffsetUnits;return this.useReverseDepthBuffer?-w:w}getHostWindow(){return(0,a.h)()?this._renderingCanvas&&this._renderingCanvas.ownerDocument&&this._renderingCanvas.ownerDocument.defaultView?this._renderingCanvas.ownerDocument.defaultView:window:null}get compatibilityMode(){return this._compatibilityMode}set compatibilityMode(w){this._compatibilityMode=!0}_rebuildTextures(){for(const w of this.scenes)w._rebuildTextures();for(const w of this._virtualScenes)w._rebuildTextures()}_releaseRenderTargetWrapper(w){const E=this._renderTargetWrapperCache.indexOf(w);-1!==E&&this._renderTargetWrapperCache.splice(E,1)}get currentViewport(){return this._cachedViewport}setViewport(w,E,G){const P=E||this.getRenderWidth(),h=G||this.getRenderHeight(),B=w.x||0,y=w.y||0;this._cachedViewport=w,this._viewport(B*P,y*h,P*w.width,h*w.height)}createCanvasImage(){return document.createElement("img")}createCanvasPath2D(w){return new Path2D(w)}get description(){let w=this.name+this.version;return this._caps.parallelShaderCompile&&(w+=" - Parallel shader compilation"),w}_createTextureBase(w,E,G,B){let y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,a=arguments.length>11&&void 0!==arguments[11]?arguments[11]:null,Q=arguments.length>12&&void 0!==arguments[12]?arguments[12]:null,c=arguments.length>13?arguments[13]:void 0,J=arguments.length>14?arguments[14]:void 0,K=arguments.length>15?arguments[15]:void 0;const t="data:"===(w=w||"").substring(0,5),q="blob:"===w.substring(0,5),W=t&&-1!==w.indexOf(";base64,"),T=u||new V.e(this,1);T!==u&&(T.label=w.substring(0,60));const I=w;!this._transformTextureUrl||W||u||O||(w=this._transformTextureUrl(w)),I!==w&&(T._originalUrl=I);const j=w.lastIndexOf(".");let g=Q||(j>-1?w.substring(j).toLowerCase():"");g.indexOf("?")>-1&&(g=g.split("?")[0]);const o=(0,Z.d)(g,c);B&&B.addPendingData(T),T.url=w,T.generateMipMaps=!E,T.samplingMode=y,T.invertY=G,T._useSRGBBuffer=this._getUseSRGBBuffer(!!K,E),this._doNotHandleContextLost||(T._buffer=O);let f=null;x&&!u&&(f=T.onLoadedObservable.add(x)),u||this._internalTexturesCache.push(T);const k=(G,u)=>{B&&B.removePendingData(T),w===I?(f&&T.onLoadedObservable.remove(f),P.e.UseFallbackTexture&&w!==P.e.FallbackTexture&&this._createTextureBase(P.e.FallbackTexture,E,T.invertY,B,y,null,U,l,i,O,T),G=(G||"Unknown error")+(P.e.UseFallbackTexture?" - Fallback texture was used":""),T.onErrorObservable.notifyObservers({message:G,exception:u}),U&&U(G,u)):(h.e.Warn(`Failed to load ${w}, falling back to ${I}`),this._createTextureBase(I,E,T.invertY,B,y,x,U,l,i,O,T,a,Q,c,J,K))};if(o){const E=async w=>{(await o).loadData(w,T,((w,E,G,P,h,x)=>{x?k("TextureLoader failed to load data"):l(T,g,B,{width:w,height:E},T.invertY,!G,P,(()=>(h(),!1)),y)}),J)};O?O instanceof ArrayBuffer?E(new Uint8Array(O)):ArrayBuffer.isView(O)?E(O):U&&U("Unable to load: only ArrayBuffer or ArrayBufferView is supported",null):this._loadFile(w,(w=>{E(new Uint8Array(w))}),void 0,B?B.offlineProvider:void 0,!0,((w,E)=>{k("Unable to load "+(w&&w.responseURL,E))}))}else{const G=w=>{q&&!this._doNotHandleContextLost&&(T._buffer=w),l(T,g,B,w,T.invertY,E,!1,i,y)};!t||W?O&&("string"===typeof O.decoding||O.close)?G(O):d._FileToolsLoadImage(w||"",G,k,B?B.offlineProvider:null,c,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):"string"===typeof O||O instanceof ArrayBuffer||ArrayBuffer.isView(O)||O instanceof Blob?d._FileToolsLoadImage(O,G,k,B?B.offlineProvider:null,c,T.invertY&&this._features.needsInvertingBitmap?{imageOrientation:"flipY"}:void 0,this):O&&G(O)}return T}_rebuildBuffers(){for(const w of this._uniformBuffers)w._rebuildAfterContextLost()}get _shouldUseHighPrecisionShader(){return!(!this._caps.highPrecisionShaderSupported||!this._highPrecisionShadersAllowed)}getHostDocument(){return this._renderingCanvas&&this._renderingCanvas.ownerDocument?this._renderingCanvas.ownerDocument:(0,a.e)()?document:null}getLoadedTexturesCache(){return this._internalTexturesCache}clearInternalTexturesCache(){this._internalTexturesCache.length=0}getCaps(){return this._caps}resetTextureCache(){for(const w in this._boundTexturesCache)Object.prototype.hasOwnProperty.call(this._boundTexturesCache,w)&&(this._boundTexturesCache[w]=null);this._currentTextureChannel=-1}get name(){return this._name}set name(w){this._name=w}static get NpmPackage(){return"babylonjs@8.13.0"}static get Version(){return"8.13.0"}getRenderingCanvas(){return this._renderingCanvas}getAudioContext(){return this._audioContext}getAudioDestination(){return this._audioDestination}setHardwareScalingLevel(w){this._hardwareScalingLevel=w,this.resize()}getHardwareScalingLevel(){return this._hardwareScalingLevel}get doNotHandleContextLost(){return this._doNotHandleContextLost}set doNotHandleContextLost(w){this._doNotHandleContextLost=w}get isStencilEnable(){return this._isStencilEnable}getCreationOptions(){return this._creationOptions}constructor(w,E,G){var h,B;this._colorWrite=!0,this._colorWriteChanged=!0,this._depthCullingState=new U,this._stencilStateComposer=new l,this._stencilState=new i,this._alphaState=new O,this._alphaMode=1,this._alphaEquation=0,this._activeRequests=[],this._badOS=!1,this._badDesktopOS=!1,this._compatibilityMode=!0,this._internalTexturesCache=new Array,this._currentRenderTarget=null,this._boundTexturesCache={},this._activeChannel=0,this._currentTextureChannel=-1,this._viewportCached={x:0,y:0,z:0,w:0},this._isWebGPU=!1,this.onCanvasBlurObservable=new Q.d,this.onCanvasFocusObservable=new Q.d,this.onNewSceneAddedObservable=new Q.d,this.onResizeObservable=new Q.d,this.onCanvasPointerOutObservable=new Q.d,this.onEffectErrorObservable=new Q.d,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._frameId=0,this.hostInformation={isMobile:!1},this.isFullscreen=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.disableContextMenu=!0,this.currentRenderPassId=0,this.isPointerLock=!1,this.postProcesses=[],this.canvasTabIndex=1,this._contextWasLost=!1,this._useReverseDepthBuffer=!1,this.isNDCHalfZRange=!1,this.hasOriginBottomLeft=!0,this._renderTargetWrapperCache=new Array,this._compiledEffects={},this._isDisposed=!1,this.scenes=[],this._virtualScenes=new Array,this.onBeforeTextureInitObservable=new Q.d,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this._frameHandler=0,this._activeRenderLoops=new Array,this._windowIsBackground=!1,this._boundRenderFunction=w=>this._renderLoop(w),this._lastFrameTime=0,this._renderAccumulator=0,this.skipFrameRender=!1,this.onBeforeShaderCompilationObservable=new Q.d,this.onAfterShaderCompilationObservable=new Q.d,this.onBeginFrameObservable=new Q.d,this.onEndFrameObservable=new Q.d,this._transformTextureUrl=null,this._uniformBuffers=new Array,this._storageBuffers=new Array,this._highPrecisionShadersAllowed=!0,this.onContextLostObservable=new Q.d,this.onContextRestoredObservable=new Q.d,this._name="",this.premultipliedAlpha=!0,this.adaptToDeviceRatio=!1,this._lastDevicePixelRatio=1,this._doNotHandleContextLost=!1,this.cullBackFaces=null,this._renderPassNames=["main"],this._fps=60,this._deltaTime=0,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this._timeStep=1/60,this.qh=new Q.d,this.onReleaseEffectsObservable=new Q.d,P.e.Instances.push(this),this.startTime=x.c.Now,this._stencilStateComposer.stencilGlobal=this._stencilState,y.c.SetMatrixPrecision(!!E.useHighPrecisionMatrix),(0,a.g)()&&navigator.userAgent&&(this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),this.adaptToDeviceRatio=G??!1,E.antialias=w??E.antialias,E.deterministicLockstep=E.deterministicLockstep??!1,E.lockstepMaxSteps=E.lockstepMaxSteps??4,E.timeStep=E.timeStep??1/60,E.stencil=E.stencil??!0,this._audioContext=(null===(h=E.audioEngineOptions)||void 0===h?void 0:h.audioContext)??null,this._audioDestination=(null===(B=E.audioEngineOptions)||void 0===B?void 0:B.audioDestination)??null,this.premultipliedAlpha=E.premultipliedAlpha??!0,this._doNotHandleContextLost=!!E.doNotHandleContextLost,this._isStencilEnable=!!E.stencil,this.useExactSrgbConversions=E.useExactSrgbConversions??!1;const u=(0,a.h)()&&window.devicePixelRatio||1,V=E.limitDeviceRatio||u;G=G||E.adaptToDeviceRatio||!1,this._hardwareScalingLevel=G?1/Math.min(V,u):1,this._lastDevicePixelRatio=u,this._creationOptions=E}resize(){let w,E,G=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.adaptToDeviceRatio){const w=(0,a.h)()&&window.devicePixelRatio||1,E=this._lastDevicePixelRatio/w;this._lastDevicePixelRatio=w,this._hardwareScalingLevel*=E}if((0,a.h)()&&(0,a.e)())if(this._renderingCanvas){var P,h;const G=null===(P=(h=this._renderingCanvas).getBoundingClientRect)||void 0===P?void 0:P.call(h);w=this._renderingCanvas.clientWidth||(null===G||void 0===G?void 0:G.width)||this._renderingCanvas.width*this._hardwareScalingLevel||100,E=this._renderingCanvas.clientHeight||(null===G||void 0===G?void 0:G.height)||this._renderingCanvas.height*this._hardwareScalingLevel||100}else w=window.innerWidth,E=window.innerHeight;else w=this._renderingCanvas?this._renderingCanvas.width:100,E=this._renderingCanvas?this._renderingCanvas.height:100;this.setSize(w/this._hardwareScalingLevel,E/this._hardwareScalingLevel,G)}setSize(w,E){let G=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this._renderingCanvas)return!1;if(w|=0,E|=0,!G&&this._renderingCanvas.width===w&&this._renderingCanvas.height===E)return!1;if(this._renderingCanvas.width=w,this._renderingCanvas.height=E,this.scenes){for(let w=0;w<this.scenes.length;w++){const E=this.scenes[w];for(let w=0;w<E.cameras.length;w++){E.cameras[w]._currentRenderId=0}}this.onResizeObservable.hasObservers()&&this.onResizeObservable.notifyObservers(this)}return!0}createRawTexture(w,E,G,P,h,B,y,x,U,l,i){throw(0,u.d)("engine.rawTexture")}createRawCubeTexture(w,E,G,P,h,B,y,x){throw(0,u.d)("engine.rawTexture")}createRawTexture3D(w,E,G,P,h,B,y,x,U,l,i){throw(0,u.d)("engine.rawTexture")}createRawTexture2DArray(w,E,G,P,h,B,y,x,U,l,i){throw(0,u.d)("engine.rawTexture")}_sharedInit(w){this._renderingCanvas=w}_setupMobileChecks(){navigator&&navigator.userAgent&&(this._checkForMobile=()=>{const w=navigator.userAgent;this.hostInformation.isMobile=-1!==w.indexOf("Mobile")||-1!==w.indexOf("Mac")&&(0,a.e)()&&"ontouchend"in document},this._checkForMobile(),(0,a.h)()&&window.addEventListener("resize",this._checkForMobile))}createVideoElement(w){return document.createElement("video")}_reportDrawCall(){var w;let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null===(w=this._drawCalls)||void 0===w||w.addCount(E,!1)}getFps(){return this._fps}getDeltaTime(){return this._deltaTime}isDeterministicLockStep(){return this._deterministicLockstep}getLockstepMaxSteps(){return this._lockstepMaxSteps}getTimeStep(){return 1e3*this._timeStep}_createImageBitmapFromSource(w,E){throw new Error("createImageBitmapFromSource is not implemented")}createImageBitmap(w,E){return createImageBitmap(w,E)}resizeImageBitmap(w,E,G){throw new Error("resizeImageBitmap is not implemented")}getFontOffset(w){throw new Error("getFontOffset is not implemented")}static _CreateCanvas(w,E){if("undefined"===typeof document)return new OffscreenCanvas(w,E);const G=document.createElement("canvas");return G.width=w,G.height=E,G}createCanvas(w,E){return d._CreateCanvas(w,E)}static _FileToolsLoadImage(w,E,G,P,h,B,y){throw(0,u.d)("FileTools")}_loadFile(w,E,G,P,h,B){const y=(0,c.i)(w,E,G,P,h,B);return this._activeRequests.push(y),y.onCompleteObservable.add((()=>{const w=this._activeRequests.indexOf(y);-1!==w&&this._activeRequests.splice(w,1)})),y}static _FileToolsLoadFile(w,E,G,P,h,B){if(c.d.loadFile)return c.d.loadFile(w,E,G,P,h,B);throw(0,u.d)("FileTools")}dispose(){var w;for(this.releaseEffects(),this._isDisposed=!0,this.stopRenderLoop(),this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._renderingCanvas=null,this.onBeforeTextureInitObservable&&this.onBeforeTextureInitObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.scenes.length;)this.scenes[0].dispose();for(;this._virtualScenes.length;)this._virtualScenes[0].dispose();null===(w=this.releaseComputeEffects)||void 0===w||w.call(this),B.Effect.ResetCache();for(const G of this._activeRequests)G.abort();this._boundRenderFunction=null,this.qh.notifyObservers(this),this.qh.clear(),this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onNewSceneAddedObservable.clear(),this.onEffectErrorObservable.clear(),(0,a.h)()&&window.removeEventListener("resize",this._checkForMobile);const E=P.e.Instances.indexOf(this);E>=0&&P.e.Instances.splice(E,1),P.e.Instances.length||(P.e.OnEnginesDisposedObservable.notifyObservers(this),P.e.OnEnginesDisposedObservable.clear()),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear()}static DefaultLoadingScreenFactory(w){throw(0,u.d)("LoadingScreen")}static MarkAllMaterialsAsDirty(w,E){for(let G=0;G<P.e.Instances.length;G++){const h=P.e.Instances[G];for(let G=0;G<h.scenes.length;G++)h.scenes[G].markAllMaterialsAsDirty(w,E)}}}d._RenderPassIdCounter=0,d._RescalePostProcessFactory=null,d.CollisionsEpsilon=.001,d.QueueNewFrame=J},11543:(w,E,G)=>{G.d(E,{e:()=>h});var P=G(11504);class h{static get LastCreatedEngine(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]}static get LastCreatedScene(){return this._LastCreatedScene}}h.Instances=[],h.OnEnginesDisposedObservable=new P.d,h._LastCreatedScene=null,h.UseFallbackTexture=!0,h.FallbackTexture=""},11618:(w,E,G)=>{G.d(E,{c:()=>P});class P{static SetMatrixPrecision(w){if(P.MatrixTrackPrecisionChange=!1,w&&!P.MatrixUse64Bits&&P.MatrixTrackedMatrices)for(let E=0;E<P.MatrixTrackedMatrices.length;++E){const w=P.MatrixTrackedMatrices[E],G=w.Wh;w.Wh=new Array(16);for(let E=0;E<16;++E)w.Wh[E]=G[E]}P.MatrixUse64Bits=w,P.MatrixCurrentType=P.MatrixUse64Bits?Array:Float32Array,P.MatrixTrackedMatrices=null}}P.MatrixUse64Bits=!1,P.MatrixTrackPrecisionChange=!0,P.MatrixCurrentType=Float32Array,P.MatrixTrackedMatrices=[]},11635:(w,E,G)=>{G.d(E,{d:()=>y});var P=G(11518);const h=new Map;function B(w,E){(function(w){return h.delete(w)})(w)&&P.e.Warn(`Extension with the name '${w}' already exists`),h.set(w,E)}function y(w,E){"image/ktx"!==E&&"image/ktx2"!==E||(w=".ktx"),h.has(w)||(w.endsWith(".ies")&&B(".ies",(async()=>await G.e(15).then(G.bind(G,13995)).then((w=>new w._IESTextureLoader)))),w.endsWith(".dds")&&B(".dds",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(19),G.e(18),G.e(28)]).then(G.bind(G,13997)).then((w=>new w._DDSTextureLoader)))),w.endsWith(".basis")&&B(".basis",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(47)]).then(G.bind(G,14011)).then((w=>new w._BasisTextureLoader)))),w.endsWith(".env")&&B(".env",(async()=>await Promise.all([G.e(14),G.e(17),G.e(13),G.e(19),G.e(18),G.e(23),G.e(21),G.e(45),G.e(48)]).then(G.bind(G,14020)).then((w=>new w._ENVTextureLoader)))),w.endsWith(".hdr")&&B(".hdr",(async()=>await Promise.all([G.e(14),G.e(49)]).then(G.bind(G,14025)).then((w=>new w._HDRTextureLoader)))),(w.endsWith(".ktx")||w.endsWith(".ktx2"))&&(B(".ktx",(async()=>await G.e(30).then(G.bind(G,14029)).then((w=>new w._KTXTextureLoader)))),B(".ktx2",(async()=>await G.e(30).then(G.bind(G,14029)).then((w=>new w._KTXTextureLoader))))),w.endsWith(".tga")&&B(".tga",(async()=>await G.e(50).then(G.bind(G,14035)).then((w=>new w._TGATextureLoader)))),w.endsWith(".exr")&&B(".exr",(async()=>await G.e(16).then(G.bind(G,14037)).then((w=>new w._ExrTextureLoader)))));const P=h.get(w);return P?Promise.resolve(P(E)):null}},11626:(w,E,G)=>{G.d(E,{e:()=>y});var P,h=G(11504),B=G(11630);!function(w){w[w.Unknown=0]="Unknown",w[w.Url=1]="Url",w[w.Temp=2]="Temp",w[w.Raw=3]="Raw",w[w.Dynamic=4]="Dynamic",w[w.RenderTarget=5]="RenderTarget",w[w.MultiRenderTarget=6]="MultiRenderTarget",w[w.Cube=7]="Cube",w[w.CubeRaw=8]="CubeRaw",w[w.CubePrefiltered=9]="CubePrefiltered",w[w.Raw3D=10]="Raw3D",w[w.Raw2DArray=11]="Raw2DArray",w[w.DepthStencil=12]="DepthStencil",w[w.CubeRawRGBD=13]="CubeRawRGBD",w[w.Depth=14]="Depth"}(P||(P={}));class y extends B.c{get useMipMaps(){return this.generateMipMaps}set useMipMaps(w){this.generateMipMaps=w}get uniqueId(){return this._uniqueId}_setUniqueId(w){this._uniqueId=w}getEngine(){return this._engine}get source(){return this._source}constructor(w,E){let G=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.is2DArray=!1,this.isMultiview=!1,this.url="",this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new h.d,this.onErrorObservable=new h.d,this.onRebuildCallback=null,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._source=0,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._cachedCoordinatesMode=null,this._isDisabled=!1,this._compression=null,this._sphericalPolynomial=null,this._sphericalPolynomialPromise=null,this._sphericalPolynomialComputed=!1,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._useSRGBBuffer=!1,this._creationFlags=0,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._linearSpecularLOD=!1,this._irradianceTexture=null,this._hardwareTexture=null,this._maxLodLevel=null,this._references=1,this._gammaSpace=null,this._premulAlpha=!1,this._dynamicTextureSource=null,this._autoMSAAManagement=!1,this._engine=w,this._source=E,this._uniqueId=y._Counter++,G||(this._hardwareTexture=w._createHardwareTexture())}incrementReferences(){this._references++}updateSize(w,E){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._engine.updateTextureDimensions(this,w,E,G),this.width=w,this.height=E,this.depth=G,this.baseWidth=w,this.baseHeight=E,this.baseDepth=G,this._size=w*E*G}_rebuild(){if(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this.onRebuildCallback){const w=this.onRebuildCallback(this),E=E=>{E._swapAndDie(this,!1),this.isReady=w.isReady};return void(w.isAsync?w.proxy.then(E):E(w.proxy))}let w;switch(this.source){case 2:case 12:case 14:break;case 1:return void(w=this._engine.createTexture(this._originalUrl??this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,(w=>{w._swapAndDie(this,!1),this.isReady=!0}),null,this._buffer,void 0,this.format,this._extension,void 0,void 0,void 0,this._useSRGBBuffer));case 3:w=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type,this._creationFlags,this._useSRGBBuffer),w._swapAndDie(this,!1),this.isReady=!0;break;case 10:w=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),w._swapAndDie(this,!1),this.isReady=!0;break;case 11:w=this._engine.createRawTexture2DArray(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression,this.type),w._swapAndDie(this,!1),this.isReady=!0;break;case 4:w=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode),w._swapAndDie(this,!1),this._dynamicTextureSource&&this._engine.updateDynamicTexture(this,this._dynamicTextureSource,this.invertY,this._premulAlpha,this.format,!0);break;case 7:return void(w=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,(()=>{w._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension,!1,0,0,null,void 0,this._useSRGBBuffer,ArrayBuffer.isView(this._buffer)?this._buffer:null));case 8:w=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this._originalFormat??this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),w._swapAndDie(this,!1),this.isReady=!0;break;case 13:return;case 9:return w=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,(w=>{w&&w._swapAndDie(this,!1),this.isReady=!0}),null,this.format,this._extension),void(w._sphericalPolynomial=this._sphericalPolynomial)}}_swapAndDie(w){var E;let G=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null===(E=this._hardwareTexture)||void 0===E||E.setUsage(w._source,this.generateMipMaps,this.is2DArray,this.isCube,this.is3D,this.width,this.height,this.depth),w._hardwareTexture=this._hardwareTexture,G&&(w._isRGBD=this._isRGBD),this._lodTextureHigh&&(w._lodTextureHigh&&w._lodTextureHigh.dispose(),w._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(w._lodTextureMid&&w._lodTextureMid.dispose(),w._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(w._lodTextureLow&&w._lodTextureLow.dispose(),w._lodTextureLow=this._lodTextureLow),this._irradianceTexture&&(w._irradianceTexture&&w._irradianceTexture.dispose(),w._irradianceTexture=this._irradianceTexture);const P=this._engine.getLoadedTexturesCache();let h=P.indexOf(this);-1!==h&&P.splice(h,1),h=P.indexOf(w),-1===h&&P.push(w)}dispose(){this._references--,0===this._references&&(this.onLoadedObservable.clear(),this.onErrorObservable.clear(),this._engine._releaseTexture(this),this._hardwareTexture=null,this._dynamicTextureSource=null)}}y._Counter=0},11630:(w,E,G)=>{G.d(E,{c:()=>P});class P{get wrapU(){return this._cachedWrapU}set wrapU(w){this._cachedWrapU=w}get wrapV(){return this._cachedWrapV}set wrapV(w){this._cachedWrapV=w}get wrapR(){return this._cachedWrapR}set wrapR(w){this._cachedWrapR=w}get anisotropicFilteringLevel(){return this._cachedAnisotropicFilteringLevel}set anisotropicFilteringLevel(w){this._cachedAnisotropicFilteringLevel=w}get comparisonFunction(){return this._comparisonFunction}set comparisonFunction(w){this._comparisonFunction=w}get useMipMaps(){return this._useMipMaps}set useMipMaps(w){this._useMipMaps=w}constructor(){this.samplingMode=-1,this._useMipMaps=!0,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._comparisonFunction=0}setParameters(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return this._cachedWrapU=w,this._cachedWrapV=E,this._cachedWrapR=G,this._cachedAnisotropicFilteringLevel=P,this.samplingMode=h,this._comparisonFunction=B,this}compareSampler(w){return this._cachedWrapU===w._cachedWrapU&&this._cachedWrapV===w._cachedWrapV&&this._cachedWrapR===w._cachedWrapR&&this._cachedAnisotropicFilteringLevel===w._cachedAnisotropicFilteringLevel&&this.samplingMode===w.samplingMode&&this._comparisonFunction===w._comparisonFunction&&this._useMipMaps===w._useMipMaps}}},11526:(w,E,G)=>{G.d(E,{d:()=>B});var P=G(11518);const h=(w,E,G)=>w?w.getClassName&&"Mesh"===w.getClassName()?null:!w.getClassName||"SubMesh"!==w.getClassName()&&"PhysicsBody"!==w.getClassName()?w.clone?w.clone():Array.isArray(w)?w.slice():G&&"object"===typeof w?{...w}:null:w.clone(E):null;class B{static DeepCopy(w,E,G,B){let y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const x=function(w){const E=[];do{const G=Object.getOwnPropertyNames(w);for(const w of G)-1===E.indexOf(w)&&E.push(w)}while(w=Object.getPrototypeOf(w));return E}(w);for(const l of x){if("_"===l[0]&&(!B||-1===B.indexOf(l)))continue;if(l.endsWith("Observable"))continue;if(G&&-1!==G.indexOf(l))continue;const x=w[l],i=typeof x;if("function"!==i)try{if("object"===i)if(x instanceof Uint8Array)E[l]=Uint8Array.from(x);else if(x instanceof Array){if(E[l]=[],x.length>0)if("object"==typeof x[0])for(let w=0;w<x.length;w++){const G=h(x[w],E,y);-1===E[l].indexOf(G)&&E[l].push(G)}else E[l]=x.slice(0)}else E[l]=h(x,E,y);else E[l]=x}catch(U){P.e.Warn(U.message)}}}}},11555:(w,E,G)=>{G.d(E,{b:()=>P,e:()=>h,i:()=>B});class P extends Error{}P._setPrototypeOf=Object.setPrototypeOf||((w,E)=>(w.__proto__=E,w));const h={MeshInvalidPositionsError:0,UnsupportedTextureError:1e3,GLTFLoaderUnexpectedMagicError:2e3,SceneLoaderError:3e3,LoadFileError:4e3,RequestFileError:4001,ReadFileError:4002};class B extends P{constructor(w,E,G){super(w),this.errorCode=E,this.innerError=G,this.name="RuntimeError",P._setPrototypeOf(this,B.prototype)}}},11547:(w,E,G)=>{G.d(E,{b:()=>k,f:()=>d,j:()=>j,l:()=>o,o:()=>T,m:()=>c,p:()=>q,t:()=>W,u:()=>I,w:()=>K});var P=G(11540),h=G(11513),B=G(11504);class y{}y.FilesToLoad={};var x=G(11555),U=G(11558),l=G(11564),i=G(11543),O=G(11518),u=G(11576),V=G(11568),a=G(11578);const Q=new RegExp(/^data:([^,]+\/[^,]+)?;base64,/i);class c extends x.i{constructor(w,E){super(w,x.e.LoadFileError),this.name="LoadFileError",x.b._setPrototypeOf(this,c.prototype),E instanceof P.c?this.request=E:this.file=E}}class Z extends x.i{constructor(w,E){super(w,x.e.RequestFileError),this.request=E,this.name="RequestFileError",x.b._setPrototypeOf(this,Z.prototype)}}class J extends x.i{constructor(w,E){super(w,x.e.ReadFileError),this.file=E,this.name="ReadFileError",x.b._setPrototypeOf(this,J.prototype)}}const d={DefaultRetryStrategy:class{static ExponentialBackoff(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return(G,P,h)=>0!==P.status||h>=w||-1!==G.indexOf("file:")?-1:Math.pow(2,h)*E}}.ExponentialBackoff(),BaseUrl:"",CorsBehavior:"anonymous",PreprocessUrl:w=>w,ScriptBaseUrl:"",ScriptPreprocessUrl:w=>w,CleanUrl:w=>w=w.replace(/#/gm,"%23")},K=(w,E)=>{if((!w||0!==w.indexOf("data:"))&&d.CorsBehavior)if("string"===typeof d.CorsBehavior||d.CorsBehavior instanceof String)E.crossOrigin=d.CorsBehavior;else{const G=d.CorsBehavior(w);G&&(E.crossOrigin=G)}},t={getRequiredSize:null},q=function(w,E,G,h){let B,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5?arguments[5]:void 0,O=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.e.LastCreatedEngine;if("undefined"===typeof HTMLImageElement&&(null===O||void 0===O||!O._features.forceBitmapOverHTMLImageElement))return G("LoadImage is only supported in web or BabylonNative environments."),null;let u=!1;w instanceof ArrayBuffer||ArrayBuffer.isView(w)?"undefined"!==typeof Blob&&"undefined"!==typeof URL?(B=URL.createObjectURL(new Blob([w],{type:x})),u=!0):B=`data:${x};base64,`+(0,U.h)(w):w instanceof Blob?(B=URL.createObjectURL(w),u=!0):(B=d.CleanUrl(w),B=d.PreprocessUrl(B));const V=E=>{if(G){const P=B||w.toString();G(`Error while trying to load image: ${0===P.indexOf("http")||P.length<=128?P:P.slice(0,128)+"..."}`,E)}};if(null!==O&&void 0!==O&&O._features.forceBitmapOverHTMLImageElement)return T(B,(P=>{O.createImageBitmap(new Blob([P],{type:x}),{premultiplyAlpha:"none",...l}).then((w=>{E(w),u&&URL.revokeObjectURL(B)})).catch((E=>{G&&G("Error while trying to load image: "+w,E)}))}),void 0,h||void 0,!0,((w,E)=>{V(E)})),null;const a=new Image;if(t.getRequiredSize){const E=t.getRequiredSize(w);E.width&&(a.width=E.width),E.height&&(a.height=E.height)}K(B,a);const Q=[],c=()=>{for(const w of Q)w.target.removeEventListener(w.name,w.handler);Q.length=0};Q.push({target:a,name:"load",handler:()=>{c(),E(a),u&&a.src&&URL.revokeObjectURL(a.src)}}),Q.push({target:a,name:"error",handler:w=>{c(),V(w),u&&a.src&&URL.revokeObjectURL(a.src)}}),Q.push({target:document,name:"securitypolicyviolation",handler:w=>{if(w.blockedURI!==a.src||"oh"===w.disposition)return;c();const E=new Error(`CSP violation of policy ${w.effectiveDirective} ${w.blockedURI}. Current policy is ${w.originalPolicy}`);i.e.UseFallbackTexture=!1,V(E),u&&a.src&&URL.revokeObjectURL(a.src),a.src=""}}),(()=>{for(const w of Q)w.target.addEventListener(w.name,w.handler)})();const Z="blob:"===B.substring(0,5),J="data:"===B.substring(0,5),q=()=>{Z||J||!P.c.IsCustomRequestAvailable?a.src=B:T(B,((w,E,G)=>{const P=new Blob([w],{type:!x&&G?G:x}),h=URL.createObjectURL(P);u=!0,a.src=h}),void 0,h||void 0,!0,((w,E)=>{V(E)}))},W=()=>{h&&h.loadImage(B,a)};if(!Z&&!J&&h&&h.enableTexturesOffline)h.open(W,q);else{if(-1!==B.indexOf("file:")){const w=decodeURIComponent(B.substring(5).toLowerCase());if(y.FilesToLoad[w]&&"undefined"!==typeof URL){try{let E;try{E=URL.createObjectURL(y.FilesToLoad[w])}catch(I){E=URL.createObjectURL(y.FilesToLoad[w])}a.src=E,u=!0}catch(j){a.src=""}return a}}q()}return a},W=(w,E,G,P,h)=>{const y=new FileReader,x={onCompleteObservable:new B.d,abort:()=>y.abort()};return y.onloadend=()=>x.onCompleteObservable.notifyObservers(x),h&&(y.onerror=()=>{h(new J(`Unable to read ${w.name}`,w))}),y.onload=w=>{E(w.target.result)},G&&(y.onprogress=G),P?y.readAsArrayBuffer(w):y.readAsText(w),x},T=(w,E,G,P,h,U,l)=>{if(w.name)return W(w,E,G,h,U?w=>{U(void 0,w)}:void 0);const i=w;if(-1!==i.indexOf("file:")){let w=decodeURIComponent(i.substring(5).toLowerCase());0===w.indexOf("./")&&(w=w.substring(2));const P=y.FilesToLoad[w];if(P)return W(P,E,G,h,U?w=>U(void 0,new c(w.message,w.file)):void 0)}const{match:V,type:a}=f(i);if(V){const w={onCompleteObservable:new B.d,abort:()=>()=>{}};try{const w=h?k(i):N(i);E(w,void 0,a)}catch(x){U?U(void 0,x):O.e.Error(x.message||"Failed to parse the Data URL")}return u.e.SetImmediate((()=>{w.onCompleteObservable.notifyObservers(w)})),w}return I(i,((w,G)=>{E(w,null===G||void 0===G?void 0:G.responseURL,null===G||void 0===G?void 0:G.getResponseHeader("content-type"))}),G,P,h,U?w=>{U(w.request,new c(w.message,w.request))}:void 0,l)},I=(w,E,G,y,x,U,l)=>{w=d.CleanUrl(w),w=d.PreprocessUrl(w);const i=d.BaseUrl+w;let u=!1;const V={onCompleteObservable:new B.d,abort:()=>u=!0},a=()=>{let w,B=new P.c,y=null;const a=()=>{B&&(G&&B.removeEventListener("progress",G),w&&B.removeEventListener("readystatechange",w),B.removeEventListener("loadend",Q))};let Q=()=>{a(),V.onCompleteObservable.notifyObservers(V),V.onCompleteObservable.clear(),G=void 0,w=null,Q=null,U=void 0,l=void 0,E=void 0};V.abort=()=>{u=!0,Q&&Q(),B&&B.readyState!==(XMLHttpRequest.DONE||4)&&B.abort(),null!==y&&(clearTimeout(y),y=null),B=null};const c=w=>{const E=w.message||"Unknown error";U&&B?U(new Z(E,B)):O.e.Error(E)},J=O=>{if(B){if(B.open("GET",i),l)try{l(B)}catch(V){return void c(V)}x&&(B.responseType="arraybuffer"),G&&B.addEventListener("progress",G),Q&&B.addEventListener("loadend",Q),w=()=>{if(!u&&B&&B.readyState===(XMLHttpRequest.DONE||4)){if(w&&B.removeEventListener("readystatechange",w),B.status>=200&&B.status<300||0===B.status&&(!(0,h.h)()||g())){const w=x?B.response:B.responseText;if(null!==w){try{E&&E(w,B)}catch(V){c(V)}return}}const G=d.DefaultRetryStrategy;if(G){const w=G(i,B,O);if(-1!==w)return a(),B=new P.c,void(y=setTimeout((()=>J(O+1)),w))}const l=new Z("Error status: "+B.status+" "+B.statusText+" - Unable to load "+i,B);U&&U(l)}},B.addEventListener("readystatechange",w),B.send()}};J(0)};if(y&&y.enableSceneOffline){const P=w=>{w&&w.status>400?U&&U(w):a()},h=()=>{y&&y.loadFile(d.BaseUrl+w,(w=>{!u&&E&&E(w),V.onCompleteObservable.notifyObservers(V)}),G?w=>{!u&&G&&G(w)}:void 0,P,x)};y.open(h,P)}else a();return V},j=w=>{const{match:E,type:G}=f(w);if(E)return G||void 0;const P=w.lastIndexOf(".");switch(w.substring(P+1).toLowerCase()){case"glb":return"model/gltf-binary";case"bin":return"application/octet-stream";case"fh":return"model/gltf+json";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"webp":return"image/webp";default:return}},g=()=>"undefined"!==typeof location&&"file:"===location.protocol,o=w=>Q.test(w),f=w=>{const E=Q.exec(w);if(null===E||0===E.length)return{match:!1,type:""};return{match:!0,type:E[0].replace("data:","").replace("base64,","")}};function k(w){return(0,U.b)(w.split(",")[1])}const N=w=>(0,U.c)(w.split(",")[1]);let v;a.b._FileToolsLoadImage=q,V.d.loadFile=T,l.i.loadFile=T;((w,E,G,P,h,B,y,x,U,l)=>{v={DecodeBase64UrlToBinary:w,DecodeBase64UrlToString:E,DefaultRetryStrategy:G.DefaultRetryStrategy,BaseUrl:G.BaseUrl,CorsBehavior:G.CorsBehavior,PreprocessUrl:G.PreprocessUrl,IsBase64DataUrl:P,IsFileURL:h,LoadFile:B,LoadImage:y,ReadFile:x,RequestFile:U,SetCorsBehavior:l},Object.defineProperty(v,"DefaultRetryStrategy",{get:function(){return G.DefaultRetryStrategy},set:function(w){G.DefaultRetryStrategy=w}}),Object.defineProperty(v,"BaseUrl",{get:function(){return G.BaseUrl},set:function(w){G.BaseUrl=w}}),Object.defineProperty(v,"PreprocessUrl",{get:function(){return G.PreprocessUrl},set:function(w){G.PreprocessUrl=w}}),Object.defineProperty(v,"CorsBehavior",{get:function(){return G.CorsBehavior},set:function(w){G.CorsBehavior=w}})})(k,N,d,o,g,T,q,W,I,K)},11650:(w,E,G)=>{function P(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(w=>{const E=16*Math.random()|0;return("x"===w?E:3&E|8).toString(16)}))}G.d(E,{e:()=>P})},11638:(w,E,G)=>{G.d(E,{e:()=>B});var P=G(11518),h=G(11646);class B{static Instantiate(w){if(this.RegisteredExternalClasses&&this.RegisteredExternalClasses[w])return this.RegisteredExternalClasses[w];const E=(0,h.e)(w);if(E)return E;P.e.Warn(w+" not found, you may have missed an import.");const G=w.split(".");let B=window||this;for(let P=0,h=G.length;P<h;P++)B=B[G[P]];return"function"!==typeof B?null:B}}B.RegisteredExternalClasses={}},11528:(w,E,G)=>{G.d(E,{c:()=>h});var P=G(11513);class h{static get Now(){return(0,P.h)()&&window.performance&&window.performance.now?window.performance.now():Date.now()}}},11558:(w,E,G)=>{G.d(E,{b:()=>y,c:()=>B,d:()=>P,h:()=>h});const P=w=>{if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(w);let E="";for(let G=0;G<w.byteLength;G++)E+=String.fromCharCode(w[G]);return E},h=w=>{const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let G,P,h,B,y,x,U,l="",i=0;const O=ArrayBuffer.isView(w)?new Uint8Array(w.buffer,w.byteOffset,w.byteLength):new Uint8Array(w);for(;i<O.length;)G=O[i++],P=i<O.length?O[i++]:Number.NaN,h=i<O.length?O[i++]:Number.NaN,B=G>>2,y=(3&G)<<4|P>>4,x=(15&P)<<2|h>>6,U=63&h,isNaN(P)?x=U=64:isNaN(h)&&(U=64),l+=E.charAt(B)+E.charAt(y)+E.charAt(x)+E.charAt(U);return l},B=w=>atob(w),y=w=>{const E=B(w),G=E.length,P=new Uint8Array(new ArrayBuffer(G));for(let h=0;h<G;h++)P[h]=E.charCodeAt(h);return P.buffer}},11652:(w,E,G)=>{function P(w){let E=1;do{E*=2}while(E<w);return E===w}function h(w,E,G){return w*(1-G)+E*G}function B(w){const E=y(w),G=x(w);return E-w>w-G?G:E}function y(w){return w--,w|=w>>1,w|=w>>2,w|=w>>4,w|=w>>8,w|=w>>16,++w}function x(w){return w|=w>>1,w|=w>>2,w|=w>>4,w|=w>>8,(w|=w>>16)-(w>>1)}function U(w,E){let G;switch(arguments.length>2&&void 0!==arguments[2]?arguments[2]:2){case 1:G=x(w);break;case 2:G=B(w);break;default:G=y(w)}return Math.min(G,E)}G.d(E,{c:()=>x,e:()=>U,h:()=>P,l:()=>h,n:()=>B})},11498:(w,E,G)=>{G.r(E),G.d(E,{AsyncLoop:()=>J,Tools:()=>c,className:()=>Z});var P=G(11504),h=G(11513),B=G(11518),y=G(11526),x=G(11528),U=G(11536),l=G(11540),i=G(11543),O=G(11547),u=G(11576),V=G(11638),a=G(11650),Q=G(11652);class c{static get BaseUrl(){return O.f.BaseUrl}static set BaseUrl(w){O.f.BaseUrl=w}static get CleanUrl(){return O.f.CleanUrl}static set CleanUrl(w){O.f.CleanUrl=w}static IsAbsoluteUrl(w){return 0===w.indexOf("//")||-1!==w.indexOf("://")&&(-1!==w.indexOf(".")&&(-1!==w.indexOf("/")&&(!(w.indexOf(":")>w.indexOf("/"))&&(w.indexOf("://")<w.indexOf(".")||(0===w.indexOf("data:")||0===w.indexOf("blob:"))))))}static set ScriptBaseUrl(w){O.f.ScriptBaseUrl=w}static get ScriptBaseUrl(){return O.f.ScriptBaseUrl}static set CDNBaseUrl(w){c.ScriptBaseUrl=w,c.AssetBaseUrl=w}static set ScriptPreprocessUrl(w){O.f.ScriptPreprocessUrl=w}static get ScriptPreprocessUrl(){return O.f.ScriptPreprocessUrl}static get DefaultRetryStrategy(){return O.f.DefaultRetryStrategy}static set DefaultRetryStrategy(w){O.f.DefaultRetryStrategy=w}static get CorsBehavior(){return O.f.CorsBehavior}static set CorsBehavior(w){O.f.CorsBehavior=w}static get UseFallbackTexture(){return i.e.UseFallbackTexture}static set UseFallbackTexture(w){i.e.UseFallbackTexture=w}static get RegisteredExternalClasses(){return V.e.RegisteredExternalClasses}static set RegisteredExternalClasses(w){V.e.RegisteredExternalClasses=w}static get fallbackTexture(){return i.e.FallbackTexture}static set fallbackTexture(w){i.e.FallbackTexture=w}static FetchToRef(w,E,G,P,h,B){const y=4*((Math.abs(w)*G%G|0)+(Math.abs(E)*P%P|0)*G);B.r=h[y]/255,B.g=h[y+1]/255,B.b=h[y+2]/255,B.a=h[y+3]/255}static Mix(w,E,G){return 0}static Instantiate(w){return V.e.Instantiate(w)}static SetImmediate(w){u.e.SetImmediate(w)}static IsExponentOfTwo(w){return!0}static FloatRound(w){return Math.fround(w)}static GetFilename(w){const E=w.lastIndexOf("/");return E<0?w:w.substring(E+1)}static GetFolderPath(w){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const G=w.lastIndexOf("/");return G<0?E?w:"":w.substring(0,G+1)}static ToDegrees(w){return 180*w/Math.PI}static ToRadians(w){return w*Math.PI/180}static SmoothAngleChange(w,E){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;const P=this.ToRadians(w),h=this.ToRadians(E);return this.ToDegrees(Math.atan2((1-G)*Math.sin(h)+G*Math.sin(P),(1-G)*Math.cos(h)+G*Math.cos(P)))}static MakeArray(w,E){return!0===E||void 0!==w&&null!=w?Array.isArray(w)?w:[w]:null}static GetPointerPrefix(w){return(0,h.h)()&&!window.PointerEvent?"mouse":"pointer"}static SetCorsBehavior(w,E){(0,O.w)(w,E)}static SetReferrerPolicyBehavior(w,E){E.referrerPolicy=w}static get PreprocessUrl(){return O.f.PreprocessUrl}static set PreprocessUrl(w){O.f.PreprocessUrl=w}static LoadImage(w,E,G,P,h,B){return(0,O.p)(w,E,G,P,h,B)}static LoadFile(w,E,G,P,h,B){return(0,O.o)(w,E,G,P,h,B)}static async LoadFileAsync(w){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return await new Promise(((G,P)=>{(0,O.o)(w,(w=>{G(w)}),void 0,void 0,E,((w,E)=>{P(E)}))}))}static GetAssetUrl(w){if(!w)return"";if(c.AssetBaseUrl&&w.startsWith(c._DefaultAssetsUrl)){const E="/"===c.AssetBaseUrl[c.AssetBaseUrl.length-1]?c.AssetBaseUrl.substring(0,c.AssetBaseUrl.length-1):c.AssetBaseUrl;return w.replace(c._DefaultAssetsUrl,E)}return w}static GetBabylonScriptURL(w,E){if(!w)return"";if(c.ScriptBaseUrl&&w.startsWith(c._DefaultCdnUrl)){const E="/"===c.ScriptBaseUrl[c.ScriptBaseUrl.length-1]?c.ScriptBaseUrl.substring(0,c.ScriptBaseUrl.length-1):c.ScriptBaseUrl;w=w.replace(c._DefaultCdnUrl,E)}return w=c.ScriptPreprocessUrl(w),E&&(w=c.GetAbsoluteUrl(w)),w}static LoadBabylonScript(w,E,G,P){w=c.GetBabylonScriptURL(w),c.LoadScript(w,E,G)}static async LoadBabylonScriptAsync(w){return w=c.GetBabylonScriptURL(w),await c.LoadScriptAsync(w)}static LoadScript(w,E,G,P){let B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("function"===typeof importScripts){try{importScripts(w),E&&E()}catch(U){null===G||void 0===G||G(`Unable to load script '${w}' in worker`,U)}return}if(!(0,h.h)())return void(null===G||void 0===G||G(`Cannot load script '${w}' outside of a window or a worker`));const y=document.getElementsByTagName("head")[0],x=document.createElement("script");B?(x.setAttribute("type","module"),x.innerText=w):(x.setAttribute("type","text/javascript"),x.setAttribute("src",w)),P&&(x.id=P),x.onload=()=>{E&&E()},x.onerror=E=>{G&&G(`Unable to load script '${w}'`,E)},y.appendChild(x)}static async LoadScriptAsync(w,E){return await new Promise(((G,P)=>{this.LoadScript(w,(()=>{G()}),((w,E)=>{P(E||new Error(w))}),E)}))}static ReadFileAsDataURL(w,E,G){const h=new FileReader,B={onCompleteObservable:new P.d,abort:()=>h.abort()};return h.onloadend=()=>{B.onCompleteObservable.notifyObservers(B)},h.onload=w=>{E(w.target.result)},h.onprogress=G,h.readAsDataURL(w),B}static ReadFile(w,E,G,P,h){return(0,O.t)(w,E,G,P,h)}static FileAsURL(w){const E=new Blob([w]);return window.URL.createObjectURL(E)}static Format(w){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return w.toFixed(E)}static DeepCopy(w,E,G,P){y.d.DeepCopy(w,E,G,P)}static IsEmpty(w){for(const E in w)if(Object.prototype.hasOwnProperty.call(w,E))return!1;return!0}static RegisterTopRootEvents(w,E){for(let P=0;P<E.length;P++){const h=E[P];w.addEventListener(h.name,h.handler,!1);try{window.parent&&window.parent.addEventListener(h.name,h.handler,!1)}catch(G){}}}static UnregisterTopRootEvents(w,E){for(let P=0;P<E.length;P++){const h=E[P];w.removeEventListener(h.name,h.handler);try{w.parent&&w.parent.removeEventListener(h.name,h.handler)}catch(G){}}}static async DumpFramebuffer(w,E,G,P){throw(0,U.d)("DumpTools")}static DumpData(w,E,G,P){throw(0,U.d)("DumpTools")}static async DumpDataAsync(w,E,G){throw(0,U.d)("DumpTools")}static _IsOffScreenCanvas(w){return void 0!==w.convertToBlob}static ToBlob(w,E){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",P=arguments.length>3?arguments[3]:void 0;c._IsOffScreenCanvas(w)||w.toBlob||(w.toBlob=function(w,E,G){setTimeout((()=>{const P=atob(this.toDataURL(E,G).split(",")[1]),h=P.length,B=new Uint8Array(h);for(let w=0;w<h;w++)B[w]=P.charCodeAt(w);w(new Blob([B]))}))}),c._IsOffScreenCanvas(w)?w.convertToBlob({type:G,quality:P}).then((w=>E(w))):w.toBlob((function(w){E(w)}),G,P)}static DownloadBlob(w,E){if("download"in document.createElement("a")){if(!E){const w=new Date;E="screenshot_"+((w.getFullYear()+"-"+(w.getMonth()+1)).slice(2)+"-"+w.getDate()+"_"+w.getHours()+"-"+("0"+w.getMinutes()).slice(-2))+".png"}c.Download(w,E)}else if(w&&"undefined"!==typeof URL){const E=URL.createObjectURL(w),G=window.open("");if(!G)return;const P=G.document.createElement("img");P.onload=function(){URL.revokeObjectURL(E)},P.src=E,G.document.body.appendChild(P)}}static EncodeScreenshotCanvasData(w,E){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",P=arguments.length>3?arguments[3]:void 0,h=arguments.length>4?arguments[4]:void 0;if("string"!==typeof P&&E){if(E){if(c._IsOffScreenCanvas(w))return void w.convertToBlob({type:G,quality:h}).then((w=>{const G=new FileReader;G.readAsDataURL(w),G.onloadend=()=>{const w=G.result;E(w)}}));const P=w.toDataURL(G,h);E(P)}}else this.ToBlob(w,(function(w){w&&c.DownloadBlob(w,P),E&&E("")}),G,h)}static Download(w,E){if("undefined"===typeof URL)return;const G=window.URL.createObjectURL(w),P=document.createElement("a");document.body.appendChild(P),P.style.display="none",P.href=G,P.download=E,P.addEventListener("click",(()=>{P.parentElement&&P.parentElement.removeChild(P)})),P.click(),window.URL.revokeObjectURL(G)}static BackCompatCameraNoPreventDefault(w){return"boolean"===typeof w[0]?w[0]:"boolean"===typeof w[1]&&w[1]}static CreateScreenshot(w,E,G,P){throw(0,U.d)("ScreenshotTools")}static async CreateScreenshotAsync(w,E,G){throw(0,U.d)("ScreenshotTools")}static CreateScreenshotUsingRenderTarget(w,E,G,P){throw(0,U.d)("ScreenshotTools")}static async CreateScreenshotUsingRenderTargetAsync(w,E,G){throw(0,U.d)("ScreenshotTools")}static RandomId(){return(0,a.e)()}static IsBase64(w){return(0,O.l)(w)}static DecodeBase64(w){return(0,O.b)(w)}static get errorsCount(){return B.e.errorsCount}static Log(w){B.e.Log(w)}static Warn(w){B.e.Warn(w)}static Error(w){B.e.Error(w)}static get LogCache(){return B.e.LogCache}static ClearLogCache(){B.e.ClearLogCache()}static set LogLevels(w){B.e.LogLevels=w}static set PerformanceLogLevel(w){return(w&c.PerformanceUserMarkLogLevel)===c.PerformanceUserMarkLogLevel?(c.StartPerformanceCounter=c._StartUserMark,void(c.EndPerformanceCounter=c._EndUserMark)):(w&c.PerformanceConsoleLogLevel)===c.PerformanceConsoleLogLevel?(c.StartPerformanceCounter=c._StartPerformanceConsole,void(c.EndPerformanceCounter=c._EndPerformanceConsole)):(c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,void(c.EndPerformanceCounter=c._EndPerformanceCounterDisabled))}static _StartPerformanceCounterDisabled(w,E){}static _EndPerformanceCounterDisabled(w,E){}static _StartUserMark(w){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c._Performance){if(!(0,h.h)())return;c._Performance=window.performance}E&&c._Performance.mark&&c._Performance.mark(w+"-Begin")}static _EndUserMark(w){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&c._Performance.mark&&(c._Performance.mark(w+"-End"),c._Performance.measure(w,w+"-Begin",w+"-End"))}static _StartPerformanceConsole(w){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(c._StartUserMark(w,E),console.time&&console.time(w))}static _EndPerformanceConsole(w){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E&&(c._EndUserMark(w,E),console.timeEnd(w))}static get Now(){return x.c.Now}static GetClassName(w){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],G=null;if(!E&&w.getClassName)G=w.getClassName();else{if(w instanceof Object){G=(E?w:Object.getPrototypeOf(w)).constructor.__bjsclassName__}G||(G=typeof w)}return G}static First(w,E){for(const G of w)if(E(G))return G;return null}static getFullClassName(w){let E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],G=null,P=null;if(!E&&w.getClassName)G=w.getClassName();else{if(w instanceof Object){const h=E?w:Object.getPrototypeOf(w);G=h.constructor.__bjsclassName__,P=h.constructor.__bjsmoduleName__}G||(G=typeof w)}return G?(null!=P?P+".":"")+G:null}static async DelayAsync(w){await new Promise((E=>{setTimeout((()=>{E()}),w)}))}static IsSafari(){return!!(0,h.g)()&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}}function Z(w,E){return G=>{G.__bjsclassName__=w,G.__bjsmoduleName__=null!=E?E:null}}c.AssetBaseUrl="",c.UseCustomRequestHeaders=!1,c.CustomRequestHeaders=l.c.CustomRequestHeaders,c.GetDOMTextContent=h.d,c._DefaultCdnUrl="https://cdn.babylonjs.com",c._DefaultAssetsUrl="https://assets.babylonjs.com/core",c.GetAbsoluteUrl="object"===typeof document?w=>{const E=document.createElement("a");return E.href=w,E.href}:"function"===typeof URL&&"object"===typeof location?w=>new URL(w,location.origin).href:()=>{throw new Error("Unable to get absolute URL. Override BABYLON.Tools.GetAbsoluteUrl to a custom implementation for the current context.")},c.NoneLogLevel=B.e.NoneLogLevel,c.MessageLogLevel=B.e.MessageLogLevel,c.WarningLogLevel=B.e.WarningLogLevel,c.ErrorLogLevel=B.e.ErrorLogLevel,c.AllLogLevel=B.e.AllLogLevel,c.IsWindowObjectExist=h.h,c.PerformanceNoneLogLevel=0,c.PerformanceUserMarkLogLevel=1,c.PerformanceConsoleLogLevel=2,c.StartPerformanceCounter=c._StartPerformanceCounterDisabled,c.EndPerformanceCounter=c._EndPerformanceCounterDisabled;class J{constructor(w,E,G){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.iterations=w,this.index=P-1,this._done=!1,this._fn=E,this._successCallback=G}executeNext(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())}breakLoop(){this._done=!0,this._successCallback()}static Run(w,E,G){const P=new J(w,E,G,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0);return P.executeNext(),P}static SyncAsyncForLoop(w,E,G,P,h){let B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return J.Run(Math.ceil(w/E),(P=>{h&&h()?P.breakLoop():setTimeout((()=>{for(let B=0;B<E;++B){const y=P.index*E+B;if(y>=w)break;if(G(y),h&&h()){P.breakLoop();break}}P.executeNext()}),B)}),P)}}c.Mix=Q.l,c.IsExponentOfTwo=Q.h,i.e.FallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z"},11646:(w,E,G)=>{G.d(E,{e:()=>B,g:()=>h});const P={};function h(w,E){P[w]=E}function B(w){return P[w]}},11540:(w,E,G)=>{G.d(E,{c:()=>P});class P{constructor(){this._xhr="undefined"!==typeof _native&&_native.XMLHttpRequest?new _native.XMLHttpRequest:new XMLHttpRequest,this._requestURL=""}static get IsCustomRequestAvailable(){return Object.keys(P.CustomRequestHeaders).length>0||P.CustomRequestModifiers.length>0}get requestURL(){return this._requestURL}_injectCustomRequestHeaders(){if(!this._shouldSkipRequestModifications(this._requestURL))for(const w in P.CustomRequestHeaders){const E=P.CustomRequestHeaders[w];E&&this._xhr.setRequestHeader(w,E)}}_shouldSkipRequestModifications(w){return P.SkipRequestModificationForBabylonCDN&&(w.includes("preview.babylonjs.com")||w.includes("cdn.babylonjs.com"))}get onprogress(){return this._xhr.onprogress}set onprogress(w){this._xhr.onprogress=w}get readyState(){return this._xhr.readyState}get status(){return this._xhr.status}get statusText(){return this._xhr.statusText}get response(){return this._xhr.response}get responseURL(){return this._xhr.responseURL}get responseText(){return this._xhr.responseText}get responseType(){return this._xhr.responseType}set responseType(w){this._xhr.responseType=w}get timeout(){return this._xhr.timeout}set timeout(w){this._xhr.timeout=w}addEventListener(w,E,G){this._xhr.addEventListener(w,E,G)}removeEventListener(w,E,G){this._xhr.removeEventListener(w,E,G)}abort(){this._xhr.abort()}send(w){P.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(w)}open(w,E){for(const G of P.CustomRequestModifiers){if(this._shouldSkipRequestModifications(E))return;E=G(this._xhr,E)||E}E=(E=E.replace("file:http:","http:")).replace("file:https:","https:"),this._requestURL=E,this._xhr.open(w,E,!0)}setRequestHeader(w,E){this._xhr.setRequestHeader(w,E)}getResponseHeader(w){return this._xhr.getResponseHeader(w)}}P.CustomRequestHeaders={},P.CustomRequestModifiers=new Array,P.SkipRequestModificationForBabylonCDN=!0}}]);