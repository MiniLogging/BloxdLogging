/*! For license information please see xcm6t2.22.171ba108.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[22],{11895:(t,q,S)=>{S.d(q,{$:()=>Q,C:()=>O,F:()=>A,J:()=>h,L:()=>I,N:()=>H,P:()=>v,Q:()=>M,R:()=>l,U:()=>a,X:()=>K,b:()=>i,bb:()=>x,c:()=>J,g:()=>V,i:()=>k,j:()=>r,n:()=>L,p:()=>m,q:()=>G,r:()=>j,u:()=>X,w:()=>b,y:()=>Z});const o=function(t){const q=[];let S=0;for(let o=0;o<t.length;o++){let B=t.charCodeAt(o);B<128?q[S++]=B:B<2048?(q[S++]=B>>6|192,q[S++]=63&B|128):55296===(64512&B)&&o+1<t.length&&56320===(64512&t.charCodeAt(o+1))?(B=65536+((1023&B)<<10)+(1023&t.charCodeAt(++o)),q[S++]=B>>18|240,q[S++]=B>>12&63|128,q[S++]=B>>6&63|128,q[S++]=63&B|128):(q[S++]=B>>12|224,q[S++]=B>>6&63|128,q[S++]=63&B|128)}return q},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,q){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const S=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let B=0;B<t.length;B+=3){const q=t[B],z=B+1<t.length,L=z?t[B+1]:0,r=B+2<t.length,e=r?t[B+2]:0,C=q>>2,Z=(3&q)<<4|L>>4;let b=(15&L)<<2|e>>6,O=63&e;r||(O=64,z||(b=64)),o.push(S[C],S[Z],S[b],S[O])}return o.join("")},encodeString(t,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(t):this.encodeByteArray(o(t),q)},decodeString(t,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(t):function(t){const q=[];let S=0,o=0;for(;S<t.length;){const B=t[S++];if(B<128)q[o++]=String.fromCharCode(B);else if(B>191&&B<224){const z=t[S++];q[o++]=String.fromCharCode((31&B)<<6|63&z)}else if(B>239&&B<365){const z=((7&B)<<18|(63&t[S++])<<12|(63&t[S++])<<6|63&t[S++])-65536;q[o++]=String.fromCharCode(55296+(z>>10)),q[o++]=String.fromCharCode(56320+(1023&z))}else{const z=t[S++],L=t[S++];q[o++]=String.fromCharCode((15&B)<<12|(63&z)<<6|63&L)}}return q.join("")}(this.decodeStringToByteArray(t,q))},decodeStringToByteArray(t,q){this.init_();const S=q?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let B=0;B<t.length;){const q=S[t.charAt(B++)],L=B<t.length?S[t.charAt(B)]:0;++B;const r=B<t.length?S[t.charAt(B)]:64;++B;const e=B<t.length?S[t.charAt(B)]:64;if(++B,null==q||null==L||null==r||null==e)throw new z;const C=q<<2|L>>4;if(o.push(C),64!==r){const t=L<<4&240|r>>2;if(o.push(t),64!==e){const t=r<<6&192|e;o.push(t)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const L=function(t){return function(t){const q=o(t);return B.encodeByteArray(q,!0)}(t).replace(/\./g,"")},r=function(t){try{return B.decodeString(t,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};const e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof S.g)return S.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,C=()=>{try{return e()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(S){return}const q=t&&r(t[1]);return q&&JSON.parse(q)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Z=t=>{var q,S;return null===(S=null===(q=C())||void 0===q?void 0:q.emulatorHosts)||void 0===S?void 0:S[t]},b=()=>{var t;return null===(t=C())||void 0===t?void 0:t.config},O=t=>{var q;return null===(q=C())||void 0===q?void 0:q[`_${t}`]};class i{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,q)=>{this.resolve=t,this.reject=q}))}wrapCallback(t){return(q,S)=>{q?this.reject(q):this.resolve(S),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(q):t(q,S))}}}function h(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function I(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function a(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function v(){const t=h();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function M(){try{return"object"===typeof indexedDB}catch(t){return!1}}function x(){return new Promise(((t,q)=>{try{let S=!0;const o="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(o);B.onsuccess=()=>{B.result.close(),S||self.indexedDB.deleteDatabase(o),t(!0)},B.onupgradeneeded=()=>{S=!1},B.onerror=()=>{var t;q((null===(t=B.error)||void 0===t?void 0:t.message)||"")}}catch(S){q(S)}}))}function k(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class V extends Error{constructor(t,q,S){super(q),this.code=t,this.customData=S,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,J.prototype.create)}}class J{constructor(t,q,S){this.service=t,this.serviceName=q,this.errors=S}create(t){const q=(arguments.length<=1?void 0:arguments[1])||{},S=`${this.service}/${t}`,o=this.errors[t],B=o?function(t,q){return t.replace(U,((t,S)=>{const o=q[S];return null!=o?String(o):`<${S}?>`}))}(o,q):"Error",z=`${this.serviceName}: ${B} (${S}).`;return new V(S,z,q)}}const U=/\{\$([^}]+)}/g;function H(t){for(const q in t)if(Object.prototype.hasOwnProperty.call(t,q))return!1;return!0}function j(t,q){if(t===q)return!0;const S=Object.keys(t),o=Object.keys(q);for(const B of S){if(!o.includes(B))return!1;const S=t[B],z=q[B];if(y(S)&&y(z)){if(!j(S,z))return!1}else if(S!==z)return!1}for(const B of o)if(!S.includes(B))return!1;return!0}function y(t){return null!==t&&"object"===typeof t}function Q(t){const q=[];for(const[S,o]of Object.entries(t))Array.isArray(o)?o.forEach((t=>{q.push(encodeURIComponent(S)+"="+encodeURIComponent(t))})):q.push(encodeURIComponent(S)+"="+encodeURIComponent(o));return q.length?"&"+q.join("&"):""}function K(t){const q={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[S,o]=t.split("=");q[decodeURIComponent(S)]=decodeURIComponent(o)}})),q}function X(t){const q=t.indexOf("?");if(!q)return"";const S=t.indexOf("#",q);return t.substring(q,S>0?S:void 0)}function G(t,q){const S=new Y(t,q);return S.subscribe.bind(S)}class Y{constructor(t,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((q=>{q.next(t)}))}error(t){this.forEachObserver((q=>{q.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,q,S){let o;if(void 0===t&&void 0===q&&void 0===S)throw new Error("Missing Observer.");o=function(t,q){if("object"!==typeof t||null===t)return!1;for(const S of q)if(S in t&&"function"===typeof t[S])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:q,complete:S},void 0===o.next&&(o.next=n),void 0===o.error&&(o.error=n),void 0===o.complete&&(o.complete=n);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(t){}})),this.observers.push(o),B}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,t)}sendOne(t,q){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{q(this.observers[t])}catch(S){"undefined"!==typeof console&&console.error&&console.error(S)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function n(){}const u=1e3,W=2,f=144e5,D=.5;function m(t){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W;const S=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:u)*Math.pow(q,t),o=Math.round(D*S*(Math.random()-.5)*2);return Math.min(f,S+o)}function A(t){return t&&t._delegate?t._delegate:t}},11882:(t,q,S)=>{S.d(q,{c:()=>z.g,f:()=>bt,i:()=>d,m:()=>St,q:()=>ot,r:()=>tt,s:()=>rt,t:()=>qt,w:()=>zt,y:()=>Bt,A:()=>Lt,E:()=>lt,J:()=>it,I:()=>ht,K:()=>Ot,N:()=>at,R:()=>It,S:()=>vt});var o=S(11890),B=S(11901),z=S(11895);let L,r;const e=new WeakMap,C=new WeakMap,Z=new WeakMap,b=new WeakMap,O=new WeakMap;let i={get(t,q,S){if(t instanceof IDBTransaction){if("done"===q)return C.get(t);if("objectStoreNames"===q)return t.objectStoreNames||Z.get(t);if("store"===q)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return I(t[q])},set:(t,q,S)=>(t[q]=S,!0),has:(t,q)=>t instanceof IDBTransaction&&("done"===q||"store"===q)||q in t};function h(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var q=arguments.length,S=new Array(q),o=0;o<q;o++)S[o]=arguments[o];return t.apply(a(this),S),I(e.get(this))}:function(){for(var q=arguments.length,S=new Array(q),o=0;o<q;o++)S[o]=arguments[o];return I(t.apply(a(this),S))}:function(q){for(var S=arguments.length,o=new Array(S>1?S-1:0),B=1;B<S;B++)o[B-1]=arguments[B];const z=t.call(a(this),q,...o);return Z.set(z,q.sort?q.sort():[q]),I(z)}}function l(t){return"function"===typeof t?h(t):(t instanceof IDBTransaction&&function(t){if(C.has(t))return;const q=new Promise(((q,S)=>{const o=()=>{t.removeEventListener("complete",B),t.removeEventListener("error",z),t.removeEventListener("abort",z)},B=()=>{q(),o()},z=()=>{S(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",B),t.addEventListener("error",z),t.addEventListener("abort",z)}));C.set(t,q)}(t),q=t,(L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>q instanceof t))?new Proxy(t,i):t);var q}function I(t){if(t instanceof IDBRequest)return function(t){const q=new Promise(((q,S)=>{const o=()=>{t.removeEventListener("success",B),t.removeEventListener("error",z)},B=()=>{q(I(t.result)),o()},z=()=>{S(t.error),o()};t.addEventListener("success",B),t.addEventListener("error",z)}));return q.then((q=>{q instanceof IDBCursor&&e.set(q,t)})).catch((()=>{})),O.set(q,t),q}(t);if(b.has(t))return b.get(t);const q=l(t);return q!==t&&(b.set(t,q),O.set(q,t)),q}const a=t=>O.get(t);const v=["get","getKey","getAll","getAllKeys","count"],M=["put","add","delete","clear"],x=new Map;function k(t,q){if(!(t instanceof IDBDatabase)||q in t||"string"!==typeof q)return;if(x.get(q))return x.get(q);const S=q.replace(/FromIndex$/,""),o=q!==S,B=M.includes(S);if(!(S in(o?IDBIndex:IDBObjectStore).prototype)||!B&&!v.includes(S))return;const z=async function(t){const q=this.transaction(t,B?"readwrite":"readonly");let z=q.store;for(var L=arguments.length,r=new Array(L>1?L-1:0),e=1;e<L;e++)r[e-1]=arguments[e];return o&&(z=z.index(r.shift())),(await Promise.all([z[S](...r),B&&q.done]))[0]};return x.set(q,z),z}i=(t=>({...t,get:(q,S,o)=>k(q,S)||t.get(q,S,o),has:(q,S)=>!!k(q,S)||t.has(q,S)}))(i);class V{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const q=t.getComponent();return"VERSION"===(null===q||void 0===q?void 0:q.type)}(t)){const q=t.getImmediate();return`${q.library}/${q.version}`}return null})).filter((t=>t)).join(" ")}}const J="@firebase/app",U="0.9.13",H=new B.c("@firebase/app"),j="@firebase/app-compat",y="@firebase/analytics-compat",Q="@firebase/analytics",K="@firebase/app-check-compat",X="@firebase/app-check",G="@firebase/auth",Y="@firebase/auth-compat",n="@firebase/database",u="@firebase/database-compat",W="@firebase/functions",f="@firebase/functions-compat",D="@firebase/installations",m="@firebase/installations-compat",A="@firebase/messaging",c="@firebase/messaging-compat",s="@firebase/performance",g="@firebase/performance-compat",N="@firebase/remote-config",T="@firebase/remote-config-compat",w="@firebase/storage",E="@firebase/storage-compat",p="@firebase/firestore",P="@firebase/firestore-compat",F="firebase",d="[DEFAULT]",R={[J]:"fire-core",[j]:"fire-core-compat",[Q]:"fire-analytics",[y]:"fire-analytics-compat",[X]:"fire-app-check",[K]:"fire-app-check-compat",[G]:"fire-auth",[Y]:"fire-auth-compat",[n]:"fire-rtdb",[u]:"fire-rtdb-compat",[W]:"fire-fn",[f]:"fire-fn-compat",[D]:"fire-iid",[m]:"fire-iid-compat",[A]:"fire-fcm",[c]:"fire-fcm-compat",[s]:"fire-perf",[g]:"fire-perf-compat",[N]:"fire-rc",[T]:"fire-rc-compat",[w]:"fire-gcs",[E]:"fire-gcs-compat",[p]:"fire-fst",[P]:"fire-fst-compat","fire-js":"fire-js",[F]:"fire-js-all"},tt=new Map,qt=new Map;function St(t,q){try{t.container.ah(q)}catch(S){H.debug(`Component ${q.name} failed to register with FirebaseApp ${t.name}`,S)}}function ot(t,q){t.container.addOrOverwriteComponent(q)}function Bt(t){const q=t.name;if(qt.has(q))return H.debug(`There were multiple attempts to register component ${q}.`),!1;qt.set(q,t);for(const S of tt.values())St(S,t);return!0}function zt(t,q){const S=t.container.getProvider("heartbeat").getImmediate({optional:!0});return S&&S.triggerHeartbeat(),t.container.getProvider(q)}function Lt(t,q){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;zt(t,q).clearInstance(S)}function rt(){qt.clear()}const et={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ct=new z.c("app","Firebase",et);class Zt{constructor(t,q,S){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=S,this.container.ah(new o.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ct.create("app-deleted",{appName:this._name})}}const bt="9.23.0";function Ot(t){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=t;if("object"!==typeof q){q={name:q}}const B=Object.assign({name:d,automaticDataCollectionEnabled:!1},q),L=B.name;if("string"!==typeof L||!L)throw Ct.create("bad-app-name",{appName:String(L)});if(S||(S=(0,z.w)()),!S)throw Ct.create("no-options");const r=tt.get(L);if(r){if((0,z.r)(S,r.options)&&(0,z.r)(B,r.config))return r;throw Ct.create("duplicate-app",{appName:L})}const e=new o.b(L);for(const o of qt.values())e.ah(o);const C=new Zt(S,B,e);return tt.set(L,C),C}function it(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;const q=tt.get(t);if(!q&&t===d&&(0,z.w)())return Ot();if(!q)throw Ct.create("no-app",{appName:t});return q}function ht(){return Array.from(tt.values())}async function lt(t){const q=t.name;tt.has(q)&&(tt.delete(q),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function It(t,q,S){var B;let z=null!==(B=R[t])&&void 0!==B?B:t;S&&(z+=`-${S}`);const L=z.match(/\s|\//),r=q.match(/\s|\//);if(L||r){const t=[`Unable to register library "${z}" with version "${q}":`];return L&&t.push(`library name "${z}" contains illegal characters (whitespace or "/")`),L&&r&&t.push("and"),r&&t.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void H.warn(t.join(" "))}Bt(new o.d(`${z}-version`,(()=>({library:z,version:q})),"VERSION"))}function at(t,q){if(null!==t&&"function"!==typeof t)throw Ct.create("invalid-log-argument");(0,B.e)(t,q)}function vt(t){(0,B.d)(t)}const Mt="firebase-heartbeat-store";let xt=null;function kt(){return xt||(xt=function(t,q){let{blocked:S,upgrade:o,blocking:B,terminated:z}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const L=indexedDB.open(t,q),r=I(L);return o&&L.addEventListener("upgradeneeded",(t=>{o(I(L.result),t.oldVersion,t.newVersion,I(L.transaction),t)})),S&&L.addEventListener("blocked",(t=>S(t.oldVersion,t.newVersion,t))),r.then((t=>{z&&t.addEventListener("close",(()=>z())),B&&t.addEventListener("versionchange",(t=>B(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),r}("firebase-heartbeat-database",1,{upgrade:(t,q)=>{if(0===q)t.createObjectStore(Mt)}}).catch((t=>{throw Ct.create("idb-open",{originalErrorMessage:t.message})}))),xt}async function Vt(t,q){try{const S=(await kt()).transaction(Mt,"readwrite"),o=S.objectStore(Mt);await o.put(q,Jt(t)),await S.done}catch(S){if(S instanceof z.g)H.warn(S.message);else{const t=Ct.create("idb-set",{originalErrorMessage:null===S||void 0===S?void 0:S.message});H.warn(t.message)}}}function Jt(t){return`${t.name}!${t.options.appId}`}class Ut{constructor(t){this.container=t,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this.Qd=new jt(q),this._heartbeatsCachePromise=this.Qd.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),q=Ht();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==q&&!this._heartbeatsCache.heartbeats.some((t=>t.date===q)))return this._heartbeatsCache.heartbeats.push({date:q,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const q=new Date(t.date).valueOf();return Date.now()-q<=2592e6})),this.Qd.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ht(),{heartbeatsToSend:q,unsentEntries:S}=function(t){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const S=[];let o=t.slice();for(const B of t){const t=S.find((t=>t.agent===B.agent));if(t){if(t.dates.push(B.date),yt(S)>q){t.dates.pop();break}}else if(S.push({agent:B.agent,dates:[B.date]}),yt(S)>q){S.pop();break}o=o.slice(1)}return{heartbeatsToSend:S,unsentEntries:o}}(this._heartbeatsCache.heartbeats),o=(0,z.n)(JSON.stringify({version:2,heartbeats:q}));return this._heartbeatsCache.lastSentHeartbeatDate=t,S.length>0?(this._heartbeatsCache.heartbeats=S,await this.Qd.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Qd.overwrite(this._heartbeatsCache)),o}}function Ht(){return(new Date).toISOString().substring(0,10)}class jt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,z.Q)()&&(0,z.bb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(t){try{const q=await kt();return await q.transaction(Mt).objectStore(Mt).get(Jt(t))}catch(q){if(q instanceof z.g)H.warn(q.message);else{const t=Ct.create("idb-get",{originalErrorMessage:null===q||void 0===q?void 0:q.message});H.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var q;if(await this._canUseIndexedDBPromise){const S=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(q=t.lastSentHeartbeatDate)&&void 0!==q?q:S.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var q;if(await this._canUseIndexedDBPromise){const S=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(q=t.lastSentHeartbeatDate)&&void 0!==q?q:S.lastSentHeartbeatDate,heartbeats:[...S.heartbeats,...t.heartbeats]})}}}function yt(t){return(0,z.n)(JSON.stringify({version:2,heartbeats:t})).length}var Qt;Qt="",Bt(new o.d("platform-logger",(t=>new V(t)),"PRIVATE")),Bt(new o.d("heartbeat",(t=>new Ut(t)),"PRIVATE")),It(J,U,Qt),It(J,U,"esm2017"),It("fire-js","")},11890:(t,q,S)=>{S.d(q,{b:()=>r,d:()=>B});var o=S(11895);class B{constructor(t,q,S){this.name=t,this.instanceFactory=q,this.type=S,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const z="[DEFAULT]";class L{constructor(t,q){this.name=t,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const q=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(q)){const t=new o.b;if(this.instancesDeferred.set(q,t),this.isInitialized(q)||this.shouldAutoInitialize())try{const S=this.getOrInitializeService({instanceIdentifier:q});S&&t.resolve(S)}catch(S){}}return this.instancesDeferred.get(q).promise}getImmediate(t){var q;const S=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),o=null!==(q=null===t||void 0===t?void 0:t.optional)&&void 0!==q&&q;if(!this.isInitialized(S)&&!this.shouldAutoInitialize()){if(o)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:S})}catch(B){if(o)return null;throw B}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:z})}catch(q){}for(const[t,S]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:o});S.resolve(t)}catch(q){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:q={}}=t,S=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(S))throw Error(`${this.name}(${S}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:S,options:q});for(const[B,z]of this.instancesDeferred.entries()){S===this.normalizeInstanceIdentifier(B)&&z.resolve(o)}return o}hl(t,q){var S;const o=this.normalizeInstanceIdentifier(q),B=null!==(S=this.onInitCallbacks.get(o))&&void 0!==S?S:new Set;B.add(t),this.onInitCallbacks.set(o,B);const z=this.instances.get(o);return z&&t(z,o),()=>{B.delete(t)}}invokeOnInitCallbacks(t,q){const S=this.onInitCallbacks.get(q);if(S)for(const B of S)try{B(t,q)}catch(o){}}getOrInitializeService(t){let{instanceIdentifier:q,options:S={}}=t,o=this.instances.get(q);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(B=q,B===z?void 0:B),options:S}),this.instances.set(q,o),this.instancesOptions.set(q,S),this.invokeOnInitCallbacks(o,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,o)}catch(L){}var B;return o||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.component?this.component.multipleInstances?t:z:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class r{constructor(t){this.name=t,this.providers=new Map}ah(t){const q=this.getProvider(t.name);if(q.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);q.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.ah(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const q=new L(t,this);return this.providers.set(t,q),q}getProviders(){return Array.from(this.providers.values())}}},11901:(t,q,S)=>{S.d(q,{b:()=>B,c:()=>C,d:()=>Z,e:()=>b});const o=[];var B;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(B||(B={}));const z={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},L=B.INFO,r={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},e=function(t,q){if(q<t.logLevel)return;const S=(new Date).toISOString(),o=r[q];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);for(var B=arguments.length,z=new Array(B>2?B-2:0),L=2;L<B;L++)z[L-2]=arguments[L];console[o](`[${S}]  ${t.name}:`,...z)};class C{constructor(t){this.name=t,this._logLevel=L,this._logHandler=e,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in B))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?z[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,q=new Array(t),S=0;S<t;S++)q[S]=arguments[S];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...q),this._logHandler(this,B.DEBUG,...q)}log(){for(var t=arguments.length,q=new Array(t),S=0;S<t;S++)q[S]=arguments[S];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...q),this._logHandler(this,B.VERBOSE,...q)}info(){for(var t=arguments.length,q=new Array(t),S=0;S<t;S++)q[S]=arguments[S];this._userLogHandler&&this._userLogHandler(this,B.INFO,...q),this._logHandler(this,B.INFO,...q)}warn(){for(var t=arguments.length,q=new Array(t),S=0;S<t;S++)q[S]=arguments[S];this._userLogHandler&&this._userLogHandler(this,B.WARN,...q),this._logHandler(this,B.WARN,...q)}error(){for(var t=arguments.length,q=new Array(t),S=0;S<t;S++)q[S]=arguments[S];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...q),this._logHandler(this,B.ERROR,...q)}}function Z(t){o.forEach((q=>{q.setLogLevel(t)}))}function b(t,q){for(const S of o){let o=null;q&&q.level&&(o=z[q.level]),S.userLogHandler=null===t?null:function(q,S){for(var z=arguments.length,L=new Array(z>2?z-2:0),r=2;r<z;r++)L[r-2]=arguments[r];const e=L.map((t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(q){return null}})).filter((t=>t)).join(" ");S>=(null!==o&&void 0!==o?o:q.logLevel)&&t({level:B[S].toLowerCase(),message:e,args:L,type:q.name})}}}}}]);