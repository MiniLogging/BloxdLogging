/*! For license information please see rctw5b.22.91890b8c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[22],{11811:(c,b,A)=>{A.d(b,{A:()=>X,C:()=>J,D:()=>R,H:()=>B,J:()=>k,N:()=>V,P:()=>Y,T:()=>j,W:()=>F,Z:()=>E,bb:()=>y,cb:()=>G,e:()=>N,f:()=>r,fb:()=>v,j:()=>d,jb:()=>M,n:()=>W,p:()=>s,r:()=>h,u:()=>S,w:()=>O,y:()=>D,z:()=>P});const o=function(c){const b=[];let A=0;for(let o=0;o<c.length;o++){let t=c.charCodeAt(o);t<128?b[A++]=t:t<2048?(b[A++]=t>>6|192,b[A++]=63&t|128):55296===(64512&t)&&o+1<c.length&&56320===(64512&c.charCodeAt(o+1))?(t=65536+((1023&t)<<10)+(1023&c.charCodeAt(++o)),b[A++]=t>>18|240,b[A++]=t>>12&63|128,b[A++]=t>>6&63|128,b[A++]=63&t|128):(b[A++]=t>>12|224,b[A++]=t>>6&63|128,b[A++]=63&t|128)}return b},t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(c,b){if(!Array.isArray(c))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let t=0;t<c.length;t+=3){const b=c[t],n=t+1<c.length,h=n?c[t+1]:0,s=t+2<c.length,L=s?c[t+2]:0,C=b>>2,J=(3&b)<<4|h>>4;let X=(15&h)<<2|L>>6,R=63&L;s||(R=64,n||(X=64)),o.push(A[C],A[J],A[X],A[R])}return o.join("")},encodeString(c,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(c):this.encodeByteArray(o(c),b)},decodeString(c,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(c):function(c){const b=[];let A=0,o=0;for(;A<c.length;){const t=c[A++];if(t<128)b[o++]=String.fromCharCode(t);else if(t>191&&t<224){const n=c[A++];b[o++]=String.fromCharCode((31&t)<<6|63&n)}else if(t>239&&t<365){const n=((7&t)<<18|(63&c[A++])<<12|(63&c[A++])<<6|63&c[A++])-65536;b[o++]=String.fromCharCode(55296+(n>>10)),b[o++]=String.fromCharCode(56320+(1023&n))}else{const n=c[A++],h=c[A++];b[o++]=String.fromCharCode((15&t)<<12|(63&n)<<6|63&h)}}return b.join("")}(this.decodeStringToByteArray(c,b))},decodeStringToByteArray(c,b){this.init_();const A=b?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let t=0;t<c.length;){const b=A[c.charAt(t++)],h=t<c.length?A[c.charAt(t)]:0;++t;const s=t<c.length?A[c.charAt(t)]:64;++t;const L=t<c.length?A[c.charAt(t)]:64;if(++t,null==b||null==h||null==s||null==L)throw new n;const C=b<<2|h>>4;if(o.push(C),64!==s){const c=h<<4&240|s>>2;if(o.push(c),64!==L){const c=s<<6&192|L;o.push(c)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let c=0;c<this.ENCODED_VALS.length;c++)this.byteToCharMap_[c]=this.ENCODED_VALS.charAt(c),this.charToByteMap_[this.byteToCharMap_[c]]=c,this.byteToCharMapWebSafe_[c]=this.ENCODED_VALS_WEBSAFE.charAt(c),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[c]]=c,c>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(c)]=c,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(c)]=c)}}};class n extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(c){return function(c){const b=o(c);return t.encodeByteArray(b,!0)}(c).replace(/\./g,"")},s=function(c){try{return t.decodeString(c,!0)}catch(b){console.error("base64Decode failed: ",b)}return null};const L=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof A.g)return A.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,C=()=>{try{return L()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let c;try{c=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(A){return}const b=c&&s(c[1]);return b&&JSON.parse(b)})()}catch(c){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${c}`)}},J=c=>{var b,A;return null===(A=null===(b=C())||void 0===b?void 0:b.emulatorHosts)||void 0===A?void 0:A[c]},X=()=>{var c;return null===(c=C())||void 0===c?void 0:c.config},R=c=>{var b;return null===(b=C())||void 0===b?void 0:b[`_${c}`]};class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((c,b)=>{this.resolve=c,this.reject=b}))}wrapCallback(c){return(b,A)=>{b?this.reject(b):this.resolve(A),"function"===typeof c&&(this.promise.catch((()=>{})),1===c.length?c(b):c(b,A))}}}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function V(){const c="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof c&&void 0!==c.id}function y(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function j(){const c=k();return c.indexOf("MSIE ")>=0||c.indexOf("Trident/")>=0}function F(){try{return"object"===typeof indexedDB}catch(c){return!1}}function M(){return new Promise(((c,b)=>{try{let A=!0;const o="validate-browser-context-for-indexeddb-analytics-module",t=self.indexedDB.open(o);t.onsuccess=()=>{t.result.close(),A||self.indexedDB.deleteDatabase(o),c(!0)},t.onupgradeneeded=()=>{A=!1},t.onerror=()=>{var c;b((null===(c=t.error)||void 0===c?void 0:c.message)||"")}}catch(A){b(A)}}))}function W(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class d extends Error{constructor(c,b,A){super(b),this.code=c,this.customData=A,this.name="FirebaseError",Object.setPrototypeOf(this,d.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,r.prototype.create)}}class r{constructor(c,b,A){this.service=c,this.serviceName=b,this.errors=A}create(c){const b=(arguments.length<=1?void 0:arguments[1])||{},A=`${this.service}/${c}`,o=this.errors[c],t=o?function(c,b){return c.replace(z,((c,A)=>{const o=b[A];return null!=o?String(o):`<${A}?>`}))}(o,b):"Error",n=`${this.serviceName}: ${t} (${A}).`;return new d(A,n,b)}}const z=/\{\$([^}]+)}/g;function Y(c){for(const b in c)if(Object.prototype.hasOwnProperty.call(c,b))return!1;return!0}function D(c,b){if(c===b)return!0;const A=Object.keys(c),o=Object.keys(b);for(const t of A){if(!o.includes(t))return!1;const A=c[t],n=b[t];if(f(A)&&f(n)){if(!D(A,n))return!1}else if(A!==n)return!1}for(const t of o)if(!A.includes(t))return!1;return!0}function f(c){return null!==c&&"object"===typeof c}function v(c){const b=[];for(const[A,o]of Object.entries(c))Array.isArray(o)?o.forEach((c=>{b.push(encodeURIComponent(A)+"="+encodeURIComponent(c))})):b.push(encodeURIComponent(A)+"="+encodeURIComponent(o));return b.length?"&"+b.join("&"):""}function G(c){const b={};return c.replace(/^\?/,"").split("&").forEach((c=>{if(c){const[A,o]=c.split("=");b[decodeURIComponent(A)]=decodeURIComponent(o)}})),b}function P(c){const b=c.indexOf("?");if(!b)return"";const A=c.indexOf("#",b);return c.substring(b,A>0?A:void 0)}function O(c,b){const A=new p(c,b);return A.subscribe.bind(A)}class p{constructor(c,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then((()=>{c(this)})).catch((c=>{this.error(c)}))}next(c){this.forEachObserver((b=>{b.next(c)}))}error(c){this.forEachObserver((b=>{b.error(c)})),this.close(c)}complete(){this.forEachObserver((c=>{c.complete()})),this.close()}subscribe(c,b,A){let o;if(void 0===c&&void 0===b&&void 0===A)throw new Error("Missing Observer.");o=function(c,b){if("object"!==typeof c||null===c)return!1;for(const A of b)if(A in c&&"function"===typeof c[A])return!0;return!1}(c,["next","error","complete"])?c:{next:c,error:b,complete:A},void 0===o.next&&(o.next=q),void 0===o.error&&(o.error=q),void 0===o.complete&&(o.complete=q);const t=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(c){}})),this.observers.push(o),t}unsubscribeOne(c){void 0!==this.observers&&void 0!==this.observers[c]&&(delete this.observers[c],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(c){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,c)}sendOne(c,b){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[c])try{b(this.observers[c])}catch(A){"undefined"!==typeof console&&console.error&&console.error(A)}}))}close(c){this.finalized||(this.finalized=!0,void 0!==c&&(this.finalError=c),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function q(){}const I=1e3,K=2,Z=144e5,H=.5;function S(c){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;const A=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:I)*Math.pow(b,c),o=Math.round(H*A*(Math.random()-.5)*2);return Math.min(Z,A+o)}function B(c){return c&&c._delegate?c._delegate:c}},11802:(c,b,A)=>{A.d(b,{e:()=>n.j,g:()=>Xc,h:()=>w,k:()=>Ac,o:()=>oc,p:()=>cc,t:()=>sc,w:()=>bc,y:()=>nc,A:()=>tc,D:()=>hc,E:()=>Ec,J:()=>Nc,H:()=>kc,M:()=>Rc,Q:()=>yc,T:()=>Vc,U:()=>jc});var o=A(11808),t=A(11813),n=A(11811);let h,s;const L=new WeakMap,C=new WeakMap,J=new WeakMap,X=new WeakMap,R=new WeakMap;let N={get(c,b,A){if(c instanceof IDBTransaction){if("done"===b)return C.get(c);if("objectStoreNames"===b)return c.objectStoreNames||J.get(c);if("store"===b)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return V(c[b])},set:(c,b,A)=>(c[b]=A,!0),has:(c,b)=>c instanceof IDBTransaction&&("done"===b||"store"===b)||b in c};function k(c){return c!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(c)?function(){for(var b=arguments.length,A=new Array(b),o=0;o<b;o++)A[o]=arguments[o];return c.apply(y(this),A),V(L.get(this))}:function(){for(var b=arguments.length,A=new Array(b),o=0;o<b;o++)A[o]=arguments[o];return V(c.apply(y(this),A))}:function(b){for(var A=arguments.length,o=new Array(A>1?A-1:0),t=1;t<A;t++)o[t-1]=arguments[t];const n=c.call(y(this),b,...o);return J.set(n,b.sort?b.sort():[b]),V(n)}}function E(c){return"function"===typeof c?k(c):(c instanceof IDBTransaction&&function(c){if(C.has(c))return;const b=new Promise(((b,A)=>{const o=()=>{c.removeEventListener("complete",t),c.removeEventListener("error",n),c.removeEventListener("abort",n)},t=()=>{b(),o()},n=()=>{A(c.error||new DOMException("AbortError","AbortError")),o()};c.addEventListener("complete",t),c.addEventListener("error",n),c.addEventListener("abort",n)}));C.set(c,b)}(c),b=c,(h||(h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((c=>b instanceof c))?new Proxy(c,N):c);var b}function V(c){if(c instanceof IDBRequest)return function(c){const b=new Promise(((b,A)=>{const o=()=>{c.removeEventListener("success",t),c.removeEventListener("error",n)},t=()=>{b(V(c.result)),o()},n=()=>{A(c.error),o()};c.addEventListener("success",t),c.addEventListener("error",n)}));return b.then((b=>{b instanceof IDBCursor&&L.set(b,c)})).catch((()=>{})),R.set(b,c),b}(c);if(X.has(c))return X.get(c);const b=E(c);return b!==c&&(X.set(c,b),R.set(b,c)),b}const y=c=>R.get(c);const j=["get","getKey","getAll","getAllKeys","count"],F=["put","add","delete","clear"],M=new Map;function W(c,b){if(!(c instanceof IDBDatabase)||b in c||"string"!==typeof b)return;if(M.get(b))return M.get(b);const A=b.replace(/FromIndex$/,""),o=b!==A,t=F.includes(A);if(!(A in(o?IDBIndex:IDBObjectStore).prototype)||!t&&!j.includes(A))return;const n=async function(c){const b=this.transaction(c,t?"readwrite":"readonly");let n=b.store;for(var h=arguments.length,s=new Array(h>1?h-1:0),L=1;L<h;L++)s[L-1]=arguments[L];return o&&(n=n.index(s.shift())),(await Promise.all([n[A](...s),t&&b.done]))[0]};return M.set(b,n),n}N=(c=>({...c,get:(b,A,o)=>W(b,A)||c.get(b,A,o),has:(b,A)=>!!W(b,A)||c.has(b,A)}))(N);class d{constructor(c){this.container=c}getPlatformInfoString(){return this.container.getProviders().map((c=>{if(function(c){const b=c.getComponent();return"VERSION"===(null===b||void 0===b?void 0:b.type)}(c)){const b=c.getImmediate();return`${b.library}/${b.version}`}return null})).filter((c=>c)).join(" ")}}const r="@firebase/app",z="0.9.13",Y=new t.g("@firebase/app"),D="@firebase/app-compat",f="@firebase/analytics-compat",v="@firebase/analytics",G="@firebase/app-check-compat",P="@firebase/app-check",O="@firebase/auth",p="@firebase/auth-compat",q="@firebase/database",I="@firebase/database-compat",K="@firebase/functions",Z="@firebase/functions-compat",H="@firebase/installations",S="@firebase/installations-compat",B="@firebase/messaging",Q="@firebase/messaging-compat",a="@firebase/performance",l="@firebase/performance-compat",T="@firebase/remote-config",i="@firebase/remote-config-compat",g="@firebase/storage",u="@firebase/storage-compat",e="@firebase/firestore",x="@firebase/firestore-compat",U="firebase",w="[DEFAULT]",m={[r]:"fire-core",[D]:"fire-core-compat",[v]:"fire-analytics",[f]:"fire-analytics-compat",[P]:"fire-app-check",[G]:"fire-app-check-compat",[O]:"fire-auth",[p]:"fire-auth-compat",[q]:"fire-rtdb",[I]:"fire-rtdb-compat",[K]:"fire-fn",[Z]:"fire-fn-compat",[H]:"fire-iid",[S]:"fire-iid-compat",[B]:"fire-fcm",[Q]:"fire-fcm-compat",[a]:"fire-perf",[l]:"fire-perf-compat",[T]:"fire-rc",[i]:"fire-rc-compat",[g]:"fire-gcs",[u]:"fire-gcs-compat",[e]:"fire-fst",[x]:"fire-fst-compat","fire-js":"fire-js",[U]:"fire-js-all"},cc=new Map,bc=new Map;function Ac(c,b){try{c.container.Rf(b)}catch(A){Y.debug(`Component ${b.name} failed to register with FirebaseApp ${c.name}`,A)}}function oc(c,b){c.container.addOrOverwriteComponent(b)}function tc(c){const b=c.name;if(bc.has(b))return Y.debug(`There were multiple attempts to register component ${b}.`),!1;bc.set(b,c);for(const A of cc.values())Ac(A,c);return!0}function nc(c,b){const A=c.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),c.container.getProvider(b)}function hc(c,b){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;nc(c,b).clearInstance(A)}function sc(){bc.clear()}const Lc={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Cc=new n.f("app","Firebase",Lc);class Jc{constructor(c,b,A){this._isDeleted=!1,this._options=Object.assign({},c),this._config=Object.assign({},b),this._name=b.name,this._automaticDataCollectionEnabled=b.automaticDataCollectionEnabled,this._container=A,this.container.Rf(new o.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(c){this.checkDestroyed(),this._automaticDataCollectionEnabled=c}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(c){this._isDeleted=c}checkDestroyed(){if(this.isDeleted)throw Cc.create("app-deleted",{appName:this._name})}}const Xc="9.23.0";function Rc(c){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=c;if("object"!==typeof b){b={name:b}}const t=Object.assign({name:w,automaticDataCollectionEnabled:!1},b),h=t.name;if("string"!==typeof h||!h)throw Cc.create("bad-app-name",{appName:String(h)});if(A||(A=(0,n.A)()),!A)throw Cc.create("no-options");const s=cc.get(h);if(s){if((0,n.y)(A,s.options)&&(0,n.y)(t,s.config))return s;throw Cc.create("duplicate-app",{appName:h})}const L=new o.d(h);for(const o of bc.values())L.Rf(o);const C=new Jc(A,t,L);return cc.set(h,C),C}function Nc(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;const b=cc.get(c);if(!b&&c===w&&(0,n.A)())return Rc();if(!b)throw Cc.create("no-app",{appName:c});return b}function kc(){return Array.from(cc.values())}async function Ec(c){const b=c.name;cc.has(b)&&(cc.delete(b),await Promise.all(c.container.getProviders().map((c=>c.delete()))),c.isDeleted=!0)}function Vc(c,b,A){var t;let n=null!==(t=m[c])&&void 0!==t?t:c;A&&(n+=`-${A}`);const h=n.match(/\s|\//),s=b.match(/\s|\//);if(h||s){const c=[`Unable to register library "${n}" with version "${b}":`];return h&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),h&&s&&c.push("and"),s&&c.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void Y.warn(c.join(" "))}tc(new o.g(`${n}-version`,(()=>({library:n,version:b})),"VERSION"))}function yc(c,b){if(null!==c&&"function"!==typeof c)throw Cc.create("invalid-log-argument");(0,t.m)(c,b)}function jc(c){(0,t.j)(c)}const Fc="firebase-heartbeat-store";let Mc=null;function Wc(){return Mc||(Mc=function(c,b){let{blocked:A,upgrade:o,blocking:t,terminated:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const h=indexedDB.open(c,b),s=V(h);return o&&h.addEventListener("upgradeneeded",(c=>{o(V(h.result),c.oldVersion,c.newVersion,V(h.transaction),c)})),A&&h.addEventListener("blocked",(c=>A(c.oldVersion,c.newVersion,c))),s.then((c=>{n&&c.addEventListener("close",(()=>n())),t&&c.addEventListener("versionchange",(c=>t(c.oldVersion,c.newVersion,c)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(c,b)=>{if(0===b)c.createObjectStore(Fc)}}).catch((c=>{throw Cc.create("idb-open",{originalErrorMessage:c.message})}))),Mc}async function dc(c,b){try{const A=(await Wc()).transaction(Fc,"readwrite"),o=A.objectStore(Fc);await o.put(b,rc(c)),await A.done}catch(A){if(A instanceof n.j)Y.warn(A.message);else{const c=Cc.create("idb-set",{originalErrorMessage:null===A||void 0===A?void 0:A.message});Y.warn(c.message)}}}function rc(c){return`${c.name}!${c.options.appId}`}class zc{constructor(c){this.container=c,this._heartbeatsCache=null;const b=this.container.getProvider("app").getImmediate();this.ij=new Dc(b),this._heartbeatsCachePromise=this.ij.read().then((c=>(this._heartbeatsCache=c,c)))}async triggerHeartbeat(){const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),b=Yc();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==b&&!this._heartbeatsCache.heartbeats.some((c=>c.date===b)))return this._heartbeatsCache.heartbeats.push({date:b,agent:c}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((c=>{const b=new Date(c.date).valueOf();return Date.now()-b<=2592e6})),this.ij.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const c=Yc(),{heartbeatsToSend:b,unsentEntries:A}=function(c){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const A=[];let o=c.slice();for(const t of c){const c=A.find((c=>c.agent===t.agent));if(c){if(c.dates.push(t.date),fc(A)>b){c.dates.pop();break}}else if(A.push({agent:t.agent,dates:[t.date]}),fc(A)>b){A.pop();break}o=o.slice(1)}return{heartbeatsToSend:A,unsentEntries:o}}(this._heartbeatsCache.heartbeats),o=(0,n.r)(JSON.stringify({version:2,heartbeats:b}));return this._heartbeatsCache.lastSentHeartbeatDate=c,A.length>0?(this._heartbeatsCache.heartbeats=A,await this.ij.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.ij.overwrite(this._heartbeatsCache)),o}}function Yc(){return(new Date).toISOString().substring(0,10)}class Dc{constructor(c){this.app=c,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,n.W)()&&(0,n.jb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(c){try{const b=await Wc();return await b.transaction(Fc).objectStore(Fc).get(rc(c))}catch(b){if(b instanceof n.j)Y.warn(b.message);else{const c=Cc.create("idb-get",{originalErrorMessage:null===b||void 0===b?void 0:b.message});Y.warn(c.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(c){var b;if(await this._canUseIndexedDBPromise){const A=await this.read();return dc(this.app,{lastSentHeartbeatDate:null!==(b=c.lastSentHeartbeatDate)&&void 0!==b?b:A.lastSentHeartbeatDate,heartbeats:c.heartbeats})}}async add(c){var b;if(await this._canUseIndexedDBPromise){const A=await this.read();return dc(this.app,{lastSentHeartbeatDate:null!==(b=c.lastSentHeartbeatDate)&&void 0!==b?b:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...c.heartbeats]})}}}function fc(c){return(0,n.r)(JSON.stringify({version:2,heartbeats:c})).length}var vc;vc="",tc(new o.g("platform-logger",(c=>new d(c)),"PRIVATE")),tc(new o.g("heartbeat",(c=>new zc(c)),"PRIVATE")),Vc(r,z,vc),Vc(r,z,"esm2017"),Vc("fire-js","")},11808:(c,b,A)=>{A.d(b,{d:()=>s,g:()=>t});var o=A(11811);class t{constructor(c,b,A){this.name=c,this.instanceFactory=b,this.type=A,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(c){return this.instantiationMode=c,this}setMultipleInstances(c){return this.multipleInstances=c,this}setServiceProps(c){return this.serviceProps=c,this}setInstanceCreatedCallback(c){return this.onInstanceCreated=c,this}}const n="[DEFAULT]";class h{constructor(c,b){this.name=c,this.container=b,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(c){const b=this.normalizeInstanceIdentifier(c);if(!this.instancesDeferred.has(b)){const c=new o.e;if(this.instancesDeferred.set(b,c),this.isInitialized(b)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:b});A&&c.resolve(A)}catch(A){}}return this.instancesDeferred.get(b).promise}getImmediate(c){var b;const A=this.normalizeInstanceIdentifier(null===c||void 0===c?void 0:c.identifier),o=null!==(b=null===c||void 0===c?void 0:c.optional)&&void 0!==b&&b;if(!this.isInitialized(A)&&!this.shouldAutoInitialize()){if(o)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:A})}catch(t){if(o)return null;throw t}}getComponent(){return this.component}setComponent(c){if(c.name!==this.name)throw Error(`Mismatching Component ${c.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=c,this.shouldAutoInitialize()){if(function(c){return"EAGER"===c.instantiationMode}(c))try{this.getOrInitializeService({instanceIdentifier:n})}catch(b){}for(const[c,A]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(c);try{const c=this.getOrInitializeService({instanceIdentifier:o});A.resolve(c)}catch(b){}}}}clearInstance(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;this.instancesDeferred.delete(c),this.instancesOptions.delete(c),this.instances.delete(c)}async delete(){const c=Array.from(this.instances.values());await Promise.all([...c.filter((c=>"INTERNAL"in c)).map((c=>c.INTERNAL.delete())),...c.filter((c=>"_delete"in c)).map((c=>c._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return this.instances.has(c)}getOptions(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return this.instancesOptions.get(c)||{}}initialize(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:b={}}=c,A=this.normalizeInstanceIdentifier(c.instanceIdentifier);if(this.isInitialized(A))throw Error(`${this.name}(${A}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:A,options:b});for(const[t,n]of this.instancesDeferred.entries()){A===this.normalizeInstanceIdentifier(t)&&n.resolve(o)}return o}al(c,b){var A;const o=this.normalizeInstanceIdentifier(b),t=null!==(A=this.onInitCallbacks.get(o))&&void 0!==A?A:new Set;t.add(c),this.onInitCallbacks.set(o,t);const n=this.instances.get(o);return n&&c(n,o),()=>{t.delete(c)}}invokeOnInitCallbacks(c,b){const A=this.onInitCallbacks.get(b);if(A)for(const t of A)try{t(c,b)}catch(o){}}getOrInitializeService(c){let{instanceIdentifier:b,options:A={}}=c,o=this.instances.get(b);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=b,t===n?void 0:t),options:A}),this.instances.set(b,o),this.instancesOptions.set(b,A),this.invokeOnInitCallbacks(o,b),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,b,o)}catch(h){}var t;return o||null}normalizeInstanceIdentifier(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return this.component?this.component.multipleInstances?c:n:c}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class s{constructor(c){this.name=c,this.providers=new Map}Rf(c){const b=this.getProvider(c.name);if(b.isComponentSet())throw new Error(`Component ${c.name} has already been registered with ${this.name}`);b.setComponent(c)}addOrOverwriteComponent(c){this.getProvider(c.name).isComponentSet()&&this.providers.delete(c.name),this.Rf(c)}getProvider(c){if(this.providers.has(c))return this.providers.get(c);const b=new h(c,this);return this.providers.set(c,b),b}getProviders(){return Array.from(this.providers.values())}}},11813:(c,b,A)=>{A.d(b,{d:()=>t,g:()=>C,j:()=>J,m:()=>X});const o=[];var t;!function(c){c[c.DEBUG=0]="DEBUG",c[c.VERBOSE=1]="VERBOSE",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.SILENT=5]="SILENT"}(t||(t={}));const n={debug:t.DEBUG,verbose:t.VERBOSE,info:t.INFO,warn:t.WARN,error:t.ERROR,silent:t.SILENT},h=t.INFO,s={[t.DEBUG]:"log",[t.VERBOSE]:"log",[t.INFO]:"info",[t.WARN]:"warn",[t.ERROR]:"error"},L=function(c,b){if(b<c.logLevel)return;const A=(new Date).toISOString(),o=s[b];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${b})`);for(var t=arguments.length,n=new Array(t>2?t-2:0),h=2;h<t;h++)n[h-2]=arguments[h];console[o](`[${A}]  ${c.name}:`,...n)};class C{constructor(c){this.name=c,this._logLevel=h,this._logHandler=L,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(c){if(!(c in t))throw new TypeError(`Invalid value "${c}" assigned to \`logLevel\``);this._logLevel=c}setLogLevel(c){this._logLevel="string"===typeof c?n[c]:c}get logHandler(){return this._logHandler}set logHandler(c){if("function"!==typeof c)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=c}get userLogHandler(){return this._userLogHandler}set userLogHandler(c){this._userLogHandler=c}debug(){for(var c=arguments.length,b=new Array(c),A=0;A<c;A++)b[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,t.DEBUG,...b),this._logHandler(this,t.DEBUG,...b)}log(){for(var c=arguments.length,b=new Array(c),A=0;A<c;A++)b[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,t.VERBOSE,...b),this._logHandler(this,t.VERBOSE,...b)}info(){for(var c=arguments.length,b=new Array(c),A=0;A<c;A++)b[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,t.INFO,...b),this._logHandler(this,t.INFO,...b)}warn(){for(var c=arguments.length,b=new Array(c),A=0;A<c;A++)b[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,t.WARN,...b),this._logHandler(this,t.WARN,...b)}error(){for(var c=arguments.length,b=new Array(c),A=0;A<c;A++)b[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,t.ERROR,...b),this._logHandler(this,t.ERROR,...b)}}function J(c){o.forEach((b=>{b.setLogLevel(c)}))}function X(c,b){for(const A of o){let o=null;b&&b.level&&(o=n[b.level]),A.userLogHandler=null===c?null:function(b,A){for(var n=arguments.length,h=new Array(n>2?n-2:0),s=2;s<n;s++)h[s-2]=arguments[s];const L=h.map((c=>{if(null==c)return null;if("string"===typeof c)return c;if("number"===typeof c||"boolean"===typeof c)return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch(b){return null}})).filter((c=>c)).join(" ");A>=(null!==o&&void 0!==o?o:b.logLevel)&&c({level:t[A].toLowerCase(),message:L,args:h,type:b.name})}}}}}]);