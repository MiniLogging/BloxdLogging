/*! For license information please see agmqk6.22.deef51e9.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[22],{12209:(R,x,H)=>{H.d(x,{$:()=>i,D:()=>E,G:()=>B,I:()=>s,M:()=>n,Q:()=>V,T:()=>g,X:()=>G,cb:()=>S,d:()=>I,eb:()=>M,h:()=>a,ib:()=>b,kb:()=>C,l:()=>P,ob:()=>q,p:()=>d,pb:()=>L,rb:()=>y,s:()=>D,tb:()=>Z,v:()=>A,vb:()=>F,z:()=>Q});const k=function(R){const x=[];let H=0;for(let k=0;k<R.length;k++){let c=R.charCodeAt(k);c<128?x[H++]=c:c<2048?(x[H++]=c>>6|192,x[H++]=63&c|128):55296===(64512&c)&&k+1<R.length&&56320===(64512&R.charCodeAt(k+1))?(c=65536+((1023&c)<<10)+(1023&R.charCodeAt(++k)),x[H++]=c>>18|240,x[H++]=c>>12&63|128,x[H++]=c>>6&63|128,x[H++]=63&c|128):(x[H++]=c>>12|224,x[H++]=c>>6&63|128,x[H++]=63&c|128)}return x},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(R,x){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=x?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let c=0;c<R.length;c+=3){const x=R[c],t=c+1<R.length,A=t?R[c+1]:0,D=c+2<R.length,U=D?R[c+2]:0,J=x>>2,V=(3&x)<<4|A>>4;let n=(15&A)<<2|U>>6,g=63&U;D||(g=64,t||(n=64)),k.push(H[J],H[V],H[n],H[g])}return k.join("")},encodeString(R,x){return this.HAS_NATIVE_SUPPORT&&!x?btoa(R):this.encodeByteArray(k(R),x)},decodeString(R,x){return this.HAS_NATIVE_SUPPORT&&!x?atob(R):function(R){const x=[];let H=0,k=0;for(;H<R.length;){const c=R[H++];if(c<128)x[k++]=String.fromCharCode(c);else if(c>191&&c<224){const t=R[H++];x[k++]=String.fromCharCode((31&c)<<6|63&t)}else if(c>239&&c<365){const t=((7&c)<<18|(63&R[H++])<<12|(63&R[H++])<<6|63&R[H++])-65536;x[k++]=String.fromCharCode(55296+(t>>10)),x[k++]=String.fromCharCode(56320+(1023&t))}else{const t=R[H++],A=R[H++];x[k++]=String.fromCharCode((15&c)<<12|(63&t)<<6|63&A)}}return x.join("")}(this.decodeStringToByteArray(R,x))},decodeStringToByteArray(R,x){this.init_();const H=x?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let c=0;c<R.length;){const x=H[R.charAt(c++)],A=c<R.length?H[R.charAt(c)]:0;++c;const D=c<R.length?H[R.charAt(c)]:64;++c;const U=c<R.length?H[R.charAt(c)]:64;if(++c,null==x||null==A||null==D||null==U)throw new t;const J=x<<2|A>>4;if(k.push(J),64!==D){const R=A<<4&240|D>>2;if(k.push(R),64!==U){const R=D<<6&192|U;k.push(R)}}}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A=function(R){return function(R){const x=k(R);return c.encodeByteArray(x,!0)}(R).replace(/\./g,"")},D=function(R){try{return c.decodeString(R,!0)}catch(x){console.error("base64Decode failed: ",x)}return null};const U=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof H.g)return H.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,J=()=>{try{return U()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(H){return}const x=R&&D(R[1]);return x&&JSON.parse(x)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},V=R=>{var x,H;return null===(H=null===(x=J())||void 0===x?void 0:x.emulatorHosts)||void 0===H?void 0:H[R]},n=()=>{var R;return null===(R=J())||void 0===R?void 0:R.config},g=R=>{var x;return null===(x=J())||void 0===x?void 0:x[`_${R}`]};class I{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((R,x)=>{this.resolve=R,this.reject=x}))}wrapCallback(R){return(x,H)=>{x?this.reject(x):this.resolve(H),"function"===typeof R&&(this.promise.catch((()=>{})),1===R.length?R(x):R(x,H))}}}function i(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i())}function S(){const R="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof R&&void 0!==R.id}function L(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function b(){const R=i();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function C(){try{return"object"===typeof indexedDB}catch(R){return!1}}function F(){return new Promise(((R,x)=>{try{let H=!0;const k="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(k);c.onsuccess=()=>{c.result.close(),H||self.indexedDB.deleteDatabase(k),R(!0)},c.onupgradeneeded=()=>{H=!1},c.onerror=()=>{var R;x((null===(R=c.error)||void 0===R?void 0:R.message)||"")}}catch(H){x(H)}}))}function d(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class P extends Error{constructor(R,x,H){super(x),this.code=R,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a.prototype.create)}}class a{constructor(R,x,H){this.service=R,this.serviceName=x,this.errors=H}create(R){const x=(arguments.length<=1?void 0:arguments[1])||{},H=`${this.service}/${R}`,k=this.errors[R],c=k?function(R,x){return R.replace(X,((R,H)=>{const k=x[H];return null!=k?String(k):`<${H}?>`}))}(k,x):"Error",t=`${this.serviceName}: ${c} (${H}).`;return new P(H,t,x)}}const X=/\{\$([^}]+)}/g;function M(R){for(const x in R)if(Object.prototype.hasOwnProperty.call(R,x))return!1;return!0}function B(R,x){if(R===x)return!0;const H=Object.keys(R),k=Object.keys(x);for(const c of H){if(!k.includes(c))return!1;const H=R[c],t=x[c];if(o(H)&&o(t)){if(!B(H,t))return!1}else if(H!==t)return!1}for(const c of k)if(!H.includes(c))return!1;return!0}function o(R){return null!==R&&"object"===typeof R}function Z(R){const x=[];for(const[H,k]of Object.entries(R))Array.isArray(k)?k.forEach((R=>{x.push(encodeURIComponent(H)+"="+encodeURIComponent(R))})):x.push(encodeURIComponent(H)+"="+encodeURIComponent(k));return x.length?"&"+x.join("&"):""}function y(R){const x={};return R.replace(/^\?/,"").split("&").forEach((R=>{if(R){const[H,k]=R.split("=");x[decodeURIComponent(H)]=decodeURIComponent(k)}})),x}function s(R){const x=R.indexOf("?");if(!x)return"";const H=R.indexOf("#",x);return R.substring(x,H>0?H:void 0)}function E(R,x){const H=new w(R,x);return H.subscribe.bind(H)}class w{constructor(R,x){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=x,this.task.then((()=>{R(this)})).catch((R=>{this.error(R)}))}next(R){this.forEachObserver((x=>{x.next(R)}))}error(R){this.forEachObserver((x=>{x.error(R)})),this.close(R)}complete(){this.forEachObserver((R=>{R.complete()})),this.close()}subscribe(R,x,H){let k;if(void 0===R&&void 0===x&&void 0===H)throw new Error("Missing Observer.");k=function(R,x){if("object"!==typeof R||null===R)return!1;for(const H of x)if(H in R&&"function"===typeof R[H])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:x,complete:H},void 0===k.next&&(k.next=h),void 0===k.error&&(k.error=h),void 0===k.complete&&(k.complete=h);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch(R){}})),this.observers.push(k),c}unsubscribeOne(R){void 0!==this.observers&&void 0!==this.observers[R]&&(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let x=0;x<this.observers.length;x++)this.sendOne(x,R)}sendOne(R,x){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{x(this.observers[R])}catch(H){"undefined"!==typeof console&&console.error&&console.error(H)}}))}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function h(){}const f=1e3,N=2,W=144e5,K=.5;function Q(R){let x=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;const H=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f)*Math.pow(x,R),k=Math.round(K*H*(Math.random()-.5)*2);return Math.min(W,H+k)}function G(R){return R&&R._delegate?R._delegate:R}},12195:(R,x,H)=>{H.d(x,{c:()=>t.l,d:()=>nR,h:()=>u,l:()=>HR,m:()=>kR,p:()=>RR,q:()=>DR,s:()=>xR,w:()=>tR,A:()=>cR,C:()=>AR,G:()=>qR,I:()=>IR,H:()=>iR,L:()=>gR,O:()=>LR,Q:()=>SR,R:()=>bR});var k=H(12201),c=H(12213),t=H(12209);let A,D;const U=new WeakMap,J=new WeakMap,V=new WeakMap,n=new WeakMap,g=new WeakMap;let I={get(R,x,H){if(R instanceof IDBTransaction){if("done"===x)return J.get(R);if("objectStoreNames"===x)return R.objectStoreNames||V.get(R);if("store"===x)return H.objectStoreNames[1]?void 0:H.objectStore(H.objectStoreNames[0])}return S(R[x])},set:(R,x,H)=>(R[x]=H,!0),has:(R,x)=>R instanceof IDBTransaction&&("done"===x||"store"===x)||x in R};function i(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(R)?function(){for(var x=arguments.length,H=new Array(x),k=0;k<x;k++)H[k]=arguments[k];return R.apply(L(this),H),S(U.get(this))}:function(){for(var x=arguments.length,H=new Array(x),k=0;k<x;k++)H[k]=arguments[k];return S(R.apply(L(this),H))}:function(x){for(var H=arguments.length,k=new Array(H>1?H-1:0),c=1;c<H;c++)k[c-1]=arguments[c];const t=R.call(L(this),x,...k);return V.set(t,x.sort?x.sort():[x]),S(t)}}function q(R){return"function"===typeof R?i(R):(R instanceof IDBTransaction&&function(R){if(J.has(R))return;const x=new Promise(((x,H)=>{const k=()=>{R.removeEventListener("complete",c),R.removeEventListener("error",t),R.removeEventListener("abort",t)},c=()=>{x(),k()},t=()=>{H(R.error||new DOMException("AbortError","AbortError")),k()};R.addEventListener("complete",c),R.addEventListener("error",t),R.addEventListener("abort",t)}));J.set(R,x)}(R),x=R,(A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((R=>x instanceof R))?new Proxy(R,I):R);var x}function S(R){if(R instanceof IDBRequest)return function(R){const x=new Promise(((x,H)=>{const k=()=>{R.removeEventListener("success",c),R.removeEventListener("error",t)},c=()=>{x(S(R.result)),k()},t=()=>{H(R.error),k()};R.addEventListener("success",c),R.addEventListener("error",t)}));return x.then((x=>{x instanceof IDBCursor&&U.set(x,R)})).catch((()=>{})),g.set(x,R),x}(R);if(n.has(R))return n.get(R);const x=q(R);return x!==R&&(n.set(R,x),g.set(x,R)),x}const L=R=>g.get(R);const b=["get","getKey","getAll","getAllKeys","count"],C=["put","add","delete","clear"],F=new Map;function d(R,x){if(!(R instanceof IDBDatabase)||x in R||"string"!==typeof x)return;if(F.get(x))return F.get(x);const H=x.replace(/FromIndex$/,""),k=x!==H,c=C.includes(H);if(!(H in(k?IDBIndex:IDBObjectStore).prototype)||!c&&!b.includes(H))return;const t=async function(R){const x=this.transaction(R,c?"readwrite":"readonly");let t=x.store;for(var A=arguments.length,D=new Array(A>1?A-1:0),U=1;U<A;U++)D[U-1]=arguments[U];return k&&(t=t.index(D.shift())),(await Promise.all([t[H](...D),c&&x.done]))[0]};return F.set(x,t),t}I=(R=>({...R,get:(x,H,k)=>d(x,H)||R.get(x,H,k),has:(x,H)=>!!d(x,H)||R.has(x,H)}))(I);class P{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map((R=>{if(function(R){const x=R.getComponent();return"VERSION"===(null===x||void 0===x?void 0:x.type)}(R)){const x=R.getImmediate();return`${x.library}/${x.version}`}return null})).filter((R=>R)).join(" ")}}const a="@firebase/app",X="0.9.13",M=new c.d("@firebase/app"),B="@firebase/app-compat",o="@firebase/analytics-compat",Z="@firebase/analytics",y="@firebase/app-check-compat",s="@firebase/app-check",E="@firebase/auth",w="@firebase/auth-compat",h="@firebase/database",f="@firebase/database-compat",N="@firebase/functions",W="@firebase/functions-compat",K="@firebase/installations",Q="@firebase/installations-compat",G="@firebase/messaging",T="@firebase/messaging-compat",v="@firebase/performance",p="@firebase/performance-compat",r="@firebase/remote-config",z="@firebase/remote-config-compat",j="@firebase/storage",m="@firebase/storage-compat",O="@firebase/firestore",l="@firebase/firestore-compat",e="firebase",u="[DEFAULT]",Y={[a]:"fire-core",[B]:"fire-core-compat",[Z]:"fire-analytics",[o]:"fire-analytics-compat",[s]:"fire-app-check",[y]:"fire-app-check-compat",[E]:"fire-auth",[w]:"fire-auth-compat",[h]:"fire-rtdb",[f]:"fire-rtdb-compat",[N]:"fire-fn",[W]:"fire-fn-compat",[K]:"fire-iid",[Q]:"fire-iid-compat",[G]:"fire-fcm",[T]:"fire-fcm-compat",[v]:"fire-perf",[p]:"fire-perf-compat",[r]:"fire-rc",[z]:"fire-rc-compat",[j]:"fire-gcs",[m]:"fire-gcs-compat",[O]:"fire-fst",[l]:"fire-fst-compat","fire-js":"fire-js",[e]:"fire-js-all"},RR=new Map,xR=new Map;function HR(R,x){try{R.container.fh(x)}catch(H){M.debug(`Component ${x.name} failed to register with FirebaseApp ${R.name}`,H)}}function kR(R,x){R.container.addOrOverwriteComponent(x)}function cR(R){const x=R.name;if(xR.has(x))return M.debug(`There were multiple attempts to register component ${x}.`),!1;xR.set(x,R);for(const H of RR.values())HR(H,R);return!0}function tR(R,x){const H=R.container.getProvider("heartbeat").getImmediate({optional:!0});return H&&H.triggerHeartbeat(),R.container.getProvider(x)}function AR(R,x){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;tR(R,x).clearInstance(H)}function DR(){xR.clear()}const UR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},JR=new t.h("app","Firebase",UR);class VR{constructor(R,x,H){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},x),this._name=x.name,this._automaticDataCollectionEnabled=x.automaticDataCollectionEnabled,this._container=H,this.container.fh(new k.f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw JR.create("app-deleted",{appName:this._name})}}const nR="9.23.0";function gR(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},H=R;if("object"!==typeof x){x={name:x}}const c=Object.assign({name:u,automaticDataCollectionEnabled:!1},x),A=c.name;if("string"!==typeof A||!A)throw JR.create("bad-app-name",{appName:String(A)});if(H||(H=(0,t.M)()),!H)throw JR.create("no-options");const D=RR.get(A);if(D){if((0,t.G)(H,D.options)&&(0,t.G)(c,D.config))return D;throw JR.create("duplicate-app",{appName:A})}const U=new k.e(A);for(const k of xR.values())U.fh(k);const J=new VR(H,c,U);return RR.set(A,J),J}function IR(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const x=RR.get(R);if(!x&&R===u&&(0,t.M)())return gR();if(!x)throw JR.create("no-app",{appName:R});return x}function iR(){return Array.from(RR.values())}async function qR(R){const x=R.name;RR.has(x)&&(RR.delete(x),await Promise.all(R.container.getProviders().map((R=>R.delete()))),R.isDeleted=!0)}function SR(R,x,H){var c;let t=null!==(c=Y[R])&&void 0!==c?c:R;H&&(t+=`-${H}`);const A=t.match(/\s|\//),D=x.match(/\s|\//);if(A||D){const R=[`Unable to register library "${t}" with version "${x}":`];return A&&R.push(`library name "${t}" contains illegal characters (whitespace or "/")`),A&&D&&R.push("and"),D&&R.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void M.warn(R.join(" "))}cR(new k.f(`${t}-version`,(()=>({library:t,version:x})),"VERSION"))}function LR(R,x){if(null!==R&&"function"!==typeof R)throw JR.create("invalid-log-argument");(0,c.i)(R,x)}function bR(R){(0,c.g)(R)}const CR="firebase-heartbeat-store";let FR=null;function dR(){return FR||(FR=function(R,x){let{blocked:H,upgrade:k,blocking:c,terminated:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const A=indexedDB.open(R,x),D=S(A);return k&&A.addEventListener("upgradeneeded",(R=>{k(S(A.result),R.oldVersion,R.newVersion,S(A.transaction),R)})),H&&A.addEventListener("blocked",(R=>H(R.oldVersion,R.newVersion,R))),D.then((R=>{t&&R.addEventListener("close",(()=>t())),c&&R.addEventListener("versionchange",(R=>c(R.oldVersion,R.newVersion,R)))})).catch((()=>{})),D}("firebase-heartbeat-database",1,{upgrade:(R,x)=>{if(0===x)R.createObjectStore(CR)}}).catch((R=>{throw JR.create("idb-open",{originalErrorMessage:R.message})}))),FR}async function PR(R,x){try{const H=(await dR()).transaction(CR,"readwrite"),k=H.objectStore(CR);await k.put(x,aR(R)),await H.done}catch(H){if(H instanceof t.l)M.warn(H.message);else{const R=JR.create("idb-set",{originalErrorMessage:null===H||void 0===H?void 0:H.message});M.warn(R.message)}}}function aR(R){return`${R.name}!${R.options.appId}`}class XR{constructor(R){this.container=R,this._heartbeatsCache=null;const x=this.container.getProvider("app").getImmediate();this.Xd=new BR(x),this._heartbeatsCachePromise=this.Xd.read().then((R=>(this._heartbeatsCache=R,R)))}async triggerHeartbeat(){const R=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),x=MR();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==x&&!this._heartbeatsCache.heartbeats.some((R=>R.date===x)))return this._heartbeatsCache.heartbeats.push({date:x,agent:R}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((R=>{const x=new Date(R.date).valueOf();return Date.now()-x<=2592e6})),this.Xd.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const R=MR(),{heartbeatsToSend:x,unsentEntries:H}=function(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const H=[];let k=R.slice();for(const c of R){const R=H.find((R=>R.agent===c.agent));if(R){if(R.dates.push(c.date),oR(H)>x){R.dates.pop();break}}else if(H.push({agent:c.agent,dates:[c.date]}),oR(H)>x){H.pop();break}k=k.slice(1)}return{heartbeatsToSend:H,unsentEntries:k}}(this._heartbeatsCache.heartbeats),k=(0,t.v)(JSON.stringify({version:2,heartbeats:x}));return this._heartbeatsCache.lastSentHeartbeatDate=R,H.length>0?(this._heartbeatsCache.heartbeats=H,await this.Xd.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Xd.overwrite(this._heartbeatsCache)),k}}function MR(){return(new Date).toISOString().substring(0,10)}class BR{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,t.kb)()&&(0,t.vb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(R){try{const x=await dR();return await x.transaction(CR).objectStore(CR).get(aR(R))}catch(x){if(x instanceof t.l)M.warn(x.message);else{const R=JR.create("idb-get",{originalErrorMessage:null===x||void 0===x?void 0:x.message});M.warn(R.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(R){var x;if(await this._canUseIndexedDBPromise){const H=await this.read();return PR(this.app,{lastSentHeartbeatDate:null!==(x=R.lastSentHeartbeatDate)&&void 0!==x?x:H.lastSentHeartbeatDate,heartbeats:R.heartbeats})}}async add(R){var x;if(await this._canUseIndexedDBPromise){const H=await this.read();return PR(this.app,{lastSentHeartbeatDate:null!==(x=R.lastSentHeartbeatDate)&&void 0!==x?x:H.lastSentHeartbeatDate,heartbeats:[...H.heartbeats,...R.heartbeats]})}}}function oR(R){return(0,t.v)(JSON.stringify({version:2,heartbeats:R})).length}var ZR;ZR="",cR(new k.f("platform-logger",(R=>new P(R)),"PRIVATE")),cR(new k.f("heartbeat",(R=>new XR(R)),"PRIVATE")),SR(a,X,ZR),SR(a,X,"esm2017"),SR("fire-js","")},12201:(R,x,H)=>{H.d(x,{e:()=>D,f:()=>c});var k=H(12209);class c{constructor(R,x,H){this.name=R,this.instanceFactory=x,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(R){return this.instantiationMode=R,this}setMultipleInstances(R){return this.multipleInstances=R,this}setServiceProps(R){return this.serviceProps=R,this}setInstanceCreatedCallback(R){return this.onInstanceCreated=R,this}}const t="[DEFAULT]";class A{constructor(R,x){this.name=R,this.container=x,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(R){const x=this.normalizeInstanceIdentifier(R);if(!this.instancesDeferred.has(x)){const R=new k.d;if(this.instancesDeferred.set(x,R),this.isInitialized(x)||this.shouldAutoInitialize())try{const H=this.getOrInitializeService({instanceIdentifier:x});H&&R.resolve(H)}catch(H){}}return this.instancesDeferred.get(x).promise}getImmediate(R){var x;const H=this.normalizeInstanceIdentifier(null===R||void 0===R?void 0:R.identifier),k=null!==(x=null===R||void 0===R?void 0:R.optional)&&void 0!==x&&x;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(k)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(c){if(k)return null;throw c}}getComponent(){return this.component}setComponent(R){if(R.name!==this.name)throw Error(`Mismatching Component ${R.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=R,this.shouldAutoInitialize()){if(function(R){return"EAGER"===R.instantiationMode}(R))try{this.getOrInitializeService({instanceIdentifier:t})}catch(x){}for(const[R,H]of this.instancesDeferred.entries()){const k=this.normalizeInstanceIdentifier(R);try{const R=this.getOrInitializeService({instanceIdentifier:k});H.resolve(R)}catch(x){}}}}clearInstance(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;this.instancesDeferred.delete(R),this.instancesOptions.delete(R),this.instances.delete(R)}async delete(){const R=Array.from(this.instances.values());await Promise.all([...R.filter((R=>"INTERNAL"in R)).map((R=>R.INTERNAL.delete())),...R.filter((R=>"_delete"in R)).map((R=>R._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return this.instances.has(R)}getOptions(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return this.instancesOptions.get(R)||{}}initialize(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:x={}}=R,H=this.normalizeInstanceIdentifier(R.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const k=this.getOrInitializeService({instanceIdentifier:H,options:x});for(const[c,t]of this.instancesDeferred.entries()){H===this.normalizeInstanceIdentifier(c)&&t.resolve(k)}return k}gl(R,x){var H;const k=this.normalizeInstanceIdentifier(x),c=null!==(H=this.onInitCallbacks.get(k))&&void 0!==H?H:new Set;c.add(R),this.onInitCallbacks.set(k,c);const t=this.instances.get(k);return t&&R(t,k),()=>{c.delete(R)}}invokeOnInitCallbacks(R,x){const H=this.onInitCallbacks.get(x);if(H)for(const c of H)try{c(R,x)}catch(k){}}getOrInitializeService(R){let{instanceIdentifier:x,options:H={}}=R,k=this.instances.get(x);if(!k&&this.component&&(k=this.component.instanceFactory(this.container,{instanceIdentifier:(c=x,c===t?void 0:c),options:H}),this.instances.set(x,k),this.instancesOptions.set(x,H),this.invokeOnInitCallbacks(k,x),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,x,k)}catch(A){}var c;return k||null}normalizeInstanceIdentifier(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return this.component?this.component.multipleInstances?R:t:R}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(R){this.name=R,this.providers=new Map}fh(R){const x=this.getProvider(R.name);if(x.isComponentSet())throw new Error(`Component ${R.name} has already been registered with ${this.name}`);x.setComponent(R)}addOrOverwriteComponent(R){this.getProvider(R.name).isComponentSet()&&this.providers.delete(R.name),this.fh(R)}getProvider(R){if(this.providers.has(R))return this.providers.get(R);const x=new A(R,this);return this.providers.set(R,x),x}getProviders(){return Array.from(this.providers.values())}}},12213:(R,x,H)=>{H.d(x,{c:()=>c,d:()=>J,g:()=>V,i:()=>n});const k=[];var c;!function(R){R[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT"}(c||(c={}));const t={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},A=c.INFO,D={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},U=function(R,x){if(x<R.logLevel)return;const H=(new Date).toISOString(),k=D[x];if(!k)throw new Error(`Attempted to log a message with an invalid logType (value: ${x})`);for(var c=arguments.length,t=new Array(c>2?c-2:0),A=2;A<c;A++)t[A-2]=arguments[A];console[k](`[${H}]  ${R.name}:`,...t)};class J{constructor(R){this.name=R,this._logLevel=A,this._logHandler=U,this._userLogHandler=null,k.push(this)}get logLevel(){return this._logLevel}set logLevel(R){if(!(R in c))throw new TypeError(`Invalid value "${R}" assigned to \`logLevel\``);this._logLevel=R}setLogLevel(R){this._logLevel="string"===typeof R?t[R]:R}get logHandler(){return this._logHandler}set logHandler(R){if("function"!==typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R}get userLogHandler(){return this._userLogHandler}set userLogHandler(R){this._userLogHandler=R}debug(){for(var R=arguments.length,x=new Array(R),H=0;H<R;H++)x[H]=arguments[H];this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...x),this._logHandler(this,c.DEBUG,...x)}log(){for(var R=arguments.length,x=new Array(R),H=0;H<R;H++)x[H]=arguments[H];this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...x),this._logHandler(this,c.VERBOSE,...x)}info(){for(var R=arguments.length,x=new Array(R),H=0;H<R;H++)x[H]=arguments[H];this._userLogHandler&&this._userLogHandler(this,c.INFO,...x),this._logHandler(this,c.INFO,...x)}warn(){for(var R=arguments.length,x=new Array(R),H=0;H<R;H++)x[H]=arguments[H];this._userLogHandler&&this._userLogHandler(this,c.WARN,...x),this._logHandler(this,c.WARN,...x)}error(){for(var R=arguments.length,x=new Array(R),H=0;H<R;H++)x[H]=arguments[H];this._userLogHandler&&this._userLogHandler(this,c.ERROR,...x),this._logHandler(this,c.ERROR,...x)}}function V(R){k.forEach((x=>{x.setLogLevel(R)}))}function n(R,x){for(const H of k){let k=null;x&&x.level&&(k=t[x.level]),H.userLogHandler=null===R?null:function(x,H){for(var t=arguments.length,A=new Array(t>2?t-2:0),D=2;D<t;D++)A[D-2]=arguments[D];const U=A.map((R=>{if(null==R)return null;if("string"===typeof R)return R;if("number"===typeof R||"boolean"===typeof R)return R.toString();if(R instanceof Error)return R.message;try{return JSON.stringify(R)}catch(x){return null}})).filter((R=>R)).join(" ");H>=(null!==k&&void 0!==k?k:x.logLevel)&&R({level:c[H].toLowerCase(),message:U,args:A,type:x.name})}}}}}]);