"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[2],{2274:(J,T,b)=>{b.r(T),b.d(T,{_IESTextureLoader:()=>Y});var q=b(717);function t(J){return J.split(" ").filter((J=>""!==J)).map((J=>parseFloat(J)))}function j(J,T,b){for(;b.length!==T;){const T=t(J.lines[J.index++]);b.push(...T)}}function B(J,T,b){let t=0,j=0,B=0,Y=0,C=0,F=0;for(let q=0;q<J.numberOfHorizontalAngles-1;q++)if(b<J.horizontalAngles[q+1]||q===J.numberOfHorizontalAngles-2){j=q,B=J.horizontalAngles[q],Y=J.horizontalAngles[q+1];break}for(let q=0;q<J.numberOfVerticalAngles-1;q++)if(T<J.verticalAngles[q+1]||q===J.numberOfVerticalAngles-2){t=q,C=J.verticalAngles[q],F=J.verticalAngles[q+1];break}const A=Y-B,a=F-C;if(0===a)return 0;const P=0===A?0:(b-B)/A,v=(T-C)/a,G=0===A?j:j+1,x=(0,q.m)(J.candelaValues[j][t],J.candelaValues[G][t],P),I=(0,q.m)(J.candelaValues[j][t+1],J.candelaValues[G][t+1],P);return(0,q.m)(x,I,v)}class Y{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(J,T,b){const q=function(J){const T={lines:new TextDecoder("utf-8").decode(J).split("\n"),index:0},b={version:T.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(T.index=1;T.lines.length>0&&!T.lines[T.index].includes("TILT=");)T.index++;T.lines[T.index].includes("INCLUDE"),T.index++;const q=t(T.lines[T.index++]);b.numberOfLights=q[0],b.lumensPerLamp=q[1],b.candelaMultiplier=q[2],b.numberOfVerticalAngles=q[3],b.numberOfHorizontalAngles=q[4],b.photometricType=q[5],b.unitsType=q[6],b.width=q[7],b.length=q[8],b.height=q[9];const Y=t(T.lines[T.index++]);b.ballastFactor=Y[0],b.fileGenerationType=Y[1],b.inputWatts=Y[2];for(let t=0;t<b.numberOfHorizontalAngles;t++)b.candelaValues[t]=[];j(T,b.numberOfVerticalAngles,b.verticalAngles),j(T,b.numberOfHorizontalAngles,b.horizontalAngles);for(let t=0;t<b.numberOfHorizontalAngles;t++)j(T,b.numberOfVerticalAngles,b.candelaValues[t]);let C=-1;for(let t=0;t<b.numberOfHorizontalAngles;t++)for(let J=0;J<b.numberOfVerticalAngles;J++)b.candelaValues[t][J]*=b.candelaValues[t][J]*b.candelaMultiplier*b.ballastFactor*b.fileGenerationType,C=Math.max(C,b.candelaValues[t][J]);if(C>0)for(let t=0;t<b.numberOfHorizontalAngles;t++)for(let J=0;J<b.numberOfVerticalAngles;J++)b.candelaValues[t][J]/=C;const F=180,A=360,a=new Float32Array(64800),P=b.horizontalAngles[0],v=b.horizontalAngles[b.numberOfHorizontalAngles-1];for(let t=0;t<64800;t++){let J=t%A;const T=Math.floor(t/A);v-P!==0&&(J<P||J>=v)&&(J%=2*v,J>v&&(J=2*v-J)),a[T+J*F]=B(b,T,J)}return{width:180,height:1,data:a}}(new Uint8Array(J.buffer,J.byteOffset,J.byteLength));b(q.width,q.height,!1,!1,(()=>{const J=T.getEngine();T.type=1,T.format=6,T._gammaSpace=!1,J._uploadDataToTextureDirectly(T,q.data)}))}}}}]);