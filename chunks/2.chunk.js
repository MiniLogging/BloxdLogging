"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[2],{2259:(t,q,S)=>{S.r(q),S.d(q,{_IESTextureLoader:()=>r});var o=S(689);function B(t){return t.split(" ").filter((t=>""!==t)).map((t=>parseFloat(t)))}function z(t,q,S){for(;S.length!==q;){const q=B(t.lines[t.index++]);S.push(...q)}}function L(t,q,S){let B=0,z=0,L=0,r=0,e=0,C=0;for(let o=0;o<t.numberOfHorizontalAngles-1;o++)if(S<t.horizontalAngles[o+1]||o===t.numberOfHorizontalAngles-2){z=o,L=t.horizontalAngles[o],r=t.horizontalAngles[o+1];break}for(let o=0;o<t.numberOfVerticalAngles-1;o++)if(q<t.verticalAngles[o+1]||o===t.numberOfVerticalAngles-2){B=o,e=t.verticalAngles[o],C=t.verticalAngles[o+1];break}const Z=r-L,b=C-e;if(0===b)return 0;const O=0===Z?0:(S-L)/Z,i=(q-e)/b,h=0===Z?z:z+1,l=(0,o.Lerp)(t.candelaValues[z][B],t.candelaValues[h][B],O),I=(0,o.Lerp)(t.candelaValues[z][B+1],t.candelaValues[h][B+1],O);return(0,o.Lerp)(l,I,i)}class r{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(t,q,S){const o=function(t){const q={lines:new TextDecoder("utf-8").decode(t).split("\n"),index:0},S={version:q.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(q.index=1;q.lines.length>0&&!q.lines[q.index].includes("TILT=");)q.index++;q.lines[q.index].includes("INCLUDE"),q.index++;const o=B(q.lines[q.index++]);S.numberOfLights=o[0],S.lumensPerLamp=o[1],S.candelaMultiplier=o[2],S.numberOfVerticalAngles=o[3],S.numberOfHorizontalAngles=o[4],S.photometricType=o[5],S.unitsType=o[6],S.width=o[7],S.length=o[8],S.height=o[9];const r=B(q.lines[q.index++]);S.ballastFactor=r[0],S.fileGenerationType=r[1],S.inputWatts=r[2];for(let B=0;B<S.numberOfHorizontalAngles;B++)S.candelaValues[B]=[];z(q,S.numberOfVerticalAngles,S.verticalAngles),z(q,S.numberOfHorizontalAngles,S.horizontalAngles);for(let B=0;B<S.numberOfHorizontalAngles;B++)z(q,S.numberOfVerticalAngles,S.candelaValues[B]);let e=-1;for(let B=0;B<S.numberOfHorizontalAngles;B++)for(let t=0;t<S.numberOfVerticalAngles;t++)S.candelaValues[B][t]*=S.candelaValues[B][t]*S.candelaMultiplier*S.ballastFactor*S.fileGenerationType,e=Math.max(e,S.candelaValues[B][t]);if(e>0)for(let B=0;B<S.numberOfHorizontalAngles;B++)for(let t=0;t<S.numberOfVerticalAngles;t++)S.candelaValues[B][t]/=e;const C=180,Z=360,b=new Float32Array(64800),O=S.horizontalAngles[0],i=S.horizontalAngles[S.numberOfHorizontalAngles-1];for(let B=0;B<64800;B++){let t=B%Z;const q=Math.floor(B/Z);i-O!==0&&(t<O||t>=i)&&(t%=2*i,t>i&&(t=2*i-t)),b[q+t*C]=L(S,q,t)}return{width:180,height:1,data:b}}(new Uint8Array(t.buffer,t.byteOffset,t.byteLength));S(o.width,o.height,!1,!1,(()=>{const t=q.getEngine();q.type=1,q.format=6,q._gammaSpace=!1,t._uploadDataToTextureDirectly(q,o.data)}))}}}}]);