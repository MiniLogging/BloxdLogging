"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[2],{2344:(u,F,z)=>{z.r(F),z.d(F,{_IESTextureLoader:()=>I});var p=z(749);function b(u){return u.split(" ").filter((u=>""!==u)).map((u=>parseFloat(u)))}function R(u,F,z){for(;z.length!==F;){const F=b(u.lines[u.index++]);z.push(...F)}}function c(u,F,z){let b=0,R=0,c=0,I=0,G=0,X=0;for(let p=0;p<u.numberOfHorizontalAngles-1;p++)if(z<u.horizontalAngles[p+1]||p===u.numberOfHorizontalAngles-2){R=p,c=u.horizontalAngles[p],I=u.horizontalAngles[p+1];break}for(let p=0;p<u.numberOfVerticalAngles-1;p++)if(F<u.verticalAngles[p+1]||p===u.numberOfVerticalAngles-2){b=p,G=u.verticalAngles[p],X=u.verticalAngles[p+1];break}const j=I-c,W=X-G;if(0===W)return 0;const E=0===j?0:(z-c)/j,L=(F-G)/W,k=0===j?R:R+1,N=(0,p.o)(u.candelaValues[R][b],u.candelaValues[k][b],E),Y=(0,p.o)(u.candelaValues[R][b+1],u.candelaValues[k][b+1],E);return(0,p.o)(N,Y,L)}class I{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(u,F,z){const p=function(u){const F={lines:new TextDecoder("utf-8").decode(u).split("\n"),index:0},z={version:F.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(F.index=1;F.lines.length>0&&!F.lines[F.index].includes("TILT=");)F.index++;F.lines[F.index].includes("INCLUDE"),F.index++;const p=b(F.lines[F.index++]);z.numberOfLights=p[0],z.lumensPerLamp=p[1],z.candelaMultiplier=p[2],z.numberOfVerticalAngles=p[3],z.numberOfHorizontalAngles=p[4],z.photometricType=p[5],z.unitsType=p[6],z.width=p[7],z.length=p[8],z.height=p[9];const I=b(F.lines[F.index++]);z.ballastFactor=I[0],z.fileGenerationType=I[1],z.inputWatts=I[2];for(let b=0;b<z.numberOfHorizontalAngles;b++)z.candelaValues[b]=[];R(F,z.numberOfVerticalAngles,z.verticalAngles),R(F,z.numberOfHorizontalAngles,z.horizontalAngles);for(let b=0;b<z.numberOfHorizontalAngles;b++)R(F,z.numberOfVerticalAngles,z.candelaValues[b]);let G=-1;for(let b=0;b<z.numberOfHorizontalAngles;b++)for(let u=0;u<z.numberOfVerticalAngles;u++)z.candelaValues[b][u]*=z.candelaValues[b][u]*z.candelaMultiplier*z.ballastFactor*z.fileGenerationType,G=Math.max(G,z.candelaValues[b][u]);if(G>0)for(let b=0;b<z.numberOfHorizontalAngles;b++)for(let u=0;u<z.numberOfVerticalAngles;u++)z.candelaValues[b][u]/=G;const X=180,j=360,W=new Float32Array(64800),E=z.horizontalAngles[0],L=z.horizontalAngles[z.numberOfHorizontalAngles-1];for(let b=0;b<64800;b++){let u=b%j;const F=Math.floor(b/j);L-E!==0&&(u<E||u>=L)&&(u%=2*L,u>L&&(u=2*L-u)),W[F+u*X]=c(z,F,u)}return{width:180,height:1,data:W}}(new Uint8Array(u.buffer,u.byteOffset,u.byteLength));z(p.width,p.height,!1,!1,(()=>{const u=F.getEngine();F.type=1,F.format=6,F._gammaSpace=!1,u._uploadDataToTextureDirectly(F,p.data)}))}}}}]);