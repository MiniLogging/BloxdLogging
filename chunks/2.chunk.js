"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[2],{2002:(U,W,l)=>{l.r(W),l.d(W,{_IESTextureLoader:()=>B});var M=l(722);function t(U){return U.split(" ").filter((U=>""!==U)).map((U=>parseFloat(U)))}function L(U,W,l){for(;l.length!==W;){const W=t(U.lines[U.index++]);l.push(...W)}}function p(U,W,l){let t=0,L=0,p=0,B=0,k=0,A=0;for(let M=0;M<U.numberOfHorizontalAngles-1;M++)if(l<U.horizontalAngles[M+1]||M===U.numberOfHorizontalAngles-2){L=M,p=U.horizontalAngles[M],B=U.horizontalAngles[M+1];break}for(let M=0;M<U.numberOfVerticalAngles-1;M++)if(W<U.verticalAngles[M+1]||M===U.numberOfVerticalAngles-2){t=M,k=U.verticalAngles[M],A=U.verticalAngles[M+1];break}const q=B-p,y=A-k;if(0===y)return 0;const j=0===q?0:(l-p)/q,s=(W-k)/y,w=0===q?L:L+1,K=(0,M.Lerp)(U.candelaValues[L][t],U.candelaValues[w][t],j),r=(0,M.Lerp)(U.candelaValues[L][t+1],U.candelaValues[w][t+1],j);return(0,M.Lerp)(K,r,s)}class B{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(U,W,l){const M=function(U){const W={lines:new TextDecoder("utf-8").decode(U).split("\n"),index:0},l={version:W.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(W.index=1;W.lines.length>0&&!W.lines[W.index].includes("TILT=");)W.index++;W.lines[W.index].includes("INCLUDE"),W.index++;const M=t(W.lines[W.index++]);l.numberOfLights=M[0],l.lumensPerLamp=M[1],l.candelaMultiplier=M[2],l.numberOfVerticalAngles=M[3],l.numberOfHorizontalAngles=M[4],l.photometricType=M[5],l.unitsType=M[6],l.width=M[7],l.length=M[8],l.height=M[9];const B=t(W.lines[W.index++]);l.ballastFactor=B[0],l.fileGenerationType=B[1],l.inputWatts=B[2];for(let t=0;t<l.numberOfHorizontalAngles;t++)l.candelaValues[t]=[];L(W,l.numberOfVerticalAngles,l.verticalAngles),L(W,l.numberOfHorizontalAngles,l.horizontalAngles);for(let t=0;t<l.numberOfHorizontalAngles;t++)L(W,l.numberOfVerticalAngles,l.candelaValues[t]);let k=-1;for(let t=0;t<l.numberOfHorizontalAngles;t++)for(let U=0;U<l.numberOfVerticalAngles;U++)l.candelaValues[t][U]*=l.candelaValues[t][U]*l.candelaMultiplier*l.ballastFactor*l.fileGenerationType,k=Math.max(k,l.candelaValues[t][U]);if(k>0)for(let t=0;t<l.numberOfHorizontalAngles;t++)for(let U=0;U<l.numberOfVerticalAngles;U++)l.candelaValues[t][U]/=k;const A=180,q=360,y=new Float32Array(64800),j=l.horizontalAngles[0],s=l.horizontalAngles[l.numberOfHorizontalAngles-1];for(let t=0;t<64800;t++){let U=t%q;const W=Math.floor(t/q);s-j!==0&&(U<j||U>=s)&&(U%=2*s,U>s&&(U=2*s-U)),y[W+U*A]=p(l,W,U)}return{width:180,height:1,data:y}}(new Uint8Array(U.buffer,U.byteOffset,U.byteLength));l(M.width,M.height,!1,!1,(()=>{const U=W.getEngine();W.type=1,W.format=6,W._gammaSpace=!1,U._uploadDataToTextureDirectly(W,M.data)}))}}}}]);