"use strict";(self.a14qw1h7fq=self.a14qw1h7fq||[]).push([[80],{14330:(R,J,B)=>{B.r(J),B.d(J,{FlowGraphStopAnimationBlock:()=>r});var Q=B(12894),h=B(11142),y=B(11043),N=B(12943);class r extends N.c{constructor(R){super(R),this.animationGroup=this.registerDataInput("animationGroup",Q.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",Q.t,-1)}_preparePendingTasks(R){const J=this.animationGroup.getValue(R),B=this.stopAtFrame.getValue(R)??-1,Q=R._getGlobalContextVariable("pendingStopAnimations",[]);Q.push({uniqueId:J.uniqueId,stopAtFrame:B}),R._setGlobalContextVariable("pendingStopAnimations",Q)}_cancelPendingTasks(R){const J=this.animationGroup.getValue(R),B=R._getGlobalContextVariable("pendingStopAnimations",[]);for(let Q=0;Q<B.length;Q++)if(B[Q].uniqueId===J.uniqueId){B.splice(Q,1),R._setGlobalContextVariable("pendingStopAnimations",B);break}}_execute(R){const J=this.animationGroup.getValue(R),B=this.stopAtFrame.getValue(R)??-1;return J?isNaN(B)?this._reportError(R,"Invalid stop time."):(B>0?this._startPendingTasks(R):this._stopAnimation(J,R),void this.out._activateSignal(R)):(y.d.Warn("No animation group provided to stop."),this._reportError(R,"No animation group provided to stop."))}_executeOnTick(R){const J=this.animationGroup.getValue(R),B=R._getGlobalContextVariable("pendingStopAnimations",[]);for(let Q=0;Q<B.length;Q++)if(B[Q].uniqueId===J.uniqueId&&J.getCurrentFrame()>=B[Q].stopAtFrame){this._stopAnimation(J,R),B.splice(Q,1),R._setGlobalContextVariable("pendingStopAnimations",B),this.done._activateSignal(R),R._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(R,J){const B=J._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),Q=B.indexOf(R.uniqueId);-1!==Q&&(R.stop(),B.splice(Q,1),J._setGlobalContextVariable("currentlyRunningAnimationGroups",B))}}(0,h.h)("FlowGraphStopAnimationBlock",r)}}]);