"use strict";(self.rvold1i0ywi=self.rvold1i0ywi||[]).push([[80],{14421:(F,b,Q)=>{Q.r(b),Q.d(b,{FlowGraphStopAnimationBlock:()=>W});var C=Q(12951),z=Q(11265),t=Q(11146),g=Q(12995);class W extends g.c{constructor(F){super(F),this.animationGroup=this.registerDataInput("animationGroup",C.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",C.m,-1)}_preparePendingTasks(F){const b=this.animationGroup.getValue(F),Q=this.stopAtFrame.getValue(F)??-1,C=F._getGlobalContextVariable("pendingStopAnimations",[]);C.push({uniqueId:b.uniqueId,stopAtFrame:Q}),F._setGlobalContextVariable("pendingStopAnimations",C)}_cancelPendingTasks(F){const b=this.animationGroup.getValue(F),Q=F._getGlobalContextVariable("pendingStopAnimations",[]);for(let C=0;C<Q.length;C++)if(Q[C].uniqueId===b.uniqueId){Q.splice(C,1),F._setGlobalContextVariable("pendingStopAnimations",Q);break}}_execute(F){const b=this.animationGroup.getValue(F),Q=this.stopAtFrame.getValue(F)??-1;return b?isNaN(Q)?this._reportError(F,"Invalid stop time."):(Q>0?this._startPendingTasks(F):this._stopAnimation(b,F),void this.out._activateSignal(F)):(t.e.Warn("No animation group provided to stop."),this._reportError(F,"No animation group provided to stop."))}_executeOnTick(F){const b=this.animationGroup.getValue(F),Q=F._getGlobalContextVariable("pendingStopAnimations",[]);for(let C=0;C<Q.length;C++)if(Q[C].uniqueId===b.uniqueId&&b.getCurrentFrame()>=Q[C].stopAtFrame){this._stopAnimation(b,F),Q.splice(C,1),F._setGlobalContextVariable("pendingStopAnimations",Q),this.done._activateSignal(F),F._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(F,b){const Q=b._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),C=Q.indexOf(F.uniqueId);-1!==C&&(F.stop(),Q.splice(C,1),b._setGlobalContextVariable("currentlyRunningAnimationGroups",Q))}}(0,z.g)("FlowGraphStopAnimationBlock",W)}}]);