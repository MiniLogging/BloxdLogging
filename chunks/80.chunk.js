"use strict";(self.c2c3ycupenc=self.c2c3ycupenc||[]).push([[80],{14888:(c,r,D)=>{D.r(r),D.d(r,{FlowGraphStopAnimationBlock:()=>a});var W=D(13392),B=D(11637),t=D(11509),u=D(13429);class a extends u.e{constructor(c){super(c),this.animationGroup=this.registerDataInput("animationGroup",W.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",W.u,-1)}_preparePendingTasks(c){const r=this.animationGroup.getValue(c),D=this.stopAtFrame.getValue(c)??-1,W=c._getGlobalContextVariable("pendingStopAnimations",[]);W.push({uniqueId:r.uniqueId,stopAtFrame:D}),c._setGlobalContextVariable("pendingStopAnimations",W)}_cancelPendingTasks(c){const r=this.animationGroup.getValue(c),D=c._getGlobalContextVariable("pendingStopAnimations",[]);for(let W=0;W<D.length;W++)if(D[W].uniqueId===r.uniqueId){D.splice(W,1),c._setGlobalContextVariable("pendingStopAnimations",D);break}}_execute(c){const r=this.animationGroup.getValue(c),D=this.stopAtFrame.getValue(c)??-1;return r?isNaN(D)?this._reportError(c,"Invalid stop time."):(D>0?this._startPendingTasks(c):this._stopAnimation(r,c),void this.out._activateSignal(c)):(t.e.Warn("No animation group provided to stop."),this._reportError(c,"No animation group provided to stop."))}_executeOnTick(c){const r=this.animationGroup.getValue(c),D=c._getGlobalContextVariable("pendingStopAnimations",[]);for(let W=0;W<D.length;W++)if(D[W].uniqueId===r.uniqueId&&r.getCurrentFrame()>=D[W].stopAtFrame){this._stopAnimation(r,c),D.splice(W,1),c._setGlobalContextVariable("pendingStopAnimations",D),this.done._activateSignal(c),c._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(c,r){const D=r._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),W=D.indexOf(c.uniqueId);-1!==W&&(c.stop(),D.splice(W,1),r._setGlobalContextVariable("currentlyRunningAnimationGroups",D))}}(0,B.e)("FlowGraphStopAnimationBlock",a)}}]);