"use strict";(self.gpkvekif0vo=self.gpkvekif0vo||[]).push([[80],{15580:(a,O,i)=>{i.r(O),i.d(O,{FlowGraphStopAnimationBlock:()=>Q});var H=i(14124),b=i(12346),G=i(12209),q=i(14159);class Q extends q.c{constructor(a){super(a),this.animationGroup=this.registerDataInput("animationGroup",H.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",H.t,-1)}_preparePendingTasks(a){const O=this.animationGroup.getValue(a),i=this.stopAtFrame.getValue(a)??-1,H=a._getGlobalContextVariable("pendingStopAnimations",[]);H.push({uniqueId:O.uniqueId,stopAtFrame:i}),a._setGlobalContextVariable("pendingStopAnimations",H)}_cancelPendingTasks(a){const O=this.animationGroup.getValue(a),i=a._getGlobalContextVariable("pendingStopAnimations",[]);for(let H=0;H<i.length;H++)if(i[H].uniqueId===O.uniqueId){i.splice(H,1),a._setGlobalContextVariable("pendingStopAnimations",i);break}}_execute(a){const O=this.animationGroup.getValue(a),i=this.stopAtFrame.getValue(a)??-1;return O?isNaN(i)?this._reportError(a,"Invalid stop time."):(i>0?this._startPendingTasks(a):this._stopAnimation(O,a),void this.out._activateSignal(a)):(G.c.Warn("No animation group provided to stop."),this._reportError(a,"No animation group provided to stop."))}_executeOnTick(a){const O=this.animationGroup.getValue(a),i=a._getGlobalContextVariable("pendingStopAnimations",[]);for(let H=0;H<i.length;H++)if(i[H].uniqueId===O.uniqueId&&O.getCurrentFrame()>=i[H].stopAtFrame){this._stopAnimation(O,a),i.splice(H,1),a._setGlobalContextVariable("pendingStopAnimations",i),this.done._activateSignal(a),a._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(a,O){const i=O._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),H=i.indexOf(a.uniqueId);-1!==H&&(a.stop(),i.splice(H,1),O._setGlobalContextVariable("currentlyRunningAnimationGroups",i))}}(0,b.h)("FlowGraphStopAnimationBlock",Q)}}]);