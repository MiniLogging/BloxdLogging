"use strict";(self.ex92n20nlz8=self.ex92n20nlz8||[]).push([[80],{15710:(I,g,b)=>{b.r(g),b.d(g,{FlowGraphStopAnimationBlock:()=>J});var e=b(14282),c=b(12558),z=b(12420),M=b(14311);class J extends M.c{constructor(I){super(I),this.animationGroup=this.registerDataInput("animationGroup",e.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",e.t,-1)}_preparePendingTasks(I){const g=this.animationGroup.getValue(I),b=this.stopAtFrame.getValue(I)??-1,e=I._getGlobalContextVariable("pendingStopAnimations",[]);e.push({uniqueId:g.uniqueId,stopAtFrame:b}),I._setGlobalContextVariable("pendingStopAnimations",e)}_cancelPendingTasks(I){const g=this.animationGroup.getValue(I),b=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<b.length;e++)if(b[e].uniqueId===g.uniqueId){b.splice(e,1),I._setGlobalContextVariable("pendingStopAnimations",b);break}}_execute(I){const g=this.animationGroup.getValue(I),b=this.stopAtFrame.getValue(I)??-1;return g?isNaN(b)?this._reportError(I,"Invalid stop time."):(b>0?this._startPendingTasks(I):this._stopAnimation(g,I),void this.out._activateSignal(I)):(z.b.Warn("No animation group provided to stop."),this._reportError(I,"No animation group provided to stop."))}_executeOnTick(I){const g=this.animationGroup.getValue(I),b=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<b.length;e++)if(b[e].uniqueId===g.uniqueId&&g.getCurrentFrame()>=b[e].stopAtFrame){this._stopAnimation(g,I),b.splice(e,1),I._setGlobalContextVariable("pendingStopAnimations",b),this.done._activateSignal(I),I._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(I,g){const b=g._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),e=b.indexOf(I.uniqueId);-1!==e&&(I.stop(),b.splice(e,1),g._setGlobalContextVariable("currentlyRunningAnimationGroups",b))}}(0,c.g)("FlowGraphStopAnimationBlock",J)}}]);