"use strict";(self["1xyrlsr8vb9"]=self["1xyrlsr8vb9"]||[]).push([[80],{15310:(I,O,C)=>{C.r(O),C.d(O,{FlowGraphStopAnimationBlock:()=>S});var j=C(13886),K=C(12226),i=C(12103),y=C(13938);class S extends y.b{constructor(I){super(I),this.animationGroup=this.registerDataInput("animationGroup",j.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",j.u,-1)}_preparePendingTasks(I){const O=this.animationGroup.getValue(I),C=this.stopAtFrame.getValue(I)??-1,j=I._getGlobalContextVariable("pendingStopAnimations",[]);j.push({uniqueId:O.uniqueId,stopAtFrame:C}),I._setGlobalContextVariable("pendingStopAnimations",j)}_cancelPendingTasks(I){const O=this.animationGroup.getValue(I),C=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<C.length;j++)if(C[j].uniqueId===O.uniqueId){C.splice(j,1),I._setGlobalContextVariable("pendingStopAnimations",C);break}}_execute(I){const O=this.animationGroup.getValue(I),C=this.stopAtFrame.getValue(I)??-1;return O?isNaN(C)?this._reportError(I,"Invalid stop time."):(C>0?this._startPendingTasks(I):this._stopAnimation(O,I),void this.out._activateSignal(I)):(i.c.Warn("No animation group provided to stop."),this._reportError(I,"No animation group provided to stop."))}_executeOnTick(I){const O=this.animationGroup.getValue(I),C=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<C.length;j++)if(C[j].uniqueId===O.uniqueId&&O.getCurrentFrame()>=C[j].stopAtFrame){this._stopAnimation(O,I),C.splice(j,1),I._setGlobalContextVariable("pendingStopAnimations",C),this.done._activateSignal(I),I._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(I,O){const C=O._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),j=C.indexOf(I.uniqueId);-1!==j&&(I.stop(),C.splice(j,1),O._setGlobalContextVariable("currentlyRunningAnimationGroups",C))}}(0,K.e)("FlowGraphStopAnimationBlock",S)}}]);