"use strict";(self.nyfa010khv=self.nyfa010khv||[]).push([[80],{15280:(L,r,p)=>{p.r(r),p.d(r,{FlowGraphStopAnimationBlock:()=>z});var J=p(13868),i=p(12087),n=p(11975),j=p(13913);class z extends j.d{constructor(L){super(L),this.animationGroup=this.registerDataInput("animationGroup",J.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",J.v,-1)}_preparePendingTasks(L){const r=this.animationGroup.getValue(L),p=this.stopAtFrame.getValue(L)??-1,J=L._getGlobalContextVariable("pendingStopAnimations",[]);J.push({uniqueId:r.uniqueId,stopAtFrame:p}),L._setGlobalContextVariable("pendingStopAnimations",J)}_cancelPendingTasks(L){const r=this.animationGroup.getValue(L),p=L._getGlobalContextVariable("pendingStopAnimations",[]);for(let J=0;J<p.length;J++)if(p[J].uniqueId===r.uniqueId){p.splice(J,1),L._setGlobalContextVariable("pendingStopAnimations",p);break}}_execute(L){const r=this.animationGroup.getValue(L),p=this.stopAtFrame.getValue(L)??-1;return r?isNaN(p)?this._reportError(L,"Invalid stop time."):(p>0?this._startPendingTasks(L):this._stopAnimation(r,L),void this.out._activateSignal(L)):(n.d.Warn("No animation group provided to stop."),this._reportError(L,"No animation group provided to stop."))}_executeOnTick(L){const r=this.animationGroup.getValue(L),p=L._getGlobalContextVariable("pendingStopAnimations",[]);for(let J=0;J<p.length;J++)if(p[J].uniqueId===r.uniqueId&&r.getCurrentFrame()>=p[J].stopAtFrame){this._stopAnimation(r,L),p.splice(J,1),L._setGlobalContextVariable("pendingStopAnimations",p),this.done._activateSignal(L),L._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(L,r){const p=r._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),J=p.indexOf(L.uniqueId);-1!==J&&(L.stop(),p.splice(J,1),r._setGlobalContextVariable("currentlyRunningAnimationGroups",p))}}(0,i.e)("FlowGraphStopAnimationBlock",z)}}]);