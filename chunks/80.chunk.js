"use strict";(self.wj3aziuz228=self.wj3aziuz228||[]).push([[80],{15633:(u,R,I)=>{I.r(R),I.d(R,{FlowGraphStopAnimationBlock:()=>D});var B=I(14160),U=I(12433),K=I(12315),C=I(14209);class D extends C.b{constructor(u){super(u),this.animationGroup=this.registerDataInput("animationGroup",B.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",B.u,-1)}_preparePendingTasks(u){const R=this.animationGroup.getValue(u),I=this.stopAtFrame.getValue(u)??-1,B=u._getGlobalContextVariable("pendingStopAnimations",[]);B.push({uniqueId:R.uniqueId,stopAtFrame:I}),u._setGlobalContextVariable("pendingStopAnimations",B)}_cancelPendingTasks(u){const R=this.animationGroup.getValue(u),I=u._getGlobalContextVariable("pendingStopAnimations",[]);for(let B=0;B<I.length;B++)if(I[B].uniqueId===R.uniqueId){I.splice(B,1),u._setGlobalContextVariable("pendingStopAnimations",I);break}}_execute(u){const R=this.animationGroup.getValue(u),I=this.stopAtFrame.getValue(u)??-1;return R?isNaN(I)?this._reportError(u,"Invalid stop time."):(I>0?this._startPendingTasks(u):this._stopAnimation(R,u),void this.out._activateSignal(u)):(K.b.Warn("No animation group provided to stop."),this._reportError(u,"No animation group provided to stop."))}_executeOnTick(u){const R=this.animationGroup.getValue(u),I=u._getGlobalContextVariable("pendingStopAnimations",[]);for(let B=0;B<I.length;B++)if(I[B].uniqueId===R.uniqueId&&R.getCurrentFrame()>=I[B].stopAtFrame){this._stopAnimation(R,u),I.splice(B,1),u._setGlobalContextVariable("pendingStopAnimations",I),this.done._activateSignal(u),u._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(u,R){const I=R._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),B=I.indexOf(u.uniqueId);-1!==B&&(u.stop(),I.splice(B,1),R._setGlobalContextVariable("currentlyRunningAnimationGroups",I))}}(0,U.e)("FlowGraphStopAnimationBlock",D)}}]);