"use strict";(self.vb3rpbgyozo=self.vb3rpbgyozo||[]).push([[80],{15944:(q,I,l)=>{l.r(I),l.d(I,{FlowGraphStopAnimationBlock:()=>a});var w=l(14441),t=l(12711),O=l(12591),c=l(14486);class a extends c.c{constructor(q){super(q),this.animationGroup=this.registerDataInput("animationGroup",w.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",w.v,-1)}_preparePendingTasks(q){const I=this.animationGroup.getValue(q),l=this.stopAtFrame.getValue(q)??-1,w=q._getGlobalContextVariable("pendingStopAnimations",[]);w.push({uniqueId:I.uniqueId,stopAtFrame:l}),q._setGlobalContextVariable("pendingStopAnimations",w)}_cancelPendingTasks(q){const I=this.animationGroup.getValue(q),l=q._getGlobalContextVariable("pendingStopAnimations",[]);for(let w=0;w<l.length;w++)if(l[w].uniqueId===I.uniqueId){l.splice(w,1),q._setGlobalContextVariable("pendingStopAnimations",l);break}}_execute(q){const I=this.animationGroup.getValue(q),l=this.stopAtFrame.getValue(q)??-1;return I?isNaN(l)?this._reportError(q,"Invalid stop time."):(l>0?this._startPendingTasks(q):this._stopAnimation(I,q),void this.out._activateSignal(q)):(O.b.Warn("No animation group provided to stop."),this._reportError(q,"No animation group provided to stop."))}_executeOnTick(q){const I=this.animationGroup.getValue(q),l=q._getGlobalContextVariable("pendingStopAnimations",[]);for(let w=0;w<l.length;w++)if(l[w].uniqueId===I.uniqueId&&I.getCurrentFrame()>=l[w].stopAtFrame){this._stopAnimation(I,q),l.splice(w,1),q._setGlobalContextVariable("pendingStopAnimations",l),this.done._activateSignal(q),q._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(q,I){const l=I._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),w=l.indexOf(q.uniqueId);-1!==w&&(q.stop(),l.splice(w,1),I._setGlobalContextVariable("currentlyRunningAnimationGroups",l))}}(0,t.e)("FlowGraphStopAnimationBlock",a)}}]);