"use strict";(self.isj1uwvwrek=self.isj1uwvwrek||[]).push([[80],{16037:(I,x,L)=>{L.r(x),L.d(x,{FlowGraphStopAnimationBlock:()=>p});var F=L(14498),X=L(12938),G=L(12809),Y=L(14537);class p extends Y.d{constructor(I){super(I),this.animationGroup=this.registerDataInput("animationGroup",F.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",F.x,-1)}_preparePendingTasks(I){const x=this.animationGroup.getValue(I),L=this.stopAtFrame.getValue(I)??-1,F=I._getGlobalContextVariable("pendingStopAnimations",[]);F.push({uniqueId:x.uniqueId,stopAtFrame:L}),I._setGlobalContextVariable("pendingStopAnimations",F)}_cancelPendingTasks(I){const x=this.animationGroup.getValue(I),L=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let F=0;F<L.length;F++)if(L[F].uniqueId===x.uniqueId){L.splice(F,1),I._setGlobalContextVariable("pendingStopAnimations",L);break}}_execute(I){const x=this.animationGroup.getValue(I),L=this.stopAtFrame.getValue(I)??-1;return x?isNaN(L)?this._reportError(I,"Invalid stop time."):(L>0?this._startPendingTasks(I):this._stopAnimation(x,I),void this.out._activateSignal(I)):(G.c.Warn("No animation group provided to stop."),this._reportError(I,"No animation group provided to stop."))}_executeOnTick(I){const x=this.animationGroup.getValue(I),L=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let F=0;F<L.length;F++)if(L[F].uniqueId===x.uniqueId&&x.getCurrentFrame()>=L[F].stopAtFrame){this._stopAnimation(x,I),L.splice(F,1),I._setGlobalContextVariable("pendingStopAnimations",L),this.done._activateSignal(I),I._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(I,x){const L=x._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),F=L.indexOf(I.uniqueId);-1!==F&&(I.stop(),L.splice(F,1),x._setGlobalContextVariable("currentlyRunningAnimationGroups",L))}}(0,X.d)("FlowGraphStopAnimationBlock",p)}}]);