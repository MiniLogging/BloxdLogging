"use strict";(self.ozi0exxand9=self.ozi0exxand9||[]).push([[80],{14524:(f,v,Z)=>{Z.r(v),Z.d(v,{FlowGraphStopAnimationBlock:()=>e});var V=Z(13123),h=Z(11372),J=Z(11247),l=Z(13169);class e extends l.e{constructor(f){super(f),this.animationGroup=this.registerDataInput("animationGroup",V.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",V.v,-1)}_preparePendingTasks(f){const v=this.animationGroup.getValue(f),Z=this.stopAtFrame.getValue(f)??-1,V=f._getGlobalContextVariable("pendingStopAnimations",[]);V.push({uniqueId:v.uniqueId,stopAtFrame:Z}),f._setGlobalContextVariable("pendingStopAnimations",V)}_cancelPendingTasks(f){const v=this.animationGroup.getValue(f),Z=f._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<Z.length;V++)if(Z[V].uniqueId===v.uniqueId){Z.splice(V,1),f._setGlobalContextVariable("pendingStopAnimations",Z);break}}_execute(f){const v=this.animationGroup.getValue(f),Z=this.stopAtFrame.getValue(f)??-1;return v?isNaN(Z)?this._reportError(f,"Invalid stop time."):(Z>0?this._startPendingTasks(f):this._stopAnimation(v,f),void this.out._activateSignal(f)):(J.e.Warn("No animation group provided to stop."),this._reportError(f,"No animation group provided to stop."))}_executeOnTick(f){const v=this.animationGroup.getValue(f),Z=f._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<Z.length;V++)if(Z[V].uniqueId===v.uniqueId&&v.getCurrentFrame()>=Z[V].stopAtFrame){this._stopAnimation(v,f),Z.splice(V,1),f._setGlobalContextVariable("pendingStopAnimations",Z),this.done._activateSignal(f),f._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(f,v){const Z=v._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),V=Z.indexOf(f.uniqueId);-1!==V&&(f.stop(),Z.splice(V,1),v._setGlobalContextVariable("currentlyRunningAnimationGroups",Z))}}(0,h.h)("FlowGraphStopAnimationBlock",e)}}]);