"use strict";(self.kdlk57exiqh=self.kdlk57exiqh||[]).push([[80],{15323:(i,x,e)=>{e.r(x),e.d(x,{FlowGraphStopAnimationBlock:()=>J});var j=e(13874),E=e(12204),a=e(12072),Y=e(13924);class J extends Y.b{constructor(i){super(i),this.animationGroup=this.registerDataInput("animationGroup",j.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",j.q,-1)}_preparePendingTasks(i){const x=this.animationGroup.getValue(i),e=this.stopAtFrame.getValue(i)??-1,j=i._getGlobalContextVariable("pendingStopAnimations",[]);j.push({uniqueId:x.uniqueId,stopAtFrame:e}),i._setGlobalContextVariable("pendingStopAnimations",j)}_cancelPendingTasks(i){const x=this.animationGroup.getValue(i),e=i._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<e.length;j++)if(e[j].uniqueId===x.uniqueId){e.splice(j,1),i._setGlobalContextVariable("pendingStopAnimations",e);break}}_execute(i){const x=this.animationGroup.getValue(i),e=this.stopAtFrame.getValue(i)??-1;return x?isNaN(e)?this._reportError(i,"Invalid stop time."):(e>0?this._startPendingTasks(i):this._stopAnimation(x,i),void this.out._activateSignal(i)):(a.c.Warn("No animation group provided to stop."),this._reportError(i,"No animation group provided to stop."))}_executeOnTick(i){const x=this.animationGroup.getValue(i),e=i._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<e.length;j++)if(e[j].uniqueId===x.uniqueId&&x.getCurrentFrame()>=e[j].stopAtFrame){this._stopAnimation(x,i),e.splice(j,1),i._setGlobalContextVariable("pendingStopAnimations",e),this.done._activateSignal(i),i._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(i,x){const e=x._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),j=e.indexOf(i.uniqueId);-1!==j&&(i.stop(),e.splice(j,1),x._setGlobalContextVariable("currentlyRunningAnimationGroups",e))}}(0,E.f)("FlowGraphStopAnimationBlock",J)}}]);