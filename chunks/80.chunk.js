"use strict";(self.wy695la1oic=self.wy695la1oic||[]).push([[80],{14586:(S,v,D)=>{D.r(v),D.d(v,{FlowGraphStopAnimationBlock:()=>B});var z=D(13108),e=D(11329),N=D(11190),m=D(13146);class B extends m.e{constructor(S){super(S),this.animationGroup=this.registerDataInput("animationGroup",z.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",z.q,-1)}_preparePendingTasks(S){const v=this.animationGroup.getValue(S),D=this.stopAtFrame.getValue(S)??-1,z=S._getGlobalContextVariable("pendingStopAnimations",[]);z.push({uniqueId:v.uniqueId,stopAtFrame:D}),S._setGlobalContextVariable("pendingStopAnimations",z)}_cancelPendingTasks(S){const v=this.animationGroup.getValue(S),D=S._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<D.length;z++)if(D[z].uniqueId===v.uniqueId){D.splice(z,1),S._setGlobalContextVariable("pendingStopAnimations",D);break}}_execute(S){const v=this.animationGroup.getValue(S),D=this.stopAtFrame.getValue(S)??-1;return v?isNaN(D)?this._reportError(S,"Invalid stop time."):(D>0?this._startPendingTasks(S):this._stopAnimation(v,S),void this.out._activateSignal(S)):(N.b.Warn("No animation group provided to stop."),this._reportError(S,"No animation group provided to stop."))}_executeOnTick(S){const v=this.animationGroup.getValue(S),D=S._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<D.length;z++)if(D[z].uniqueId===v.uniqueId&&v.getCurrentFrame()>=D[z].stopAtFrame){this._stopAnimation(v,S),D.splice(z,1),S._setGlobalContextVariable("pendingStopAnimations",D),this.done._activateSignal(S),S._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(S,v){const D=v._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),z=D.indexOf(S.uniqueId);-1!==z&&(S.stop(),D.splice(z,1),v._setGlobalContextVariable("currentlyRunningAnimationGroups",D))}}(0,e.f)("FlowGraphStopAnimationBlock",B)}}]);