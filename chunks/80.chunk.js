"use strict";(self.uji65st81d=self.uji65st81d||[]).push([[80],{15551:(V,h,mV)=>{mV.r(h),mV.d(h,{FlowGraphStopAnimationBlock:()=>k});var t=mV(14109),L=mV(12388),N=mV(12264),A=mV(14140);class k extends A.d{constructor(V){super(V),this.animationGroup=this.registerDataInput("animationGroup",t.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",t.r,-1)}_preparePendingTasks(V){const h=this.animationGroup.getValue(V),mV=this.stopAtFrame.getValue(V)??-1,t=V._getGlobalContextVariable("pendingStopAnimations",[]);t.push({uniqueId:h.uniqueId,stopAtFrame:mV}),V._setGlobalContextVariable("pendingStopAnimations",t)}_cancelPendingTasks(V){const h=this.animationGroup.getValue(V),mV=V._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<mV.length;t++)if(mV[t].uniqueId===h.uniqueId){mV.splice(t,1),V._setGlobalContextVariable("pendingStopAnimations",mV);break}}_execute(V){const h=this.animationGroup.getValue(V),mV=this.stopAtFrame.getValue(V)??-1;return h?isNaN(mV)?this._reportError(V,"Invalid stop time."):(mV>0?this._startPendingTasks(V):this._stopAnimation(h,V),void this.out._activateSignal(V)):(N.e.Warn("No animation group provided to stop."),this._reportError(V,"No animation group provided to stop."))}_executeOnTick(V){const h=this.animationGroup.getValue(V),mV=V._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<mV.length;t++)if(mV[t].uniqueId===h.uniqueId&&h.getCurrentFrame()>=mV[t].stopAtFrame){this._stopAnimation(h,V),mV.splice(t,1),V._setGlobalContextVariable("pendingStopAnimations",mV),this.done._activateSignal(V),V._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(V,h){const mV=h._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),t=mV.indexOf(V.uniqueId);-1!==t&&(V.stop(),mV.splice(t,1),h._setGlobalContextVariable("currentlyRunningAnimationGroups",mV))}}(0,L.i)("FlowGraphStopAnimationBlock",k)}}]);