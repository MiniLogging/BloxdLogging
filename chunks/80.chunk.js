"use strict";(self.uw9p3pwwsje=self.uw9p3pwwsje||[]).push([[80],{15850:(D,h,o)=>{o.r(h),o.d(h,{FlowGraphStopAnimationBlock:()=>R});var H=o(14362),g=o(12793),j=o(12658),M=o(14410);class R extends M.c{constructor(D){super(D),this.animationGroup=this.registerDataInput("animationGroup",H.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",H.q,-1)}_preparePendingTasks(D){const h=this.animationGroup.getValue(D),o=this.stopAtFrame.getValue(D)??-1,H=D._getGlobalContextVariable("pendingStopAnimations",[]);H.push({uniqueId:h.uniqueId,stopAtFrame:o}),D._setGlobalContextVariable("pendingStopAnimations",H)}_cancelPendingTasks(D){const h=this.animationGroup.getValue(D),o=D._getGlobalContextVariable("pendingStopAnimations",[]);for(let H=0;H<o.length;H++)if(o[H].uniqueId===h.uniqueId){o.splice(H,1),D._setGlobalContextVariable("pendingStopAnimations",o);break}}_execute(D){const h=this.animationGroup.getValue(D),o=this.stopAtFrame.getValue(D)??-1;return h?isNaN(o)?this._reportError(D,"Invalid stop time."):(o>0?this._startPendingTasks(D):this._stopAnimation(h,D),void this.out._activateSignal(D)):(j.d.Warn("No animation group provided to stop."),this._reportError(D,"No animation group provided to stop."))}_executeOnTick(D){const h=this.animationGroup.getValue(D),o=D._getGlobalContextVariable("pendingStopAnimations",[]);for(let H=0;H<o.length;H++)if(o[H].uniqueId===h.uniqueId&&h.getCurrentFrame()>=o[H].stopAtFrame){this._stopAnimation(h,D),o.splice(H,1),D._setGlobalContextVariable("pendingStopAnimations",o),this.done._activateSignal(D),D._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(D,h){const o=h._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),H=o.indexOf(D.uniqueId);-1!==H&&(D.stop(),o.splice(H,1),h._setGlobalContextVariable("currentlyRunningAnimationGroups",o))}}(0,g.g)("FlowGraphStopAnimationBlock",R)}}]);