"use strict";(self.pp3k1ov3ibi=self.pp3k1ov3ibi||[]).push([[80],{15557:(M,Z,P)=>{P.r(Z),P.d(Z,{FlowGraphStopAnimationBlock:()=>G});var x=P(14073),c=P(12317),w=P(12199),v=P(14115);class G extends v.e{constructor(M){super(M),this.animationGroup=this.registerDataInput("animationGroup",x.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",x.u,-1)}_preparePendingTasks(M){const Z=this.animationGroup.getValue(M),P=this.stopAtFrame.getValue(M)??-1,x=M._getGlobalContextVariable("pendingStopAnimations",[]);x.push({uniqueId:Z.uniqueId,stopAtFrame:P}),M._setGlobalContextVariable("pendingStopAnimations",x)}_cancelPendingTasks(M){const Z=this.animationGroup.getValue(M),P=M._getGlobalContextVariable("pendingStopAnimations",[]);for(let x=0;x<P.length;x++)if(P[x].uniqueId===Z.uniqueId){P.splice(x,1),M._setGlobalContextVariable("pendingStopAnimations",P);break}}_execute(M){const Z=this.animationGroup.getValue(M),P=this.stopAtFrame.getValue(M)??-1;return Z?isNaN(P)?this._reportError(M,"Invalid stop time."):(P>0?this._startPendingTasks(M):this._stopAnimation(Z,M),void this.out._activateSignal(M)):(w.d.Warn("No animation group provided to stop."),this._reportError(M,"No animation group provided to stop."))}_executeOnTick(M){const Z=this.animationGroup.getValue(M),P=M._getGlobalContextVariable("pendingStopAnimations",[]);for(let x=0;x<P.length;x++)if(P[x].uniqueId===Z.uniqueId&&Z.getCurrentFrame()>=P[x].stopAtFrame){this._stopAnimation(Z,M),P.splice(x,1),M._setGlobalContextVariable("pendingStopAnimations",P),this.done._activateSignal(M),M._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(M,Z){const P=Z._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),x=P.indexOf(M.uniqueId);-1!==x&&(M.stop(),P.splice(x,1),Z._setGlobalContextVariable("currentlyRunningAnimationGroups",P))}}(0,c.g)("FlowGraphStopAnimationBlock",G)}}]);