"use strict";(self.jr1pmf6bwuf=self.jr1pmf6bwuf||[]).push([[80],{16160:(Y,c,h)=>{h.r(c),h.d(c,{FlowGraphStopAnimationBlock:()=>b});var C=h(14459),E=h(12825),N=h(12700),Q=h(14499);class b extends Q.d{constructor(Y){super(Y),this.animationGroup=this.registerDataInput("animationGroup",C.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",C.n,-1)}_preparePendingTasks(Y){const c=this.animationGroup.getValue(Y),h=this.stopAtFrame.getValue(Y)??-1,C=Y._getGlobalContextVariable("pendingStopAnimations",[]);C.push({uniqueId:c.uniqueId,stopAtFrame:h}),Y._setGlobalContextVariable("pendingStopAnimations",C)}_cancelPendingTasks(Y){const c=this.animationGroup.getValue(Y),h=Y._getGlobalContextVariable("pendingStopAnimations",[]);for(let C=0;C<h.length;C++)if(h[C].uniqueId===c.uniqueId){h.splice(C,1),Y._setGlobalContextVariable("pendingStopAnimations",h);break}}_execute(Y){const c=this.animationGroup.getValue(Y),h=this.stopAtFrame.getValue(Y)??-1;return c?isNaN(h)?this._reportError(Y,"Invalid stop time."):(h>0?this._startPendingTasks(Y):this._stopAnimation(c,Y),void this.out._activateSignal(Y)):(N.e.Warn("No animation group provided to stop."),this._reportError(Y,"No animation group provided to stop."))}_executeOnTick(Y){const c=this.animationGroup.getValue(Y),h=Y._getGlobalContextVariable("pendingStopAnimations",[]);for(let C=0;C<h.length;C++)if(h[C].uniqueId===c.uniqueId&&c.getCurrentFrame()>=h[C].stopAtFrame){this._stopAnimation(c,Y),h.splice(C,1),Y._setGlobalContextVariable("pendingStopAnimations",h),this.done._activateSignal(Y),Y._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(Y,c){const h=c._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),C=h.indexOf(Y.uniqueId);-1!==C&&(Y.stop(),h.splice(C,1),c._setGlobalContextVariable("currentlyRunningAnimationGroups",h))}}(0,E.e)("FlowGraphStopAnimationBlock",b)}}]);