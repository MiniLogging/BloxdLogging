"use strict";(self["7c63p8lin4r"]=self["7c63p8lin4r"]||[]).push([[80],{15662:(z,u,U)=>{U.r(u),U.d(u,{FlowGraphStopAnimationBlock:()=>w});var J=U(14196),v=U(12875),f=U(12760),g=U(14245);class w extends g.e{constructor(z){super(z),this.animationGroup=this.registerDataInput("animationGroup",J.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",J.x,-1)}_preparePendingTasks(z){var u;const U=this.animationGroup.getValue(z),J=null!==(u=this.stopAtFrame.getValue(z))&&void 0!==u?u:-1,v=z._getGlobalContextVariable("pendingStopAnimations",[]);v.push({uniqueId:U.uniqueId,stopAtFrame:J}),z._setGlobalContextVariable("pendingStopAnimations",v)}_cancelPendingTasks(z){const u=this.animationGroup.getValue(z),U=z._getGlobalContextVariable("pendingStopAnimations",[]);for(let J=0;J<U.length;J++)if(U[J].uniqueId===u.uniqueId){U.splice(J,1),z._setGlobalContextVariable("pendingStopAnimations",U);break}}_execute(z){var u;const U=this.animationGroup.getValue(z),J=null!==(u=this.stopAtFrame.getValue(z))&&void 0!==u?u:-1;return U?isNaN(J)?this._reportError(z,"Invalid stop time."):(J>0?this._startPendingTasks(z):this._stopAnimation(U,z),void this.out._activateSignal(z)):(f.d.Warn("No animation group provided to stop."),this._reportError(z,"No animation group provided to stop."))}_executeOnTick(z){const u=this.animationGroup.getValue(z),U=z._getGlobalContextVariable("pendingStopAnimations",[]);for(let J=0;J<U.length;J++)if(U[J].uniqueId===u.uniqueId&&u.getCurrentFrame()>=U[J].stopAtFrame){this._stopAnimation(u,z),U.splice(J,1),z._setGlobalContextVariable("pendingStopAnimations",U),this.done._activateSignal(z),z._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(z,u){const U=u._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),J=U.indexOf(z.uniqueId);-1!==J&&(z.stop(),U.splice(J,1),u._setGlobalContextVariable("currentlyRunningAnimationGroups",U))}}(0,v.f)("FlowGraphStopAnimationBlock",w)}}]);