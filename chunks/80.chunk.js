"use strict";(self.i6szn8jgzh=self.i6szn8jgzh||[]).push([[80],{15034:(b,n,i)=>{i.r(n),i.d(n,{FlowGraphStopAnimationBlock:()=>Y});var e=i(13522),V=i(11734),Q=i(11621),U=i(13574);class Y extends U.c{constructor(b){super(b),this.animationGroup=this.registerDataInput("animationGroup",e.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",e.q,-1)}_preparePendingTasks(b){const n=this.animationGroup.getValue(b),i=this.stopAtFrame.getValue(b)??-1,e=b._getGlobalContextVariable("pendingStopAnimations",[]);e.push({uniqueId:n.uniqueId,stopAtFrame:i}),b._setGlobalContextVariable("pendingStopAnimations",e)}_cancelPendingTasks(b){const n=this.animationGroup.getValue(b),i=b._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<i.length;e++)if(i[e].uniqueId===n.uniqueId){i.splice(e,1),b._setGlobalContextVariable("pendingStopAnimations",i);break}}_execute(b){const n=this.animationGroup.getValue(b),i=this.stopAtFrame.getValue(b)??-1;return n?isNaN(i)?this._reportError(b,"Invalid stop time."):(i>0?this._startPendingTasks(b):this._stopAnimation(n,b),void this.out._activateSignal(b)):(Q.b.Warn("No animation group provided to stop."),this._reportError(b,"No animation group provided to stop."))}_executeOnTick(b){const n=this.animationGroup.getValue(b),i=b._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<i.length;e++)if(i[e].uniqueId===n.uniqueId&&n.getCurrentFrame()>=i[e].stopAtFrame){this._stopAnimation(n,b),i.splice(e,1),b._setGlobalContextVariable("pendingStopAnimations",i),this.done._activateSignal(b),b._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(b,n){const i=n._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),e=i.indexOf(b.uniqueId);-1!==e&&(b.stop(),i.splice(e,1),n._setGlobalContextVariable("currentlyRunningAnimationGroups",i))}}(0,V.i)("FlowGraphStopAnimationBlock",Y)}}]);