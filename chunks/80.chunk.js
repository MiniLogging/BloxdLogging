"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[80],{14291:(q,S,b)=>{b.r(S),b.d(S,{FlowGraphStopAnimationBlock:()=>g});var z=b(12839),C=b(11058),v=b(10943),U=b(12864);class g extends U.c{constructor(q){super(q),this.animationGroup=this.registerDataInput("animationGroup",z.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",z.o,-1)}_preparePendingTasks(q){const S=this.animationGroup.getValue(q),b=this.stopAtFrame.getValue(q)??-1,z=q._getGlobalContextVariable("pendingStopAnimations",[]);z.push({uniqueId:S.uniqueId,stopAtFrame:b}),q._setGlobalContextVariable("pendingStopAnimations",z)}_cancelPendingTasks(q){const S=this.animationGroup.getValue(q),b=q._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<b.length;z++)if(b[z].uniqueId===S.uniqueId){b.splice(z,1),q._setGlobalContextVariable("pendingStopAnimations",b);break}}_execute(q){const S=this.animationGroup.getValue(q),b=this.stopAtFrame.getValue(q)??-1;return S?isNaN(b)?this._reportError(q,"Invalid stop time."):(b>0?this._startPendingTasks(q):this._stopAnimation(S,q),void this.out._activateSignal(q)):(v.b.Warn("No animation group provided to stop."),this._reportError(q,"No animation group provided to stop."))}_executeOnTick(q){const S=this.animationGroup.getValue(q),b=q._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<b.length;z++)if(b[z].uniqueId===S.uniqueId&&S.getCurrentFrame()>=b[z].stopAtFrame){this._stopAnimation(S,q),b.splice(z,1),q._setGlobalContextVariable("pendingStopAnimations",b),this.done._activateSignal(q),q._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(q,S){const b=S._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),z=b.indexOf(q.uniqueId);-1!==z&&(q.stop(),b.splice(z,1),S._setGlobalContextVariable("currentlyRunningAnimationGroups",b))}}(0,C.f)("FlowGraphStopAnimationBlock",g)}}]);