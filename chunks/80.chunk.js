"use strict";(self.zjjkhojdx1=self.zjjkhojdx1||[]).push([[80],{14368:(k,h,o)=>{o.r(h),o.d(h,{FlowGraphStopAnimationBlock:()=>J});var x=o(12936),I=o(11199),q=o(11098),Y=o(12983);class J extends Y.e{constructor(k){super(k),this.animationGroup=this.registerDataInput("animationGroup",x.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",x.o,-1)}_preparePendingTasks(k){const h=this.animationGroup.getValue(k),o=this.stopAtFrame.getValue(k)??-1,x=k._getGlobalContextVariable("pendingStopAnimations",[]);x.push({uniqueId:h.uniqueId,stopAtFrame:o}),k._setGlobalContextVariable("pendingStopAnimations",x)}_cancelPendingTasks(k){const h=this.animationGroup.getValue(k),o=k._getGlobalContextVariable("pendingStopAnimations",[]);for(let x=0;x<o.length;x++)if(o[x].uniqueId===h.uniqueId){o.splice(x,1),k._setGlobalContextVariable("pendingStopAnimations",o);break}}_execute(k){const h=this.animationGroup.getValue(k),o=this.stopAtFrame.getValue(k)??-1;return h?isNaN(o)?this._reportError(k,"Invalid stop time."):(o>0?this._startPendingTasks(k):this._stopAnimation(h,k),void this.out._activateSignal(k)):(q.c.Warn("No animation group provided to stop."),this._reportError(k,"No animation group provided to stop."))}_executeOnTick(k){const h=this.animationGroup.getValue(k),o=k._getGlobalContextVariable("pendingStopAnimations",[]);for(let x=0;x<o.length;x++)if(o[x].uniqueId===h.uniqueId&&h.getCurrentFrame()>=o[x].stopAtFrame){this._stopAnimation(h,k),o.splice(x,1),k._setGlobalContextVariable("pendingStopAnimations",o),this.done._activateSignal(k),k._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(k,h){const o=h._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),x=o.indexOf(k.uniqueId);-1!==x&&(k.stop(),o.splice(x,1),h._setGlobalContextVariable("currentlyRunningAnimationGroups",o))}}(0,I.g)("FlowGraphStopAnimationBlock",J)}}]);