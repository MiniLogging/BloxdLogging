"use strict";(self.z22hkk7o33f=self.z22hkk7o33f||[]).push([[80],{15610:(U,G,C)=>{C.r(G),C.d(G,{FlowGraphStopAnimationBlock:()=>E});var L=C(14134),X=C(12850),l=C(12731),t=C(14180);class E extends t.b{constructor(U){super(U),this.animationGroup=this.registerDataInput("animationGroup",L.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",L.y,-1)}_preparePendingTasks(U){var G;const C=this.animationGroup.getValue(U),L=null!==(G=this.stopAtFrame.getValue(U))&&void 0!==G?G:-1,X=U._getGlobalContextVariable("pendingStopAnimations",[]);X.push({uniqueId:C.uniqueId,stopAtFrame:L}),U._setGlobalContextVariable("pendingStopAnimations",X)}_cancelPendingTasks(U){const G=this.animationGroup.getValue(U),C=U._getGlobalContextVariable("pendingStopAnimations",[]);for(let L=0;L<C.length;L++)if(C[L].uniqueId===G.uniqueId){C.splice(L,1),U._setGlobalContextVariable("pendingStopAnimations",C);break}}_execute(U){var G;const C=this.animationGroup.getValue(U),L=null!==(G=this.stopAtFrame.getValue(U))&&void 0!==G?G:-1;return C?isNaN(L)?this._reportError(U,"Invalid stop time."):(L>0?this._startPendingTasks(U):this._stopAnimation(C,U),void this.out._activateSignal(U)):(l.d.Warn("No animation group provided to stop."),this._reportError(U,"No animation group provided to stop."))}_executeOnTick(U){const G=this.animationGroup.getValue(U),C=U._getGlobalContextVariable("pendingStopAnimations",[]);for(let L=0;L<C.length;L++)if(C[L].uniqueId===G.uniqueId&&G.getCurrentFrame()>=C[L].stopAtFrame){this._stopAnimation(G,U),C.splice(L,1),U._setGlobalContextVariable("pendingStopAnimations",C),this.done._activateSignal(U),U._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(U,G){const C=G._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),L=C.indexOf(U.uniqueId);-1!==L&&(U.stop(),C.splice(L,1),G._setGlobalContextVariable("currentlyRunningAnimationGroups",C))}}(0,X.e)("FlowGraphStopAnimationBlock",E)}}]);