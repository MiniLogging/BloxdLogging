"use strict";(self.hwpa2z1pqte=self.hwpa2z1pqte||[]).push([[80],{16112:(h,R,l)=>{l.r(R),l.d(R,{FlowGraphStopAnimationBlock:()=>F});var j=l(14597),a=l(12852),D=l(12711),U=l(14640);class F extends U.b{constructor(h){super(h),this.animationGroup=this.registerDataInput("animationGroup",j.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",j.r,-1)}_preparePendingTasks(h){const R=this.animationGroup.getValue(h),l=this.stopAtFrame.getValue(h)??-1,j=h._getGlobalContextVariable("pendingStopAnimations",[]);j.push({uniqueId:R.uniqueId,stopAtFrame:l}),h._setGlobalContextVariable("pendingStopAnimations",j)}_cancelPendingTasks(h){const R=this.animationGroup.getValue(h),l=h._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<l.length;j++)if(l[j].uniqueId===R.uniqueId){l.splice(j,1),h._setGlobalContextVariable("pendingStopAnimations",l);break}}_execute(h){const R=this.animationGroup.getValue(h),l=this.stopAtFrame.getValue(h)??-1;return R?isNaN(l)?this._reportError(h,"Invalid stop time."):(l>0?this._startPendingTasks(h):this._stopAnimation(R,h),void this.out._activateSignal(h)):(D.c.Warn("No animation group provided to stop."),this._reportError(h,"No animation group provided to stop."))}_executeOnTick(h){const R=this.animationGroup.getValue(h),l=h._getGlobalContextVariable("pendingStopAnimations",[]);for(let j=0;j<l.length;j++)if(l[j].uniqueId===R.uniqueId&&R.getCurrentFrame()>=l[j].stopAtFrame){this._stopAnimation(R,h),l.splice(j,1),h._setGlobalContextVariable("pendingStopAnimations",l),this.done._activateSignal(h),h._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(h,R){const l=R._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),j=l.indexOf(h.uniqueId);-1!==j&&(h.stop(),l.splice(j,1),R._setGlobalContextVariable("currentlyRunningAnimationGroups",l))}}(0,a.f)("FlowGraphStopAnimationBlock",F)}}]);