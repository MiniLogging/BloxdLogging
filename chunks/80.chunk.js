"use strict";(self["9x1utqq1axc"]=self["9x1utqq1axc"]||[]).push([[80],{15465:(y,c,A)=>{A.r(c),A.d(c,{FlowGraphStopAnimationBlock:()=>W});var l=A(13993),w=A(12283),N=A(12161),p=A(14029);class W extends p.c{constructor(y){super(y),this.animationGroup=this.registerDataInput("animationGroup",l.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",l.s,-1)}_preparePendingTasks(y){const c=this.animationGroup.getValue(y),A=this.stopAtFrame.getValue(y)??-1,l=y._getGlobalContextVariable("pendingStopAnimations",[]);l.push({uniqueId:c.uniqueId,stopAtFrame:A}),y._setGlobalContextVariable("pendingStopAnimations",l)}_cancelPendingTasks(y){const c=this.animationGroup.getValue(y),A=y._getGlobalContextVariable("pendingStopAnimations",[]);for(let l=0;l<A.length;l++)if(A[l].uniqueId===c.uniqueId){A.splice(l,1),y._setGlobalContextVariable("pendingStopAnimations",A);break}}_execute(y){const c=this.animationGroup.getValue(y),A=this.stopAtFrame.getValue(y)??-1;return c?isNaN(A)?this._reportError(y,"Invalid stop time."):(A>0?this._startPendingTasks(y):this._stopAnimation(c,y),void this.out._activateSignal(y)):(N.c.Warn("No animation group provided to stop."),this._reportError(y,"No animation group provided to stop."))}_executeOnTick(y){const c=this.animationGroup.getValue(y),A=y._getGlobalContextVariable("pendingStopAnimations",[]);for(let l=0;l<A.length;l++)if(A[l].uniqueId===c.uniqueId&&c.getCurrentFrame()>=A[l].stopAtFrame){this._stopAnimation(c,y),A.splice(l,1),y._setGlobalContextVariable("pendingStopAnimations",A),this.done._activateSignal(y),y._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(y,c){const A=c._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),l=A.indexOf(y.uniqueId);-1!==l&&(y.stop(),A.splice(l,1),c._setGlobalContextVariable("currentlyRunningAnimationGroups",A))}}(0,w.f)("FlowGraphStopAnimationBlock",W)}}]);