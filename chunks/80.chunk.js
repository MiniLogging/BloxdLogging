"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[80],{16189:(B,u,F)=>{F.r(u),F.d(u,{FlowGraphStopAnimationBlock:()=>R});var Z=F(14701),V=F(12949),p=F(12822),G=F(14739);class R extends G.c{constructor(B){super(B),this.animationGroup=this.registerDataInput("animationGroup",Z.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",Z.u,-1)}_preparePendingTasks(B){const u=this.animationGroup.getValue(B),F=this.stopAtFrame.getValue(B)??-1,Z=B._getGlobalContextVariable("pendingStopAnimations",[]);Z.push({uniqueId:u.uniqueId,stopAtFrame:F}),B._setGlobalContextVariable("pendingStopAnimations",Z)}_cancelPendingTasks(B){const u=this.animationGroup.getValue(B),F=B._getGlobalContextVariable("pendingStopAnimations",[]);for(let Z=0;Z<F.length;Z++)if(F[Z].uniqueId===u.uniqueId){F.splice(Z,1),B._setGlobalContextVariable("pendingStopAnimations",F);break}}_execute(B){const u=this.animationGroup.getValue(B),F=this.stopAtFrame.getValue(B)??-1;return u?isNaN(F)?this._reportError(B,"Invalid stop time."):(F>0?this._startPendingTasks(B):this._stopAnimation(u,B),void this.out._activateSignal(B)):(p.d.Warn("No animation group provided to stop."),this._reportError(B,"No animation group provided to stop."))}_executeOnTick(B){const u=this.animationGroup.getValue(B),F=B._getGlobalContextVariable("pendingStopAnimations",[]);for(let Z=0;Z<F.length;Z++)if(F[Z].uniqueId===u.uniqueId&&u.getCurrentFrame()>=F[Z].stopAtFrame){this._stopAnimation(u,B),F.splice(Z,1),B._setGlobalContextVariable("pendingStopAnimations",F),this.done._activateSignal(B),B._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(B,u){const F=u._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),Z=F.indexOf(B.uniqueId);-1!==Z&&(B.stop(),F.splice(Z,1),u._setGlobalContextVariable("currentlyRunningAnimationGroups",F))}}(0,V.f)("FlowGraphStopAnimationBlock",R)}}]);