"use strict";(self.irtrrknfyfo=self.irtrrknfyfo||[]).push([[80],{14526:(B,E,v)=>{v.r(E),v.d(E,{FlowGraphStopAnimationBlock:()=>S});var z=v(13102),o=v(11345),q=v(11213),c=v(13137);class S extends c.c{constructor(B){super(B),this.animationGroup=this.registerDataInput("animationGroup",z.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",z.v,-1)}_preparePendingTasks(B){const E=this.animationGroup.getValue(B),v=this.stopAtFrame.getValue(B)??-1,z=B._getGlobalContextVariable("pendingStopAnimations",[]);z.push({uniqueId:E.uniqueId,stopAtFrame:v}),B._setGlobalContextVariable("pendingStopAnimations",z)}_cancelPendingTasks(B){const E=this.animationGroup.getValue(B),v=B._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<v.length;z++)if(v[z].uniqueId===E.uniqueId){v.splice(z,1),B._setGlobalContextVariable("pendingStopAnimations",v);break}}_execute(B){const E=this.animationGroup.getValue(B),v=this.stopAtFrame.getValue(B)??-1;return E?isNaN(v)?this._reportError(B,"Invalid stop time."):(v>0?this._startPendingTasks(B):this._stopAnimation(E,B),void this.out._activateSignal(B)):(q.c.Warn("No animation group provided to stop."),this._reportError(B,"No animation group provided to stop."))}_executeOnTick(B){const E=this.animationGroup.getValue(B),v=B._getGlobalContextVariable("pendingStopAnimations",[]);for(let z=0;z<v.length;z++)if(v[z].uniqueId===E.uniqueId&&E.getCurrentFrame()>=v[z].stopAtFrame){this._stopAnimation(E,B),v.splice(z,1),B._setGlobalContextVariable("pendingStopAnimations",v),this.done._activateSignal(B),B._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(B,E){const v=E._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),z=v.indexOf(B.uniqueId);-1!==z&&(B.stop(),v.splice(z,1),E._setGlobalContextVariable("currentlyRunningAnimationGroups",v))}}(0,o.f)("FlowGraphStopAnimationBlock",S)}}]);