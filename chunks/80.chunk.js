"use strict";(self.qbp2s7qydk=self.qbp2s7qydk||[]).push([[80],{15785:(M,A,O)=>{O.r(A),O.d(A,{FlowGraphStopAnimationBlock:()=>c});var S=O(14238),z=O(12919),Q=O(12783),X=O(14284);class c extends X.d{constructor(M){super(M),this.animationGroup=this.registerDataInput("animationGroup",S.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",S.t,-1)}_preparePendingTasks(M){var A;const O=this.animationGroup.getValue(M),S=null!==(A=this.stopAtFrame.getValue(M))&&void 0!==A?A:-1,z=M._getGlobalContextVariable("pendingStopAnimations",[]);z.push({uniqueId:O.uniqueId,stopAtFrame:S}),M._setGlobalContextVariable("pendingStopAnimations",z)}_cancelPendingTasks(M){const A=this.animationGroup.getValue(M),O=M._getGlobalContextVariable("pendingStopAnimations",[]);for(let S=0;S<O.length;S++)if(O[S].uniqueId===A.uniqueId){O.splice(S,1),M._setGlobalContextVariable("pendingStopAnimations",O);break}}_execute(M){var A;const O=this.animationGroup.getValue(M),S=null!==(A=this.stopAtFrame.getValue(M))&&void 0!==A?A:-1;return O?isNaN(S)?this._reportError(M,"Invalid stop time."):(S>0?this._startPendingTasks(M):this._stopAnimation(O,M),void this.out._activateSignal(M)):(Q.c.Warn("No animation group provided to stop."),this._reportError(M,"No animation group provided to stop."))}_executeOnTick(M){const A=this.animationGroup.getValue(M),O=M._getGlobalContextVariable("pendingStopAnimations",[]);for(let S=0;S<O.length;S++)if(O[S].uniqueId===A.uniqueId&&A.getCurrentFrame()>=O[S].stopAtFrame){this._stopAnimation(A,M),O.splice(S,1),M._setGlobalContextVariable("pendingStopAnimations",O),this.done._activateSignal(M),M._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(M,A){const O=A._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),S=O.indexOf(M.uniqueId);-1!==S&&(M.stop(),O.splice(S,1),A._setGlobalContextVariable("currentlyRunningAnimationGroups",O))}}(0,z.g)("FlowGraphStopAnimationBlock",c)}}]);