"use strict";(self.agop5zpabxv=self.agop5zpabxv||[]).push([[80],{15456:(H,u,J)=>{J.r(u),J.d(u,{FlowGraphStopAnimationBlock:()=>g});var O=J(14018),U=J(12304),h=J(12185),w=J(14061);class g extends w.d{constructor(H){super(H),this.animationGroup=this.registerDataInput("animationGroup",O.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",O.z,-1)}_preparePendingTasks(H){const u=this.animationGroup.getValue(H),J=this.stopAtFrame.getValue(H)??-1,O=H._getGlobalContextVariable("pendingStopAnimations",[]);O.push({uniqueId:u.uniqueId,stopAtFrame:J}),H._setGlobalContextVariable("pendingStopAnimations",O)}_cancelPendingTasks(H){const u=this.animationGroup.getValue(H),J=H._getGlobalContextVariable("pendingStopAnimations",[]);for(let O=0;O<J.length;O++)if(J[O].uniqueId===u.uniqueId){J.splice(O,1),H._setGlobalContextVariable("pendingStopAnimations",J);break}}_execute(H){const u=this.animationGroup.getValue(H),J=this.stopAtFrame.getValue(H)??-1;return u?isNaN(J)?this._reportError(H,"Invalid stop time."):(J>0?this._startPendingTasks(H):this._stopAnimation(u,H),void this.out._activateSignal(H)):(h.b.Warn("No animation group provided to stop."),this._reportError(H,"No animation group provided to stop."))}_executeOnTick(H){const u=this.animationGroup.getValue(H),J=H._getGlobalContextVariable("pendingStopAnimations",[]);for(let O=0;O<J.length;O++)if(J[O].uniqueId===u.uniqueId&&u.getCurrentFrame()>=J[O].stopAtFrame){this._stopAnimation(u,H),J.splice(O,1),H._setGlobalContextVariable("pendingStopAnimations",J),this.done._activateSignal(H),H._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(H,u){const J=u._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),O=J.indexOf(H.uniqueId);-1!==O&&(H.stop(),J.splice(O,1),u._setGlobalContextVariable("currentlyRunningAnimationGroups",J))}}(0,U.f)("FlowGraphStopAnimationBlock",g)}}]);