"use strict";(self.qcdfysujsyf=self.qcdfysujsyf||[]).push([[80],{15834:(K,A,T)=>{T.r(A),T.d(A,{FlowGraphStopAnimationBlock:()=>O});var G=T(14237),B=T(12651),L=T(12548),f=T(14288);class O extends f.e{constructor(K){super(K),this.animationGroup=this.registerDataInput("animationGroup",G.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",G.q,-1)}_preparePendingTasks(K){const A=this.animationGroup.getValue(K),T=this.stopAtFrame.getValue(K)??-1,G=K._getGlobalContextVariable("pendingStopAnimations",[]);G.push({uniqueId:A.uniqueId,stopAtFrame:T}),K._setGlobalContextVariable("pendingStopAnimations",G)}_cancelPendingTasks(K){const A=this.animationGroup.getValue(K),T=K._getGlobalContextVariable("pendingStopAnimations",[]);for(let G=0;G<T.length;G++)if(T[G].uniqueId===A.uniqueId){T.splice(G,1),K._setGlobalContextVariable("pendingStopAnimations",T);break}}_execute(K){const A=this.animationGroup.getValue(K),T=this.stopAtFrame.getValue(K)??-1;return A?isNaN(T)?this._reportError(K,"Invalid stop time."):(T>0?this._startPendingTasks(K):this._stopAnimation(A,K),void this.out._activateSignal(K)):(L.d.Warn("No animation group provided to stop."),this._reportError(K,"No animation group provided to stop."))}_executeOnTick(K){const A=this.animationGroup.getValue(K),T=K._getGlobalContextVariable("pendingStopAnimations",[]);for(let G=0;G<T.length;G++)if(T[G].uniqueId===A.uniqueId&&A.getCurrentFrame()>=T[G].stopAtFrame){this._stopAnimation(A,K),T.splice(G,1),K._setGlobalContextVariable("pendingStopAnimations",T),this.done._activateSignal(K),K._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(K,A){const T=A._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),G=T.indexOf(K.uniqueId);-1!==G&&(K.stop(),T.splice(G,1),A._setGlobalContextVariable("currentlyRunningAnimationGroups",T))}}(0,B.c)("FlowGraphStopAnimationBlock",O)}}]);