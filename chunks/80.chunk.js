"use strict";(self.fkqm0epoq5=self.fkqm0epoq5||[]).push([[80],{14816:(D,l,G)=>{G.r(l),G.d(l,{FlowGraphStopAnimationBlock:()=>X});var V=G(13423),N=G(11667),M=G(11546),b=G(13463);class X extends b.d{constructor(D){super(D),this.animationGroup=this.registerDataInput("animationGroup",V.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",V.o,-1)}_preparePendingTasks(D){const l=this.animationGroup.getValue(D),G=this.stopAtFrame.getValue(D)??-1,V=D._getGlobalContextVariable("pendingStopAnimations",[]);V.push({uniqueId:l.uniqueId,stopAtFrame:G}),D._setGlobalContextVariable("pendingStopAnimations",V)}_cancelPendingTasks(D){const l=this.animationGroup.getValue(D),G=D._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<G.length;V++)if(G[V].uniqueId===l.uniqueId){G.splice(V,1),D._setGlobalContextVariable("pendingStopAnimations",G);break}}_execute(D){const l=this.animationGroup.getValue(D),G=this.stopAtFrame.getValue(D)??-1;return l?isNaN(G)?this._reportError(D,"Invalid stop time."):(G>0?this._startPendingTasks(D):this._stopAnimation(l,D),void this.out._activateSignal(D)):(M.d.Warn("No animation group provided to stop."),this._reportError(D,"No animation group provided to stop."))}_executeOnTick(D){const l=this.animationGroup.getValue(D),G=D._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<G.length;V++)if(G[V].uniqueId===l.uniqueId&&l.getCurrentFrame()>=G[V].stopAtFrame){this._stopAnimation(l,D),G.splice(V,1),D._setGlobalContextVariable("pendingStopAnimations",G),this.done._activateSignal(D),D._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(D,l){const G=l._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),V=G.indexOf(D.uniqueId);-1!==V&&(D.stop(),G.splice(V,1),l._setGlobalContextVariable("currentlyRunningAnimationGroups",G))}}(0,N.c)("FlowGraphStopAnimationBlock",X)}}]);