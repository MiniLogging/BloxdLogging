"use strict";(self.fwuvyyymhp8=self.fwuvyyymhp8||[]).push([[80],{15532:(N,U,V)=>{V.r(U),V.d(U,{FlowGraphStopAnimationBlock:()=>i});var A=V(14036),t=V(12344),n=V(12193),q=V(14085);class i extends q.c{constructor(N){super(N),this.animationGroup=this.registerDataInput("animationGroup",A.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",A.p,-1)}_preparePendingTasks(N){const U=this.animationGroup.getValue(N),V=this.stopAtFrame.getValue(N)??-1,A=N._getGlobalContextVariable("pendingStopAnimations",[]);A.push({uniqueId:U.uniqueId,stopAtFrame:V}),N._setGlobalContextVariable("pendingStopAnimations",A)}_cancelPendingTasks(N){const U=this.animationGroup.getValue(N),V=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<V.length;A++)if(V[A].uniqueId===U.uniqueId){V.splice(A,1),N._setGlobalContextVariable("pendingStopAnimations",V);break}}_execute(N){const U=this.animationGroup.getValue(N),V=this.stopAtFrame.getValue(N)??-1;return U?isNaN(V)?this._reportError(N,"Invalid stop time."):(V>0?this._startPendingTasks(N):this._stopAnimation(U,N),void this.out._activateSignal(N)):(n.b.Warn("No animation group provided to stop."),this._reportError(N,"No animation group provided to stop."))}_executeOnTick(N){const U=this.animationGroup.getValue(N),V=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<V.length;A++)if(V[A].uniqueId===U.uniqueId&&U.getCurrentFrame()>=V[A].stopAtFrame){this._stopAnimation(U,N),V.splice(A,1),N._setGlobalContextVariable("pendingStopAnimations",V),this.done._activateSignal(N),N._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(N,U){const V=U._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),A=V.indexOf(N.uniqueId);-1!==A&&(N.stop(),V.splice(A,1),U._setGlobalContextVariable("currentlyRunningAnimationGroups",V))}}(0,t.e)("FlowGraphStopAnimationBlock",i)}}]);