"use strict";(self.r00gjvkwa6=self.r00gjvkwa6||[]).push([[80],{14459:(H,O,S)=>{S.r(O),S.d(O,{FlowGraphStopAnimationBlock:()=>U});var t=S(13035),q=S(11262),p=S(11151),G=S(13082);class U extends G.d{constructor(H){super(H),this.animationGroup=this.registerDataInput("animationGroup",t.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",t.t,-1)}_preparePendingTasks(H){const O=this.animationGroup.getValue(H),S=this.stopAtFrame.getValue(H)??-1,t=H._getGlobalContextVariable("pendingStopAnimations",[]);t.push({uniqueId:O.uniqueId,stopAtFrame:S}),H._setGlobalContextVariable("pendingStopAnimations",t)}_cancelPendingTasks(H){const O=this.animationGroup.getValue(H),S=H._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<S.length;t++)if(S[t].uniqueId===O.uniqueId){S.splice(t,1),H._setGlobalContextVariable("pendingStopAnimations",S);break}}_execute(H){const O=this.animationGroup.getValue(H),S=this.stopAtFrame.getValue(H)??-1;return O?isNaN(S)?this._reportError(H,"Invalid stop time."):(S>0?this._startPendingTasks(H):this._stopAnimation(O,H),void this.out._activateSignal(H)):(p.b.Warn("No animation group provided to stop."),this._reportError(H,"No animation group provided to stop."))}_executeOnTick(H){const O=this.animationGroup.getValue(H),S=H._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<S.length;t++)if(S[t].uniqueId===O.uniqueId&&O.getCurrentFrame()>=S[t].stopAtFrame){this._stopAnimation(O,H),S.splice(t,1),H._setGlobalContextVariable("pendingStopAnimations",S),this.done._activateSignal(H),H._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(H,O){const S=O._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),t=S.indexOf(H.uniqueId);-1!==t&&(H.stop(),S.splice(t,1),O._setGlobalContextVariable("currentlyRunningAnimationGroups",S))}}(0,q.g)("FlowGraphStopAnimationBlock",U)}}]);