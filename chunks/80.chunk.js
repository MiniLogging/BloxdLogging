"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[80],{15960:(p,b,M)=>{M.r(b),M.d(b,{FlowGraphStopAnimationBlock:()=>P});var h=M(14316),Q=M(12730),mp=M(12622),y=M(14362);class P extends y.d{constructor(p){super(p),this.animationGroup=this.registerDataInput("animationGroup",h.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",h.t,-1)}_preparePendingTasks(p){const b=this.animationGroup.getValue(p),M=this.stopAtFrame.getValue(p)??-1,h=p._getGlobalContextVariable("pendingStopAnimations",[]);h.push({uniqueId:b.uniqueId,stopAtFrame:M}),p._setGlobalContextVariable("pendingStopAnimations",h)}_cancelPendingTasks(p){const b=this.animationGroup.getValue(p),M=p._getGlobalContextVariable("pendingStopAnimations",[]);for(let h=0;h<M.length;h++)if(M[h].uniqueId===b.uniqueId){M.splice(h,1),p._setGlobalContextVariable("pendingStopAnimations",M);break}}_execute(p){const b=this.animationGroup.getValue(p),M=this.stopAtFrame.getValue(p)??-1;return b?isNaN(M)?this._reportError(p,"Invalid stop time."):(M>0?this._startPendingTasks(p):this._stopAnimation(b,p),void this.out._activateSignal(p)):(mp.d.Warn("No animation group provided to stop."),this._reportError(p,"No animation group provided to stop."))}_executeOnTick(p){const b=this.animationGroup.getValue(p),M=p._getGlobalContextVariable("pendingStopAnimations",[]);for(let h=0;h<M.length;h++)if(M[h].uniqueId===b.uniqueId&&b.getCurrentFrame()>=M[h].stopAtFrame){this._stopAnimation(b,p),M.splice(h,1),p._setGlobalContextVariable("pendingStopAnimations",M),this.done._activateSignal(p),p._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(p,b){const M=b._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),h=M.indexOf(p.uniqueId);-1!==h&&(p.stop(),M.splice(h,1),b._setGlobalContextVariable("currentlyRunningAnimationGroups",M))}}(0,Q.c)("FlowGraphStopAnimationBlock",P)}}]);