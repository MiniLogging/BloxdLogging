"use strict";(self.bbj0x35f849=self.bbj0x35f849||[]).push([[80],{14275:(N,q,C)=>{C.r(q),C.d(q,{FlowGraphStopAnimationBlock:()=>F});var d=C(12831),U=C(11076),W=C(10962),a=C(12872);class F extends a.e{constructor(N){super(N),this.animationGroup=this.registerDataInput("animationGroup",d.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",d.r,-1)}_preparePendingTasks(N){const q=this.animationGroup.getValue(N),C=this.stopAtFrame.getValue(N)??-1,d=N._getGlobalContextVariable("pendingStopAnimations",[]);d.push({uniqueId:q.uniqueId,stopAtFrame:C}),N._setGlobalContextVariable("pendingStopAnimations",d)}_cancelPendingTasks(N){const q=this.animationGroup.getValue(N),C=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let d=0;d<C.length;d++)if(C[d].uniqueId===q.uniqueId){C.splice(d,1),N._setGlobalContextVariable("pendingStopAnimations",C);break}}_execute(N){const q=this.animationGroup.getValue(N),C=this.stopAtFrame.getValue(N)??-1;return q?isNaN(C)?this._reportError(N,"Invalid stop time."):(C>0?this._startPendingTasks(N):this._stopAnimation(q,N),void this.out._activateSignal(N)):(W.c.Warn("No animation group provided to stop."),this._reportError(N,"No animation group provided to stop."))}_executeOnTick(N){const q=this.animationGroup.getValue(N),C=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let d=0;d<C.length;d++)if(C[d].uniqueId===q.uniqueId&&q.getCurrentFrame()>=C[d].stopAtFrame){this._stopAnimation(q,N),C.splice(d,1),N._setGlobalContextVariable("pendingStopAnimations",C),this.done._activateSignal(N),N._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(N,q){const C=q._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),d=C.indexOf(N.uniqueId);-1!==d&&(N.stop(),C.splice(d,1),q._setGlobalContextVariable("currentlyRunningAnimationGroups",C))}}(0,U.h)("FlowGraphStopAnimationBlock",F)}}]);