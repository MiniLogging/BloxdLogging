"use strict";(self.h6ljd275xwr=self.h6ljd275xwr||[]).push([[80],{14550:(n,y,H)=>{H.r(y),H.d(y,{FlowGraphStopAnimationBlock:()=>i});var o=H(13117),G=H(11248),h=H(11114),k=H(13160);class i extends k.d{constructor(n){super(n),this.animationGroup=this.registerDataInput("animationGroup",o.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",o.p,-1)}_preparePendingTasks(n){const y=this.animationGroup.getValue(n),H=this.stopAtFrame.getValue(n)??-1,o=n._getGlobalContextVariable("pendingStopAnimations",[]);o.push({uniqueId:y.uniqueId,stopAtFrame:H}),n._setGlobalContextVariable("pendingStopAnimations",o)}_cancelPendingTasks(n){const y=this.animationGroup.getValue(n),H=n._getGlobalContextVariable("pendingStopAnimations",[]);for(let o=0;o<H.length;o++)if(H[o].uniqueId===y.uniqueId){H.splice(o,1),n._setGlobalContextVariable("pendingStopAnimations",H);break}}_execute(n){const y=this.animationGroup.getValue(n),H=this.stopAtFrame.getValue(n)??-1;return y?isNaN(H)?this._reportError(n,"Invalid stop time."):(H>0?this._startPendingTasks(n):this._stopAnimation(y,n),void this.out._activateSignal(n)):(h.d.Warn("No animation group provided to stop."),this._reportError(n,"No animation group provided to stop."))}_executeOnTick(n){const y=this.animationGroup.getValue(n),H=n._getGlobalContextVariable("pendingStopAnimations",[]);for(let o=0;o<H.length;o++)if(H[o].uniqueId===y.uniqueId&&y.getCurrentFrame()>=H[o].stopAtFrame){this._stopAnimation(y,n),H.splice(o,1),n._setGlobalContextVariable("pendingStopAnimations",H),this.done._activateSignal(n),n._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(n,y){const H=y._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),o=H.indexOf(n.uniqueId);-1!==o&&(n.stop(),H.splice(o,1),y._setGlobalContextVariable("currentlyRunningAnimationGroups",H))}}(0,G.h)("FlowGraphStopAnimationBlock",i)}}]);