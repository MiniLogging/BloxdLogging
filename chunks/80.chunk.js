"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[80],{15960:(a,c,o)=>{o.r(c),o.d(c,{FlowGraphStopAnimationBlock:()=>p});var s=o(14394),q=o(12776),t=o(12649),i=o(14439);class p extends i.e{constructor(a){super(a),this.animationGroup=this.registerDataInput("animationGroup",s.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",s.o,-1)}_preparePendingTasks(a){const c=this.animationGroup.getValue(a),o=this.stopAtFrame.getValue(a)??-1,s=a._getGlobalContextVariable("pendingStopAnimations",[]);s.push({uniqueId:c.uniqueId,stopAtFrame:o}),a._setGlobalContextVariable("pendingStopAnimations",s)}_cancelPendingTasks(a){const c=this.animationGroup.getValue(a),o=a._getGlobalContextVariable("pendingStopAnimations",[]);for(let s=0;s<o.length;s++)if(o[s].uniqueId===c.uniqueId){o.splice(s,1),a._setGlobalContextVariable("pendingStopAnimations",o);break}}_execute(a){const c=this.animationGroup.getValue(a),o=this.stopAtFrame.getValue(a)??-1;return c?isNaN(o)?this._reportError(a,"Invalid stop time."):(o>0?this._startPendingTasks(a):this._stopAnimation(c,a),void this.out._activateSignal(a)):(t.c.Warn("No animation group provided to stop."),this._reportError(a,"No animation group provided to stop."))}_executeOnTick(a){const c=this.animationGroup.getValue(a),o=a._getGlobalContextVariable("pendingStopAnimations",[]);for(let s=0;s<o.length;s++)if(o[s].uniqueId===c.uniqueId&&c.getCurrentFrame()>=o[s].stopAtFrame){this._stopAnimation(c,a),o.splice(s,1),a._setGlobalContextVariable("pendingStopAnimations",o),this.done._activateSignal(a),a._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(a,c){const o=c._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),s=o.indexOf(a.uniqueId);-1!==s&&(a.stop(),o.splice(s,1),c._setGlobalContextVariable("currentlyRunningAnimationGroups",o))}}(0,q.d)("FlowGraphStopAnimationBlock",p)}}]);