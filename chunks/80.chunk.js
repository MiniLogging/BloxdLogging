"use strict";(self.xeuzlpp225k=self.xeuzlpp225k||[]).push([[80],{14488:(k,Q,i)=>{i.r(Q),i.d(Q,{FlowGraphStopAnimationBlock:()=>o});var Z=i(13064),U=i(11253),C=i(11134),B=i(13105);class o extends B.d{constructor(k){super(k),this.animationGroup=this.registerDataInput("animationGroup",Z.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",Z.o,-1)}_preparePendingTasks(k){const Q=this.animationGroup.getValue(k),i=this.stopAtFrame.getValue(k)??-1,Z=k._getGlobalContextVariable("pendingStopAnimations",[]);Z.push({uniqueId:Q.uniqueId,stopAtFrame:i}),k._setGlobalContextVariable("pendingStopAnimations",Z)}_cancelPendingTasks(k){const Q=this.animationGroup.getValue(k),i=k._getGlobalContextVariable("pendingStopAnimations",[]);for(let Z=0;Z<i.length;Z++)if(i[Z].uniqueId===Q.uniqueId){i.splice(Z,1),k._setGlobalContextVariable("pendingStopAnimations",i);break}}_execute(k){const Q=this.animationGroup.getValue(k),i=this.stopAtFrame.getValue(k)??-1;return Q?isNaN(i)?this._reportError(k,"Invalid stop time."):(i>0?this._startPendingTasks(k):this._stopAnimation(Q,k),void this.out._activateSignal(k)):(C.c.Warn("No animation group provided to stop."),this._reportError(k,"No animation group provided to stop."))}_executeOnTick(k){const Q=this.animationGroup.getValue(k),i=k._getGlobalContextVariable("pendingStopAnimations",[]);for(let Z=0;Z<i.length;Z++)if(i[Z].uniqueId===Q.uniqueId&&Q.getCurrentFrame()>=i[Z].stopAtFrame){this._stopAnimation(Q,k),i.splice(Z,1),k._setGlobalContextVariable("pendingStopAnimations",i),this.done._activateSignal(k),k._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(k,Q){const i=Q._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),Z=i.indexOf(k.uniqueId);-1!==Z&&(k.stop(),i.splice(Z,1),Q._setGlobalContextVariable("currentlyRunningAnimationGroups",i))}}(0,U.e)("FlowGraphStopAnimationBlock",o)}}]);