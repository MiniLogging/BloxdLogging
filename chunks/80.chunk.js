"use strict";(self.n52dyox90qa=self.n52dyox90qa||[]).push([[80],{14917:(E,t,z)=>{z.r(t),z.d(t,{FlowGraphStopAnimationBlock:()=>p});var A=z(13458),X=z(11766),R=z(11640),u=z(13509);class p extends u.c{constructor(E){super(E),this.animationGroup=this.registerDataInput("animationGroup",A.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",A.p,-1)}_preparePendingTasks(E){const t=this.animationGroup.getValue(E),z=this.stopAtFrame.getValue(E)??-1,A=E._getGlobalContextVariable("pendingStopAnimations",[]);A.push({uniqueId:t.uniqueId,stopAtFrame:z}),E._setGlobalContextVariable("pendingStopAnimations",A)}_cancelPendingTasks(E){const t=this.animationGroup.getValue(E),z=E._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<z.length;A++)if(z[A].uniqueId===t.uniqueId){z.splice(A,1),E._setGlobalContextVariable("pendingStopAnimations",z);break}}_execute(E){const t=this.animationGroup.getValue(E),z=this.stopAtFrame.getValue(E)??-1;return t?isNaN(z)?this._reportError(E,"Invalid stop time."):(z>0?this._startPendingTasks(E):this._stopAnimation(t,E),void this.out._activateSignal(E)):(R.d.Warn("No animation group provided to stop."),this._reportError(E,"No animation group provided to stop."))}_executeOnTick(E){const t=this.animationGroup.getValue(E),z=E._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<z.length;A++)if(z[A].uniqueId===t.uniqueId&&t.getCurrentFrame()>=z[A].stopAtFrame){this._stopAnimation(t,E),z.splice(A,1),E._setGlobalContextVariable("pendingStopAnimations",z),this.done._activateSignal(E),E._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(E,t){const z=t._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),A=z.indexOf(E.uniqueId);-1!==A&&(E.stop(),z.splice(A,1),t._setGlobalContextVariable("currentlyRunningAnimationGroups",z))}}(0,X.f)("FlowGraphStopAnimationBlock",p)}}]);