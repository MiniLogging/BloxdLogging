"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[80],{15614:(e,d,v)=>{v.r(d),v.d(d,{FlowGraphStopAnimationBlock:()=>X});var P=v(14181),p=v(12381),L=v(12253),B=v(14216);class X extends B.d{constructor(e){super(e),this.animationGroup=this.registerDataInput("animationGroup",P.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",P.n,-1)}_preparePendingTasks(e){const d=this.animationGroup.getValue(e),v=this.stopAtFrame.getValue(e)??-1,P=e._getGlobalContextVariable("pendingStopAnimations",[]);P.push({uniqueId:d.uniqueId,stopAtFrame:v}),e._setGlobalContextVariable("pendingStopAnimations",P)}_cancelPendingTasks(e){const d=this.animationGroup.getValue(e),v=e._getGlobalContextVariable("pendingStopAnimations",[]);for(let P=0;P<v.length;P++)if(v[P].uniqueId===d.uniqueId){v.splice(P,1),e._setGlobalContextVariable("pendingStopAnimations",v);break}}_execute(e){const d=this.animationGroup.getValue(e),v=this.stopAtFrame.getValue(e)??-1;return d?isNaN(v)?this._reportError(e,"Invalid stop time."):(v>0?this._startPendingTasks(e):this._stopAnimation(d,e),void this.out._activateSignal(e)):(L.c.Warn("No animation group provided to stop."),this._reportError(e,"No animation group provided to stop."))}_executeOnTick(e){const d=this.animationGroup.getValue(e),v=e._getGlobalContextVariable("pendingStopAnimations",[]);for(let P=0;P<v.length;P++)if(v[P].uniqueId===d.uniqueId&&d.getCurrentFrame()>=v[P].stopAtFrame){this._stopAnimation(d,e),v.splice(P,1),e._setGlobalContextVariable("pendingStopAnimations",v),this.done._activateSignal(e),e._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(e,d){const v=d._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),P=v.indexOf(e.uniqueId);-1!==P&&(e.stop(),v.splice(P,1),d._setGlobalContextVariable("currentlyRunningAnimationGroups",v))}}(0,p.h)("FlowGraphStopAnimationBlock",X)}}]);