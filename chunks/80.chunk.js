"use strict";(self["5dou0t7wntc"]=self["5dou0t7wntc"]||[]).push([[80],{14912:(K,O,F)=>{F.r(O),F.d(O,{FlowGraphStopAnimationBlock:()=>J});var f=F(13441),r=F(11661),l=F(11534),q=F(13487);class J extends q.e{constructor(K){super(K),this.animationGroup=this.registerDataInput("animationGroup",f.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",f.s,-1)}_preparePendingTasks(K){const O=this.animationGroup.getValue(K),F=this.stopAtFrame.getValue(K)??-1,f=K._getGlobalContextVariable("pendingStopAnimations",[]);f.push({uniqueId:O.uniqueId,stopAtFrame:F}),K._setGlobalContextVariable("pendingStopAnimations",f)}_cancelPendingTasks(K){const O=this.animationGroup.getValue(K),F=K._getGlobalContextVariable("pendingStopAnimations",[]);for(let f=0;f<F.length;f++)if(F[f].uniqueId===O.uniqueId){F.splice(f,1),K._setGlobalContextVariable("pendingStopAnimations",F);break}}_execute(K){const O=this.animationGroup.getValue(K),F=this.stopAtFrame.getValue(K)??-1;return O?isNaN(F)?this._reportError(K,"Invalid stop time."):(F>0?this._startPendingTasks(K):this._stopAnimation(O,K),void this.out._activateSignal(K)):(l.c.Warn("No animation group provided to stop."),this._reportError(K,"No animation group provided to stop."))}_executeOnTick(K){const O=this.animationGroup.getValue(K),F=K._getGlobalContextVariable("pendingStopAnimations",[]);for(let f=0;f<F.length;f++)if(F[f].uniqueId===O.uniqueId&&O.getCurrentFrame()>=F[f].stopAtFrame){this._stopAnimation(O,K),F.splice(f,1),K._setGlobalContextVariable("pendingStopAnimations",F),this.done._activateSignal(K),K._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(K,O){const F=O._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),f=F.indexOf(K.uniqueId);-1!==f&&(K.stop(),F.splice(f,1),O._setGlobalContextVariable("currentlyRunningAnimationGroups",F))}}(0,r.g)("FlowGraphStopAnimationBlock",J)}}]);