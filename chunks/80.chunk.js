"use strict";(self.hmihoa2fs98=self.hmihoa2fs98||[]).push([[80],{14836:(b,d,P)=>{P.r(d),P.d(d,{FlowGraphStopAnimationBlock:()=>C});var G=P(13365),W=P(11639),i=P(11504),q=P(13401);class C extends q.d{constructor(b){super(b),this.animationGroup=this.registerDataInput("animationGroup",G.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",G.p,-1)}_preparePendingTasks(b){const d=this.animationGroup.getValue(b),P=this.stopAtFrame.getValue(b)??-1,G=b._getGlobalContextVariable("pendingStopAnimations",[]);G.push({uniqueId:d.uniqueId,stopAtFrame:P}),b._setGlobalContextVariable("pendingStopAnimations",G)}_cancelPendingTasks(b){const d=this.animationGroup.getValue(b),P=b._getGlobalContextVariable("pendingStopAnimations",[]);for(let G=0;G<P.length;G++)if(P[G].uniqueId===d.uniqueId){P.splice(G,1),b._setGlobalContextVariable("pendingStopAnimations",P);break}}_execute(b){const d=this.animationGroup.getValue(b),P=this.stopAtFrame.getValue(b)??-1;return d?isNaN(P)?this._reportError(b,"Invalid stop time."):(P>0?this._startPendingTasks(b):this._stopAnimation(d,b),void this.out._activateSignal(b)):(i.e.Warn("No animation group provided to stop."),this._reportError(b,"No animation group provided to stop."))}_executeOnTick(b){const d=this.animationGroup.getValue(b),P=b._getGlobalContextVariable("pendingStopAnimations",[]);for(let G=0;G<P.length;G++)if(P[G].uniqueId===d.uniqueId&&d.getCurrentFrame()>=P[G].stopAtFrame){this._stopAnimation(d,b),P.splice(G,1),b._setGlobalContextVariable("pendingStopAnimations",P),this.done._activateSignal(b),b._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(b,d){const P=d._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),G=P.indexOf(b.uniqueId);-1!==G&&(b.stop(),P.splice(G,1),d._setGlobalContextVariable("currentlyRunningAnimationGroups",P))}}(0,W.f)("FlowGraphStopAnimationBlock",C)}}]);