"use strict";(self["3b8bnhi4gzj"]=self["3b8bnhi4gzj"]||[]).push([[80],{14954:(Z,h,V)=>{V.r(h),V.d(h,{FlowGraphStopAnimationBlock:()=>d});var v=V(13459),A=V(11691),H=V(11580),K=V(13509);class d extends K.b{constructor(Z){super(Z),this.animationGroup=this.registerDataInput("animationGroup",v.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",v.t,-1)}_preparePendingTasks(Z){const h=this.animationGroup.getValue(Z),V=this.stopAtFrame.getValue(Z)??-1,v=Z._getGlobalContextVariable("pendingStopAnimations",[]);v.push({uniqueId:h.uniqueId,stopAtFrame:V}),Z._setGlobalContextVariable("pendingStopAnimations",v)}_cancelPendingTasks(Z){const h=this.animationGroup.getValue(Z),V=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let v=0;v<V.length;v++)if(V[v].uniqueId===h.uniqueId){V.splice(v,1),Z._setGlobalContextVariable("pendingStopAnimations",V);break}}_execute(Z){const h=this.animationGroup.getValue(Z),V=this.stopAtFrame.getValue(Z)??-1;return h?isNaN(V)?this._reportError(Z,"Invalid stop time."):(V>0?this._startPendingTasks(Z):this._stopAnimation(h,Z),void this.out._activateSignal(Z)):(H.b.Warn("No animation group provided to stop."),this._reportError(Z,"No animation group provided to stop."))}_executeOnTick(Z){const h=this.animationGroup.getValue(Z),V=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let v=0;v<V.length;v++)if(V[v].uniqueId===h.uniqueId&&h.getCurrentFrame()>=V[v].stopAtFrame){this._stopAnimation(h,Z),V.splice(v,1),Z._setGlobalContextVariable("pendingStopAnimations",V),this.done._activateSignal(Z),Z._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(Z,h){const V=h._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),v=V.indexOf(Z.uniqueId);-1!==v&&(Z.stop(),V.splice(v,1),h._setGlobalContextVariable("currentlyRunningAnimationGroups",V))}}(0,A.i)("FlowGraphStopAnimationBlock",d)}}]);