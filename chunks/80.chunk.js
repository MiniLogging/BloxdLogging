"use strict";(self.rsqbdnwe5e=self.rsqbdnwe5e||[]).push([[80],{15494:(N,p,T)=>{T.r(p),T.d(p,{FlowGraphStopAnimationBlock:()=>X});var A=T(14082),a=T(12331),C=T(12205),U=T(14127);class X extends U.e{constructor(N){super(N),this.animationGroup=this.registerDataInput("animationGroup",A.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",A.r,-1)}_preparePendingTasks(N){const p=this.animationGroup.getValue(N),T=this.stopAtFrame.getValue(N)??-1,A=N._getGlobalContextVariable("pendingStopAnimations",[]);A.push({uniqueId:p.uniqueId,stopAtFrame:T}),N._setGlobalContextVariable("pendingStopAnimations",A)}_cancelPendingTasks(N){const p=this.animationGroup.getValue(N),T=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<T.length;A++)if(T[A].uniqueId===p.uniqueId){T.splice(A,1),N._setGlobalContextVariable("pendingStopAnimations",T);break}}_execute(N){const p=this.animationGroup.getValue(N),T=this.stopAtFrame.getValue(N)??-1;return p?isNaN(T)?this._reportError(N,"Invalid stop time."):(T>0?this._startPendingTasks(N):this._stopAnimation(p,N),void this.out._activateSignal(N)):(C.d.Warn("No animation group provided to stop."),this._reportError(N,"No animation group provided to stop."))}_executeOnTick(N){const p=this.animationGroup.getValue(N),T=N._getGlobalContextVariable("pendingStopAnimations",[]);for(let A=0;A<T.length;A++)if(T[A].uniqueId===p.uniqueId&&p.getCurrentFrame()>=T[A].stopAtFrame){this._stopAnimation(p,N),T.splice(A,1),N._setGlobalContextVariable("pendingStopAnimations",T),this.done._activateSignal(N),N._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(N,p){const T=p._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),A=T.indexOf(N.uniqueId);-1!==A&&(N.stop(),T.splice(A,1),p._setGlobalContextVariable("currentlyRunningAnimationGroups",T))}}(0,a.d)("FlowGraphStopAnimationBlock",X)}}]);