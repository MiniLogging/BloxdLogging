"use strict";(self.hbnkweqmycf=self.hbnkweqmycf||[]).push([[80],{14796:(F,P,f)=>{f.r(P),f.d(P,{FlowGraphStopAnimationBlock:()=>A});var c=f(13265),N=f(11587),q=f(11474),H=f(13307);class A extends H.c{constructor(F){super(F),this.animationGroup=this.registerDataInput("animationGroup",c.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",c.o,-1)}_preparePendingTasks(F){const P=this.animationGroup.getValue(F),f=this.stopAtFrame.getValue(F)??-1,c=F._getGlobalContextVariable("pendingStopAnimations",[]);c.push({uniqueId:P.uniqueId,stopAtFrame:f}),F._setGlobalContextVariable("pendingStopAnimations",c)}_cancelPendingTasks(F){const P=this.animationGroup.getValue(F),f=F._getGlobalContextVariable("pendingStopAnimations",[]);for(let c=0;c<f.length;c++)if(f[c].uniqueId===P.uniqueId){f.splice(c,1),F._setGlobalContextVariable("pendingStopAnimations",f);break}}_execute(F){const P=this.animationGroup.getValue(F),f=this.stopAtFrame.getValue(F)??-1;return P?isNaN(f)?this._reportError(F,"Invalid stop time."):(f>0?this._startPendingTasks(F):this._stopAnimation(P,F),void this.out._activateSignal(F)):(q.d.Warn("No animation group provided to stop."),this._reportError(F,"No animation group provided to stop."))}_executeOnTick(F){const P=this.animationGroup.getValue(F),f=F._getGlobalContextVariable("pendingStopAnimations",[]);for(let c=0;c<f.length;c++)if(f[c].uniqueId===P.uniqueId&&P.getCurrentFrame()>=f[c].stopAtFrame){this._stopAnimation(P,F),f.splice(c,1),F._setGlobalContextVariable("pendingStopAnimations",f),this.done._activateSignal(F),F._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(F,P){const f=P._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),c=f.indexOf(F.uniqueId);-1!==c&&(F.stop(),f.splice(c,1),P._setGlobalContextVariable("currentlyRunningAnimationGroups",f))}}(0,N.f)("FlowGraphStopAnimationBlock",A)}}]);