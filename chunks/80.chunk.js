"use strict";(self.lfntwv94xlc=self.lfntwv94xlc||[]).push([[80],{14570:(m,S,h)=>{h.r(S),h.d(S,{FlowGraphStopAnimationBlock:()=>b});var l=h(13060),M=h(11293),O=h(11173),u=h(13100);class b extends u.e{constructor(m){super(m),this.animationGroup=this.registerDataInput("animationGroup",l.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",l.p,-1)}_preparePendingTasks(m){const S=this.animationGroup.getValue(m),h=this.stopAtFrame.getValue(m)??-1,l=m._getGlobalContextVariable("pendingStopAnimations",[]);l.push({uniqueId:S.uniqueId,stopAtFrame:h}),m._setGlobalContextVariable("pendingStopAnimations",l)}_cancelPendingTasks(m){const S=this.animationGroup.getValue(m),h=m._getGlobalContextVariable("pendingStopAnimations",[]);for(let l=0;l<h.length;l++)if(h[l].uniqueId===S.uniqueId){h.splice(l,1),m._setGlobalContextVariable("pendingStopAnimations",h);break}}_execute(m){const S=this.animationGroup.getValue(m),h=this.stopAtFrame.getValue(m)??-1;return S?isNaN(h)?this._reportError(m,"Invalid stop time."):(h>0?this._startPendingTasks(m):this._stopAnimation(S,m),void this.out._activateSignal(m)):(O.e.Warn("No animation group provided to stop."),this._reportError(m,"No animation group provided to stop."))}_executeOnTick(m){const S=this.animationGroup.getValue(m),h=m._getGlobalContextVariable("pendingStopAnimations",[]);for(let l=0;l<h.length;l++)if(h[l].uniqueId===S.uniqueId&&S.getCurrentFrame()>=h[l].stopAtFrame){this._stopAnimation(S,m),h.splice(l,1),m._setGlobalContextVariable("pendingStopAnimations",h),this.done._activateSignal(m),m._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(m,S){const h=S._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),l=h.indexOf(m.uniqueId);-1!==l&&(m.stop(),h.splice(l,1),S._setGlobalContextVariable("currentlyRunningAnimationGroups",h))}}(0,M.e)("FlowGraphStopAnimationBlock",b)}}]);