"use strict";(self.ynu1yiqvs98=self.ynu1yiqvs98||[]).push([[80],{14296:(I,E,j)=>{j.r(E),j.d(E,{FlowGraphStopAnimationBlock:()=>t});var e=j(12819),w=j(11073),z=j(10974),h=j(12852);class t extends h.c{constructor(I){super(I),this.animationGroup=this.registerDataInput("animationGroup",e.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",e.t,-1)}_preparePendingTasks(I){const E=this.animationGroup.getValue(I),j=this.stopAtFrame.getValue(I)??-1,e=I._getGlobalContextVariable("pendingStopAnimations",[]);e.push({uniqueId:E.uniqueId,stopAtFrame:j}),I._setGlobalContextVariable("pendingStopAnimations",e)}_cancelPendingTasks(I){const E=this.animationGroup.getValue(I),j=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<j.length;e++)if(j[e].uniqueId===E.uniqueId){j.splice(e,1),I._setGlobalContextVariable("pendingStopAnimations",j);break}}_execute(I){const E=this.animationGroup.getValue(I),j=this.stopAtFrame.getValue(I)??-1;return E?isNaN(j)?this._reportError(I,"Invalid stop time."):(j>0?this._startPendingTasks(I):this._stopAnimation(E,I),void this.out._activateSignal(I)):(z.b.Warn("No animation group provided to stop."),this._reportError(I,"No animation group provided to stop."))}_executeOnTick(I){const E=this.animationGroup.getValue(I),j=I._getGlobalContextVariable("pendingStopAnimations",[]);for(let e=0;e<j.length;e++)if(j[e].uniqueId===E.uniqueId&&E.getCurrentFrame()>=j[e].stopAtFrame){this._stopAnimation(E,I),j.splice(e,1),I._setGlobalContextVariable("pendingStopAnimations",j),this.done._activateSignal(I),I._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(I,E){const j=E._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),e=j.indexOf(I.uniqueId);-1!==e&&(I.stop(),j.splice(e,1),E._setGlobalContextVariable("currentlyRunningAnimationGroups",j))}}(0,w.h)("FlowGraphStopAnimationBlock",t)}}]);