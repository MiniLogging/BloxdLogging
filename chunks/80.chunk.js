"use strict";(self["3gghkoft8x"]=self["3gghkoft8x"]||[]).push([[80],{15466:(y,S,I)=>{I.r(S),I.d(S,{FlowGraphStopAnimationBlock:()=>d});var V=I(14033),i=I(12282),A=I(12151),B=I(14075);class d extends B.e{constructor(y){super(y),this.animationGroup=this.registerDataInput("animationGroup",V.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",V.t,-1)}_preparePendingTasks(y){const S=this.animationGroup.getValue(y),I=this.stopAtFrame.getValue(y)??-1,V=y._getGlobalContextVariable("pendingStopAnimations",[]);V.push({uniqueId:S.uniqueId,stopAtFrame:I}),y._setGlobalContextVariable("pendingStopAnimations",V)}_cancelPendingTasks(y){const S=this.animationGroup.getValue(y),I=y._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<I.length;V++)if(I[V].uniqueId===S.uniqueId){I.splice(V,1),y._setGlobalContextVariable("pendingStopAnimations",I);break}}_execute(y){const S=this.animationGroup.getValue(y),I=this.stopAtFrame.getValue(y)??-1;return S?isNaN(I)?this._reportError(y,"Invalid stop time."):(I>0?this._startPendingTasks(y):this._stopAnimation(S,y),void this.out._activateSignal(y)):(A.b.Warn("No animation group provided to stop."),this._reportError(y,"No animation group provided to stop."))}_executeOnTick(y){const S=this.animationGroup.getValue(y),I=y._getGlobalContextVariable("pendingStopAnimations",[]);for(let V=0;V<I.length;V++)if(I[V].uniqueId===S.uniqueId&&S.getCurrentFrame()>=I[V].stopAtFrame){this._stopAnimation(S,y),I.splice(V,1),y._setGlobalContextVariable("pendingStopAnimations",I),this.done._activateSignal(y),y._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(y,S){const I=S._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),V=I.indexOf(y.uniqueId);-1!==V&&(y.stop(),I.splice(V,1),S._setGlobalContextVariable("currentlyRunningAnimationGroups",I))}}(0,i.e)("FlowGraphStopAnimationBlock",d)}}]);