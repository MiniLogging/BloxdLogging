"use strict";(self["269hv5nclphh"]=self["269hv5nclphh"]||[]).push([[80],{15553:(E,H,d)=>{d.r(H),d.d(H,{FlowGraphStopAnimationBlock:()=>l});var n=d(14103),Z=d(12344),I=d(12237),g=d(14137);class l extends g.b{constructor(E){super(E),this.animationGroup=this.registerDataInput("animationGroup",n.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",n.r,-1)}_preparePendingTasks(E){const H=this.animationGroup.getValue(E),d=this.stopAtFrame.getValue(E)??-1,n=E._getGlobalContextVariable("pendingStopAnimations",[]);n.push({uniqueId:H.uniqueId,stopAtFrame:d}),E._setGlobalContextVariable("pendingStopAnimations",n)}_cancelPendingTasks(E){const H=this.animationGroup.getValue(E),d=E._getGlobalContextVariable("pendingStopAnimations",[]);for(let n=0;n<d.length;n++)if(d[n].uniqueId===H.uniqueId){d.splice(n,1),E._setGlobalContextVariable("pendingStopAnimations",d);break}}_execute(E){const H=this.animationGroup.getValue(E),d=this.stopAtFrame.getValue(E)??-1;return H?isNaN(d)?this._reportError(E,"Invalid stop time."):(d>0?this._startPendingTasks(E):this._stopAnimation(H,E),void this.out._activateSignal(E)):(I.b.Warn("No animation group provided to stop."),this._reportError(E,"No animation group provided to stop."))}_executeOnTick(E){const H=this.animationGroup.getValue(E),d=E._getGlobalContextVariable("pendingStopAnimations",[]);for(let n=0;n<d.length;n++)if(d[n].uniqueId===H.uniqueId&&H.getCurrentFrame()>=d[n].stopAtFrame){this._stopAnimation(H,E),d.splice(n,1),E._setGlobalContextVariable("pendingStopAnimations",d),this.done._activateSignal(E),E._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(E,H){const d=H._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),n=d.indexOf(E.uniqueId);-1!==n&&(E.stop(),d.splice(n,1),H._setGlobalContextVariable("currentlyRunningAnimationGroups",d))}}(0,Z.e)("FlowGraphStopAnimationBlock",l)}}]);