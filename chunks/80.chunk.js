"use strict";(self.zy41qorie9=self.zy41qorie9||[]).push([[80],{15311:(Z,l,C)=>{C.r(l),C.d(l,{FlowGraphStopAnimationBlock:()=>f});var B=C(13830),x=C(12400),b=C(12263),K=C(13866);class f extends K.e{constructor(Z){super(Z),this.animationGroup=this.registerDataInput("animationGroup",B.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",B.o,-1)}_preparePendingTasks(Z){const l=this.animationGroup.getValue(Z),C=this.stopAtFrame.getValue(Z)??-1,B=Z._getGlobalContextVariable("pendingStopAnimations",[]);B.push({uniqueId:l.uniqueId,stopAtFrame:C}),Z._setGlobalContextVariable("pendingStopAnimations",B)}_cancelPendingTasks(Z){const l=this.animationGroup.getValue(Z),C=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let B=0;B<C.length;B++)if(C[B].uniqueId===l.uniqueId){C.splice(B,1),Z._setGlobalContextVariable("pendingStopAnimations",C);break}}_execute(Z){const l=this.animationGroup.getValue(Z),C=this.stopAtFrame.getValue(Z)??-1;return l?isNaN(C)?this._reportError(Z,"Invalid stop time."):(C>0?this._startPendingTasks(Z):this._stopAnimation(l,Z),void this.out._activateSignal(Z)):(b.e.Warn("No animation group provided to stop."),this._reportError(Z,"No animation group provided to stop."))}_executeOnTick(Z){const l=this.animationGroup.getValue(Z),C=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let B=0;B<C.length;B++)if(C[B].uniqueId===l.uniqueId&&l.getCurrentFrame()>=C[B].stopAtFrame){this._stopAnimation(l,Z),C.splice(B,1),Z._setGlobalContextVariable("pendingStopAnimations",C),this.done._activateSignal(Z),Z._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(Z,l){const C=l._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),B=C.indexOf(Z.uniqueId);-1!==B&&(Z.stop(),C.splice(B,1),l._setGlobalContextVariable("currentlyRunningAnimationGroups",C))}}(0,x.c)("FlowGraphStopAnimationBlock",f)}}]);