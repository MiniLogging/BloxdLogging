"use strict";(self.k9ivgwsw3f=self.k9ivgwsw3f||[]).push([[80],{16055:(Y,b,C)=>{C.r(b),C.d(b,{FlowGraphStopAnimationBlock:()=>B});var R=C(14424),q=C(12790),A=C(12669),E=C(14460);class B extends E.d{constructor(Y){super(Y),this.animationGroup=this.registerDataInput("animationGroup",R.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",R.q,-1)}_preparePendingTasks(Y){const b=this.animationGroup.getValue(Y),C=this.stopAtFrame.getValue(Y)??-1,R=Y._getGlobalContextVariable("pendingStopAnimations",[]);R.push({uniqueId:b.uniqueId,stopAtFrame:C}),Y._setGlobalContextVariable("pendingStopAnimations",R)}_cancelPendingTasks(Y){const b=this.animationGroup.getValue(Y),C=Y._getGlobalContextVariable("pendingStopAnimations",[]);for(let R=0;R<C.length;R++)if(C[R].uniqueId===b.uniqueId){C.splice(R,1),Y._setGlobalContextVariable("pendingStopAnimations",C);break}}_execute(Y){const b=this.animationGroup.getValue(Y),C=this.stopAtFrame.getValue(Y)??-1;return b?isNaN(C)?this._reportError(Y,"Invalid stop time."):(C>0?this._startPendingTasks(Y):this._stopAnimation(b,Y),void this.out._activateSignal(Y)):(A.e.Warn("No animation group provided to stop."),this._reportError(Y,"No animation group provided to stop."))}_executeOnTick(Y){const b=this.animationGroup.getValue(Y),C=Y._getGlobalContextVariable("pendingStopAnimations",[]);for(let R=0;R<C.length;R++)if(C[R].uniqueId===b.uniqueId&&b.getCurrentFrame()>=C[R].stopAtFrame){this._stopAnimation(b,Y),C.splice(R,1),Y._setGlobalContextVariable("pendingStopAnimations",C),this.done._activateSignal(Y),Y._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(Y,b){const C=b._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),R=C.indexOf(Y.uniqueId);-1!==R&&(Y.stop(),C.splice(R,1),b._setGlobalContextVariable("currentlyRunningAnimationGroups",C))}}(0,q.g)("FlowGraphStopAnimationBlock",B)}}]);