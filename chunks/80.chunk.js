"use strict";(self.mo7o6813fhb=self.mo7o6813fhb||[]).push([[80],{15331:(t,U,y)=>{y.r(U),y.d(U,{FlowGraphStopAnimationBlock:()=>X});var I=y(13845),r=y(12338),Y=y(12221),mt=y(13893);class X extends mt.e{constructor(t){super(t),this.animationGroup=this.registerDataInput("animationGroup",I.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",I.w,-1)}_preparePendingTasks(t){const U=this.animationGroup.getValue(t),y=this.stopAtFrame.getValue(t)??-1,I=t._getGlobalContextVariable("pendingStopAnimations",[]);I.push({uniqueId:U.uniqueId,stopAtFrame:y}),t._setGlobalContextVariable("pendingStopAnimations",I)}_cancelPendingTasks(t){const U=this.animationGroup.getValue(t),y=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let I=0;I<y.length;I++)if(y[I].uniqueId===U.uniqueId){y.splice(I,1),t._setGlobalContextVariable("pendingStopAnimations",y);break}}_execute(t){const U=this.animationGroup.getValue(t),y=this.stopAtFrame.getValue(t)??-1;return U?isNaN(y)?this._reportError(t,"Invalid stop time."):(y>0?this._startPendingTasks(t):this._stopAnimation(U,t),void this.out._activateSignal(t)):(Y.b.Warn("No animation group provided to stop."),this._reportError(t,"No animation group provided to stop."))}_executeOnTick(t){const U=this.animationGroup.getValue(t),y=t._getGlobalContextVariable("pendingStopAnimations",[]);for(let I=0;I<y.length;I++)if(y[I].uniqueId===U.uniqueId&&U.getCurrentFrame()>=y[I].stopAtFrame){this._stopAnimation(U,t),y.splice(I,1),t._setGlobalContextVariable("pendingStopAnimations",y),this.done._activateSignal(t),t._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(t,U){const y=U._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),I=y.indexOf(t.uniqueId);-1!==I&&(t.stop(),y.splice(I,1),U._setGlobalContextVariable("currentlyRunningAnimationGroups",y))}}(0,r.f)("FlowGraphStopAnimationBlock",X)}}]);