"use strict";(self["1kjc9ee3uyt"]=self["1kjc9ee3uyt"]||[]).push([[80],{14711:(w,E,G)=>{G.r(E),G.d(E,{FlowGraphStopAnimationBlock:()=>x});var P=G(13281),h=G(11646),B=G(11518),y=G(13321);class x extends y.d{constructor(w){super(w),this.animationGroup=this.registerDataInput("animationGroup",P.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",P.r,-1)}_preparePendingTasks(w){const E=this.animationGroup.getValue(w),G=this.stopAtFrame.getValue(w)??-1,P=w._getGlobalContextVariable("pendingStopAnimations",[]);P.push({uniqueId:E.uniqueId,stopAtFrame:G}),w._setGlobalContextVariable("pendingStopAnimations",P)}_cancelPendingTasks(w){const E=this.animationGroup.getValue(w),G=w._getGlobalContextVariable("pendingStopAnimations",[]);for(let P=0;P<G.length;P++)if(G[P].uniqueId===E.uniqueId){G.splice(P,1),w._setGlobalContextVariable("pendingStopAnimations",G);break}}_execute(w){const E=this.animationGroup.getValue(w),G=this.stopAtFrame.getValue(w)??-1;return E?isNaN(G)?this._reportError(w,"Invalid stop time."):(G>0?this._startPendingTasks(w):this._stopAnimation(E,w),void this.out._activateSignal(w)):(B.e.Warn("No animation group provided to stop."),this._reportError(w,"No animation group provided to stop."))}_executeOnTick(w){const E=this.animationGroup.getValue(w),G=w._getGlobalContextVariable("pendingStopAnimations",[]);for(let P=0;P<G.length;P++)if(G[P].uniqueId===E.uniqueId&&E.getCurrentFrame()>=G[P].stopAtFrame){this._stopAnimation(E,w),G.splice(P,1),w._setGlobalContextVariable("pendingStopAnimations",G),this.done._activateSignal(w),w._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(w,E){const G=E._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),P=G.indexOf(w.uniqueId);-1!==P&&(w.stop(),G.splice(P,1),E._setGlobalContextVariable("currentlyRunningAnimationGroups",G))}}(0,h.g)("FlowGraphStopAnimationBlock",x)}}]);