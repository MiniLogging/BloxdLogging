"use strict";(self["686i8587bmi"]=self["686i8587bmi"]||[]).push([[80],{16011:(h,d,T)=>{T.r(d),T.d(d,{FlowGraphStopAnimationBlock:()=>X});var Y=T(14528),y=T(12714),C=T(12596),n=T(14574);class X extends n.e{constructor(h){super(h),this.animationGroup=this.registerDataInput("animationGroup",Y.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",Y.s,-1)}_preparePendingTasks(h){const d=this.animationGroup.getValue(h),T=this.stopAtFrame.getValue(h)??-1,Y=h._getGlobalContextVariable("pendingStopAnimations",[]);Y.push({uniqueId:d.uniqueId,stopAtFrame:T}),h._setGlobalContextVariable("pendingStopAnimations",Y)}_cancelPendingTasks(h){const d=this.animationGroup.getValue(h),T=h._getGlobalContextVariable("pendingStopAnimations",[]);for(let Y=0;Y<T.length;Y++)if(T[Y].uniqueId===d.uniqueId){T.splice(Y,1),h._setGlobalContextVariable("pendingStopAnimations",T);break}}_execute(h){const d=this.animationGroup.getValue(h),T=this.stopAtFrame.getValue(h)??-1;return d?isNaN(T)?this._reportError(h,"Invalid stop time."):(T>0?this._startPendingTasks(h):this._stopAnimation(d,h),void this.out._activateSignal(h)):(C.c.Warn("No animation group provided to stop."),this._reportError(h,"No animation group provided to stop."))}_executeOnTick(h){const d=this.animationGroup.getValue(h),T=h._getGlobalContextVariable("pendingStopAnimations",[]);for(let Y=0;Y<T.length;Y++)if(T[Y].uniqueId===d.uniqueId&&d.getCurrentFrame()>=T[Y].stopAtFrame){this._stopAnimation(d,h),T.splice(Y,1),h._setGlobalContextVariable("pendingStopAnimations",T),this.done._activateSignal(h),h._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(h,d){const T=d._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),Y=T.indexOf(h.uniqueId);-1!==Y&&(h.stop(),T.splice(Y,1),d._setGlobalContextVariable("currentlyRunningAnimationGroups",T))}}(0,y.e)("FlowGraphStopAnimationBlock",X)}}]);