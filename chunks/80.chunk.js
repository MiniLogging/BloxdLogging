"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[80],{14416:(o,H,n)=>{n.r(H),n.d(H,{FlowGraphStopAnimationBlock:()=>Y});var E=n(12933),k=n(11140),g=n(11038),O=n(12974);class Y extends O.e{constructor(o){super(o),this.animationGroup=this.registerDataInput("animationGroup",E.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",E.r,-1)}_preparePendingTasks(o){const H=this.animationGroup.getValue(o),n=this.stopAtFrame.getValue(o)??-1,E=o._getGlobalContextVariable("pendingStopAnimations",[]);E.push({uniqueId:H.uniqueId,stopAtFrame:n}),o._setGlobalContextVariable("pendingStopAnimations",E)}_cancelPendingTasks(o){const H=this.animationGroup.getValue(o),n=o._getGlobalContextVariable("pendingStopAnimations",[]);for(let E=0;E<n.length;E++)if(n[E].uniqueId===H.uniqueId){n.splice(E,1),o._setGlobalContextVariable("pendingStopAnimations",n);break}}_execute(o){const H=this.animationGroup.getValue(o),n=this.stopAtFrame.getValue(o)??-1;return H?isNaN(n)?this._reportError(o,"Invalid stop time."):(n>0?this._startPendingTasks(o):this._stopAnimation(H,o),void this.out._activateSignal(o)):(g.d.Warn("No animation group provided to stop."),this._reportError(o,"No animation group provided to stop."))}_executeOnTick(o){const H=this.animationGroup.getValue(o),n=o._getGlobalContextVariable("pendingStopAnimations",[]);for(let E=0;E<n.length;E++)if(n[E].uniqueId===H.uniqueId&&H.getCurrentFrame()>=n[E].stopAtFrame){this._stopAnimation(H,o),n.splice(E,1),o._setGlobalContextVariable("pendingStopAnimations",n),this.done._activateSignal(o),o._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(o,H){const n=H._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),E=n.indexOf(o.uniqueId);-1!==E&&(o.stop(),n.splice(E,1),H._setGlobalContextVariable("currentlyRunningAnimationGroups",n))}}(0,k.e)("FlowGraphStopAnimationBlock",Y)}}]);