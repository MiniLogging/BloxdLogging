"use strict";(self.yg1iw12lizp=self.yg1iw12lizp||[]).push([[80],{15817:(L,U,x)=>{x.r(U),x.d(U,{FlowGraphStopAnimationBlock:()=>a});var mL=x(14348),p=x(12547),G=x(12406),F=x(14396);class a extends F.c{constructor(L){super(L),this.animationGroup=this.registerDataInput("animationGroup",mL.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",mL.u,-1)}_preparePendingTasks(L){const U=this.animationGroup.getValue(L),x=this.stopAtFrame.getValue(L)??-1,mL=L._getGlobalContextVariable("pendingStopAnimations",[]);mL.push({uniqueId:U.uniqueId,stopAtFrame:x}),L._setGlobalContextVariable("pendingStopAnimations",mL)}_cancelPendingTasks(L){const U=this.animationGroup.getValue(L),x=L._getGlobalContextVariable("pendingStopAnimations",[]);for(let mL=0;mL<x.length;mL++)if(x[mL].uniqueId===U.uniqueId){x.splice(mL,1),L._setGlobalContextVariable("pendingStopAnimations",x);break}}_execute(L){const U=this.animationGroup.getValue(L),x=this.stopAtFrame.getValue(L)??-1;return U?isNaN(x)?this._reportError(L,"Invalid stop time."):(x>0?this._startPendingTasks(L):this._stopAnimation(U,L),void this.out._activateSignal(L)):(G.c.Warn("No animation group provided to stop."),this._reportError(L,"No animation group provided to stop."))}_executeOnTick(L){const U=this.animationGroup.getValue(L),x=L._getGlobalContextVariable("pendingStopAnimations",[]);for(let mL=0;mL<x.length;mL++)if(x[mL].uniqueId===U.uniqueId&&U.getCurrentFrame()>=x[mL].stopAtFrame){this._stopAnimation(U,L),x.splice(mL,1),L._setGlobalContextVariable("pendingStopAnimations",x),this.done._activateSignal(L),L._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(L,U){const x=U._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),mL=x.indexOf(L.uniqueId);-1!==mL&&(L.stop(),x.splice(mL,1),U._setGlobalContextVariable("currentlyRunningAnimationGroups",x))}}(0,p.d)("FlowGraphStopAnimationBlock",a)}}]);