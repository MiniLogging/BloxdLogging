"use strict";(self.dwifukwnts=self.dwifukwnts||[]).push([[80],{14780:(U,X,b)=>{b.r(X),b.d(X,{FlowGraphStopAnimationBlock:()=>z});var F=b(13281),E=b(11551),w=b(11408),Q=b(13330);class z extends Q.e{constructor(U){super(U),this.animationGroup=this.registerDataInput("animationGroup",F.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",F.s,-1)}_preparePendingTasks(U){const X=this.animationGroup.getValue(U),b=this.stopAtFrame.getValue(U)??-1,F=U._getGlobalContextVariable("pendingStopAnimations",[]);F.push({uniqueId:X.uniqueId,stopAtFrame:b}),U._setGlobalContextVariable("pendingStopAnimations",F)}_cancelPendingTasks(U){const X=this.animationGroup.getValue(U),b=U._getGlobalContextVariable("pendingStopAnimations",[]);for(let F=0;F<b.length;F++)if(b[F].uniqueId===X.uniqueId){b.splice(F,1),U._setGlobalContextVariable("pendingStopAnimations",b);break}}_execute(U){const X=this.animationGroup.getValue(U),b=this.stopAtFrame.getValue(U)??-1;return X?isNaN(b)?this._reportError(U,"Invalid stop time."):(b>0?this._startPendingTasks(U):this._stopAnimation(X,U),void this.out._activateSignal(U)):(w.e.Warn("No animation group provided to stop."),this._reportError(U,"No animation group provided to stop."))}_executeOnTick(U){const X=this.animationGroup.getValue(U),b=U._getGlobalContextVariable("pendingStopAnimations",[]);for(let F=0;F<b.length;F++)if(b[F].uniqueId===X.uniqueId&&X.getCurrentFrame()>=b[F].stopAtFrame){this._stopAnimation(X,U),b.splice(F,1),U._setGlobalContextVariable("pendingStopAnimations",b),this.done._activateSignal(U),U._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(U,X){const b=X._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),F=b.indexOf(U.uniqueId);-1!==F&&(U.stop(),b.splice(F,1),X._setGlobalContextVariable("currentlyRunningAnimationGroups",b))}}(0,E.f)("FlowGraphStopAnimationBlock",z)}}]);