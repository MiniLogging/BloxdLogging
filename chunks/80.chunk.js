"use strict";(self["9d4d30r2sf"]=self["9d4d30r2sf"]||[]).push([[80],{15676:(o,v,V)=>{V.r(v),V.d(v,{FlowGraphStopAnimationBlock:()=>U});var g=V(14241),E=V(12449),I=V(12308),Q=V(14281);class U extends Q.e{constructor(o){super(o),this.animationGroup=this.registerDataInput("animationGroup",g.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",g.t,-1)}_preparePendingTasks(o){const v=this.animationGroup.getValue(o),V=this.stopAtFrame.getValue(o)??-1,g=o._getGlobalContextVariable("pendingStopAnimations",[]);g.push({uniqueId:v.uniqueId,stopAtFrame:V}),o._setGlobalContextVariable("pendingStopAnimations",g)}_cancelPendingTasks(o){const v=this.animationGroup.getValue(o),V=o._getGlobalContextVariable("pendingStopAnimations",[]);for(let g=0;g<V.length;g++)if(V[g].uniqueId===v.uniqueId){V.splice(g,1),o._setGlobalContextVariable("pendingStopAnimations",V);break}}_execute(o){const v=this.animationGroup.getValue(o),V=this.stopAtFrame.getValue(o)??-1;return v?isNaN(V)?this._reportError(o,"Invalid stop time."):(V>0?this._startPendingTasks(o):this._stopAnimation(v,o),void this.out._activateSignal(o)):(I.b.Warn("No animation group provided to stop."),this._reportError(o,"No animation group provided to stop."))}_executeOnTick(o){const v=this.animationGroup.getValue(o),V=o._getGlobalContextVariable("pendingStopAnimations",[]);for(let g=0;g<V.length;g++)if(V[g].uniqueId===v.uniqueId&&v.getCurrentFrame()>=V[g].stopAtFrame){this._stopAnimation(v,o),V.splice(g,1),o._setGlobalContextVariable("pendingStopAnimations",V),this.done._activateSignal(o),o._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(o,v){const V=v._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),g=V.indexOf(o.uniqueId);-1!==g&&(o.stop(),V.splice(g,1),v._setGlobalContextVariable("currentlyRunningAnimationGroups",V))}}(0,E.h)("FlowGraphStopAnimationBlock",U)}}]);