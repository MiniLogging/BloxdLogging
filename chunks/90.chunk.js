"use strict";(self.zcqpiao938m=self.zcqpiao938m||[]).push([[90],{15009:(C,U,K)=>{K.r(U),K.d(U,{FlowGraphDeterminantBlock:()=>j,FlowGraphInvertMatrixBlock:()=>p,FlowGraphMatrixComposeBlock:()=>b,FlowGraphMatrixDecomposeBlock:()=>u,FlowGraphMatrixMultiplicationBlock:()=>E,FlowGraphTransposeBlock:()=>z});var m=K(13539),O=K(13514),X=K(11827),A=K(11789),e=K(14994),t=K(14986);class z extends e.d{constructor(C){super((0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(C=>C.transpose?C.transpose():X.Matrix.Transpose(C)),"FlowGraphTransposeBlock",C)}}(0,A.h)("FlowGraphTransposeBlock",z);class j extends e.d{constructor(C){super((0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),O.w,(C=>C.determinant()),"FlowGraphDeterminantBlock",C)}}(0,A.h)("FlowGraphDeterminantBlock",j);class p extends e.d{constructor(C){super((0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(C=>C.inverse?C.inverse():X.Matrix.Invert(C)),"FlowGraphInvertMatrixBlock",C)}}(0,A.h)("FlowGraphInvertMatrixBlock",p);class E extends t.b{constructor(C){super((0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),(0,O.M)((null===C||void 0===C?void 0:C.matrixType)||"Matrix"),((C,U)=>U.multiply(C)),"FlowGraphMatrixMultiplicationBlock",C)}}(0,A.h)("FlowGraphMatrixMultiplicationBlock",E);class u extends m.e{constructor(C){super(C),this.input=this.registerDataInput("input",O.m),this.position=this.registerDataOutput("position",O.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",O.x),this.ue=this.registerDataOutput("ue",O.E),this.isValid=this.registerDataOutput("isValid",O.f,!1)}_updateOutputs(C){const U=C._getExecutionVariable(this,"executionId",-1),K=C._getExecutionVariable(this,"cachedPosition",null),m=C._getExecutionVariable(this,"cachedRotation",null),O=C._getExecutionVariable(this,"cachedScaling",null);if(U===C.executionId&&K&&m&&O)this.position.setValue(K,C),this.rotationQuaternion.setValue(m,C),this.ue.setValue(O,C);else{const U=this.input.getValue(C),A=K||new X.bU,e=m||new X.Quaternion,t=O||new X.bU,z=Math.round(1e4*U.m[3])/1e4,j=Math.round(1e4*U.m[7])/1e4,p=Math.round(1e4*U.m[11])/1e4,E=Math.round(1e4*U.m[15])/1e4;if(0!==z||0!==j||0!==p||1!==E)return this.isValid.setValue(!1,C),this.position.setValue(X.bU.Zero(),C),this.rotationQuaternion.setValue(X.Quaternion.Identity(),C),void this.ue.setValue(X.bU.One(),C);const u=U.decompose(t,e,A);this.isValid.setValue(u,C),this.position.setValue(A,C),this.rotationQuaternion.setValue(e,C),this.ue.setValue(t,C),C._setExecutionVariable(this,"cachedPosition",A),C._setExecutionVariable(this,"cachedRotation",e),C._setExecutionVariable(this,"cachedScaling",t),C._setExecutionVariable(this,"executionId",C.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,A.h)("FlowGraphMatrixDecompose",u);class b extends m.e{constructor(C){super(C),this.position=this.registerDataInput("position",O.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",O.x),this.ue=this.registerDataInput("ue",O.E),this.value=this.registerDataOutput("value",O.m)}_updateOutputs(C){const U=C._getExecutionVariable(this,"executionId",-1),K=C._getExecutionVariable(this,"cachedMatrix",null);if(U===C.executionId&&K)this.value.setValue(K,C);else{const U=X.Matrix.Compose(this.ue.getValue(C),this.rotationQuaternion.getValue(C),this.position.getValue(C));this.value.setValue(U,C),C._setExecutionVariable(this,"cachedMatrix",U),C._setExecutionVariable(this,"executionId",C.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,A.h)("FlowGraphMatrixCompose",b)},14986:(C,U,K)=>{K.d(U,{b:()=>O});var m=K(14989);class O extends m.b{constructor(C,U,K,m,O,X){super(K,X),this._operation=m,this._className=O,this.a=this.registerDataInput("a",C),this.b=this.registerDataInput("b",U)}_doOperation(C){const U=this.a.getValue(C),K=this.b.getValue(C);return this._operation(U,K)}getClassName(){return this._className}}},14989:(C,U,K)=>{K.d(U,{b:()=>e});var m=K(13539),O=K(13514);const X="cachedOperationValue",A="cachedExecutionId";class e extends m.e{constructor(C,U){super(U),this.value=this.registerDataOutput("value",C),this.isValid=this.registerDataOutput("isValid",O.f)}_updateOutputs(C){const U=C._getExecutionVariable(this,A,-1),K=C._getExecutionVariable(this,X,null);if(void 0!==K&&null!==K&&U===C.executionId)this.isValid.setValue(!0,C),this.value.setValue(K,C);else try{const U=this._doOperation(C);if(void 0===U||null===U)return void this.isValid.setValue(!1,C);C._setExecutionVariable(this,X,U),C._setExecutionVariable(this,A,C.executionId),this.value.setValue(U,C),this.isValid.setValue(!0,C)}catch(m){this.isValid.setValue(!1,C)}}}},14994:(C,U,K)=>{K.d(U,{d:()=>O});var m=K(14989);class O extends m.b{constructor(C,U,K,m,O){super(U,O),this._operation=K,this._className=m,this.a=this.registerDataInput("a",C)}_doOperation(C){return this._operation(this.a.getValue(C))}getClassName(){return this._className}}}}]);