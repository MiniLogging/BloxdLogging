"use strict";(self.hmihoa2fs98=self.hmihoa2fs98||[]).push([[90],{14903:(b,d,P)=>{P.r(d),P.d(d,{FlowGraphDeterminantBlock:()=>x,FlowGraphInvertMatrixBlock:()=>Y,FlowGraphMatrixComposeBlock:()=>w,FlowGraphMatrixDecomposeBlock:()=>E,FlowGraphMatrixMultiplicationBlock:()=>s,FlowGraphTransposeBlock:()=>L});var G=P(13386),W=P(13365),i=P(11681),q=P(11639),C=P(14893),J=P(14885);class L extends C.b{constructor(b){super((0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(b=>b.transpose?b.transpose():i.Matrix.Transpose(b)),"FlowGraphTransposeBlock",b)}}(0,q.f)("FlowGraphTransposeBlock",L);class x extends C.b{constructor(b){super((0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),W.p,(b=>b.determinant()),"FlowGraphDeterminantBlock",b)}}(0,q.f)("FlowGraphDeterminantBlock",x);class Y extends C.b{constructor(b){super((0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(b=>b.inverse?b.inverse():i.Matrix.Invert(b)),"FlowGraphInvertMatrixBlock",b)}}(0,q.f)("FlowGraphInvertMatrixBlock",Y);class s extends J.b{constructor(b){super((0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,W.F)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),((b,d)=>d.multiply(b)),"FlowGraphMatrixMultiplicationBlock",b)}}(0,q.f)("FlowGraphMatrixMultiplicationBlock",s);class E extends G.b{constructor(b){super(b),this.input=this.registerDataInput("input",W.g),this.position=this.registerDataOutput("position",W.y),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",W.s),this.hd=this.registerDataOutput("hd",W.y),this.isValid=this.registerDataOutput("isValid",W.c,!1)}_updateOutputs(b){const d=b._getExecutionVariable(this,"executionId",-1),P=b._getExecutionVariable(this,"cachedPosition",null),G=b._getExecutionVariable(this,"cachedRotation",null),W=b._getExecutionVariable(this,"cachedScaling",null);if(d===b.executionId&&P&&G&&W)this.position.setValue(P,b),this.rotationQuaternion.setValue(G,b),this.hd.setValue(W,b);else{const d=this.input.getValue(b),q=P||new i.ed,C=G||new i.Quaternion,J=W||new i.ed,L=Math.round(1e4*d.m[3])/1e4,x=Math.round(1e4*d.m[7])/1e4,Y=Math.round(1e4*d.m[11])/1e4,s=Math.round(1e4*d.m[15])/1e4;if(0!==L||0!==x||0!==Y||1!==s)return this.isValid.setValue(!1,b),this.position.setValue(i.ed.Zero(),b),this.rotationQuaternion.setValue(i.Quaternion.Identity(),b),void this.hd.setValue(i.ed.One(),b);const E=d.decompose(J,C,q);this.isValid.setValue(E,b),this.position.setValue(q,b),this.rotationQuaternion.setValue(C,b),this.hd.setValue(J,b),b._setExecutionVariable(this,"cachedPosition",q),b._setExecutionVariable(this,"cachedRotation",C),b._setExecutionVariable(this,"cachedScaling",J),b._setExecutionVariable(this,"executionId",b.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,q.f)("FlowGraphMatrixDecompose",E);class w extends G.b{constructor(b){super(b),this.position=this.registerDataInput("position",W.y),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",W.s),this.hd=this.registerDataInput("hd",W.y),this.value=this.registerDataOutput("value",W.g)}_updateOutputs(b){const d=b._getExecutionVariable(this,"executionId",-1),P=b._getExecutionVariable(this,"cachedMatrix",null);if(d===b.executionId&&P)this.value.setValue(P,b);else{const d=i.Matrix.Compose(this.hd.getValue(b),this.rotationQuaternion.getValue(b),this.position.getValue(b));this.value.setValue(d,b),b._setExecutionVariable(this,"cachedMatrix",d),b._setExecutionVariable(this,"executionId",b.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,q.f)("FlowGraphMatrixCompose",w)},14885:(b,d,P)=>{P.d(d,{b:()=>W});var G=P(14890);class W extends G.e{constructor(b,d,P,G,W,i){super(P,i),this._operation=G,this._className=W,this.a=this.registerDataInput("a",b),this.b=this.registerDataInput("b",d)}_doOperation(b){const d=this.a.getValue(b),P=this.b.getValue(b);return this._operation(d,P)}getClassName(){return this._className}}},14890:(b,d,P)=>{P.d(d,{e:()=>C});var G=P(13386),W=P(13365);const i="cachedOperationValue",q="cachedExecutionId";class C extends G.b{constructor(b,d){super(d),this.value=this.registerDataOutput("value",b),this.isValid=this.registerDataOutput("isValid",W.c)}_updateOutputs(b){const d=b._getExecutionVariable(this,q,-1),P=b._getExecutionVariable(this,i,null);if(void 0!==P&&null!==P&&d===b.executionId)this.isValid.setValue(!0,b),this.value.setValue(P,b);else try{const d=this._doOperation(b);if(void 0===d||null===d)return void this.isValid.setValue(!1,b);b._setExecutionVariable(this,i,d),b._setExecutionVariable(this,q,b.executionId),this.value.setValue(d,b),this.isValid.setValue(!0,b)}catch(G){this.isValid.setValue(!1,b)}}}},14893:(b,d,P)=>{P.d(d,{b:()=>W});var G=P(14890);class W extends G.e{constructor(b,d,P,G,W){super(d,W),this._operation=P,this._className=G,this.a=this.registerDataInput("a",b)}_doOperation(b){return this._operation(this.a.getValue(b))}getClassName(){return this._className}}}}]);