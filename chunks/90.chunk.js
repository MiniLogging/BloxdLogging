"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[90],{14401:(h,V,i)=>{i.r(V),i.d(V,{FlowGraphDeterminantBlock:()=>I,FlowGraphInvertMatrixBlock:()=>v,FlowGraphMatrixComposeBlock:()=>T,FlowGraphMatrixDecomposeBlock:()=>t,FlowGraphMatrixMultiplicationBlock:()=>s,FlowGraphTransposeBlock:()=>J});var S=i(12827),l=i(12805),Y=i(11138),g=i(11091),q=i(14389),B=i(14373);class J extends q.b{constructor(h){super((0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.transpose?h.transpose():Y.Matrix.Transpose(h)),"FlowGraphTransposeBlock",h)}}(0,g.f)("FlowGraphTransposeBlock",J);class I extends q.b{constructor(h){super((0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),l.u,(h=>h.determinant()),"FlowGraphDeterminantBlock",h)}}(0,g.f)("FlowGraphDeterminantBlock",I);class v extends q.b{constructor(h){super((0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.inverse?h.inverse():Y.Matrix.Invert(h)),"FlowGraphInvertMatrixBlock",h)}}(0,g.f)("FlowGraphInvertMatrixBlock",v);class s extends B.d{constructor(h){super((0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,l.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),((h,V)=>V.multiply(h)),"FlowGraphMatrixMultiplicationBlock",h)}}(0,g.f)("FlowGraphMatrixMultiplicationBlock",s);class t extends S.c{constructor(h){super(h),this.input=this.registerDataInput("input",l.m),this.position=this.registerDataOutput("position",l.F),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",l.y),this.Jq=this.registerDataOutput("Jq",l.F),this.isValid=this.registerDataOutput("isValid",l.f,!1)}_updateOutputs(h){const V=h._getExecutionVariable(this,"executionId",-1),i=h._getExecutionVariable(this,"cachedPosition",null),S=h._getExecutionVariable(this,"cachedRotation",null),l=h._getExecutionVariable(this,"cachedScaling",null);if(V===h.executionId&&i&&S&&l)this.position.setValue(i,h),this.rotationQuaternion.setValue(S,h),this.Jq.setValue(l,h);else{const V=this.input.getValue(h),g=i||new Y.nV,q=S||new Y.Quaternion,B=l||new Y.nV,J=Math.round(1e4*V.m[3])/1e4,I=Math.round(1e4*V.m[7])/1e4,v=Math.round(1e4*V.m[11])/1e4,s=Math.round(1e4*V.m[15])/1e4;if(0!==J||0!==I||0!==v||1!==s)return this.isValid.setValue(!1,h),this.position.setValue(Y.nV.Zero(),h),this.rotationQuaternion.setValue(Y.Quaternion.Identity(),h),void this.Jq.setValue(Y.nV.One(),h);const t=V.decompose(B,q,g);this.isValid.setValue(t,h),this.position.setValue(g,h),this.rotationQuaternion.setValue(q,h),this.Jq.setValue(B,h),h._setExecutionVariable(this,"cachedPosition",g),h._setExecutionVariable(this,"cachedRotation",q),h._setExecutionVariable(this,"cachedScaling",B),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,g.f)("FlowGraphMatrixDecompose",t);class T extends S.c{constructor(h){super(h),this.position=this.registerDataInput("position",l.F),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",l.y),this.Jq=this.registerDataInput("Jq",l.F),this.value=this.registerDataOutput("value",l.m)}_updateOutputs(h){const V=h._getExecutionVariable(this,"executionId",-1),i=h._getExecutionVariable(this,"cachedMatrix",null);if(V===h.executionId&&i)this.value.setValue(i,h);else{const V=Y.Matrix.Compose(this.Jq.getValue(h),this.rotationQuaternion.getValue(h),this.position.getValue(h));this.value.setValue(V,h),h._setExecutionVariable(this,"cachedMatrix",V),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,g.f)("FlowGraphMatrixCompose",T)},14373:(h,V,i)=>{i.d(V,{d:()=>l});var S=i(14382);class l extends S.d{constructor(h,V,i,S,l,Y){super(i,Y),this._operation=S,this._className=l,this.a=this.registerDataInput("a",h),this.b=this.registerDataInput("b",V)}_doOperation(h){const V=this.a.getValue(h),i=this.b.getValue(h);return this._operation(V,i)}getClassName(){return this._className}}},14382:(h,V,i)=>{i.d(V,{d:()=>q});var S=i(12827),l=i(12805);const Y="cachedOperationValue",g="cachedExecutionId";class q extends S.c{constructor(h,V){super(V),this.value=this.registerDataOutput("value",h),this.isValid=this.registerDataOutput("isValid",l.f)}_updateOutputs(h){const V=h._getExecutionVariable(this,g,-1),i=h._getExecutionVariable(this,Y,null);if(void 0!==i&&null!==i&&V===h.executionId)this.isValid.setValue(!0,h),this.value.setValue(i,h);else try{const V=this._doOperation(h);if(void 0===V||null===V)return void this.isValid.setValue(!1,h);h._setExecutionVariable(this,Y,V),h._setExecutionVariable(this,g,h.executionId),this.value.setValue(V,h),this.isValid.setValue(!0,h)}catch(S){this.isValid.setValue(!1,h)}}}},14389:(h,V,i)=>{i.d(V,{b:()=>l});var S=i(14382);class l extends S.d{constructor(h,V,i,S,l){super(V,l),this._operation=i,this._className=S,this.a=this.registerDataInput("a",h)}_doOperation(h){return this._operation(this.a.getValue(h))}getClassName(){return this._className}}}}]);