"use strict";(self.v2pspxy442l=self.v2pspxy442l||[]).push([[90],{15661:(l,a,N)=>{N.r(a),N.d(a,{FlowGraphDeterminantBlock:()=>J,FlowGraphInvertMatrixBlock:()=>n,FlowGraphMatrixComposeBlock:()=>u,FlowGraphMatrixDecomposeBlock:()=>H,FlowGraphMatrixMultiplicationBlock:()=>y,FlowGraphTransposeBlock:()=>T});var U=N(14171),c=N(14145),K=N(12447),Z=N(12394),w=N(15650),S=N(15645);class T extends w.c{constructor(l){super((0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(l=>l.transpose?l.transpose():K.Matrix.Transpose(l)),"FlowGraphTransposeBlock",l)}}(0,Z.g)("FlowGraphTransposeBlock",T);class J extends w.c{constructor(l){super((0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),c.t,(l=>l.determinant()),"FlowGraphDeterminantBlock",l)}}(0,Z.g)("FlowGraphDeterminantBlock",J);class n extends w.c{constructor(l){super((0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(l=>l.inverse?l.inverse():K.Matrix.Invert(l)),"FlowGraphInvertMatrixBlock",l)}}(0,Z.g)("FlowGraphInvertMatrixBlock",n);class y extends S.d{constructor(l){super((0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),(0,c.M)((null===l||void 0===l?void 0:l.matrixType)||"Matrix"),((l,a)=>a.multiply(l)),"FlowGraphMatrixMultiplicationBlock",l)}}(0,Z.g)("FlowGraphMatrixMultiplicationBlock",y);class H extends U.e{constructor(l){super(l),this.input=this.registerDataInput("input",c.m),this.position=this.registerDataOutput("position",c.B),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",c.w),this.Oc=this.registerDataOutput("Oc",c.B),this.isValid=this.registerDataOutput("isValid",c.h,!1)}_updateOutputs(l){const a=l._getExecutionVariable(this,"executionId",-1),N=l._getExecutionVariable(this,"cachedPosition",null),U=l._getExecutionVariable(this,"cachedRotation",null),c=l._getExecutionVariable(this,"cachedScaling",null);if(a===l.executionId&&N&&U&&c)this.position.setValue(N,l),this.rotationQuaternion.setValue(U,l),this.Oc.setValue(c,l);else{const a=this.input.getValue(l),Z=N||new K.ua,w=U||new K.Quaternion,S=c||new K.ua,T=Math.round(1e4*a.m[3])/1e4,J=Math.round(1e4*a.m[7])/1e4,n=Math.round(1e4*a.m[11])/1e4,y=Math.round(1e4*a.m[15])/1e4;if(0!==T||0!==J||0!==n||1!==y)return this.isValid.setValue(!1,l),this.position.setValue(K.ua.Zero(),l),this.rotationQuaternion.setValue(K.Quaternion.Identity(),l),void this.Oc.setValue(K.ua.One(),l);const H=a.decompose(S,w,Z);this.isValid.setValue(H,l),this.position.setValue(Z,l),this.rotationQuaternion.setValue(w,l),this.Oc.setValue(S,l),l._setExecutionVariable(this,"cachedPosition",Z),l._setExecutionVariable(this,"cachedRotation",w),l._setExecutionVariable(this,"cachedScaling",S),l._setExecutionVariable(this,"executionId",l.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,Z.g)("FlowGraphMatrixDecompose",H);class u extends U.e{constructor(l){super(l),this.position=this.registerDataInput("position",c.B),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",c.w),this.Oc=this.registerDataInput("Oc",c.B),this.value=this.registerDataOutput("value",c.m)}_updateOutputs(l){const a=l._getExecutionVariable(this,"executionId",-1),N=l._getExecutionVariable(this,"cachedMatrix",null);if(a===l.executionId&&N)this.value.setValue(N,l);else{const a=K.Matrix.Compose(this.Oc.getValue(l),this.rotationQuaternion.getValue(l),this.position.getValue(l));this.value.setValue(a,l),l._setExecutionVariable(this,"cachedMatrix",a),l._setExecutionVariable(this,"executionId",l.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,Z.g)("FlowGraphMatrixCompose",u)},15645:(l,a,N)=>{N.d(a,{d:()=>c});var U=N(15648);class c extends U.e{constructor(l,a,N,U,c,K){super(N,K),this._operation=U,this._className=c,this.a=this.registerDataInput("a",l),this.b=this.registerDataInput("b",a)}_doOperation(l){const a=this.a.getValue(l),N=this.b.getValue(l);return this._operation(a,N)}getClassName(){return this._className}}},15648:(l,a,N)=>{N.d(a,{e:()=>w});var U=N(14171),c=N(14145);const K="cachedOperationValue",Z="cachedExecutionId";class w extends U.e{constructor(l,a){super(a),this.value=this.registerDataOutput("value",l),this.isValid=this.registerDataOutput("isValid",c.h)}_updateOutputs(l){const a=l._getExecutionVariable(this,Z,-1),N=l._getExecutionVariable(this,K,null);if(void 0!==N&&null!==N&&a===l.executionId)this.isValid.setValue(!0,l),this.value.setValue(N,l);else try{const a=this._doOperation(l);if(void 0===a||null===a)return void this.isValid.setValue(!1,l);l._setExecutionVariable(this,K,a),l._setExecutionVariable(this,Z,l.executionId),this.value.setValue(a,l),this.isValid.setValue(!0,l)}catch(U){this.isValid.setValue(!1,l)}}}},15650:(l,a,N)=>{N.d(a,{c:()=>c});var U=N(15648);class c extends U.e{constructor(l,a,N,U,c){super(a,c),this._operation=N,this._className=U,this.a=this.registerDataInput("a",l)}_doOperation(l){return this._operation(this.a.getValue(l))}getClassName(){return this._className}}}}]);