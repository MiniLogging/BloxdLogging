"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[90],{16270:(B,u,F)=>{F.r(u),F.d(u,{FlowGraphDeterminantBlock:()=>Y,FlowGraphInvertMatrixBlock:()=>Q,FlowGraphMatrixComposeBlock:()=>D,FlowGraphMatrixDecomposeBlock:()=>v,FlowGraphMatrixMultiplicationBlock:()=>t,FlowGraphTransposeBlock:()=>s});var Z=F(14720),V=F(14701),p=F(12979),G=F(12949),R=F(16255),e=F(16241);class s extends R.d{constructor(B){super((0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(B=>B.transpose?B.transpose():p.Matrix.Transpose(B)),"FlowGraphTransposeBlock",B)}}(0,G.f)("FlowGraphTransposeBlock",s);class Y extends R.d{constructor(B){super((0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),V.u,(B=>B.determinant()),"FlowGraphDeterminantBlock",B)}}(0,G.f)("FlowGraphDeterminantBlock",Y);class Q extends R.d{constructor(B){super((0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(B=>B.inverse?B.inverse():p.Matrix.Invert(B)),"FlowGraphInvertMatrixBlock",B)}}(0,G.f)("FlowGraphInvertMatrixBlock",Q);class t extends e.c{constructor(B){super((0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),(0,V.M)((null===B||void 0===B?void 0:B.matrixType)||"Matrix"),((B,u)=>u.multiply(B)),"FlowGraphMatrixMultiplicationBlock",B)}}(0,G.f)("FlowGraphMatrixMultiplicationBlock",t);class v extends Z.e{constructor(B){super(B),this.input=this.registerDataInput("input",V.i),this.position=this.registerDataOutput("position",V.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",V.y),this.yR=this.registerDataOutput("yR",V.E),this.isValid=this.registerDataOutput("isValid",V.f,!1)}_updateOutputs(B){const u=B._getExecutionVariable(this,"executionId",-1),F=B._getExecutionVariable(this,"cachedPosition",null),Z=B._getExecutionVariable(this,"cachedRotation",null),V=B._getExecutionVariable(this,"cachedScaling",null);if(u===B.executionId&&F&&Z&&V)this.position.setValue(F,B),this.rotationQuaternion.setValue(Z,B),this.yR.setValue(V,B);else{const u=this.input.getValue(B),G=F||new p.Du,R=Z||new p.Quaternion,e=V||new p.Du,s=Math.round(1e4*u.m[3])/1e4,Y=Math.round(1e4*u.m[7])/1e4,Q=Math.round(1e4*u.m[11])/1e4,t=Math.round(1e4*u.m[15])/1e4;if(0!==s||0!==Y||0!==Q||1!==t)return this.isValid.setValue(!1,B),this.position.setValue(p.Du.Zero(),B),this.rotationQuaternion.setValue(p.Quaternion.Identity(),B),void this.yR.setValue(p.Du.One(),B);const v=u.decompose(e,R,G);this.isValid.setValue(v,B),this.position.setValue(G,B),this.rotationQuaternion.setValue(R,B),this.yR.setValue(e,B),B._setExecutionVariable(this,"cachedPosition",G),B._setExecutionVariable(this,"cachedRotation",R),B._setExecutionVariable(this,"cachedScaling",e),B._setExecutionVariable(this,"executionId",B.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,G.f)("FlowGraphMatrixDecompose",v);class D extends Z.e{constructor(B){super(B),this.position=this.registerDataInput("position",V.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",V.y),this.yR=this.registerDataInput("yR",V.E),this.value=this.registerDataOutput("value",V.i)}_updateOutputs(B){const u=B._getExecutionVariable(this,"executionId",-1),F=B._getExecutionVariable(this,"cachedMatrix",null);if(u===B.executionId&&F)this.value.setValue(F,B);else{const u=p.Matrix.Compose(this.yR.getValue(B),this.rotationQuaternion.getValue(B),this.position.getValue(B));this.value.setValue(u,B),B._setExecutionVariable(this,"cachedMatrix",u),B._setExecutionVariable(this,"executionId",B.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,G.f)("FlowGraphMatrixCompose",D)},16241:(B,u,F)=>{F.d(u,{c:()=>V});var Z=F(16250);class V extends Z.c{constructor(B,u,F,Z,V,p){super(F,p),this._operation=Z,this._className=V,this.a=this.registerDataInput("a",B),this.b=this.registerDataInput("b",u)}_doOperation(B){const u=this.a.getValue(B),F=this.b.getValue(B);return this._operation(u,F)}getClassName(){return this._className}}},16250:(B,u,F)=>{F.d(u,{c:()=>R});var Z=F(14720),V=F(14701);const p="cachedOperationValue",G="cachedExecutionId";class R extends Z.e{constructor(B,u){super(u),this.value=this.registerDataOutput("value",B),this.isValid=this.registerDataOutput("isValid",V.f)}_updateOutputs(B){const u=B._getExecutionVariable(this,G,-1),F=B._getExecutionVariable(this,p,null);if(void 0!==F&&null!==F&&u===B.executionId)this.isValid.setValue(!0,B),this.value.setValue(F,B);else try{const u=this._doOperation(B);if(void 0===u||null===u)return void this.isValid.setValue(!1,B);B._setExecutionVariable(this,p,u),B._setExecutionVariable(this,G,B.executionId),this.value.setValue(u,B),this.isValid.setValue(!0,B)}catch(Z){this.isValid.setValue(!1,B)}}}},16255:(B,u,F)=>{F.d(u,{d:()=>V});var Z=F(16250);class V extends Z.c{constructor(B,u,F,Z,V){super(u,V),this._operation=F,this._className=Z,this.a=this.registerDataInput("a",B)}_doOperation(B){return this._operation(this.a.getValue(B))}getClassName(){return this._className}}}}]);