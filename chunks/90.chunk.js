"use strict";(self.wx5iyvo7rvn=self.wx5iyvo7rvn||[]).push([[90],{14304:(P,e,n)=>{n.r(e),n.d(e,{FlowGraphDeterminantBlock:()=>R,FlowGraphInvertMatrixBlock:()=>q,FlowGraphMatrixComposeBlock:()=>Y,FlowGraphMatrixDecomposeBlock:()=>F,FlowGraphMatrixMultiplicationBlock:()=>A,FlowGraphTransposeBlock:()=>C});var H=n(12841),S=n(12819),p=n(11133),k=n(11096),m=n(14293),t=n(14283);class C extends m.b{constructor(P){super((0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(P=>P.transpose?P.transpose():p.Matrix.Transpose(P)),"FlowGraphTransposeBlock",P)}}(0,k.h)("FlowGraphTransposeBlock",C);class R extends m.b{constructor(P){super((0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),S.r,(P=>P.determinant()),"FlowGraphDeterminantBlock",P)}}(0,k.h)("FlowGraphDeterminantBlock",R);class q extends m.b{constructor(P){super((0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(P=>P.inverse?P.inverse():p.Matrix.Invert(P)),"FlowGraphInvertMatrixBlock",P)}}(0,k.h)("FlowGraphInvertMatrixBlock",q);class A extends t.e{constructor(P){super((0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,S.M)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),((P,e)=>e.multiply(P)),"FlowGraphMatrixMultiplicationBlock",P)}}(0,k.h)("FlowGraphMatrixMultiplicationBlock",A);class F extends H.c{constructor(P){super(P),this.input=this.registerDataInput("input",S.h),this.position=this.registerDataOutput("position",S.B),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",S.s),this.Up=this.registerDataOutput("Up",S.B),this.isValid=this.registerDataOutput("isValid",S.d,!1)}_updateOutputs(P){const e=P._getExecutionVariable(this,"executionId",-1),n=P._getExecutionVariable(this,"cachedPosition",null),H=P._getExecutionVariable(this,"cachedRotation",null),S=P._getExecutionVariable(this,"cachedScaling",null);if(e===P.executionId&&n&&H&&S)this.position.setValue(n,P),this.rotationQuaternion.setValue(H,P),this.Up.setValue(S,P);else{const e=this.input.getValue(P),k=n||new p.Ie,m=H||new p.Quaternion,t=S||new p.Ie,C=Math.round(1e4*e.m[3])/1e4,R=Math.round(1e4*e.m[7])/1e4,q=Math.round(1e4*e.m[11])/1e4,A=Math.round(1e4*e.m[15])/1e4;if(0!==C||0!==R||0!==q||1!==A)return this.isValid.setValue(!1,P),this.position.setValue(p.Ie.Zero(),P),this.rotationQuaternion.setValue(p.Quaternion.Identity(),P),void this.Up.setValue(p.Ie.One(),P);const F=e.decompose(t,m,k);this.isValid.setValue(F,P),this.position.setValue(k,P),this.rotationQuaternion.setValue(m,P),this.Up.setValue(t,P),P._setExecutionVariable(this,"cachedPosition",k),P._setExecutionVariable(this,"cachedRotation",m),P._setExecutionVariable(this,"cachedScaling",t),P._setExecutionVariable(this,"executionId",P.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,k.h)("FlowGraphMatrixDecompose",F);class Y extends H.c{constructor(P){super(P),this.position=this.registerDataInput("position",S.B),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",S.s),this.Up=this.registerDataInput("Up",S.B),this.value=this.registerDataOutput("value",S.h)}_updateOutputs(P){const e=P._getExecutionVariable(this,"executionId",-1),n=P._getExecutionVariable(this,"cachedMatrix",null);if(e===P.executionId&&n)this.value.setValue(n,P);else{const e=p.Matrix.Compose(this.Up.getValue(P),this.rotationQuaternion.getValue(P),this.position.getValue(P));this.value.setValue(e,P),P._setExecutionVariable(this,"cachedMatrix",e),P._setExecutionVariable(this,"executionId",P.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,k.h)("FlowGraphMatrixCompose",Y)},14283:(P,e,n)=>{n.d(e,{e:()=>S});var H=n(14286);class S extends H.c{constructor(P,e,n,H,S,p){super(n,p),this._operation=H,this._className=S,this.a=this.registerDataInput("a",P),this.b=this.registerDataInput("b",e)}_doOperation(P){const e=this.a.getValue(P),n=this.b.getValue(P);return this._operation(e,n)}getClassName(){return this._className}}},14286:(P,e,n)=>{n.d(e,{c:()=>m});var H=n(12841),S=n(12819);const p="cachedOperationValue",k="cachedExecutionId";class m extends H.c{constructor(P,e){super(e),this.value=this.registerDataOutput("value",P),this.isValid=this.registerDataOutput("isValid",S.d)}_updateOutputs(P){const e=P._getExecutionVariable(this,k,-1),n=P._getExecutionVariable(this,p,null);if(void 0!==n&&null!==n&&e===P.executionId)this.isValid.setValue(!0,P),this.value.setValue(n,P);else try{const e=this._doOperation(P);if(void 0===e||null===e)return void this.isValid.setValue(!1,P);P._setExecutionVariable(this,p,e),P._setExecutionVariable(this,k,P.executionId),this.value.setValue(e,P),this.isValid.setValue(!0,P)}catch(H){this.isValid.setValue(!1,P)}}}},14293:(P,e,n)=>{n.d(e,{b:()=>S});var H=n(14286);class S extends H.c{constructor(P,e,n,H,S){super(e,S),this._operation=n,this._className=H,this.a=this.registerDataInput("a",P)}_doOperation(P){return this._operation(this.a.getValue(P))}getClassName(){return this._className}}}}]);