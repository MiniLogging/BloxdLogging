"use strict";(self.vfdo5lmva5i=self.vfdo5lmva5i||[]).push([[90],{15071:(w,o,H)=>{H.r(o),H.d(o,{FlowGraphDeterminantBlock:()=>A,FlowGraphInvertMatrixBlock:()=>y,FlowGraphMatrixComposeBlock:()=>Q,FlowGraphMatrixDecomposeBlock:()=>C,FlowGraphMatrixMultiplicationBlock:()=>z,FlowGraphTransposeBlock:()=>L});var h=H(13475),E=H(13455),e=H(11720),D=H(11666),t=H(15059),X=H(15043);class L extends t.d{constructor(w){super((0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(w=>w.transpose?w.transpose():e.Matrix.Transpose(w)),"FlowGraphTransposeBlock",w)}}(0,D.g)("FlowGraphTransposeBlock",L);class A extends t.d{constructor(w){super((0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),E.p,(w=>w.determinant()),"FlowGraphDeterminantBlock",w)}}(0,D.g)("FlowGraphDeterminantBlock",A);class y extends t.d{constructor(w){super((0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(w=>w.inverse?w.inverse():e.Matrix.Invert(w)),"FlowGraphInvertMatrixBlock",w)}}(0,D.g)("FlowGraphInvertMatrixBlock",y);class z extends X.b{constructor(w){super((0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),(0,E.F)((null===w||void 0===w?void 0:w.matrixType)||"Matrix"),((w,o)=>o.multiply(w)),"FlowGraphMatrixMultiplicationBlock",w)}}(0,D.g)("FlowGraphMatrixMultiplicationBlock",z);class C extends h.c{constructor(w){super(w),this.input=this.registerDataInput("input",E.k),this.position=this.registerDataOutput("position",E.y),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",E.q),this.Je=this.registerDataOutput("Je",E.y),this.isValid=this.registerDataOutput("isValid",E.f,!1)}_updateOutputs(w){const o=w._getExecutionVariable(this,"executionId",-1),H=w._getExecutionVariable(this,"cachedPosition",null),h=w._getExecutionVariable(this,"cachedRotation",null),E=w._getExecutionVariable(this,"cachedScaling",null);if(o===w.executionId&&H&&h&&E)this.position.setValue(H,w),this.rotationQuaternion.setValue(h,w),this.Je.setValue(E,w);else{const o=this.input.getValue(w),D=H||new e.io,t=h||new e.Quaternion,X=E||new e.io,L=Math.round(1e4*o.m[3])/1e4,A=Math.round(1e4*o.m[7])/1e4,y=Math.round(1e4*o.m[11])/1e4,z=Math.round(1e4*o.m[15])/1e4;if(0!==L||0!==A||0!==y||1!==z)return this.isValid.setValue(!1,w),this.position.setValue(e.io.Zero(),w),this.rotationQuaternion.setValue(e.Quaternion.Identity(),w),void this.Je.setValue(e.io.One(),w);const C=o.decompose(X,t,D);this.isValid.setValue(C,w),this.position.setValue(D,w),this.rotationQuaternion.setValue(t,w),this.Je.setValue(X,w),w._setExecutionVariable(this,"cachedPosition",D),w._setExecutionVariable(this,"cachedRotation",t),w._setExecutionVariable(this,"cachedScaling",X),w._setExecutionVariable(this,"executionId",w.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,D.g)("FlowGraphMatrixDecompose",C);class Q extends h.c{constructor(w){super(w),this.position=this.registerDataInput("position",E.y),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",E.q),this.Je=this.registerDataInput("Je",E.y),this.value=this.registerDataOutput("value",E.k)}_updateOutputs(w){const o=w._getExecutionVariable(this,"executionId",-1),H=w._getExecutionVariable(this,"cachedMatrix",null);if(o===w.executionId&&H)this.value.setValue(H,w);else{const o=e.Matrix.Compose(this.Je.getValue(w),this.rotationQuaternion.getValue(w),this.position.getValue(w));this.value.setValue(o,w),w._setExecutionVariable(this,"cachedMatrix",o),w._setExecutionVariable(this,"executionId",w.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,D.g)("FlowGraphMatrixCompose",Q)},15043:(w,o,H)=>{H.d(o,{b:()=>E});var h=H(15051);class E extends h.c{constructor(w,o,H,h,E,e){super(H,e),this._operation=h,this._className=E,this.a=this.registerDataInput("a",w),this.b=this.registerDataInput("b",o)}_doOperation(w){const o=this.a.getValue(w),H=this.b.getValue(w);return this._operation(o,H)}getClassName(){return this._className}}},15051:(w,o,H)=>{H.d(o,{c:()=>t});var h=H(13475),E=H(13455);const e="cachedOperationValue",D="cachedExecutionId";class t extends h.c{constructor(w,o){super(o),this.value=this.registerDataOutput("value",w),this.isValid=this.registerDataOutput("isValid",E.f)}_updateOutputs(w){const o=w._getExecutionVariable(this,D,-1),H=w._getExecutionVariable(this,e,null);if(void 0!==H&&null!==H&&o===w.executionId)this.isValid.setValue(!0,w),this.value.setValue(H,w);else try{const o=this._doOperation(w);if(void 0===o||null===o)return void this.isValid.setValue(!1,w);w._setExecutionVariable(this,e,o),w._setExecutionVariable(this,D,w.executionId),this.value.setValue(o,w),this.isValid.setValue(!0,w)}catch(h){this.isValid.setValue(!1,w)}}}},15059:(w,o,H)=>{H.d(o,{d:()=>E});var h=H(15051);class E extends h.c{constructor(w,o,H,h,E){super(o,E),this._operation=H,this._className=h,this.a=this.registerDataInput("a",w)}_doOperation(w){return this._operation(this.a.getValue(w))}getClassName(){return this._className}}}}]);