"use strict";(self["9d4d30r2sf"]=self["9d4d30r2sf"]||[]).push([[90],{15743:(o,v,V)=>{V.r(v),V.d(v,{FlowGraphDeterminantBlock:()=>h,FlowGraphInvertMatrixBlock:()=>x,FlowGraphMatrixComposeBlock:()=>S,FlowGraphMatrixDecomposeBlock:()=>l,FlowGraphMatrixMultiplicationBlock:()=>f,FlowGraphTransposeBlock:()=>O});var g=V(14259),E=V(14241),I=V(12488),Q=V(12449),U=V(15732),n=V(15723);class O extends U.b{constructor(o){super((0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(o=>o.transpose?o.transpose():I.Matrix.Transpose(o)),"FlowGraphTransposeBlock",o)}}(0,Q.h)("FlowGraphTransposeBlock",O);class h extends U.b{constructor(o){super((0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),E.t,(o=>o.determinant()),"FlowGraphDeterminantBlock",o)}}(0,Q.h)("FlowGraphDeterminantBlock",h);class x extends U.b{constructor(o){super((0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(o=>o.inverse?o.inverse():I.Matrix.Invert(o)),"FlowGraphInvertMatrixBlock",o)}}(0,Q.h)("FlowGraphInvertMatrixBlock",x);class f extends n.b{constructor(o){super((0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),(0,E.M)((null===o||void 0===o?void 0:o.matrixType)||"Matrix"),((o,v)=>v.multiply(o)),"FlowGraphMatrixMultiplicationBlock",o)}}(0,Q.h)("FlowGraphMatrixMultiplicationBlock",f);class l extends g.b{constructor(o){super(o),this.input=this.registerDataInput("input",E.k),this.position=this.registerDataOutput("position",E.C),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",E.u),this.jU=this.registerDataOutput("jU",E.C),this.isValid=this.registerDataOutput("isValid",E.f,!1)}_updateOutputs(o){const v=o._getExecutionVariable(this,"executionId",-1),V=o._getExecutionVariable(this,"cachedPosition",null),g=o._getExecutionVariable(this,"cachedRotation",null),E=o._getExecutionVariable(this,"cachedScaling",null);if(v===o.executionId&&V&&g&&E)this.position.setValue(V,o),this.rotationQuaternion.setValue(g,o),this.jU.setValue(E,o);else{const v=this.input.getValue(o),Q=V||new I.cv,U=g||new I.Quaternion,n=E||new I.cv,O=Math.round(1e4*v.m[3])/1e4,h=Math.round(1e4*v.m[7])/1e4,x=Math.round(1e4*v.m[11])/1e4,f=Math.round(1e4*v.m[15])/1e4;if(0!==O||0!==h||0!==x||1!==f)return this.isValid.setValue(!1,o),this.position.setValue(I.cv.Zero(),o),this.rotationQuaternion.setValue(I.Quaternion.Identity(),o),void this.jU.setValue(I.cv.One(),o);const l=v.decompose(n,U,Q);this.isValid.setValue(l,o),this.position.setValue(Q,o),this.rotationQuaternion.setValue(U,o),this.jU.setValue(n,o),o._setExecutionVariable(this,"cachedPosition",Q),o._setExecutionVariable(this,"cachedRotation",U),o._setExecutionVariable(this,"cachedScaling",n),o._setExecutionVariable(this,"executionId",o.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,Q.h)("FlowGraphMatrixDecompose",l);class S extends g.b{constructor(o){super(o),this.position=this.registerDataInput("position",E.C),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",E.u),this.jU=this.registerDataInput("jU",E.C),this.value=this.registerDataOutput("value",E.k)}_updateOutputs(o){const v=o._getExecutionVariable(this,"executionId",-1),V=o._getExecutionVariable(this,"cachedMatrix",null);if(v===o.executionId&&V)this.value.setValue(V,o);else{const v=I.Matrix.Compose(this.jU.getValue(o),this.rotationQuaternion.getValue(o),this.position.getValue(o));this.value.setValue(v,o),o._setExecutionVariable(this,"cachedMatrix",v),o._setExecutionVariable(this,"executionId",o.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,Q.h)("FlowGraphMatrixCompose",S)},15723:(o,v,V)=>{V.d(v,{b:()=>E});var g=V(15726);class E extends g.b{constructor(o,v,V,g,E,I){super(V,I),this._operation=g,this._className=E,this.a=this.registerDataInput("a",o),this.b=this.registerDataInput("b",v)}_doOperation(o){const v=this.a.getValue(o),V=this.b.getValue(o);return this._operation(v,V)}getClassName(){return this._className}}},15726:(o,v,V)=>{V.d(v,{b:()=>U});var g=V(14259),E=V(14241);const I="cachedOperationValue",Q="cachedExecutionId";class U extends g.b{constructor(o,v){super(v),this.value=this.registerDataOutput("value",o),this.isValid=this.registerDataOutput("isValid",E.f)}_updateOutputs(o){const v=o._getExecutionVariable(this,Q,-1),V=o._getExecutionVariable(this,I,null);if(void 0!==V&&null!==V&&v===o.executionId)this.isValid.setValue(!0,o),this.value.setValue(V,o);else try{const v=this._doOperation(o);if(void 0===v||null===v)return void this.isValid.setValue(!1,o);o._setExecutionVariable(this,I,v),o._setExecutionVariable(this,Q,o.executionId),this.value.setValue(v,o),this.isValid.setValue(!0,o)}catch(g){this.isValid.setValue(!1,o)}}}},15732:(o,v,V)=>{V.d(v,{b:()=>E});var g=V(15726);class E extends g.b{constructor(o,v,V,g,E){super(v,E),this._operation=V,this._className=g,this.a=this.registerDataInput("a",o)}_doOperation(o){return this._operation(this.a.getValue(o))}getClassName(){return this._className}}}}]);