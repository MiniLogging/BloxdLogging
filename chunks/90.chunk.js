"use strict";(self.b15p7b72fr8=self.b15p7b72fr8||[]).push([[90],{15887:(s,k,h)=>{h.r(k),h.d(k,{FlowGraphDeterminantBlock:()=>c,FlowGraphInvertMatrixBlock:()=>S,FlowGraphMatrixComposeBlock:()=>d,FlowGraphMatrixDecomposeBlock:()=>r,FlowGraphMatrixMultiplicationBlock:()=>a,FlowGraphTransposeBlock:()=>O});var A=h(14325),g=h(14315),ms=h(12590),i=h(12543),K=h(15876),H=h(15863);class O extends K.b{constructor(s){super((0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(s=>s.transpose?s.transpose():ms.Matrix.Transpose(s)),"FlowGraphTransposeBlock",s)}}(0,i.f)("FlowGraphTransposeBlock",O);class c extends K.b{constructor(s){super((0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),g.m,(s=>s.determinant()),"FlowGraphDeterminantBlock",s)}}(0,i.f)("FlowGraphDeterminantBlock",c);class S extends K.b{constructor(s){super((0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(s=>s.inverse?s.inverse():ms.Matrix.Invert(s)),"FlowGraphInvertMatrixBlock",s)}}(0,i.f)("FlowGraphInvertMatrixBlock",S);class a extends H.c{constructor(s){super((0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),(0,g.G)((null===s||void 0===s?void 0:s.matrixType)||"Matrix"),((s,k)=>k.multiply(s)),"FlowGraphMatrixMultiplicationBlock",s)}}(0,i.f)("FlowGraphMatrixMultiplicationBlock",a);class r extends A.e{constructor(s){super(s),this.input=this.registerDataInput("input",g.f),this.position=this.registerDataOutput("position",g.x),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",g.q),this.Sg=this.registerDataOutput("Sg",g.x),this.isValid=this.registerDataOutput("isValid",g.d,!1)}_updateOutputs(s){const k=s._getExecutionVariable(this,"executionId",-1),h=s._getExecutionVariable(this,"cachedPosition",null),A=s._getExecutionVariable(this,"cachedRotation",null),g=s._getExecutionVariable(this,"cachedScaling",null);if(k===s.executionId&&h&&A&&g)this.position.setValue(h,s),this.rotationQuaternion.setValue(A,s),this.Sg.setValue(g,s);else{const k=this.input.getValue(s),i=h||new ms.Pk,K=A||new ms.Quaternion,H=g||new ms.Pk,O=Math.round(1e4*k.m[3])/1e4,c=Math.round(1e4*k.m[7])/1e4,S=Math.round(1e4*k.m[11])/1e4,a=Math.round(1e4*k.m[15])/1e4;if(0!==O||0!==c||0!==S||1!==a)return this.isValid.setValue(!1,s),this.position.setValue(ms.Pk.Zero(),s),this.rotationQuaternion.setValue(ms.Quaternion.Identity(),s),void this.Sg.setValue(ms.Pk.One(),s);const r=k.decompose(H,K,i);this.isValid.setValue(r,s),this.position.setValue(i,s),this.rotationQuaternion.setValue(K,s),this.Sg.setValue(H,s),s._setExecutionVariable(this,"cachedPosition",i),s._setExecutionVariable(this,"cachedRotation",K),s._setExecutionVariable(this,"cachedScaling",H),s._setExecutionVariable(this,"executionId",s.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,i.f)("FlowGraphMatrixDecompose",r);class d extends A.e{constructor(s){super(s),this.position=this.registerDataInput("position",g.x),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",g.q),this.Sg=this.registerDataInput("Sg",g.x),this.value=this.registerDataOutput("value",g.f)}_updateOutputs(s){const k=s._getExecutionVariable(this,"executionId",-1),h=s._getExecutionVariable(this,"cachedMatrix",null);if(k===s.executionId&&h)this.value.setValue(h,s);else{const k=ms.Matrix.Compose(this.Sg.getValue(s),this.rotationQuaternion.getValue(s),this.position.getValue(s));this.value.setValue(k,s),s._setExecutionVariable(this,"cachedMatrix",k),s._setExecutionVariable(this,"executionId",s.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,i.f)("FlowGraphMatrixCompose",d)},15863:(s,k,h)=>{h.d(k,{c:()=>g});var A=h(15871);class g extends A.e{constructor(s,k,h,A,g,ms){super(h,ms),this._operation=A,this._className=g,this.a=this.registerDataInput("a",s),this.b=this.registerDataInput("b",k)}_doOperation(s){const k=this.a.getValue(s),h=this.b.getValue(s);return this._operation(k,h)}getClassName(){return this._className}}},15871:(s,k,h)=>{h.d(k,{e:()=>K});var A=h(14325),g=h(14315);const ms="cachedOperationValue",i="cachedExecutionId";class K extends A.e{constructor(s,k){super(k),this.value=this.registerDataOutput("value",s),this.isValid=this.registerDataOutput("isValid",g.d)}_updateOutputs(s){const k=s._getExecutionVariable(this,i,-1),h=s._getExecutionVariable(this,ms,null);if(void 0!==h&&null!==h&&k===s.executionId)this.isValid.setValue(!0,s),this.value.setValue(h,s);else try{const k=this._doOperation(s);if(void 0===k||null===k)return void this.isValid.setValue(!1,s);s._setExecutionVariable(this,ms,k),s._setExecutionVariable(this,i,s.executionId),this.value.setValue(k,s),this.isValid.setValue(!0,s)}catch(A){this.isValid.setValue(!1,s)}}}},15876:(s,k,h)=>{h.d(k,{b:()=>g});var A=h(15871);class g extends A.e{constructor(s,k,h,A,g){super(k,g),this._operation=h,this._className=A,this.a=this.registerDataInput("a",s)}_doOperation(s){return this._operation(this.a.getValue(s))}getClassName(){return this._className}}}}]);