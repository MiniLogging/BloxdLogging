"use strict";(self.ex92n20nlz8=self.ex92n20nlz8||[]).push([[90],{15787:(I,g,b)=>{b.r(g),b.d(g,{FlowGraphDeterminantBlock:()=>G,FlowGraphInvertMatrixBlock:()=>D,FlowGraphMatrixComposeBlock:()=>Z,FlowGraphMatrixDecomposeBlock:()=>x,FlowGraphMatrixMultiplicationBlock:()=>p,FlowGraphTransposeBlock:()=>n});var e=b(14295),c=b(14282),z=b(12590),M=b(12558),J=b(15778),o=b(15771);class n extends J.b{constructor(I){super((0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(I=>I.transpose?I.transpose():z.Matrix.Transpose(I)),"FlowGraphTransposeBlock",I)}}(0,M.g)("FlowGraphTransposeBlock",n);class G extends J.b{constructor(I){super((0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),c.t,(I=>I.determinant()),"FlowGraphDeterminantBlock",I)}}(0,M.g)("FlowGraphDeterminantBlock",G);class D extends J.b{constructor(I){super((0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(I=>I.inverse?I.inverse():z.Matrix.Invert(I)),"FlowGraphInvertMatrixBlock",I)}}(0,M.g)("FlowGraphInvertMatrixBlock",D);class p extends o.d{constructor(I){super((0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),(0,c.I)((null===I||void 0===I?void 0:I.matrixType)||"Matrix"),((I,g)=>g.multiply(I)),"FlowGraphMatrixMultiplicationBlock",I)}}(0,M.g)("FlowGraphMatrixMultiplicationBlock",p);class x extends e.d{constructor(I){super(I),this.input=this.registerDataInput("input",c.l),this.position=this.registerDataOutput("position",c.C),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",c.u),this.pb=this.registerDataOutput("pb",c.C),this.isValid=this.registerDataOutput("isValid",c.g,!1)}_updateOutputs(I){const g=I._getExecutionVariable(this,"executionId",-1),b=I._getExecutionVariable(this,"cachedPosition",null),e=I._getExecutionVariable(this,"cachedRotation",null),c=I._getExecutionVariable(this,"cachedScaling",null);if(g===I.executionId&&b&&e&&c)this.position.setValue(b,I),this.rotationQuaternion.setValue(e,I),this.pb.setValue(c,I);else{const g=this.input.getValue(I),M=b||new z.Vg,J=e||new z.Quaternion,o=c||new z.Vg,n=Math.round(1e4*g.m[3])/1e4,G=Math.round(1e4*g.m[7])/1e4,D=Math.round(1e4*g.m[11])/1e4,p=Math.round(1e4*g.m[15])/1e4;if(0!==n||0!==G||0!==D||1!==p)return this.isValid.setValue(!1,I),this.position.setValue(z.Vg.Zero(),I),this.rotationQuaternion.setValue(z.Quaternion.Identity(),I),void this.pb.setValue(z.Vg.One(),I);const x=g.decompose(o,J,M);this.isValid.setValue(x,I),this.position.setValue(M,I),this.rotationQuaternion.setValue(J,I),this.pb.setValue(o,I),I._setExecutionVariable(this,"cachedPosition",M),I._setExecutionVariable(this,"cachedRotation",J),I._setExecutionVariable(this,"cachedScaling",o),I._setExecutionVariable(this,"executionId",I.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,M.g)("FlowGraphMatrixDecompose",x);class Z extends e.d{constructor(I){super(I),this.position=this.registerDataInput("position",c.C),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",c.u),this.pb=this.registerDataInput("pb",c.C),this.value=this.registerDataOutput("value",c.l)}_updateOutputs(I){const g=I._getExecutionVariable(this,"executionId",-1),b=I._getExecutionVariable(this,"cachedMatrix",null);if(g===I.executionId&&b)this.value.setValue(b,I);else{const g=z.Matrix.Compose(this.pb.getValue(I),this.rotationQuaternion.getValue(I),this.position.getValue(I));this.value.setValue(g,I),I._setExecutionVariable(this,"cachedMatrix",g),I._setExecutionVariable(this,"executionId",I.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,M.g)("FlowGraphMatrixCompose",Z)},15771:(I,g,b)=>{b.d(g,{d:()=>c});var e=b(15776);class c extends e.d{constructor(I,g,b,e,c,z){super(b,z),this._operation=e,this._className=c,this.a=this.registerDataInput("a",I),this.b=this.registerDataInput("b",g)}_doOperation(I){const g=this.a.getValue(I),b=this.b.getValue(I);return this._operation(g,b)}getClassName(){return this._className}}},15776:(I,g,b)=>{b.d(g,{d:()=>J});var e=b(14295),c=b(14282);const z="cachedOperationValue",M="cachedExecutionId";class J extends e.d{constructor(I,g){super(g),this.value=this.registerDataOutput("value",I),this.isValid=this.registerDataOutput("isValid",c.g)}_updateOutputs(I){const g=I._getExecutionVariable(this,M,-1),b=I._getExecutionVariable(this,z,null);if(void 0!==b&&null!==b&&g===I.executionId)this.isValid.setValue(!0,I),this.value.setValue(b,I);else try{const g=this._doOperation(I);if(void 0===g||null===g)return void this.isValid.setValue(!1,I);I._setExecutionVariable(this,z,g),I._setExecutionVariable(this,M,I.executionId),this.value.setValue(g,I),this.isValid.setValue(!0,I)}catch(e){this.isValid.setValue(!1,I)}}}},15778:(I,g,b)=>{b.d(g,{b:()=>c});var e=b(15776);class c extends e.d{constructor(I,g,b,e,c){super(g,c),this._operation=b,this._className=e,this.a=this.registerDataInput("a",I)}_doOperation(I){return this._operation(this.a.getValue(I))}getClassName(){return this._className}}}}]);