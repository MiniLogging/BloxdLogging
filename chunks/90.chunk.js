"use strict";(self.mo7o6813fhb=self.mo7o6813fhb||[]).push([[90],{15412:(t,U,y)=>{y.r(U),y.d(U,{FlowGraphDeterminantBlock:()=>M,FlowGraphInvertMatrixBlock:()=>L,FlowGraphMatrixComposeBlock:()=>F,FlowGraphMatrixDecomposeBlock:()=>Q,FlowGraphMatrixMultiplicationBlock:()=>h,FlowGraphTransposeBlock:()=>G});var I=y(13865),r=y(13845),Y=y(12386),mt=y(12338),X=y(15398),P=y(15390);class G extends X.c{constructor(t){super((0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(t=>t.transpose?t.transpose():Y.Matrix.Transpose(t)),"FlowGraphTransposeBlock",t)}}(0,mt.f)("FlowGraphTransposeBlock",G);class M extends X.c{constructor(t){super((0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),r.w,(t=>t.determinant()),"FlowGraphDeterminantBlock",t)}}(0,mt.f)("FlowGraphDeterminantBlock",M);class L extends X.c{constructor(t){super((0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(t=>t.inverse?t.inverse():Y.Matrix.Invert(t)),"FlowGraphInvertMatrixBlock",t)}}(0,mt.f)("FlowGraphInvertMatrixBlock",L);class h extends P.e{constructor(t){super((0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,r.S)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),((t,U)=>U.multiply(t)),"FlowGraphMatrixMultiplicationBlock",t)}}(0,mt.f)("FlowGraphMatrixMultiplicationBlock",h);class Q extends I.c{constructor(t){super(t),this.input=this.registerDataInput("input",r.m),this.position=this.registerDataOutput("position",r.H),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",r.y),this.dX=this.registerDataOutput("dX",r.H),this.isValid=this.registerDataOutput("isValid",r.i,!1)}_updateOutputs(t){const U=t._getExecutionVariable(this,"executionId",-1),y=t._getExecutionVariable(this,"cachedPosition",null),I=t._getExecutionVariable(this,"cachedRotation",null),r=t._getExecutionVariable(this,"cachedScaling",null);if(U===t.executionId&&y&&I&&r)this.position.setValue(y,t),this.rotationQuaternion.setValue(I,t),this.dX.setValue(r,t);else{const U=this.input.getValue(t),mt=y||new Y.DU,X=I||new Y.Quaternion,P=r||new Y.DU,G=Math.round(1e4*U.m[3])/1e4,M=Math.round(1e4*U.m[7])/1e4,L=Math.round(1e4*U.m[11])/1e4,h=Math.round(1e4*U.m[15])/1e4;if(0!==G||0!==M||0!==L||1!==h)return this.isValid.setValue(!1,t),this.position.setValue(Y.DU.Zero(),t),this.rotationQuaternion.setValue(Y.Quaternion.Identity(),t),void this.dX.setValue(Y.DU.One(),t);const Q=U.decompose(P,X,mt);this.isValid.setValue(Q,t),this.position.setValue(mt,t),this.rotationQuaternion.setValue(X,t),this.dX.setValue(P,t),t._setExecutionVariable(this,"cachedPosition",mt),t._setExecutionVariable(this,"cachedRotation",X),t._setExecutionVariable(this,"cachedScaling",P),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,mt.f)("FlowGraphMatrixDecompose",Q);class F extends I.c{constructor(t){super(t),this.position=this.registerDataInput("position",r.H),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",r.y),this.dX=this.registerDataInput("dX",r.H),this.value=this.registerDataOutput("value",r.m)}_updateOutputs(t){const U=t._getExecutionVariable(this,"executionId",-1),y=t._getExecutionVariable(this,"cachedMatrix",null);if(U===t.executionId&&y)this.value.setValue(y,t);else{const U=Y.Matrix.Compose(this.dX.getValue(t),this.rotationQuaternion.getValue(t),this.position.getValue(t));this.value.setValue(U,t),t._setExecutionVariable(this,"cachedMatrix",U),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,mt.f)("FlowGraphMatrixCompose",F)},15390:(t,U,y)=>{y.d(U,{e:()=>r});var I=y(15392);class r extends I.d{constructor(t,U,y,I,r,Y){super(y,Y),this._operation=I,this._className=r,this.a=this.registerDataInput("a",t),this.b=this.registerDataInput("b",U)}_doOperation(t){const U=this.a.getValue(t),y=this.b.getValue(t);return this._operation(U,y)}getClassName(){return this._className}}},15392:(t,U,y)=>{y.d(U,{d:()=>X});var I=y(13865),r=y(13845);const Y="cachedOperationValue",mt="cachedExecutionId";class X extends I.c{constructor(t,U){super(U),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",r.i)}_updateOutputs(t){const U=t._getExecutionVariable(this,mt,-1),y=t._getExecutionVariable(this,Y,null);if(void 0!==y&&null!==y&&U===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(y,t);else try{const U=this._doOperation(t);if(void 0===U||null===U)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,Y,U),t._setExecutionVariable(this,mt,t.executionId),this.value.setValue(U,t),this.isValid.setValue(!0,t)}catch(I){this.isValid.setValue(!1,t)}}}},15398:(t,U,y)=>{y.d(U,{c:()=>r});var I=y(15392);class r extends I.d{constructor(t,U,y,I,r){super(U,r),this._operation=y,this._className=I,this.a=this.registerDataInput("a",t)}_doOperation(t){return this._operation(this.a.getValue(t))}getClassName(){return this._className}}}}]);