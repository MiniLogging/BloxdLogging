"use strict";(self["6xhfpmwgjr5"]=self["6xhfpmwgjr5"]||[]).push([[90],{16458:(P,a,R)=>{R.r(a),R.d(a,{FlowGraphStopAnimationBlock:()=>j});var S=R(14524),A=R(12376),Z=R(12248),p=R(14567);class j extends p.e{constructor(P){super(P),this.animationGroup=this.registerDataInput("animationGroup",S.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",S.p,-1)}_preparePendingTasks(P){const a=this.animationGroup.getValue(P),R=this.stopAtFrame.getValue(P)??-1,S=P._getGlobalContextVariable("pendingStopAnimations",[]);S.push({uniqueId:a.uniqueId,stopAtFrame:R}),P._setGlobalContextVariable("pendingStopAnimations",S)}_cancelPendingTasks(P){const a=this.animationGroup.getValue(P),R=P._getGlobalContextVariable("pendingStopAnimations",[]);for(let S=0;S<R.length;S++)if(R[S].uniqueId===a.uniqueId){R.splice(S,1),P._setGlobalContextVariable("pendingStopAnimations",R);break}}_execute(P){const a=this.animationGroup.getValue(P),R=this.stopAtFrame.getValue(P)??-1;return a?isNaN(R)?this._reportError(P,"Invalid stop time."):(R>0?this._startPendingTasks(P):this._stopAnimation(a,P),void this.out._activateSignal(P)):(Z.c.Warn("No animation group provided to stop."),this._reportError(P,"No animation group provided to stop."))}_executeOnTick(P){const a=this.animationGroup.getValue(P),R=P._getGlobalContextVariable("pendingStopAnimations",[]);for(let S=0;S<R.length;S++)if(R[S].uniqueId===a.uniqueId&&a.getCurrentFrame()>=R[S].stopAtFrame){this._stopAnimation(a,P),R.splice(S,1),P._setGlobalContextVariable("pendingStopAnimations",R),this.done._activateSignal(P),P._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(P,a){const R=a._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),S=R.indexOf(P.uniqueId);-1!==S&&(P.stop(),R.splice(S,1),a._setGlobalContextVariable("currentlyRunningAnimationGroups",R))}}(0,A.d)("FlowGraphStopAnimationBlock",j)}}]);