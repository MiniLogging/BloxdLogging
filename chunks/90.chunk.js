"use strict";(self["3b8bnhi4gzj"]=self["3b8bnhi4gzj"]||[]).push([[90],{15039:(Z,h,V)=>{V.r(h),V.d(h,{FlowGraphDeterminantBlock:()=>x,FlowGraphInvertMatrixBlock:()=>N,FlowGraphMatrixComposeBlock:()=>u,FlowGraphMatrixDecomposeBlock:()=>k,FlowGraphMatrixMultiplicationBlock:()=>D,FlowGraphTransposeBlock:()=>n});var v=V(13480),A=V(13459),H=V(11729),K=V(11691),d=V(15024),a=V(15012);class n extends d.e{constructor(Z){super((0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(Z=>Z.transpose?Z.transpose():H.Matrix.Transpose(Z)),"FlowGraphTransposeBlock",Z)}}(0,K.i)("FlowGraphTransposeBlock",n);class x extends d.e{constructor(Z){super((0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),A.t,(Z=>Z.determinant()),"FlowGraphDeterminantBlock",Z)}}(0,K.i)("FlowGraphDeterminantBlock",x);class N extends d.e{constructor(Z){super((0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(Z=>Z.inverse?Z.inverse():H.Matrix.Invert(Z)),"FlowGraphInvertMatrixBlock",Z)}}(0,K.i)("FlowGraphInvertMatrixBlock",N);class D extends a.d{constructor(Z){super((0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),(0,A.S)((null===Z||void 0===Z?void 0:Z.matrixType)||"Matrix"),((Z,h)=>h.multiply(Z)),"FlowGraphMatrixMultiplicationBlock",Z)}}(0,K.i)("FlowGraphMatrixMultiplicationBlock",D);class k extends v.d{constructor(Z){super(Z),this.input=this.registerDataInput("input",A.k),this.position=this.registerDataOutput("position",A.G),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",A.x),this.tv=this.registerDataOutput("tv",A.G),this.isValid=this.registerDataOutput("isValid",A.f,!1)}_updateOutputs(Z){const h=Z._getExecutionVariable(this,"executionId",-1),V=Z._getExecutionVariable(this,"cachedPosition",null),v=Z._getExecutionVariable(this,"cachedRotation",null),A=Z._getExecutionVariable(this,"cachedScaling",null);if(h===Z.executionId&&V&&v&&A)this.position.setValue(V,Z),this.rotationQuaternion.setValue(v,Z),this.tv.setValue(A,Z);else{const h=this.input.getValue(Z),K=V||new H.Ch,d=v||new H.Quaternion,a=A||new H.Ch,n=Math.round(1e4*h.m[3])/1e4,x=Math.round(1e4*h.m[7])/1e4,N=Math.round(1e4*h.m[11])/1e4,D=Math.round(1e4*h.m[15])/1e4;if(0!==n||0!==x||0!==N||1!==D)return this.isValid.setValue(!1,Z),this.position.setValue(H.Ch.Zero(),Z),this.rotationQuaternion.setValue(H.Quaternion.Identity(),Z),void this.tv.setValue(H.Ch.One(),Z);const k=h.decompose(a,d,K);this.isValid.setValue(k,Z),this.position.setValue(K,Z),this.rotationQuaternion.setValue(d,Z),this.tv.setValue(a,Z),Z._setExecutionVariable(this,"cachedPosition",K),Z._setExecutionVariable(this,"cachedRotation",d),Z._setExecutionVariable(this,"cachedScaling",a),Z._setExecutionVariable(this,"executionId",Z.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,K.i)("FlowGraphMatrixDecompose",k);class u extends v.d{constructor(Z){super(Z),this.position=this.registerDataInput("position",A.G),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",A.x),this.tv=this.registerDataInput("tv",A.G),this.value=this.registerDataOutput("value",A.k)}_updateOutputs(Z){const h=Z._getExecutionVariable(this,"executionId",-1),V=Z._getExecutionVariable(this,"cachedMatrix",null);if(h===Z.executionId&&V)this.value.setValue(V,Z);else{const h=H.Matrix.Compose(this.tv.getValue(Z),this.rotationQuaternion.getValue(Z),this.position.getValue(Z));this.value.setValue(h,Z),Z._setExecutionVariable(this,"cachedMatrix",h),Z._setExecutionVariable(this,"executionId",Z.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,K.i)("FlowGraphMatrixCompose",u)},15012:(Z,h,V)=>{V.d(h,{d:()=>A});var v=V(15015);class A extends v.c{constructor(Z,h,V,v,A,H){super(V,H),this._operation=v,this._className=A,this.a=this.registerDataInput("a",Z),this.b=this.registerDataInput("b",h)}_doOperation(Z){const h=this.a.getValue(Z),V=this.b.getValue(Z);return this._operation(h,V)}getClassName(){return this._className}}},15015:(Z,h,V)=>{V.d(h,{c:()=>d});var v=V(13480),A=V(13459);const H="cachedOperationValue",K="cachedExecutionId";class d extends v.d{constructor(Z,h){super(h),this.value=this.registerDataOutput("value",Z),this.isValid=this.registerDataOutput("isValid",A.f)}_updateOutputs(Z){const h=Z._getExecutionVariable(this,K,-1),V=Z._getExecutionVariable(this,H,null);if(void 0!==V&&null!==V&&h===Z.executionId)this.isValid.setValue(!0,Z),this.value.setValue(V,Z);else try{const h=this._doOperation(Z);if(void 0===h||null===h)return void this.isValid.setValue(!1,Z);Z._setExecutionVariable(this,H,h),Z._setExecutionVariable(this,K,Z.executionId),this.value.setValue(h,Z),this.isValid.setValue(!0,Z)}catch(v){this.isValid.setValue(!1,Z)}}}},15024:(Z,h,V)=>{V.d(h,{e:()=>A});var v=V(15015);class A extends v.c{constructor(Z,h,V,v,A){super(h,A),this._operation=V,this._className=v,this.a=this.registerDataInput("a",Z)}_doOperation(Z){return this._operation(this.a.getValue(Z))}getClassName(){return this._className}}}}]);