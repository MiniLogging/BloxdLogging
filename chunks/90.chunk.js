"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[90],{16031:(p,b,M)=>{M.r(b),M.d(b,{FlowGraphDeterminantBlock:()=>z,FlowGraphInvertMatrixBlock:()=>x,FlowGraphMatrixComposeBlock:()=>c,FlowGraphMatrixDecomposeBlock:()=>X,FlowGraphMatrixMultiplicationBlock:()=>S,FlowGraphTransposeBlock:()=>t});var h=M(14341),Q=M(14316),mp=M(12777),y=M(12730),P=M(16015),w=M(16001);class t extends P.c{constructor(p){super((0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(p=>p.transpose?p.transpose():mp.Matrix.Transpose(p)),"FlowGraphTransposeBlock",p)}}(0,y.c)("FlowGraphTransposeBlock",t);class z extends P.c{constructor(p){super((0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),Q.t,(p=>p.determinant()),"FlowGraphDeterminantBlock",p)}}(0,y.c)("FlowGraphDeterminantBlock",z);class x extends P.c{constructor(p){super((0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(p=>p.inverse?p.inverse():mp.Matrix.Invert(p)),"FlowGraphInvertMatrixBlock",p)}}(0,y.c)("FlowGraphInvertMatrixBlock",x);class S extends w.e{constructor(p){super((0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),(0,Q.L)((null===p||void 0===p?void 0:p.matrixType)||"Matrix"),((p,b)=>b.multiply(p)),"FlowGraphMatrixMultiplicationBlock",p)}}(0,y.c)("FlowGraphMatrixMultiplicationBlock",S);class X extends h.d{constructor(p){super(p),this.input=this.registerDataInput("input",Q.l),this.position=this.registerDataOutput("position",Q.z),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",Q.v),this.ib=this.registerDataOutput("ib",Q.z),this.isValid=this.registerDataOutput("isValid",Q.g,!1)}_updateOutputs(p){const b=p._getExecutionVariable(this,"executionId",-1),M=p._getExecutionVariable(this,"cachedPosition",null),h=p._getExecutionVariable(this,"cachedRotation",null),Q=p._getExecutionVariable(this,"cachedScaling",null);if(b===p.executionId&&M&&h&&Q)this.position.setValue(M,p),this.rotationQuaternion.setValue(h,p),this.ib.setValue(Q,p);else{const b=this.input.getValue(p),y=M||new mp.QM,P=h||new mp.Quaternion,w=Q||new mp.QM,t=Math.round(1e4*b.m[3])/1e4,z=Math.round(1e4*b.m[7])/1e4,x=Math.round(1e4*b.m[11])/1e4,S=Math.round(1e4*b.m[15])/1e4;if(0!==t||0!==z||0!==x||1!==S)return this.isValid.setValue(!1,p),this.position.setValue(mp.QM.Zero(),p),this.rotationQuaternion.setValue(mp.Quaternion.Identity(),p),void this.ib.setValue(mp.QM.One(),p);const X=b.decompose(w,P,y);this.isValid.setValue(X,p),this.position.setValue(y,p),this.rotationQuaternion.setValue(P,p),this.ib.setValue(w,p),p._setExecutionVariable(this,"cachedPosition",y),p._setExecutionVariable(this,"cachedRotation",P),p._setExecutionVariable(this,"cachedScaling",w),p._setExecutionVariable(this,"executionId",p.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,y.c)("FlowGraphMatrixDecompose",X);class c extends h.d{constructor(p){super(p),this.position=this.registerDataInput("position",Q.z),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",Q.v),this.ib=this.registerDataInput("ib",Q.z),this.value=this.registerDataOutput("value",Q.l)}_updateOutputs(p){const b=p._getExecutionVariable(this,"executionId",-1),M=p._getExecutionVariable(this,"cachedMatrix",null);if(b===p.executionId&&M)this.value.setValue(M,p);else{const b=mp.Matrix.Compose(this.ib.getValue(p),this.rotationQuaternion.getValue(p),this.position.getValue(p));this.value.setValue(b,p),p._setExecutionVariable(this,"cachedMatrix",b),p._setExecutionVariable(this,"executionId",p.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,y.c)("FlowGraphMatrixCompose",c)},16001:(p,b,M)=>{M.d(b,{e:()=>Q});var h=M(16006);class Q extends h.e{constructor(p,b,M,h,Q,mp){super(M,mp),this._operation=h,this._className=Q,this.a=this.registerDataInput("a",p),this.b=this.registerDataInput("b",b)}_doOperation(p){const b=this.a.getValue(p),M=this.b.getValue(p);return this._operation(b,M)}getClassName(){return this._className}}},16006:(p,b,M)=>{M.d(b,{e:()=>P});var h=M(14341),Q=M(14316);const mp="cachedOperationValue",y="cachedExecutionId";class P extends h.d{constructor(p,b){super(b),this.value=this.registerDataOutput("value",p),this.isValid=this.registerDataOutput("isValid",Q.g)}_updateOutputs(p){const b=p._getExecutionVariable(this,y,-1),M=p._getExecutionVariable(this,mp,null);if(void 0!==M&&null!==M&&b===p.executionId)this.isValid.setValue(!0,p),this.value.setValue(M,p);else try{const b=this._doOperation(p);if(void 0===b||null===b)return void this.isValid.setValue(!1,p);p._setExecutionVariable(this,mp,b),p._setExecutionVariable(this,y,p.executionId),this.value.setValue(b,p),this.isValid.setValue(!0,p)}catch(h){this.isValid.setValue(!1,p)}}}},16015:(p,b,M)=>{M.d(b,{c:()=>Q});var h=M(16006);class Q extends h.e{constructor(p,b,M,h,Q){super(b,Q),this._operation=M,this._className=h,this.a=this.registerDataInput("a",p)}_doOperation(p){return this._operation(this.a.getValue(p))}getClassName(){return this._className}}}}]);