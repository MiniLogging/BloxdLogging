"use strict";(self["9jl1vn4ei5r"]=self["9jl1vn4ei5r"]||[]).push([[90],{15015:(M,p,b)=>{b.r(p),b.d(p,{FlowGraphDeterminantBlock:()=>H,FlowGraphInvertMatrixBlock:()=>F,FlowGraphMatrixComposeBlock:()=>i,FlowGraphMatrixDecomposeBlock:()=>W,FlowGraphMatrixMultiplicationBlock:()=>o,FlowGraphTransposeBlock:()=>O});var Q=b(13492),q=b(13477),B=b(11796),k=b(11757),u=b(15001),T=b(14987);class O extends u.b{constructor(M){super((0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(M=>M.transpose?M.transpose():B.Matrix.Transpose(M)),"FlowGraphTransposeBlock",M)}}(0,k.g)("FlowGraphTransposeBlock",O);class H extends u.b{constructor(M){super((0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),q.q,(M=>M.determinant()),"FlowGraphDeterminantBlock",M)}}(0,k.g)("FlowGraphDeterminantBlock",H);class F extends u.b{constructor(M){super((0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(M=>M.inverse?M.inverse():B.Matrix.Invert(M)),"FlowGraphInvertMatrixBlock",M)}}(0,k.g)("FlowGraphInvertMatrixBlock",F);class o extends T.c{constructor(M){super((0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),(0,q.P)((null===M||void 0===M?void 0:M.matrixType)||"Matrix"),((M,p)=>p.multiply(M)),"FlowGraphMatrixMultiplicationBlock",M)}}(0,k.g)("FlowGraphMatrixMultiplicationBlock",o);class W extends Q.b{constructor(M){super(M),this.input=this.registerDataInput("input",q.g),this.position=this.registerDataOutput("position",q.C),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",q.t),this.ab=this.registerDataOutput("ab",q.C),this.isValid=this.registerDataOutput("isValid",q.d,!1)}_updateOutputs(M){const p=M._getExecutionVariable(this,"executionId",-1),b=M._getExecutionVariable(this,"cachedPosition",null),Q=M._getExecutionVariable(this,"cachedRotation",null),q=M._getExecutionVariable(this,"cachedScaling",null);if(p===M.executionId&&b&&Q&&q)this.position.setValue(b,M),this.rotationQuaternion.setValue(Q,M),this.ab.setValue(q,M);else{const p=this.input.getValue(M),k=b||new B.Ap,u=Q||new B.Quaternion,T=q||new B.Ap,O=Math.round(1e4*p.m[3])/1e4,H=Math.round(1e4*p.m[7])/1e4,F=Math.round(1e4*p.m[11])/1e4,o=Math.round(1e4*p.m[15])/1e4;if(0!==O||0!==H||0!==F||1!==o)return this.isValid.setValue(!1,M),this.position.setValue(B.Ap.Zero(),M),this.rotationQuaternion.setValue(B.Quaternion.Identity(),M),void this.ab.setValue(B.Ap.One(),M);const W=p.decompose(T,u,k);this.isValid.setValue(W,M),this.position.setValue(k,M),this.rotationQuaternion.setValue(u,M),this.ab.setValue(T,M),M._setExecutionVariable(this,"cachedPosition",k),M._setExecutionVariable(this,"cachedRotation",u),M._setExecutionVariable(this,"cachedScaling",T),M._setExecutionVariable(this,"executionId",M.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,k.g)("FlowGraphMatrixDecompose",W);class i extends Q.b{constructor(M){super(M),this.position=this.registerDataInput("position",q.C),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",q.t),this.ab=this.registerDataInput("ab",q.C),this.value=this.registerDataOutput("value",q.g)}_updateOutputs(M){const p=M._getExecutionVariable(this,"executionId",-1),b=M._getExecutionVariable(this,"cachedMatrix",null);if(p===M.executionId&&b)this.value.setValue(b,M);else{const p=B.Matrix.Compose(this.ab.getValue(M),this.rotationQuaternion.getValue(M),this.position.getValue(M));this.value.setValue(p,M),M._setExecutionVariable(this,"cachedMatrix",p),M._setExecutionVariable(this,"executionId",M.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,k.g)("FlowGraphMatrixCompose",i)},14987:(M,p,b)=>{b.d(p,{c:()=>q});var Q=b(14995);class q extends Q.d{constructor(M,p,b,Q,q,B){super(b,B),this._operation=Q,this._className=q,this.a=this.registerDataInput("a",M),this.b=this.registerDataInput("b",p)}_doOperation(M){const p=this.a.getValue(M),b=this.b.getValue(M);return this._operation(p,b)}getClassName(){return this._className}}},14995:(M,p,b)=>{b.d(p,{d:()=>u});var Q=b(13492),q=b(13477);const B="cachedOperationValue",k="cachedExecutionId";class u extends Q.b{constructor(M,p){super(p),this.value=this.registerDataOutput("value",M),this.isValid=this.registerDataOutput("isValid",q.d)}_updateOutputs(M){const p=M._getExecutionVariable(this,k,-1),b=M._getExecutionVariable(this,B,null);if(void 0!==b&&null!==b&&p===M.executionId)this.isValid.setValue(!0,M),this.value.setValue(b,M);else try{const p=this._doOperation(M);if(void 0===p||null===p)return void this.isValid.setValue(!1,M);M._setExecutionVariable(this,B,p),M._setExecutionVariable(this,k,M.executionId),this.value.setValue(p,M),this.isValid.setValue(!0,M)}catch(Q){this.isValid.setValue(!1,M)}}}},15001:(M,p,b)=>{b.d(p,{b:()=>q});var Q=b(14995);class q extends Q.d{constructor(M,p,b,Q,q){super(p,q),this._operation=b,this._className=Q,this.a=this.registerDataInput("a",M)}_doOperation(M){return this._operation(this.a.getValue(M))}getClassName(){return this._className}}}}]);