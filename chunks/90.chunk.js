"use strict";(self["5dou0t7wntc"]=self["5dou0t7wntc"]||[]).push([[90],{14987:(K,O,F)=>{F.r(O),F.d(O,{FlowGraphDeterminantBlock:()=>M,FlowGraphInvertMatrixBlock:()=>t,FlowGraphMatrixComposeBlock:()=>u,FlowGraphMatrixDecomposeBlock:()=>X,FlowGraphMatrixMultiplicationBlock:()=>j,FlowGraphTransposeBlock:()=>E});var f=F(13471),r=F(13441),l=F(11713),q=F(11661),J=F(14972),c=F(14962);class E extends J.b{constructor(K){super((0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(K=>K.transpose?K.transpose():l.Matrix.Transpose(K)),"FlowGraphTransposeBlock",K)}}(0,q.g)("FlowGraphTransposeBlock",E);class M extends J.b{constructor(K){super((0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),r.s,(K=>K.determinant()),"FlowGraphDeterminantBlock",K)}}(0,q.g)("FlowGraphDeterminantBlock",M);class t extends J.b{constructor(K){super((0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(K=>K.inverse?K.inverse():l.Matrix.Invert(K)),"FlowGraphInvertMatrixBlock",K)}}(0,q.g)("FlowGraphInvertMatrixBlock",t);class j extends c.e{constructor(K){super((0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),(0,r.J)((null===K||void 0===K?void 0:K.matrixType)||"Matrix"),((K,O)=>O.multiply(K)),"FlowGraphMatrixMultiplicationBlock",K)}}(0,q.g)("FlowGraphMatrixMultiplicationBlock",j);class X extends f.e{constructor(K){super(K),this.input=this.registerDataInput("input",r.l),this.position=this.registerDataOutput("position",r.B),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",r.u),this.TJ=this.registerDataOutput("TJ",r.B),this.isValid=this.registerDataOutput("isValid",r.e,!1)}_updateOutputs(K){const O=K._getExecutionVariable(this,"executionId",-1),F=K._getExecutionVariable(this,"cachedPosition",null),f=K._getExecutionVariable(this,"cachedRotation",null),r=K._getExecutionVariable(this,"cachedScaling",null);if(O===K.executionId&&F&&f&&r)this.position.setValue(F,K),this.rotationQuaternion.setValue(f,K),this.TJ.setValue(r,K);else{const O=this.input.getValue(K),q=F||new l.TO,J=f||new l.Quaternion,c=r||new l.TO,E=Math.round(1e4*O.m[3])/1e4,M=Math.round(1e4*O.m[7])/1e4,t=Math.round(1e4*O.m[11])/1e4,j=Math.round(1e4*O.m[15])/1e4;if(0!==E||0!==M||0!==t||1!==j)return this.isValid.setValue(!1,K),this.position.setValue(l.TO.Zero(),K),this.rotationQuaternion.setValue(l.Quaternion.Identity(),K),void this.TJ.setValue(l.TO.One(),K);const X=O.decompose(c,J,q);this.isValid.setValue(X,K),this.position.setValue(q,K),this.rotationQuaternion.setValue(J,K),this.TJ.setValue(c,K),K._setExecutionVariable(this,"cachedPosition",q),K._setExecutionVariable(this,"cachedRotation",J),K._setExecutionVariable(this,"cachedScaling",c),K._setExecutionVariable(this,"executionId",K.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,q.g)("FlowGraphMatrixDecompose",X);class u extends f.e{constructor(K){super(K),this.position=this.registerDataInput("position",r.B),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",r.u),this.TJ=this.registerDataInput("TJ",r.B),this.value=this.registerDataOutput("value",r.l)}_updateOutputs(K){const O=K._getExecutionVariable(this,"executionId",-1),F=K._getExecutionVariable(this,"cachedMatrix",null);if(O===K.executionId&&F)this.value.setValue(F,K);else{const O=l.Matrix.Compose(this.TJ.getValue(K),this.rotationQuaternion.getValue(K),this.position.getValue(K));this.value.setValue(O,K),K._setExecutionVariable(this,"cachedMatrix",O),K._setExecutionVariable(this,"executionId",K.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,q.g)("FlowGraphMatrixCompose",u)},14962:(K,O,F)=>{F.d(O,{e:()=>r});var f=F(14970);class r extends f.d{constructor(K,O,F,f,r,l){super(F,l),this._operation=f,this._className=r,this.a=this.registerDataInput("a",K),this.b=this.registerDataInput("b",O)}_doOperation(K){const O=this.a.getValue(K),F=this.b.getValue(K);return this._operation(O,F)}getClassName(){return this._className}}},14970:(K,O,F)=>{F.d(O,{d:()=>J});var f=F(13471),r=F(13441);const l="cachedOperationValue",q="cachedExecutionId";class J extends f.e{constructor(K,O){super(O),this.value=this.registerDataOutput("value",K),this.isValid=this.registerDataOutput("isValid",r.e)}_updateOutputs(K){const O=K._getExecutionVariable(this,q,-1),F=K._getExecutionVariable(this,l,null);if(void 0!==F&&null!==F&&O===K.executionId)this.isValid.setValue(!0,K),this.value.setValue(F,K);else try{const O=this._doOperation(K);if(void 0===O||null===O)return void this.isValid.setValue(!1,K);K._setExecutionVariable(this,l,O),K._setExecutionVariable(this,q,K.executionId),this.value.setValue(O,K),this.isValid.setValue(!0,K)}catch(f){this.isValid.setValue(!1,K)}}}},14972:(K,O,F)=>{F.d(O,{b:()=>r});var f=F(14970);class r extends f.d{constructor(K,O,F,f,r){super(O,r),this._operation=F,this._className=f,this.a=this.registerDataInput("a",K)}_doOperation(K){return this._operation(this.a.getValue(K))}getClassName(){return this._className}}}}]);