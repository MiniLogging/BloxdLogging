"use strict";(self.uji65st81d=self.uji65st81d||[]).push([[90],{15632:(V,h,mV)=>{mV.r(h),mV.d(h,{FlowGraphDeterminantBlock:()=>o,FlowGraphInvertMatrixBlock:()=>n,FlowGraphMatrixComposeBlock:()=>R,FlowGraphMatrixDecomposeBlock:()=>x,FlowGraphMatrixMultiplicationBlock:()=>q,FlowGraphTransposeBlock:()=>K});var t=mV(14123),L=mV(14109),N=mV(12422),A=mV(12388),k=mV(15618),C=mV(15609);class K extends k.d{constructor(V){super((0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(V=>V.transpose?V.transpose():N.Matrix.Transpose(V)),"FlowGraphTransposeBlock",V)}}(0,A.i)("FlowGraphTransposeBlock",K);class o extends k.d{constructor(V){super((0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),L.r,(V=>V.determinant()),"FlowGraphDeterminantBlock",V)}}(0,A.i)("FlowGraphDeterminantBlock",o);class n extends k.d{constructor(V){super((0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(V=>V.inverse?V.inverse():N.Matrix.Invert(V)),"FlowGraphInvertMatrixBlock",V)}}(0,A.i)("FlowGraphInvertMatrixBlock",n);class q extends C.d{constructor(V){super((0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),(0,L.I)((null===V||void 0===V?void 0:V.matrixType)||"Matrix"),((V,h)=>h.multiply(V)),"FlowGraphMatrixMultiplicationBlock",V)}}(0,A.i)("FlowGraphMatrixMultiplicationBlock",q);class x extends t.e{constructor(V){super(V),this.input=this.registerDataInput("input",L.l),this.position=this.registerDataOutput("position",L.z),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",L.v),this.jk=this.registerDataOutput("jk",L.z),this.isValid=this.registerDataOutput("isValid",L.h,!1)}_updateOutputs(V){const h=V._getExecutionVariable(this,"executionId",-1),mV=V._getExecutionVariable(this,"cachedPosition",null),t=V._getExecutionVariable(this,"cachedRotation",null),L=V._getExecutionVariable(this,"cachedScaling",null);if(h===V.executionId&&mV&&t&&L)this.position.setValue(mV,V),this.rotationQuaternion.setValue(t,V),this.jk.setValue(L,V);else{const h=this.input.getValue(V),A=mV||new N.sh,k=t||new N.Quaternion,C=L||new N.sh,K=Math.round(1e4*h.m[3])/1e4,o=Math.round(1e4*h.m[7])/1e4,n=Math.round(1e4*h.m[11])/1e4,q=Math.round(1e4*h.m[15])/1e4;if(0!==K||0!==o||0!==n||1!==q)return this.isValid.setValue(!1,V),this.position.setValue(N.sh.Zero(),V),this.rotationQuaternion.setValue(N.Quaternion.Identity(),V),void this.jk.setValue(N.sh.One(),V);const x=h.decompose(C,k,A);this.isValid.setValue(x,V),this.position.setValue(A,V),this.rotationQuaternion.setValue(k,V),this.jk.setValue(C,V),V._setExecutionVariable(this,"cachedPosition",A),V._setExecutionVariable(this,"cachedRotation",k),V._setExecutionVariable(this,"cachedScaling",C),V._setExecutionVariable(this,"executionId",V.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,A.i)("FlowGraphMatrixDecompose",x);class R extends t.e{constructor(V){super(V),this.position=this.registerDataInput("position",L.z),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",L.v),this.jk=this.registerDataInput("jk",L.z),this.value=this.registerDataOutput("value",L.l)}_updateOutputs(V){const h=V._getExecutionVariable(this,"executionId",-1),mV=V._getExecutionVariable(this,"cachedMatrix",null);if(h===V.executionId&&mV)this.value.setValue(mV,V);else{const h=N.Matrix.Compose(this.jk.getValue(V),this.rotationQuaternion.getValue(V),this.position.getValue(V));this.value.setValue(h,V),V._setExecutionVariable(this,"cachedMatrix",h),V._setExecutionVariable(this,"executionId",V.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,A.i)("FlowGraphMatrixCompose",R)},15609:(V,h,mV)=>{mV.d(h,{d:()=>L});var t=mV(15611);class L extends t.b{constructor(V,h,mV,t,L,N){super(mV,N),this._operation=t,this._className=L,this.a=this.registerDataInput("a",V),this.b=this.registerDataInput("b",h)}_doOperation(V){const h=this.a.getValue(V),mV=this.b.getValue(V);return this._operation(h,mV)}getClassName(){return this._className}}},15611:(V,h,mV)=>{mV.d(h,{b:()=>k});var t=mV(14123),L=mV(14109);const N="cachedOperationValue",A="cachedExecutionId";class k extends t.e{constructor(V,h){super(h),this.value=this.registerDataOutput("value",V),this.isValid=this.registerDataOutput("isValid",L.h)}_updateOutputs(V){const h=V._getExecutionVariable(this,A,-1),mV=V._getExecutionVariable(this,N,null);if(void 0!==mV&&null!==mV&&h===V.executionId)this.isValid.setValue(!0,V),this.value.setValue(mV,V);else try{const h=this._doOperation(V);if(void 0===h||null===h)return void this.isValid.setValue(!1,V);V._setExecutionVariable(this,N,h),V._setExecutionVariable(this,A,V.executionId),this.value.setValue(h,V),this.isValid.setValue(!0,V)}catch(t){this.isValid.setValue(!1,V)}}}},15618:(V,h,mV)=>{mV.d(h,{d:()=>L});var t=mV(15611);class L extends t.b{constructor(V,h,mV,t,L){super(h,L),this._operation=mV,this._className=t,this.a=this.registerDataInput("a",V)}_doOperation(V){return this._operation(this.a.getValue(V))}getClassName(){return this._className}}}}]);