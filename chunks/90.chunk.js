"use strict";(self.i6szn8jgzh=self.i6szn8jgzh||[]).push([[90],{15096:(b,n,i)=>{i.r(n),i.d(n,{FlowGraphDeterminantBlock:()=>mb,FlowGraphInvertMatrixBlock:()=>N,FlowGraphMatrixComposeBlock:()=>z,FlowGraphMatrixDecomposeBlock:()=>T,FlowGraphMatrixMultiplicationBlock:()=>Z,FlowGraphTransposeBlock:()=>B});var e=i(13547),V=i(13522),Q=i(11778),U=i(11734),Y=i(15089),L=i(15081);class B extends Y.b{constructor(b){super((0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(b=>b.transpose?b.transpose():Q.Matrix.Transpose(b)),"FlowGraphTransposeBlock",b)}}(0,U.i)("FlowGraphTransposeBlock",B);class mb extends Y.b{constructor(b){super((0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),V.q,(b=>b.determinant()),"FlowGraphDeterminantBlock",b)}}(0,U.i)("FlowGraphDeterminantBlock",mb);class N extends Y.b{constructor(b){super((0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(b=>b.inverse?b.inverse():Q.Matrix.Invert(b)),"FlowGraphInvertMatrixBlock",b)}}(0,U.i)("FlowGraphInvertMatrixBlock",N);class Z extends L.d{constructor(b){super((0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),(0,V.M)((null===b||void 0===b?void 0:b.matrixType)||"Matrix"),((b,n)=>n.multiply(b)),"FlowGraphMatrixMultiplicationBlock",b)}}(0,U.i)("FlowGraphMatrixMultiplicationBlock",Z);class T extends e.c{constructor(b){super(b),this.input=this.registerDataInput("input",V.j),this.position=this.registerDataOutput("position",V.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",V.t),this.ge=this.registerDataOutput("ge",V.E),this.isValid=this.registerDataOutput("isValid",V.f,!1)}_updateOutputs(b){const n=b._getExecutionVariable(this,"executionId",-1),i=b._getExecutionVariable(this,"cachedPosition",null),e=b._getExecutionVariable(this,"cachedRotation",null),V=b._getExecutionVariable(this,"cachedScaling",null);if(n===b.executionId&&i&&e&&V)this.position.setValue(i,b),this.rotationQuaternion.setValue(e,b),this.ge.setValue(V,b);else{const n=this.input.getValue(b),U=i||new Q.On,Y=e||new Q.Quaternion,L=V||new Q.On,B=Math.round(1e4*n.m[3])/1e4,mb=Math.round(1e4*n.m[7])/1e4,N=Math.round(1e4*n.m[11])/1e4,Z=Math.round(1e4*n.m[15])/1e4;if(0!==B||0!==mb||0!==N||1!==Z)return this.isValid.setValue(!1,b),this.position.setValue(Q.On.Zero(),b),this.rotationQuaternion.setValue(Q.Quaternion.Identity(),b),void this.ge.setValue(Q.On.One(),b);const T=n.decompose(L,Y,U);this.isValid.setValue(T,b),this.position.setValue(U,b),this.rotationQuaternion.setValue(Y,b),this.ge.setValue(L,b),b._setExecutionVariable(this,"cachedPosition",U),b._setExecutionVariable(this,"cachedRotation",Y),b._setExecutionVariable(this,"cachedScaling",L),b._setExecutionVariable(this,"executionId",b.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,U.i)("FlowGraphMatrixDecompose",T);class z extends e.c{constructor(b){super(b),this.position=this.registerDataInput("position",V.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",V.t),this.ge=this.registerDataInput("ge",V.E),this.value=this.registerDataOutput("value",V.j)}_updateOutputs(b){const n=b._getExecutionVariable(this,"executionId",-1),i=b._getExecutionVariable(this,"cachedMatrix",null);if(n===b.executionId&&i)this.value.setValue(i,b);else{const n=Q.Matrix.Compose(this.ge.getValue(b),this.rotationQuaternion.getValue(b),this.position.getValue(b));this.value.setValue(n,b),b._setExecutionVariable(this,"cachedMatrix",n),b._setExecutionVariable(this,"executionId",b.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,U.i)("FlowGraphMatrixCompose",z)},15081:(b,n,i)=>{i.d(n,{d:()=>V});var e=i(15083);class V extends e.b{constructor(b,n,i,e,V,Q){super(i,Q),this._operation=e,this._className=V,this.a=this.registerDataInput("a",b),this.b=this.registerDataInput("b",n)}_doOperation(b){const n=this.a.getValue(b),i=this.b.getValue(b);return this._operation(n,i)}getClassName(){return this._className}}},15083:(b,n,i)=>{i.d(n,{b:()=>Y});var e=i(13547),V=i(13522);const Q="cachedOperationValue",U="cachedExecutionId";class Y extends e.c{constructor(b,n){super(n),this.value=this.registerDataOutput("value",b),this.isValid=this.registerDataOutput("isValid",V.f)}_updateOutputs(b){const n=b._getExecutionVariable(this,U,-1),i=b._getExecutionVariable(this,Q,null);if(void 0!==i&&null!==i&&n===b.executionId)this.isValid.setValue(!0,b),this.value.setValue(i,b);else try{const n=this._doOperation(b);if(void 0===n||null===n)return void this.isValid.setValue(!1,b);b._setExecutionVariable(this,Q,n),b._setExecutionVariable(this,U,b.executionId),this.value.setValue(n,b),this.isValid.setValue(!0,b)}catch(e){this.isValid.setValue(!1,b)}}}},15089:(b,n,i)=>{i.d(n,{b:()=>V});var e=i(15083);class V extends e.b{constructor(b,n,i,e,V){super(n,V),this._operation=i,this._className=e,this.a=this.registerDataInput("a",b)}_doOperation(b){return this._operation(this.a.getValue(b))}getClassName(){return this._className}}}}]);