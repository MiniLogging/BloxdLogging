"use strict";(self.ozi0exxand9=self.ozi0exxand9||[]).push([[90],{14584:(f,v,Z)=>{Z.r(v),Z.d(v,{FlowGraphDeterminantBlock:()=>O,FlowGraphInvertMatrixBlock:()=>u,FlowGraphMatrixComposeBlock:()=>b,FlowGraphMatrixDecomposeBlock:()=>a,FlowGraphMatrixMultiplicationBlock:()=>W,FlowGraphTransposeBlock:()=>H});var V=Z(13149),h=Z(13123),J=Z(11421),l=Z(11372),e=Z(14576),C=Z(14568);class H extends e.b{constructor(f){super((0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(f=>f.transpose?f.transpose():J.Matrix.Transpose(f)),"FlowGraphTransposeBlock",f)}}(0,l.h)("FlowGraphTransposeBlock",H);class O extends e.b{constructor(f){super((0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),h.v,(f=>f.determinant()),"FlowGraphDeterminantBlock",f)}}(0,l.h)("FlowGraphDeterminantBlock",O);class u extends e.b{constructor(f){super((0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(f=>f.inverse?f.inverse():J.Matrix.Invert(f)),"FlowGraphInvertMatrixBlock",f)}}(0,l.h)("FlowGraphInvertMatrixBlock",u);class W extends C.c{constructor(f){super((0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),(0,h.S)((null===f||void 0===f?void 0:f.matrixType)||"Matrix"),((f,v)=>v.multiply(f)),"FlowGraphMatrixMultiplicationBlock",f)}}(0,l.h)("FlowGraphMatrixMultiplicationBlock",W);class a extends V.c{constructor(f){super(f),this.input=this.registerDataInput("input",h.o),this.position=this.registerDataOutput("position",h.J),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",h.x),this.Ze=this.registerDataOutput("Ze",h.J),this.isValid=this.registerDataOutput("isValid",h.g,!1)}_updateOutputs(f){const v=f._getExecutionVariable(this,"executionId",-1),Z=f._getExecutionVariable(this,"cachedPosition",null),V=f._getExecutionVariable(this,"cachedRotation",null),h=f._getExecutionVariable(this,"cachedScaling",null);if(v===f.executionId&&Z&&V&&h)this.position.setValue(Z,f),this.rotationQuaternion.setValue(V,f),this.Ze.setValue(h,f);else{const v=this.input.getValue(f),l=Z||new J.Xv,e=V||new J.Quaternion,C=h||new J.Xv,H=Math.round(1e4*v.m[3])/1e4,O=Math.round(1e4*v.m[7])/1e4,u=Math.round(1e4*v.m[11])/1e4,W=Math.round(1e4*v.m[15])/1e4;if(0!==H||0!==O||0!==u||1!==W)return this.isValid.setValue(!1,f),this.position.setValue(J.Xv.Zero(),f),this.rotationQuaternion.setValue(J.Quaternion.Identity(),f),void this.Ze.setValue(J.Xv.One(),f);const a=v.decompose(C,e,l);this.isValid.setValue(a,f),this.position.setValue(l,f),this.rotationQuaternion.setValue(e,f),this.Ze.setValue(C,f),f._setExecutionVariable(this,"cachedPosition",l),f._setExecutionVariable(this,"cachedRotation",e),f._setExecutionVariable(this,"cachedScaling",C),f._setExecutionVariable(this,"executionId",f.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,l.h)("FlowGraphMatrixDecompose",a);class b extends V.c{constructor(f){super(f),this.position=this.registerDataInput("position",h.J),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",h.x),this.Ze=this.registerDataInput("Ze",h.J),this.value=this.registerDataOutput("value",h.o)}_updateOutputs(f){const v=f._getExecutionVariable(this,"executionId",-1),Z=f._getExecutionVariable(this,"cachedMatrix",null);if(v===f.executionId&&Z)this.value.setValue(Z,f);else{const v=J.Matrix.Compose(this.Ze.getValue(f),this.rotationQuaternion.getValue(f),this.position.getValue(f));this.value.setValue(v,f),f._setExecutionVariable(this,"cachedMatrix",v),f._setExecutionVariable(this,"executionId",f.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,l.h)("FlowGraphMatrixCompose",b)},14568:(f,v,Z)=>{Z.d(v,{c:()=>h});var V=Z(14573);class h extends V.b{constructor(f,v,Z,V,h,J){super(Z,J),this._operation=V,this._className=h,this.a=this.registerDataInput("a",f),this.b=this.registerDataInput("b",v)}_doOperation(f){const v=this.a.getValue(f),Z=this.b.getValue(f);return this._operation(v,Z)}getClassName(){return this._className}}},14573:(f,v,Z)=>{Z.d(v,{b:()=>e});var V=Z(13149),h=Z(13123);const J="cachedOperationValue",l="cachedExecutionId";class e extends V.c{constructor(f,v){super(v),this.value=this.registerDataOutput("value",f),this.isValid=this.registerDataOutput("isValid",h.g)}_updateOutputs(f){const v=f._getExecutionVariable(this,l,-1),Z=f._getExecutionVariable(this,J,null);if(void 0!==Z&&null!==Z&&v===f.executionId)this.isValid.setValue(!0,f),this.value.setValue(Z,f);else try{const v=this._doOperation(f);if(void 0===v||null===v)return void this.isValid.setValue(!1,f);f._setExecutionVariable(this,J,v),f._setExecutionVariable(this,l,f.executionId),this.value.setValue(v,f),this.isValid.setValue(!0,f)}catch(V){this.isValid.setValue(!1,f)}}}},14576:(f,v,Z)=>{Z.d(v,{b:()=>h});var V=Z(14573);class h extends V.b{constructor(f,v,Z,V,h){super(v,h),this._operation=Z,this._className=V,this.a=this.registerDataInput("a",f)}_doOperation(f){return this._operation(this.a.getValue(f))}getClassName(){return this._className}}}}]);