"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[90],{16041:(a,c,o)=>{o.r(c),o.d(c,{FlowGraphDeterminantBlock:()=>C,FlowGraphInvertMatrixBlock:()=>j,FlowGraphMatrixComposeBlock:()=>g,FlowGraphMatrixDecomposeBlock:()=>e,FlowGraphMatrixMultiplicationBlock:()=>L,FlowGraphTransposeBlock:()=>T});var s=o(14423),q=o(14394),t=o(12810),i=o(12776),p=o(16025),G=o(16016);class T extends p.d{constructor(a){super((0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(a=>a.transpose?a.transpose():t.Matrix.Transpose(a)),"FlowGraphTransposeBlock",a)}}(0,i.d)("FlowGraphTransposeBlock",T);class C extends p.d{constructor(a){super((0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),q.o,(a=>a.determinant()),"FlowGraphDeterminantBlock",a)}}(0,i.d)("FlowGraphDeterminantBlock",C);class j extends p.d{constructor(a){super((0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(a=>a.inverse?a.inverse():t.Matrix.Invert(a)),"FlowGraphInvertMatrixBlock",a)}}(0,i.d)("FlowGraphInvertMatrixBlock",j);class L extends G.e{constructor(a){super((0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,q.G)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),((a,c)=>c.multiply(a)),"FlowGraphMatrixMultiplicationBlock",a)}}(0,i.d)("FlowGraphMatrixMultiplicationBlock",L);class e extends s.e{constructor(a){super(a),this.input=this.registerDataInput("input",q.k),this.position=this.registerDataOutput("position",q.w),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",q.p),this.uc=this.registerDataOutput("uc",q.w),this.isValid=this.registerDataOutput("isValid",q.f,!1)}_updateOutputs(a){const c=a._getExecutionVariable(this,"executionId",-1),o=a._getExecutionVariable(this,"cachedPosition",null),s=a._getExecutionVariable(this,"cachedRotation",null),q=a._getExecutionVariable(this,"cachedScaling",null);if(c===a.executionId&&o&&s&&q)this.position.setValue(o,a),this.rotationQuaternion.setValue(s,a),this.uc.setValue(q,a);else{const c=this.input.getValue(a),i=o||new t.Hc,p=s||new t.Quaternion,G=q||new t.Hc,T=Math.round(1e4*c.m[3])/1e4,C=Math.round(1e4*c.m[7])/1e4,j=Math.round(1e4*c.m[11])/1e4,L=Math.round(1e4*c.m[15])/1e4;if(0!==T||0!==C||0!==j||1!==L)return this.isValid.setValue(!1,a),this.position.setValue(t.Hc.Zero(),a),this.rotationQuaternion.setValue(t.Quaternion.Identity(),a),void this.uc.setValue(t.Hc.One(),a);const e=c.decompose(G,p,i);this.isValid.setValue(e,a),this.position.setValue(i,a),this.rotationQuaternion.setValue(p,a),this.uc.setValue(G,a),a._setExecutionVariable(this,"cachedPosition",i),a._setExecutionVariable(this,"cachedRotation",p),a._setExecutionVariable(this,"cachedScaling",G),a._setExecutionVariable(this,"executionId",a.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,i.d)("FlowGraphMatrixDecompose",e);class g extends s.e{constructor(a){super(a),this.position=this.registerDataInput("position",q.w),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",q.p),this.uc=this.registerDataInput("uc",q.w),this.value=this.registerDataOutput("value",q.k)}_updateOutputs(a){const c=a._getExecutionVariable(this,"executionId",-1),o=a._getExecutionVariable(this,"cachedMatrix",null);if(c===a.executionId&&o)this.value.setValue(o,a);else{const c=t.Matrix.Compose(this.uc.getValue(a),this.rotationQuaternion.getValue(a),this.position.getValue(a));this.value.setValue(c,a),a._setExecutionVariable(this,"cachedMatrix",c),a._setExecutionVariable(this,"executionId",a.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,i.d)("FlowGraphMatrixCompose",g)},16016:(a,c,o)=>{o.d(c,{e:()=>q});var s=o(16018);class q extends s.c{constructor(a,c,o,s,q,t){super(o,t),this._operation=s,this._className=q,this.a=this.registerDataInput("a",a),this.b=this.registerDataInput("b",c)}_doOperation(a){const c=this.a.getValue(a),o=this.b.getValue(a);return this._operation(c,o)}getClassName(){return this._className}}},16018:(a,c,o)=>{o.d(c,{c:()=>p});var s=o(14423),q=o(14394);const t="cachedOperationValue",i="cachedExecutionId";class p extends s.e{constructor(a,c){super(c),this.value=this.registerDataOutput("value",a),this.isValid=this.registerDataOutput("isValid",q.f)}_updateOutputs(a){const c=a._getExecutionVariable(this,i,-1),o=a._getExecutionVariable(this,t,null);if(void 0!==o&&null!==o&&c===a.executionId)this.isValid.setValue(!0,a),this.value.setValue(o,a);else try{const c=this._doOperation(a);if(void 0===c||null===c)return void this.isValid.setValue(!1,a);a._setExecutionVariable(this,t,c),a._setExecutionVariable(this,i,a.executionId),this.value.setValue(c,a),this.isValid.setValue(!0,a)}catch(s){this.isValid.setValue(!1,a)}}}},16025:(a,c,o)=>{o.d(c,{d:()=>q});var s=o(16018);class q extends s.c{constructor(a,c,o,s,q){super(c,q),this._operation=o,this._className=s,this.a=this.registerDataInput("a",a)}_doOperation(a){return this._operation(this.a.getValue(a))}getClassName(){return this._className}}}}]);