"use strict";(self.vb3rpbgyozo=self.vb3rpbgyozo||[]).push([[90],{16019:(q,I,l)=>{l.r(I),l.d(I,{FlowGraphDeterminantBlock:()=>Z,FlowGraphInvertMatrixBlock:()=>r,FlowGraphMatrixComposeBlock:()=>d,FlowGraphMatrixDecomposeBlock:()=>o,FlowGraphMatrixMultiplicationBlock:()=>x,FlowGraphTransposeBlock:()=>s});var w=l(14457),t=l(14441),O=l(12747),c=l(12711),a=l(16010),F=l(16001);class s extends a.d{constructor(q){super((0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(q=>q.transpose?q.transpose():O.Matrix.Transpose(q)),"FlowGraphTransposeBlock",q)}}(0,c.e)("FlowGraphTransposeBlock",s);class Z extends a.d{constructor(q){super((0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),t.v,(q=>q.determinant()),"FlowGraphDeterminantBlock",q)}}(0,c.e)("FlowGraphDeterminantBlock",Z);class r extends a.d{constructor(q){super((0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(q=>q.inverse?q.inverse():O.Matrix.Invert(q)),"FlowGraphInvertMatrixBlock",q)}}(0,c.e)("FlowGraphInvertMatrixBlock",r);class x extends F.e{constructor(q){super((0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),(0,t.P)((null===q||void 0===q?void 0:q.matrixType)||"Matrix"),((q,I)=>I.multiply(q)),"FlowGraphMatrixMultiplicationBlock",q)}}(0,c.e)("FlowGraphMatrixMultiplicationBlock",x);class o extends w.c{constructor(q){super(q),this.input=this.registerDataInput("input",t.m),this.position=this.registerDataOutput("position",t.F),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",t.w),this.Xc=this.registerDataOutput("Xc",t.F),this.isValid=this.registerDataOutput("isValid",t.g,!1)}_updateOutputs(q){const I=q._getExecutionVariable(this,"executionId",-1),l=q._getExecutionVariable(this,"cachedPosition",null),w=q._getExecutionVariable(this,"cachedRotation",null),t=q._getExecutionVariable(this,"cachedScaling",null);if(I===q.executionId&&l&&w&&t)this.position.setValue(l,q),this.rotationQuaternion.setValue(w,q),this.Xc.setValue(t,q);else{const I=this.input.getValue(q),c=l||new O.dI,a=w||new O.Quaternion,F=t||new O.dI,s=Math.round(1e4*I.m[3])/1e4,Z=Math.round(1e4*I.m[7])/1e4,r=Math.round(1e4*I.m[11])/1e4,x=Math.round(1e4*I.m[15])/1e4;if(0!==s||0!==Z||0!==r||1!==x)return this.isValid.setValue(!1,q),this.position.setValue(O.dI.Zero(),q),this.rotationQuaternion.setValue(O.Quaternion.Identity(),q),void this.Xc.setValue(O.dI.One(),q);const o=I.decompose(F,a,c);this.isValid.setValue(o,q),this.position.setValue(c,q),this.rotationQuaternion.setValue(a,q),this.Xc.setValue(F,q),q._setExecutionVariable(this,"cachedPosition",c),q._setExecutionVariable(this,"cachedRotation",a),q._setExecutionVariable(this,"cachedScaling",F),q._setExecutionVariable(this,"executionId",q.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,c.e)("FlowGraphMatrixDecompose",o);class d extends w.c{constructor(q){super(q),this.position=this.registerDataInput("position",t.F),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",t.w),this.Xc=this.registerDataInput("Xc",t.F),this.value=this.registerDataOutput("value",t.m)}_updateOutputs(q){const I=q._getExecutionVariable(this,"executionId",-1),l=q._getExecutionVariable(this,"cachedMatrix",null);if(I===q.executionId&&l)this.value.setValue(l,q);else{const I=O.Matrix.Compose(this.Xc.getValue(q),this.rotationQuaternion.getValue(q),this.position.getValue(q));this.value.setValue(I,q),q._setExecutionVariable(this,"cachedMatrix",I),q._setExecutionVariable(this,"executionId",q.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,c.e)("FlowGraphMatrixCompose",d)},16001:(q,I,l)=>{l.d(I,{e:()=>t});var w=l(16008);class t extends w.d{constructor(q,I,l,w,t,O){super(l,O),this._operation=w,this._className=t,this.a=this.registerDataInput("a",q),this.b=this.registerDataInput("b",I)}_doOperation(q){const I=this.a.getValue(q),l=this.b.getValue(q);return this._operation(I,l)}getClassName(){return this._className}}},16008:(q,I,l)=>{l.d(I,{d:()=>a});var w=l(14457),t=l(14441);const O="cachedOperationValue",c="cachedExecutionId";class a extends w.c{constructor(q,I){super(I),this.value=this.registerDataOutput("value",q),this.isValid=this.registerDataOutput("isValid",t.g)}_updateOutputs(q){const I=q._getExecutionVariable(this,c,-1),l=q._getExecutionVariable(this,O,null);if(void 0!==l&&null!==l&&I===q.executionId)this.isValid.setValue(!0,q),this.value.setValue(l,q);else try{const I=this._doOperation(q);if(void 0===I||null===I)return void this.isValid.setValue(!1,q);q._setExecutionVariable(this,O,I),q._setExecutionVariable(this,c,q.executionId),this.value.setValue(I,q),this.isValid.setValue(!0,q)}catch(w){this.isValid.setValue(!1,q)}}}},16010:(q,I,l)=>{l.d(I,{d:()=>t});var w=l(16008);class t extends w.d{constructor(q,I,l,w,t){super(I,t),this._operation=l,this._className=w,this.a=this.registerDataInput("a",q)}_doOperation(q){return this._operation(this.a.getValue(q))}getClassName(){return this._className}}}}]);