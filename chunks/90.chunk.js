"use strict";(self.kdlk57exiqh=self.kdlk57exiqh||[]).push([[90],{15388:(i,x,e)=>{e.r(x),e.d(x,{FlowGraphDeterminantBlock:()=>g,FlowGraphInvertMatrixBlock:()=>A,FlowGraphMatrixComposeBlock:()=>o,FlowGraphMatrixDecomposeBlock:()=>L,FlowGraphMatrixMultiplicationBlock:()=>K,FlowGraphTransposeBlock:()=>b});var j=e(13900),E=e(13874),a=e(12250),Y=e(12204),J=e(15375),u=e(15364);class b extends J.e{constructor(i){super((0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(i=>i.transpose?i.transpose():a.Matrix.Transpose(i)),"FlowGraphTransposeBlock",i)}}(0,Y.f)("FlowGraphTransposeBlock",b);class g extends J.e{constructor(i){super((0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),E.q,(i=>i.determinant()),"FlowGraphDeterminantBlock",i)}}(0,Y.f)("FlowGraphDeterminantBlock",g);class A extends J.e{constructor(i){super((0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(i=>i.inverse?i.inverse():a.Matrix.Invert(i)),"FlowGraphInvertMatrixBlock",i)}}(0,Y.f)("FlowGraphInvertMatrixBlock",A);class K extends u.d{constructor(i){super((0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),(0,E.N)((null===i||void 0===i?void 0:i.matrixType)||"Matrix"),((i,x)=>x.multiply(i)),"FlowGraphMatrixMultiplicationBlock",i)}}(0,Y.f)("FlowGraphMatrixMultiplicationBlock",K);class L extends j.e{constructor(i){super(i),this.input=this.registerDataInput("input",E.i),this.position=this.registerDataOutput("position",E.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",E.s),this.wJ=this.registerDataOutput("wJ",E.E),this.isValid=this.registerDataOutput("isValid",E.g,!1)}_updateOutputs(i){const x=i._getExecutionVariable(this,"executionId",-1),e=i._getExecutionVariable(this,"cachedPosition",null),j=i._getExecutionVariable(this,"cachedRotation",null),E=i._getExecutionVariable(this,"cachedScaling",null);if(x===i.executionId&&e&&j&&E)this.position.setValue(e,i),this.rotationQuaternion.setValue(j,i),this.wJ.setValue(E,i);else{const x=this.input.getValue(i),Y=e||new a.KJ,J=j||new a.Quaternion,u=E||new a.KJ,b=Math.round(1e4*x.m[3])/1e4,g=Math.round(1e4*x.m[7])/1e4,A=Math.round(1e4*x.m[11])/1e4,K=Math.round(1e4*x.m[15])/1e4;if(0!==b||0!==g||0!==A||1!==K)return this.isValid.setValue(!1,i),this.position.setValue(a.KJ.Zero(),i),this.rotationQuaternion.setValue(a.Quaternion.Identity(),i),void this.wJ.setValue(a.KJ.One(),i);const L=x.decompose(u,J,Y);this.isValid.setValue(L,i),this.position.setValue(Y,i),this.rotationQuaternion.setValue(J,i),this.wJ.setValue(u,i),i._setExecutionVariable(this,"cachedPosition",Y),i._setExecutionVariable(this,"cachedRotation",J),i._setExecutionVariable(this,"cachedScaling",u),i._setExecutionVariable(this,"executionId",i.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,Y.f)("FlowGraphMatrixDecompose",L);class o extends j.e{constructor(i){super(i),this.position=this.registerDataInput("position",E.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",E.s),this.wJ=this.registerDataInput("wJ",E.E),this.value=this.registerDataOutput("value",E.i)}_updateOutputs(i){const x=i._getExecutionVariable(this,"executionId",-1),e=i._getExecutionVariable(this,"cachedMatrix",null);if(x===i.executionId&&e)this.value.setValue(e,i);else{const x=a.Matrix.Compose(this.wJ.getValue(i),this.rotationQuaternion.getValue(i),this.position.getValue(i));this.value.setValue(x,i),i._setExecutionVariable(this,"cachedMatrix",x),i._setExecutionVariable(this,"executionId",i.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,Y.f)("FlowGraphMatrixCompose",o)},15364:(i,x,e)=>{e.d(x,{d:()=>E});var j=e(15373);class E extends j.c{constructor(i,x,e,j,E,a){super(e,a),this._operation=j,this._className=E,this.a=this.registerDataInput("a",i),this.b=this.registerDataInput("b",x)}_doOperation(i){const x=this.a.getValue(i),e=this.b.getValue(i);return this._operation(x,e)}getClassName(){return this._className}}},15373:(i,x,e)=>{e.d(x,{c:()=>J});var j=e(13900),E=e(13874);const a="cachedOperationValue",Y="cachedExecutionId";class J extends j.e{constructor(i,x){super(x),this.value=this.registerDataOutput("value",i),this.isValid=this.registerDataOutput("isValid",E.g)}_updateOutputs(i){const x=i._getExecutionVariable(this,Y,-1),e=i._getExecutionVariable(this,a,null);if(void 0!==e&&null!==e&&x===i.executionId)this.isValid.setValue(!0,i),this.value.setValue(e,i);else try{const x=this._doOperation(i);if(void 0===x||null===x)return void this.isValid.setValue(!1,i);i._setExecutionVariable(this,a,x),i._setExecutionVariable(this,Y,i.executionId),this.value.setValue(x,i),this.isValid.setValue(!0,i)}catch(j){this.isValid.setValue(!1,i)}}}},15375:(i,x,e)=>{e.d(x,{e:()=>E});var j=e(15373);class E extends j.c{constructor(i,x,e,j,E){super(x,E),this._operation=e,this._className=j,this.a=this.registerDataInput("a",i)}_doOperation(i){return this._operation(this.a.getValue(i))}getClassName(){return this._className}}}}]);