"use strict";(self.h6ljd275xwr=self.h6ljd275xwr||[]).push([[90],{14610:(n,y,H)=>{H.r(y),H.d(y,{FlowGraphDeterminantBlock:()=>q,FlowGraphInvertMatrixBlock:()=>b,FlowGraphMatrixComposeBlock:()=>T,FlowGraphMatrixDecomposeBlock:()=>U,FlowGraphMatrixMultiplicationBlock:()=>A,FlowGraphTransposeBlock:()=>V});var o=H(13146),G=H(13117),h=H(11288),k=H(11248),i=H(14597),B=H(14585);class V extends i.b{constructor(n){super((0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(n=>n.transpose?n.transpose():h.Matrix.Transpose(n)),"FlowGraphTransposeBlock",n)}}(0,k.h)("FlowGraphTransposeBlock",V);class q extends i.b{constructor(n){super((0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),G.p,(n=>n.determinant()),"FlowGraphDeterminantBlock",n)}}(0,k.h)("FlowGraphDeterminantBlock",q);class b extends i.b{constructor(n){super((0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(n=>n.inverse?n.inverse():h.Matrix.Invert(n)),"FlowGraphInvertMatrixBlock",n)}}(0,k.h)("FlowGraphInvertMatrixBlock",b);class A extends B.c{constructor(n){super((0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),(0,G.D)((null===n||void 0===n?void 0:n.matrixType)||"Matrix"),((n,y)=>y.multiply(n)),"FlowGraphMatrixMultiplicationBlock",n)}}(0,k.h)("FlowGraphMatrixMultiplicationBlock",A);class U extends o.c{constructor(n){super(n),this.input=this.registerDataInput("input",G.i),this.position=this.registerDataOutput("position",G.x),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",G.s),this.fi=this.registerDataOutput("fi",G.x),this.isValid=this.registerDataOutput("isValid",G.e,!1)}_updateOutputs(n){const y=n._getExecutionVariable(this,"executionId",-1),H=n._getExecutionVariable(this,"cachedPosition",null),o=n._getExecutionVariable(this,"cachedRotation",null),G=n._getExecutionVariable(this,"cachedScaling",null);if(y===n.executionId&&H&&o&&G)this.position.setValue(H,n),this.rotationQuaternion.setValue(o,n),this.fi.setValue(G,n);else{const y=this.input.getValue(n),k=H||new h.zy,i=o||new h.Quaternion,B=G||new h.zy,V=Math.round(1e4*y.m[3])/1e4,q=Math.round(1e4*y.m[7])/1e4,b=Math.round(1e4*y.m[11])/1e4,A=Math.round(1e4*y.m[15])/1e4;if(0!==V||0!==q||0!==b||1!==A)return this.isValid.setValue(!1,n),this.position.setValue(h.zy.Zero(),n),this.rotationQuaternion.setValue(h.Quaternion.Identity(),n),void this.fi.setValue(h.zy.One(),n);const U=y.decompose(B,i,k);this.isValid.setValue(U,n),this.position.setValue(k,n),this.rotationQuaternion.setValue(i,n),this.fi.setValue(B,n),n._setExecutionVariable(this,"cachedPosition",k),n._setExecutionVariable(this,"cachedRotation",i),n._setExecutionVariable(this,"cachedScaling",B),n._setExecutionVariable(this,"executionId",n.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,k.h)("FlowGraphMatrixDecompose",U);class T extends o.c{constructor(n){super(n),this.position=this.registerDataInput("position",G.x),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",G.s),this.fi=this.registerDataInput("fi",G.x),this.value=this.registerDataOutput("value",G.i)}_updateOutputs(n){const y=n._getExecutionVariable(this,"executionId",-1),H=n._getExecutionVariable(this,"cachedMatrix",null);if(y===n.executionId&&H)this.value.setValue(H,n);else{const y=h.Matrix.Compose(this.fi.getValue(n),this.rotationQuaternion.getValue(n),this.position.getValue(n));this.value.setValue(y,n),n._setExecutionVariable(this,"cachedMatrix",y),n._setExecutionVariable(this,"executionId",n.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,k.h)("FlowGraphMatrixCompose",T)},14585:(n,y,H)=>{H.d(y,{c:()=>G});var o=H(14592);class G extends o.b{constructor(n,y,H,o,G,h){super(H,h),this._operation=o,this._className=G,this.a=this.registerDataInput("a",n),this.b=this.registerDataInput("b",y)}_doOperation(n){const y=this.a.getValue(n),H=this.b.getValue(n);return this._operation(y,H)}getClassName(){return this._className}}},14592:(n,y,H)=>{H.d(y,{b:()=>i});var o=H(13146),G=H(13117);const h="cachedOperationValue",k="cachedExecutionId";class i extends o.c{constructor(n,y){super(y),this.value=this.registerDataOutput("value",n),this.isValid=this.registerDataOutput("isValid",G.e)}_updateOutputs(n){const y=n._getExecutionVariable(this,k,-1),H=n._getExecutionVariable(this,h,null);if(void 0!==H&&null!==H&&y===n.executionId)this.isValid.setValue(!0,n),this.value.setValue(H,n);else try{const y=this._doOperation(n);if(void 0===y||null===y)return void this.isValid.setValue(!1,n);n._setExecutionVariable(this,h,y),n._setExecutionVariable(this,k,n.executionId),this.value.setValue(y,n),this.isValid.setValue(!0,n)}catch(o){this.isValid.setValue(!1,n)}}}},14597:(n,y,H)=>{H.d(y,{b:()=>G});var o=H(14592);class G extends o.b{constructor(n,y,H,o,G){super(y,G),this._operation=H,this._className=o,this.a=this.registerDataInput("a",n)}_doOperation(n){return this._operation(this.a.getValue(n))}getClassName(){return this._className}}}}]);