"use strict";(self.u4k1rqylno=self.u4k1rqylno||[]).push([[90],{14911:(e,E,H)=>{H.r(E),H.d(E,{FlowGraphDeterminantBlock:()=>C,FlowGraphInvertMatrixBlock:()=>i,FlowGraphMatrixComposeBlock:()=>j,FlowGraphMatrixDecomposeBlock:()=>U,FlowGraphMatrixMultiplicationBlock:()=>V,FlowGraphTransposeBlock:()=>A});var N=H(13441),u=H(13415),z=H(11738),P=H(11690),M=H(14898),D=H(14889);class A extends M.b{constructor(e){super((0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(e=>e.transpose?e.transpose():z.Matrix.Transpose(e)),"FlowGraphTransposeBlock",e)}}(0,P.g)("FlowGraphTransposeBlock",A);class C extends M.b{constructor(e){super((0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),u.t,(e=>e.determinant()),"FlowGraphDeterminantBlock",e)}}(0,P.g)("FlowGraphDeterminantBlock",C);class i extends M.b{constructor(e){super((0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(e=>e.inverse?e.inverse():z.Matrix.Invert(e)),"FlowGraphInvertMatrixBlock",e)}}(0,P.g)("FlowGraphInvertMatrixBlock",i);class V extends D.b{constructor(e){super((0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,u.N)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),((e,E)=>E.multiply(e)),"FlowGraphMatrixMultiplicationBlock",e)}}(0,P.g)("FlowGraphMatrixMultiplicationBlock",V);class U extends N.b{constructor(e){super(e),this.input=this.registerDataInput("input",u.l),this.position=this.registerDataOutput("position",u.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",u.x),this.UM=this.registerDataOutput("UM",u.E),this.isValid=this.registerDataOutput("isValid",u.f,!1)}_updateOutputs(e){const E=e._getExecutionVariable(this,"executionId",-1),H=e._getExecutionVariable(this,"cachedPosition",null),N=e._getExecutionVariable(this,"cachedRotation",null),u=e._getExecutionVariable(this,"cachedScaling",null);if(E===e.executionId&&H&&N&&u)this.position.setValue(H,e),this.rotationQuaternion.setValue(N,e),this.UM.setValue(u,e);else{const E=this.input.getValue(e),P=H||new z.jE,M=N||new z.Quaternion,D=u||new z.jE,A=Math.round(1e4*E.m[3])/1e4,C=Math.round(1e4*E.m[7])/1e4,i=Math.round(1e4*E.m[11])/1e4,V=Math.round(1e4*E.m[15])/1e4;if(0!==A||0!==C||0!==i||1!==V)return this.isValid.setValue(!1,e),this.position.setValue(z.jE.Zero(),e),this.rotationQuaternion.setValue(z.Quaternion.Identity(),e),void this.UM.setValue(z.jE.One(),e);const U=E.decompose(D,M,P);this.isValid.setValue(U,e),this.position.setValue(P,e),this.rotationQuaternion.setValue(M,e),this.UM.setValue(D,e),e._setExecutionVariable(this,"cachedPosition",P),e._setExecutionVariable(this,"cachedRotation",M),e._setExecutionVariable(this,"cachedScaling",D),e._setExecutionVariable(this,"executionId",e.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,P.g)("FlowGraphMatrixDecompose",U);class j extends N.b{constructor(e){super(e),this.position=this.registerDataInput("position",u.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",u.x),this.UM=this.registerDataInput("UM",u.E),this.value=this.registerDataOutput("value",u.l)}_updateOutputs(e){const E=e._getExecutionVariable(this,"executionId",-1),H=e._getExecutionVariable(this,"cachedMatrix",null);if(E===e.executionId&&H)this.value.setValue(H,e);else{const E=z.Matrix.Compose(this.UM.getValue(e),this.rotationQuaternion.getValue(e),this.position.getValue(e));this.value.setValue(E,e),e._setExecutionVariable(this,"cachedMatrix",E),e._setExecutionVariable(this,"executionId",e.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,P.g)("FlowGraphMatrixCompose",j)},14889:(e,E,H)=>{H.d(E,{b:()=>u});var N=H(14894);class u extends N.c{constructor(e,E,H,N,u,z){super(H,z),this._operation=N,this._className=u,this.a=this.registerDataInput("a",e),this.b=this.registerDataInput("b",E)}_doOperation(e){const E=this.a.getValue(e),H=this.b.getValue(e);return this._operation(E,H)}getClassName(){return this._className}}},14894:(e,E,H)=>{H.d(E,{c:()=>M});var N=H(13441),u=H(13415);const z="cachedOperationValue",P="cachedExecutionId";class M extends N.b{constructor(e,E){super(E),this.value=this.registerDataOutput("value",e),this.isValid=this.registerDataOutput("isValid",u.f)}_updateOutputs(e){const E=e._getExecutionVariable(this,P,-1),H=e._getExecutionVariable(this,z,null);if(void 0!==H&&null!==H&&E===e.executionId)this.isValid.setValue(!0,e),this.value.setValue(H,e);else try{const E=this._doOperation(e);if(void 0===E||null===E)return void this.isValid.setValue(!1,e);e._setExecutionVariable(this,z,E),e._setExecutionVariable(this,P,e.executionId),this.value.setValue(E,e),this.isValid.setValue(!0,e)}catch(N){this.isValid.setValue(!1,e)}}}},14898:(e,E,H)=>{H.d(E,{b:()=>u});var N=H(14894);class u extends N.c{constructor(e,E,H,N,u){super(E,u),this._operation=H,this._className=N,this.a=this.registerDataInput("a",e)}_doOperation(e){return this._operation(this.a.getValue(e))}getClassName(){return this._className}}}}]);