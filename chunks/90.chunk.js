"use strict";(self.agop5zpabxv=self.agop5zpabxv||[]).push([[90],{15531:(H,u,J)=>{J.r(u),J.d(u,{FlowGraphDeterminantBlock:()=>d,FlowGraphInvertMatrixBlock:()=>G,FlowGraphMatrixComposeBlock:()=>l,FlowGraphMatrixDecomposeBlock:()=>mH,FlowGraphMatrixMultiplicationBlock:()=>P,FlowGraphTransposeBlock:()=>b});var O=J(14041),U=J(14018),h=J(12338),w=J(12304),g=J(15519),B=J(15506);class b extends g.c{constructor(H){super((0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(H=>H.transpose?H.transpose():h.Matrix.Transpose(H)),"FlowGraphTransposeBlock",H)}}(0,w.f)("FlowGraphTransposeBlock",b);class d extends g.c{constructor(H){super((0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),U.z,(H=>H.determinant()),"FlowGraphDeterminantBlock",H)}}(0,w.f)("FlowGraphDeterminantBlock",d);class G extends g.c{constructor(H){super((0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(H=>H.inverse?H.inverse():h.Matrix.Invert(H)),"FlowGraphInvertMatrixBlock",H)}}(0,w.f)("FlowGraphInvertMatrixBlock",G);class P extends B.b{constructor(H){super((0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),(0,U.X)((null===H||void 0===H?void 0:H.matrixType)||"Matrix"),((H,u)=>u.multiply(H)),"FlowGraphMatrixMultiplicationBlock",H)}}(0,w.f)("FlowGraphMatrixMultiplicationBlock",P);class mH extends O.b{constructor(H){super(H),this.input=this.registerDataInput("input",U.n),this.position=this.registerDataOutput("position",U.N),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",U.D),this.Cg=this.registerDataOutput("Cg",U.N),this.isValid=this.registerDataOutput("isValid",U.f,!1)}_updateOutputs(H){const u=H._getExecutionVariable(this,"executionId",-1),J=H._getExecutionVariable(this,"cachedPosition",null),O=H._getExecutionVariable(this,"cachedRotation",null),U=H._getExecutionVariable(this,"cachedScaling",null);if(u===H.executionId&&J&&O&&U)this.position.setValue(J,H),this.rotationQuaternion.setValue(O,H),this.Cg.setValue(U,H);else{const u=this.input.getValue(H),w=J||new h.lu,g=O||new h.Quaternion,B=U||new h.lu,b=Math.round(1e4*u.m[3])/1e4,d=Math.round(1e4*u.m[7])/1e4,G=Math.round(1e4*u.m[11])/1e4,P=Math.round(1e4*u.m[15])/1e4;if(0!==b||0!==d||0!==G||1!==P)return this.isValid.setValue(!1,H),this.position.setValue(h.lu.Zero(),H),this.rotationQuaternion.setValue(h.Quaternion.Identity(),H),void this.Cg.setValue(h.lu.One(),H);const mH=u.decompose(B,g,w);this.isValid.setValue(mH,H),this.position.setValue(w,H),this.rotationQuaternion.setValue(g,H),this.Cg.setValue(B,H),H._setExecutionVariable(this,"cachedPosition",w),H._setExecutionVariable(this,"cachedRotation",g),H._setExecutionVariable(this,"cachedScaling",B),H._setExecutionVariable(this,"executionId",H.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,w.f)("FlowGraphMatrixDecompose",mH);class l extends O.b{constructor(H){super(H),this.position=this.registerDataInput("position",U.N),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",U.D),this.Cg=this.registerDataInput("Cg",U.N),this.value=this.registerDataOutput("value",U.n)}_updateOutputs(H){const u=H._getExecutionVariable(this,"executionId",-1),J=H._getExecutionVariable(this,"cachedMatrix",null);if(u===H.executionId&&J)this.value.setValue(J,H);else{const u=h.Matrix.Compose(this.Cg.getValue(H),this.rotationQuaternion.getValue(H),this.position.getValue(H));this.value.setValue(u,H),H._setExecutionVariable(this,"cachedMatrix",u),H._setExecutionVariable(this,"executionId",H.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,w.f)("FlowGraphMatrixCompose",l)},15506:(H,u,J)=>{J.d(u,{b:()=>U});var O=J(15515);class U extends O.b{constructor(H,u,J,O,U,h){super(J,h),this._operation=O,this._className=U,this.a=this.registerDataInput("a",H),this.b=this.registerDataInput("b",u)}_doOperation(H){const u=this.a.getValue(H),J=this.b.getValue(H);return this._operation(u,J)}getClassName(){return this._className}}},15515:(H,u,J)=>{J.d(u,{b:()=>g});var O=J(14041),U=J(14018);const h="cachedOperationValue",w="cachedExecutionId";class g extends O.b{constructor(H,u){super(u),this.value=this.registerDataOutput("value",H),this.isValid=this.registerDataOutput("isValid",U.f)}_updateOutputs(H){const u=H._getExecutionVariable(this,w,-1),J=H._getExecutionVariable(this,h,null);if(void 0!==J&&null!==J&&u===H.executionId)this.isValid.setValue(!0,H),this.value.setValue(J,H);else try{const u=this._doOperation(H);if(void 0===u||null===u)return void this.isValid.setValue(!1,H);H._setExecutionVariable(this,h,u),H._setExecutionVariable(this,w,H.executionId),this.value.setValue(u,H),this.isValid.setValue(!0,H)}catch(O){this.isValid.setValue(!1,H)}}}},15519:(H,u,J)=>{J.d(u,{c:()=>U});var O=J(15515);class U extends O.b{constructor(H,u,J,O,U){super(u,U),this._operation=J,this._className=O,this.a=this.registerDataInput("a",H)}_doOperation(H){return this._operation(this.a.getValue(H))}getClassName(){return this._className}}}}]);