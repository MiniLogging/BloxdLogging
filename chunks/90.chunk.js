"use strict";(self["80dd64vgxnn"]=self["80dd64vgxnn"]||[]).push([[90],{15838:(mm,o,u)=>{u.r(o),u.d(o,{FlowGraphDeterminantBlock:()=>z,FlowGraphInvertMatrixBlock:()=>Y,FlowGraphMatrixComposeBlock:()=>H,FlowGraphMatrixDecomposeBlock:()=>x,FlowGraphMatrixMultiplicationBlock:()=>q,FlowGraphTransposeBlock:()=>K});var f=u(14280),B=u(14257),O=u(12740),r=u(12702),w=u(15828),p=u(15816);class K extends w.c{constructor(mm){super((0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(mm=>mm.transpose?mm.transpose():O.Matrix.Transpose(mm)),"FlowGraphTransposeBlock",mm)}}(0,r.c)("FlowGraphTransposeBlock",K);class z extends w.c{constructor(mm){super((0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),B.r,(mm=>mm.determinant()),"FlowGraphDeterminantBlock",mm)}}(0,r.c)("FlowGraphDeterminantBlock",z);class Y extends w.c{constructor(mm){super((0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(mm=>mm.inverse?mm.inverse():O.Matrix.Invert(mm)),"FlowGraphInvertMatrixBlock",mm)}}(0,r.c)("FlowGraphInvertMatrixBlock",Y);class q extends p.e{constructor(mm){super((0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),(0,B.O)((null===mm||void 0===mm?void 0:mm.matrixType)||"Matrix"),((mm,o)=>o.multiply(mm)),"FlowGraphMatrixMultiplicationBlock",mm)}}(0,r.c)("FlowGraphMatrixMultiplicationBlock",q);class x extends f.e{constructor(mm){super(mm),this.input=this.registerDataInput("input",B.l),this.position=this.registerDataOutput("position",B.D),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",B.t),this.rp=this.registerDataOutput("rp",B.D),this.isValid=this.registerDataOutput("isValid",B.f,!1)}_updateOutputs(mm){const o=mm._getExecutionVariable(this,"executionId",-1),u=mm._getExecutionVariable(this,"cachedPosition",null),f=mm._getExecutionVariable(this,"cachedRotation",null),B=mm._getExecutionVariable(this,"cachedScaling",null);if(o===mm.executionId&&u&&f&&B)this.position.setValue(u,mm),this.rotationQuaternion.setValue(f,mm),this.rp.setValue(B,mm);else{const o=this.input.getValue(mm),r=u||new O.lo,w=f||new O.Quaternion,p=B||new O.lo,K=Math.round(1e4*o.m[3])/1e4,z=Math.round(1e4*o.m[7])/1e4,Y=Math.round(1e4*o.m[11])/1e4,q=Math.round(1e4*o.m[15])/1e4;if(0!==K||0!==z||0!==Y||1!==q)return this.isValid.setValue(!1,mm),this.position.setValue(O.lo.Zero(),mm),this.rotationQuaternion.setValue(O.Quaternion.Identity(),mm),void this.rp.setValue(O.lo.One(),mm);const x=o.decompose(p,w,r);this.isValid.setValue(x,mm),this.position.setValue(r,mm),this.rotationQuaternion.setValue(w,mm),this.rp.setValue(p,mm),mm._setExecutionVariable(this,"cachedPosition",r),mm._setExecutionVariable(this,"cachedRotation",w),mm._setExecutionVariable(this,"cachedScaling",p),mm._setExecutionVariable(this,"executionId",mm.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,r.c)("FlowGraphMatrixDecompose",x);class H extends f.e{constructor(mm){super(mm),this.position=this.registerDataInput("position",B.D),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",B.t),this.rp=this.registerDataInput("rp",B.D),this.value=this.registerDataOutput("value",B.l)}_updateOutputs(mm){const o=mm._getExecutionVariable(this,"executionId",-1),u=mm._getExecutionVariable(this,"cachedMatrix",null);if(o===mm.executionId&&u)this.value.setValue(u,mm);else{const o=O.Matrix.Compose(this.rp.getValue(mm),this.rotationQuaternion.getValue(mm),this.position.getValue(mm));this.value.setValue(o,mm),mm._setExecutionVariable(this,"cachedMatrix",o),mm._setExecutionVariable(this,"executionId",mm.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,r.c)("FlowGraphMatrixCompose",H)},15816:(mm,o,u)=>{u.d(o,{e:()=>B});var f=u(15821);class B extends f.d{constructor(mm,o,u,f,B,O){super(u,O),this._operation=f,this._className=B,this.a=this.registerDataInput("a",mm),this.b=this.registerDataInput("b",o)}_doOperation(mm){const o=this.a.getValue(mm),u=this.b.getValue(mm);return this._operation(o,u)}getClassName(){return this._className}}},15821:(mm,o,u)=>{u.d(o,{d:()=>w});var f=u(14280),B=u(14257);const O="cachedOperationValue",r="cachedExecutionId";class w extends f.e{constructor(mm,o){super(o),this.value=this.registerDataOutput("value",mm),this.isValid=this.registerDataOutput("isValid",B.f)}_updateOutputs(mm){const o=mm._getExecutionVariable(this,r,-1),u=mm._getExecutionVariable(this,O,null);if(void 0!==u&&null!==u&&o===mm.executionId)this.isValid.setValue(!0,mm),this.value.setValue(u,mm);else try{const o=this._doOperation(mm);if(void 0===o||null===o)return void this.isValid.setValue(!1,mm);mm._setExecutionVariable(this,O,o),mm._setExecutionVariable(this,r,mm.executionId),this.value.setValue(o,mm),this.isValid.setValue(!0,mm)}catch(f){this.isValid.setValue(!1,mm)}}}},15828:(mm,o,u)=>{u.d(o,{c:()=>B});var f=u(15821);class B extends f.d{constructor(mm,o,u,f,B){super(o,B),this._operation=u,this._className=f,this.a=this.registerDataInput("a",mm)}_doOperation(mm){return this._operation(this.a.getValue(mm))}getClassName(){return this._className}}}}]);