"use strict";(self.zjjkhojdx1=self.zjjkhojdx1||[]).push([[90],{14417:(k,h,o)=>{o.r(h),o.d(h,{FlowGraphDeterminantBlock:()=>A,FlowGraphInvertMatrixBlock:()=>K,FlowGraphMatrixComposeBlock:()=>X,FlowGraphMatrixDecomposeBlock:()=>N,FlowGraphMatrixMultiplicationBlock:()=>a,FlowGraphTransposeBlock:()=>l});var x=o(12961),I=o(12936),q=o(11239),Y=o(11199),J=o(14412),G=o(14405);class l extends J.c{constructor(k){super((0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(k=>k.transpose?k.transpose():q.Matrix.Transpose(k)),"FlowGraphTransposeBlock",k)}}(0,Y.g)("FlowGraphTransposeBlock",l);class A extends J.c{constructor(k){super((0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),I.o,(k=>k.determinant()),"FlowGraphDeterminantBlock",k)}}(0,Y.g)("FlowGraphDeterminantBlock",A);class K extends J.c{constructor(k){super((0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(k=>k.inverse?k.inverse():q.Matrix.Invert(k)),"FlowGraphInvertMatrixBlock",k)}}(0,Y.g)("FlowGraphInvertMatrixBlock",K);class a extends G.b{constructor(k){super((0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),(0,I.D)((null===k||void 0===k?void 0:k.matrixType)||"Matrix"),((k,h)=>h.multiply(k)),"FlowGraphMatrixMultiplicationBlock",k)}}(0,Y.g)("FlowGraphMatrixMultiplicationBlock",a);class N extends x.b{constructor(k){super(k),this.input=this.registerDataInput("input",I.k),this.position=this.registerDataOutput("position",I.w),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",I.q),this.iJ=this.registerDataOutput("iJ",I.w),this.isValid=this.registerDataOutput("isValid",I.h,!1)}_updateOutputs(k){const h=k._getExecutionVariable(this,"executionId",-1),o=k._getExecutionVariable(this,"cachedPosition",null),x=k._getExecutionVariable(this,"cachedRotation",null),I=k._getExecutionVariable(this,"cachedScaling",null);if(h===k.executionId&&o&&x&&I)this.position.setValue(o,k),this.rotationQuaternion.setValue(x,k),this.iJ.setValue(I,k);else{const h=this.input.getValue(k),Y=o||new q.Vh,J=x||new q.Quaternion,G=I||new q.Vh,l=Math.round(1e4*h.m[3])/1e4,A=Math.round(1e4*h.m[7])/1e4,K=Math.round(1e4*h.m[11])/1e4,a=Math.round(1e4*h.m[15])/1e4;if(0!==l||0!==A||0!==K||1!==a)return this.isValid.setValue(!1,k),this.position.setValue(q.Vh.Zero(),k),this.rotationQuaternion.setValue(q.Quaternion.Identity(),k),void this.iJ.setValue(q.Vh.One(),k);const N=h.decompose(G,J,Y);this.isValid.setValue(N,k),this.position.setValue(Y,k),this.rotationQuaternion.setValue(J,k),this.iJ.setValue(G,k),k._setExecutionVariable(this,"cachedPosition",Y),k._setExecutionVariable(this,"cachedRotation",J),k._setExecutionVariable(this,"cachedScaling",G),k._setExecutionVariable(this,"executionId",k.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,Y.g)("FlowGraphMatrixDecompose",N);class X extends x.b{constructor(k){super(k),this.position=this.registerDataInput("position",I.w),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",I.q),this.iJ=this.registerDataInput("iJ",I.w),this.value=this.registerDataOutput("value",I.k)}_updateOutputs(k){const h=k._getExecutionVariable(this,"executionId",-1),o=k._getExecutionVariable(this,"cachedMatrix",null);if(h===k.executionId&&o)this.value.setValue(o,k);else{const h=q.Matrix.Compose(this.iJ.getValue(k),this.rotationQuaternion.getValue(k),this.position.getValue(k));this.value.setValue(h,k),k._setExecutionVariable(this,"cachedMatrix",h),k._setExecutionVariable(this,"executionId",k.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,Y.g)("FlowGraphMatrixCompose",X)},14405:(k,h,o)=>{o.d(h,{b:()=>I});var x=o(14409);class I extends x.c{constructor(k,h,o,x,I,q){super(o,q),this._operation=x,this._className=I,this.a=this.registerDataInput("a",k),this.b=this.registerDataInput("b",h)}_doOperation(k){const h=this.a.getValue(k),o=this.b.getValue(k);return this._operation(h,o)}getClassName(){return this._className}}},14409:(k,h,o)=>{o.d(h,{c:()=>J});var x=o(12961),I=o(12936);const q="cachedOperationValue",Y="cachedExecutionId";class J extends x.b{constructor(k,h){super(h),this.value=this.registerDataOutput("value",k),this.isValid=this.registerDataOutput("isValid",I.h)}_updateOutputs(k){const h=k._getExecutionVariable(this,Y,-1),o=k._getExecutionVariable(this,q,null);if(void 0!==o&&null!==o&&h===k.executionId)this.isValid.setValue(!0,k),this.value.setValue(o,k);else try{const h=this._doOperation(k);if(void 0===h||null===h)return void this.isValid.setValue(!1,k);k._setExecutionVariable(this,q,h),k._setExecutionVariable(this,Y,k.executionId),this.value.setValue(h,k),this.isValid.setValue(!0,k)}catch(x){this.isValid.setValue(!1,k)}}}},14412:(k,h,o)=>{o.d(h,{c:()=>I});var x=o(14409);class I extends x.c{constructor(k,h,o,x,I){super(h,I),this._operation=o,this._className=x,this.a=this.registerDataInput("a",k)}_doOperation(k){return this._operation(this.a.getValue(k))}getClassName(){return this._className}}}}]);