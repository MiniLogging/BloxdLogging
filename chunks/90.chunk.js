"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[90],{15689:(e,d,v)=>{v.r(d),v.d(d,{FlowGraphDeterminantBlock:()=>V,FlowGraphInvertMatrixBlock:()=>k,FlowGraphMatrixComposeBlock:()=>w,FlowGraphMatrixDecomposeBlock:()=>F,FlowGraphMatrixMultiplicationBlock:()=>g,FlowGraphTransposeBlock:()=>W});var P=v(14195),p=v(14181),L=v(12420),B=v(12381),X=v(15678),z=v(15661);class W extends X.d{constructor(e){super((0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(e=>e.transpose?e.transpose():L.Matrix.Transpose(e)),"FlowGraphTransposeBlock",e)}}(0,B.h)("FlowGraphTransposeBlock",W);class V extends X.d{constructor(e){super((0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),p.n,(e=>e.determinant()),"FlowGraphDeterminantBlock",e)}}(0,B.h)("FlowGraphDeterminantBlock",V);class k extends X.d{constructor(e){super((0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(e=>e.inverse?e.inverse():L.Matrix.Invert(e)),"FlowGraphInvertMatrixBlock",e)}}(0,B.h)("FlowGraphInvertMatrixBlock",k);class g extends z.e{constructor(e){super((0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),(0,p.F)((null===e||void 0===e?void 0:e.matrixType)||"Matrix"),((e,d)=>d.multiply(e)),"FlowGraphMatrixMultiplicationBlock",e)}}(0,B.h)("FlowGraphMatrixMultiplicationBlock",g);class F extends P.e{constructor(e){super(e),this.input=this.registerDataInput("input",p.g),this.position=this.registerDataOutput("position",p.x),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",p.p),this.tv=this.registerDataOutput("tv",p.x),this.isValid=this.registerDataOutput("isValid",p.d,!1)}_updateOutputs(e){const d=e._getExecutionVariable(this,"executionId",-1),v=e._getExecutionVariable(this,"cachedPosition",null),P=e._getExecutionVariable(this,"cachedRotation",null),p=e._getExecutionVariable(this,"cachedScaling",null);if(d===e.executionId&&v&&P&&p)this.position.setValue(v,e),this.rotationQuaternion.setValue(P,e),this.tv.setValue(p,e);else{const d=this.input.getValue(e),B=v||new L.mv,X=P||new L.Quaternion,z=p||new L.mv,W=Math.round(1e4*d.m[3])/1e4,V=Math.round(1e4*d.m[7])/1e4,k=Math.round(1e4*d.m[11])/1e4,g=Math.round(1e4*d.m[15])/1e4;if(0!==W||0!==V||0!==k||1!==g)return this.isValid.setValue(!1,e),this.position.setValue(L.mv.Zero(),e),this.rotationQuaternion.setValue(L.Quaternion.Identity(),e),void this.tv.setValue(L.mv.One(),e);const F=d.decompose(z,X,B);this.isValid.setValue(F,e),this.position.setValue(B,e),this.rotationQuaternion.setValue(X,e),this.tv.setValue(z,e),e._setExecutionVariable(this,"cachedPosition",B),e._setExecutionVariable(this,"cachedRotation",X),e._setExecutionVariable(this,"cachedScaling",z),e._setExecutionVariable(this,"executionId",e.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,B.h)("FlowGraphMatrixDecompose",F);class w extends P.e{constructor(e){super(e),this.position=this.registerDataInput("position",p.x),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",p.p),this.tv=this.registerDataInput("tv",p.x),this.value=this.registerDataOutput("value",p.g)}_updateOutputs(e){const d=e._getExecutionVariable(this,"executionId",-1),v=e._getExecutionVariable(this,"cachedMatrix",null);if(d===e.executionId&&v)this.value.setValue(v,e);else{const d=L.Matrix.Compose(this.tv.getValue(e),this.rotationQuaternion.getValue(e),this.position.getValue(e));this.value.setValue(d,e),e._setExecutionVariable(this,"cachedMatrix",d),e._setExecutionVariable(this,"executionId",e.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,B.h)("FlowGraphMatrixCompose",w)},15661:(e,d,v)=>{v.d(d,{e:()=>p});var P=v(15670);class p extends P.c{constructor(e,d,v,P,p,L){super(v,L),this._operation=P,this._className=p,this.a=this.registerDataInput("a",e),this.b=this.registerDataInput("b",d)}_doOperation(e){const d=this.a.getValue(e),v=this.b.getValue(e);return this._operation(d,v)}getClassName(){return this._className}}},15670:(e,d,v)=>{v.d(d,{c:()=>X});var P=v(14195),p=v(14181);const L="cachedOperationValue",B="cachedExecutionId";class X extends P.e{constructor(e,d){super(d),this.value=this.registerDataOutput("value",e),this.isValid=this.registerDataOutput("isValid",p.d)}_updateOutputs(e){const d=e._getExecutionVariable(this,B,-1),v=e._getExecutionVariable(this,L,null);if(void 0!==v&&null!==v&&d===e.executionId)this.isValid.setValue(!0,e),this.value.setValue(v,e);else try{const d=this._doOperation(e);if(void 0===d||null===d)return void this.isValid.setValue(!1,e);e._setExecutionVariable(this,L,d),e._setExecutionVariable(this,B,e.executionId),this.value.setValue(d,e),this.isValid.setValue(!0,e)}catch(P){this.isValid.setValue(!1,e)}}}},15678:(e,d,v)=>{v.d(d,{d:()=>p});var P=v(15670);class p extends P.c{constructor(e,d,v,P,p){super(d,p),this._operation=v,this._className=P,this.a=this.registerDataInput("a",e)}_doOperation(e){return this._operation(this.a.getValue(e))}getClassName(){return this._className}}}}]);