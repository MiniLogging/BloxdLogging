"use strict";(self.gpkvekif0vo=self.gpkvekif0vo||[]).push([[90],{15645:(a,O,i)=>{i.r(O),i.d(O,{FlowGraphDeterminantBlock:()=>P,FlowGraphInvertMatrixBlock:()=>e,FlowGraphMatrixComposeBlock:()=>Z,FlowGraphMatrixDecomposeBlock:()=>j,FlowGraphMatrixMultiplicationBlock:()=>h,FlowGraphTransposeBlock:()=>I});var H=i(14139),b=i(14124),G=i(12395),q=i(12346),Q=i(15635),k=i(15628);class I extends Q.c{constructor(a){super((0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(a=>a.transpose?a.transpose():G.Matrix.Transpose(a)),"FlowGraphTransposeBlock",a)}}(0,q.h)("FlowGraphTransposeBlock",I);class P extends Q.c{constructor(a){super((0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),b.t,(a=>a.determinant()),"FlowGraphDeterminantBlock",a)}}(0,q.h)("FlowGraphDeterminantBlock",P);class e extends Q.c{constructor(a){super((0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(a=>a.inverse?a.inverse():G.Matrix.Invert(a)),"FlowGraphInvertMatrixBlock",a)}}(0,q.h)("FlowGraphInvertMatrixBlock",e);class h extends k.e{constructor(a){super((0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),(0,b.T)((null===a||void 0===a?void 0:a.matrixType)||"Matrix"),((a,O)=>O.multiply(a)),"FlowGraphMatrixMultiplicationBlock",a)}}(0,q.h)("FlowGraphMatrixMultiplicationBlock",h);class j extends H.c{constructor(a){super(a),this.input=this.registerDataInput("input",b.p),this.position=this.registerDataOutput("position",b.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",b.v),this.Bb=this.registerDataOutput("Bb",b.E),this.isValid=this.registerDataOutput("isValid",b.h,!1)}_updateOutputs(a){const O=a._getExecutionVariable(this,"executionId",-1),i=a._getExecutionVariable(this,"cachedPosition",null),H=a._getExecutionVariable(this,"cachedRotation",null),b=a._getExecutionVariable(this,"cachedScaling",null);if(O===a.executionId&&i&&H&&b)this.position.setValue(i,a),this.rotationQuaternion.setValue(H,a),this.Bb.setValue(b,a);else{const O=this.input.getValue(a),q=i||new G.ZO,Q=H||new G.Quaternion,k=b||new G.ZO,I=Math.round(1e4*O.m[3])/1e4,P=Math.round(1e4*O.m[7])/1e4,e=Math.round(1e4*O.m[11])/1e4,h=Math.round(1e4*O.m[15])/1e4;if(0!==I||0!==P||0!==e||1!==h)return this.isValid.setValue(!1,a),this.position.setValue(G.ZO.Zero(),a),this.rotationQuaternion.setValue(G.Quaternion.Identity(),a),void this.Bb.setValue(G.ZO.One(),a);const j=O.decompose(k,Q,q);this.isValid.setValue(j,a),this.position.setValue(q,a),this.rotationQuaternion.setValue(Q,a),this.Bb.setValue(k,a),a._setExecutionVariable(this,"cachedPosition",q),a._setExecutionVariable(this,"cachedRotation",Q),a._setExecutionVariable(this,"cachedScaling",k),a._setExecutionVariable(this,"executionId",a.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,q.h)("FlowGraphMatrixDecompose",j);class Z extends H.c{constructor(a){super(a),this.position=this.registerDataInput("position",b.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",b.v),this.Bb=this.registerDataInput("Bb",b.E),this.value=this.registerDataOutput("value",b.p)}_updateOutputs(a){const O=a._getExecutionVariable(this,"executionId",-1),i=a._getExecutionVariable(this,"cachedMatrix",null);if(O===a.executionId&&i)this.value.setValue(i,a);else{const O=G.Matrix.Compose(this.Bb.getValue(a),this.rotationQuaternion.getValue(a),this.position.getValue(a));this.value.setValue(O,a),a._setExecutionVariable(this,"cachedMatrix",O),a._setExecutionVariable(this,"executionId",a.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,q.h)("FlowGraphMatrixCompose",Z)},15628:(a,O,i)=>{i.d(O,{e:()=>b});var H=i(15631);class b extends H.b{constructor(a,O,i,H,b,G){super(i,G),this._operation=H,this._className=b,this.a=this.registerDataInput("a",a),this.b=this.registerDataInput("b",O)}_doOperation(a){const O=this.a.getValue(a),i=this.b.getValue(a);return this._operation(O,i)}getClassName(){return this._className}}},15631:(a,O,i)=>{i.d(O,{b:()=>Q});var H=i(14139),b=i(14124);const G="cachedOperationValue",q="cachedExecutionId";class Q extends H.c{constructor(a,O){super(O),this.value=this.registerDataOutput("value",a),this.isValid=this.registerDataOutput("isValid",b.h)}_updateOutputs(a){const O=a._getExecutionVariable(this,q,-1),i=a._getExecutionVariable(this,G,null);if(void 0!==i&&null!==i&&O===a.executionId)this.isValid.setValue(!0,a),this.value.setValue(i,a);else try{const O=this._doOperation(a);if(void 0===O||null===O)return void this.isValid.setValue(!1,a);a._setExecutionVariable(this,G,O),a._setExecutionVariable(this,q,a.executionId),this.value.setValue(O,a),this.isValid.setValue(!0,a)}catch(H){this.isValid.setValue(!1,a)}}}},15635:(a,O,i)=>{i.d(O,{c:()=>b});var H=i(15631);class b extends H.b{constructor(a,O,i,H,b){super(O,b),this._operation=i,this._className=H,this.a=this.registerDataInput("a",a)}_doOperation(a){return this._operation(this.a.getValue(a))}getClassName(){return this._className}}}}]);