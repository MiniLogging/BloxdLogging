"use strict";(self.jr1pmf6bwuf=self.jr1pmf6bwuf||[]).push([[90],{16211:(Y,c,h)=>{h.r(c),h.d(c,{FlowGraphDeterminantBlock:()=>W,FlowGraphInvertMatrixBlock:()=>q,FlowGraphMatrixComposeBlock:()=>p,FlowGraphMatrixDecomposeBlock:()=>M,FlowGraphMatrixMultiplicationBlock:()=>k,FlowGraphTransposeBlock:()=>w});var C=h(14482),E=h(14459),N=h(12869),Q=h(12825),b=h(16204),H=h(16197);class w extends b.e{constructor(Y){super((0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(Y=>Y.transpose?Y.transpose():N.Matrix.Transpose(Y)),"FlowGraphTransposeBlock",Y)}}(0,Q.e)("FlowGraphTransposeBlock",w);class W extends b.e{constructor(Y){super((0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),E.n,(Y=>Y.determinant()),"FlowGraphDeterminantBlock",Y)}}(0,Q.e)("FlowGraphDeterminantBlock",W);class q extends b.e{constructor(Y){super((0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(Y=>Y.inverse?Y.inverse():N.Matrix.Invert(Y)),"FlowGraphInvertMatrixBlock",Y)}}(0,Q.e)("FlowGraphInvertMatrixBlock",q);class k extends H.c{constructor(Y){super((0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),(0,E.H)((null===Y||void 0===Y?void 0:Y.matrixType)||"Matrix"),((Y,c)=>c.multiply(Y)),"FlowGraphMatrixMultiplicationBlock",Y)}}(0,Q.e)("FlowGraphMatrixMultiplicationBlock",k);class M extends C.b{constructor(Y){super(Y),this.input=this.registerDataInput("input",E.i),this.position=this.registerDataOutput("position",E.x),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",E.r),this.lc=this.registerDataOutput("lc",E.x),this.isValid=this.registerDataOutput("isValid",E.d,!1)}_updateOutputs(Y){const c=Y._getExecutionVariable(this,"executionId",-1),h=Y._getExecutionVariable(this,"cachedPosition",null),C=Y._getExecutionVariable(this,"cachedRotation",null),E=Y._getExecutionVariable(this,"cachedScaling",null);if(c===Y.executionId&&h&&C&&E)this.position.setValue(h,Y),this.rotationQuaternion.setValue(C,Y),this.lc.setValue(E,Y);else{const c=this.input.getValue(Y),Q=h||new N.bh,b=C||new N.Quaternion,H=E||new N.bh,w=Math.round(1e4*c.m[3])/1e4,W=Math.round(1e4*c.m[7])/1e4,q=Math.round(1e4*c.m[11])/1e4,k=Math.round(1e4*c.m[15])/1e4;if(0!==w||0!==W||0!==q||1!==k)return this.isValid.setValue(!1,Y),this.position.setValue(N.bh.Zero(),Y),this.rotationQuaternion.setValue(N.Quaternion.Identity(),Y),void this.lc.setValue(N.bh.One(),Y);const M=c.decompose(H,b,Q);this.isValid.setValue(M,Y),this.position.setValue(Q,Y),this.rotationQuaternion.setValue(b,Y),this.lc.setValue(H,Y),Y._setExecutionVariable(this,"cachedPosition",Q),Y._setExecutionVariable(this,"cachedRotation",b),Y._setExecutionVariable(this,"cachedScaling",H),Y._setExecutionVariable(this,"executionId",Y.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,Q.e)("FlowGraphMatrixDecompose",M);class p extends C.b{constructor(Y){super(Y),this.position=this.registerDataInput("position",E.x),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",E.r),this.lc=this.registerDataInput("lc",E.x),this.value=this.registerDataOutput("value",E.i)}_updateOutputs(Y){const c=Y._getExecutionVariable(this,"executionId",-1),h=Y._getExecutionVariable(this,"cachedMatrix",null);if(c===Y.executionId&&h)this.value.setValue(h,Y);else{const c=N.Matrix.Compose(this.lc.getValue(Y),this.rotationQuaternion.getValue(Y),this.position.getValue(Y));this.value.setValue(c,Y),Y._setExecutionVariable(this,"cachedMatrix",c),Y._setExecutionVariable(this,"executionId",Y.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,Q.e)("FlowGraphMatrixCompose",p)},16197:(Y,c,h)=>{h.d(c,{c:()=>E});var C=h(16201);class E extends C.d{constructor(Y,c,h,C,E,N){super(h,N),this._operation=C,this._className=E,this.a=this.registerDataInput("a",Y),this.b=this.registerDataInput("b",c)}_doOperation(Y){const c=this.a.getValue(Y),h=this.b.getValue(Y);return this._operation(c,h)}getClassName(){return this._className}}},16201:(Y,c,h)=>{h.d(c,{d:()=>b});var C=h(14482),E=h(14459);const N="cachedOperationValue",Q="cachedExecutionId";class b extends C.b{constructor(Y,c){super(c),this.value=this.registerDataOutput("value",Y),this.isValid=this.registerDataOutput("isValid",E.d)}_updateOutputs(Y){const c=Y._getExecutionVariable(this,Q,-1),h=Y._getExecutionVariable(this,N,null);if(void 0!==h&&null!==h&&c===Y.executionId)this.isValid.setValue(!0,Y),this.value.setValue(h,Y);else try{const c=this._doOperation(Y);if(void 0===c||null===c)return void this.isValid.setValue(!1,Y);Y._setExecutionVariable(this,N,c),Y._setExecutionVariable(this,Q,Y.executionId),this.value.setValue(c,Y),this.isValid.setValue(!0,Y)}catch(C){this.isValid.setValue(!1,Y)}}}},16204:(Y,c,h)=>{h.d(c,{e:()=>E});var C=h(16201);class E extends C.d{constructor(Y,c,h,C,E){super(c,E),this._operation=h,this._className=C,this.a=this.registerDataInput("a",Y)}_doOperation(Y){return this._operation(this.a.getValue(Y))}getClassName(){return this._className}}}}]);