"use strict";(self["3nlrbof8msu"]=self["3nlrbof8msu"]||[]).push([[90],{15974:(t,b,Z)=>{Z.r(b),Z.d(b,{FlowGraphDeterminantBlock:()=>g,FlowGraphInvertMatrixBlock:()=>I,FlowGraphMatrixComposeBlock:()=>T,FlowGraphMatrixDecomposeBlock:()=>M,FlowGraphMatrixMultiplicationBlock:()=>r,FlowGraphTransposeBlock:()=>Y});var J=Z(14432),S=Z(14405),P=Z(12735),v=Z(12688),h=Z(15962),C=Z(15952);class Y extends h.c{constructor(t){super((0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(t=>t.transpose?t.transpose():P.Matrix.Transpose(t)),"FlowGraphTransposeBlock",t)}}(0,v.f)("FlowGraphTransposeBlock",Y);class g extends h.c{constructor(t){super((0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),S.q,(t=>t.determinant()),"FlowGraphDeterminantBlock",t)}}(0,v.f)("FlowGraphDeterminantBlock",g);class I extends h.c{constructor(t){super((0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(t=>t.inverse?t.inverse():P.Matrix.Invert(t)),"FlowGraphInvertMatrixBlock",t)}}(0,v.f)("FlowGraphInvertMatrixBlock",I);class r extends C.d{constructor(t){super((0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),(0,S.O)((null===t||void 0===t?void 0:t.matrixType)||"Matrix"),((t,b)=>b.multiply(t)),"FlowGraphMatrixMultiplicationBlock",t)}}(0,v.f)("FlowGraphMatrixMultiplicationBlock",r);class M extends J.e{constructor(t){super(t),this.input=this.registerDataInput("input",S.k),this.position=this.registerDataOutput("position",S.D),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",S.u),this.Kb=this.registerDataOutput("Kb",S.D),this.isValid=this.registerDataOutput("isValid",S.f,!1)}_updateOutputs(t){const b=t._getExecutionVariable(this,"executionId",-1),Z=t._getExecutionVariable(this,"cachedPosition",null),J=t._getExecutionVariable(this,"cachedRotation",null),S=t._getExecutionVariable(this,"cachedScaling",null);if(b===t.executionId&&Z&&J&&S)this.position.setValue(Z,t),this.rotationQuaternion.setValue(J,t),this.Kb.setValue(S,t);else{const b=this.input.getValue(t),v=Z||new P.JZ,h=J||new P.Quaternion,C=S||new P.JZ,Y=Math.round(1e4*b.m[3])/1e4,g=Math.round(1e4*b.m[7])/1e4,I=Math.round(1e4*b.m[11])/1e4,r=Math.round(1e4*b.m[15])/1e4;if(0!==Y||0!==g||0!==I||1!==r)return this.isValid.setValue(!1,t),this.position.setValue(P.JZ.Zero(),t),this.rotationQuaternion.setValue(P.Quaternion.Identity(),t),void this.Kb.setValue(P.JZ.One(),t);const M=b.decompose(C,h,v);this.isValid.setValue(M,t),this.position.setValue(v,t),this.rotationQuaternion.setValue(h,t),this.Kb.setValue(C,t),t._setExecutionVariable(this,"cachedPosition",v),t._setExecutionVariable(this,"cachedRotation",h),t._setExecutionVariable(this,"cachedScaling",C),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,v.f)("FlowGraphMatrixDecompose",M);class T extends J.e{constructor(t){super(t),this.position=this.registerDataInput("position",S.D),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",S.u),this.Kb=this.registerDataInput("Kb",S.D),this.value=this.registerDataOutput("value",S.k)}_updateOutputs(t){const b=t._getExecutionVariable(this,"executionId",-1),Z=t._getExecutionVariable(this,"cachedMatrix",null);if(b===t.executionId&&Z)this.value.setValue(Z,t);else{const b=P.Matrix.Compose(this.Kb.getValue(t),this.rotationQuaternion.getValue(t),this.position.getValue(t));this.value.setValue(b,t),t._setExecutionVariable(this,"cachedMatrix",b),t._setExecutionVariable(this,"executionId",t.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,v.f)("FlowGraphMatrixCompose",T)},15952:(t,b,Z)=>{Z.d(b,{d:()=>S});var J=Z(15959);class S extends J.d{constructor(t,b,Z,J,S,P){super(Z,P),this._operation=J,this._className=S,this.a=this.registerDataInput("a",t),this.b=this.registerDataInput("b",b)}_doOperation(t){const b=this.a.getValue(t),Z=this.b.getValue(t);return this._operation(b,Z)}getClassName(){return this._className}}},15959:(t,b,Z)=>{Z.d(b,{d:()=>h});var J=Z(14432),S=Z(14405);const P="cachedOperationValue",v="cachedExecutionId";class h extends J.e{constructor(t,b){super(b),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",S.f)}_updateOutputs(t){const b=t._getExecutionVariable(this,v,-1),Z=t._getExecutionVariable(this,P,null);if(void 0!==Z&&null!==Z&&b===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(Z,t);else try{const b=this._doOperation(t);if(void 0===b||null===b)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,P,b),t._setExecutionVariable(this,v,t.executionId),this.value.setValue(b,t),this.isValid.setValue(!0,t)}catch(J){this.isValid.setValue(!1,t)}}}},15962:(t,b,Z)=>{Z.d(b,{c:()=>S});var J=Z(15959);class S extends J.d{constructor(t,b,Z,J,S){super(b,S),this._operation=Z,this._className=J,this.a=this.registerDataInput("a",t)}_doOperation(t){return this._operation(this.a.getValue(t))}getClassName(){return this._className}}}}]);