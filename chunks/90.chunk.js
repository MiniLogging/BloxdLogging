"use strict";(self.ipz2em9uj1g=self.ipz2em9uj1g||[]).push([[90],{15887:(r,O,W)=>{W.r(O),W.d(O,{FlowGraphDeterminantBlock:()=>d,FlowGraphInvertMatrixBlock:()=>v,FlowGraphMatrixComposeBlock:()=>U,FlowGraphMatrixDecomposeBlock:()=>K,FlowGraphMatrixMultiplicationBlock:()=>g,FlowGraphTransposeBlock:()=>mr});var q=W(14297),Q=W(14274),C=W(12591),T=W(12560),h=W(15878),J=W(15870);class mr extends h.c{constructor(r){super((0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(r=>r.transpose?r.transpose():C.Matrix.Transpose(r)),"FlowGraphTransposeBlock",r)}}(0,T.e)("FlowGraphTransposeBlock",mr);class d extends h.c{constructor(r){super((0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),Q.r,(r=>r.determinant()),"FlowGraphDeterminantBlock",r)}}(0,T.e)("FlowGraphDeterminantBlock",d);class v extends h.c{constructor(r){super((0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(r=>r.inverse?r.inverse():C.Matrix.Invert(r)),"FlowGraphInvertMatrixBlock",r)}}(0,T.e)("FlowGraphInvertMatrixBlock",v);class g extends J.c{constructor(r){super((0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),(0,Q.K)((null===r||void 0===r?void 0:r.matrixType)||"Matrix"),((r,O)=>O.multiply(r)),"FlowGraphMatrixMultiplicationBlock",r)}}(0,T.e)("FlowGraphMatrixMultiplicationBlock",g);class K extends q.d{constructor(r){super(r),this.input=this.registerDataInput("input",Q.i),this.position=this.registerDataOutput("position",Q.z),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",Q.u),this.Lh=this.registerDataOutput("Lh",Q.z),this.isValid=this.registerDataOutput("isValid",Q.d,!1)}_updateOutputs(r){const O=r._getExecutionVariable(this,"executionId",-1),W=r._getExecutionVariable(this,"cachedPosition",null),q=r._getExecutionVariable(this,"cachedRotation",null),Q=r._getExecutionVariable(this,"cachedScaling",null);if(O===r.executionId&&W&&q&&Q)this.position.setValue(W,r),this.rotationQuaternion.setValue(q,r),this.Lh.setValue(Q,r);else{const O=this.input.getValue(r),T=W||new C.eO,h=q||new C.Quaternion,J=Q||new C.eO,mr=Math.round(1e4*O.m[3])/1e4,d=Math.round(1e4*O.m[7])/1e4,v=Math.round(1e4*O.m[11])/1e4,g=Math.round(1e4*O.m[15])/1e4;if(0!==mr||0!==d||0!==v||1!==g)return this.isValid.setValue(!1,r),this.position.setValue(C.eO.Zero(),r),this.rotationQuaternion.setValue(C.Quaternion.Identity(),r),void this.Lh.setValue(C.eO.One(),r);const K=O.decompose(J,h,T);this.isValid.setValue(K,r),this.position.setValue(T,r),this.rotationQuaternion.setValue(h,r),this.Lh.setValue(J,r),r._setExecutionVariable(this,"cachedPosition",T),r._setExecutionVariable(this,"cachedRotation",h),r._setExecutionVariable(this,"cachedScaling",J),r._setExecutionVariable(this,"executionId",r.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,T.e)("FlowGraphMatrixDecompose",K);class U extends q.d{constructor(r){super(r),this.position=this.registerDataInput("position",Q.z),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",Q.u),this.Lh=this.registerDataInput("Lh",Q.z),this.value=this.registerDataOutput("value",Q.i)}_updateOutputs(r){const O=r._getExecutionVariable(this,"executionId",-1),W=r._getExecutionVariable(this,"cachedMatrix",null);if(O===r.executionId&&W)this.value.setValue(W,r);else{const O=C.Matrix.Compose(this.Lh.getValue(r),this.rotationQuaternion.getValue(r),this.position.getValue(r));this.value.setValue(O,r),r._setExecutionVariable(this,"cachedMatrix",O),r._setExecutionVariable(this,"executionId",r.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,T.e)("FlowGraphMatrixCompose",U)},15870:(r,O,W)=>{W.d(O,{c:()=>Q});var q=W(15876);class Q extends q.c{constructor(r,O,W,q,Q,C){super(W,C),this._operation=q,this._className=Q,this.a=this.registerDataInput("a",r),this.b=this.registerDataInput("b",O)}_doOperation(r){const O=this.a.getValue(r),W=this.b.getValue(r);return this._operation(O,W)}getClassName(){return this._className}}},15876:(r,O,W)=>{W.d(O,{c:()=>h});var q=W(14297),Q=W(14274);const C="cachedOperationValue",T="cachedExecutionId";class h extends q.d{constructor(r,O){super(O),this.value=this.registerDataOutput("value",r),this.isValid=this.registerDataOutput("isValid",Q.d)}_updateOutputs(r){const O=r._getExecutionVariable(this,T,-1),W=r._getExecutionVariable(this,C,null);if(void 0!==W&&null!==W&&O===r.executionId)this.isValid.setValue(!0,r),this.value.setValue(W,r);else try{const O=this._doOperation(r);if(void 0===O||null===O)return void this.isValid.setValue(!1,r);r._setExecutionVariable(this,C,O),r._setExecutionVariable(this,T,r.executionId),this.value.setValue(O,r),this.isValid.setValue(!0,r)}catch(q){this.isValid.setValue(!1,r)}}}},15878:(r,O,W)=>{W.d(O,{c:()=>Q});var q=W(15876);class Q extends q.c{constructor(r,O,W,q,Q){super(O,Q),this._operation=W,this._className=q,this.a=this.registerDataInput("a",r)}_doOperation(r){return this._operation(this.a.getValue(r))}getClassName(){return this._className}}}}]);