"use strict";(self.bjbkv7h3qsd=self.bjbkv7h3qsd||[]).push([[90],{14481:(G,A,j)=>{j.r(A),j.d(A,{FlowGraphDeterminantBlock:()=>h,FlowGraphInvertMatrixBlock:()=>H,FlowGraphMatrixComposeBlock:()=>U,FlowGraphMatrixDecomposeBlock:()=>R,FlowGraphMatrixMultiplicationBlock:()=>F,FlowGraphTransposeBlock:()=>d});var u=j(12905),k=j(12880),B=j(11218),x=j(11181),s=j(14471),O=j(14459);class d extends s.b{constructor(G){super((0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(G=>G.transpose?G.transpose():B.Matrix.Transpose(G)),"FlowGraphTransposeBlock",G)}}(0,x.h)("FlowGraphTransposeBlock",d);class h extends s.b{constructor(G){super((0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),k.s,(G=>G.determinant()),"FlowGraphDeterminantBlock",G)}}(0,x.h)("FlowGraphDeterminantBlock",h);class H extends s.b{constructor(G){super((0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(G=>G.inverse?G.inverse():B.Matrix.Invert(G)),"FlowGraphInvertMatrixBlock",G)}}(0,x.h)("FlowGraphInvertMatrixBlock",H);class F extends O.c{constructor(G){super((0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),(0,k.L)((null===G||void 0===G?void 0:G.matrixType)||"Matrix"),((G,A)=>A.multiply(G)),"FlowGraphMatrixMultiplicationBlock",G)}}(0,x.h)("FlowGraphMatrixMultiplicationBlock",F);class R extends u.c{constructor(G){super(G),this.input=this.registerDataInput("input",k.j),this.position=this.registerDataOutput("position",k.C),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",k.u),this.ns=this.registerDataOutput("ns",k.C),this.isValid=this.registerDataOutput("isValid",k.e,!1)}_updateOutputs(G){const A=G._getExecutionVariable(this,"executionId",-1),j=G._getExecutionVariable(this,"cachedPosition",null),u=G._getExecutionVariable(this,"cachedRotation",null),k=G._getExecutionVariable(this,"cachedScaling",null);if(A===G.executionId&&j&&u&&k)this.position.setValue(j,G),this.rotationQuaternion.setValue(u,G),this.ns.setValue(k,G);else{const A=this.input.getValue(G),x=j||new B.SA,s=u||new B.Quaternion,O=k||new B.SA,d=Math.round(1e4*A.m[3])/1e4,h=Math.round(1e4*A.m[7])/1e4,H=Math.round(1e4*A.m[11])/1e4,F=Math.round(1e4*A.m[15])/1e4;if(0!==d||0!==h||0!==H||1!==F)return this.isValid.setValue(!1,G),this.position.setValue(B.SA.Zero(),G),this.rotationQuaternion.setValue(B.Quaternion.Identity(),G),void this.ns.setValue(B.SA.One(),G);const R=A.decompose(O,s,x);this.isValid.setValue(R,G),this.position.setValue(x,G),this.rotationQuaternion.setValue(s,G),this.ns.setValue(O,G),G._setExecutionVariable(this,"cachedPosition",x),G._setExecutionVariable(this,"cachedRotation",s),G._setExecutionVariable(this,"cachedScaling",O),G._setExecutionVariable(this,"executionId",G.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,x.h)("FlowGraphMatrixDecompose",R);class U extends u.c{constructor(G){super(G),this.position=this.registerDataInput("position",k.C),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",k.u),this.ns=this.registerDataInput("ns",k.C),this.value=this.registerDataOutput("value",k.j)}_updateOutputs(G){const A=G._getExecutionVariable(this,"executionId",-1),j=G._getExecutionVariable(this,"cachedMatrix",null);if(A===G.executionId&&j)this.value.setValue(j,G);else{const A=B.Matrix.Compose(this.ns.getValue(G),this.rotationQuaternion.getValue(G),this.position.getValue(G));this.value.setValue(A,G),G._setExecutionVariable(this,"cachedMatrix",A),G._setExecutionVariable(this,"executionId",G.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,x.h)("FlowGraphMatrixCompose",U)},14459:(G,A,j)=>{j.d(A,{c:()=>k});var u=j(14465);class k extends u.c{constructor(G,A,j,u,k,B){super(j,B),this._operation=u,this._className=k,this.a=this.registerDataInput("a",G),this.b=this.registerDataInput("b",A)}_doOperation(G){const A=this.a.getValue(G),j=this.b.getValue(G);return this._operation(A,j)}getClassName(){return this._className}}},14465:(G,A,j)=>{j.d(A,{c:()=>s});var u=j(12905),k=j(12880);const B="cachedOperationValue",x="cachedExecutionId";class s extends u.c{constructor(G,A){super(A),this.value=this.registerDataOutput("value",G),this.isValid=this.registerDataOutput("isValid",k.e)}_updateOutputs(G){const A=G._getExecutionVariable(this,x,-1),j=G._getExecutionVariable(this,B,null);if(void 0!==j&&null!==j&&A===G.executionId)this.isValid.setValue(!0,G),this.value.setValue(j,G);else try{const A=this._doOperation(G);if(void 0===A||null===A)return void this.isValid.setValue(!1,G);G._setExecutionVariable(this,B,A),G._setExecutionVariable(this,x,G.executionId),this.value.setValue(A,G),this.isValid.setValue(!0,G)}catch(u){this.isValid.setValue(!1,G)}}}},14471:(G,A,j)=>{j.d(A,{b:()=>k});var u=j(14465);class k extends u.c{constructor(G,A,j,u,k){super(A,k),this._operation=j,this._className=u,this.a=this.registerDataInput("a",G)}_doOperation(G){return this._operation(this.a.getValue(G))}getClassName(){return this._className}}}}]);