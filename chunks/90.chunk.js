"use strict";(self["686i8587bmi"]=self["686i8587bmi"]||[]).push([[90],{16079:(h,d,T)=>{T.r(d),T.d(d,{FlowGraphDeterminantBlock:()=>Z,FlowGraphInvertMatrixBlock:()=>S,FlowGraphMatrixComposeBlock:()=>O,FlowGraphMatrixDecomposeBlock:()=>c,FlowGraphMatrixMultiplicationBlock:()=>r,FlowGraphTransposeBlock:()=>U});var Y=T(14548),y=T(14528),C=T(12765),n=T(12714),X=T(16069),F=T(16060);class U extends X.c{constructor(h){super((0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.transpose?h.transpose():C.Matrix.Transpose(h)),"FlowGraphTransposeBlock",h)}}(0,n.e)("FlowGraphTransposeBlock",U);class Z extends X.c{constructor(h){super((0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),y.s,(h=>h.determinant()),"FlowGraphDeterminantBlock",h)}}(0,n.e)("FlowGraphDeterminantBlock",Z);class S extends X.c{constructor(h){super((0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.inverse?h.inverse():C.Matrix.Invert(h)),"FlowGraphInvertMatrixBlock",h)}}(0,n.e)("FlowGraphInvertMatrixBlock",S);class r extends F.e{constructor(h){super((0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,y.K)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),((h,d)=>d.multiply(h)),"FlowGraphMatrixMultiplicationBlock",h)}}(0,n.e)("FlowGraphMatrixMultiplicationBlock",r);class c extends Y.e{constructor(h){super(h),this.input=this.registerDataInput("input",y.l),this.position=this.registerDataOutput("position",y.A),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",y.t),this.py=this.registerDataOutput("py",y.A),this.isValid=this.registerDataOutput("isValid",y.e,!1)}_updateOutputs(h){const d=h._getExecutionVariable(this,"executionId",-1),T=h._getExecutionVariable(this,"cachedPosition",null),Y=h._getExecutionVariable(this,"cachedRotation",null),y=h._getExecutionVariable(this,"cachedScaling",null);if(d===h.executionId&&T&&Y&&y)this.position.setValue(T,h),this.rotationQuaternion.setValue(Y,h),this.py.setValue(y,h);else{const d=this.input.getValue(h),n=T||new C.pd,X=Y||new C.Quaternion,F=y||new C.pd,U=Math.round(1e4*d.m[3])/1e4,Z=Math.round(1e4*d.m[7])/1e4,S=Math.round(1e4*d.m[11])/1e4,r=Math.round(1e4*d.m[15])/1e4;if(0!==U||0!==Z||0!==S||1!==r)return this.isValid.setValue(!1,h),this.position.setValue(C.pd.Zero(),h),this.rotationQuaternion.setValue(C.Quaternion.Identity(),h),void this.py.setValue(C.pd.One(),h);const c=d.decompose(F,X,n);this.isValid.setValue(c,h),this.position.setValue(n,h),this.rotationQuaternion.setValue(X,h),this.py.setValue(F,h),h._setExecutionVariable(this,"cachedPosition",n),h._setExecutionVariable(this,"cachedRotation",X),h._setExecutionVariable(this,"cachedScaling",F),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,n.e)("FlowGraphMatrixDecompose",c);class O extends Y.e{constructor(h){super(h),this.position=this.registerDataInput("position",y.A),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",y.t),this.py=this.registerDataInput("py",y.A),this.value=this.registerDataOutput("value",y.l)}_updateOutputs(h){const d=h._getExecutionVariable(this,"executionId",-1),T=h._getExecutionVariable(this,"cachedMatrix",null);if(d===h.executionId&&T)this.value.setValue(T,h);else{const d=C.Matrix.Compose(this.py.getValue(h),this.rotationQuaternion.getValue(h),this.position.getValue(h));this.value.setValue(d,h),h._setExecutionVariable(this,"cachedMatrix",d),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,n.e)("FlowGraphMatrixCompose",O)},16060:(h,d,T)=>{T.d(d,{e:()=>y});var Y=T(16064);class y extends Y.c{constructor(h,d,T,Y,y,C){super(T,C),this._operation=Y,this._className=y,this.a=this.registerDataInput("a",h),this.b=this.registerDataInput("b",d)}_doOperation(h){const d=this.a.getValue(h),T=this.b.getValue(h);return this._operation(d,T)}getClassName(){return this._className}}},16064:(h,d,T)=>{T.d(d,{c:()=>X});var Y=T(14548),y=T(14528);const C="cachedOperationValue",n="cachedExecutionId";class X extends Y.e{constructor(h,d){super(d),this.value=this.registerDataOutput("value",h),this.isValid=this.registerDataOutput("isValid",y.e)}_updateOutputs(h){const d=h._getExecutionVariable(this,n,-1),T=h._getExecutionVariable(this,C,null);if(void 0!==T&&null!==T&&d===h.executionId)this.isValid.setValue(!0,h),this.value.setValue(T,h);else try{const d=this._doOperation(h);if(void 0===d||null===d)return void this.isValid.setValue(!1,h);h._setExecutionVariable(this,C,d),h._setExecutionVariable(this,n,h.executionId),this.value.setValue(d,h),this.isValid.setValue(!0,h)}catch(Y){this.isValid.setValue(!1,h)}}}},16069:(h,d,T)=>{T.d(d,{c:()=>y});var Y=T(16064);class y extends Y.c{constructor(h,d,T,Y,y){super(d,y),this._operation=T,this._className=Y,this.a=this.registerDataInput("a",h)}_doOperation(h){return this._operation(this.a.getValue(h))}getClassName(){return this._className}}}}]);