"use strict";(self.kdlk57exiqh=self.kdlk57exiqh||[]).push([[107],{15458:(i,x,e)=>{e.r(x),e.d(x,{FlowGraphWaitAllBlock:()=>J});var j=e(13930),E=e(12204),a=e(13874),Y=e(13868);class J extends j.b{constructor(i){super(i),this.config=i,this.inFlows=[],this._cachedActivationState=[],this.reset=this._registerSignalInput("reset"),this.completed=this._registerSignalOutput("completed"),this.remainingInputs=this.registerDataOutput("remainingInputs",a.h,new Y.d(this.config.inputSignalCount||0));for(let x=0;x<this.config.inputSignalCount;x++)this.inFlows.push(this._registerSignalInput(`in_${x}`));this._unregisterSignalInput("in")}_getCurrentActivationState(i){const x=this._cachedActivationState;if(x.length=0,i._hasExecutionVariable(this,"activationState")){const e=i._getExecutionVariable(this,"activationState",[]);for(let i=0;i<e.length;i++)x.push(e[i])}else for(let e=0;e<this.config.inputSignalCount;e++)x.push(!1);return x}_execute(i,x){const e=this._getCurrentActivationState(i);if(x===this.reset)for(let j=0;j<this.config.inputSignalCount;j++)e[j]=!1;else{const i=this.inFlows.indexOf(x);i>=0&&(e[i]=!0)}if(this.remainingInputs.setValue(new Y.d(e.filter((i=>!i)).length),i),i._setExecutionVariable(this,"activationState",e.slice()),e.includes(!1))x!==this.reset&&this.out._activateSignal(i);else{this.completed._activateSignal(i);for(let i=0;i<this.config.inputSignalCount;i++)e[i]=!1}}getClassName(){return"FlowGraphWaitAllBlock"}serialize(i){super.serialize(i),i.config.inputFlows=this.config.inputSignalCount}}(0,E.f)("FlowGraphWaitAllBlock",J)}}]);