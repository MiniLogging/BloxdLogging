/*! For license information please see lgi8l5.18.9a5afffe.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[18],{11428:(Y,d,t)=>{t.d(d,{$:()=>T,D:()=>P,G:()=>H,J:()=>F,K:()=>f,N:()=>D,Q:()=>Q,R:()=>m,V:()=>J,X:()=>K,c:()=>b,db:()=>s,eb:()=>M,g:()=>N,hb:()=>g,j:()=>Z,jb:()=>n,m:()=>h,nb:()=>j,p:()=>B,r:()=>y,rb:()=>l,v:()=>G,z:()=>v});const x=function(Y){const d=[];let t=0;for(let x=0;x<Y.length;x++){let C=Y.charCodeAt(x);C<128?d[t++]=C:C<2048?(d[t++]=C>>6|192,d[t++]=63&C|128):55296===(64512&C)&&x+1<Y.length&&56320===(64512&Y.charCodeAt(x+1))?(C=65536+((1023&C)<<10)+(1023&Y.charCodeAt(++x)),d[t++]=C>>18|240,d[t++]=C>>12&63|128,d[t++]=C>>6&63|128,d[t++]=63&C|128):(d[t++]=C>>12|224,d[t++]=C>>6&63|128,d[t++]=63&C|128)}return d},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(Y,d){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=d?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let C=0;C<Y.length;C+=3){const d=Y[C],U=C+1<Y.length,y=U?Y[C+1]:0,B=C+2<Y.length,W=B?Y[C+2]:0,o=d>>2,f=(3&d)<<4|y>>4;let F=(15&y)<<2|W>>6,D=63&W;B||(D=64,U||(F=64)),x.push(t[o],t[f],t[F],t[D])}return x.join("")},encodeString(Y,d){return this.HAS_NATIVE_SUPPORT&&!d?btoa(Y):this.encodeByteArray(x(Y),d)},decodeString(Y,d){return this.HAS_NATIVE_SUPPORT&&!d?atob(Y):function(Y){const d=[];let t=0,x=0;for(;t<Y.length;){const C=Y[t++];if(C<128)d[x++]=String.fromCharCode(C);else if(C>191&&C<224){const U=Y[t++];d[x++]=String.fromCharCode((31&C)<<6|63&U)}else if(C>239&&C<365){const U=((7&C)<<18|(63&Y[t++])<<12|(63&Y[t++])<<6|63&Y[t++])-65536;d[x++]=String.fromCharCode(55296+(U>>10)),d[x++]=String.fromCharCode(56320+(1023&U))}else{const U=Y[t++],y=Y[t++];d[x++]=String.fromCharCode((15&C)<<12|(63&U)<<6|63&y)}}return d.join("")}(this.decodeStringToByteArray(Y,d))},decodeStringToByteArray(Y,d){this.init_();const t=d?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let C=0;C<Y.length;){const d=t[Y.charAt(C++)],y=C<Y.length?t[Y.charAt(C)]:0;++C;const B=C<Y.length?t[Y.charAt(C)]:64;++C;const W=C<Y.length?t[Y.charAt(C)]:64;if(++C,null==d||null==y||null==B||null==W)throw new U;const o=d<<2|y>>4;if(x.push(o),64!==B){const Y=y<<4&240|B>>2;if(x.push(Y),64!==W){const Y=B<<6&192|W;x.push(Y)}}}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}};class U extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y=function(Y){return function(Y){const d=x(Y);return C.encodeByteArray(d,!0)}(Y).replace(/\./g,"")},B=function(Y){try{return C.decodeString(Y,!0)}catch(d){console.error("base64Decode failed: ",d)}return null};const W=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,o=()=>{try{return W()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let Y;try{Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const d=Y&&B(Y[1]);return d&&JSON.parse(d)})()}catch(Y){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Y}`)}},f=Y=>{var d,t;return null===(t=null===(d=o())||void 0===d?void 0:d.emulatorHosts)||void 0===t?void 0:t[Y]},F=()=>{var Y;return null===(Y=o())||void 0===Y?void 0:Y.config},D=Y=>{var d;return null===(d=o())||void 0===d?void 0:d[`_${Y}`]};class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((Y,d)=>{this.resolve=Y,this.reject=d}))}wrapCallback(Y){return(d,t)=>{d?this.reject(d):this.resolve(t),"function"===typeof Y&&(this.promise.catch((()=>{})),1===Y.length?Y(d):Y(d,t))}}}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function J(){const Y="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof Y&&void 0!==Y.id}function g(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const Y=m();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function s(){try{return"object"===typeof indexedDB}catch(Y){return!1}}function l(){return new Promise(((Y,d)=>{try{let t=!0;const x="validate-browser-context-for-indexeddb-analytics-module",C=self.indexedDB.open(x);C.onsuccess=()=>{C.result.close(),t||self.indexedDB.deleteDatabase(x),Y(!0)},C.onupgradeneeded=()=>{t=!1},C.onerror=()=>{var Y;d((null===(Y=C.error)||void 0===Y?void 0:Y.message)||"")}}catch(t){d(t)}}))}function h(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class Z extends Error{constructor(Y,d,t){super(d),this.code=Y,this.customData=t,this.name="FirebaseError",Object.setPrototypeOf(this,Z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(Y,d,t){this.service=Y,this.serviceName=d,this.errors=t}create(Y){const d=(arguments.length<=1?void 0:arguments[1])||{},t=`${this.service}/${Y}`,x=this.errors[Y],C=x?function(Y,d){return Y.replace(w,((Y,t)=>{const x=d[t];return null!=x?String(x):`<${t}?>`}))}(x,d):"Error",U=`${this.serviceName}: ${C} (${t}).`;return new Z(t,U,d)}}const w=/\{\$([^}]+)}/g;function K(Y){for(const d in Y)if(Object.prototype.hasOwnProperty.call(Y,d))return!1;return!0}function P(Y,d){if(Y===d)return!0;const t=Object.keys(Y),x=Object.keys(d);for(const C of t){if(!x.includes(C))return!1;const t=Y[C],U=d[C];if(V(t)&&V(U)){if(!P(t,U))return!1}else if(t!==U)return!1}for(const C of x)if(!t.includes(C))return!1;return!0}function V(Y){return null!==Y&&"object"===typeof Y}function j(Y){const d=[];for(const[t,x]of Object.entries(Y))Array.isArray(x)?x.forEach((Y=>{d.push(encodeURIComponent(t)+"="+encodeURIComponent(Y))})):d.push(encodeURIComponent(t)+"="+encodeURIComponent(x));return d.length?"&"+d.join("&"):""}function n(Y){const d={};return Y.replace(/^\?/,"").split("&").forEach((Y=>{if(Y){const[t,x]=Y.split("=");d[decodeURIComponent(t)]=decodeURIComponent(x)}})),d}function H(Y){const d=Y.indexOf("?");if(!d)return"";const t=Y.indexOf("#",d);return Y.substring(d,t>0?t:void 0)}function v(Y,d){const t=new u(Y,d);return t.subscribe.bind(t)}class u{constructor(Y,d){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=d,this.task.then((()=>{Y(this)})).catch((Y=>{this.error(Y)}))}next(Y){this.forEachObserver((d=>{d.next(Y)}))}error(Y){this.forEachObserver((d=>{d.error(Y)})),this.close(Y)}complete(){this.forEachObserver((Y=>{Y.complete()})),this.close()}subscribe(Y,d,t){let x;if(void 0===Y&&void 0===d&&void 0===t)throw new Error("Missing Observer.");x=function(Y,d){if("object"!==typeof Y||null===Y)return!1;for(const t of d)if(t in Y&&"function"===typeof Y[t])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:d,complete:t},void 0===x.next&&(x.next=I),void 0===x.error&&(x.error=I),void 0===x.complete&&(x.complete=I);const C=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch(Y){}})),this.observers.push(x),C}unsubscribeOne(Y){void 0!==this.observers&&void 0!==this.observers[Y]&&(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let d=0;d<this.observers.length;d++)this.sendOne(d,Y)}sendOne(Y,d){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{d(this.observers[Y])}catch(t){"undefined"!==typeof console&&console.error&&console.error(t)}}))}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function I(){}const e=1e3,i=2,X=144e5,O=.5;function G(Y){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)*Math.pow(d,Y),x=Math.round(O*t*(Math.random()-.5)*2);return Math.min(X,t+x)}function Q(Y){return Y&&Y._delegate?Y._delegate:Y}},11418:(Y,d,t)=>{t.d(d,{e:()=>U.j,f:()=>FY,h:()=>q,i:()=>tY,m:()=>xY,o:()=>YY,p:()=>BY,t:()=>dY,w:()=>UY,A:()=>CY,E:()=>yY,H:()=>MY,O:()=>bY,K:()=>mY,S:()=>DY,T:()=>gY,U:()=>JY,W:()=>TY});var x=t(11420),C=t(11432),U=t(11428);let y,B;const W=new WeakMap,o=new WeakMap,f=new WeakMap,F=new WeakMap,D=new WeakMap;let b={get(Y,d,t){if(Y instanceof IDBTransaction){if("done"===d)return o.get(Y);if("objectStoreNames"===d)return Y.objectStoreNames||f.get(Y);if("store"===d)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return J(Y[d])},set:(Y,d,t)=>(Y[d]=t,!0),has:(Y,d)=>Y instanceof IDBTransaction&&("done"===d||"store"===d)||d in Y};function m(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Y)?function(){for(var d=arguments.length,t=new Array(d),x=0;x<d;x++)t[x]=arguments[x];return Y.apply(g(this),t),J(W.get(this))}:function(){for(var d=arguments.length,t=new Array(d),x=0;x<d;x++)t[x]=arguments[x];return J(Y.apply(g(this),t))}:function(d){for(var t=arguments.length,x=new Array(t>1?t-1:0),C=1;C<t;C++)x[C-1]=arguments[C];const U=Y.call(g(this),d,...x);return f.set(U,d.sort?d.sort():[d]),J(U)}}function M(Y){return"function"===typeof Y?m(Y):(Y instanceof IDBTransaction&&function(Y){if(o.has(Y))return;const d=new Promise(((d,t)=>{const x=()=>{Y.removeEventListener("complete",C),Y.removeEventListener("error",U),Y.removeEventListener("abort",U)},C=()=>{d(),x()},U=()=>{t(Y.error||new DOMException("AbortError","AbortError")),x()};Y.addEventListener("complete",C),Y.addEventListener("error",U),Y.addEventListener("abort",U)}));o.set(Y,d)}(Y),d=Y,(y||(y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((Y=>d instanceof Y))?new Proxy(Y,b):Y);var d}function J(Y){if(Y instanceof IDBRequest)return function(Y){const d=new Promise(((d,t)=>{const x=()=>{Y.removeEventListener("success",C),Y.removeEventListener("error",U)},C=()=>{d(J(Y.result)),x()},U=()=>{t(Y.error),x()};Y.addEventListener("success",C),Y.addEventListener("error",U)}));return d.then((d=>{d instanceof IDBCursor&&W.set(d,Y)})).catch((()=>{})),D.set(d,Y),d}(Y);if(F.has(Y))return F.get(Y);const d=M(Y);return d!==Y&&(F.set(Y,d),D.set(d,Y)),d}const g=Y=>D.get(Y);const T=["get","getKey","getAll","getAllKeys","count"],s=["put","add","delete","clear"],l=new Map;function h(Y,d){if(!(Y instanceof IDBDatabase)||d in Y||"string"!==typeof d)return;if(l.get(d))return l.get(d);const t=d.replace(/FromIndex$/,""),x=d!==t,C=s.includes(t);if(!(t in(x?IDBIndex:IDBObjectStore).prototype)||!C&&!T.includes(t))return;const U=async function(Y){const d=this.transaction(Y,C?"readwrite":"readonly");let U=d.store;for(var y=arguments.length,B=new Array(y>1?y-1:0),W=1;W<y;W++)B[W-1]=arguments[W];return x&&(U=U.index(B.shift())),(await Promise.all([U[t](...B),C&&d.done]))[0]};return l.set(d,U),U}b=(Y=>({...Y,get:(d,t,x)=>h(d,t)||Y.get(d,t,x),has:(d,t)=>!!h(d,t)||Y.has(d,t)}))(b);class Z{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map((Y=>{if(function(Y){const d=Y.getComponent();return"VERSION"===(null===d||void 0===d?void 0:d.type)}(Y)){const d=Y.getImmediate();return`${d.library}/${d.version}`}return null})).filter((Y=>Y)).join(" ")}}const N="@firebase/app",w="0.9.13",K=new C.h("@firebase/app"),P="@firebase/app-compat",V="@firebase/analytics-compat",j="@firebase/analytics",n="@firebase/app-check-compat",H="@firebase/app-check",v="@firebase/auth",u="@firebase/auth-compat",I="@firebase/database",e="@firebase/database-compat",i="@firebase/functions",X="@firebase/functions-compat",O="@firebase/installations",G="@firebase/installations-compat",Q="@firebase/messaging",a="@firebase/messaging-compat",c="@firebase/performance",z="@firebase/performance-compat",E="@firebase/remote-config",p="@firebase/remote-config-compat",L="@firebase/storage",R="@firebase/storage-compat",A="@firebase/firestore",r="@firebase/firestore-compat",S="firebase",q="[DEFAULT]",k={[N]:"fire-core",[P]:"fire-core-compat",[j]:"fire-analytics",[V]:"fire-analytics-compat",[H]:"fire-app-check",[n]:"fire-app-check-compat",[v]:"fire-auth",[u]:"fire-auth-compat",[I]:"fire-rtdb",[e]:"fire-rtdb-compat",[i]:"fire-fn",[X]:"fire-fn-compat",[O]:"fire-iid",[G]:"fire-iid-compat",[Q]:"fire-fcm",[a]:"fire-fcm-compat",[c]:"fire-perf",[z]:"fire-perf-compat",[E]:"fire-rc",[p]:"fire-rc-compat",[L]:"fire-gcs",[R]:"fire-gcs-compat",[A]:"fire-fst",[r]:"fire-fst-compat","fire-js":"fire-js",[S]:"fire-js-all"},YY=new Map,dY=new Map;function tY(Y,d){try{Y.container.Xf(d)}catch(t){K.debug(`Component ${d.name} failed to register with FirebaseApp ${Y.name}`,t)}}function xY(Y,d){Y.container.addOrOverwriteComponent(d)}function CY(Y){const d=Y.name;if(dY.has(d))return K.debug(`There were multiple attempts to register component ${d}.`),!1;dY.set(d,Y);for(const t of YY.values())tY(t,Y);return!0}function UY(Y,d){const t=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),Y.container.getProvider(d)}function yY(Y,d){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;UY(Y,d).clearInstance(t)}function BY(){dY.clear()}const WY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},oY=new U.g("app","Firebase",WY);class fY{constructor(Y,d,t){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},d),this._name=d.name,this._automaticDataCollectionEnabled=d.automaticDataCollectionEnabled,this._container=t,this.container.Xf(new x.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw oY.create("app-deleted",{appName:this._name})}}const FY="9.23.0";function DY(Y){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Y;if("object"!==typeof d){d={name:d}}const C=Object.assign({name:q,automaticDataCollectionEnabled:!1},d),y=C.name;if("string"!==typeof y||!y)throw oY.create("bad-app-name",{appName:String(y)});if(t||(t=(0,U.J)()),!t)throw oY.create("no-options");const B=YY.get(y);if(B){if((0,U.D)(t,B.options)&&(0,U.D)(C,B.config))return B;throw oY.create("duplicate-app",{appName:y})}const W=new x.b(y);for(const x of dY.values())W.Xf(x);const o=new fY(t,C,W);return YY.set(y,o),o}function bY(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;const d=YY.get(Y);if(!d&&Y===q&&(0,U.J)())return DY();if(!d)throw oY.create("no-app",{appName:Y});return d}function mY(){return Array.from(YY.values())}async function MY(Y){const d=Y.name;YY.has(d)&&(YY.delete(d),await Promise.all(Y.container.getProviders().map((Y=>Y.delete()))),Y.isDeleted=!0)}function JY(Y,d,t){var C;let U=null!==(C=k[Y])&&void 0!==C?C:Y;t&&(U+=`-${t}`);const y=U.match(/\s|\//),B=d.match(/\s|\//);if(y||B){const Y=[`Unable to register library "${U}" with version "${d}":`];return y&&Y.push(`library name "${U}" contains illegal characters (whitespace or "/")`),y&&B&&Y.push("and"),B&&Y.push(`version name "${d}" contains illegal characters (whitespace or "/")`),void K.warn(Y.join(" "))}CY(new x.d(`${U}-version`,(()=>({library:U,version:d})),"VERSION"))}function gY(Y,d){if(null!==Y&&"function"!==typeof Y)throw oY.create("invalid-log-argument");(0,C.m)(Y,d)}function TY(Y){(0,C.k)(Y)}const sY="firebase-heartbeat-store";let lY=null;function hY(){return lY||(lY=function(Y,d){let{blocked:t,upgrade:x,blocking:C,terminated:U}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const y=indexedDB.open(Y,d),B=J(y);return x&&y.addEventListener("upgradeneeded",(Y=>{x(J(y.result),Y.oldVersion,Y.newVersion,J(y.transaction),Y)})),t&&y.addEventListener("blocked",(Y=>t(Y.oldVersion,Y.newVersion,Y))),B.then((Y=>{U&&Y.addEventListener("close",(()=>U())),C&&Y.addEventListener("versionchange",(Y=>C(Y.oldVersion,Y.newVersion,Y)))})).catch((()=>{})),B}("firebase-heartbeat-database",1,{upgrade:(Y,d)=>{if(0===d)Y.createObjectStore(sY)}}).catch((Y=>{throw oY.create("idb-open",{originalErrorMessage:Y.message})}))),lY}async function ZY(Y,d){try{const t=(await hY()).transaction(sY,"readwrite"),x=t.objectStore(sY);await x.put(d,NY(Y)),await t.done}catch(t){if(t instanceof U.j)K.warn(t.message);else{const Y=oY.create("idb-set",{originalErrorMessage:null===t||void 0===t?void 0:t.message});K.warn(Y.message)}}}function NY(Y){return`${Y.name}!${Y.options.appId}`}class wY{constructor(Y){this.container=Y,this._heartbeatsCache=null;const d=this.container.getProvider("app").getImmediate();this.oj=new PY(d),this._heartbeatsCachePromise=this.oj.read().then((Y=>(this._heartbeatsCache=Y,Y)))}async triggerHeartbeat(){const Y=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=KY();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==d&&!this._heartbeatsCache.heartbeats.some((Y=>Y.date===d)))return this._heartbeatsCache.heartbeats.push({date:d,agent:Y}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((Y=>{const d=new Date(Y.date).valueOf();return Date.now()-d<=2592e6})),this.oj.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const Y=KY(),{heartbeatsToSend:d,unsentEntries:t}=function(Y){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const t=[];let x=Y.slice();for(const C of Y){const Y=t.find((Y=>Y.agent===C.agent));if(Y){if(Y.dates.push(C.date),VY(t)>d){Y.dates.pop();break}}else if(t.push({agent:C.agent,dates:[C.date]}),VY(t)>d){t.pop();break}x=x.slice(1)}return{heartbeatsToSend:t,unsentEntries:x}}(this._heartbeatsCache.heartbeats),x=(0,U.r)(JSON.stringify({version:2,heartbeats:d}));return this._heartbeatsCache.lastSentHeartbeatDate=Y,t.length>0?(this._heartbeatsCache.heartbeats=t,await this.oj.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.oj.overwrite(this._heartbeatsCache)),x}}function KY(){return(new Date).toISOString().substring(0,10)}class PY{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,U.db)()&&(0,U.rb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(Y){try{const d=await hY();return await d.transaction(sY).objectStore(sY).get(NY(Y))}catch(d){if(d instanceof U.j)K.warn(d.message);else{const Y=oY.create("idb-get",{originalErrorMessage:null===d||void 0===d?void 0:d.message});K.warn(Y.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(Y){var d;if(await this._canUseIndexedDBPromise){const t=await this.read();return ZY(this.app,{lastSentHeartbeatDate:null!==(d=Y.lastSentHeartbeatDate)&&void 0!==d?d:t.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}}async add(Y){var d;if(await this._canUseIndexedDBPromise){const t=await this.read();return ZY(this.app,{lastSentHeartbeatDate:null!==(d=Y.lastSentHeartbeatDate)&&void 0!==d?d:t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...Y.heartbeats]})}}}function VY(Y){return(0,U.r)(JSON.stringify({version:2,heartbeats:Y})).length}var jY;jY="",CY(new x.d("platform-logger",(Y=>new Z(Y)),"PRIVATE")),CY(new x.d("heartbeat",(Y=>new wY(Y)),"PRIVATE")),JY(N,w,jY),JY(N,w,"esm2017"),JY("fire-js","")},11420:(Y,d,t)=>{t.d(d,{b:()=>B,d:()=>C});var x=t(11428);class C{constructor(Y,d,t){this.name=Y,this.instanceFactory=d,this.type=t,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const U="[DEFAULT]";class y{constructor(Y,d){this.name=Y,this.container=d,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const d=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(d)){const Y=new x.c;if(this.instancesDeferred.set(d,Y),this.isInitialized(d)||this.shouldAutoInitialize())try{const t=this.getOrInitializeService({instanceIdentifier:d});t&&Y.resolve(t)}catch(t){}}return this.instancesDeferred.get(d).promise}getImmediate(Y){var d;const t=this.normalizeInstanceIdentifier(null===Y||void 0===Y?void 0:Y.identifier),x=null!==(d=null===Y||void 0===Y?void 0:Y.optional)&&void 0!==d&&d;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(x)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(C){if(x)return null;throw C}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function(Y){return"EAGER"===Y.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:U})}catch(d){}for(const[Y,t]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(Y);try{const Y=this.getOrInitializeService({instanceIdentifier:x});t.resolve(Y)}catch(d){}}}}clearInstance(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}async delete(){const Y=Array.from(this.instances.values());await Promise.all([...Y.filter((Y=>"INTERNAL"in Y)).map((Y=>Y.INTERNAL.delete())),...Y.filter((Y=>"_delete"in Y)).map((Y=>Y._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instances.has(Y)}getOptions(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instancesOptions.get(Y)||{}}initialize(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:d={}}=Y,t=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(t))throw Error(`${this.name}(${t}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const x=this.getOrInitializeService({instanceIdentifier:t,options:d});for(const[C,U]of this.instancesDeferred.entries()){t===this.normalizeInstanceIdentifier(C)&&U.resolve(x)}return x}fl(Y,d){var t;const x=this.normalizeInstanceIdentifier(d),C=null!==(t=this.onInitCallbacks.get(x))&&void 0!==t?t:new Set;C.add(Y),this.onInitCallbacks.set(x,C);const U=this.instances.get(x);return U&&Y(U,x),()=>{C.delete(Y)}}invokeOnInitCallbacks(Y,d){const t=this.onInitCallbacks.get(d);if(t)for(const C of t)try{C(Y,d)}catch(x){}}getOrInitializeService(Y){let{instanceIdentifier:d,options:t={}}=Y,x=this.instances.get(d);if(!x&&this.component&&(x=this.component.instanceFactory(this.container,{instanceIdentifier:(C=d,C===U?void 0:C),options:t}),this.instances.set(d,x),this.instancesOptions.set(d,t),this.invokeOnInitCallbacks(x,d),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,d,x)}catch(y){}var C;return x||null}normalizeInstanceIdentifier(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.component?this.component.multipleInstances?Y:U:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B{constructor(Y){this.name=Y,this.providers=new Map}Xf(Y){const d=this.getProvider(Y.name);if(d.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);d.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.Xf(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const d=new y(Y,this);return this.providers.set(Y,d),d}getProviders(){return Array.from(this.providers.values())}}},11432:(Y,d,t)=>{t.d(d,{d:()=>C,h:()=>o,k:()=>f,m:()=>F});const x=[];var C;!function(Y){Y[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT"}(C||(C={}));const U={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},y=C.INFO,B={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},W=function(Y,d){if(d<Y.logLevel)return;const t=(new Date).toISOString(),x=B[d];if(!x)throw new Error(`Attempted to log a message with an invalid logType (value: ${d})`);for(var C=arguments.length,U=new Array(C>2?C-2:0),y=2;y<C;y++)U[y-2]=arguments[y];console[x](`[${t}]  ${Y.name}:`,...U)};class o{constructor(Y){this.name=Y,this._logLevel=y,this._logHandler=W,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in C))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"===typeof Y?U[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!==typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(){for(var Y=arguments.length,d=new Array(Y),t=0;t<Y;t++)d[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...d),this._logHandler(this,C.DEBUG,...d)}log(){for(var Y=arguments.length,d=new Array(Y),t=0;t<Y;t++)d[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...d),this._logHandler(this,C.VERBOSE,...d)}info(){for(var Y=arguments.length,d=new Array(Y),t=0;t<Y;t++)d[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,C.INFO,...d),this._logHandler(this,C.INFO,...d)}warn(){for(var Y=arguments.length,d=new Array(Y),t=0;t<Y;t++)d[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,C.WARN,...d),this._logHandler(this,C.WARN,...d)}error(){for(var Y=arguments.length,d=new Array(Y),t=0;t<Y;t++)d[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,C.ERROR,...d),this._logHandler(this,C.ERROR,...d)}}function f(Y){x.forEach((d=>{d.setLogLevel(Y)}))}function F(Y,d){for(const t of x){let x=null;d&&d.level&&(x=U[d.level]),t.userLogHandler=null===Y?null:function(d,t){for(var U=arguments.length,y=new Array(U>2?U-2:0),B=2;B<U;B++)y[B-2]=arguments[B];const W=y.map((Y=>{if(null==Y)return null;if("string"===typeof Y)return Y;if("number"===typeof Y||"boolean"===typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch(d){return null}})).filter((Y=>Y)).join(" ");t>=(null!==x&&void 0!==x?x:d.logLevel)&&Y({level:C[t].toLowerCase(),message:W,args:y,type:d.name})}}}}}]);