/*! For license information please see c6533g.18.3a174752.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[18],{11187:(j,H,s)=>{s.d(H,{B:()=>F,D:()=>x,E:()=>U,G:()=>p,J:()=>T,N:()=>E,O:()=>q,P:()=>K,Q:()=>h,R:()=>o,V:()=>r,W:()=>J,Y:()=>d,ab:()=>O,b:()=>a,bb:()=>R,e:()=>c,f:()=>v,j:()=>Y,n:()=>V,o:()=>k,s:()=>S,u:()=>m,x:()=>W});const i=function(j){const H=[];let s=0;for(let i=0;i<j.length;i++){let B=j.charCodeAt(i);B<128?H[s++]=B:B<2048?(H[s++]=B>>6|192,H[s++]=63&B|128):55296===(64512&B)&&i+1<j.length&&56320===(64512&j.charCodeAt(i+1))?(B=65536+((1023&B)<<10)+(1023&j.charCodeAt(++i)),H[s++]=B>>18|240,H[s++]=B>>12&63|128,H[s++]=B>>6&63|128,H[s++]=63&B|128):(H[s++]=B>>12|224,H[s++]=B>>6&63|128,H[s++]=63&B|128)}return H},B={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(j,H){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let B=0;B<j.length;B+=3){const H=j[B],e=B+1<j.length,k=e?j[B+1]:0,V=B+2<j.length,C=V?j[B+2]:0,L=H>>2,U=(3&H)<<4|k>>4;let x=(15&k)<<2|C>>6,p=63&C;V||(p=64,e||(x=64)),i.push(s[L],s[U],s[x],s[p])}return i.join("")},encodeString(j,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(j):this.encodeByteArray(i(j),H)},decodeString(j,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(j):function(j){const H=[];let s=0,i=0;for(;s<j.length;){const B=j[s++];if(B<128)H[i++]=String.fromCharCode(B);else if(B>191&&B<224){const e=j[s++];H[i++]=String.fromCharCode((31&B)<<6|63&e)}else if(B>239&&B<365){const e=((7&B)<<18|(63&j[s++])<<12|(63&j[s++])<<6|63&j[s++])-65536;H[i++]=String.fromCharCode(55296+(e>>10)),H[i++]=String.fromCharCode(56320+(1023&e))}else{const e=j[s++],k=j[s++];H[i++]=String.fromCharCode((15&B)<<12|(63&e)<<6|63&k)}}return H.join("")}(this.decodeStringToByteArray(j,H))},decodeStringToByteArray(j,H){this.init_();const s=H?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let B=0;B<j.length;){const H=s[j.charAt(B++)],k=B<j.length?s[j.charAt(B)]:0;++B;const V=B<j.length?s[j.charAt(B)]:64;++B;const C=B<j.length?s[j.charAt(B)]:64;if(++B,null==H||null==k||null==V||null==C)throw new e;const L=H<<2|k>>4;if(i.push(L),64!==V){const j=k<<4&240|V>>2;if(i.push(j),64!==C){const j=V<<6&192|C;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k=function(j){return function(j){const H=i(j);return B.encodeByteArray(H,!0)}(j).replace(/\./g,"")},V=function(j){try{return B.decodeString(j,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};const C=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,L=()=>{try{return C()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const H=j&&V(j[1]);return H&&JSON.parse(H)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},U=j=>{var H,s;return null===(s=null===(H=L())||void 0===H?void 0:H.emulatorHosts)||void 0===s?void 0:s[j]},x=()=>{var j;return null===(j=L())||void 0===j?void 0:j.config},p=j=>{var H;return null===(H=L())||void 0===H?void 0:H[`_${j}`]};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((j,H)=>{this.resolve=j,this.reject=H}))}wrapCallback(j){return(H,s)=>{H?this.reject(H):this.resolve(s),"function"===typeof j&&(this.promise.catch((()=>{})),1===j.length?j(H):j(H,s))}}}function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function r(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())}function q(){const j="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof j&&void 0!==j.id}function J(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function h(){const j=E();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function o(){try{return"object"===typeof indexedDB}catch(j){return!1}}function R(){return new Promise(((j,H)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(i);B.onsuccess=()=>{B.result.close(),s||self.indexedDB.deleteDatabase(i),j(!0)},B.onupgradeneeded=()=>{s=!1},B.onerror=()=>{var j;H((null===(j=B.error)||void 0===j?void 0:j.message)||"")}}catch(s){H(s)}}))}function Y(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class v extends Error{constructor(j,H,s){super(H),this.code=j,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c.prototype.create)}}class c{constructor(j,H,s){this.service=j,this.serviceName=H,this.errors=s}create(j){const H=(arguments.length<=1?void 0:arguments[1])||{},s=`${this.service}/${j}`,i=this.errors[j],B=i?function(j,H){return j.replace(z,((j,s)=>{const i=H[s];return null!=i?String(i):`<${s}?>`}))}(i,H):"Error",e=`${this.serviceName}: ${B} (${s}).`;return new v(s,e,H)}}const z=/\{\$([^}]+)}/g;function K(j){for(const H in j)if(Object.prototype.hasOwnProperty.call(j,H))return!1;return!0}function W(j,H){if(j===H)return!0;const s=Object.keys(j),i=Object.keys(H);for(const B of s){if(!i.includes(B))return!1;const s=j[B],e=H[B];if(P(s)&&P(e)){if(!W(s,e))return!1}else if(s!==e)return!1}for(const B of i)if(!s.includes(B))return!1;return!0}function P(j){return null!==j&&"object"===typeof j}function O(j){const H=[];for(const[s,i]of Object.entries(j))Array.isArray(i)?i.forEach((j=>{H.push(encodeURIComponent(s)+"="+encodeURIComponent(j))})):H.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return H.length?"&"+H.join("&"):""}function d(j){const H={};return j.replace(/^\?/,"").split("&").forEach((j=>{if(j){const[s,i]=j.split("=");H[decodeURIComponent(s)]=decodeURIComponent(i)}})),H}function F(j){const H=j.indexOf("?");if(!H)return"";const s=j.indexOf("#",H);return j.substring(H,s>0?s:void 0)}function m(j,H){const s=new G(j,H);return s.subscribe.bind(s)}class G{constructor(j,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then((()=>{j(this)})).catch((j=>{this.error(j)}))}next(j){this.forEachObserver((H=>{H.next(j)}))}error(j){this.forEachObserver((H=>{H.error(j)})),this.close(j)}complete(){this.forEachObserver((j=>{j.complete()})),this.close()}subscribe(j,H,s){let i;if(void 0===j&&void 0===H&&void 0===s)throw new Error("Missing Observer.");i=function(j,H){if("object"!==typeof j||null===j)return!1;for(const s of H)if(s in j&&"function"===typeof j[s])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:H,complete:s},void 0===i.next&&(i.next=M),void 0===i.error&&(i.error=M),void 0===i.complete&&(i.complete=M);const B=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(j){}})),this.observers.push(i),B}unsubscribeOne(j){void 0!==this.observers&&void 0!==this.observers[j]&&(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,j)}sendOne(j,H){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{H(this.observers[j])}catch(s){"undefined"!==typeof console&&console.error&&console.error(s)}}))}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function M(){}const b=1e3,n=2,t=144e5,u=.5;function S(j){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:b)*Math.pow(H,j),i=Math.round(u*s*(Math.random()-.5)*2);return Math.min(t,s+i)}function T(j){return j&&j._delegate?j._delegate:j}},11180:(j,H,s)=>{s.d(H,{e:()=>e.f,h:()=>xj,i:()=>X,l:()=>sj,o:()=>ij,q:()=>jj,r:()=>Vj,v:()=>Hj,y:()=>ej,C:()=>Bj,E:()=>kj,I:()=>rj,L:()=>aj,J:()=>Ej,O:()=>pj,P:()=>Jj,R:()=>qj,T:()=>hj});var i=s(11182),B=s(11195),e=s(11187);let k,V;const C=new WeakMap,L=new WeakMap,U=new WeakMap,x=new WeakMap,p=new WeakMap;let a={get(j,H,s){if(j instanceof IDBTransaction){if("done"===H)return L.get(j);if("objectStoreNames"===H)return j.objectStoreNames||U.get(j);if("store"===H)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return q(j[H])},set:(j,H,s)=>(j[H]=s,!0),has:(j,H)=>j instanceof IDBTransaction&&("done"===H||"store"===H)||H in j};function E(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(j)?function(){for(var H=arguments.length,s=new Array(H),i=0;i<H;i++)s[i]=arguments[i];return j.apply(J(this),s),q(C.get(this))}:function(){for(var H=arguments.length,s=new Array(H),i=0;i<H;i++)s[i]=arguments[i];return q(j.apply(J(this),s))}:function(H){for(var s=arguments.length,i=new Array(s>1?s-1:0),B=1;B<s;B++)i[B-1]=arguments[B];const e=j.call(J(this),H,...i);return U.set(e,H.sort?H.sort():[H]),q(e)}}function r(j){return"function"===typeof j?E(j):(j instanceof IDBTransaction&&function(j){if(L.has(j))return;const H=new Promise(((H,s)=>{const i=()=>{j.removeEventListener("complete",B),j.removeEventListener("error",e),j.removeEventListener("abort",e)},B=()=>{H(),i()},e=()=>{s(j.error||new DOMException("AbortError","AbortError")),i()};j.addEventListener("complete",B),j.addEventListener("error",e),j.addEventListener("abort",e)}));L.set(j,H)}(j),H=j,(k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((j=>H instanceof j))?new Proxy(j,a):j);var H}function q(j){if(j instanceof IDBRequest)return function(j){const H=new Promise(((H,s)=>{const i=()=>{j.removeEventListener("success",B),j.removeEventListener("error",e)},B=()=>{H(q(j.result)),i()},e=()=>{s(j.error),i()};j.addEventListener("success",B),j.addEventListener("error",e)}));return H.then((H=>{H instanceof IDBCursor&&C.set(H,j)})).catch((()=>{})),p.set(H,j),H}(j);if(x.has(j))return x.get(j);const H=r(j);return H!==j&&(x.set(j,H),p.set(H,j)),H}const J=j=>p.get(j);const h=["get","getKey","getAll","getAllKeys","count"],o=["put","add","delete","clear"],R=new Map;function Y(j,H){if(!(j instanceof IDBDatabase)||H in j||"string"!==typeof H)return;if(R.get(H))return R.get(H);const s=H.replace(/FromIndex$/,""),i=H!==s,B=o.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!B&&!h.includes(s))return;const e=async function(j){const H=this.transaction(j,B?"readwrite":"readonly");let e=H.store;for(var k=arguments.length,V=new Array(k>1?k-1:0),C=1;C<k;C++)V[C-1]=arguments[C];return i&&(e=e.index(V.shift())),(await Promise.all([e[s](...V),B&&H.done]))[0]};return R.set(H,e),e}a=(j=>({...j,get:(H,s,i)=>Y(H,s)||j.get(H,s,i),has:(H,s)=>!!Y(H,s)||j.has(H,s)}))(a);class v{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map((j=>{if(function(j){const H=j.getComponent();return"VERSION"===(null===H||void 0===H?void 0:H.type)}(j)){const H=j.getImmediate();return`${H.library}/${H.version}`}return null})).filter((j=>j)).join(" ")}}const c="@firebase/app",z="0.9.13",K=new B.h("@firebase/app"),W="@firebase/app-compat",P="@firebase/analytics-compat",O="@firebase/analytics",d="@firebase/app-check-compat",F="@firebase/app-check",m="@firebase/auth",G="@firebase/auth-compat",M="@firebase/database",b="@firebase/database-compat",n="@firebase/functions",t="@firebase/functions-compat",u="@firebase/installations",S="@firebase/installations-compat",T="@firebase/messaging",Z="@firebase/messaging-compat",N="@firebase/performance",D="@firebase/performance-compat",y="@firebase/remote-config",A="@firebase/remote-config-compat",I="@firebase/storage",f="@firebase/storage-compat",Q="@firebase/firestore",l="@firebase/firestore-compat",w="firebase",X="[DEFAULT]",g={[c]:"fire-core",[W]:"fire-core-compat",[O]:"fire-analytics",[P]:"fire-analytics-compat",[F]:"fire-app-check",[d]:"fire-app-check-compat",[m]:"fire-auth",[G]:"fire-auth-compat",[M]:"fire-rtdb",[b]:"fire-rtdb-compat",[n]:"fire-fn",[t]:"fire-fn-compat",[u]:"fire-iid",[S]:"fire-iid-compat",[T]:"fire-fcm",[Z]:"fire-fcm-compat",[N]:"fire-perf",[D]:"fire-perf-compat",[y]:"fire-rc",[A]:"fire-rc-compat",[I]:"fire-gcs",[f]:"fire-gcs-compat",[Q]:"fire-fst",[l]:"fire-fst-compat","fire-js":"fire-js",[w]:"fire-js-all"},jj=new Map,Hj=new Map;function sj(j,H){try{j.container.$f(H)}catch(s){K.debug(`Component ${H.name} failed to register with FirebaseApp ${j.name}`,s)}}function ij(j,H){j.container.addOrOverwriteComponent(H)}function Bj(j){const H=j.name;if(Hj.has(H))return K.debug(`There were multiple attempts to register component ${H}.`),!1;Hj.set(H,j);for(const s of jj.values())sj(s,j);return!0}function ej(j,H){const s=j.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),j.container.getProvider(H)}function kj(j,H){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X;ej(j,H).clearInstance(s)}function Vj(){Hj.clear()}const Cj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Lj=new e.e("app","Firebase",Cj);class Uj{constructor(j,H,s){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=s,this.container.$f(new i.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw Lj.create("app-deleted",{appName:this._name})}}const xj="9.23.0";function pj(j){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=j;if("object"!==typeof H){H={name:H}}const B=Object.assign({name:X,automaticDataCollectionEnabled:!1},H),k=B.name;if("string"!==typeof k||!k)throw Lj.create("bad-app-name",{appName:String(k)});if(s||(s=(0,e.D)()),!s)throw Lj.create("no-options");const V=jj.get(k);if(V){if((0,e.x)(s,V.options)&&(0,e.x)(B,V.config))return V;throw Lj.create("duplicate-app",{appName:k})}const C=new i.d(k);for(const i of Hj.values())C.$f(i);const L=new Uj(s,B,C);return jj.set(k,L),L}function aj(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const H=jj.get(j);if(!H&&j===X&&(0,e.D)())return pj();if(!H)throw Lj.create("no-app",{appName:j});return H}function Ej(){return Array.from(jj.values())}async function rj(j){const H=j.name;jj.has(H)&&(jj.delete(H),await Promise.all(j.container.getProviders().map((j=>j.delete()))),j.isDeleted=!0)}function qj(j,H,s){var B;let e=null!==(B=g[j])&&void 0!==B?B:j;s&&(e+=`-${s}`);const k=e.match(/\s|\//),V=H.match(/\s|\//);if(k||V){const j=[`Unable to register library "${e}" with version "${H}":`];return k&&j.push(`library name "${e}" contains illegal characters (whitespace or "/")`),k&&V&&j.push("and"),V&&j.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void K.warn(j.join(" "))}Bj(new i.h(`${e}-version`,(()=>({library:e,version:H})),"VERSION"))}function Jj(j,H){if(null!==j&&"function"!==typeof j)throw Lj.create("invalid-log-argument");(0,B.o)(j,H)}function hj(j){(0,B.l)(j)}const oj="firebase-heartbeat-store";let Rj=null;function Yj(){return Rj||(Rj=function(j,H){let{blocked:s,upgrade:i,blocking:B,terminated:e}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const k=indexedDB.open(j,H),V=q(k);return i&&k.addEventListener("upgradeneeded",(j=>{i(q(k.result),j.oldVersion,j.newVersion,q(k.transaction),j)})),s&&k.addEventListener("blocked",(j=>s(j.oldVersion,j.newVersion,j))),V.then((j=>{e&&j.addEventListener("close",(()=>e())),B&&j.addEventListener("versionchange",(j=>B(j.oldVersion,j.newVersion,j)))})).catch((()=>{})),V}("firebase-heartbeat-database",1,{upgrade:(j,H)=>{if(0===H)j.createObjectStore(oj)}}).catch((j=>{throw Lj.create("idb-open",{originalErrorMessage:j.message})}))),Rj}async function vj(j,H){try{const s=(await Yj()).transaction(oj,"readwrite"),i=s.objectStore(oj);await i.put(H,cj(j)),await s.done}catch(s){if(s instanceof e.f)K.warn(s.message);else{const j=Lj.create("idb-set",{originalErrorMessage:null===s||void 0===s?void 0:s.message});K.warn(j.message)}}}function cj(j){return`${j.name}!${j.options.appId}`}class zj{constructor(j){this.container=j,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this.jj=new Wj(H),this._heartbeatsCachePromise=this.jj.read().then((j=>(this._heartbeatsCache=j,j)))}async triggerHeartbeat(){const j=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=Kj();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==H&&!this._heartbeatsCache.heartbeats.some((j=>j.date===H)))return this._heartbeatsCache.heartbeats.push({date:H,agent:j}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((j=>{const H=new Date(j.date).valueOf();return Date.now()-H<=2592e6})),this.jj.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const j=Kj(),{heartbeatsToSend:H,unsentEntries:s}=function(j){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const s=[];let i=j.slice();for(const B of j){const j=s.find((j=>j.agent===B.agent));if(j){if(j.dates.push(B.date),Pj(s)>H){j.dates.pop();break}}else if(s.push({agent:B.agent,dates:[B.date]}),Pj(s)>H){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=(0,e.o)(JSON.stringify({version:2,heartbeats:H}));return this._heartbeatsCache.lastSentHeartbeatDate=j,s.length>0?(this._heartbeatsCache.heartbeats=s,await this.jj.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.jj.overwrite(this._heartbeatsCache)),i}}function Kj(){return(new Date).toISOString().substring(0,10)}class Wj{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,e.R)()&&(0,e.bb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(j){try{const H=await Yj();return await H.transaction(oj).objectStore(oj).get(cj(j))}catch(H){if(H instanceof e.f)K.warn(H.message);else{const j=Lj.create("idb-get",{originalErrorMessage:null===H||void 0===H?void 0:H.message});K.warn(j.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(j){var H;if(await this._canUseIndexedDBPromise){const s=await this.read();return vj(this.app,{lastSentHeartbeatDate:null!==(H=j.lastSentHeartbeatDate)&&void 0!==H?H:s.lastSentHeartbeatDate,heartbeats:j.heartbeats})}}async add(j){var H;if(await this._canUseIndexedDBPromise){const s=await this.read();return vj(this.app,{lastSentHeartbeatDate:null!==(H=j.lastSentHeartbeatDate)&&void 0!==H?H:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...j.heartbeats]})}}}function Pj(j){return(0,e.o)(JSON.stringify({version:2,heartbeats:j})).length}var Oj;Oj="",Bj(new i.h("platform-logger",(j=>new v(j)),"PRIVATE")),Bj(new i.h("heartbeat",(j=>new zj(j)),"PRIVATE")),qj(c,z,Oj),qj(c,z,"esm2017"),qj("fire-js","")},11182:(j,H,s)=>{s.d(H,{d:()=>V,h:()=>B});var i=s(11187);class B{constructor(j,H,s){this.name=j,this.instanceFactory=H,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const e="[DEFAULT]";class k{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const j=new i.b;if(this.instancesDeferred.set(H,j),this.isInitialized(H)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:H});s&&j.resolve(s)}catch(s){}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const s=this.normalizeInstanceIdentifier(null===j||void 0===j?void 0:j.identifier),i=null!==(H=null===j||void 0===j?void 0:j.optional)&&void 0!==H&&H;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(B){if(i)return null;throw B}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function(j){return"EAGER"===j.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:e})}catch(H){}for(const[j,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(j);try{const j=this.getOrInitializeService({instanceIdentifier:i});s.resolve(j)}catch(H){}}}}clearInstance(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}async delete(){const j=Array.from(this.instances.values());await Promise.all([...j.filter((j=>"INTERNAL"in j)).map((j=>j.INTERNAL.delete())),...j.filter((j=>"_delete"in j)).map((j=>j._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.instances.has(j)}getOptions(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.instancesOptions.get(j)||{}}initialize(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:H={}}=j,s=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:H});for(const[B,e]of this.instancesDeferred.entries()){s===this.normalizeInstanceIdentifier(B)&&e.resolve(i)}return i}Wk(j,H){var s;const i=this.normalizeInstanceIdentifier(H),B=null!==(s=this.onInitCallbacks.get(i))&&void 0!==s?s:new Set;B.add(j),this.onInitCallbacks.set(i,B);const e=this.instances.get(i);return e&&j(e,i),()=>{B.delete(j)}}invokeOnInitCallbacks(j,H){const s=this.onInitCallbacks.get(H);if(s)for(const B of s)try{B(j,H)}catch(i){}}getOrInitializeService(j){let{instanceIdentifier:H,options:s={}}=j,i=this.instances.get(H);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(B=H,B===e?void 0:B),options:s}),this.instances.set(H,i),this.instancesOptions.set(H,s),this.invokeOnInitCallbacks(i,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,i)}catch(k){}var B;return i||null}normalizeInstanceIdentifier(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return this.component?this.component.multipleInstances?j:e:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(j){this.name=j,this.providers=new Map}$f(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.$f(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new k(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},11195:(j,H,s)=>{s.d(H,{d:()=>B,h:()=>L,l:()=>U,o:()=>x});const i=[];var B;!function(j){j[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT"}(B||(B={}));const e={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},k=B.INFO,V={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},C=function(j,H){if(H<j.logLevel)return;const s=(new Date).toISOString(),i=V[H];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);for(var B=arguments.length,e=new Array(B>2?B-2:0),k=2;k<B;k++)e[k-2]=arguments[k];console[i](`[${s}]  ${j.name}:`,...e)};class L{constructor(j){this.name=j,this._logLevel=k,this._logHandler=C,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in B))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"===typeof j?e[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!==typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(){for(var j=arguments.length,H=new Array(j),s=0;s<j;s++)H[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(){for(var j=arguments.length,H=new Array(j),s=0;s<j;s++)H[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(){for(var j=arguments.length,H=new Array(j),s=0;s<j;s++)H[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(){for(var j=arguments.length,H=new Array(j),s=0;s<j;s++)H[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(){for(var j=arguments.length,H=new Array(j),s=0;s<j;s++)H[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function U(j){i.forEach((H=>{H.setLogLevel(j)}))}function x(j,H){for(const s of i){let i=null;H&&H.level&&(i=e[H.level]),s.userLogHandler=null===j?null:function(H,s){for(var e=arguments.length,k=new Array(e>2?e-2:0),V=2;V<e;V++)k[V-2]=arguments[V];const C=k.map((j=>{if(null==j)return null;if("string"===typeof j)return j;if("number"===typeof j||"boolean"===typeof j)return j.toString();if(j instanceof Error)return j.message;try{return JSON.stringify(j)}catch(H){return null}})).filter((j=>j)).join(" ");s>=(null!==i&&void 0!==i?i:H.logLevel)&&j({level:B[s].toLowerCase(),message:C,args:k,type:H.name})}}}}}]);