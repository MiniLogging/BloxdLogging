/*! For license information please see dmxbp.18.d03acba6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[18],{11558:(K,Y,l)=>{l.d(Y,{B:()=>e,D:()=>P,E:()=>V,I:()=>m,M:()=>M,Q:()=>a,R:()=>o,V:()=>g,Z:()=>T,bb:()=>n,d:()=>u,db:()=>R,f:()=>E,h:()=>r,hb:()=>W,k:()=>z,kb:()=>J,lb:()=>B,n:()=>c,ob:()=>D,q:()=>A,sb:()=>H,u:()=>L,y:()=>G});const v=function(K){const Y=[];let l=0;for(let v=0;v<K.length;v++){let U=K.charCodeAt(v);U<128?Y[l++]=U:U<2048?(Y[l++]=U>>6|192,Y[l++]=63&U|128):55296===(64512&U)&&v+1<K.length&&56320===(64512&K.charCodeAt(v+1))?(U=65536+((1023&U)<<10)+(1023&K.charCodeAt(++v)),Y[l++]=U>>18|240,Y[l++]=U>>12&63|128,Y[l++]=U>>6&63|128,Y[l++]=63&U|128):(Y[l++]=U>>12|224,Y[l++]=U>>6&63|128,Y[l++]=63&U|128)}return Y},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(K,Y){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const l=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,v=[];for(let U=0;U<K.length;U+=3){const Y=K[U],d=U+1<K.length,A=d?K[U+1]:0,c=U+2<K.length,t=c?K[U+2]:0,Z=Y>>2,m=(3&Y)<<4|A>>4;let V=(15&A)<<2|t>>6,M=63&t;c||(M=64,d||(V=64)),v.push(l[Z],l[m],l[V],l[M])}return v.join("")},encodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(K):this.encodeByteArray(v(K),Y)},decodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(K):function(K){const Y=[];let l=0,v=0;for(;l<K.length;){const U=K[l++];if(U<128)Y[v++]=String.fromCharCode(U);else if(U>191&&U<224){const d=K[l++];Y[v++]=String.fromCharCode((31&U)<<6|63&d)}else if(U>239&&U<365){const d=((7&U)<<18|(63&K[l++])<<12|(63&K[l++])<<6|63&K[l++])-65536;Y[v++]=String.fromCharCode(55296+(d>>10)),Y[v++]=String.fromCharCode(56320+(1023&d))}else{const d=K[l++],A=K[l++];Y[v++]=String.fromCharCode((15&U)<<12|(63&d)<<6|63&A)}}return Y.join("")}(this.decodeStringToByteArray(K,Y))},decodeStringToByteArray(K,Y){this.init_();const l=Y?this.charToByteMapWebSafe_:this.charToByteMap_,v=[];for(let U=0;U<K.length;){const Y=l[K.charAt(U++)],A=U<K.length?l[K.charAt(U)]:0;++U;const c=U<K.length?l[K.charAt(U)]:64;++U;const t=U<K.length?l[K.charAt(U)]:64;if(++U,null==Y||null==A||null==c||null==t)throw new d;const Z=Y<<2|A>>4;if(v.push(Z),64!==c){const K=A<<4&240|c>>2;if(v.push(K),64!==t){const K=c<<6&192|t;v.push(K)}}}return v},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const A=function(K){return function(K){const Y=v(K);return U.encodeByteArray(Y,!0)}(K).replace(/\./g,"")},c=function(K){try{return U.decodeString(K,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};const t=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof l.g)return l.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Z=()=>{try{return t()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(l){return}const Y=K&&c(K[1]);return Y&&JSON.parse(Y)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},m=K=>{var Y,l;return null===(l=null===(Y=Z())||void 0===Y?void 0:Y.emulatorHosts)||void 0===l?void 0:l[K]},V=()=>{var K;return null===(K=Z())||void 0===K?void 0:K.config},M=K=>{var Y;return null===(Y=Z())||void 0===Y?void 0:Y[`_${K}`]};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((K,Y)=>{this.resolve=K,this.reject=Y}))}wrapCallback(K){return(Y,l)=>{Y?this.reject(Y):this.resolve(l),"function"===typeof K&&(this.promise.catch((()=>{})),1===K.length?K(Y):K(Y,l))}}}function o(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())}function g(){const K="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof K&&void 0!==K.id}function J(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function n(){const K=o();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function R(){try{return"object"===typeof indexedDB}catch(K){return!1}}function H(){return new Promise(((K,Y)=>{try{let l=!0;const v="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(v);U.onsuccess=()=>{U.result.close(),l||self.indexedDB.deleteDatabase(v),K(!0)},U.onupgradeneeded=()=>{l=!1},U.onerror=()=>{var K;Y((null===(K=U.error)||void 0===K?void 0:K.message)||"")}}catch(l){Y(l)}}))}function z(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class r extends Error{constructor(K,Y,l){super(Y),this.code=K,this.customData=l,this.name="FirebaseError",Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E.prototype.create)}}class E{constructor(K,Y,l){this.service=K,this.serviceName=Y,this.errors=l}create(K){const Y=(arguments.length<=1?void 0:arguments[1])||{},l=`${this.service}/${K}`,v=this.errors[K],U=v?function(K,Y){return K.replace(y,((K,l)=>{const v=Y[l];return null!=v?String(v):`<${l}?>`}))}(v,Y):"Error",d=`${this.serviceName}: ${U} (${l}).`;return new r(l,d,Y)}}const y=/\{\$([^}]+)}/g;function T(K){for(const Y in K)if(Object.prototype.hasOwnProperty.call(K,Y))return!1;return!0}function e(K,Y){if(K===Y)return!0;const l=Object.keys(K),v=Object.keys(Y);for(const U of l){if(!v.includes(U))return!1;const l=K[U],d=Y[U];if(i(l)&&i(d)){if(!e(l,d))return!1}else if(l!==d)return!1}for(const U of v)if(!l.includes(U))return!1;return!0}function i(K){return null!==K&&"object"===typeof K}function D(K){const Y=[];for(const[l,v]of Object.entries(K))Array.isArray(v)?v.forEach((K=>{Y.push(encodeURIComponent(l)+"="+encodeURIComponent(K))})):Y.push(encodeURIComponent(l)+"="+encodeURIComponent(v));return Y.length?"&"+Y.join("&"):""}function B(K){const Y={};return K.replace(/^\?/,"").split("&").forEach((K=>{if(K){const[l,v]=K.split("=");Y[decodeURIComponent(l)]=decodeURIComponent(v)}})),Y}function P(K){const Y=K.indexOf("?");if(!Y)return"";const l=K.indexOf("#",Y);return K.substring(Y,l>0?l:void 0)}function G(K,Y){const l=new Q(K,Y);return l.subscribe.bind(l)}class Q{constructor(K,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then((()=>{K(this)})).catch((K=>{this.error(K)}))}next(K){this.forEachObserver((Y=>{Y.next(K)}))}error(K){this.forEachObserver((Y=>{Y.error(K)})),this.close(K)}complete(){this.forEachObserver((K=>{K.complete()})),this.close()}subscribe(K,Y,l){let v;if(void 0===K&&void 0===Y&&void 0===l)throw new Error("Missing Observer.");v=function(K,Y){if("object"!==typeof K||null===K)return!1;for(const l of Y)if(l in K&&"function"===typeof K[l])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:Y,complete:l},void 0===v.next&&(v.next=X),void 0===v.error&&(v.error=X),void 0===v.complete&&(v.complete=X);const U=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch(K){}})),this.observers.push(v),U}unsubscribeOne(K){void 0!==this.observers&&void 0!==this.observers[K]&&(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,K)}sendOne(K,Y){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{Y(this.observers[K])}catch(l){"undefined"!==typeof console&&console.error&&console.error(l)}}))}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function X(){}const f=1e3,w=2,k=144e5,I=.5;function L(K){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;const l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f)*Math.pow(Y,K),v=Math.round(I*l*(Math.random()-.5)*2);return Math.min(k,l+v)}function a(K){return K&&K._delegate?K._delegate:K}},11552:(K,Y,l)=>{l.d(Y,{c:()=>d.h,g:()=>VK,h:()=>O,l:()=>lK,o:()=>vK,r:()=>KK,s:()=>cK,u:()=>YK,v:()=>dK,x:()=>UK,B:()=>AK,C:()=>WK,J:()=>uK,G:()=>oK,L:()=>MK,N:()=>JK,P:()=>gK,T:()=>nK});var v=l(11554),U=l(11561),d=l(11558);let A,c;const t=new WeakMap,Z=new WeakMap,m=new WeakMap,V=new WeakMap,M=new WeakMap;let u={get(K,Y,l){if(K instanceof IDBTransaction){if("done"===Y)return Z.get(K);if("objectStoreNames"===Y)return K.objectStoreNames||m.get(K);if("store"===Y)return l.objectStoreNames[1]?void 0:l.objectStore(l.objectStoreNames[0])}return g(K[Y])},set:(K,Y,l)=>(K[Y]=l,!0),has:(K,Y)=>K instanceof IDBTransaction&&("done"===Y||"store"===Y)||Y in K};function o(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(K)?function(){for(var Y=arguments.length,l=new Array(Y),v=0;v<Y;v++)l[v]=arguments[v];return K.apply(J(this),l),g(t.get(this))}:function(){for(var Y=arguments.length,l=new Array(Y),v=0;v<Y;v++)l[v]=arguments[v];return g(K.apply(J(this),l))}:function(Y){for(var l=arguments.length,v=new Array(l>1?l-1:0),U=1;U<l;U++)v[U-1]=arguments[U];const d=K.call(J(this),Y,...v);return m.set(d,Y.sort?Y.sort():[Y]),g(d)}}function W(K){return"function"===typeof K?o(K):(K instanceof IDBTransaction&&function(K){if(Z.has(K))return;const Y=new Promise(((Y,l)=>{const v=()=>{K.removeEventListener("complete",U),K.removeEventListener("error",d),K.removeEventListener("abort",d)},U=()=>{Y(),v()},d=()=>{l(K.error||new DOMException("AbortError","AbortError")),v()};K.addEventListener("complete",U),K.addEventListener("error",d),K.addEventListener("abort",d)}));Z.set(K,Y)}(K),Y=K,(A||(A=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((K=>Y instanceof K))?new Proxy(K,u):K);var Y}function g(K){if(K instanceof IDBRequest)return function(K){const Y=new Promise(((Y,l)=>{const v=()=>{K.removeEventListener("success",U),K.removeEventListener("error",d)},U=()=>{Y(g(K.result)),v()},d=()=>{l(K.error),v()};K.addEventListener("success",U),K.addEventListener("error",d)}));return Y.then((Y=>{Y instanceof IDBCursor&&t.set(Y,K)})).catch((()=>{})),M.set(Y,K),Y}(K);if(V.has(K))return V.get(K);const Y=W(K);return Y!==K&&(V.set(K,Y),M.set(Y,K)),Y}const J=K=>M.get(K);const n=["get","getKey","getAll","getAllKeys","count"],R=["put","add","delete","clear"],H=new Map;function z(K,Y){if(!(K instanceof IDBDatabase)||Y in K||"string"!==typeof Y)return;if(H.get(Y))return H.get(Y);const l=Y.replace(/FromIndex$/,""),v=Y!==l,U=R.includes(l);if(!(l in(v?IDBIndex:IDBObjectStore).prototype)||!U&&!n.includes(l))return;const d=async function(K){const Y=this.transaction(K,U?"readwrite":"readonly");let d=Y.store;for(var A=arguments.length,c=new Array(A>1?A-1:0),t=1;t<A;t++)c[t-1]=arguments[t];return v&&(d=d.index(c.shift())),(await Promise.all([d[l](...c),U&&Y.done]))[0]};return H.set(Y,d),d}u=(K=>({...K,get:(Y,l,v)=>z(Y,l)||K.get(Y,l,v),has:(Y,l)=>!!z(Y,l)||K.has(Y,l)}))(u);class r{constructor(K){this.container=K}getPlatformInfoString(){return this.container.getProviders().map((K=>{if(function(K){const Y=K.getComponent();return"VERSION"===(null===Y||void 0===Y?void 0:Y.type)}(K)){const Y=K.getImmediate();return`${Y.library}/${Y.version}`}return null})).filter((K=>K)).join(" ")}}const E="@firebase/app",y="0.9.13",T=new U.e("@firebase/app"),e="@firebase/app-compat",i="@firebase/analytics-compat",D="@firebase/analytics",B="@firebase/app-check-compat",P="@firebase/app-check",G="@firebase/auth",Q="@firebase/auth-compat",X="@firebase/database",f="@firebase/database-compat",w="@firebase/functions",k="@firebase/functions-compat",I="@firebase/installations",L="@firebase/installations-compat",a="@firebase/messaging",F="@firebase/messaging-compat",s="@firebase/performance",b="@firebase/performance-compat",x="@firebase/remote-config",C="@firebase/remote-config-compat",N="@firebase/storage",j="@firebase/storage-compat",p="@firebase/firestore",S="@firebase/firestore-compat",q="firebase",O="[DEFAULT]",h={[E]:"fire-core",[e]:"fire-core-compat",[D]:"fire-analytics",[i]:"fire-analytics-compat",[P]:"fire-app-check",[B]:"fire-app-check-compat",[G]:"fire-auth",[Q]:"fire-auth-compat",[X]:"fire-rtdb",[f]:"fire-rtdb-compat",[w]:"fire-fn",[k]:"fire-fn-compat",[I]:"fire-iid",[L]:"fire-iid-compat",[a]:"fire-fcm",[F]:"fire-fcm-compat",[s]:"fire-perf",[b]:"fire-perf-compat",[x]:"fire-rc",[C]:"fire-rc-compat",[N]:"fire-gcs",[j]:"fire-gcs-compat",[p]:"fire-fst",[S]:"fire-fst-compat","fire-js":"fire-js",[q]:"fire-js-all"},KK=new Map,YK=new Map;function lK(K,Y){try{K.container.ah(Y)}catch(l){T.debug(`Component ${Y.name} failed to register with FirebaseApp ${K.name}`,l)}}function vK(K,Y){K.container.addOrOverwriteComponent(Y)}function UK(K){const Y=K.name;if(YK.has(Y))return T.debug(`There were multiple attempts to register component ${Y}.`),!1;YK.set(Y,K);for(const l of KK.values())lK(l,K);return!0}function dK(K,Y){const l=K.container.getProvider("heartbeat").getImmediate({optional:!0});return l&&l.triggerHeartbeat(),K.container.getProvider(Y)}function AK(K,Y){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;dK(K,Y).clearInstance(l)}function cK(){YK.clear()}const tK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ZK=new d.f("app","Firebase",tK);class mK{constructor(K,Y,l){this._isDeleted=!1,this._options=Object.assign({},K),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=l,this.container.ah(new v.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this.checkDestroyed(),this._automaticDataCollectionEnabled=K}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(K){this._isDeleted=K}checkDestroyed(){if(this.isDeleted)throw ZK.create("app-deleted",{appName:this._name})}}const VK="9.23.0";function MK(K){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=K;if("object"!==typeof Y){Y={name:Y}}const U=Object.assign({name:O,automaticDataCollectionEnabled:!1},Y),A=U.name;if("string"!==typeof A||!A)throw ZK.create("bad-app-name",{appName:String(A)});if(l||(l=(0,d.E)()),!l)throw ZK.create("no-options");const c=KK.get(A);if(c){if((0,d.B)(l,c.options)&&(0,d.B)(U,c.config))return c;throw ZK.create("duplicate-app",{appName:A})}const t=new v.e(A);for(const v of YK.values())t.ah(v);const Z=new mK(l,U,t);return KK.set(A,Z),Z}function uK(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;const Y=KK.get(K);if(!Y&&K===O&&(0,d.E)())return MK();if(!Y)throw ZK.create("no-app",{appName:K});return Y}function oK(){return Array.from(KK.values())}async function WK(K){const Y=K.name;KK.has(Y)&&(KK.delete(Y),await Promise.all(K.container.getProviders().map((K=>K.delete()))),K.isDeleted=!0)}function gK(K,Y,l){var U;let d=null!==(U=h[K])&&void 0!==U?U:K;l&&(d+=`-${l}`);const A=d.match(/\s|\//),c=Y.match(/\s|\//);if(A||c){const K=[`Unable to register library "${d}" with version "${Y}":`];return A&&K.push(`library name "${d}" contains illegal characters (whitespace or "/")`),A&&c&&K.push("and"),c&&K.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void T.warn(K.join(" "))}UK(new v.g(`${d}-version`,(()=>({library:d,version:Y})),"VERSION"))}function JK(K,Y){if(null!==K&&"function"!==typeof K)throw ZK.create("invalid-log-argument");(0,U.k)(K,Y)}function nK(K){(0,U.i)(K)}const RK="firebase-heartbeat-store";let HK=null;function zK(){return HK||(HK=function(K,Y){let{blocked:l,upgrade:v,blocking:U,terminated:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const A=indexedDB.open(K,Y),c=g(A);return v&&A.addEventListener("upgradeneeded",(K=>{v(g(A.result),K.oldVersion,K.newVersion,g(A.transaction),K)})),l&&A.addEventListener("blocked",(K=>l(K.oldVersion,K.newVersion,K))),c.then((K=>{d&&K.addEventListener("close",(()=>d())),U&&K.addEventListener("versionchange",(K=>U(K.oldVersion,K.newVersion,K)))})).catch((()=>{})),c}("firebase-heartbeat-database",1,{upgrade:(K,Y)=>{if(0===Y)K.createObjectStore(RK)}}).catch((K=>{throw ZK.create("idb-open",{originalErrorMessage:K.message})}))),HK}async function rK(K,Y){try{const l=(await zK()).transaction(RK,"readwrite"),v=l.objectStore(RK);await v.put(Y,EK(K)),await l.done}catch(l){if(l instanceof d.h)T.warn(l.message);else{const K=ZK.create("idb-set",{originalErrorMessage:null===l||void 0===l?void 0:l.message});T.warn(K.message)}}}function EK(K){return`${K.name}!${K.options.appId}`}class yK{constructor(K){this.container=K,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this.Sd=new eK(Y),this._heartbeatsCachePromise=this.Sd.read().then((K=>(this._heartbeatsCache=K,K)))}async triggerHeartbeat(){const K=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Y=TK();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==Y&&!this._heartbeatsCache.heartbeats.some((K=>K.date===Y)))return this._heartbeatsCache.heartbeats.push({date:Y,agent:K}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((K=>{const Y=new Date(K.date).valueOf();return Date.now()-Y<=2592e6})),this.Sd.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const K=TK(),{heartbeatsToSend:Y,unsentEntries:l}=function(K){let Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const l=[];let v=K.slice();for(const U of K){const K=l.find((K=>K.agent===U.agent));if(K){if(K.dates.push(U.date),iK(l)>Y){K.dates.pop();break}}else if(l.push({agent:U.agent,dates:[U.date]}),iK(l)>Y){l.pop();break}v=v.slice(1)}return{heartbeatsToSend:l,unsentEntries:v}}(this._heartbeatsCache.heartbeats),v=(0,d.q)(JSON.stringify({version:2,heartbeats:Y}));return this._heartbeatsCache.lastSentHeartbeatDate=K,l.length>0?(this._heartbeatsCache.heartbeats=l,await this.Sd.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Sd.overwrite(this._heartbeatsCache)),v}}function TK(){return(new Date).toISOString().substring(0,10)}class eK{constructor(K){this.app=K,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,d.db)()&&(0,d.sb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(K){try{const Y=await zK();return await Y.transaction(RK).objectStore(RK).get(EK(K))}catch(Y){if(Y instanceof d.h)T.warn(Y.message);else{const K=ZK.create("idb-get",{originalErrorMessage:null===Y||void 0===Y?void 0:Y.message});T.warn(K.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(K){var Y;if(await this._canUseIndexedDBPromise){const l=await this.read();return rK(this.app,{lastSentHeartbeatDate:null!==(Y=K.lastSentHeartbeatDate)&&void 0!==Y?Y:l.lastSentHeartbeatDate,heartbeats:K.heartbeats})}}async add(K){var Y;if(await this._canUseIndexedDBPromise){const l=await this.read();return rK(this.app,{lastSentHeartbeatDate:null!==(Y=K.lastSentHeartbeatDate)&&void 0!==Y?Y:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...K.heartbeats]})}}}function iK(K){return(0,d.q)(JSON.stringify({version:2,heartbeats:K})).length}var DK;DK="",UK(new v.g("platform-logger",(K=>new r(K)),"PRIVATE")),UK(new v.g("heartbeat",(K=>new yK(K)),"PRIVATE")),gK(E,y,DK),gK(E,y,"esm2017"),gK("fire-js","")},11554:(K,Y,l)=>{l.d(Y,{e:()=>c,g:()=>U});var v=l(11558);class U{constructor(K,Y,l){this.name=K,this.instanceFactory=Y,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const d="[DEFAULT]";class A{constructor(K,Y){this.name=K,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Y=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Y)){const K=new v.d;if(this.instancesDeferred.set(Y,K),this.isInitialized(Y)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:Y});l&&K.resolve(l)}catch(l){}}return this.instancesDeferred.get(Y).promise}getImmediate(K){var Y;const l=this.normalizeInstanceIdentifier(null===K||void 0===K?void 0:K.identifier),v=null!==(Y=null===K||void 0===K?void 0:K.optional)&&void 0!==Y&&Y;if(!this.isInitialized(l)&&!this.shouldAutoInitialize()){if(v)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:l})}catch(U){if(v)return null;throw U}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function(K){return"EAGER"===K.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:d})}catch(Y){}for(const[K,l]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(K);try{const K=this.getOrInitializeService({instanceIdentifier:v});l.resolve(K)}catch(Y){}}}}clearInstance(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}async delete(){const K=Array.from(this.instances.values());await Promise.all([...K.filter((K=>"INTERNAL"in K)).map((K=>K.INTERNAL.delete())),...K.filter((K=>"_delete"in K)).map((K=>K._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instances.has(K)}getOptions(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instancesOptions.get(K)||{}}initialize(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:Y={}}=K,l=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const v=this.getOrInitializeService({instanceIdentifier:l,options:Y});for(const[U,d]of this.instancesDeferred.entries()){l===this.normalizeInstanceIdentifier(U)&&d.resolve(v)}return v}cl(K,Y){var l;const v=this.normalizeInstanceIdentifier(Y),U=null!==(l=this.onInitCallbacks.get(v))&&void 0!==l?l:new Set;U.add(K),this.onInitCallbacks.set(v,U);const d=this.instances.get(v);return d&&K(d,v),()=>{U.delete(K)}}invokeOnInitCallbacks(K,Y){const l=this.onInitCallbacks.get(Y);if(l)for(const U of l)try{U(K,Y)}catch(v){}}getOrInitializeService(K){let{instanceIdentifier:Y,options:l={}}=K,v=this.instances.get(Y);if(!v&&this.component&&(v=this.component.instanceFactory(this.container,{instanceIdentifier:(U=Y,U===d?void 0:U),options:l}),this.instances.set(Y,v),this.instancesOptions.set(Y,l),this.invokeOnInitCallbacks(v,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,v)}catch(A){}var U;return v||null}normalizeInstanceIdentifier(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.component?this.component.multipleInstances?K:d:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class c{constructor(K){this.name=K,this.providers=new Map}ah(K){const Y=this.getProvider(K.name);if(Y.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Y.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.ah(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Y=new A(K,this);return this.providers.set(K,Y),Y}getProviders(){return Array.from(this.providers.values())}}},11561:(K,Y,l)=>{l.d(Y,{c:()=>U,e:()=>Z,i:()=>m,k:()=>V});const v=[];var U;!function(K){K[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT"}(U||(U={}));const d={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},A=U.INFO,c={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},t=function(K,Y){if(Y<K.logLevel)return;const l=(new Date).toISOString(),v=c[Y];if(!v)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);for(var U=arguments.length,d=new Array(U>2?U-2:0),A=2;A<U;A++)d[A-2]=arguments[A];console[v](`[${l}]  ${K.name}:`,...d)};class Z{constructor(K){this.name=K,this._logLevel=A,this._logHandler=t,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(K){if(!(K in U))throw new TypeError(`Invalid value "${K}" assigned to \`logLevel\``);this._logLevel=K}setLogLevel(K){this._logLevel="string"===typeof K?d[K]:K}get logHandler(){return this._logHandler}set logHandler(K){if("function"!==typeof K)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=K}get userLogHandler(){return this._userLogHandler}set userLogHandler(K){this._userLogHandler=K}debug(){for(var K=arguments.length,Y=new Array(K),l=0;l<K;l++)Y[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...Y),this._logHandler(this,U.DEBUG,...Y)}log(){for(var K=arguments.length,Y=new Array(K),l=0;l<K;l++)Y[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...Y),this._logHandler(this,U.VERBOSE,...Y)}info(){for(var K=arguments.length,Y=new Array(K),l=0;l<K;l++)Y[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,U.INFO,...Y),this._logHandler(this,U.INFO,...Y)}warn(){for(var K=arguments.length,Y=new Array(K),l=0;l<K;l++)Y[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,U.WARN,...Y),this._logHandler(this,U.WARN,...Y)}error(){for(var K=arguments.length,Y=new Array(K),l=0;l<K;l++)Y[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,U.ERROR,...Y),this._logHandler(this,U.ERROR,...Y)}}function m(K){v.forEach((Y=>{Y.setLogLevel(K)}))}function V(K,Y){for(const l of v){let v=null;Y&&Y.level&&(v=d[Y.level]),l.userLogHandler=null===K?null:function(Y,l){for(var d=arguments.length,A=new Array(d>2?d-2:0),c=2;c<d;c++)A[c-2]=arguments[c];const t=A.map((K=>{if(null==K)return null;if("string"===typeof K)return K;if("number"===typeof K||"boolean"===typeof K)return K.toString();if(K instanceof Error)return K.message;try{return JSON.stringify(K)}catch(Y){return null}})).filter((K=>K)).join(" ");l>=(null!==v&&void 0!==v?v:Y.logLevel)&&K({level:U[l].toLowerCase(),message:t,args:A,type:Y.name})}}}}}]);