/*! For license information please see ddczdp.18.9b6c59df.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[18],{11773:(f,z,w)=>{w.d(z,{C:()=>G,F:()=>R,I:()=>X,M:()=>h,O:()=>K,P:()=>r,Q:()=>y,S:()=>O,W:()=>M,Y:()=>B,ab:()=>V,bb:()=>e,cb:()=>d,d:()=>c,eb:()=>P,fb:()=>n,g:()=>D,hb:()=>W,k:()=>v,n:()=>T,q:()=>J,s:()=>F,w:()=>m,y:()=>q});const S=function(f){const z=[];let w=0;for(let S=0;S<f.length;S++){let C=f.charCodeAt(S);C<128?z[w++]=C:C<2048?(z[w++]=C>>6|192,z[w++]=63&C|128):55296===(64512&C)&&S+1<f.length&&56320===(64512&f.charCodeAt(S+1))?(C=65536+((1023&C)<<10)+(1023&f.charCodeAt(++S)),z[w++]=C>>18|240,z[w++]=C>>12&63|128,z[w++]=C>>6&63|128,z[w++]=63&C|128):(z[w++]=C>>12|224,z[w++]=C>>6&63|128,z[w++]=63&C|128)}return z},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(f,z){if(!Array.isArray(f))throw Error("encodeByteArray takes an array as a parameter");this.init_();const w=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let C=0;C<f.length;C+=3){const z=f[C],E=C+1<f.length,F=E?f[C+1]:0,J=C+2<f.length,x=J?f[C+2]:0,u=z>>2,h=(3&z)<<4|F>>4;let X=(15&F)<<2|x>>6,K=63&x;J||(K=64,E||(X=64)),S.push(w[u],w[h],w[X],w[K])}return S.join("")},encodeString(f,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(f):this.encodeByteArray(S(f),z)},decodeString(f,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(f):function(f){const z=[];let w=0,S=0;for(;w<f.length;){const C=f[w++];if(C<128)z[S++]=String.fromCharCode(C);else if(C>191&&C<224){const E=f[w++];z[S++]=String.fromCharCode((31&C)<<6|63&E)}else if(C>239&&C<365){const E=((7&C)<<18|(63&f[w++])<<12|(63&f[w++])<<6|63&f[w++])-65536;z[S++]=String.fromCharCode(55296+(E>>10)),z[S++]=String.fromCharCode(56320+(1023&E))}else{const E=f[w++],F=f[w++];z[S++]=String.fromCharCode((15&C)<<12|(63&E)<<6|63&F)}}return z.join("")}(this.decodeStringToByteArray(f,z))},decodeStringToByteArray(f,z){this.init_();const w=z?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let C=0;C<f.length;){const z=w[f.charAt(C++)],F=C<f.length?w[f.charAt(C)]:0;++C;const J=C<f.length?w[f.charAt(C)]:64;++C;const x=C<f.length?w[f.charAt(C)]:64;if(++C,null==z||null==F||null==J||null==x)throw new E;const u=z<<2|F>>4;if(S.push(u),64!==J){const f=F<<4&240|J>>2;if(S.push(f),64!==x){const f=J<<6&192|x;S.push(f)}}}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let f=0;f<this.ENCODED_VALS.length;f++)this.byteToCharMap_[f]=this.ENCODED_VALS.charAt(f),this.charToByteMap_[this.byteToCharMap_[f]]=f,this.byteToCharMapWebSafe_[f]=this.ENCODED_VALS_WEBSAFE.charAt(f),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[f]]=f,f>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(f)]=f,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(f)]=f)}}};class E extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F=function(f){return function(f){const z=S(f);return C.encodeByteArray(z,!0)}(f).replace(/\./g,"")},J=function(f){try{return C.decodeString(f,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};const x=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof w.g)return w.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,u=()=>{try{return x()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let f;try{f=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(w){return}const z=f&&J(f[1]);return z&&JSON.parse(z)})()}catch(f){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${f}`)}},h=f=>{var z,w;return null===(w=null===(z=u())||void 0===z?void 0:z.emulatorHosts)||void 0===w?void 0:w[f]},X=()=>{var f;return null===(f=u())||void 0===f?void 0:f.config},K=f=>{var z;return null===(z=u())||void 0===z?void 0:z[`_${f}`]};class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((f,z)=>{this.resolve=f,this.reject=z}))}wrapCallback(f){return(z,w)=>{z?this.reject(z):this.resolve(w),"function"===typeof f&&(this.promise.catch((()=>{})),1===f.length?f(z):f(z,w))}}}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function e(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function O(){const f="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof f&&void 0!==f.id}function d(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function B(){const f=y();return f.indexOf("MSIE ")>=0||f.indexOf("Trident/")>=0}function V(){try{return"object"===typeof indexedDB}catch(f){return!1}}function W(){return new Promise(((f,z)=>{try{let w=!0;const S="validate-browser-context-for-indexeddb-analytics-module",C=self.indexedDB.open(S);C.onsuccess=()=>{C.result.close(),w||self.indexedDB.deleteDatabase(S),f(!0)},C.onupgradeneeded=()=>{w=!1},C.onerror=()=>{var f;z((null===(f=C.error)||void 0===f?void 0:f.message)||"")}}catch(w){z(w)}}))}function T(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class v extends Error{constructor(f,z,w){super(z),this.code=f,this.customData=w,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(f,z,w){this.service=f,this.serviceName=z,this.errors=w}create(f){const z=(arguments.length<=1?void 0:arguments[1])||{},w=`${this.service}/${f}`,S=this.errors[f],C=S?function(f,z){return f.replace(A,((f,w)=>{const S=z[w];return null!=S?String(S):`<${w}?>`}))}(S,z):"Error",E=`${this.serviceName}: ${C} (${w}).`;return new v(w,E,z)}}const A=/\{\$([^}]+)}/g;function M(f){for(const z in f)if(Object.prototype.hasOwnProperty.call(f,z))return!1;return!0}function G(f,z){if(f===z)return!0;const w=Object.keys(f),S=Object.keys(z);for(const C of w){if(!S.includes(C))return!1;const w=f[C],E=z[C];if(I(w)&&I(E)){if(!G(w,E))return!1}else if(w!==E)return!1}for(const C of S)if(!w.includes(C))return!1;return!0}function I(f){return null!==f&&"object"===typeof f}function n(f){const z=[];for(const[w,S]of Object.entries(f))Array.isArray(S)?S.forEach((f=>{z.push(encodeURIComponent(w)+"="+encodeURIComponent(f))})):z.push(encodeURIComponent(w)+"="+encodeURIComponent(S));return z.length?"&"+z.join("&"):""}function P(f){const z={};return f.replace(/^\?/,"").split("&").forEach((f=>{if(f){const[w,S]=f.split("=");z[decodeURIComponent(w)]=decodeURIComponent(S)}})),z}function R(f){const z=f.indexOf("?");if(!z)return"";const w=f.indexOf("#",z);return f.substring(z,w>0?w:void 0)}function q(f,z){const w=new a(f,z);return w.subscribe.bind(w)}class a{constructor(f,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then((()=>{f(this)})).catch((f=>{this.error(f)}))}next(f){this.forEachObserver((z=>{z.next(f)}))}error(f){this.forEachObserver((z=>{z.error(f)})),this.close(f)}complete(){this.forEachObserver((f=>{f.complete()})),this.close()}subscribe(f,z,w){let S;if(void 0===f&&void 0===z&&void 0===w)throw new Error("Missing Observer.");S=function(f,z){if("object"!==typeof f||null===f)return!1;for(const w of z)if(w in f&&"function"===typeof f[w])return!0;return!1}(f,["next","error","complete"])?f:{next:f,error:z,complete:w},void 0===S.next&&(S.next=s),void 0===S.error&&(S.error=s),void 0===S.complete&&(S.complete=s);const C=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch(f){}})),this.observers.push(S),C}unsubscribeOne(f){void 0!==this.observers&&void 0!==this.observers[f]&&(delete this.observers[f],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(f){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,f)}sendOne(f,z){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[f])try{z(this.observers[f])}catch(w){"undefined"!==typeof console&&console.error&&console.error(w)}}))}close(f){this.finalized||(this.finalized=!0,void 0!==f&&(this.finalError=f),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function s(){}const H=1e3,L=2,U=144e5,i=.5;function m(f){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;const w=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:H)*Math.pow(z,f),S=Math.round(i*w*(Math.random()-.5)*2);return Math.min(U,w+S)}function r(f){return f&&f._delegate?f._delegate:f}},11767:(f,z,w)=>{w.d(z,{c:()=>E.k,f:()=>Xf,g:()=>l,j:()=>wf,l:()=>Sf,p:()=>ff,t:()=>Jf,w:()=>zf,y:()=>Ef,C:()=>Cf,G:()=>Ff,H:()=>ef,M:()=>cf,J:()=>yf,N:()=>Kf,Q:()=>df,S:()=>Of,U:()=>Bf});var S=w(11770),C=w(11778),E=w(11773);let F,J;const x=new WeakMap,u=new WeakMap,h=new WeakMap,X=new WeakMap,K=new WeakMap;let c={get(f,z,w){if(f instanceof IDBTransaction){if("done"===z)return u.get(f);if("objectStoreNames"===z)return f.objectStoreNames||h.get(f);if("store"===z)return w.objectStoreNames[1]?void 0:w.objectStore(w.objectStoreNames[0])}return O(f[z])},set:(f,z,w)=>(f[z]=w,!0),has:(f,z)=>f instanceof IDBTransaction&&("done"===z||"store"===z)||z in f};function y(f){return f!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(f)?function(){for(var z=arguments.length,w=new Array(z),S=0;S<z;S++)w[S]=arguments[S];return f.apply(d(this),w),O(x.get(this))}:function(){for(var z=arguments.length,w=new Array(z),S=0;S<z;S++)w[S]=arguments[S];return O(f.apply(d(this),w))}:function(z){for(var w=arguments.length,S=new Array(w>1?w-1:0),C=1;C<w;C++)S[C-1]=arguments[C];const E=f.call(d(this),z,...S);return h.set(E,z.sort?z.sort():[z]),O(E)}}function e(f){return"function"===typeof f?y(f):(f instanceof IDBTransaction&&function(f){if(u.has(f))return;const z=new Promise(((z,w)=>{const S=()=>{f.removeEventListener("complete",C),f.removeEventListener("error",E),f.removeEventListener("abort",E)},C=()=>{z(),S()},E=()=>{w(f.error||new DOMException("AbortError","AbortError")),S()};f.addEventListener("complete",C),f.addEventListener("error",E),f.addEventListener("abort",E)}));u.set(f,z)}(f),z=f,(F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((f=>z instanceof f))?new Proxy(f,c):f);var z}function O(f){if(f instanceof IDBRequest)return function(f){const z=new Promise(((z,w)=>{const S=()=>{f.removeEventListener("success",C),f.removeEventListener("error",E)},C=()=>{z(O(f.result)),S()},E=()=>{w(f.error),S()};f.addEventListener("success",C),f.addEventListener("error",E)}));return z.then((z=>{z instanceof IDBCursor&&x.set(z,f)})).catch((()=>{})),K.set(z,f),z}(f);if(X.has(f))return X.get(f);const z=e(f);return z!==f&&(X.set(f,z),K.set(z,f)),z}const d=f=>K.get(f);const B=["get","getKey","getAll","getAllKeys","count"],V=["put","add","delete","clear"],W=new Map;function T(f,z){if(!(f instanceof IDBDatabase)||z in f||"string"!==typeof z)return;if(W.get(z))return W.get(z);const w=z.replace(/FromIndex$/,""),S=z!==w,C=V.includes(w);if(!(w in(S?IDBIndex:IDBObjectStore).prototype)||!C&&!B.includes(w))return;const E=async function(f){const z=this.transaction(f,C?"readwrite":"readonly");let E=z.store;for(var F=arguments.length,J=new Array(F>1?F-1:0),x=1;x<F;x++)J[x-1]=arguments[x];return S&&(E=E.index(J.shift())),(await Promise.all([E[w](...J),C&&z.done]))[0]};return W.set(z,E),E}c=(f=>({...f,get:(z,w,S)=>T(z,w)||f.get(z,w,S),has:(z,w)=>!!T(z,w)||f.has(z,w)}))(c);class v{constructor(f){this.container=f}getPlatformInfoString(){return this.container.getProviders().map((f=>{if(function(f){const z=f.getComponent();return"VERSION"===(null===z||void 0===z?void 0:z.type)}(f)){const z=f.getImmediate();return`${z.library}/${z.version}`}return null})).filter((f=>f)).join(" ")}}const D="@firebase/app",A="0.9.13",M=new C.c("@firebase/app"),G="@firebase/app-compat",I="@firebase/analytics-compat",n="@firebase/analytics",P="@firebase/app-check-compat",R="@firebase/app-check",q="@firebase/auth",a="@firebase/auth-compat",s="@firebase/database",H="@firebase/database-compat",L="@firebase/functions",U="@firebase/functions-compat",i="@firebase/installations",m="@firebase/installations-compat",r="@firebase/messaging",o="@firebase/messaging-compat",p="@firebase/performance",Y="@firebase/performance-compat",t="@firebase/remote-config",Z="@firebase/remote-config-compat",b="@firebase/storage",Q="@firebase/storage-compat",g="@firebase/firestore",k="@firebase/firestore-compat",j="firebase",l="[DEFAULT]",N={[D]:"fire-core",[G]:"fire-core-compat",[n]:"fire-analytics",[I]:"fire-analytics-compat",[R]:"fire-app-check",[P]:"fire-app-check-compat",[q]:"fire-auth",[a]:"fire-auth-compat",[s]:"fire-rtdb",[H]:"fire-rtdb-compat",[L]:"fire-fn",[U]:"fire-fn-compat",[i]:"fire-iid",[m]:"fire-iid-compat",[r]:"fire-fcm",[o]:"fire-fcm-compat",[p]:"fire-perf",[Y]:"fire-perf-compat",[t]:"fire-rc",[Z]:"fire-rc-compat",[b]:"fire-gcs",[Q]:"fire-gcs-compat",[g]:"fire-fst",[k]:"fire-fst-compat","fire-js":"fire-js",[j]:"fire-js-all"},ff=new Map,zf=new Map;function wf(f,z){try{f.container.Me(z)}catch(w){M.debug(`Component ${z.name} failed to register with FirebaseApp ${f.name}`,w)}}function Sf(f,z){f.container.addOrOverwriteComponent(z)}function Cf(f){const z=f.name;if(zf.has(z))return M.debug(`There were multiple attempts to register component ${z}.`),!1;zf.set(z,f);for(const w of ff.values())wf(w,f);return!0}function Ef(f,z){const w=f.container.getProvider("heartbeat").getImmediate({optional:!0});return w&&w.triggerHeartbeat(),f.container.getProvider(z)}function Ff(f,z){let w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;Ef(f,z).clearInstance(w)}function Jf(){zf.clear()}const xf={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},uf=new E.g("app","Firebase",xf);class hf{constructor(f,z,w){this._isDeleted=!1,this._options=Object.assign({},f),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=w,this.container.Me(new S.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(f){this.checkDestroyed(),this._automaticDataCollectionEnabled=f}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(f){this._isDeleted=f}checkDestroyed(){if(this.isDeleted)throw uf.create("app-deleted",{appName:this._name})}}const Xf="9.23.0";function Kf(f){let z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=f;if("object"!==typeof z){z={name:z}}const C=Object.assign({name:l,automaticDataCollectionEnabled:!1},z),F=C.name;if("string"!==typeof F||!F)throw uf.create("bad-app-name",{appName:String(F)});if(w||(w=(0,E.I)()),!w)throw uf.create("no-options");const J=ff.get(F);if(J){if((0,E.C)(w,J.options)&&(0,E.C)(C,J.config))return J;throw uf.create("duplicate-app",{appName:F})}const x=new S.d(F);for(const S of zf.values())x.Me(S);const u=new hf(w,C,x);return ff.set(F,u),u}function cf(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;const z=ff.get(f);if(!z&&f===l&&(0,E.I)())return Kf();if(!z)throw uf.create("no-app",{appName:f});return z}function yf(){return Array.from(ff.values())}async function ef(f){const z=f.name;ff.has(z)&&(ff.delete(z),await Promise.all(f.container.getProviders().map((f=>f.delete()))),f.isDeleted=!0)}function Of(f,z,w){var C;let E=null!==(C=N[f])&&void 0!==C?C:f;w&&(E+=`-${w}`);const F=E.match(/\s|\//),J=z.match(/\s|\//);if(F||J){const f=[`Unable to register library "${E}" with version "${z}":`];return F&&f.push(`library name "${E}" contains illegal characters (whitespace or "/")`),F&&J&&f.push("and"),J&&f.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void M.warn(f.join(" "))}Cf(new S.h(`${E}-version`,(()=>({library:E,version:z})),"VERSION"))}function df(f,z){if(null!==f&&"function"!==typeof f)throw uf.create("invalid-log-argument");(0,C.h)(f,z)}function Bf(f){(0,C.g)(f)}const Vf="firebase-heartbeat-store";let Wf=null;function Tf(){return Wf||(Wf=function(f,z){let{blocked:w,upgrade:S,blocking:C,terminated:E}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const F=indexedDB.open(f,z),J=O(F);return S&&F.addEventListener("upgradeneeded",(f=>{S(O(F.result),f.oldVersion,f.newVersion,O(F.transaction),f)})),w&&F.addEventListener("blocked",(f=>w(f.oldVersion,f.newVersion,f))),J.then((f=>{E&&f.addEventListener("close",(()=>E())),C&&f.addEventListener("versionchange",(f=>C(f.oldVersion,f.newVersion,f)))})).catch((()=>{})),J}("firebase-heartbeat-database",1,{upgrade:(f,z)=>{if(0===z)f.createObjectStore(Vf)}}).catch((f=>{throw uf.create("idb-open",{originalErrorMessage:f.message})}))),Wf}async function vf(f,z){try{const w=(await Tf()).transaction(Vf,"readwrite"),S=w.objectStore(Vf);await S.put(z,Df(f)),await w.done}catch(w){if(w instanceof E.k)M.warn(w.message);else{const f=uf.create("idb-set",{originalErrorMessage:null===w||void 0===w?void 0:w.message});M.warn(f.message)}}}function Df(f){return`${f.name}!${f.options.appId}`}class Af{constructor(f){this.container=f,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this.Je=new Gf(z),this._heartbeatsCachePromise=this.Je.read().then((f=>(this._heartbeatsCache=f,f)))}async triggerHeartbeat(){const f=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),z=Mf();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==z&&!this._heartbeatsCache.heartbeats.some((f=>f.date===z)))return this._heartbeatsCache.heartbeats.push({date:z,agent:f}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((f=>{const z=new Date(f.date).valueOf();return Date.now()-z<=2592e6})),this.Je.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const f=Mf(),{heartbeatsToSend:z,unsentEntries:w}=function(f){let z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const w=[];let S=f.slice();for(const C of f){const f=w.find((f=>f.agent===C.agent));if(f){if(f.dates.push(C.date),If(w)>z){f.dates.pop();break}}else if(w.push({agent:C.agent,dates:[C.date]}),If(w)>z){w.pop();break}S=S.slice(1)}return{heartbeatsToSend:w,unsentEntries:S}}(this._heartbeatsCache.heartbeats),S=(0,E.s)(JSON.stringify({version:2,heartbeats:z}));return this._heartbeatsCache.lastSentHeartbeatDate=f,w.length>0?(this._heartbeatsCache.heartbeats=w,await this.Je.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Je.overwrite(this._heartbeatsCache)),S}}function Mf(){return(new Date).toISOString().substring(0,10)}class Gf{constructor(f){this.app=f,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,E.ab)()&&(0,E.hb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(f){try{const z=await Tf();return await z.transaction(Vf).objectStore(Vf).get(Df(f))}catch(z){if(z instanceof E.k)M.warn(z.message);else{const f=uf.create("idb-get",{originalErrorMessage:null===z||void 0===z?void 0:z.message});M.warn(f.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(f){var z;if(await this._canUseIndexedDBPromise){const w=await this.read();return vf(this.app,{lastSentHeartbeatDate:null!==(z=f.lastSentHeartbeatDate)&&void 0!==z?z:w.lastSentHeartbeatDate,heartbeats:f.heartbeats})}}async add(f){var z;if(await this._canUseIndexedDBPromise){const w=await this.read();return vf(this.app,{lastSentHeartbeatDate:null!==(z=f.lastSentHeartbeatDate)&&void 0!==z?z:w.lastSentHeartbeatDate,heartbeats:[...w.heartbeats,...f.heartbeats]})}}}function If(f){return(0,E.s)(JSON.stringify({version:2,heartbeats:f})).length}var nf;nf="",Cf(new S.h("platform-logger",(f=>new v(f)),"PRIVATE")),Cf(new S.h("heartbeat",(f=>new Af(f)),"PRIVATE")),Of(D,A,nf),Of(D,A,"esm2017"),Of("fire-js","")},11770:(f,z,w)=>{w.d(z,{d:()=>J,h:()=>C});var S=w(11773);class C{constructor(f,z,w){this.name=f,this.instanceFactory=z,this.type=w,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(f){return this.instantiationMode=f,this}setMultipleInstances(f){return this.multipleInstances=f,this}setServiceProps(f){return this.serviceProps=f,this}setInstanceCreatedCallback(f){return this.onInstanceCreated=f,this}}const E="[DEFAULT]";class F{constructor(f,z){this.name=f,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(f){const z=this.normalizeInstanceIdentifier(f);if(!this.instancesDeferred.has(z)){const f=new S.d;if(this.instancesDeferred.set(z,f),this.isInitialized(z)||this.shouldAutoInitialize())try{const w=this.getOrInitializeService({instanceIdentifier:z});w&&f.resolve(w)}catch(w){}}return this.instancesDeferred.get(z).promise}getImmediate(f){var z;const w=this.normalizeInstanceIdentifier(null===f||void 0===f?void 0:f.identifier),S=null!==(z=null===f||void 0===f?void 0:f.optional)&&void 0!==z&&z;if(!this.isInitialized(w)&&!this.shouldAutoInitialize()){if(S)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:w})}catch(C){if(S)return null;throw C}}getComponent(){return this.component}setComponent(f){if(f.name!==this.name)throw Error(`Mismatching Component ${f.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=f,this.shouldAutoInitialize()){if(function(f){return"EAGER"===f.instantiationMode}(f))try{this.getOrInitializeService({instanceIdentifier:E})}catch(z){}for(const[f,w]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(f);try{const f=this.getOrInitializeService({instanceIdentifier:S});w.resolve(f)}catch(z){}}}}clearInstance(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;this.instancesDeferred.delete(f),this.instancesOptions.delete(f),this.instances.delete(f)}async delete(){const f=Array.from(this.instances.values());await Promise.all([...f.filter((f=>"INTERNAL"in f)).map((f=>f.INTERNAL.delete())),...f.filter((f=>"_delete"in f)).map((f=>f._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return this.instances.has(f)}getOptions(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return this.instancesOptions.get(f)||{}}initialize(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:z={}}=f,w=this.normalizeInstanceIdentifier(f.instanceIdentifier);if(this.isInitialized(w))throw Error(`${this.name}(${w}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const S=this.getOrInitializeService({instanceIdentifier:w,options:z});for(const[C,E]of this.instancesDeferred.entries()){w===this.normalizeInstanceIdentifier(C)&&E.resolve(S)}return S}Xk(f,z){var w;const S=this.normalizeInstanceIdentifier(z),C=null!==(w=this.onInitCallbacks.get(S))&&void 0!==w?w:new Set;C.add(f),this.onInitCallbacks.set(S,C);const E=this.instances.get(S);return E&&f(E,S),()=>{C.delete(f)}}invokeOnInitCallbacks(f,z){const w=this.onInitCallbacks.get(z);if(w)for(const C of w)try{C(f,z)}catch(S){}}getOrInitializeService(f){let{instanceIdentifier:z,options:w={}}=f,S=this.instances.get(z);if(!S&&this.component&&(S=this.component.instanceFactory(this.container,{instanceIdentifier:(C=z,C===E?void 0:C),options:w}),this.instances.set(z,S),this.instancesOptions.set(z,w),this.invokeOnInitCallbacks(S,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,S)}catch(F){}var C;return S||null}normalizeInstanceIdentifier(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return this.component?this.component.multipleInstances?f:E:f}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(f){this.name=f,this.providers=new Map}Me(f){const z=this.getProvider(f.name);if(z.isComponentSet())throw new Error(`Component ${f.name} has already been registered with ${this.name}`);z.setComponent(f)}addOrOverwriteComponent(f){this.getProvider(f.name).isComponentSet()&&this.providers.delete(f.name),this.Me(f)}getProvider(f){if(this.providers.has(f))return this.providers.get(f);const z=new F(f,this);return this.providers.set(f,z),z}getProviders(){return Array.from(this.providers.values())}}},11778:(f,z,w)=>{w.d(z,{b:()=>C,c:()=>u,g:()=>h,h:()=>X});const S=[];var C;!function(f){f[f.DEBUG=0]="DEBUG",f[f.VERBOSE=1]="VERBOSE",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.SILENT=5]="SILENT"}(C||(C={}));const E={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},F=C.INFO,J={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},x=function(f,z){if(z<f.logLevel)return;const w=(new Date).toISOString(),S=J[z];if(!S)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);for(var C=arguments.length,E=new Array(C>2?C-2:0),F=2;F<C;F++)E[F-2]=arguments[F];console[S](`[${w}]  ${f.name}:`,...E)};class u{constructor(f){this.name=f,this._logLevel=F,this._logHandler=x,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(f){if(!(f in C))throw new TypeError(`Invalid value "${f}" assigned to \`logLevel\``);this._logLevel=f}setLogLevel(f){this._logLevel="string"===typeof f?E[f]:f}get logHandler(){return this._logHandler}set logHandler(f){if("function"!==typeof f)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=f}get userLogHandler(){return this._userLogHandler}set userLogHandler(f){this._userLogHandler=f}debug(){for(var f=arguments.length,z=new Array(f),w=0;w<f;w++)z[w]=arguments[w];this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...z),this._logHandler(this,C.DEBUG,...z)}log(){for(var f=arguments.length,z=new Array(f),w=0;w<f;w++)z[w]=arguments[w];this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...z),this._logHandler(this,C.VERBOSE,...z)}info(){for(var f=arguments.length,z=new Array(f),w=0;w<f;w++)z[w]=arguments[w];this._userLogHandler&&this._userLogHandler(this,C.INFO,...z),this._logHandler(this,C.INFO,...z)}warn(){for(var f=arguments.length,z=new Array(f),w=0;w<f;w++)z[w]=arguments[w];this._userLogHandler&&this._userLogHandler(this,C.WARN,...z),this._logHandler(this,C.WARN,...z)}error(){for(var f=arguments.length,z=new Array(f),w=0;w<f;w++)z[w]=arguments[w];this._userLogHandler&&this._userLogHandler(this,C.ERROR,...z),this._logHandler(this,C.ERROR,...z)}}function h(f){S.forEach((z=>{z.setLogLevel(f)}))}function X(f,z){for(const w of S){let S=null;z&&z.level&&(S=E[z.level]),w.userLogHandler=null===f?null:function(z,w){for(var E=arguments.length,F=new Array(E>2?E-2:0),J=2;J<E;J++)F[J-2]=arguments[J];const x=F.map((f=>{if(null==f)return null;if("string"===typeof f)return f;if("number"===typeof f||"boolean"===typeof f)return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch(z){return null}})).filter((f=>f)).join(" ");w>=(null!==S&&void 0!==S?S:z.logLevel)&&f({level:C[w].toLowerCase(),message:x,args:F,type:z.name})}}}}}]);