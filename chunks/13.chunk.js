"use strict";(self.rsqbdnwe5e=self.rsqbdnwe5e||[]).push([[13],{12433:(N,p,T)=>{T.d(p,{d:()=>A});let A=!1},12398:(N,p,T)=>{T.d(p,{c:()=>b});var A=T(12354),a=T(12359),C=T(12194),U=T(12371),X=T(12231),y=T(12333),e=(T(12240),T(12402));class H{get wrapU(){return this._wrapU}set wrapU(N){this._wrapU=N}get wrapV(){return this._wrapV}set wrapV(N){this._wrapV=N}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(N){this._texture&&(this._texture.isCube=N)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(N){this._texture&&(this._texture.is3D=N)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(N){this._texture&&(this._texture.is2DArray=N)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(N){return void 0!==(null===N||void 0===N?void 0:N.shareDepth)}constructor(N){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=e.e.Zero(),this._cachedBaseSize=e.e.Zero(),this._initialSamplingMode=2,this._texture=H._IsRenderTargetWrapper(N)?N.texture:N,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(N){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(N,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var M=T(12409);class b extends H{set XX(N){this._hasAlpha!==N&&(this._hasAlpha=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get XX(){return this._hasAlpha}set getAlphaFromRGB(N){this._getAlphaFromRGB!==N&&(this._getAlphaFromRGB=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(N){this._coordinatesIndex!==N&&(this._coordinatesIndex=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(N){this._coordinatesMode!==N&&(this._coordinatesMode=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(N){this._wrapU=N}get wrapV(){return this._wrapV}set wrapV(N){this._wrapV=N}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(N){this._texture?this._texture.isCube=N:this._isCube=N}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(N){this._texture&&(this._texture.is3D=N)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(N){this._texture&&(this._texture.is2DArray=N)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(N){var p;if(this._texture){if(this._texture._gammaSpace===N)return;this._texture._gammaSpace=N}else{if(this._gammaSpace===N)return;this._gammaSpace=N}null===(p=this.KN())||void 0===p||p.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(N){var p;N!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=N),null===(p=this.KN())||void 0===p||p.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(N){this._texture&&(this._texture._lodGenerationOffset=N)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(N){this._texture&&(this._texture._lodGenerationScale=N)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(N){this._texture&&(this._texture._linearSpecularLOD=N)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(N){this._texture&&(this._texture._irradianceTexture=N)}get uid(){return this._uid||(this._uid=(0,y.b)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(N){this._onDisposeObserver&&this.SU.remove(this._onDisposeObserver),this._onDisposeObserver=this.SU.add(N)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=b.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.SU=new C.c,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,N?b._IsScene(N)?this._scene=N:this._engine=N:this._scene=X.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=p,this._uid=null}KN(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return U.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return U.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(N){}get canRescale(){return!1}_getFromCache(N,p,T,A,a,C){const U=this._getEngine();if(!U)return null;const X=U._getUseSRGBBuffer(!!a,p),y=U.getLoadedTexturesCache();for(let e=0;e<y.length;e++){const U=y[e];if((void 0===a||X===U._useSRGBBuffer)&&(void 0===A||A===U.invertY)&&U.url===N&&U.generateMipMaps===!p&&(!T||T===U.samplingMode)&&(void 0===C||C===U.isCube))return U.incrementReferences(),U}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const N=this.KN();N&&N.markAllMaterialsAsDirty(1)}readPixels(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,A=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,X=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const e=this._getEngine();if(!e)return null;const H=this.getSize();let M=H.width,b=H.height;0!==p&&(M/=Math.pow(2,p),b/=Math.pow(2,p),M=Math.round(M),b=Math.round(b)),X=Math.min(M,X),y=Math.min(b,y);try{return this._texture.isCube?e._readTexturePixels(this._texture,X,y,N,p,T,A,a,C,U):e._readTexturePixels(this._texture,X,y,-1,p,T,A,a,C,U)}catch(l){return null}}_readPixelsSync(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,A=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const C=this.getSize();let U=C.width,X=C.height;const y=this._getEngine();if(!y)return null;0!=p&&(U/=Math.pow(2,p),X/=Math.pow(2,p),U=Math.round(U),X=Math.round(X));try{return this._texture.isCube?y._readTexturePixelsSync(this._texture,U,X,N,p,T,A,a):y._readTexturePixelsSync(this._texture,U,X,-1,p,T,A,a)}catch(e){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const N=this._scene.textures.indexOf(this);if(N>=0&&this._scene.textures.splice(N,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const N=this._parentContainer.textures.indexOf(this);N>-1&&this._parentContainer.textures.splice(N,1),this._parentContainer=null}}this.SU.notifyObservers(this),this.SU.clear(),this.metadata=null,super.dispose()}serialize(){let N=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!N)return null;const p=M.e.Serialize(this);return M.e.AppendSerializedAnimations(this,p),p}static WhenAllReady(N,p){let T=N.length;if(0!==T)for(let A=0;A<N.length;A++){const a=N[A];if(a.isReady())0===--T&&p();else{const N=a.onLoadObservable;N?N.addOnce((()=>{0===--T&&p()})):0===--T&&p()}}else p()}static _IsScene(N){return"Scene"===N.getClassName()}}b.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,A.b)([(0,a.H)()],b.prototype,"uniqueId",void 0),(0,A.b)([(0,a.H)()],b.prototype,"name",void 0),(0,A.b)([(0,a.H)()],b.prototype,"displayName",void 0),(0,A.b)([(0,a.H)()],b.prototype,"metadata",void 0),(0,A.b)([(0,a.H)("XX")],b.prototype,"_hasAlpha",void 0),(0,A.b)([(0,a.H)("getAlphaFromRGB")],b.prototype,"_getAlphaFromRGB",void 0),(0,A.b)([(0,a.H)()],b.prototype,"level",void 0),(0,A.b)([(0,a.H)("coordinatesIndex")],b.prototype,"_coordinatesIndex",void 0),(0,A.b)([(0,a.H)()],b.prototype,"optimizeUVAllocation",void 0),(0,A.b)([(0,a.H)("coordinatesMode")],b.prototype,"_coordinatesMode",void 0),(0,A.b)([(0,a.H)()],b.prototype,"wrapU",null),(0,A.b)([(0,a.H)()],b.prototype,"wrapV",null),(0,A.b)([(0,a.H)()],b.prototype,"wrapR",void 0),(0,A.b)([(0,a.H)()],b.prototype,"anisotropicFilteringLevel",void 0),(0,A.b)([(0,a.H)()],b.prototype,"isCube",null),(0,A.b)([(0,a.H)()],b.prototype,"is3D",null),(0,A.b)([(0,a.H)()],b.prototype,"is2DArray",null),(0,A.b)([(0,a.H)()],b.prototype,"gammaSpace",null),(0,A.b)([(0,a.H)()],b.prototype,"invertZ",void 0),(0,A.b)([(0,a.H)()],b.prototype,"lodLevelInAlpha",void 0),(0,A.b)([(0,a.H)()],b.prototype,"lodGenerationOffset",null),(0,A.b)([(0,a.H)()],b.prototype,"lodGenerationScale",null),(0,A.b)([(0,a.H)()],b.prototype,"linearSpecularLOD",null),(0,A.b)([(0,a.z)()],b.prototype,"irradianceTexture",null),(0,A.b)([(0,a.H)()],b.prototype,"isRenderTarget",void 0)},12352:(N,p,T)=>{T.d(p,{c:()=>w});var A=T(12354),a=T(12359),C=T(12194),U=T(12371),X=T(12398),y=T(12331),e=T(12218),H=T(12264),M=T(12322),b=T(12429),l=T(12253);function k(N,p){let T=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const A=p.width,a=p.height;if(N instanceof Float32Array){let p=N.byteLength/N.BYTES_PER_ELEMENT;const T=new Uint8Array(p);for(;--p>=0;){let A=N[p];A<0?A=0:A>1&&(A=1),T[p]=255*A}N=T}const C=document.createElement("canvas");C.width=A,C.height=a;const U=C.getContext("2d");if(!U)return null;const X=U.createImageData(A,a);if(X.data.set(N),U.putImageData(X,0,0),T){const N=document.createElement("canvas");N.width=A,N.height=a;const p=N.getContext("2d");return p?(p.translate(0,a),p.scale(1,-1),p.drawImage(C,0,0),N.toDataURL("image/png")):null}return C.toDataURL("image/png")}function x(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const A=N.getInternalTexture();if(!A)return null;const a=N._readPixelsSync(p,T);return a?k(a,N.getSize(),A.invertY):null}async function I(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const A=N.getInternalTexture();if(!A)return null;const a=await N.readPixels(p,T);return a?k(a,N.getSize(),A.invertY):null}var L=T(12433),n=T(12409);class w extends X.c{static _CreateVideoTexture(N,p,T){arguments.length>5&&void 0!==arguments[5]||w.TRILINEAR_SAMPLINGMODE;throw(0,e.c)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(N){this._isBlocking=N}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(N,p,T,A){let a,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w.TRILINEAR_SAMPLINGMODE,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,e=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,M=arguments.length>8&&void 0!==arguments[8]&&arguments[8],b=arguments.length>9?arguments[9]:void 0,l=arguments.length>10?arguments[10]:void 0,k=arguments.length>11?arguments[11]:void 0,x=arguments.length>12?arguments[12]:void 0,I=arguments.length>13?arguments[13]:void 0;super(p),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new C.c,this._isBlocking=!0,this.name=N||"",this.url=N;let n=!1,g=null,P=!0;"object"===typeof T&&null!==T?(a=T.noMipmap??!1,A=T.invertY??!L.d,U=T.samplingMode??w.TRILINEAR_SAMPLINGMODE,X=T.B??null,y=T.onError??null,e=T.buffer??null,M=T.deleteBuffer??!1,b=T.format,l=T.mimeType,k=T.loaderOptions,x=T.creationFlags,n=T.useSRGBBuffer??!1,g=T.internalTexture??null,P=T.gammaSpace??P,I=T.forcedExtension??I):a=!!T,this._gammaSpace=P,this._noMipmap=a,this._invertY=void 0===A?!L.d:A,this._initialSamplingMode=U,this._buffer=e,this._deleteBuffer=M,this._mimeType=l,this._loaderOptions=k,this._creationFlags=x,this._useSRGBBuffer=n,this._forcedExtension=I,void 0!==b&&(this._format=b);const i=this.KN(),K=this._getEngine();if(!K)return;K.onBeforeTextureInitObservable.notifyObservers(this);const F=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),X&&X(),!this.isBlocking&&i&&i.resetCachedMaterial()},v=(N,p)=>{this._loadingError=!0,this._errorObject={message:N,exception:p},y&&y(N,p),w.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!g)return this._delayedOnLoad=F,void(this._delayedOnError=v);if(this._texture=g??this._getFromCache(this.url,a,U,this._invertY,n,this.isCube),this._texture)if(this._texture.isReady)H.d.SetImmediate((()=>F()));else{const N=this._texture.onLoadedObservable.add(F);this._texture.onErrorObservable.add((p=>{var T;v(p.message,p.exception),null===(T=this._texture)||void 0===T||T.onLoadedObservable.remove(N)}))}else if(i&&i.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=F,this._delayedOnError=v;else{try{this._texture=K.createTexture(this.url,a,this._invertY,i,U,F,v,this._buffer,void 0,this._format,this._forcedExtension,l,k,x,n)}catch(W){throw v("error loading",W),W}M&&(this._buffer=null)}}updateURL(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,T=arguments.length>2?arguments[2]:void 0,A=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.KN().markAllMaterialsAsDirty(1,(N=>N.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=N),this.url=N,this._buffer=p,this._forcedExtension=A,this.delayLoadState=4,T&&(this._delayedOnLoad=T),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const N=this.KN();N&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?H.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=N.getEngine().createTexture(this.url,this._noMipmap,this._invertY,N,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(N,p,T,A){N*=this._cachedUScale,p*=this._cachedVScale,N-=this.uRotationCenter*this._cachedUScale,p-=this.vRotationCenter*this._cachedVScale,T-=this.wRotationCenter,U.xp.TransformCoordinatesFromFloatsToRef(N,p,T,this._rowGenerationMatrix,A),A.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,A.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,A.z+=this.wRotationCenter}getTextureMatrix(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*N===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*N,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=U.Matrix.Zero(),this._rowGenerationMatrix=new U.Matrix,this._t0=U.xp.Zero(),this._t1=U.xp.Zero(),this._t2=U.xp.Zero()),U.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(U.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,U.TmpVectors.Matrix[0]),U.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,U.TmpVectors.Matrix[1]),U.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,U.TmpVectors.Matrix[2]),U.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,U.TmpVectors.Matrix[3]),U.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.iM(this._t0),this._t2.iM(this._t0),U.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const p=this.KN();if(!p)return this._cachedTextureMatrix;const T=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&T!==this._cachedIdentity3x2&&p.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const N=this.KN();if(!N)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==w.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===N.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=U.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=U.Matrix.Zero());const p=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case w.PLANAR_MODE:U.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case w.PROJECTION_MODE:{U.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const p=N.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=p.updateFlag,p.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:U.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return p&&N.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const N={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,B:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return n.e.Clone((()=>new w(this._texture?this._texture.url:null,this.KN(),N)),this)}serialize(){var N;const p=this.name;w.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const T=super.serialize(w._SerializeInternalTextureUniqueId);if(!T)return null;if(w.SerializeBuffers||w.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))T.base64String=this._buffer,T.name=T.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const N=this.mimeType||"image/png";T.base64String=`data:${N};base64,${(0,l.g)(this._buffer)}`}else(w.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(T.base64String=!this._engine||this._engine._features.supportSyncTextureRead?x(this):I(this));var A;(T.invertY=this._invertY,T.samplingMode=this.samplingMode,T._creationFlags=this._creationFlags,T._useSRGBBuffer=this._useSRGBBuffer,w._SerializeInternalTextureUniqueId)&&(T.internalTextureUniqueId=null===(A=this._texture)||void 0===A?void 0:A.uniqueId);return T.internalTextureLabel=null===(N=this._texture)||void 0===N?void 0:N.label,T.noMipmap=this._noMipmap,this.name=p,T}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(N,p,T){if(N.customType){const A=M.c.Instantiate(N.customType).Parse(N,p,T);return N.samplingMode&&A.updateSamplingMode&&A._samplingMode&&A._samplingMode!==N.samplingMode&&A.updateSamplingMode(N.samplingMode),A}if(N.isCube&&!N.isRenderTarget)return w._CubeTextureParser(N,p,T);const A=void 0!==N.internalTextureUniqueId;if(!N.name&&!N.isRenderTarget&&!A)return null;let a;if(A){const T=p.getEngine().getLoadedTexturesCache();for(const p of T)if(p.uniqueId===N.internalTextureUniqueId){a=p;break}}const C=p=>{if(p&&p._texture&&(p._texture._cachedWrapU=null,p._texture._cachedWrapV=null,p._texture._cachedWrapR=null),N.samplingMode){const T=N.samplingMode;p&&p.samplingMode!==T&&p.updateSamplingMode(T)}if(p&&N.animations)for(let T=0;T<N.animations.length;T++){const A=N.animations[T],a=(0,y.c)("BABYLON.Animation");a&&p.animations.push(a.Parse(A))}p&&p._texture&&(A&&!a&&p._texture._setUniqueId(N.internalTextureUniqueId),p._texture.label=N.internalTextureLabel)};return n.e.Parse((()=>{let A=!0;if(N.noMipmap&&(A=!1),N.mirrorPlane){const T=w._CreateMirror(N.name,N.renderTargetSize,p,A);return T._waitingRenderList=N.renderList,T.mirrorPlane=b.b.gp(N.mirrorPlane),C(T),T}if(N.isRenderTarget){let T=null;if(N.isCube){if(p.reflectionProbes)for(let A=0;A<p.reflectionProbes.length;A++){const T=p.reflectionProbes[A];if(T.name===N.name)return T.cubeTexture}}else T=w._CreateRenderTargetTexture(N.name,N.renderTargetSize,p,A,N._creationFlags??0),T._waitingRenderList=N.renderList;return C(T),T}if(N.isVideo){const a=w._CreateVideoTexture(T+(N.url||N.name),T+(N.src||N.url),p,A,N.invertY,N.samplingMode,N.settings||{});return C(a),a}{let U;if(N.base64String&&!a)U=w.CreateFromBase64String(N.base64String,N.base64String,p,!A,N.invertY,N.samplingMode,(()=>{C(U)}),N._creationFlags??0,N._useSRGBBuffer??!1),U.name=N.name;else{let X;X=N.name&&(N.name.indexOf("://")>0||N.name.startsWith("data:"))?N.name:T+N.name,N.url&&(N.url.startsWith("data:")||w.UseSerializedUrlIfAny)&&(X=N.url);const y={noMipmap:!A,invertY:N.invertY,samplingMode:N.samplingMode,B:()=>{C(U)},internalTexture:a};U=new w(X,p,y)}return U}}),N,p)}static CreateFromBase64String(N,p,T,A,a){let C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w.TRILINEAR_SAMPLINGMODE;return new w("data:"+p,T,A,a,C,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,N,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(N,p,T){let A=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w.TRILINEAR_SAMPLINGMODE,X=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,e=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,H=arguments.length>10?arguments[10]:void 0,M=arguments.length>11?arguments[11]:void 0;return"data:"!==N.substring(0,5)&&(N="data:"+N),new w(N,T,a,C,U,X,y,p,A,e,void 0,void 0,H,M)}}w.SerializeBuffers=!0,w.ForceSerializeBuffers=!1,w.OnTextureLoadErrorObservable=new C.c,w._SerializeInternalTextureUniqueId=!1,w._CubeTextureParser=(N,p,T)=>{throw(0,e.c)("CubeTexture")},w._CreateMirror=(N,p,T,A)=>{throw(0,e.c)("MirrorTexture")},w._CreateRenderTargetTexture=(N,p,T,A,a)=>{throw(0,e.c)("RenderTargetTexture")},w.NEAREST_SAMPLINGMODE=1,w.NEAREST_NEAREST_MIPLINEAR=8,w.BILINEAR_SAMPLINGMODE=2,w.LINEAR_LINEAR_MIPNEAREST=11,w.TRILINEAR_SAMPLINGMODE=3,w.LINEAR_LINEAR_MIPLINEAR=3,w.NEAREST_NEAREST_MIPNEAREST=4,w.NEAREST_LINEAR_MIPNEAREST=5,w.NEAREST_LINEAR_MIPLINEAR=6,w.NEAREST_LINEAR=7,w.NEAREST_NEAREST=1,w.LINEAR_NEAREST_MIPNEAREST=9,w.LINEAR_NEAREST_MIPLINEAR=10,w.LINEAR_LINEAR=2,w.LINEAR_NEAREST=12,w.EXPLICIT_MODE=0,w.SPHERICAL_MODE=1,w.PLANAR_MODE=2,w.CUBIC_MODE=3,w.PROJECTION_MODE=4,w.SKYBOX_MODE=5,w.INVCUBIC_MODE=6,w.EQUIRECTANGULAR_MODE=7,w.FIXED_EQUIRECTANGULAR_MODE=8,w.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,w.CLAMP_ADDRESSMODE=0,w.WRAP_ADDRESSMODE=1,w.MIRROR_ADDRESSMODE=2,w.UseSerializedUrlIfAny=!1,(0,A.b)([(0,a.H)()],w.prototype,"url",void 0),(0,A.b)([(0,a.H)()],w.prototype,"uOffset",void 0),(0,A.b)([(0,a.H)()],w.prototype,"vOffset",void 0),(0,A.b)([(0,a.H)()],w.prototype,"uScale",void 0),(0,A.b)([(0,a.H)()],w.prototype,"vScale",void 0),(0,A.b)([(0,a.H)()],w.prototype,"uAng",void 0),(0,A.b)([(0,a.H)()],w.prototype,"vAng",void 0),(0,A.b)([(0,a.H)()],w.prototype,"wAng",void 0),(0,A.b)([(0,a.H)()],w.prototype,"uRotationCenter",void 0),(0,A.b)([(0,a.H)()],w.prototype,"vRotationCenter",void 0),(0,A.b)([(0,a.H)()],w.prototype,"wRotationCenter",void 0),(0,A.b)([(0,a.H)()],w.prototype,"homogeneousRotationInUVTransform",void 0),(0,A.b)([(0,a.H)()],w.prototype,"isBlocking",null),(0,y.d)("BABYLON.Texture",w),n.e._TextureParser=w.Parse},12429:(N,p,T)=>{T.d(p,{b:()=>a});var A=T(12371);class a{constructor(N,p,T,a){this.normal=new A.xp(N,p,T),this.d=a}UX(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new a(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let N=this.normal.getHashCode();return N=397*N^this.d,N}normalize(){const N=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let p=0;return 0!==N&&(p=1/N),this.normal.x*=p,this.normal.y*=p,this.normal.z*=p,this.d*=p,this}transform(N){const p=a._TmpMatrix;N.invertToRef(p);const T=p.m,A=this.normal.x,C=this.normal.y,U=this.normal.z,X=this.d,y=A*T[0]+C*T[1]+U*T[2]+X*T[3],e=A*T[4]+C*T[5]+U*T[6]+X*T[7],H=A*T[8]+C*T[9]+U*T[10]+X*T[11],M=A*T[12]+C*T[13]+U*T[14]+X*T[15];return new a(y,e,H,M)}dotCoordinate(N){return this.normal.x*N.x+this.normal.y*N.y+this.normal.z*N.z+this.d}copyFromPoints(N,p,T){const A=p.x-N.x,a=p.y-N.y,C=p.z-N.z,U=T.x-N.x,X=T.y-N.y,y=T.z-N.z,e=a*y-C*X,H=C*U-A*y,M=A*X-a*U,b=Math.sqrt(e*e+H*H+M*M);let l;return l=0!==b?1/b:0,this.normal.x=e*l,this.normal.y=H*l,this.normal.z=M*l,this.d=-(this.normal.x*N.x+this.normal.y*N.y+this.normal.z*N.z),this}isFrontFacingTo(N,p){return A.xp.Dot(this.normal,N)<=p}signedDistanceTo(N){return A.xp.Dot(N,this.normal)+this.d}static gp(N){return new a(N[0],N[1],N[2],N[3])}static FromPoints(N,p,T){const A=new a(0,0,0,0);return A.copyFromPoints(N,p,T),A}static FromPositionAndNormal(N,p){const T=new a(0,0,0,0);return this.FromPositionAndNormalToRef(N,p,T)}static FromPositionAndNormalToRef(N,p,T){return T.normal.A(p),T.normal.normalize(),T.d=-N.dot(T.normal),T}static SignedDistanceToPlaneFromPositionAndNormal(N,p,T){const a=-(p.x*N.x+p.y*N.y+p.z*N.z);return A.xp.Dot(T,p)+a}}a._TmpMatrix=A.Matrix.Identity()},12402:(N,p,T)=>{T.d(p,{e:()=>A});class A{constructor(N,p){this.width=N,this.height=p}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let N=0|this.width;return N=397*N^this.height,N}A(N){this.width=N.width,this.height=N.height}kX(N,p){return this.width=N,this.height=p,this}set(N,p){return this.kX(N,p)}multiplyByFloats(N,p){return new A(this.width*N,this.height*p)}clone(){return new A(this.width,this.height)}equals(N){return!!N&&(this.width===N.width&&this.height===N.height)}get surface(){return this.width*this.height}static Zero(){return new A(0,0)}add(N){return new A(this.width+N.width,this.height+N.height)}Ip(N){return new A(this.width-N.width,this.height-N.height)}scale(N){return new A(this.width*N,this.height*N)}static Lerp(N,p,T){const a=N.width+(p.width-N.width)*T,C=N.height+(p.height-N.height)*T;return new A(a,C)}}},12367:(N,p,T)=>{T.d(p,{b:()=>C,c:()=>U});const A={},a={};function C(N){const p=N.getClassName();return a[p]||(a[p]={}),a[p]}function U(N){const p=N.getClassName();if(A[p])return A[p];A[p]={};const T=A[p];let C=N,U=p;for(;U;){const N=a[U];for(const a in N)T[a]=N[a];let p,A=!1;do{if(p=Object.getPrototypeOf(C),!p.getClassName){A=!0;break}if(p.getClassName()!==U)break;C=p}while(p);if(A)break;U=p.getClassName(),C=p}return T}},12359:(N,p,T)=>{T.d(p,{B:()=>H,E:()=>M,H:()=>U,d:()=>C,e:()=>n,g:()=>l,j:()=>y,m:()=>k,n:()=>e,r:()=>x,s:()=>L,w:()=>b,y:()=>I,z:()=>X});var A=T(12367);function a(N,p){return(T,a)=>{const C=(0,A.b)(T);C[a]||(C[a]={type:N,sourceName:p})}}function C(N){return function(N){let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(T,A)=>{const a=p||"_"+A;Object.defineProperty(T,A,{get:function(){return this[a]},set:function(p){var A;"function"===typeof(null===(A=this[a])||void 0===A?void 0:A.equals)&&this[a].equals(p)||this[a]!==p&&(this[a]=p,T[N].apply(this))},enumerable:!0,configurable:!0})}}(N,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function U(N){return a(0,N)}function X(N){return a(1,N)}function y(N){return a(2,N)}function e(N){return a(3,N)}function H(N){return a(4,N)}function M(N){return a(5,N)}function b(N){return a(6,N)}function l(N){return a(7,N)}function k(N){return a(8,N)}function x(N){return a(9,N)}function I(N){return a(10,N)}function L(N){return a(12,N)}function n(N,p,T,A){const a=T.value;T.value=function(){let T=a;if("undefined"!==typeof _native&&_native[p]){const N=_native[p];T=A?function(){return A(...arguments)?N(...arguments):a(...arguments)}:N}return N[p]=T,T(...arguments)}}n.filter=function(N){return(p,T,A)=>n(p,T,A,N)}},12409:(N,p,T)=>{T.d(p,{e:()=>e});var A=T(12218),a=T(12416),C=T(12421),U=T(12371),X=T(12367);const y=function(N,p,T){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const C=N();a.b&&a.b.HasTags(p)&&a.b.AddTagsTo(C,a.b.GetTags(p,!0));const U=(0,X.c)(C),y={};for(const a in U){const N=U[a],X=p[a],H=N.type;if(void 0!==X&&null!==X&&("uniqueId"!==a||e.AllowLoadingUniqueId))switch(H){case 0:case 6:case 9:case 11:C[a]=X;break;case 1:A.cloneTexturesOnlyOnce&&y[X.uniqueId]?C[a]=y[X.uniqueId]:(C[a]=T||X.isRenderTarget?X:X.clone(),y[X.uniqueId]=C[a]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:C[a]=T?X:X.clone()}}return C};class e{static AppendSerializedAnimations(N,p){if(N.animations){p.animations=[];for(let T=0;T<N.animations.length;T++){const A=N.animations[T];p.animations.push(A.serialize())}}}static Serialize(N,p){p||(p={}),a.b&&(p.tags=a.b.GetTags(N));const T=(0,X.c)(N);for(const A in T){const a=T[A],C=a.sourceName||A,U=a.type,X=N[A];if(void 0!==X&&null!==X&&("uniqueId"!==A||e.AllowLoadingUniqueId))switch(U){case 0:p[C]=X;break;case 1:case 3:case 7:case 9:p[C]=X.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:p[C]=X.UX();break;case 6:case 11:p[C]=X.id}}return p}static ParseProperties(N,p,T,A){A||(A="");const a=(0,X.c)(p);for(const X in a){const y=a[X],H=N[y.sourceName||X],M=y.type;if(void 0!==H&&null!==H&&("uniqueId"!==X||e.AllowLoadingUniqueId)){const N=p;switch(M){case 0:N[X]=H;break;case 1:T&&(N[X]=e._TextureParser(H,T,A));break;case 2:N[X]=C.wp.gp(H);break;case 3:N[X]=e._FresnelParametersParser(H);break;case 4:N[X]=U.Vector2.gp(H);break;case 5:N[X]=U.xp.gp(H);break;case 6:T&&(N[X]=T.getLastMeshById(H));break;case 7:N[X]=e._ColorCurvesParser(H);break;case 8:N[X]=C.LX.gp(H);break;case 9:N[X]=e._ImageProcessingConfigurationParser(H);break;case 10:N[X]=U.Quaternion.gp(H);break;case 11:T&&(N[X]=T.getCameraById(H));break;case 12:N[X]=U.Matrix.gp(H)}}}}static Parse(N,p,T){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const C=N();return a.b&&a.b.AddTagsTo(C,p.tags),e.ParseProperties(p,C,T,A),C}static Clone(N,p){return y(N,p,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(N,p){return y(N,p,!0)}}e.AllowLoadingUniqueId=!1,e._ImageProcessingConfigurationParser=N=>{throw(0,A.c)("ImageProcessingConfiguration")},e._FresnelParametersParser=N=>{throw(0,A.c)("FresnelParameters")},e._ColorCurvesParser=N=>{throw(0,A.c)("ColorCurves")},e._TextureParser=(N,p,T)=>{throw(0,A.c)("Texture")}},12416:(N,p,T)=>{T.d(p,{b:()=>a});class A{static Eval(N,p){return"true"===(N=N.match(/\([^()]*\)/g)?N.replace(/\([^()]*\)/g,(N=>(N=N.slice(1,N.length-1),A._HandleParenthesisContent(N,p)))):A._HandleParenthesisContent(N,p))||"false"!==N&&A.Eval(N,p)}static _HandleParenthesisContent(N,p){let T;p=p||(N=>"true"===N);const a=N.split("||");for(const C in a)if(Object.prototype.hasOwnProperty.call(a,C)){let N=A._SimplifyNegation(a[C].trim());const U=N.split("&&");if(U.length>1)for(let a=0;a<U.length;++a){const C=A._SimplifyNegation(U[a].trim());if(T="true"!==C&&"false"!==C?"!"===C[0]?!p(C.substring(1)):p(C):"true"===C,!T){N="false";break}}if(T||"true"===N){T=!0;break}T="true"!==N&&"false"!==N?"!"===N[0]?!p(N.substring(1)):p(N):"true"===N}return T?"true":"false"}static _SimplifyNegation(N){return"!true"===(N=(N=N.replace(/^[\s!]+/,(N=>(N=N.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?N="false":"!false"===N&&(N="true"),N}}class a{static EnableFor(N){N._tags=N._tags||{},N.hasTags=()=>a.HasTags(N),N.addTags=p=>a.AddTagsTo(N,p),N.removeTags=p=>a.RemoveTagsFrom(N,p),N.matchesTagsQuery=p=>a.MatchesQuery(N,p)}static DisableFor(N){delete N._tags,delete N.hasTags,delete N.addTags,delete N.removeTags,delete N.matchesTagsQuery}static HasTags(N){if(!N._tags)return!1;const p=N._tags;for(const T in p)if(Object.prototype.hasOwnProperty.call(p,T))return!0;return!1}static GetTags(N){let p=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!N._tags)return null;if(p){const p=[];for(const T in N._tags)Object.prototype.hasOwnProperty.call(N._tags,T)&&!0===N._tags[T]&&p.push(T);return p.join(" ")}return N._tags}static AddTagsTo(N,p){if(!p)return;if("string"!==typeof p)return;const T=p.split(" ");for(const A of T)a._AddTagTo(N,A)}static _AddTagTo(N,p){""!==(p=p.trim())&&"true"!==p&&"false"!==p&&(p.match(/[\s]/)||p.match(/^([!]|([|]|[&]){2})/)||(a.EnableFor(N),N._tags[p]=!0))}static RemoveTagsFrom(N,p){if(!a.HasTags(N))return;const T=p.split(" ");for(const A in T)a._RemoveTagFrom(N,T[A])}static _RemoveTagFrom(N,p){delete N._tags[p]}static MatchesQuery(N,p){return void 0===p||(""===p?a.HasTags(N):A.Eval(p,(p=>a.HasTags(N)&&N._tags[p])))}}},12354:(N,p,T)=>{T.d(p,{b:()=>A});function A(N,p,T,A){var a,C=arguments.length,U=C<3?p:null===A?A=Object.getOwnPropertyDescriptor(p,T):A;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)U=Reflect.decorate(N,p,T,A);else for(var X=N.length-1;X>=0;X--)(a=N[X])&&(U=(C<3?a(U):C>3?a(p,T,U):a(p,T))||U);return C>3&&U&&Object.defineProperty(p,T,U),U}Object.create;Object.create}}]);