"use strict";(self.wy695la1oic=self.wy695la1oic||[]).push([[13],{11433:(S,v,D)=>{D.d(v,{b:()=>z});let z=!1},11400:(S,v,D)=>{D.d(v,{e:()=>w});var z=D(11358),e=D(11364),N=D(11179),m=D(11371),B=D(11222),g=D(11336),E=(D(11229),D(11408));class h{get wrapU(){return this._wrapU}set wrapU(S){this._wrapU=S}get wrapV(){return this._wrapV}set wrapV(S){this._wrapV=S}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(S){this._texture&&(this._texture.isCube=S)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(S){this._texture&&(this._texture.is3D=S)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(S){this._texture&&(this._texture.is2DArray=S)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(S){return void 0!==(null===S||void 0===S?void 0:S.shareDepth)}constructor(S){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=E.b.Zero(),this._cachedBaseSize=E.b.Zero(),this._initialSamplingMode=2,this._texture=h._IsRenderTargetWrapper(S)?S.texture:S,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(S){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(S,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var A=D(11415);class w extends h{set de(S){this._hasAlpha!==S&&(this._hasAlpha=S,this._scene&&this._scene.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))))}get de(){return this._hasAlpha}set getAlphaFromRGB(S){this._getAlphaFromRGB!==S&&(this._getAlphaFromRGB=S,this._scene&&this._scene.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(S){this._coordinatesIndex!==S&&(this._coordinatesIndex=S,this._scene&&this._scene.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(S){this._coordinatesMode!==S&&(this._coordinatesMode=S,this._scene&&this._scene.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(S){this._wrapU=S}get wrapV(){return this._wrapV}set wrapV(S){this._wrapV=S}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(S){this._texture?this._texture.isCube=S:this._isCube=S}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(S){this._texture&&(this._texture.is3D=S)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(S){this._texture&&(this._texture.is2DArray=S)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(S){var v;if(this._texture){if(this._texture._gammaSpace===S)return;this._texture._gammaSpace=S}else{if(this._gammaSpace===S)return;this._gammaSpace=S}null===(v=this.xS())||void 0===v||v.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(S){var v;S!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=S),null===(v=this.xS())||void 0===v||v.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(S){this._texture&&(this._texture._lodGenerationOffset=S)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(S){this._texture&&(this._texture._lodGenerationScale=S)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(S){this._texture&&(this._texture._linearSpecularLOD=S)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(S){this._texture&&(this._texture._irradianceTexture=S)}get uid(){return this._uid||(this._uid=(0,g.e)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(S){this._onDisposeObserver&&this.Se.remove(this._onDisposeObserver),this._onDisposeObserver=this.Se.add(S)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=w.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Se=new N.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,S?w._IsScene(S)?this._scene=S:this._engine=S:this._scene=B.c.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=v,this._uid=null}xS(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return m.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return m.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(S){}get canRescale(){return!1}_getFromCache(S,v,D,z,e,N){const m=this._getEngine();if(!m)return null;const B=m._getUseSRGBBuffer(!!e,v),g=m.getLoadedTexturesCache();for(let E=0;E<g.length;E++){const m=g[E];if((void 0===e||B===m._useSRGBBuffer)&&(void 0===z||z===m.invertY)&&m.url===S&&m.generateMipMaps===!v&&(!D||D===m.samplingMode)&&(void 0===N||N===m.isCube))return m.incrementReferences(),m}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const S=this.xS();S&&S.markAllMaterialsAsDirty(1)}readPixels(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=arguments.length>4&&void 0!==arguments[4]&&arguments[4],N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,B=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const E=this._getEngine();if(!E)return null;const h=this.getSize();let A=h.width,w=h.height;0!==v&&(A/=Math.pow(2,v),w/=Math.pow(2,v),A=Math.round(A),w=Math.round(w)),B=Math.min(A,B),g=Math.min(w,g);try{return this._texture.isCube?E._readTexturePixels(this._texture,B,g,S,v,D,z,e,N,m):E._readTexturePixels(this._texture,B,g,-1,v,D,z,e,N,m)}catch(n){return null}}_readPixelsSync(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],e=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const N=this.getSize();let m=N.width,B=N.height;const g=this._getEngine();if(!g)return null;0!=v&&(m/=Math.pow(2,v),B/=Math.pow(2,v),m=Math.round(m),B=Math.round(B));try{return this._texture.isCube?g._readTexturePixelsSync(this._texture,m,B,S,v,D,z,e):g._readTexturePixelsSync(this._texture,m,B,-1,v,D,z,e)}catch(E){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const S=this._scene.textures.indexOf(this);if(S>=0&&this._scene.textures.splice(S,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const S=this._parentContainer.textures.indexOf(this);S>-1&&this._parentContainer.textures.splice(S,1),this._parentContainer=null}}this.Se.notifyObservers(this),this.Se.clear(),this.metadata=null,super.dispose()}serialize(){let S=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!S)return null;const v=A.b.Serialize(this);return A.b.AppendSerializedAnimations(this,v),v}static WhenAllReady(S,v){let D=S.length;if(0!==D)for(let z=0;z<S.length;z++){const e=S[z];if(e.isReady())0===--D&&v();else{const S=e.onLoadObservable;S?S.addOnce((()=>{0===--D&&v()})):0===--D&&v()}}else v()}static _IsScene(S){return"Scene"===S.getClassName()}}w.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,z.b)([(0,e.L)()],w.prototype,"uniqueId",void 0),(0,z.b)([(0,e.L)()],w.prototype,"name",void 0),(0,z.b)([(0,e.L)()],w.prototype,"displayName",void 0),(0,z.b)([(0,e.L)()],w.prototype,"metadata",void 0),(0,z.b)([(0,e.L)("de")],w.prototype,"_hasAlpha",void 0),(0,z.b)([(0,e.L)("getAlphaFromRGB")],w.prototype,"_getAlphaFromRGB",void 0),(0,z.b)([(0,e.L)()],w.prototype,"level",void 0),(0,z.b)([(0,e.L)("coordinatesIndex")],w.prototype,"_coordinatesIndex",void 0),(0,z.b)([(0,e.L)()],w.prototype,"optimizeUVAllocation",void 0),(0,z.b)([(0,e.L)("coordinatesMode")],w.prototype,"_coordinatesMode",void 0),(0,z.b)([(0,e.L)()],w.prototype,"wrapU",null),(0,z.b)([(0,e.L)()],w.prototype,"wrapV",null),(0,z.b)([(0,e.L)()],w.prototype,"wrapR",void 0),(0,z.b)([(0,e.L)()],w.prototype,"anisotropicFilteringLevel",void 0),(0,z.b)([(0,e.L)()],w.prototype,"isCube",null),(0,z.b)([(0,e.L)()],w.prototype,"is3D",null),(0,z.b)([(0,e.L)()],w.prototype,"is2DArray",null),(0,z.b)([(0,e.L)()],w.prototype,"gammaSpace",null),(0,z.b)([(0,e.L)()],w.prototype,"invertZ",void 0),(0,z.b)([(0,e.L)()],w.prototype,"lodLevelInAlpha",void 0),(0,z.b)([(0,e.L)()],w.prototype,"lodGenerationOffset",null),(0,z.b)([(0,e.L)()],w.prototype,"lodGenerationScale",null),(0,z.b)([(0,e.L)()],w.prototype,"linearSpecularLOD",null),(0,z.b)([(0,e.D)()],w.prototype,"irradianceTexture",null),(0,z.b)([(0,e.L)()],w.prototype,"isRenderTarget",void 0)},11350:(S,v,D)=>{D.d(v,{d:()=>u});var z=D(11358),e=D(11364),N=D(11179),m=D(11371),B=D(11400),g=D(11329),E=D(11207),h=D(11262),A=D(11321),w=D(11431),n=D(11244);function R(S,v){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const z=v.width,e=v.height;if(S instanceof Float32Array){let v=S.byteLength/S.BYTES_PER_ELEMENT;const D=new Uint8Array(v);for(;--v>=0;){let z=S[v];z<0?z=0:z>1&&(z=1),D[v]=255*z}S=D}const N=document.createElement("canvas");N.width=z,N.height=e;const m=N.getContext("2d");if(!m)return null;const B=m.createImageData(z,e);if(B.data.set(S),m.putImageData(B,0,0),D){const S=document.createElement("canvas");S.width=z,S.height=e;const v=S.getContext("2d");return v?(v.translate(0,e),v.scale(1,-1),v.drawImage(N,0,0),S.toDataURL("image/png")):null}return N.toDataURL("image/png")}function O(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const z=S.getInternalTexture();if(!z)return null;const e=S._readPixelsSync(v,D);return e?R(e,S.getSize(),z.invertY):null}async function I(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const z=S.getInternalTexture();if(!z)return null;const e=await S.readPixels(v,D);return e?R(e,S.getSize(),z.invertY):null}var K=D(11433),q=D(11415);class u extends B.e{static _CreateVideoTexture(S,v,D){arguments.length>5&&void 0!==arguments[5]||u.TRILINEAR_SAMPLINGMODE;throw(0,E.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(S){this._isBlocking=S}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(S,v,D,z){let e,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.TRILINEAR_SAMPLINGMODE,B=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,E=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,A=arguments.length>8&&void 0!==arguments[8]&&arguments[8],w=arguments.length>9?arguments[9]:void 0,n=arguments.length>10?arguments[10]:void 0,R=arguments.length>11?arguments[11]:void 0,O=arguments.length>12?arguments[12]:void 0,I=arguments.length>13?arguments[13]:void 0;super(v),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new N.d,this._isBlocking=!0,this.name=S||"",this.url=S;let q=!1,s=null,r=!0;"object"===typeof D&&null!==D?(e=D.noMipmap??!1,z=D.invertY??!K.b,m=D.samplingMode??u.TRILINEAR_SAMPLINGMODE,B=D.l??null,g=D.onError??null,E=D.buffer??null,A=D.deleteBuffer??!1,w=D.format,n=D.mimeType,R=D.loaderOptions,O=D.creationFlags,q=D.useSRGBBuffer??!1,s=D.internalTexture??null,r=D.gammaSpace??r,I=D.forcedExtension??I):e=!!D,this._gammaSpace=r,this._noMipmap=e,this._invertY=void 0===z?!K.b:z,this._initialSamplingMode=m,this._buffer=E,this._deleteBuffer=A,this._mimeType=n,this._loaderOptions=R,this._creationFlags=O,this._useSRGBBuffer=q,this._forcedExtension=I,void 0!==w&&(this._format=w);const d=this.xS(),x=this._getEngine();if(!x)return;x.onBeforeTextureInitObservable.notifyObservers(this);const W=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),B&&B(),!this.isBlocking&&d&&d.resetCachedMaterial()},p=(S,v)=>{this._loadingError=!0,this._errorObject={message:S,exception:v},g&&g(S,v),u.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!s)return this._delayedOnLoad=W,void(this._delayedOnError=p);if(this._texture=s??this._getFromCache(this.url,e,m,this._invertY,q,this.isCube),this._texture)if(this._texture.isReady)h.b.SetImmediate((()=>W()));else{const S=this._texture.onLoadedObservable.add(W);this._texture.onErrorObservable.add((v=>{var D;p(v.message,v.exception),null===(D=this._texture)||void 0===D||D.onLoadedObservable.remove(S)}))}else if(d&&d.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=W,this._delayedOnError=p;else{try{this._texture=x.createTexture(this.url,e,this._invertY,d,m,W,p,this._buffer,void 0,this._format,this._forcedExtension,n,R,O,q)}catch(b){throw p("error loading",b),b}A&&(this._buffer=null)}}updateURL(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,D=arguments.length>2?arguments[2]:void 0,z=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.xS().markAllMaterialsAsDirty(1,(S=>S.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=S),this.url=S,this._buffer=v,this._forcedExtension=z,this.delayLoadState=4,D&&(this._delayedOnLoad=D),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const S=this.xS();S&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?h.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=S.getEngine().createTexture(this.url,this._noMipmap,this._invertY,S,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(S,v,D,z){S*=this._cachedUScale,v*=this._cachedVScale,S-=this.uRotationCenter*this._cachedUScale,v-=this.vRotationCenter*this._cachedVScale,D-=this.wRotationCenter,m.Rv.TransformCoordinatesFromFloatsToRef(S,v,D,this._rowGenerationMatrix,z),z.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,z.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,z.z+=this.wRotationCenter}getTextureMatrix(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*S===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*S,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=m.Matrix.Zero(),this._rowGenerationMatrix=new m.Matrix,this._t0=m.Rv.Zero(),this._t1=m.Rv.Zero(),this._t2=m.Rv.Zero()),m.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(m.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,m.TmpVectors.Matrix[0]),m.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,m.TmpVectors.Matrix[1]),m.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,m.TmpVectors.Matrix[2]),m.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,m.TmpVectors.Matrix[3]),m.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(m.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(m.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(m.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.tA(this._t0),this._t2.tA(this._t0),m.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const v=this.xS();if(!v)return this._cachedTextureMatrix;const D=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&D!==this._cachedIdentity3x2&&v.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const S=this.xS();if(!S)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==u.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===S.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=m.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=m.Matrix.Zero());const v=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case u.PLANAR_MODE:m.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case u.PROJECTION_MODE:{m.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const v=S.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=v.updateFlag,v.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:m.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return v&&S.markAllMaterialsAsDirty(1,(S=>S.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const S={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,l:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return q.b.Clone((()=>new u(this._texture?this._texture.url:null,this.xS(),S)),this)}serialize(){var S;const v=this.name;u.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const D=super.serialize(u._SerializeInternalTextureUniqueId);if(!D)return null;if(u.SerializeBuffers||u.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))D.base64String=this._buffer,D.name=D.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const S=this.mimeType||"image/png";D.base64String=`data:${S};base64,${(0,n.n)(this._buffer)}`}else(u.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(D.base64String=!this._engine||this._engine._features.supportSyncTextureRead?O(this):I(this));var z;(D.invertY=this._invertY,D.samplingMode=this.samplingMode,D._creationFlags=this._creationFlags,D._useSRGBBuffer=this._useSRGBBuffer,u._SerializeInternalTextureUniqueId)&&(D.internalTextureUniqueId=null===(z=this._texture)||void 0===z?void 0:z.uniqueId);return D.internalTextureLabel=null===(S=this._texture)||void 0===S?void 0:S.label,D.noMipmap=this._noMipmap,this.name=v,D}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(S,v,D){if(S.customType){const z=A.b.Instantiate(S.customType).Parse(S,v,D);return S.samplingMode&&z.updateSamplingMode&&z._samplingMode&&z._samplingMode!==S.samplingMode&&z.updateSamplingMode(S.samplingMode),z}if(S.isCube&&!S.isRenderTarget)return u._CubeTextureParser(S,v,D);const z=void 0!==S.internalTextureUniqueId;if(!S.name&&!S.isRenderTarget&&!z)return null;let e;if(z){const D=v.getEngine().getLoadedTexturesCache();for(const v of D)if(v.uniqueId===S.internalTextureUniqueId){e=v;break}}const N=v=>{if(v&&v._texture&&(v._texture._cachedWrapU=null,v._texture._cachedWrapV=null,v._texture._cachedWrapR=null),S.samplingMode){const D=S.samplingMode;v&&v.samplingMode!==D&&v.updateSamplingMode(D)}if(v&&S.animations)for(let D=0;D<S.animations.length;D++){const z=S.animations[D],e=(0,g.e)("BABYLON.Animation");e&&v.animations.push(e.Parse(z))}v&&v._texture&&(z&&!e&&v._texture._setUniqueId(S.internalTextureUniqueId),v._texture.label=S.internalTextureLabel)};return q.b.Parse((()=>{let z=!0;if(S.noMipmap&&(z=!1),S.mirrorPlane){const D=u._CreateMirror(S.name,S.renderTargetSize,v,z);return D._waitingRenderList=S.renderList,D.mirrorPlane=w.c.uv(S.mirrorPlane),N(D),D}if(S.isRenderTarget){let D=null;if(S.isCube){if(v.reflectionProbes)for(let z=0;z<v.reflectionProbes.length;z++){const D=v.reflectionProbes[z];if(D.name===S.name)return D.cubeTexture}}else D=u._CreateRenderTargetTexture(S.name,S.renderTargetSize,v,z,S._creationFlags??0),D._waitingRenderList=S.renderList;return N(D),D}if(S.isVideo){const e=u._CreateVideoTexture(D+(S.url||S.name),D+(S.src||S.url),v,z,S.invertY,S.samplingMode,S.settings||{});return N(e),e}{let m;if(S.base64String&&!e)m=u.CreateFromBase64String(S.base64String,S.base64String,v,!z,S.invertY,S.samplingMode,(()=>{N(m)}),S._creationFlags??0,S._useSRGBBuffer??!1),m.name=S.name;else{let B;B=S.name&&(S.name.indexOf("://")>0||S.name.startsWith("data:"))?S.name:D+S.name,S.url&&(S.url.startsWith("data:")||u.UseSerializedUrlIfAny)&&(B=S.url);const g={noMipmap:!z,invertY:S.invertY,samplingMode:S.samplingMode,l:()=>{N(m)},internalTexture:e};m=new u(B,v,g)}return m}}),S,v)}static CreateFromBase64String(S,v,D,z,e){let N=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TRILINEAR_SAMPLINGMODE;return new u("data:"+v,D,z,e,N,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,S,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(S,v,D){let z=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=arguments.length>4?arguments[4]:void 0,N=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.TRILINEAR_SAMPLINGMODE,B=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,E=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,h=arguments.length>10?arguments[10]:void 0,A=arguments.length>11?arguments[11]:void 0;return"data:"!==S.substring(0,5)&&(S="data:"+S),new u(S,D,e,N,m,B,g,v,z,E,void 0,void 0,h,A)}}u.SerializeBuffers=!0,u.ForceSerializeBuffers=!1,u.OnTextureLoadErrorObservable=new N.d,u._SerializeInternalTextureUniqueId=!1,u._CubeTextureParser=(S,v,D)=>{throw(0,E.e)("CubeTexture")},u._CreateMirror=(S,v,D,z)=>{throw(0,E.e)("MirrorTexture")},u._CreateRenderTargetTexture=(S,v,D,z,e)=>{throw(0,E.e)("RenderTargetTexture")},u.NEAREST_SAMPLINGMODE=1,u.NEAREST_NEAREST_MIPLINEAR=8,u.BILINEAR_SAMPLINGMODE=2,u.LINEAR_LINEAR_MIPNEAREST=11,u.TRILINEAR_SAMPLINGMODE=3,u.LINEAR_LINEAR_MIPLINEAR=3,u.NEAREST_NEAREST_MIPNEAREST=4,u.NEAREST_LINEAR_MIPNEAREST=5,u.NEAREST_LINEAR_MIPLINEAR=6,u.NEAREST_LINEAR=7,u.NEAREST_NEAREST=1,u.LINEAR_NEAREST_MIPNEAREST=9,u.LINEAR_NEAREST_MIPLINEAR=10,u.LINEAR_LINEAR=2,u.LINEAR_NEAREST=12,u.EXPLICIT_MODE=0,u.SPHERICAL_MODE=1,u.PLANAR_MODE=2,u.CUBIC_MODE=3,u.PROJECTION_MODE=4,u.SKYBOX_MODE=5,u.INVCUBIC_MODE=6,u.EQUIRECTANGULAR_MODE=7,u.FIXED_EQUIRECTANGULAR_MODE=8,u.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,u.CLAMP_ADDRESSMODE=0,u.WRAP_ADDRESSMODE=1,u.MIRROR_ADDRESSMODE=2,u.UseSerializedUrlIfAny=!1,(0,z.b)([(0,e.L)()],u.prototype,"url",void 0),(0,z.b)([(0,e.L)()],u.prototype,"uOffset",void 0),(0,z.b)([(0,e.L)()],u.prototype,"vOffset",void 0),(0,z.b)([(0,e.L)()],u.prototype,"uScale",void 0),(0,z.b)([(0,e.L)()],u.prototype,"vScale",void 0),(0,z.b)([(0,e.L)()],u.prototype,"uAng",void 0),(0,z.b)([(0,e.L)()],u.prototype,"vAng",void 0),(0,z.b)([(0,e.L)()],u.prototype,"wAng",void 0),(0,z.b)([(0,e.L)()],u.prototype,"uRotationCenter",void 0),(0,z.b)([(0,e.L)()],u.prototype,"vRotationCenter",void 0),(0,z.b)([(0,e.L)()],u.prototype,"wRotationCenter",void 0),(0,z.b)([(0,e.L)()],u.prototype,"homogeneousRotationInUVTransform",void 0),(0,z.b)([(0,e.L)()],u.prototype,"isBlocking",null),(0,g.f)("BABYLON.Texture",u),q.b._TextureParser=u.Parse},11431:(S,v,D)=>{D.d(v,{c:()=>e});var z=D(11371);class e{constructor(S,v,D,e){this.normal=new z.Rv(S,v,D),this.d=e}Oe(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new e(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let S=this.normal.getHashCode();return S=397*S^this.d,S}normalize(){const S=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let v=0;return 0!==S&&(v=1/S),this.normal.x*=v,this.normal.y*=v,this.normal.z*=v,this.d*=v,this}transform(S){const v=e._TmpMatrix;S.invertToRef(v);const D=v.m,z=this.normal.x,N=this.normal.y,m=this.normal.z,B=this.d,g=z*D[0]+N*D[1]+m*D[2]+B*D[3],E=z*D[4]+N*D[5]+m*D[6]+B*D[7],h=z*D[8]+N*D[9]+m*D[10]+B*D[11],A=z*D[12]+N*D[13]+m*D[14]+B*D[15];return new e(g,E,h,A)}dotCoordinate(S){return this.normal.x*S.x+this.normal.y*S.y+this.normal.z*S.z+this.d}copyFromPoints(S,v,D){const z=v.x-S.x,e=v.y-S.y,N=v.z-S.z,m=D.x-S.x,B=D.y-S.y,g=D.z-S.z,E=e*g-N*B,h=N*m-z*g,A=z*B-e*m,w=Math.sqrt(E*E+h*h+A*A);let n;return n=0!==w?1/w:0,this.normal.x=E*n,this.normal.y=h*n,this.normal.z=A*n,this.d=-(this.normal.x*S.x+this.normal.y*S.y+this.normal.z*S.z),this}isFrontFacingTo(S,v){return z.Rv.Dot(this.normal,S)<=v}signedDistanceTo(S){return z.Rv.Dot(S,this.normal)+this.d}static uv(S){return new e(S[0],S[1],S[2],S[3])}static FromPoints(S,v,D){const z=new e(0,0,0,0);return z.copyFromPoints(S,v,D),z}static FromPositionAndNormal(S,v){const D=new e(0,0,0,0);return this.FromPositionAndNormalToRef(S,v,D)}static FromPositionAndNormalToRef(S,v,D){return D.normal.N(v),D.normal.normalize(),D.d=-S.dot(D.normal),D}static SignedDistanceToPlaneFromPositionAndNormal(S,v,D){const e=-(v.x*S.x+v.y*S.y+v.z*S.z);return z.Rv.Dot(D,v)+e}}e._TmpMatrix=z.Matrix.Identity()},11408:(S,v,D)=>{D.d(v,{b:()=>z});class z{constructor(S,v){this.width=S,this.height=v}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let S=0|this.width;return S=397*S^this.height,S}N(S){this.width=S.width,this.height=S.height}oe(S,v){return this.width=S,this.height=v,this}set(S,v){return this.oe(S,v)}multiplyByFloats(S,v){return new z(this.width*S,this.height*v)}clone(){return new z(this.width,this.height)}equals(S){return!!S&&(this.width===S.width&&this.height===S.height)}get surface(){return this.width*this.height}static Zero(){return new z(0,0)}add(S){return new z(this.width+S.width,this.height+S.height)}Ov(S){return new z(this.width-S.width,this.height-S.height)}scale(S){return new z(this.width*S,this.height*S)}static Lerp(S,v,D){const e=S.width+(v.width-S.width)*D,N=S.height+(v.height-S.height)*D;return new z(e,N)}}},11367:(S,v,D)=>{D.d(v,{e:()=>N,i:()=>m});const z={},e={};function N(S){const v=S.getClassName();return e[v]||(e[v]={}),e[v]}function m(S){const v=S.getClassName();if(z[v])return z[v];z[v]={};const D=z[v];let N=S,m=v;for(;m;){const S=e[m];for(const e in S)D[e]=S[e];let v,z=!1;do{if(v=Object.getPrototypeOf(N),!v.getClassName){z=!0;break}if(v.getClassName()!==m)break;N=v}while(v);if(z)break;m=v.getClassName(),N=v}return D}},11364:(S,v,D)=>{D.d(v,{D:()=>B,G:()=>h,H:()=>A,L:()=>m,c:()=>N,f:()=>q,g:()=>n,k:()=>g,n:()=>R,q:()=>E,s:()=>O,w:()=>K,y:()=>w,z:()=>I});var z=D(11367);function e(S,v){return(D,e)=>{const N=(0,z.e)(D);N[e]||(N[e]={type:S,sourceName:v})}}function N(S){return function(S){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(D,z)=>{const e=v||"_"+z;Object.defineProperty(D,z,{get:function(){return this[e]},set:function(v){var z;"function"===typeof(null===(z=this[e])||void 0===z?void 0:z.equals)&&this[e].equals(v)||this[e]!==v&&(this[e]=v,D[S].apply(this))},enumerable:!0,configurable:!0})}}(S,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function m(S){return e(0,S)}function B(S){return e(1,S)}function g(S){return e(2,S)}function E(S){return e(3,S)}function h(S){return e(4,S)}function A(S){return e(5,S)}function w(S){return e(6,S)}function n(S){return e(7,S)}function R(S){return e(8,S)}function O(S){return e(9,S)}function I(S){return e(10,S)}function K(S){return e(12,S)}function q(S,v,D,z){const e=D.value;D.value=function(){let D=e;if("undefined"!==typeof _native&&_native[v]){const S=_native[v];D=z?function(){return z(...arguments)?S(...arguments):e(...arguments)}:S}return S[v]=D,D(...arguments)}}q.filter=function(S){return(v,D,z)=>q(v,D,z,S)}},11415:(S,v,D)=>{D.d(v,{b:()=>E});var z=D(11207),e=D(11422),N=D(11425),m=D(11371),B=D(11367);const g=function(S,v,D){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const N=S();e.c&&e.c.HasTags(v)&&e.c.AddTagsTo(N,e.c.GetTags(v,!0));const m=(0,B.i)(N),g={};for(const e in m){const S=m[e],B=v[e],h=S.type;if(void 0!==B&&null!==B&&("uniqueId"!==e||E.AllowLoadingUniqueId))switch(h){case 0:case 6:case 9:case 11:N[e]=B;break;case 1:z.cloneTexturesOnlyOnce&&g[B.uniqueId]?N[e]=g[B.uniqueId]:(N[e]=D||B.isRenderTarget?B:B.clone(),g[B.uniqueId]=N[e]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:N[e]=D?B:B.clone()}}return N};class E{static AppendSerializedAnimations(S,v){if(S.animations){v.animations=[];for(let D=0;D<S.animations.length;D++){const z=S.animations[D];v.animations.push(z.serialize())}}}static Serialize(S,v){v||(v={}),e.c&&(v.tags=e.c.GetTags(S));const D=(0,B.i)(S);for(const z in D){const e=D[z],N=e.sourceName||z,m=e.type,B=S[z];if(void 0!==B&&null!==B&&("uniqueId"!==z||E.AllowLoadingUniqueId))switch(m){case 0:v[N]=B;break;case 1:case 3:case 7:case 9:v[N]=B.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:v[N]=B.Oe();break;case 6:case 11:v[N]=B.id}}return v}static ParseProperties(S,v,D,z){z||(z="");const e=(0,B.i)(v);for(const B in e){const g=e[B],h=S[g.sourceName||B],A=g.type;if(void 0!==h&&null!==h&&("uniqueId"!==B||E.AllowLoadingUniqueId)){const S=v;switch(A){case 0:S[B]=h;break;case 1:D&&(S[B]=E._TextureParser(h,D,z));break;case 2:S[B]=N.qv.uv(h);break;case 3:S[B]=E._FresnelParametersParser(h);break;case 4:S[B]=m.Vector2.uv(h);break;case 5:S[B]=m.Rv.uv(h);break;case 6:D&&(S[B]=D.getLastMeshById(h));break;case 7:S[B]=E._ColorCurvesParser(h);break;case 8:S[B]=N.Ge.uv(h);break;case 9:S[B]=E._ImageProcessingConfigurationParser(h);break;case 10:S[B]=m.Quaternion.uv(h);break;case 11:D&&(S[B]=D.getCameraById(h));break;case 12:S[B]=m.Matrix.uv(h)}}}}static Parse(S,v,D){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const N=S();return e.c&&e.c.AddTagsTo(N,v.tags),E.ParseProperties(v,N,D,z),N}static Clone(S,v){return g(S,v,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(S,v){return g(S,v,!0)}}E.AllowLoadingUniqueId=!1,E._ImageProcessingConfigurationParser=S=>{throw(0,z.e)("ImageProcessingConfiguration")},E._FresnelParametersParser=S=>{throw(0,z.e)("FresnelParameters")},E._ColorCurvesParser=S=>{throw(0,z.e)("ColorCurves")},E._TextureParser=(S,v,D)=>{throw(0,z.e)("Texture")}},11422:(S,v,D)=>{D.d(v,{c:()=>e});class z{static Eval(S,v){return"true"===(S=S.match(/\([^()]*\)/g)?S.replace(/\([^()]*\)/g,(S=>(S=S.slice(1,S.length-1),z._HandleParenthesisContent(S,v)))):z._HandleParenthesisContent(S,v))||"false"!==S&&z.Eval(S,v)}static _HandleParenthesisContent(S,v){let D;v=v||(S=>"true"===S);const e=S.split("||");for(const N in e)if(Object.prototype.hasOwnProperty.call(e,N)){let S=z._SimplifyNegation(e[N].trim());const m=S.split("&&");if(m.length>1)for(let e=0;e<m.length;++e){const N=z._SimplifyNegation(m[e].trim());if(D="true"!==N&&"false"!==N?"!"===N[0]?!v(N.substring(1)):v(N):"true"===N,!D){S="false";break}}if(D||"true"===S){D=!0;break}D="true"!==S&&"false"!==S?"!"===S[0]?!v(S.substring(1)):v(S):"true"===S}return D?"true":"false"}static _SimplifyNegation(S){return"!true"===(S=(S=S.replace(/^[\s!]+/,(S=>(S=S.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?S="false":"!false"===S&&(S="true"),S}}class e{static EnableFor(S){S._tags=S._tags||{},S.hasTags=()=>e.HasTags(S),S.addTags=v=>e.AddTagsTo(S,v),S.removeTags=v=>e.RemoveTagsFrom(S,v),S.matchesTagsQuery=v=>e.MatchesQuery(S,v)}static DisableFor(S){delete S._tags,delete S.hasTags,delete S.addTags,delete S.removeTags,delete S.matchesTagsQuery}static HasTags(S){if(!S._tags)return!1;const v=S._tags;for(const D in v)if(Object.prototype.hasOwnProperty.call(v,D))return!0;return!1}static GetTags(S){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!S._tags)return null;if(v){const v=[];for(const D in S._tags)Object.prototype.hasOwnProperty.call(S._tags,D)&&!0===S._tags[D]&&v.push(D);return v.join(" ")}return S._tags}static AddTagsTo(S,v){if(!v)return;if("string"!==typeof v)return;const D=v.split(" ");for(const z of D)e._AddTagTo(S,z)}static _AddTagTo(S,v){""!==(v=v.trim())&&"true"!==v&&"false"!==v&&(v.match(/[\s]/)||v.match(/^([!]|([|]|[&]){2})/)||(e.EnableFor(S),S._tags[v]=!0))}static RemoveTagsFrom(S,v){if(!e.HasTags(S))return;const D=v.split(" ");for(const z in D)e._RemoveTagFrom(S,D[z])}static _RemoveTagFrom(S,v){delete S._tags[v]}static MatchesQuery(S,v){return void 0===v||(""===v?e.HasTags(S):z.Eval(v,(v=>e.HasTags(S)&&S._tags[v])))}}},11358:(S,v,D)=>{D.d(v,{b:()=>z});function z(S,v,D,z){var e,N=arguments.length,m=N<3?v:null===z?z=Object.getOwnPropertyDescriptor(v,D):z;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)m=Reflect.decorate(S,v,D,z);else for(var B=S.length-1;B>=0;B--)(e=S[B])&&(m=(N<3?e(m):N>3?e(v,D,m):e(v,D))||m);return N>3&&m&&Object.defineProperty(v,D,m),m}Object.create;Object.create}}]);