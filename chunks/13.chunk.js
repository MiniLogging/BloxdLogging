"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[13],{11160:(q,S,b)=>{b.d(S,{e:()=>z});let z=!1},11128:(q,S,b)=>{b.d(S,{d:()=>y});var z=b(11081),C=b(11090),v=b(10929),U=b(11103),g=b(10975),r=b(11060),I=(b(10977),b(11132));class V{get wrapU(){return this._wrapU}set wrapU(q){this._wrapU=q}get wrapV(){return this._wrapV}set wrapV(q){this._wrapV=q}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(q){this._texture&&(this._texture.isCube=q)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(q){this._texture&&(this._texture.is3D=q)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(q){this._texture&&(this._texture.is2DArray=q)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(q){return void 0!==(null===q||void 0===q?void 0:q.shareDepth)}constructor(q){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=I.c.Zero(),this._cachedBaseSize=I.c.Zero(),this._initialSamplingMode=2,this._texture=V._IsRenderTargetWrapper(q)?q.texture:q,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(q){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(q,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var l=b(11137);class y extends V{set Qb(q){this._hasAlpha!==q&&(this._hasAlpha=q,this._scene&&this._scene.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))))}get Qb(){return this._hasAlpha}set getAlphaFromRGB(q){this._getAlphaFromRGB!==q&&(this._getAlphaFromRGB=q,this._scene&&this._scene.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(q){this._coordinatesIndex!==q&&(this._coordinatesIndex=q,this._scene&&this._scene.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(q){this._coordinatesMode!==q&&(this._coordinatesMode=q,this._scene&&this._scene.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(q){this._wrapU=q}get wrapV(){return this._wrapV}set wrapV(q){this._wrapV=q}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(q){this._texture?this._texture.isCube=q:this._isCube=q}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(q){this._texture&&(this._texture.is3D=q)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(q){this._texture&&(this._texture.is2DArray=q)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(q){var S;if(this._texture){if(this._texture._gammaSpace===q)return;this._texture._gammaSpace=q}else{if(this._gammaSpace===q)return;this._gammaSpace=q}null===(S=this.Tq())||void 0===S||S.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(q){var S;q!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=q),null===(S=this.Tq())||void 0===S||S.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(q){this._texture&&(this._texture._lodGenerationOffset=q)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(q){this._texture&&(this._texture._lodGenerationScale=q)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(q){this._texture&&(this._texture._linearSpecularLOD=q)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(q){this._texture&&(this._texture._irradianceTexture=q)}get uid(){return this._uid||(this._uid=(0,r.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(q){this._onDisposeObserver&&this.gb.remove(this._onDisposeObserver),this._onDisposeObserver=this.gb.add(q)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=y.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.gb=new v.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,q?y._IsScene(q)?this._scene=q:this._engine=q:this._scene=g.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=S,this._uid=null}Tq(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return U.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return U.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(q){}get canRescale(){return!1}_getFromCache(q,S,b,z,C,v){const U=this._getEngine();if(!U)return null;const g=U._getUseSRGBBuffer(!!C,S),r=U.getLoadedTexturesCache();for(let I=0;I<r.length;I++){const U=r[I];if((void 0===C||g===U._useSRGBBuffer)&&(void 0===z||z===U.invertY)&&U.url===q&&U.generateMipMaps===!S&&(!b||b===U.samplingMode)&&(void 0===v||v===U.isCube))return U.incrementReferences(),U}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const q=this.Tq();q&&q.markAllMaterialsAsDirty(1)}readPixels(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],C=arguments.length>4&&void 0!==arguments[4]&&arguments[4],v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const I=this._getEngine();if(!I)return null;const V=this.getSize();let l=V.width,y=V.height;0!==S&&(l/=Math.pow(2,S),y/=Math.pow(2,S),l=Math.round(l),y=Math.round(y)),g=Math.min(l,g),r=Math.min(y,r);try{return this._texture.isCube?I._readTexturePixels(this._texture,g,r,q,S,b,z,C,v,U):I._readTexturePixels(this._texture,g,r,-1,S,b,z,C,v,U)}catch(R){return null}}_readPixelsSync(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],C=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const v=this.getSize();let U=v.width,g=v.height;const r=this._getEngine();if(!r)return null;0!=S&&(U/=Math.pow(2,S),g/=Math.pow(2,S),U=Math.round(U),g=Math.round(g));try{return this._texture.isCube?r._readTexturePixelsSync(this._texture,U,g,q,S,b,z,C):r._readTexturePixelsSync(this._texture,U,g,-1,S,b,z,C)}catch(I){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const q=this._scene.textures.indexOf(this);if(q>=0&&this._scene.textures.splice(q,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const q=this._parentContainer.textures.indexOf(this);q>-1&&this._parentContainer.textures.splice(q,1),this._parentContainer=null}}this.gb.notifyObservers(this),this.gb.clear(),this.metadata=null,super.dispose()}serialize(){let q=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!q)return null;const S=l.b.Serialize(this);return l.b.AppendSerializedAnimations(this,S),S}static WhenAllReady(q,S){let b=q.length;if(0!==b)for(let z=0;z<q.length;z++){const C=q[z];if(C.isReady())0===--b&&S();else{const q=C.onLoadObservable;q?q.addOnce((()=>{0===--b&&S()})):0===--b&&S()}}else S()}static _IsScene(q){return"Scene"===q.getClassName()}}y.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,z.e)([(0,C.J)()],y.prototype,"uniqueId",void 0),(0,z.e)([(0,C.J)()],y.prototype,"name",void 0),(0,z.e)([(0,C.J)()],y.prototype,"displayName",void 0),(0,z.e)([(0,C.J)()],y.prototype,"metadata",void 0),(0,z.e)([(0,C.J)("Qb")],y.prototype,"_hasAlpha",void 0),(0,z.e)([(0,C.J)("getAlphaFromRGB")],y.prototype,"_getAlphaFromRGB",void 0),(0,z.e)([(0,C.J)()],y.prototype,"level",void 0),(0,z.e)([(0,C.J)("coordinatesIndex")],y.prototype,"_coordinatesIndex",void 0),(0,z.e)([(0,C.J)()],y.prototype,"optimizeUVAllocation",void 0),(0,z.e)([(0,C.J)("coordinatesMode")],y.prototype,"_coordinatesMode",void 0),(0,z.e)([(0,C.J)()],y.prototype,"wrapU",null),(0,z.e)([(0,C.J)()],y.prototype,"wrapV",null),(0,z.e)([(0,C.J)()],y.prototype,"wrapR",void 0),(0,z.e)([(0,C.J)()],y.prototype,"anisotropicFilteringLevel",void 0),(0,z.e)([(0,C.J)()],y.prototype,"isCube",null),(0,z.e)([(0,C.J)()],y.prototype,"is3D",null),(0,z.e)([(0,C.J)()],y.prototype,"is2DArray",null),(0,z.e)([(0,C.J)()],y.prototype,"gammaSpace",null),(0,z.e)([(0,C.J)()],y.prototype,"invertZ",void 0),(0,z.e)([(0,C.J)()],y.prototype,"lodLevelInAlpha",void 0),(0,z.e)([(0,C.J)()],y.prototype,"lodGenerationOffset",null),(0,z.e)([(0,C.J)()],y.prototype,"lodGenerationScale",null),(0,z.e)([(0,C.J)()],y.prototype,"linearSpecularLOD",null),(0,z.e)([(0,C.x)()],y.prototype,"irradianceTexture",null),(0,z.e)([(0,C.J)()],y.prototype,"isRenderTarget",void 0)},11075:(q,S,b)=>{b.d(S,{e:()=>W});var z=b(11081),C=b(11090),v=b(10929),U=b(11103),g=b(11128),r=b(11058),I=b(10964),V=b(11e3),l=b(11054),y=b(11153),R=b(10990);function G(q,S){let b=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const z=S.width,C=S.height;if(q instanceof Float32Array){let S=q.byteLength/q.BYTES_PER_ELEMENT;const b=new Uint8Array(S);for(;--S>=0;){let z=q[S];z<0?z=0:z>1&&(z=1),b[S]=255*z}q=b}const v=document.createElement("canvas");v.width=z,v.height=C;const U=v.getContext("2d");if(!U)return null;const g=U.createImageData(z,C);if(g.data.set(q),U.putImageData(g,0,0),b){const q=document.createElement("canvas");q.width=z,q.height=C;const S=q.getContext("2d");return S?(S.translate(0,C),S.scale(1,-1),S.drawImage(v,0,0),q.toDataURL("image/png")):null}return v.toDataURL("image/png")}function Z(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const z=q.getInternalTexture();if(!z)return null;const C=q._readPixelsSync(S,b);return C?G(C,q.getSize(),z.invertY):null}async function H(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const z=q.getInternalTexture();if(!z)return null;const C=await q.readPixels(S,b);return C?G(C,q.getSize(),z.invertY):null}var Q=b(11160),k=b(11137);class W extends g.d{static _CreateVideoTexture(q,S,b){arguments.length>5&&void 0!==arguments[5]||W.TRILINEAR_SAMPLINGMODE;throw(0,I.c)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(q){this._isBlocking=q}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(q,S,b,z){let C,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:W.TRILINEAR_SAMPLINGMODE,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],y=arguments.length>9?arguments[9]:void 0,R=arguments.length>10?arguments[10]:void 0,G=arguments.length>11?arguments[11]:void 0,Z=arguments.length>12?arguments[12]:void 0,H=arguments.length>13?arguments[13]:void 0;super(S),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new v.d,this._isBlocking=!0,this.name=q||"",this.url=q;let k=!1,N=null,u=!0;"object"===typeof b&&null!==b?(C=b.noMipmap??!1,z=b.invertY??!Q.e,U=b.samplingMode??W.TRILINEAR_SAMPLINGMODE,g=b.M??null,r=b.onError??null,I=b.buffer??null,l=b.deleteBuffer??!1,y=b.format,R=b.mimeType,G=b.loaderOptions,Z=b.creationFlags,k=b.useSRGBBuffer??!1,N=b.internalTexture??null,u=b.gammaSpace??u,H=b.forcedExtension??H):C=!!b,this._gammaSpace=u,this._noMipmap=C,this._invertY=void 0===z?!Q.e:z,this._initialSamplingMode=U,this._buffer=I,this._deleteBuffer=l,this._mimeType=R,this._loaderOptions=G,this._creationFlags=Z,this._useSRGBBuffer=k,this._forcedExtension=H,void 0!==y&&(this._format=y);const X=this.Tq(),T=this._getEngine();if(!T)return;T.onBeforeTextureInitObservable.notifyObservers(this);const B=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),g&&g(),!this.isBlocking&&X&&X.resetCachedMaterial()},t=(q,S)=>{this._loadingError=!0,this._errorObject={message:q,exception:S},r&&r(q,S),W.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!N)return this._delayedOnLoad=B,void(this._delayedOnError=t);if(this._texture=N??this._getFromCache(this.url,C,U,this._invertY,k,this.isCube),this._texture)if(this._texture.isReady)V.e.SetImmediate((()=>B()));else{const q=this._texture.onLoadedObservable.add(B);this._texture.onErrorObservable.add((S=>{var b;t(S.message,S.exception),null===(b=this._texture)||void 0===b||b.onLoadedObservable.remove(q)}))}else if(X&&X.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=B,this._delayedOnError=t;else{try{this._texture=T.createTexture(this.url,C,this._invertY,X,U,B,t,this._buffer,void 0,this._format,this._forcedExtension,R,G,Z,k)}catch(f){throw t("error loading",f),f}l&&(this._buffer=null)}}updateURL(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,b=arguments.length>2?arguments[2]:void 0,z=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Tq().markAllMaterialsAsDirty(1,(q=>q.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=q),this.url=q,this._buffer=S,this._forcedExtension=z,this.delayLoadState=4,b&&(this._delayedOnLoad=b),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const q=this.Tq();q&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?V.e.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=q.getEngine().createTexture(this.url,this._noMipmap,this._invertY,q,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(q,S,b,z){q*=this._cachedUScale,S*=this._cachedVScale,q-=this.uRotationCenter*this._cachedUScale,S-=this.vRotationCenter*this._cachedVScale,b-=this.wRotationCenter,U.yS.TransformCoordinatesFromFloatsToRef(q,S,b,this._rowGenerationMatrix,z),z.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,z.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,z.z+=this.wRotationCenter}getTextureMatrix(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*q===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*q,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=U.Matrix.Zero(),this._rowGenerationMatrix=new U.Matrix,this._t0=U.yS.Zero(),this._t1=U.yS.Zero(),this._t2=U.yS.Zero()),U.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(U.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,U.TmpVectors.Matrix[0]),U.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,U.TmpVectors.Matrix[1]),U.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,U.TmpVectors.Matrix[2]),U.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,U.TmpVectors.Matrix[3]),U.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(U.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.Ql(this._t0),this._t2.Ql(this._t0),U.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const S=this.Tq();if(!S)return this._cachedTextureMatrix;const b=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&b!==this._cachedIdentity3x2&&S.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const q=this.Tq();if(!q)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==W.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===q.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=U.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=U.Matrix.Zero());const S=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case W.PLANAR_MODE:U.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case W.PROJECTION_MODE:{U.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const S=q.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=S.updateFlag,S.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:U.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return S&&q.markAllMaterialsAsDirty(1,(q=>q.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const q={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,M:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return k.b.Clone((()=>new W(this._texture?this._texture.url:null,this.Tq(),q)),this)}serialize(){var q;const S=this.name;W.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const b=super.serialize(W._SerializeInternalTextureUniqueId);if(!b)return null;if(W.SerializeBuffers||W.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))b.base64String=this._buffer,b.name=b.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const q=this.mimeType||"image/png";b.base64String=`data:${q};base64,${(0,R.k)(this._buffer)}`}else(W.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(b.base64String=!this._engine||this._engine._features.supportSyncTextureRead?Z(this):H(this));var z;(b.invertY=this._invertY,b.samplingMode=this.samplingMode,b._creationFlags=this._creationFlags,b._useSRGBBuffer=this._useSRGBBuffer,W._SerializeInternalTextureUniqueId)&&(b.internalTextureUniqueId=null===(z=this._texture)||void 0===z?void 0:z.uniqueId);return b.internalTextureLabel=null===(q=this._texture)||void 0===q?void 0:q.label,b.noMipmap=this._noMipmap,this.name=S,b}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(q,S,b){if(q.customType){const z=l.c.Instantiate(q.customType).Parse(q,S,b);return q.samplingMode&&z.updateSamplingMode&&z._samplingMode&&z._samplingMode!==q.samplingMode&&z.updateSamplingMode(q.samplingMode),z}if(q.isCube&&!q.isRenderTarget)return W._CubeTextureParser(q,S,b);const z=void 0!==q.internalTextureUniqueId;if(!q.name&&!q.isRenderTarget&&!z)return null;let C;if(z){const b=S.getEngine().getLoadedTexturesCache();for(const S of b)if(S.uniqueId===q.internalTextureUniqueId){C=S;break}}const v=S=>{if(S&&S._texture&&(S._texture._cachedWrapU=null,S._texture._cachedWrapV=null,S._texture._cachedWrapR=null),q.samplingMode){const b=q.samplingMode;S&&S.samplingMode!==b&&S.updateSamplingMode(b)}if(S&&q.animations)for(let b=0;b<q.animations.length;b++){const z=q.animations[b],C=(0,r.c)("BABYLON.Animation");C&&S.animations.push(C.Parse(z))}S&&S._texture&&(z&&!C&&S._texture._setUniqueId(q.internalTextureUniqueId),S._texture.label=q.internalTextureLabel)};return k.b.Parse((()=>{let z=!0;if(q.noMipmap&&(z=!1),q.mirrorPlane){const b=W._CreateMirror(q.name,q.renderTargetSize,S,z);return b._waitingRenderList=q.renderList,b.mirrorPlane=y.e.Hb(q.mirrorPlane),v(b),b}if(q.isRenderTarget){let b=null;if(q.isCube){if(S.reflectionProbes)for(let z=0;z<S.reflectionProbes.length;z++){const b=S.reflectionProbes[z];if(b.name===q.name)return b.cubeTexture}}else b=W._CreateRenderTargetTexture(q.name,q.renderTargetSize,S,z,q._creationFlags??0),b._waitingRenderList=q.renderList;return v(b),b}if(q.isVideo){const C=W._CreateVideoTexture(b+(q.url||q.name),b+(q.src||q.url),S,z,q.invertY,q.samplingMode,q.settings||{});return v(C),C}{let U;if(q.base64String&&!C)U=W.CreateFromBase64String(q.base64String,q.base64String,S,!z,q.invertY,q.samplingMode,(()=>{v(U)}),q._creationFlags??0,q._useSRGBBuffer??!1),U.name=q.name;else{let g;g=q.name&&(q.name.indexOf("://")>0||q.name.startsWith("data:"))?q.name:b+q.name,q.url&&(q.url.startsWith("data:")||W.UseSerializedUrlIfAny)&&(g=q.url);const r={noMipmap:!z,invertY:q.invertY,samplingMode:q.samplingMode,M:()=>{v(U)},internalTexture:C};U=new W(g,S,r)}return U}}),q,S)}static CreateFromBase64String(q,S,b,z,C){let v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:W.TRILINEAR_SAMPLINGMODE;return new W("data:"+S,b,z,C,v,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,q,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(q,S,b){let z=arguments.length>3&&void 0!==arguments[3]&&arguments[3],C=arguments.length>4?arguments[4]:void 0,v=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W.TRILINEAR_SAMPLINGMODE,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,r=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,V=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0;return"data:"!==q.substring(0,5)&&(q="data:"+q),new W(q,b,C,v,U,g,r,S,z,I,void 0,void 0,V,l)}}W.SerializeBuffers=!0,W.ForceSerializeBuffers=!1,W.OnTextureLoadErrorObservable=new v.d,W._SerializeInternalTextureUniqueId=!1,W._CubeTextureParser=(q,S,b)=>{throw(0,I.c)("CubeTexture")},W._CreateMirror=(q,S,b,z)=>{throw(0,I.c)("MirrorTexture")},W._CreateRenderTargetTexture=(q,S,b,z,C)=>{throw(0,I.c)("RenderTargetTexture")},W.NEAREST_SAMPLINGMODE=1,W.NEAREST_NEAREST_MIPLINEAR=8,W.BILINEAR_SAMPLINGMODE=2,W.LINEAR_LINEAR_MIPNEAREST=11,W.TRILINEAR_SAMPLINGMODE=3,W.LINEAR_LINEAR_MIPLINEAR=3,W.NEAREST_NEAREST_MIPNEAREST=4,W.NEAREST_LINEAR_MIPNEAREST=5,W.NEAREST_LINEAR_MIPLINEAR=6,W.NEAREST_LINEAR=7,W.NEAREST_NEAREST=1,W.LINEAR_NEAREST_MIPNEAREST=9,W.LINEAR_NEAREST_MIPLINEAR=10,W.LINEAR_LINEAR=2,W.LINEAR_NEAREST=12,W.EXPLICIT_MODE=0,W.SPHERICAL_MODE=1,W.PLANAR_MODE=2,W.CUBIC_MODE=3,W.PROJECTION_MODE=4,W.SKYBOX_MODE=5,W.INVCUBIC_MODE=6,W.EQUIRECTANGULAR_MODE=7,W.FIXED_EQUIRECTANGULAR_MODE=8,W.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,W.CLAMP_ADDRESSMODE=0,W.WRAP_ADDRESSMODE=1,W.MIRROR_ADDRESSMODE=2,W.UseSerializedUrlIfAny=!1,(0,z.e)([(0,C.J)()],W.prototype,"url",void 0),(0,z.e)([(0,C.J)()],W.prototype,"uOffset",void 0),(0,z.e)([(0,C.J)()],W.prototype,"vOffset",void 0),(0,z.e)([(0,C.J)()],W.prototype,"uScale",void 0),(0,z.e)([(0,C.J)()],W.prototype,"vScale",void 0),(0,z.e)([(0,C.J)()],W.prototype,"uAng",void 0),(0,z.e)([(0,C.J)()],W.prototype,"vAng",void 0),(0,z.e)([(0,C.J)()],W.prototype,"wAng",void 0),(0,z.e)([(0,C.J)()],W.prototype,"uRotationCenter",void 0),(0,z.e)([(0,C.J)()],W.prototype,"vRotationCenter",void 0),(0,z.e)([(0,C.J)()],W.prototype,"wRotationCenter",void 0),(0,z.e)([(0,C.J)()],W.prototype,"homogeneousRotationInUVTransform",void 0),(0,z.e)([(0,C.J)()],W.prototype,"isBlocking",null),(0,r.f)("BABYLON.Texture",W),k.b._TextureParser=W.Parse},11153:(q,S,b)=>{b.d(S,{e:()=>C});var z=b(11103);class C{constructor(q,S,b,C){this.normal=new z.yS(q,S,b),this.d=C}Zb(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new C(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let q=this.normal.getHashCode();return q=397*q^this.d,q}normalize(){const q=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let S=0;return 0!==q&&(S=1/q),this.normal.x*=S,this.normal.y*=S,this.normal.z*=S,this.d*=S,this}transform(q){const S=C._TmpMatrix;q.invertToRef(S);const b=S.m,z=this.normal.x,v=this.normal.y,U=this.normal.z,g=this.d,r=z*b[0]+v*b[1]+U*b[2]+g*b[3],I=z*b[4]+v*b[5]+U*b[6]+g*b[7],V=z*b[8]+v*b[9]+U*b[10]+g*b[11],l=z*b[12]+v*b[13]+U*b[14]+g*b[15];return new C(r,I,V,l)}dotCoordinate(q){return this.normal.x*q.x+this.normal.y*q.y+this.normal.z*q.z+this.d}copyFromPoints(q,S,b){const z=S.x-q.x,C=S.y-q.y,v=S.z-q.z,U=b.x-q.x,g=b.y-q.y,r=b.z-q.z,I=C*r-v*g,V=v*U-z*r,l=z*g-C*U,y=Math.sqrt(I*I+V*V+l*l);let R;return R=0!==y?1/y:0,this.normal.x=I*R,this.normal.y=V*R,this.normal.z=l*R,this.d=-(this.normal.x*q.x+this.normal.y*q.y+this.normal.z*q.z),this}isFrontFacingTo(q,S){return z.yS.Dot(this.normal,q)<=S}signedDistanceTo(q){return z.yS.Dot(q,this.normal)+this.d}static Hb(q){return new C(q[0],q[1],q[2],q[3])}static FromPoints(q,S,b){const z=new C(0,0,0,0);return z.copyFromPoints(q,S,b),z}static FromPositionAndNormal(q,S){const b=new C(0,0,0,0);return this.FromPositionAndNormalToRef(q,S,b)}static FromPositionAndNormalToRef(q,S,b){return b.normal.v(S),b.normal.normalize(),b.d=-q.dot(b.normal),b}static SignedDistanceToPlaneFromPositionAndNormal(q,S,b){const C=-(S.x*q.x+S.y*q.y+S.z*q.z);return z.yS.Dot(b,S)+C}}C._TmpMatrix=z.Matrix.Identity()},11132:(q,S,b)=>{b.d(S,{c:()=>z});class z{constructor(q,S){this.width=q,this.height=S}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let q=0|this.width;return q=397*q^this.height,q}v(q){this.width=q.width,this.height=q.height}Bb(q,S){return this.width=q,this.height=S,this}set(q,S){return this.Bb(q,S)}multiplyByFloats(q,S){return new z(this.width*q,this.height*S)}clone(){return new z(this.width,this.height)}equals(q){return!!q&&(this.width===q.width&&this.height===q.height)}get surface(){return this.width*this.height}static Zero(){return new z(0,0)}add(q){return new z(this.width+q.width,this.height+q.height)}RS(q){return new z(this.width-q.width,this.height-q.height)}scale(q){return new z(this.width*q,this.height*q)}static Lerp(q,S,b){const C=q.width+(S.width-q.width)*b,v=q.height+(S.height-q.height)*b;return new z(C,v)}}},11096:(q,S,b)=>{b.d(S,{b:()=>v,e:()=>U});const z={},C={};function v(q){const S=q.getClassName();return C[S]||(C[S]={}),C[S]}function U(q){const S=q.getClassName();if(z[S])return z[S];z[S]={};const b=z[S];let v=q,U=S;for(;U;){const q=C[U];for(const C in q)b[C]=q[C];let S,z=!1;do{if(S=Object.getPrototypeOf(v),!S.getClassName){z=!0;break}if(S.getClassName()!==U)break;v=S}while(S);if(z)break;U=S.getClassName(),v=S}return b}},11090:(q,S,b)=>{b.d(S,{B:()=>V,F:()=>l,J:()=>U,e:()=>v,h:()=>k,i:()=>R,m:()=>r,p:()=>G,r:()=>I,s:()=>Z,t:()=>Q,u:()=>y,v:()=>H,x:()=>g});var z=b(11096);function C(q,S){return(b,C)=>{const v=(0,z.b)(b);v[C]||(v[C]={type:q,sourceName:S})}}function v(q){return function(q){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(b,z)=>{const C=S||"_"+z;Object.defineProperty(b,z,{get:function(){return this[C]},set:function(S){var z;"function"===typeof(null===(z=this[C])||void 0===z?void 0:z.equals)&&this[C].equals(S)||this[C]!==S&&(this[C]=S,b[q].apply(this))},enumerable:!0,configurable:!0})}}(q,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function U(q){return C(0,q)}function g(q){return C(1,q)}function r(q){return C(2,q)}function I(q){return C(3,q)}function V(q){return C(4,q)}function l(q){return C(5,q)}function y(q){return C(6,q)}function R(q){return C(7,q)}function G(q){return C(8,q)}function Z(q){return C(9,q)}function H(q){return C(10,q)}function Q(q){return C(12,q)}function k(q,S,b,z){const C=b.value;b.value=function(){let b=C;if("undefined"!==typeof _native&&_native[S]){const q=_native[S];b=z?function(){return z(...arguments)?q(...arguments):C(...arguments)}:q}return q[S]=b,b(...arguments)}}k.filter=function(q){return(S,b,z)=>k(S,b,z,q)}},11137:(q,S,b)=>{b.d(S,{b:()=>I});var z=b(10964),C=b(11144),v=b(11150),U=b(11103),g=b(11096);const r=function(q,S,b){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const v=q();C.b&&C.b.HasTags(S)&&C.b.AddTagsTo(v,C.b.GetTags(S,!0));const U=(0,g.e)(v),r={};for(const C in U){const q=U[C],g=S[C],V=q.type;if(void 0!==g&&null!==g&&("uniqueId"!==C||I.AllowLoadingUniqueId))switch(V){case 0:case 6:case 9:case 11:v[C]=g;break;case 1:z.cloneTexturesOnlyOnce&&r[g.uniqueId]?v[C]=r[g.uniqueId]:(v[C]=b||g.isRenderTarget?g:g.clone(),r[g.uniqueId]=v[C]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:v[C]=b?g:g.clone()}}return v};class I{static AppendSerializedAnimations(q,S){if(q.animations){S.animations=[];for(let b=0;b<q.animations.length;b++){const z=q.animations[b];S.animations.push(z.serialize())}}}static Serialize(q,S){S||(S={}),C.b&&(S.tags=C.b.GetTags(q));const b=(0,g.e)(q);for(const z in b){const C=b[z],v=C.sourceName||z,U=C.type,g=q[z];if(void 0!==g&&null!==g&&("uniqueId"!==z||I.AllowLoadingUniqueId))switch(U){case 0:S[v]=g;break;case 1:case 3:case 7:case 9:S[v]=g.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:S[v]=g.Zb();break;case 6:case 11:S[v]=g.id}}return S}static ParseProperties(q,S,b,z){z||(z="");const C=(0,g.e)(S);for(const g in C){const r=C[g],V=q[r.sourceName||g],l=r.type;if(void 0!==V&&null!==V&&("uniqueId"!==g||I.AllowLoadingUniqueId)){const q=S;switch(l){case 0:q[g]=V;break;case 1:b&&(q[g]=I._TextureParser(V,b,z));break;case 2:q[g]=v.HS.Hb(V);break;case 3:q[g]=I._FresnelParametersParser(V);break;case 4:q[g]=U.Vector2.Hb(V);break;case 5:q[g]=U.yS.Hb(V);break;case 6:b&&(q[g]=b.getLastMeshById(V));break;case 7:q[g]=I._ColorCurvesParser(V);break;case 8:q[g]=v.b.Hb(V);break;case 9:q[g]=I._ImageProcessingConfigurationParser(V);break;case 10:q[g]=U.Quaternion.Hb(V);break;case 11:b&&(q[g]=b.getCameraById(V));break;case 12:q[g]=U.Matrix.Hb(V)}}}}static Parse(q,S,b){let z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const v=q();return C.b&&C.b.AddTagsTo(v,S.tags),I.ParseProperties(S,v,b,z),v}static Clone(q,S){return r(q,S,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(q,S){return r(q,S,!0)}}I.AllowLoadingUniqueId=!1,I._ImageProcessingConfigurationParser=q=>{throw(0,z.c)("ImageProcessingConfiguration")},I._FresnelParametersParser=q=>{throw(0,z.c)("FresnelParameters")},I._ColorCurvesParser=q=>{throw(0,z.c)("ColorCurves")},I._TextureParser=(q,S,b)=>{throw(0,z.c)("Texture")}},11144:(q,S,b)=>{b.d(S,{b:()=>C});class z{static Eval(q,S){return"true"===(q=q.match(/\([^()]*\)/g)?q.replace(/\([^()]*\)/g,(q=>(q=q.slice(1,q.length-1),z._HandleParenthesisContent(q,S)))):z._HandleParenthesisContent(q,S))||"false"!==q&&z.Eval(q,S)}static _HandleParenthesisContent(q,S){let b;S=S||(q=>"true"===q);const C=q.split("||");for(const v in C)if(Object.prototype.hasOwnProperty.call(C,v)){let q=z._SimplifyNegation(C[v].trim());const U=q.split("&&");if(U.length>1)for(let C=0;C<U.length;++C){const v=z._SimplifyNegation(U[C].trim());if(b="true"!==v&&"false"!==v?"!"===v[0]?!S(v.substring(1)):S(v):"true"===v,!b){q="false";break}}if(b||"true"===q){b=!0;break}b="true"!==q&&"false"!==q?"!"===q[0]?!S(q.substring(1)):S(q):"true"===q}return b?"true":"false"}static _SimplifyNegation(q){return"!true"===(q=(q=q.replace(/^[\s!]+/,(q=>(q=q.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?q="false":"!false"===q&&(q="true"),q}}class C{static EnableFor(q){q._tags=q._tags||{},q.hasTags=()=>C.HasTags(q),q.addTags=S=>C.AddTagsTo(q,S),q.removeTags=S=>C.RemoveTagsFrom(q,S),q.matchesTagsQuery=S=>C.MatchesQuery(q,S)}static DisableFor(q){delete q._tags,delete q.hasTags,delete q.addTags,delete q.removeTags,delete q.matchesTagsQuery}static HasTags(q){if(!q._tags)return!1;const S=q._tags;for(const b in S)if(Object.prototype.hasOwnProperty.call(S,b))return!0;return!1}static GetTags(q){let S=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!q._tags)return null;if(S){const S=[];for(const b in q._tags)Object.prototype.hasOwnProperty.call(q._tags,b)&&!0===q._tags[b]&&S.push(b);return S.join(" ")}return q._tags}static AddTagsTo(q,S){if(!S)return;if("string"!==typeof S)return;const b=S.split(" ");for(const z of b)C._AddTagTo(q,z)}static _AddTagTo(q,S){""!==(S=S.trim())&&"true"!==S&&"false"!==S&&(S.match(/[\s]/)||S.match(/^([!]|([|]|[&]){2})/)||(C.EnableFor(q),q._tags[S]=!0))}static RemoveTagsFrom(q,S){if(!C.HasTags(q))return;const b=S.split(" ");for(const z in b)C._RemoveTagFrom(q,b[z])}static _RemoveTagFrom(q,S){delete q._tags[S]}static MatchesQuery(q,S){return void 0===S||(""===S?C.HasTags(q):z.Eval(S,(S=>C.HasTags(q)&&q._tags[S])))}}},11081:(q,S,b)=>{b.d(S,{e:()=>z});function z(q,S,b,z){var C,v=arguments.length,U=v<3?S:null===z?z=Object.getOwnPropertyDescriptor(S,b):z;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)U=Reflect.decorate(q,S,b,z);else for(var g=q.length-1;g>=0;g--)(C=q[g])&&(U=(v<3?C(U):v>3?C(S,b,U):C(S,b))||U);return v>3&&U&&Object.defineProperty(S,b,U),U}Object.create;Object.create}}]);