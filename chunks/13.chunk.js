"use strict";(self.c2c3ycupenc=self.c2c3ycupenc||[]).push([[13],{11733:(c,r,D)=>{D.d(r,{b:()=>W});let W=!1},11705:(c,r,D)=>{D.d(r,{c:()=>m});var W=D(11664),B=D(11669),t=D(11494),u=D(11683),a=D(11538),H=D(11646),x=(D(11545),D(11710));class M{get wrapU(){return this._wrapU}set wrapU(c){this._wrapU=c}get wrapV(){return this._wrapV}set wrapV(c){this._wrapV=c}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(c){this._texture&&(this._texture.isCube=c)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(c){this._texture&&(this._texture.is3D=c)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(c){this._texture&&(this._texture.is2DArray=c)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(c){return void 0!==(null===c||void 0===c?void 0:c.shareDepth)}constructor(c){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=x.b.Zero(),this._cachedBaseSize=x.b.Zero(),this._initialSamplingMode=2,this._texture=M._IsRenderTargetWrapper(c)?c.texture:c,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(c){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(c,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var E=D(11717);class m extends M{set Ea(c){this._hasAlpha!==c&&(this._hasAlpha=c,this._scene&&this._scene.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))))}get Ea(){return this._hasAlpha}set getAlphaFromRGB(c){this._getAlphaFromRGB!==c&&(this._getAlphaFromRGB=c,this._scene&&this._scene.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(c){this._coordinatesIndex!==c&&(this._coordinatesIndex=c,this._scene&&this._scene.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(c){this._coordinatesMode!==c&&(this._coordinatesMode=c,this._scene&&this._scene.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(c){this._wrapU=c}get wrapV(){return this._wrapV}set wrapV(c){this._wrapV=c}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(c){this._texture?this._texture.isCube=c:this._isCube=c}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(c){this._texture&&(this._texture.is3D=c)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(c){this._texture&&(this._texture.is2DArray=c)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(c){var r;if(this._texture){if(this._texture._gammaSpace===c)return;this._texture._gammaSpace=c}else{if(this._gammaSpace===c)return;this._gammaSpace=c}null===(r=this.yc())||void 0===r||r.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(c){var r;c!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=c),null===(r=this.yc())||void 0===r||r.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(c){this._texture&&(this._texture._lodGenerationOffset=c)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(c){this._texture&&(this._texture._lodGenerationScale=c)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(c){this._texture&&(this._texture._linearSpecularLOD=c)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(c){this._texture&&(this._texture._irradianceTexture=c)}get uid(){return this._uid||(this._uid=(0,H.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(c){this._onDisposeObserver&&this.Wa.remove(this._onDisposeObserver),this._onDisposeObserver=this.Wa.add(c)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=m.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Wa=new t.c,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,c?m._IsScene(c)?this._scene=c:this._engine=c:this._scene=a.c.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=r,this._uid=null}yc(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return u.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return u.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(c){}get canRescale(){return!1}_getFromCache(c,r,D,W,B,t){const u=this._getEngine();if(!u)return null;const a=u._getUseSRGBBuffer(!!B,r),H=u.getLoadedTexturesCache();for(let x=0;x<H.length;x++){const u=H[x];if((void 0===B||a===u._useSRGBBuffer)&&(void 0===W||W===u.invertY)&&u.url===c&&u.generateMipMaps===!r&&(!D||D===u.samplingMode)&&(void 0===t||t===u.isCube))return u.incrementReferences(),u}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const c=this.yc();c&&c.markAllMaterialsAsDirty(1)}readPixels(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,W=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],B=arguments.length>4&&void 0!==arguments[4]&&arguments[4],t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const x=this._getEngine();if(!x)return null;const M=this.getSize();let E=M.width,m=M.height;0!==r&&(E/=Math.pow(2,r),m/=Math.pow(2,r),E=Math.round(E),m=Math.round(m)),a=Math.min(E,a),H=Math.min(m,H);try{return this._texture.isCube?x._readTexturePixels(this._texture,a,H,c,r,D,W,B,t,u):x._readTexturePixels(this._texture,a,H,-1,r,D,W,B,t,u)}catch(Y){return null}}_readPixelsSync(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,W=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],B=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const t=this.getSize();let u=t.width,a=t.height;const H=this._getEngine();if(!H)return null;0!=r&&(u/=Math.pow(2,r),a/=Math.pow(2,r),u=Math.round(u),a=Math.round(a));try{return this._texture.isCube?H._readTexturePixelsSync(this._texture,u,a,c,r,D,W,B):H._readTexturePixelsSync(this._texture,u,a,-1,r,D,W,B)}catch(x){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const c=this._scene.textures.indexOf(this);if(c>=0&&this._scene.textures.splice(c,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const c=this._parentContainer.textures.indexOf(this);c>-1&&this._parentContainer.textures.splice(c,1),this._parentContainer=null}}this.Wa.notifyObservers(this),this.Wa.clear(),this.metadata=null,super.dispose()}serialize(){let c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!c)return null;const r=E.d.Serialize(this);return E.d.AppendSerializedAnimations(this,r),r}static WhenAllReady(c,r){let D=c.length;if(0!==D)for(let W=0;W<c.length;W++){const B=c[W];if(B.isReady())0===--D&&r();else{const c=B.onLoadObservable;c?c.addOnce((()=>{0===--D&&r()})):0===--D&&r()}}else r()}static _IsScene(c){return"Scene"===c.getClassName()}}m.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,W.e)([(0,B.K)()],m.prototype,"uniqueId",void 0),(0,W.e)([(0,B.K)()],m.prototype,"name",void 0),(0,W.e)([(0,B.K)()],m.prototype,"displayName",void 0),(0,W.e)([(0,B.K)()],m.prototype,"metadata",void 0),(0,W.e)([(0,B.K)("Ea")],m.prototype,"_hasAlpha",void 0),(0,W.e)([(0,B.K)("getAlphaFromRGB")],m.prototype,"_getAlphaFromRGB",void 0),(0,W.e)([(0,B.K)()],m.prototype,"level",void 0),(0,W.e)([(0,B.K)("coordinatesIndex")],m.prototype,"_coordinatesIndex",void 0),(0,W.e)([(0,B.K)()],m.prototype,"optimizeUVAllocation",void 0),(0,W.e)([(0,B.K)("coordinatesMode")],m.prototype,"_coordinatesMode",void 0),(0,W.e)([(0,B.K)()],m.prototype,"wrapU",null),(0,W.e)([(0,B.K)()],m.prototype,"wrapV",null),(0,W.e)([(0,B.K)()],m.prototype,"wrapR",void 0),(0,W.e)([(0,B.K)()],m.prototype,"anisotropicFilteringLevel",void 0),(0,W.e)([(0,B.K)()],m.prototype,"isCube",null),(0,W.e)([(0,B.K)()],m.prototype,"is3D",null),(0,W.e)([(0,B.K)()],m.prototype,"is2DArray",null),(0,W.e)([(0,B.K)()],m.prototype,"gammaSpace",null),(0,W.e)([(0,B.K)()],m.prototype,"invertZ",void 0),(0,W.e)([(0,B.K)()],m.prototype,"lodLevelInAlpha",void 0),(0,W.e)([(0,B.K)()],m.prototype,"lodGenerationOffset",null),(0,W.e)([(0,B.K)()],m.prototype,"lodGenerationScale",null),(0,W.e)([(0,B.K)()],m.prototype,"linearSpecularLOD",null),(0,W.e)([(0,B.F)()],m.prototype,"irradianceTexture",null),(0,W.e)([(0,B.K)()],m.prototype,"isRenderTarget",void 0)},11656:(c,r,D)=>{D.d(r,{b:()=>q});var W=D(11664),B=D(11669),t=D(11494),u=D(11683),a=D(11705),H=D(11637),x=D(11524),M=D(11581),E=D(11628),m=D(11729),Y=D(11555);function v(c,r){let D=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const W=r.width,B=r.height;if(c instanceof Float32Array){let r=c.byteLength/c.BYTES_PER_ELEMENT;const D=new Uint8Array(r);for(;--r>=0;){let W=c[r];W<0?W=0:W>1&&(W=1),D[r]=255*W}c=D}const t=document.createElement("canvas");t.width=W,t.height=B;const u=t.getContext("2d");if(!u)return null;const a=u.createImageData(W,B);if(a.data.set(c),u.putImageData(a,0,0),D){const c=document.createElement("canvas");c.width=W,c.height=B;const r=c.getContext("2d");return r?(r.translate(0,B),r.scale(1,-1),r.drawImage(t,0,0),c.toDataURL("image/png")):null}return t.toDataURL("image/png")}function k(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const W=c.getInternalTexture();if(!W)return null;const B=c._readPixelsSync(r,D);return B?v(B,c.getSize(),W.invertY):null}async function w(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const W=c.getInternalTexture();if(!W)return null;const B=await c.readPixels(r,D);return B?v(B,c.getSize(),W.invertY):null}var Z=D(11733),J=D(11717);class q extends a.c{static _CreateVideoTexture(c,r,D){arguments.length>5&&void 0!==arguments[5]||q.TRILINEAR_SAMPLINGMODE;throw(0,x.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(c){this._isBlocking=c}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(c,r,D,W){let B,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q.TRILINEAR_SAMPLINGMODE,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,x=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,E=arguments.length>8&&void 0!==arguments[8]&&arguments[8],m=arguments.length>9?arguments[9]:void 0,Y=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0,k=arguments.length>12?arguments[12]:void 0,w=arguments.length>13?arguments[13]:void 0;super(r),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new t.c,this._isBlocking=!0,this.name=c||"",this.url=c;let J=!1,j=null,X=!0;"object"===typeof D&&null!==D?(B=D.noMipmap??!1,W=D.invertY??!Z.b,u=D.samplingMode??q.TRILINEAR_SAMPLINGMODE,a=D.F??null,H=D.onError??null,x=D.buffer??null,E=D.deleteBuffer??!1,m=D.format,Y=D.mimeType,v=D.loaderOptions,k=D.creationFlags,J=D.useSRGBBuffer??!1,j=D.internalTexture??null,X=D.gammaSpace??X,w=D.forcedExtension??w):B=!!D,this._gammaSpace=X,this._noMipmap=B,this._invertY=void 0===W?!Z.b:W,this._initialSamplingMode=u,this._buffer=x,this._deleteBuffer=E,this._mimeType=Y,this._loaderOptions=v,this._creationFlags=k,this._useSRGBBuffer=J,this._forcedExtension=w,void 0!==m&&(this._format=m);const e=this.yc(),y=this._getEngine();if(!y)return;y.onBeforeTextureInitObservable.notifyObservers(this);const U=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),a&&a(),!this.isBlocking&&e&&e.resetCachedMaterial()},N=(c,r)=>{this._loadingError=!0,this._errorObject={message:c,exception:r},H&&H(c,r),q.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!j)return this._delayedOnLoad=U,void(this._delayedOnError=N);if(this._texture=j??this._getFromCache(this.url,B,u,this._invertY,J,this.isCube),this._texture)if(this._texture.isReady)M.d.SetImmediate((()=>U()));else{const c=this._texture.onLoadedObservable.add(U);this._texture.onErrorObservable.add((r=>{var D;N(r.message,r.exception),null===(D=this._texture)||void 0===D||D.onLoadedObservable.remove(c)}))}else if(e&&e.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=U,this._delayedOnError=N;else{try{this._texture=y.createTexture(this.url,B,this._invertY,e,u,U,N,this._buffer,void 0,this._format,this._forcedExtension,Y,v,k,J)}catch(g){throw N("error loading",g),g}E&&(this._buffer=null)}}updateURL(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,D=arguments.length>2?arguments[2]:void 0,W=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.yc().markAllMaterialsAsDirty(1,(c=>c.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=c),this.url=c,this._buffer=r,this._forcedExtension=W,this.delayLoadState=4,D&&(this._delayedOnLoad=D),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const c=this.yc();c&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?M.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=c.getEngine().createTexture(this.url,this._noMipmap,this._invertY,c,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(c,r,D,W){c*=this._cachedUScale,r*=this._cachedVScale,c-=this.uRotationCenter*this._cachedUScale,r-=this.vRotationCenter*this._cachedVScale,D-=this.wRotationCenter,u.Zr.TransformCoordinatesFromFloatsToRef(c,r,D,this._rowGenerationMatrix,W),W.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,W.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,W.z+=this.wRotationCenter}getTextureMatrix(){let c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*c===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*c,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=u.Matrix.Zero(),this._rowGenerationMatrix=new u.Matrix,this._t0=u.Zr.Zero(),this._t1=u.Zr.Zero(),this._t2=u.Zr.Zero()),u.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(u.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,u.TmpVectors.Matrix[0]),u.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,u.TmpVectors.Matrix[1]),u.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,u.TmpVectors.Matrix[2]),u.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,u.TmpVectors.Matrix[3]),u.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(u.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(u.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(u.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.BE(this._t0),this._t2.BE(this._t0),u.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const r=this.yc();if(!r)return this._cachedTextureMatrix;const D=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&D!==this._cachedIdentity3x2&&r.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const c=this.yc();if(!c)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==q.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===c.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=u.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=u.Matrix.Zero());const r=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case q.PLANAR_MODE:u.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case q.PROJECTION_MODE:{u.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const r=c.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=r.updateFlag,r.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:u.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return r&&c.markAllMaterialsAsDirty(1,(c=>c.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const c={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,F:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return J.d.Clone((()=>new q(this._texture?this._texture.url:null,this.yc(),c)),this)}serialize(){var c;const r=this.name;q.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const D=super.serialize(q._SerializeInternalTextureUniqueId);if(!D)return null;if(q.SerializeBuffers||q.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))D.base64String=this._buffer,D.name=D.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const c=this.mimeType||"image/png";D.base64String=`data:${c};base64,${(0,Y.h)(this._buffer)}`}else(q.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(D.base64String=!this._engine||this._engine._features.supportSyncTextureRead?k(this):w(this));var W;(D.invertY=this._invertY,D.samplingMode=this.samplingMode,D._creationFlags=this._creationFlags,D._useSRGBBuffer=this._useSRGBBuffer,q._SerializeInternalTextureUniqueId)&&(D.internalTextureUniqueId=null===(W=this._texture)||void 0===W?void 0:W.uniqueId);return D.internalTextureLabel=null===(c=this._texture)||void 0===c?void 0:c.label,D.noMipmap=this._noMipmap,this.name=r,D}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(c,r,D){if(c.customType){const W=E.b.Instantiate(c.customType).Parse(c,r,D);return c.samplingMode&&W.updateSamplingMode&&W._samplingMode&&W._samplingMode!==c.samplingMode&&W.updateSamplingMode(c.samplingMode),W}if(c.isCube&&!c.isRenderTarget)return q._CubeTextureParser(c,r,D);const W=void 0!==c.internalTextureUniqueId;if(!c.name&&!c.isRenderTarget&&!W)return null;let B;if(W){const D=r.getEngine().getLoadedTexturesCache();for(const r of D)if(r.uniqueId===c.internalTextureUniqueId){B=r;break}}const t=r=>{if(r&&r._texture&&(r._texture._cachedWrapU=null,r._texture._cachedWrapV=null,r._texture._cachedWrapR=null),c.samplingMode){const D=c.samplingMode;r&&r.samplingMode!==D&&r.updateSamplingMode(D)}if(r&&c.animations)for(let D=0;D<c.animations.length;D++){const W=c.animations[D],B=(0,H.b)("BABYLON.Animation");B&&r.animations.push(B.Parse(W))}r&&r._texture&&(W&&!B&&r._texture._setUniqueId(c.internalTextureUniqueId),r._texture.label=c.internalTextureLabel)};return J.d.Parse((()=>{let W=!0;if(c.noMipmap&&(W=!1),c.mirrorPlane){const D=q._CreateMirror(c.name,c.renderTargetSize,r,W);return D._waitingRenderList=c.renderList,D.mirrorPlane=m.d.er(c.mirrorPlane),t(D),D}if(c.isRenderTarget){let D=null;if(c.isCube){if(r.reflectionProbes)for(let W=0;W<r.reflectionProbes.length;W++){const D=r.reflectionProbes[W];if(D.name===c.name)return D.cubeTexture}}else D=q._CreateRenderTargetTexture(c.name,c.renderTargetSize,r,W,c._creationFlags??0),D._waitingRenderList=c.renderList;return t(D),D}if(c.isVideo){const B=q._CreateVideoTexture(D+(c.url||c.name),D+(c.src||c.url),r,W,c.invertY,c.samplingMode,c.settings||{});return t(B),B}{let u;if(c.base64String&&!B)u=q.CreateFromBase64String(c.base64String,c.base64String,r,!W,c.invertY,c.samplingMode,(()=>{t(u)}),c._creationFlags??0,c._useSRGBBuffer??!1),u.name=c.name;else{let a;a=c.name&&(c.name.indexOf("://")>0||c.name.startsWith("data:"))?c.name:D+c.name,c.url&&(c.url.startsWith("data:")||q.UseSerializedUrlIfAny)&&(a=c.url);const H={noMipmap:!W,invertY:c.invertY,samplingMode:c.samplingMode,F:()=>{t(u)},internalTexture:B};u=new q(a,r,H)}return u}}),c,r)}static CreateFromBase64String(c,r,D,W,B){let t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q.TRILINEAR_SAMPLINGMODE;return new q("data:"+r,D,W,B,t,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(c,r,D){let W=arguments.length>3&&void 0!==arguments[3]&&arguments[3],B=arguments.length>4?arguments[4]:void 0,t=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q.TRILINEAR_SAMPLINGMODE,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,x=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,M=arguments.length>10?arguments[10]:void 0,E=arguments.length>11?arguments[11]:void 0;return"data:"!==c.substring(0,5)&&(c="data:"+c),new q(c,D,B,t,u,a,H,r,W,x,void 0,void 0,M,E)}}q.SerializeBuffers=!0,q.ForceSerializeBuffers=!1,q.OnTextureLoadErrorObservable=new t.c,q._SerializeInternalTextureUniqueId=!1,q._CubeTextureParser=(c,r,D)=>{throw(0,x.e)("CubeTexture")},q._CreateMirror=(c,r,D,W)=>{throw(0,x.e)("MirrorTexture")},q._CreateRenderTargetTexture=(c,r,D,W,B)=>{throw(0,x.e)("RenderTargetTexture")},q.NEAREST_SAMPLINGMODE=1,q.NEAREST_NEAREST_MIPLINEAR=8,q.BILINEAR_SAMPLINGMODE=2,q.LINEAR_LINEAR_MIPNEAREST=11,q.TRILINEAR_SAMPLINGMODE=3,q.LINEAR_LINEAR_MIPLINEAR=3,q.NEAREST_NEAREST_MIPNEAREST=4,q.NEAREST_LINEAR_MIPNEAREST=5,q.NEAREST_LINEAR_MIPLINEAR=6,q.NEAREST_LINEAR=7,q.NEAREST_NEAREST=1,q.LINEAR_NEAREST_MIPNEAREST=9,q.LINEAR_NEAREST_MIPLINEAR=10,q.LINEAR_LINEAR=2,q.LINEAR_NEAREST=12,q.EXPLICIT_MODE=0,q.SPHERICAL_MODE=1,q.PLANAR_MODE=2,q.CUBIC_MODE=3,q.PROJECTION_MODE=4,q.SKYBOX_MODE=5,q.INVCUBIC_MODE=6,q.EQUIRECTANGULAR_MODE=7,q.FIXED_EQUIRECTANGULAR_MODE=8,q.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,q.CLAMP_ADDRESSMODE=0,q.WRAP_ADDRESSMODE=1,q.MIRROR_ADDRESSMODE=2,q.UseSerializedUrlIfAny=!1,(0,W.e)([(0,B.K)()],q.prototype,"url",void 0),(0,W.e)([(0,B.K)()],q.prototype,"uOffset",void 0),(0,W.e)([(0,B.K)()],q.prototype,"vOffset",void 0),(0,W.e)([(0,B.K)()],q.prototype,"uScale",void 0),(0,W.e)([(0,B.K)()],q.prototype,"vScale",void 0),(0,W.e)([(0,B.K)()],q.prototype,"uAng",void 0),(0,W.e)([(0,B.K)()],q.prototype,"vAng",void 0),(0,W.e)([(0,B.K)()],q.prototype,"wAng",void 0),(0,W.e)([(0,B.K)()],q.prototype,"uRotationCenter",void 0),(0,W.e)([(0,B.K)()],q.prototype,"vRotationCenter",void 0),(0,W.e)([(0,B.K)()],q.prototype,"wRotationCenter",void 0),(0,W.e)([(0,B.K)()],q.prototype,"homogeneousRotationInUVTransform",void 0),(0,W.e)([(0,B.K)()],q.prototype,"isBlocking",null),(0,H.e)("BABYLON.Texture",q),J.d._TextureParser=q.Parse},11729:(c,r,D)=>{D.d(r,{d:()=>B});var W=D(11683);class B{constructor(c,r,D,B){this.normal=new W.Zr(c,r,D),this.d=B}Ma(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new B(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let c=this.normal.getHashCode();return c=397*c^this.d,c}normalize(){const c=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let r=0;return 0!==c&&(r=1/c),this.normal.x*=r,this.normal.y*=r,this.normal.z*=r,this.d*=r,this}transform(c){const r=B._TmpMatrix;c.invertToRef(r);const D=r.m,W=this.normal.x,t=this.normal.y,u=this.normal.z,a=this.d,H=W*D[0]+t*D[1]+u*D[2]+a*D[3],x=W*D[4]+t*D[5]+u*D[6]+a*D[7],M=W*D[8]+t*D[9]+u*D[10]+a*D[11],E=W*D[12]+t*D[13]+u*D[14]+a*D[15];return new B(H,x,M,E)}dotCoordinate(c){return this.normal.x*c.x+this.normal.y*c.y+this.normal.z*c.z+this.d}copyFromPoints(c,r,D){const W=r.x-c.x,B=r.y-c.y,t=r.z-c.z,u=D.x-c.x,a=D.y-c.y,H=D.z-c.z,x=B*H-t*a,M=t*u-W*H,E=W*a-B*u,m=Math.sqrt(x*x+M*M+E*E);let Y;return Y=0!==m?1/m:0,this.normal.x=x*Y,this.normal.y=M*Y,this.normal.z=E*Y,this.d=-(this.normal.x*c.x+this.normal.y*c.y+this.normal.z*c.z),this}isFrontFacingTo(c,r){return W.Zr.Dot(this.normal,c)<=r}signedDistanceTo(c){return W.Zr.Dot(c,this.normal)+this.d}static er(c){return new B(c[0],c[1],c[2],c[3])}static FromPoints(c,r,D){const W=new B(0,0,0,0);return W.copyFromPoints(c,r,D),W}static FromPositionAndNormal(c,r){const D=new B(0,0,0,0);return this.FromPositionAndNormalToRef(c,r,D)}static FromPositionAndNormalToRef(c,r,D){return D.normal.t(r),D.normal.normalize(),D.d=-c.dot(D.normal),D}static SignedDistanceToPlaneFromPositionAndNormal(c,r,D){const B=-(r.x*c.x+r.y*c.y+r.z*c.z);return W.Zr.Dot(D,r)+B}}B._TmpMatrix=W.Matrix.Identity()},11710:(c,r,D)=>{D.d(r,{b:()=>W});class W{constructor(c,r){this.width=c,this.height=r}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let c=0|this.width;return c=397*c^this.height,c}t(c){this.width=c.width,this.height=c.height}Ja(c,r){return this.width=c,this.height=r,this}set(c,r){return this.Ja(c,r)}multiplyByFloats(c,r){return new W(this.width*c,this.height*r)}clone(){return new W(this.width,this.height)}equals(c){return!!c&&(this.width===c.width&&this.height===c.height)}get surface(){return this.width*this.height}static Zero(){return new W(0,0)}add(c){return new W(this.width+c.width,this.height+c.height)}Jr(c){return new W(this.width-c.width,this.height-c.height)}scale(c){return new W(this.width*c,this.height*c)}static Lerp(c,r,D){const B=c.width+(r.width-c.width)*D,t=c.height+(r.height-c.height)*D;return new W(B,t)}}},11677:(c,r,D)=>{D.d(r,{d:()=>t,f:()=>u});const W={},B={};function t(c){const r=c.getClassName();return B[r]||(B[r]={}),B[r]}function u(c){const r=c.getClassName();if(W[r])return W[r];W[r]={};const D=W[r];let t=c,u=r;for(;u;){const c=B[u];for(const B in c)D[B]=c[B];let r,W=!1;do{if(r=Object.getPrototypeOf(t),!r.getClassName){W=!0;break}if(r.getClassName()!==u)break;t=r}while(r);if(W)break;u=r.getClassName(),t=r}return D}},11669:(c,r,D)=>{D.d(r,{A:()=>m,C:()=>w,F:()=>a,H:()=>M,J:()=>E,K:()=>u,b:()=>t,d:()=>J,g:()=>Y,i:()=>H,l:()=>v,p:()=>x,t:()=>k,w:()=>Z});var W=D(11677);function B(c,r){return(D,B)=>{const t=(0,W.d)(D);t[B]||(t[B]={type:c,sourceName:r})}}function t(c){return function(c){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(D,W)=>{const B=r||"_"+W;Object.defineProperty(D,W,{get:function(){return this[B]},set:function(r){var W;"function"===typeof(null===(W=this[B])||void 0===W?void 0:W.equals)&&this[B].equals(r)||this[B]!==r&&(this[B]=r,D[c].apply(this))},enumerable:!0,configurable:!0})}}(c,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function u(c){return B(0,c)}function a(c){return B(1,c)}function H(c){return B(2,c)}function x(c){return B(3,c)}function M(c){return B(4,c)}function E(c){return B(5,c)}function m(c){return B(6,c)}function Y(c){return B(7,c)}function v(c){return B(8,c)}function k(c){return B(9,c)}function w(c){return B(10,c)}function Z(c){return B(12,c)}function J(c,r,D,W){const B=D.value;D.value=function(){let D=B;if("undefined"!==typeof _native&&_native[r]){const c=_native[r];D=W?function(){return W(...arguments)?c(...arguments):B(...arguments)}:c}return c[r]=D,D(...arguments)}}J.filter=function(c){return(r,D,W)=>J(r,D,W,c)}},11717:(c,r,D)=>{D.d(r,{d:()=>x});var W=D(11524),B=D(11719),t=D(11722),u=D(11683),a=D(11677);const H=function(c,r,D){let W=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const t=c();B.b&&B.b.HasTags(r)&&B.b.AddTagsTo(t,B.b.GetTags(r,!0));const u=(0,a.f)(t),H={};for(const B in u){const c=u[B],a=r[B],M=c.type;if(void 0!==a&&null!==a&&("uniqueId"!==B||x.AllowLoadingUniqueId))switch(M){case 0:case 6:case 9:case 11:t[B]=a;break;case 1:W.cloneTexturesOnlyOnce&&H[a.uniqueId]?t[B]=H[a.uniqueId]:(t[B]=D||a.isRenderTarget?a:a.clone(),H[a.uniqueId]=t[B]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:t[B]=D?a:a.clone()}}return t};class x{static AppendSerializedAnimations(c,r){if(c.animations){r.animations=[];for(let D=0;D<c.animations.length;D++){const W=c.animations[D];r.animations.push(W.serialize())}}}static Serialize(c,r){r||(r={}),B.b&&(r.tags=B.b.GetTags(c));const D=(0,a.f)(c);for(const W in D){const B=D[W],t=B.sourceName||W,u=B.type,a=c[W];if(void 0!==a&&null!==a&&("uniqueId"!==W||x.AllowLoadingUniqueId))switch(u){case 0:r[t]=a;break;case 1:case 3:case 7:case 9:r[t]=a.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:r[t]=a.Ma();break;case 6:case 11:r[t]=a.id}}return r}static ParseProperties(c,r,D,W){W||(W="");const B=(0,a.f)(r);for(const a in B){const H=B[a],M=c[H.sourceName||a],E=H.type;if(void 0!==M&&null!==M&&("uniqueId"!==a||x.AllowLoadingUniqueId)){const c=r;switch(E){case 0:c[a]=M;break;case 1:D&&(c[a]=x._TextureParser(M,D,W));break;case 2:c[a]=t.Xr.er(M);break;case 3:c[a]=x._FresnelParametersParser(M);break;case 4:c[a]=u.Vector2.er(M);break;case 5:c[a]=u.Zr.er(M);break;case 6:D&&(c[a]=D.getLastMeshById(M));break;case 7:c[a]=x._ColorCurvesParser(M);break;case 8:c[a]=t.Xa.er(M);break;case 9:c[a]=x._ImageProcessingConfigurationParser(M);break;case 10:c[a]=u.Quaternion.er(M);break;case 11:D&&(c[a]=D.getCameraById(M));break;case 12:c[a]=u.Matrix.er(M)}}}}static Parse(c,r,D){let W=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const t=c();return B.b&&B.b.AddTagsTo(t,r.tags),x.ParseProperties(r,t,D,W),t}static Clone(c,r){return H(c,r,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(c,r){return H(c,r,!0)}}x.AllowLoadingUniqueId=!1,x._ImageProcessingConfigurationParser=c=>{throw(0,W.e)("ImageProcessingConfiguration")},x._FresnelParametersParser=c=>{throw(0,W.e)("FresnelParameters")},x._ColorCurvesParser=c=>{throw(0,W.e)("ColorCurves")},x._TextureParser=(c,r,D)=>{throw(0,W.e)("Texture")}},11719:(c,r,D)=>{D.d(r,{b:()=>B});class W{static Eval(c,r){return"true"===(c=c.match(/\([^()]*\)/g)?c.replace(/\([^()]*\)/g,(c=>(c=c.slice(1,c.length-1),W._HandleParenthesisContent(c,r)))):W._HandleParenthesisContent(c,r))||"false"!==c&&W.Eval(c,r)}static _HandleParenthesisContent(c,r){let D;r=r||(c=>"true"===c);const B=c.split("||");for(const t in B)if(Object.prototype.hasOwnProperty.call(B,t)){let c=W._SimplifyNegation(B[t].trim());const u=c.split("&&");if(u.length>1)for(let B=0;B<u.length;++B){const t=W._SimplifyNegation(u[B].trim());if(D="true"!==t&&"false"!==t?"!"===t[0]?!r(t.substring(1)):r(t):"true"===t,!D){c="false";break}}if(D||"true"===c){D=!0;break}D="true"!==c&&"false"!==c?"!"===c[0]?!r(c.substring(1)):r(c):"true"===c}return D?"true":"false"}static _SimplifyNegation(c){return"!true"===(c=(c=c.replace(/^[\s!]+/,(c=>(c=c.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?c="false":"!false"===c&&(c="true"),c}}class B{static EnableFor(c){c._tags=c._tags||{},c.hasTags=()=>B.HasTags(c),c.addTags=r=>B.AddTagsTo(c,r),c.removeTags=r=>B.RemoveTagsFrom(c,r),c.matchesTagsQuery=r=>B.MatchesQuery(c,r)}static DisableFor(c){delete c._tags,delete c.hasTags,delete c.addTags,delete c.removeTags,delete c.matchesTagsQuery}static HasTags(c){if(!c._tags)return!1;const r=c._tags;for(const D in r)if(Object.prototype.hasOwnProperty.call(r,D))return!0;return!1}static GetTags(c){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!c._tags)return null;if(r){const r=[];for(const D in c._tags)Object.prototype.hasOwnProperty.call(c._tags,D)&&!0===c._tags[D]&&r.push(D);return r.join(" ")}return c._tags}static AddTagsTo(c,r){if(!r)return;if("string"!==typeof r)return;const D=r.split(" ");for(const W of D)B._AddTagTo(c,W)}static _AddTagTo(c,r){""!==(r=r.trim())&&"true"!==r&&"false"!==r&&(r.match(/[\s]/)||r.match(/^([!]|([|]|[&]){2})/)||(B.EnableFor(c),c._tags[r]=!0))}static RemoveTagsFrom(c,r){if(!B.HasTags(c))return;const D=r.split(" ");for(const W in D)B._RemoveTagFrom(c,D[W])}static _RemoveTagFrom(c,r){delete c._tags[r]}static MatchesQuery(c,r){return void 0===r||(""===r?B.HasTags(c):W.Eval(r,(r=>B.HasTags(c)&&c._tags[r])))}}},11664:(c,r,D)=>{D.d(r,{e:()=>W});function W(c,r,D,W){var B,t=arguments.length,u=t<3?r:null===W?W=Object.getOwnPropertyDescriptor(r,D):W;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)u=Reflect.decorate(c,r,D,W);else for(var a=c.length-1;a>=0;a--)(B=c[a])&&(u=(t<3?B(u):t>3?B(r,D,u):B(r,D))||u);return t>3&&u&&Object.defineProperty(r,D,u),u}Object.create;Object.create}}]);