"use strict";(self.agop5zpabxv=self.agop5zpabxv||[]).push([[13],{12396:(H,u,J)=>{J.d(u,{e:()=>O});let O=!1},12358:(H,u,J)=>{J.d(u,{b:()=>P});var O=J(12324),U=J(12329),h=J(12175),w=J(12338),g=J(12203),B=J(12306),b=(J(12210),J(12360));class d{get wrapU(){return this._wrapU}set wrapU(H){this._wrapU=H}get wrapV(){return this._wrapV}set wrapV(H){this._wrapV=H}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(H){this._texture&&(this._texture.isCube=H)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(H){this._texture&&(this._texture.is3D=H)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(H){this._texture&&(this._texture.is2DArray=H)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(H){return void 0!==(null===H||void 0===H?void 0:H.shareDepth)}constructor(H){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=b.e.Zero(),this._cachedBaseSize=b.e.Zero(),this._initialSamplingMode=2,this._texture=d._IsRenderTargetWrapper(H)?H.texture:H,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(H){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(H,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var G=J(12365);class P extends d{set Og(H){this._hasAlpha!==H&&(this._hasAlpha=H,this._scene&&this._scene.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))))}get Og(){return this._hasAlpha}set getAlphaFromRGB(H){this._getAlphaFromRGB!==H&&(this._getAlphaFromRGB=H,this._scene&&this._scene.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(H){this._coordinatesIndex!==H&&(this._coordinatesIndex=H,this._scene&&this._scene.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(H){this._coordinatesMode!==H&&(this._coordinatesMode=H,this._scene&&this._scene.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(H){this._wrapU=H}get wrapV(){return this._wrapV}set wrapV(H){this._wrapV=H}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(H){this._texture?this._texture.isCube=H:this._isCube=H}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(H){this._texture&&(this._texture.is3D=H)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(H){this._texture&&(this._texture.is2DArray=H)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(H){var u;if(this._texture){if(this._texture._gammaSpace===H)return;this._texture._gammaSpace=H}else{if(this._gammaSpace===H)return;this._gammaSpace=H}null===(u=this.ZH())||void 0===u||u.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(H){var u;H!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=H),null===(u=this.ZH())||void 0===u||u.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(H){this._texture&&(this._texture._lodGenerationOffset=H)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(H){this._texture&&(this._texture._lodGenerationScale=H)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(H){this._texture&&(this._texture._linearSpecularLOD=H)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(H){this._texture&&(this._texture._irradianceTexture=H)}get uid(){return this._uid||(this._uid=(0,B.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(H){this._onDisposeObserver&&this.nh.remove(this._onDisposeObserver),this._onDisposeObserver=this.nh.add(H)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=P.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.nh=new h.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,H?P._IsScene(H)?this._scene=H:this._engine=H:this._scene=g.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=u,this._uid=null}ZH(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return w.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return w.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(H){}get canRescale(){return!1}_getFromCache(H,u,J,O,U,h){const w=this._getEngine();if(!w)return null;const g=w._getUseSRGBBuffer(!!U,u),B=w.getLoadedTexturesCache();for(let b=0;b<B.length;b++){const w=B[b];if((void 0===U||g===w._useSRGBBuffer)&&(void 0===O||O===w.invertY)&&w.url===H&&w.generateMipMaps===!u&&(!J||J===w.samplingMode)&&(void 0===h||h===w.isCube))return w.incrementReferences(),w}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const H=this.ZH();H&&H.markAllMaterialsAsDirty(1)}readPixels(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,O=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,B=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const b=this._getEngine();if(!b)return null;const d=this.getSize();let G=d.width,P=d.height;0!==u&&(G/=Math.pow(2,u),P/=Math.pow(2,u),G=Math.round(G),P=Math.round(P)),g=Math.min(G,g),B=Math.min(P,B);try{return this._texture.isCube?b._readTexturePixels(this._texture,g,B,H,u,J,O,U,h,w):b._readTexturePixels(this._texture,g,B,-1,u,J,O,U,h,w)}catch(mH){return null}}_readPixelsSync(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,O=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const h=this.getSize();let w=h.width,g=h.height;const B=this._getEngine();if(!B)return null;0!=u&&(w/=Math.pow(2,u),g/=Math.pow(2,u),w=Math.round(w),g=Math.round(g));try{return this._texture.isCube?B._readTexturePixelsSync(this._texture,w,g,H,u,J,O,U):B._readTexturePixelsSync(this._texture,w,g,-1,u,J,O,U)}catch(b){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const H=this._scene.textures.indexOf(this);if(H>=0&&this._scene.textures.splice(H,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const H=this._parentContainer.textures.indexOf(this);H>-1&&this._parentContainer.textures.splice(H,1),this._parentContainer=null}}this.nh.notifyObservers(this),this.nh.clear(),this.metadata=null,super.dispose()}serialize(){let H=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!H)return null;const u=G.d.Serialize(this);return G.d.AppendSerializedAnimations(this,u),u}static WhenAllReady(H,u){let J=H.length;if(0!==J)for(let O=0;O<H.length;O++){const U=H[O];if(U.isReady())0===--J&&u();else{const H=U.onLoadObservable;H?H.addOnce((()=>{0===--J&&u()})):0===--J&&u()}}else u()}static _IsScene(H){return"Scene"===H.getClassName()}}P.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,O.c)([(0,U.I)()],P.prototype,"uniqueId",void 0),(0,O.c)([(0,U.I)()],P.prototype,"name",void 0),(0,O.c)([(0,U.I)()],P.prototype,"displayName",void 0),(0,O.c)([(0,U.I)()],P.prototype,"metadata",void 0),(0,O.c)([(0,U.I)("Og")],P.prototype,"_hasAlpha",void 0),(0,O.c)([(0,U.I)("getAlphaFromRGB")],P.prototype,"_getAlphaFromRGB",void 0),(0,O.c)([(0,U.I)()],P.prototype,"level",void 0),(0,O.c)([(0,U.I)("coordinatesIndex")],P.prototype,"_coordinatesIndex",void 0),(0,O.c)([(0,U.I)()],P.prototype,"optimizeUVAllocation",void 0),(0,O.c)([(0,U.I)("coordinatesMode")],P.prototype,"_coordinatesMode",void 0),(0,O.c)([(0,U.I)()],P.prototype,"wrapU",null),(0,O.c)([(0,U.I)()],P.prototype,"wrapV",null),(0,O.c)([(0,U.I)()],P.prototype,"wrapR",void 0),(0,O.c)([(0,U.I)()],P.prototype,"anisotropicFilteringLevel",void 0),(0,O.c)([(0,U.I)()],P.prototype,"isCube",null),(0,O.c)([(0,U.I)()],P.prototype,"is3D",null),(0,O.c)([(0,U.I)()],P.prototype,"is2DArray",null),(0,O.c)([(0,U.I)()],P.prototype,"gammaSpace",null),(0,O.c)([(0,U.I)()],P.prototype,"invertZ",void 0),(0,O.c)([(0,U.I)()],P.prototype,"lodLevelInAlpha",void 0),(0,O.c)([(0,U.I)()],P.prototype,"lodGenerationOffset",null),(0,O.c)([(0,U.I)()],P.prototype,"lodGenerationScale",null),(0,O.c)([(0,U.I)()],P.prototype,"linearSpecularLOD",null),(0,O.c)([(0,U.E)()],P.prototype,"irradianceTexture",null),(0,O.c)([(0,U.I)()],P.prototype,"isRenderTarget",void 0)},12321:(H,u,J)=>{J.d(u,{b:()=>C});var O=J(12324),U=J(12329),h=J(12175),w=J(12338),g=J(12358),B=J(12304),b=J(12199),d=J(12240),G=J(12297),P=J(12388),mH=J(12221);function l(H,u){let J=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const O=u.width,U=u.height;if(H instanceof Float32Array){let u=H.byteLength/H.BYTES_PER_ELEMENT;const J=new Uint8Array(u);for(;--u>=0;){let O=H[u];O<0?O=0:O>1&&(O=1),J[u]=255*O}H=J}const h=document.createElement("canvas");h.width=O,h.height=U;const w=h.getContext("2d");if(!w)return null;const g=w.createImageData(O,U);if(g.data.set(H),w.putImageData(g,0,0),J){const H=document.createElement("canvas");H.width=O,H.height=U;const u=H.getContext("2d");return u?(u.translate(0,U),u.scale(1,-1),u.drawImage(h,0,0),H.toDataURL("image/png")):null}return h.toDataURL("image/png")}function r(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const O=H.getInternalTexture();if(!O)return null;const U=H._readPixelsSync(u,J);return U?l(U,H.getSize(),O.invertY):null}async function p(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const O=H.getInternalTexture();if(!O)return null;const U=await H.readPixels(u,J);return U?l(U,H.getSize(),O.invertY):null}var a=J(12396),k=J(12365);class C extends g.b{static _CreateVideoTexture(H,u,J){arguments.length>5&&void 0!==arguments[5]||C.TRILINEAR_SAMPLINGMODE;throw(0,b.d)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(H){this._isBlocking=H}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(H,u,J,O){let U,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.TRILINEAR_SAMPLINGMODE,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,G=arguments.length>8&&void 0!==arguments[8]&&arguments[8],P=arguments.length>9?arguments[9]:void 0,mH=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0,r=arguments.length>12?arguments[12]:void 0,p=arguments.length>13?arguments[13]:void 0;super(u),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new h.b,this._isBlocking=!0,this.name=H||"",this.url=H;let k=!1,j=null,M=!0;"object"===typeof J&&null!==J?(U=J.noMipmap??!1,O=J.invertY??!a.e,w=J.samplingMode??C.TRILINEAR_SAMPLINGMODE,g=J.K??null,B=J.onError??null,b=J.buffer??null,G=J.deleteBuffer??!1,P=J.format,mH=J.mimeType,l=J.loaderOptions,r=J.creationFlags,k=J.useSRGBBuffer??!1,j=J.internalTexture??null,M=J.gammaSpace??M,p=J.forcedExtension??p):U=!!J,this._gammaSpace=M,this._noMipmap=U,this._invertY=void 0===O?!a.e:O,this._initialSamplingMode=w,this._buffer=b,this._deleteBuffer=G,this._mimeType=mH,this._loaderOptions=l,this._creationFlags=r,this._useSRGBBuffer=k,this._forcedExtension=p,void 0!==P&&(this._format=P);const L=this.ZH(),Z=this._getEngine();if(!Z)return;Z.onBeforeTextureInitObservable.notifyObservers(this);const Y=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),g&&g(),!this.isBlocking&&L&&L.resetCachedMaterial()},F=(H,u)=>{this._loadingError=!0,this._errorObject={message:H,exception:u},B&&B(H,u),C.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!j)return this._delayedOnLoad=Y,void(this._delayedOnError=F);if(this._texture=j??this._getFromCache(this.url,U,w,this._invertY,k,this.isCube),this._texture)if(this._texture.isReady)d.b.SetImmediate((()=>Y()));else{const H=this._texture.onLoadedObservable.add(Y);this._texture.onErrorObservable.add((u=>{var J;F(u.message,u.exception),null===(J=this._texture)||void 0===J||J.onLoadedObservable.remove(H)}))}else if(L&&L.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=Y,this._delayedOnError=F;else{try{this._texture=Z.createTexture(this.url,U,this._invertY,L,w,Y,F,this._buffer,void 0,this._format,this._forcedExtension,mH,l,r,k)}catch(s){throw F("error loading",s),s}G&&(this._buffer=null)}}updateURL(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,J=arguments.length>2?arguments[2]:void 0,O=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.ZH().markAllMaterialsAsDirty(1,(H=>H.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=H),this.url=H,this._buffer=u,this._forcedExtension=O,this.delayLoadState=4,J&&(this._delayedOnLoad=J),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const H=this.ZH();H&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?d.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=H.getEngine().createTexture(this.url,this._noMipmap,this._invertY,H,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(H,u,J,O){H*=this._cachedUScale,u*=this._cachedVScale,H-=this.uRotationCenter*this._cachedUScale,u-=this.vRotationCenter*this._cachedVScale,J-=this.wRotationCenter,w.lu.TransformCoordinatesFromFloatsToRef(H,u,J,this._rowGenerationMatrix,O),O.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,O.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,O.z+=this.wRotationCenter}getTextureMatrix(){let H=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*H===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*H,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=w.Matrix.Zero(),this._rowGenerationMatrix=new w.Matrix,this._t0=w.lu.Zero(),this._t1=w.lu.Zero(),this._t2=w.lu.Zero()),w.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(w.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,w.TmpVectors.Matrix[0]),w.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,w.TmpVectors.Matrix[1]),w.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,w.TmpVectors.Matrix[2]),w.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,w.TmpVectors.Matrix[3]),w.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(w.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(w.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(w.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.jP(this._t0),this._t2.jP(this._t0),w.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const u=this.ZH();if(!u)return this._cachedTextureMatrix;const J=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&J!==this._cachedIdentity3x2&&u.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const H=this.ZH();if(!H)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==C.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===H.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=w.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=w.Matrix.Zero());const u=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case C.PLANAR_MODE:w.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case C.PROJECTION_MODE:{w.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const u=H.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=u.updateFlag,u.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:w.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return u&&H.markAllMaterialsAsDirty(1,(H=>H.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const H={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,K:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return k.d.Clone((()=>new C(this._texture?this._texture.url:null,this.ZH(),H)),this)}serialize(){var H;const u=this.name;C.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const J=super.serialize(C._SerializeInternalTextureUniqueId);if(!J)return null;if(C.SerializeBuffers||C.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))J.base64String=this._buffer,J.name=J.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const H=this.mimeType||"image/png";J.base64String=`data:${H};base64,${(0,mH.l)(this._buffer)}`}else(C.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(J.base64String=!this._engine||this._engine._features.supportSyncTextureRead?r(this):p(this));var O;(J.invertY=this._invertY,J.samplingMode=this.samplingMode,J._creationFlags=this._creationFlags,J._useSRGBBuffer=this._useSRGBBuffer,C._SerializeInternalTextureUniqueId)&&(J.internalTextureUniqueId=null===(O=this._texture)||void 0===O?void 0:O.uniqueId);return J.internalTextureLabel=null===(H=this._texture)||void 0===H?void 0:H.label,J.noMipmap=this._noMipmap,this.name=u,J}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(H,u,J){if(H.customType){const O=G.e.Instantiate(H.customType).Parse(H,u,J);return H.samplingMode&&O.updateSamplingMode&&O._samplingMode&&O._samplingMode!==H.samplingMode&&O.updateSamplingMode(H.samplingMode),O}if(H.isCube&&!H.isRenderTarget)return C._CubeTextureParser(H,u,J);const O=void 0!==H.internalTextureUniqueId;if(!H.name&&!H.isRenderTarget&&!O)return null;let U;if(O){const J=u.getEngine().getLoadedTexturesCache();for(const u of J)if(u.uniqueId===H.internalTextureUniqueId){U=u;break}}const h=u=>{if(u&&u._texture&&(u._texture._cachedWrapU=null,u._texture._cachedWrapV=null,u._texture._cachedWrapR=null),H.samplingMode){const J=H.samplingMode;u&&u.samplingMode!==J&&u.updateSamplingMode(J)}if(u&&H.animations)for(let J=0;J<H.animations.length;J++){const O=H.animations[J],U=(0,B.b)("BABYLON.Animation");U&&u.animations.push(U.Parse(O))}u&&u._texture&&(O&&!U&&u._texture._setUniqueId(H.internalTextureUniqueId),u._texture.label=H.internalTextureLabel)};return k.d.Parse((()=>{let O=!0;if(H.noMipmap&&(O=!1),H.mirrorPlane){const J=C._CreateMirror(H.name,H.renderTargetSize,u,O);return J._waitingRenderList=H.renderList,J.mirrorPlane=P.d.Cu(H.mirrorPlane),h(J),J}if(H.isRenderTarget){let J=null;if(H.isCube){if(u.reflectionProbes)for(let O=0;O<u.reflectionProbes.length;O++){const J=u.reflectionProbes[O];if(J.name===H.name)return J.cubeTexture}}else J=C._CreateRenderTargetTexture(H.name,H.renderTargetSize,u,O,H._creationFlags??0),J._waitingRenderList=H.renderList;return h(J),J}if(H.isVideo){const U=C._CreateVideoTexture(J+(H.url||H.name),J+(H.src||H.url),u,O,H.invertY,H.samplingMode,H.settings||{});return h(U),U}{let w;if(H.base64String&&!U)w=C.CreateFromBase64String(H.base64String,H.base64String,u,!O,H.invertY,H.samplingMode,(()=>{h(w)}),H._creationFlags??0,H._useSRGBBuffer??!1),w.name=H.name;else{let g;g=H.name&&(H.name.indexOf("://")>0||H.name.startsWith("data:"))?H.name:J+H.name,H.url&&(H.url.startsWith("data:")||C.UseSerializedUrlIfAny)&&(g=H.url);const B={noMipmap:!O,invertY:H.invertY,samplingMode:H.samplingMode,K:()=>{h(w)},internalTexture:U};w=new C(g,u,B)}return w}}),H,u)}static CreateFromBase64String(H,u,J,O,U){let h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C.TRILINEAR_SAMPLINGMODE;return new C("data:"+u,J,O,U,h,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,H,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(H,u,J){let O=arguments.length>3&&void 0!==arguments[3]&&arguments[3],U=arguments.length>4?arguments[4]:void 0,h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:C.TRILINEAR_SAMPLINGMODE,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,B=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,d=arguments.length>10?arguments[10]:void 0,G=arguments.length>11?arguments[11]:void 0;return"data:"!==H.substring(0,5)&&(H="data:"+H),new C(H,J,U,h,w,g,B,u,O,b,void 0,void 0,d,G)}}C.SerializeBuffers=!0,C.ForceSerializeBuffers=!1,C.OnTextureLoadErrorObservable=new h.b,C._SerializeInternalTextureUniqueId=!1,C._CubeTextureParser=(H,u,J)=>{throw(0,b.d)("CubeTexture")},C._CreateMirror=(H,u,J,O)=>{throw(0,b.d)("MirrorTexture")},C._CreateRenderTargetTexture=(H,u,J,O,U)=>{throw(0,b.d)("RenderTargetTexture")},C.NEAREST_SAMPLINGMODE=1,C.NEAREST_NEAREST_MIPLINEAR=8,C.BILINEAR_SAMPLINGMODE=2,C.LINEAR_LINEAR_MIPNEAREST=11,C.TRILINEAR_SAMPLINGMODE=3,C.LINEAR_LINEAR_MIPLINEAR=3,C.NEAREST_NEAREST_MIPNEAREST=4,C.NEAREST_LINEAR_MIPNEAREST=5,C.NEAREST_LINEAR_MIPLINEAR=6,C.NEAREST_LINEAR=7,C.NEAREST_NEAREST=1,C.LINEAR_NEAREST_MIPNEAREST=9,C.LINEAR_NEAREST_MIPLINEAR=10,C.LINEAR_LINEAR=2,C.LINEAR_NEAREST=12,C.EXPLICIT_MODE=0,C.SPHERICAL_MODE=1,C.PLANAR_MODE=2,C.CUBIC_MODE=3,C.PROJECTION_MODE=4,C.SKYBOX_MODE=5,C.INVCUBIC_MODE=6,C.EQUIRECTANGULAR_MODE=7,C.FIXED_EQUIRECTANGULAR_MODE=8,C.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,C.CLAMP_ADDRESSMODE=0,C.WRAP_ADDRESSMODE=1,C.MIRROR_ADDRESSMODE=2,C.UseSerializedUrlIfAny=!1,(0,O.c)([(0,U.I)()],C.prototype,"url",void 0),(0,O.c)([(0,U.I)()],C.prototype,"uOffset",void 0),(0,O.c)([(0,U.I)()],C.prototype,"vOffset",void 0),(0,O.c)([(0,U.I)()],C.prototype,"uScale",void 0),(0,O.c)([(0,U.I)()],C.prototype,"vScale",void 0),(0,O.c)([(0,U.I)()],C.prototype,"uAng",void 0),(0,O.c)([(0,U.I)()],C.prototype,"vAng",void 0),(0,O.c)([(0,U.I)()],C.prototype,"wAng",void 0),(0,O.c)([(0,U.I)()],C.prototype,"uRotationCenter",void 0),(0,O.c)([(0,U.I)()],C.prototype,"vRotationCenter",void 0),(0,O.c)([(0,U.I)()],C.prototype,"wRotationCenter",void 0),(0,O.c)([(0,U.I)()],C.prototype,"homogeneousRotationInUVTransform",void 0),(0,O.c)([(0,U.I)()],C.prototype,"isBlocking",null),(0,B.f)("BABYLON.Texture",C),k.d._TextureParser=C.Parse},12388:(H,u,J)=>{J.d(u,{d:()=>U});var O=J(12338);class U{constructor(H,u,J,U){this.normal=new O.lu(H,u,J),this.d=U}Hg(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new U(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let H=this.normal.getHashCode();return H=397*H^this.d,H}normalize(){const H=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let u=0;return 0!==H&&(u=1/H),this.normal.x*=u,this.normal.y*=u,this.normal.z*=u,this.d*=u,this}transform(H){const u=U._TmpMatrix;H.invertToRef(u);const J=u.m,O=this.normal.x,h=this.normal.y,w=this.normal.z,g=this.d,B=O*J[0]+h*J[1]+w*J[2]+g*J[3],b=O*J[4]+h*J[5]+w*J[6]+g*J[7],d=O*J[8]+h*J[9]+w*J[10]+g*J[11],G=O*J[12]+h*J[13]+w*J[14]+g*J[15];return new U(B,b,d,G)}dotCoordinate(H){return this.normal.x*H.x+this.normal.y*H.y+this.normal.z*H.z+this.d}copyFromPoints(H,u,J){const O=u.x-H.x,U=u.y-H.y,h=u.z-H.z,w=J.x-H.x,g=J.y-H.y,B=J.z-H.z,b=U*B-h*g,d=h*w-O*B,G=O*g-U*w,P=Math.sqrt(b*b+d*d+G*G);let mH;return mH=0!==P?1/P:0,this.normal.x=b*mH,this.normal.y=d*mH,this.normal.z=G*mH,this.d=-(this.normal.x*H.x+this.normal.y*H.y+this.normal.z*H.z),this}isFrontFacingTo(H,u){return O.lu.Dot(this.normal,H)<=u}signedDistanceTo(H){return O.lu.Dot(H,this.normal)+this.d}static Cu(H){return new U(H[0],H[1],H[2],H[3])}static FromPoints(H,u,J){const O=new U(0,0,0,0);return O.copyFromPoints(H,u,J),O}static FromPositionAndNormal(H,u){const J=new U(0,0,0,0);return this.FromPositionAndNormalToRef(H,u,J)}static FromPositionAndNormalToRef(H,u,J){return J.normal.O(u),J.normal.normalize(),J.d=-H.dot(J.normal),J}static SignedDistanceToPlaneFromPositionAndNormal(H,u,J){const U=-(u.x*H.x+u.y*H.y+u.z*H.z);return O.lu.Dot(J,u)+U}}U._TmpMatrix=O.Matrix.Identity()},12360:(H,u,J)=>{J.d(u,{e:()=>O});class O{constructor(H,u){this.width=H,this.height=u}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let H=0|this.width;return H=397*H^this.height,H}O(H){this.width=H.width,this.height=H.height}kg(H,u){return this.width=H,this.height=u,this}set(H,u){return this.kg(H,u)}multiplyByFloats(H,u){return new O(this.width*H,this.height*u)}clone(){return new O(this.width,this.height)}equals(H){return!!H&&(this.width===H.width&&this.height===H.height)}get surface(){return this.width*this.height}static Zero(){return new O(0,0)}add(H){return new O(this.width+H.width,this.height+H.height)}ru(H){return new O(this.width-H.width,this.height-H.height)}scale(H){return new O(this.width*H,this.height*H)}static Lerp(H,u,J){const U=H.width+(u.width-H.width)*J,h=H.height+(u.height-H.height)*J;return new O(U,h)}}},12333:(H,u,J)=>{J.d(u,{b:()=>h,d:()=>w});const O={},U={};function h(H){const u=H.getClassName();return U[u]||(U[u]={}),U[u]}function w(H){const u=H.getClassName();if(O[u])return O[u];O[u]={};const J=O[u];let h=H,w=u;for(;w;){const H=U[w];for(const U in H)J[U]=H[U];let u,O=!1;do{if(u=Object.getPrototypeOf(h),!u.getClassName){O=!0;break}if(u.getClassName()!==w)break;h=u}while(u);if(O)break;w=u.getClassName(),h=u}return J}},12329:(H,u,J)=>{J.d(u,{A:()=>p,E:()=>g,F:()=>d,G:()=>G,I:()=>w,e:()=>h,f:()=>k,j:()=>mH,l:()=>B,o:()=>l,s:()=>b,u:()=>r,v:()=>a,x:()=>P});var O=J(12333);function U(H,u){return(J,U)=>{const h=(0,O.b)(J);h[U]||(h[U]={type:H,sourceName:u})}}function h(H){return function(H){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(J,O)=>{const U=u||"_"+O;Object.defineProperty(J,O,{get:function(){return this[U]},set:function(u){var O;"function"===typeof(null===(O=this[U])||void 0===O?void 0:O.equals)&&this[U].equals(u)||this[U]!==u&&(this[U]=u,J[H].apply(this))},enumerable:!0,configurable:!0})}}(H,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function w(H){return U(0,H)}function g(H){return U(1,H)}function B(H){return U(2,H)}function b(H){return U(3,H)}function d(H){return U(4,H)}function G(H){return U(5,H)}function P(H){return U(6,H)}function mH(H){return U(7,H)}function l(H){return U(8,H)}function r(H){return U(9,H)}function p(H){return U(10,H)}function a(H){return U(12,H)}function k(H,u,J,O){const U=J.value;J.value=function(){let J=U;if("undefined"!==typeof _native&&_native[u]){const H=_native[u];J=O?function(){return O(...arguments)?H(...arguments):U(...arguments)}:H}return H[u]=J,J(...arguments)}}k.filter=function(H){return(u,J,O)=>k(u,J,O,H)}},12365:(H,u,J)=>{J.d(u,{d:()=>b});var O=J(12199),U=J(12374),h=J(12379),w=J(12338),g=J(12333);const B=function(H,u,J){let O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const h=H();U.d&&U.d.HasTags(u)&&U.d.AddTagsTo(h,U.d.GetTags(u,!0));const w=(0,g.d)(h),B={};for(const U in w){const H=w[U],g=u[U],d=H.type;if(void 0!==g&&null!==g&&("uniqueId"!==U||b.AllowLoadingUniqueId))switch(d){case 0:case 6:case 9:case 11:h[U]=g;break;case 1:O.cloneTexturesOnlyOnce&&B[g.uniqueId]?h[U]=B[g.uniqueId]:(h[U]=J||g.isRenderTarget?g:g.clone(),B[g.uniqueId]=h[U]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:h[U]=J?g:g.clone()}}return h};class b{static AppendSerializedAnimations(H,u){if(H.animations){u.animations=[];for(let J=0;J<H.animations.length;J++){const O=H.animations[J];u.animations.push(O.serialize())}}}static Serialize(H,u){u||(u={}),U.d&&(u.tags=U.d.GetTags(H));const J=(0,g.d)(H);for(const O in J){const U=J[O],h=U.sourceName||O,w=U.type,g=H[O];if(void 0!==g&&null!==g&&("uniqueId"!==O||b.AllowLoadingUniqueId))switch(w){case 0:u[h]=g;break;case 1:case 3:case 7:case 9:u[h]=g.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:u[h]=g.Hg();break;case 6:case 11:u[h]=g.id}}return u}static ParseProperties(H,u,J,O){O||(O="");const U=(0,g.d)(u);for(const g in U){const B=U[g],d=H[B.sourceName||g],G=B.type;if(void 0!==d&&null!==d&&("uniqueId"!==g||b.AllowLoadingUniqueId)){const H=u;switch(G){case 0:H[g]=d;break;case 1:J&&(H[g]=b._TextureParser(d,J,O));break;case 2:H[g]=h.ku.Cu(d);break;case 3:H[g]=b._FresnelParametersParser(d);break;case 4:H[g]=w.Vector2.Cu(d);break;case 5:H[g]=w.lu.Cu(d);break;case 6:J&&(H[g]=J.getLastMeshById(d));break;case 7:H[g]=b._ColorCurvesParser(d);break;case 8:H[g]=h.Mg.Cu(d);break;case 9:H[g]=b._ImageProcessingConfigurationParser(d);break;case 10:H[g]=w.Quaternion.Cu(d);break;case 11:J&&(H[g]=J.getCameraById(d));break;case 12:H[g]=w.Matrix.Cu(d)}}}}static Parse(H,u,J){let O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const h=H();return U.d&&U.d.AddTagsTo(h,u.tags),b.ParseProperties(u,h,J,O),h}static Clone(H,u){return B(H,u,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(H,u){return B(H,u,!0)}}b.AllowLoadingUniqueId=!1,b._ImageProcessingConfigurationParser=H=>{throw(0,O.d)("ImageProcessingConfiguration")},b._FresnelParametersParser=H=>{throw(0,O.d)("FresnelParameters")},b._ColorCurvesParser=H=>{throw(0,O.d)("ColorCurves")},b._TextureParser=(H,u,J)=>{throw(0,O.d)("Texture")}},12374:(H,u,J)=>{J.d(u,{d:()=>U});class O{static Eval(H,u){return"true"===(H=H.match(/\([^()]*\)/g)?H.replace(/\([^()]*\)/g,(H=>(H=H.slice(1,H.length-1),O._HandleParenthesisContent(H,u)))):O._HandleParenthesisContent(H,u))||"false"!==H&&O.Eval(H,u)}static _HandleParenthesisContent(H,u){let J;u=u||(H=>"true"===H);const U=H.split("||");for(const h in U)if(Object.prototype.hasOwnProperty.call(U,h)){let H=O._SimplifyNegation(U[h].trim());const w=H.split("&&");if(w.length>1)for(let U=0;U<w.length;++U){const h=O._SimplifyNegation(w[U].trim());if(J="true"!==h&&"false"!==h?"!"===h[0]?!u(h.substring(1)):u(h):"true"===h,!J){H="false";break}}if(J||"true"===H){J=!0;break}J="true"!==H&&"false"!==H?"!"===H[0]?!u(H.substring(1)):u(H):"true"===H}return J?"true":"false"}static _SimplifyNegation(H){return"!true"===(H=(H=H.replace(/^[\s!]+/,(H=>(H=H.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?H="false":"!false"===H&&(H="true"),H}}class U{static EnableFor(H){H._tags=H._tags||{},H.hasTags=()=>U.HasTags(H),H.addTags=u=>U.AddTagsTo(H,u),H.removeTags=u=>U.RemoveTagsFrom(H,u),H.matchesTagsQuery=u=>U.MatchesQuery(H,u)}static DisableFor(H){delete H._tags,delete H.hasTags,delete H.addTags,delete H.removeTags,delete H.matchesTagsQuery}static HasTags(H){if(!H._tags)return!1;const u=H._tags;for(const J in u)if(Object.prototype.hasOwnProperty.call(u,J))return!0;return!1}static GetTags(H){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!H._tags)return null;if(u){const u=[];for(const J in H._tags)Object.prototype.hasOwnProperty.call(H._tags,J)&&!0===H._tags[J]&&u.push(J);return u.join(" ")}return H._tags}static AddTagsTo(H,u){if(!u)return;if("string"!==typeof u)return;const J=u.split(" ");for(const O of J)U._AddTagTo(H,O)}static _AddTagTo(H,u){""!==(u=u.trim())&&"true"!==u&&"false"!==u&&(u.match(/[\s]/)||u.match(/^([!]|([|]|[&]){2})/)||(U.EnableFor(H),H._tags[u]=!0))}static RemoveTagsFrom(H,u){if(!U.HasTags(H))return;const J=u.split(" ");for(const O in J)U._RemoveTagFrom(H,J[O])}static _RemoveTagFrom(H,u){delete H._tags[u]}static MatchesQuery(H,u){return void 0===u||(""===u?U.HasTags(H):O.Eval(u,(u=>U.HasTags(H)&&H._tags[u])))}}},12324:(H,u,J)=>{J.d(u,{c:()=>O});function O(H,u,J,O){var U,h=arguments.length,w=h<3?u:null===O?O=Object.getOwnPropertyDescriptor(u,J):O;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)w=Reflect.decorate(H,u,J,O);else for(var g=H.length-1;g>=0;g--)(U=H[g])&&(w=(h<3?U(w):h>3?U(u,J,w):U(u,J))||w);return h>3&&w&&Object.defineProperty(u,J,w),w}Object.create;Object.create}}]);