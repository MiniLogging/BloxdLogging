"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[13],{12866:(a,c,o)=>{o.d(c,{d:()=>s});let s=!1},12833:(a,c,o)=>{o.d(c,{e:()=>L});var s=o(12798),q=o(12800),t=o(12639),i=o(12810),p=o(12680),G=o(12779),T=(o(12689),o(12841));class C{get wrapU(){return this._wrapU}set wrapU(a){this._wrapU=a}get wrapV(){return this._wrapV}set wrapV(a){this._wrapV=a}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(a){this._texture&&(this._texture.isCube=a)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(a){this._texture&&(this._texture.is3D=a)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(a){this._texture&&(this._texture.is2DArray=a)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(a){return void 0!==(null===a||void 0===a?void 0:a.shareDepth)}constructor(a){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=T.b.Zero(),this._cachedBaseSize=T.b.Zero(),this._initialSamplingMode=2,this._texture=C._IsRenderTargetWrapper(a)?a.texture:a,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(a){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(a,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var j=o(12845);class L extends C{set Uc(a){this._hasAlpha!==a&&(this._hasAlpha=a,this._scene&&this._scene.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))))}get Uc(){return this._hasAlpha}set getAlphaFromRGB(a){this._getAlphaFromRGB!==a&&(this._getAlphaFromRGB=a,this._scene&&this._scene.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(a){this._coordinatesIndex!==a&&(this._coordinatesIndex=a,this._scene&&this._scene.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(a){this._coordinatesMode!==a&&(this._coordinatesMode=a,this._scene&&this._scene.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(a){this._wrapU=a}get wrapV(){return this._wrapV}set wrapV(a){this._wrapV=a}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(a){this._texture?this._texture.isCube=a:this._isCube=a}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(a){this._texture&&(this._texture.is3D=a)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(a){this._texture&&(this._texture.is2DArray=a)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(a){var c;if(this._texture){if(this._texture._gammaSpace===a)return;this._texture._gammaSpace=a}else{if(this._gammaSpace===a)return;this._gammaSpace=a}null===(c=this.Za())||void 0===c||c.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(a){var c;a!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=a),null===(c=this.Za())||void 0===c||c.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(a){this._texture&&(this._texture._lodGenerationOffset=a)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(a){this._texture&&(this._texture._lodGenerationScale=a)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(a){this._texture&&(this._texture._linearSpecularLOD=a)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(a){this._texture&&(this._texture._irradianceTexture=a)}get uid(){return this._uid||(this._uid=(0,G.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(a){this._onDisposeObserver&&this.gc.remove(this._onDisposeObserver),this._onDisposeObserver=this.gc.add(a)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=L.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.gc=new t.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,a?L._IsScene(a)?this._scene=a:this._engine=a:this._scene=p.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=c,this._uid=null}Za(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return i.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return i.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(a){}get canRescale(){return!1}_getFromCache(a,c,o,s,q,t){const i=this._getEngine();if(!i)return null;const p=i._getUseSRGBBuffer(!!q,c),G=i.getLoadedTexturesCache();for(let T=0;T<G.length;T++){const i=G[T];if((void 0===q||p===i._useSRGBBuffer)&&(void 0===s||s===i.invertY)&&i.url===a&&i.generateMipMaps===!c&&(!o||o===i.samplingMode)&&(void 0===t||t===i.isCube))return i.incrementReferences(),i}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const a=this.Za();a&&a.markAllMaterialsAsDirty(1)}readPixels(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],q=arguments.length>4&&void 0!==arguments[4]&&arguments[4],t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,G=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const T=this._getEngine();if(!T)return null;const C=this.getSize();let j=C.width,L=C.height;0!==c&&(j/=Math.pow(2,c),L/=Math.pow(2,c),j=Math.round(j),L=Math.round(L)),p=Math.min(j,p),G=Math.min(L,G);try{return this._texture.isCube?T._readTexturePixels(this._texture,p,G,a,c,o,s,q,t,i):T._readTexturePixels(this._texture,p,G,-1,c,o,s,q,t,i)}catch(e){return null}}_readPixelsSync(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],q=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const t=this.getSize();let i=t.width,p=t.height;const G=this._getEngine();if(!G)return null;0!=c&&(i/=Math.pow(2,c),p/=Math.pow(2,c),i=Math.round(i),p=Math.round(p));try{return this._texture.isCube?G._readTexturePixelsSync(this._texture,i,p,a,c,o,s,q):G._readTexturePixelsSync(this._texture,i,p,-1,c,o,s,q)}catch(T){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const a=this._scene.textures.indexOf(this);if(a>=0&&this._scene.textures.splice(a,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const a=this._parentContainer.textures.indexOf(this);a>-1&&this._parentContainer.textures.splice(a,1),this._parentContainer=null}}this.gc.notifyObservers(this),this.gc.clear(),this.metadata=null,super.dispose()}serialize(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!a)return null;const c=j.d.Serialize(this);return j.d.AppendSerializedAnimations(this,c),c}static WhenAllReady(a,c){let o=a.length;if(0!==o)for(let s=0;s<a.length;s++){const q=a[s];if(q.isReady())0===--o&&c();else{const a=q.onLoadObservable;a?a.addOnce((()=>{0===--o&&c()})):0===--o&&c()}}else c()}static _IsScene(a){return"Scene"===a.getClassName()}}L.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,s.d)([(0,q.E)()],L.prototype,"uniqueId",void 0),(0,s.d)([(0,q.E)()],L.prototype,"name",void 0),(0,s.d)([(0,q.E)()],L.prototype,"displayName",void 0),(0,s.d)([(0,q.E)()],L.prototype,"metadata",void 0),(0,s.d)([(0,q.E)("Uc")],L.prototype,"_hasAlpha",void 0),(0,s.d)([(0,q.E)("getAlphaFromRGB")],L.prototype,"_getAlphaFromRGB",void 0),(0,s.d)([(0,q.E)()],L.prototype,"level",void 0),(0,s.d)([(0,q.E)("coordinatesIndex")],L.prototype,"_coordinatesIndex",void 0),(0,s.d)([(0,q.E)()],L.prototype,"optimizeUVAllocation",void 0),(0,s.d)([(0,q.E)("coordinatesMode")],L.prototype,"_coordinatesMode",void 0),(0,s.d)([(0,q.E)()],L.prototype,"wrapU",null),(0,s.d)([(0,q.E)()],L.prototype,"wrapV",null),(0,s.d)([(0,q.E)()],L.prototype,"wrapR",void 0),(0,s.d)([(0,q.E)()],L.prototype,"anisotropicFilteringLevel",void 0),(0,s.d)([(0,q.E)()],L.prototype,"isCube",null),(0,s.d)([(0,q.E)()],L.prototype,"is3D",null),(0,s.d)([(0,q.E)()],L.prototype,"is2DArray",null),(0,s.d)([(0,q.E)()],L.prototype,"gammaSpace",null),(0,s.d)([(0,q.E)()],L.prototype,"invertZ",void 0),(0,s.d)([(0,q.E)()],L.prototype,"lodLevelInAlpha",void 0),(0,s.d)([(0,q.E)()],L.prototype,"lodGenerationOffset",null),(0,s.d)([(0,q.E)()],L.prototype,"lodGenerationScale",null),(0,s.d)([(0,q.E)()],L.prototype,"linearSpecularLOD",null),(0,s.d)([(0,q.v)()],L.prototype,"irradianceTexture",null),(0,s.d)([(0,q.E)()],L.prototype,"isRenderTarget",void 0)},12796:(a,c,o)=>{o.d(c,{e:()=>n});var s=o(12798),q=o(12800),t=o(12639),i=o(12810),p=o(12833),G=o(12776),T=o(12667),C=o(12712),j=o(12770),L=o(12862),e=o(12695);function g(a,c){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=c.width,q=c.height;if(a instanceof Float32Array){let c=a.byteLength/a.BYTES_PER_ELEMENT;const o=new Uint8Array(c);for(;--c>=0;){let s=a[c];s<0?s=0:s>1&&(s=1),o[c]=255*s}a=o}const t=document.createElement("canvas");t.width=s,t.height=q;const i=t.getContext("2d");if(!i)return null;const p=i.createImageData(s,q);if(p.data.set(a),i.putImageData(p,0,0),o){const a=document.createElement("canvas");a.width=s,a.height=q;const c=a.getContext("2d");return c?(c.translate(0,q),c.scale(1,-1),c.drawImage(t,0,0),a.toDataURL("image/png")):null}return t.toDataURL("image/png")}function M(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a.getInternalTexture();if(!s)return null;const q=a._readPixelsSync(c,o);return q?g(q,a.getSize(),s.invertY):null}async function N(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=a.getInternalTexture();if(!s)return null;const q=await a.readPixels(c,o);return q?g(q,a.getSize(),s.invertY):null}var y=o(12866),k=o(12845);class n extends p.e{static _CreateVideoTexture(a,c,o){arguments.length>5&&void 0!==arguments[5]||n.TRILINEAR_SAMPLINGMODE;throw(0,T.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(a){this._isBlocking=a}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(a,c,o,s){let q,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.TRILINEAR_SAMPLINGMODE,p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,T=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,j=arguments.length>8&&void 0!==arguments[8]&&arguments[8],L=arguments.length>9?arguments[9]:void 0,e=arguments.length>10?arguments[10]:void 0,g=arguments.length>11?arguments[11]:void 0,M=arguments.length>12?arguments[12]:void 0,N=arguments.length>13?arguments[13]:void 0;super(c),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new t.d,this._isBlocking=!0,this.name=a||"",this.url=a;let k=!1,f=null,J=!0;"object"===typeof o&&null!==o?(q=o.noMipmap??!1,s=o.invertY??!y.d,i=o.samplingMode??n.TRILINEAR_SAMPLINGMODE,p=o.A??null,G=o.onError??null,T=o.buffer??null,j=o.deleteBuffer??!1,L=o.format,e=o.mimeType,g=o.loaderOptions,M=o.creationFlags,k=o.useSRGBBuffer??!1,f=o.internalTexture??null,J=o.gammaSpace??J,N=o.forcedExtension??N):q=!!o,this._gammaSpace=J,this._noMipmap=q,this._invertY=void 0===s?!y.d:s,this._initialSamplingMode=i,this._buffer=T,this._deleteBuffer=j,this._mimeType=e,this._loaderOptions=g,this._creationFlags=M,this._useSRGBBuffer=k,this._forcedExtension=N,void 0!==L&&(this._format=L);const w=this.Za(),Z=this._getEngine();if(!Z)return;Z.onBeforeTextureInitObservable.notifyObservers(this);const h=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),p&&p(),!this.isBlocking&&w&&w.resetCachedMaterial()},U=(a,c)=>{this._loadingError=!0,this._errorObject={message:a,exception:c},G&&G(a,c),n.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!f)return this._delayedOnLoad=h,void(this._delayedOnError=U);if(this._texture=f??this._getFromCache(this.url,q,i,this._invertY,k,this.isCube),this._texture)if(this._texture.isReady)C.d.SetImmediate((()=>h()));else{const a=this._texture.onLoadedObservable.add(h);this._texture.onErrorObservable.add((c=>{var o;U(c.message,c.exception),null===(o=this._texture)||void 0===o||o.onLoadedObservable.remove(a)}))}else if(w&&w.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=h,this._delayedOnError=U;else{try{this._texture=Z.createTexture(this.url,q,this._invertY,w,i,h,U,this._buffer,void 0,this._format,this._forcedExtension,e,g,M,k)}catch(S){throw U("error loading",S),S}j&&(this._buffer=null)}}updateURL(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Za().markAllMaterialsAsDirty(1,(a=>a.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=a),this.url=a,this._buffer=c,this._forcedExtension=s,this.delayLoadState=4,o&&(this._delayedOnLoad=o),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const a=this.Za();a&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?C.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=a.getEngine().createTexture(this.url,this._noMipmap,this._invertY,a,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(a,c,o,s){a*=this._cachedUScale,c*=this._cachedVScale,a-=this.uRotationCenter*this._cachedUScale,c-=this.vRotationCenter*this._cachedVScale,o-=this.wRotationCenter,i.Hc.TransformCoordinatesFromFloatsToRef(a,c,o,this._rowGenerationMatrix,s),s.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,s.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,s.z+=this.wRotationCenter}getTextureMatrix(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*a===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*a,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=i.Matrix.Zero(),this._rowGenerationMatrix=new i.Matrix,this._t0=i.Hc.Zero(),this._t1=i.Hc.Zero(),this._t2=i.Hc.Zero()),i.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(i.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,i.TmpVectors.Matrix[0]),i.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,i.TmpVectors.Matrix[1]),i.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,i.TmpVectors.Matrix[2]),i.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,i.TmpVectors.Matrix[3]),i.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.Vj(this._t0),this._t2.Vj(this._t0),i.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const c=this.Za();if(!c)return this._cachedTextureMatrix;const o=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&o!==this._cachedIdentity3x2&&c.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const a=this.Za();if(!a)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==n.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===a.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=i.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=i.Matrix.Zero());const c=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case n.PLANAR_MODE:i.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case n.PROJECTION_MODE:{i.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const c=a.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=c.updateFlag,c.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:i.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return c&&a.markAllMaterialsAsDirty(1,(a=>a.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const a={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,A:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return k.d.Clone((()=>new n(this._texture?this._texture.url:null,this.Za(),a)),this)}serialize(){var a;const c=this.name;n.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const o=super.serialize(n._SerializeInternalTextureUniqueId);if(!o)return null;if(n.SerializeBuffers||n.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))o.base64String=this._buffer,o.name=o.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const a=this.mimeType||"image/png";o.base64String=`data:${a};base64,${(0,e.k)(this._buffer)}`}else(n.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(o.base64String=!this._engine||this._engine._features.supportSyncTextureRead?M(this):N(this));var s;(o.invertY=this._invertY,o.samplingMode=this.samplingMode,o._creationFlags=this._creationFlags,o._useSRGBBuffer=this._useSRGBBuffer,n._SerializeInternalTextureUniqueId)&&(o.internalTextureUniqueId=null===(s=this._texture)||void 0===s?void 0:s.uniqueId);return o.internalTextureLabel=null===(a=this._texture)||void 0===a?void 0:a.label,o.noMipmap=this._noMipmap,this.name=c,o}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(a,c,o){if(a.customType){const s=j.b.Instantiate(a.customType).Parse(a,c,o);return a.samplingMode&&s.updateSamplingMode&&s._samplingMode&&s._samplingMode!==a.samplingMode&&s.updateSamplingMode(a.samplingMode),s}if(a.isCube&&!a.isRenderTarget)return n._CubeTextureParser(a,c,o);const s=void 0!==a.internalTextureUniqueId;if(!a.name&&!a.isRenderTarget&&!s)return null;let q;if(s){const o=c.getEngine().getLoadedTexturesCache();for(const c of o)if(c.uniqueId===a.internalTextureUniqueId){q=c;break}}const t=c=>{if(c&&c._texture&&(c._texture._cachedWrapU=null,c._texture._cachedWrapV=null,c._texture._cachedWrapR=null),a.samplingMode){const o=a.samplingMode;c&&c.samplingMode!==o&&c.updateSamplingMode(o)}if(c&&a.animations)for(let o=0;o<a.animations.length;o++){const s=a.animations[o],q=(0,G.c)("BABYLON.Animation");q&&c.animations.push(q.Parse(s))}c&&c._texture&&(s&&!q&&c._texture._setUniqueId(a.internalTextureUniqueId),c._texture.label=a.internalTextureLabel)};return k.d.Parse((()=>{let s=!0;if(a.noMipmap&&(s=!1),a.mirrorPlane){const o=n._CreateMirror(a.name,a.renderTargetSize,c,s);return o._waitingRenderList=a.renderList,o.mirrorPlane=L.e.qo(a.mirrorPlane),t(o),o}if(a.isRenderTarget){let o=null;if(a.isCube){if(c.reflectionProbes)for(let s=0;s<c.reflectionProbes.length;s++){const o=c.reflectionProbes[s];if(o.name===a.name)return o.cubeTexture}}else o=n._CreateRenderTargetTexture(a.name,a.renderTargetSize,c,s,a._creationFlags??0),o._waitingRenderList=a.renderList;return t(o),o}if(a.isVideo){const q=n._CreateVideoTexture(o+(a.url||a.name),o+(a.src||a.url),c,s,a.invertY,a.samplingMode,a.settings||{});return t(q),q}{let i;if(a.base64String&&!q)i=n.CreateFromBase64String(a.base64String,a.base64String,c,!s,a.invertY,a.samplingMode,(()=>{t(i)}),a._creationFlags??0,a._useSRGBBuffer??!1),i.name=a.name;else{let p;p=a.name&&(a.name.indexOf("://")>0||a.name.startsWith("data:"))?a.name:o+a.name,a.url&&(a.url.startsWith("data:")||n.UseSerializedUrlIfAny)&&(p=a.url);const G={noMipmap:!s,invertY:a.invertY,samplingMode:a.samplingMode,A:()=>{t(i)},internalTexture:q};i=new n(p,c,G)}return i}}),a,c)}static CreateFromBase64String(a,c,o,s,q){let t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.TRILINEAR_SAMPLINGMODE;return new n("data:"+c,o,s,q,t,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,a,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(a,c,o){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],q=arguments.length>4?arguments[4]:void 0,t=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.TRILINEAR_SAMPLINGMODE,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,G=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,C=arguments.length>10?arguments[10]:void 0,j=arguments.length>11?arguments[11]:void 0;return"data:"!==a.substring(0,5)&&(a="data:"+a),new n(a,o,q,t,i,p,G,c,s,T,void 0,void 0,C,j)}}n.SerializeBuffers=!0,n.ForceSerializeBuffers=!1,n.OnTextureLoadErrorObservable=new t.d,n._SerializeInternalTextureUniqueId=!1,n._CubeTextureParser=(a,c,o)=>{throw(0,T.b)("CubeTexture")},n._CreateMirror=(a,c,o,s)=>{throw(0,T.b)("MirrorTexture")},n._CreateRenderTargetTexture=(a,c,o,s,q)=>{throw(0,T.b)("RenderTargetTexture")},n.NEAREST_SAMPLINGMODE=1,n.NEAREST_NEAREST_MIPLINEAR=8,n.BILINEAR_SAMPLINGMODE=2,n.LINEAR_LINEAR_MIPNEAREST=11,n.TRILINEAR_SAMPLINGMODE=3,n.LINEAR_LINEAR_MIPLINEAR=3,n.NEAREST_NEAREST_MIPNEAREST=4,n.NEAREST_LINEAR_MIPNEAREST=5,n.NEAREST_LINEAR_MIPLINEAR=6,n.NEAREST_LINEAR=7,n.NEAREST_NEAREST=1,n.LINEAR_NEAREST_MIPNEAREST=9,n.LINEAR_NEAREST_MIPLINEAR=10,n.LINEAR_LINEAR=2,n.LINEAR_NEAREST=12,n.EXPLICIT_MODE=0,n.SPHERICAL_MODE=1,n.PLANAR_MODE=2,n.CUBIC_MODE=3,n.PROJECTION_MODE=4,n.SKYBOX_MODE=5,n.INVCUBIC_MODE=6,n.EQUIRECTANGULAR_MODE=7,n.FIXED_EQUIRECTANGULAR_MODE=8,n.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,n.CLAMP_ADDRESSMODE=0,n.WRAP_ADDRESSMODE=1,n.MIRROR_ADDRESSMODE=2,n.UseSerializedUrlIfAny=!1,(0,s.d)([(0,q.E)()],n.prototype,"url",void 0),(0,s.d)([(0,q.E)()],n.prototype,"uOffset",void 0),(0,s.d)([(0,q.E)()],n.prototype,"vOffset",void 0),(0,s.d)([(0,q.E)()],n.prototype,"uScale",void 0),(0,s.d)([(0,q.E)()],n.prototype,"vScale",void 0),(0,s.d)([(0,q.E)()],n.prototype,"uAng",void 0),(0,s.d)([(0,q.E)()],n.prototype,"vAng",void 0),(0,s.d)([(0,q.E)()],n.prototype,"wAng",void 0),(0,s.d)([(0,q.E)()],n.prototype,"uRotationCenter",void 0),(0,s.d)([(0,q.E)()],n.prototype,"vRotationCenter",void 0),(0,s.d)([(0,q.E)()],n.prototype,"wRotationCenter",void 0),(0,s.d)([(0,q.E)()],n.prototype,"homogeneousRotationInUVTransform",void 0),(0,s.d)([(0,q.E)()],n.prototype,"isBlocking",null),(0,G.d)("BABYLON.Texture",n),k.d._TextureParser=n.Parse},12862:(a,c,o)=>{o.d(c,{e:()=>q});var s=o(12810);class q{constructor(a,c,o,q){this.normal=new s.Hc(a,c,o),this.d=q}hc(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new q(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let a=this.normal.getHashCode();return a=397*a^this.d,a}normalize(){const a=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let c=0;return 0!==a&&(c=1/a),this.normal.x*=c,this.normal.y*=c,this.normal.z*=c,this.d*=c,this}transform(a){const c=q._TmpMatrix;a.invertToRef(c);const o=c.m,s=this.normal.x,t=this.normal.y,i=this.normal.z,p=this.d,G=s*o[0]+t*o[1]+i*o[2]+p*o[3],T=s*o[4]+t*o[5]+i*o[6]+p*o[7],C=s*o[8]+t*o[9]+i*o[10]+p*o[11],j=s*o[12]+t*o[13]+i*o[14]+p*o[15];return new q(G,T,C,j)}dotCoordinate(a){return this.normal.x*a.x+this.normal.y*a.y+this.normal.z*a.z+this.d}copyFromPoints(a,c,o){const s=c.x-a.x,q=c.y-a.y,t=c.z-a.z,i=o.x-a.x,p=o.y-a.y,G=o.z-a.z,T=q*G-t*p,C=t*i-s*G,j=s*p-q*i,L=Math.sqrt(T*T+C*C+j*j);let e;return e=0!==L?1/L:0,this.normal.x=T*e,this.normal.y=C*e,this.normal.z=j*e,this.d=-(this.normal.x*a.x+this.normal.y*a.y+this.normal.z*a.z),this}isFrontFacingTo(a,c){return s.Hc.Dot(this.normal,a)<=c}signedDistanceTo(a){return s.Hc.Dot(a,this.normal)+this.d}static qo(a){return new q(a[0],a[1],a[2],a[3])}static FromPoints(a,c,o){const s=new q(0,0,0,0);return s.copyFromPoints(a,c,o),s}static FromPositionAndNormal(a,c){const o=new q(0,0,0,0);return this.FromPositionAndNormalToRef(a,c,o)}static FromPositionAndNormalToRef(a,c,o){return o.normal.G(c),o.normal.normalize(),o.d=-a.dot(o.normal),o}static SignedDistanceToPlaneFromPositionAndNormal(a,c,o){const q=-(c.x*a.x+c.y*a.y+c.z*a.z);return s.Hc.Dot(o,c)+q}}q._TmpMatrix=s.Matrix.Identity()},12841:(a,c,o)=>{o.d(c,{b:()=>s});class s{constructor(a,c){this.width=a,this.height=c}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let a=0|this.width;return a=397*a^this.height,a}G(a){this.width=a.width,this.height=a.height}Bc(a,c){return this.width=a,this.height=c,this}set(a,c){return this.Bc(a,c)}multiplyByFloats(a,c){return new s(this.width*a,this.height*c)}clone(){return new s(this.width,this.height)}equals(a){return!!a&&(this.width===a.width&&this.height===a.height)}get surface(){return this.width*this.height}static Zero(){return new s(0,0)}add(a){return new s(this.width+a.width,this.height+a.height)}vc(a){return new s(this.width-a.width,this.height-a.height)}scale(a){return new s(this.width*a,this.height*a)}static Lerp(a,c,o){const q=a.width+(c.width-a.width)*o,t=a.height+(c.height-a.height)*o;return new s(q,t)}}},12804:(a,c,o)=>{o.d(c,{c:()=>t,e:()=>i});const s={},q={};function t(a){const c=a.getClassName();return q[c]||(q[c]={}),q[c]}function i(a){const c=a.getClassName();if(s[c])return s[c];s[c]={};const o=s[c];let t=a,i=c;for(;i;){const a=q[i];for(const q in a)o[q]=a[q];let c,s=!1;do{if(c=Object.getPrototypeOf(t),!c.getClassName){s=!0;break}if(c.getClassName()!==i)break;t=c}while(c);if(s)break;i=c.getClassName(),t=c}return o}},12800:(a,c,o)=>{o.d(c,{B:()=>j,E:()=>i,d:()=>t,g:()=>k,i:()=>e,j:()=>G,n:()=>g,p:()=>T,r:()=>M,s:()=>y,t:()=>L,u:()=>N,v:()=>p,x:()=>C});var s=o(12804);function q(a,c){return(o,q)=>{const t=(0,s.c)(o);t[q]||(t[q]={type:a,sourceName:c})}}function t(a){return function(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(o,s)=>{const q=c||"_"+s;Object.defineProperty(o,s,{get:function(){return this[q]},set:function(c){var s;"function"===typeof(null===(s=this[q])||void 0===s?void 0:s.equals)&&this[q].equals(c)||this[q]!==c&&(this[q]=c,o[a].apply(this))},enumerable:!0,configurable:!0})}}(a,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function i(a){return q(0,a)}function p(a){return q(1,a)}function G(a){return q(2,a)}function T(a){return q(3,a)}function C(a){return q(4,a)}function j(a){return q(5,a)}function L(a){return q(6,a)}function e(a){return q(7,a)}function g(a){return q(8,a)}function M(a){return q(9,a)}function N(a){return q(10,a)}function y(a){return q(12,a)}function k(a,c,o,s){const q=o.value;o.value=function(){let o=q;if("undefined"!==typeof _native&&_native[c]){const a=_native[c];o=s?function(){return s(...arguments)?a(...arguments):q(...arguments)}:a}return a[c]=o,o(...arguments)}}k.filter=function(a){return(c,o,s)=>k(c,o,s,a)}},12845:(a,c,o)=>{o.d(c,{d:()=>T});var s=o(12667),q=o(12852),t=o(12858),i=o(12810),p=o(12804);const G=function(a,c,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const t=a();q.c&&q.c.HasTags(c)&&q.c.AddTagsTo(t,q.c.GetTags(c,!0));const i=(0,p.e)(t),G={};for(const q in i){const a=i[q],p=c[q],C=a.type;if(void 0!==p&&null!==p&&("uniqueId"!==q||T.AllowLoadingUniqueId))switch(C){case 0:case 6:case 9:case 11:t[q]=p;break;case 1:s.cloneTexturesOnlyOnce&&G[p.uniqueId]?t[q]=G[p.uniqueId]:(t[q]=o||p.isRenderTarget?p:p.clone(),G[p.uniqueId]=t[q]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:t[q]=o?p:p.clone()}}return t};class T{static AppendSerializedAnimations(a,c){if(a.animations){c.animations=[];for(let o=0;o<a.animations.length;o++){const s=a.animations[o];c.animations.push(s.serialize())}}}static Serialize(a,c){c||(c={}),q.c&&(c.tags=q.c.GetTags(a));const o=(0,p.e)(a);for(const s in o){const q=o[s],t=q.sourceName||s,i=q.type,p=a[s];if(void 0!==p&&null!==p&&("uniqueId"!==s||T.AllowLoadingUniqueId))switch(i){case 0:c[t]=p;break;case 1:case 3:case 7:case 9:c[t]=p.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:c[t]=p.hc();break;case 6:case 11:c[t]=p.id}}return c}static ParseProperties(a,c,o,s){s||(s="");const q=(0,p.e)(c);for(const p in q){const G=q[p],C=a[G.sourceName||p],j=G.type;if(void 0!==C&&null!==C&&("uniqueId"!==p||T.AllowLoadingUniqueId)){const a=c;switch(j){case 0:a[p]=C;break;case 1:o&&(a[p]=T._TextureParser(C,o,s));break;case 2:a[p]=t.oo.qo(C);break;case 3:a[p]=T._FresnelParametersParser(C);break;case 4:a[p]=i.Vector2.qo(C);break;case 5:a[p]=i.Hc.qo(C);break;case 6:o&&(a[p]=o.getLastMeshById(C));break;case 7:a[p]=T._ColorCurvesParser(C);break;case 8:a[p]=t.Yc.qo(C);break;case 9:a[p]=T._ImageProcessingConfigurationParser(C);break;case 10:a[p]=i.Quaternion.qo(C);break;case 11:o&&(a[p]=o.getCameraById(C));break;case 12:a[p]=i.Matrix.qo(C)}}}}static Parse(a,c,o){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const t=a();return q.c&&q.c.AddTagsTo(t,c.tags),T.ParseProperties(c,t,o,s),t}static Clone(a,c){return G(a,c,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(a,c){return G(a,c,!0)}}T.AllowLoadingUniqueId=!1,T._ImageProcessingConfigurationParser=a=>{throw(0,s.b)("ImageProcessingConfiguration")},T._FresnelParametersParser=a=>{throw(0,s.b)("FresnelParameters")},T._ColorCurvesParser=a=>{throw(0,s.b)("ColorCurves")},T._TextureParser=(a,c,o)=>{throw(0,s.b)("Texture")}},12852:(a,c,o)=>{o.d(c,{c:()=>q});class s{static Eval(a,c){return"true"===(a=a.match(/\([^()]*\)/g)?a.replace(/\([^()]*\)/g,(a=>(a=a.slice(1,a.length-1),s._HandleParenthesisContent(a,c)))):s._HandleParenthesisContent(a,c))||"false"!==a&&s.Eval(a,c)}static _HandleParenthesisContent(a,c){let o;c=c||(a=>"true"===a);const q=a.split("||");for(const t in q)if(Object.prototype.hasOwnProperty.call(q,t)){let a=s._SimplifyNegation(q[t].trim());const i=a.split("&&");if(i.length>1)for(let q=0;q<i.length;++q){const t=s._SimplifyNegation(i[q].trim());if(o="true"!==t&&"false"!==t?"!"===t[0]?!c(t.substring(1)):c(t):"true"===t,!o){a="false";break}}if(o||"true"===a){o=!0;break}o="true"!==a&&"false"!==a?"!"===a[0]?!c(a.substring(1)):c(a):"true"===a}return o?"true":"false"}static _SimplifyNegation(a){return"!true"===(a=(a=a.replace(/^[\s!]+/,(a=>(a=a.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?a="false":"!false"===a&&(a="true"),a}}class q{static EnableFor(a){a._tags=a._tags||{},a.hasTags=()=>q.HasTags(a),a.addTags=c=>q.AddTagsTo(a,c),a.removeTags=c=>q.RemoveTagsFrom(a,c),a.matchesTagsQuery=c=>q.MatchesQuery(a,c)}static DisableFor(a){delete a._tags,delete a.hasTags,delete a.addTags,delete a.removeTags,delete a.matchesTagsQuery}static HasTags(a){if(!a._tags)return!1;const c=a._tags;for(const o in c)if(Object.prototype.hasOwnProperty.call(c,o))return!0;return!1}static GetTags(a){let c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!a._tags)return null;if(c){const c=[];for(const o in a._tags)Object.prototype.hasOwnProperty.call(a._tags,o)&&!0===a._tags[o]&&c.push(o);return c.join(" ")}return a._tags}static AddTagsTo(a,c){if(!c)return;if("string"!==typeof c)return;const o=c.split(" ");for(const s of o)q._AddTagTo(a,s)}static _AddTagTo(a,c){""!==(c=c.trim())&&"true"!==c&&"false"!==c&&(c.match(/[\s]/)||c.match(/^([!]|([|]|[&]){2})/)||(q.EnableFor(a),a._tags[c]=!0))}static RemoveTagsFrom(a,c){if(!q.HasTags(a))return;const o=c.split(" ");for(const s in o)q._RemoveTagFrom(a,o[s])}static _RemoveTagFrom(a,c){delete a._tags[c]}static MatchesQuery(a,c){return void 0===c||(""===c?q.HasTags(a):s.Eval(c,(c=>q.HasTags(a)&&a._tags[c])))}}},12798:(a,c,o)=>{o.d(c,{d:()=>s});function s(a,c,o,s){var q,t=arguments.length,i=t<3?c:null===s?s=Object.getOwnPropertyDescriptor(c,o):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(a,c,o,s);else for(var p=a.length-1;p>=0;p--)(q=a[p])&&(i=(t<3?q(i):t>3?q(c,o,i):q(c,o))||i);return t>3&&i&&Object.defineProperty(c,o,i),i}Object.create;Object.create}}]);