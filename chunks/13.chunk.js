"use strict";(self.pp3k1ov3ibi=self.pp3k1ov3ibi||[]).push([[13],{12416:(M,Z,P)=>{P.d(Z,{e:()=>x});let x=!1},12390:(M,Z,P)=>{P.d(Z,{b:()=>H});var x=P(12351),c=P(12359),w=P(12184),v=P(12373),G=P(12225),mM=P(12325),K=(P(12230),P(12392));class d{get wrapU(){return this._wrapU}set wrapU(M){this._wrapU=M}get wrapV(){return this._wrapV}set wrapV(M){this._wrapV=M}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(M){this._texture&&(this._texture.isCube=M)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(M){this._texture&&(this._texture.is3D=M)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(M){this._texture&&(this._texture.is2DArray=M)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(M){return void 0!==(null===M||void 0===M?void 0:M.shareDepth)}constructor(M){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=K.b.Zero(),this._cachedBaseSize=K.b.Zero(),this._initialSamplingMode=2,this._texture=d._IsRenderTargetWrapper(M)?M.texture:M,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(M){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(M,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var O=P(12394);class H extends d{set Lc(M){this._hasAlpha!==M&&(this._hasAlpha=M,this._scene&&this._scene.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))))}get Lc(){return this._hasAlpha}set getAlphaFromRGB(M){this._getAlphaFromRGB!==M&&(this._getAlphaFromRGB=M,this._scene&&this._scene.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(M){this._coordinatesIndex!==M&&(this._coordinatesIndex=M,this._scene&&this._scene.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(M){this._coordinatesMode!==M&&(this._coordinatesMode=M,this._scene&&this._scene.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(M){this._wrapU=M}get wrapV(){return this._wrapV}set wrapV(M){this._wrapV=M}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(M){this._texture?this._texture.isCube=M:this._isCube=M}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(M){this._texture&&(this._texture.is3D=M)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(M){this._texture&&(this._texture.is2DArray=M)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(M){var Z;if(this._texture){if(this._texture._gammaSpace===M)return;this._texture._gammaSpace=M}else{if(this._gammaSpace===M)return;this._gammaSpace=M}null===(Z=this.DM())||void 0===Z||Z.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(M){var Z;M!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=M),null===(Z=this.DM())||void 0===Z||Z.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(M){this._texture&&(this._texture._lodGenerationOffset=M)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(M){this._texture&&(this._texture._lodGenerationScale=M)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(M){this._texture&&(this._texture._linearSpecularLOD=M)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(M){this._texture&&(this._texture._irradianceTexture=M)}get uid(){return this._uid||(this._uid=(0,mM.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(M){this._onDisposeObserver&&this.Gc.remove(this._onDisposeObserver),this._onDisposeObserver=this.Gc.add(M)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=H.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Gc=new w.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,M?H._IsScene(M)?this._scene=M:this._engine=M:this._scene=G.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=Z,this._uid=null}DM(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return v.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return v.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(M){}get canRescale(){return!1}_getFromCache(M,Z,P,x,c,w){const v=this._getEngine();if(!v)return null;const G=v._getUseSRGBBuffer(!!c,Z),mM=v.getLoadedTexturesCache();for(let K=0;K<mM.length;K++){const v=mM[K];if((void 0===c||G===v._useSRGBBuffer)&&(void 0===x||x===v.invertY)&&v.url===M&&v.generateMipMaps===!Z&&(!P||P===v.samplingMode)&&(void 0===w||w===v.isCube))return v.incrementReferences(),v}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const M=this.DM();M&&M.markAllMaterialsAsDirty(1)}readPixels(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,mM=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const K=this._getEngine();if(!K)return null;const d=this.getSize();let O=d.width,H=d.height;0!==Z&&(O/=Math.pow(2,Z),H/=Math.pow(2,Z),O=Math.round(O),H=Math.round(H)),G=Math.min(O,G),mM=Math.min(H,mM);try{return this._texture.isCube?K._readTexturePixels(this._texture,G,mM,M,Z,P,x,c,w,v):K._readTexturePixels(this._texture,G,mM,-1,Z,P,x,c,w,v)}catch(j){return null}}_readPixelsSync(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const w=this.getSize();let v=w.width,G=w.height;const mM=this._getEngine();if(!mM)return null;0!=Z&&(v/=Math.pow(2,Z),G/=Math.pow(2,Z),v=Math.round(v),G=Math.round(G));try{return this._texture.isCube?mM._readTexturePixelsSync(this._texture,v,G,M,Z,P,x,c):mM._readTexturePixelsSync(this._texture,v,G,-1,Z,P,x,c)}catch(K){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const M=this._scene.textures.indexOf(this);if(M>=0&&this._scene.textures.splice(M,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const M=this._parentContainer.textures.indexOf(this);M>-1&&this._parentContainer.textures.splice(M,1),this._parentContainer=null}}this.Gc.notifyObservers(this),this.Gc.clear(),this.metadata=null,super.dispose()}serialize(){let M=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!M)return null;const Z=O.b.Serialize(this);return O.b.AppendSerializedAnimations(this,Z),Z}static WhenAllReady(M,Z){let P=M.length;if(0!==P)for(let x=0;x<M.length;x++){const c=M[x];if(c.isReady())0===--P&&Z();else{const M=c.onLoadObservable;M?M.addOnce((()=>{0===--P&&Z()})):0===--P&&Z()}}else Z()}static _IsScene(M){return"Scene"===M.getClassName()}}H.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,x.c)([(0,c.H)()],H.prototype,"uniqueId",void 0),(0,x.c)([(0,c.H)()],H.prototype,"name",void 0),(0,x.c)([(0,c.H)()],H.prototype,"displayName",void 0),(0,x.c)([(0,c.H)()],H.prototype,"metadata",void 0),(0,x.c)([(0,c.H)("Lc")],H.prototype,"_hasAlpha",void 0),(0,x.c)([(0,c.H)("getAlphaFromRGB")],H.prototype,"_getAlphaFromRGB",void 0),(0,x.c)([(0,c.H)()],H.prototype,"level",void 0),(0,x.c)([(0,c.H)("coordinatesIndex")],H.prototype,"_coordinatesIndex",void 0),(0,x.c)([(0,c.H)()],H.prototype,"optimizeUVAllocation",void 0),(0,x.c)([(0,c.H)("coordinatesMode")],H.prototype,"_coordinatesMode",void 0),(0,x.c)([(0,c.H)()],H.prototype,"wrapU",null),(0,x.c)([(0,c.H)()],H.prototype,"wrapV",null),(0,x.c)([(0,c.H)()],H.prototype,"wrapR",void 0),(0,x.c)([(0,c.H)()],H.prototype,"anisotropicFilteringLevel",void 0),(0,x.c)([(0,c.H)()],H.prototype,"isCube",null),(0,x.c)([(0,c.H)()],H.prototype,"is3D",null),(0,x.c)([(0,c.H)()],H.prototype,"is2DArray",null),(0,x.c)([(0,c.H)()],H.prototype,"gammaSpace",null),(0,x.c)([(0,c.H)()],H.prototype,"invertZ",void 0),(0,x.c)([(0,c.H)()],H.prototype,"lodLevelInAlpha",void 0),(0,x.c)([(0,c.H)()],H.prototype,"lodGenerationOffset",null),(0,x.c)([(0,c.H)()],H.prototype,"lodGenerationScale",null),(0,x.c)([(0,c.H)()],H.prototype,"linearSpecularLOD",null),(0,x.c)([(0,c.A)()],H.prototype,"irradianceTexture",null),(0,x.c)([(0,c.H)()],H.prototype,"isRenderTarget",void 0)},12344:(M,Z,P)=>{P.d(Z,{e:()=>N});var x=P(12351),c=P(12359),w=P(12184),v=P(12373),G=P(12390),mM=P(12317),K=P(12213),d=P(12258),O=P(12313),H=P(12408),j=P(12245);function B(M,Z){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const x=Z.width,c=Z.height;if(M instanceof Float32Array){let Z=M.byteLength/M.BYTES_PER_ELEMENT;const P=new Uint8Array(Z);for(;--Z>=0;){let x=M[Z];x<0?x=0:x>1&&(x=1),P[Z]=255*x}M=P}const w=document.createElement("canvas");w.width=x,w.height=c;const v=w.getContext("2d");if(!v)return null;const G=v.createImageData(x,c);if(G.data.set(M),v.putImageData(G,0,0),P){const M=document.createElement("canvas");M.width=x,M.height=c;const Z=M.getContext("2d");return Z?(Z.translate(0,c),Z.scale(1,-1),Z.drawImage(w,0,0),M.toDataURL("image/png")):null}return w.toDataURL("image/png")}function U(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const x=M.getInternalTexture();if(!x)return null;const c=M._readPixelsSync(Z,P);return c?B(c,M.getSize(),x.invertY):null}async function n(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const x=M.getInternalTexture();if(!x)return null;const c=await M.readPixels(Z,P);return c?B(c,M.getSize(),x.invertY):null}var L=P(12416),u=P(12394);class N extends G.b{static _CreateVideoTexture(M,Z,P){arguments.length>5&&void 0!==arguments[5]||N.TRILINEAR_SAMPLINGMODE;throw(0,K.d)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(M){this._isBlocking=M}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(M,Z,P,x){let c,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N.TRILINEAR_SAMPLINGMODE,G=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,mM=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,K=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,O=arguments.length>8&&void 0!==arguments[8]&&arguments[8],H=arguments.length>9?arguments[9]:void 0,j=arguments.length>10?arguments[10]:void 0,B=arguments.length>11?arguments[11]:void 0,U=arguments.length>12?arguments[12]:void 0,n=arguments.length>13?arguments[13]:void 0;super(Z),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new w.b,this._isBlocking=!0,this.name=M||"",this.url=M;let u=!1,J=null,t=!0;"object"===typeof P&&null!==P?(c=P.noMipmap??!1,x=P.invertY??!L.e,v=P.samplingMode??N.TRILINEAR_SAMPLINGMODE,G=P.S??null,mM=P.onError??null,K=P.buffer??null,O=P.deleteBuffer??!1,H=P.format,j=P.mimeType,B=P.loaderOptions,U=P.creationFlags,u=P.useSRGBBuffer??!1,J=P.internalTexture??null,t=P.gammaSpace??t,n=P.forcedExtension??n):c=!!P,this._gammaSpace=t,this._noMipmap=c,this._invertY=void 0===x?!L.e:x,this._initialSamplingMode=v,this._buffer=K,this._deleteBuffer=O,this._mimeType=j,this._loaderOptions=B,this._creationFlags=U,this._useSRGBBuffer=u,this._forcedExtension=n,void 0!==H&&(this._format=H);const F=this.DM(),D=this._getEngine();if(!D)return;D.onBeforeTextureInitObservable.notifyObservers(this);const l=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),G&&G(),!this.isBlocking&&F&&F.resetCachedMaterial()},h=(M,Z)=>{this._loadingError=!0,this._errorObject={message:M,exception:Z},mM&&mM(M,Z),N.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!J)return this._delayedOnLoad=l,void(this._delayedOnError=h);if(this._texture=J??this._getFromCache(this.url,c,v,this._invertY,u,this.isCube),this._texture)if(this._texture.isReady)d.b.SetImmediate((()=>l()));else{const M=this._texture.onLoadedObservable.add(l);this._texture.onErrorObservable.add((Z=>{var P;h(Z.message,Z.exception),null===(P=this._texture)||void 0===P||P.onLoadedObservable.remove(M)}))}else if(F&&F.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=l,this._delayedOnError=h;else{try{this._texture=D.createTexture(this.url,c,this._invertY,F,v,l,h,this._buffer,void 0,this._format,this._forcedExtension,j,B,U,u)}catch(Q){throw h("error loading",Q),Q}O&&(this._buffer=null)}}updateURL(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,P=arguments.length>2?arguments[2]:void 0,x=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.DM().markAllMaterialsAsDirty(1,(M=>M.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=M),this.url=M,this._buffer=Z,this._forcedExtension=x,this.delayLoadState=4,P&&(this._delayedOnLoad=P),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const M=this.DM();M&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?d.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=M.getEngine().createTexture(this.url,this._noMipmap,this._invertY,M,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(M,Z,P,x){M*=this._cachedUScale,Z*=this._cachedVScale,M-=this.uRotationCenter*this._cachedUScale,Z-=this.vRotationCenter*this._cachedVScale,P-=this.wRotationCenter,v.BZ.TransformCoordinatesFromFloatsToRef(M,Z,P,this._rowGenerationMatrix,x),x.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,x.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,x.z+=this.wRotationCenter}getTextureMatrix(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*M===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*M,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=v.Matrix.Zero(),this._rowGenerationMatrix=new v.Matrix,this._t0=v.BZ.Zero(),this._t1=v.BZ.Zero(),this._t2=v.BZ.Zero()),v.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(v.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,v.TmpVectors.Matrix[0]),v.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,v.TmpVectors.Matrix[1]),v.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,v.TmpVectors.Matrix[2]),v.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,v.TmpVectors.Matrix[3]),v.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.MH(this._t0),this._t2.MH(this._t0),v.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const Z=this.DM();if(!Z)return this._cachedTextureMatrix;const P=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&P!==this._cachedIdentity3x2&&Z.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const M=this.DM();if(!M)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==N.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===M.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=v.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=v.Matrix.Zero());const Z=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case N.PLANAR_MODE:v.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case N.PROJECTION_MODE:{v.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const Z=M.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=Z.updateFlag,Z.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:v.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return Z&&M.markAllMaterialsAsDirty(1,(M=>M.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const M={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,S:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return u.b.Clone((()=>new N(this._texture?this._texture.url:null,this.DM(),M)),this)}serialize(){var M;const Z=this.name;N.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const P=super.serialize(N._SerializeInternalTextureUniqueId);if(!P)return null;if(N.SerializeBuffers||N.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))P.base64String=this._buffer,P.name=P.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const M=this.mimeType||"image/png";P.base64String=`data:${M};base64,${(0,j.k)(this._buffer)}`}else(N.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(P.base64String=!this._engine||this._engine._features.supportSyncTextureRead?U(this):n(this));var x;(P.invertY=this._invertY,P.samplingMode=this.samplingMode,P._creationFlags=this._creationFlags,P._useSRGBBuffer=this._useSRGBBuffer,N._SerializeInternalTextureUniqueId)&&(P.internalTextureUniqueId=null===(x=this._texture)||void 0===x?void 0:x.uniqueId);return P.internalTextureLabel=null===(M=this._texture)||void 0===M?void 0:M.label,P.noMipmap=this._noMipmap,this.name=Z,P}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(M,Z,P){if(M.customType){const x=O.d.Instantiate(M.customType).Parse(M,Z,P);return M.samplingMode&&x.updateSamplingMode&&x._samplingMode&&x._samplingMode!==M.samplingMode&&x.updateSamplingMode(M.samplingMode),x}if(M.isCube&&!M.isRenderTarget)return N._CubeTextureParser(M,Z,P);const x=void 0!==M.internalTextureUniqueId;if(!M.name&&!M.isRenderTarget&&!x)return null;let c;if(x){const P=Z.getEngine().getLoadedTexturesCache();for(const Z of P)if(Z.uniqueId===M.internalTextureUniqueId){c=Z;break}}const w=Z=>{if(Z&&Z._texture&&(Z._texture._cachedWrapU=null,Z._texture._cachedWrapV=null,Z._texture._cachedWrapR=null),M.samplingMode){const P=M.samplingMode;Z&&Z.samplingMode!==P&&Z.updateSamplingMode(P)}if(Z&&M.animations)for(let P=0;P<M.animations.length;P++){const x=M.animations[P],c=(0,mM.e)("BABYLON.Animation");c&&Z.animations.push(c.Parse(x))}Z&&Z._texture&&(x&&!c&&Z._texture._setUniqueId(M.internalTextureUniqueId),Z._texture.label=M.internalTextureLabel)};return u.b.Parse((()=>{let x=!0;if(M.noMipmap&&(x=!1),M.mirrorPlane){const P=N._CreateMirror(M.name,M.renderTargetSize,Z,x);return P._waitingRenderList=M.renderList,P.mirrorPlane=H.c.NZ(M.mirrorPlane),w(P),P}if(M.isRenderTarget){let P=null;if(M.isCube){if(Z.reflectionProbes)for(let x=0;x<Z.reflectionProbes.length;x++){const P=Z.reflectionProbes[x];if(P.name===M.name)return P.cubeTexture}}else P=N._CreateRenderTargetTexture(M.name,M.renderTargetSize,Z,x,M._creationFlags??0),P._waitingRenderList=M.renderList;return w(P),P}if(M.isVideo){const c=N._CreateVideoTexture(P+(M.url||M.name),P+(M.src||M.url),Z,x,M.invertY,M.samplingMode,M.settings||{});return w(c),c}{let v;if(M.base64String&&!c)v=N.CreateFromBase64String(M.base64String,M.base64String,Z,!x,M.invertY,M.samplingMode,(()=>{w(v)}),M._creationFlags??0,M._useSRGBBuffer??!1),v.name=M.name;else{let G;G=M.name&&(M.name.indexOf("://")>0||M.name.startsWith("data:"))?M.name:P+M.name,M.url&&(M.url.startsWith("data:")||N.UseSerializedUrlIfAny)&&(G=M.url);const mM={noMipmap:!x,invertY:M.invertY,samplingMode:M.samplingMode,S:()=>{w(v)},internalTexture:c};v=new N(G,Z,mM)}return v}}),M,Z)}static CreateFromBase64String(M,Z,P,x,c){let w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:N.TRILINEAR_SAMPLINGMODE;return new N("data:"+Z,P,x,c,w,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,M,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(M,Z,P){let x=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4?arguments[4]:void 0,w=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:N.TRILINEAR_SAMPLINGMODE,G=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,mM=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,K=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,d=arguments.length>10?arguments[10]:void 0,O=arguments.length>11?arguments[11]:void 0;return"data:"!==M.substring(0,5)&&(M="data:"+M),new N(M,P,c,w,v,G,mM,Z,x,K,void 0,void 0,d,O)}}N.SerializeBuffers=!0,N.ForceSerializeBuffers=!1,N.OnTextureLoadErrorObservable=new w.b,N._SerializeInternalTextureUniqueId=!1,N._CubeTextureParser=(M,Z,P)=>{throw(0,K.d)("CubeTexture")},N._CreateMirror=(M,Z,P,x)=>{throw(0,K.d)("MirrorTexture")},N._CreateRenderTargetTexture=(M,Z,P,x,c)=>{throw(0,K.d)("RenderTargetTexture")},N.NEAREST_SAMPLINGMODE=1,N.NEAREST_NEAREST_MIPLINEAR=8,N.BILINEAR_SAMPLINGMODE=2,N.LINEAR_LINEAR_MIPNEAREST=11,N.TRILINEAR_SAMPLINGMODE=3,N.LINEAR_LINEAR_MIPLINEAR=3,N.NEAREST_NEAREST_MIPNEAREST=4,N.NEAREST_LINEAR_MIPNEAREST=5,N.NEAREST_LINEAR_MIPLINEAR=6,N.NEAREST_LINEAR=7,N.NEAREST_NEAREST=1,N.LINEAR_NEAREST_MIPNEAREST=9,N.LINEAR_NEAREST_MIPLINEAR=10,N.LINEAR_LINEAR=2,N.LINEAR_NEAREST=12,N.EXPLICIT_MODE=0,N.SPHERICAL_MODE=1,N.PLANAR_MODE=2,N.CUBIC_MODE=3,N.PROJECTION_MODE=4,N.SKYBOX_MODE=5,N.INVCUBIC_MODE=6,N.EQUIRECTANGULAR_MODE=7,N.FIXED_EQUIRECTANGULAR_MODE=8,N.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,N.CLAMP_ADDRESSMODE=0,N.WRAP_ADDRESSMODE=1,N.MIRROR_ADDRESSMODE=2,N.UseSerializedUrlIfAny=!1,(0,x.c)([(0,c.H)()],N.prototype,"url",void 0),(0,x.c)([(0,c.H)()],N.prototype,"uOffset",void 0),(0,x.c)([(0,c.H)()],N.prototype,"vOffset",void 0),(0,x.c)([(0,c.H)()],N.prototype,"uScale",void 0),(0,x.c)([(0,c.H)()],N.prototype,"vScale",void 0),(0,x.c)([(0,c.H)()],N.prototype,"uAng",void 0),(0,x.c)([(0,c.H)()],N.prototype,"vAng",void 0),(0,x.c)([(0,c.H)()],N.prototype,"wAng",void 0),(0,x.c)([(0,c.H)()],N.prototype,"uRotationCenter",void 0),(0,x.c)([(0,c.H)()],N.prototype,"vRotationCenter",void 0),(0,x.c)([(0,c.H)()],N.prototype,"wRotationCenter",void 0),(0,x.c)([(0,c.H)()],N.prototype,"homogeneousRotationInUVTransform",void 0),(0,x.c)([(0,c.H)()],N.prototype,"isBlocking",null),(0,mM.g)("BABYLON.Texture",N),u.b._TextureParser=N.Parse},12408:(M,Z,P)=>{P.d(Z,{c:()=>c});var x=P(12373);class c{constructor(M,Z,P,c){this.normal=new x.BZ(M,Z,P),this.d=c}nc(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new c(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let M=this.normal.getHashCode();return M=397*M^this.d,M}normalize(){const M=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let Z=0;return 0!==M&&(Z=1/M),this.normal.x*=Z,this.normal.y*=Z,this.normal.z*=Z,this.d*=Z,this}transform(M){const Z=c._TmpMatrix;M.invertToRef(Z);const P=Z.m,x=this.normal.x,w=this.normal.y,v=this.normal.z,G=this.d,mM=x*P[0]+w*P[1]+v*P[2]+G*P[3],K=x*P[4]+w*P[5]+v*P[6]+G*P[7],d=x*P[8]+w*P[9]+v*P[10]+G*P[11],O=x*P[12]+w*P[13]+v*P[14]+G*P[15];return new c(mM,K,d,O)}dotCoordinate(M){return this.normal.x*M.x+this.normal.y*M.y+this.normal.z*M.z+this.d}copyFromPoints(M,Z,P){const x=Z.x-M.x,c=Z.y-M.y,w=Z.z-M.z,v=P.x-M.x,G=P.y-M.y,mM=P.z-M.z,K=c*mM-w*G,d=w*v-x*mM,O=x*G-c*v,H=Math.sqrt(K*K+d*d+O*O);let j;return j=0!==H?1/H:0,this.normal.x=K*j,this.normal.y=d*j,this.normal.z=O*j,this.d=-(this.normal.x*M.x+this.normal.y*M.y+this.normal.z*M.z),this}isFrontFacingTo(M,Z){return x.BZ.Dot(this.normal,M)<=Z}signedDistanceTo(M){return x.BZ.Dot(M,this.normal)+this.d}static NZ(M){return new c(M[0],M[1],M[2],M[3])}static FromPoints(M,Z,P){const x=new c(0,0,0,0);return x.copyFromPoints(M,Z,P),x}static FromPositionAndNormal(M,Z){const P=new c(0,0,0,0);return this.FromPositionAndNormalToRef(M,Z,P)}static FromPositionAndNormalToRef(M,Z,P){return P.normal.v(Z),P.normal.normalize(),P.d=-M.dot(P.normal),P}static SignedDistanceToPlaneFromPositionAndNormal(M,Z,P){const c=-(Z.x*M.x+Z.y*M.y+Z.z*M.z);return x.BZ.Dot(P,Z)+c}}c._TmpMatrix=x.Matrix.Identity()},12392:(M,Z,P)=>{P.d(Z,{b:()=>x});class x{constructor(M,Z){this.width=M,this.height=Z}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let M=0|this.width;return M=397*M^this.height,M}v(M){this.width=M.width,this.height=M.height}lc(M,Z){return this.width=M,this.height=Z,this}set(M,Z){return this.lc(M,Z)}multiplyByFloats(M,Z){return new x(this.width*M,this.height*Z)}clone(){return new x(this.width,this.height)}equals(M){return!!M&&(this.width===M.width&&this.height===M.height)}get surface(){return this.width*this.height}static Zero(){return new x(0,0)}add(M){return new x(this.width+M.width,this.height+M.height)}UZ(M){return new x(this.width-M.width,this.height-M.height)}scale(M){return new x(this.width*M,this.height*M)}static Lerp(M,Z,P){const c=M.width+(Z.width-M.width)*P,w=M.height+(Z.height-M.height)*P;return new x(c,w)}}},12367:(M,Z,P)=>{P.d(Z,{d:()=>w,e:()=>v});const x={},c={};function w(M){const Z=M.getClassName();return c[Z]||(c[Z]={}),c[Z]}function v(M){const Z=M.getClassName();if(x[Z])return x[Z];x[Z]={};const P=x[Z];let w=M,v=Z;for(;v;){const M=c[v];for(const c in M)P[c]=M[c];let Z,x=!1;do{if(Z=Object.getPrototypeOf(w),!Z.getClassName){x=!0;break}if(Z.getClassName()!==v)break;w=Z}while(Z);if(x)break;v=Z.getClassName(),w=Z}return P}},12359:(M,Z,P)=>{P.d(Z,{A:()=>G,D:()=>d,E:()=>O,H:()=>v,b:()=>w,e:()=>u,h:()=>j,i:()=>mM,l:()=>B,p:()=>K,q:()=>U,s:()=>L,v:()=>H,x:()=>n});var x=P(12367);function c(M,Z){return(P,c)=>{const w=(0,x.d)(P);w[c]||(w[c]={type:M,sourceName:Z})}}function w(M){return function(M){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(P,x)=>{const c=Z||"_"+x;Object.defineProperty(P,x,{get:function(){return this[c]},set:function(Z){var x;"function"===typeof(null===(x=this[c])||void 0===x?void 0:x.equals)&&this[c].equals(Z)||this[c]!==Z&&(this[c]=Z,P[M].apply(this))},enumerable:!0,configurable:!0})}}(M,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function v(M){return c(0,M)}function G(M){return c(1,M)}function mM(M){return c(2,M)}function K(M){return c(3,M)}function d(M){return c(4,M)}function O(M){return c(5,M)}function H(M){return c(6,M)}function j(M){return c(7,M)}function B(M){return c(8,M)}function U(M){return c(9,M)}function n(M){return c(10,M)}function L(M){return c(12,M)}function u(M,Z,P,x){const c=P.value;P.value=function(){let P=c;if("undefined"!==typeof _native&&_native[Z]){const M=_native[Z];P=x?function(){return x(...arguments)?M(...arguments):c(...arguments)}:M}return M[Z]=P,P(...arguments)}}u.filter=function(M){return(Z,P,x)=>u(Z,P,x,M)}},12394:(M,Z,P)=>{P.d(Z,{b:()=>K});var x=P(12213),c=P(12398),w=P(12406),v=P(12373),G=P(12367);const mM=function(M,Z,P){let x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const w=M();c.e&&c.e.HasTags(Z)&&c.e.AddTagsTo(w,c.e.GetTags(Z,!0));const v=(0,G.e)(w),mM={};for(const c in v){const M=v[c],G=Z[c],d=M.type;if(void 0!==G&&null!==G&&("uniqueId"!==c||K.AllowLoadingUniqueId))switch(d){case 0:case 6:case 9:case 11:w[c]=G;break;case 1:x.cloneTexturesOnlyOnce&&mM[G.uniqueId]?w[c]=mM[G.uniqueId]:(w[c]=P||G.isRenderTarget?G:G.clone(),mM[G.uniqueId]=w[c]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:w[c]=P?G:G.clone()}}return w};class K{static AppendSerializedAnimations(M,Z){if(M.animations){Z.animations=[];for(let P=0;P<M.animations.length;P++){const x=M.animations[P];Z.animations.push(x.serialize())}}}static Serialize(M,Z){Z||(Z={}),c.e&&(Z.tags=c.e.GetTags(M));const P=(0,G.e)(M);for(const x in P){const c=P[x],w=c.sourceName||x,v=c.type,G=M[x];if(void 0!==G&&null!==G&&("uniqueId"!==x||K.AllowLoadingUniqueId))switch(v){case 0:Z[w]=G;break;case 1:case 3:case 7:case 9:Z[w]=G.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:Z[w]=G.nc();break;case 6:case 11:Z[w]=G.id}}return Z}static ParseProperties(M,Z,P,x){x||(x="");const c=(0,G.e)(Z);for(const G in c){const mM=c[G],d=M[mM.sourceName||G],O=mM.type;if(void 0!==d&&null!==d&&("uniqueId"!==G||K.AllowLoadingUniqueId)){const M=Z;switch(O){case 0:M[G]=d;break;case 1:P&&(M[G]=K._TextureParser(d,P,x));break;case 2:M[G]=w.uZ.NZ(d);break;case 3:M[G]=K._FresnelParametersParser(d);break;case 4:M[G]=v.Vector2.NZ(d);break;case 5:M[G]=v.BZ.NZ(d);break;case 6:P&&(M[G]=P.getLastMeshById(d));break;case 7:M[G]=K._ColorCurvesParser(d);break;case 8:M[G]=w.Ic.NZ(d);break;case 9:M[G]=K._ImageProcessingConfigurationParser(d);break;case 10:M[G]=v.Quaternion.NZ(d);break;case 11:P&&(M[G]=P.getCameraById(d));break;case 12:M[G]=v.Matrix.NZ(d)}}}}static Parse(M,Z,P){let x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const w=M();return c.e&&c.e.AddTagsTo(w,Z.tags),K.ParseProperties(Z,w,P,x),w}static Clone(M,Z){return mM(M,Z,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(M,Z){return mM(M,Z,!0)}}K.AllowLoadingUniqueId=!1,K._ImageProcessingConfigurationParser=M=>{throw(0,x.d)("ImageProcessingConfiguration")},K._FresnelParametersParser=M=>{throw(0,x.d)("FresnelParameters")},K._ColorCurvesParser=M=>{throw(0,x.d)("ColorCurves")},K._TextureParser=(M,Z,P)=>{throw(0,x.d)("Texture")}},12398:(M,Z,P)=>{P.d(Z,{e:()=>c});class x{static Eval(M,Z){return"true"===(M=M.match(/\([^()]*\)/g)?M.replace(/\([^()]*\)/g,(M=>(M=M.slice(1,M.length-1),x._HandleParenthesisContent(M,Z)))):x._HandleParenthesisContent(M,Z))||"false"!==M&&x.Eval(M,Z)}static _HandleParenthesisContent(M,Z){let P;Z=Z||(M=>"true"===M);const c=M.split("||");for(const w in c)if(Object.prototype.hasOwnProperty.call(c,w)){let M=x._SimplifyNegation(c[w].trim());const v=M.split("&&");if(v.length>1)for(let c=0;c<v.length;++c){const w=x._SimplifyNegation(v[c].trim());if(P="true"!==w&&"false"!==w?"!"===w[0]?!Z(w.substring(1)):Z(w):"true"===w,!P){M="false";break}}if(P||"true"===M){P=!0;break}P="true"!==M&&"false"!==M?"!"===M[0]?!Z(M.substring(1)):Z(M):"true"===M}return P?"true":"false"}static _SimplifyNegation(M){return"!true"===(M=(M=M.replace(/^[\s!]+/,(M=>(M=M.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?M="false":"!false"===M&&(M="true"),M}}class c{static EnableFor(M){M._tags=M._tags||{},M.hasTags=()=>c.HasTags(M),M.addTags=Z=>c.AddTagsTo(M,Z),M.removeTags=Z=>c.RemoveTagsFrom(M,Z),M.matchesTagsQuery=Z=>c.MatchesQuery(M,Z)}static DisableFor(M){delete M._tags,delete M.hasTags,delete M.addTags,delete M.removeTags,delete M.matchesTagsQuery}static HasTags(M){if(!M._tags)return!1;const Z=M._tags;for(const P in Z)if(Object.prototype.hasOwnProperty.call(Z,P))return!0;return!1}static GetTags(M){let Z=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!M._tags)return null;if(Z){const Z=[];for(const P in M._tags)Object.prototype.hasOwnProperty.call(M._tags,P)&&!0===M._tags[P]&&Z.push(P);return Z.join(" ")}return M._tags}static AddTagsTo(M,Z){if(!Z)return;if("string"!==typeof Z)return;const P=Z.split(" ");for(const x of P)c._AddTagTo(M,x)}static _AddTagTo(M,Z){""!==(Z=Z.trim())&&"true"!==Z&&"false"!==Z&&(Z.match(/[\s]/)||Z.match(/^([!]|([|]|[&]){2})/)||(c.EnableFor(M),M._tags[Z]=!0))}static RemoveTagsFrom(M,Z){if(!c.HasTags(M))return;const P=Z.split(" ");for(const x in P)c._RemoveTagFrom(M,P[x])}static _RemoveTagFrom(M,Z){delete M._tags[Z]}static MatchesQuery(M,Z){return void 0===Z||(""===Z?c.HasTags(M):x.Eval(Z,(Z=>c.HasTags(M)&&M._tags[Z])))}}},12351:(M,Z,P)=>{P.d(Z,{c:()=>x});function x(M,Z,P,x){var c,w=arguments.length,v=w<3?Z:null===x?x=Object.getOwnPropertyDescriptor(Z,P):x;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)v=Reflect.decorate(M,Z,P,x);else for(var G=M.length-1;G>=0;G--)(c=M[G])&&(v=(w<3?c(v):w>3?c(Z,P,v):c(Z,P))||v);return w>3&&v&&Object.defineProperty(Z,P,v),v}Object.create;Object.create}}]);