"use strict";(self.bbj0x35f849=self.bbj0x35f849||[]).push([[13],{11177:(N,q,C)=>{C.d(q,{d:()=>d});let d=!1},11149:(N,q,C)=>{C.d(q,{d:()=>V});var d=C(11110),U=C(11114),W=C(10949),a=C(11122),F=C(10995),w=C(11083),A=(C(11e3),C(11153));class n{get wrapU(){return this._wrapU}set wrapU(N){this._wrapU=N}get wrapV(){return this._wrapV}set wrapV(N){this._wrapV=N}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(N){this._texture&&(this._texture.isCube=N)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(N){this._texture&&(this._texture.is3D=N)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(N){this._texture&&(this._texture.is2DArray=N)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(N){return void 0!==(null===N||void 0===N?void 0:N.shareDepth)}constructor(N){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=A.c.Zero(),this._cachedBaseSize=A.c.Zero(),this._initialSamplingMode=2,this._texture=n._IsRenderTargetWrapper(N)?N.texture:N,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(N){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(N,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var t=C(11155);class V extends n{set pd(N){this._hasAlpha!==N&&(this._hasAlpha=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get pd(){return this._hasAlpha}set getAlphaFromRGB(N){this._getAlphaFromRGB!==N&&(this._getAlphaFromRGB=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(N){this._coordinatesIndex!==N&&(this._coordinatesIndex=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(N){this._coordinatesMode!==N&&(this._coordinatesMode=N,this._scene&&this._scene.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(N){this._wrapU=N}get wrapV(){return this._wrapV}set wrapV(N){this._wrapV=N}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(N){this._texture?this._texture.isCube=N:this._isCube=N}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(N){this._texture&&(this._texture.is3D=N)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(N){this._texture&&(this._texture.is2DArray=N)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(N){var q;if(this._texture){if(this._texture._gammaSpace===N)return;this._texture._gammaSpace=N}else{if(this._gammaSpace===N)return;this._gammaSpace=N}null===(q=this.lN())||void 0===q||q.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(N){var q;N!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=N),null===(q=this.lN())||void 0===q||q.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(N){this._texture&&(this._texture._lodGenerationOffset=N)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(N){this._texture&&(this._texture._lodGenerationScale=N)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(N){this._texture&&(this._texture._linearSpecularLOD=N)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(N){this._texture&&(this._texture._irradianceTexture=N)}get uid(){return this._uid||(this._uid=(0,w.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(N){this._onDisposeObserver&&this.td.remove(this._onDisposeObserver),this._onDisposeObserver=this.td.add(N)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.td=new W.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,N?V._IsScene(N)?this._scene=N:this._engine=N:this._scene=F.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=q,this._uid=null}lN(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return a.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return a.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(N){}get canRescale(){return!1}_getFromCache(N,q,C,d,U,W){const a=this._getEngine();if(!a)return null;const F=a._getUseSRGBBuffer(!!U,q),w=a.getLoadedTexturesCache();for(let A=0;A<w.length;A++){const a=w[A];if((void 0===U||F===a._useSRGBBuffer)&&(void 0===d||d===a.invertY)&&a.url===N&&a.generateMipMaps===!q&&(!C||C===a.samplingMode)&&(void 0===W||W===a.isCube))return a.incrementReferences(),a}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const N=this.lN();N&&N.markAllMaterialsAsDirty(1)}readPixels(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U=arguments.length>4&&void 0!==arguments[4]&&arguments[4],W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,w=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const A=this._getEngine();if(!A)return null;const n=this.getSize();let t=n.width,V=n.height;0!==q&&(t/=Math.pow(2,q),V/=Math.pow(2,q),t=Math.round(t),V=Math.round(V)),F=Math.min(t,F),w=Math.min(V,w);try{return this._texture.isCube?A._readTexturePixels(this._texture,F,w,N,q,C,d,U,W,a):A._readTexturePixels(this._texture,F,w,-1,q,C,d,U,W,a)}catch(Z){return null}}_readPixelsSync(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const W=this.getSize();let a=W.width,F=W.height;const w=this._getEngine();if(!w)return null;0!=q&&(a/=Math.pow(2,q),F/=Math.pow(2,q),a=Math.round(a),F=Math.round(F));try{return this._texture.isCube?w._readTexturePixelsSync(this._texture,a,F,N,q,C,d,U):w._readTexturePixelsSync(this._texture,a,F,-1,q,C,d,U)}catch(A){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const N=this._scene.textures.indexOf(this);if(N>=0&&this._scene.textures.splice(N,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const N=this._parentContainer.textures.indexOf(this);N>-1&&this._parentContainer.textures.splice(N,1),this._parentContainer=null}}this.td.notifyObservers(this),this.td.clear(),this.metadata=null,super.dispose()}serialize(){let N=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!N)return null;const q=t.d.Serialize(this);return t.d.AppendSerializedAnimations(this,q),q}static WhenAllReady(N,q){let C=N.length;if(0!==C)for(let d=0;d<N.length;d++){const U=N[d];if(U.isReady())0===--C&&q();else{const N=U.onLoadObservable;N?N.addOnce((()=>{0===--C&&q()})):0===--C&&q()}}else q()}static _IsScene(N){return"Scene"===N.getClassName()}}V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,d.d)([(0,U.O)()],V.prototype,"uniqueId",void 0),(0,d.d)([(0,U.O)()],V.prototype,"name",void 0),(0,d.d)([(0,U.O)()],V.prototype,"displayName",void 0),(0,d.d)([(0,U.O)()],V.prototype,"metadata",void 0),(0,d.d)([(0,U.O)("pd")],V.prototype,"_hasAlpha",void 0),(0,d.d)([(0,U.O)("getAlphaFromRGB")],V.prototype,"_getAlphaFromRGB",void 0),(0,d.d)([(0,U.O)()],V.prototype,"level",void 0),(0,d.d)([(0,U.O)("coordinatesIndex")],V.prototype,"_coordinatesIndex",void 0),(0,d.d)([(0,U.O)()],V.prototype,"optimizeUVAllocation",void 0),(0,d.d)([(0,U.O)("coordinatesMode")],V.prototype,"_coordinatesMode",void 0),(0,d.d)([(0,U.O)()],V.prototype,"wrapU",null),(0,d.d)([(0,U.O)()],V.prototype,"wrapV",null),(0,d.d)([(0,U.O)()],V.prototype,"wrapR",void 0),(0,d.d)([(0,U.O)()],V.prototype,"anisotropicFilteringLevel",void 0),(0,d.d)([(0,U.O)()],V.prototype,"isCube",null),(0,d.d)([(0,U.O)()],V.prototype,"is3D",null),(0,d.d)([(0,U.O)()],V.prototype,"is2DArray",null),(0,d.d)([(0,U.O)()],V.prototype,"gammaSpace",null),(0,d.d)([(0,U.O)()],V.prototype,"invertZ",void 0),(0,d.d)([(0,U.O)()],V.prototype,"lodLevelInAlpha",void 0),(0,d.d)([(0,U.O)()],V.prototype,"lodGenerationOffset",null),(0,d.d)([(0,U.O)()],V.prototype,"lodGenerationScale",null),(0,d.d)([(0,U.O)()],V.prototype,"linearSpecularLOD",null),(0,d.d)([(0,U.I)()],V.prototype,"irradianceTexture",null),(0,d.d)([(0,U.O)()],V.prototype,"isRenderTarget",void 0)},11101:(N,q,C)=>{C.d(q,{c:()=>K});var d=C(11110),U=C(11114),W=C(10949),a=C(11122),F=C(11149),w=C(11076),A=C(10985),n=C(11029),t=C(11073),V=C(11169),Z=C(11011);function J(N,q){let C=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const d=q.width,U=q.height;if(N instanceof Float32Array){let q=N.byteLength/N.BYTES_PER_ELEMENT;const C=new Uint8Array(q);for(;--q>=0;){let d=N[q];d<0?d=0:d>1&&(d=1),C[q]=255*d}N=C}const W=document.createElement("canvas");W.width=d,W.height=U;const a=W.getContext("2d");if(!a)return null;const F=a.createImageData(d,U);if(F.data.set(N),a.putImageData(F,0,0),C){const N=document.createElement("canvas");N.width=d,N.height=U;const q=N.getContext("2d");return q?(q.translate(0,U),q.scale(1,-1),q.drawImage(W,0,0),N.toDataURL("image/png")):null}return W.toDataURL("image/png")}function Q(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const d=N.getInternalTexture();if(!d)return null;const U=N._readPixelsSync(q,C);return U?J(U,N.getSize(),d.invertY):null}async function v(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const d=N.getInternalTexture();if(!d)return null;const U=await N.readPixels(q,C);return U?J(U,N.getSize(),d.invertY):null}var r=C(11177),O=C(11155);class K extends F.d{static _CreateVideoTexture(N,q,C){arguments.length>5&&void 0!==arguments[5]||K.TRILINEAR_SAMPLINGMODE;throw(0,A.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(N){this._isBlocking=N}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(N,q,C,d){let U,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K.TRILINEAR_SAMPLINGMODE,F=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,w=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,A=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,t=arguments.length>8&&void 0!==arguments[8]&&arguments[8],V=arguments.length>9?arguments[9]:void 0,Z=arguments.length>10?arguments[10]:void 0,J=arguments.length>11?arguments[11]:void 0,Q=arguments.length>12?arguments[12]:void 0,v=arguments.length>13?arguments[13]:void 0;super(q),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new W.b,this._isBlocking=!0,this.name=N||"",this.url=N;let O=!1,i=null,I=!0;"object"===typeof C&&null!==C?(U=C.noMipmap??!1,d=C.invertY??!r.d,a=C.samplingMode??K.TRILINEAR_SAMPLINGMODE,F=C.R??null,w=C.onError??null,A=C.buffer??null,t=C.deleteBuffer??!1,V=C.format,Z=C.mimeType,J=C.loaderOptions,Q=C.creationFlags,O=C.useSRGBBuffer??!1,i=C.internalTexture??null,I=C.gammaSpace??I,v=C.forcedExtension??v):U=!!C,this._gammaSpace=I,this._noMipmap=U,this._invertY=void 0===d?!r.d:d,this._initialSamplingMode=a,this._buffer=A,this._deleteBuffer=t,this._mimeType=Z,this._loaderOptions=J,this._creationFlags=Q,this._useSRGBBuffer=O,this._forcedExtension=v,void 0!==V&&(this._format=V);const j=this.lN(),l=this._getEngine();if(!l)return;l.onBeforeTextureInitObservable.notifyObservers(this);const T=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),F&&F(),!this.isBlocking&&j&&j.resetCachedMaterial()},z=(N,q)=>{this._loadingError=!0,this._errorObject={message:N,exception:q},w&&w(N,q),K.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!i)return this._delayedOnLoad=T,void(this._delayedOnError=z);if(this._texture=i??this._getFromCache(this.url,U,a,this._invertY,O,this.isCube),this._texture)if(this._texture.isReady)n.b.SetImmediate((()=>T()));else{const N=this._texture.onLoadedObservable.add(T);this._texture.onErrorObservable.add((q=>{var C;z(q.message,q.exception),null===(C=this._texture)||void 0===C||C.onLoadedObservable.remove(N)}))}else if(j&&j.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=T,this._delayedOnError=z;else{try{this._texture=l.createTexture(this.url,U,this._invertY,j,a,T,z,this._buffer,void 0,this._format,this._forcedExtension,Z,J,Q,O)}catch(p){throw z("error loading",p),p}t&&(this._buffer=null)}}updateURL(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,C=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.lN().markAllMaterialsAsDirty(1,(N=>N.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=N),this.url=N,this._buffer=q,this._forcedExtension=d,this.delayLoadState=4,C&&(this._delayedOnLoad=C),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const N=this.lN();N&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?n.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=N.getEngine().createTexture(this.url,this._noMipmap,this._invertY,N,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(N,q,C,d){N*=this._cachedUScale,q*=this._cachedVScale,N-=this.uRotationCenter*this._cachedUScale,q-=this.vRotationCenter*this._cachedVScale,C-=this.wRotationCenter,a.Jq.TransformCoordinatesFromFloatsToRef(N,q,C,this._rowGenerationMatrix,d),d.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,d.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,d.z+=this.wRotationCenter}getTextureMatrix(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*N===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*N,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=a.Matrix.Zero(),this._rowGenerationMatrix=new a.Matrix,this._t0=a.Jq.Zero(),this._t1=a.Jq.Zero(),this._t2=a.Jq.Zero()),a.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(a.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,a.TmpVectors.Matrix[0]),a.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,a.TmpVectors.Matrix[1]),a.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,a.TmpVectors.Matrix[2]),a.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,a.TmpVectors.Matrix[3]),a.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(a.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(a.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(a.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.Rn(this._t0),this._t2.Rn(this._t0),a.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const q=this.lN();if(!q)return this._cachedTextureMatrix;const C=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&C!==this._cachedIdentity3x2&&q.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const N=this.lN();if(!N)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==K.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===N.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=a.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=a.Matrix.Zero());const q=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case K.PLANAR_MODE:a.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case K.PROJECTION_MODE:{a.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const q=N.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=q.updateFlag,q.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:a.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return q&&N.markAllMaterialsAsDirty(1,(N=>N.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const N={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,R:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return O.d.Clone((()=>new K(this._texture?this._texture.url:null,this.lN(),N)),this)}serialize(){var N;const q=this.name;K.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const C=super.serialize(K._SerializeInternalTextureUniqueId);if(!C)return null;if(K.SerializeBuffers||K.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))C.base64String=this._buffer,C.name=C.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const N=this.mimeType||"image/png";C.base64String=`data:${N};base64,${(0,Z.i)(this._buffer)}`}else(K.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(C.base64String=!this._engine||this._engine._features.supportSyncTextureRead?Q(this):v(this));var d;(C.invertY=this._invertY,C.samplingMode=this.samplingMode,C._creationFlags=this._creationFlags,C._useSRGBBuffer=this._useSRGBBuffer,K._SerializeInternalTextureUniqueId)&&(C.internalTextureUniqueId=null===(d=this._texture)||void 0===d?void 0:d.uniqueId);return C.internalTextureLabel=null===(N=this._texture)||void 0===N?void 0:N.label,C.noMipmap=this._noMipmap,this.name=q,C}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(N,q,C){if(N.customType){const d=t.b.Instantiate(N.customType).Parse(N,q,C);return N.samplingMode&&d.updateSamplingMode&&d._samplingMode&&d._samplingMode!==N.samplingMode&&d.updateSamplingMode(N.samplingMode),d}if(N.isCube&&!N.isRenderTarget)return K._CubeTextureParser(N,q,C);const d=void 0!==N.internalTextureUniqueId;if(!N.name&&!N.isRenderTarget&&!d)return null;let U;if(d){const C=q.getEngine().getLoadedTexturesCache();for(const q of C)if(q.uniqueId===N.internalTextureUniqueId){U=q;break}}const W=q=>{if(q&&q._texture&&(q._texture._cachedWrapU=null,q._texture._cachedWrapV=null,q._texture._cachedWrapR=null),N.samplingMode){const C=N.samplingMode;q&&q.samplingMode!==C&&q.updateSamplingMode(C)}if(q&&N.animations)for(let C=0;C<N.animations.length;C++){const d=N.animations[C],U=(0,w.e)("BABYLON.Animation");U&&q.animations.push(U.Parse(d))}q&&q._texture&&(d&&!U&&q._texture._setUniqueId(N.internalTextureUniqueId),q._texture.label=N.internalTextureLabel)};return O.d.Parse((()=>{let d=!0;if(N.noMipmap&&(d=!1),N.mirrorPlane){const C=K._CreateMirror(N.name,N.renderTargetSize,q,d);return C._waitingRenderList=N.renderList,C.mirrorPlane=V.b.Kq(N.mirrorPlane),W(C),C}if(N.isRenderTarget){let C=null;if(N.isCube){if(q.reflectionProbes)for(let d=0;d<q.reflectionProbes.length;d++){const C=q.reflectionProbes[d];if(C.name===N.name)return C.cubeTexture}}else C=K._CreateRenderTargetTexture(N.name,N.renderTargetSize,q,d,N._creationFlags??0),C._waitingRenderList=N.renderList;return W(C),C}if(N.isVideo){const U=K._CreateVideoTexture(C+(N.url||N.name),C+(N.src||N.url),q,d,N.invertY,N.samplingMode,N.settings||{});return W(U),U}{let a;if(N.base64String&&!U)a=K.CreateFromBase64String(N.base64String,N.base64String,q,!d,N.invertY,N.samplingMode,(()=>{W(a)}),N._creationFlags??0,N._useSRGBBuffer??!1),a.name=N.name;else{let F;F=N.name&&(N.name.indexOf("://")>0||N.name.startsWith("data:"))?N.name:C+N.name,N.url&&(N.url.startsWith("data:")||K.UseSerializedUrlIfAny)&&(F=N.url);const w={noMipmap:!d,invertY:N.invertY,samplingMode:N.samplingMode,R:()=>{W(a)},internalTexture:U};a=new K(F,q,w)}return a}}),N,q)}static CreateFromBase64String(N,q,C,d,U){let W=arguments.length>5&&void 0!==arguments[5]?arguments[5]:K.TRILINEAR_SAMPLINGMODE;return new K("data:"+q,C,d,U,W,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,N,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(N,q,C){let d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],U=arguments.length>4?arguments[4]:void 0,W=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:K.TRILINEAR_SAMPLINGMODE,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,w=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,n=arguments.length>10?arguments[10]:void 0,t=arguments.length>11?arguments[11]:void 0;return"data:"!==N.substring(0,5)&&(N="data:"+N),new K(N,C,U,W,a,F,w,q,d,A,void 0,void 0,n,t)}}K.SerializeBuffers=!0,K.ForceSerializeBuffers=!1,K.OnTextureLoadErrorObservable=new W.b,K._SerializeInternalTextureUniqueId=!1,K._CubeTextureParser=(N,q,C)=>{throw(0,A.b)("CubeTexture")},K._CreateMirror=(N,q,C,d)=>{throw(0,A.b)("MirrorTexture")},K._CreateRenderTargetTexture=(N,q,C,d,U)=>{throw(0,A.b)("RenderTargetTexture")},K.NEAREST_SAMPLINGMODE=1,K.NEAREST_NEAREST_MIPLINEAR=8,K.BILINEAR_SAMPLINGMODE=2,K.LINEAR_LINEAR_MIPNEAREST=11,K.TRILINEAR_SAMPLINGMODE=3,K.LINEAR_LINEAR_MIPLINEAR=3,K.NEAREST_NEAREST_MIPNEAREST=4,K.NEAREST_LINEAR_MIPNEAREST=5,K.NEAREST_LINEAR_MIPLINEAR=6,K.NEAREST_LINEAR=7,K.NEAREST_NEAREST=1,K.LINEAR_NEAREST_MIPNEAREST=9,K.LINEAR_NEAREST_MIPLINEAR=10,K.LINEAR_LINEAR=2,K.LINEAR_NEAREST=12,K.EXPLICIT_MODE=0,K.SPHERICAL_MODE=1,K.PLANAR_MODE=2,K.CUBIC_MODE=3,K.PROJECTION_MODE=4,K.SKYBOX_MODE=5,K.INVCUBIC_MODE=6,K.EQUIRECTANGULAR_MODE=7,K.FIXED_EQUIRECTANGULAR_MODE=8,K.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,K.CLAMP_ADDRESSMODE=0,K.WRAP_ADDRESSMODE=1,K.MIRROR_ADDRESSMODE=2,K.UseSerializedUrlIfAny=!1,(0,d.d)([(0,U.O)()],K.prototype,"url",void 0),(0,d.d)([(0,U.O)()],K.prototype,"uOffset",void 0),(0,d.d)([(0,U.O)()],K.prototype,"vOffset",void 0),(0,d.d)([(0,U.O)()],K.prototype,"uScale",void 0),(0,d.d)([(0,U.O)()],K.prototype,"vScale",void 0),(0,d.d)([(0,U.O)()],K.prototype,"uAng",void 0),(0,d.d)([(0,U.O)()],K.prototype,"vAng",void 0),(0,d.d)([(0,U.O)()],K.prototype,"wAng",void 0),(0,d.d)([(0,U.O)()],K.prototype,"uRotationCenter",void 0),(0,d.d)([(0,U.O)()],K.prototype,"vRotationCenter",void 0),(0,d.d)([(0,U.O)()],K.prototype,"wRotationCenter",void 0),(0,d.d)([(0,U.O)()],K.prototype,"homogeneousRotationInUVTransform",void 0),(0,d.d)([(0,U.O)()],K.prototype,"isBlocking",null),(0,w.h)("BABYLON.Texture",K),O.d._TextureParser=K.Parse},11169:(N,q,C)=>{C.d(q,{b:()=>U});var d=C(11122);class U{constructor(N,q,C,U){this.normal=new d.Jq(N,q,C),this.d=U}zd(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new U(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let N=this.normal.getHashCode();return N=397*N^this.d,N}normalize(){const N=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let q=0;return 0!==N&&(q=1/N),this.normal.x*=q,this.normal.y*=q,this.normal.z*=q,this.d*=q,this}transform(N){const q=U._TmpMatrix;N.invertToRef(q);const C=q.m,d=this.normal.x,W=this.normal.y,a=this.normal.z,F=this.d,w=d*C[0]+W*C[1]+a*C[2]+F*C[3],A=d*C[4]+W*C[5]+a*C[6]+F*C[7],n=d*C[8]+W*C[9]+a*C[10]+F*C[11],t=d*C[12]+W*C[13]+a*C[14]+F*C[15];return new U(w,A,n,t)}dotCoordinate(N){return this.normal.x*N.x+this.normal.y*N.y+this.normal.z*N.z+this.d}copyFromPoints(N,q,C){const d=q.x-N.x,U=q.y-N.y,W=q.z-N.z,a=C.x-N.x,F=C.y-N.y,w=C.z-N.z,A=U*w-W*F,n=W*a-d*w,t=d*F-U*a,V=Math.sqrt(A*A+n*n+t*t);let Z;return Z=0!==V?1/V:0,this.normal.x=A*Z,this.normal.y=n*Z,this.normal.z=t*Z,this.d=-(this.normal.x*N.x+this.normal.y*N.y+this.normal.z*N.z),this}isFrontFacingTo(N,q){return d.Jq.Dot(this.normal,N)<=q}signedDistanceTo(N){return d.Jq.Dot(N,this.normal)+this.d}static Kq(N){return new U(N[0],N[1],N[2],N[3])}static FromPoints(N,q,C){const d=new U(0,0,0,0);return d.copyFromPoints(N,q,C),d}static FromPositionAndNormal(N,q){const C=new U(0,0,0,0);return this.FromPositionAndNormalToRef(N,q,C)}static FromPositionAndNormalToRef(N,q,C){return C.normal.U(q),C.normal.normalize(),C.d=-N.dot(C.normal),C}static SignedDistanceToPlaneFromPositionAndNormal(N,q,C){const U=-(q.x*N.x+q.y*N.y+q.z*N.z);return d.Jq.Dot(C,q)+U}}U._TmpMatrix=d.Matrix.Identity()},11153:(N,q,C)=>{C.d(q,{c:()=>d});class d{constructor(N,q){this.width=N,this.height=q}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let N=0|this.width;return N=397*N^this.height,N}U(N){this.width=N.width,this.height=N.height}hd(N,q){return this.width=N,this.height=q,this}set(N,q){return this.hd(N,q)}multiplyByFloats(N,q){return new d(this.width*N,this.height*q)}clone(){return new d(this.width,this.height)}equals(N){return!!N&&(this.width===N.width&&this.height===N.height)}get surface(){return this.width*this.height}static Zero(){return new d(0,0)}add(N){return new d(this.width+N.width,this.height+N.height)}Qq(N){return new d(this.width-N.width,this.height-N.height)}scale(N){return new d(this.width*N,this.height*N)}static Lerp(N,q,C){const U=N.width+(q.width-N.width)*C,W=N.height+(q.height-N.height)*C;return new d(U,W)}}},11120:(N,q,C)=>{C.d(q,{c:()=>W,d:()=>a});const d={},U={};function W(N){const q=N.getClassName();return U[q]||(U[q]={}),U[q]}function a(N){const q=N.getClassName();if(d[q])return d[q];d[q]={};const C=d[q];let W=N,a=q;for(;a;){const N=U[a];for(const U in N)C[U]=N[U];let q,d=!1;do{if(q=Object.getPrototypeOf(W),!q.getClassName){d=!0;break}if(q.getClassName()!==a)break;W=q}while(q);if(d)break;a=q.getClassName(),W=q}return C}},11114:(N,q,C)=>{C.d(q,{A:()=>V,E:()=>v,I:()=>F,J:()=>n,N:()=>t,O:()=>a,e:()=>W,h:()=>O,k:()=>Z,o:()=>w,q:()=>J,t:()=>A,u:()=>Q,w:()=>r});var d=C(11120);function U(N,q){return(C,U)=>{const W=(0,d.c)(C);W[U]||(W[U]={type:N,sourceName:q})}}function W(N){return function(N){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(C,d)=>{const U=q||"_"+d;Object.defineProperty(C,d,{get:function(){return this[U]},set:function(q){var d;"function"===typeof(null===(d=this[U])||void 0===d?void 0:d.equals)&&this[U].equals(q)||this[U]!==q&&(this[U]=q,C[N].apply(this))},enumerable:!0,configurable:!0})}}(N,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function a(N){return U(0,N)}function F(N){return U(1,N)}function w(N){return U(2,N)}function A(N){return U(3,N)}function n(N){return U(4,N)}function t(N){return U(5,N)}function V(N){return U(6,N)}function Z(N){return U(7,N)}function J(N){return U(8,N)}function Q(N){return U(9,N)}function v(N){return U(10,N)}function r(N){return U(12,N)}function O(N,q,C,d){const U=C.value;C.value=function(){let C=U;if("undefined"!==typeof _native&&_native[q]){const N=_native[q];C=d?function(){return d(...arguments)?N(...arguments):U(...arguments)}:N}return N[q]=C,C(...arguments)}}O.filter=function(N){return(q,C,d)=>O(q,C,d,N)}},11155:(N,q,C)=>{C.d(q,{d:()=>A});var d=C(10985),U=C(11159),W=C(11167),a=C(11122),F=C(11120);const w=function(N,q,C){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const W=N();U.d&&U.d.HasTags(q)&&U.d.AddTagsTo(W,U.d.GetTags(q,!0));const a=(0,F.d)(W),w={};for(const U in a){const N=a[U],F=q[U],n=N.type;if(void 0!==F&&null!==F&&("uniqueId"!==U||A.AllowLoadingUniqueId))switch(n){case 0:case 6:case 9:case 11:W[U]=F;break;case 1:d.cloneTexturesOnlyOnce&&w[F.uniqueId]?W[U]=w[F.uniqueId]:(W[U]=C||F.isRenderTarget?F:F.clone(),w[F.uniqueId]=W[U]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:W[U]=C?F:F.clone()}}return W};class A{static AppendSerializedAnimations(N,q){if(N.animations){q.animations=[];for(let C=0;C<N.animations.length;C++){const d=N.animations[C];q.animations.push(d.serialize())}}}static Serialize(N,q){q||(q={}),U.d&&(q.tags=U.d.GetTags(N));const C=(0,F.d)(N);for(const d in C){const U=C[d],W=U.sourceName||d,a=U.type,F=N[d];if(void 0!==F&&null!==F&&("uniqueId"!==d||A.AllowLoadingUniqueId))switch(a){case 0:q[W]=F;break;case 1:case 3:case 7:case 9:q[W]=F.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:q[W]=F.zd();break;case 6:case 11:q[W]=F.id}}return q}static ParseProperties(N,q,C,d){d||(d="");const U=(0,F.d)(q);for(const F in U){const w=U[F],n=N[w.sourceName||F],t=w.type;if(void 0!==n&&null!==n&&("uniqueId"!==F||A.AllowLoadingUniqueId)){const N=q;switch(t){case 0:N[F]=n;break;case 1:C&&(N[F]=A._TextureParser(n,C,d));break;case 2:N[F]=W.Oq.Kq(n);break;case 3:N[F]=A._FresnelParametersParser(n);break;case 4:N[F]=a.Vector2.Kq(n);break;case 5:N[F]=a.Jq.Kq(n);break;case 6:C&&(N[F]=C.getLastMeshById(n));break;case 7:N[F]=A._ColorCurvesParser(n);break;case 8:N[F]=W.md.Kq(n);break;case 9:N[F]=A._ImageProcessingConfigurationParser(n);break;case 10:N[F]=a.Quaternion.Kq(n);break;case 11:C&&(N[F]=C.getCameraById(n));break;case 12:N[F]=a.Matrix.Kq(n)}}}}static Parse(N,q,C){let d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const W=N();return U.d&&U.d.AddTagsTo(W,q.tags),A.ParseProperties(q,W,C,d),W}static Clone(N,q){return w(N,q,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(N,q){return w(N,q,!0)}}A.AllowLoadingUniqueId=!1,A._ImageProcessingConfigurationParser=N=>{throw(0,d.b)("ImageProcessingConfiguration")},A._FresnelParametersParser=N=>{throw(0,d.b)("FresnelParameters")},A._ColorCurvesParser=N=>{throw(0,d.b)("ColorCurves")},A._TextureParser=(N,q,C)=>{throw(0,d.b)("Texture")}},11159:(N,q,C)=>{C.d(q,{d:()=>U});class d{static Eval(N,q){return"true"===(N=N.match(/\([^()]*\)/g)?N.replace(/\([^()]*\)/g,(N=>(N=N.slice(1,N.length-1),d._HandleParenthesisContent(N,q)))):d._HandleParenthesisContent(N,q))||"false"!==N&&d.Eval(N,q)}static _HandleParenthesisContent(N,q){let C;q=q||(N=>"true"===N);const U=N.split("||");for(const W in U)if(Object.prototype.hasOwnProperty.call(U,W)){let N=d._SimplifyNegation(U[W].trim());const a=N.split("&&");if(a.length>1)for(let U=0;U<a.length;++U){const W=d._SimplifyNegation(a[U].trim());if(C="true"!==W&&"false"!==W?"!"===W[0]?!q(W.substring(1)):q(W):"true"===W,!C){N="false";break}}if(C||"true"===N){C=!0;break}C="true"!==N&&"false"!==N?"!"===N[0]?!q(N.substring(1)):q(N):"true"===N}return C?"true":"false"}static _SimplifyNegation(N){return"!true"===(N=(N=N.replace(/^[\s!]+/,(N=>(N=N.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?N="false":"!false"===N&&(N="true"),N}}class U{static EnableFor(N){N._tags=N._tags||{},N.hasTags=()=>U.HasTags(N),N.addTags=q=>U.AddTagsTo(N,q),N.removeTags=q=>U.RemoveTagsFrom(N,q),N.matchesTagsQuery=q=>U.MatchesQuery(N,q)}static DisableFor(N){delete N._tags,delete N.hasTags,delete N.addTags,delete N.removeTags,delete N.matchesTagsQuery}static HasTags(N){if(!N._tags)return!1;const q=N._tags;for(const C in q)if(Object.prototype.hasOwnProperty.call(q,C))return!0;return!1}static GetTags(N){let q=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!N._tags)return null;if(q){const q=[];for(const C in N._tags)Object.prototype.hasOwnProperty.call(N._tags,C)&&!0===N._tags[C]&&q.push(C);return q.join(" ")}return N._tags}static AddTagsTo(N,q){if(!q)return;if("string"!==typeof q)return;const C=q.split(" ");for(const d of C)U._AddTagTo(N,d)}static _AddTagTo(N,q){""!==(q=q.trim())&&"true"!==q&&"false"!==q&&(q.match(/[\s]/)||q.match(/^([!]|([|]|[&]){2})/)||(U.EnableFor(N),N._tags[q]=!0))}static RemoveTagsFrom(N,q){if(!U.HasTags(N))return;const C=q.split(" ");for(const d in C)U._RemoveTagFrom(N,C[d])}static _RemoveTagFrom(N,q){delete N._tags[q]}static MatchesQuery(N,q){return void 0===q||(""===q?U.HasTags(N):d.Eval(q,(q=>U.HasTags(N)&&N._tags[q])))}}},11110:(N,q,C)=>{C.d(q,{d:()=>d});function d(N,q,C,d){var U,W=arguments.length,a=W<3?q:null===d?d=Object.getOwnPropertyDescriptor(q,C):d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(N,q,C,d);else for(var F=N.length-1;F>=0;F--)(U=N[F])&&(a=(W<3?U(a):W>3?U(q,C,a):U(q,C))||a);return W>3&&a&&Object.defineProperty(q,C,a),a}Object.create;Object.create}}]);