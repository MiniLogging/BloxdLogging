"use strict";(self.uw9p3pwwsje=self.uw9p3pwwsje||[]).push([[13],{12877:(D,h,o)=>{o.d(h,{c:()=>H});let H=!1},12849:(D,h,o)=>{o.d(h,{e:()=>Q});var H=o(12812),g=o(12815),j=o(12648),M=o(12831),R=o(12683),t=o(12798),S=(o(12691),o(12851));class k{get wrapU(){return this._wrapU}set wrapU(D){this._wrapU=D}get wrapV(){return this._wrapV}set wrapV(D){this._wrapV=D}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(D){this._texture&&(this._texture.isCube=D)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(D){this._texture&&(this._texture.is3D=D)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(D){this._texture&&(this._texture.is2DArray=D)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(D){return void 0!==(null===D||void 0===D?void 0:D.shareDepth)}constructor(D){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=S.d.Zero(),this._cachedBaseSize=S.d.Zero(),this._initialSamplingMode=2,this._texture=k._IsRenderTargetWrapper(D)?D.texture:D,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(D){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(D,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var K=o(12860);class Q extends k{set Yh(D){this._hasAlpha!==D&&(this._hasAlpha=D,this._scene&&this._scene.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))))}get Yh(){return this._hasAlpha}set getAlphaFromRGB(D){this._getAlphaFromRGB!==D&&(this._getAlphaFromRGB=D,this._scene&&this._scene.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(D){this._coordinatesIndex!==D&&(this._coordinatesIndex=D,this._scene&&this._scene.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(D){this._coordinatesMode!==D&&(this._coordinatesMode=D,this._scene&&this._scene.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(D){this._wrapU=D}get wrapV(){return this._wrapV}set wrapV(D){this._wrapV=D}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(D){this._texture?this._texture.isCube=D:this._isCube=D}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(D){this._texture&&(this._texture.is3D=D)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(D){this._texture&&(this._texture.is2DArray=D)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(D){var h;if(this._texture){if(this._texture._gammaSpace===D)return;this._texture._gammaSpace=D}else{if(this._gammaSpace===D)return;this._gammaSpace=D}null===(h=this.GD())||void 0===h||h.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(D){var h;D!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=D),null===(h=this.GD())||void 0===h||h.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(D){this._texture&&(this._texture._lodGenerationOffset=D)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(D){this._texture&&(this._texture._lodGenerationScale=D)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(D){this._texture&&(this._texture._linearSpecularLOD=D)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(D){this._texture&&(this._texture._irradianceTexture=D)}get uid(){return this._uid||(this._uid=(0,t.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(D){this._onDisposeObserver&&this.Jh.remove(this._onDisposeObserver),this._onDisposeObserver=this.Jh.add(D)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=Q.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Jh=new j.c,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,D?Q._IsScene(D)?this._scene=D:this._engine=D:this._scene=R.d.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=h,this._uid=null}GD(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return M.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return M.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(D){}get canRescale(){return!1}_getFromCache(D,h,o,H,g,j){const M=this._getEngine();if(!M)return null;const R=M._getUseSRGBBuffer(!!g,h),t=M.getLoadedTexturesCache();for(let S=0;S<t.length;S++){const M=t[S];if((void 0===g||R===M._useSRGBBuffer)&&(void 0===H||H===M.invertY)&&M.url===D&&M.generateMipMaps===!h&&(!o||o===M.samplingMode)&&(void 0===j||j===M.isCube))return M.incrementReferences(),M}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const D=this.GD();D&&D.markAllMaterialsAsDirty(1)}readPixels(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const S=this._getEngine();if(!S)return null;const k=this.getSize();let K=k.width,Q=k.height;0!==h&&(K/=Math.pow(2,h),Q/=Math.pow(2,h),K=Math.round(K),Q=Math.round(Q)),R=Math.min(K,R),t=Math.min(Q,t);try{return this._texture.isCube?S._readTexturePixels(this._texture,R,t,D,h,o,H,g,j,M):S._readTexturePixels(this._texture,R,t,-1,h,o,H,g,j,M)}catch(v){return null}}_readPixelsSync(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const j=this.getSize();let M=j.width,R=j.height;const t=this._getEngine();if(!t)return null;0!=h&&(M/=Math.pow(2,h),R/=Math.pow(2,h),M=Math.round(M),R=Math.round(R));try{return this._texture.isCube?t._readTexturePixelsSync(this._texture,M,R,D,h,o,H,g):t._readTexturePixelsSync(this._texture,M,R,-1,h,o,H,g)}catch(S){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const D=this._scene.textures.indexOf(this);if(D>=0&&this._scene.textures.splice(D,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const D=this._parentContainer.textures.indexOf(this);D>-1&&this._parentContainer.textures.splice(D,1),this._parentContainer=null}}this.Jh.notifyObservers(this),this.Jh.clear(),this.metadata=null,super.dispose()}serialize(){let D=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!D)return null;const h=K.d.Serialize(this);return K.d.AppendSerializedAnimations(this,h),h}static WhenAllReady(D,h){let o=D.length;if(0!==o)for(let H=0;H<D.length;H++){const g=D[H];if(g.isReady())0===--o&&h();else{const D=g.onLoadObservable;D?D.addOnce((()=>{0===--o&&h()})):0===--o&&h()}}else h()}static _IsScene(D){return"Scene"===D.getClassName()}}Q.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,H.c)([(0,g.I)()],Q.prototype,"uniqueId",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"name",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"displayName",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"metadata",void 0),(0,H.c)([(0,g.I)("Yh")],Q.prototype,"_hasAlpha",void 0),(0,H.c)([(0,g.I)("getAlphaFromRGB")],Q.prototype,"_getAlphaFromRGB",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"level",void 0),(0,H.c)([(0,g.I)("coordinatesIndex")],Q.prototype,"_coordinatesIndex",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"optimizeUVAllocation",void 0),(0,H.c)([(0,g.I)("coordinatesMode")],Q.prototype,"_coordinatesMode",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"wrapU",null),(0,H.c)([(0,g.I)()],Q.prototype,"wrapV",null),(0,H.c)([(0,g.I)()],Q.prototype,"wrapR",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"anisotropicFilteringLevel",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"isCube",null),(0,H.c)([(0,g.I)()],Q.prototype,"is3D",null),(0,H.c)([(0,g.I)()],Q.prototype,"is2DArray",null),(0,H.c)([(0,g.I)()],Q.prototype,"gammaSpace",null),(0,H.c)([(0,g.I)()],Q.prototype,"invertZ",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"lodLevelInAlpha",void 0),(0,H.c)([(0,g.I)()],Q.prototype,"lodGenerationOffset",null),(0,H.c)([(0,g.I)()],Q.prototype,"lodGenerationScale",null),(0,H.c)([(0,g.I)()],Q.prototype,"linearSpecularLOD",null),(0,H.c)([(0,g.C)()],Q.prototype,"irradianceTexture",null),(0,H.c)([(0,g.I)()],Q.prototype,"isRenderTarget",void 0)},12807:(D,h,o)=>{o.d(h,{b:()=>c});var H=o(12812),g=o(12815),j=o(12648),M=o(12831),R=o(12849),t=o(12793),S=o(12672),k=o(12722),K=o(12791),Q=o(12875),v=o(12702);function r(D,h){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const H=h.width,g=h.height;if(D instanceof Float32Array){let h=D.byteLength/D.BYTES_PER_ELEMENT;const o=new Uint8Array(h);for(;--h>=0;){let H=D[h];H<0?H=0:H>1&&(H=1),o[h]=255*H}D=o}const j=document.createElement("canvas");j.width=H,j.height=g;const M=j.getContext("2d");if(!M)return null;const R=M.createImageData(H,g);if(R.data.set(D),M.putImageData(R,0,0),o){const D=document.createElement("canvas");D.width=H,D.height=g;const h=D.getContext("2d");return h?(h.translate(0,g),h.scale(1,-1),h.drawImage(j,0,0),D.toDataURL("image/png")):null}return j.toDataURL("image/png")}function B(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const H=D.getInternalTexture();if(!H)return null;const g=D._readPixelsSync(h,o);return g?r(g,D.getSize(),H.invertY):null}async function s(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const H=D.getInternalTexture();if(!H)return null;const g=await D.readPixels(h,o);return g?r(g,D.getSize(),H.invertY):null}var U=o(12877),q=o(12860);class c extends R.e{static _CreateVideoTexture(D,h,o){arguments.length>5&&void 0!==arguments[5]||c.TRILINEAR_SAMPLINGMODE;throw(0,S.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(D){this._isBlocking=D}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(D,h,o,H){let g,M=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.TRILINEAR_SAMPLINGMODE,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,S=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,K=arguments.length>8&&void 0!==arguments[8]&&arguments[8],Q=arguments.length>9?arguments[9]:void 0,v=arguments.length>10?arguments[10]:void 0,r=arguments.length>11?arguments[11]:void 0,B=arguments.length>12?arguments[12]:void 0,s=arguments.length>13?arguments[13]:void 0;super(h),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new j.c,this._isBlocking=!0,this.name=D||"",this.url=D;let q=!1,y=null,b=!0;"object"===typeof o&&null!==o?(g=o.noMipmap??!1,H=o.invertY??!U.c,M=o.samplingMode??c.TRILINEAR_SAMPLINGMODE,R=o.X??null,t=o.onError??null,S=o.buffer??null,K=o.deleteBuffer??!1,Q=o.format,v=o.mimeType,r=o.loaderOptions,B=o.creationFlags,q=o.useSRGBBuffer??!1,y=o.internalTexture??null,b=o.gammaSpace??b,s=o.forcedExtension??s):g=!!o,this._gammaSpace=b,this._noMipmap=g,this._invertY=void 0===H?!U.c:H,this._initialSamplingMode=M,this._buffer=S,this._deleteBuffer=K,this._mimeType=v,this._loaderOptions=r,this._creationFlags=B,this._useSRGBBuffer=q,this._forcedExtension=s,void 0!==Q&&(this._format=Q);const i=this.GD(),G=this._getEngine();if(!G)return;G.onBeforeTextureInitObservable.notifyObservers(this);const N=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),R&&R(),!this.isBlocking&&i&&i.resetCachedMaterial()},J=(D,h)=>{this._loadingError=!0,this._errorObject={message:D,exception:h},t&&t(D,h),c.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!y)return this._delayedOnLoad=N,void(this._delayedOnError=J);if(this._texture=y??this._getFromCache(this.url,g,M,this._invertY,q,this.isCube),this._texture)if(this._texture.isReady)k.e.SetImmediate((()=>N()));else{const D=this._texture.onLoadedObservable.add(N);this._texture.onErrorObservable.add((h=>{var o;J(h.message,h.exception),null===(o=this._texture)||void 0===o||o.onLoadedObservable.remove(D)}))}else if(i&&i.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=N,this._delayedOnError=J;else{try{this._texture=G.createTexture(this.url,g,this._invertY,i,M,N,J,this._buffer,void 0,this._format,this._forcedExtension,v,r,B,q)}catch(O){throw J("error loading",O),O}K&&(this._buffer=null)}}updateURL(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,H=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.GD().markAllMaterialsAsDirty(1,(D=>D.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=D),this.url=D,this._buffer=h,this._forcedExtension=H,this.delayLoadState=4,o&&(this._delayedOnLoad=o),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const D=this.GD();D&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?k.e.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=D.getEngine().createTexture(this.url,this._noMipmap,this._invertY,D,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(D,h,o,H){D*=this._cachedUScale,h*=this._cachedVScale,D-=this.uRotationCenter*this._cachedUScale,h-=this.vRotationCenter*this._cachedVScale,o-=this.wRotationCenter,M.Gh.TransformCoordinatesFromFloatsToRef(D,h,o,this._rowGenerationMatrix,H),H.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,H.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,H.z+=this.wRotationCenter}getTextureMatrix(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*D===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*D,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=M.Matrix.Zero(),this._rowGenerationMatrix=new M.Matrix,this._t0=M.Gh.Zero(),this._t1=M.Gh.Zero(),this._t2=M.Gh.Zero()),M.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(M.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,M.TmpVectors.Matrix[0]),M.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,M.TmpVectors.Matrix[1]),M.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,M.TmpVectors.Matrix[2]),M.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,M.TmpVectors.Matrix[3]),M.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(M.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(M.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(M.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.zK(this._t0),this._t2.zK(this._t0),M.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const h=this.GD();if(!h)return this._cachedTextureMatrix;const o=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&o!==this._cachedIdentity3x2&&h.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const D=this.GD();if(!D)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==c.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===D.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=M.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=M.Matrix.Zero());const h=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case c.PLANAR_MODE:M.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case c.PROJECTION_MODE:{M.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const h=D.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=h.updateFlag,h.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:M.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return h&&D.markAllMaterialsAsDirty(1,(D=>D.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const D={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,X:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return q.d.Clone((()=>new c(this._texture?this._texture.url:null,this.GD(),D)),this)}serialize(){var D;const h=this.name;c.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const o=super.serialize(c._SerializeInternalTextureUniqueId);if(!o)return null;if(c.SerializeBuffers||c.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))o.base64String=this._buffer,o.name=o.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const D=this.mimeType||"image/png";o.base64String=`data:${D};base64,${(0,v.k)(this._buffer)}`}else(c.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(o.base64String=!this._engine||this._engine._features.supportSyncTextureRead?B(this):s(this));var H;(o.invertY=this._invertY,o.samplingMode=this.samplingMode,o._creationFlags=this._creationFlags,o._useSRGBBuffer=this._useSRGBBuffer,c._SerializeInternalTextureUniqueId)&&(o.internalTextureUniqueId=null===(H=this._texture)||void 0===H?void 0:H.uniqueId);return o.internalTextureLabel=null===(D=this._texture)||void 0===D?void 0:D.label,o.noMipmap=this._noMipmap,this.name=h,o}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(D,h,o){if(D.customType){const H=K.e.Instantiate(D.customType).Parse(D,h,o);return D.samplingMode&&H.updateSamplingMode&&H._samplingMode&&H._samplingMode!==D.samplingMode&&H.updateSamplingMode(D.samplingMode),H}if(D.isCube&&!D.isRenderTarget)return c._CubeTextureParser(D,h,o);const H=void 0!==D.internalTextureUniqueId;if(!D.name&&!D.isRenderTarget&&!H)return null;let g;if(H){const o=h.getEngine().getLoadedTexturesCache();for(const h of o)if(h.uniqueId===D.internalTextureUniqueId){g=h;break}}const j=h=>{if(h&&h._texture&&(h._texture._cachedWrapU=null,h._texture._cachedWrapV=null,h._texture._cachedWrapR=null),D.samplingMode){const o=D.samplingMode;h&&h.samplingMode!==o&&h.updateSamplingMode(o)}if(h&&D.animations)for(let o=0;o<D.animations.length;o++){const H=D.animations[o],g=(0,t.d)("BABYLON.Animation");g&&h.animations.push(g.Parse(H))}h&&h._texture&&(H&&!g&&h._texture._setUniqueId(D.internalTextureUniqueId),h._texture.label=D.internalTextureLabel)};return q.d.Parse((()=>{let H=!0;if(D.noMipmap&&(H=!1),D.mirrorPlane){const o=c._CreateMirror(D.name,D.renderTargetSize,h,H);return o._waitingRenderList=D.renderList,o.mirrorPlane=Q.b.Ih(D.mirrorPlane),j(o),o}if(D.isRenderTarget){let o=null;if(D.isCube){if(h.reflectionProbes)for(let H=0;H<h.reflectionProbes.length;H++){const o=h.reflectionProbes[H];if(o.name===D.name)return o.cubeTexture}}else o=c._CreateRenderTargetTexture(D.name,D.renderTargetSize,h,H,D._creationFlags??0),o._waitingRenderList=D.renderList;return j(o),o}if(D.isVideo){const g=c._CreateVideoTexture(o+(D.url||D.name),o+(D.src||D.url),h,H,D.invertY,D.samplingMode,D.settings||{});return j(g),g}{let M;if(D.base64String&&!g)M=c.CreateFromBase64String(D.base64String,D.base64String,h,!H,D.invertY,D.samplingMode,(()=>{j(M)}),D._creationFlags??0,D._useSRGBBuffer??!1),M.name=D.name;else{let R;R=D.name&&(D.name.indexOf("://")>0||D.name.startsWith("data:"))?D.name:o+D.name,D.url&&(D.url.startsWith("data:")||c.UseSerializedUrlIfAny)&&(R=D.url);const t={noMipmap:!H,invertY:D.invertY,samplingMode:D.samplingMode,X:()=>{j(M)},internalTexture:g};M=new c(R,h,t)}return M}}),D,h)}static CreateFromBase64String(D,h,o,H,g){let j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c.TRILINEAR_SAMPLINGMODE;return new c("data:"+h,o,H,g,j,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,D,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(D,h,o){let H=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4?arguments[4]:void 0,j=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],M=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.TRILINEAR_SAMPLINGMODE,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,S=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,k=arguments.length>10?arguments[10]:void 0,K=arguments.length>11?arguments[11]:void 0;return"data:"!==D.substring(0,5)&&(D="data:"+D),new c(D,o,g,j,M,R,t,h,H,S,void 0,void 0,k,K)}}c.SerializeBuffers=!0,c.ForceSerializeBuffers=!1,c.OnTextureLoadErrorObservable=new j.c,c._SerializeInternalTextureUniqueId=!1,c._CubeTextureParser=(D,h,o)=>{throw(0,S.e)("CubeTexture")},c._CreateMirror=(D,h,o,H)=>{throw(0,S.e)("MirrorTexture")},c._CreateRenderTargetTexture=(D,h,o,H,g)=>{throw(0,S.e)("RenderTargetTexture")},c.NEAREST_SAMPLINGMODE=1,c.NEAREST_NEAREST_MIPLINEAR=8,c.BILINEAR_SAMPLINGMODE=2,c.LINEAR_LINEAR_MIPNEAREST=11,c.TRILINEAR_SAMPLINGMODE=3,c.LINEAR_LINEAR_MIPLINEAR=3,c.NEAREST_NEAREST_MIPNEAREST=4,c.NEAREST_LINEAR_MIPNEAREST=5,c.NEAREST_LINEAR_MIPLINEAR=6,c.NEAREST_LINEAR=7,c.NEAREST_NEAREST=1,c.LINEAR_NEAREST_MIPNEAREST=9,c.LINEAR_NEAREST_MIPLINEAR=10,c.LINEAR_LINEAR=2,c.LINEAR_NEAREST=12,c.EXPLICIT_MODE=0,c.SPHERICAL_MODE=1,c.PLANAR_MODE=2,c.CUBIC_MODE=3,c.PROJECTION_MODE=4,c.SKYBOX_MODE=5,c.INVCUBIC_MODE=6,c.EQUIRECTANGULAR_MODE=7,c.FIXED_EQUIRECTANGULAR_MODE=8,c.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,c.CLAMP_ADDRESSMODE=0,c.WRAP_ADDRESSMODE=1,c.MIRROR_ADDRESSMODE=2,c.UseSerializedUrlIfAny=!1,(0,H.c)([(0,g.I)()],c.prototype,"url",void 0),(0,H.c)([(0,g.I)()],c.prototype,"uOffset",void 0),(0,H.c)([(0,g.I)()],c.prototype,"vOffset",void 0),(0,H.c)([(0,g.I)()],c.prototype,"uScale",void 0),(0,H.c)([(0,g.I)()],c.prototype,"vScale",void 0),(0,H.c)([(0,g.I)()],c.prototype,"uAng",void 0),(0,H.c)([(0,g.I)()],c.prototype,"vAng",void 0),(0,H.c)([(0,g.I)()],c.prototype,"wAng",void 0),(0,H.c)([(0,g.I)()],c.prototype,"uRotationCenter",void 0),(0,H.c)([(0,g.I)()],c.prototype,"vRotationCenter",void 0),(0,H.c)([(0,g.I)()],c.prototype,"wRotationCenter",void 0),(0,H.c)([(0,g.I)()],c.prototype,"homogeneousRotationInUVTransform",void 0),(0,H.c)([(0,g.I)()],c.prototype,"isBlocking",null),(0,t.g)("BABYLON.Texture",c),q.d._TextureParser=c.Parse},12875:(D,h,o)=>{o.d(h,{b:()=>g});var H=o(12831);class g{constructor(D,h,o,g){this.normal=new H.Gh(D,h,o),this.d=g}Fh(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new g(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let D=this.normal.getHashCode();return D=397*D^this.d,D}normalize(){const D=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let h=0;return 0!==D&&(h=1/D),this.normal.x*=h,this.normal.y*=h,this.normal.z*=h,this.d*=h,this}transform(D){const h=g._TmpMatrix;D.invertToRef(h);const o=h.m,H=this.normal.x,j=this.normal.y,M=this.normal.z,R=this.d,t=H*o[0]+j*o[1]+M*o[2]+R*o[3],S=H*o[4]+j*o[5]+M*o[6]+R*o[7],k=H*o[8]+j*o[9]+M*o[10]+R*o[11],K=H*o[12]+j*o[13]+M*o[14]+R*o[15];return new g(t,S,k,K)}dotCoordinate(D){return this.normal.x*D.x+this.normal.y*D.y+this.normal.z*D.z+this.d}copyFromPoints(D,h,o){const H=h.x-D.x,g=h.y-D.y,j=h.z-D.z,M=o.x-D.x,R=o.y-D.y,t=o.z-D.z,S=g*t-j*R,k=j*M-H*t,K=H*R-g*M,Q=Math.sqrt(S*S+k*k+K*K);let v;return v=0!==Q?1/Q:0,this.normal.x=S*v,this.normal.y=k*v,this.normal.z=K*v,this.d=-(this.normal.x*D.x+this.normal.y*D.y+this.normal.z*D.z),this}isFrontFacingTo(D,h){return H.Gh.Dot(this.normal,D)<=h}signedDistanceTo(D){return H.Gh.Dot(D,this.normal)+this.d}static Ih(D){return new g(D[0],D[1],D[2],D[3])}static FromPoints(D,h,o){const H=new g(0,0,0,0);return H.copyFromPoints(D,h,o),H}static FromPositionAndNormal(D,h){const o=new g(0,0,0,0);return this.FromPositionAndNormalToRef(D,h,o)}static FromPositionAndNormalToRef(D,h,o){return o.normal.M(h),o.normal.normalize(),o.d=-D.dot(o.normal),o}static SignedDistanceToPlaneFromPositionAndNormal(D,h,o){const g=-(h.x*D.x+h.y*D.y+h.z*D.z);return H.Gh.Dot(o,h)+g}}g._TmpMatrix=H.Matrix.Identity()},12851:(D,h,o)=>{o.d(h,{d:()=>H});class H{constructor(D,h){this.width=D,this.height=h}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let D=0|this.width;return D=397*D^this.height,D}M(D){this.width=D.width,this.height=D.height}Qg(D,h){return this.width=D,this.height=h,this}set(D,h){return this.Qg(D,h)}multiplyByFloats(D,h){return new H(this.width*D,this.height*h)}clone(){return new H(this.width,this.height)}equals(D){return!!D&&(this.width===D.width&&this.height===D.height)}get surface(){return this.width*this.height}static Zero(){return new H(0,0)}add(D){return new H(this.width+D.width,this.height+D.height)}Nh(D){return new H(this.width-D.width,this.height-D.height)}scale(D){return new H(this.width*D,this.height*D)}static Lerp(D,h,o){const g=D.width+(h.width-D.width)*o,j=D.height+(h.height-D.height)*o;return new H(g,j)}}},12824:(D,h,o)=>{o.d(h,{e:()=>j,h:()=>M});const H={},g={};function j(D){const h=D.getClassName();return g[h]||(g[h]={}),g[h]}function M(D){const h=D.getClassName();if(H[h])return H[h];H[h]={};const o=H[h];let j=D,M=h;for(;M;){const D=g[M];for(const g in D)o[g]=D[g];let h,H=!1;do{if(h=Object.getPrototypeOf(j),!h.getClassName){H=!0;break}if(h.getClassName()!==M)break;j=h}while(h);if(H)break;M=h.getClassName(),j=h}return o}},12815:(D,h,o)=>{o.d(h,{C:()=>R,F:()=>k,H:()=>K,I:()=>M,b:()=>j,d:()=>q,g:()=>v,j:()=>t,k:()=>r,m:()=>S,q:()=>B,u:()=>U,w:()=>Q,y:()=>s});var H=o(12824);function g(D,h){return(o,g)=>{const j=(0,H.e)(o);j[g]||(j[g]={type:D,sourceName:h})}}function j(D){return function(D){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(o,H)=>{const g=h||"_"+H;Object.defineProperty(o,H,{get:function(){return this[g]},set:function(h){var H;"function"===typeof(null===(H=this[g])||void 0===H?void 0:H.equals)&&this[g].equals(h)||this[g]!==h&&(this[g]=h,o[D].apply(this))},enumerable:!0,configurable:!0})}}(D,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function M(D){return g(0,D)}function R(D){return g(1,D)}function t(D){return g(2,D)}function S(D){return g(3,D)}function k(D){return g(4,D)}function K(D){return g(5,D)}function Q(D){return g(6,D)}function v(D){return g(7,D)}function r(D){return g(8,D)}function B(D){return g(9,D)}function s(D){return g(10,D)}function U(D){return g(12,D)}function q(D,h,o,H){const g=o.value;o.value=function(){let o=g;if("undefined"!==typeof _native&&_native[h]){const D=_native[h];o=H?function(){return H(...arguments)?D(...arguments):g(...arguments)}:D}return D[h]=o,o(...arguments)}}q.filter=function(D){return(h,o,H)=>q(h,o,H,D)}},12860:(D,h,o)=>{o.d(h,{d:()=>S});var H=o(12672),g=o(12864),j=o(12870),M=o(12831),R=o(12824);const t=function(D,h,o){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const j=D();g.b&&g.b.HasTags(h)&&g.b.AddTagsTo(j,g.b.GetTags(h,!0));const M=(0,R.h)(j),t={};for(const g in M){const D=M[g],R=h[g],k=D.type;if(void 0!==R&&null!==R&&("uniqueId"!==g||S.AllowLoadingUniqueId))switch(k){case 0:case 6:case 9:case 11:j[g]=R;break;case 1:H.cloneTexturesOnlyOnce&&t[R.uniqueId]?j[g]=t[R.uniqueId]:(j[g]=o||R.isRenderTarget?R:R.clone(),t[R.uniqueId]=j[g]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:j[g]=o?R:R.clone()}}return j};class S{static AppendSerializedAnimations(D,h){if(D.animations){h.animations=[];for(let o=0;o<D.animations.length;o++){const H=D.animations[o];h.animations.push(H.serialize())}}}static Serialize(D,h){h||(h={}),g.b&&(h.tags=g.b.GetTags(D));const o=(0,R.h)(D);for(const H in o){const g=o[H],j=g.sourceName||H,M=g.type,R=D[H];if(void 0!==R&&null!==R&&("uniqueId"!==H||S.AllowLoadingUniqueId))switch(M){case 0:h[j]=R;break;case 1:case 3:case 7:case 9:h[j]=R.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:h[j]=R.Fh();break;case 6:case 11:h[j]=R.id}}return h}static ParseProperties(D,h,o,H){H||(H="");const g=(0,R.h)(h);for(const R in g){const t=g[R],k=D[t.sourceName||R],K=t.type;if(void 0!==k&&null!==k&&("uniqueId"!==R||S.AllowLoadingUniqueId)){const D=h;switch(K){case 0:D[R]=k;break;case 1:o&&(D[R]=S._TextureParser(k,o,H));break;case 2:D[R]=j.mo.Ih(k);break;case 3:D[R]=S._FresnelParametersParser(k);break;case 4:D[R]=M.Vector2.Ih(k);break;case 5:D[R]=M.Gh.Ih(k);break;case 6:o&&(D[R]=o.getLastMeshById(k));break;case 7:D[R]=S._ColorCurvesParser(k);break;case 8:D[R]=j.yg.Ih(k);break;case 9:D[R]=S._ImageProcessingConfigurationParser(k);break;case 10:D[R]=M.Quaternion.Ih(k);break;case 11:o&&(D[R]=o.getCameraById(k));break;case 12:D[R]=M.Matrix.Ih(k)}}}}static Parse(D,h,o){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const j=D();return g.b&&g.b.AddTagsTo(j,h.tags),S.ParseProperties(h,j,o,H),j}static Clone(D,h){return t(D,h,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(D,h){return t(D,h,!0)}}S.AllowLoadingUniqueId=!1,S._ImageProcessingConfigurationParser=D=>{throw(0,H.e)("ImageProcessingConfiguration")},S._FresnelParametersParser=D=>{throw(0,H.e)("FresnelParameters")},S._ColorCurvesParser=D=>{throw(0,H.e)("ColorCurves")},S._TextureParser=(D,h,o)=>{throw(0,H.e)("Texture")}},12864:(D,h,o)=>{o.d(h,{b:()=>g});class H{static Eval(D,h){return"true"===(D=D.match(/\([^()]*\)/g)?D.replace(/\([^()]*\)/g,(D=>(D=D.slice(1,D.length-1),H._HandleParenthesisContent(D,h)))):H._HandleParenthesisContent(D,h))||"false"!==D&&H.Eval(D,h)}static _HandleParenthesisContent(D,h){let o;h=h||(D=>"true"===D);const g=D.split("||");for(const j in g)if(Object.prototype.hasOwnProperty.call(g,j)){let D=H._SimplifyNegation(g[j].trim());const M=D.split("&&");if(M.length>1)for(let g=0;g<M.length;++g){const j=H._SimplifyNegation(M[g].trim());if(o="true"!==j&&"false"!==j?"!"===j[0]?!h(j.substring(1)):h(j):"true"===j,!o){D="false";break}}if(o||"true"===D){o=!0;break}o="true"!==D&&"false"!==D?"!"===D[0]?!h(D.substring(1)):h(D):"true"===D}return o?"true":"false"}static _SimplifyNegation(D){return"!true"===(D=(D=D.replace(/^[\s!]+/,(D=>(D=D.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?D="false":"!false"===D&&(D="true"),D}}class g{static EnableFor(D){D._tags=D._tags||{},D.hasTags=()=>g.HasTags(D),D.addTags=h=>g.AddTagsTo(D,h),D.removeTags=h=>g.RemoveTagsFrom(D,h),D.matchesTagsQuery=h=>g.MatchesQuery(D,h)}static DisableFor(D){delete D._tags,delete D.hasTags,delete D.addTags,delete D.removeTags,delete D.matchesTagsQuery}static HasTags(D){if(!D._tags)return!1;const h=D._tags;for(const o in h)if(Object.prototype.hasOwnProperty.call(h,o))return!0;return!1}static GetTags(D){let h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!D._tags)return null;if(h){const h=[];for(const o in D._tags)Object.prototype.hasOwnProperty.call(D._tags,o)&&!0===D._tags[o]&&h.push(o);return h.join(" ")}return D._tags}static AddTagsTo(D,h){if(!h)return;if("string"!==typeof h)return;const o=h.split(" ");for(const H of o)g._AddTagTo(D,H)}static _AddTagTo(D,h){""!==(h=h.trim())&&"true"!==h&&"false"!==h&&(h.match(/[\s]/)||h.match(/^([!]|([|]|[&]){2})/)||(g.EnableFor(D),D._tags[h]=!0))}static RemoveTagsFrom(D,h){if(!g.HasTags(D))return;const o=h.split(" ");for(const H in o)g._RemoveTagFrom(D,o[H])}static _RemoveTagFrom(D,h){delete D._tags[h]}static MatchesQuery(D,h){return void 0===h||(""===h?g.HasTags(D):H.Eval(h,(h=>g.HasTags(D)&&D._tags[h])))}}},12812:(D,h,o)=>{o.d(h,{c:()=>H});function H(D,h,o,H){var g,j=arguments.length,M=j<3?h:null===H?H=Object.getOwnPropertyDescriptor(h,o):H;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)M=Reflect.decorate(D,h,o,H);else for(var R=D.length-1;R>=0;R--)(g=D[R])&&(M=(j<3?g(M):j>3?g(h,o,M):g(h,o))||M);return j>3&&M&&Object.defineProperty(h,o,M),M}Object.create;Object.create}}]);