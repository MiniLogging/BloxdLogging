"use strict";(self.u4k1rqylno=self.u4k1rqylno||[]).push([[13],{11800:(e,E,H)=>{H.d(E,{c:()=>N});let N=!1},11765:(e,E,H)=>{H.d(E,{c:()=>V});var N=H(11717),u=H(11723),z=H(11541),P=H(11738),M=H(11579),D=H(11693),A=(H(11587),H(11774));class C{get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(e){this._texture&&(this._texture.isCube=e)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(e){return void 0!==(null===e||void 0===e?void 0:e.shareDepth)}constructor(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=A.e.Zero(),this._cachedBaseSize=A.e.Zero(),this._initialSamplingMode=2,this._texture=C._IsRenderTargetWrapper(e)?e.texture:e,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(e){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var i=H(11776);class V extends C{set zM(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get zM(){return this._hasAlpha}set getAlphaFromRGB(e){this._getAlphaFromRGB!==e&&(this._getAlphaFromRGB=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(e){this._coordinatesIndex!==e&&(this._coordinatesIndex=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(e){this._texture?this._texture.isCube=e:this._isCube=e}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(e){var E;if(this._texture){if(this._texture._gammaSpace===e)return;this._texture._gammaSpace=e}else{if(this._gammaSpace===e)return;this._gammaSpace=e}null===(E=this.fe())||void 0===E||E.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(e){var E;e!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=e),null===(E=this.fe())||void 0===E||E.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(e){this._texture&&(this._texture._lodGenerationOffset=e)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(e){this._texture&&(this._texture._lodGenerationScale=e)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(e){this._texture&&(this._texture._linearSpecularLOD=e)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(e){this._texture&&(this._texture._irradianceTexture=e)}get uid(){return this._uid||(this._uid=(0,D.e)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(e){this._onDisposeObserver&&this.cP.remove(this._onDisposeObserver),this._onDisposeObserver=this.cP.add(e)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(e){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.cP=new z.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,e?V._IsScene(e)?this._scene=e:this._engine=e:this._scene=M.d.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=E,this._uid=null}fe(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return P.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return P.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(e){}get canRescale(){return!1}_getFromCache(e,E,H,N,u,z){const P=this._getEngine();if(!P)return null;const M=P._getUseSRGBBuffer(!!u,E),D=P.getLoadedTexturesCache();for(let A=0;A<D.length;A++){const P=D[A];if((void 0===u||M===P._useSRGBBuffer)&&(void 0===N||N===P.invertY)&&P.url===e&&P.generateMipMaps===!E&&(!H||H===P.samplingMode)&&(void 0===z||z===P.isCube))return P.incrementReferences(),P}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const e=this.fe();e&&e.markAllMaterialsAsDirty(1)}readPixels(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,N=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,D=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const A=this._getEngine();if(!A)return null;const C=this.getSize();let i=C.width,V=C.height;0!==E&&(i/=Math.pow(2,E),V/=Math.pow(2,E),i=Math.round(i),V=Math.round(V)),M=Math.min(i,M),D=Math.min(V,D);try{return this._texture.isCube?A._readTexturePixels(this._texture,M,D,e,E,H,N,u,z,P):A._readTexturePixels(this._texture,M,D,-1,E,H,N,u,z,P)}catch(U){return null}}_readPixelsSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,N=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const z=this.getSize();let P=z.width,M=z.height;const D=this._getEngine();if(!D)return null;0!=E&&(P/=Math.pow(2,E),M/=Math.pow(2,E),P=Math.round(P),M=Math.round(M));try{return this._texture.isCube?D._readTexturePixelsSync(this._texture,P,M,e,E,H,N,u):D._readTexturePixelsSync(this._texture,P,M,-1,E,H,N,u)}catch(A){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const e=this._scene.textures.indexOf(this);if(e>=0&&this._scene.textures.splice(e,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const e=this._parentContainer.textures.indexOf(this);e>-1&&this._parentContainer.textures.splice(e,1),this._parentContainer=null}}this.cP.notifyObservers(this),this.cP.clear(),this.metadata=null,super.dispose()}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!e)return null;const E=i.d.Serialize(this);return i.d.AppendSerializedAnimations(this,E),E}static WhenAllReady(e,E){let H=e.length;if(0!==H)for(let N=0;N<e.length;N++){const u=e[N];if(u.isReady())0===--H&&E();else{const e=u.onLoadObservable;e?e.addOnce((()=>{0===--H&&E()})):0===--H&&E()}}else E()}static _IsScene(e){return"Scene"===e.getClassName()}}V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,N.e)([(0,u.S)()],V.prototype,"uniqueId",void 0),(0,N.e)([(0,u.S)()],V.prototype,"name",void 0),(0,N.e)([(0,u.S)()],V.prototype,"displayName",void 0),(0,N.e)([(0,u.S)()],V.prototype,"metadata",void 0),(0,N.e)([(0,u.S)("zM")],V.prototype,"_hasAlpha",void 0),(0,N.e)([(0,u.S)("getAlphaFromRGB")],V.prototype,"_getAlphaFromRGB",void 0),(0,N.e)([(0,u.S)()],V.prototype,"level",void 0),(0,N.e)([(0,u.S)("coordinatesIndex")],V.prototype,"_coordinatesIndex",void 0),(0,N.e)([(0,u.S)()],V.prototype,"optimizeUVAllocation",void 0),(0,N.e)([(0,u.S)("coordinatesMode")],V.prototype,"_coordinatesMode",void 0),(0,N.e)([(0,u.S)()],V.prototype,"wrapU",null),(0,N.e)([(0,u.S)()],V.prototype,"wrapV",null),(0,N.e)([(0,u.S)()],V.prototype,"wrapR",void 0),(0,N.e)([(0,u.S)()],V.prototype,"anisotropicFilteringLevel",void 0),(0,N.e)([(0,u.S)()],V.prototype,"isCube",null),(0,N.e)([(0,u.S)()],V.prototype,"is3D",null),(0,N.e)([(0,u.S)()],V.prototype,"is2DArray",null),(0,N.e)([(0,u.S)()],V.prototype,"gammaSpace",null),(0,N.e)([(0,u.S)()],V.prototype,"invertZ",void 0),(0,N.e)([(0,u.S)()],V.prototype,"lodLevelInAlpha",void 0),(0,N.e)([(0,u.S)()],V.prototype,"lodGenerationOffset",null),(0,N.e)([(0,u.S)()],V.prototype,"lodGenerationScale",null),(0,N.e)([(0,u.S)()],V.prototype,"linearSpecularLOD",null),(0,N.e)([(0,u.H)()],V.prototype,"irradianceTexture",null),(0,N.e)([(0,u.S)()],V.prototype,"isRenderTarget",void 0)},11712:(e,E,H)=>{H.d(E,{b:()=>a});var N=H(11717),u=H(11723),z=H(11541),P=H(11738),M=H(11765),D=H(11690),A=H(11565),C=H(11611),i=H(11681),V=H(11796),U=H(11598);function j(e,E){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const N=E.width,u=E.height;if(e instanceof Float32Array){let E=e.byteLength/e.BYTES_PER_ELEMENT;const H=new Uint8Array(E);for(;--E>=0;){let N=e[E];N<0?N=0:N>1&&(N=1),H[E]=255*N}e=H}const z=document.createElement("canvas");z.width=N,z.height=u;const P=z.getContext("2d");if(!P)return null;const M=P.createImageData(N,u);if(M.data.set(e),P.putImageData(M,0,0),H){const e=document.createElement("canvas");e.width=N,e.height=u;const E=e.getContext("2d");return E?(E.translate(0,u),E.scale(1,-1),E.drawImage(z,0,0),e.toDataURL("image/png")):null}return z.toDataURL("image/png")}function F(e){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const N=e.getInternalTexture();if(!N)return null;const u=e._readPixelsSync(E,H);return u?j(u,e.getSize(),N.invertY):null}async function h(e){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const N=e.getInternalTexture();if(!N)return null;const u=await e.readPixels(E,H);return u?j(u,e.getSize(),N.invertY):null}var S=H(11800),X=H(11776);class a extends M.c{static _CreateVideoTexture(e,E,H){arguments.length>5&&void 0!==arguments[5]||a.TRILINEAR_SAMPLINGMODE;throw(0,A.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(e){this._isBlocking=e}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(e,E,H,N){let u,P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TRILINEAR_SAMPLINGMODE,M=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,D=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,A=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,i=arguments.length>8&&void 0!==arguments[8]&&arguments[8],V=arguments.length>9?arguments[9]:void 0,U=arguments.length>10?arguments[10]:void 0,j=arguments.length>11?arguments[11]:void 0,F=arguments.length>12?arguments[12]:void 0,h=arguments.length>13?arguments[13]:void 0;super(E),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new z.d,this._isBlocking=!0,this.name=e||"",this.url=e;let X=!1,W=null,r=!0;"object"===typeof H&&null!==H?(u=H.noMipmap??!1,N=H.invertY??!S.c,P=H.samplingMode??a.TRILINEAR_SAMPLINGMODE,M=H.I??null,D=H.onError??null,A=H.buffer??null,i=H.deleteBuffer??!1,V=H.format,U=H.mimeType,j=H.loaderOptions,F=H.creationFlags,X=H.useSRGBBuffer??!1,W=H.internalTexture??null,r=H.gammaSpace??r,h=H.forcedExtension??h):u=!!H,this._gammaSpace=r,this._noMipmap=u,this._invertY=void 0===N?!S.c:N,this._initialSamplingMode=P,this._buffer=A,this._deleteBuffer=i,this._mimeType=U,this._loaderOptions=j,this._creationFlags=F,this._useSRGBBuffer=X,this._forcedExtension=h,void 0!==V&&(this._format=V);const Y=this.fe(),f=this._getEngine();if(!f)return;f.onBeforeTextureInitObservable.notifyObservers(this);const w=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),M&&M(),!this.isBlocking&&Y&&Y.resetCachedMaterial()},s=(e,E)=>{this._loadingError=!0,this._errorObject={message:e,exception:E},D&&D(e,E),a.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!W)return this._delayedOnLoad=w,void(this._delayedOnError=s);if(this._texture=W??this._getFromCache(this.url,u,P,this._invertY,X,this.isCube),this._texture)if(this._texture.isReady)C.e.SetImmediate((()=>w()));else{const e=this._texture.onLoadedObservable.add(w);this._texture.onErrorObservable.add((E=>{var H;s(E.message,E.exception),null===(H=this._texture)||void 0===H||H.onLoadedObservable.remove(e)}))}else if(Y&&Y.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=w,this._delayedOnError=s;else{try{this._texture=f.createTexture(this.url,u,this._invertY,Y,P,w,s,this._buffer,void 0,this._format,this._forcedExtension,U,j,F,X)}catch(p){throw s("error loading",p),p}i&&(this._buffer=null)}}updateURL(e){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,H=arguments.length>2?arguments[2]:void 0,N=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.fe().markAllMaterialsAsDirty(1,(e=>e.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=e),this.url=e,this._buffer=E,this._forcedExtension=N,this.delayLoadState=4,H&&(this._delayedOnLoad=H),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const e=this.fe();e&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?C.e.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=e.getEngine().createTexture(this.url,this._noMipmap,this._invertY,e,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(e,E,H,N){e*=this._cachedUScale,E*=this._cachedVScale,e-=this.uRotationCenter*this._cachedUScale,E-=this.vRotationCenter*this._cachedVScale,H-=this.wRotationCenter,P.jE.TransformCoordinatesFromFloatsToRef(e,E,H,this._rowGenerationMatrix,N),N.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,N.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,N.z+=this.wRotationCenter}getTextureMatrix(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*e===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*e,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=P.Matrix.Zero(),this._rowGenerationMatrix=new P.Matrix,this._t0=P.jE.Zero(),this._t1=P.jE.Zero(),this._t2=P.jE.Zero()),P.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(P.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,P.TmpVectors.Matrix[0]),P.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,P.TmpVectors.Matrix[1]),P.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,P.TmpVectors.Matrix[2]),P.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,P.TmpVectors.Matrix[3]),P.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(P.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(P.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(P.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.JC(this._t0),this._t2.JC(this._t0),P.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const E=this.fe();if(!E)return this._cachedTextureMatrix;const H=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&H!==this._cachedIdentity3x2&&E.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const e=this.fe();if(!e)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==a.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===e.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=P.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=P.Matrix.Zero());const E=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case a.PLANAR_MODE:P.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case a.PROJECTION_MODE:{P.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const E=e.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=E.updateFlag,E.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:P.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return E&&e.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const e={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,I:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return X.d.Clone((()=>new a(this._texture?this._texture.url:null,this.fe(),e)),this)}serialize(){var e;const E=this.name;a.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const H=super.serialize(a._SerializeInternalTextureUniqueId);if(!H)return null;if(a.SerializeBuffers||a.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))H.base64String=this._buffer,H.name=H.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const e=this.mimeType||"image/png";H.base64String=`data:${e};base64,${(0,U.k)(this._buffer)}`}else(a.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(H.base64String=!this._engine||this._engine._features.supportSyncTextureRead?F(this):h(this));var N;(H.invertY=this._invertY,H.samplingMode=this.samplingMode,H._creationFlags=this._creationFlags,H._useSRGBBuffer=this._useSRGBBuffer,a._SerializeInternalTextureUniqueId)&&(H.internalTextureUniqueId=null===(N=this._texture)||void 0===N?void 0:N.uniqueId);return H.internalTextureLabel=null===(e=this._texture)||void 0===e?void 0:e.label,H.noMipmap=this._noMipmap,this.name=E,H}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(e,E,H){if(e.customType){const N=i.b.Instantiate(e.customType).Parse(e,E,H);return e.samplingMode&&N.updateSamplingMode&&N._samplingMode&&N._samplingMode!==e.samplingMode&&N.updateSamplingMode(e.samplingMode),N}if(e.isCube&&!e.isRenderTarget)return a._CubeTextureParser(e,E,H);const N=void 0!==e.internalTextureUniqueId;if(!e.name&&!e.isRenderTarget&&!N)return null;let u;if(N){const H=E.getEngine().getLoadedTexturesCache();for(const E of H)if(E.uniqueId===e.internalTextureUniqueId){u=E;break}}const z=E=>{if(E&&E._texture&&(E._texture._cachedWrapU=null,E._texture._cachedWrapV=null,E._texture._cachedWrapR=null),e.samplingMode){const H=e.samplingMode;E&&E.samplingMode!==H&&E.updateSamplingMode(H)}if(E&&e.animations)for(let H=0;H<e.animations.length;H++){const N=e.animations[H],u=(0,D.e)("BABYLON.Animation");u&&E.animations.push(u.Parse(N))}E&&E._texture&&(N&&!u&&E._texture._setUniqueId(e.internalTextureUniqueId),E._texture.label=e.internalTextureLabel)};return X.d.Parse((()=>{let N=!0;if(e.noMipmap&&(N=!1),e.mirrorPlane){const H=a._CreateMirror(e.name,e.renderTargetSize,E,N);return H._waitingRenderList=e.renderList,H.mirrorPlane=V.b.aE(e.mirrorPlane),z(H),H}if(e.isRenderTarget){let H=null;if(e.isCube){if(E.reflectionProbes)for(let N=0;N<E.reflectionProbes.length;N++){const H=E.reflectionProbes[N];if(H.name===e.name)return H.cubeTexture}}else H=a._CreateRenderTargetTexture(e.name,e.renderTargetSize,E,N,e._creationFlags??0),H._waitingRenderList=e.renderList;return z(H),H}if(e.isVideo){const u=a._CreateVideoTexture(H+(e.url||e.name),H+(e.src||e.url),E,N,e.invertY,e.samplingMode,e.settings||{});return z(u),u}{let P;if(e.base64String&&!u)P=a.CreateFromBase64String(e.base64String,e.base64String,E,!N,e.invertY,e.samplingMode,(()=>{z(P)}),e._creationFlags??0,e._useSRGBBuffer??!1),P.name=e.name;else{let M;M=e.name&&(e.name.indexOf("://")>0||e.name.startsWith("data:"))?e.name:H+e.name,e.url&&(e.url.startsWith("data:")||a.UseSerializedUrlIfAny)&&(M=e.url);const D={noMipmap:!N,invertY:e.invertY,samplingMode:e.samplingMode,I:()=>{z(P)},internalTexture:u};P=new a(M,E,D)}return P}}),e,E)}static CreateFromBase64String(e,E,H,N,u){let z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.TRILINEAR_SAMPLINGMODE;return new a("data:"+E,H,N,u,z,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,e,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(e,E,H){let N=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4?arguments[4]:void 0,z=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],P=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.TRILINEAR_SAMPLINGMODE,M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,D=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,A=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,C=arguments.length>10?arguments[10]:void 0,i=arguments.length>11?arguments[11]:void 0;return"data:"!==e.substring(0,5)&&(e="data:"+e),new a(e,H,u,z,P,M,D,E,N,A,void 0,void 0,C,i)}}a.SerializeBuffers=!0,a.ForceSerializeBuffers=!1,a.OnTextureLoadErrorObservable=new z.d,a._SerializeInternalTextureUniqueId=!1,a._CubeTextureParser=(e,E,H)=>{throw(0,A.b)("CubeTexture")},a._CreateMirror=(e,E,H,N)=>{throw(0,A.b)("MirrorTexture")},a._CreateRenderTargetTexture=(e,E,H,N,u)=>{throw(0,A.b)("RenderTargetTexture")},a.NEAREST_SAMPLINGMODE=1,a.NEAREST_NEAREST_MIPLINEAR=8,a.BILINEAR_SAMPLINGMODE=2,a.LINEAR_LINEAR_MIPNEAREST=11,a.TRILINEAR_SAMPLINGMODE=3,a.LINEAR_LINEAR_MIPLINEAR=3,a.NEAREST_NEAREST_MIPNEAREST=4,a.NEAREST_LINEAR_MIPNEAREST=5,a.NEAREST_LINEAR_MIPLINEAR=6,a.NEAREST_LINEAR=7,a.NEAREST_NEAREST=1,a.LINEAR_NEAREST_MIPNEAREST=9,a.LINEAR_NEAREST_MIPLINEAR=10,a.LINEAR_LINEAR=2,a.LINEAR_NEAREST=12,a.EXPLICIT_MODE=0,a.SPHERICAL_MODE=1,a.PLANAR_MODE=2,a.CUBIC_MODE=3,a.PROJECTION_MODE=4,a.SKYBOX_MODE=5,a.INVCUBIC_MODE=6,a.EQUIRECTANGULAR_MODE=7,a.FIXED_EQUIRECTANGULAR_MODE=8,a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,a.CLAMP_ADDRESSMODE=0,a.WRAP_ADDRESSMODE=1,a.MIRROR_ADDRESSMODE=2,a.UseSerializedUrlIfAny=!1,(0,N.e)([(0,u.S)()],a.prototype,"url",void 0),(0,N.e)([(0,u.S)()],a.prototype,"uOffset",void 0),(0,N.e)([(0,u.S)()],a.prototype,"vOffset",void 0),(0,N.e)([(0,u.S)()],a.prototype,"uScale",void 0),(0,N.e)([(0,u.S)()],a.prototype,"vScale",void 0),(0,N.e)([(0,u.S)()],a.prototype,"uAng",void 0),(0,N.e)([(0,u.S)()],a.prototype,"vAng",void 0),(0,N.e)([(0,u.S)()],a.prototype,"wAng",void 0),(0,N.e)([(0,u.S)()],a.prototype,"uRotationCenter",void 0),(0,N.e)([(0,u.S)()],a.prototype,"vRotationCenter",void 0),(0,N.e)([(0,u.S)()],a.prototype,"wRotationCenter",void 0),(0,N.e)([(0,u.S)()],a.prototype,"homogeneousRotationInUVTransform",void 0),(0,N.e)([(0,u.S)()],a.prototype,"isBlocking",null),(0,D.g)("BABYLON.Texture",a),X.d._TextureParser=a.Parse},11796:(e,E,H)=>{H.d(E,{b:()=>u});var N=H(11738);class u{constructor(e,E,H,u){this.normal=new N.jE(e,E,H),this.d=u}uM(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new u(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let e=this.normal.getHashCode();return e=397*e^this.d,e}normalize(){const e=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let E=0;return 0!==e&&(E=1/e),this.normal.x*=E,this.normal.y*=E,this.normal.z*=E,this.d*=E,this}transform(e){const E=u._TmpMatrix;e.invertToRef(E);const H=E.m,N=this.normal.x,z=this.normal.y,P=this.normal.z,M=this.d,D=N*H[0]+z*H[1]+P*H[2]+M*H[3],A=N*H[4]+z*H[5]+P*H[6]+M*H[7],C=N*H[8]+z*H[9]+P*H[10]+M*H[11],i=N*H[12]+z*H[13]+P*H[14]+M*H[15];return new u(D,A,C,i)}dotCoordinate(e){return this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z+this.d}copyFromPoints(e,E,H){const N=E.x-e.x,u=E.y-e.y,z=E.z-e.z,P=H.x-e.x,M=H.y-e.y,D=H.z-e.z,A=u*D-z*M,C=z*P-N*D,i=N*M-u*P,V=Math.sqrt(A*A+C*C+i*i);let U;return U=0!==V?1/V:0,this.normal.x=A*U,this.normal.y=C*U,this.normal.z=i*U,this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),this}isFrontFacingTo(e,E){return N.jE.Dot(this.normal,e)<=E}signedDistanceTo(e){return N.jE.Dot(e,this.normal)+this.d}static aE(e){return new u(e[0],e[1],e[2],e[3])}static FromPoints(e,E,H){const N=new u(0,0,0,0);return N.copyFromPoints(e,E,H),N}static FromPositionAndNormal(e,E){const H=new u(0,0,0,0);return this.FromPositionAndNormalToRef(e,E,H)}static FromPositionAndNormalToRef(e,E,H){return H.normal.P(E),H.normal.normalize(),H.d=-e.dot(H.normal),H}static SignedDistanceToPlaneFromPositionAndNormal(e,E,H){const u=-(E.x*e.x+E.y*e.y+E.z*e.z);return N.jE.Dot(H,E)+u}}u._TmpMatrix=N.Matrix.Identity()},11774:(e,E,H)=>{H.d(E,{e:()=>N});class N{constructor(e,E){this.width=e,this.height=E}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let e=0|this.width;return e=397*e^this.height,e}P(e){this.width=e.width,this.height=e.height}VM(e,E){return this.width=e,this.height=E,this}set(e,E){return this.VM(e,E)}multiplyByFloats(e,E){return new N(this.width*e,this.height*E)}clone(){return new N(this.width,this.height)}equals(e){return!!e&&(this.width===e.width&&this.height===e.height)}get surface(){return this.width*this.height}static Zero(){return new N(0,0)}add(e){return new N(this.width+e.width,this.height+e.height)}FE(e){return new N(this.width-e.width,this.height-e.height)}scale(e){return new N(this.width*e,this.height*e)}static Lerp(e,E,H){const u=e.width+(E.width-e.width)*H,z=e.height+(E.height-e.height)*H;return new N(u,z)}}},11731:(e,E,H)=>{H.d(E,{e:()=>z,i:()=>P});const N={},u={};function z(e){const E=e.getClassName();return u[E]||(u[E]={}),u[E]}function P(e){const E=e.getClassName();if(N[E])return N[E];N[E]={};const H=N[E];let z=e,P=E;for(;P;){const e=u[P];for(const u in e)H[u]=e[u];let E,N=!1;do{if(E=Object.getPrototypeOf(z),!E.getClassName){N=!0;break}if(E.getClassName()!==P)break;z=E}while(E);if(N)break;P=E.getClassName(),z=E}return H}},11723:(e,E,H)=>{H.d(E,{A:()=>V,E:()=>h,H:()=>M,L:()=>C,P:()=>i,S:()=>P,d:()=>z,h:()=>X,l:()=>U,n:()=>D,o:()=>j,s:()=>A,t:()=>F,x:()=>S});var N=H(11731);function u(e,E){return(H,u)=>{const z=(0,N.e)(H);z[u]||(z[u]={type:e,sourceName:E})}}function z(e){return function(e){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(H,N)=>{const u=E||"_"+N;Object.defineProperty(H,N,{get:function(){return this[u]},set:function(E){var N;"function"===typeof(null===(N=this[u])||void 0===N?void 0:N.equals)&&this[u].equals(E)||this[u]!==E&&(this[u]=E,H[e].apply(this))},enumerable:!0,configurable:!0})}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function P(e){return u(0,e)}function M(e){return u(1,e)}function D(e){return u(2,e)}function A(e){return u(3,e)}function C(e){return u(4,e)}function i(e){return u(5,e)}function V(e){return u(6,e)}function U(e){return u(7,e)}function j(e){return u(8,e)}function F(e){return u(9,e)}function h(e){return u(10,e)}function S(e){return u(12,e)}function X(e,E,H,N){const u=H.value;H.value=function(){let H=u;if("undefined"!==typeof _native&&_native[E]){const e=_native[E];H=N?function(){return N(...arguments)?e(...arguments):u(...arguments)}:e}return e[E]=H,H(...arguments)}}X.filter=function(e){return(E,H,N)=>X(E,H,N,e)}},11776:(e,E,H)=>{H.d(E,{d:()=>A});var N=H(11565),u=H(11780),z=H(11789),P=H(11738),M=H(11731);const D=function(e,E,H){let N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const z=e();u.c&&u.c.HasTags(E)&&u.c.AddTagsTo(z,u.c.GetTags(E,!0));const P=(0,M.i)(z),D={};for(const u in P){const e=P[u],M=E[u],C=e.type;if(void 0!==M&&null!==M&&("uniqueId"!==u||A.AllowLoadingUniqueId))switch(C){case 0:case 6:case 9:case 11:z[u]=M;break;case 1:N.cloneTexturesOnlyOnce&&D[M.uniqueId]?z[u]=D[M.uniqueId]:(z[u]=H||M.isRenderTarget?M:M.clone(),D[M.uniqueId]=z[u]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:z[u]=H?M:M.clone()}}return z};class A{static AppendSerializedAnimations(e,E){if(e.animations){E.animations=[];for(let H=0;H<e.animations.length;H++){const N=e.animations[H];E.animations.push(N.serialize())}}}static Serialize(e,E){E||(E={}),u.c&&(E.tags=u.c.GetTags(e));const H=(0,M.i)(e);for(const N in H){const u=H[N],z=u.sourceName||N,P=u.type,M=e[N];if(void 0!==M&&null!==M&&("uniqueId"!==N||A.AllowLoadingUniqueId))switch(P){case 0:E[z]=M;break;case 1:case 3:case 7:case 9:E[z]=M.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:E[z]=M.uM();break;case 6:case 11:E[z]=M.id}}return E}static ParseProperties(e,E,H,N){N||(N="");const u=(0,M.i)(E);for(const M in u){const D=u[M],C=e[D.sourceName||M],i=D.type;if(void 0!==C&&null!==C&&("uniqueId"!==M||A.AllowLoadingUniqueId)){const e=E;switch(i){case 0:e[M]=C;break;case 1:H&&(e[M]=A._TextureParser(C,H,N));break;case 2:e[M]=z.XE.aE(C);break;case 3:e[M]=A._FresnelParametersParser(C);break;case 4:e[M]=P.Vector2.aE(C);break;case 5:e[M]=P.jE.aE(C);break;case 6:H&&(e[M]=H.getLastMeshById(C));break;case 7:e[M]=A._ColorCurvesParser(C);break;case 8:e[M]=z.FM.aE(C);break;case 9:e[M]=A._ImageProcessingConfigurationParser(C);break;case 10:e[M]=P.Quaternion.aE(C);break;case 11:H&&(e[M]=H.getCameraById(C));break;case 12:e[M]=P.Matrix.aE(C)}}}}static Parse(e,E,H){let N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const z=e();return u.c&&u.c.AddTagsTo(z,E.tags),A.ParseProperties(E,z,H,N),z}static Clone(e,E){return D(e,E,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(e,E){return D(e,E,!0)}}A.AllowLoadingUniqueId=!1,A._ImageProcessingConfigurationParser=e=>{throw(0,N.b)("ImageProcessingConfiguration")},A._FresnelParametersParser=e=>{throw(0,N.b)("FresnelParameters")},A._ColorCurvesParser=e=>{throw(0,N.b)("ColorCurves")},A._TextureParser=(e,E,H)=>{throw(0,N.b)("Texture")}},11780:(e,E,H)=>{H.d(E,{c:()=>u});class N{static Eval(e,E){return"true"===(e=e.match(/\([^()]*\)/g)?e.replace(/\([^()]*\)/g,(e=>(e=e.slice(1,e.length-1),N._HandleParenthesisContent(e,E)))):N._HandleParenthesisContent(e,E))||"false"!==e&&N.Eval(e,E)}static _HandleParenthesisContent(e,E){let H;E=E||(e=>"true"===e);const u=e.split("||");for(const z in u)if(Object.prototype.hasOwnProperty.call(u,z)){let e=N._SimplifyNegation(u[z].trim());const P=e.split("&&");if(P.length>1)for(let u=0;u<P.length;++u){const z=N._SimplifyNegation(P[u].trim());if(H="true"!==z&&"false"!==z?"!"===z[0]?!E(z.substring(1)):E(z):"true"===z,!H){e="false";break}}if(H||"true"===e){H=!0;break}H="true"!==e&&"false"!==e?"!"===e[0]?!E(e.substring(1)):E(e):"true"===e}return H?"true":"false"}static _SimplifyNegation(e){return"!true"===(e=(e=e.replace(/^[\s!]+/,(e=>(e=e.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?e="false":"!false"===e&&(e="true"),e}}class u{static EnableFor(e){e._tags=e._tags||{},e.hasTags=()=>u.HasTags(e),e.addTags=E=>u.AddTagsTo(e,E),e.removeTags=E=>u.RemoveTagsFrom(e,E),e.matchesTagsQuery=E=>u.MatchesQuery(e,E)}static DisableFor(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery}static HasTags(e){if(!e._tags)return!1;const E=e._tags;for(const H in E)if(Object.prototype.hasOwnProperty.call(E,H))return!0;return!1}static GetTags(e){let E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e._tags)return null;if(E){const E=[];for(const H in e._tags)Object.prototype.hasOwnProperty.call(e._tags,H)&&!0===e._tags[H]&&E.push(H);return E.join(" ")}return e._tags}static AddTagsTo(e,E){if(!E)return;if("string"!==typeof E)return;const H=E.split(" ");for(const N of H)u._AddTagTo(e,N)}static _AddTagTo(e,E){""!==(E=E.trim())&&"true"!==E&&"false"!==E&&(E.match(/[\s]/)||E.match(/^([!]|([|]|[&]){2})/)||(u.EnableFor(e),e._tags[E]=!0))}static RemoveTagsFrom(e,E){if(!u.HasTags(e))return;const H=E.split(" ");for(const N in H)u._RemoveTagFrom(e,H[N])}static _RemoveTagFrom(e,E){delete e._tags[E]}static MatchesQuery(e,E){return void 0===E||(""===E?u.HasTags(e):N.Eval(E,(E=>u.HasTags(e)&&e._tags[E])))}}},11717:(e,E,H)=>{H.d(E,{e:()=>N});function N(e,E,H,N){var u,z=arguments.length,P=z<3?E:null===N?N=Object.getOwnPropertyDescriptor(E,H):N;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)P=Reflect.decorate(e,E,H,N);else for(var M=e.length-1;M>=0;M--)(u=e[M])&&(P=(z<3?u(P):z>3?u(E,H,P):u(E,H))||P);return z>3&&P&&Object.defineProperty(E,H,P),P}Object.create;Object.create}}]);