"use strict";(self.vfdo5lmva5i=self.vfdo5lmva5i||[]).push([[13],{11770:(w,o,H)=>{H.d(o,{c:()=>h});let h=!1},11734:(w,o,H)=>{H.d(o,{c:()=>z});var h=H(11697),E=H(11702),e=H(11540),D=H(11720),t=H(11571),X=H(11675),L=(H(11573),H(11741));class A{get wrapU(){return this._wrapU}set wrapU(w){this._wrapU=w}get wrapV(){return this._wrapV}set wrapV(w){this._wrapV=w}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(w){this._texture&&(this._texture.isCube=w)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(w){this._texture&&(this._texture.is3D=w)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(w){this._texture&&(this._texture.is2DArray=w)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(w){return void 0!==(null===w||void 0===w?void 0:w.shareDepth)}constructor(w){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=L.b.Zero(),this._cachedBaseSize=L.b.Zero(),this._initialSamplingMode=2,this._texture=A._IsRenderTargetWrapper(w)?w.texture:w,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(w){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(w,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var y=H(11745);class z extends A{set ze(w){this._hasAlpha!==w&&(this._hasAlpha=w,this._scene&&this._scene.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))))}get ze(){return this._hasAlpha}set getAlphaFromRGB(w){this._getAlphaFromRGB!==w&&(this._getAlphaFromRGB=w,this._scene&&this._scene.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(w){this._coordinatesIndex!==w&&(this._coordinatesIndex=w,this._scene&&this._scene.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(w){this._coordinatesMode!==w&&(this._coordinatesMode=w,this._scene&&this._scene.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(w){this._wrapU=w}get wrapV(){return this._wrapV}set wrapV(w){this._wrapV=w}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(w){this._texture?this._texture.isCube=w:this._isCube=w}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(w){this._texture&&(this._texture.is3D=w)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(w){this._texture&&(this._texture.is2DArray=w)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(w){var o;if(this._texture){if(this._texture._gammaSpace===w)return;this._texture._gammaSpace=w}else{if(this._gammaSpace===w)return;this._gammaSpace=w}null===(o=this.Ow())||void 0===o||o.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(w){var o;w!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=w),null===(o=this.Ow())||void 0===o||o.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(w){this._texture&&(this._texture._lodGenerationOffset=w)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(w){this._texture&&(this._texture._lodGenerationScale=w)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(w){this._texture&&(this._texture._linearSpecularLOD=w)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(w){this._texture&&(this._texture._irradianceTexture=w)}get uid(){return this._uid||(this._uid=(0,X.e)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(w){this._onDisposeObserver&&this.me.remove(this._onDisposeObserver),this._onDisposeObserver=this.me.add(w)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=z.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.me=new e.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,w?z._IsScene(w)?this._scene=w:this._engine=w:this._scene=t.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=o,this._uid=null}Ow(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return D.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return D.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(w){}get canRescale(){return!1}_getFromCache(w,o,H,h,E,e){const D=this._getEngine();if(!D)return null;const t=D._getUseSRGBBuffer(!!E,o),X=D.getLoadedTexturesCache();for(let L=0;L<X.length;L++){const D=X[L];if((void 0===E||t===D._useSRGBBuffer)&&(void 0===h||h===D.invertY)&&D.url===w&&D.generateMipMaps===!o&&(!H||H===D.samplingMode)&&(void 0===e||e===D.isCube))return D.incrementReferences(),D}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const w=this.Ow();w&&w.markAllMaterialsAsDirty(1)}readPixels(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=arguments.length>4&&void 0!==arguments[4]&&arguments[4],e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,D=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,t=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,X=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const L=this._getEngine();if(!L)return null;const A=this.getSize();let y=A.width,z=A.height;0!==o&&(y/=Math.pow(2,o),z/=Math.pow(2,o),y=Math.round(y),z=Math.round(z)),t=Math.min(y,t),X=Math.min(z,X);try{return this._texture.isCube?L._readTexturePixels(this._texture,t,X,w,o,H,h,E,e,D):L._readTexturePixels(this._texture,t,X,-1,o,H,h,E,e,D)}catch(C){return null}}_readPixelsSync(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],E=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const e=this.getSize();let D=e.width,t=e.height;const X=this._getEngine();if(!X)return null;0!=o&&(D/=Math.pow(2,o),t/=Math.pow(2,o),D=Math.round(D),t=Math.round(t));try{return this._texture.isCube?X._readTexturePixelsSync(this._texture,D,t,w,o,H,h,E):X._readTexturePixelsSync(this._texture,D,t,-1,o,H,h,E)}catch(L){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const w=this._scene.textures.indexOf(this);if(w>=0&&this._scene.textures.splice(w,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const w=this._parentContainer.textures.indexOf(this);w>-1&&this._parentContainer.textures.splice(w,1),this._parentContainer=null}}this.me.notifyObservers(this),this.me.clear(),this.metadata=null,super.dispose()}serialize(){let w=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!w)return null;const o=y.e.Serialize(this);return y.e.AppendSerializedAnimations(this,o),o}static WhenAllReady(w,o){let H=w.length;if(0!==H)for(let h=0;h<w.length;h++){const E=w[h];if(E.isReady())0===--H&&o();else{const w=E.onLoadObservable;w?w.addOnce((()=>{0===--H&&o()})):0===--H&&o()}}else o()}static _IsScene(w){return"Scene"===w.getClassName()}}z.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,h.b)([(0,E.B)()],z.prototype,"uniqueId",void 0),(0,h.b)([(0,E.B)()],z.prototype,"name",void 0),(0,h.b)([(0,E.B)()],z.prototype,"displayName",void 0),(0,h.b)([(0,E.B)()],z.prototype,"metadata",void 0),(0,h.b)([(0,E.B)("ze")],z.prototype,"_hasAlpha",void 0),(0,h.b)([(0,E.B)("getAlphaFromRGB")],z.prototype,"_getAlphaFromRGB",void 0),(0,h.b)([(0,E.B)()],z.prototype,"level",void 0),(0,h.b)([(0,E.B)("coordinatesIndex")],z.prototype,"_coordinatesIndex",void 0),(0,h.b)([(0,E.B)()],z.prototype,"optimizeUVAllocation",void 0),(0,h.b)([(0,E.B)("coordinatesMode")],z.prototype,"_coordinatesMode",void 0),(0,h.b)([(0,E.B)()],z.prototype,"wrapU",null),(0,h.b)([(0,E.B)()],z.prototype,"wrapV",null),(0,h.b)([(0,E.B)()],z.prototype,"wrapR",void 0),(0,h.b)([(0,E.B)()],z.prototype,"anisotropicFilteringLevel",void 0),(0,h.b)([(0,E.B)()],z.prototype,"isCube",null),(0,h.b)([(0,E.B)()],z.prototype,"is3D",null),(0,h.b)([(0,E.B)()],z.prototype,"is2DArray",null),(0,h.b)([(0,E.B)()],z.prototype,"gammaSpace",null),(0,h.b)([(0,E.B)()],z.prototype,"invertZ",void 0),(0,h.b)([(0,E.B)()],z.prototype,"lodLevelInAlpha",void 0),(0,h.b)([(0,E.B)()],z.prototype,"lodGenerationOffset",null),(0,h.b)([(0,E.B)()],z.prototype,"lodGenerationScale",null),(0,h.b)([(0,E.B)()],z.prototype,"linearSpecularLOD",null),(0,h.b)([(0,E.w)()],z.prototype,"irradianceTexture",null),(0,h.b)([(0,E.B)()],z.prototype,"isRenderTarget",void 0)},11690:(w,o,H)=>{H.d(o,{d:()=>r});var h=H(11697),E=H(11702),e=H(11540),D=H(11720),t=H(11734),X=H(11666),L=H(11564),A=H(11606),y=H(11661),z=H(11766),C=H(11589);function Q(w,o){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const h=o.width,E=o.height;if(w instanceof Float32Array){let o=w.byteLength/w.BYTES_PER_ELEMENT;const H=new Uint8Array(o);for(;--o>=0;){let h=w[o];h<0?h=0:h>1&&(h=1),H[o]=255*h}w=H}const e=document.createElement("canvas");e.width=h,e.height=E;const D=e.getContext("2d");if(!D)return null;const t=D.createImageData(h,E);if(t.data.set(w),D.putImageData(t,0,0),H){const w=document.createElement("canvas");w.width=h,w.height=E;const o=w.getContext("2d");return o?(o.translate(0,E),o.scale(1,-1),o.drawImage(e,0,0),w.toDataURL("image/png")):null}return e.toDataURL("image/png")}function M(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const h=w.getInternalTexture();if(!h)return null;const E=w._readPixelsSync(o,H);return E?Q(E,w.getSize(),h.invertY):null}async function i(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const h=w.getInternalTexture();if(!h)return null;const E=await w.readPixels(o,H);return E?Q(E,w.getSize(),h.invertY):null}var s=H(11770),V=H(11745);class r extends t.c{static _CreateVideoTexture(w,o,H){arguments.length>5&&void 0!==arguments[5]||r.TRILINEAR_SAMPLINGMODE;throw(0,L.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(w){this._isBlocking=w}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(w,o,H,h){let E,D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.TRILINEAR_SAMPLINGMODE,t=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,X=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,L=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,y=arguments.length>8&&void 0!==arguments[8]&&arguments[8],z=arguments.length>9?arguments[9]:void 0,C=arguments.length>10?arguments[10]:void 0,Q=arguments.length>11?arguments[11]:void 0,M=arguments.length>12?arguments[12]:void 0,i=arguments.length>13?arguments[13]:void 0;super(o),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new e.b,this._isBlocking=!0,this.name=w||"",this.url=w;let V=!1,k=null,P=!0;"object"===typeof H&&null!==H?(E=H.noMipmap??!1,h=H.invertY??!s.c,D=H.samplingMode??r.TRILINEAR_SAMPLINGMODE,t=H.v??null,X=H.onError??null,L=H.buffer??null,y=H.deleteBuffer??!1,z=H.format,C=H.mimeType,Q=H.loaderOptions,M=H.creationFlags,V=H.useSRGBBuffer??!1,k=H.internalTexture??null,P=H.gammaSpace??P,i=H.forcedExtension??i):E=!!H,this._gammaSpace=P,this._noMipmap=E,this._invertY=void 0===h?!s.c:h,this._initialSamplingMode=D,this._buffer=L,this._deleteBuffer=y,this._mimeType=C,this._loaderOptions=Q,this._creationFlags=M,this._useSRGBBuffer=V,this._forcedExtension=i,void 0!==z&&(this._format=z);const l=this.Ow(),O=this._getEngine();if(!O)return;O.onBeforeTextureInitObservable.notifyObservers(this);const T=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),t&&t(),!this.isBlocking&&l&&l.resetCachedMaterial()},S=(w,o)=>{this._loadingError=!0,this._errorObject={message:w,exception:o},X&&X(w,o),r.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!k)return this._delayedOnLoad=T,void(this._delayedOnError=S);if(this._texture=k??this._getFromCache(this.url,E,D,this._invertY,V,this.isCube),this._texture)if(this._texture.isReady)A.d.SetImmediate((()=>T()));else{const w=this._texture.onLoadedObservable.add(T);this._texture.onErrorObservable.add((o=>{var H;S(o.message,o.exception),null===(H=this._texture)||void 0===H||H.onLoadedObservable.remove(w)}))}else if(l&&l.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=T,this._delayedOnError=S;else{try{this._texture=O.createTexture(this.url,E,this._invertY,l,D,T,S,this._buffer,void 0,this._format,this._forcedExtension,C,Q,M,V)}catch(c){throw S("error loading",c),c}y&&(this._buffer=null)}}updateURL(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,H=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Ow().markAllMaterialsAsDirty(1,(w=>w.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=w),this.url=w,this._buffer=o,this._forcedExtension=h,this.delayLoadState=4,H&&(this._delayedOnLoad=H),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const w=this.Ow();w&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?A.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=w.getEngine().createTexture(this.url,this._noMipmap,this._invertY,w,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(w,o,H,h){w*=this._cachedUScale,o*=this._cachedVScale,w-=this.uRotationCenter*this._cachedUScale,o-=this.vRotationCenter*this._cachedVScale,H-=this.wRotationCenter,D.io.TransformCoordinatesFromFloatsToRef(w,o,H,this._rowGenerationMatrix,h),h.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,h.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,h.z+=this.wRotationCenter}getTextureMatrix(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*w===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*w,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=D.Matrix.Zero(),this._rowGenerationMatrix=new D.Matrix,this._t0=D.io.Zero(),this._t1=D.io.Zero(),this._t2=D.io.Zero()),D.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(D.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,D.TmpVectors.Matrix[0]),D.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,D.TmpVectors.Matrix[1]),D.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,D.TmpVectors.Matrix[2]),D.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,D.TmpVectors.Matrix[3]),D.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(D.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(D.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(D.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.wy(this._t0),this._t2.wy(this._t0),D.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const o=this.Ow();if(!o)return this._cachedTextureMatrix;const H=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&H!==this._cachedIdentity3x2&&o.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const w=this.Ow();if(!w)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==r.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===w.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=D.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=D.Matrix.Zero());const o=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case r.PLANAR_MODE:D.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case r.PROJECTION_MODE:{D.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const o=w.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=o.updateFlag,o.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:D.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return o&&w.markAllMaterialsAsDirty(1,(w=>w.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const w={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,v:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return V.e.Clone((()=>new r(this._texture?this._texture.url:null,this.Ow(),w)),this)}serialize(){var w;const o=this.name;r.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const H=super.serialize(r._SerializeInternalTextureUniqueId);if(!H)return null;if(r.SerializeBuffers||r.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))H.base64String=this._buffer,H.name=H.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const w=this.mimeType||"image/png";H.base64String=`data:${w};base64,${(0,C.g)(this._buffer)}`}else(r.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(H.base64String=!this._engine||this._engine._features.supportSyncTextureRead?M(this):i(this));var h;(H.invertY=this._invertY,H.samplingMode=this.samplingMode,H._creationFlags=this._creationFlags,H._useSRGBBuffer=this._useSRGBBuffer,r._SerializeInternalTextureUniqueId)&&(H.internalTextureUniqueId=null===(h=this._texture)||void 0===h?void 0:h.uniqueId);return H.internalTextureLabel=null===(w=this._texture)||void 0===w?void 0:w.label,H.noMipmap=this._noMipmap,this.name=o,H}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(w,o,H){if(w.customType){const h=y.c.Instantiate(w.customType).Parse(w,o,H);return w.samplingMode&&h.updateSamplingMode&&h._samplingMode&&h._samplingMode!==w.samplingMode&&h.updateSamplingMode(w.samplingMode),h}if(w.isCube&&!w.isRenderTarget)return r._CubeTextureParser(w,o,H);const h=void 0!==w.internalTextureUniqueId;if(!w.name&&!w.isRenderTarget&&!h)return null;let E;if(h){const H=o.getEngine().getLoadedTexturesCache();for(const o of H)if(o.uniqueId===w.internalTextureUniqueId){E=o;break}}const e=o=>{if(o&&o._texture&&(o._texture._cachedWrapU=null,o._texture._cachedWrapV=null,o._texture._cachedWrapR=null),w.samplingMode){const H=w.samplingMode;o&&o.samplingMode!==H&&o.updateSamplingMode(H)}if(o&&w.animations)for(let H=0;H<w.animations.length;H++){const h=w.animations[H],E=(0,X.e)("BABYLON.Animation");E&&o.animations.push(E.Parse(h))}o&&o._texture&&(h&&!E&&o._texture._setUniqueId(w.internalTextureUniqueId),o._texture.label=w.internalTextureLabel)};return V.e.Parse((()=>{let h=!0;if(w.noMipmap&&(h=!1),w.mirrorPlane){const H=r._CreateMirror(w.name,w.renderTargetSize,o,h);return H._waitingRenderList=w.renderList,H.mirrorPlane=z.c.Po(w.mirrorPlane),e(H),H}if(w.isRenderTarget){let H=null;if(w.isCube){if(o.reflectionProbes)for(let h=0;h<o.reflectionProbes.length;h++){const H=o.reflectionProbes[h];if(H.name===w.name)return H.cubeTexture}}else H=r._CreateRenderTargetTexture(w.name,w.renderTargetSize,o,h,w._creationFlags??0),H._waitingRenderList=w.renderList;return e(H),H}if(w.isVideo){const E=r._CreateVideoTexture(H+(w.url||w.name),H+(w.src||w.url),o,h,w.invertY,w.samplingMode,w.settings||{});return e(E),E}{let D;if(w.base64String&&!E)D=r.CreateFromBase64String(w.base64String,w.base64String,o,!h,w.invertY,w.samplingMode,(()=>{e(D)}),w._creationFlags??0,w._useSRGBBuffer??!1),D.name=w.name;else{let t;t=w.name&&(w.name.indexOf("://")>0||w.name.startsWith("data:"))?w.name:H+w.name,w.url&&(w.url.startsWith("data:")||r.UseSerializedUrlIfAny)&&(t=w.url);const X={noMipmap:!h,invertY:w.invertY,samplingMode:w.samplingMode,v:()=>{e(D)},internalTexture:E};D=new r(t,o,X)}return D}}),w,o)}static CreateFromBase64String(w,o,H,h,E){let e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.TRILINEAR_SAMPLINGMODE;return new r("data:"+o,H,h,E,e,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,w,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(w,o,H){let h=arguments.length>3&&void 0!==arguments[3]&&arguments[3],E=arguments.length>4?arguments[4]:void 0,e=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],D=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r.TRILINEAR_SAMPLINGMODE,t=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,X=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,L=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,A=arguments.length>10?arguments[10]:void 0,y=arguments.length>11?arguments[11]:void 0;return"data:"!==w.substring(0,5)&&(w="data:"+w),new r(w,H,E,e,D,t,X,o,h,L,void 0,void 0,A,y)}}r.SerializeBuffers=!0,r.ForceSerializeBuffers=!1,r.OnTextureLoadErrorObservable=new e.b,r._SerializeInternalTextureUniqueId=!1,r._CubeTextureParser=(w,o,H)=>{throw(0,L.b)("CubeTexture")},r._CreateMirror=(w,o,H,h)=>{throw(0,L.b)("MirrorTexture")},r._CreateRenderTargetTexture=(w,o,H,h,E)=>{throw(0,L.b)("RenderTargetTexture")},r.NEAREST_SAMPLINGMODE=1,r.NEAREST_NEAREST_MIPLINEAR=8,r.BILINEAR_SAMPLINGMODE=2,r.LINEAR_LINEAR_MIPNEAREST=11,r.TRILINEAR_SAMPLINGMODE=3,r.LINEAR_LINEAR_MIPLINEAR=3,r.NEAREST_NEAREST_MIPNEAREST=4,r.NEAREST_LINEAR_MIPNEAREST=5,r.NEAREST_LINEAR_MIPLINEAR=6,r.NEAREST_LINEAR=7,r.NEAREST_NEAREST=1,r.LINEAR_NEAREST_MIPNEAREST=9,r.LINEAR_NEAREST_MIPLINEAR=10,r.LINEAR_LINEAR=2,r.LINEAR_NEAREST=12,r.EXPLICIT_MODE=0,r.SPHERICAL_MODE=1,r.PLANAR_MODE=2,r.CUBIC_MODE=3,r.PROJECTION_MODE=4,r.SKYBOX_MODE=5,r.INVCUBIC_MODE=6,r.EQUIRECTANGULAR_MODE=7,r.FIXED_EQUIRECTANGULAR_MODE=8,r.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,r.CLAMP_ADDRESSMODE=0,r.WRAP_ADDRESSMODE=1,r.MIRROR_ADDRESSMODE=2,r.UseSerializedUrlIfAny=!1,(0,h.b)([(0,E.B)()],r.prototype,"url",void 0),(0,h.b)([(0,E.B)()],r.prototype,"uOffset",void 0),(0,h.b)([(0,E.B)()],r.prototype,"vOffset",void 0),(0,h.b)([(0,E.B)()],r.prototype,"uScale",void 0),(0,h.b)([(0,E.B)()],r.prototype,"vScale",void 0),(0,h.b)([(0,E.B)()],r.prototype,"uAng",void 0),(0,h.b)([(0,E.B)()],r.prototype,"vAng",void 0),(0,h.b)([(0,E.B)()],r.prototype,"wAng",void 0),(0,h.b)([(0,E.B)()],r.prototype,"uRotationCenter",void 0),(0,h.b)([(0,E.B)()],r.prototype,"vRotationCenter",void 0),(0,h.b)([(0,E.B)()],r.prototype,"wRotationCenter",void 0),(0,h.b)([(0,E.B)()],r.prototype,"homogeneousRotationInUVTransform",void 0),(0,h.b)([(0,E.B)()],r.prototype,"isBlocking",null),(0,X.g)("BABYLON.Texture",r),V.e._TextureParser=r.Parse},11766:(w,o,H)=>{H.d(o,{c:()=>E});var h=H(11720);class E{constructor(w,o,H,E){this.normal=new h.io(w,o,H),this.d=E}Ae(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new E(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let w=this.normal.getHashCode();return w=397*w^this.d,w}normalize(){const w=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let o=0;return 0!==w&&(o=1/w),this.normal.x*=o,this.normal.y*=o,this.normal.z*=o,this.d*=o,this}transform(w){const o=E._TmpMatrix;w.invertToRef(o);const H=o.m,h=this.normal.x,e=this.normal.y,D=this.normal.z,t=this.d,X=h*H[0]+e*H[1]+D*H[2]+t*H[3],L=h*H[4]+e*H[5]+D*H[6]+t*H[7],A=h*H[8]+e*H[9]+D*H[10]+t*H[11],y=h*H[12]+e*H[13]+D*H[14]+t*H[15];return new E(X,L,A,y)}dotCoordinate(w){return this.normal.x*w.x+this.normal.y*w.y+this.normal.z*w.z+this.d}copyFromPoints(w,o,H){const h=o.x-w.x,E=o.y-w.y,e=o.z-w.z,D=H.x-w.x,t=H.y-w.y,X=H.z-w.z,L=E*X-e*t,A=e*D-h*X,y=h*t-E*D,z=Math.sqrt(L*L+A*A+y*y);let C;return C=0!==z?1/z:0,this.normal.x=L*C,this.normal.y=A*C,this.normal.z=y*C,this.d=-(this.normal.x*w.x+this.normal.y*w.y+this.normal.z*w.z),this}isFrontFacingTo(w,o){return h.io.Dot(this.normal,w)<=o}signedDistanceTo(w){return h.io.Dot(w,this.normal)+this.d}static Po(w){return new E(w[0],w[1],w[2],w[3])}static FromPoints(w,o,H){const h=new E(0,0,0,0);return h.copyFromPoints(w,o,H),h}static FromPositionAndNormal(w,o){const H=new E(0,0,0,0);return this.FromPositionAndNormalToRef(w,o,H)}static FromPositionAndNormalToRef(w,o,H){return H.normal.t(o),H.normal.normalize(),H.d=-w.dot(H.normal),H}static SignedDistanceToPlaneFromPositionAndNormal(w,o,H){const E=-(o.x*w.x+o.y*w.y+o.z*w.z);return h.io.Dot(H,o)+E}}E._TmpMatrix=h.Matrix.Identity()},11741:(w,o,H)=>{H.d(o,{b:()=>h});class h{constructor(w,o){this.width=w,this.height=o}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let w=0|this.width;return w=397*w^this.height,w}t(w){this.width=w.width,this.height=w.height}We(w,o){return this.width=w,this.height=o,this}set(w,o){return this.We(w,o)}multiplyByFloats(w,o){return new h(this.width*w,this.height*o)}clone(){return new h(this.width,this.height)}equals(w){return!!w&&(this.width===w.width&&this.height===w.height)}get surface(){return this.width*this.height}static Zero(){return new h(0,0)}add(w){return new h(this.width+w.width,this.height+w.height)}so(w){return new h(this.width-w.width,this.height-w.height)}scale(w){return new h(this.width*w,this.height*w)}static Lerp(w,o,H){const E=w.width+(o.width-w.width)*H,e=w.height+(o.height-w.height)*H;return new h(E,e)}}},11711:(w,o,H)=>{H.d(o,{e:()=>e,g:()=>D});const h={},E={};function e(w){const o=w.getClassName();return E[o]||(E[o]={}),E[o]}function D(w){const o=w.getClassName();if(h[o])return h[o];h[o]={};const H=h[o];let e=w,D=o;for(;D;){const w=E[D];for(const E in w)H[E]=w[E];let o,h=!1;do{if(o=Object.getPrototypeOf(e),!o.getClassName){h=!0;break}if(o.getClassName()!==D)break;e=o}while(o);if(h)break;D=o.getClassName(),e=o}return H}},11702:(w,o,H)=>{H.d(o,{A:()=>y,B:()=>D,d:()=>e,f:()=>V,g:()=>C,h:()=>X,j:()=>Q,k:()=>L,n:()=>M,p:()=>s,r:()=>z,u:()=>i,w:()=>t,y:()=>A});var h=H(11711);function E(w,o){return(H,E)=>{const e=(0,h.e)(H);e[E]||(e[E]={type:w,sourceName:o})}}function e(w){return function(w){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(H,h)=>{const E=o||"_"+h;Object.defineProperty(H,h,{get:function(){return this[E]},set:function(o){var h;"function"===typeof(null===(h=this[E])||void 0===h?void 0:h.equals)&&this[E].equals(o)||this[E]!==o&&(this[E]=o,H[w].apply(this))},enumerable:!0,configurable:!0})}}(w,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function D(w){return E(0,w)}function t(w){return E(1,w)}function X(w){return E(2,w)}function L(w){return E(3,w)}function A(w){return E(4,w)}function y(w){return E(5,w)}function z(w){return E(6,w)}function C(w){return E(7,w)}function Q(w){return E(8,w)}function M(w){return E(9,w)}function i(w){return E(10,w)}function s(w){return E(12,w)}function V(w,o,H,h){const E=H.value;H.value=function(){let H=E;if("undefined"!==typeof _native&&_native[o]){const w=_native[o];H=h?function(){return h(...arguments)?w(...arguments):E(...arguments)}:w}return w[o]=H,H(...arguments)}}V.filter=function(w){return(o,H,h)=>V(o,H,h,w)}},11745:(w,o,H)=>{H.d(o,{e:()=>L});var h=H(11564),E=H(11753),e=H(11757),D=H(11720),t=H(11711);const X=function(w,o,H){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const e=w();E.c&&E.c.HasTags(o)&&E.c.AddTagsTo(e,E.c.GetTags(o,!0));const D=(0,t.g)(e),X={};for(const E in D){const w=D[E],t=o[E],A=w.type;if(void 0!==t&&null!==t&&("uniqueId"!==E||L.AllowLoadingUniqueId))switch(A){case 0:case 6:case 9:case 11:e[E]=t;break;case 1:h.cloneTexturesOnlyOnce&&X[t.uniqueId]?e[E]=X[t.uniqueId]:(e[E]=H||t.isRenderTarget?t:t.clone(),X[t.uniqueId]=e[E]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:e[E]=H?t:t.clone()}}return e};class L{static AppendSerializedAnimations(w,o){if(w.animations){o.animations=[];for(let H=0;H<w.animations.length;H++){const h=w.animations[H];o.animations.push(h.serialize())}}}static Serialize(w,o){o||(o={}),E.c&&(o.tags=E.c.GetTags(w));const H=(0,t.g)(w);for(const h in H){const E=H[h],e=E.sourceName||h,D=E.type,t=w[h];if(void 0!==t&&null!==t&&("uniqueId"!==h||L.AllowLoadingUniqueId))switch(D){case 0:o[e]=t;break;case 1:case 3:case 7:case 9:o[e]=t.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:o[e]=t.Ae();break;case 6:case 11:o[e]=t.id}}return o}static ParseProperties(w,o,H,h){h||(h="");const E=(0,t.g)(o);for(const t in E){const X=E[t],A=w[X.sourceName||t],y=X.type;if(void 0!==A&&null!==A&&("uniqueId"!==t||L.AllowLoadingUniqueId)){const w=o;switch(y){case 0:w[t]=A;break;case 1:H&&(w[t]=L._TextureParser(A,H,h));break;case 2:w[t]=e.ko.Po(A);break;case 3:w[t]=L._FresnelParametersParser(A);break;case 4:w[t]=D.Vector2.Po(A);break;case 5:w[t]=D.io.Po(A);break;case 6:H&&(w[t]=H.getLastMeshById(A));break;case 7:w[t]=L._ColorCurvesParser(A);break;case 8:w[t]=e.ae.Po(A);break;case 9:w[t]=L._ImageProcessingConfigurationParser(A);break;case 10:w[t]=D.Quaternion.Po(A);break;case 11:H&&(w[t]=H.getCameraById(A));break;case 12:w[t]=D.Matrix.Po(A)}}}}static Parse(w,o,H){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const e=w();return E.c&&E.c.AddTagsTo(e,o.tags),L.ParseProperties(o,e,H,h),e}static Clone(w,o){return X(w,o,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(w,o){return X(w,o,!0)}}L.AllowLoadingUniqueId=!1,L._ImageProcessingConfigurationParser=w=>{throw(0,h.b)("ImageProcessingConfiguration")},L._FresnelParametersParser=w=>{throw(0,h.b)("FresnelParameters")},L._ColorCurvesParser=w=>{throw(0,h.b)("ColorCurves")},L._TextureParser=(w,o,H)=>{throw(0,h.b)("Texture")}},11753:(w,o,H)=>{H.d(o,{c:()=>E});class h{static Eval(w,o){return"true"===(w=w.match(/\([^()]*\)/g)?w.replace(/\([^()]*\)/g,(w=>(w=w.slice(1,w.length-1),h._HandleParenthesisContent(w,o)))):h._HandleParenthesisContent(w,o))||"false"!==w&&h.Eval(w,o)}static _HandleParenthesisContent(w,o){let H;o=o||(w=>"true"===w);const E=w.split("||");for(const e in E)if(Object.prototype.hasOwnProperty.call(E,e)){let w=h._SimplifyNegation(E[e].trim());const D=w.split("&&");if(D.length>1)for(let E=0;E<D.length;++E){const e=h._SimplifyNegation(D[E].trim());if(H="true"!==e&&"false"!==e?"!"===e[0]?!o(e.substring(1)):o(e):"true"===e,!H){w="false";break}}if(H||"true"===w){H=!0;break}H="true"!==w&&"false"!==w?"!"===w[0]?!o(w.substring(1)):o(w):"true"===w}return H?"true":"false"}static _SimplifyNegation(w){return"!true"===(w=(w=w.replace(/^[\s!]+/,(w=>(w=w.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?w="false":"!false"===w&&(w="true"),w}}class E{static EnableFor(w){w._tags=w._tags||{},w.hasTags=()=>E.HasTags(w),w.addTags=o=>E.AddTagsTo(w,o),w.removeTags=o=>E.RemoveTagsFrom(w,o),w.matchesTagsQuery=o=>E.MatchesQuery(w,o)}static DisableFor(w){delete w._tags,delete w.hasTags,delete w.addTags,delete w.removeTags,delete w.matchesTagsQuery}static HasTags(w){if(!w._tags)return!1;const o=w._tags;for(const H in o)if(Object.prototype.hasOwnProperty.call(o,H))return!0;return!1}static GetTags(w){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!w._tags)return null;if(o){const o=[];for(const H in w._tags)Object.prototype.hasOwnProperty.call(w._tags,H)&&!0===w._tags[H]&&o.push(H);return o.join(" ")}return w._tags}static AddTagsTo(w,o){if(!o)return;if("string"!==typeof o)return;const H=o.split(" ");for(const h of H)E._AddTagTo(w,h)}static _AddTagTo(w,o){""!==(o=o.trim())&&"true"!==o&&"false"!==o&&(o.match(/[\s]/)||o.match(/^([!]|([|]|[&]){2})/)||(E.EnableFor(w),w._tags[o]=!0))}static RemoveTagsFrom(w,o){if(!E.HasTags(w))return;const H=o.split(" ");for(const h in H)E._RemoveTagFrom(w,H[h])}static _RemoveTagFrom(w,o){delete w._tags[o]}static MatchesQuery(w,o){return void 0===o||(""===o?E.HasTags(w):h.Eval(o,(o=>E.HasTags(w)&&w._tags[o])))}}},11697:(w,o,H)=>{H.d(o,{b:()=>h});function h(w,o,H,h){var E,e=arguments.length,D=e<3?o:null===h?h=Object.getOwnPropertyDescriptor(o,H):h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)D=Reflect.decorate(w,o,H,h);else for(var t=w.length-1;t>=0;t--)(E=w[t])&&(D=(e<3?E(D):e>3?E(o,H,D):E(o,H))||D);return e>3&&D&&Object.defineProperty(o,H,D),D}Object.create;Object.create}}]);