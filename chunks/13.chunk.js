"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[13],{12469:(e,d,v)=>{v.d(d,{c:()=>P});let P=!1},12446:(e,d,v)=>{v.d(d,{d:()=>g});var P=v(12403),p=v(12409),L=v(12248),B=v(12420),X=v(12281),z=v(12384),W=(v(12283),v(12451));class V{get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(e){this._texture&&(this._texture.isCube=e)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(e){return void 0!==(null===e||void 0===e?void 0:e.shareDepth)}constructor(e){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=W.c.Zero(),this._cachedBaseSize=W.c.Zero(),this._initialSamplingMode=2,this._texture=V._IsRenderTargetWrapper(e)?e.texture:e,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(e){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(e,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var k=v(12453);class g extends V{set Hd(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get Hd(){return this._hasAlpha}set getAlphaFromRGB(e){this._getAlphaFromRGB!==e&&(this._getAlphaFromRGB=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(e){this._coordinatesIndex!==e&&(this._coordinatesIndex=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(e){this._wrapU=e}get wrapV(){return this._wrapV}set wrapV(e){this._wrapV=e}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(e){this._texture?this._texture.isCube=e:this._isCube=e}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(e){this._texture&&(this._texture.is3D=e)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(e){this._texture&&(this._texture.is2DArray=e)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(e){var d;if(this._texture){if(this._texture._gammaSpace===e)return;this._texture._gammaSpace=e}else{if(this._gammaSpace===e)return;this._gammaSpace=e}null===(d=this.Ae())||void 0===d||d.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(e){var d;e!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=e),null===(d=this.Ae())||void 0===d||d.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(e){this._texture&&(this._texture._lodGenerationOffset=e)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(e){this._texture&&(this._texture._lodGenerationScale=e)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(e){this._texture&&(this._texture._linearSpecularLOD=e)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(e){this._texture&&(this._texture._irradianceTexture=e)}get uid(){return this._uid||(this._uid=(0,z.b)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(e){this._onDisposeObserver&&this.Fd.remove(this._onDisposeObserver),this._onDisposeObserver=this.Fd.add(e)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=g.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Fd=new L.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,e?g._IsScene(e)?this._scene=e:this._engine=e:this._scene=X.c.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=d,this._uid=null}Ae(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return B.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return B.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(e){}get canRescale(){return!1}_getFromCache(e,d,v,P,p,L){const B=this._getEngine();if(!B)return null;const X=B._getUseSRGBBuffer(!!p,d),z=B.getLoadedTexturesCache();for(let W=0;W<z.length;W++){const B=z[W];if((void 0===p||X===B._useSRGBBuffer)&&(void 0===P||P===B.invertY)&&B.url===e&&B.generateMipMaps===!d&&(!v||v===B.samplingMode)&&(void 0===L||L===B.isCube))return B.incrementReferences(),B}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const e=this.Ae();e&&e.markAllMaterialsAsDirty(1)}readPixels(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,P=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],p=arguments.length>4&&void 0!==arguments[4]&&arguments[4],L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,X=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,z=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const W=this._getEngine();if(!W)return null;const V=this.getSize();let k=V.width,g=V.height;0!==d&&(k/=Math.pow(2,d),g/=Math.pow(2,d),k=Math.round(k),g=Math.round(g)),X=Math.min(k,X),z=Math.min(g,z);try{return this._texture.isCube?W._readTexturePixels(this._texture,X,z,e,d,v,P,p,L,B):W._readTexturePixels(this._texture,X,z,-1,d,v,P,p,L,B)}catch(F){return null}}_readPixelsSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,P=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],p=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const L=this.getSize();let B=L.width,X=L.height;const z=this._getEngine();if(!z)return null;0!=d&&(B/=Math.pow(2,d),X/=Math.pow(2,d),B=Math.round(B),X=Math.round(X));try{return this._texture.isCube?z._readTexturePixelsSync(this._texture,B,X,e,d,v,P,p):z._readTexturePixelsSync(this._texture,B,X,-1,d,v,P,p)}catch(W){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const e=this._scene.textures.indexOf(this);if(e>=0&&this._scene.textures.splice(e,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const e=this._parentContainer.textures.indexOf(this);e>-1&&this._parentContainer.textures.splice(e,1),this._parentContainer=null}}this.Fd.notifyObservers(this),this.Fd.clear(),this.metadata=null,super.dispose()}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!e)return null;const d=k.c.Serialize(this);return k.c.AppendSerializedAnimations(this,d),d}static WhenAllReady(e,d){let v=e.length;if(0!==v)for(let P=0;P<e.length;P++){const p=e[P];if(p.isReady())0===--v&&d();else{const e=p.onLoadObservable;e?e.addOnce((()=>{0===--v&&d()})):0===--v&&d()}}else d()}static _IsScene(e){return"Scene"===e.getClassName()}}g.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,P.e)([(0,p.M)()],g.prototype,"uniqueId",void 0),(0,P.e)([(0,p.M)()],g.prototype,"name",void 0),(0,P.e)([(0,p.M)()],g.prototype,"displayName",void 0),(0,P.e)([(0,p.M)()],g.prototype,"metadata",void 0),(0,P.e)([(0,p.M)("Hd")],g.prototype,"_hasAlpha",void 0),(0,P.e)([(0,p.M)("getAlphaFromRGB")],g.prototype,"_getAlphaFromRGB",void 0),(0,P.e)([(0,p.M)()],g.prototype,"level",void 0),(0,P.e)([(0,p.M)("coordinatesIndex")],g.prototype,"_coordinatesIndex",void 0),(0,P.e)([(0,p.M)()],g.prototype,"optimizeUVAllocation",void 0),(0,P.e)([(0,p.M)("coordinatesMode")],g.prototype,"_coordinatesMode",void 0),(0,P.e)([(0,p.M)()],g.prototype,"wrapU",null),(0,P.e)([(0,p.M)()],g.prototype,"wrapV",null),(0,P.e)([(0,p.M)()],g.prototype,"wrapR",void 0),(0,P.e)([(0,p.M)()],g.prototype,"anisotropicFilteringLevel",void 0),(0,P.e)([(0,p.M)()],g.prototype,"isCube",null),(0,P.e)([(0,p.M)()],g.prototype,"is3D",null),(0,P.e)([(0,p.M)()],g.prototype,"is2DArray",null),(0,P.e)([(0,p.M)()],g.prototype,"gammaSpace",null),(0,P.e)([(0,p.M)()],g.prototype,"invertZ",void 0),(0,P.e)([(0,p.M)()],g.prototype,"lodLevelInAlpha",void 0),(0,P.e)([(0,p.M)()],g.prototype,"lodGenerationOffset",null),(0,P.e)([(0,p.M)()],g.prototype,"lodGenerationScale",null),(0,P.e)([(0,p.M)()],g.prototype,"linearSpecularLOD",null),(0,P.e)([(0,p.C)()],g.prototype,"irradianceTexture",null),(0,P.e)([(0,p.M)()],g.prototype,"isRenderTarget",void 0)},12399:(e,d,v)=>{v.d(d,{e:()=>q});var P=v(12403),p=v(12409),L=v(12248),B=v(12420),X=v(12446),z=v(12381),W=v(12268),V=v(12314),k=v(12372),g=v(12465),F=v(12295);function w(e,d){let v=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const P=d.width,p=d.height;if(e instanceof Float32Array){let d=e.byteLength/e.BYTES_PER_ELEMENT;const v=new Uint8Array(d);for(;--d>=0;){let P=e[d];P<0?P=0:P>1&&(P=1),v[d]=255*P}e=v}const L=document.createElement("canvas");L.width=P,L.height=p;const B=L.getContext("2d");if(!B)return null;const X=B.createImageData(P,p);if(X.data.set(e),B.putImageData(X,0,0),v){const e=document.createElement("canvas");e.width=P,e.height=p;const d=e.getContext("2d");return d?(d.translate(0,p),d.scale(1,-1),d.drawImage(L,0,0),e.toDataURL("image/png")):null}return L.toDataURL("image/png")}function G(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const P=e.getInternalTexture();if(!P)return null;const p=e._readPixelsSync(d,v);return p?w(p,e.getSize(),P.invertY):null}async function U(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const P=e.getInternalTexture();if(!P)return null;const p=await e.readPixels(d,v);return p?w(p,e.getSize(),P.invertY):null}var D=v(12469),C=v(12453);class q extends X.d{static _CreateVideoTexture(e,d,v){arguments.length>5&&void 0!==arguments[5]||q.TRILINEAR_SAMPLINGMODE;throw(0,W.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(e){this._isBlocking=e}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(e,d,v,P){let p,B=arguments.length>4&&void 0!==arguments[4]?arguments[4]:q.TRILINEAR_SAMPLINGMODE,X=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,z=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,W=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,k=arguments.length>8&&void 0!==arguments[8]&&arguments[8],g=arguments.length>9?arguments[9]:void 0,F=arguments.length>10?arguments[10]:void 0,w=arguments.length>11?arguments[11]:void 0,G=arguments.length>12?arguments[12]:void 0,U=arguments.length>13?arguments[13]:void 0;super(d),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new L.d,this._isBlocking=!0,this.name=e||"",this.url=e;let C=!1,h=null,l=!0;"object"===typeof v&&null!==v?(p=v.noMipmap??!1,P=v.invertY??!D.c,B=v.samplingMode??q.TRILINEAR_SAMPLINGMODE,X=v.I??null,z=v.onError??null,W=v.buffer??null,k=v.deleteBuffer??!1,g=v.format,F=v.mimeType,w=v.loaderOptions,G=v.creationFlags,C=v.useSRGBBuffer??!1,h=v.internalTexture??null,l=v.gammaSpace??l,U=v.forcedExtension??U):p=!!v,this._gammaSpace=l,this._noMipmap=p,this._invertY=void 0===P?!D.c:P,this._initialSamplingMode=B,this._buffer=W,this._deleteBuffer=k,this._mimeType=F,this._loaderOptions=w,this._creationFlags=G,this._useSRGBBuffer=C,this._forcedExtension=U,void 0!==g&&(this._format=g);const n=this.Ae(),A=this._getEngine();if(!A)return;A.onBeforeTextureInitObservable.notifyObservers(this);const x=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),X&&X(),!this.isBlocking&&n&&n.resetCachedMaterial()},i=(e,d)=>{this._loadingError=!0,this._errorObject={message:e,exception:d},z&&z(e,d),q.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!h)return this._delayedOnLoad=x,void(this._delayedOnError=i);if(this._texture=h??this._getFromCache(this.url,p,B,this._invertY,C,this.isCube),this._texture)if(this._texture.isReady)V.e.SetImmediate((()=>x()));else{const e=this._texture.onLoadedObservable.add(x);this._texture.onErrorObservable.add((d=>{var v;i(d.message,d.exception),null===(v=this._texture)||void 0===v||v.onLoadedObservable.remove(e)}))}else if(n&&n.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=x,this._delayedOnError=i;else{try{this._texture=A.createTexture(this.url,p,this._invertY,n,B,x,i,this._buffer,void 0,this._format,this._forcedExtension,F,w,G,C)}catch(me){throw i("error loading",me),me}k&&(this._buffer=null)}}updateURL(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,v=arguments.length>2?arguments[2]:void 0,P=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Ae().markAllMaterialsAsDirty(1,(e=>e.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=e),this.url=e,this._buffer=d,this._forcedExtension=P,this.delayLoadState=4,v&&(this._delayedOnLoad=v),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const e=this.Ae();e&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?V.e.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=e.getEngine().createTexture(this.url,this._noMipmap,this._invertY,e,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(e,d,v,P){e*=this._cachedUScale,d*=this._cachedVScale,e-=this.uRotationCenter*this._cachedUScale,d-=this.vRotationCenter*this._cachedVScale,v-=this.wRotationCenter,B.mv.TransformCoordinatesFromFloatsToRef(e,d,v,this._rowGenerationMatrix,P),P.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,P.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,P.z+=this.wRotationCenter}getTextureMatrix(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*e===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*e,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=B.Matrix.Zero(),this._rowGenerationMatrix=new B.Matrix,this._t0=B.mv.Zero(),this._t1=B.mv.Zero(),this._t2=B.mv.Zero()),B.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(B.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,B.TmpVectors.Matrix[0]),B.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,B.TmpVectors.Matrix[1]),B.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,B.TmpVectors.Matrix[2]),B.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,B.TmpVectors.Matrix[3]),B.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(B.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(B.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(B.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.JV(this._t0),this._t2.JV(this._t0),B.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const d=this.Ae();if(!d)return this._cachedTextureMatrix;const v=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&v!==this._cachedIdentity3x2&&d.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const e=this.Ae();if(!e)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==q.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===e.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=B.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=B.Matrix.Zero());const d=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case q.PLANAR_MODE:B.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case q.PROJECTION_MODE:{B.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const d=e.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=d.updateFlag,d.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:B.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return d&&e.markAllMaterialsAsDirty(1,(e=>e.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const e={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,I:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return C.c.Clone((()=>new q(this._texture?this._texture.url:null,this.Ae(),e)),this)}serialize(){var e;const d=this.name;q.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const v=super.serialize(q._SerializeInternalTextureUniqueId);if(!v)return null;if(q.SerializeBuffers||q.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))v.base64String=this._buffer,v.name=v.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const e=this.mimeType||"image/png";v.base64String=`data:${e};base64,${(0,F.k)(this._buffer)}`}else(q.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(v.base64String=!this._engine||this._engine._features.supportSyncTextureRead?G(this):U(this));var P;(v.invertY=this._invertY,v.samplingMode=this.samplingMode,v._creationFlags=this._creationFlags,v._useSRGBBuffer=this._useSRGBBuffer,q._SerializeInternalTextureUniqueId)&&(v.internalTextureUniqueId=null===(P=this._texture)||void 0===P?void 0:P.uniqueId);return v.internalTextureLabel=null===(e=this._texture)||void 0===e?void 0:e.label,v.noMipmap=this._noMipmap,this.name=d,v}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(e,d,v){if(e.customType){const P=k.e.Instantiate(e.customType).Parse(e,d,v);return e.samplingMode&&P.updateSamplingMode&&P._samplingMode&&P._samplingMode!==e.samplingMode&&P.updateSamplingMode(e.samplingMode),P}if(e.isCube&&!e.isRenderTarget)return q._CubeTextureParser(e,d,v);const P=void 0!==e.internalTextureUniqueId;if(!e.name&&!e.isRenderTarget&&!P)return null;let p;if(P){const v=d.getEngine().getLoadedTexturesCache();for(const d of v)if(d.uniqueId===e.internalTextureUniqueId){p=d;break}}const L=d=>{if(d&&d._texture&&(d._texture._cachedWrapU=null,d._texture._cachedWrapV=null,d._texture._cachedWrapR=null),e.samplingMode){const v=e.samplingMode;d&&d.samplingMode!==v&&d.updateSamplingMode(v)}if(d&&e.animations)for(let v=0;v<e.animations.length;v++){const P=e.animations[v],p=(0,z.e)("BABYLON.Animation");p&&d.animations.push(p.Parse(P))}d&&d._texture&&(P&&!p&&d._texture._setUniqueId(e.internalTextureUniqueId),d._texture.label=e.internalTextureLabel)};return C.c.Parse((()=>{let P=!0;if(e.noMipmap&&(P=!1),e.mirrorPlane){const v=q._CreateMirror(e.name,e.renderTargetSize,d,P);return v._waitingRenderList=e.renderList,v.mirrorPlane=g.d.Nd(e.mirrorPlane),L(v),v}if(e.isRenderTarget){let v=null;if(e.isCube){if(d.reflectionProbes)for(let P=0;P<d.reflectionProbes.length;P++){const v=d.reflectionProbes[P];if(v.name===e.name)return v.cubeTexture}}else v=q._CreateRenderTargetTexture(e.name,e.renderTargetSize,d,P,e._creationFlags??0),v._waitingRenderList=e.renderList;return L(v),v}if(e.isVideo){const p=q._CreateVideoTexture(v+(e.url||e.name),v+(e.src||e.url),d,P,e.invertY,e.samplingMode,e.settings||{});return L(p),p}{let B;if(e.base64String&&!p)B=q.CreateFromBase64String(e.base64String,e.base64String,d,!P,e.invertY,e.samplingMode,(()=>{L(B)}),e._creationFlags??0,e._useSRGBBuffer??!1),B.name=e.name;else{let X;X=e.name&&(e.name.indexOf("://")>0||e.name.startsWith("data:"))?e.name:v+e.name,e.url&&(e.url.startsWith("data:")||q.UseSerializedUrlIfAny)&&(X=e.url);const z={noMipmap:!P,invertY:e.invertY,samplingMode:e.samplingMode,I:()=>{L(B)},internalTexture:p};B=new q(X,d,z)}return B}}),e,d)}static CreateFromBase64String(e,d,v,P,p){let L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:q.TRILINEAR_SAMPLINGMODE;return new q("data:"+d,v,P,p,L,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,e,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(e,d,v){let P=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4?arguments[4]:void 0,L=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],B=arguments.length>6&&void 0!==arguments[6]?arguments[6]:q.TRILINEAR_SAMPLINGMODE,X=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,z=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,W=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,V=arguments.length>10?arguments[10]:void 0,k=arguments.length>11?arguments[11]:void 0;return"data:"!==e.substring(0,5)&&(e="data:"+e),new q(e,v,p,L,B,X,z,d,P,W,void 0,void 0,V,k)}}q.SerializeBuffers=!0,q.ForceSerializeBuffers=!1,q.OnTextureLoadErrorObservable=new L.d,q._SerializeInternalTextureUniqueId=!1,q._CubeTextureParser=(e,d,v)=>{throw(0,W.e)("CubeTexture")},q._CreateMirror=(e,d,v,P)=>{throw(0,W.e)("MirrorTexture")},q._CreateRenderTargetTexture=(e,d,v,P,p)=>{throw(0,W.e)("RenderTargetTexture")},q.NEAREST_SAMPLINGMODE=1,q.NEAREST_NEAREST_MIPLINEAR=8,q.BILINEAR_SAMPLINGMODE=2,q.LINEAR_LINEAR_MIPNEAREST=11,q.TRILINEAR_SAMPLINGMODE=3,q.LINEAR_LINEAR_MIPLINEAR=3,q.NEAREST_NEAREST_MIPNEAREST=4,q.NEAREST_LINEAR_MIPNEAREST=5,q.NEAREST_LINEAR_MIPLINEAR=6,q.NEAREST_LINEAR=7,q.NEAREST_NEAREST=1,q.LINEAR_NEAREST_MIPNEAREST=9,q.LINEAR_NEAREST_MIPLINEAR=10,q.LINEAR_LINEAR=2,q.LINEAR_NEAREST=12,q.EXPLICIT_MODE=0,q.SPHERICAL_MODE=1,q.PLANAR_MODE=2,q.CUBIC_MODE=3,q.PROJECTION_MODE=4,q.SKYBOX_MODE=5,q.INVCUBIC_MODE=6,q.EQUIRECTANGULAR_MODE=7,q.FIXED_EQUIRECTANGULAR_MODE=8,q.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,q.CLAMP_ADDRESSMODE=0,q.WRAP_ADDRESSMODE=1,q.MIRROR_ADDRESSMODE=2,q.UseSerializedUrlIfAny=!1,(0,P.e)([(0,p.M)()],q.prototype,"url",void 0),(0,P.e)([(0,p.M)()],q.prototype,"uOffset",void 0),(0,P.e)([(0,p.M)()],q.prototype,"vOffset",void 0),(0,P.e)([(0,p.M)()],q.prototype,"uScale",void 0),(0,P.e)([(0,p.M)()],q.prototype,"vScale",void 0),(0,P.e)([(0,p.M)()],q.prototype,"uAng",void 0),(0,P.e)([(0,p.M)()],q.prototype,"vAng",void 0),(0,P.e)([(0,p.M)()],q.prototype,"wAng",void 0),(0,P.e)([(0,p.M)()],q.prototype,"uRotationCenter",void 0),(0,P.e)([(0,p.M)()],q.prototype,"vRotationCenter",void 0),(0,P.e)([(0,p.M)()],q.prototype,"wRotationCenter",void 0),(0,P.e)([(0,p.M)()],q.prototype,"homogeneousRotationInUVTransform",void 0),(0,P.e)([(0,p.M)()],q.prototype,"isBlocking",null),(0,z.h)("BABYLON.Texture",q),C.c._TextureParser=q.Parse},12465:(e,d,v)=>{v.d(d,{d:()=>p});var P=v(12420);class p{constructor(e,d,v,p){this.normal=new P.mv(e,d,v),this.d=p}Yd(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new p(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let e=this.normal.getHashCode();return e=397*e^this.d,e}normalize(){const e=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let d=0;return 0!==e&&(d=1/e),this.normal.x*=d,this.normal.y*=d,this.normal.z*=d,this.d*=d,this}transform(e){const d=p._TmpMatrix;e.invertToRef(d);const v=d.m,P=this.normal.x,L=this.normal.y,B=this.normal.z,X=this.d,z=P*v[0]+L*v[1]+B*v[2]+X*v[3],W=P*v[4]+L*v[5]+B*v[6]+X*v[7],V=P*v[8]+L*v[9]+B*v[10]+X*v[11],k=P*v[12]+L*v[13]+B*v[14]+X*v[15];return new p(z,W,V,k)}dotCoordinate(e){return this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z+this.d}copyFromPoints(e,d,v){const P=d.x-e.x,p=d.y-e.y,L=d.z-e.z,B=v.x-e.x,X=v.y-e.y,z=v.z-e.z,W=p*z-L*X,V=L*B-P*z,k=P*X-p*B,g=Math.sqrt(W*W+V*V+k*k);let F;return F=0!==g?1/g:0,this.normal.x=W*F,this.normal.y=V*F,this.normal.z=k*F,this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),this}isFrontFacingTo(e,d){return P.mv.Dot(this.normal,e)<=d}signedDistanceTo(e){return P.mv.Dot(e,this.normal)+this.d}static Nd(e){return new p(e[0],e[1],e[2],e[3])}static FromPoints(e,d,v){const P=new p(0,0,0,0);return P.copyFromPoints(e,d,v),P}static FromPositionAndNormal(e,d){const v=new p(0,0,0,0);return this.FromPositionAndNormalToRef(e,d,v)}static FromPositionAndNormalToRef(e,d,v){return v.normal.L(d),v.normal.normalize(),v.d=-e.dot(v.normal),v}static SignedDistanceToPlaneFromPositionAndNormal(e,d,v){const p=-(d.x*e.x+d.y*e.y+d.z*e.z);return P.mv.Dot(v,d)+p}}p._TmpMatrix=P.Matrix.Identity()},12451:(e,d,v)=>{v.d(d,{c:()=>P});class P{constructor(e,d){this.width=e,this.height=d}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let e=0|this.width;return e=397*e^this.height,e}L(e){this.width=e.width,this.height=e.height}Ed(e,d){return this.width=e,this.height=d,this}set(e,d){return this.Ed(e,d)}multiplyByFloats(e,d){return new P(this.width*e,this.height*d)}clone(){return new P(this.width,this.height)}equals(e){return!!e&&(this.width===e.width&&this.height===e.height)}get surface(){return this.width*this.height}static Zero(){return new P(0,0)}add(e){return new P(this.width+e.width,this.height+e.height)}Zd(e){return new P(this.width-e.width,this.height-e.height)}scale(e){return new P(this.width*e,this.height*e)}static Lerp(e,d,v){const p=e.width+(d.width-e.width)*v,L=e.height+(d.height-e.height)*v;return new P(p,L)}}},12413:(e,d,v)=>{v.d(d,{b:()=>L,f:()=>B});const P={},p={};function L(e){const d=e.getClassName();return p[d]||(p[d]={}),p[d]}function B(e){const d=e.getClassName();if(P[d])return P[d];P[d]={};const v=P[d];let L=e,B=d;for(;B;){const e=p[B];for(const p in e)v[p]=e[p];let d,P=!1;do{if(d=Object.getPrototypeOf(L),!d.getClassName){P=!0;break}if(d.getClassName()!==B)break;L=d}while(d);if(P)break;B=d.getClassName(),L=d}return v}},12409:(e,d,v)=>{v.d(d,{C:()=>X,G:()=>V,J:()=>k,M:()=>B,d:()=>L,e:()=>C,i:()=>F,l:()=>z,p:()=>w,s:()=>W,t:()=>G,u:()=>D,x:()=>g,z:()=>U});var P=v(12413);function p(e,d){return(v,p)=>{const L=(0,P.b)(v);L[p]||(L[p]={type:e,sourceName:d})}}function L(e){return function(e){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(v,P)=>{const p=d||"_"+P;Object.defineProperty(v,P,{get:function(){return this[p]},set:function(d){var P;"function"===typeof(null===(P=this[p])||void 0===P?void 0:P.equals)&&this[p].equals(d)||this[p]!==d&&(this[p]=d,v[e].apply(this))},enumerable:!0,configurable:!0})}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function B(e){return p(0,e)}function X(e){return p(1,e)}function z(e){return p(2,e)}function W(e){return p(3,e)}function V(e){return p(4,e)}function k(e){return p(5,e)}function g(e){return p(6,e)}function F(e){return p(7,e)}function w(e){return p(8,e)}function G(e){return p(9,e)}function U(e){return p(10,e)}function D(e){return p(12,e)}function C(e,d,v,P){const p=v.value;v.value=function(){let v=p;if("undefined"!==typeof _native&&_native[d]){const e=_native[d];v=P?function(){return P(...arguments)?e(...arguments):p(...arguments)}:e}return e[d]=v,v(...arguments)}}C.filter=function(e){return(d,v,P)=>C(d,v,P,e)}},12453:(e,d,v)=>{v.d(d,{c:()=>W});var P=v(12268),p=v(12457),L=v(12463),B=v(12420),X=v(12413);const z=function(e,d,v){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const L=e();p.d&&p.d.HasTags(d)&&p.d.AddTagsTo(L,p.d.GetTags(d,!0));const B=(0,X.f)(L),z={};for(const p in B){const e=B[p],X=d[p],V=e.type;if(void 0!==X&&null!==X&&("uniqueId"!==p||W.AllowLoadingUniqueId))switch(V){case 0:case 6:case 9:case 11:L[p]=X;break;case 1:P.cloneTexturesOnlyOnce&&z[X.uniqueId]?L[p]=z[X.uniqueId]:(L[p]=v||X.isRenderTarget?X:X.clone(),z[X.uniqueId]=L[p]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:L[p]=v?X:X.clone()}}return L};class W{static AppendSerializedAnimations(e,d){if(e.animations){d.animations=[];for(let v=0;v<e.animations.length;v++){const P=e.animations[v];d.animations.push(P.serialize())}}}static Serialize(e,d){d||(d={}),p.d&&(d.tags=p.d.GetTags(e));const v=(0,X.f)(e);for(const P in v){const p=v[P],L=p.sourceName||P,B=p.type,X=e[P];if(void 0!==X&&null!==X&&("uniqueId"!==P||W.AllowLoadingUniqueId))switch(B){case 0:d[L]=X;break;case 1:case 3:case 7:case 9:d[L]=X.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:d[L]=X.Yd();break;case 6:case 11:d[L]=X.id}}return d}static ParseProperties(e,d,v,P){P||(P="");const p=(0,X.f)(d);for(const X in p){const z=p[X],V=e[z.sourceName||X],k=z.type;if(void 0!==V&&null!==V&&("uniqueId"!==X||W.AllowLoadingUniqueId)){const e=d;switch(k){case 0:e[X]=V;break;case 1:v&&(e[X]=W._TextureParser(V,v,P));break;case 2:e[X]=L.Kd.Nd(V);break;case 3:e[X]=W._FresnelParametersParser(V);break;case 4:e[X]=B.Vector2.Nd(V);break;case 5:e[X]=B.mv.Nd(V);break;case 6:v&&(e[X]=v.getLastMeshById(V));break;case 7:e[X]=W._ColorCurvesParser(V);break;case 8:e[X]=L.Up.Nd(V);break;case 9:e[X]=W._ImageProcessingConfigurationParser(V);break;case 10:e[X]=B.Quaternion.Nd(V);break;case 11:v&&(e[X]=v.getCameraById(V));break;case 12:e[X]=B.Matrix.Nd(V)}}}}static Parse(e,d,v){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const L=e();return p.d&&p.d.AddTagsTo(L,d.tags),W.ParseProperties(d,L,v,P),L}static Clone(e,d){return z(e,d,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(e,d){return z(e,d,!0)}}W.AllowLoadingUniqueId=!1,W._ImageProcessingConfigurationParser=e=>{throw(0,P.e)("ImageProcessingConfiguration")},W._FresnelParametersParser=e=>{throw(0,P.e)("FresnelParameters")},W._ColorCurvesParser=e=>{throw(0,P.e)("ColorCurves")},W._TextureParser=(e,d,v)=>{throw(0,P.e)("Texture")}},12457:(e,d,v)=>{v.d(d,{d:()=>p});class P{static Eval(e,d){return"true"===(e=e.match(/\([^()]*\)/g)?e.replace(/\([^()]*\)/g,(e=>(e=e.slice(1,e.length-1),P._HandleParenthesisContent(e,d)))):P._HandleParenthesisContent(e,d))||"false"!==e&&P.Eval(e,d)}static _HandleParenthesisContent(e,d){let v;d=d||(e=>"true"===e);const p=e.split("||");for(const L in p)if(Object.prototype.hasOwnProperty.call(p,L)){let e=P._SimplifyNegation(p[L].trim());const B=e.split("&&");if(B.length>1)for(let p=0;p<B.length;++p){const L=P._SimplifyNegation(B[p].trim());if(v="true"!==L&&"false"!==L?"!"===L[0]?!d(L.substring(1)):d(L):"true"===L,!v){e="false";break}}if(v||"true"===e){v=!0;break}v="true"!==e&&"false"!==e?"!"===e[0]?!d(e.substring(1)):d(e):"true"===e}return v?"true":"false"}static _SimplifyNegation(e){return"!true"===(e=(e=e.replace(/^[\s!]+/,(e=>(e=e.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?e="false":"!false"===e&&(e="true"),e}}class p{static EnableFor(e){e._tags=e._tags||{},e.hasTags=()=>p.HasTags(e),e.addTags=d=>p.AddTagsTo(e,d),e.removeTags=d=>p.RemoveTagsFrom(e,d),e.matchesTagsQuery=d=>p.MatchesQuery(e,d)}static DisableFor(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery}static HasTags(e){if(!e._tags)return!1;const d=e._tags;for(const v in d)if(Object.prototype.hasOwnProperty.call(d,v))return!0;return!1}static GetTags(e){let d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e._tags)return null;if(d){const d=[];for(const v in e._tags)Object.prototype.hasOwnProperty.call(e._tags,v)&&!0===e._tags[v]&&d.push(v);return d.join(" ")}return e._tags}static AddTagsTo(e,d){if(!d)return;if("string"!==typeof d)return;const v=d.split(" ");for(const P of v)p._AddTagTo(e,P)}static _AddTagTo(e,d){""!==(d=d.trim())&&"true"!==d&&"false"!==d&&(d.match(/[\s]/)||d.match(/^([!]|([|]|[&]){2})/)||(p.EnableFor(e),e._tags[d]=!0))}static RemoveTagsFrom(e,d){if(!p.HasTags(e))return;const v=d.split(" ");for(const P in v)p._RemoveTagFrom(e,v[P])}static _RemoveTagFrom(e,d){delete e._tags[d]}static MatchesQuery(e,d){return void 0===d||(""===d?p.HasTags(e):P.Eval(d,(d=>p.HasTags(e)&&e._tags[d])))}}},12403:(e,d,v)=>{v.d(d,{e:()=>P});function P(e,d,v,P){var p,L=arguments.length,B=L<3?d:null===P?P=Object.getOwnPropertyDescriptor(d,v):P;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)B=Reflect.decorate(e,d,v,P);else for(var X=e.length-1;X>=0;X--)(p=e[X])&&(B=(L<3?p(B):L>3?p(d,v,B):p(d,v))||B);return L>3&&B&&Object.defineProperty(d,v,B),B}Object.create;Object.create}}]);