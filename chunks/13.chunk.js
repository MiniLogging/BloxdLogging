"use strict";(self.a14qw1h7fq=self.a14qw1h7fq||[]).push([[13],{11238:(R,J,B)=>{B.d(J,{c:()=>Q});let Q=!1},11209:(R,J,B)=>{B.d(J,{c:()=>E});var Q=B(11167),h=B(11176),y=B(11032),N=B(11186),r=B(11065),q=B(11148),e=(B(11073),B(11215));class D{get wrapU(){return this._wrapU}set wrapU(R){this._wrapU=R}get wrapV(){return this._wrapV}set wrapV(R){this._wrapV=R}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(R){this._texture&&(this._texture.isCube=R)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(R){this._texture&&(this._texture.is3D=R)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(R){this._texture&&(this._texture.is2DArray=R)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(R){return void 0!==(null===R||void 0===R?void 0:R.shareDepth)}constructor(R){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=e.b.Zero(),this._cachedBaseSize=e.b.Zero(),this._initialSamplingMode=2,this._texture=D._IsRenderTargetWrapper(R)?R.texture:R,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(R){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(R,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var l=B(11217);class E extends D{set bh(R){this._hasAlpha!==R&&(this._hasAlpha=R,this._scene&&this._scene.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))))}get bh(){return this._hasAlpha}set getAlphaFromRGB(R){this._getAlphaFromRGB!==R&&(this._getAlphaFromRGB=R,this._scene&&this._scene.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(R){this._coordinatesIndex!==R&&(this._coordinatesIndex=R,this._scene&&this._scene.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(R){this._coordinatesMode!==R&&(this._coordinatesMode=R,this._scene&&this._scene.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(R){this._wrapU=R}get wrapV(){return this._wrapV}set wrapV(R){this._wrapV=R}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(R){this._texture?this._texture.isCube=R:this._isCube=R}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(R){this._texture&&(this._texture.is3D=R)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(R){this._texture&&(this._texture.is2DArray=R)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(R){var J;if(this._texture){if(this._texture._gammaSpace===R)return;this._texture._gammaSpace=R}else{if(this._gammaSpace===R)return;this._gammaSpace=R}null===(J=this.IR())||void 0===J||J.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(R){var J;R!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=R),null===(J=this.IR())||void 0===J||J.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(R){this._texture&&(this._texture._lodGenerationOffset=R)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(R){this._texture&&(this._texture._lodGenerationScale=R)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(R){this._texture&&(this._texture._linearSpecularLOD=R)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(R){this._texture&&(this._texture._irradianceTexture=R)}get uid(){return this._uid||(this._uid=(0,q.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(R){this._onDisposeObserver&&this.eh.remove(this._onDisposeObserver),this._onDisposeObserver=this.eh.add(R)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=E.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.eh=new y.e,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,R?E._IsScene(R)?this._scene=R:this._engine=R:this._scene=r.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=J,this._uid=null}IR(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return N.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return N.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(R){}get canRescale(){return!1}_getFromCache(R,J,B,Q,h,y){const N=this._getEngine();if(!N)return null;const r=N._getUseSRGBBuffer(!!h,J),q=N.getLoadedTexturesCache();for(let e=0;e<q.length;e++){const N=q[e];if((void 0===h||r===N._useSRGBBuffer)&&(void 0===Q||Q===N.invertY)&&N.url===R&&N.generateMipMaps===!J&&(!B||B===N.samplingMode)&&(void 0===y||y===N.isCube))return N.incrementReferences(),N}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const R=this.IR();R&&R.markAllMaterialsAsDirty(1)}readPixels(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,q=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const e=this._getEngine();if(!e)return null;const D=this.getSize();let l=D.width,E=D.height;0!==J&&(l/=Math.pow(2,J),E/=Math.pow(2,J),l=Math.round(l),E=Math.round(E)),r=Math.min(l,r),q=Math.min(E,q);try{return this._texture.isCube?e._readTexturePixels(this._texture,r,q,R,J,B,Q,h,y,N):e._readTexturePixels(this._texture,r,q,-1,J,B,Q,h,y,N)}catch(O){return null}}_readPixelsSync(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const y=this.getSize();let N=y.width,r=y.height;const q=this._getEngine();if(!q)return null;0!=J&&(N/=Math.pow(2,J),r/=Math.pow(2,J),N=Math.round(N),r=Math.round(r));try{return this._texture.isCube?q._readTexturePixelsSync(this._texture,N,r,R,J,B,Q,h):q._readTexturePixelsSync(this._texture,N,r,-1,J,B,Q,h)}catch(e){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const R=this._scene.textures.indexOf(this);if(R>=0&&this._scene.textures.splice(R,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const R=this._parentContainer.textures.indexOf(this);R>-1&&this._parentContainer.textures.splice(R,1),this._parentContainer=null}}this.eh.notifyObservers(this),this.eh.clear(),this.metadata=null,super.dispose()}serialize(){let R=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!R)return null;const J=l.c.Serialize(this);return l.c.AppendSerializedAnimations(this,J),J}static WhenAllReady(R,J){let B=R.length;if(0!==B)for(let Q=0;Q<R.length;Q++){const h=R[Q];if(h.isReady())0===--B&&J();else{const R=h.onLoadObservable;R?R.addOnce((()=>{0===--B&&J()})):0===--B&&J()}}else J()}static _IsScene(R){return"Scene"===R.getClassName()}}E.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,Q.e)([(0,h.N)()],E.prototype,"uniqueId",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"name",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"displayName",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"metadata",void 0),(0,Q.e)([(0,h.N)("bh")],E.prototype,"_hasAlpha",void 0),(0,Q.e)([(0,h.N)("getAlphaFromRGB")],E.prototype,"_getAlphaFromRGB",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"level",void 0),(0,Q.e)([(0,h.N)("coordinatesIndex")],E.prototype,"_coordinatesIndex",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"optimizeUVAllocation",void 0),(0,Q.e)([(0,h.N)("coordinatesMode")],E.prototype,"_coordinatesMode",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"wrapU",null),(0,Q.e)([(0,h.N)()],E.prototype,"wrapV",null),(0,Q.e)([(0,h.N)()],E.prototype,"wrapR",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"anisotropicFilteringLevel",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"isCube",null),(0,Q.e)([(0,h.N)()],E.prototype,"is3D",null),(0,Q.e)([(0,h.N)()],E.prototype,"is2DArray",null),(0,Q.e)([(0,h.N)()],E.prototype,"gammaSpace",null),(0,Q.e)([(0,h.N)()],E.prototype,"invertZ",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"lodLevelInAlpha",void 0),(0,Q.e)([(0,h.N)()],E.prototype,"lodGenerationOffset",null),(0,Q.e)([(0,h.N)()],E.prototype,"lodGenerationScale",null),(0,Q.e)([(0,h.N)()],E.prototype,"linearSpecularLOD",null),(0,Q.e)([(0,h.D)()],E.prototype,"irradianceTexture",null),(0,Q.e)([(0,h.N)()],E.prototype,"isRenderTarget",void 0)},11161:(R,J,B)=>{B.d(J,{d:()=>f});var Q=B(11167),h=B(11176),y=B(11032),N=B(11186),r=B(11209),q=B(11142),e=B(11056),D=B(11090),l=B(11138),E=B(11232),O=B(11079);function n(R,J){let B=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const Q=J.width,h=J.height;if(R instanceof Float32Array){let J=R.byteLength/R.BYTES_PER_ELEMENT;const B=new Uint8Array(J);for(;--J>=0;){let Q=R[J];Q<0?Q=0:Q>1&&(Q=1),B[J]=255*Q}R=B}const y=document.createElement("canvas");y.width=Q,y.height=h;const N=y.getContext("2d");if(!N)return null;const r=N.createImageData(Q,h);if(r.data.set(R),N.putImageData(r,0,0),B){const R=document.createElement("canvas");R.width=Q,R.height=h;const J=R.getContext("2d");return J?(J.translate(0,h),J.scale(1,-1),J.drawImage(y,0,0),R.toDataURL("image/png")):null}return y.toDataURL("image/png")}function P(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Q=R.getInternalTexture();if(!Q)return null;const h=R._readPixelsSync(J,B);return h?n(h,R.getSize(),Q.invertY):null}async function A(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Q=R.getInternalTexture();if(!Q)return null;const h=await R.readPixels(J,B);return h?n(h,R.getSize(),Q.invertY):null}var u=B(11238),S=B(11217);class f extends r.c{static _CreateVideoTexture(R,J,B){arguments.length>5&&void 0!==arguments[5]||f.TRILINEAR_SAMPLINGMODE;throw(0,e.c)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(R){this._isBlocking=R}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(R,J,B,Q){let h,N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TRILINEAR_SAMPLINGMODE,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,e=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],E=arguments.length>9?arguments[9]:void 0,O=arguments.length>10?arguments[10]:void 0,n=arguments.length>11?arguments[11]:void 0,P=arguments.length>12?arguments[12]:void 0,A=arguments.length>13?arguments[13]:void 0;super(J),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new y.e,this._isBlocking=!0,this.name=R||"",this.url=R;let S=!1,a=null,s=!0;"object"===typeof B&&null!==B?(h=B.noMipmap??!1,Q=B.invertY??!u.c,N=B.samplingMode??f.TRILINEAR_SAMPLINGMODE,r=B.t??null,q=B.onError??null,e=B.buffer??null,l=B.deleteBuffer??!1,E=B.format,O=B.mimeType,n=B.loaderOptions,P=B.creationFlags,S=B.useSRGBBuffer??!1,a=B.internalTexture??null,s=B.gammaSpace??s,A=B.forcedExtension??A):h=!!B,this._gammaSpace=s,this._noMipmap=h,this._invertY=void 0===Q?!u.c:Q,this._initialSamplingMode=N,this._buffer=e,this._deleteBuffer=l,this._mimeType=O,this._loaderOptions=n,this._creationFlags=P,this._useSRGBBuffer=S,this._forcedExtension=A,void 0!==E&&(this._format=E);const x=this.IR(),I=this._getEngine();if(!I)return;I.onBeforeTextureInitObservable.notifyObservers(this);const V=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),r&&r(),!this.isBlocking&&x&&x.resetCachedMaterial()},M=(R,J)=>{this._loadingError=!0,this._errorObject={message:R,exception:J},q&&q(R,J),f.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!a)return this._delayedOnLoad=V,void(this._delayedOnError=M);if(this._texture=a??this._getFromCache(this.url,h,N,this._invertY,S,this.isCube),this._texture)if(this._texture.isReady)D.d.SetImmediate((()=>V()));else{const R=this._texture.onLoadedObservable.add(V);this._texture.onErrorObservable.add((J=>{var B;M(J.message,J.exception),null===(B=this._texture)||void 0===B||B.onLoadedObservable.remove(R)}))}else if(x&&x.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=V,this._delayedOnError=M;else{try{this._texture=I.createTexture(this.url,h,this._invertY,x,N,V,M,this._buffer,void 0,this._format,this._forcedExtension,O,n,P,S)}catch(H){throw M("error loading",H),H}l&&(this._buffer=null)}}updateURL(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,B=arguments.length>2?arguments[2]:void 0,Q=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.IR().markAllMaterialsAsDirty(1,(R=>R.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=R),this.url=R,this._buffer=J,this._forcedExtension=Q,this.delayLoadState=4,B&&(this._delayedOnLoad=B),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const R=this.IR();R&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?D.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=R.getEngine().createTexture(this.url,this._noMipmap,this._invertY,R,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(R,J,B,Q){R*=this._cachedUScale,J*=this._cachedVScale,R-=this.uRotationCenter*this._cachedUScale,J-=this.vRotationCenter*this._cachedVScale,B-=this.wRotationCenter,N.nJ.TransformCoordinatesFromFloatsToRef(R,J,B,this._rowGenerationMatrix,Q),Q.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,Q.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,Q.z+=this.wRotationCenter}getTextureMatrix(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*R===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*R,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=N.Matrix.Zero(),this._rowGenerationMatrix=new N.Matrix,this._t0=N.nJ.Zero(),this._t1=N.nJ.Zero(),this._t2=N.nJ.Zero()),N.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(N.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,N.TmpVectors.Matrix[0]),N.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,N.TmpVectors.Matrix[1]),N.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,N.TmpVectors.Matrix[2]),N.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,N.TmpVectors.Matrix[3]),N.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.ul(this._t0),this._t2.ul(this._t0),N.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const J=this.IR();if(!J)return this._cachedTextureMatrix;const B=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&B!==this._cachedIdentity3x2&&J.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const R=this.IR();if(!R)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==f.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===R.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=N.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=N.Matrix.Zero());const J=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case f.PLANAR_MODE:N.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case f.PROJECTION_MODE:{N.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const J=R.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=J.updateFlag,J.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:N.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return J&&R.markAllMaterialsAsDirty(1,(R=>R.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const R={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,t:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return S.c.Clone((()=>new f(this._texture?this._texture.url:null,this.IR(),R)),this)}serialize(){var R;const J=this.name;f.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const B=super.serialize(f._SerializeInternalTextureUniqueId);if(!B)return null;if(f.SerializeBuffers||f.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))B.base64String=this._buffer,B.name=B.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const R=this.mimeType||"image/png";B.base64String=`data:${R};base64,${(0,O.j)(this._buffer)}`}else(f.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(B.base64String=!this._engine||this._engine._features.supportSyncTextureRead?P(this):A(this));var Q;(B.invertY=this._invertY,B.samplingMode=this.samplingMode,B._creationFlags=this._creationFlags,B._useSRGBBuffer=this._useSRGBBuffer,f._SerializeInternalTextureUniqueId)&&(B.internalTextureUniqueId=null===(Q=this._texture)||void 0===Q?void 0:Q.uniqueId);return B.internalTextureLabel=null===(R=this._texture)||void 0===R?void 0:R.label,B.noMipmap=this._noMipmap,this.name=J,B}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(R,J,B){if(R.customType){const Q=l.c.Instantiate(R.customType).Parse(R,J,B);return R.samplingMode&&Q.updateSamplingMode&&Q._samplingMode&&Q._samplingMode!==R.samplingMode&&Q.updateSamplingMode(R.samplingMode),Q}if(R.isCube&&!R.isRenderTarget)return f._CubeTextureParser(R,J,B);const Q=void 0!==R.internalTextureUniqueId;if(!R.name&&!R.isRenderTarget&&!Q)return null;let h;if(Q){const B=J.getEngine().getLoadedTexturesCache();for(const J of B)if(J.uniqueId===R.internalTextureUniqueId){h=J;break}}const y=J=>{if(J&&J._texture&&(J._texture._cachedWrapU=null,J._texture._cachedWrapV=null,J._texture._cachedWrapR=null),R.samplingMode){const B=R.samplingMode;J&&J.samplingMode!==B&&J.updateSamplingMode(B)}if(J&&R.animations)for(let B=0;B<R.animations.length;B++){const Q=R.animations[B],h=(0,q.e)("BABYLON.Animation");h&&J.animations.push(h.Parse(Q))}J&&J._texture&&(Q&&!h&&J._texture._setUniqueId(R.internalTextureUniqueId),J._texture.label=R.internalTextureLabel)};return S.c.Parse((()=>{let Q=!0;if(R.noMipmap&&(Q=!1),R.mirrorPlane){const B=f._CreateMirror(R.name,R.renderTargetSize,J,Q);return B._waitingRenderList=R.renderList,B.mirrorPlane=E.b.fJ(R.mirrorPlane),y(B),B}if(R.isRenderTarget){let B=null;if(R.isCube){if(J.reflectionProbes)for(let Q=0;Q<J.reflectionProbes.length;Q++){const B=J.reflectionProbes[Q];if(B.name===R.name)return B.cubeTexture}}else B=f._CreateRenderTargetTexture(R.name,R.renderTargetSize,J,Q,R._creationFlags??0),B._waitingRenderList=R.renderList;return y(B),B}if(R.isVideo){const h=f._CreateVideoTexture(B+(R.url||R.name),B+(R.src||R.url),J,Q,R.invertY,R.samplingMode,R.settings||{});return y(h),h}{let N;if(R.base64String&&!h)N=f.CreateFromBase64String(R.base64String,R.base64String,J,!Q,R.invertY,R.samplingMode,(()=>{y(N)}),R._creationFlags??0,R._useSRGBBuffer??!1),N.name=R.name;else{let r;r=R.name&&(R.name.indexOf("://")>0||R.name.startsWith("data:"))?R.name:B+R.name,R.url&&(R.url.startsWith("data:")||f.UseSerializedUrlIfAny)&&(r=R.url);const q={noMipmap:!Q,invertY:R.invertY,samplingMode:R.samplingMode,t:()=>{y(N)},internalTexture:h};N=new f(r,J,q)}return N}}),R,J)}static CreateFromBase64String(R,J,B,Q,h){let y=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.TRILINEAR_SAMPLINGMODE;return new f("data:"+J,B,Q,h,y,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,R,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(R,J,B){let Q=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0,y=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.TRILINEAR_SAMPLINGMODE,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,q=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,e=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,D=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0;return"data:"!==R.substring(0,5)&&(R="data:"+R),new f(R,B,h,y,N,r,q,J,Q,e,void 0,void 0,D,l)}}f.SerializeBuffers=!0,f.ForceSerializeBuffers=!1,f.OnTextureLoadErrorObservable=new y.e,f._SerializeInternalTextureUniqueId=!1,f._CubeTextureParser=(R,J,B)=>{throw(0,e.c)("CubeTexture")},f._CreateMirror=(R,J,B,Q)=>{throw(0,e.c)("MirrorTexture")},f._CreateRenderTargetTexture=(R,J,B,Q,h)=>{throw(0,e.c)("RenderTargetTexture")},f.NEAREST_SAMPLINGMODE=1,f.NEAREST_NEAREST_MIPLINEAR=8,f.BILINEAR_SAMPLINGMODE=2,f.LINEAR_LINEAR_MIPNEAREST=11,f.TRILINEAR_SAMPLINGMODE=3,f.LINEAR_LINEAR_MIPLINEAR=3,f.NEAREST_NEAREST_MIPNEAREST=4,f.NEAREST_LINEAR_MIPNEAREST=5,f.NEAREST_LINEAR_MIPLINEAR=6,f.NEAREST_LINEAR=7,f.NEAREST_NEAREST=1,f.LINEAR_NEAREST_MIPNEAREST=9,f.LINEAR_NEAREST_MIPLINEAR=10,f.LINEAR_LINEAR=2,f.LINEAR_NEAREST=12,f.EXPLICIT_MODE=0,f.SPHERICAL_MODE=1,f.PLANAR_MODE=2,f.CUBIC_MODE=3,f.PROJECTION_MODE=4,f.SKYBOX_MODE=5,f.INVCUBIC_MODE=6,f.EQUIRECTANGULAR_MODE=7,f.FIXED_EQUIRECTANGULAR_MODE=8,f.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,f.CLAMP_ADDRESSMODE=0,f.WRAP_ADDRESSMODE=1,f.MIRROR_ADDRESSMODE=2,f.UseSerializedUrlIfAny=!1,(0,Q.e)([(0,h.N)()],f.prototype,"url",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"uOffset",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"vOffset",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"uScale",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"vScale",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"uAng",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"vAng",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"wAng",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"uRotationCenter",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"vRotationCenter",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"wRotationCenter",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"homogeneousRotationInUVTransform",void 0),(0,Q.e)([(0,h.N)()],f.prototype,"isBlocking",null),(0,q.h)("BABYLON.Texture",f),S.c._TextureParser=f.Parse},11232:(R,J,B)=>{B.d(J,{b:()=>h});var Q=B(11186);class h{constructor(R,J,B,h){this.normal=new Q.nJ(R,J,B),this.d=h}Ch(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new h(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let R=this.normal.getHashCode();return R=397*R^this.d,R}normalize(){const R=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let J=0;return 0!==R&&(J=1/R),this.normal.x*=J,this.normal.y*=J,this.normal.z*=J,this.d*=J,this}transform(R){const J=h._TmpMatrix;R.invertToRef(J);const B=J.m,Q=this.normal.x,y=this.normal.y,N=this.normal.z,r=this.d,q=Q*B[0]+y*B[1]+N*B[2]+r*B[3],e=Q*B[4]+y*B[5]+N*B[6]+r*B[7],D=Q*B[8]+y*B[9]+N*B[10]+r*B[11],l=Q*B[12]+y*B[13]+N*B[14]+r*B[15];return new h(q,e,D,l)}dotCoordinate(R){return this.normal.x*R.x+this.normal.y*R.y+this.normal.z*R.z+this.d}copyFromPoints(R,J,B){const Q=J.x-R.x,h=J.y-R.y,y=J.z-R.z,N=B.x-R.x,r=B.y-R.y,q=B.z-R.z,e=h*q-y*r,D=y*N-Q*q,l=Q*r-h*N,E=Math.sqrt(e*e+D*D+l*l);let O;return O=0!==E?1/E:0,this.normal.x=e*O,this.normal.y=D*O,this.normal.z=l*O,this.d=-(this.normal.x*R.x+this.normal.y*R.y+this.normal.z*R.z),this}isFrontFacingTo(R,J){return Q.nJ.Dot(this.normal,R)<=J}signedDistanceTo(R){return Q.nJ.Dot(R,this.normal)+this.d}static fJ(R){return new h(R[0],R[1],R[2],R[3])}static FromPoints(R,J,B){const Q=new h(0,0,0,0);return Q.copyFromPoints(R,J,B),Q}static FromPositionAndNormal(R,J){const B=new h(0,0,0,0);return this.FromPositionAndNormalToRef(R,J,B)}static FromPositionAndNormalToRef(R,J,B){return B.normal.h(J),B.normal.normalize(),B.d=-R.dot(B.normal),B}static SignedDistanceToPlaneFromPositionAndNormal(R,J,B){const h=-(J.x*R.x+J.y*R.y+J.z*R.z);return Q.nJ.Dot(B,J)+h}}h._TmpMatrix=Q.Matrix.Identity()},11215:(R,J,B)=>{B.d(J,{b:()=>Q});class Q{constructor(R,J){this.width=R,this.height=J}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let R=0|this.width;return R=397*R^this.height,R}h(R){this.width=R.width,this.height=R.height}Ar(R,J){return this.width=R,this.height=J,this}set(R,J){return this.Ar(R,J)}multiplyByFloats(R,J){return new Q(this.width*R,this.height*J)}clone(){return new Q(this.width,this.height)}equals(R){return!!R&&(this.width===R.width&&this.height===R.height)}get surface(){return this.width*this.height}static Zero(){return new Q(0,0)}add(R){return new Q(this.width+R.width,this.height+R.height)}PJ(R){return new Q(this.width-R.width,this.height-R.height)}scale(R){return new Q(this.width*R,this.height*R)}static Lerp(R,J,B){const h=R.width+(J.width-R.width)*B,y=R.height+(J.height-R.height)*B;return new Q(h,y)}}},11181:(R,J,B)=>{B.d(J,{e:()=>y,i:()=>N});const Q={},h={};function y(R){const J=R.getClassName();return h[J]||(h[J]={}),h[J]}function N(R){const J=R.getClassName();if(Q[J])return Q[J];Q[J]={};const B=Q[J];let y=R,N=J;for(;N;){const R=h[N];for(const h in R)B[h]=R[h];let J,Q=!1;do{if(J=Object.getPrototypeOf(y),!J.getClassName){Q=!0;break}if(J.getClassName()!==N)break;y=J}while(J);if(Q)break;N=J.getClassName(),y=J}return B}},11176:(R,J,B)=>{B.d(J,{D:()=>r,H:()=>D,L:()=>l,N:()=>N,b:()=>y,d:()=>S,g:()=>O,j:()=>q,m:()=>n,n:()=>e,q:()=>P,u:()=>u,y:()=>E,z:()=>A});var Q=B(11181);function h(R,J){return(B,h)=>{const y=(0,Q.e)(B);y[h]||(y[h]={type:R,sourceName:J})}}function y(R){return function(R){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(B,Q)=>{const h=J||"_"+Q;Object.defineProperty(B,Q,{get:function(){return this[h]},set:function(J){var Q;"function"===typeof(null===(Q=this[h])||void 0===Q?void 0:Q.equals)&&this[h].equals(J)||this[h]!==J&&(this[h]=J,B[R].apply(this))},enumerable:!0,configurable:!0})}}(R,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function N(R){return h(0,R)}function r(R){return h(1,R)}function q(R){return h(2,R)}function e(R){return h(3,R)}function D(R){return h(4,R)}function l(R){return h(5,R)}function E(R){return h(6,R)}function O(R){return h(7,R)}function n(R){return h(8,R)}function P(R){return h(9,R)}function A(R){return h(10,R)}function u(R){return h(12,R)}function S(R,J,B,Q){const h=B.value;B.value=function(){let B=h;if("undefined"!==typeof _native&&_native[J]){const R=_native[J];B=Q?function(){return Q(...arguments)?R(...arguments):h(...arguments)}:R}return R[J]=B,B(...arguments)}}S.filter=function(R){return(J,B,Q)=>S(J,B,Q,R)}},11217:(R,J,B)=>{B.d(J,{c:()=>e});var Q=B(11056),h=B(11221),y=B(11224),N=B(11186),r=B(11181);const q=function(R,J,B){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const y=R();h.d&&h.d.HasTags(J)&&h.d.AddTagsTo(y,h.d.GetTags(J,!0));const N=(0,r.i)(y),q={};for(const h in N){const R=N[h],r=J[h],D=R.type;if(void 0!==r&&null!==r&&("uniqueId"!==h||e.AllowLoadingUniqueId))switch(D){case 0:case 6:case 9:case 11:y[h]=r;break;case 1:Q.cloneTexturesOnlyOnce&&q[r.uniqueId]?y[h]=q[r.uniqueId]:(y[h]=B||r.isRenderTarget?r:r.clone(),q[r.uniqueId]=y[h]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:y[h]=B?r:r.clone()}}return y};class e{static AppendSerializedAnimations(R,J){if(R.animations){J.animations=[];for(let B=0;B<R.animations.length;B++){const Q=R.animations[B];J.animations.push(Q.serialize())}}}static Serialize(R,J){J||(J={}),h.d&&(J.tags=h.d.GetTags(R));const B=(0,r.i)(R);for(const Q in B){const h=B[Q],y=h.sourceName||Q,N=h.type,r=R[Q];if(void 0!==r&&null!==r&&("uniqueId"!==Q||e.AllowLoadingUniqueId))switch(N){case 0:J[y]=r;break;case 1:case 3:case 7:case 9:J[y]=r.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:J[y]=r.Ch();break;case 6:case 11:J[y]=r.id}}return J}static ParseProperties(R,J,B,Q){Q||(Q="");const h=(0,r.i)(J);for(const r in h){const q=h[r],D=R[q.sourceName||r],l=q.type;if(void 0!==D&&null!==D&&("uniqueId"!==r||e.AllowLoadingUniqueId)){const R=J;switch(l){case 0:R[r]=D;break;case 1:B&&(R[r]=e._TextureParser(D,B,Q));break;case 2:R[r]=y.SJ.fJ(D);break;case 3:R[r]=e._FresnelParametersParser(D);break;case 4:R[r]=N.Vector2.fJ(D);break;case 5:R[r]=N.nJ.fJ(D);break;case 6:B&&(R[r]=B.getLastMeshById(D));break;case 7:R[r]=e._ColorCurvesParser(D);break;case 8:R[r]=y.ar.fJ(D);break;case 9:R[r]=e._ImageProcessingConfigurationParser(D);break;case 10:R[r]=N.Quaternion.fJ(D);break;case 11:B&&(R[r]=B.getCameraById(D));break;case 12:R[r]=N.Matrix.fJ(D)}}}}static Parse(R,J,B){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const y=R();return h.d&&h.d.AddTagsTo(y,J.tags),e.ParseProperties(J,y,B,Q),y}static Clone(R,J){return q(R,J,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(R,J){return q(R,J,!0)}}e.AllowLoadingUniqueId=!1,e._ImageProcessingConfigurationParser=R=>{throw(0,Q.c)("ImageProcessingConfiguration")},e._FresnelParametersParser=R=>{throw(0,Q.c)("FresnelParameters")},e._ColorCurvesParser=R=>{throw(0,Q.c)("ColorCurves")},e._TextureParser=(R,J,B)=>{throw(0,Q.c)("Texture")}},11221:(R,J,B)=>{B.d(J,{d:()=>h});class Q{static Eval(R,J){return"true"===(R=R.match(/\([^()]*\)/g)?R.replace(/\([^()]*\)/g,(R=>(R=R.slice(1,R.length-1),Q._HandleParenthesisContent(R,J)))):Q._HandleParenthesisContent(R,J))||"false"!==R&&Q.Eval(R,J)}static _HandleParenthesisContent(R,J){let B;J=J||(R=>"true"===R);const h=R.split("||");for(const y in h)if(Object.prototype.hasOwnProperty.call(h,y)){let R=Q._SimplifyNegation(h[y].trim());const N=R.split("&&");if(N.length>1)for(let h=0;h<N.length;++h){const y=Q._SimplifyNegation(N[h].trim());if(B="true"!==y&&"false"!==y?"!"===y[0]?!J(y.substring(1)):J(y):"true"===y,!B){R="false";break}}if(B||"true"===R){B=!0;break}B="true"!==R&&"false"!==R?"!"===R[0]?!J(R.substring(1)):J(R):"true"===R}return B?"true":"false"}static _SimplifyNegation(R){return"!true"===(R=(R=R.replace(/^[\s!]+/,(R=>(R=R.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?R="false":"!false"===R&&(R="true"),R}}class h{static EnableFor(R){R._tags=R._tags||{},R.hasTags=()=>h.HasTags(R),R.addTags=J=>h.AddTagsTo(R,J),R.removeTags=J=>h.RemoveTagsFrom(R,J),R.matchesTagsQuery=J=>h.MatchesQuery(R,J)}static DisableFor(R){delete R._tags,delete R.hasTags,delete R.addTags,delete R.removeTags,delete R.matchesTagsQuery}static HasTags(R){if(!R._tags)return!1;const J=R._tags;for(const B in J)if(Object.prototype.hasOwnProperty.call(J,B))return!0;return!1}static GetTags(R){let J=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!R._tags)return null;if(J){const J=[];for(const B in R._tags)Object.prototype.hasOwnProperty.call(R._tags,B)&&!0===R._tags[B]&&J.push(B);return J.join(" ")}return R._tags}static AddTagsTo(R,J){if(!J)return;if("string"!==typeof J)return;const B=J.split(" ");for(const Q of B)h._AddTagTo(R,Q)}static _AddTagTo(R,J){""!==(J=J.trim())&&"true"!==J&&"false"!==J&&(J.match(/[\s]/)||J.match(/^([!]|([|]|[&]){2})/)||(h.EnableFor(R),R._tags[J]=!0))}static RemoveTagsFrom(R,J){if(!h.HasTags(R))return;const B=J.split(" ");for(const Q in B)h._RemoveTagFrom(R,B[Q])}static _RemoveTagFrom(R,J){delete R._tags[J]}static MatchesQuery(R,J){return void 0===J||(""===J?h.HasTags(R):Q.Eval(J,(J=>h.HasTags(R)&&R._tags[J])))}}},11167:(R,J,B)=>{B.d(J,{e:()=>Q});function Q(R,J,B,Q){var h,y=arguments.length,N=y<3?J:null===Q?Q=Object.getOwnPropertyDescriptor(J,B):Q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)N=Reflect.decorate(R,J,B,Q);else for(var r=R.length-1;r>=0;r--)(h=R[r])&&(N=(y<3?h(N):y>3?h(J,B,N):h(J,B))||N);return y>3&&N&&Object.defineProperty(J,B,N),N}Object.create;Object.create}}]);