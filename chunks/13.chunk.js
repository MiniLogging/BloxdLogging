"use strict";(self.b15p7b72fr8=self.b15p7b72fr8||[]).push([[13],{12651:(s,k,h)=>{h.d(k,{d:()=>A});let A=!1},12614:(s,k,h)=>{h.d(k,{e:()=>a});var A=h(12570),g=h(12579),ms=h(12408),i=h(12590),K=h(12445),H=h(12552),O=(h(12448),h(12618));class c{get wrapU(){return this._wrapU}set wrapU(s){this._wrapU=s}get wrapV(){return this._wrapV}set wrapV(s){this._wrapV=s}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(s){this._texture&&(this._texture.isCube=s)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(s){this._texture&&(this._texture.is3D=s)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(s){this._texture&&(this._texture.is2DArray=s)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(s){return void 0!==(null===s||void 0===s?void 0:s.shareDepth)}constructor(s){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=O.c.Zero(),this._cachedBaseSize=O.c.Zero(),this._initialSamplingMode=2,this._texture=c._IsRenderTargetWrapper(s)?s.texture:s,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(s){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(s,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var S=h(12623);class a extends c{set Wh(s){this._hasAlpha!==s&&(this._hasAlpha=s,this._scene&&this._scene.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))))}get Wh(){return this._hasAlpha}set getAlphaFromRGB(s){this._getAlphaFromRGB!==s&&(this._getAlphaFromRGB=s,this._scene&&this._scene.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(s){this._coordinatesIndex!==s&&(this._coordinatesIndex=s,this._scene&&this._scene.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(s){this._coordinatesMode!==s&&(this._coordinatesMode=s,this._scene&&this._scene.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(s){this._wrapU=s}get wrapV(){return this._wrapV}set wrapV(s){this._wrapV=s}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(s){this._texture?this._texture.isCube=s:this._isCube=s}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(s){this._texture&&(this._texture.is3D=s)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(s){this._texture&&(this._texture.is2DArray=s)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(s){var k;if(this._texture){if(this._texture._gammaSpace===s)return;this._texture._gammaSpace=s}else{if(this._gammaSpace===s)return;this._gammaSpace=s}null===(k=this.Is())||void 0===k||k.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(s){var k;s!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=s),null===(k=this.Is())||void 0===k||k.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(s){this._texture&&(this._texture._lodGenerationOffset=s)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(s){this._texture&&(this._texture._lodGenerationScale=s)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(s){this._texture&&(this._texture._linearSpecularLOD=s)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(s){this._texture&&(this._texture._irradianceTexture=s)}get uid(){return this._uid||(this._uid=(0,H.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(s){this._onDisposeObserver&&this.Dh.remove(this._onDisposeObserver),this._onDisposeObserver=this.Dh.add(s)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=a.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Dh=new ms.c,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,s?a._IsScene(s)?this._scene=s:this._engine=s:this._scene=K.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=k,this._uid=null}Is(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return i.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return i.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(s){}get canRescale(){return!1}_getFromCache(s,k,h,A,g,ms){const i=this._getEngine();if(!i)return null;const K=i._getUseSRGBBuffer(!!g,k),H=i.getLoadedTexturesCache();for(let O=0;O<H.length;O++){const i=H[O];if((void 0===g||K===i._useSRGBBuffer)&&(void 0===A||A===i.invertY)&&i.url===s&&i.generateMipMaps===!k&&(!h||h===i.samplingMode)&&(void 0===ms||ms===i.isCube))return i.incrementReferences(),i}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const s=this.Is();s&&s.markAllMaterialsAsDirty(1)}readPixels(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,A=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4],ms=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,K=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const O=this._getEngine();if(!O)return null;const c=this.getSize();let S=c.width,a=c.height;0!==k&&(S/=Math.pow(2,k),a/=Math.pow(2,k),S=Math.round(S),a=Math.round(a)),K=Math.min(S,K),H=Math.min(a,H);try{return this._texture.isCube?O._readTexturePixels(this._texture,K,H,s,k,h,A,g,ms,i):O._readTexturePixels(this._texture,K,H,-1,k,h,A,g,ms,i)}catch(r){return null}}_readPixelsSync(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,A=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],g=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const ms=this.getSize();let i=ms.width,K=ms.height;const H=this._getEngine();if(!H)return null;0!=k&&(i/=Math.pow(2,k),K/=Math.pow(2,k),i=Math.round(i),K=Math.round(K));try{return this._texture.isCube?H._readTexturePixelsSync(this._texture,i,K,s,k,h,A,g):H._readTexturePixelsSync(this._texture,i,K,-1,k,h,A,g)}catch(O){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const s=this._scene.textures.indexOf(this);if(s>=0&&this._scene.textures.splice(s,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const s=this._parentContainer.textures.indexOf(this);s>-1&&this._parentContainer.textures.splice(s,1),this._parentContainer=null}}this.Dh.notifyObservers(this),this.Dh.clear(),this.metadata=null,super.dispose()}serialize(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!s)return null;const k=S.e.Serialize(this);return S.e.AppendSerializedAnimations(this,k),k}static WhenAllReady(s,k){let h=s.length;if(0!==h)for(let A=0;A<s.length;A++){const g=s[A];if(g.isReady())0===--h&&k();else{const s=g.onLoadObservable;s?s.addOnce((()=>{0===--h&&k()})):0===--h&&k()}}else k()}static _IsScene(s){return"Scene"===s.getClassName()}}a.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,A.e)([(0,g.J)()],a.prototype,"uniqueId",void 0),(0,A.e)([(0,g.J)()],a.prototype,"name",void 0),(0,A.e)([(0,g.J)()],a.prototype,"displayName",void 0),(0,A.e)([(0,g.J)()],a.prototype,"metadata",void 0),(0,A.e)([(0,g.J)("Wh")],a.prototype,"_hasAlpha",void 0),(0,A.e)([(0,g.J)("getAlphaFromRGB")],a.prototype,"_getAlphaFromRGB",void 0),(0,A.e)([(0,g.J)()],a.prototype,"level",void 0),(0,A.e)([(0,g.J)("coordinatesIndex")],a.prototype,"_coordinatesIndex",void 0),(0,A.e)([(0,g.J)()],a.prototype,"optimizeUVAllocation",void 0),(0,A.e)([(0,g.J)("coordinatesMode")],a.prototype,"_coordinatesMode",void 0),(0,A.e)([(0,g.J)()],a.prototype,"wrapU",null),(0,A.e)([(0,g.J)()],a.prototype,"wrapV",null),(0,A.e)([(0,g.J)()],a.prototype,"wrapR",void 0),(0,A.e)([(0,g.J)()],a.prototype,"anisotropicFilteringLevel",void 0),(0,A.e)([(0,g.J)()],a.prototype,"isCube",null),(0,A.e)([(0,g.J)()],a.prototype,"is3D",null),(0,A.e)([(0,g.J)()],a.prototype,"is2DArray",null),(0,A.e)([(0,g.J)()],a.prototype,"gammaSpace",null),(0,A.e)([(0,g.J)()],a.prototype,"invertZ",void 0),(0,A.e)([(0,g.J)()],a.prototype,"lodLevelInAlpha",void 0),(0,A.e)([(0,g.J)()],a.prototype,"lodGenerationOffset",null),(0,A.e)([(0,g.J)()],a.prototype,"lodGenerationScale",null),(0,A.e)([(0,g.J)()],a.prototype,"linearSpecularLOD",null),(0,A.e)([(0,g.E)()],a.prototype,"irradianceTexture",null),(0,A.e)([(0,g.J)()],a.prototype,"isRenderTarget",void 0)},12567:(s,k,h)=>{h.d(k,{b:()=>D});var A=h(12570),g=h(12579),ms=h(12408),i=h(12590),K=h(12614),H=h(12543),O=h(12438),c=h(12476),S=h(12534),a=h(12645),r=h(12454);function d(s,k){let h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const A=k.width,g=k.height;if(s instanceof Float32Array){let k=s.byteLength/s.BYTES_PER_ELEMENT;const h=new Uint8Array(k);for(;--k>=0;){let A=s[k];A<0?A=0:A>1&&(A=1),h[k]=255*A}s=h}const ms=document.createElement("canvas");ms.width=A,ms.height=g;const i=ms.getContext("2d");if(!i)return null;const K=i.createImageData(A,g);if(K.data.set(s),i.putImageData(K,0,0),h){const s=document.createElement("canvas");s.width=A,s.height=g;const k=s.getContext("2d");return k?(k.translate(0,g),k.scale(1,-1),k.drawImage(ms,0,0),s.toDataURL("image/png")):null}return ms.toDataURL("image/png")}function E(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const A=s.getInternalTexture();if(!A)return null;const g=s._readPixelsSync(k,h);return g?d(g,s.getSize(),A.invertY):null}async function j(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const A=s.getInternalTexture();if(!A)return null;const g=await s.readPixels(k,h);return g?d(g,s.getSize(),A.invertY):null}var P=h(12651),R=h(12623);class D extends K.e{static _CreateVideoTexture(s,k,h){arguments.length>5&&void 0!==arguments[5]||D.TRILINEAR_SAMPLINGMODE;throw(0,O.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(s){this._isBlocking=s}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(s,k,h,A){let g,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D.TRILINEAR_SAMPLINGMODE,K=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,H=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,O=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,S=arguments.length>8&&void 0!==arguments[8]&&arguments[8],a=arguments.length>9?arguments[9]:void 0,r=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,E=arguments.length>12?arguments[12]:void 0,j=arguments.length>13?arguments[13]:void 0;super(k),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new ms.c,this._isBlocking=!0,this.name=s||"",this.url=s;let R=!1,w=null,B=!0;"object"===typeof h&&null!==h?(g=h.noMipmap??!1,A=h.invertY??!P.d,i=h.samplingMode??D.TRILINEAR_SAMPLINGMODE,K=h.F??null,H=h.onError??null,O=h.buffer??null,S=h.deleteBuffer??!1,a=h.format,r=h.mimeType,d=h.loaderOptions,E=h.creationFlags,R=h.useSRGBBuffer??!1,w=h.internalTexture??null,B=h.gammaSpace??B,j=h.forcedExtension??j):g=!!h,this._gammaSpace=B,this._noMipmap=g,this._invertY=void 0===A?!P.d:A,this._initialSamplingMode=i,this._buffer=O,this._deleteBuffer=S,this._mimeType=r,this._loaderOptions=d,this._creationFlags=E,this._useSRGBBuffer=R,this._forcedExtension=j,void 0!==a&&(this._format=a);const u=this.Is(),G=this._getEngine();if(!G)return;G.onBeforeTextureInitObservable.notifyObservers(this);const Q=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),K&&K(),!this.isBlocking&&u&&u.resetCachedMaterial()},p=(s,k)=>{this._loadingError=!0,this._errorObject={message:s,exception:k},H&&H(s,k),D.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!w)return this._delayedOnLoad=Q,void(this._delayedOnError=p);if(this._texture=w??this._getFromCache(this.url,g,i,this._invertY,R,this.isCube),this._texture)if(this._texture.isReady)c.d.SetImmediate((()=>Q()));else{const s=this._texture.onLoadedObservable.add(Q);this._texture.onErrorObservable.add((k=>{var h;p(k.message,k.exception),null===(h=this._texture)||void 0===h||h.onLoadedObservable.remove(s)}))}else if(u&&u.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=Q,this._delayedOnError=p;else{try{this._texture=G.createTexture(this.url,g,this._invertY,u,i,Q,p,this._buffer,void 0,this._format,this._forcedExtension,r,d,E,R)}catch(I){throw p("error loading",I),I}S&&(this._buffer=null)}}updateURL(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=arguments.length>2?arguments[2]:void 0,A=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Is().markAllMaterialsAsDirty(1,(s=>s.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=s),this.url=s,this._buffer=k,this._forcedExtension=A,this.delayLoadState=4,h&&(this._delayedOnLoad=h),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const s=this.Is();s&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?c.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=s.getEngine().createTexture(this.url,this._noMipmap,this._invertY,s,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(s,k,h,A){s*=this._cachedUScale,k*=this._cachedVScale,s-=this.uRotationCenter*this._cachedUScale,k-=this.vRotationCenter*this._cachedVScale,h-=this.wRotationCenter,i.Pk.TransformCoordinatesFromFloatsToRef(s,k,h,this._rowGenerationMatrix,A),A.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,A.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,A.z+=this.wRotationCenter}getTextureMatrix(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*s===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*s,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=i.Matrix.Zero(),this._rowGenerationMatrix=new i.Matrix,this._t0=i.Pk.Zero(),this._t1=i.Pk.Zero(),this._t2=i.Pk.Zero()),i.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(i.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,i.TmpVectors.Matrix[0]),i.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,i.TmpVectors.Matrix[1]),i.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,i.TmpVectors.Matrix[2]),i.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,i.TmpVectors.Matrix[3]),i.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(i.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.ka(this._t0),this._t2.ka(this._t0),i.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const k=this.Is();if(!k)return this._cachedTextureMatrix;const h=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&h!==this._cachedIdentity3x2&&k.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const s=this.Is();if(!s)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==D.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===s.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=i.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=i.Matrix.Zero());const k=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case D.PLANAR_MODE:i.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case D.PROJECTION_MODE:{i.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const k=s.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=k.updateFlag,k.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:i.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return k&&s.markAllMaterialsAsDirty(1,(s=>s.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const s={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,F:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return R.e.Clone((()=>new D(this._texture?this._texture.url:null,this.Is(),s)),this)}serialize(){var s;const k=this.name;D.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const h=super.serialize(D._SerializeInternalTextureUniqueId);if(!h)return null;if(D.SerializeBuffers||D.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))h.base64String=this._buffer,h.name=h.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const s=this.mimeType||"image/png";h.base64String=`data:${s};base64,${(0,r.k)(this._buffer)}`}else(D.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(h.base64String=!this._engine||this._engine._features.supportSyncTextureRead?E(this):j(this));var A;(h.invertY=this._invertY,h.samplingMode=this.samplingMode,h._creationFlags=this._creationFlags,h._useSRGBBuffer=this._useSRGBBuffer,D._SerializeInternalTextureUniqueId)&&(h.internalTextureUniqueId=null===(A=this._texture)||void 0===A?void 0:A.uniqueId);return h.internalTextureLabel=null===(s=this._texture)||void 0===s?void 0:s.label,h.noMipmap=this._noMipmap,this.name=k,h}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(s,k,h){if(s.customType){const A=S.e.Instantiate(s.customType).Parse(s,k,h);return s.samplingMode&&A.updateSamplingMode&&A._samplingMode&&A._samplingMode!==s.samplingMode&&A.updateSamplingMode(s.samplingMode),A}if(s.isCube&&!s.isRenderTarget)return D._CubeTextureParser(s,k,h);const A=void 0!==s.internalTextureUniqueId;if(!s.name&&!s.isRenderTarget&&!A)return null;let g;if(A){const h=k.getEngine().getLoadedTexturesCache();for(const k of h)if(k.uniqueId===s.internalTextureUniqueId){g=k;break}}const ms=k=>{if(k&&k._texture&&(k._texture._cachedWrapU=null,k._texture._cachedWrapV=null,k._texture._cachedWrapR=null),s.samplingMode){const h=s.samplingMode;k&&k.samplingMode!==h&&k.updateSamplingMode(h)}if(k&&s.animations)for(let h=0;h<s.animations.length;h++){const A=s.animations[h],g=(0,H.d)("BABYLON.Animation");g&&k.animations.push(g.Parse(A))}k&&k._texture&&(A&&!g&&k._texture._setUniqueId(s.internalTextureUniqueId),k._texture.label=s.internalTextureLabel)};return R.e.Parse((()=>{let A=!0;if(s.noMipmap&&(A=!1),s.mirrorPlane){const h=D._CreateMirror(s.name,s.renderTargetSize,k,A);return h._waitingRenderList=s.renderList,h.mirrorPlane=a.b.uk(s.mirrorPlane),ms(h),h}if(s.isRenderTarget){let h=null;if(s.isCube){if(k.reflectionProbes)for(let A=0;A<k.reflectionProbes.length;A++){const h=k.reflectionProbes[A];if(h.name===s.name)return h.cubeTexture}}else h=D._CreateRenderTargetTexture(s.name,s.renderTargetSize,k,A,s._creationFlags??0),h._waitingRenderList=s.renderList;return ms(h),h}if(s.isVideo){const g=D._CreateVideoTexture(h+(s.url||s.name),h+(s.src||s.url),k,A,s.invertY,s.samplingMode,s.settings||{});return ms(g),g}{let i;if(s.base64String&&!g)i=D.CreateFromBase64String(s.base64String,s.base64String,k,!A,s.invertY,s.samplingMode,(()=>{ms(i)}),s._creationFlags??0,s._useSRGBBuffer??!1),i.name=s.name;else{let K;K=s.name&&(s.name.indexOf("://")>0||s.name.startsWith("data:"))?s.name:h+s.name,s.url&&(s.url.startsWith("data:")||D.UseSerializedUrlIfAny)&&(K=s.url);const H={noMipmap:!A,invertY:s.invertY,samplingMode:s.samplingMode,F:()=>{ms(i)},internalTexture:g};i=new D(K,k,H)}return i}}),s,k)}static CreateFromBase64String(s,k,h,A,g){let ms=arguments.length>5&&void 0!==arguments[5]?arguments[5]:D.TRILINEAR_SAMPLINGMODE;return new D("data:"+k,h,A,g,ms,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(s,k,h){let A=arguments.length>3&&void 0!==arguments[3]&&arguments[3],g=arguments.length>4?arguments[4]:void 0,ms=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:D.TRILINEAR_SAMPLINGMODE,K=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,H=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,O=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,c=arguments.length>10?arguments[10]:void 0,S=arguments.length>11?arguments[11]:void 0;return"data:"!==s.substring(0,5)&&(s="data:"+s),new D(s,h,g,ms,i,K,H,k,A,O,void 0,void 0,c,S)}}D.SerializeBuffers=!0,D.ForceSerializeBuffers=!1,D.OnTextureLoadErrorObservable=new ms.c,D._SerializeInternalTextureUniqueId=!1,D._CubeTextureParser=(s,k,h)=>{throw(0,O.b)("CubeTexture")},D._CreateMirror=(s,k,h,A)=>{throw(0,O.b)("MirrorTexture")},D._CreateRenderTargetTexture=(s,k,h,A,g)=>{throw(0,O.b)("RenderTargetTexture")},D.NEAREST_SAMPLINGMODE=1,D.NEAREST_NEAREST_MIPLINEAR=8,D.BILINEAR_SAMPLINGMODE=2,D.LINEAR_LINEAR_MIPNEAREST=11,D.TRILINEAR_SAMPLINGMODE=3,D.LINEAR_LINEAR_MIPLINEAR=3,D.NEAREST_NEAREST_MIPNEAREST=4,D.NEAREST_LINEAR_MIPNEAREST=5,D.NEAREST_LINEAR_MIPLINEAR=6,D.NEAREST_LINEAR=7,D.NEAREST_NEAREST=1,D.LINEAR_NEAREST_MIPNEAREST=9,D.LINEAR_NEAREST_MIPLINEAR=10,D.LINEAR_LINEAR=2,D.LINEAR_NEAREST=12,D.EXPLICIT_MODE=0,D.SPHERICAL_MODE=1,D.PLANAR_MODE=2,D.CUBIC_MODE=3,D.PROJECTION_MODE=4,D.SKYBOX_MODE=5,D.INVCUBIC_MODE=6,D.EQUIRECTANGULAR_MODE=7,D.FIXED_EQUIRECTANGULAR_MODE=8,D.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,D.CLAMP_ADDRESSMODE=0,D.WRAP_ADDRESSMODE=1,D.MIRROR_ADDRESSMODE=2,D.UseSerializedUrlIfAny=!1,(0,A.e)([(0,g.J)()],D.prototype,"url",void 0),(0,A.e)([(0,g.J)()],D.prototype,"uOffset",void 0),(0,A.e)([(0,g.J)()],D.prototype,"vOffset",void 0),(0,A.e)([(0,g.J)()],D.prototype,"uScale",void 0),(0,A.e)([(0,g.J)()],D.prototype,"vScale",void 0),(0,A.e)([(0,g.J)()],D.prototype,"uAng",void 0),(0,A.e)([(0,g.J)()],D.prototype,"vAng",void 0),(0,A.e)([(0,g.J)()],D.prototype,"wAng",void 0),(0,A.e)([(0,g.J)()],D.prototype,"uRotationCenter",void 0),(0,A.e)([(0,g.J)()],D.prototype,"vRotationCenter",void 0),(0,A.e)([(0,g.J)()],D.prototype,"wRotationCenter",void 0),(0,A.e)([(0,g.J)()],D.prototype,"homogeneousRotationInUVTransform",void 0),(0,A.e)([(0,g.J)()],D.prototype,"isBlocking",null),(0,H.f)("BABYLON.Texture",D),R.e._TextureParser=D.Parse},12645:(s,k,h)=>{h.d(k,{b:()=>g});var A=h(12590);class g{constructor(s,k,h,g){this.normal=new A.Pk(s,k,h),this.d=g}yh(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new g(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let s=this.normal.getHashCode();return s=397*s^this.d,s}normalize(){const s=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let k=0;return 0!==s&&(k=1/s),this.normal.x*=k,this.normal.y*=k,this.normal.z*=k,this.d*=k,this}transform(s){const k=g._TmpMatrix;s.invertToRef(k);const h=k.m,A=this.normal.x,ms=this.normal.y,i=this.normal.z,K=this.d,H=A*h[0]+ms*h[1]+i*h[2]+K*h[3],O=A*h[4]+ms*h[5]+i*h[6]+K*h[7],c=A*h[8]+ms*h[9]+i*h[10]+K*h[11],S=A*h[12]+ms*h[13]+i*h[14]+K*h[15];return new g(H,O,c,S)}dotCoordinate(s){return this.normal.x*s.x+this.normal.y*s.y+this.normal.z*s.z+this.d}copyFromPoints(s,k,h){const A=k.x-s.x,g=k.y-s.y,ms=k.z-s.z,i=h.x-s.x,K=h.y-s.y,H=h.z-s.z,O=g*H-ms*K,c=ms*i-A*H,S=A*K-g*i,a=Math.sqrt(O*O+c*c+S*S);let r;return r=0!==a?1/a:0,this.normal.x=O*r,this.normal.y=c*r,this.normal.z=S*r,this.d=-(this.normal.x*s.x+this.normal.y*s.y+this.normal.z*s.z),this}isFrontFacingTo(s,k){return A.Pk.Dot(this.normal,s)<=k}signedDistanceTo(s){return A.Pk.Dot(s,this.normal)+this.d}static uk(s){return new g(s[0],s[1],s[2],s[3])}static FromPoints(s,k,h){const A=new g(0,0,0,0);return A.copyFromPoints(s,k,h),A}static FromPositionAndNormal(s,k){const h=new g(0,0,0,0);return this.FromPositionAndNormalToRef(s,k,h)}static FromPositionAndNormalToRef(s,k,h){return h.normal.H(k),h.normal.normalize(),h.d=-s.dot(h.normal),h}static SignedDistanceToPlaneFromPositionAndNormal(s,k,h){const g=-(k.x*s.x+k.y*s.y+k.z*s.z);return A.Pk.Dot(h,k)+g}}g._TmpMatrix=A.Matrix.Identity()},12618:(s,k,h)=>{h.d(k,{c:()=>A});class A{constructor(s,k){this.width=s,this.height=k}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let s=0|this.width;return s=397*s^this.height,s}H(s){this.width=s.width,this.height=s.height}cg(s,k){return this.width=s,this.height=k,this}set(s,k){return this.cg(s,k)}multiplyByFloats(s,k){return new A(this.width*s,this.height*k)}clone(){return new A(this.width,this.height)}equals(s){return!!s&&(this.width===s.width&&this.height===s.height)}get surface(){return this.width*this.height}static Zero(){return new A(0,0)}add(s){return new A(this.width+s.width,this.height+s.height)}Rk(s){return new A(this.width-s.width,this.height-s.height)}scale(s){return new A(this.width*s,this.height*s)}static Lerp(s,k,h){const g=s.width+(k.width-s.width)*h,ms=s.height+(k.height-s.height)*h;return new A(g,ms)}}},12582:(s,k,h)=>{h.d(k,{b:()=>ms,e:()=>i});const A={},g={};function ms(s){const k=s.getClassName();return g[k]||(g[k]={}),g[k]}function i(s){const k=s.getClassName();if(A[k])return A[k];A[k]={};const h=A[k];let ms=s,i=k;for(;i;){const s=g[i];for(const g in s)h[g]=s[g];let k,A=!1;do{if(k=Object.getPrototypeOf(ms),!k.getClassName){A=!0;break}if(k.getClassName()!==i)break;ms=k}while(k);if(A)break;i=k.getClassName(),ms=k}return h}},12579:(s,k,h)=>{h.d(k,{B:()=>j,E:()=>K,F:()=>c,G:()=>S,J:()=>i,b:()=>ms,c:()=>R,g:()=>r,j:()=>H,n:()=>d,q:()=>O,u:()=>E,v:()=>P,z:()=>a});var A=h(12582);function g(s,k){return(h,g)=>{const ms=(0,A.b)(h);ms[g]||(ms[g]={type:s,sourceName:k})}}function ms(s){return function(s){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(h,A)=>{const g=k||"_"+A;Object.defineProperty(h,A,{get:function(){return this[g]},set:function(k){var A;"function"===typeof(null===(A=this[g])||void 0===A?void 0:A.equals)&&this[g].equals(k)||this[g]!==k&&(this[g]=k,h[s].apply(this))},enumerable:!0,configurable:!0})}}(s,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function i(s){return g(0,s)}function K(s){return g(1,s)}function H(s){return g(2,s)}function O(s){return g(3,s)}function c(s){return g(4,s)}function S(s){return g(5,s)}function a(s){return g(6,s)}function r(s){return g(7,s)}function d(s){return g(8,s)}function E(s){return g(9,s)}function j(s){return g(10,s)}function P(s){return g(12,s)}function R(s,k,h,A){const g=h.value;h.value=function(){let h=g;if("undefined"!==typeof _native&&_native[k]){const s=_native[k];h=A?function(){return A(...arguments)?s(...arguments):g(...arguments)}:s}return s[k]=h,h(...arguments)}}R.filter=function(s){return(k,h,A)=>R(k,h,A,s)}},12623:(s,k,h)=>{h.d(k,{e:()=>O});var A=h(12438),g=h(12631),ms=h(12636),i=h(12590),K=h(12582);const H=function(s,k,h){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const ms=s();g.e&&g.e.HasTags(k)&&g.e.AddTagsTo(ms,g.e.GetTags(k,!0));const i=(0,K.e)(ms),H={};for(const g in i){const s=i[g],K=k[g],c=s.type;if(void 0!==K&&null!==K&&("uniqueId"!==g||O.AllowLoadingUniqueId))switch(c){case 0:case 6:case 9:case 11:ms[g]=K;break;case 1:A.cloneTexturesOnlyOnce&&H[K.uniqueId]?ms[g]=H[K.uniqueId]:(ms[g]=h||K.isRenderTarget?K:K.clone(),H[K.uniqueId]=ms[g]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:ms[g]=h?K:K.clone()}}return ms};class O{static AppendSerializedAnimations(s,k){if(s.animations){k.animations=[];for(let h=0;h<s.animations.length;h++){const A=s.animations[h];k.animations.push(A.serialize())}}}static Serialize(s,k){k||(k={}),g.e&&(k.tags=g.e.GetTags(s));const h=(0,K.e)(s);for(const A in h){const g=h[A],ms=g.sourceName||A,i=g.type,K=s[A];if(void 0!==K&&null!==K&&("uniqueId"!==A||O.AllowLoadingUniqueId))switch(i){case 0:k[ms]=K;break;case 1:case 3:case 7:case 9:k[ms]=K.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:k[ms]=K.yh();break;case 6:case 11:k[ms]=K.id}}return k}static ParseProperties(s,k,h,A){A||(A="");const g=(0,K.e)(k);for(const K in g){const H=g[K],c=s[H.sourceName||K],S=H.type;if(void 0!==c&&null!==c&&("uniqueId"!==K||O.AllowLoadingUniqueId)){const s=k;switch(S){case 0:s[K]=c;break;case 1:h&&(s[K]=O._TextureParser(c,h,A));break;case 2:s[K]=ms.Bk.uk(c);break;case 3:s[K]=O._FresnelParametersParser(c);break;case 4:s[K]=i.Vector2.uk(c);break;case 5:s[K]=i.Pk.uk(c);break;case 6:h&&(s[K]=h.getLastMeshById(c));break;case 7:s[K]=O._ColorCurvesParser(c);break;case 8:s[K]=ms.jg.uk(c);break;case 9:s[K]=O._ImageProcessingConfigurationParser(c);break;case 10:s[K]=i.Quaternion.uk(c);break;case 11:h&&(s[K]=h.getCameraById(c));break;case 12:s[K]=i.Matrix.uk(c)}}}}static Parse(s,k,h){let A=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const ms=s();return g.e&&g.e.AddTagsTo(ms,k.tags),O.ParseProperties(k,ms,h,A),ms}static Clone(s,k){return H(s,k,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(s,k){return H(s,k,!0)}}O.AllowLoadingUniqueId=!1,O._ImageProcessingConfigurationParser=s=>{throw(0,A.b)("ImageProcessingConfiguration")},O._FresnelParametersParser=s=>{throw(0,A.b)("FresnelParameters")},O._ColorCurvesParser=s=>{throw(0,A.b)("ColorCurves")},O._TextureParser=(s,k,h)=>{throw(0,A.b)("Texture")}},12631:(s,k,h)=>{h.d(k,{e:()=>g});class A{static Eval(s,k){return"true"===(s=s.match(/\([^()]*\)/g)?s.replace(/\([^()]*\)/g,(s=>(s=s.slice(1,s.length-1),A._HandleParenthesisContent(s,k)))):A._HandleParenthesisContent(s,k))||"false"!==s&&A.Eval(s,k)}static _HandleParenthesisContent(s,k){let h;k=k||(s=>"true"===s);const g=s.split("||");for(const ms in g)if(Object.prototype.hasOwnProperty.call(g,ms)){let s=A._SimplifyNegation(g[ms].trim());const i=s.split("&&");if(i.length>1)for(let g=0;g<i.length;++g){const ms=A._SimplifyNegation(i[g].trim());if(h="true"!==ms&&"false"!==ms?"!"===ms[0]?!k(ms.substring(1)):k(ms):"true"===ms,!h){s="false";break}}if(h||"true"===s){h=!0;break}h="true"!==s&&"false"!==s?"!"===s[0]?!k(s.substring(1)):k(s):"true"===s}return h?"true":"false"}static _SimplifyNegation(s){return"!true"===(s=(s=s.replace(/^[\s!]+/,(s=>(s=s.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?s="false":"!false"===s&&(s="true"),s}}class g{static EnableFor(s){s._tags=s._tags||{},s.hasTags=()=>g.HasTags(s),s.addTags=k=>g.AddTagsTo(s,k),s.removeTags=k=>g.RemoveTagsFrom(s,k),s.matchesTagsQuery=k=>g.MatchesQuery(s,k)}static DisableFor(s){delete s._tags,delete s.hasTags,delete s.addTags,delete s.removeTags,delete s.matchesTagsQuery}static HasTags(s){if(!s._tags)return!1;const k=s._tags;for(const h in k)if(Object.prototype.hasOwnProperty.call(k,h))return!0;return!1}static GetTags(s){let k=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s._tags)return null;if(k){const k=[];for(const h in s._tags)Object.prototype.hasOwnProperty.call(s._tags,h)&&!0===s._tags[h]&&k.push(h);return k.join(" ")}return s._tags}static AddTagsTo(s,k){if(!k)return;if("string"!==typeof k)return;const h=k.split(" ");for(const A of h)g._AddTagTo(s,A)}static _AddTagTo(s,k){""!==(k=k.trim())&&"true"!==k&&"false"!==k&&(k.match(/[\s]/)||k.match(/^([!]|([|]|[&]){2})/)||(g.EnableFor(s),s._tags[k]=!0))}static RemoveTagsFrom(s,k){if(!g.HasTags(s))return;const h=k.split(" ");for(const A in h)g._RemoveTagFrom(s,h[A])}static _RemoveTagFrom(s,k){delete s._tags[k]}static MatchesQuery(s,k){return void 0===k||(""===k?g.HasTags(s):A.Eval(k,(k=>g.HasTags(s)&&s._tags[k])))}}},12570:(s,k,h)=>{h.d(k,{e:()=>A});function A(s,k,h,A){var g,ms=arguments.length,i=ms<3?k:null===A?A=Object.getOwnPropertyDescriptor(k,h):A;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(s,k,h,A);else for(var K=s.length-1;K>=0;K--)(g=s[K])&&(i=(ms<3?g(i):ms>3?g(k,h,i):g(k,h))||i);return ms>3&&i&&Object.defineProperty(k,h,i),i}Object.create;Object.create}}]);