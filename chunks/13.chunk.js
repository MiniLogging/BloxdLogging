"use strict";(self.wx5iyvo7rvn=self.wx5iyvo7rvn||[]).push([[13],{11196:(P,e,n)=>{n.d(e,{e:()=>H});let H=!1},11156:(P,e,n)=>{n.d(e,{c:()=>A});var H=n(11121),S=n(11125),p=n(10976),k=n(11133),m=n(11017),t=n(11102),C=(n(11019),n(11161));class R{get wrapU(){return this._wrapU}set wrapU(P){this._wrapU=P}get wrapV(){return this._wrapV}set wrapV(P){this._wrapV=P}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(P){this._texture&&(this._texture.isCube=P)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(P){this._texture&&(this._texture.is3D=P)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(P){this._texture&&(this._texture.is2DArray=P)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(P){return void 0!==(null===P||void 0===P?void 0:P.shareDepth)}constructor(P){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=C.e.Zero(),this._cachedBaseSize=C.e.Zero(),this._initialSamplingMode=2,this._texture=R._IsRenderTargetWrapper(P)?P.texture:P,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(P){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(P,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var q=n(11170);class A extends R{set We(P){this._hasAlpha!==P&&(this._hasAlpha=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get We(){return this._hasAlpha}set getAlphaFromRGB(P){this._getAlphaFromRGB!==P&&(this._getAlphaFromRGB=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(P){this._coordinatesIndex!==P&&(this._coordinatesIndex=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(P){this._coordinatesMode!==P&&(this._coordinatesMode=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(P){this._wrapU=P}get wrapV(){return this._wrapV}set wrapV(P){this._wrapV=P}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(P){this._texture?this._texture.isCube=P:this._isCube=P}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(P){this._texture&&(this._texture.is3D=P)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(P){this._texture&&(this._texture.is2DArray=P)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(P){var e;if(this._texture){if(this._texture._gammaSpace===P)return;this._texture._gammaSpace=P}else{if(this._gammaSpace===P)return;this._gammaSpace=P}null===(e=this.BP())||void 0===e||e.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(P){var e;P!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=P),null===(e=this.BP())||void 0===e||e.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(P){this._texture&&(this._texture._lodGenerationOffset=P)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(P){this._texture&&(this._texture._lodGenerationScale=P)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(P){this._texture&&(this._texture._linearSpecularLOD=P)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(P){this._texture&&(this._texture._irradianceTexture=P)}get uid(){return this._uid||(this._uid=(0,t.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(P){this._onDisposeObserver&&this.ie.remove(this._onDisposeObserver),this._onDisposeObserver=this.ie.add(P)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=A.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.ie=new p.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,P?A._IsScene(P)?this._scene=P:this._engine=P:this._scene=m.d.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=e,this._uid=null}BP(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return k.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return k.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(P){}get canRescale(){return!1}_getFromCache(P,e,n,H,S,p){const k=this._getEngine();if(!k)return null;const m=k._getUseSRGBBuffer(!!S,e),t=k.getLoadedTexturesCache();for(let C=0;C<t.length;C++){const k=t[C];if((void 0===S||m===k._useSRGBBuffer)&&(void 0===H||H===k.invertY)&&k.url===P&&k.generateMipMaps===!e&&(!n||n===k.samplingMode)&&(void 0===p||p===k.isCube))return k.incrementReferences(),k}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const P=this.BP();P&&P.markAllMaterialsAsDirty(1)}readPixels(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const C=this._getEngine();if(!C)return null;const R=this.getSize();let q=R.width,A=R.height;0!==e&&(q/=Math.pow(2,e),A/=Math.pow(2,e),q=Math.round(q),A=Math.round(A)),m=Math.min(q,m),t=Math.min(A,t);try{return this._texture.isCube?C._readTexturePixels(this._texture,m,t,P,e,n,H,S,p,k):C._readTexturePixels(this._texture,m,t,-1,e,n,H,S,p,k)}catch(F){return null}}_readPixelsSync(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,H=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const p=this.getSize();let k=p.width,m=p.height;const t=this._getEngine();if(!t)return null;0!=e&&(k/=Math.pow(2,e),m/=Math.pow(2,e),k=Math.round(k),m=Math.round(m));try{return this._texture.isCube?t._readTexturePixelsSync(this._texture,k,m,P,e,n,H,S):t._readTexturePixelsSync(this._texture,k,m,-1,e,n,H,S)}catch(C){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const P=this._scene.textures.indexOf(this);if(P>=0&&this._scene.textures.splice(P,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const P=this._parentContainer.textures.indexOf(this);P>-1&&this._parentContainer.textures.splice(P,1),this._parentContainer=null}}this.ie.notifyObservers(this),this.ie.clear(),this.metadata=null,super.dispose()}serialize(){let P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!P)return null;const e=q.c.Serialize(this);return q.c.AppendSerializedAnimations(this,e),e}static WhenAllReady(P,e){let n=P.length;if(0!==n)for(let H=0;H<P.length;H++){const S=P[H];if(S.isReady())0===--n&&e();else{const P=S.onLoadObservable;P?P.addOnce((()=>{0===--n&&e()})):0===--n&&e()}}else e()}static _IsScene(P){return"Scene"===P.getClassName()}}A.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,H.b)([(0,S.M)()],A.prototype,"uniqueId",void 0),(0,H.b)([(0,S.M)()],A.prototype,"name",void 0),(0,H.b)([(0,S.M)()],A.prototype,"displayName",void 0),(0,H.b)([(0,S.M)()],A.prototype,"metadata",void 0),(0,H.b)([(0,S.M)("We")],A.prototype,"_hasAlpha",void 0),(0,H.b)([(0,S.M)("getAlphaFromRGB")],A.prototype,"_getAlphaFromRGB",void 0),(0,H.b)([(0,S.M)()],A.prototype,"level",void 0),(0,H.b)([(0,S.M)("coordinatesIndex")],A.prototype,"_coordinatesIndex",void 0),(0,H.b)([(0,S.M)()],A.prototype,"optimizeUVAllocation",void 0),(0,H.b)([(0,S.M)("coordinatesMode")],A.prototype,"_coordinatesMode",void 0),(0,H.b)([(0,S.M)()],A.prototype,"wrapU",null),(0,H.b)([(0,S.M)()],A.prototype,"wrapV",null),(0,H.b)([(0,S.M)()],A.prototype,"wrapR",void 0),(0,H.b)([(0,S.M)()],A.prototype,"anisotropicFilteringLevel",void 0),(0,H.b)([(0,S.M)()],A.prototype,"isCube",null),(0,H.b)([(0,S.M)()],A.prototype,"is3D",null),(0,H.b)([(0,S.M)()],A.prototype,"is2DArray",null),(0,H.b)([(0,S.M)()],A.prototype,"gammaSpace",null),(0,H.b)([(0,S.M)()],A.prototype,"invertZ",void 0),(0,H.b)([(0,S.M)()],A.prototype,"lodLevelInAlpha",void 0),(0,H.b)([(0,S.M)()],A.prototype,"lodGenerationOffset",null),(0,H.b)([(0,S.M)()],A.prototype,"lodGenerationScale",null),(0,H.b)([(0,S.M)()],A.prototype,"linearSpecularLOD",null),(0,H.b)([(0,S.D)()],A.prototype,"irradianceTexture",null),(0,H.b)([(0,S.M)()],A.prototype,"isRenderTarget",void 0)},11119:(P,e,n)=>{n.d(e,{e:()=>I});var H=n(11121),S=n(11125),p=n(10976),k=n(11133),m=n(11156),t=n(11096),C=n(11007),R=n(11047),q=n(11094),A=n(11190),F=n(11033);function Y(P,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const H=e.width,S=e.height;if(P instanceof Float32Array){let e=P.byteLength/P.BYTES_PER_ELEMENT;const n=new Uint8Array(e);for(;--e>=0;){let H=P[e];H<0?H=0:H>1&&(H=1),n[e]=255*H}P=n}const p=document.createElement("canvas");p.width=H,p.height=S;const k=p.getContext("2d");if(!k)return null;const m=k.createImageData(H,S);if(m.data.set(P),k.putImageData(m,0,0),n){const P=document.createElement("canvas");P.width=H,P.height=S;const e=P.getContext("2d");return e?(e.translate(0,S),e.scale(1,-1),e.drawImage(p,0,0),P.toDataURL("image/png")):null}return p.toDataURL("image/png")}function j(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const H=P.getInternalTexture();if(!H)return null;const S=P._readPixelsSync(e,n);return S?Y(S,P.getSize(),H.invertY):null}async function z(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const H=P.getInternalTexture();if(!H)return null;const S=await P.readPixels(e,n);return S?Y(S,P.getSize(),H.invertY):null}var w=n(11196),J=n(11170);class I extends m.c{static _CreateVideoTexture(P,e,n){arguments.length>5&&void 0!==arguments[5]||I.TRILINEAR_SAMPLINGMODE;throw(0,C.d)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(P){this._isBlocking=P}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(P,e,n,H){let S,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I.TRILINEAR_SAMPLINGMODE,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,t=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,q=arguments.length>8&&void 0!==arguments[8]&&arguments[8],A=arguments.length>9?arguments[9]:void 0,F=arguments.length>10?arguments[10]:void 0,Y=arguments.length>11?arguments[11]:void 0,j=arguments.length>12?arguments[12]:void 0,z=arguments.length>13?arguments[13]:void 0;super(e),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new p.b,this._isBlocking=!0,this.name=P||"",this.url=P;let J=!1,O=null,V=!0;"object"===typeof n&&null!==n?(S=n.noMipmap??!1,H=n.invertY??!w.e,k=n.samplingMode??I.TRILINEAR_SAMPLINGMODE,m=n.K??null,t=n.onError??null,C=n.buffer??null,q=n.deleteBuffer??!1,A=n.format,F=n.mimeType,Y=n.loaderOptions,j=n.creationFlags,J=n.useSRGBBuffer??!1,O=n.internalTexture??null,V=n.gammaSpace??V,z=n.forcedExtension??z):S=!!n,this._gammaSpace=V,this._noMipmap=S,this._invertY=void 0===H?!w.e:H,this._initialSamplingMode=k,this._buffer=C,this._deleteBuffer=q,this._mimeType=F,this._loaderOptions=Y,this._creationFlags=j,this._useSRGBBuffer=J,this._forcedExtension=z,void 0!==A&&(this._format=A);const i=this.BP(),B=this._getEngine();if(!B)return;B.onBeforeTextureInitObservable.notifyObservers(this);const l=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),m&&m(),!this.isBlocking&&i&&i.resetCachedMaterial()},b=(P,e)=>{this._loadingError=!0,this._errorObject={message:P,exception:e},t&&t(P,e),I.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!O)return this._delayedOnLoad=l,void(this._delayedOnError=b);if(this._texture=O??this._getFromCache(this.url,S,k,this._invertY,J,this.isCube),this._texture)if(this._texture.isReady)R.c.SetImmediate((()=>l()));else{const P=this._texture.onLoadedObservable.add(l);this._texture.onErrorObservable.add((e=>{var n;b(e.message,e.exception),null===(n=this._texture)||void 0===n||n.onLoadedObservable.remove(P)}))}else if(i&&i.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=l,this._delayedOnError=b;else{try{this._texture=B.createTexture(this.url,S,this._invertY,i,k,l,b,this._buffer,void 0,this._format,this._forcedExtension,F,Y,j,J)}catch(T){throw b("error loading",T),T}q&&(this._buffer=null)}}updateURL(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,H=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.BP().markAllMaterialsAsDirty(1,(P=>P.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=P),this.url=P,this._buffer=e,this._forcedExtension=H,this.delayLoadState=4,n&&(this._delayedOnLoad=n),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const P=this.BP();P&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?R.c.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=P.getEngine().createTexture(this.url,this._noMipmap,this._invertY,P,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(P,e,n,H){P*=this._cachedUScale,e*=this._cachedVScale,P-=this.uRotationCenter*this._cachedUScale,e-=this.vRotationCenter*this._cachedVScale,n-=this.wRotationCenter,k.Ie.TransformCoordinatesFromFloatsToRef(P,e,n,this._rowGenerationMatrix,H),H.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,H.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,H.z+=this.wRotationCenter}getTextureMatrix(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*P===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*P,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=k.Matrix.Zero(),this._rowGenerationMatrix=new k.Matrix,this._t0=k.Ie.Zero(),this._t1=k.Ie.Zero(),this._t2=k.Ie.Zero()),k.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(k.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,k.TmpVectors.Matrix[0]),k.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,k.TmpVectors.Matrix[1]),k.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,k.TmpVectors.Matrix[2]),k.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,k.TmpVectors.Matrix[3]),k.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(k.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(k.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(k.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.MR(this._t0),this._t2.MR(this._t0),k.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const e=this.BP();if(!e)return this._cachedTextureMatrix;const n=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&n!==this._cachedIdentity3x2&&e.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const P=this.BP();if(!P)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==I.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===P.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=k.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=k.Matrix.Zero());const e=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case I.PLANAR_MODE:k.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case I.PROJECTION_MODE:{k.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const e=P.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=e.updateFlag,e.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:k.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return e&&P.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const P={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,K:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return J.c.Clone((()=>new I(this._texture?this._texture.url:null,this.BP(),P)),this)}serialize(){var P;const e=this.name;I.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const n=super.serialize(I._SerializeInternalTextureUniqueId);if(!n)return null;if(I.SerializeBuffers||I.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))n.base64String=this._buffer,n.name=n.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const P=this.mimeType||"image/png";n.base64String=`data:${P};base64,${(0,F.k)(this._buffer)}`}else(I.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(n.base64String=!this._engine||this._engine._features.supportSyncTextureRead?j(this):z(this));var H;(n.invertY=this._invertY,n.samplingMode=this.samplingMode,n._creationFlags=this._creationFlags,n._useSRGBBuffer=this._useSRGBBuffer,I._SerializeInternalTextureUniqueId)&&(n.internalTextureUniqueId=null===(H=this._texture)||void 0===H?void 0:H.uniqueId);return n.internalTextureLabel=null===(P=this._texture)||void 0===P?void 0:P.label,n.noMipmap=this._noMipmap,this.name=e,n}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(P,e,n){if(P.customType){const H=q.d.Instantiate(P.customType).Parse(P,e,n);return P.samplingMode&&H.updateSamplingMode&&H._samplingMode&&H._samplingMode!==P.samplingMode&&H.updateSamplingMode(P.samplingMode),H}if(P.isCube&&!P.isRenderTarget)return I._CubeTextureParser(P,e,n);const H=void 0!==P.internalTextureUniqueId;if(!P.name&&!P.isRenderTarget&&!H)return null;let S;if(H){const n=e.getEngine().getLoadedTexturesCache();for(const e of n)if(e.uniqueId===P.internalTextureUniqueId){S=e;break}}const p=e=>{if(e&&e._texture&&(e._texture._cachedWrapU=null,e._texture._cachedWrapV=null,e._texture._cachedWrapR=null),P.samplingMode){const n=P.samplingMode;e&&e.samplingMode!==n&&e.updateSamplingMode(n)}if(e&&P.animations)for(let n=0;n<P.animations.length;n++){const H=P.animations[n],S=(0,t.d)("BABYLON.Animation");S&&e.animations.push(S.Parse(H))}e&&e._texture&&(H&&!S&&e._texture._setUniqueId(P.internalTextureUniqueId),e._texture.label=P.internalTextureLabel)};return J.c.Parse((()=>{let H=!0;if(P.noMipmap&&(H=!1),P.mirrorPlane){const n=I._CreateMirror(P.name,P.renderTargetSize,e,H);return n._waitingRenderList=P.renderList,n.mirrorPlane=A.c.Qe(P.mirrorPlane),p(n),n}if(P.isRenderTarget){let n=null;if(P.isCube){if(e.reflectionProbes)for(let H=0;H<e.reflectionProbes.length;H++){const n=e.reflectionProbes[H];if(n.name===P.name)return n.cubeTexture}}else n=I._CreateRenderTargetTexture(P.name,P.renderTargetSize,e,H,P._creationFlags??0),n._waitingRenderList=P.renderList;return p(n),n}if(P.isVideo){const S=I._CreateVideoTexture(n+(P.url||P.name),n+(P.src||P.url),e,H,P.invertY,P.samplingMode,P.settings||{});return p(S),S}{let k;if(P.base64String&&!S)k=I.CreateFromBase64String(P.base64String,P.base64String,e,!H,P.invertY,P.samplingMode,(()=>{p(k)}),P._creationFlags??0,P._useSRGBBuffer??!1),k.name=P.name;else{let m;m=P.name&&(P.name.indexOf("://")>0||P.name.startsWith("data:"))?P.name:n+P.name,P.url&&(P.url.startsWith("data:")||I.UseSerializedUrlIfAny)&&(m=P.url);const t={noMipmap:!H,invertY:P.invertY,samplingMode:P.samplingMode,K:()=>{p(k)},internalTexture:S};k=new I(m,e,t)}return k}}),P,e)}static CreateFromBase64String(P,e,n,H,S){let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I.TRILINEAR_SAMPLINGMODE;return new I("data:"+e,n,H,S,p,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,P,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(P,e,n){let H=arguments.length>3&&void 0!==arguments[3]&&arguments[3],S=arguments.length>4?arguments[4]:void 0,p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],k=arguments.length>6&&void 0!==arguments[6]?arguments[6]:I.TRILINEAR_SAMPLINGMODE,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,t=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,C=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,R=arguments.length>10?arguments[10]:void 0,q=arguments.length>11?arguments[11]:void 0;return"data:"!==P.substring(0,5)&&(P="data:"+P),new I(P,n,S,p,k,m,t,e,H,C,void 0,void 0,R,q)}}I.SerializeBuffers=!0,I.ForceSerializeBuffers=!1,I.OnTextureLoadErrorObservable=new p.b,I._SerializeInternalTextureUniqueId=!1,I._CubeTextureParser=(P,e,n)=>{throw(0,C.d)("CubeTexture")},I._CreateMirror=(P,e,n,H)=>{throw(0,C.d)("MirrorTexture")},I._CreateRenderTargetTexture=(P,e,n,H,S)=>{throw(0,C.d)("RenderTargetTexture")},I.NEAREST_SAMPLINGMODE=1,I.NEAREST_NEAREST_MIPLINEAR=8,I.BILINEAR_SAMPLINGMODE=2,I.LINEAR_LINEAR_MIPNEAREST=11,I.TRILINEAR_SAMPLINGMODE=3,I.LINEAR_LINEAR_MIPLINEAR=3,I.NEAREST_NEAREST_MIPNEAREST=4,I.NEAREST_LINEAR_MIPNEAREST=5,I.NEAREST_LINEAR_MIPLINEAR=6,I.NEAREST_LINEAR=7,I.NEAREST_NEAREST=1,I.LINEAR_NEAREST_MIPNEAREST=9,I.LINEAR_NEAREST_MIPLINEAR=10,I.LINEAR_LINEAR=2,I.LINEAR_NEAREST=12,I.EXPLICIT_MODE=0,I.SPHERICAL_MODE=1,I.PLANAR_MODE=2,I.CUBIC_MODE=3,I.PROJECTION_MODE=4,I.SKYBOX_MODE=5,I.INVCUBIC_MODE=6,I.EQUIRECTANGULAR_MODE=7,I.FIXED_EQUIRECTANGULAR_MODE=8,I.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,I.CLAMP_ADDRESSMODE=0,I.WRAP_ADDRESSMODE=1,I.MIRROR_ADDRESSMODE=2,I.UseSerializedUrlIfAny=!1,(0,H.b)([(0,S.M)()],I.prototype,"url",void 0),(0,H.b)([(0,S.M)()],I.prototype,"uOffset",void 0),(0,H.b)([(0,S.M)()],I.prototype,"vOffset",void 0),(0,H.b)([(0,S.M)()],I.prototype,"uScale",void 0),(0,H.b)([(0,S.M)()],I.prototype,"vScale",void 0),(0,H.b)([(0,S.M)()],I.prototype,"uAng",void 0),(0,H.b)([(0,S.M)()],I.prototype,"vAng",void 0),(0,H.b)([(0,S.M)()],I.prototype,"wAng",void 0),(0,H.b)([(0,S.M)()],I.prototype,"uRotationCenter",void 0),(0,H.b)([(0,S.M)()],I.prototype,"vRotationCenter",void 0),(0,H.b)([(0,S.M)()],I.prototype,"wRotationCenter",void 0),(0,H.b)([(0,S.M)()],I.prototype,"homogeneousRotationInUVTransform",void 0),(0,H.b)([(0,S.M)()],I.prototype,"isBlocking",null),(0,t.h)("BABYLON.Texture",I),J.c._TextureParser=I.Parse},11190:(P,e,n)=>{n.d(e,{c:()=>S});var H=n(11133);class S{constructor(P,e,n,S){this.normal=new H.Ie(P,e,n),this.d=S}fe(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new S(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let P=this.normal.getHashCode();return P=397*P^this.d,P}normalize(){const P=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let e=0;return 0!==P&&(e=1/P),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this}transform(P){const e=S._TmpMatrix;P.invertToRef(e);const n=e.m,H=this.normal.x,p=this.normal.y,k=this.normal.z,m=this.d,t=H*n[0]+p*n[1]+k*n[2]+m*n[3],C=H*n[4]+p*n[5]+k*n[6]+m*n[7],R=H*n[8]+p*n[9]+k*n[10]+m*n[11],q=H*n[12]+p*n[13]+k*n[14]+m*n[15];return new S(t,C,R,q)}dotCoordinate(P){return this.normal.x*P.x+this.normal.y*P.y+this.normal.z*P.z+this.d}copyFromPoints(P,e,n){const H=e.x-P.x,S=e.y-P.y,p=e.z-P.z,k=n.x-P.x,m=n.y-P.y,t=n.z-P.z,C=S*t-p*m,R=p*k-H*t,q=H*m-S*k,A=Math.sqrt(C*C+R*R+q*q);let F;return F=0!==A?1/A:0,this.normal.x=C*F,this.normal.y=R*F,this.normal.z=q*F,this.d=-(this.normal.x*P.x+this.normal.y*P.y+this.normal.z*P.z),this}isFrontFacingTo(P,e){return H.Ie.Dot(this.normal,P)<=e}signedDistanceTo(P){return H.Ie.Dot(P,this.normal)+this.d}static Qe(P){return new S(P[0],P[1],P[2],P[3])}static FromPoints(P,e,n){const H=new S(0,0,0,0);return H.copyFromPoints(P,e,n),H}static FromPositionAndNormal(P,e){const n=new S(0,0,0,0);return this.FromPositionAndNormalToRef(P,e,n)}static FromPositionAndNormalToRef(P,e,n){return n.normal.p(e),n.normal.normalize(),n.d=-P.dot(n.normal),n}static SignedDistanceToPlaneFromPositionAndNormal(P,e,n){const S=-(e.x*P.x+e.y*P.y+e.z*P.z);return H.Ie.Dot(n,e)+S}}S._TmpMatrix=H.Matrix.Identity()},11161:(P,e,n)=>{n.d(e,{e:()=>H});class H{constructor(P,e){this.width=P,this.height=e}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let P=0|this.width;return P=397*P^this.height,P}p(P){this.width=P.width,this.height=P.height}dp(P,e){return this.width=P,this.height=e,this}set(P,e){return this.dp(P,e)}multiplyByFloats(P,e){return new H(this.width*P,this.height*e)}clone(){return new H(this.width,this.height)}equals(P){return!!P&&(this.width===P.width&&this.height===P.height)}get surface(){return this.width*this.height}static Zero(){return new H(0,0)}add(P){return new H(this.width+P.width,this.height+P.height)}be(P){return new H(this.width-P.width,this.height-P.height)}scale(P){return new H(this.width*P,this.height*P)}static Lerp(P,e,n){const S=P.width+(e.width-P.width)*n,p=P.height+(e.height-P.height)*n;return new H(S,p)}}},11128:(P,e,n)=>{n.d(e,{b:()=>p,d:()=>k});const H={},S={};function p(P){const e=P.getClassName();return S[e]||(S[e]={}),S[e]}function k(P){const e=P.getClassName();if(H[e])return H[e];H[e]={};const n=H[e];let p=P,k=e;for(;k;){const P=S[k];for(const S in P)n[S]=P[S];let e,H=!1;do{if(e=Object.getPrototypeOf(p),!e.getClassName){H=!0;break}if(e.getClassName()!==k)break;p=e}while(e);if(H)break;k=e.getClassName(),p=e}return n}},11125:(P,e,n)=>{n.d(e,{C:()=>z,D:()=>m,G:()=>R,J:()=>q,M:()=>k,d:()=>p,e:()=>J,h:()=>F,j:()=>t,n:()=>Y,q:()=>C,u:()=>j,y:()=>w,z:()=>A});var H=n(11128);function S(P,e){return(n,S)=>{const p=(0,H.b)(n);p[S]||(p[S]={type:P,sourceName:e})}}function p(P){return function(P){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(n,H)=>{const S=e||"_"+H;Object.defineProperty(n,H,{get:function(){return this[S]},set:function(e){var H;"function"===typeof(null===(H=this[S])||void 0===H?void 0:H.equals)&&this[S].equals(e)||this[S]!==e&&(this[S]=e,n[P].apply(this))},enumerable:!0,configurable:!0})}}(P,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function k(P){return S(0,P)}function m(P){return S(1,P)}function t(P){return S(2,P)}function C(P){return S(3,P)}function R(P){return S(4,P)}function q(P){return S(5,P)}function A(P){return S(6,P)}function F(P){return S(7,P)}function Y(P){return S(8,P)}function j(P){return S(9,P)}function z(P){return S(10,P)}function w(P){return S(12,P)}function J(P,e,n,H){const S=n.value;n.value=function(){let n=S;if("undefined"!==typeof _native&&_native[e]){const P=_native[e];n=H?function(){return H(...arguments)?P(...arguments):S(...arguments)}:P}return P[e]=n,n(...arguments)}}J.filter=function(P){return(e,n,H)=>J(e,n,H,P)}},11170:(P,e,n)=>{n.d(e,{c:()=>C});var H=n(11007),S=n(11175),p=n(11183),k=n(11133),m=n(11128);const t=function(P,e,n){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const p=P();S.c&&S.c.HasTags(e)&&S.c.AddTagsTo(p,S.c.GetTags(e,!0));const k=(0,m.d)(p),t={};for(const S in k){const P=k[S],m=e[S],R=P.type;if(void 0!==m&&null!==m&&("uniqueId"!==S||C.AllowLoadingUniqueId))switch(R){case 0:case 6:case 9:case 11:p[S]=m;break;case 1:H.cloneTexturesOnlyOnce&&t[m.uniqueId]?p[S]=t[m.uniqueId]:(p[S]=n||m.isRenderTarget?m:m.clone(),t[m.uniqueId]=p[S]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:p[S]=n?m:m.clone()}}return p};class C{static AppendSerializedAnimations(P,e){if(P.animations){e.animations=[];for(let n=0;n<P.animations.length;n++){const H=P.animations[n];e.animations.push(H.serialize())}}}static Serialize(P,e){e||(e={}),S.c&&(e.tags=S.c.GetTags(P));const n=(0,m.d)(P);for(const H in n){const S=n[H],p=S.sourceName||H,k=S.type,m=P[H];if(void 0!==m&&null!==m&&("uniqueId"!==H||C.AllowLoadingUniqueId))switch(k){case 0:e[p]=m;break;case 1:case 3:case 7:case 9:e[p]=m.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:e[p]=m.fe();break;case 6:case 11:e[p]=m.id}}return e}static ParseProperties(P,e,n,H){H||(H="");const S=(0,m.d)(e);for(const m in S){const t=S[m],R=P[t.sourceName||m],q=t.type;if(void 0!==R&&null!==R&&("uniqueId"!==m||C.AllowLoadingUniqueId)){const P=e;switch(q){case 0:P[m]=R;break;case 1:n&&(P[m]=C._TextureParser(R,n,H));break;case 2:P[m]=p.Ne.Qe(R);break;case 3:P[m]=C._FresnelParametersParser(R);break;case 4:P[m]=k.Vector2.Qe(R);break;case 5:P[m]=k.Ie.Qe(R);break;case 6:n&&(P[m]=n.getLastMeshById(R));break;case 7:P[m]=C._ColorCurvesParser(R);break;case 8:P[m]=p.wm.Qe(R);break;case 9:P[m]=C._ImageProcessingConfigurationParser(R);break;case 10:P[m]=k.Quaternion.Qe(R);break;case 11:n&&(P[m]=n.getCameraById(R));break;case 12:P[m]=k.Matrix.Qe(R)}}}}static Parse(P,e,n){let H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const p=P();return S.c&&S.c.AddTagsTo(p,e.tags),C.ParseProperties(e,p,n,H),p}static Clone(P,e){return t(P,e,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(P,e){return t(P,e,!0)}}C.AllowLoadingUniqueId=!1,C._ImageProcessingConfigurationParser=P=>{throw(0,H.d)("ImageProcessingConfiguration")},C._FresnelParametersParser=P=>{throw(0,H.d)("FresnelParameters")},C._ColorCurvesParser=P=>{throw(0,H.d)("ColorCurves")},C._TextureParser=(P,e,n)=>{throw(0,H.d)("Texture")}},11175:(P,e,n)=>{n.d(e,{c:()=>S});class H{static Eval(P,e){return"true"===(P=P.match(/\([^()]*\)/g)?P.replace(/\([^()]*\)/g,(P=>(P=P.slice(1,P.length-1),H._HandleParenthesisContent(P,e)))):H._HandleParenthesisContent(P,e))||"false"!==P&&H.Eval(P,e)}static _HandleParenthesisContent(P,e){let n;e=e||(P=>"true"===P);const S=P.split("||");for(const p in S)if(Object.prototype.hasOwnProperty.call(S,p)){let P=H._SimplifyNegation(S[p].trim());const k=P.split("&&");if(k.length>1)for(let S=0;S<k.length;++S){const p=H._SimplifyNegation(k[S].trim());if(n="true"!==p&&"false"!==p?"!"===p[0]?!e(p.substring(1)):e(p):"true"===p,!n){P="false";break}}if(n||"true"===P){n=!0;break}n="true"!==P&&"false"!==P?"!"===P[0]?!e(P.substring(1)):e(P):"true"===P}return n?"true":"false"}static _SimplifyNegation(P){return"!true"===(P=(P=P.replace(/^[\s!]+/,(P=>(P=P.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?P="false":"!false"===P&&(P="true"),P}}class S{static EnableFor(P){P._tags=P._tags||{},P.hasTags=()=>S.HasTags(P),P.addTags=e=>S.AddTagsTo(P,e),P.removeTags=e=>S.RemoveTagsFrom(P,e),P.matchesTagsQuery=e=>S.MatchesQuery(P,e)}static DisableFor(P){delete P._tags,delete P.hasTags,delete P.addTags,delete P.removeTags,delete P.matchesTagsQuery}static HasTags(P){if(!P._tags)return!1;const e=P._tags;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}static GetTags(P){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!P._tags)return null;if(e){const e=[];for(const n in P._tags)Object.prototype.hasOwnProperty.call(P._tags,n)&&!0===P._tags[n]&&e.push(n);return e.join(" ")}return P._tags}static AddTagsTo(P,e){if(!e)return;if("string"!==typeof e)return;const n=e.split(" ");for(const H of n)S._AddTagTo(P,H)}static _AddTagTo(P,e){""!==(e=e.trim())&&"true"!==e&&"false"!==e&&(e.match(/[\s]/)||e.match(/^([!]|([|]|[&]){2})/)||(S.EnableFor(P),P._tags[e]=!0))}static RemoveTagsFrom(P,e){if(!S.HasTags(P))return;const n=e.split(" ");for(const H in n)S._RemoveTagFrom(P,n[H])}static _RemoveTagFrom(P,e){delete P._tags[e]}static MatchesQuery(P,e){return void 0===e||(""===e?S.HasTags(P):H.Eval(e,(e=>S.HasTags(P)&&P._tags[e])))}}},11121:(P,e,n)=>{n.d(e,{b:()=>H});function H(P,e,n,H){var S,p=arguments.length,k=p<3?e:null===H?H=Object.getOwnPropertyDescriptor(e,n):H;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(P,e,n,H);else for(var m=P.length-1;m>=0;m--)(S=P[m])&&(k=(p<3?S(k):p>3?S(e,n,k):S(e,n))||k);return p>3&&k&&Object.defineProperty(e,n,k),k}Object.create;Object.create}}]);