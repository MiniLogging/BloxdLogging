"use strict";(self.ozi0exxand9=self.ozi0exxand9||[]).push([[13],{11486:(f,v,Z)=>{Z.d(v,{b:()=>V});let V=!1},11446:(f,v,Z)=>{Z.d(v,{b:()=>W});var V=Z(11405),h=Z(11410),J=Z(11235),l=Z(11421),e=Z(11281),C=Z(11378),H=(Z(11290),Z(11453));class O{get wrapU(){return this._wrapU}set wrapU(f){this._wrapU=f}get wrapV(){return this._wrapV}set wrapV(f){this._wrapV=f}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(f){this._texture&&(this._texture.isCube=f)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(f){this._texture&&(this._texture.is3D=f)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(f){this._texture&&(this._texture.is2DArray=f)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(f){return void 0!==(null===f||void 0===f?void 0:f.shareDepth)}constructor(f){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=H.c.Zero(),this._cachedBaseSize=H.c.Zero(),this._initialSamplingMode=2,this._texture=O._IsRenderTargetWrapper(f)?f.texture:f,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(f){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(f,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var u=Z(11462);class W extends O{set th(f){this._hasAlpha!==f&&(this._hasAlpha=f,this._scene&&this._scene.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))))}get th(){return this._hasAlpha}set getAlphaFromRGB(f){this._getAlphaFromRGB!==f&&(this._getAlphaFromRGB=f,this._scene&&this._scene.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(f){this._coordinatesIndex!==f&&(this._coordinatesIndex=f,this._scene&&this._scene.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(f){this._coordinatesMode!==f&&(this._coordinatesMode=f,this._scene&&this._scene.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(f){this._wrapU=f}get wrapV(){return this._wrapV}set wrapV(f){this._wrapV=f}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(f){this._texture?this._texture.isCube=f:this._isCube=f}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(f){this._texture&&(this._texture.is3D=f)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(f){this._texture&&(this._texture.is2DArray=f)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(f){var v;if(this._texture){if(this._texture._gammaSpace===f)return;this._texture._gammaSpace=f}else{if(this._gammaSpace===f)return;this._gammaSpace=f}null===(v=this.Yf())||void 0===v||v.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(f){var v;f!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=f),null===(v=this.Yf())||void 0===v||v.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(f){this._texture&&(this._texture._lodGenerationOffset=f)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(f){this._texture&&(this._texture._lodGenerationScale=f)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(f){this._texture&&(this._texture._linearSpecularLOD=f)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(f){this._texture&&(this._texture._irradianceTexture=f)}get uid(){return this._uid||(this._uid=(0,C.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(f){this._onDisposeObserver&&this.Kh.remove(this._onDisposeObserver),this._onDisposeObserver=this.Kh.add(f)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=W.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Kh=new J.c,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,f?W._IsScene(f)?this._scene=f:this._engine=f:this._scene=e.c.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=v,this._uid=null}Yf(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return l.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return l.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(f){}get canRescale(){return!1}_getFromCache(f,v,Z,V,h,J){const l=this._getEngine();if(!l)return null;const e=l._getUseSRGBBuffer(!!h,v),C=l.getLoadedTexturesCache();for(let H=0;H<C.length;H++){const l=C[H];if((void 0===h||e===l._useSRGBBuffer)&&(void 0===V||V===l.invertY)&&l.url===f&&l.generateMipMaps===!v&&(!Z||Z===l.samplingMode)&&(void 0===J||J===l.isCube))return l.incrementReferences(),l}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const f=this.Yf();f&&f.markAllMaterialsAsDirty(1)}readPixels(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,V=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,e=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const H=this._getEngine();if(!H)return null;const O=this.getSize();let u=O.width,W=O.height;0!==v&&(u/=Math.pow(2,v),W/=Math.pow(2,v),u=Math.round(u),W=Math.round(W)),e=Math.min(u,e),C=Math.min(W,C);try{return this._texture.isCube?H._readTexturePixels(this._texture,e,C,f,v,Z,V,h,J,l):H._readTexturePixels(this._texture,e,C,-1,v,Z,V,h,J,l)}catch(a){return null}}_readPixelsSync(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,V=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const J=this.getSize();let l=J.width,e=J.height;const C=this._getEngine();if(!C)return null;0!=v&&(l/=Math.pow(2,v),e/=Math.pow(2,v),l=Math.round(l),e=Math.round(e));try{return this._texture.isCube?C._readTexturePixelsSync(this._texture,l,e,f,v,Z,V,h):C._readTexturePixelsSync(this._texture,l,e,-1,v,Z,V,h)}catch(H){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const f=this._scene.textures.indexOf(this);if(f>=0&&this._scene.textures.splice(f,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const f=this._parentContainer.textures.indexOf(this);f>-1&&this._parentContainer.textures.splice(f,1),this._parentContainer=null}}this.Kh.notifyObservers(this),this.Kh.clear(),this.metadata=null,super.dispose()}serialize(){let f=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!f)return null;const v=u.b.Serialize(this);return u.b.AppendSerializedAnimations(this,v),v}static WhenAllReady(f,v){let Z=f.length;if(0!==Z)for(let V=0;V<f.length;V++){const h=f[V];if(h.isReady())0===--Z&&v();else{const f=h.onLoadObservable;f?f.addOnce((()=>{0===--Z&&v()})):0===--Z&&v()}}else v()}static _IsScene(f){return"Scene"===f.getClassName()}}W.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,V.d)([(0,h.F)()],W.prototype,"uniqueId",void 0),(0,V.d)([(0,h.F)()],W.prototype,"name",void 0),(0,V.d)([(0,h.F)()],W.prototype,"displayName",void 0),(0,V.d)([(0,h.F)()],W.prototype,"metadata",void 0),(0,V.d)([(0,h.F)("th")],W.prototype,"_hasAlpha",void 0),(0,V.d)([(0,h.F)("getAlphaFromRGB")],W.prototype,"_getAlphaFromRGB",void 0),(0,V.d)([(0,h.F)()],W.prototype,"level",void 0),(0,V.d)([(0,h.F)("coordinatesIndex")],W.prototype,"_coordinatesIndex",void 0),(0,V.d)([(0,h.F)()],W.prototype,"optimizeUVAllocation",void 0),(0,V.d)([(0,h.F)("coordinatesMode")],W.prototype,"_coordinatesMode",void 0),(0,V.d)([(0,h.F)()],W.prototype,"wrapU",null),(0,V.d)([(0,h.F)()],W.prototype,"wrapV",null),(0,V.d)([(0,h.F)()],W.prototype,"wrapR",void 0),(0,V.d)([(0,h.F)()],W.prototype,"anisotropicFilteringLevel",void 0),(0,V.d)([(0,h.F)()],W.prototype,"isCube",null),(0,V.d)([(0,h.F)()],W.prototype,"is3D",null),(0,V.d)([(0,h.F)()],W.prototype,"is2DArray",null),(0,V.d)([(0,h.F)()],W.prototype,"gammaSpace",null),(0,V.d)([(0,h.F)()],W.prototype,"invertZ",void 0),(0,V.d)([(0,h.F)()],W.prototype,"lodLevelInAlpha",void 0),(0,V.d)([(0,h.F)()],W.prototype,"lodGenerationOffset",null),(0,V.d)([(0,h.F)()],W.prototype,"lodGenerationScale",null),(0,V.d)([(0,h.F)()],W.prototype,"linearSpecularLOD",null),(0,V.d)([(0,h.x)()],W.prototype,"irradianceTexture",null),(0,V.d)([(0,h.F)()],W.prototype,"isRenderTarget",void 0)},11401:(f,v,Z)=>{Z.d(v,{e:()=>M});var V=Z(11405),h=Z(11410),J=Z(11235),l=Z(11421),e=Z(11446),C=Z(11372),H=Z(11263),O=Z(11316),u=Z(11370),W=Z(11478),a=Z(11301);function b(f,v){let Z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const V=v.width,h=v.height;if(f instanceof Float32Array){let v=f.byteLength/f.BYTES_PER_ELEMENT;const Z=new Uint8Array(v);for(;--v>=0;){let V=f[v];V<0?V=0:V>1&&(V=1),Z[v]=255*V}f=Z}const J=document.createElement("canvas");J.width=V,J.height=h;const l=J.getContext("2d");if(!l)return null;const e=l.createImageData(V,h);if(e.data.set(f),l.putImageData(e,0,0),Z){const f=document.createElement("canvas");f.width=V,f.height=h;const v=f.getContext("2d");return v?(v.translate(0,h),v.scale(1,-1),v.drawImage(J,0,0),f.toDataURL("image/png")):null}return J.toDataURL("image/png")}function X(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const V=f.getInternalTexture();if(!V)return null;const h=f._readPixelsSync(v,Z);return h?b(h,f.getSize(),V.invertY):null}async function F(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const V=f.getInternalTexture();if(!V)return null;const h=await f.readPixels(v,Z);return h?b(h,f.getSize(),V.invertY):null}var U=Z(11486),K=Z(11462);class M extends e.b{static _CreateVideoTexture(f,v,Z){arguments.length>5&&void 0!==arguments[5]||M.TRILINEAR_SAMPLINGMODE;throw(0,H.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(f){this._isBlocking=f}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(f,v,Z,V){let h,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:M.TRILINEAR_SAMPLINGMODE,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,H=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],W=arguments.length>9?arguments[9]:void 0,a=arguments.length>10?arguments[10]:void 0,b=arguments.length>11?arguments[11]:void 0,X=arguments.length>12?arguments[12]:void 0,F=arguments.length>13?arguments[13]:void 0;super(v),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new J.c,this._isBlocking=!0,this.name=f||"",this.url=f;let K=!1,A=null,s=!0;"object"===typeof Z&&null!==Z?(h=Z.noMipmap??!1,V=Z.invertY??!U.b,l=Z.samplingMode??M.TRILINEAR_SAMPLINGMODE,e=Z.R??null,C=Z.onError??null,H=Z.buffer??null,u=Z.deleteBuffer??!1,W=Z.format,a=Z.mimeType,b=Z.loaderOptions,X=Z.creationFlags,K=Z.useSRGBBuffer??!1,A=Z.internalTexture??null,s=Z.gammaSpace??s,F=Z.forcedExtension??F):h=!!Z,this._gammaSpace=s,this._noMipmap=h,this._invertY=void 0===V?!U.b:V,this._initialSamplingMode=l,this._buffer=H,this._deleteBuffer=u,this._mimeType=a,this._loaderOptions=b,this._creationFlags=X,this._useSRGBBuffer=K,this._forcedExtension=F,void 0!==W&&(this._format=W);const z=this.Yf(),Y=this._getEngine();if(!Y)return;Y.onBeforeTextureInitObservable.notifyObservers(this);const y=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),e&&e(),!this.isBlocking&&z&&z.resetCachedMaterial()},N=(f,v)=>{this._loadingError=!0,this._errorObject={message:f,exception:v},C&&C(f,v),M.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!A)return this._delayedOnLoad=y,void(this._delayedOnError=N);if(this._texture=A??this._getFromCache(this.url,h,l,this._invertY,K,this.isCube),this._texture)if(this._texture.isReady)O.d.SetImmediate((()=>y()));else{const f=this._texture.onLoadedObservable.add(y);this._texture.onErrorObservable.add((v=>{var Z;N(v.message,v.exception),null===(Z=this._texture)||void 0===Z||Z.onLoadedObservable.remove(f)}))}else if(z&&z.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=y,this._delayedOnError=N;else{try{this._texture=Y.createTexture(this.url,h,this._invertY,z,l,y,N,this._buffer,void 0,this._format,this._forcedExtension,a,b,X,K)}catch(i){throw N("error loading",i),i}u&&(this._buffer=null)}}updateURL(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Z=arguments.length>2?arguments[2]:void 0,V=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Yf().markAllMaterialsAsDirty(1,(f=>f.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=f),this.url=f,this._buffer=v,this._forcedExtension=V,this.delayLoadState=4,Z&&(this._delayedOnLoad=Z),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const f=this.Yf();f&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?O.d.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=f.getEngine().createTexture(this.url,this._noMipmap,this._invertY,f,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(f,v,Z,V){f*=this._cachedUScale,v*=this._cachedVScale,f-=this.uRotationCenter*this._cachedUScale,v-=this.vRotationCenter*this._cachedVScale,Z-=this.wRotationCenter,l.Xv.TransformCoordinatesFromFloatsToRef(f,v,Z,this._rowGenerationMatrix,V),V.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,V.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,V.z+=this.wRotationCenter}getTextureMatrix(){let f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*f===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*f,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=l.Matrix.Zero(),this._rowGenerationMatrix=new l.Matrix,this._t0=l.Xv.Zero(),this._t1=l.Xv.Zero(),this._t2=l.Xv.Zero()),l.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(l.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,l.TmpVectors.Matrix[0]),l.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,l.TmpVectors.Matrix[1]),l.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,l.TmpVectors.Matrix[2]),l.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,l.TmpVectors.Matrix[3]),l.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(l.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(l.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(l.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.hu(this._t0),this._t2.hu(this._t0),l.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const v=this.Yf();if(!v)return this._cachedTextureMatrix;const Z=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&Z!==this._cachedIdentity3x2&&v.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const f=this.Yf();if(!f)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==M.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===f.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=l.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=l.Matrix.Zero());const v=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case M.PLANAR_MODE:l.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case M.PROJECTION_MODE:{l.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const v=f.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=v.updateFlag,v.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:l.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return v&&f.markAllMaterialsAsDirty(1,(f=>f.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const f={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,R:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return K.b.Clone((()=>new M(this._texture?this._texture.url:null,this.Yf(),f)),this)}serialize(){var f;const v=this.name;M.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const Z=super.serialize(M._SerializeInternalTextureUniqueId);if(!Z)return null;if(M.SerializeBuffers||M.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))Z.base64String=this._buffer,Z.name=Z.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const f=this.mimeType||"image/png";Z.base64String=`data:${f};base64,${(0,a.l)(this._buffer)}`}else(M.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(Z.base64String=!this._engine||this._engine._features.supportSyncTextureRead?X(this):F(this));var V;(Z.invertY=this._invertY,Z.samplingMode=this.samplingMode,Z._creationFlags=this._creationFlags,Z._useSRGBBuffer=this._useSRGBBuffer,M._SerializeInternalTextureUniqueId)&&(Z.internalTextureUniqueId=null===(V=this._texture)||void 0===V?void 0:V.uniqueId);return Z.internalTextureLabel=null===(f=this._texture)||void 0===f?void 0:f.label,Z.noMipmap=this._noMipmap,this.name=v,Z}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(f,v,Z){if(f.customType){const V=u.b.Instantiate(f.customType).Parse(f,v,Z);return f.samplingMode&&V.updateSamplingMode&&V._samplingMode&&V._samplingMode!==f.samplingMode&&V.updateSamplingMode(f.samplingMode),V}if(f.isCube&&!f.isRenderTarget)return M._CubeTextureParser(f,v,Z);const V=void 0!==f.internalTextureUniqueId;if(!f.name&&!f.isRenderTarget&&!V)return null;let h;if(V){const Z=v.getEngine().getLoadedTexturesCache();for(const v of Z)if(v.uniqueId===f.internalTextureUniqueId){h=v;break}}const J=v=>{if(v&&v._texture&&(v._texture._cachedWrapU=null,v._texture._cachedWrapV=null,v._texture._cachedWrapR=null),f.samplingMode){const Z=f.samplingMode;v&&v.samplingMode!==Z&&v.updateSamplingMode(Z)}if(v&&f.animations)for(let Z=0;Z<f.animations.length;Z++){const V=f.animations[Z],h=(0,C.e)("BABYLON.Animation");h&&v.animations.push(h.Parse(V))}v&&v._texture&&(V&&!h&&v._texture._setUniqueId(f.internalTextureUniqueId),v._texture.label=f.internalTextureLabel)};return K.b.Parse((()=>{let V=!0;if(f.noMipmap&&(V=!1),f.mirrorPlane){const Z=M._CreateMirror(f.name,f.renderTargetSize,v,V);return Z._waitingRenderList=f.renderList,Z.mirrorPlane=W.e.Av(f.mirrorPlane),J(Z),Z}if(f.isRenderTarget){let Z=null;if(f.isCube){if(v.reflectionProbes)for(let V=0;V<v.reflectionProbes.length;V++){const Z=v.reflectionProbes[V];if(Z.name===f.name)return Z.cubeTexture}}else Z=M._CreateRenderTargetTexture(f.name,f.renderTargetSize,v,V,f._creationFlags??0),Z._waitingRenderList=f.renderList;return J(Z),Z}if(f.isVideo){const h=M._CreateVideoTexture(Z+(f.url||f.name),Z+(f.src||f.url),v,V,f.invertY,f.samplingMode,f.settings||{});return J(h),h}{let l;if(f.base64String&&!h)l=M.CreateFromBase64String(f.base64String,f.base64String,v,!V,f.invertY,f.samplingMode,(()=>{J(l)}),f._creationFlags??0,f._useSRGBBuffer??!1),l.name=f.name;else{let e;e=f.name&&(f.name.indexOf("://")>0||f.name.startsWith("data:"))?f.name:Z+f.name,f.url&&(f.url.startsWith("data:")||M.UseSerializedUrlIfAny)&&(e=f.url);const C={noMipmap:!V,invertY:f.invertY,samplingMode:f.samplingMode,R:()=>{J(l)},internalTexture:h};l=new M(e,v,C)}return l}}),f,v)}static CreateFromBase64String(f,v,Z,V,h){let J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:M.TRILINEAR_SAMPLINGMODE;return new M("data:"+v,Z,V,h,J,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,f,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(f,v,Z){let V=arguments.length>3&&void 0!==arguments[3]&&arguments[3],h=arguments.length>4?arguments[4]:void 0,J=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:M.TRILINEAR_SAMPLINGMODE,e=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,H=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,O=arguments.length>10?arguments[10]:void 0,u=arguments.length>11?arguments[11]:void 0;return"data:"!==f.substring(0,5)&&(f="data:"+f),new M(f,Z,h,J,l,e,C,v,V,H,void 0,void 0,O,u)}}M.SerializeBuffers=!0,M.ForceSerializeBuffers=!1,M.OnTextureLoadErrorObservable=new J.c,M._SerializeInternalTextureUniqueId=!1,M._CubeTextureParser=(f,v,Z)=>{throw(0,H.e)("CubeTexture")},M._CreateMirror=(f,v,Z,V)=>{throw(0,H.e)("MirrorTexture")},M._CreateRenderTargetTexture=(f,v,Z,V,h)=>{throw(0,H.e)("RenderTargetTexture")},M.NEAREST_SAMPLINGMODE=1,M.NEAREST_NEAREST_MIPLINEAR=8,M.BILINEAR_SAMPLINGMODE=2,M.LINEAR_LINEAR_MIPNEAREST=11,M.TRILINEAR_SAMPLINGMODE=3,M.LINEAR_LINEAR_MIPLINEAR=3,M.NEAREST_NEAREST_MIPNEAREST=4,M.NEAREST_LINEAR_MIPNEAREST=5,M.NEAREST_LINEAR_MIPLINEAR=6,M.NEAREST_LINEAR=7,M.NEAREST_NEAREST=1,M.LINEAR_NEAREST_MIPNEAREST=9,M.LINEAR_NEAREST_MIPLINEAR=10,M.LINEAR_LINEAR=2,M.LINEAR_NEAREST=12,M.EXPLICIT_MODE=0,M.SPHERICAL_MODE=1,M.PLANAR_MODE=2,M.CUBIC_MODE=3,M.PROJECTION_MODE=4,M.SKYBOX_MODE=5,M.INVCUBIC_MODE=6,M.EQUIRECTANGULAR_MODE=7,M.FIXED_EQUIRECTANGULAR_MODE=8,M.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,M.CLAMP_ADDRESSMODE=0,M.WRAP_ADDRESSMODE=1,M.MIRROR_ADDRESSMODE=2,M.UseSerializedUrlIfAny=!1,(0,V.d)([(0,h.F)()],M.prototype,"url",void 0),(0,V.d)([(0,h.F)()],M.prototype,"uOffset",void 0),(0,V.d)([(0,h.F)()],M.prototype,"vOffset",void 0),(0,V.d)([(0,h.F)()],M.prototype,"uScale",void 0),(0,V.d)([(0,h.F)()],M.prototype,"vScale",void 0),(0,V.d)([(0,h.F)()],M.prototype,"uAng",void 0),(0,V.d)([(0,h.F)()],M.prototype,"vAng",void 0),(0,V.d)([(0,h.F)()],M.prototype,"wAng",void 0),(0,V.d)([(0,h.F)()],M.prototype,"uRotationCenter",void 0),(0,V.d)([(0,h.F)()],M.prototype,"vRotationCenter",void 0),(0,V.d)([(0,h.F)()],M.prototype,"wRotationCenter",void 0),(0,V.d)([(0,h.F)()],M.prototype,"homogeneousRotationInUVTransform",void 0),(0,V.d)([(0,h.F)()],M.prototype,"isBlocking",null),(0,C.h)("BABYLON.Texture",M),K.b._TextureParser=M.Parse},11478:(f,v,Z)=>{Z.d(v,{e:()=>h});var V=Z(11421);class h{constructor(f,v,Z,h){this.normal=new V.Xv(f,v,Z),this.d=h}Ph(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new h(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let f=this.normal.getHashCode();return f=397*f^this.d,f}normalize(){const f=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let v=0;return 0!==f&&(v=1/f),this.normal.x*=v,this.normal.y*=v,this.normal.z*=v,this.d*=v,this}transform(f){const v=h._TmpMatrix;f.invertToRef(v);const Z=v.m,V=this.normal.x,J=this.normal.y,l=this.normal.z,e=this.d,C=V*Z[0]+J*Z[1]+l*Z[2]+e*Z[3],H=V*Z[4]+J*Z[5]+l*Z[6]+e*Z[7],O=V*Z[8]+J*Z[9]+l*Z[10]+e*Z[11],u=V*Z[12]+J*Z[13]+l*Z[14]+e*Z[15];return new h(C,H,O,u)}dotCoordinate(f){return this.normal.x*f.x+this.normal.y*f.y+this.normal.z*f.z+this.d}copyFromPoints(f,v,Z){const V=v.x-f.x,h=v.y-f.y,J=v.z-f.z,l=Z.x-f.x,e=Z.y-f.y,C=Z.z-f.z,H=h*C-J*e,O=J*l-V*C,u=V*e-h*l,W=Math.sqrt(H*H+O*O+u*u);let a;return a=0!==W?1/W:0,this.normal.x=H*a,this.normal.y=O*a,this.normal.z=u*a,this.d=-(this.normal.x*f.x+this.normal.y*f.y+this.normal.z*f.z),this}isFrontFacingTo(f,v){return V.Xv.Dot(this.normal,f)<=v}signedDistanceTo(f){return V.Xv.Dot(f,this.normal)+this.d}static Av(f){return new h(f[0],f[1],f[2],f[3])}static FromPoints(f,v,Z){const V=new h(0,0,0,0);return V.copyFromPoints(f,v,Z),V}static FromPositionAndNormal(f,v){const Z=new h(0,0,0,0);return this.FromPositionAndNormalToRef(f,v,Z)}static FromPositionAndNormalToRef(f,v,Z){return Z.normal.h(v),Z.normal.normalize(),Z.d=-f.dot(Z.normal),Z}static SignedDistanceToPlaneFromPositionAndNormal(f,v,Z){const h=-(v.x*f.x+v.y*f.y+v.z*f.z);return V.Xv.Dot(Z,v)+h}}h._TmpMatrix=V.Matrix.Identity()},11453:(f,v,Z)=>{Z.d(v,{c:()=>V});class V{constructor(f,v){this.width=f,this.height=v}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let f=0|this.width;return f=397*f^this.height,f}h(f){this.width=f.width,this.height=f.height}fe(f,v){return this.width=f,this.height=v,this}set(f,v){return this.fe(f,v)}multiplyByFloats(f,v){return new V(this.width*f,this.height*v)}clone(){return new V(this.width,this.height)}equals(f){return!!f&&(this.width===f.width&&this.height===f.height)}get surface(){return this.width*this.height}static Zero(){return new V(0,0)}add(f){return new V(this.width+f.width,this.height+f.height)}Fv(f){return new V(this.width-f.width,this.height-f.height)}scale(f){return new V(this.width*f,this.height*f)}static Lerp(f,v,Z){const h=f.width+(v.width-f.width)*Z,J=f.height+(v.height-f.height)*Z;return new V(h,J)}}},11414:(f,v,Z)=>{Z.d(v,{d:()=>J,f:()=>l});const V={},h={};function J(f){const v=f.getClassName();return h[v]||(h[v]={}),h[v]}function l(f){const v=f.getClassName();if(V[v])return V[v];V[v]={};const Z=V[v];let J=f,l=v;for(;l;){const f=h[l];for(const h in f)Z[h]=f[h];let v,V=!1;do{if(v=Object.getPrototypeOf(J),!v.getClassName){V=!0;break}if(v.getClassName()!==l)break;J=v}while(v);if(V)break;l=v.getClassName(),J=v}return Z}},11410:(f,v,Z)=>{Z.d(v,{B:()=>O,E:()=>u,F:()=>l,b:()=>J,d:()=>K,f:()=>a,g:()=>C,h:()=>b,k:()=>H,n:()=>X,p:()=>U,s:()=>W,v:()=>F,x:()=>e});var V=Z(11414);function h(f,v){return(Z,h)=>{const J=(0,V.d)(Z);J[h]||(J[h]={type:f,sourceName:v})}}function J(f){return function(f){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(Z,V)=>{const h=v||"_"+V;Object.defineProperty(Z,V,{get:function(){return this[h]},set:function(v){var V;"function"===typeof(null===(V=this[h])||void 0===V?void 0:V.equals)&&this[h].equals(v)||this[h]!==v&&(this[h]=v,Z[f].apply(this))},enumerable:!0,configurable:!0})}}(f,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function l(f){return h(0,f)}function e(f){return h(1,f)}function C(f){return h(2,f)}function H(f){return h(3,f)}function O(f){return h(4,f)}function u(f){return h(5,f)}function W(f){return h(6,f)}function a(f){return h(7,f)}function b(f){return h(8,f)}function X(f){return h(9,f)}function F(f){return h(10,f)}function U(f){return h(12,f)}function K(f,v,Z,V){const h=Z.value;Z.value=function(){let Z=h;if("undefined"!==typeof _native&&_native[v]){const f=_native[v];Z=V?function(){return V(...arguments)?f(...arguments):h(...arguments)}:f}return f[v]=Z,Z(...arguments)}}K.filter=function(f){return(v,Z,V)=>K(v,Z,V,f)}},11462:(f,v,Z)=>{Z.d(v,{b:()=>H});var V=Z(11263),h=Z(11466),J=Z(11472),l=Z(11421),e=Z(11414);const C=function(f,v,Z){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const J=f();h.b&&h.b.HasTags(v)&&h.b.AddTagsTo(J,h.b.GetTags(v,!0));const l=(0,e.f)(J),C={};for(const h in l){const f=l[h],e=v[h],O=f.type;if(void 0!==e&&null!==e&&("uniqueId"!==h||H.AllowLoadingUniqueId))switch(O){case 0:case 6:case 9:case 11:J[h]=e;break;case 1:V.cloneTexturesOnlyOnce&&C[e.uniqueId]?J[h]=C[e.uniqueId]:(J[h]=Z||e.isRenderTarget?e:e.clone(),C[e.uniqueId]=J[h]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:J[h]=Z?e:e.clone()}}return J};class H{static AppendSerializedAnimations(f,v){if(f.animations){v.animations=[];for(let Z=0;Z<f.animations.length;Z++){const V=f.animations[Z];v.animations.push(V.serialize())}}}static Serialize(f,v){v||(v={}),h.b&&(v.tags=h.b.GetTags(f));const Z=(0,e.f)(f);for(const V in Z){const h=Z[V],J=h.sourceName||V,l=h.type,e=f[V];if(void 0!==e&&null!==e&&("uniqueId"!==V||H.AllowLoadingUniqueId))switch(l){case 0:v[J]=e;break;case 1:case 3:case 7:case 9:v[J]=e.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:v[J]=e.Ph();break;case 6:case 11:v[J]=e.id}}return v}static ParseProperties(f,v,Z,V){V||(V="");const h=(0,e.f)(v);for(const e in h){const C=h[e],O=f[C.sourceName||e],u=C.type;if(void 0!==O&&null!==O&&("uniqueId"!==e||H.AllowLoadingUniqueId)){const f=v;switch(u){case 0:f[e]=O;break;case 1:Z&&(f[e]=H._TextureParser(O,Z,V));break;case 2:f[e]=J.Mv.Av(O);break;case 3:f[e]=H._FresnelParametersParser(O);break;case 4:f[e]=l.Vector2.Av(O);break;case 5:f[e]=l.Xv.Av(O);break;case 6:Z&&(f[e]=Z.getLastMeshById(O));break;case 7:f[e]=H._ColorCurvesParser(O);break;case 8:f[e]=J.he.Av(O);break;case 9:f[e]=H._ImageProcessingConfigurationParser(O);break;case 10:f[e]=l.Quaternion.Av(O);break;case 11:Z&&(f[e]=Z.getCameraById(O));break;case 12:f[e]=l.Matrix.Av(O)}}}}static Parse(f,v,Z){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const J=f();return h.b&&h.b.AddTagsTo(J,v.tags),H.ParseProperties(v,J,Z,V),J}static Clone(f,v){return C(f,v,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(f,v){return C(f,v,!0)}}H.AllowLoadingUniqueId=!1,H._ImageProcessingConfigurationParser=f=>{throw(0,V.e)("ImageProcessingConfiguration")},H._FresnelParametersParser=f=>{throw(0,V.e)("FresnelParameters")},H._ColorCurvesParser=f=>{throw(0,V.e)("ColorCurves")},H._TextureParser=(f,v,Z)=>{throw(0,V.e)("Texture")}},11466:(f,v,Z)=>{Z.d(v,{b:()=>h});class V{static Eval(f,v){return"true"===(f=f.match(/\([^()]*\)/g)?f.replace(/\([^()]*\)/g,(f=>(f=f.slice(1,f.length-1),V._HandleParenthesisContent(f,v)))):V._HandleParenthesisContent(f,v))||"false"!==f&&V.Eval(f,v)}static _HandleParenthesisContent(f,v){let Z;v=v||(f=>"true"===f);const h=f.split("||");for(const J in h)if(Object.prototype.hasOwnProperty.call(h,J)){let f=V._SimplifyNegation(h[J].trim());const l=f.split("&&");if(l.length>1)for(let h=0;h<l.length;++h){const J=V._SimplifyNegation(l[h].trim());if(Z="true"!==J&&"false"!==J?"!"===J[0]?!v(J.substring(1)):v(J):"true"===J,!Z){f="false";break}}if(Z||"true"===f){Z=!0;break}Z="true"!==f&&"false"!==f?"!"===f[0]?!v(f.substring(1)):v(f):"true"===f}return Z?"true":"false"}static _SimplifyNegation(f){return"!true"===(f=(f=f.replace(/^[\s!]+/,(f=>(f=f.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?f="false":"!false"===f&&(f="true"),f}}class h{static EnableFor(f){f._tags=f._tags||{},f.hasTags=()=>h.HasTags(f),f.addTags=v=>h.AddTagsTo(f,v),f.removeTags=v=>h.RemoveTagsFrom(f,v),f.matchesTagsQuery=v=>h.MatchesQuery(f,v)}static DisableFor(f){delete f._tags,delete f.hasTags,delete f.addTags,delete f.removeTags,delete f.matchesTagsQuery}static HasTags(f){if(!f._tags)return!1;const v=f._tags;for(const Z in v)if(Object.prototype.hasOwnProperty.call(v,Z))return!0;return!1}static GetTags(f){let v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!f._tags)return null;if(v){const v=[];for(const Z in f._tags)Object.prototype.hasOwnProperty.call(f._tags,Z)&&!0===f._tags[Z]&&v.push(Z);return v.join(" ")}return f._tags}static AddTagsTo(f,v){if(!v)return;if("string"!==typeof v)return;const Z=v.split(" ");for(const V of Z)h._AddTagTo(f,V)}static _AddTagTo(f,v){""!==(v=v.trim())&&"true"!==v&&"false"!==v&&(v.match(/[\s]/)||v.match(/^([!]|([|]|[&]){2})/)||(h.EnableFor(f),f._tags[v]=!0))}static RemoveTagsFrom(f,v){if(!h.HasTags(f))return;const Z=v.split(" ");for(const V in Z)h._RemoveTagFrom(f,Z[V])}static _RemoveTagFrom(f,v){delete f._tags[v]}static MatchesQuery(f,v){return void 0===v||(""===v?h.HasTags(f):V.Eval(v,(v=>h.HasTags(f)&&f._tags[v])))}}},11405:(f,v,Z)=>{Z.d(v,{d:()=>V});function V(f,v,Z,V){var h,J=arguments.length,l=J<3?v:null===V?V=Object.getOwnPropertyDescriptor(v,Z):V;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(f,v,Z,V);else for(var e=f.length-1;e>=0;e--)(h=f[e])&&(l=(J<3?h(l):J>3?h(v,Z,l):h(v,Z))||l);return J>3&&l&&Object.defineProperty(v,Z,l),l}Object.create;Object.create}}]);