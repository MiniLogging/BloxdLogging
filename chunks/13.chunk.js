"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[13],{13031:(B,u,F)=>{F.d(u,{b:()=>Z});let Z=!1},13002:(B,u,F)=>{F.d(u,{d:()=>t});var Z=F(12971),V=F(12973),p=F(12807),G=F(12979),R=F(12855),e=F(12955),s=(F(12861),F(13005));class Y{get wrapU(){return this._wrapU}set wrapU(B){this._wrapU=B}get wrapV(){return this._wrapV}set wrapV(B){this._wrapV=B}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(B){this._texture&&(this._texture.isCube=B)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(B){this._texture&&(this._texture.is3D=B)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(B){this._texture&&(this._texture.is2DArray=B)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(B){return void 0!==(null===B||void 0===B?void 0:B.shareDepth)}constructor(B){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=s.e.Zero(),this._cachedBaseSize=s.e.Zero(),this._initialSamplingMode=2,this._texture=Y._IsRenderTargetWrapper(B)?B.texture:B,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(B){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(B,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var Q=F(13014);class t extends Y{set LR(B){this._hasAlpha!==B&&(this._hasAlpha=B,this._scene&&this._scene.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))))}get LR(){return this._hasAlpha}set getAlphaFromRGB(B){this._getAlphaFromRGB!==B&&(this._getAlphaFromRGB=B,this._scene&&this._scene.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(B){this._coordinatesIndex!==B&&(this._coordinatesIndex=B,this._scene&&this._scene.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(B){this._coordinatesMode!==B&&(this._coordinatesMode=B,this._scene&&this._scene.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(B){this._wrapU=B}get wrapV(){return this._wrapV}set wrapV(B){this._wrapV=B}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(B){this._texture?this._texture.isCube=B:this._isCube=B}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(B){this._texture&&(this._texture.is3D=B)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(B){this._texture&&(this._texture.is2DArray=B)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(B){var u;if(this._texture){if(this._texture._gammaSpace===B)return;this._texture._gammaSpace=B}else{if(this._gammaSpace===B)return;this._gammaSpace=B}null===(u=this.yB())||void 0===u||u.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(B){var u;B!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=B),null===(u=this.yB())||void 0===u||u.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(B){this._texture&&(this._texture._lodGenerationOffset=B)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(B){this._texture&&(this._texture._lodGenerationScale=B)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(B){this._texture&&(this._texture._linearSpecularLOD=B)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(B){this._texture&&(this._texture._irradianceTexture=B)}get uid(){return this._uid||(this._uid=(0,e.d)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(B){this._onDisposeObserver&&this.GR.remove(this._onDisposeObserver),this._onDisposeObserver=this.GR.add(B)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=t.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.GR=new p.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,B?t._IsScene(B)?this._scene=B:this._engine=B:this._scene=R.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=u,this._uid=null}yB(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return G.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return G.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(B){}get canRescale(){return!1}_getFromCache(B,u,F,Z,V,p){const G=this._getEngine();if(!G)return null;const R=G._getUseSRGBBuffer(!!V,u),e=G.getLoadedTexturesCache();for(let s=0;s<e.length;s++){const G=e[s];if((void 0===V||R===G._useSRGBBuffer)&&(void 0===Z||Z===G.invertY)&&G.url===B&&G.generateMipMaps===!u&&(!F||F===G.samplingMode)&&(void 0===p||p===G.isCube))return G.incrementReferences(),G}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const B=this.yB();B&&B.markAllMaterialsAsDirty(1)}readPixels(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],V=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,e=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const s=this._getEngine();if(!s)return null;const Y=this.getSize();let Q=Y.width,t=Y.height;0!==u&&(Q/=Math.pow(2,u),t/=Math.pow(2,u),Q=Math.round(Q),t=Math.round(t)),R=Math.min(Q,R),e=Math.min(t,e);try{return this._texture.isCube?s._readTexturePixels(this._texture,R,e,B,u,F,Z,V,p,G):s._readTexturePixels(this._texture,R,e,-1,u,F,Z,V,p,G)}catch(v){return null}}_readPixelsSync(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Z=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],V=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const p=this.getSize();let G=p.width,R=p.height;const e=this._getEngine();if(!e)return null;0!=u&&(G/=Math.pow(2,u),R/=Math.pow(2,u),G=Math.round(G),R=Math.round(R));try{return this._texture.isCube?e._readTexturePixelsSync(this._texture,G,R,B,u,F,Z,V):e._readTexturePixelsSync(this._texture,G,R,-1,u,F,Z,V)}catch(s){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const B=this._scene.textures.indexOf(this);if(B>=0&&this._scene.textures.splice(B,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const B=this._parentContainer.textures.indexOf(this);B>-1&&this._parentContainer.textures.splice(B,1),this._parentContainer=null}}this.GR.notifyObservers(this),this.GR.clear(),this.metadata=null,super.dispose()}serialize(){let B=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!B)return null;const u=Q.c.Serialize(this);return Q.c.AppendSerializedAnimations(this,u),u}static WhenAllReady(B,u){let F=B.length;if(0!==F)for(let Z=0;Z<B.length;Z++){const V=B[Z];if(V.isReady())0===--F&&u();else{const B=V.onLoadObservable;B?B.addOnce((()=>{0===--F&&u()})):0===--F&&u()}}else u()}static _IsScene(B){return"Scene"===B.getClassName()}}t.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,Z.d)([(0,V.L)()],t.prototype,"uniqueId",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"name",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"displayName",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"metadata",void 0),(0,Z.d)([(0,V.L)("LR")],t.prototype,"_hasAlpha",void 0),(0,Z.d)([(0,V.L)("getAlphaFromRGB")],t.prototype,"_getAlphaFromRGB",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"level",void 0),(0,Z.d)([(0,V.L)("coordinatesIndex")],t.prototype,"_coordinatesIndex",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"optimizeUVAllocation",void 0),(0,Z.d)([(0,V.L)("coordinatesMode")],t.prototype,"_coordinatesMode",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"wrapU",null),(0,Z.d)([(0,V.L)()],t.prototype,"wrapV",null),(0,Z.d)([(0,V.L)()],t.prototype,"wrapR",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"anisotropicFilteringLevel",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"isCube",null),(0,Z.d)([(0,V.L)()],t.prototype,"is3D",null),(0,Z.d)([(0,V.L)()],t.prototype,"is2DArray",null),(0,Z.d)([(0,V.L)()],t.prototype,"gammaSpace",null),(0,Z.d)([(0,V.L)()],t.prototype,"invertZ",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"lodLevelInAlpha",void 0),(0,Z.d)([(0,V.L)()],t.prototype,"lodGenerationOffset",null),(0,Z.d)([(0,V.L)()],t.prototype,"lodGenerationScale",null),(0,Z.d)([(0,V.L)()],t.prototype,"linearSpecularLOD",null),(0,Z.d)([(0,V.E)()],t.prototype,"irradianceTexture",null),(0,Z.d)([(0,V.L)()],t.prototype,"isRenderTarget",void 0)},12969:(B,u,F)=>{F.d(u,{d:()=>f});var Z=F(12971),V=F(12973),p=F(12807),G=F(12979),R=F(13002),e=F(12949),s=F(12843),Y=F(12882),Q=F(12944),t=F(13029),v=F(12867);function D(B,u){let F=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const Z=u.width,V=u.height;if(B instanceof Float32Array){let u=B.byteLength/B.BYTES_PER_ELEMENT;const F=new Uint8Array(u);for(;--u>=0;){let Z=B[u];Z<0?Z=0:Z>1&&(Z=1),F[u]=255*Z}B=F}const p=document.createElement("canvas");p.width=Z,p.height=V;const G=p.getContext("2d");if(!G)return null;const R=G.createImageData(Z,V);if(R.data.set(B),G.putImageData(R,0,0),F){const B=document.createElement("canvas");B.width=Z,B.height=V;const u=B.getContext("2d");return u?(u.translate(0,V),u.scale(1,-1),u.drawImage(p,0,0),B.toDataURL("image/png")):null}return p.toDataURL("image/png")}function L(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Z=B.getInternalTexture();if(!Z)return null;const V=B._readPixelsSync(u,F);return V?D(V,B.getSize(),Z.invertY):null}async function q(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Z=B.getInternalTexture();if(!Z)return null;const V=await B.readPixels(u,F);return V?D(V,B.getSize(),Z.invertY):null}var W=F(13031),X=F(13014);class f extends R.d{static _CreateVideoTexture(B,u,F){arguments.length>5&&void 0!==arguments[5]||f.TRILINEAR_SAMPLINGMODE;throw(0,s.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(B){this._isBlocking=B}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(B,u,F,Z){let V,G=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TRILINEAR_SAMPLINGMODE,R=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,e=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,Q=arguments.length>8&&void 0!==arguments[8]&&arguments[8],t=arguments.length>9?arguments[9]:void 0,v=arguments.length>10?arguments[10]:void 0,D=arguments.length>11?arguments[11]:void 0,L=arguments.length>12?arguments[12]:void 0,q=arguments.length>13?arguments[13]:void 0;super(u),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new p.b,this._isBlocking=!0,this.name=B||"",this.url=B;let X=!1,C=null,x=!0;"object"===typeof F&&null!==F?(V=F.noMipmap??!1,Z=F.invertY??!W.b,G=F.samplingMode??f.TRILINEAR_SAMPLINGMODE,R=F.N??null,e=F.onError??null,s=F.buffer??null,Q=F.deleteBuffer??!1,t=F.format,v=F.mimeType,D=F.loaderOptions,L=F.creationFlags,X=F.useSRGBBuffer??!1,C=F.internalTexture??null,x=F.gammaSpace??x,q=F.forcedExtension??q):V=!!F,this._gammaSpace=x,this._noMipmap=V,this._invertY=void 0===Z?!W.b:Z,this._initialSamplingMode=G,this._buffer=s,this._deleteBuffer=Q,this._mimeType=v,this._loaderOptions=D,this._creationFlags=L,this._useSRGBBuffer=X,this._forcedExtension=q,void 0!==t&&(this._format=t);const U=this.yB(),y=this._getEngine();if(!y)return;y.onBeforeTextureInitObservable.notifyObservers(this);const O=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),R&&R(),!this.isBlocking&&U&&U.resetCachedMaterial()},g=(B,u)=>{this._loadingError=!0,this._errorObject={message:B,exception:u},e&&e(B,u),f.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!C)return this._delayedOnLoad=O,void(this._delayedOnError=g);if(this._texture=C??this._getFromCache(this.url,V,G,this._invertY,X,this.isCube),this._texture)if(this._texture.isReady)Y.b.SetImmediate((()=>O()));else{const B=this._texture.onLoadedObservable.add(O);this._texture.onErrorObservable.add((u=>{var F;g(u.message,u.exception),null===(F=this._texture)||void 0===F||F.onLoadedObservable.remove(B)}))}else if(U&&U.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=O,this._delayedOnError=g;else{try{this._texture=y.createTexture(this.url,V,this._invertY,U,G,O,g,this._buffer,void 0,this._format,this._forcedExtension,v,D,L,X)}catch(J){throw g("error loading",J),J}Q&&(this._buffer=null)}}updateURL(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,F=arguments.length>2?arguments[2]:void 0,Z=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.yB().markAllMaterialsAsDirty(1,(B=>B.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=B),this.url=B,this._buffer=u,this._forcedExtension=Z,this.delayLoadState=4,F&&(this._delayedOnLoad=F),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const B=this.yB();B&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?Y.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=B.getEngine().createTexture(this.url,this._noMipmap,this._invertY,B,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(B,u,F,Z){B*=this._cachedUScale,u*=this._cachedVScale,B-=this.uRotationCenter*this._cachedUScale,u-=this.vRotationCenter*this._cachedVScale,F-=this.wRotationCenter,G.Du.TransformCoordinatesFromFloatsToRef(B,u,F,this._rowGenerationMatrix,Z),Z.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,Z.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,Z.z+=this.wRotationCenter}getTextureMatrix(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*B===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*B,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=G.Matrix.Zero(),this._rowGenerationMatrix=new G.Matrix,this._t0=G.Du.Zero(),this._t1=G.Du.Zero(),this._t2=G.Du.Zero()),G.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(G.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,G.TmpVectors.Matrix[0]),G.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,G.TmpVectors.Matrix[1]),G.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,G.TmpVectors.Matrix[2]),G.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,G.TmpVectors.Matrix[3]),G.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(G.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(G.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(G.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.yQ(this._t0),this._t2.yQ(this._t0),G.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const u=this.yB();if(!u)return this._cachedTextureMatrix;const F=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&F!==this._cachedIdentity3x2&&u.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const B=this.yB();if(!B)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==f.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===B.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=G.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=G.Matrix.Zero());const u=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case f.PLANAR_MODE:G.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case f.PROJECTION_MODE:{G.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const u=B.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=u.updateFlag,u.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:G.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return u&&B.markAllMaterialsAsDirty(1,(B=>B.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const B={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,N:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return X.c.Clone((()=>new f(this._texture?this._texture.url:null,this.yB(),B)),this)}serialize(){var B;const u=this.name;f.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const F=super.serialize(f._SerializeInternalTextureUniqueId);if(!F)return null;if(f.SerializeBuffers||f.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))F.base64String=this._buffer,F.name=F.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const B=this.mimeType||"image/png";F.base64String=`data:${B};base64,${(0,v.k)(this._buffer)}`}else(f.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(F.base64String=!this._engine||this._engine._features.supportSyncTextureRead?L(this):q(this));var Z;(F.invertY=this._invertY,F.samplingMode=this.samplingMode,F._creationFlags=this._creationFlags,F._useSRGBBuffer=this._useSRGBBuffer,f._SerializeInternalTextureUniqueId)&&(F.internalTextureUniqueId=null===(Z=this._texture)||void 0===Z?void 0:Z.uniqueId);return F.internalTextureLabel=null===(B=this._texture)||void 0===B?void 0:B.label,F.noMipmap=this._noMipmap,this.name=u,F}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(B,u,F){if(B.customType){const Z=Q.c.Instantiate(B.customType).Parse(B,u,F);return B.samplingMode&&Z.updateSamplingMode&&Z._samplingMode&&Z._samplingMode!==B.samplingMode&&Z.updateSamplingMode(B.samplingMode),Z}if(B.isCube&&!B.isRenderTarget)return f._CubeTextureParser(B,u,F);const Z=void 0!==B.internalTextureUniqueId;if(!B.name&&!B.isRenderTarget&&!Z)return null;let V;if(Z){const F=u.getEngine().getLoadedTexturesCache();for(const u of F)if(u.uniqueId===B.internalTextureUniqueId){V=u;break}}const p=u=>{if(u&&u._texture&&(u._texture._cachedWrapU=null,u._texture._cachedWrapV=null,u._texture._cachedWrapR=null),B.samplingMode){const F=B.samplingMode;u&&u.samplingMode!==F&&u.updateSamplingMode(F)}if(u&&B.animations)for(let F=0;F<B.animations.length;F++){const Z=B.animations[F],V=(0,e.d)("BABYLON.Animation");V&&u.animations.push(V.Parse(Z))}u&&u._texture&&(Z&&!V&&u._texture._setUniqueId(B.internalTextureUniqueId),u._texture.label=B.internalTextureLabel)};return X.c.Parse((()=>{let Z=!0;if(B.noMipmap&&(Z=!1),B.mirrorPlane){const F=f._CreateMirror(B.name,B.renderTargetSize,u,Z);return F._waitingRenderList=B.renderList,F.mirrorPlane=t.b.fu(B.mirrorPlane),p(F),F}if(B.isRenderTarget){let F=null;if(B.isCube){if(u.reflectionProbes)for(let Z=0;Z<u.reflectionProbes.length;Z++){const F=u.reflectionProbes[Z];if(F.name===B.name)return F.cubeTexture}}else F=f._CreateRenderTargetTexture(B.name,B.renderTargetSize,u,Z,B._creationFlags??0),F._waitingRenderList=B.renderList;return p(F),F}if(B.isVideo){const V=f._CreateVideoTexture(F+(B.url||B.name),F+(B.src||B.url),u,Z,B.invertY,B.samplingMode,B.settings||{});return p(V),V}{let G;if(B.base64String&&!V)G=f.CreateFromBase64String(B.base64String,B.base64String,u,!Z,B.invertY,B.samplingMode,(()=>{p(G)}),B._creationFlags??0,B._useSRGBBuffer??!1),G.name=B.name;else{let R;R=B.name&&(B.name.indexOf("://")>0||B.name.startsWith("data:"))?B.name:F+B.name,B.url&&(B.url.startsWith("data:")||f.UseSerializedUrlIfAny)&&(R=B.url);const e={noMipmap:!Z,invertY:B.invertY,samplingMode:B.samplingMode,N:()=>{p(G)},internalTexture:V};G=new f(R,u,e)}return G}}),B,u)}static CreateFromBase64String(B,u,F,Z,V){let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.TRILINEAR_SAMPLINGMODE;return new f("data:"+u,F,Z,V,p,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,B,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(B,u,F){let Z=arguments.length>3&&void 0!==arguments[3]&&arguments[3],V=arguments.length>4?arguments[4]:void 0,p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],G=arguments.length>6&&void 0!==arguments[6]?arguments[6]:f.TRILINEAR_SAMPLINGMODE,R=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,e=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,Y=arguments.length>10?arguments[10]:void 0,Q=arguments.length>11?arguments[11]:void 0;return"data:"!==B.substring(0,5)&&(B="data:"+B),new f(B,F,V,p,G,R,e,u,Z,s,void 0,void 0,Y,Q)}}f.SerializeBuffers=!0,f.ForceSerializeBuffers=!1,f.OnTextureLoadErrorObservable=new p.b,f._SerializeInternalTextureUniqueId=!1,f._CubeTextureParser=(B,u,F)=>{throw(0,s.e)("CubeTexture")},f._CreateMirror=(B,u,F,Z)=>{throw(0,s.e)("MirrorTexture")},f._CreateRenderTargetTexture=(B,u,F,Z,V)=>{throw(0,s.e)("RenderTargetTexture")},f.NEAREST_SAMPLINGMODE=1,f.NEAREST_NEAREST_MIPLINEAR=8,f.BILINEAR_SAMPLINGMODE=2,f.LINEAR_LINEAR_MIPNEAREST=11,f.TRILINEAR_SAMPLINGMODE=3,f.LINEAR_LINEAR_MIPLINEAR=3,f.NEAREST_NEAREST_MIPNEAREST=4,f.NEAREST_LINEAR_MIPNEAREST=5,f.NEAREST_LINEAR_MIPLINEAR=6,f.NEAREST_LINEAR=7,f.NEAREST_NEAREST=1,f.LINEAR_NEAREST_MIPNEAREST=9,f.LINEAR_NEAREST_MIPLINEAR=10,f.LINEAR_LINEAR=2,f.LINEAR_NEAREST=12,f.EXPLICIT_MODE=0,f.SPHERICAL_MODE=1,f.PLANAR_MODE=2,f.CUBIC_MODE=3,f.PROJECTION_MODE=4,f.SKYBOX_MODE=5,f.INVCUBIC_MODE=6,f.EQUIRECTANGULAR_MODE=7,f.FIXED_EQUIRECTANGULAR_MODE=8,f.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,f.CLAMP_ADDRESSMODE=0,f.WRAP_ADDRESSMODE=1,f.MIRROR_ADDRESSMODE=2,f.UseSerializedUrlIfAny=!1,(0,Z.d)([(0,V.L)()],f.prototype,"url",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"uOffset",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"vOffset",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"uScale",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"vScale",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"uAng",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"vAng",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"wAng",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"uRotationCenter",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"vRotationCenter",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"wRotationCenter",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"homogeneousRotationInUVTransform",void 0),(0,Z.d)([(0,V.L)()],f.prototype,"isBlocking",null),(0,e.f)("BABYLON.Texture",f),X.c._TextureParser=f.Parse},13029:(B,u,F)=>{F.d(u,{b:()=>V});var Z=F(12979);class V{constructor(B,u,F,V){this.normal=new Z.Du(B,u,F),this.d=V}DR(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new V(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let B=this.normal.getHashCode();return B=397*B^this.d,B}normalize(){const B=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let u=0;return 0!==B&&(u=1/B),this.normal.x*=u,this.normal.y*=u,this.normal.z*=u,this.d*=u,this}transform(B){const u=V._TmpMatrix;B.invertToRef(u);const F=u.m,Z=this.normal.x,p=this.normal.y,G=this.normal.z,R=this.d,e=Z*F[0]+p*F[1]+G*F[2]+R*F[3],s=Z*F[4]+p*F[5]+G*F[6]+R*F[7],Y=Z*F[8]+p*F[9]+G*F[10]+R*F[11],Q=Z*F[12]+p*F[13]+G*F[14]+R*F[15];return new V(e,s,Y,Q)}dotCoordinate(B){return this.normal.x*B.x+this.normal.y*B.y+this.normal.z*B.z+this.d}copyFromPoints(B,u,F){const Z=u.x-B.x,V=u.y-B.y,p=u.z-B.z,G=F.x-B.x,R=F.y-B.y,e=F.z-B.z,s=V*e-p*R,Y=p*G-Z*e,Q=Z*R-V*G,t=Math.sqrt(s*s+Y*Y+Q*Q);let v;return v=0!==t?1/t:0,this.normal.x=s*v,this.normal.y=Y*v,this.normal.z=Q*v,this.d=-(this.normal.x*B.x+this.normal.y*B.y+this.normal.z*B.z),this}isFrontFacingTo(B,u){return Z.Du.Dot(this.normal,B)<=u}signedDistanceTo(B){return Z.Du.Dot(B,this.normal)+this.d}static fu(B){return new V(B[0],B[1],B[2],B[3])}static FromPoints(B,u,F){const Z=new V(0,0,0,0);return Z.copyFromPoints(B,u,F),Z}static FromPositionAndNormal(B,u){const F=new V(0,0,0,0);return this.FromPositionAndNormalToRef(B,u,F)}static FromPositionAndNormalToRef(B,u,F){return F.normal.Z(u),F.normal.normalize(),F.d=-B.dot(F.normal),F}static SignedDistanceToPlaneFromPositionAndNormal(B,u,F){const V=-(u.x*B.x+u.y*B.y+u.z*B.z);return Z.Du.Dot(F,u)+V}}V._TmpMatrix=Z.Matrix.Identity()},13005:(B,u,F)=>{F.d(u,{e:()=>Z});class Z{constructor(B,u){this.width=B,this.height=u}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let B=0|this.width;return B=397*B^this.height,B}Z(B){this.width=B.width,this.height=B.height}UR(B,u){return this.width=B,this.height=u,this}set(B,u){return this.UR(B,u)}multiplyByFloats(B,u){return new Z(this.width*B,this.height*u)}clone(){return new Z(this.width,this.height)}equals(B){return!!B&&(this.width===B.width&&this.height===B.height)}get surface(){return this.width*this.height}static Zero(){return new Z(0,0)}add(B){return new Z(this.width+B.width,this.height+B.height)}Lu(B){return new Z(this.width-B.width,this.height-B.height)}scale(B){return new Z(this.width*B,this.height*B)}static Lerp(B,u,F){const V=B.width+(u.width-B.width)*F,p=B.height+(u.height-B.height)*F;return new Z(V,p)}}},12976:(B,u,F)=>{F.d(u,{d:()=>p,f:()=>G});const Z={},V={};function p(B){const u=B.getClassName();return V[u]||(V[u]={}),V[u]}function G(B){const u=B.getClassName();if(Z[u])return Z[u];Z[u]={};const F=Z[u];let p=B,G=u;for(;G;){const B=V[G];for(const V in B)F[V]=B[V];let u,Z=!1;do{if(u=Object.getPrototypeOf(p),!u.getClassName){Z=!0;break}if(u.getClassName()!==G)break;p=u}while(u);if(Z)break;G=u.getClassName(),p=u}return F}},12973:(B,u,F)=>{F.d(u,{D:()=>q,E:()=>R,G:()=>Y,H:()=>Q,L:()=>G,e:()=>p,h:()=>X,k:()=>v,l:()=>e,m:()=>D,p:()=>s,s:()=>L,w:()=>W,z:()=>t});var Z=F(12976);function V(B,u){return(F,V)=>{const p=(0,Z.d)(F);p[V]||(p[V]={type:B,sourceName:u})}}function p(B){return function(B){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(F,Z)=>{const V=u||"_"+Z;Object.defineProperty(F,Z,{get:function(){return this[V]},set:function(u){var Z;"function"===typeof(null===(Z=this[V])||void 0===Z?void 0:Z.equals)&&this[V].equals(u)||this[V]!==u&&(this[V]=u,F[B].apply(this))},enumerable:!0,configurable:!0})}}(B,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function G(B){return V(0,B)}function R(B){return V(1,B)}function e(B){return V(2,B)}function s(B){return V(3,B)}function Y(B){return V(4,B)}function Q(B){return V(5,B)}function t(B){return V(6,B)}function v(B){return V(7,B)}function D(B){return V(8,B)}function L(B){return V(9,B)}function q(B){return V(10,B)}function W(B){return V(12,B)}function X(B,u,F,Z){const V=F.value;F.value=function(){let F=V;if("undefined"!==typeof _native&&_native[u]){const B=_native[u];F=Z?function(){return Z(...arguments)?B(...arguments):V(...arguments)}:B}return B[u]=F,F(...arguments)}}X.filter=function(B){return(u,F,Z)=>X(u,F,Z,B)}},13014:(B,u,F)=>{F.d(u,{c:()=>s});var Z=F(12843),V=F(13016),p=F(13023),G=F(12979),R=F(12976);const e=function(B,u,F){let Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const p=B();V.c&&V.c.HasTags(u)&&V.c.AddTagsTo(p,V.c.GetTags(u,!0));const G=(0,R.f)(p),e={};for(const V in G){const B=G[V],R=u[V],Y=B.type;if(void 0!==R&&null!==R&&("uniqueId"!==V||s.AllowLoadingUniqueId))switch(Y){case 0:case 6:case 9:case 11:p[V]=R;break;case 1:Z.cloneTexturesOnlyOnce&&e[R.uniqueId]?p[V]=e[R.uniqueId]:(p[V]=F||R.isRenderTarget?R:R.clone(),e[R.uniqueId]=p[V]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:p[V]=F?R:R.clone()}}return p};class s{static AppendSerializedAnimations(B,u){if(B.animations){u.animations=[];for(let F=0;F<B.animations.length;F++){const Z=B.animations[F];u.animations.push(Z.serialize())}}}static Serialize(B,u){u||(u={}),V.c&&(u.tags=V.c.GetTags(B));const F=(0,R.f)(B);for(const Z in F){const V=F[Z],p=V.sourceName||Z,G=V.type,R=B[Z];if(void 0!==R&&null!==R&&("uniqueId"!==Z||s.AllowLoadingUniqueId))switch(G){case 0:u[p]=R;break;case 1:case 3:case 7:case 9:u[p]=R.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:u[p]=R.DR();break;case 6:case 11:u[p]=R.id}}return u}static ParseProperties(B,u,F,Z){Z||(Z="");const V=(0,R.f)(u);for(const R in V){const e=V[R],Y=B[e.sourceName||R],Q=e.type;if(void 0!==Y&&null!==Y&&("uniqueId"!==R||s.AllowLoadingUniqueId)){const B=u;switch(Q){case 0:B[R]=Y;break;case 1:F&&(B[R]=s._TextureParser(Y,F,Z));break;case 2:B[R]=p.Xu.fu(Y);break;case 3:B[R]=s._FresnelParametersParser(Y);break;case 4:B[R]=G.Vector2.fu(Y);break;case 5:B[R]=G.Du.fu(Y);break;case 6:F&&(B[R]=F.getLastMeshById(Y));break;case 7:B[R]=s._ColorCurvesParser(Y);break;case 8:B[R]=p.gR.fu(Y);break;case 9:B[R]=s._ImageProcessingConfigurationParser(Y);break;case 10:B[R]=G.Quaternion.fu(Y);break;case 11:F&&(B[R]=F.getCameraById(Y));break;case 12:B[R]=G.Matrix.fu(Y)}}}}static Parse(B,u,F){let Z=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const p=B();return V.c&&V.c.AddTagsTo(p,u.tags),s.ParseProperties(u,p,F,Z),p}static Clone(B,u){return e(B,u,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(B,u){return e(B,u,!0)}}s.AllowLoadingUniqueId=!1,s._ImageProcessingConfigurationParser=B=>{throw(0,Z.e)("ImageProcessingConfiguration")},s._FresnelParametersParser=B=>{throw(0,Z.e)("FresnelParameters")},s._ColorCurvesParser=B=>{throw(0,Z.e)("ColorCurves")},s._TextureParser=(B,u,F)=>{throw(0,Z.e)("Texture")}},13016:(B,u,F)=>{F.d(u,{c:()=>V});class Z{static Eval(B,u){return"true"===(B=B.match(/\([^()]*\)/g)?B.replace(/\([^()]*\)/g,(B=>(B=B.slice(1,B.length-1),Z._HandleParenthesisContent(B,u)))):Z._HandleParenthesisContent(B,u))||"false"!==B&&Z.Eval(B,u)}static _HandleParenthesisContent(B,u){let F;u=u||(B=>"true"===B);const V=B.split("||");for(const p in V)if(Object.prototype.hasOwnProperty.call(V,p)){let B=Z._SimplifyNegation(V[p].trim());const G=B.split("&&");if(G.length>1)for(let V=0;V<G.length;++V){const p=Z._SimplifyNegation(G[V].trim());if(F="true"!==p&&"false"!==p?"!"===p[0]?!u(p.substring(1)):u(p):"true"===p,!F){B="false";break}}if(F||"true"===B){F=!0;break}F="true"!==B&&"false"!==B?"!"===B[0]?!u(B.substring(1)):u(B):"true"===B}return F?"true":"false"}static _SimplifyNegation(B){return"!true"===(B=(B=B.replace(/^[\s!]+/,(B=>(B=B.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?B="false":"!false"===B&&(B="true"),B}}class V{static EnableFor(B){B._tags=B._tags||{},B.hasTags=()=>V.HasTags(B),B.addTags=u=>V.AddTagsTo(B,u),B.removeTags=u=>V.RemoveTagsFrom(B,u),B.matchesTagsQuery=u=>V.MatchesQuery(B,u)}static DisableFor(B){delete B._tags,delete B.hasTags,delete B.addTags,delete B.removeTags,delete B.matchesTagsQuery}static HasTags(B){if(!B._tags)return!1;const u=B._tags;for(const F in u)if(Object.prototype.hasOwnProperty.call(u,F))return!0;return!1}static GetTags(B){let u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!B._tags)return null;if(u){const u=[];for(const F in B._tags)Object.prototype.hasOwnProperty.call(B._tags,F)&&!0===B._tags[F]&&u.push(F);return u.join(" ")}return B._tags}static AddTagsTo(B,u){if(!u)return;if("string"!==typeof u)return;const F=u.split(" ");for(const Z of F)V._AddTagTo(B,Z)}static _AddTagTo(B,u){""!==(u=u.trim())&&"true"!==u&&"false"!==u&&(u.match(/[\s]/)||u.match(/^([!]|([|]|[&]){2})/)||(V.EnableFor(B),B._tags[u]=!0))}static RemoveTagsFrom(B,u){if(!V.HasTags(B))return;const F=u.split(" ");for(const Z in F)V._RemoveTagFrom(B,F[Z])}static _RemoveTagFrom(B,u){delete B._tags[u]}static MatchesQuery(B,u){return void 0===u||(""===u?V.HasTags(B):Z.Eval(u,(u=>V.HasTags(B)&&B._tags[u])))}}},12971:(B,u,F)=>{F.d(u,{d:()=>Z});function Z(B,u,F,Z){var V,p=arguments.length,G=p<3?u:null===Z?Z=Object.getOwnPropertyDescriptor(u,F):Z;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)G=Reflect.decorate(B,u,F,Z);else for(var R=B.length-1;R>=0;R--)(V=B[R])&&(G=(p<3?V(G):p>3?V(u,F,G):V(u,F))||G);return p>3&&G&&Object.defineProperty(u,F,G),G}Object.create;Object.create}}]);