"use strict";(self.g111kvdsqxc=self.g111kvdsqxc||[]).push([[13],{11340:(K,H,M)=>{M.d(H,{b:()=>q});let q=!1},11309:(K,H,M)=>{M.d(H,{b:()=>G});var q=M(11274),w=M(11280),u=M(11102),y=M(11290),h=M(11143),W=M(11250),I=(M(11152),M(11318));class f{get wrapU(){return this._wrapU}set wrapU(K){this._wrapU=K}get wrapV(){return this._wrapV}set wrapV(K){this._wrapV=K}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(K){this._texture&&(this._texture.isCube=K)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(K){this._texture&&(this._texture.is3D=K)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(K){this._texture&&(this._texture.is2DArray=K)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(K){return void 0!==(null===K||void 0===K?void 0:K.shareDepth)}constructor(K){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=I.d.Zero(),this._cachedBaseSize=I.d.Zero(),this._initialSamplingMode=2,this._texture=f._IsRenderTargetWrapper(K)?K.texture:K,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(K){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(K,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var z=M(11325);class G extends f{set Wh(K){this._hasAlpha!==K&&(this._hasAlpha=K,this._scene&&this._scene.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))))}get Wh(){return this._hasAlpha}set getAlphaFromRGB(K){this._getAlphaFromRGB!==K&&(this._getAlphaFromRGB=K,this._scene&&this._scene.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(K){this._coordinatesIndex!==K&&(this._coordinatesIndex=K,this._scene&&this._scene.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(K){this._coordinatesMode!==K&&(this._coordinatesMode=K,this._scene&&this._scene.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(K){this._wrapU=K}get wrapV(){return this._wrapV}set wrapV(K){this._wrapV=K}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(K){this._texture?this._texture.isCube=K:this._isCube=K}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(K){this._texture&&(this._texture.is3D=K)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(K){this._texture&&(this._texture.is2DArray=K)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(K){var H;if(this._texture){if(this._texture._gammaSpace===K)return;this._texture._gammaSpace=K}else{if(this._gammaSpace===K)return;this._gammaSpace=K}null===(H=this.sK())||void 0===H||H.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(K){var H;K!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=K),null===(H=this.sK())||void 0===H||H.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(K){this._texture&&(this._texture._lodGenerationOffset=K)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(K){this._texture&&(this._texture._lodGenerationScale=K)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(K){this._texture&&(this._texture._linearSpecularLOD=K)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(K){this._texture&&(this._texture._irradianceTexture=K)}get uid(){return this._uid||(this._uid=(0,W.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(K){this._onDisposeObserver&&this.Hh.remove(this._onDisposeObserver),this._onDisposeObserver=this.Hh.add(K)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=G.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Hh=new u.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,K?G._IsScene(K)?this._scene=K:this._engine=K:this._scene=h.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=H,this._uid=null}sK(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return y.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return y.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(K){}get canRescale(){return!1}_getFromCache(K,H,M,q,w,u){const y=this._getEngine();if(!y)return null;const h=y._getUseSRGBBuffer(!!w,H),W=y.getLoadedTexturesCache();for(let I=0;I<W.length;I++){const y=W[I];if((void 0===w||h===y._useSRGBBuffer)&&(void 0===q||q===y.invertY)&&y.url===K&&y.generateMipMaps===!H&&(!M||M===y.samplingMode)&&(void 0===u||u===y.isCube))return y.incrementReferences(),y}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const K=this.sK();K&&K.markAllMaterialsAsDirty(1)}readPixels(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],w=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,W=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const I=this._getEngine();if(!I)return null;const f=this.getSize();let z=f.width,G=f.height;0!==H&&(z/=Math.pow(2,H),G/=Math.pow(2,H),z=Math.round(z),G=Math.round(G)),h=Math.min(z,h),W=Math.min(G,W);try{return this._texture.isCube?I._readTexturePixels(this._texture,h,W,K,H,M,q,w,u,y):I._readTexturePixels(this._texture,h,W,-1,H,M,q,w,u,y)}catch(a){return null}}_readPixelsSync(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],w=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const u=this.getSize();let y=u.width,h=u.height;const W=this._getEngine();if(!W)return null;0!=H&&(y/=Math.pow(2,H),h/=Math.pow(2,H),y=Math.round(y),h=Math.round(h));try{return this._texture.isCube?W._readTexturePixelsSync(this._texture,y,h,K,H,M,q,w):W._readTexturePixelsSync(this._texture,y,h,-1,H,M,q,w)}catch(I){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const K=this._scene.textures.indexOf(this);if(K>=0&&this._scene.textures.splice(K,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const K=this._parentContainer.textures.indexOf(this);K>-1&&this._parentContainer.textures.splice(K,1),this._parentContainer=null}}this.Hh.notifyObservers(this),this.Hh.clear(),this.metadata=null,super.dispose()}serialize(){let K=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!K)return null;const H=z.c.Serialize(this);return z.c.AppendSerializedAnimations(this,H),H}static WhenAllReady(K,H){let M=K.length;if(0!==M)for(let q=0;q<K.length;q++){const w=K[q];if(w.isReady())0===--M&&H();else{const K=w.onLoadObservable;K?K.addOnce((()=>{0===--M&&H()})):0===--M&&H()}}else H()}static _IsScene(K){return"Scene"===K.getClassName()}}G.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,q.e)([(0,w.J)()],G.prototype,"uniqueId",void 0),(0,q.e)([(0,w.J)()],G.prototype,"name",void 0),(0,q.e)([(0,w.J)()],G.prototype,"displayName",void 0),(0,q.e)([(0,w.J)()],G.prototype,"metadata",void 0),(0,q.e)([(0,w.J)("Wh")],G.prototype,"_hasAlpha",void 0),(0,q.e)([(0,w.J)("getAlphaFromRGB")],G.prototype,"_getAlphaFromRGB",void 0),(0,q.e)([(0,w.J)()],G.prototype,"level",void 0),(0,q.e)([(0,w.J)("coordinatesIndex")],G.prototype,"_coordinatesIndex",void 0),(0,q.e)([(0,w.J)()],G.prototype,"optimizeUVAllocation",void 0),(0,q.e)([(0,w.J)("coordinatesMode")],G.prototype,"_coordinatesMode",void 0),(0,q.e)([(0,w.J)()],G.prototype,"wrapU",null),(0,q.e)([(0,w.J)()],G.prototype,"wrapV",null),(0,q.e)([(0,w.J)()],G.prototype,"wrapR",void 0),(0,q.e)([(0,w.J)()],G.prototype,"anisotropicFilteringLevel",void 0),(0,q.e)([(0,w.J)()],G.prototype,"isCube",null),(0,q.e)([(0,w.J)()],G.prototype,"is3D",null),(0,q.e)([(0,w.J)()],G.prototype,"is2DArray",null),(0,q.e)([(0,w.J)()],G.prototype,"gammaSpace",null),(0,q.e)([(0,w.J)()],G.prototype,"invertZ",void 0),(0,q.e)([(0,w.J)()],G.prototype,"lodLevelInAlpha",void 0),(0,q.e)([(0,w.J)()],G.prototype,"lodGenerationOffset",null),(0,q.e)([(0,w.J)()],G.prototype,"lodGenerationScale",null),(0,q.e)([(0,w.J)()],G.prototype,"linearSpecularLOD",null),(0,q.e)([(0,w.z)()],G.prototype,"irradianceTexture",null),(0,q.e)([(0,w.J)()],G.prototype,"isRenderTarget",void 0)},11267:(K,H,M)=>{M.d(H,{b:()=>C});var q=M(11274),w=M(11280),u=M(11102),y=M(11290),h=M(11309),W=M(11242),I=M(11132),f=M(11176),z=M(11233),G=M(11334),a=M(11164);function v(K,H){let M=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const q=H.width,w=H.height;if(K instanceof Float32Array){let H=K.byteLength/K.BYTES_PER_ELEMENT;const M=new Uint8Array(H);for(;--H>=0;){let q=K[H];q<0?q=0:q>1&&(q=1),M[H]=255*q}K=M}const u=document.createElement("canvas");u.width=q,u.height=w;const y=u.getContext("2d");if(!y)return null;const h=y.createImageData(q,w);if(h.data.set(K),y.putImageData(h,0,0),M){const K=document.createElement("canvas");K.width=q,K.height=w;const H=K.getContext("2d");return H?(H.translate(0,w),H.scale(1,-1),H.drawImage(u,0,0),K.toDataURL("image/png")):null}return u.toDataURL("image/png")}function O(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const q=K.getInternalTexture();if(!q)return null;const w=K._readPixelsSync(H,M);return w?v(w,K.getSize(),q.invertY):null}async function L(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const q=K.getInternalTexture();if(!q)return null;const w=await K.readPixels(H,M);return w?v(w,K.getSize(),q.invertY):null}var S=M(11340),B=M(11325);class C extends h.b{static _CreateVideoTexture(K,H,M){arguments.length>5&&void 0!==arguments[5]||C.TRILINEAR_SAMPLINGMODE;throw(0,I.c)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(K){this._isBlocking=K}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(K,H,M,q){let w,y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.TRILINEAR_SAMPLINGMODE,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,W=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,I=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,z=arguments.length>8&&void 0!==arguments[8]&&arguments[8],G=arguments.length>9?arguments[9]:void 0,a=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0,O=arguments.length>12?arguments[12]:void 0,L=arguments.length>13?arguments[13]:void 0;super(H),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new u.d,this._isBlocking=!0,this.name=K||"",this.url=K;let B=!1,i=null,Z=!0;"object"===typeof M&&null!==M?(w=M.noMipmap??!1,q=M.invertY??!S.b,y=M.samplingMode??C.TRILINEAR_SAMPLINGMODE,h=M.P??null,W=M.onError??null,I=M.buffer??null,z=M.deleteBuffer??!1,G=M.format,a=M.mimeType,v=M.loaderOptions,O=M.creationFlags,B=M.useSRGBBuffer??!1,i=M.internalTexture??null,Z=M.gammaSpace??Z,L=M.forcedExtension??L):w=!!M,this._gammaSpace=Z,this._noMipmap=w,this._invertY=void 0===q?!S.b:q,this._initialSamplingMode=y,this._buffer=I,this._deleteBuffer=z,this._mimeType=a,this._loaderOptions=v,this._creationFlags=O,this._useSRGBBuffer=B,this._forcedExtension=L,void 0!==G&&(this._format=G);const E=this.sK(),l=this._getEngine();if(!l)return;l.onBeforeTextureInitObservable.notifyObservers(this);const s=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),h&&h(),!this.isBlocking&&E&&E.resetCachedMaterial()},D=(K,H)=>{this._loadingError=!0,this._errorObject={message:K,exception:H},W&&W(K,H),C.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!i)return this._delayedOnLoad=s,void(this._delayedOnError=D);if(this._texture=i??this._getFromCache(this.url,w,y,this._invertY,B,this.isCube),this._texture)if(this._texture.isReady)f.c.SetImmediate((()=>s()));else{const K=this._texture.onLoadedObservable.add(s);this._texture.onErrorObservable.add((H=>{var M;D(H.message,H.exception),null===(M=this._texture)||void 0===M||M.onLoadedObservable.remove(K)}))}else if(E&&E.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=s,this._delayedOnError=D;else{try{this._texture=l.createTexture(this.url,w,this._invertY,E,y,s,D,this._buffer,void 0,this._format,this._forcedExtension,a,v,O,B)}catch(V){throw D("error loading",V),V}z&&(this._buffer=null)}}updateURL(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,M=arguments.length>2?arguments[2]:void 0,q=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.sK().markAllMaterialsAsDirty(1,(K=>K.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=K),this.url=K,this._buffer=H,this._forcedExtension=q,this.delayLoadState=4,M&&(this._delayedOnLoad=M),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const K=this.sK();K&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?f.c.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=K.getEngine().createTexture(this.url,this._noMipmap,this._invertY,K,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(K,H,M,q){K*=this._cachedUScale,H*=this._cachedVScale,K-=this.uRotationCenter*this._cachedUScale,H-=this.vRotationCenter*this._cachedVScale,M-=this.wRotationCenter,y.OH.TransformCoordinatesFromFloatsToRef(K,H,M,this._rowGenerationMatrix,q),q.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,q.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,q.z+=this.wRotationCenter}getTextureMatrix(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*K===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*K,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=y.Matrix.Zero(),this._rowGenerationMatrix=new y.Matrix,this._t0=y.OH.Zero(),this._t1=y.OH.Zero(),this._t2=y.OH.Zero()),y.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(y.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,y.TmpVectors.Matrix[0]),y.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,y.TmpVectors.Matrix[1]),y.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,y.TmpVectors.Matrix[2]),y.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,y.TmpVectors.Matrix[3]),y.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(y.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(y.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(y.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.Zz(this._t0),this._t2.Zz(this._t0),y.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const H=this.sK();if(!H)return this._cachedTextureMatrix;const M=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&M!==this._cachedIdentity3x2&&H.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const K=this.sK();if(!K)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==C.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===K.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=y.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=y.Matrix.Zero());const H=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case C.PLANAR_MODE:y.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case C.PROJECTION_MODE:{y.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const H=K.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=H.updateFlag,H.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:y.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return H&&K.markAllMaterialsAsDirty(1,(K=>K.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const K={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,P:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return B.c.Clone((()=>new C(this._texture?this._texture.url:null,this.sK(),K)),this)}serialize(){var K;const H=this.name;C.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const M=super.serialize(C._SerializeInternalTextureUniqueId);if(!M)return null;if(C.SerializeBuffers||C.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))M.base64String=this._buffer,M.name=M.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const K=this.mimeType||"image/png";M.base64String=`data:${K};base64,${(0,a.l)(this._buffer)}`}else(C.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(M.base64String=!this._engine||this._engine._features.supportSyncTextureRead?O(this):L(this));var q;(M.invertY=this._invertY,M.samplingMode=this.samplingMode,M._creationFlags=this._creationFlags,M._useSRGBBuffer=this._useSRGBBuffer,C._SerializeInternalTextureUniqueId)&&(M.internalTextureUniqueId=null===(q=this._texture)||void 0===q?void 0:q.uniqueId);return M.internalTextureLabel=null===(K=this._texture)||void 0===K?void 0:K.label,M.noMipmap=this._noMipmap,this.name=H,M}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(K,H,M){if(K.customType){const q=z.c.Instantiate(K.customType).Parse(K,H,M);return K.samplingMode&&q.updateSamplingMode&&q._samplingMode&&q._samplingMode!==K.samplingMode&&q.updateSamplingMode(K.samplingMode),q}if(K.isCube&&!K.isRenderTarget)return C._CubeTextureParser(K,H,M);const q=void 0!==K.internalTextureUniqueId;if(!K.name&&!K.isRenderTarget&&!q)return null;let w;if(q){const M=H.getEngine().getLoadedTexturesCache();for(const H of M)if(H.uniqueId===K.internalTextureUniqueId){w=H;break}}const u=H=>{if(H&&H._texture&&(H._texture._cachedWrapU=null,H._texture._cachedWrapV=null,H._texture._cachedWrapR=null),K.samplingMode){const M=K.samplingMode;H&&H.samplingMode!==M&&H.updateSamplingMode(M)}if(H&&K.animations)for(let M=0;M<K.animations.length;M++){const q=K.animations[M],w=(0,W.b)("BABYLON.Animation");w&&H.animations.push(w.Parse(q))}H&&H._texture&&(q&&!w&&H._texture._setUniqueId(K.internalTextureUniqueId),H._texture.label=K.internalTextureLabel)};return B.c.Parse((()=>{let q=!0;if(K.noMipmap&&(q=!1),K.mirrorPlane){const M=C._CreateMirror(K.name,K.renderTargetSize,H,q);return M._waitingRenderList=K.renderList,M.mirrorPlane=G.e.iH(K.mirrorPlane),u(M),M}if(K.isRenderTarget){let M=null;if(K.isCube){if(H.reflectionProbes)for(let q=0;q<H.reflectionProbes.length;q++){const M=H.reflectionProbes[q];if(M.name===K.name)return M.cubeTexture}}else M=C._CreateRenderTargetTexture(K.name,K.renderTargetSize,H,q,K._creationFlags??0),M._waitingRenderList=K.renderList;return u(M),M}if(K.isVideo){const w=C._CreateVideoTexture(M+(K.url||K.name),M+(K.src||K.url),H,q,K.invertY,K.samplingMode,K.settings||{});return u(w),w}{let y;if(K.base64String&&!w)y=C.CreateFromBase64String(K.base64String,K.base64String,H,!q,K.invertY,K.samplingMode,(()=>{u(y)}),K._creationFlags??0,K._useSRGBBuffer??!1),y.name=K.name;else{let h;h=K.name&&(K.name.indexOf("://")>0||K.name.startsWith("data:"))?K.name:M+K.name,K.url&&(K.url.startsWith("data:")||C.UseSerializedUrlIfAny)&&(h=K.url);const W={noMipmap:!q,invertY:K.invertY,samplingMode:K.samplingMode,P:()=>{u(y)},internalTexture:w};y=new C(h,H,W)}return y}}),K,H)}static CreateFromBase64String(K,H,M,q,w){let u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C.TRILINEAR_SAMPLINGMODE;return new C("data:"+H,M,q,w,u,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,K,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(K,H,M){let q=arguments.length>3&&void 0!==arguments[3]&&arguments[3],w=arguments.length>4?arguments[4]:void 0,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:C.TRILINEAR_SAMPLINGMODE,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,W=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,f=arguments.length>10?arguments[10]:void 0,z=arguments.length>11?arguments[11]:void 0;return"data:"!==K.substring(0,5)&&(K="data:"+K),new C(K,M,w,u,y,h,W,H,q,I,void 0,void 0,f,z)}}C.SerializeBuffers=!0,C.ForceSerializeBuffers=!1,C.OnTextureLoadErrorObservable=new u.d,C._SerializeInternalTextureUniqueId=!1,C._CubeTextureParser=(K,H,M)=>{throw(0,I.c)("CubeTexture")},C._CreateMirror=(K,H,M,q)=>{throw(0,I.c)("MirrorTexture")},C._CreateRenderTargetTexture=(K,H,M,q,w)=>{throw(0,I.c)("RenderTargetTexture")},C.NEAREST_SAMPLINGMODE=1,C.NEAREST_NEAREST_MIPLINEAR=8,C.BILINEAR_SAMPLINGMODE=2,C.LINEAR_LINEAR_MIPNEAREST=11,C.TRILINEAR_SAMPLINGMODE=3,C.LINEAR_LINEAR_MIPLINEAR=3,C.NEAREST_NEAREST_MIPNEAREST=4,C.NEAREST_LINEAR_MIPNEAREST=5,C.NEAREST_LINEAR_MIPLINEAR=6,C.NEAREST_LINEAR=7,C.NEAREST_NEAREST=1,C.LINEAR_NEAREST_MIPNEAREST=9,C.LINEAR_NEAREST_MIPLINEAR=10,C.LINEAR_LINEAR=2,C.LINEAR_NEAREST=12,C.EXPLICIT_MODE=0,C.SPHERICAL_MODE=1,C.PLANAR_MODE=2,C.CUBIC_MODE=3,C.PROJECTION_MODE=4,C.SKYBOX_MODE=5,C.INVCUBIC_MODE=6,C.EQUIRECTANGULAR_MODE=7,C.FIXED_EQUIRECTANGULAR_MODE=8,C.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,C.CLAMP_ADDRESSMODE=0,C.WRAP_ADDRESSMODE=1,C.MIRROR_ADDRESSMODE=2,C.UseSerializedUrlIfAny=!1,(0,q.e)([(0,w.J)()],C.prototype,"url",void 0),(0,q.e)([(0,w.J)()],C.prototype,"uOffset",void 0),(0,q.e)([(0,w.J)()],C.prototype,"vOffset",void 0),(0,q.e)([(0,w.J)()],C.prototype,"uScale",void 0),(0,q.e)([(0,w.J)()],C.prototype,"vScale",void 0),(0,q.e)([(0,w.J)()],C.prototype,"uAng",void 0),(0,q.e)([(0,w.J)()],C.prototype,"vAng",void 0),(0,q.e)([(0,w.J)()],C.prototype,"wAng",void 0),(0,q.e)([(0,w.J)()],C.prototype,"uRotationCenter",void 0),(0,q.e)([(0,w.J)()],C.prototype,"vRotationCenter",void 0),(0,q.e)([(0,w.J)()],C.prototype,"wRotationCenter",void 0),(0,q.e)([(0,w.J)()],C.prototype,"homogeneousRotationInUVTransform",void 0),(0,q.e)([(0,w.J)()],C.prototype,"isBlocking",null),(0,W.f)("BABYLON.Texture",C),B.c._TextureParser=C.Parse},11334:(K,H,M)=>{M.d(H,{e:()=>w});var q=M(11290);class w{constructor(K,H,M,w){this.normal=new q.OH(K,H,M),this.d=w}hh(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new w(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let K=this.normal.getHashCode();return K=397*K^this.d,K}normalize(){const K=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let H=0;return 0!==K&&(H=1/K),this.normal.x*=H,this.normal.y*=H,this.normal.z*=H,this.d*=H,this}transform(K){const H=w._TmpMatrix;K.invertToRef(H);const M=H.m,q=this.normal.x,u=this.normal.y,y=this.normal.z,h=this.d,W=q*M[0]+u*M[1]+y*M[2]+h*M[3],I=q*M[4]+u*M[5]+y*M[6]+h*M[7],f=q*M[8]+u*M[9]+y*M[10]+h*M[11],z=q*M[12]+u*M[13]+y*M[14]+h*M[15];return new w(W,I,f,z)}dotCoordinate(K){return this.normal.x*K.x+this.normal.y*K.y+this.normal.z*K.z+this.d}copyFromPoints(K,H,M){const q=H.x-K.x,w=H.y-K.y,u=H.z-K.z,y=M.x-K.x,h=M.y-K.y,W=M.z-K.z,I=w*W-u*h,f=u*y-q*W,z=q*h-w*y,G=Math.sqrt(I*I+f*f+z*z);let a;return a=0!==G?1/G:0,this.normal.x=I*a,this.normal.y=f*a,this.normal.z=z*a,this.d=-(this.normal.x*K.x+this.normal.y*K.y+this.normal.z*K.z),this}isFrontFacingTo(K,H){return q.OH.Dot(this.normal,K)<=H}signedDistanceTo(K){return q.OH.Dot(K,this.normal)+this.d}static iH(K){return new w(K[0],K[1],K[2],K[3])}static FromPoints(K,H,M){const q=new w(0,0,0,0);return q.copyFromPoints(K,H,M),q}static FromPositionAndNormal(K,H){const M=new w(0,0,0,0);return this.FromPositionAndNormalToRef(K,H,M)}static FromPositionAndNormalToRef(K,H,M){return M.normal.q(H),M.normal.normalize(),M.d=-K.dot(M.normal),M}static SignedDistanceToPlaneFromPositionAndNormal(K,H,M){const w=-(H.x*K.x+H.y*K.y+H.z*K.z);return q.OH.Dot(M,H)+w}}w._TmpMatrix=q.Matrix.Identity()},11318:(K,H,M)=>{M.d(H,{d:()=>q});class q{constructor(K,H){this.width=K,this.height=H}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let K=0|this.width;return K=397*K^this.height,K}q(K){this.width=K.width,this.height=K.height}Lh(K,H){return this.width=K,this.height=H,this}set(K,H){return this.Lh(K,H)}multiplyByFloats(K,H){return new q(this.width*K,this.height*H)}clone(){return new q(this.width,this.height)}equals(K){return!!K&&(this.width===K.width&&this.height===K.height)}get surface(){return this.width*this.height}static Zero(){return new q(0,0)}add(K){return new q(this.width+K.width,this.height+K.height)}LH(K){return new q(this.width-K.width,this.height-K.height)}scale(K){return new q(this.width*K,this.height*K)}static Lerp(K,H,M){const w=K.width+(H.width-K.width)*M,u=K.height+(H.height-K.height)*M;return new q(w,u)}}},11288:(K,H,M)=>{M.d(H,{d:()=>u,g:()=>y});const q={},w={};function u(K){const H=K.getClassName();return w[H]||(w[H]={}),w[H]}function y(K){const H=K.getClassName();if(q[H])return q[H];q[H]={};const M=q[H];let u=K,y=H;for(;y;){const K=w[y];for(const w in K)M[w]=K[w];let H,q=!1;do{if(H=Object.getPrototypeOf(u),!H.getClassName){q=!0;break}if(H.getClassName()!==y)break;u=H}while(H);if(q)break;y=H.getClassName(),u=H}return M}},11280:(K,H,M)=>{M.d(H,{D:()=>f,G:()=>z,J:()=>y,c:()=>u,f:()=>B,h:()=>a,j:()=>W,m:()=>v,p:()=>I,r:()=>O,v:()=>S,w:()=>G,y:()=>L,z:()=>h});var q=M(11288);function w(K,H){return(M,w)=>{const u=(0,q.d)(M);u[w]||(u[w]={type:K,sourceName:H})}}function u(K){return function(K){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(M,q)=>{const w=H||"_"+q;Object.defineProperty(M,q,{get:function(){return this[w]},set:function(H){var q;"function"===typeof(null===(q=this[w])||void 0===q?void 0:q.equals)&&this[w].equals(H)||this[w]!==H&&(this[w]=H,M[K].apply(this))},enumerable:!0,configurable:!0})}}(K,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function y(K){return w(0,K)}function h(K){return w(1,K)}function W(K){return w(2,K)}function I(K){return w(3,K)}function f(K){return w(4,K)}function z(K){return w(5,K)}function G(K){return w(6,K)}function a(K){return w(7,K)}function v(K){return w(8,K)}function O(K){return w(9,K)}function L(K){return w(10,K)}function S(K){return w(12,K)}function B(K,H,M,q){const w=M.value;M.value=function(){let M=w;if("undefined"!==typeof _native&&_native[H]){const K=_native[H];M=q?function(){return q(...arguments)?K(...arguments):w(...arguments)}:K}return K[H]=M,M(...arguments)}}B.filter=function(K){return(H,M,q)=>B(H,M,q,K)}},11325:(K,H,M)=>{M.d(H,{c:()=>I});var q=M(11132),w=M(11327),u=M(11329),y=M(11290),h=M(11288);const W=function(K,H,M){let q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const u=K();w.d&&w.d.HasTags(H)&&w.d.AddTagsTo(u,w.d.GetTags(H,!0));const y=(0,h.g)(u),W={};for(const w in y){const K=y[w],h=H[w],f=K.type;if(void 0!==h&&null!==h&&("uniqueId"!==w||I.AllowLoadingUniqueId))switch(f){case 0:case 6:case 9:case 11:u[w]=h;break;case 1:q.cloneTexturesOnlyOnce&&W[h.uniqueId]?u[w]=W[h.uniqueId]:(u[w]=M||h.isRenderTarget?h:h.clone(),W[h.uniqueId]=u[w]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:u[w]=M?h:h.clone()}}return u};class I{static AppendSerializedAnimations(K,H){if(K.animations){H.animations=[];for(let M=0;M<K.animations.length;M++){const q=K.animations[M];H.animations.push(q.serialize())}}}static Serialize(K,H){H||(H={}),w.d&&(H.tags=w.d.GetTags(K));const M=(0,h.g)(K);for(const q in M){const w=M[q],u=w.sourceName||q,y=w.type,h=K[q];if(void 0!==h&&null!==h&&("uniqueId"!==q||I.AllowLoadingUniqueId))switch(y){case 0:H[u]=h;break;case 1:case 3:case 7:case 9:H[u]=h.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:H[u]=h.hh();break;case 6:case 11:H[u]=h.id}}return H}static ParseProperties(K,H,M,q){q||(q="");const w=(0,h.g)(H);for(const h in w){const W=w[h],f=K[W.sourceName||h],z=W.type;if(void 0!==f&&null!==f&&("uniqueId"!==h||I.AllowLoadingUniqueId)){const K=H;switch(z){case 0:K[h]=f;break;case 1:M&&(K[h]=I._TextureParser(f,M,q));break;case 2:K[h]=u.CH.iH(f);break;case 3:K[h]=I._FresnelParametersParser(f);break;case 4:K[h]=y.Vector2.iH(f);break;case 5:K[h]=y.OH.iH(f);break;case 6:M&&(K[h]=M.getLastMeshById(f));break;case 7:K[h]=I._ColorCurvesParser(f);break;case 8:K[h]=u.Ch.iH(f);break;case 9:K[h]=I._ImageProcessingConfigurationParser(f);break;case 10:K[h]=y.Quaternion.iH(f);break;case 11:M&&(K[h]=M.getCameraById(f));break;case 12:K[h]=y.Matrix.iH(f)}}}}static Parse(K,H,M){let q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const u=K();return w.d&&w.d.AddTagsTo(u,H.tags),I.ParseProperties(H,u,M,q),u}static Clone(K,H){return W(K,H,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(K,H){return W(K,H,!0)}}I.AllowLoadingUniqueId=!1,I._ImageProcessingConfigurationParser=K=>{throw(0,q.c)("ImageProcessingConfiguration")},I._FresnelParametersParser=K=>{throw(0,q.c)("FresnelParameters")},I._ColorCurvesParser=K=>{throw(0,q.c)("ColorCurves")},I._TextureParser=(K,H,M)=>{throw(0,q.c)("Texture")}},11327:(K,H,M)=>{M.d(H,{d:()=>w});class q{static Eval(K,H){return"true"===(K=K.match(/\([^()]*\)/g)?K.replace(/\([^()]*\)/g,(K=>(K=K.slice(1,K.length-1),q._HandleParenthesisContent(K,H)))):q._HandleParenthesisContent(K,H))||"false"!==K&&q.Eval(K,H)}static _HandleParenthesisContent(K,H){let M;H=H||(K=>"true"===K);const w=K.split("||");for(const u in w)if(Object.prototype.hasOwnProperty.call(w,u)){let K=q._SimplifyNegation(w[u].trim());const y=K.split("&&");if(y.length>1)for(let w=0;w<y.length;++w){const u=q._SimplifyNegation(y[w].trim());if(M="true"!==u&&"false"!==u?"!"===u[0]?!H(u.substring(1)):H(u):"true"===u,!M){K="false";break}}if(M||"true"===K){M=!0;break}M="true"!==K&&"false"!==K?"!"===K[0]?!H(K.substring(1)):H(K):"true"===K}return M?"true":"false"}static _SimplifyNegation(K){return"!true"===(K=(K=K.replace(/^[\s!]+/,(K=>(K=K.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?K="false":"!false"===K&&(K="true"),K}}class w{static EnableFor(K){K._tags=K._tags||{},K.hasTags=()=>w.HasTags(K),K.addTags=H=>w.AddTagsTo(K,H),K.removeTags=H=>w.RemoveTagsFrom(K,H),K.matchesTagsQuery=H=>w.MatchesQuery(K,H)}static DisableFor(K){delete K._tags,delete K.hasTags,delete K.addTags,delete K.removeTags,delete K.matchesTagsQuery}static HasTags(K){if(!K._tags)return!1;const H=K._tags;for(const M in H)if(Object.prototype.hasOwnProperty.call(H,M))return!0;return!1}static GetTags(K){let H=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!K._tags)return null;if(H){const H=[];for(const M in K._tags)Object.prototype.hasOwnProperty.call(K._tags,M)&&!0===K._tags[M]&&H.push(M);return H.join(" ")}return K._tags}static AddTagsTo(K,H){if(!H)return;if("string"!==typeof H)return;const M=H.split(" ");for(const q of M)w._AddTagTo(K,q)}static _AddTagTo(K,H){""!==(H=H.trim())&&"true"!==H&&"false"!==H&&(H.match(/[\s]/)||H.match(/^([!]|([|]|[&]){2})/)||(w.EnableFor(K),K._tags[H]=!0))}static RemoveTagsFrom(K,H){if(!w.HasTags(K))return;const M=H.split(" ");for(const q in M)w._RemoveTagFrom(K,M[q])}static _RemoveTagFrom(K,H){delete K._tags[H]}static MatchesQuery(K,H){return void 0===H||(""===H?w.HasTags(K):q.Eval(H,(H=>w.HasTags(K)&&K._tags[H])))}}},11274:(K,H,M)=>{M.d(H,{e:()=>q});function q(K,H,M,q){var w,u=arguments.length,y=u<3?H:null===q?q=Object.getOwnPropertyDescriptor(H,M):q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)y=Reflect.decorate(K,H,M,q);else for(var h=K.length-1;h>=0;h--)(w=K[h])&&(y=(u<3?w(y):u>3?w(H,M,y):w(H,M))||y);return u>3&&y&&Object.defineProperty(H,M,y),y}Object.create;Object.create}}]);