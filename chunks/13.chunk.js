"use strict";(self.ufnpnb83drd=self.ufnpnb83drd||[]).push([[13],{12390:(E,U,g)=>{g.d(U,{b:()=>N});let N=!1},12355:(E,U,g)=>{g.d(U,{d:()=>F});var N=g(12320),L=g(12322),D=g(12174),S=g(12334),u=g(12205),s=g(12296),C=(g(12210),g(12363));class B{get wrapU(){return this._wrapU}set wrapU(E){this._wrapU=E}get wrapV(){return this._wrapV}set wrapV(E){this._wrapV=E}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(E){this._texture&&(this._texture.isCube=E)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(E){this._texture&&(this._texture.is3D=E)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(E){this._texture&&(this._texture.is2DArray=E)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(E){return void 0!==(null===E||void 0===E?void 0:E.shareDepth)}constructor(E){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=C.d.Zero(),this._cachedBaseSize=C.d.Zero(),this._initialSamplingMode=2,this._texture=B._IsRenderTargetWrapper(E)?E.texture:E,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(E){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(E,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var P=g(12367);class F extends B{set Qg(E){this._hasAlpha!==E&&(this._hasAlpha=E,this._scene&&this._scene.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))))}get Qg(){return this._hasAlpha}set getAlphaFromRGB(E){this._getAlphaFromRGB!==E&&(this._getAlphaFromRGB=E,this._scene&&this._scene.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(E){this._coordinatesIndex!==E&&(this._coordinatesIndex=E,this._scene&&this._scene.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(E){this._coordinatesMode!==E&&(this._coordinatesMode=E,this._scene&&this._scene.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(E){this._wrapU=E}get wrapV(){return this._wrapV}set wrapV(E){this._wrapV=E}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(E){this._texture?this._texture.isCube=E:this._isCube=E}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(E){this._texture&&(this._texture.is3D=E)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(E){this._texture&&(this._texture.is2DArray=E)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(E){var U;if(this._texture){if(this._texture._gammaSpace===E)return;this._texture._gammaSpace=E}else{if(this._gammaSpace===E)return;this._gammaSpace=E}null===(U=this.tE())||void 0===U||U.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(E){var U;E!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=E),null===(U=this.tE())||void 0===U||U.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(E){this._texture&&(this._texture._lodGenerationOffset=E)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(E){this._texture&&(this._texture._lodGenerationScale=E)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(E){this._texture&&(this._texture._linearSpecularLOD=E)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(E){this._texture&&(this._texture._irradianceTexture=E)}get uid(){return this._uid||(this._uid=(0,s.e)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(E){this._onDisposeObserver&&this.hg.remove(this._onDisposeObserver),this._onDisposeObserver=this.hg.add(E)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=F.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.hg=new D.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,E?F._IsScene(E)?this._scene=E:this._engine=E:this._scene=u.b.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=U,this._uid=null}tE(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return S.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return S.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(E){}get canRescale(){return!1}_getFromCache(E,U,g,N,L,D){const S=this._getEngine();if(!S)return null;const u=S._getUseSRGBBuffer(!!L,U),s=S.getLoadedTexturesCache();for(let C=0;C<s.length;C++){const S=s[C];if((void 0===L||u===S._useSRGBBuffer)&&(void 0===N||N===S.invertY)&&S.url===E&&S.generateMipMaps===!U&&(!g||g===S.samplingMode)&&(void 0===D||D===S.isCube))return S.incrementReferences(),S}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const E=this.tE();E&&E.markAllMaterialsAsDirty(1)}readPixels(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,N=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=arguments.length>4&&void 0!==arguments[4]&&arguments[4],D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const C=this._getEngine();if(!C)return null;const B=this.getSize();let P=B.width,F=B.height;0!==U&&(P/=Math.pow(2,U),F/=Math.pow(2,U),P=Math.round(P),F=Math.round(F)),u=Math.min(P,u),s=Math.min(F,s);try{return this._texture.isCube?C._readTexturePixels(this._texture,u,s,E,U,g,N,L,D,S):C._readTexturePixels(this._texture,u,s,-1,U,g,N,L,D,S)}catch(f){return null}}_readPixelsSync(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,N=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],L=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const D=this.getSize();let S=D.width,u=D.height;const s=this._getEngine();if(!s)return null;0!=U&&(S/=Math.pow(2,U),u/=Math.pow(2,U),S=Math.round(S),u=Math.round(u));try{return this._texture.isCube?s._readTexturePixelsSync(this._texture,S,u,E,U,g,N,L):s._readTexturePixelsSync(this._texture,S,u,-1,U,g,N,L)}catch(C){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const E=this._scene.textures.indexOf(this);if(E>=0&&this._scene.textures.splice(E,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const E=this._parentContainer.textures.indexOf(this);E>-1&&this._parentContainer.textures.splice(E,1),this._parentContainer=null}}this.hg.notifyObservers(this),this.hg.clear(),this.metadata=null,super.dispose()}serialize(){let E=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!E)return null;const U=P.b.Serialize(this);return P.b.AppendSerializedAnimations(this,U),U}static WhenAllReady(E,U){let g=E.length;if(0!==g)for(let N=0;N<E.length;N++){const L=E[N];if(L.isReady())0===--g&&U();else{const E=L.onLoadObservable;E?E.addOnce((()=>{0===--g&&U()})):0===--g&&U()}}else U()}static _IsScene(E){return"Scene"===E.getClassName()}}F.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,N.e)([(0,L.E)()],F.prototype,"uniqueId",void 0),(0,N.e)([(0,L.E)()],F.prototype,"name",void 0),(0,N.e)([(0,L.E)()],F.prototype,"displayName",void 0),(0,N.e)([(0,L.E)()],F.prototype,"metadata",void 0),(0,N.e)([(0,L.E)("Qg")],F.prototype,"_hasAlpha",void 0),(0,N.e)([(0,L.E)("getAlphaFromRGB")],F.prototype,"_getAlphaFromRGB",void 0),(0,N.e)([(0,L.E)()],F.prototype,"level",void 0),(0,N.e)([(0,L.E)("coordinatesIndex")],F.prototype,"_coordinatesIndex",void 0),(0,N.e)([(0,L.E)()],F.prototype,"optimizeUVAllocation",void 0),(0,N.e)([(0,L.E)("coordinatesMode")],F.prototype,"_coordinatesMode",void 0),(0,N.e)([(0,L.E)()],F.prototype,"wrapU",null),(0,N.e)([(0,L.E)()],F.prototype,"wrapV",null),(0,N.e)([(0,L.E)()],F.prototype,"wrapR",void 0),(0,N.e)([(0,L.E)()],F.prototype,"anisotropicFilteringLevel",void 0),(0,N.e)([(0,L.E)()],F.prototype,"isCube",null),(0,N.e)([(0,L.E)()],F.prototype,"is3D",null),(0,N.e)([(0,L.E)()],F.prototype,"is2DArray",null),(0,N.e)([(0,L.E)()],F.prototype,"gammaSpace",null),(0,N.e)([(0,L.E)()],F.prototype,"invertZ",void 0),(0,N.e)([(0,L.E)()],F.prototype,"lodLevelInAlpha",void 0),(0,N.e)([(0,L.E)()],F.prototype,"lodGenerationOffset",null),(0,N.e)([(0,L.E)()],F.prototype,"lodGenerationScale",null),(0,N.e)([(0,L.E)()],F.prototype,"linearSpecularLOD",null),(0,N.e)([(0,L.y)()],F.prototype,"irradianceTexture",null),(0,N.e)([(0,L.E)()],F.prototype,"isRenderTarget",void 0)},12311:(E,U,g)=>{g.d(U,{c:()=>e});var N=g(12320),L=g(12322),D=g(12174),S=g(12334),u=g(12355),s=g(12292),C=g(12199),B=g(12234),P=g(12286),F=g(12382),f=g(12221);function d(E,U){let g=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const N=U.width,L=U.height;if(E instanceof Float32Array){let U=E.byteLength/E.BYTES_PER_ELEMENT;const g=new Uint8Array(U);for(;--U>=0;){let N=E[U];N<0?N=0:N>1&&(N=1),g[U]=255*N}E=g}const D=document.createElement("canvas");D.width=N,D.height=L;const S=D.getContext("2d");if(!S)return null;const u=S.createImageData(N,L);if(u.data.set(E),S.putImageData(u,0,0),g){const E=document.createElement("canvas");E.width=N,E.height=L;const U=E.getContext("2d");return U?(U.translate(0,L),U.scale(1,-1),U.drawImage(D,0,0),E.toDataURL("image/png")):null}return D.toDataURL("image/png")}function I(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const N=E.getInternalTexture();if(!N)return null;const L=E._readPixelsSync(U,g);return L?d(L,E.getSize(),N.invertY):null}async function y(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const N=E.getInternalTexture();if(!N)return null;const L=await E.readPixels(U,g);return L?d(L,E.getSize(),N.invertY):null}var h=g(12390),V=g(12367);class e extends u.d{static _CreateVideoTexture(E,U,g){arguments.length>5&&void 0!==arguments[5]||e.TRILINEAR_SAMPLINGMODE;throw(0,C.e)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(E){this._isBlocking=E}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(E,U,g,N){let L,S=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.TRILINEAR_SAMPLINGMODE,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,P=arguments.length>8&&void 0!==arguments[8]&&arguments[8],F=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,I=arguments.length>12?arguments[12]:void 0,y=arguments.length>13?arguments[13]:void 0;super(U),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new D.b,this._isBlocking=!0,this.name=E||"",this.url=E;let V=!1,x=null,l=!0;"object"===typeof g&&null!==g?(L=g.noMipmap??!1,N=g.invertY??!h.b,S=g.samplingMode??e.TRILINEAR_SAMPLINGMODE,u=g.H??null,s=g.onError??null,C=g.buffer??null,P=g.deleteBuffer??!1,F=g.format,f=g.mimeType,d=g.loaderOptions,I=g.creationFlags,V=g.useSRGBBuffer??!1,x=g.internalTexture??null,l=g.gammaSpace??l,y=g.forcedExtension??y):L=!!g,this._gammaSpace=l,this._noMipmap=L,this._invertY=void 0===N?!h.b:N,this._initialSamplingMode=S,this._buffer=C,this._deleteBuffer=P,this._mimeType=f,this._loaderOptions=d,this._creationFlags=I,this._useSRGBBuffer=V,this._forcedExtension=y,void 0!==F&&(this._format=F);const Y=this.tE(),t=this._getEngine();if(!t)return;t.onBeforeTextureInitObservable.notifyObservers(this);const G=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),u&&u(),!this.isBlocking&&Y&&Y.resetCachedMaterial()},b=(E,U)=>{this._loadingError=!0,this._errorObject={message:E,exception:U},s&&s(E,U),e.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!x)return this._delayedOnLoad=G,void(this._delayedOnError=b);if(this._texture=x??this._getFromCache(this.url,L,S,this._invertY,V,this.isCube),this._texture)if(this._texture.isReady)B.c.SetImmediate((()=>G()));else{const E=this._texture.onLoadedObservable.add(G);this._texture.onErrorObservable.add((U=>{var g;b(U.message,U.exception),null===(g=this._texture)||void 0===g||g.onLoadedObservable.remove(E)}))}else if(Y&&Y.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=G,this._delayedOnError=b;else{try{this._texture=t.createTexture(this.url,L,this._invertY,Y,S,G,b,this._buffer,void 0,this._format,this._forcedExtension,f,d,I,V)}catch(T){throw b("error loading",T),T}P&&(this._buffer=null)}}updateURL(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,g=arguments.length>2?arguments[2]:void 0,N=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.tE().markAllMaterialsAsDirty(1,(E=>E.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=E),this.url=E,this._buffer=U,this._forcedExtension=N,this.delayLoadState=4,g&&(this._delayedOnLoad=g),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const E=this.tE();E&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?B.c.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=E.getEngine().createTexture(this.url,this._noMipmap,this._invertY,E,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(E,U,g,N){E*=this._cachedUScale,U*=this._cachedVScale,E-=this.uRotationCenter*this._cachedUScale,U-=this.vRotationCenter*this._cachedVScale,g-=this.wRotationCenter,S.dU.TransformCoordinatesFromFloatsToRef(E,U,g,this._rowGenerationMatrix,N),N.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,N.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,N.z+=this.wRotationCenter}getTextureMatrix(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*E===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*E,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=S.Matrix.Zero(),this._rowGenerationMatrix=new S.Matrix,this._t0=S.dU.Zero(),this._t1=S.dU.Zero(),this._t2=S.dU.Zero()),S.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(S.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,S.TmpVectors.Matrix[0]),S.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,S.TmpVectors.Matrix[1]),S.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,S.TmpVectors.Matrix[2]),S.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,S.TmpVectors.Matrix[3]),S.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(S.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(S.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(S.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.iB(this._t0),this._t2.iB(this._t0),S.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const U=this.tE();if(!U)return this._cachedTextureMatrix;const g=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&g!==this._cachedIdentity3x2&&U.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const E=this.tE();if(!E)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==e.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===E.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=S.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=S.Matrix.Zero());const U=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case e.PLANAR_MODE:S.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case e.PROJECTION_MODE:{S.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const U=E.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=U.updateFlag,U.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:S.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return U&&E.markAllMaterialsAsDirty(1,(E=>E.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const E={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,H:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return V.b.Clone((()=>new e(this._texture?this._texture.url:null,this.tE(),E)),this)}serialize(){var E;const U=this.name;e.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const g=super.serialize(e._SerializeInternalTextureUniqueId);if(!g)return null;if(e.SerializeBuffers||e.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))g.base64String=this._buffer,g.name=g.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const E=this.mimeType||"image/png";g.base64String=`data:${E};base64,${(0,f.i)(this._buffer)}`}else(e.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(g.base64String=!this._engine||this._engine._features.supportSyncTextureRead?I(this):y(this));var N;(g.invertY=this._invertY,g.samplingMode=this.samplingMode,g._creationFlags=this._creationFlags,g._useSRGBBuffer=this._useSRGBBuffer,e._SerializeInternalTextureUniqueId)&&(g.internalTextureUniqueId=null===(N=this._texture)||void 0===N?void 0:N.uniqueId);return g.internalTextureLabel=null===(E=this._texture)||void 0===E?void 0:E.label,g.noMipmap=this._noMipmap,this.name=U,g}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(E,U,g){if(E.customType){const N=P.d.Instantiate(E.customType).Parse(E,U,g);return E.samplingMode&&N.updateSamplingMode&&N._samplingMode&&N._samplingMode!==E.samplingMode&&N.updateSamplingMode(E.samplingMode),N}if(E.isCube&&!E.isRenderTarget)return e._CubeTextureParser(E,U,g);const N=void 0!==E.internalTextureUniqueId;if(!E.name&&!E.isRenderTarget&&!N)return null;let L;if(N){const g=U.getEngine().getLoadedTexturesCache();for(const U of g)if(U.uniqueId===E.internalTextureUniqueId){L=U;break}}const D=U=>{if(U&&U._texture&&(U._texture._cachedWrapU=null,U._texture._cachedWrapV=null,U._texture._cachedWrapR=null),E.samplingMode){const g=E.samplingMode;U&&U.samplingMode!==g&&U.updateSamplingMode(g)}if(U&&E.animations)for(let g=0;g<E.animations.length;g++){const N=E.animations[g],L=(0,s.d)("BABYLON.Animation");L&&U.animations.push(L.Parse(N))}U&&U._texture&&(N&&!L&&U._texture._setUniqueId(E.internalTextureUniqueId),U._texture.label=E.internalTextureLabel)};return V.b.Parse((()=>{let N=!0;if(E.noMipmap&&(N=!1),E.mirrorPlane){const g=e._CreateMirror(E.name,E.renderTargetSize,U,N);return g._waitingRenderList=E.renderList,g.mirrorPlane=F.c.eU(E.mirrorPlane),D(g),g}if(E.isRenderTarget){let g=null;if(E.isCube){if(U.reflectionProbes)for(let N=0;N<U.reflectionProbes.length;N++){const g=U.reflectionProbes[N];if(g.name===E.name)return g.cubeTexture}}else g=e._CreateRenderTargetTexture(E.name,E.renderTargetSize,U,N,E._creationFlags??0),g._waitingRenderList=E.renderList;return D(g),g}if(E.isVideo){const L=e._CreateVideoTexture(g+(E.url||E.name),g+(E.src||E.url),U,N,E.invertY,E.samplingMode,E.settings||{});return D(L),L}{let S;if(E.base64String&&!L)S=e.CreateFromBase64String(E.base64String,E.base64String,U,!N,E.invertY,E.samplingMode,(()=>{D(S)}),E._creationFlags??0,E._useSRGBBuffer??!1),S.name=E.name;else{let u;u=E.name&&(E.name.indexOf("://")>0||E.name.startsWith("data:"))?E.name:g+E.name,E.url&&(E.url.startsWith("data:")||e.UseSerializedUrlIfAny)&&(u=E.url);const s={noMipmap:!N,invertY:E.invertY,samplingMode:E.samplingMode,H:()=>{D(S)},internalTexture:L};S=new e(u,U,s)}return S}}),E,U)}static CreateFromBase64String(E,U,g,N,L){let D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e.TRILINEAR_SAMPLINGMODE;return new e("data:"+U,g,N,L,D,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,E,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(E,U,g){let N=arguments.length>3&&void 0!==arguments[3]&&arguments[3],L=arguments.length>4?arguments[4]:void 0,D=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],S=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e.TRILINEAR_SAMPLINGMODE,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,C=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,B=arguments.length>10?arguments[10]:void 0,P=arguments.length>11?arguments[11]:void 0;return"data:"!==E.substring(0,5)&&(E="data:"+E),new e(E,g,L,D,S,u,s,U,N,C,void 0,void 0,B,P)}}e.SerializeBuffers=!0,e.ForceSerializeBuffers=!1,e.OnTextureLoadErrorObservable=new D.b,e._SerializeInternalTextureUniqueId=!1,e._CubeTextureParser=(E,U,g)=>{throw(0,C.e)("CubeTexture")},e._CreateMirror=(E,U,g,N)=>{throw(0,C.e)("MirrorTexture")},e._CreateRenderTargetTexture=(E,U,g,N,L)=>{throw(0,C.e)("RenderTargetTexture")},e.NEAREST_SAMPLINGMODE=1,e.NEAREST_NEAREST_MIPLINEAR=8,e.BILINEAR_SAMPLINGMODE=2,e.LINEAR_LINEAR_MIPNEAREST=11,e.TRILINEAR_SAMPLINGMODE=3,e.LINEAR_LINEAR_MIPLINEAR=3,e.NEAREST_NEAREST_MIPNEAREST=4,e.NEAREST_LINEAR_MIPNEAREST=5,e.NEAREST_LINEAR_MIPLINEAR=6,e.NEAREST_LINEAR=7,e.NEAREST_NEAREST=1,e.LINEAR_NEAREST_MIPNEAREST=9,e.LINEAR_NEAREST_MIPLINEAR=10,e.LINEAR_LINEAR=2,e.LINEAR_NEAREST=12,e.EXPLICIT_MODE=0,e.SPHERICAL_MODE=1,e.PLANAR_MODE=2,e.CUBIC_MODE=3,e.PROJECTION_MODE=4,e.SKYBOX_MODE=5,e.INVCUBIC_MODE=6,e.EQUIRECTANGULAR_MODE=7,e.FIXED_EQUIRECTANGULAR_MODE=8,e.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,e.CLAMP_ADDRESSMODE=0,e.WRAP_ADDRESSMODE=1,e.MIRROR_ADDRESSMODE=2,e.UseSerializedUrlIfAny=!1,(0,N.e)([(0,L.E)()],e.prototype,"url",void 0),(0,N.e)([(0,L.E)()],e.prototype,"uOffset",void 0),(0,N.e)([(0,L.E)()],e.prototype,"vOffset",void 0),(0,N.e)([(0,L.E)()],e.prototype,"uScale",void 0),(0,N.e)([(0,L.E)()],e.prototype,"vScale",void 0),(0,N.e)([(0,L.E)()],e.prototype,"uAng",void 0),(0,N.e)([(0,L.E)()],e.prototype,"vAng",void 0),(0,N.e)([(0,L.E)()],e.prototype,"wAng",void 0),(0,N.e)([(0,L.E)()],e.prototype,"uRotationCenter",void 0),(0,N.e)([(0,L.E)()],e.prototype,"vRotationCenter",void 0),(0,N.e)([(0,L.E)()],e.prototype,"wRotationCenter",void 0),(0,N.e)([(0,L.E)()],e.prototype,"homogeneousRotationInUVTransform",void 0),(0,N.e)([(0,L.E)()],e.prototype,"isBlocking",null),(0,s.f)("BABYLON.Texture",e),V.b._TextureParser=e.Parse},12382:(E,U,g)=>{g.d(U,{c:()=>L});var N=g(12334);class L{constructor(E,U,g,L){this.normal=new N.dU(E,U,g),this.d=L}Og(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new L(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let E=this.normal.getHashCode();return E=397*E^this.d,E}normalize(){const E=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let U=0;return 0!==E&&(U=1/E),this.normal.x*=U,this.normal.y*=U,this.normal.z*=U,this.d*=U,this}transform(E){const U=L._TmpMatrix;E.invertToRef(U);const g=U.m,N=this.normal.x,D=this.normal.y,S=this.normal.z,u=this.d,s=N*g[0]+D*g[1]+S*g[2]+u*g[3],C=N*g[4]+D*g[5]+S*g[6]+u*g[7],B=N*g[8]+D*g[9]+S*g[10]+u*g[11],P=N*g[12]+D*g[13]+S*g[14]+u*g[15];return new L(s,C,B,P)}dotCoordinate(E){return this.normal.x*E.x+this.normal.y*E.y+this.normal.z*E.z+this.d}copyFromPoints(E,U,g){const N=U.x-E.x,L=U.y-E.y,D=U.z-E.z,S=g.x-E.x,u=g.y-E.y,s=g.z-E.z,C=L*s-D*u,B=D*S-N*s,P=N*u-L*S,F=Math.sqrt(C*C+B*B+P*P);let f;return f=0!==F?1/F:0,this.normal.x=C*f,this.normal.y=B*f,this.normal.z=P*f,this.d=-(this.normal.x*E.x+this.normal.y*E.y+this.normal.z*E.z),this}isFrontFacingTo(E,U){return N.dU.Dot(this.normal,E)<=U}signedDistanceTo(E){return N.dU.Dot(E,this.normal)+this.d}static eU(E){return new L(E[0],E[1],E[2],E[3])}static FromPoints(E,U,g){const N=new L(0,0,0,0);return N.copyFromPoints(E,U,g),N}static FromPositionAndNormal(E,U){const g=new L(0,0,0,0);return this.FromPositionAndNormalToRef(E,U,g)}static FromPositionAndNormalToRef(E,U,g){return g.normal.D(U),g.normal.normalize(),g.d=-E.dot(g.normal),g}static SignedDistanceToPlaneFromPositionAndNormal(E,U,g){const L=-(U.x*E.x+U.y*E.y+U.z*E.z);return N.dU.Dot(g,U)+L}}L._TmpMatrix=N.Matrix.Identity()},12363:(E,U,g)=>{g.d(U,{d:()=>N});class N{constructor(E,U){this.width=E,this.height=U}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let E=0|this.width;return E=397*E^this.height,E}D(E){this.width=E.width,this.height=E.height}du(E,U){return this.width=E,this.height=U,this}set(E,U){return this.du(E,U)}multiplyByFloats(E,U){return new N(this.width*E,this.height*U)}clone(){return new N(this.width,this.height)}equals(E){return!!E&&(this.width===E.width&&this.height===E.height)}get surface(){return this.width*this.height}static Zero(){return new N(0,0)}add(E){return new N(this.width+E.width,this.height+E.height)}IU(E){return new N(this.width-E.width,this.height-E.height)}scale(E){return new N(this.width*E,this.height*E)}static Lerp(E,U,g){const L=E.width+(U.width-E.width)*g,D=E.height+(U.height-E.height)*g;return new N(L,D)}}},12328:(E,U,g)=>{g.d(U,{b:()=>D,e:()=>S});const N={},L={};function D(E){const U=E.getClassName();return L[U]||(L[U]={}),L[U]}function S(E){const U=E.getClassName();if(N[U])return N[U];N[U]={};const g=N[U];let D=E,S=U;for(;S;){const E=L[S];for(const L in E)g[L]=E[L];let U,N=!1;do{if(U=Object.getPrototypeOf(D),!U.getClassName){N=!0;break}if(U.getClassName()!==S)break;D=U}while(U);if(N)break;S=U.getClassName(),D=U}return g}},12322:(E,U,g)=>{g.d(U,{C:()=>B,D:()=>P,E:()=>S,d:()=>D,e:()=>V,g:()=>f,k:()=>s,l:()=>d,p:()=>C,r:()=>I,u:()=>h,v:()=>F,w:()=>y,y:()=>u});var N=g(12328);function L(E,U){return(g,L)=>{const D=(0,N.b)(g);D[L]||(D[L]={type:E,sourceName:U})}}function D(E){return function(E){let U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(g,N)=>{const L=U||"_"+N;Object.defineProperty(g,N,{get:function(){return this[L]},set:function(U){var N;"function"===typeof(null===(N=this[L])||void 0===N?void 0:N.equals)&&this[L].equals(U)||this[L]!==U&&(this[L]=U,g[E].apply(this))},enumerable:!0,configurable:!0})}}(E,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function S(E){return L(0,E)}function u(E){return L(1,E)}function s(E){return L(2,E)}function C(E){return L(3,E)}function B(E){return L(4,E)}function P(E){return L(5,E)}function F(E){return L(6,E)}function f(E){return L(7,E)}function d(E){return L(8,E)}function I(E){return L(9,E)}function y(E){return L(10,E)}function h(E){return L(12,E)}function V(E,U,g,N){const L=g.value;g.value=function(){let g=L;if("undefined"!==typeof _native&&_native[U]){const E=_native[U];g=N?function(){return N(...arguments)?E(...arguments):L(...arguments)}:E}return E[U]=g,g(...arguments)}}V.filter=function(E){return(U,g,N)=>V(U,g,N,E)}},12367:(E,U,g)=>{g.d(U,{b:()=>C});var N=g(12199),L=g(12370),D=g(12379),S=g(12334),u=g(12328);const s=function(E,U,g){let N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const D=E();L.c&&L.c.HasTags(U)&&L.c.AddTagsTo(D,L.c.GetTags(U,!0));const S=(0,u.e)(D),s={};for(const L in S){const E=S[L],u=U[L],B=E.type;if(void 0!==u&&null!==u&&("uniqueId"!==L||C.AllowLoadingUniqueId))switch(B){case 0:case 6:case 9:case 11:D[L]=u;break;case 1:N.cloneTexturesOnlyOnce&&s[u.uniqueId]?D[L]=s[u.uniqueId]:(D[L]=g||u.isRenderTarget?u:u.clone(),s[u.uniqueId]=D[L]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:D[L]=g?u:u.clone()}}return D};class C{static AppendSerializedAnimations(E,U){if(E.animations){U.animations=[];for(let g=0;g<E.animations.length;g++){const N=E.animations[g];U.animations.push(N.serialize())}}}static Serialize(E,U){U||(U={}),L.c&&(U.tags=L.c.GetTags(E));const g=(0,u.e)(E);for(const N in g){const L=g[N],D=L.sourceName||N,S=L.type,u=E[N];if(void 0!==u&&null!==u&&("uniqueId"!==N||C.AllowLoadingUniqueId))switch(S){case 0:U[D]=u;break;case 1:case 3:case 7:case 9:U[D]=u.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:U[D]=u.Og();break;case 6:case 11:U[D]=u.id}}return U}static ParseProperties(E,U,g,N){N||(N="");const L=(0,u.e)(U);for(const u in L){const s=L[u],B=E[s.sourceName||u],P=s.type;if(void 0!==B&&null!==B&&("uniqueId"!==u||C.AllowLoadingUniqueId)){const E=U;switch(P){case 0:E[u]=B;break;case 1:g&&(E[u]=C._TextureParser(B,g,N));break;case 2:E[u]=D.VU.eU(B);break;case 3:E[u]=C._FresnelParametersParser(B);break;case 4:E[u]=S.Vector2.eU(B);break;case 5:E[u]=S.dU.eU(B);break;case 6:g&&(E[u]=g.getLastMeshById(B));break;case 7:E[u]=C._ColorCurvesParser(B);break;case 8:E[u]=D.hu.eU(B);break;case 9:E[u]=C._ImageProcessingConfigurationParser(B);break;case 10:E[u]=S.Quaternion.eU(B);break;case 11:g&&(E[u]=g.getCameraById(B));break;case 12:E[u]=S.Matrix.eU(B)}}}}static Parse(E,U,g){let N=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const D=E();return L.c&&L.c.AddTagsTo(D,U.tags),C.ParseProperties(U,D,g,N),D}static Clone(E,U){return s(E,U,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(E,U){return s(E,U,!0)}}C.AllowLoadingUniqueId=!1,C._ImageProcessingConfigurationParser=E=>{throw(0,N.e)("ImageProcessingConfiguration")},C._FresnelParametersParser=E=>{throw(0,N.e)("FresnelParameters")},C._ColorCurvesParser=E=>{throw(0,N.e)("ColorCurves")},C._TextureParser=(E,U,g)=>{throw(0,N.e)("Texture")}},12370:(E,U,g)=>{g.d(U,{c:()=>L});class N{static Eval(E,U){return"true"===(E=E.match(/\([^()]*\)/g)?E.replace(/\([^()]*\)/g,(E=>(E=E.slice(1,E.length-1),N._HandleParenthesisContent(E,U)))):N._HandleParenthesisContent(E,U))||"false"!==E&&N.Eval(E,U)}static _HandleParenthesisContent(E,U){let g;U=U||(E=>"true"===E);const L=E.split("||");for(const D in L)if(Object.prototype.hasOwnProperty.call(L,D)){let E=N._SimplifyNegation(L[D].trim());const S=E.split("&&");if(S.length>1)for(let L=0;L<S.length;++L){const D=N._SimplifyNegation(S[L].trim());if(g="true"!==D&&"false"!==D?"!"===D[0]?!U(D.substring(1)):U(D):"true"===D,!g){E="false";break}}if(g||"true"===E){g=!0;break}g="true"!==E&&"false"!==E?"!"===E[0]?!U(E.substring(1)):U(E):"true"===E}return g?"true":"false"}static _SimplifyNegation(E){return"!true"===(E=(E=E.replace(/^[\s!]+/,(E=>(E=E.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?E="false":"!false"===E&&(E="true"),E}}class L{static EnableFor(E){E._tags=E._tags||{},E.hasTags=()=>L.HasTags(E),E.addTags=U=>L.AddTagsTo(E,U),E.removeTags=U=>L.RemoveTagsFrom(E,U),E.matchesTagsQuery=U=>L.MatchesQuery(E,U)}static DisableFor(E){delete E._tags,delete E.hasTags,delete E.addTags,delete E.removeTags,delete E.matchesTagsQuery}static HasTags(E){if(!E._tags)return!1;const U=E._tags;for(const g in U)if(Object.prototype.hasOwnProperty.call(U,g))return!0;return!1}static GetTags(E){let U=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!E._tags)return null;if(U){const U=[];for(const g in E._tags)Object.prototype.hasOwnProperty.call(E._tags,g)&&!0===E._tags[g]&&U.push(g);return U.join(" ")}return E._tags}static AddTagsTo(E,U){if(!U)return;if("string"!==typeof U)return;const g=U.split(" ");for(const N of g)L._AddTagTo(E,N)}static _AddTagTo(E,U){""!==(U=U.trim())&&"true"!==U&&"false"!==U&&(U.match(/[\s]/)||U.match(/^([!]|([|]|[&]){2})/)||(L.EnableFor(E),E._tags[U]=!0))}static RemoveTagsFrom(E,U){if(!L.HasTags(E))return;const g=U.split(" ");for(const N in g)L._RemoveTagFrom(E,g[N])}static _RemoveTagFrom(E,U){delete E._tags[U]}static MatchesQuery(E,U){return void 0===U||(""===U?L.HasTags(E):N.Eval(U,(U=>L.HasTags(E)&&E._tags[U])))}}},12320:(E,U,g)=>{g.d(U,{e:()=>N});function N(E,U,g,N){var L,D=arguments.length,S=D<3?U:null===N?N=Object.getOwnPropertyDescriptor(U,g):N;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)S=Reflect.decorate(E,U,g,N);else for(var u=E.length-1;u>=0;u--)(L=E[u])&&(S=(D<3?L(S):D>3?L(U,g,S):L(U,g))||S);return D>3&&S&&Object.defineProperty(U,g,S),S}Object.create;Object.create}}]);