"use strict";(self["6xhfpmwgjr5"]=self["6xhfpmwgjr5"]||[]).push([[13],{12470:(P,a,R)=>{R.d(a,{d:()=>S});let S=!1},12434:(P,a,R)=>{R.d(a,{b:()=>V});var S=R(12401),A=R(12408),Z=R(12232),p=R(12415),j=R(12277),U=R(12383),Q=(R(12285),R(12441));class h{get wrapU(){return this._wrapU}set wrapU(P){this._wrapU=P}get wrapV(){return this._wrapV}set wrapV(P){this._wrapV=P}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(P){this._texture&&(this._texture.isCube=P)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(P){this._texture&&(this._texture.is3D=P)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(P){this._texture&&(this._texture.is2DArray=P)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(P){return void 0!==(null===P||void 0===P?void 0:P.shareDepth)}constructor(P){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=Q.d.Zero(),this._cachedBaseSize=Q.d.Zero(),this._initialSamplingMode=2,this._texture=h._IsRenderTargetWrapper(P)?P.texture:P,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(P){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(P,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var l=R(12447);class V extends h{set jj(P){this._hasAlpha!==P&&(this._hasAlpha=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get jj(){return this._hasAlpha}set getAlphaFromRGB(P){this._getAlphaFromRGB!==P&&(this._getAlphaFromRGB=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(P){this._coordinatesIndex!==P&&(this._coordinatesIndex=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(P){this._coordinatesMode!==P&&(this._coordinatesMode=P,this._scene&&this._scene.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(P){this._wrapU=P}get wrapV(){return this._wrapV}set wrapV(P){this._wrapV=P}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(P){this._texture?this._texture.isCube=P:this._isCube=P}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(P){this._texture&&(this._texture.is3D=P)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(P){this._texture&&(this._texture.is2DArray=P)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(P){var a;if(this._texture){if(this._texture._gammaSpace===P)return;this._texture._gammaSpace=P}else{if(this._gammaSpace===P)return;this._gammaSpace=P}null===(a=this.GP())||void 0===a||a.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(P){var a;P!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=P),null===(a=this.GP())||void 0===a||a.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(P){this._texture&&(this._texture._lodGenerationOffset=P)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(P){this._texture&&(this._texture._lodGenerationScale=P)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(P){this._texture&&(this._texture._linearSpecularLOD=P)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(P){this._texture&&(this._texture._irradianceTexture=P)}get uid(){return this._uid||(this._uid=(0,U.b)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(P){this._onDisposeObserver&&this.Fp.remove(this._onDisposeObserver),this._onDisposeObserver=this.Fp.add(P)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Fp=new Z.b,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,P?V._IsScene(P)?this._scene=P:this._engine=P:this._scene=j.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=a,this._uid=null}GP(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return p.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return p.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(P){}get canRescale(){return!1}_getFromCache(P,a,R,S,A,Z){const p=this._getEngine();if(!p)return null;const j=p._getUseSRGBBuffer(!!A,a),U=p.getLoadedTexturesCache();for(let Q=0;Q<U.length;Q++){const p=U[Q];if((void 0===A||j===p._useSRGBBuffer)&&(void 0===S||S===p.invertY)&&p.url===P&&p.generateMipMaps===!a&&(!R||R===p.samplingMode)&&(void 0===Z||Z===p.isCube))return p.incrementReferences(),p}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const P=this.GP();P&&P.markAllMaterialsAsDirty(1)}readPixels(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,S=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],A=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,U=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const Q=this._getEngine();if(!Q)return null;const h=this.getSize();let l=h.width,V=h.height;0!==a&&(l/=Math.pow(2,a),V/=Math.pow(2,a),l=Math.round(l),V=Math.round(V)),j=Math.min(l,j),U=Math.min(V,U);try{return this._texture.isCube?Q._readTexturePixels(this._texture,j,U,P,a,R,S,A,Z,p):Q._readTexturePixels(this._texture,j,U,-1,a,R,S,A,Z,p)}catch(f){return null}}_readPixelsSync(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,S=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],A=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const Z=this.getSize();let p=Z.width,j=Z.height;const U=this._getEngine();if(!U)return null;0!=a&&(p/=Math.pow(2,a),j/=Math.pow(2,a),p=Math.round(p),j=Math.round(j));try{return this._texture.isCube?U._readTexturePixelsSync(this._texture,p,j,P,a,R,S,A):U._readTexturePixelsSync(this._texture,p,j,-1,a,R,S,A)}catch(Q){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const P=this._scene.textures.indexOf(this);if(P>=0&&this._scene.textures.splice(P,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const P=this._parentContainer.textures.indexOf(this);P>-1&&this._parentContainer.textures.splice(P,1),this._parentContainer=null}}this.Fp.notifyObservers(this),this.Fp.clear(),this.metadata=null,super.dispose()}serialize(){let P=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!P)return null;const a=l.e.Serialize(this);return l.e.AppendSerializedAnimations(this,a),a}static WhenAllReady(P,a){let R=P.length;if(0!==R)for(let S=0;S<P.length;S++){const A=P[S];if(A.isReady())0===--R&&a();else{const P=A.onLoadObservable;P?P.addOnce((()=>{0===--R&&a()})):0===--R&&a()}}else a()}static _IsScene(P){return"Scene"===P.getClassName()}}V.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,S.d)([(0,A.x)()],V.prototype,"uniqueId",void 0),(0,S.d)([(0,A.x)()],V.prototype,"name",void 0),(0,S.d)([(0,A.x)()],V.prototype,"displayName",void 0),(0,S.d)([(0,A.x)()],V.prototype,"metadata",void 0),(0,S.d)([(0,A.x)("jj")],V.prototype,"_hasAlpha",void 0),(0,S.d)([(0,A.x)("getAlphaFromRGB")],V.prototype,"_getAlphaFromRGB",void 0),(0,S.d)([(0,A.x)()],V.prototype,"level",void 0),(0,S.d)([(0,A.x)("coordinatesIndex")],V.prototype,"_coordinatesIndex",void 0),(0,S.d)([(0,A.x)()],V.prototype,"optimizeUVAllocation",void 0),(0,S.d)([(0,A.x)("coordinatesMode")],V.prototype,"_coordinatesMode",void 0),(0,S.d)([(0,A.x)()],V.prototype,"wrapU",null),(0,S.d)([(0,A.x)()],V.prototype,"wrapV",null),(0,S.d)([(0,A.x)()],V.prototype,"wrapR",void 0),(0,S.d)([(0,A.x)()],V.prototype,"anisotropicFilteringLevel",void 0),(0,S.d)([(0,A.x)()],V.prototype,"isCube",null),(0,S.d)([(0,A.x)()],V.prototype,"is3D",null),(0,S.d)([(0,A.x)()],V.prototype,"is2DArray",null),(0,S.d)([(0,A.x)()],V.prototype,"gammaSpace",null),(0,S.d)([(0,A.x)()],V.prototype,"invertZ",void 0),(0,S.d)([(0,A.x)()],V.prototype,"lodLevelInAlpha",void 0),(0,S.d)([(0,A.x)()],V.prototype,"lodGenerationOffset",null),(0,S.d)([(0,A.x)()],V.prototype,"lodGenerationScale",null),(0,S.d)([(0,A.x)()],V.prototype,"linearSpecularLOD",null),(0,S.d)([(0,A.s)()],V.prototype,"irradianceTexture",null),(0,S.d)([(0,A.x)()],V.prototype,"isRenderTarget",void 0)},12399:(P,a,R)=>{R.d(a,{e:()=>k});var S=R(12401),A=R(12408),Z=R(12232),p=R(12415),j=R(12434),U=R(12376),Q=R(12266),h=R(12318),l=R(12369),V=R(12465),f=R(12298);function O(P,a){let R=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const S=a.width,A=a.height;if(P instanceof Float32Array){let a=P.byteLength/P.BYTES_PER_ELEMENT;const R=new Uint8Array(a);for(;--a>=0;){let S=P[a];S<0?S=0:S>1&&(S=1),R[a]=255*S}P=R}const Z=document.createElement("canvas");Z.width=S,Z.height=A;const p=Z.getContext("2d");if(!p)return null;const j=p.createImageData(S,A);if(j.data.set(P),p.putImageData(j,0,0),R){const P=document.createElement("canvas");P.width=S,P.height=A;const a=P.getContext("2d");return a?(a.translate(0,A),a.scale(1,-1),a.drawImage(Z,0,0),P.toDataURL("image/png")):null}return Z.toDataURL("image/png")}function q(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const S=P.getInternalTexture();if(!S)return null;const A=P._readPixelsSync(a,R);return A?O(A,P.getSize(),S.invertY):null}async function y(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const S=P.getInternalTexture();if(!S)return null;const A=await P.readPixels(a,R);return A?O(A,P.getSize(),S.invertY):null}var t=R(12470),W=R(12447);class k extends j.b{static _CreateVideoTexture(P,a,R){arguments.length>5&&void 0!==arguments[5]||k.TRILINEAR_SAMPLINGMODE;throw(0,Q.c)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(P){this._isBlocking=P}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(P,a,R,S){let A,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k.TRILINEAR_SAMPLINGMODE,j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Q=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],V=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,O=arguments.length>11?arguments[11]:void 0,q=arguments.length>12?arguments[12]:void 0,y=arguments.length>13?arguments[13]:void 0;super(a),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new Z.b,this._isBlocking=!0,this.name=P||"",this.url=P;let W=!1,x=null,s=!0;"object"===typeof R&&null!==R?(A=R.noMipmap??!1,S=R.invertY??!t.d,p=R.samplingMode??k.TRILINEAR_SAMPLINGMODE,j=R.C??null,U=R.onError??null,Q=R.buffer??null,l=R.deleteBuffer??!1,V=R.format,f=R.mimeType,O=R.loaderOptions,q=R.creationFlags,W=R.useSRGBBuffer??!1,x=R.internalTexture??null,s=R.gammaSpace??s,y=R.forcedExtension??y):A=!!R,this._gammaSpace=s,this._noMipmap=A,this._invertY=void 0===S?!t.d:S,this._initialSamplingMode=p,this._buffer=Q,this._deleteBuffer=l,this._mimeType=f,this._loaderOptions=O,this._creationFlags=q,this._useSRGBBuffer=W,this._forcedExtension=y,void 0!==V&&(this._format=V);const d=this.GP(),G=this._getEngine();if(!G)return;G.onBeforeTextureInitObservable.notifyObservers(this);const H=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),j&&j(),!this.isBlocking&&d&&d.resetCachedMaterial()},mP=(P,a)=>{this._loadingError=!0,this._errorObject={message:P,exception:a},U&&U(P,a),k.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!x)return this._delayedOnLoad=H,void(this._delayedOnError=mP);if(this._texture=x??this._getFromCache(this.url,A,p,this._invertY,W,this.isCube),this._texture)if(this._texture.isReady)h.b.SetImmediate((()=>H()));else{const P=this._texture.onLoadedObservable.add(H);this._texture.onErrorObservable.add((a=>{var R;mP(a.message,a.exception),null===(R=this._texture)||void 0===R||R.onLoadedObservable.remove(P)}))}else if(d&&d.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=H,this._delayedOnError=mP;else{try{this._texture=G.createTexture(this.url,A,this._invertY,d,p,H,mP,this._buffer,void 0,this._format,this._forcedExtension,f,O,q,W)}catch(N){throw mP("error loading",N),N}l&&(this._buffer=null)}}updateURL(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,R=arguments.length>2?arguments[2]:void 0,S=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.GP().markAllMaterialsAsDirty(1,(P=>P.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=P),this.url=P,this._buffer=a,this._forcedExtension=S,this.delayLoadState=4,R&&(this._delayedOnLoad=R),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const P=this.GP();P&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?h.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=P.getEngine().createTexture(this.url,this._noMipmap,this._invertY,P,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(P,a,R,S){P*=this._cachedUScale,a*=this._cachedVScale,P-=this.uRotationCenter*this._cachedUScale,a-=this.vRotationCenter*this._cachedVScale,R-=this.wRotationCenter,p.Oa.TransformCoordinatesFromFloatsToRef(P,a,R,this._rowGenerationMatrix,S),S.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,S.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,S.z+=this.wRotationCenter}getTextureMatrix(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*P===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*P,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=p.Matrix.Zero(),this._rowGenerationMatrix=new p.Matrix,this._t0=p.Oa.Zero(),this._t1=p.Oa.Zero(),this._t2=p.Oa.Zero()),p.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(p.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,p.TmpVectors.Matrix[0]),p.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,p.TmpVectors.Matrix[1]),p.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,p.TmpVectors.Matrix[2]),p.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,p.TmpVectors.Matrix[3]),p.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(p.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(p.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(p.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.Ul(this._t0),this._t2.Ul(this._t0),p.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const a=this.GP();if(!a)return this._cachedTextureMatrix;const R=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&R!==this._cachedIdentity3x2&&a.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const P=this.GP();if(!P)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==k.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===P.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=p.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=p.Matrix.Zero());const a=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case k.PLANAR_MODE:p.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case k.PROJECTION_MODE:{p.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const a=P.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=a.updateFlag,a.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:p.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return a&&P.markAllMaterialsAsDirty(1,(P=>P.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const P={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,C:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return W.e.Clone((()=>new k(this._texture?this._texture.url:null,this.GP(),P)),this)}serialize(){var P;const a=this.name;k.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const R=super.serialize(k._SerializeInternalTextureUniqueId);if(!R)return null;if(k.SerializeBuffers||k.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))R.base64String=this._buffer,R.name=R.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const P=this.mimeType||"image/png";R.base64String=`data:${P};base64,${(0,f.o)(this._buffer)}`}else(k.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(R.base64String=!this._engine||this._engine._features.supportSyncTextureRead?q(this):y(this));var S;(R.invertY=this._invertY,R.samplingMode=this.samplingMode,R._creationFlags=this._creationFlags,R._useSRGBBuffer=this._useSRGBBuffer,k._SerializeInternalTextureUniqueId)&&(R.internalTextureUniqueId=null===(S=this._texture)||void 0===S?void 0:S.uniqueId);return R.internalTextureLabel=null===(P=this._texture)||void 0===P?void 0:P.label,R.noMipmap=this._noMipmap,this.name=a,R}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(P,a,R){if(P.customType){const S=l.d.Instantiate(P.customType).Parse(P,a,R);return P.samplingMode&&S.updateSamplingMode&&S._samplingMode&&S._samplingMode!==P.samplingMode&&S.updateSamplingMode(P.samplingMode),S}if(P.isCube&&!P.isRenderTarget)return k._CubeTextureParser(P,a,R);const S=void 0!==P.internalTextureUniqueId;if(!P.name&&!P.isRenderTarget&&!S)return null;let A;if(S){const R=a.getEngine().getLoadedTexturesCache();for(const a of R)if(a.uniqueId===P.internalTextureUniqueId){A=a;break}}const Z=a=>{if(a&&a._texture&&(a._texture._cachedWrapU=null,a._texture._cachedWrapV=null,a._texture._cachedWrapR=null),P.samplingMode){const R=P.samplingMode;a&&a.samplingMode!==R&&a.updateSamplingMode(R)}if(a&&P.animations)for(let R=0;R<P.animations.length;R++){const S=P.animations[R],A=(0,U.c)("BABYLON.Animation");A&&a.animations.push(A.Parse(S))}a&&a._texture&&(S&&!A&&a._texture._setUniqueId(P.internalTextureUniqueId),a._texture.label=P.internalTextureLabel)};return W.e.Parse((()=>{let S=!0;if(P.noMipmap&&(S=!1),P.mirrorPlane){const R=k._CreateMirror(P.name,P.renderTargetSize,a,S);return R._waitingRenderList=P.renderList,R.mirrorPlane=V.d.ka(P.mirrorPlane),Z(R),R}if(P.isRenderTarget){let R=null;if(P.isCube){if(a.reflectionProbes)for(let S=0;S<a.reflectionProbes.length;S++){const R=a.reflectionProbes[S];if(R.name===P.name)return R.cubeTexture}}else R=k._CreateRenderTargetTexture(P.name,P.renderTargetSize,a,S,P._creationFlags??0),R._waitingRenderList=P.renderList;return Z(R),R}if(P.isVideo){const A=k._CreateVideoTexture(R+(P.url||P.name),R+(P.src||P.url),a,S,P.invertY,P.samplingMode,P.settings||{});return Z(A),A}{let p;if(P.base64String&&!A)p=k.CreateFromBase64String(P.base64String,P.base64String,a,!S,P.invertY,P.samplingMode,(()=>{Z(p)}),P._creationFlags??0,P._useSRGBBuffer??!1),p.name=P.name;else{let j;j=P.name&&(P.name.indexOf("://")>0||P.name.startsWith("data:"))?P.name:R+P.name,P.url&&(P.url.startsWith("data:")||k.UseSerializedUrlIfAny)&&(j=P.url);const U={noMipmap:!S,invertY:P.invertY,samplingMode:P.samplingMode,C:()=>{Z(p)},internalTexture:A};p=new k(j,a,U)}return p}}),P,a)}static CreateFromBase64String(P,a,R,S,A){let Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:k.TRILINEAR_SAMPLINGMODE;return new k("data:"+a,R,S,A,Z,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,P,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(P,a,R){let S=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=arguments.length>4?arguments[4]:void 0,Z=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:k.TRILINEAR_SAMPLINGMODE,j=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,U=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,Q=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,h=arguments.length>10?arguments[10]:void 0,l=arguments.length>11?arguments[11]:void 0;return"data:"!==P.substring(0,5)&&(P="data:"+P),new k(P,R,A,Z,p,j,U,a,S,Q,void 0,void 0,h,l)}}k.SerializeBuffers=!0,k.ForceSerializeBuffers=!1,k.OnTextureLoadErrorObservable=new Z.b,k._SerializeInternalTextureUniqueId=!1,k._CubeTextureParser=(P,a,R)=>{throw(0,Q.c)("CubeTexture")},k._CreateMirror=(P,a,R,S)=>{throw(0,Q.c)("MirrorTexture")},k._CreateRenderTargetTexture=(P,a,R,S,A)=>{throw(0,Q.c)("RenderTargetTexture")},k.NEAREST_SAMPLINGMODE=1,k.NEAREST_NEAREST_MIPLINEAR=8,k.BILINEAR_SAMPLINGMODE=2,k.LINEAR_LINEAR_MIPNEAREST=11,k.TRILINEAR_SAMPLINGMODE=3,k.LINEAR_LINEAR_MIPLINEAR=3,k.NEAREST_NEAREST_MIPNEAREST=4,k.NEAREST_LINEAR_MIPNEAREST=5,k.NEAREST_LINEAR_MIPLINEAR=6,k.NEAREST_LINEAR=7,k.NEAREST_NEAREST=1,k.LINEAR_NEAREST_MIPNEAREST=9,k.LINEAR_NEAREST_MIPLINEAR=10,k.LINEAR_LINEAR=2,k.LINEAR_NEAREST=12,k.EXPLICIT_MODE=0,k.SPHERICAL_MODE=1,k.PLANAR_MODE=2,k.CUBIC_MODE=3,k.PROJECTION_MODE=4,k.SKYBOX_MODE=5,k.INVCUBIC_MODE=6,k.EQUIRECTANGULAR_MODE=7,k.FIXED_EQUIRECTANGULAR_MODE=8,k.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,k.CLAMP_ADDRESSMODE=0,k.WRAP_ADDRESSMODE=1,k.MIRROR_ADDRESSMODE=2,k.UseSerializedUrlIfAny=!1,(0,S.d)([(0,A.x)()],k.prototype,"url",void 0),(0,S.d)([(0,A.x)()],k.prototype,"uOffset",void 0),(0,S.d)([(0,A.x)()],k.prototype,"vOffset",void 0),(0,S.d)([(0,A.x)()],k.prototype,"uScale",void 0),(0,S.d)([(0,A.x)()],k.prototype,"vScale",void 0),(0,S.d)([(0,A.x)()],k.prototype,"uAng",void 0),(0,S.d)([(0,A.x)()],k.prototype,"vAng",void 0),(0,S.d)([(0,A.x)()],k.prototype,"wAng",void 0),(0,S.d)([(0,A.x)()],k.prototype,"uRotationCenter",void 0),(0,S.d)([(0,A.x)()],k.prototype,"vRotationCenter",void 0),(0,S.d)([(0,A.x)()],k.prototype,"wRotationCenter",void 0),(0,S.d)([(0,A.x)()],k.prototype,"homogeneousRotationInUVTransform",void 0),(0,S.d)([(0,A.x)()],k.prototype,"isBlocking",null),(0,U.d)("BABYLON.Texture",k),W.e._TextureParser=k.Parse},12465:(P,a,R)=>{R.d(a,{d:()=>A});var S=R(12415);class A{constructor(P,a,R,A){this.normal=new S.Oa(P,a,R),this.d=A}pj(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new A(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let P=this.normal.getHashCode();return P=397*P^this.d,P}normalize(){const P=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let a=0;return 0!==P&&(a=1/P),this.normal.x*=a,this.normal.y*=a,this.normal.z*=a,this.d*=a,this}transform(P){const a=A._TmpMatrix;P.invertToRef(a);const R=a.m,S=this.normal.x,Z=this.normal.y,p=this.normal.z,j=this.d,U=S*R[0]+Z*R[1]+p*R[2]+j*R[3],Q=S*R[4]+Z*R[5]+p*R[6]+j*R[7],h=S*R[8]+Z*R[9]+p*R[10]+j*R[11],l=S*R[12]+Z*R[13]+p*R[14]+j*R[15];return new A(U,Q,h,l)}dotCoordinate(P){return this.normal.x*P.x+this.normal.y*P.y+this.normal.z*P.z+this.d}copyFromPoints(P,a,R){const S=a.x-P.x,A=a.y-P.y,Z=a.z-P.z,p=R.x-P.x,j=R.y-P.y,U=R.z-P.z,Q=A*U-Z*j,h=Z*p-S*U,l=S*j-A*p,V=Math.sqrt(Q*Q+h*h+l*l);let f;return f=0!==V?1/V:0,this.normal.x=Q*f,this.normal.y=h*f,this.normal.z=l*f,this.d=-(this.normal.x*P.x+this.normal.y*P.y+this.normal.z*P.z),this}isFrontFacingTo(P,a){return S.Oa.Dot(this.normal,P)<=a}signedDistanceTo(P){return S.Oa.Dot(P,this.normal)+this.d}static ka(P){return new A(P[0],P[1],P[2],P[3])}static FromPoints(P,a,R){const S=new A(0,0,0,0);return S.copyFromPoints(P,a,R),S}static FromPositionAndNormal(P,a){const R=new A(0,0,0,0);return this.FromPositionAndNormalToRef(P,a,R)}static FromPositionAndNormalToRef(P,a,R){return R.normal.A(a),R.normal.normalize(),R.d=-P.dot(R.normal),R}static SignedDistanceToPlaneFromPositionAndNormal(P,a,R){const A=-(a.x*P.x+a.y*P.y+a.z*P.z);return S.Oa.Dot(R,a)+A}}A._TmpMatrix=S.Matrix.Identity()},12441:(P,a,R)=>{R.d(a,{d:()=>S});class S{constructor(P,a){this.width=P,this.height=a}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let P=0|this.width;return P=397*P^this.height,P}A(P){this.width=P.width,this.height=P.height}Oj(P,a){return this.width=P,this.height=a,this}set(P,a){return this.Oj(P,a)}multiplyByFloats(P,a){return new S(this.width*P,this.height*a)}clone(){return new S(this.width,this.height)}equals(P){return!!P&&(this.width===P.width&&this.height===P.height)}get surface(){return this.width*this.height}static Zero(){return new S(0,0)}add(P){return new S(this.width+P.width,this.height+P.height)}qa(P){return new S(this.width-P.width,this.height-P.height)}scale(P){return new S(this.width*P,this.height*P)}static Lerp(P,a,R){const A=P.width+(a.width-P.width)*R,Z=P.height+(a.height-P.height)*R;return new S(A,Z)}}},12412:(P,a,R)=>{R.d(a,{d:()=>Z,g:()=>p});const S={},A={};function Z(P){const a=P.getClassName();return A[a]||(A[a]={}),A[a]}function p(P){const a=P.getClassName();if(S[a])return S[a];S[a]={};const R=S[a];let Z=P,p=a;for(;p;){const P=A[p];for(const A in P)R[A]=P[A];let a,S=!1;do{if(a=Object.getPrototypeOf(Z),!a.getClassName){S=!0;break}if(a.getClassName()!==p)break;Z=a}while(a);if(S)break;p=a.getClassName(),Z=a}return R}},12408:(P,a,R)=>{R.d(a,{b:()=>Z,d:()=>W,g:()=>f,h:()=>U,j:()=>O,k:()=>Q,l:()=>q,m:()=>t,o:()=>V,q:()=>y,s:()=>j,t:()=>h,v:()=>l,x:()=>p});var S=R(12412);function A(P,a){return(R,A)=>{const Z=(0,S.d)(R);Z[A]||(Z[A]={type:P,sourceName:a})}}function Z(P){return function(P){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(R,S)=>{const A=a||"_"+S;Object.defineProperty(R,S,{get:function(){return this[A]},set:function(a){var S;"function"===typeof(null===(S=this[A])||void 0===S?void 0:S.equals)&&this[A].equals(a)||this[A]!==a&&(this[A]=a,R[P].apply(this))},enumerable:!0,configurable:!0})}}(P,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function p(P){return A(0,P)}function j(P){return A(1,P)}function U(P){return A(2,P)}function Q(P){return A(3,P)}function h(P){return A(4,P)}function l(P){return A(5,P)}function V(P){return A(6,P)}function f(P){return A(7,P)}function O(P){return A(8,P)}function q(P){return A(9,P)}function y(P){return A(10,P)}function t(P){return A(12,P)}function W(P,a,R,S){const A=R.value;R.value=function(){let R=A;if("undefined"!==typeof _native&&_native[a]){const P=_native[a];R=S?function(){return S(...arguments)?P(...arguments):A(...arguments)}:P}return P[a]=R,R(...arguments)}}W.filter=function(P){return(a,R,S)=>W(a,R,S,P)}},12447:(P,a,R)=>{R.d(a,{e:()=>Q});var S=R(12266),A=R(12454),Z=R(12456),p=R(12415),j=R(12412);const U=function(P,a,R){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const Z=P();A.e&&A.e.HasTags(a)&&A.e.AddTagsTo(Z,A.e.GetTags(a,!0));const p=(0,j.g)(Z),U={};for(const A in p){const P=p[A],j=a[A],h=P.type;if(void 0!==j&&null!==j&&("uniqueId"!==A||Q.AllowLoadingUniqueId))switch(h){case 0:case 6:case 9:case 11:Z[A]=j;break;case 1:S.cloneTexturesOnlyOnce&&U[j.uniqueId]?Z[A]=U[j.uniqueId]:(Z[A]=R||j.isRenderTarget?j:j.clone(),U[j.uniqueId]=Z[A]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:Z[A]=R?j:j.clone()}}return Z};class Q{static AppendSerializedAnimations(P,a){if(P.animations){a.animations=[];for(let R=0;R<P.animations.length;R++){const S=P.animations[R];a.animations.push(S.serialize())}}}static Serialize(P,a){a||(a={}),A.e&&(a.tags=A.e.GetTags(P));const R=(0,j.g)(P);for(const S in R){const A=R[S],Z=A.sourceName||S,p=A.type,j=P[S];if(void 0!==j&&null!==j&&("uniqueId"!==S||Q.AllowLoadingUniqueId))switch(p){case 0:a[Z]=j;break;case 1:case 3:case 7:case 9:a[Z]=j.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:a[Z]=j.pj();break;case 6:case 11:a[Z]=j.id}}return a}static ParseProperties(P,a,R,S){S||(S="");const A=(0,j.g)(a);for(const j in A){const U=A[j],h=P[U.sourceName||j],l=U.type;if(void 0!==h&&null!==h&&("uniqueId"!==j||Q.AllowLoadingUniqueId)){const P=a;switch(l){case 0:P[j]=h;break;case 1:R&&(P[j]=Q._TextureParser(h,R,S));break;case 2:P[j]=Z.Wa.ka(h);break;case 3:P[j]=Q._FresnelParametersParser(h);break;case 4:P[j]=p.Vector2.ka(h);break;case 5:P[j]=p.Oa.ka(h);break;case 6:R&&(P[j]=R.getLastMeshById(h));break;case 7:P[j]=Q._ColorCurvesParser(h);break;case 8:P[j]=Z.tj.ka(h);break;case 9:P[j]=Q._ImageProcessingConfigurationParser(h);break;case 10:P[j]=p.Quaternion.ka(h);break;case 11:R&&(P[j]=R.getCameraById(h));break;case 12:P[j]=p.Matrix.ka(h)}}}}static Parse(P,a,R){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const Z=P();return A.e&&A.e.AddTagsTo(Z,a.tags),Q.ParseProperties(a,Z,R,S),Z}static Clone(P,a){return U(P,a,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(P,a){return U(P,a,!0)}}Q.AllowLoadingUniqueId=!1,Q._ImageProcessingConfigurationParser=P=>{throw(0,S.c)("ImageProcessingConfiguration")},Q._FresnelParametersParser=P=>{throw(0,S.c)("FresnelParameters")},Q._ColorCurvesParser=P=>{throw(0,S.c)("ColorCurves")},Q._TextureParser=(P,a,R)=>{throw(0,S.c)("Texture")}},12454:(P,a,R)=>{R.d(a,{e:()=>A});class S{static Eval(P,a){return"true"===(P=P.match(/\([^()]*\)/g)?P.replace(/\([^()]*\)/g,(P=>(P=P.slice(1,P.length-1),S._HandleParenthesisContent(P,a)))):S._HandleParenthesisContent(P,a))||"false"!==P&&S.Eval(P,a)}static _HandleParenthesisContent(P,a){let R;a=a||(P=>"true"===P);const A=P.split("||");for(const Z in A)if(Object.prototype.hasOwnProperty.call(A,Z)){let P=S._SimplifyNegation(A[Z].trim());const p=P.split("&&");if(p.length>1)for(let A=0;A<p.length;++A){const Z=S._SimplifyNegation(p[A].trim());if(R="true"!==Z&&"false"!==Z?"!"===Z[0]?!a(Z.substring(1)):a(Z):"true"===Z,!R){P="false";break}}if(R||"true"===P){R=!0;break}R="true"!==P&&"false"!==P?"!"===P[0]?!a(P.substring(1)):a(P):"true"===P}return R?"true":"false"}static _SimplifyNegation(P){return"!true"===(P=(P=P.replace(/^[\s!]+/,(P=>(P=P.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?P="false":"!false"===P&&(P="true"),P}}class A{static EnableFor(P){P._tags=P._tags||{},P.hasTags=()=>A.HasTags(P),P.addTags=a=>A.AddTagsTo(P,a),P.removeTags=a=>A.RemoveTagsFrom(P,a),P.matchesTagsQuery=a=>A.MatchesQuery(P,a)}static DisableFor(P){delete P._tags,delete P.hasTags,delete P.addTags,delete P.removeTags,delete P.matchesTagsQuery}static HasTags(P){if(!P._tags)return!1;const a=P._tags;for(const R in a)if(Object.prototype.hasOwnProperty.call(a,R))return!0;return!1}static GetTags(P){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!P._tags)return null;if(a){const a=[];for(const R in P._tags)Object.prototype.hasOwnProperty.call(P._tags,R)&&!0===P._tags[R]&&a.push(R);return a.join(" ")}return P._tags}static AddTagsTo(P,a){if(!a)return;if("string"!==typeof a)return;const R=a.split(" ");for(const S of R)A._AddTagTo(P,S)}static _AddTagTo(P,a){""!==(a=a.trim())&&"true"!==a&&"false"!==a&&(a.match(/[\s]/)||a.match(/^([!]|([|]|[&]){2})/)||(A.EnableFor(P),P._tags[a]=!0))}static RemoveTagsFrom(P,a){if(!A.HasTags(P))return;const R=a.split(" ");for(const S in R)A._RemoveTagFrom(P,R[S])}static _RemoveTagFrom(P,a){delete P._tags[a]}static MatchesQuery(P,a){return void 0===a||(""===a?A.HasTags(P):S.Eval(a,(a=>A.HasTags(P)&&P._tags[a])))}}},12401:(P,a,R)=>{R.d(a,{d:()=>S});function S(P,a,R,S){var A,Z=arguments.length,p=Z<3?a:null===S?S=Object.getOwnPropertyDescriptor(a,R):S;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)p=Reflect.decorate(P,a,R,S);else for(var j=P.length-1;j>=0;j--)(A=P[j])&&(p=(Z<3?A(p):Z>3?A(a,R,p):A(a,R))||p);return Z>3&&p&&Object.defineProperty(a,R,p),p}Object.create;Object.create}}]);