"use strict";(self["3nlrbof8msu"]=self["3nlrbof8msu"]||[]).push([[13],{12781:(t,b,Z)=>{Z.d(b,{e:()=>J});let J=!1},12748:(t,b,Z)=>{Z.d(b,{d:()=>r});var J=Z(12721),S=Z(12726),P=Z(12551),v=Z(12735),h=Z(12585),C=Z(12693),Y=(Z(12593),Z(12757));class g{get wrapU(){return this._wrapU}set wrapU(t){this._wrapU=t}get wrapV(){return this._wrapV}set wrapV(t){this._wrapV=t}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(t){this._texture&&(this._texture.isCube=t)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(t){this._texture&&(this._texture.is3D=t)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(t){this._texture&&(this._texture.is2DArray=t)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(t){return void 0!==(null===t||void 0===t?void 0:t.shareDepth)}constructor(t){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=Y.d.Zero(),this._cachedBaseSize=Y.d.Zero(),this._initialSamplingMode=2,this._texture=g._IsRenderTargetWrapper(t)?t.texture:t,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(t){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(t,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var I=Z(12760);class r extends g{set Vb(t){this._hasAlpha!==t&&(this._hasAlpha=t,this._scene&&this._scene.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))))}get Vb(){return this._hasAlpha}set getAlphaFromRGB(t){this._getAlphaFromRGB!==t&&(this._getAlphaFromRGB=t,this._scene&&this._scene.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(t){this._coordinatesIndex!==t&&(this._coordinatesIndex=t,this._scene&&this._scene.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(t){this._coordinatesMode!==t&&(this._coordinatesMode=t,this._scene&&this._scene.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(t){this._wrapU=t}get wrapV(){return this._wrapV}set wrapV(t){this._wrapV=t}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(t){this._texture?this._texture.isCube=t:this._isCube=t}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(t){this._texture&&(this._texture.is3D=t)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(t){this._texture&&(this._texture.is2DArray=t)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(t){var b;if(this._texture){if(this._texture._gammaSpace===t)return;this._texture._gammaSpace=t}else{if(this._gammaSpace===t)return;this._gammaSpace=t}null===(b=this.et())||void 0===b||b.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(t){var b;t!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=t),null===(b=this.et())||void 0===b||b.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(t){this._texture&&(this._texture._lodGenerationOffset=t)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(t){this._texture&&(this._texture._lodGenerationScale=t)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(t){this._texture&&(this._texture._linearSpecularLOD=t)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(t){this._texture&&(this._texture._irradianceTexture=t)}get uid(){return this._uid||(this._uid=(0,C.c)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(t){this._onDisposeObserver&&this.lb.remove(this._onDisposeObserver),this._onDisposeObserver=this.lb.add(t)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(t){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=r.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.lb=new P.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,t?r._IsScene(t)?this._scene=t:this._engine=t:this._scene=h.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=b,this._uid=null}et(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return v.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return v.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(t){}get canRescale(){return!1}_getFromCache(t,b,Z,J,S,P){const v=this._getEngine();if(!v)return null;const h=v._getUseSRGBBuffer(!!S,b),C=v.getLoadedTexturesCache();for(let Y=0;Y<C.length;Y++){const v=C[Y];if((void 0===S||h===v._useSRGBBuffer)&&(void 0===J||J===v.invertY)&&v.url===t&&v.generateMipMaps===!b&&(!Z||Z===v.samplingMode)&&(void 0===P||P===v.isCube))return v.incrementReferences(),v}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const t=this.et();t&&t.markAllMaterialsAsDirty(1)}readPixels(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,J=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4],P=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const Y=this._getEngine();if(!Y)return null;const g=this.getSize();let I=g.width,r=g.height;0!==b&&(I/=Math.pow(2,b),r/=Math.pow(2,b),I=Math.round(I),r=Math.round(r)),h=Math.min(I,h),C=Math.min(r,C);try{return this._texture.isCube?Y._readTexturePixels(this._texture,h,C,t,b,Z,J,S,P,v):Y._readTexturePixels(this._texture,h,C,-1,b,Z,J,S,P,v)}catch(M){return null}}_readPixelsSync(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,J=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const P=this.getSize();let v=P.width,h=P.height;const C=this._getEngine();if(!C)return null;0!=b&&(v/=Math.pow(2,b),h/=Math.pow(2,b),v=Math.round(v),h=Math.round(h));try{return this._texture.isCube?C._readTexturePixelsSync(this._texture,v,h,t,b,Z,J,S):C._readTexturePixelsSync(this._texture,v,h,-1,b,Z,J,S)}catch(Y){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const t=this._scene.textures.indexOf(this);if(t>=0&&this._scene.textures.splice(t,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const t=this._parentContainer.textures.indexOf(this);t>-1&&this._parentContainer.textures.splice(t,1),this._parentContainer=null}}this.lb.notifyObservers(this),this.lb.clear(),this.metadata=null,super.dispose()}serialize(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!t)return null;const b=I.d.Serialize(this);return I.d.AppendSerializedAnimations(this,b),b}static WhenAllReady(t,b){let Z=t.length;if(0!==Z)for(let J=0;J<t.length;J++){const S=t[J];if(S.isReady())0===--Z&&b();else{const t=S.onLoadObservable;t?t.addOnce((()=>{0===--Z&&b()})):0===--Z&&b()}}else b()}static _IsScene(t){return"Scene"===t.getClassName()}}r.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,J.e)([(0,S.N)()],r.prototype,"uniqueId",void 0),(0,J.e)([(0,S.N)()],r.prototype,"name",void 0),(0,J.e)([(0,S.N)()],r.prototype,"displayName",void 0),(0,J.e)([(0,S.N)()],r.prototype,"metadata",void 0),(0,J.e)([(0,S.N)("Vb")],r.prototype,"_hasAlpha",void 0),(0,J.e)([(0,S.N)("getAlphaFromRGB")],r.prototype,"_getAlphaFromRGB",void 0),(0,J.e)([(0,S.N)()],r.prototype,"level",void 0),(0,J.e)([(0,S.N)("coordinatesIndex")],r.prototype,"_coordinatesIndex",void 0),(0,J.e)([(0,S.N)()],r.prototype,"optimizeUVAllocation",void 0),(0,J.e)([(0,S.N)("coordinatesMode")],r.prototype,"_coordinatesMode",void 0),(0,J.e)([(0,S.N)()],r.prototype,"wrapU",null),(0,J.e)([(0,S.N)()],r.prototype,"wrapV",null),(0,J.e)([(0,S.N)()],r.prototype,"wrapR",void 0),(0,J.e)([(0,S.N)()],r.prototype,"anisotropicFilteringLevel",void 0),(0,J.e)([(0,S.N)()],r.prototype,"isCube",null),(0,J.e)([(0,S.N)()],r.prototype,"is3D",null),(0,J.e)([(0,S.N)()],r.prototype,"is2DArray",null),(0,J.e)([(0,S.N)()],r.prototype,"gammaSpace",null),(0,J.e)([(0,S.N)()],r.prototype,"invertZ",void 0),(0,J.e)([(0,S.N)()],r.prototype,"lodLevelInAlpha",void 0),(0,J.e)([(0,S.N)()],r.prototype,"lodGenerationOffset",null),(0,J.e)([(0,S.N)()],r.prototype,"lodGenerationScale",null),(0,J.e)([(0,S.N)()],r.prototype,"linearSpecularLOD",null),(0,J.e)([(0,S.C)()],r.prototype,"irradianceTexture",null),(0,J.e)([(0,S.N)()],r.prototype,"isRenderTarget",void 0)},12716:(t,b,Z)=>{Z.d(b,{c:()=>U});var J=Z(12721),S=Z(12726),P=Z(12551),v=Z(12735),h=Z(12748),C=Z(12688),Y=Z(12573),g=Z(12621),I=Z(12681),r=Z(12778),M=Z(12608);function T(t,b){let Z=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const J=b.width,S=b.height;if(t instanceof Float32Array){let b=t.byteLength/t.BYTES_PER_ELEMENT;const Z=new Uint8Array(b);for(;--b>=0;){let J=t[b];J<0?J=0:J>1&&(J=1),Z[b]=255*J}t=Z}const P=document.createElement("canvas");P.width=J,P.height=S;const v=P.getContext("2d");if(!v)return null;const h=v.createImageData(J,S);if(h.data.set(t),v.putImageData(h,0,0),Z){const t=document.createElement("canvas");t.width=J,t.height=S;const b=t.getContext("2d");return b?(b.translate(0,S),b.scale(1,-1),b.drawImage(P,0,0),t.toDataURL("image/png")):null}return P.toDataURL("image/png")}function a(t){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const J=t.getInternalTexture();if(!J)return null;const S=t._readPixelsSync(b,Z);return S?T(S,t.getSize(),J.invertY):null}async function k(t){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const J=t.getInternalTexture();if(!J)return null;const S=await t.readPixels(b,Z);return S?T(S,t.getSize(),J.invertY):null}var u=Z(12781),l=Z(12760);class U extends h.d{static _CreateVideoTexture(t,b,Z){arguments.length>5&&void 0!==arguments[5]||U.TRILINEAR_SAMPLINGMODE;throw(0,Y.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(t){this._isBlocking=t}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(t,b,Z,J){let S,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:U.TRILINEAR_SAMPLINGMODE,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,Y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,I=arguments.length>8&&void 0!==arguments[8]&&arguments[8],r=arguments.length>9?arguments[9]:void 0,M=arguments.length>10?arguments[10]:void 0,T=arguments.length>11?arguments[11]:void 0,a=arguments.length>12?arguments[12]:void 0,k=arguments.length>13?arguments[13]:void 0;super(b),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new P.d,this._isBlocking=!0,this.name=t||"",this.url=t;let l=!1,E=null,c=!0;"object"===typeof Z&&null!==Z?(S=Z.noMipmap??!1,J=Z.invertY??!u.e,v=Z.samplingMode??U.TRILINEAR_SAMPLINGMODE,h=Z.R??null,C=Z.onError??null,Y=Z.buffer??null,I=Z.deleteBuffer??!1,r=Z.format,M=Z.mimeType,T=Z.loaderOptions,a=Z.creationFlags,l=Z.useSRGBBuffer??!1,E=Z.internalTexture??null,c=Z.gammaSpace??c,k=Z.forcedExtension??k):S=!!Z,this._gammaSpace=c,this._noMipmap=S,this._invertY=void 0===J?!u.e:J,this._initialSamplingMode=v,this._buffer=Y,this._deleteBuffer=I,this._mimeType=M,this._loaderOptions=T,this._creationFlags=a,this._useSRGBBuffer=l,this._forcedExtension=k,void 0!==r&&(this._format=r);const H=this.et(),o=this._getEngine();if(!o)return;o.onBeforeTextureInitObservable.notifyObservers(this);const O=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),h&&h(),!this.isBlocking&&H&&H.resetCachedMaterial()},p=(t,b)=>{this._loadingError=!0,this._errorObject={message:t,exception:b},C&&C(t,b),U.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!E)return this._delayedOnLoad=O,void(this._delayedOnError=p);if(this._texture=E??this._getFromCache(this.url,S,v,this._invertY,l,this.isCube),this._texture)if(this._texture.isReady)g.c.SetImmediate((()=>O()));else{const t=this._texture.onLoadedObservable.add(O);this._texture.onErrorObservable.add((b=>{var Z;p(b.message,b.exception),null===(Z=this._texture)||void 0===Z||Z.onLoadedObservable.remove(t)}))}else if(H&&H.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=O,this._delayedOnError=p;else{try{this._texture=o.createTexture(this.url,S,this._invertY,H,v,O,p,this._buffer,void 0,this._format,this._forcedExtension,M,T,a,l)}catch(e){throw p("error loading",e),e}I&&(this._buffer=null)}}updateURL(t){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,Z=arguments.length>2?arguments[2]:void 0,J=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.et().markAllMaterialsAsDirty(1,(t=>t.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=t),this.url=t,this._buffer=b,this._forcedExtension=J,this.delayLoadState=4,Z&&(this._delayedOnLoad=Z),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const t=this.et();t&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?g.c.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=t.getEngine().createTexture(this.url,this._noMipmap,this._invertY,t,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(t,b,Z,J){t*=this._cachedUScale,b*=this._cachedVScale,t-=this.uRotationCenter*this._cachedUScale,b-=this.vRotationCenter*this._cachedVScale,Z-=this.wRotationCenter,v.JZ.TransformCoordinatesFromFloatsToRef(t,b,Z,this._rowGenerationMatrix,J),J.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,J.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,J.z+=this.wRotationCenter}getTextureMatrix(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*t===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*t,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=v.Matrix.Zero(),this._rowGenerationMatrix=new v.Matrix,this._t0=v.JZ.Zero(),this._t1=v.JZ.Zero(),this._t2=v.JZ.Zero()),v.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(v.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,v.TmpVectors.Matrix[0]),v.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,v.TmpVectors.Matrix[1]),v.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,v.TmpVectors.Matrix[2]),v.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,v.TmpVectors.Matrix[3]),v.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(v.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.XI(this._t0),this._t2.XI(this._t0),v.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const b=this.et();if(!b)return this._cachedTextureMatrix;const Z=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&Z!==this._cachedIdentity3x2&&b.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const t=this.et();if(!t)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==U.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===t.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=v.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=v.Matrix.Zero());const b=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case U.PLANAR_MODE:v.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case U.PROJECTION_MODE:{v.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const b=t.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=b.updateFlag,b.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:v.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return b&&t.markAllMaterialsAsDirty(1,(t=>t.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const t={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,R:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return l.d.Clone((()=>new U(this._texture?this._texture.url:null,this.et(),t)),this)}serialize(){var t;const b=this.name;U.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const Z=super.serialize(U._SerializeInternalTextureUniqueId);if(!Z)return null;if(U.SerializeBuffers||U.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))Z.base64String=this._buffer,Z.name=Z.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const t=this.mimeType||"image/png";Z.base64String=`data:${t};base64,${(0,M.f)(this._buffer)}`}else(U.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(Z.base64String=!this._engine||this._engine._features.supportSyncTextureRead?a(this):k(this));var J;(Z.invertY=this._invertY,Z.samplingMode=this.samplingMode,Z._creationFlags=this._creationFlags,Z._useSRGBBuffer=this._useSRGBBuffer,U._SerializeInternalTextureUniqueId)&&(Z.internalTextureUniqueId=null===(J=this._texture)||void 0===J?void 0:J.uniqueId);return Z.internalTextureLabel=null===(t=this._texture)||void 0===t?void 0:t.label,Z.noMipmap=this._noMipmap,this.name=b,Z}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(t,b,Z){if(t.customType){const J=I.d.Instantiate(t.customType).Parse(t,b,Z);return t.samplingMode&&J.updateSamplingMode&&J._samplingMode&&J._samplingMode!==t.samplingMode&&J.updateSamplingMode(t.samplingMode),J}if(t.isCube&&!t.isRenderTarget)return U._CubeTextureParser(t,b,Z);const J=void 0!==t.internalTextureUniqueId;if(!t.name&&!t.isRenderTarget&&!J)return null;let S;if(J){const Z=b.getEngine().getLoadedTexturesCache();for(const b of Z)if(b.uniqueId===t.internalTextureUniqueId){S=b;break}}const P=b=>{if(b&&b._texture&&(b._texture._cachedWrapU=null,b._texture._cachedWrapV=null,b._texture._cachedWrapR=null),t.samplingMode){const Z=t.samplingMode;b&&b.samplingMode!==Z&&b.updateSamplingMode(Z)}if(b&&t.animations)for(let Z=0;Z<t.animations.length;Z++){const J=t.animations[Z],S=(0,C.d)("BABYLON.Animation");S&&b.animations.push(S.Parse(J))}b&&b._texture&&(J&&!S&&b._texture._setUniqueId(t.internalTextureUniqueId),b._texture.label=t.internalTextureLabel)};return l.d.Parse((()=>{let J=!0;if(t.noMipmap&&(J=!1),t.mirrorPlane){const Z=U._CreateMirror(t.name,t.renderTargetSize,b,J);return Z._waitingRenderList=t.renderList,Z.mirrorPlane=r.c.CZ(t.mirrorPlane),P(Z),Z}if(t.isRenderTarget){let Z=null;if(t.isCube){if(b.reflectionProbes)for(let J=0;J<b.reflectionProbes.length;J++){const Z=b.reflectionProbes[J];if(Z.name===t.name)return Z.cubeTexture}}else Z=U._CreateRenderTargetTexture(t.name,t.renderTargetSize,b,J,t._creationFlags??0),Z._waitingRenderList=t.renderList;return P(Z),Z}if(t.isVideo){const S=U._CreateVideoTexture(Z+(t.url||t.name),Z+(t.src||t.url),b,J,t.invertY,t.samplingMode,t.settings||{});return P(S),S}{let v;if(t.base64String&&!S)v=U.CreateFromBase64String(t.base64String,t.base64String,b,!J,t.invertY,t.samplingMode,(()=>{P(v)}),t._creationFlags??0,t._useSRGBBuffer??!1),v.name=t.name;else{let h;h=t.name&&(t.name.indexOf("://")>0||t.name.startsWith("data:"))?t.name:Z+t.name,t.url&&(t.url.startsWith("data:")||U.UseSerializedUrlIfAny)&&(h=t.url);const C={noMipmap:!J,invertY:t.invertY,samplingMode:t.samplingMode,R:()=>{P(v)},internalTexture:S};v=new U(h,b,C)}return v}}),t,b)}static CreateFromBase64String(t,b,Z,J,S){let P=arguments.length>5&&void 0!==arguments[5]?arguments[5]:U.TRILINEAR_SAMPLINGMODE;return new U("data:"+b,Z,J,S,P,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,t,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(t,b,Z){let J=arguments.length>3&&void 0!==arguments[3]&&arguments[3],S=arguments.length>4?arguments[4]:void 0,P=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],v=arguments.length>6&&void 0!==arguments[6]?arguments[6]:U.TRILINEAR_SAMPLINGMODE,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,Y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,g=arguments.length>10?arguments[10]:void 0,I=arguments.length>11?arguments[11]:void 0;return"data:"!==t.substring(0,5)&&(t="data:"+t),new U(t,Z,S,P,v,h,C,b,J,Y,void 0,void 0,g,I)}}U.SerializeBuffers=!0,U.ForceSerializeBuffers=!1,U.OnTextureLoadErrorObservable=new P.d,U._SerializeInternalTextureUniqueId=!1,U._CubeTextureParser=(t,b,Z)=>{throw(0,Y.b)("CubeTexture")},U._CreateMirror=(t,b,Z,J)=>{throw(0,Y.b)("MirrorTexture")},U._CreateRenderTargetTexture=(t,b,Z,J,S)=>{throw(0,Y.b)("RenderTargetTexture")},U.NEAREST_SAMPLINGMODE=1,U.NEAREST_NEAREST_MIPLINEAR=8,U.BILINEAR_SAMPLINGMODE=2,U.LINEAR_LINEAR_MIPNEAREST=11,U.TRILINEAR_SAMPLINGMODE=3,U.LINEAR_LINEAR_MIPLINEAR=3,U.NEAREST_NEAREST_MIPNEAREST=4,U.NEAREST_LINEAR_MIPNEAREST=5,U.NEAREST_LINEAR_MIPLINEAR=6,U.NEAREST_LINEAR=7,U.NEAREST_NEAREST=1,U.LINEAR_NEAREST_MIPNEAREST=9,U.LINEAR_NEAREST_MIPLINEAR=10,U.LINEAR_LINEAR=2,U.LINEAR_NEAREST=12,U.EXPLICIT_MODE=0,U.SPHERICAL_MODE=1,U.PLANAR_MODE=2,U.CUBIC_MODE=3,U.PROJECTION_MODE=4,U.SKYBOX_MODE=5,U.INVCUBIC_MODE=6,U.EQUIRECTANGULAR_MODE=7,U.FIXED_EQUIRECTANGULAR_MODE=8,U.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,U.CLAMP_ADDRESSMODE=0,U.WRAP_ADDRESSMODE=1,U.MIRROR_ADDRESSMODE=2,U.UseSerializedUrlIfAny=!1,(0,J.e)([(0,S.N)()],U.prototype,"url",void 0),(0,J.e)([(0,S.N)()],U.prototype,"uOffset",void 0),(0,J.e)([(0,S.N)()],U.prototype,"vOffset",void 0),(0,J.e)([(0,S.N)()],U.prototype,"uScale",void 0),(0,J.e)([(0,S.N)()],U.prototype,"vScale",void 0),(0,J.e)([(0,S.N)()],U.prototype,"uAng",void 0),(0,J.e)([(0,S.N)()],U.prototype,"vAng",void 0),(0,J.e)([(0,S.N)()],U.prototype,"wAng",void 0),(0,J.e)([(0,S.N)()],U.prototype,"uRotationCenter",void 0),(0,J.e)([(0,S.N)()],U.prototype,"vRotationCenter",void 0),(0,J.e)([(0,S.N)()],U.prototype,"wRotationCenter",void 0),(0,J.e)([(0,S.N)()],U.prototype,"homogeneousRotationInUVTransform",void 0),(0,J.e)([(0,S.N)()],U.prototype,"isBlocking",null),(0,C.f)("BABYLON.Texture",U),l.d._TextureParser=U.Parse},12778:(t,b,Z)=>{Z.d(b,{c:()=>S});var J=Z(12735);class S{constructor(t,b,Z,S){this.normal=new J.JZ(t,b,Z),this.d=S}jb(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new S(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let t=this.normal.getHashCode();return t=397*t^this.d,t}normalize(){const t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let b=0;return 0!==t&&(b=1/t),this.normal.x*=b,this.normal.y*=b,this.normal.z*=b,this.d*=b,this}transform(t){const b=S._TmpMatrix;t.invertToRef(b);const Z=b.m,J=this.normal.x,P=this.normal.y,v=this.normal.z,h=this.d,C=J*Z[0]+P*Z[1]+v*Z[2]+h*Z[3],Y=J*Z[4]+P*Z[5]+v*Z[6]+h*Z[7],g=J*Z[8]+P*Z[9]+v*Z[10]+h*Z[11],I=J*Z[12]+P*Z[13]+v*Z[14]+h*Z[15];return new S(C,Y,g,I)}dotCoordinate(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d}copyFromPoints(t,b,Z){const J=b.x-t.x,S=b.y-t.y,P=b.z-t.z,v=Z.x-t.x,h=Z.y-t.y,C=Z.z-t.z,Y=S*C-P*h,g=P*v-J*C,I=J*h-S*v,r=Math.sqrt(Y*Y+g*g+I*I);let M;return M=0!==r?1/r:0,this.normal.x=Y*M,this.normal.y=g*M,this.normal.z=I*M,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this}isFrontFacingTo(t,b){return J.JZ.Dot(this.normal,t)<=b}signedDistanceTo(t){return J.JZ.Dot(t,this.normal)+this.d}static CZ(t){return new S(t[0],t[1],t[2],t[3])}static FromPoints(t,b,Z){const J=new S(0,0,0,0);return J.copyFromPoints(t,b,Z),J}static FromPositionAndNormal(t,b){const Z=new S(0,0,0,0);return this.FromPositionAndNormalToRef(t,b,Z)}static FromPositionAndNormalToRef(t,b,Z){return Z.normal.S(b),Z.normal.normalize(),Z.d=-t.dot(Z.normal),Z}static SignedDistanceToPlaneFromPositionAndNormal(t,b,Z){const S=-(b.x*t.x+b.y*t.y+b.z*t.z);return J.JZ.Dot(Z,b)+S}}S._TmpMatrix=J.Matrix.Identity()},12757:(t,b,Z)=>{Z.d(b,{d:()=>J});class J{constructor(t,b){this.width=t,this.height=b}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let t=0|this.width;return t=397*t^this.height,t}S(t){this.width=t.width,this.height=t.height}Ab(t,b){return this.width=t,this.height=b,this}set(t,b){return this.Ab(t,b)}multiplyByFloats(t,b){return new J(this.width*t,this.height*b)}clone(){return new J(this.width,this.height)}equals(t){return!!t&&(this.width===t.width&&this.height===t.height)}get surface(){return this.width*this.height}static Zero(){return new J(0,0)}add(t){return new J(this.width+t.width,this.height+t.height)}SZ(t){return new J(this.width-t.width,this.height-t.height)}scale(t){return new J(this.width*t,this.height*t)}static Lerp(t,b,Z){const S=t.width+(b.width-t.width)*Z,P=t.height+(b.height-t.height)*Z;return new J(S,P)}}},12729:(t,b,Z)=>{Z.d(b,{d:()=>P,e:()=>v});const J={},S={};function P(t){const b=t.getClassName();return S[b]||(S[b]={}),S[b]}function v(t){const b=t.getClassName();if(J[b])return J[b];J[b]={};const Z=J[b];let P=t,v=b;for(;v;){const t=S[v];for(const S in t)Z[S]=t[S];let b,J=!1;do{if(b=Object.getPrototypeOf(P),!b.getClassName){J=!0;break}if(b.getClassName()!==v)break;P=b}while(b);if(J)break;v=b.getClassName(),P=b}return Z}},12726:(t,b,Z)=>{Z.d(b,{C:()=>h,G:()=>g,J:()=>I,N:()=>v,b:()=>P,e:()=>l,h:()=>M,k:()=>C,n:()=>T,p:()=>Y,s:()=>a,u:()=>u,v:()=>r,y:()=>k});var J=Z(12729);function S(t,b){return(Z,S)=>{const P=(0,J.d)(Z);P[S]||(P[S]={type:t,sourceName:b})}}function P(t){return function(t){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(Z,J)=>{const S=b||"_"+J;Object.defineProperty(Z,J,{get:function(){return this[S]},set:function(b){var J;"function"===typeof(null===(J=this[S])||void 0===J?void 0:J.equals)&&this[S].equals(b)||this[S]!==b&&(this[S]=b,Z[t].apply(this))},enumerable:!0,configurable:!0})}}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function v(t){return S(0,t)}function h(t){return S(1,t)}function C(t){return S(2,t)}function Y(t){return S(3,t)}function g(t){return S(4,t)}function I(t){return S(5,t)}function r(t){return S(6,t)}function M(t){return S(7,t)}function T(t){return S(8,t)}function a(t){return S(9,t)}function k(t){return S(10,t)}function u(t){return S(12,t)}function l(t,b,Z,J){const S=Z.value;Z.value=function(){let Z=S;if("undefined"!==typeof _native&&_native[b]){const t=_native[b];Z=J?function(){return J(...arguments)?t(...arguments):S(...arguments)}:t}return t[b]=Z,Z(...arguments)}}l.filter=function(t){return(b,Z,J)=>l(b,Z,J,t)}},12760:(t,b,Z)=>{Z.d(b,{d:()=>Y});var J=Z(12573),S=Z(12768),P=Z(12775),v=Z(12735),h=Z(12729);const C=function(t,b,Z){let J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const P=t();S.b&&S.b.HasTags(b)&&S.b.AddTagsTo(P,S.b.GetTags(b,!0));const v=(0,h.e)(P),C={};for(const S in v){const t=v[S],h=b[S],g=t.type;if(void 0!==h&&null!==h&&("uniqueId"!==S||Y.AllowLoadingUniqueId))switch(g){case 0:case 6:case 9:case 11:P[S]=h;break;case 1:J.cloneTexturesOnlyOnce&&C[h.uniqueId]?P[S]=C[h.uniqueId]:(P[S]=Z||h.isRenderTarget?h:h.clone(),C[h.uniqueId]=P[S]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:P[S]=Z?h:h.clone()}}return P};class Y{static AppendSerializedAnimations(t,b){if(t.animations){b.animations=[];for(let Z=0;Z<t.animations.length;Z++){const J=t.animations[Z];b.animations.push(J.serialize())}}}static Serialize(t,b){b||(b={}),S.b&&(b.tags=S.b.GetTags(t));const Z=(0,h.e)(t);for(const J in Z){const S=Z[J],P=S.sourceName||J,v=S.type,h=t[J];if(void 0!==h&&null!==h&&("uniqueId"!==J||Y.AllowLoadingUniqueId))switch(v){case 0:b[P]=h;break;case 1:case 3:case 7:case 9:b[P]=h.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:b[P]=h.jb();break;case 6:case 11:b[P]=h.id}}return b}static ParseProperties(t,b,Z,J){J||(J="");const S=(0,h.e)(b);for(const h in S){const C=S[h],g=t[C.sourceName||h],I=C.type;if(void 0!==g&&null!==g&&("uniqueId"!==h||Y.AllowLoadingUniqueId)){const t=b;switch(I){case 0:t[h]=g;break;case 1:Z&&(t[h]=Y._TextureParser(g,Z,J));break;case 2:t[h]=P.hZ.CZ(g);break;case 3:t[h]=Y._FresnelParametersParser(g);break;case 4:t[h]=v.Vector2.CZ(g);break;case 5:t[h]=v.JZ.CZ(g);break;case 6:Z&&(t[h]=Z.getLastMeshById(g));break;case 7:t[h]=Y._ColorCurvesParser(g);break;case 8:t[h]=P.Fb.CZ(g);break;case 9:t[h]=Y._ImageProcessingConfigurationParser(g);break;case 10:t[h]=v.Quaternion.CZ(g);break;case 11:Z&&(t[h]=Z.getCameraById(g));break;case 12:t[h]=v.Matrix.CZ(g)}}}}static Parse(t,b,Z){let J=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const P=t();return S.b&&S.b.AddTagsTo(P,b.tags),Y.ParseProperties(b,P,Z,J),P}static Clone(t,b){return C(t,b,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(t,b){return C(t,b,!0)}}Y.AllowLoadingUniqueId=!1,Y._ImageProcessingConfigurationParser=t=>{throw(0,J.b)("ImageProcessingConfiguration")},Y._FresnelParametersParser=t=>{throw(0,J.b)("FresnelParameters")},Y._ColorCurvesParser=t=>{throw(0,J.b)("ColorCurves")},Y._TextureParser=(t,b,Z)=>{throw(0,J.b)("Texture")}},12768:(t,b,Z)=>{Z.d(b,{b:()=>S});class J{static Eval(t,b){return"true"===(t=t.match(/\([^()]*\)/g)?t.replace(/\([^()]*\)/g,(t=>(t=t.slice(1,t.length-1),J._HandleParenthesisContent(t,b)))):J._HandleParenthesisContent(t,b))||"false"!==t&&J.Eval(t,b)}static _HandleParenthesisContent(t,b){let Z;b=b||(t=>"true"===t);const S=t.split("||");for(const P in S)if(Object.prototype.hasOwnProperty.call(S,P)){let t=J._SimplifyNegation(S[P].trim());const v=t.split("&&");if(v.length>1)for(let S=0;S<v.length;++S){const P=J._SimplifyNegation(v[S].trim());if(Z="true"!==P&&"false"!==P?"!"===P[0]?!b(P.substring(1)):b(P):"true"===P,!Z){t="false";break}}if(Z||"true"===t){Z=!0;break}Z="true"!==t&&"false"!==t?"!"===t[0]?!b(t.substring(1)):b(t):"true"===t}return Z?"true":"false"}static _SimplifyNegation(t){return"!true"===(t=(t=t.replace(/^[\s!]+/,(t=>(t=t.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?t="false":"!false"===t&&(t="true"),t}}class S{static EnableFor(t){t._tags=t._tags||{},t.hasTags=()=>S.HasTags(t),t.addTags=b=>S.AddTagsTo(t,b),t.removeTags=b=>S.RemoveTagsFrom(t,b),t.matchesTagsQuery=b=>S.MatchesQuery(t,b)}static DisableFor(t){delete t._tags,delete t.hasTags,delete t.addTags,delete t.removeTags,delete t.matchesTagsQuery}static HasTags(t){if(!t._tags)return!1;const b=t._tags;for(const Z in b)if(Object.prototype.hasOwnProperty.call(b,Z))return!0;return!1}static GetTags(t){let b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t._tags)return null;if(b){const b=[];for(const Z in t._tags)Object.prototype.hasOwnProperty.call(t._tags,Z)&&!0===t._tags[Z]&&b.push(Z);return b.join(" ")}return t._tags}static AddTagsTo(t,b){if(!b)return;if("string"!==typeof b)return;const Z=b.split(" ");for(const J of Z)S._AddTagTo(t,J)}static _AddTagTo(t,b){""!==(b=b.trim())&&"true"!==b&&"false"!==b&&(b.match(/[\s]/)||b.match(/^([!]|([|]|[&]){2})/)||(S.EnableFor(t),t._tags[b]=!0))}static RemoveTagsFrom(t,b){if(!S.HasTags(t))return;const Z=b.split(" ");for(const J in Z)S._RemoveTagFrom(t,Z[J])}static _RemoveTagFrom(t,b){delete t._tags[b]}static MatchesQuery(t,b){return void 0===b||(""===b?S.HasTags(t):J.Eval(b,(b=>S.HasTags(t)&&t._tags[b])))}}},12721:(t,b,Z)=>{Z.d(b,{e:()=>J});function J(t,b,Z,J){var S,P=arguments.length,v=P<3?b:null===J?J=Object.getOwnPropertyDescriptor(b,Z):J;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)v=Reflect.decorate(t,b,Z,J);else for(var h=t.length-1;h>=0;h--)(S=t[h])&&(v=(P<3?S(v):P>3?S(b,Z,v):S(b,Z))||v);return P>3&&v&&Object.defineProperty(b,Z,v),v}Object.create;Object.create}}]);