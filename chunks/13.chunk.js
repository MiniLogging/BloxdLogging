"use strict";(self.h66iwo8dvgq=self.h66iwo8dvgq||[]).push([[13],{11895:(b,X,P)=>{P.d(X,{c:()=>Q});let Q=!1},11846:(b,X,P)=>{P.d(X,{e:()=>e});var Q=P(11822),S=P(11825),d=P(11694),N=P(11834),a=P(11732),u=P(11804),w=(P(11738),P(11855));class f{get wrapU(){return this._wrapU}set wrapU(b){this._wrapU=b}get wrapV(){return this._wrapV}set wrapV(b){this._wrapV=b}get coordinatesMode(){return 0}get isCube(){return!!this._texture&&this._texture.isCube}set isCube(b){this._texture&&(this._texture.isCube=b)}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(b){this._texture&&(this._texture.is3D=b)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(b){this._texture&&(this._texture.is2DArray=b)}getClassName(){return"ThinTexture"}static _IsRenderTargetWrapper(b){return void 0!==(null===b||void 0===b?void 0:b.shareDepth)}constructor(b){this._wrapU=1,this._wrapV=1,this.wrapR=1,this.anisotropicFilteringLevel=4,this.delayLoadState=0,this._texture=null,this._engine=null,this._cachedSize=w.d.Zero(),this._cachedBaseSize=w.d.Zero(),this._initialSamplingMode=2,this._texture=f._IsRenderTargetWrapper(b)?b.texture:b,this._texture&&(this._engine=this._texture.getEngine(),this.wrapU=this._texture._cachedWrapU??this.wrapU,this.wrapV=this._texture._cachedWrapV??this.wrapV,this.wrapR=this._texture._cachedWrapR??this.wrapR)}isReady(){return 4===this.delayLoadState?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady}delayLoad(){}getInternalTexture(){return this._texture}getSize(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize}getBaseSize(){return this.isReady()&&this._texture?this._texture._size?(this._cachedBaseSize.width=this._texture._size,this._cachedBaseSize.height=this._texture._size,this._cachedBaseSize):(this._cachedBaseSize.width=this._texture.baseWidth,this._cachedBaseSize.height=this._texture.baseHeight,this._cachedBaseSize):(this._cachedBaseSize.width=0,this._cachedBaseSize.height=0,this._cachedBaseSize)}get samplingMode(){return this._texture?this._texture.samplingMode:this._initialSamplingMode}updateSamplingMode(b){this._texture&&this._engine&&this._engine.updateTextureSamplingMode(b,this._texture,this._texture.generateMipMaps)}releaseInternalTexture(){this._texture&&(this._texture.dispose(),this._texture=null)}dispose(){this._texture&&(this.releaseInternalTexture(),this._engine=null)}}var O=P(11862);class e extends f{set Ad(b){this._hasAlpha!==b&&(this._hasAlpha=b,this._scene&&this._scene.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))))}get Ad(){return this._hasAlpha}set getAlphaFromRGB(b){this._getAlphaFromRGB!==b&&(this._getAlphaFromRGB=b,this._scene&&this._scene.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))))}get getAlphaFromRGB(){return this._getAlphaFromRGB}set coordinatesIndex(b){this._coordinatesIndex!==b&&(this._coordinatesIndex=b,this._scene&&this._scene.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))))}get coordinatesIndex(){return this._coordinatesIndex}set coordinatesMode(b){this._coordinatesMode!==b&&(this._coordinatesMode=b,this._scene&&this._scene.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))))}get coordinatesMode(){return this._coordinatesMode}get wrapU(){return this._wrapU}set wrapU(b){this._wrapU=b}get wrapV(){return this._wrapV}set wrapV(b){this._wrapV=b}get isCube(){return this._texture?this._texture.isCube:this._isCube}set isCube(b){this._texture?this._texture.isCube=b:this._isCube=b}get is3D(){return!!this._texture&&this._texture.is3D}set is3D(b){this._texture&&(this._texture.is3D=b)}get is2DArray(){return!!this._texture&&this._texture.is2DArray}set is2DArray(b){this._texture&&(this._texture.is2DArray=b)}get gammaSpace(){return this._texture?(null===this._texture._gammaSpace&&(this._texture._gammaSpace=this._gammaSpace),this._texture._gammaSpace&&!this._texture._useSRGBBuffer):this._gammaSpace}set gammaSpace(b){var X;if(this._texture){if(this._texture._gammaSpace===b)return;this._texture._gammaSpace=b}else{if(this._gammaSpace===b)return;this._gammaSpace=b}null===(X=this.Ab())||void 0===X||X.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this)))}get isRGBD(){return null!=this._texture&&this._texture._isRGBD}set isRGBD(b){var X;b!==this.isRGBD&&(this._texture&&(this._texture._isRGBD=b),null===(X=this.Ab())||void 0===X||X.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))))}get noMipmap(){return!1}get lodGenerationOffset(){return this._texture?this._texture._lodGenerationOffset:0}set lodGenerationOffset(b){this._texture&&(this._texture._lodGenerationOffset=b)}get lodGenerationScale(){return this._texture?this._texture._lodGenerationScale:0}set lodGenerationScale(b){this._texture&&(this._texture._lodGenerationScale=b)}get linearSpecularLOD(){return!!this._texture&&this._texture._linearSpecularLOD}set linearSpecularLOD(b){this._texture&&(this._texture._linearSpecularLOD=b)}get irradianceTexture(){return this._texture?this._texture._irradianceTexture:null}set irradianceTexture(b){this._texture&&(this._texture._irradianceTexture=b)}get uid(){return this._uid||(this._uid=(0,u.b)()),this._uid}toString(){return this.name}getClassName(){return"BaseTexture"}set onDispose(b){this._onDisposeObserver&&this.Nd.remove(this._onDisposeObserver),this._onDisposeObserver=this.Nd.add(b)}get isBlocking(){return!0}get loadingError(){return this._loadingError}get errorObject(){return this._errorObject}constructor(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(null),this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this._getAlphaFromRGB=!1,this.level=1,this._coordinatesIndex=0,this.optimizeUVAllocation=!0,this._coordinatesMode=0,this.wrapR=1,this.anisotropicFilteringLevel=e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this._isCube=!1,this._gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this._dominantDirection=null,this.isRenderTarget=!1,this._prefiltered=!1,this._forceSerialize=!1,this.animations=[],this.Nd=new d.d,this._onDisposeObserver=null,this._scene=null,this._uid=null,this._parentContainer=null,this._loadingError=!1,b?e._IsScene(b)?this._scene=b:this._engine=b:this._scene=a.e.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this),this._engine=this._scene.getEngine()),this._texture=X,this._uid=null}Ab(){return this._scene}_getEngine(){return this._engine}getTextureMatrix(){return N.Matrix.IdentityReadOnly}getReflectionTextureMatrix(){return N.Matrix.IdentityReadOnly}getRefractionTextureMatrix(){return this.getReflectionTextureMatrix()}isReadyOrNotBlocking(){return!this.isBlocking||this.isReady()||this.loadingError}scale(b){}get canRescale(){return!1}_getFromCache(b,X,P,Q,S,d){const N=this._getEngine();if(!N)return null;const a=N._getUseSRGBBuffer(!!S,X),u=N.getLoadedTexturesCache();for(let w=0;w<u.length;w++){const N=u[w];if((void 0===S||a===N._useSRGBBuffer)&&(void 0===Q||Q===N.invertY)&&N.url===b&&N.generateMipMaps===!X&&(!P||P===N.samplingMode)&&(void 0===d||d===N.isCube))return N.incrementReferences(),N}return null}_rebuild(){}clone(){return null}get textureType(){return this._texture&&void 0!==this._texture.type?this._texture.type:0}get textureFormat(){return this._texture&&void 0!==this._texture.format?this._texture.format:5}_markAllSubMeshesAsTexturesDirty(){const b=this.Ab();b&&b.markAllMaterialsAsDirty(1)}readPixels(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Number.MAX_VALUE,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Number.MAX_VALUE;if(!this._texture)return null;const w=this._getEngine();if(!w)return null;const f=this.getSize();let O=f.width,e=f.height;0!==X&&(O/=Math.pow(2,X),e/=Math.pow(2,X),O=Math.round(O),e=Math.round(e)),a=Math.min(O,a),u=Math.min(e,u);try{return this._texture.isCube?w._readTexturePixels(this._texture,a,u,b,X,P,Q,S,d,N):w._readTexturePixels(this._texture,a,u,-1,X,P,Q,S,d,N)}catch(Y){return null}}_readPixelsSync(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,Q=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],S=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!this._texture)return null;const d=this.getSize();let N=d.width,a=d.height;const u=this._getEngine();if(!u)return null;0!=X&&(N/=Math.pow(2,X),a/=Math.pow(2,X),N=Math.round(N),a=Math.round(a));try{return this._texture.isCube?u._readTexturePixelsSync(this._texture,N,a,b,X,P,Q,S):u._readTexturePixelsSync(this._texture,N,a,-1,X,P,Q,S)}catch(w){return null}}get _lodTextureHigh(){return this._texture?this._texture._lodTextureHigh:null}get _lodTextureMid(){return this._texture?this._texture._lodTextureMid:null}get _lodTextureLow(){return this._texture?this._texture._lodTextureLow:null}dispose(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene.removePendingData(this);const b=this._scene.textures.indexOf(this);if(b>=0&&this._scene.textures.splice(b,1),this._scene.onTextureRemovedObservable.notifyObservers(this),this._scene=null,this._parentContainer){const b=this._parentContainer.textures.indexOf(this);b>-1&&this._parentContainer.textures.splice(b,1),this._parentContainer=null}}this.Nd.notifyObservers(this),this.Nd.clear(),this.metadata=null,super.dispose()}serialize(){let b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.name&&!b)return null;const X=O.b.Serialize(this);return O.b.AppendSerializedAnimations(this,X),X}static WhenAllReady(b,X){let P=b.length;if(0!==P)for(let Q=0;Q<b.length;Q++){const S=b[Q];if(S.isReady())0===--P&&X();else{const b=S.onLoadObservable;b?b.addOnce((()=>{0===--P&&X()})):0===--P&&X()}}else X()}static _IsScene(b){return"Scene"===b.getClassName()}}e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,(0,Q.b)([(0,S.E)()],e.prototype,"uniqueId",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"name",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"displayName",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"metadata",void 0),(0,Q.b)([(0,S.E)("Ad")],e.prototype,"_hasAlpha",void 0),(0,Q.b)([(0,S.E)("getAlphaFromRGB")],e.prototype,"_getAlphaFromRGB",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"level",void 0),(0,Q.b)([(0,S.E)("coordinatesIndex")],e.prototype,"_coordinatesIndex",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"optimizeUVAllocation",void 0),(0,Q.b)([(0,S.E)("coordinatesMode")],e.prototype,"_coordinatesMode",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"wrapU",null),(0,Q.b)([(0,S.E)()],e.prototype,"wrapV",null),(0,Q.b)([(0,S.E)()],e.prototype,"wrapR",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"anisotropicFilteringLevel",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"isCube",null),(0,Q.b)([(0,S.E)()],e.prototype,"is3D",null),(0,Q.b)([(0,S.E)()],e.prototype,"is2DArray",null),(0,Q.b)([(0,S.E)()],e.prototype,"gammaSpace",null),(0,Q.b)([(0,S.E)()],e.prototype,"invertZ",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"lodLevelInAlpha",void 0),(0,Q.b)([(0,S.E)()],e.prototype,"lodGenerationOffset",null),(0,Q.b)([(0,S.E)()],e.prototype,"lodGenerationScale",null),(0,Q.b)([(0,S.E)()],e.prototype,"linearSpecularLOD",null),(0,Q.b)([(0,S.v)()],e.prototype,"irradianceTexture",null),(0,Q.b)([(0,S.E)()],e.prototype,"isRenderTarget",void 0)},11814:(b,X,P)=>{P.d(X,{d:()=>n});var Q=P(11822),S=P(11825),d=P(11694),N=P(11834),a=P(11846),u=P(11802),w=P(11719),f=P(11755),O=P(11800),e=P(11887),Y=P(11745);function D(b,X){let P=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const Q=X.width,S=X.height;if(b instanceof Float32Array){let X=b.byteLength/b.BYTES_PER_ELEMENT;const P=new Uint8Array(X);for(;--X>=0;){let Q=b[X];Q<0?Q=0:Q>1&&(Q=1),P[X]=255*Q}b=P}const d=document.createElement("canvas");d.width=Q,d.height=S;const N=d.getContext("2d");if(!N)return null;const a=N.createImageData(Q,S);if(a.data.set(b),N.putImageData(a,0,0),P){const b=document.createElement("canvas");b.width=Q,b.height=S;const X=b.getContext("2d");return X?(X.translate(0,S),X.scale(1,-1),X.drawImage(d,0,0),b.toDataURL("image/png")):null}return d.toDataURL("image/png")}function E(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Q=b.getInternalTexture();if(!Q)return null;const S=b._readPixelsSync(X,P);return S?D(S,b.getSize(),Q.invertY):null}async function t(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const Q=b.getInternalTexture();if(!Q)return null;const S=await b.readPixels(X,P);return S?D(S,b.getSize(),Q.invertY):null}var B=P(11895),W=P(11862);class n extends a.e{static _CreateVideoTexture(b,X,P){arguments.length>5&&void 0!==arguments[5]||n.TRILINEAR_SAMPLINGMODE;throw(0,w.b)("VideoTexture")}get noMipmap(){return this._noMipmap}get mimeType(){return this._mimeType}set isBlocking(b){this._isBlocking=b}get isBlocking(){return this._isBlocking}get invertY(){return this._invertY}constructor(b,X,P,Q){let S,N=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.TRILINEAR_SAMPLINGMODE,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,w=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,O=arguments.length>8&&void 0!==arguments[8]&&arguments[8],e=arguments.length>9?arguments[9]:void 0,Y=arguments.length>10?arguments[10]:void 0,D=arguments.length>11?arguments[11]:void 0,E=arguments.length>12?arguments[12]:void 0,t=arguments.length>13?arguments[13]:void 0;super(X),this.url=null,this.uOffset=0,this.vOffset=0,this.uScale=1,this.vScale=1,this.uAng=0,this.vAng=0,this.wAng=0,this.uRotationCenter=.5,this.vRotationCenter=.5,this.wRotationCenter=.5,this.homogeneousRotationInUVTransform=!1,this.inspectableCustomProperties=null,this._noMipmap=!1,this._invertY=!1,this._rowGenerationMatrix=null,this._cachedTextureMatrix=null,this._projectionModeMatrix=null,this._t0=null,this._t1=null,this._t2=null,this._cachedUOffset=-1,this._cachedVOffset=-1,this._cachedUScale=0,this._cachedVScale=0,this._cachedUAng=-1,this._cachedVAng=-1,this._cachedWAng=-1,this._cachedReflectionProjectionMatrixId=-1,this._cachedURotationCenter=-1,this._cachedVRotationCenter=-1,this._cachedWRotationCenter=-1,this._cachedHomogeneousRotationInUVTransform=!1,this._cachedIdentity3x2=!0,this._cachedReflectionTextureMatrix=null,this._cachedReflectionUOffset=-1,this._cachedReflectionVOffset=-1,this._cachedReflectionUScale=0,this._cachedReflectionVScale=0,this._cachedReflectionCoordinatesMode=-1,this._buffer=null,this._deleteBuffer=!1,this._format=null,this._delayedOnLoad=null,this._delayedOnError=null,this.onLoadObservable=new d.d,this._isBlocking=!0,this.name=b||"",this.url=b;let W=!1,y=null,h=!0;"object"===typeof P&&null!==P?(S=P.noMipmap??!1,Q=P.invertY??!B.c,N=P.samplingMode??n.TRILINEAR_SAMPLINGMODE,a=P.I??null,u=P.onError??null,w=P.buffer??null,O=P.deleteBuffer??!1,e=P.format,Y=P.mimeType,D=P.loaderOptions,E=P.creationFlags,W=P.useSRGBBuffer??!1,y=P.internalTexture??null,h=P.gammaSpace??h,t=P.forcedExtension??t):S=!!P,this._gammaSpace=h,this._noMipmap=S,this._invertY=void 0===Q?!B.c:Q,this._initialSamplingMode=N,this._buffer=w,this._deleteBuffer=O,this._mimeType=Y,this._loaderOptions=D,this._creationFlags=E,this._useSRGBBuffer=W,this._forcedExtension=t,void 0!==e&&(this._format=e);const L=this.Ab(),Z=this._getEngine();if(!Z)return;Z.onBeforeTextureInitObservable.notifyObservers(this);const v=()=>{this._texture&&(this._texture._invertVScale&&(this.vScale*=-1,this.vOffset+=1),null!==this._texture._cachedWrapU&&(this.wrapU=this._texture._cachedWrapU,this._texture._cachedWrapU=null),null!==this._texture._cachedWrapV&&(this.wrapV=this._texture._cachedWrapV,this._texture._cachedWrapV=null),null!==this._texture._cachedWrapR&&(this.wrapR=this._texture._cachedWrapR,this._texture._cachedWrapR=null)),this.onLoadObservable.hasObservers()&&this.onLoadObservable.notifyObservers(this),a&&a(),!this.isBlocking&&L&&L.resetCachedMaterial()},A=(b,X)=>{this._loadingError=!0,this._errorObject={message:b,exception:X},u&&u(b,X),n.OnTextureLoadErrorObservable.notifyObservers(this)};if(!this.url&&!y)return this._delayedOnLoad=v,void(this._delayedOnError=A);if(this._texture=y??this._getFromCache(this.url,S,N,this._invertY,W,this.isCube),this._texture)if(this._texture.isReady)f.b.SetImmediate((()=>v()));else{const b=this._texture.onLoadedObservable.add(v);this._texture.onErrorObservable.add((X=>{var P;A(X.message,X.exception),null===(P=this._texture)||void 0===P||P.onLoadedObservable.remove(b)}))}else if(L&&L.useDelayedTextureLoading)this.delayLoadState=4,this._delayedOnLoad=v,this._delayedOnError=A;else{try{this._texture=Z.createTexture(this.url,S,this._invertY,L,N,v,A,this._buffer,void 0,this._format,this._forcedExtension,Y,D,E,W)}catch(o){throw A("error loading",o),o}O&&(this._buffer=null)}}updateURL(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,P=arguments.length>2?arguments[2]:void 0,Q=arguments.length>3?arguments[3]:void 0;this.url&&(this.releaseInternalTexture(),this.Ab().markAllMaterialsAsDirty(1,(b=>b.hasTexture(this)))),this.name&&!this.name.startsWith("data:")||(this.name=b),this.url=b,this._buffer=X,this._forcedExtension=Q,this.delayLoadState=4,P&&(this._delayedOnLoad=P),this.delayLoad()}delayLoad(){if(4!==this.delayLoadState)return;const b=this.Ab();b&&(this.delayLoadState=1,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY,this._useSRGBBuffer,this.isCube),this._texture?this._delayedOnLoad&&(this._texture.isReady?f.b.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=b.getEngine().createTexture(this.url,this._noMipmap,this._invertY,b,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format,this._forcedExtension,this._mimeType,this._loaderOptions,this._creationFlags,this._useSRGBBuffer),this._deleteBuffer&&(this._buffer=null)),this._delayedOnLoad=null,this._delayedOnError=null)}_prepareRowForTextureGeneration(b,X,P,Q){b*=this._cachedUScale,X*=this._cachedVScale,b-=this.uRotationCenter*this._cachedUScale,X-=this.vRotationCenter*this._cachedVScale,P-=this.wRotationCenter,N.tX.TransformCoordinatesFromFloatsToRef(b,X,P,this._rowGenerationMatrix,Q),Q.x+=this.uRotationCenter*this._cachedUScale+this._cachedUOffset,Q.y+=this.vRotationCenter*this._cachedVScale+this._cachedVOffset,Q.z+=this.wRotationCenter}getTextureMatrix(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale*b===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng&&this.uRotationCenter===this._cachedURotationCenter&&this.vRotationCenter===this._cachedVRotationCenter&&this.wRotationCenter===this._cachedWRotationCenter&&this.homogeneousRotationInUVTransform===this._cachedHomogeneousRotationInUVTransform)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale*b,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedURotationCenter=this.uRotationCenter,this._cachedVRotationCenter=this.vRotationCenter,this._cachedWRotationCenter=this.wRotationCenter,this._cachedHomogeneousRotationInUVTransform=this.homogeneousRotationInUVTransform,this._cachedTextureMatrix&&this._rowGenerationMatrix||(this._cachedTextureMatrix=N.Matrix.Zero(),this._rowGenerationMatrix=new N.Matrix,this._t0=N.tX.Zero(),this._t1=N.tX.Zero(),this._t2=N.tX.Zero()),N.Matrix.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this.homogeneousRotationInUVTransform?(N.Matrix.TranslationToRef(-this._cachedURotationCenter,-this._cachedVRotationCenter,-this._cachedWRotationCenter,N.TmpVectors.Matrix[0]),N.Matrix.TranslationToRef(this._cachedURotationCenter,this._cachedVRotationCenter,this._cachedWRotationCenter,N.TmpVectors.Matrix[1]),N.Matrix.ScalingToRef(this._cachedUScale,this._cachedVScale,0,N.TmpVectors.Matrix[2]),N.Matrix.TranslationToRef(this._cachedUOffset,this._cachedVOffset,0,N.TmpVectors.Matrix[3]),N.TmpVectors.Matrix[0].multiplyToRef(this._rowGenerationMatrix,this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[1],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[2],this._cachedTextureMatrix),this._cachedTextureMatrix.multiplyToRef(N.TmpVectors.Matrix[3],this._cachedTextureMatrix),this._cachedTextureMatrix.setRowFromFloats(2,this._cachedTextureMatrix.m[12],this._cachedTextureMatrix.m[13],this._cachedTextureMatrix.m[14],1)):(this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.fO(this._t0),this._t2.fO(this._t0),N.Matrix.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix));const X=this.Ab();if(!X)return this._cachedTextureMatrix;const P=this._cachedIdentity3x2;return this._cachedIdentity3x2=this._cachedTextureMatrix.isIdentityAs3x2(),this.optimizeUVAllocation&&P!==this._cachedIdentity3x2&&X.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))),this._cachedTextureMatrix}getReflectionTextureMatrix(){const b=this.Ab();if(!b)return this._cachedReflectionTextureMatrix;if(this.uOffset===this._cachedReflectionUOffset&&this.vOffset===this._cachedReflectionVOffset&&this.uScale===this._cachedReflectionUScale&&this.vScale===this._cachedReflectionVScale&&this.coordinatesMode===this._cachedReflectionCoordinatesMode){if(this.coordinatesMode!==n.PROJECTION_MODE)return this._cachedReflectionTextureMatrix;if(this._cachedReflectionProjectionMatrixId===b.getProjectionMatrix().updateFlag)return this._cachedReflectionTextureMatrix}this._cachedReflectionTextureMatrix||(this._cachedReflectionTextureMatrix=N.Matrix.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=N.Matrix.Zero());const X=this._cachedReflectionCoordinatesMode!==this.coordinatesMode;switch(this._cachedReflectionUOffset=this.uOffset,this._cachedReflectionVOffset=this.vOffset,this._cachedReflectionUScale=this.uScale,this._cachedReflectionVScale=this.vScale,this._cachedReflectionCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case n.PLANAR_MODE:N.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix),this._cachedReflectionTextureMatrix[0]=this.uScale,this._cachedReflectionTextureMatrix[5]=this.vScale,this._cachedReflectionTextureMatrix[12]=this.uOffset,this._cachedReflectionTextureMatrix[13]=this.vOffset;break;case n.PROJECTION_MODE:{N.Matrix.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);const X=b.getProjectionMatrix();this._cachedReflectionProjectionMatrixId=X.updateFlag,X.multiplyToRef(this._projectionModeMatrix,this._cachedReflectionTextureMatrix);break}default:N.Matrix.IdentityToRef(this._cachedReflectionTextureMatrix)}return X&&b.markAllMaterialsAsDirty(1,(b=>b.hasTexture(this))),this._cachedReflectionTextureMatrix}clone(){const b={noMipmap:this._noMipmap,invertY:this._invertY,samplingMode:this.samplingMode,I:void 0,onError:void 0,buffer:this._texture?this._texture._buffer:void 0,deleteBuffer:this._deleteBuffer,format:this.textureFormat,mimeType:this.mimeType,loaderOptions:this._loaderOptions,creationFlags:this._creationFlags,useSRGBBuffer:this._useSRGBBuffer};return W.b.Clone((()=>new n(this._texture?this._texture.url:null,this.Ab(),b)),this)}serialize(){var b;const X=this.name;n.SerializeBuffers||this.name.startsWith("data:")&&(this.name=""),this.name.startsWith("data:")&&this.url===this.name&&(this.url="");const P=super.serialize(n._SerializeInternalTextureUniqueId);if(!P)return null;if(n.SerializeBuffers||n.ForceSerializeBuffers)if("string"===typeof this._buffer&&this._buffer.startsWith("data:"))P.base64String=this._buffer,P.name=P.name.replace("data:","");else if(this.url&&this.url.startsWith("data:")&&this._buffer instanceof Uint8Array){const b=this.mimeType||"image/png";P.base64String=`data:${b};base64,${(0,Y.j)(this._buffer)}`}else(n.ForceSerializeBuffers||this.url&&this.url.startsWith("blob:")||this._forceSerialize)&&(P.base64String=!this._engine||this._engine._features.supportSyncTextureRead?E(this):t(this));var Q;(P.invertY=this._invertY,P.samplingMode=this.samplingMode,P._creationFlags=this._creationFlags,P._useSRGBBuffer=this._useSRGBBuffer,n._SerializeInternalTextureUniqueId)&&(P.internalTextureUniqueId=null===(Q=this._texture)||void 0===Q?void 0:Q.uniqueId);return P.internalTextureLabel=null===(b=this._texture)||void 0===b?void 0:b.label,P.noMipmap=this._noMipmap,this.name=X,P}getClassName(){return"Texture"}dispose(){super.dispose(),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null,this._buffer=null}static Parse(b,X,P){if(b.customType){const Q=O.b.Instantiate(b.customType).Parse(b,X,P);return b.samplingMode&&Q.updateSamplingMode&&Q._samplingMode&&Q._samplingMode!==b.samplingMode&&Q.updateSamplingMode(b.samplingMode),Q}if(b.isCube&&!b.isRenderTarget)return n._CubeTextureParser(b,X,P);const Q=void 0!==b.internalTextureUniqueId;if(!b.name&&!b.isRenderTarget&&!Q)return null;let S;if(Q){const P=X.getEngine().getLoadedTexturesCache();for(const X of P)if(X.uniqueId===b.internalTextureUniqueId){S=X;break}}const d=X=>{if(X&&X._texture&&(X._texture._cachedWrapU=null,X._texture._cachedWrapV=null,X._texture._cachedWrapR=null),b.samplingMode){const P=b.samplingMode;X&&X.samplingMode!==P&&X.updateSamplingMode(P)}if(X&&b.animations)for(let P=0;P<b.animations.length;P++){const Q=b.animations[P],S=(0,u.d)("BABYLON.Animation");S&&X.animations.push(S.Parse(Q))}X&&X._texture&&(Q&&!S&&X._texture._setUniqueId(b.internalTextureUniqueId),X._texture.label=b.internalTextureLabel)};return W.b.Parse((()=>{let Q=!0;if(b.noMipmap&&(Q=!1),b.mirrorPlane){const P=n._CreateMirror(b.name,b.renderTargetSize,X,Q);return P._waitingRenderList=b.renderList,P.mirrorPlane=e.c.hX(b.mirrorPlane),d(P),P}if(b.isRenderTarget){let P=null;if(b.isCube){if(X.reflectionProbes)for(let Q=0;Q<X.reflectionProbes.length;Q++){const P=X.reflectionProbes[Q];if(P.name===b.name)return P.cubeTexture}}else P=n._CreateRenderTargetTexture(b.name,b.renderTargetSize,X,Q,b._creationFlags??0),P._waitingRenderList=b.renderList;return d(P),P}if(b.isVideo){const S=n._CreateVideoTexture(P+(b.url||b.name),P+(b.src||b.url),X,Q,b.invertY,b.samplingMode,b.settings||{});return d(S),S}{let N;if(b.base64String&&!S)N=n.CreateFromBase64String(b.base64String,b.base64String,X,!Q,b.invertY,b.samplingMode,(()=>{d(N)}),b._creationFlags??0,b._useSRGBBuffer??!1),N.name=b.name;else{let a;a=b.name&&(b.name.indexOf("://")>0||b.name.startsWith("data:"))?b.name:P+b.name,b.url&&(b.url.startsWith("data:")||n.UseSerializedUrlIfAny)&&(a=b.url);const u={noMipmap:!Q,invertY:b.invertY,samplingMode:b.samplingMode,I:()=>{d(N)},internalTexture:S};N=new n(a,X,u)}return N}}),b,X)}static CreateFromBase64String(b,X,P,Q,S){let d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.TRILINEAR_SAMPLINGMODE;return new n("data:"+X,P,Q,S,d,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,b,!1,arguments.length>8&&void 0!==arguments[8]?arguments[8]:5,void 0,void 0,arguments.length>9?arguments[9]:void 0,arguments.length>10?arguments[10]:void 0)}static LoadFromDataString(b,X,P){let Q=arguments.length>3&&void 0!==arguments[3]&&arguments[3],S=arguments.length>4?arguments[4]:void 0,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],N=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n.TRILINEAR_SAMPLINGMODE,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,w=arguments.length>9&&void 0!==arguments[9]?arguments[9]:5,f=arguments.length>10?arguments[10]:void 0,O=arguments.length>11?arguments[11]:void 0;return"data:"!==b.substring(0,5)&&(b="data:"+b),new n(b,P,S,d,N,a,u,X,Q,w,void 0,void 0,f,O)}}n.SerializeBuffers=!0,n.ForceSerializeBuffers=!1,n.OnTextureLoadErrorObservable=new d.d,n._SerializeInternalTextureUniqueId=!1,n._CubeTextureParser=(b,X,P)=>{throw(0,w.b)("CubeTexture")},n._CreateMirror=(b,X,P,Q)=>{throw(0,w.b)("MirrorTexture")},n._CreateRenderTargetTexture=(b,X,P,Q,S)=>{throw(0,w.b)("RenderTargetTexture")},n.NEAREST_SAMPLINGMODE=1,n.NEAREST_NEAREST_MIPLINEAR=8,n.BILINEAR_SAMPLINGMODE=2,n.LINEAR_LINEAR_MIPNEAREST=11,n.TRILINEAR_SAMPLINGMODE=3,n.LINEAR_LINEAR_MIPLINEAR=3,n.NEAREST_NEAREST_MIPNEAREST=4,n.NEAREST_LINEAR_MIPNEAREST=5,n.NEAREST_LINEAR_MIPLINEAR=6,n.NEAREST_LINEAR=7,n.NEAREST_NEAREST=1,n.LINEAR_NEAREST_MIPNEAREST=9,n.LINEAR_NEAREST_MIPLINEAR=10,n.LINEAR_LINEAR=2,n.LINEAR_NEAREST=12,n.EXPLICIT_MODE=0,n.SPHERICAL_MODE=1,n.PLANAR_MODE=2,n.CUBIC_MODE=3,n.PROJECTION_MODE=4,n.SKYBOX_MODE=5,n.INVCUBIC_MODE=6,n.EQUIRECTANGULAR_MODE=7,n.FIXED_EQUIRECTANGULAR_MODE=8,n.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,n.CLAMP_ADDRESSMODE=0,n.WRAP_ADDRESSMODE=1,n.MIRROR_ADDRESSMODE=2,n.UseSerializedUrlIfAny=!1,(0,Q.b)([(0,S.E)()],n.prototype,"url",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"uOffset",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"vOffset",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"uScale",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"vScale",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"uAng",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"vAng",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"wAng",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"uRotationCenter",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"vRotationCenter",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"wRotationCenter",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"homogeneousRotationInUVTransform",void 0),(0,Q.b)([(0,S.E)()],n.prototype,"isBlocking",null),(0,u.h)("BABYLON.Texture",n),W.b._TextureParser=n.Parse},11887:(b,X,P)=>{P.d(X,{c:()=>S});var Q=P(11834);class S{constructor(b,X,P,S){this.normal=new Q.tX(b,X,P),this.d=S}Zd(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new S(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let b=this.normal.getHashCode();return b=397*b^this.d,b}normalize(){const b=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let X=0;return 0!==b&&(X=1/b),this.normal.x*=X,this.normal.y*=X,this.normal.z*=X,this.d*=X,this}transform(b){const X=S._TmpMatrix;b.invertToRef(X);const P=X.m,Q=this.normal.x,d=this.normal.y,N=this.normal.z,a=this.d,u=Q*P[0]+d*P[1]+N*P[2]+a*P[3],w=Q*P[4]+d*P[5]+N*P[6]+a*P[7],f=Q*P[8]+d*P[9]+N*P[10]+a*P[11],O=Q*P[12]+d*P[13]+N*P[14]+a*P[15];return new S(u,w,f,O)}dotCoordinate(b){return this.normal.x*b.x+this.normal.y*b.y+this.normal.z*b.z+this.d}copyFromPoints(b,X,P){const Q=X.x-b.x,S=X.y-b.y,d=X.z-b.z,N=P.x-b.x,a=P.y-b.y,u=P.z-b.z,w=S*u-d*a,f=d*N-Q*u,O=Q*a-S*N,e=Math.sqrt(w*w+f*f+O*O);let Y;return Y=0!==e?1/e:0,this.normal.x=w*Y,this.normal.y=f*Y,this.normal.z=O*Y,this.d=-(this.normal.x*b.x+this.normal.y*b.y+this.normal.z*b.z),this}isFrontFacingTo(b,X){return Q.tX.Dot(this.normal,b)<=X}signedDistanceTo(b){return Q.tX.Dot(b,this.normal)+this.d}static hX(b){return new S(b[0],b[1],b[2],b[3])}static FromPoints(b,X,P){const Q=new S(0,0,0,0);return Q.copyFromPoints(b,X,P),Q}static FromPositionAndNormal(b,X){const P=new S(0,0,0,0);return this.FromPositionAndNormalToRef(b,X,P)}static FromPositionAndNormalToRef(b,X,P){return P.normal.N(X),P.normal.normalize(),P.d=-b.dot(P.normal),P}static SignedDistanceToPlaneFromPositionAndNormal(b,X,P){const S=-(X.x*b.x+X.y*b.y+X.z*b.z);return Q.tX.Dot(P,X)+S}}S._TmpMatrix=Q.Matrix.Identity()},11855:(b,X,P)=>{P.d(X,{d:()=>Q});class Q{constructor(b,X){this.width=b,this.height=X}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let b=0|this.width;return b=397*b^this.height,b}N(b){this.width=b.width,this.height=b.height}sd(b,X){return this.width=b,this.height=X,this}set(b,X){return this.sd(b,X)}multiplyByFloats(b,X){return new Q(this.width*b,this.height*X)}clone(){return new Q(this.width,this.height)}equals(b){return!!b&&(this.width===b.width&&this.height===b.height)}get surface(){return this.width*this.height}static Zero(){return new Q(0,0)}add(b){return new Q(this.width+b.width,this.height+b.height)}BX(b){return new Q(this.width-b.width,this.height-b.height)}scale(b){return new Q(this.width*b,this.height*b)}static Lerp(b,X,P){const S=b.width+(X.width-b.width)*P,d=b.height+(X.height-b.height)*P;return new Q(S,d)}}},11828:(b,X,P)=>{P.d(X,{e:()=>d,g:()=>N});const Q={},S={};function d(b){const X=b.getClassName();return S[X]||(S[X]={}),S[X]}function N(b){const X=b.getClassName();if(Q[X])return Q[X];Q[X]={};const P=Q[X];let d=b,N=X;for(;N;){const b=S[N];for(const S in b)P[S]=b[S];let X,Q=!1;do{if(X=Object.getPrototypeOf(d),!X.getClassName){Q=!0;break}if(X.getClassName()!==N)break;d=X}while(X);if(Q)break;N=X.getClassName(),d=X}return P}},11825:(b,X,P)=>{P.d(X,{A:()=>O,E:()=>N,c:()=>d,e:()=>W,i:()=>Y,j:()=>u,k:()=>D,l:()=>w,n:()=>E,o:()=>B,p:()=>e,s:()=>t,v:()=>a,x:()=>f});var Q=P(11828);function S(b,X){return(P,S)=>{const d=(0,Q.e)(P);d[S]||(d[S]={type:b,sourceName:X})}}function d(b){return function(b){let X=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(P,Q)=>{const S=X||"_"+Q;Object.defineProperty(P,Q,{get:function(){return this[S]},set:function(X){var Q;"function"===typeof(null===(Q=this[S])||void 0===Q?void 0:Q.equals)&&this[S].equals(X)||this[S]!==X&&(this[S]=X,P[b].apply(this))},enumerable:!0,configurable:!0})}}(b,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}function N(b){return S(0,b)}function a(b){return S(1,b)}function u(b){return S(2,b)}function w(b){return S(3,b)}function f(b){return S(4,b)}function O(b){return S(5,b)}function e(b){return S(6,b)}function Y(b){return S(7,b)}function D(b){return S(8,b)}function E(b){return S(9,b)}function t(b){return S(10,b)}function B(b){return S(12,b)}function W(b,X,P,Q){const S=P.value;P.value=function(){let P=S;if("undefined"!==typeof _native&&_native[X]){const b=_native[X];P=Q?function(){return Q(...arguments)?b(...arguments):S(...arguments)}:b}return b[X]=P,P(...arguments)}}W.filter=function(b){return(X,P,Q)=>W(X,P,Q,b)}},11862:(b,X,P)=>{P.d(X,{b:()=>w});var Q=P(11719),S=P(11870),d=P(11878),N=P(11834),a=P(11828);const u=function(b,X,P){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const d=b();S.d&&S.d.HasTags(X)&&S.d.AddTagsTo(d,S.d.GetTags(X,!0));const N=(0,a.g)(d),u={};for(const S in N){const b=N[S],a=X[S],f=b.type;if(void 0!==a&&null!==a&&("uniqueId"!==S||w.AllowLoadingUniqueId))switch(f){case 0:case 6:case 9:case 11:d[S]=a;break;case 1:Q.cloneTexturesOnlyOnce&&u[a.uniqueId]?d[S]=u[a.uniqueId]:(d[S]=P||a.isRenderTarget?a:a.clone(),u[a.uniqueId]=d[S]);break;case 2:case 3:case 4:case 5:case 7:case 8:case 10:case 12:d[S]=P?a:a.clone()}}return d};class w{static AppendSerializedAnimations(b,X){if(b.animations){X.animations=[];for(let P=0;P<b.animations.length;P++){const Q=b.animations[P];X.animations.push(Q.serialize())}}}static Serialize(b,X){X||(X={}),S.d&&(X.tags=S.d.GetTags(b));const P=(0,a.g)(b);for(const Q in P){const S=P[Q],d=S.sourceName||Q,N=S.type,a=b[Q];if(void 0!==a&&null!==a&&("uniqueId"!==Q||w.AllowLoadingUniqueId))switch(N){case 0:X[d]=a;break;case 1:case 3:case 7:case 9:X[d]=a.serialize();break;case 2:case 4:case 5:case 8:case 10:case 12:X[d]=a.Zd();break;case 6:case 11:X[d]=a.id}}return X}static ParseProperties(b,X,P,Q){Q||(Q="");const S=(0,a.g)(X);for(const a in S){const u=S[a],f=b[u.sourceName||a],O=u.type;if(void 0!==f&&null!==f&&("uniqueId"!==a||w.AllowLoadingUniqueId)){const b=X;switch(O){case 0:b[a]=f;break;case 1:P&&(b[a]=w._TextureParser(f,P,Q));break;case 2:b[a]=d.yX.hX(f);break;case 3:b[a]=w._FresnelParametersParser(f);break;case 4:b[a]=N.Vector2.hX(f);break;case 5:b[a]=N.tX.hX(f);break;case 6:P&&(b[a]=P.getLastMeshById(f));break;case 7:b[a]=w._ColorCurvesParser(f);break;case 8:b[a]=d.Ba.hX(f);break;case 9:b[a]=w._ImageProcessingConfigurationParser(f);break;case 10:b[a]=N.Quaternion.hX(f);break;case 11:P&&(b[a]=P.getCameraById(f));break;case 12:b[a]=N.Matrix.hX(f)}}}}static Parse(b,X,P){let Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const d=b();return S.d&&S.d.AddTagsTo(d,X.tags),w.ParseProperties(X,d,P,Q),d}static Clone(b,X){return u(b,X,!1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}static Instanciate(b,X){return u(b,X,!0)}}w.AllowLoadingUniqueId=!1,w._ImageProcessingConfigurationParser=b=>{throw(0,Q.b)("ImageProcessingConfiguration")},w._FresnelParametersParser=b=>{throw(0,Q.b)("FresnelParameters")},w._ColorCurvesParser=b=>{throw(0,Q.b)("ColorCurves")},w._TextureParser=(b,X,P)=>{throw(0,Q.b)("Texture")}},11870:(b,X,P)=>{P.d(X,{d:()=>S});class Q{static Eval(b,X){return"true"===(b=b.match(/\([^()]*\)/g)?b.replace(/\([^()]*\)/g,(b=>(b=b.slice(1,b.length-1),Q._HandleParenthesisContent(b,X)))):Q._HandleParenthesisContent(b,X))||"false"!==b&&Q.Eval(b,X)}static _HandleParenthesisContent(b,X){let P;X=X||(b=>"true"===b);const S=b.split("||");for(const d in S)if(Object.prototype.hasOwnProperty.call(S,d)){let b=Q._SimplifyNegation(S[d].trim());const N=b.split("&&");if(N.length>1)for(let S=0;S<N.length;++S){const d=Q._SimplifyNegation(N[S].trim());if(P="true"!==d&&"false"!==d?"!"===d[0]?!X(d.substring(1)):X(d):"true"===d,!P){b="false";break}}if(P||"true"===b){P=!0;break}P="true"!==b&&"false"!==b?"!"===b[0]?!X(b.substring(1)):X(b):"true"===b}return P?"true":"false"}static _SimplifyNegation(b){return"!true"===(b=(b=b.replace(/^[\s!]+/,(b=>(b=b.replace(/[\s]/g,(()=>""))).length%2?"!":""))).trim())?b="false":"!false"===b&&(b="true"),b}}class S{static EnableFor(b){b._tags=b._tags||{},b.hasTags=()=>S.HasTags(b),b.addTags=X=>S.AddTagsTo(b,X),b.removeTags=X=>S.RemoveTagsFrom(b,X),b.matchesTagsQuery=X=>S.MatchesQuery(b,X)}static DisableFor(b){delete b._tags,delete b.hasTags,delete b.addTags,delete b.removeTags,delete b.matchesTagsQuery}static HasTags(b){if(!b._tags)return!1;const X=b._tags;for(const P in X)if(Object.prototype.hasOwnProperty.call(X,P))return!0;return!1}static GetTags(b){let X=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!b._tags)return null;if(X){const X=[];for(const P in b._tags)Object.prototype.hasOwnProperty.call(b._tags,P)&&!0===b._tags[P]&&X.push(P);return X.join(" ")}return b._tags}static AddTagsTo(b,X){if(!X)return;if("string"!==typeof X)return;const P=X.split(" ");for(const Q of P)S._AddTagTo(b,Q)}static _AddTagTo(b,X){""!==(X=X.trim())&&"true"!==X&&"false"!==X&&(X.match(/[\s]/)||X.match(/^([!]|([|]|[&]){2})/)||(S.EnableFor(b),b._tags[X]=!0))}static RemoveTagsFrom(b,X){if(!S.HasTags(b))return;const P=X.split(" ");for(const Q in P)S._RemoveTagFrom(b,P[Q])}static _RemoveTagFrom(b,X){delete b._tags[X]}static MatchesQuery(b,X){return void 0===X||(""===X?S.HasTags(b):Q.Eval(X,(X=>S.HasTags(b)&&b._tags[X])))}}},11822:(b,X,P)=>{P.d(X,{b:()=>Q});function Q(b,X,P,Q){var S,d=arguments.length,N=d<3?X:null===Q?Q=Object.getOwnPropertyDescriptor(X,P):Q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)N=Reflect.decorate(b,X,P,Q);else for(var a=b.length-1;a>=0;a--)(S=b[a])&&(N=(d<3?S(N):d>3?S(X,P,N):S(X,P))||N);return d>3&&N&&Object.defineProperty(X,P,N),N}Object.create;Object.create}}]);