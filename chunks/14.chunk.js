"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[14],{2212:(B,o,e)=>{e.r(o),e.d(o,{_ExrTextureLoader:()=>q});var k=e(514),d=e(701);const f=65536,J=14,Z=65537,t=16384;var h,O;!function(B){B[B.NO_COMPRESSION=0]="NO_COMPRESSION",B[B.RLE_COMPRESSION=1]="RLE_COMPRESSION",B[B.ZIPS_COMPRESSION=2]="ZIPS_COMPRESSION",B[B.ZIP_COMPRESSION=3]="ZIP_COMPRESSION",B[B.PIZ_COMPRESSION=4]="PIZ_COMPRESSION",B[B.PXR24_COMPRESSION=5]="PXR24_COMPRESSION"}(h||(h={})),function(B){B[B.INCREASING_Y=0]="INCREASING_Y",B[B.DECREASING_Y=1]="DECREASING_Y"}(O||(O={}));const K=function(){const B=new ArrayBuffer(4),o=new Float32Array(B),e=new Uint32Array(B),k=new Uint32Array(512),d=new Uint32Array(512);for(let t=0;t<256;++t){const B=t-127;B<-27?(k[t]=0,k[256|t]=32768,d[t]=24,d[256|t]=24):B<-14?(k[t]=1024>>-B-14,k[256|t]=1024>>-B-14|32768,d[t]=-B-1,d[256|t]=-B-1):B<=15?(k[t]=B+15<<10,k[256|t]=B+15<<10|32768,d[t]=13,d[256|t]=13):B<128?(k[t]=31744,k[256|t]=64512,d[t]=24,d[256|t]=24):(k[t]=31744,k[256|t]=64512,d[t]=13,d[256|t]=13)}const f=new Uint32Array(2048),J=new Uint32Array(64),Z=new Uint32Array(64);for(let t=1;t<1024;++t){let B=t<<13,o=0;for(;0===(8388608&B);)B<<=1,o-=8388608;B&=-8388609,o+=947912704,f[t]=B|o}for(let t=1024;t<2048;++t)f[t]=939524096+(t-1024<<13);for(let t=1;t<31;++t)J[t]=t<<23;J[31]=1199570944,J[32]=2147483648;for(let t=33;t<63;++t)J[t]=2147483648+(t-32<<23);J[63]=3347054592;for(let t=1;t<64;++t)32!==t&&(Z[t]=1024);return{floatView:o,uint32View:e,baseTable:k,shiftTable:d,mantissaTable:f,exponentTable:J,offsetTable:Z}}();function w(B,o){const e=new Uint8Array(B);let k=0;for(;0!=e[o.value+k];)k+=1;const d=(new TextDecoder).decode(e.slice(o.value,o.value+k));return o.value=o.value+k+1,d}function u(B,o){const e=B.getInt32(o.value,!0);return o.value+=4,e}function L(B,o){const e=B.getUint32(o.value,!0);return o.value+=4,e}function H(B,o){const e=B.getUint8(o.value);return o.value+=1,e}function n(B,o){const e=B.getUint16(o.value,!0);return o.value+=2,e}function W(B,o){const e=B[o.value];return o.value+=1,e}function R(B,o){let e;return e="getBigInt64"in DataView.prototype?Number(B.getBigInt64(o.value,!0)):B.getUint32(o.value+4,!0)+Number(B.getUint32(o.value,!0)<<32),o.value+=8,e}function I(B,o){const e=B.getFloat32(o.value,!0);return o.value+=4,e}function T(B,o){return function(B){const o=(31744&B)>>10,e=1023&B;return(B>>15?-1:1)*(o?31===o?e?NaN:1/0:Math.pow(2,o-15)*(1+e/1024):e/1024*6103515625e-14)}(n(B,o))}function s(B,o){return function(B){if(Math.abs(B)>65504)throw new Error("Value out of range.Consider using float instead of half-float.");B=(0,d.b)(B,-65504,65504),K.floatView[0]=B;const o=K.uint32View[0],e=o>>23&511;return K.baseTable[e]+((8388607&o)>>K.shiftTable[e])}(I(B,o))}function V(B,o,e,k){switch(e){case"string":case"stringvector":case"iccProfile":return function(B,o,e){const k=(new TextDecoder).decode(new Uint8Array(B).slice(o.value,o.value+e));return o.value=o.value+e,k}(B.buffer,o,k);case"chlist":return function(B,o,e){const k=o.value,d=[];for(;o.value<k+e-1;){const e=w(B.buffer,o),k=u(B,o),f=H(B,o);o.value+=3;const J=u(B,o),Z=u(B,o);d.push({name:e,pixelType:k,pLinear:f,xSampling:J,ySampling:Z})}return o.value+=1,d}(B,o,k);case"chromaticities":return function(B,o){return{redX:I(B,o),redY:I(B,o),greenX:I(B,o),greenY:I(B,o),blueX:I(B,o),blueY:I(B,o),whiteX:I(B,o),whiteY:I(B,o)}}(B,o);case"compression":return function(B,o){return H(B,o)}(B,o);case"box2i":return function(B,o){return{xMin:u(B,o),yMin:u(B,o),xMax:u(B,o),yMax:u(B,o)}}(B,o);case"lineOrder":return function(B,o){const e=H(B,o);return O[e]}(B,o);case"float":return I(B,o);case"v2f":return function(B,o){return[I(B,o),I(B,o)]}(B,o);case"v3f":return function(B,o){return[I(B,o),I(B,o),I(B,o)]}(B,o);case"int":return u(B,o);case"rational":return function(B,o){return[u(B,o),L(B,o)]}(B,o);case"timecode":return function(B,o){return[L(B,o),L(B,o)]}(B,o);case"preview":return o.value+=k,"skipped";default:return void(o.value+=k)}}function Q(B){for(let o=1;o<B.length;o++){const e=B[o-1]+B[o]-128;B[o]=e}}function p(B,o){let e=0,k=Math.floor((B.length+1)/2),d=0;const f=B.length-1;for(;!(d>f)&&(o[d++]=B[e++],!(d>f));)o[d++]=B[k++]}function X(B,o,e,k,d){for(;e<B;)o=o<<8|W(k,d),e+=8;return{l:o>>(e-=B)&(1<<B)-1,c:o,lc:e}}function l(B,o,e,k){return{c:B=B<<8|W(e,k),lc:o+=8}}function v(B,o,e,k,d,f,J,Z,t){if(B==o){if(k<8){const B=l(e,k,d,f);e=B.c,k=B.lc}let B=e>>(k-=8);if(B=new Uint8Array([B])[0],Z.value+B>t)return null;const o=J[Z.value-1];for(;B-- >0;)J[Z.value++]=o}else{if(!(Z.value<t))return null;J[Z.value++]=B}return{c:e,lc:k}}const U=new Array(59);function b(B,o,e,k,d,f){const J=o;let t=0,h=0;for(;k<=d;k++){if(J.value-o.value>e)return;let Z=X(6,t,h,B,J);const O=Z.l;if(t=Z.c,h=Z.lc,f[k]=O,63==O){if(J.value-o.value>e)throw new Error("Error in HufUnpackEncTable");Z=X(8,t,h,B,J);let O=Z.l+6;if(t=Z.c,h=Z.lc,k+O>d+1)throw new Error("Error in HufUnpackEncTable");for(;O--;)f[k++]=0;k--}else if(O>=59){let B=O-59+2;if(k+B>d+1)throw new Error("Error in HufUnpackEncTable");for(;B--;)f[k++]=0;k--}}!function(B){for(let e=0;e<=58;++e)U[e]=0;for(let e=0;e<Z;++e)U[B[e]]+=1;let o=0;for(let e=58;e>0;--e){const B=o+U[e]>>1;U[e]=o,o=B}for(let e=0;e<Z;++e){const o=B[e];o>0&&(B[e]=o|U[o]++<<6)}}(f)}function M(B){return 63&B}function j(B){return B>>6}function z(B,o,e,k,d,f){const h=e.value,O=L(o,e),K=L(o,e);e.value+=4;const w=L(o,e);if(e.value+=4,O<0||O>=Z||K<0||K>=Z)throw new Error("Wrong HUF_ENCSIZE");const u=new Array(Z),H=new Array(t);!function(B){for(let o=0;o<t;o++)B[o]={},B[o].len=0,B[o].lit=0,B[o].p=null}(H);if(b(B,e,k-(e.value-h),O,K,u),w>8*(k-(e.value-h)))throw new Error("Wrong hufUncompress");!function(B,o,e,k){for(;o<=e;o++){const e=j(B[o]),d=M(B[o]);if(e>>d)throw new Error("Invalid table entry");if(d>J){const B=k[e>>d-J];if(B.len)throw new Error("Invalid table entry");if(B.lit++,B.p){const o=B.p;B.p=new Array(B.lit);for(let e=0;e<B.lit-1;++e)B.p[e]=o[e]}else B.p=new Array(1);B.p[B.lit-1]=o}else if(d){let B=0;for(let f=1<<J-d;f>0;f--){const f=k[(e<<J-d)+B];if(f.len||f.p)throw new Error("Invalid table entry");f.len=d,f.lit=o,B++}}}}(u,O,K,H),function(B,o,e,k,d,f,Z,t,h){let O=0,K=0;const w=Z,u=Math.trunc(k.value+(d+7)/8);for(;k.value<u;){let d=l(O,K,e,k);for(O=d.c,K=d.lc;K>=J;){const Z=o[O>>K-J&16383];if(Z.len){K-=Z.len;const B=v(Z.lit,f,O,K,e,k,t,h,w);B&&(O=B.c,K=B.lc)}else{if(!Z.p)throw new Error("hufDecode issues");let o;for(o=0;o<Z.lit;o++){const J=M(B[Z.p[o]]);for(;K<J&&k.value<u;)d=l(O,K,e,k),O=d.c,K=d.lc;if(K>=J&&j(B[Z.p[o]])==(O>>K-J&(1<<J)-1)){K-=J;const B=v(Z.p[o],f,O,K,e,k,t,h,w);B&&(O=B.c,K=B.lc);break}}if(o==Z.lit)throw new Error("HufDecode issues")}}}const L=8-d&7;for(O>>=L,K-=L;K>0;){const B=o[O<<J-K&16383];if(!B.len)throw new Error("HufDecode issues");{K-=B.len;const o=v(B.lit,f,O,K,e,k,t,h,w);o&&(O=o.c,K=o.lc)}}}(u,H,B,e,w,K,f,d,{value:0})}function N(B){return 65535&B}function x(B){const o=N(B);return o>32767?o-65536:o}function D(B,o){const e=x(B),k=x(o),d=e+(1&k)+(k>>1);return{a:d,b:d-k}}function r(B,o){const e=N(B),k=N(o),d=e-(k>>1)&65535;return{a:k+d-32768&65535,b:d}}function Y(B,o,e,k,d,f,J){const Z=J<16384,t=e>d?d:e;let h,O,K=1;for(;K<=t;)K<<=1;for(K>>=1,h=K,K>>=1;K>=1;){O=0;const J=O+f*(d-h),t=f*K,w=f*h,u=k*K,L=k*h;let H,n,W,R;for(;O<=J;O+=w){let d=O;const f=O+k*(e-h);for(;d<=f;d+=L){const e=d+u,k=d+t,f=k+u;if(Z){let J=D(B[d+o],B[k+o]);H=J.a,W=J.b,J=D(B[e+o],B[f+o]),n=J.a,R=J.b,J=D(H,n),B[d+o]=J.a,B[e+o]=J.b,J=D(W,R),B[k+o]=J.a,B[f+o]=J.b}else{let J=r(B[d+o],B[k+o]);H=J.a,W=J.b,J=r(B[e+o],B[f+o]),n=J.a,R=J.b,J=r(H,n),B[d+o]=J.a,B[e+o]=J.b,J=r(W,R),B[k+o]=J.a,B[f+o]=J.b}}if(e&K){const e=d+t;let k;k=Z?D(B[d+o],B[e+o]):r(B[d+o],B[e+o]),H=k.a,B[e+o]=k.b,B[d+o]=H}}if(d&K){let d=O;const f=O+k*(e-h);for(;d<=f;d+=L){const e=d+u;let k;k=Z?D(B[d+o],B[e+o]):r(B[d+o],B[e+o]),H=k.a,B[e+o]=k.b,B[d+o]=H}}h=K,K>>=1}return O}function E(B){return new DataView(B.array.buffer,B.offset.value,B.size)}function G(B){const o=B.viewer.buffer.slice(B.offset.value,B.offset.value+B.size),e=new Uint8Array(function(B){let o=B.byteLength;const e=new Array;let k=0;const d=new DataView(B);for(;o>0;){const B=d.getInt8(k++);if(B<0){const f=-B;o-=f+1;for(let B=0;B<f;B++)e.push(d.getUint8(k++))}else{const f=B;o-=2;const J=d.getUint8(k++);for(let B=0;B<f+1;B++)e.push(J)}}return e}(o)),k=new Uint8Array(e.length);return Q(e),p(e,k),new DataView(k.buffer)}function A(B){const o=B.array.slice(B.offset.value,B.offset.value+B.size),e=fflate.unzlibSync(o),k=new Uint8Array(e.length);return Q(e),p(e,k),new DataView(k.buffer)}function g(B){const o=B.array.slice(B.offset.value,B.offset.value+B.size),e=fflate.unzlibSync(o),k=B.lines*B.channels*B.width,d=1==B.type?new Uint16Array(k):new Uint32Array(k);let f=0,J=0;const Z=new Array(4);for(let t=0;t<B.lines;t++)for(let o=0;o<B.channels;o++){let o=0;switch(B.type){case 1:Z[0]=f,Z[1]=Z[0]+B.width,f=Z[1]+B.width;for(let k=0;k<B.width;++k){o+=e[Z[0]++]<<8|e[Z[1]++],d[J]=o,J++}break;case 2:Z[0]=f,Z[1]=Z[0]+B.width,Z[2]=Z[1]+B.width,f=Z[2]+B.width;for(let k=0;k<B.width;++k){o+=e[Z[0]++]<<24|e[Z[1]++]<<16|e[Z[2]++]<<8,d[J]=o,J++}}}return new DataView(d.buffer)}function c(B){const o=B.viewer,e={value:B.offset.value},k=new Uint16Array(B.width*B.scanlineBlockSize*(B.channels*B.type)),d=new Uint8Array(8192);let J=0;const Z=new Array(B.channels);for(let f=0;f<B.channels;f++)Z[f]={},Z[f].start=J,Z[f].end=Z[f].start,Z[f].nx=B.width,Z[f].ny=B.lines,Z[f].size=B.type,J+=Z[f].nx*Z[f].ny*Z[f].size;const t=n(o,e),h=n(o,e);if(h>=8192)throw new Error("Wrong PIZ_COMPRESSION BITMAP_SIZE");if(t<=h)for(let f=0;f<h-t+1;f++)d[f+t]=H(o,e);const O=new Uint16Array(f),K=function(B,o){let e=0;for(let d=0;d<f;++d)(0==d||B[d>>3]&1<<(7&d))&&(o[e++]=d);const k=e-1;for(;e<f;)o[e++]=0;return k}(d,O),w=L(o,e);z(B.array,o,e,w,k,J);for(let f=0;f<B.channels;++f){const B=Z[f];for(let o=0;o<Z[f].size;++o)Y(k,B.start+o,B.nx,B.size,B.ny,B.nx*B.size,K)}!function(B,o,e){for(let k=0;k<e;++k)o[k]=B[o[k]]}(O,k,J);let u=0;const W=new Uint8Array(k.buffer.byteLength);for(let f=0;f<B.lines;f++)for(let o=0;o<B.channels;o++){const B=Z[o],e=B.nx*B.size,d=new Uint8Array(k.buffer,2*B.end,2*e);W.set(d,u),u+=2*e,B.end+=e}return new DataView(W.buffer)}var i,F=e(499);!function(B){B[B.Float=0]="Float",B[B.HalfFloat=1]="HalfFloat"}(i||(i={}));class y{}y.DefaultOutputType=i.HalfFloat,y.FFLATEUrl="https://unpkg.com/fflate@0.8.2";class q{constructor(){this.supportCascades=!1}loadCubeData(B,o,e,k,d){throw".exr not supported in Cube."}async loadData(B,o,e){const d=new DataView(B.buffer),f={value:0},J=function(B,o){if(20000630!=B.getUint32(0,!0))throw new Error("Incorrect OpenEXR format");const e=B.getUint8(4),d=B.getUint8(5),f={singleTile:!!(2&d),longName:!!(4&d),deepFormat:!!(8&d),multiPart:!!(16&d)};o.value=8;const J={};let Z=!0;for(;Z;){const e=w(B.buffer,o);if(e){const d=w(B.buffer,o),f=V(B,o,d,L(B,o));void 0===f?k.d.Warn(`Unknown header attribute type ${d}'.`):J[e]=f}else Z=!1}if(0!=(-5&d))throw new Error("Unsupported file format");return{version:e,spec:f,...J}}(d,f),Z=await async function(B,o,e,k){const d={size:0,viewer:o,array:new Uint8Array(o.buffer),offset:e,width:B.dataWindow.xMax-B.dataWindow.xMin+1,height:B.dataWindow.yMax-B.dataWindow.yMin+1,channels:B.channels.length,channelLineOffsets:{},scanOrder:()=>0,bytesPerLine:0,outLineWidth:0,lines:0,scanlineBlockSize:0,inputSize:null,type:0,uncompress:null,getter:()=>0,format:5,outputChannels:0,decodeChannels:{},blockCount:null,byteArray:null,linearSpace:!1,textureType:0};switch(B.compression){case h.NO_COMPRESSION:d.lines=1,d.uncompress=E;break;case h.RLE_COMPRESSION:d.lines=1,d.uncompress=G;break;case h.ZIPS_COMPRESSION:d.lines=1,d.uncompress=A,await F.d.LoadScriptAsync(y.FFLATEUrl);break;case h.ZIP_COMPRESSION:d.lines=16,d.uncompress=A,await F.d.LoadScriptAsync(y.FFLATEUrl);break;case h.PIZ_COMPRESSION:d.lines=32,d.uncompress=c;break;case h.PXR24_COMPRESSION:d.lines=16,d.uncompress=g,await F.d.LoadScriptAsync(y.FFLATEUrl);break;default:throw new Error(h[B.compression]+" is unsupported")}d.scanlineBlockSize=d.lines;const f={};for(const h of B.channels)switch(h.name){case"Y":case"R":case"G":case"B":case"A":f[h.name]=!0,d.type=h.pixelType}let J=!1;if(f.R&&f.G&&f.B)J=!f.A,d.outputChannels=4,d.decodeChannels={R:0,G:1,B:2,A:3};else{if(!f.Y)throw new Error("EXRLoader.parse: file contains unsupported data channels.");d.outputChannels=1,d.decodeChannels={Y:0}}if(1===d.type)switch(k){case i.Float:d.getter=T,d.inputSize=2;break;case i.HalfFloat:d.getter=n,d.inputSize=2}else{if(2!==d.type)throw new Error("Unsupported pixelType "+d.type+" for "+B.compression);switch(k){case i.Float:d.getter=I,d.inputSize=4;break;case i.HalfFloat:d.getter=s,d.inputSize=4}}d.blockCount=d.height/d.scanlineBlockSize;for(let h=0;h<d.blockCount;h++)R(o,e);const Z=d.width*d.height*d.outputChannels;switch(k){case i.Float:d.byteArray=new Float32Array(Z),d.textureType=1,J&&d.byteArray.fill(1,0,Z);break;case i.HalfFloat:d.byteArray=new Uint16Array(Z),d.textureType=2,J&&d.byteArray.fill(15360,0,Z);break;default:throw new Error("Unsupported type: "+k)}let t=0;for(const h of B.channels)void 0!==d.decodeChannels[h.name]&&(d.channelLineOffsets[h.name]=t*d.width),t+=2*h.pixelType;return d.bytesPerLine=d.width*t,d.outLineWidth=d.width*d.outputChannels,"INCREASING_Y"===B.lineOrder?d.scanOrder=B=>B:d.scanOrder=B=>d.height-1-B,4==d.outputChannels?(d.format=5,d.linearSpace=!0):(d.format=6,d.linearSpace=!1),d}(J,d,f,y.DefaultOutputType);!function(B,o,e,k){const d={value:0};for(let f=0;f<B.height/B.scanlineBlockSize;f++){const J=u(e,k)-o.dataWindow.yMin;B.size=L(e,k),B.lines=J+B.scanlineBlockSize>B.height?B.height-J:B.scanlineBlockSize;const Z=B.size<B.lines*B.bytesPerLine&&B.uncompress?B.uncompress(B):E(B);k.value+=B.size;for(let e=0;e<B.scanlineBlockSize;e++){const k=f*B.scanlineBlockSize,J=e+B.scanOrder(k);if(J>=B.height)continue;const t=e*B.bytesPerLine,h=(B.height-1-J)*B.outLineWidth;for(let e=0;e<B.channels;e++){const k=o.channels[e].name,f=B.channelLineOffsets[k],J=B.decodeChannels[k];if(void 0!==J){d.value=t+f;for(let o=0;o<B.width;o++){const e=h+o*B.outputChannels+J;B.byteArray&&(B.byteArray[e]=B.getter(Z,d))}}}}}}(Z,J,d,f);e(J.dataWindow.xMax-J.dataWindow.xMin+1,J.dataWindow.yMax-J.dataWindow.yMin+1,o.generateMipMaps,!1,(()=>{const B=o.getEngine();o.format=J.format,o.type=Z.textureType,o.invertY=!1,o._gammaSpace=!J.linearSpace,Z.byteArray&&B._uploadDataToTextureDirectly(o,Z.byteArray,0,0,void 0,!0)}))}}}}]);