/*! For license information please see xb65id.20.13f379fc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[20],{11964:(u,F,z)=>{z.d(F,{$:()=>e,C:()=>j,E:()=>E,I:()=>g,K:()=>k,N:()=>Y,R:()=>y,U:()=>d,W:()=>C,_:()=>N,b:()=>L,bb:()=>q,e:()=>T,f:()=>n,fb:()=>J,g:()=>f,hb:()=>r,k:()=>I,l:()=>c,p:()=>B,s:()=>l,t:()=>U,v:()=>Q,z:()=>W});const p=function(u){const F=[];let z=0;for(let p=0;p<u.length;p++){let b=u.charCodeAt(p);b<128?F[z++]=b:b<2048?(F[z++]=b>>6|192,F[z++]=63&b|128):55296===(64512&b)&&p+1<u.length&&56320===(64512&u.charCodeAt(p+1))?(b=65536+((1023&b)<<10)+(1023&u.charCodeAt(++p)),F[z++]=b>>18|240,F[z++]=b>>12&63|128,F[z++]=b>>6&63|128,F[z++]=63&b|128):(F[z++]=b>>12|224,F[z++]=b>>6&63|128,F[z++]=63&b|128)}return F},b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(u,F){if(!Array.isArray(u))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,p=[];for(let b=0;b<u.length;b+=3){const F=u[b],R=b+1<u.length,c=R?u[b+1]:0,I=b+2<u.length,G=I?u[b+2]:0,X=F>>2,j=(3&F)<<4|c>>4;let W=(15&c)<<2|G>>6,E=63&G;I||(E=64,R||(W=64)),p.push(z[X],z[j],z[W],z[E])}return p.join("")},encodeString(u,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(u):this.encodeByteArray(p(u),F)},decodeString(u,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(u):function(u){const F=[];let z=0,p=0;for(;z<u.length;){const b=u[z++];if(b<128)F[p++]=String.fromCharCode(b);else if(b>191&&b<224){const R=u[z++];F[p++]=String.fromCharCode((31&b)<<6|63&R)}else if(b>239&&b<365){const R=((7&b)<<18|(63&u[z++])<<12|(63&u[z++])<<6|63&u[z++])-65536;F[p++]=String.fromCharCode(55296+(R>>10)),F[p++]=String.fromCharCode(56320+(1023&R))}else{const R=u[z++],c=u[z++];F[p++]=String.fromCharCode((15&b)<<12|(63&R)<<6|63&c)}}return F.join("")}(this.decodeStringToByteArray(u,F))},decodeStringToByteArray(u,F){this.init_();const z=F?this.charToByteMapWebSafe_:this.charToByteMap_,p=[];for(let b=0;b<u.length;){const F=z[u.charAt(b++)],c=b<u.length?z[u.charAt(b)]:0;++b;const I=b<u.length?z[u.charAt(b)]:64;++b;const G=b<u.length?z[u.charAt(b)]:64;if(++b,null==F||null==c||null==I||null==G)throw new R;const X=F<<2|c>>4;if(p.push(X),64!==I){const u=c<<4&240|I>>2;if(p.push(u),64!==G){const u=I<<6&192|G;p.push(u)}}}return p},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let u=0;u<this.ENCODED_VALS.length;u++)this.byteToCharMap_[u]=this.ENCODED_VALS.charAt(u),this.charToByteMap_[this.byteToCharMap_[u]]=u,this.byteToCharMapWebSafe_[u]=this.ENCODED_VALS_WEBSAFE.charAt(u),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[u]]=u,u>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(u)]=u,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(u)]=u)}}};class R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(u){return function(u){const F=p(u);return b.encodeByteArray(F,!0)}(u).replace(/\./g,"")},I=function(u){try{return b.decodeString(u,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};const G=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof z.g)return z.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,X=()=>{try{return G()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let u;try{u=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(z){return}const F=u&&I(u[1]);return F&&JSON.parse(F)})()}catch(u){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${u}`)}},j=u=>{var F,z;return null===(z=null===(F=X())||void 0===F?void 0:F.emulatorHosts)||void 0===z?void 0:z[u]},W=()=>{var u;return null===(u=X())||void 0===u?void 0:u.config},E=u=>{var F;return null===(F=X())||void 0===F?void 0:F[`_${u}`]};class L{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((u,F)=>{this.resolve=u,this.reject=F}))}wrapCallback(u){return(F,z)=>{F?this.reject(F):this.resolve(z),"function"===typeof u&&(this.promise.catch((()=>{})),1===u.length?u(F):u(F,z))}}}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function Y(){const u="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof u&&void 0!==u.id}function e(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function d(){const u=k();return u.indexOf("MSIE ")>=0||u.indexOf("Trident/")>=0}function C(){try{return"object"===typeof indexedDB}catch(u){return!1}}function r(){return new Promise(((u,F)=>{try{let z=!0;const p="validate-browser-context-for-indexeddb-analytics-module",b=self.indexedDB.open(p);b.onsuccess=()=>{b.result.close(),z||self.indexedDB.deleteDatabase(p),u(!0)},b.onupgradeneeded=()=>{z=!1},b.onerror=()=>{var u;F((null===(u=b.error)||void 0===u?void 0:u.message)||"")}}catch(z){F(z)}}))}function f(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class n extends Error{constructor(u,F,z){super(F),this.code=u,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(u,F,z){this.service=u,this.serviceName=F,this.errors=z}create(u){const F=(arguments.length<=1?void 0:arguments[1])||{},z=`${this.service}/${u}`,p=this.errors[u],b=p?function(u,F){return u.replace(H,((u,z)=>{const p=F[z];return null!=p?String(p):`<${z}?>`}))}(p,F):"Error",R=`${this.serviceName}: ${b} (${z}).`;return new n(z,R,F)}}const H=/\{\$([^}]+)}/g;function y(u){for(const F in u)if(Object.prototype.hasOwnProperty.call(u,F))return!1;return!0}function U(u,F){if(u===F)return!0;const z=Object.keys(u),p=Object.keys(F);for(const b of z){if(!p.includes(b))return!1;const z=u[b],R=F[b];if(a(z)&&a(R)){if(!U(z,R))return!1}else if(z!==R)return!1}for(const b of p)if(!z.includes(b))return!1;return!0}function a(u){return null!==u&&"object"===typeof u}function J(u){const F=[];for(const[z,p]of Object.entries(u))Array.isArray(p)?p.forEach((u=>{F.push(encodeURIComponent(z)+"="+encodeURIComponent(u))})):F.push(encodeURIComponent(z)+"="+encodeURIComponent(p));return F.length?"&"+F.join("&"):""}function q(u){const F={};return u.replace(/^\?/,"").split("&").forEach((u=>{if(u){const[z,p]=u.split("=");F[decodeURIComponent(z)]=decodeURIComponent(p)}})),F}function Q(u){const F=u.indexOf("?");if(!F)return"";const z=u.indexOf("#",F);return u.substring(F,z>0?z:void 0)}function l(u,F){const z=new Z(u,F);return z.subscribe.bind(z)}class Z{constructor(u,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then((()=>{u(this)})).catch((u=>{this.error(u)}))}next(u){this.forEachObserver((F=>{F.next(u)}))}error(u){this.forEachObserver((F=>{F.error(u)})),this.close(u)}complete(){this.forEachObserver((u=>{u.complete()})),this.close()}subscribe(u,F,z){let p;if(void 0===u&&void 0===F&&void 0===z)throw new Error("Missing Observer.");p=function(u,F){if("object"!==typeof u||null===u)return!1;for(const z of F)if(z in u&&"function"===typeof u[z])return!0;return!1}(u,["next","error","complete"])?u:{next:u,error:F,complete:z},void 0===p.next&&(p.next=s),void 0===p.error&&(p.error=s),void 0===p.complete&&(p.complete=s);const b=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?p.error(this.finalError):p.complete()}catch(u){}})),this.observers.push(p),b}unsubscribeOne(u){void 0!==this.observers&&void 0!==this.observers[u]&&(delete this.observers[u],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(u){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,u)}sendOne(u,F){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[u])try{F(this.observers[u])}catch(z){"undefined"!==typeof console&&console.error&&console.error(z)}}))}close(u){this.finalized||(this.finalized=!0,void 0!==u&&(this.finalError=u),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function s(){}const o=1e3,v=2,m=144e5,A=.5;function B(u){let F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;const z=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)*Math.pow(F,u),p=Math.round(A*z*(Math.random()-.5)*2);return Math.min(m,z+p)}function g(u){return u&&u._delegate?u._delegate:u}},11958:(u,F,z)=>{z.d(F,{e:()=>R.f,g:()=>Wu,i:()=>w,m:()=>zu,o:()=>pu,s:()=>uu,t:()=>Iu,w:()=>Fu,z:()=>Ru,A:()=>bu,C:()=>cu,G:()=>Nu,L:()=>Lu,K:()=>ku,N:()=>Eu,O:()=>eu,S:()=>Yu,V:()=>du});var p=z(11960),b=z(11971),R=z(11964);let c,I;const G=new WeakMap,X=new WeakMap,j=new WeakMap,W=new WeakMap,E=new WeakMap;let L={get(u,F,z){if(u instanceof IDBTransaction){if("done"===F)return X.get(u);if("objectStoreNames"===F)return u.objectStoreNames||j.get(u);if("store"===F)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return Y(u[F])},set:(u,F,z)=>(u[F]=z,!0),has:(u,F)=>u instanceof IDBTransaction&&("done"===F||"store"===F)||F in u};function k(u){return u!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(I||(I=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(u)?function(){for(var F=arguments.length,z=new Array(F),p=0;p<F;p++)z[p]=arguments[p];return u.apply(e(this),z),Y(G.get(this))}:function(){for(var F=arguments.length,z=new Array(F),p=0;p<F;p++)z[p]=arguments[p];return Y(u.apply(e(this),z))}:function(F){for(var z=arguments.length,p=new Array(z>1?z-1:0),b=1;b<z;b++)p[b-1]=arguments[b];const R=u.call(e(this),F,...p);return j.set(R,F.sort?F.sort():[F]),Y(R)}}function N(u){return"function"===typeof u?k(u):(u instanceof IDBTransaction&&function(u){if(X.has(u))return;const F=new Promise(((F,z)=>{const p=()=>{u.removeEventListener("complete",b),u.removeEventListener("error",R),u.removeEventListener("abort",R)},b=()=>{F(),p()},R=()=>{z(u.error||new DOMException("AbortError","AbortError")),p()};u.addEventListener("complete",b),u.addEventListener("error",R),u.addEventListener("abort",R)}));X.set(u,F)}(u),F=u,(c||(c=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((u=>F instanceof u))?new Proxy(u,L):u);var F}function Y(u){if(u instanceof IDBRequest)return function(u){const F=new Promise(((F,z)=>{const p=()=>{u.removeEventListener("success",b),u.removeEventListener("error",R)},b=()=>{F(Y(u.result)),p()},R=()=>{z(u.error),p()};u.addEventListener("success",b),u.addEventListener("error",R)}));return F.then((F=>{F instanceof IDBCursor&&G.set(F,u)})).catch((()=>{})),E.set(F,u),F}(u);if(W.has(u))return W.get(u);const F=N(u);return F!==u&&(W.set(u,F),E.set(F,u)),F}const e=u=>E.get(u);const d=["get","getKey","getAll","getAllKeys","count"],C=["put","add","delete","clear"],r=new Map;function f(u,F){if(!(u instanceof IDBDatabase)||F in u||"string"!==typeof F)return;if(r.get(F))return r.get(F);const z=F.replace(/FromIndex$/,""),p=F!==z,b=C.includes(z);if(!(z in(p?IDBIndex:IDBObjectStore).prototype)||!b&&!d.includes(z))return;const R=async function(u){const F=this.transaction(u,b?"readwrite":"readonly");let R=F.store;for(var c=arguments.length,I=new Array(c>1?c-1:0),G=1;G<c;G++)I[G-1]=arguments[G];return p&&(R=R.index(I.shift())),(await Promise.all([R[z](...I),b&&F.done]))[0]};return r.set(F,R),R}L=(u=>({...u,get:(F,z,p)=>f(F,z)||u.get(F,z,p),has:(F,z)=>!!f(F,z)||u.has(F,z)}))(L);class n{constructor(u){this.container=u}getPlatformInfoString(){return this.container.getProviders().map((u=>{if(function(u){const F=u.getComponent();return"VERSION"===(null===F||void 0===F?void 0:F.type)}(u)){const F=u.getImmediate();return`${F.library}/${F.version}`}return null})).filter((u=>u)).join(" ")}}const T="@firebase/app",H="0.9.13",y=new b.g("@firebase/app"),U="@firebase/app-compat",a="@firebase/analytics-compat",J="@firebase/analytics",q="@firebase/app-check-compat",Q="@firebase/app-check",l="@firebase/auth",Z="@firebase/auth-compat",s="@firebase/database",o="@firebase/database-compat",v="@firebase/functions",m="@firebase/functions-compat",A="@firebase/installations",B="@firebase/installations-compat",g="@firebase/messaging",S="@firebase/messaging-compat",P="@firebase/performance",h="@firebase/performance-compat",K="@firebase/remote-config",x="@firebase/remote-config-compat",D="@firebase/storage",V="@firebase/storage-compat",M="@firebase/firestore",O="@firebase/firestore-compat",i="firebase",w="[DEFAULT]",t={[T]:"fire-core",[U]:"fire-core-compat",[J]:"fire-analytics",[a]:"fire-analytics-compat",[Q]:"fire-app-check",[q]:"fire-app-check-compat",[l]:"fire-auth",[Z]:"fire-auth-compat",[s]:"fire-rtdb",[o]:"fire-rtdb-compat",[v]:"fire-fn",[m]:"fire-fn-compat",[A]:"fire-iid",[B]:"fire-iid-compat",[g]:"fire-fcm",[S]:"fire-fcm-compat",[P]:"fire-perf",[h]:"fire-perf-compat",[K]:"fire-rc",[x]:"fire-rc-compat",[D]:"fire-gcs",[V]:"fire-gcs-compat",[M]:"fire-fst",[O]:"fire-fst-compat","fire-js":"fire-js",[i]:"fire-js-all"},uu=new Map,Fu=new Map;function zu(u,F){try{u.container.ge(F)}catch(z){y.debug(`Component ${F.name} failed to register with FirebaseApp ${u.name}`,z)}}function pu(u,F){u.container.addOrOverwriteComponent(F)}function bu(u){const F=u.name;if(Fu.has(F))return y.debug(`There were multiple attempts to register component ${F}.`),!1;Fu.set(F,u);for(const z of uu.values())zu(z,u);return!0}function Ru(u,F){const z=u.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),u.container.getProvider(F)}function cu(u,F){let z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;Ru(u,F).clearInstance(z)}function Iu(){Fu.clear()}const Gu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Xu=new R.e("app","Firebase",Gu);class ju{constructor(u,F,z){this._isDeleted=!1,this._options=Object.assign({},u),this._config=Object.assign({},F),this._name=F.name,this._automaticDataCollectionEnabled=F.automaticDataCollectionEnabled,this._container=z,this.container.ge(new p.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(u){this.checkDestroyed(),this._automaticDataCollectionEnabled=u}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(u){this._isDeleted=u}checkDestroyed(){if(this.isDeleted)throw Xu.create("app-deleted",{appName:this._name})}}const Wu="9.23.0";function Eu(u){let F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},z=u;if("object"!==typeof F){F={name:F}}const b=Object.assign({name:w,automaticDataCollectionEnabled:!1},F),c=b.name;if("string"!==typeof c||!c)throw Xu.create("bad-app-name",{appName:String(c)});if(z||(z=(0,R.z)()),!z)throw Xu.create("no-options");const I=uu.get(c);if(I){if((0,R.t)(z,I.options)&&(0,R.t)(b,I.config))return I;throw Xu.create("duplicate-app",{appName:c})}const G=new p.d(c);for(const p of Fu.values())G.ge(p);const X=new ju(z,b,G);return uu.set(c,X),X}function Lu(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;const F=uu.get(u);if(!F&&u===w&&(0,R.z)())return Eu();if(!F)throw Xu.create("no-app",{appName:u});return F}function ku(){return Array.from(uu.values())}async function Nu(u){const F=u.name;uu.has(F)&&(uu.delete(F),await Promise.all(u.container.getProviders().map((u=>u.delete()))),u.isDeleted=!0)}function Yu(u,F,z){var b;let R=null!==(b=t[u])&&void 0!==b?b:u;z&&(R+=`-${z}`);const c=R.match(/\s|\//),I=F.match(/\s|\//);if(c||I){const u=[`Unable to register library "${R}" with version "${F}":`];return c&&u.push(`library name "${R}" contains illegal characters (whitespace or "/")`),c&&I&&u.push("and"),I&&u.push(`version name "${F}" contains illegal characters (whitespace or "/")`),void y.warn(u.join(" "))}bu(new p.g(`${R}-version`,(()=>({library:R,version:F})),"VERSION"))}function eu(u,F){if(null!==u&&"function"!==typeof u)throw Xu.create("invalid-log-argument");(0,b.n)(u,F)}function du(u){(0,b.j)(u)}const Cu="firebase-heartbeat-store";let ru=null;function fu(){return ru||(ru=function(u,F){let{blocked:z,upgrade:p,blocking:b,terminated:R}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=indexedDB.open(u,F),I=Y(c);return p&&c.addEventListener("upgradeneeded",(u=>{p(Y(c.result),u.oldVersion,u.newVersion,Y(c.transaction),u)})),z&&c.addEventListener("blocked",(u=>z(u.oldVersion,u.newVersion,u))),I.then((u=>{R&&u.addEventListener("close",(()=>R())),b&&u.addEventListener("versionchange",(u=>b(u.oldVersion,u.newVersion,u)))})).catch((()=>{})),I}("firebase-heartbeat-database",1,{upgrade:(u,F)=>{if(0===F)u.createObjectStore(Cu)}}).catch((u=>{throw Xu.create("idb-open",{originalErrorMessage:u.message})}))),ru}async function nu(u,F){try{const z=(await fu()).transaction(Cu,"readwrite"),p=z.objectStore(Cu);await p.put(F,Tu(u)),await z.done}catch(z){if(z instanceof R.f)y.warn(z.message);else{const u=Xu.create("idb-set",{originalErrorMessage:null===z||void 0===z?void 0:z.message});y.warn(u.message)}}}function Tu(u){return`${u.name}!${u.options.appId}`}class Hu{constructor(u){this.container=u,this._heartbeatsCache=null;const F=this.container.getProvider("app").getImmediate();this.de=new Uu(F),this._heartbeatsCachePromise=this.de.read().then((u=>(this._heartbeatsCache=u,u)))}async triggerHeartbeat(){const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),F=yu();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==F&&!this._heartbeatsCache.heartbeats.some((u=>u.date===F)))return this._heartbeatsCache.heartbeats.push({date:F,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((u=>{const F=new Date(u.date).valueOf();return Date.now()-F<=2592e6})),this.de.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const u=yu(),{heartbeatsToSend:F,unsentEntries:z}=function(u){let F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const z=[];let p=u.slice();for(const b of u){const u=z.find((u=>u.agent===b.agent));if(u){if(u.dates.push(b.date),au(z)>F){u.dates.pop();break}}else if(z.push({agent:b.agent,dates:[b.date]}),au(z)>F){z.pop();break}p=p.slice(1)}return{heartbeatsToSend:z,unsentEntries:p}}(this._heartbeatsCache.heartbeats),p=(0,R.l)(JSON.stringify({version:2,heartbeats:F}));return this._heartbeatsCache.lastSentHeartbeatDate=u,z.length>0?(this._heartbeatsCache.heartbeats=z,await this.de.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.de.overwrite(this._heartbeatsCache)),p}}function yu(){return(new Date).toISOString().substring(0,10)}class Uu{constructor(u){this.app=u,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,R.W)()&&(0,R.hb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(u){try{const F=await fu();return await F.transaction(Cu).objectStore(Cu).get(Tu(u))}catch(F){if(F instanceof R.f)y.warn(F.message);else{const u=Xu.create("idb-get",{originalErrorMessage:null===F||void 0===F?void 0:F.message});y.warn(u.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(u){var F;if(await this._canUseIndexedDBPromise){const z=await this.read();return nu(this.app,{lastSentHeartbeatDate:null!==(F=u.lastSentHeartbeatDate)&&void 0!==F?F:z.lastSentHeartbeatDate,heartbeats:u.heartbeats})}}async add(u){var F;if(await this._canUseIndexedDBPromise){const z=await this.read();return nu(this.app,{lastSentHeartbeatDate:null!==(F=u.lastSentHeartbeatDate)&&void 0!==F?F:z.lastSentHeartbeatDate,heartbeats:[...z.heartbeats,...u.heartbeats]})}}}function au(u){return(0,R.l)(JSON.stringify({version:2,heartbeats:u})).length}var Ju;Ju="",bu(new p.g("platform-logger",(u=>new n(u)),"PRIVATE")),bu(new p.g("heartbeat",(u=>new Hu(u)),"PRIVATE")),Yu(T,H,Ju),Yu(T,H,"esm2017"),Yu("fire-js","")},11960:(u,F,z)=>{z.d(F,{d:()=>I,g:()=>b});var p=z(11964);class b{constructor(u,F,z){this.name=u,this.instanceFactory=F,this.type=z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(u){return this.instantiationMode=u,this}setMultipleInstances(u){return this.multipleInstances=u,this}setServiceProps(u){return this.serviceProps=u,this}setInstanceCreatedCallback(u){return this.onInstanceCreated=u,this}}const R="[DEFAULT]";class c{constructor(u,F){this.name=u,this.container=F,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(u){const F=this.normalizeInstanceIdentifier(u);if(!this.instancesDeferred.has(F)){const u=new p.b;if(this.instancesDeferred.set(F,u),this.isInitialized(F)||this.shouldAutoInitialize())try{const z=this.getOrInitializeService({instanceIdentifier:F});z&&u.resolve(z)}catch(z){}}return this.instancesDeferred.get(F).promise}getImmediate(u){var F;const z=this.normalizeInstanceIdentifier(null===u||void 0===u?void 0:u.identifier),p=null!==(F=null===u||void 0===u?void 0:u.optional)&&void 0!==F&&F;if(!this.isInitialized(z)&&!this.shouldAutoInitialize()){if(p)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:z})}catch(b){if(p)return null;throw b}}getComponent(){return this.component}setComponent(u){if(u.name!==this.name)throw Error(`Mismatching Component ${u.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=u,this.shouldAutoInitialize()){if(function(u){return"EAGER"===u.instantiationMode}(u))try{this.getOrInitializeService({instanceIdentifier:R})}catch(F){}for(const[u,z]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);try{const u=this.getOrInitializeService({instanceIdentifier:p});z.resolve(u)}catch(F){}}}}clearInstance(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;this.instancesDeferred.delete(u),this.instancesOptions.delete(u),this.instances.delete(u)}async delete(){const u=Array.from(this.instances.values());await Promise.all([...u.filter((u=>"INTERNAL"in u)).map((u=>u.INTERNAL.delete())),...u.filter((u=>"_delete"in u)).map((u=>u._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instances.has(u)}getOptions(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instancesOptions.get(u)||{}}initialize(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:F={}}=u,z=this.normalizeInstanceIdentifier(u.instanceIdentifier);if(this.isInitialized(z))throw Error(`${this.name}(${z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const p=this.getOrInitializeService({instanceIdentifier:z,options:F});for(const[b,R]of this.instancesDeferred.entries()){z===this.normalizeInstanceIdentifier(b)&&R.resolve(p)}return p}Yk(u,F){var z;const p=this.normalizeInstanceIdentifier(F),b=null!==(z=this.onInitCallbacks.get(p))&&void 0!==z?z:new Set;b.add(u),this.onInitCallbacks.set(p,b);const R=this.instances.get(p);return R&&u(R,p),()=>{b.delete(u)}}invokeOnInitCallbacks(u,F){const z=this.onInitCallbacks.get(F);if(z)for(const b of z)try{b(u,F)}catch(p){}}getOrInitializeService(u){let{instanceIdentifier:F,options:z={}}=u,p=this.instances.get(F);if(!p&&this.component&&(p=this.component.instanceFactory(this.container,{instanceIdentifier:(b=F,b===R?void 0:b),options:z}),this.instances.set(F,p),this.instancesOptions.set(F,z),this.invokeOnInitCallbacks(p,F),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,F,p)}catch(c){}var b;return p||null}normalizeInstanceIdentifier(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.component?this.component.multipleInstances?u:R:u}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class I{constructor(u){this.name=u,this.providers=new Map}ge(u){const F=this.getProvider(u.name);if(F.isComponentSet())throw new Error(`Component ${u.name} has already been registered with ${this.name}`);F.setComponent(u)}addOrOverwriteComponent(u){this.getProvider(u.name).isComponentSet()&&this.providers.delete(u.name),this.ge(u)}getProvider(u){if(this.providers.has(u))return this.providers.get(u);const F=new c(u,this);return this.providers.set(u,F),F}getProviders(){return Array.from(this.providers.values())}}},11971:(u,F,z)=>{z.d(F,{e:()=>b,g:()=>X,j:()=>j,n:()=>W});const p=[];var b;!function(u){u[u.DEBUG=0]="DEBUG",u[u.VERBOSE=1]="VERBOSE",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.SILENT=5]="SILENT"}(b||(b={}));const R={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},c=b.INFO,I={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},G=function(u,F){if(F<u.logLevel)return;const z=(new Date).toISOString(),p=I[F];if(!p)throw new Error(`Attempted to log a message with an invalid logType (value: ${F})`);for(var b=arguments.length,R=new Array(b>2?b-2:0),c=2;c<b;c++)R[c-2]=arguments[c];console[p](`[${z}]  ${u.name}:`,...R)};class X{constructor(u){this.name=u,this._logLevel=c,this._logHandler=G,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(u){if(!(u in b))throw new TypeError(`Invalid value "${u}" assigned to \`logLevel\``);this._logLevel=u}setLogLevel(u){this._logLevel="string"===typeof u?R[u]:u}get logHandler(){return this._logHandler}set logHandler(u){if("function"!==typeof u)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=u}get userLogHandler(){return this._userLogHandler}set userLogHandler(u){this._userLogHandler=u}debug(){for(var u=arguments.length,F=new Array(u),z=0;z<u;z++)F[z]=arguments[z];this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...F),this._logHandler(this,b.DEBUG,...F)}log(){for(var u=arguments.length,F=new Array(u),z=0;z<u;z++)F[z]=arguments[z];this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...F),this._logHandler(this,b.VERBOSE,...F)}info(){for(var u=arguments.length,F=new Array(u),z=0;z<u;z++)F[z]=arguments[z];this._userLogHandler&&this._userLogHandler(this,b.INFO,...F),this._logHandler(this,b.INFO,...F)}warn(){for(var u=arguments.length,F=new Array(u),z=0;z<u;z++)F[z]=arguments[z];this._userLogHandler&&this._userLogHandler(this,b.WARN,...F),this._logHandler(this,b.WARN,...F)}error(){for(var u=arguments.length,F=new Array(u),z=0;z<u;z++)F[z]=arguments[z];this._userLogHandler&&this._userLogHandler(this,b.ERROR,...F),this._logHandler(this,b.ERROR,...F)}}function j(u){p.forEach((F=>{F.setLogLevel(u)}))}function W(u,F){for(const z of p){let p=null;F&&F.level&&(p=R[F.level]),z.userLogHandler=null===u?null:function(F,z){for(var R=arguments.length,c=new Array(R>2?R-2:0),I=2;I<R;I++)c[I-2]=arguments[I];const G=c.map((u=>{if(null==u)return null;if("string"===typeof u)return u;if("number"===typeof u||"boolean"===typeof u)return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch(F){return null}})).filter((u=>u)).join(" ");z>=(null!==p&&void 0!==p?p:F.logLevel)&&u({level:b[z].toLowerCase(),message:G,args:c,type:F.name})}}}}}]);