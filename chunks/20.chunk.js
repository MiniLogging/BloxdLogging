/*! For license information please see qxym0f.20.c90f77fc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[20],{11652:(J,T,b)=>{b.d(T,{B:()=>w,E:()=>a,H:()=>A,L:()=>P,N:()=>O,R:()=>G,V:()=>I,Z:()=>S,_:()=>U,c:()=>v,cb:()=>K,f:()=>p,fb:()=>x,g:()=>W,j:()=>l,jb:()=>u,lb:()=>d,m:()=>Y,mb:()=>g,ob:()=>E,p:()=>B,t:()=>m,x:()=>Z,z:()=>H});const q=function(J){const T=[];let b=0;for(let q=0;q<J.length;q++){let t=J.charCodeAt(q);t<128?T[b++]=t:t<2048?(T[b++]=t>>6|192,T[b++]=63&t|128):55296===(64512&t)&&q+1<J.length&&56320===(64512&J.charCodeAt(q+1))?(t=65536+((1023&t)<<10)+(1023&J.charCodeAt(++q)),T[b++]=t>>18|240,T[b++]=t>>12&63|128,T[b++]=t>>6&63|128,T[b++]=63&t|128):(T[b++]=t>>12|224,T[b++]=t>>6&63|128,T[b++]=63&t|128)}return T},t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(J,T){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let t=0;t<J.length;t+=3){const T=J[t],j=t+1<J.length,B=j?J[t+1]:0,Y=t+2<J.length,C=Y?J[t+2]:0,F=T>>2,A=(3&T)<<4|B>>4;let a=(15&B)<<2|C>>6,P=63&C;Y||(P=64,j||(a=64)),q.push(b[F],b[A],b[a],b[P])}return q.join("")},encodeString(J,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(J):this.encodeByteArray(q(J),T)},decodeString(J,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(J):function(J){const T=[];let b=0,q=0;for(;b<J.length;){const t=J[b++];if(t<128)T[q++]=String.fromCharCode(t);else if(t>191&&t<224){const j=J[b++];T[q++]=String.fromCharCode((31&t)<<6|63&j)}else if(t>239&&t<365){const j=((7&t)<<18|(63&J[b++])<<12|(63&J[b++])<<6|63&J[b++])-65536;T[q++]=String.fromCharCode(55296+(j>>10)),T[q++]=String.fromCharCode(56320+(1023&j))}else{const j=J[b++],B=J[b++];T[q++]=String.fromCharCode((15&t)<<12|(63&j)<<6|63&B)}}return T.join("")}(this.decodeStringToByteArray(J,T))},decodeStringToByteArray(J,T){this.init_();const b=T?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let t=0;t<J.length;){const T=b[J.charAt(t++)],B=t<J.length?b[J.charAt(t)]:0;++t;const Y=t<J.length?b[J.charAt(t)]:64;++t;const C=t<J.length?b[J.charAt(t)]:64;if(++t,null==T||null==B||null==Y||null==C)throw new j;const F=T<<2|B>>4;if(q.push(F),64!==Y){const J=B<<4&240|Y>>2;if(q.push(J),64!==C){const J=Y<<6&192|C;q.push(J)}}}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}};class j extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B=function(J){return function(J){const T=q(J);return t.encodeByteArray(T,!0)}(J).replace(/\./g,"")},Y=function(J){try{return t.decodeString(J,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};const C=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof b.g)return b.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,F=()=>{try{return C()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let J;try{J=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(b){return}const T=J&&Y(J[1]);return T&&JSON.parse(T)})()}catch(J){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${J}`)}},A=J=>{var T,b;return null===(b=null===(T=F())||void 0===T?void 0:T.emulatorHosts)||void 0===b?void 0:b[J]},a=()=>{var J;return null===(J=F())||void 0===J?void 0:J.config},P=J=>{var T;return null===(T=F())||void 0===T?void 0:T[`_${J}`]};class v{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((J,T)=>{this.resolve=J,this.reject=T}))}wrapCallback(J){return(T,b)=>{T?this.reject(T):this.resolve(b),"function"===typeof J&&(this.promise.catch((()=>{})),1===J.length?J(T):J(T,b))}}}function G(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(G())}function I(){const J="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof J&&void 0!==J.id}function u(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function U(){const J=G();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function K(){try{return"object"===typeof indexedDB}catch(J){return!1}}function E(){return new Promise(((J,T)=>{try{let b=!0;const q="validate-browser-context-for-indexeddb-analytics-module",t=self.indexedDB.open(q);t.onsuccess=()=>{t.result.close(),b||self.indexedDB.deleteDatabase(q),J(!0)},t.onupgradeneeded=()=>{b=!1},t.onerror=()=>{var J;T((null===(J=t.error)||void 0===J?void 0:J.message)||"")}}catch(b){T(b)}}))}function l(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class W extends Error{constructor(J,T,b){super(T),this.code=J,this.customData=b,this.name="FirebaseError",Object.setPrototypeOf(this,W.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p.prototype.create)}}class p{constructor(J,T,b){this.service=J,this.serviceName=T,this.errors=b}create(J){const T=(arguments.length<=1?void 0:arguments[1])||{},b=`${this.service}/${J}`,q=this.errors[J],t=q?function(J,T){return J.replace(o,((J,b)=>{const q=T[b];return null!=q?String(q):`<${b}?>`}))}(q,T):"Error",j=`${this.serviceName}: ${t} (${b}).`;return new W(b,j,T)}}const o=/\{\$([^}]+)}/g;function S(J){for(const T in J)if(Object.prototype.hasOwnProperty.call(J,T))return!1;return!0}function H(J,T){if(J===T)return!0;const b=Object.keys(J),q=Object.keys(T);for(const t of b){if(!q.includes(t))return!1;const b=J[t],j=T[t];if(s(b)&&s(j)){if(!H(b,j))return!1}else if(b!==j)return!1}for(const t of q)if(!b.includes(t))return!1;return!0}function s(J){return null!==J&&"object"===typeof J}function g(J){const T=[];for(const[b,q]of Object.entries(J))Array.isArray(q)?q.forEach((J=>{T.push(encodeURIComponent(b)+"="+encodeURIComponent(J))})):T.push(encodeURIComponent(b)+"="+encodeURIComponent(q));return T.length?"&"+T.join("&"):""}function d(J){const T={};return J.replace(/^\?/,"").split("&").forEach((J=>{if(J){const[b,q]=J.split("=");T[decodeURIComponent(b)]=decodeURIComponent(q)}})),T}function w(J){const T=J.indexOf("?");if(!T)return"";const b=J.indexOf("#",T);return J.substring(T,b>0?b:void 0)}function Z(J,T){const b=new e(J,T);return b.subscribe.bind(b)}class e{constructor(J,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then((()=>{J(this)})).catch((J=>{this.error(J)}))}next(J){this.forEachObserver((T=>{T.next(J)}))}error(J){this.forEachObserver((T=>{T.error(J)})),this.close(J)}complete(){this.forEachObserver((J=>{J.complete()})),this.close()}subscribe(J,T,b){let q;if(void 0===J&&void 0===T&&void 0===b)throw new Error("Missing Observer.");q=function(J,T){if("object"!==typeof J||null===J)return!1;for(const b of T)if(b in J&&"function"===typeof J[b])return!0;return!1}(J,["next","error","complete"])?J:{next:J,error:T,complete:b},void 0===q.next&&(q.next=c),void 0===q.error&&(q.error=c),void 0===q.complete&&(q.complete=c);const t=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch(J){}})),this.observers.push(q),t}unsubscribeOne(J){void 0!==this.observers&&void 0!==this.observers[J]&&(delete this.observers[J],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(J){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,J)}sendOne(J,T){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[J])try{T(this.observers[J])}catch(b){"undefined"!==typeof console&&console.error&&console.error(b)}}))}close(J){this.finalized||(this.finalized=!0,void 0!==J&&(this.finalError=J),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function c(){}const V=1e3,Q=2,h=144e5,i=.5;function m(J){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q;const b=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:V)*Math.pow(T,J),q=Math.round(i*b*(Math.random()-.5)*2);return Math.min(h,b+q)}function O(J){return J&&J._delegate?J._delegate:J}},11638:(J,T,b)=>{b.d(T,{e:()=>j.g,h:()=>aJ,j:()=>y,n:()=>bJ,o:()=>qJ,q:()=>JJ,u:()=>YJ,v:()=>TJ,z:()=>jJ,C:()=>tJ,E:()=>BJ,I:()=>xJ,P:()=>vJ,M:()=>GJ,Q:()=>PJ,U:()=>uJ,V:()=>IJ,Y:()=>UJ});var q=b(11643),t=b(11657),j=b(11652);let B,Y;const C=new WeakMap,F=new WeakMap,A=new WeakMap,a=new WeakMap,P=new WeakMap;let v={get(J,T,b){if(J instanceof IDBTransaction){if("done"===T)return F.get(J);if("objectStoreNames"===T)return J.objectStoreNames||A.get(J);if("store"===T)return b.objectStoreNames[1]?void 0:b.objectStore(b.objectStoreNames[0])}return I(J[T])},set:(J,T,b)=>(J[T]=b,!0),has:(J,T)=>J instanceof IDBTransaction&&("done"===T||"store"===T)||T in J};function G(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(J)?function(){for(var T=arguments.length,b=new Array(T),q=0;q<T;q++)b[q]=arguments[q];return J.apply(u(this),b),I(C.get(this))}:function(){for(var T=arguments.length,b=new Array(T),q=0;q<T;q++)b[q]=arguments[q];return I(J.apply(u(this),b))}:function(T){for(var b=arguments.length,q=new Array(b>1?b-1:0),t=1;t<b;t++)q[t-1]=arguments[t];const j=J.call(u(this),T,...q);return A.set(j,T.sort?T.sort():[T]),I(j)}}function x(J){return"function"===typeof J?G(J):(J instanceof IDBTransaction&&function(J){if(F.has(J))return;const T=new Promise(((T,b)=>{const q=()=>{J.removeEventListener("complete",t),J.removeEventListener("error",j),J.removeEventListener("abort",j)},t=()=>{T(),q()},j=()=>{b(J.error||new DOMException("AbortError","AbortError")),q()};J.addEventListener("complete",t),J.addEventListener("error",j),J.addEventListener("abort",j)}));F.set(J,T)}(J),T=J,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((J=>T instanceof J))?new Proxy(J,v):J);var T}function I(J){if(J instanceof IDBRequest)return function(J){const T=new Promise(((T,b)=>{const q=()=>{J.removeEventListener("success",t),J.removeEventListener("error",j)},t=()=>{T(I(J.result)),q()},j=()=>{b(J.error),q()};J.addEventListener("success",t),J.addEventListener("error",j)}));return T.then((T=>{T instanceof IDBCursor&&C.set(T,J)})).catch((()=>{})),P.set(T,J),T}(J);if(a.has(J))return a.get(J);const T=x(J);return T!==J&&(a.set(J,T),P.set(T,J)),T}const u=J=>P.get(J);const U=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],E=new Map;function l(J,T){if(!(J instanceof IDBDatabase)||T in J||"string"!==typeof T)return;if(E.get(T))return E.get(T);const b=T.replace(/FromIndex$/,""),q=T!==b,t=K.includes(b);if(!(b in(q?IDBIndex:IDBObjectStore).prototype)||!t&&!U.includes(b))return;const j=async function(J){const T=this.transaction(J,t?"readwrite":"readonly");let j=T.store;for(var B=arguments.length,Y=new Array(B>1?B-1:0),C=1;C<B;C++)Y[C-1]=arguments[C];return q&&(j=j.index(Y.shift())),(await Promise.all([j[b](...Y),t&&T.done]))[0]};return E.set(T,j),j}v=(J=>({...J,get:(T,b,q)=>l(T,b)||J.get(T,b,q),has:(T,b)=>!!l(T,b)||J.has(T,b)}))(v);class W{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map((J=>{if(function(J){const T=J.getComponent();return"VERSION"===(null===T||void 0===T?void 0:T.type)}(J)){const T=J.getImmediate();return`${T.library}/${T.version}`}return null})).filter((J=>J)).join(" ")}}const p="@firebase/app",o="0.9.13",S=new t.g("@firebase/app"),H="@firebase/app-compat",s="@firebase/analytics-compat",g="@firebase/analytics",d="@firebase/app-check-compat",w="@firebase/app-check",Z="@firebase/auth",e="@firebase/auth-compat",c="@firebase/database",V="@firebase/database-compat",Q="@firebase/functions",h="@firebase/functions-compat",i="@firebase/installations",m="@firebase/installations-compat",O="@firebase/messaging",X="@firebase/messaging-compat",L="@firebase/performance",r="@firebase/performance-compat",N="@firebase/remote-config",R="@firebase/remote-config-compat",n="@firebase/storage",D="@firebase/storage-compat",f="@firebase/firestore",z="@firebase/firestore-compat",M="firebase",y="[DEFAULT]",k={[p]:"fire-core",[H]:"fire-core-compat",[g]:"fire-analytics",[s]:"fire-analytics-compat",[w]:"fire-app-check",[d]:"fire-app-check-compat",[Z]:"fire-auth",[e]:"fire-auth-compat",[c]:"fire-rtdb",[V]:"fire-rtdb-compat",[Q]:"fire-fn",[h]:"fire-fn-compat",[i]:"fire-iid",[m]:"fire-iid-compat",[O]:"fire-fcm",[X]:"fire-fcm-compat",[L]:"fire-perf",[r]:"fire-perf-compat",[N]:"fire-rc",[R]:"fire-rc-compat",[n]:"fire-gcs",[D]:"fire-gcs-compat",[f]:"fire-fst",[z]:"fire-fst-compat","fire-js":"fire-js",[M]:"fire-js-all"},JJ=new Map,TJ=new Map;function bJ(J,T){try{J.container._g(T)}catch(b){S.debug(`Component ${T.name} failed to register with FirebaseApp ${J.name}`,b)}}function qJ(J,T){J.container.addOrOverwriteComponent(T)}function tJ(J){const T=J.name;if(TJ.has(T))return S.debug(`There were multiple attempts to register component ${T}.`),!1;TJ.set(T,J);for(const b of JJ.values())bJ(b,J);return!0}function jJ(J,T){const b=J.container.getProvider("heartbeat").getImmediate({optional:!0});return b&&b.triggerHeartbeat(),J.container.getProvider(T)}function BJ(J,T){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;jJ(J,T).clearInstance(b)}function YJ(){TJ.clear()}const CJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},FJ=new j.f("app","Firebase",CJ);class AJ{constructor(J,T,b){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},T),this._name=T.name,this._automaticDataCollectionEnabled=T.automaticDataCollectionEnabled,this._container=b,this.container._g(new q.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw FJ.create("app-deleted",{appName:this._name})}}const aJ="9.23.0";function PJ(J){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=J;if("object"!==typeof T){T={name:T}}const t=Object.assign({name:y,automaticDataCollectionEnabled:!1},T),B=t.name;if("string"!==typeof B||!B)throw FJ.create("bad-app-name",{appName:String(B)});if(b||(b=(0,j.E)()),!b)throw FJ.create("no-options");const Y=JJ.get(B);if(Y){if((0,j.z)(b,Y.options)&&(0,j.z)(t,Y.config))return Y;throw FJ.create("duplicate-app",{appName:B})}const C=new q.d(B);for(const q of TJ.values())C._g(q);const F=new AJ(b,t,C);return JJ.set(B,F),F}function vJ(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const T=JJ.get(J);if(!T&&J===y&&(0,j.E)())return PJ();if(!T)throw FJ.create("no-app",{appName:J});return T}function GJ(){return Array.from(JJ.values())}async function xJ(J){const T=J.name;JJ.has(T)&&(JJ.delete(T),await Promise.all(J.container.getProviders().map((J=>J.delete()))),J.isDeleted=!0)}function IJ(J,T,b){var t;let j=null!==(t=k[J])&&void 0!==t?t:J;b&&(j+=`-${b}`);const B=j.match(/\s|\//),Y=T.match(/\s|\//);if(B||Y){const J=[`Unable to register library "${j}" with version "${T}":`];return B&&J.push(`library name "${j}" contains illegal characters (whitespace or "/")`),B&&Y&&J.push("and"),Y&&J.push(`version name "${T}" contains illegal characters (whitespace or "/")`),void S.warn(J.join(" "))}tJ(new q.e(`${j}-version`,(()=>({library:j,version:T})),"VERSION"))}function uJ(J,T){if(null!==J&&"function"!==typeof J)throw FJ.create("invalid-log-argument");(0,t.k)(J,T)}function UJ(J){(0,t.i)(J)}const KJ="firebase-heartbeat-store";let EJ=null;function lJ(){return EJ||(EJ=function(J,T){let{blocked:b,upgrade:q,blocking:t,terminated:j}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const B=indexedDB.open(J,T),Y=I(B);return q&&B.addEventListener("upgradeneeded",(J=>{q(I(B.result),J.oldVersion,J.newVersion,I(B.transaction),J)})),b&&B.addEventListener("blocked",(J=>b(J.oldVersion,J.newVersion,J))),Y.then((J=>{j&&J.addEventListener("close",(()=>j())),t&&J.addEventListener("versionchange",(J=>t(J.oldVersion,J.newVersion,J)))})).catch((()=>{})),Y}("firebase-heartbeat-database",1,{upgrade:(J,T)=>{if(0===T)J.createObjectStore(KJ)}}).catch((J=>{throw FJ.create("idb-open",{originalErrorMessage:J.message})}))),EJ}async function WJ(J,T){try{const b=(await lJ()).transaction(KJ,"readwrite"),q=b.objectStore(KJ);await q.put(T,pJ(J)),await b.done}catch(b){if(b instanceof j.g)S.warn(b.message);else{const J=FJ.create("idb-set",{originalErrorMessage:null===b||void 0===b?void 0:b.message});S.warn(J.message)}}}function pJ(J){return`${J.name}!${J.options.appId}`}class oJ{constructor(J){this.container=J,this._heartbeatsCache=null;const T=this.container.getProvider("app").getImmediate();this.Vd=new HJ(T),this._heartbeatsCachePromise=this.Vd.read().then((J=>(this._heartbeatsCache=J,J)))}async triggerHeartbeat(){const J=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),T=SJ();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==T&&!this._heartbeatsCache.heartbeats.some((J=>J.date===T)))return this._heartbeatsCache.heartbeats.push({date:T,agent:J}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((J=>{const T=new Date(J.date).valueOf();return Date.now()-T<=2592e6})),this.Vd.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const J=SJ(),{heartbeatsToSend:T,unsentEntries:b}=function(J){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const b=[];let q=J.slice();for(const t of J){const J=b.find((J=>J.agent===t.agent));if(J){if(J.dates.push(t.date),sJ(b)>T){J.dates.pop();break}}else if(b.push({agent:t.agent,dates:[t.date]}),sJ(b)>T){b.pop();break}q=q.slice(1)}return{heartbeatsToSend:b,unsentEntries:q}}(this._heartbeatsCache.heartbeats),q=(0,j.p)(JSON.stringify({version:2,heartbeats:T}));return this._heartbeatsCache.lastSentHeartbeatDate=J,b.length>0?(this._heartbeatsCache.heartbeats=b,await this.Vd.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Vd.overwrite(this._heartbeatsCache)),q}}function SJ(){return(new Date).toISOString().substring(0,10)}class HJ{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,j.cb)()&&(0,j.ob)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(J){try{const T=await lJ();return await T.transaction(KJ).objectStore(KJ).get(pJ(J))}catch(T){if(T instanceof j.g)S.warn(T.message);else{const J=FJ.create("idb-get",{originalErrorMessage:null===T||void 0===T?void 0:T.message});S.warn(J.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(J){var T;if(await this._canUseIndexedDBPromise){const b=await this.read();return WJ(this.app,{lastSentHeartbeatDate:null!==(T=J.lastSentHeartbeatDate)&&void 0!==T?T:b.lastSentHeartbeatDate,heartbeats:J.heartbeats})}}async add(J){var T;if(await this._canUseIndexedDBPromise){const b=await this.read();return WJ(this.app,{lastSentHeartbeatDate:null!==(T=J.lastSentHeartbeatDate)&&void 0!==T?T:b.lastSentHeartbeatDate,heartbeats:[...b.heartbeats,...J.heartbeats]})}}}function sJ(J){return(0,j.p)(JSON.stringify({version:2,heartbeats:J})).length}var gJ;gJ="",tJ(new q.e("platform-logger",(J=>new W(J)),"PRIVATE")),tJ(new q.e("heartbeat",(J=>new oJ(J)),"PRIVATE")),IJ(p,o,gJ),IJ(p,o,"esm2017"),IJ("fire-js","")},11643:(J,T,b)=>{b.d(T,{d:()=>Y,e:()=>t});var q=b(11652);class t{constructor(J,T,b){this.name=J,this.instanceFactory=T,this.type=b,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const j="[DEFAULT]";class B{constructor(J,T){this.name=J,this.container=T,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const T=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(T)){const J=new q.c;if(this.instancesDeferred.set(T,J),this.isInitialized(T)||this.shouldAutoInitialize())try{const b=this.getOrInitializeService({instanceIdentifier:T});b&&J.resolve(b)}catch(b){}}return this.instancesDeferred.get(T).promise}getImmediate(J){var T;const b=this.normalizeInstanceIdentifier(null===J||void 0===J?void 0:J.identifier),q=null!==(T=null===J||void 0===J?void 0:J.optional)&&void 0!==T&&T;if(!this.isInitialized(b)&&!this.shouldAutoInitialize()){if(q)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:b})}catch(t){if(q)return null;throw t}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function(J){return"EAGER"===J.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:j})}catch(T){}for(const[J,b]of this.instancesDeferred.entries()){const q=this.normalizeInstanceIdentifier(J);try{const J=this.getOrInitializeService({instanceIdentifier:q});b.resolve(J)}catch(T){}}}}clearInstance(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}async delete(){const J=Array.from(this.instances.values());await Promise.all([...J.filter((J=>"INTERNAL"in J)).map((J=>J.INTERNAL.delete())),...J.filter((J=>"_delete"in J)).map((J=>J._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instances.has(J)}getOptions(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instancesOptions.get(J)||{}}initialize(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:T={}}=J,b=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(b))throw Error(`${this.name}(${b}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const q=this.getOrInitializeService({instanceIdentifier:b,options:T});for(const[t,j]of this.instancesDeferred.entries()){b===this.normalizeInstanceIdentifier(t)&&j.resolve(q)}return q}dl(J,T){var b;const q=this.normalizeInstanceIdentifier(T),t=null!==(b=this.onInitCallbacks.get(q))&&void 0!==b?b:new Set;t.add(J),this.onInitCallbacks.set(q,t);const j=this.instances.get(q);return j&&J(j,q),()=>{t.delete(J)}}invokeOnInitCallbacks(J,T){const b=this.onInitCallbacks.get(T);if(b)for(const t of b)try{t(J,T)}catch(q){}}getOrInitializeService(J){let{instanceIdentifier:T,options:b={}}=J,q=this.instances.get(T);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(t=T,t===j?void 0:t),options:b}),this.instances.set(T,q),this.instancesOptions.set(T,b),this.invokeOnInitCallbacks(q,T),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,T,q)}catch(B){}var t;return q||null}normalizeInstanceIdentifier(){let J=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.component?this.component.multipleInstances?J:j:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(J){this.name=J,this.providers=new Map}_g(J){const T=this.getProvider(J.name);if(T.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);T.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this._g(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const T=new B(J,this);return this.providers.set(J,T),T}getProviders(){return Array.from(this.providers.values())}}},11657:(J,T,b)=>{b.d(T,{d:()=>t,g:()=>F,i:()=>A,k:()=>a});const q=[];var t;!function(J){J[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT"}(t||(t={}));const j={debug:t.DEBUG,verbose:t.VERBOSE,info:t.INFO,warn:t.WARN,error:t.ERROR,silent:t.SILENT},B=t.INFO,Y={[t.DEBUG]:"log",[t.VERBOSE]:"log",[t.INFO]:"info",[t.WARN]:"warn",[t.ERROR]:"error"},C=function(J,T){if(T<J.logLevel)return;const b=(new Date).toISOString(),q=Y[T];if(!q)throw new Error(`Attempted to log a message with an invalid logType (value: ${T})`);for(var t=arguments.length,j=new Array(t>2?t-2:0),B=2;B<t;B++)j[B-2]=arguments[B];console[q](`[${b}]  ${J.name}:`,...j)};class F{constructor(J){this.name=J,this._logLevel=B,this._logHandler=C,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(J){if(!(J in t))throw new TypeError(`Invalid value "${J}" assigned to \`logLevel\``);this._logLevel=J}setLogLevel(J){this._logLevel="string"===typeof J?j[J]:J}get logHandler(){return this._logHandler}set logHandler(J){if("function"!==typeof J)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=J}get userLogHandler(){return this._userLogHandler}set userLogHandler(J){this._userLogHandler=J}debug(){for(var J=arguments.length,T=new Array(J),b=0;b<J;b++)T[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,t.DEBUG,...T),this._logHandler(this,t.DEBUG,...T)}log(){for(var J=arguments.length,T=new Array(J),b=0;b<J;b++)T[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,t.VERBOSE,...T),this._logHandler(this,t.VERBOSE,...T)}info(){for(var J=arguments.length,T=new Array(J),b=0;b<J;b++)T[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,t.INFO,...T),this._logHandler(this,t.INFO,...T)}warn(){for(var J=arguments.length,T=new Array(J),b=0;b<J;b++)T[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,t.WARN,...T),this._logHandler(this,t.WARN,...T)}error(){for(var J=arguments.length,T=new Array(J),b=0;b<J;b++)T[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,t.ERROR,...T),this._logHandler(this,t.ERROR,...T)}}function A(J){q.forEach((T=>{T.setLogLevel(J)}))}function a(J,T){for(const b of q){let q=null;T&&T.level&&(q=j[T.level]),b.userLogHandler=null===J?null:function(T,b){for(var j=arguments.length,B=new Array(j>2?j-2:0),Y=2;Y<j;Y++)B[Y-2]=arguments[Y];const C=B.map((J=>{if(null==J)return null;if("string"===typeof J)return J;if("number"===typeof J||"boolean"===typeof J)return J.toString();if(J instanceof Error)return J.message;try{return JSON.stringify(J)}catch(T){return null}})).filter((J=>J)).join(" ");b>=(null!==q&&void 0!==q?q:T.logLevel)&&J({level:t[b].toLowerCase(),message:C,args:B,type:T.name})}}}}}]);