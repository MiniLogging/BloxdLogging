/*! For license information please see 1cco4t.20.3e4ffe7f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[20],{11822:(n,k,T)=>{T.d(k,{$:()=>r,C:()=>U,D:()=>P,G:()=>S,K:()=>W,N:()=>t,Q:()=>H,S:()=>b,T:()=>v,X:()=>z,cb:()=>s,e:()=>J,eb:()=>C,fb:()=>g,gb:()=>x,h:()=>f,j:()=>u,k:()=>O,kb:()=>q,m:()=>w,q:()=>G,t:()=>B,x:()=>V,y:()=>F});const c=function(n){const k=[];let T=0;for(let c=0;c<n.length;c++){let K=n.charCodeAt(c);K<128?k[T++]=K:K<2048?(k[T++]=K>>6|192,k[T++]=63&K|128):55296===(64512&K)&&c+1<n.length&&56320===(64512&n.charCodeAt(c+1))?(K=65536+((1023&K)<<10)+(1023&n.charCodeAt(++c)),k[T++]=K>>18|240,k[T++]=K>>12&63|128,k[T++]=K>>6&63|128,k[T++]=63&K|128):(k[T++]=K>>12|224,k[T++]=K>>6&63|128,k[T++]=63&K|128)}return k},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(n,k){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=k?this.byteToCharMapWebSafe_:this.byteToCharMap_,c=[];for(let K=0;K<n.length;K+=3){const k=n[K],Q=K+1<n.length,G=Q?n[K+1]:0,w=K+2<n.length,E=w?n[K+2]:0,I=k>>2,S=(3&k)<<4|G>>4;let P=(15&G)<<2|E>>6,W=63&E;w||(W=64,Q||(P=64)),c.push(T[I],T[S],T[P],T[W])}return c.join("")},encodeString(n,k){return this.HAS_NATIVE_SUPPORT&&!k?btoa(n):this.encodeByteArray(c(n),k)},decodeString(n,k){return this.HAS_NATIVE_SUPPORT&&!k?atob(n):function(n){const k=[];let T=0,c=0;for(;T<n.length;){const K=n[T++];if(K<128)k[c++]=String.fromCharCode(K);else if(K>191&&K<224){const Q=n[T++];k[c++]=String.fromCharCode((31&K)<<6|63&Q)}else if(K>239&&K<365){const Q=((7&K)<<18|(63&n[T++])<<12|(63&n[T++])<<6|63&n[T++])-65536;k[c++]=String.fromCharCode(55296+(Q>>10)),k[c++]=String.fromCharCode(56320+(1023&Q))}else{const Q=n[T++],G=n[T++];k[c++]=String.fromCharCode((15&K)<<12|(63&Q)<<6|63&G)}}return k.join("")}(this.decodeStringToByteArray(n,k))},decodeStringToByteArray(n,k){this.init_();const T=k?this.charToByteMapWebSafe_:this.charToByteMap_,c=[];for(let K=0;K<n.length;){const k=T[n.charAt(K++)],G=K<n.length?T[n.charAt(K)]:0;++K;const w=K<n.length?T[n.charAt(K)]:64;++K;const E=K<n.length?T[n.charAt(K)]:64;if(++K,null==k||null==G||null==w||null==E)throw new Q;const I=k<<2|G>>4;if(c.push(I),64!==w){const n=G<<4&240|w>>2;if(c.push(n),64!==E){const n=w<<6&192|E;c.push(n)}}}return c},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G=function(n){return function(n){const k=c(n);return K.encodeByteArray(k,!0)}(n).replace(/\./g,"")},w=function(n){try{return K.decodeString(n,!0)}catch(k){console.error("base64Decode failed: ",k)}return null};const E=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof T.g)return T.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,I=()=>{try{return E()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(T){return}const k=n&&w(n[1]);return k&&JSON.parse(k)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},S=n=>{var k,T;return null===(T=null===(k=I())||void 0===k?void 0:k.emulatorHosts)||void 0===T?void 0:T[n]},P=()=>{var n;return null===(n=I())||void 0===n?void 0:n.config},W=n=>{var k;return null===(k=I())||void 0===k?void 0:k[`_${n}`]};class J{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((n,k)=>{this.resolve=n,this.reject=k}))}wrapCallback(n){return(k,T)=>{k?this.reject(k):this.resolve(T),"function"===typeof n&&(this.promise.catch((()=>{})),1===n.length?n(k):n(k,T))}}}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function s(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())}function b(){const n="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof n&&void 0!==n.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function z(){const n=H();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function r(){try{return"object"===typeof indexedDB}catch(n){return!1}}function q(){return new Promise(((n,k)=>{try{let T=!0;const c="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(c);K.onsuccess=()=>{K.result.close(),T||self.indexedDB.deleteDatabase(c),n(!0)},K.onupgradeneeded=()=>{T=!1},K.onerror=()=>{var n;k((null===(n=K.error)||void 0===n?void 0:n.message)||"")}}catch(T){k(T)}}))}function O(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class u extends Error{constructor(n,k,T){super(k),this.code=n,this.customData=T,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,f.prototype.create)}}class f{constructor(n,k,T){this.service=n,this.serviceName=k,this.errors=T}create(n){const k=(arguments.length<=1?void 0:arguments[1])||{},T=`${this.service}/${n}`,c=this.errors[n],K=c?function(n,k){return n.replace(A,((n,T)=>{const c=k[T];return null!=c?String(c):`<${T}?>`}))}(c,k):"Error",Q=`${this.serviceName}: ${K} (${T}).`;return new u(T,Q,k)}}const A=/\{\$([^}]+)}/g;function v(n){for(const k in n)if(Object.prototype.hasOwnProperty.call(n,k))return!1;return!0}function F(n,k){if(n===k)return!0;const T=Object.keys(n),c=Object.keys(k);for(const K of T){if(!c.includes(K))return!1;const T=n[K],Q=k[K];if(m(T)&&m(Q)){if(!F(T,Q))return!1}else if(T!==Q)return!1}for(const K of c)if(!T.includes(K))return!1;return!0}function m(n){return null!==n&&"object"===typeof n}function x(n){const k=[];for(const[T,c]of Object.entries(n))Array.isArray(c)?c.forEach((n=>{k.push(encodeURIComponent(T)+"="+encodeURIComponent(n))})):k.push(encodeURIComponent(T)+"="+encodeURIComponent(c));return k.length?"&"+k.join("&"):""}function g(n){const k={};return n.replace(/^\?/,"").split("&").forEach((n=>{if(n){const[T,c]=n.split("=");k[decodeURIComponent(T)]=decodeURIComponent(c)}})),k}function U(n){const k=n.indexOf("?");if(!k)return"";const T=n.indexOf("#",k);return n.substring(k,T>0?T:void 0)}function V(n,k){const T=new Y(n,k);return T.subscribe.bind(T)}class Y{constructor(n,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then((()=>{n(this)})).catch((n=>{this.error(n)}))}next(n){this.forEachObserver((k=>{k.next(n)}))}error(n){this.forEachObserver((k=>{k.error(n)})),this.close(n)}complete(){this.forEachObserver((n=>{n.complete()})),this.close()}subscribe(n,k,T){let c;if(void 0===n&&void 0===k&&void 0===T)throw new Error("Missing Observer.");c=function(n,k){if("object"!==typeof n||null===n)return!1;for(const T of k)if(T in n&&"function"===typeof n[T])return!0;return!1}(n,["next","error","complete"])?n:{next:n,error:k,complete:T},void 0===c.next&&(c.next=Z),void 0===c.error&&(c.error=Z),void 0===c.complete&&(c.complete=Z);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch(n){}})),this.observers.push(c),K}unsubscribeOne(n){void 0!==this.observers&&void 0!==this.observers[n]&&(delete this.observers[n],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,n)}sendOne(n,k){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[n])try{k(this.observers[n])}catch(T){"undefined"!==typeof console&&console.error&&console.error(T)}}))}close(n){this.finalized||(this.finalized=!0,void 0!==n&&(this.finalError=n),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Z(){}const e=1e3,d=2,l=144e5,i=.5;function B(n){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;const T=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:e)*Math.pow(k,n),c=Math.round(i*T*(Math.random()-.5)*2);return Math.min(l,T+c)}function t(n){return n&&n._delegate?n._delegate:n}},11812:(n,k,T)=>{T.d(k,{b:()=>Q.j,c:()=>Pn,f:()=>y,h:()=>Tn,k:()=>cn,l:()=>nn,p:()=>wn,t:()=>kn,u:()=>Qn,w:()=>Kn,z:()=>Gn,D:()=>sn,H:()=>Jn,F:()=>Hn,I:()=>Wn,L:()=>Cn,N:()=>bn,R:()=>zn});var c=T(11817),K=T(11828),Q=T(11822);let G,w;const E=new WeakMap,I=new WeakMap,S=new WeakMap,P=new WeakMap,W=new WeakMap;let J={get(n,k,T){if(n instanceof IDBTransaction){if("done"===k)return I.get(n);if("objectStoreNames"===k)return n.objectStoreNames||S.get(n);if("store"===k)return T.objectStoreNames[1]?void 0:T.objectStore(T.objectStoreNames[0])}return b(n[k])},set:(n,k,T)=>(n[k]=T,!0),has:(n,k)=>n instanceof IDBTransaction&&("done"===k||"store"===k)||k in n};function H(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(w||(w=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(){for(var k=arguments.length,T=new Array(k),c=0;c<k;c++)T[c]=arguments[c];return n.apply(C(this),T),b(E.get(this))}:function(){for(var k=arguments.length,T=new Array(k),c=0;c<k;c++)T[c]=arguments[c];return b(n.apply(C(this),T))}:function(k){for(var T=arguments.length,c=new Array(T>1?T-1:0),K=1;K<T;K++)c[K-1]=arguments[K];const Q=n.call(C(this),k,...c);return S.set(Q,k.sort?k.sort():[k]),b(Q)}}function s(n){return"function"===typeof n?H(n):(n instanceof IDBTransaction&&function(n){if(I.has(n))return;const k=new Promise(((k,T)=>{const c=()=>{n.removeEventListener("complete",K),n.removeEventListener("error",Q),n.removeEventListener("abort",Q)},K=()=>{k(),c()},Q=()=>{T(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",K),n.addEventListener("error",Q),n.addEventListener("abort",Q)}));I.set(n,k)}(n),k=n,(G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((n=>k instanceof n))?new Proxy(n,J):n);var k}function b(n){if(n instanceof IDBRequest)return function(n){const k=new Promise(((k,T)=>{const c=()=>{n.removeEventListener("success",K),n.removeEventListener("error",Q)},K=()=>{k(b(n.result)),c()},Q=()=>{T(n.error),c()};n.addEventListener("success",K),n.addEventListener("error",Q)}));return k.then((k=>{k instanceof IDBCursor&&E.set(k,n)})).catch((()=>{})),W.set(k,n),k}(n);if(P.has(n))return P.get(n);const k=s(n);return k!==n&&(P.set(n,k),W.set(k,n)),k}const C=n=>W.get(n);const z=["get","getKey","getAll","getAllKeys","count"],r=["put","add","delete","clear"],q=new Map;function O(n,k){if(!(n instanceof IDBDatabase)||k in n||"string"!==typeof k)return;if(q.get(k))return q.get(k);const T=k.replace(/FromIndex$/,""),c=k!==T,K=r.includes(T);if(!(T in(c?IDBIndex:IDBObjectStore).prototype)||!K&&!z.includes(T))return;const Q=async function(n){const k=this.transaction(n,K?"readwrite":"readonly");let Q=k.store;for(var G=arguments.length,w=new Array(G>1?G-1:0),E=1;E<G;E++)w[E-1]=arguments[E];return c&&(Q=Q.index(w.shift())),(await Promise.all([Q[T](...w),K&&k.done]))[0]};return q.set(k,Q),Q}J=(n=>({...n,get:(k,T,c)=>O(k,T)||n.get(k,T,c),has:(k,T)=>!!O(k,T)||n.has(k,T)}))(J);class u{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map((n=>{if(function(n){const k=n.getComponent();return"VERSION"===(null===k||void 0===k?void 0:k.type)}(n)){const k=n.getImmediate();return`${k.library}/${k.version}`}return null})).filter((n=>n)).join(" ")}}const f="@firebase/app",A="0.9.13",v=new K.g("@firebase/app"),F="@firebase/app-compat",m="@firebase/analytics-compat",x="@firebase/analytics",g="@firebase/app-check-compat",U="@firebase/app-check",V="@firebase/auth",Y="@firebase/auth-compat",Z="@firebase/database",e="@firebase/database-compat",d="@firebase/functions",l="@firebase/functions-compat",i="@firebase/installations",B="@firebase/installations-compat",t="@firebase/messaging",M="@firebase/messaging-compat",o="@firebase/performance",D="@firebase/performance-compat",R="@firebase/remote-config",L="@firebase/remote-config-compat",h="@firebase/storage",j="@firebase/storage-compat",p="@firebase/firestore",a="@firebase/firestore-compat",X="firebase",y="[DEFAULT]",N={[f]:"fire-core",[F]:"fire-core-compat",[x]:"fire-analytics",[m]:"fire-analytics-compat",[U]:"fire-app-check",[g]:"fire-app-check-compat",[V]:"fire-auth",[Y]:"fire-auth-compat",[Z]:"fire-rtdb",[e]:"fire-rtdb-compat",[d]:"fire-fn",[l]:"fire-fn-compat",[i]:"fire-iid",[B]:"fire-iid-compat",[t]:"fire-fcm",[M]:"fire-fcm-compat",[o]:"fire-perf",[D]:"fire-perf-compat",[R]:"fire-rc",[L]:"fire-rc-compat",[h]:"fire-gcs",[j]:"fire-gcs-compat",[p]:"fire-fst",[a]:"fire-fst-compat","fire-js":"fire-js",[X]:"fire-js-all"},nn=new Map,kn=new Map;function Tn(n,k){try{n.container.bh(k)}catch(T){v.debug(`Component ${k.name} failed to register with FirebaseApp ${n.name}`,T)}}function cn(n,k){n.container.addOrOverwriteComponent(k)}function Kn(n){const k=n.name;if(kn.has(k))return v.debug(`There were multiple attempts to register component ${k}.`),!1;kn.set(k,n);for(const T of nn.values())Tn(T,n);return!0}function Qn(n,k){const T=n.container.getProvider("heartbeat").getImmediate({optional:!0});return T&&T.triggerHeartbeat(),n.container.getProvider(k)}function Gn(n,k){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;Qn(n,k).clearInstance(T)}function wn(){kn.clear()}const En={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},In=new Q.h("app","Firebase",En);class Sn{constructor(n,k,T){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},k),this._name=k.name,this._automaticDataCollectionEnabled=k.automaticDataCollectionEnabled,this._container=T,this.container.bh(new c.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}}const Pn="9.23.0";function Wn(n){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},T=n;if("object"!==typeof k){k={name:k}}const K=Object.assign({name:y,automaticDataCollectionEnabled:!1},k),G=K.name;if("string"!==typeof G||!G)throw In.create("bad-app-name",{appName:String(G)});if(T||(T=(0,Q.D)()),!T)throw In.create("no-options");const w=nn.get(G);if(w){if((0,Q.y)(T,w.options)&&(0,Q.y)(K,w.config))return w;throw In.create("duplicate-app",{appName:G})}const E=new c.d(G);for(const c of kn.values())E.bh(c);const I=new Sn(T,K,E);return nn.set(G,I),I}function Jn(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const k=nn.get(n);if(!k&&n===y&&(0,Q.D)())return Wn();if(!k)throw In.create("no-app",{appName:n});return k}function Hn(){return Array.from(nn.values())}async function sn(n){const k=n.name;nn.has(k)&&(nn.delete(k),await Promise.all(n.container.getProviders().map((n=>n.delete()))),n.isDeleted=!0)}function bn(n,k,T){var K;let Q=null!==(K=N[n])&&void 0!==K?K:n;T&&(Q+=`-${T}`);const G=Q.match(/\s|\//),w=k.match(/\s|\//);if(G||w){const n=[`Unable to register library "${Q}" with version "${k}":`];return G&&n.push(`library name "${Q}" contains illegal characters (whitespace or "/")`),G&&w&&n.push("and"),w&&n.push(`version name "${k}" contains illegal characters (whitespace or "/")`),void v.warn(n.join(" "))}Kn(new c.g(`${Q}-version`,(()=>({library:Q,version:k})),"VERSION"))}function Cn(n,k){if(null!==n&&"function"!==typeof n)throw In.create("invalid-log-argument");(0,K.j)(n,k)}function zn(n){(0,K.i)(n)}const rn="firebase-heartbeat-store";let qn=null;function On(){return qn||(qn=function(n,k){let{blocked:T,upgrade:c,blocking:K,terminated:Q}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const G=indexedDB.open(n,k),w=b(G);return c&&G.addEventListener("upgradeneeded",(n=>{c(b(G.result),n.oldVersion,n.newVersion,b(G.transaction),n)})),T&&G.addEventListener("blocked",(n=>T(n.oldVersion,n.newVersion,n))),w.then((n=>{Q&&n.addEventListener("close",(()=>Q())),K&&n.addEventListener("versionchange",(n=>K(n.oldVersion,n.newVersion,n)))})).catch((()=>{})),w}("firebase-heartbeat-database",1,{upgrade:(n,k)=>{if(0===k)n.createObjectStore(rn)}}).catch((n=>{throw In.create("idb-open",{originalErrorMessage:n.message})}))),qn}async function un(n,k){try{const T=(await On()).transaction(rn,"readwrite"),c=T.objectStore(rn);await c.put(k,fn(n)),await T.done}catch(T){if(T instanceof Q.j)v.warn(T.message);else{const n=In.create("idb-set",{originalErrorMessage:null===T||void 0===T?void 0:T.message});v.warn(n.message)}}}function fn(n){return`${n.name}!${n.options.appId}`}class An{constructor(n){this.container=n,this._heartbeatsCache=null;const k=this.container.getProvider("app").getImmediate();this.Nd=new Fn(k),this._heartbeatsCachePromise=this.Nd.read().then((n=>(this._heartbeatsCache=n,n)))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),k=vn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==k&&!this._heartbeatsCache.heartbeats.some((n=>n.date===k)))return this._heartbeatsCache.heartbeats.push({date:k,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((n=>{const k=new Date(n.date).valueOf();return Date.now()-k<=2592e6})),this.Nd.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const n=vn(),{heartbeatsToSend:k,unsentEntries:T}=function(n){let k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const T=[];let c=n.slice();for(const K of n){const n=T.find((n=>n.agent===K.agent));if(n){if(n.dates.push(K.date),mn(T)>k){n.dates.pop();break}}else if(T.push({agent:K.agent,dates:[K.date]}),mn(T)>k){T.pop();break}c=c.slice(1)}return{heartbeatsToSend:T,unsentEntries:c}}(this._heartbeatsCache.heartbeats),c=(0,Q.q)(JSON.stringify({version:2,heartbeats:k}));return this._heartbeatsCache.lastSentHeartbeatDate=n,T.length>0?(this._heartbeatsCache.heartbeats=T,await this.Nd.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Nd.overwrite(this._heartbeatsCache)),c}}function vn(){return(new Date).toISOString().substring(0,10)}class Fn{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,Q.$)()&&(0,Q.kb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(n){try{const k=await On();return await k.transaction(rn).objectStore(rn).get(fn(n))}catch(k){if(k instanceof Q.j)v.warn(k.message);else{const n=In.create("idb-get",{originalErrorMessage:null===k||void 0===k?void 0:k.message});v.warn(n.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(n){var k;if(await this._canUseIndexedDBPromise){const T=await this.read();return un(this.app,{lastSentHeartbeatDate:null!==(k=n.lastSentHeartbeatDate)&&void 0!==k?k:T.lastSentHeartbeatDate,heartbeats:n.heartbeats})}}async add(n){var k;if(await this._canUseIndexedDBPromise){const T=await this.read();return un(this.app,{lastSentHeartbeatDate:null!==(k=n.lastSentHeartbeatDate)&&void 0!==k?k:T.lastSentHeartbeatDate,heartbeats:[...T.heartbeats,...n.heartbeats]})}}}function mn(n){return(0,Q.q)(JSON.stringify({version:2,heartbeats:n})).length}var xn;xn="",Kn(new c.g("platform-logger",(n=>new u(n)),"PRIVATE")),Kn(new c.g("heartbeat",(n=>new An(n)),"PRIVATE")),bn(f,A,xn),bn(f,A,"esm2017"),bn("fire-js","")},11817:(n,k,T)=>{T.d(k,{d:()=>w,g:()=>K});var c=T(11822);class K{constructor(n,k,T){this.name=n,this.instanceFactory=k,this.type=T,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const Q="[DEFAULT]";class G{constructor(n,k){this.name=n,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const k=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(k)){const n=new c.e;if(this.instancesDeferred.set(k,n),this.isInitialized(k)||this.shouldAutoInitialize())try{const T=this.getOrInitializeService({instanceIdentifier:k});T&&n.resolve(T)}catch(T){}}return this.instancesDeferred.get(k).promise}getImmediate(n){var k;const T=this.normalizeInstanceIdentifier(null===n||void 0===n?void 0:n.identifier),c=null!==(k=null===n||void 0===n?void 0:n.optional)&&void 0!==k&&k;if(!this.isInitialized(T)&&!this.shouldAutoInitialize()){if(c)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:T})}catch(K){if(c)return null;throw K}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,this.shouldAutoInitialize()){if(function(n){return"EAGER"===n.instantiationMode}(n))try{this.getOrInitializeService({instanceIdentifier:Q})}catch(k){}for(const[n,T]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(n);try{const n=this.getOrInitializeService({instanceIdentifier:c});T.resolve(n)}catch(k){}}}}clearInstance(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter((n=>"INTERNAL"in n)).map((n=>n.INTERNAL.delete())),...n.filter((n=>"_delete"in n)).map((n=>n._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return this.instances.has(n)}getOptions(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return this.instancesOptions.get(n)||{}}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:k={}}=n,T=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(T))throw Error(`${this.name}(${T}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:T,options:k});for(const[K,Q]of this.instancesDeferred.entries()){T===this.normalizeInstanceIdentifier(K)&&Q.resolve(c)}return c}Wk(n,k){var T;const c=this.normalizeInstanceIdentifier(k),K=null!==(T=this.onInitCallbacks.get(c))&&void 0!==T?T:new Set;K.add(n),this.onInitCallbacks.set(c,K);const Q=this.instances.get(c);return Q&&n(Q,c),()=>{K.delete(n)}}invokeOnInitCallbacks(n,k){const T=this.onInitCallbacks.get(k);if(T)for(const K of T)try{K(n,k)}catch(c){}}getOrInitializeService(n){let{instanceIdentifier:k,options:T={}}=n,c=this.instances.get(k);if(!c&&this.component&&(c=this.component.instanceFactory(this.container,{instanceIdentifier:(K=k,K===Q?void 0:K),options:T}),this.instances.set(k,c),this.instancesOptions.set(k,T),this.invokeOnInitCallbacks(c,k),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,k,c)}catch(G){}var K;return c||null}normalizeInstanceIdentifier(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q;return this.component?this.component.multipleInstances?n:Q:n}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class w{constructor(n){this.name=n,this.providers=new Map}bh(n){const k=this.getProvider(n.name);if(k.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);k.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.bh(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const k=new G(n,this);return this.providers.set(n,k),k}getProviders(){return Array.from(this.providers.values())}}},11828:(n,k,T)=>{T.d(k,{d:()=>K,g:()=>I,i:()=>S,j:()=>P});const c=[];var K;!function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"}(K||(K={}));const Q={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},G=K.INFO,w={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},E=function(n,k){if(k<n.logLevel)return;const T=(new Date).toISOString(),c=w[k];if(!c)throw new Error(`Attempted to log a message with an invalid logType (value: ${k})`);for(var K=arguments.length,Q=new Array(K>2?K-2:0),G=2;G<K;G++)Q[G-2]=arguments[G];console[c](`[${T}]  ${n.name}:`,...Q)};class I{constructor(n){this.name=n,this._logLevel=G,this._logHandler=E,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in K))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel="string"===typeof n?Q[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if("function"!==typeof n)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(){for(var n=arguments.length,k=new Array(n),T=0;T<n;T++)k[T]=arguments[T];this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...k),this._logHandler(this,K.DEBUG,...k)}log(){for(var n=arguments.length,k=new Array(n),T=0;T<n;T++)k[T]=arguments[T];this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...k),this._logHandler(this,K.VERBOSE,...k)}info(){for(var n=arguments.length,k=new Array(n),T=0;T<n;T++)k[T]=arguments[T];this._userLogHandler&&this._userLogHandler(this,K.INFO,...k),this._logHandler(this,K.INFO,...k)}warn(){for(var n=arguments.length,k=new Array(n),T=0;T<n;T++)k[T]=arguments[T];this._userLogHandler&&this._userLogHandler(this,K.WARN,...k),this._logHandler(this,K.WARN,...k)}error(){for(var n=arguments.length,k=new Array(n),T=0;T<n;T++)k[T]=arguments[T];this._userLogHandler&&this._userLogHandler(this,K.ERROR,...k),this._logHandler(this,K.ERROR,...k)}}function S(n){c.forEach((k=>{k.setLogLevel(n)}))}function P(n,k){for(const T of c){let c=null;k&&k.level&&(c=Q[k.level]),T.userLogHandler=null===n?null:function(k,T){for(var Q=arguments.length,G=new Array(Q>2?Q-2:0),w=2;w<Q;w++)G[w-2]=arguments[w];const E=G.map((n=>{if(null==n)return null;if("string"===typeof n)return n;if("number"===typeof n||"boolean"===typeof n)return n.toString();if(n instanceof Error)return n.message;try{return JSON.stringify(n)}catch(k){return null}})).filter((n=>n)).join(" ");T>=(null!==c&&void 0!==c?c:k.logLevel)&&n({level:K[T].toLowerCase(),message:E,args:G,type:k.name})}}}}}]);