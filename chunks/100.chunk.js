"use strict";(self["6xhfpmwgjr5"]=self["6xhfpmwgjr5"]||[]).push([[100],{16531:(P,a,R)=>{R.r(a),R.d(a,{FlowGraphDeterminantBlock:()=>h,FlowGraphInvertMatrixBlock:()=>l,FlowGraphMatrixComposeBlock:()=>O,FlowGraphMatrixDecomposeBlock:()=>f,FlowGraphMatrixMultiplicationBlock:()=>V,FlowGraphTransposeBlock:()=>Q});var S=R(14549),A=R(14524),Z=R(12415),p=R(12376),j=R(16523),U=R(16508);class Q extends j.e{constructor(P){super((0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(P=>P.transpose?P.transpose():Z.Matrix.Transpose(P)),"FlowGraphTransposeBlock",P)}}(0,p.d)("FlowGraphTransposeBlock",Q);class h extends j.e{constructor(P){super((0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),A.p,(P=>P.determinant()),"FlowGraphDeterminantBlock",P)}}(0,p.d)("FlowGraphDeterminantBlock",h);class l extends j.e{constructor(P){super((0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(P=>P.inverse?P.inverse():Z.Matrix.Invert(P)),"FlowGraphInvertMatrixBlock",P)}}(0,p.d)("FlowGraphInvertMatrixBlock",l);class V extends U.d{constructor(P){super((0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),(0,A.J)((null===P||void 0===P?void 0:P.matrixType)||"Matrix"),((P,a)=>a.multiply(P)),"FlowGraphMatrixMultiplicationBlock",P)}}(0,p.d)("FlowGraphMatrixMultiplicationBlock",V);class f extends S.e{constructor(P){super(P),this.input=this.registerDataInput("input",A.i),this.position=this.registerDataOutput("position",A.z),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",A.r),this.qj=this.registerDataOutput("qj",A.z),this.isValid=this.registerDataOutput("isValid",A.d,!1)}_updateOutputs(P){const a=P._getExecutionVariable(this,"executionId",-1),R=P._getExecutionVariable(this,"cachedPosition",null),S=P._getExecutionVariable(this,"cachedRotation",null),A=P._getExecutionVariable(this,"cachedScaling",null);if(a===P.executionId&&R&&S&&A)this.position.setValue(R,P),this.rotationQuaternion.setValue(S,P),this.qj.setValue(A,P);else{const a=this.input.getValue(P),p=R||new Z.Oa,j=S||new Z.Quaternion,U=A||new Z.Oa,Q=Math.round(1e4*a.m[3])/1e4,h=Math.round(1e4*a.m[7])/1e4,l=Math.round(1e4*a.m[11])/1e4,V=Math.round(1e4*a.m[15])/1e4;if(0!==Q||0!==h||0!==l||1!==V)return this.isValid.setValue(!1,P),this.position.setValue(Z.Oa.Zero(),P),this.rotationQuaternion.setValue(Z.Quaternion.Identity(),P),void this.qj.setValue(Z.Oa.One(),P);const f=a.decompose(U,j,p);this.isValid.setValue(f,P),this.position.setValue(p,P),this.rotationQuaternion.setValue(j,P),this.qj.setValue(U,P),P._setExecutionVariable(this,"cachedPosition",p),P._setExecutionVariable(this,"cachedRotation",j),P._setExecutionVariable(this,"cachedScaling",U),P._setExecutionVariable(this,"executionId",P.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,p.d)("FlowGraphMatrixDecompose",f);class O extends S.e{constructor(P){super(P),this.position=this.registerDataInput("position",A.z),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",A.r),this.qj=this.registerDataInput("qj",A.z),this.value=this.registerDataOutput("value",A.i)}_updateOutputs(P){const a=P._getExecutionVariable(this,"executionId",-1),R=P._getExecutionVariable(this,"cachedMatrix",null);if(a===P.executionId&&R)this.value.setValue(R,P);else{const a=Z.Matrix.Compose(this.qj.getValue(P),this.rotationQuaternion.getValue(P),this.position.getValue(P));this.value.setValue(a,P),P._setExecutionVariable(this,"cachedMatrix",a),P._setExecutionVariable(this,"executionId",P.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,p.d)("FlowGraphMatrixCompose",O)},16508:(P,a,R)=>{R.d(a,{d:()=>A});var S=R(16515);class A extends S.d{constructor(P,a,R,S,A,Z){super(R,Z),this._operation=S,this._className=A,this.a=this.registerDataInput("a",P),this.b=this.registerDataInput("b",a)}_doOperation(P){const a=this.a.getValue(P),R=this.b.getValue(P);return this._operation(a,R)}getClassName(){return this._className}}},16515:(P,a,R)=>{R.d(a,{d:()=>j});var S=R(14549),A=R(14524);const Z="cachedOperationValue",p="cachedExecutionId";class j extends S.e{constructor(P,a){super(a),this.value=this.registerDataOutput("value",P),this.isValid=this.registerDataOutput("isValid",A.d)}_updateOutputs(P){const a=P._getExecutionVariable(this,p,-1),R=P._getExecutionVariable(this,Z,null);if(void 0!==R&&null!==R&&a===P.executionId)this.isValid.setValue(!0,P),this.value.setValue(R,P);else try{const a=this._doOperation(P);if(void 0===a||null===a)return void this.isValid.setValue(!1,P);P._setExecutionVariable(this,Z,a),P._setExecutionVariable(this,p,P.executionId),this.value.setValue(a,P),this.isValid.setValue(!0,P)}catch(S){this.isValid.setValue(!1,P)}}}},16523:(P,a,R)=>{R.d(a,{e:()=>A});var S=R(16515);class A extends S.d{constructor(P,a,R,S,A){super(a,A),this._operation=R,this._className=S,this.a=this.registerDataInput("a",P)}_doOperation(P){return this._operation(this.a.getValue(P))}getClassName(){return this._className}}}}]);