"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[60],{14362:(w,p,e)=>{e.r(p),e.d(p,{FlowGraphStopAnimationBlock:()=>q});var r=e(12872),I=e(11038),d=e(11081),f=e(12912);class q extends f.d{constructor(w){super(w),this.animationGroup=this.registerDataInput("animationGroup",r.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",r.o,-1)}_preparePendingTasks(w){const p=this.animationGroup.getValue(w),e=this.stopAtFrame.getValue(w)??-1,r=w._getGlobalContextVariable("pendingStopAnimations",[]);r.push({uniqueId:p.uniqueId,stopAtFrame:e}),w._setGlobalContextVariable("pendingStopAnimations",r)}_cancelPendingTasks(w){const p=this.animationGroup.getValue(w),e=w._getGlobalContextVariable("pendingStopAnimations",[]);for(let r=0;r<e.length;r++)if(e[r].uniqueId===p.uniqueId){e.splice(r,1),w._setGlobalContextVariable("pendingStopAnimations",e);break}}_execute(w){const p=this.animationGroup.getValue(w),e=this.stopAtFrame.getValue(w)??-1;return p?isNaN(e)?this._reportError(w,"Invalid stop time."):(e>0?this._startPendingTasks(w):this._stopAnimation(p,w),void this.out._activateSignal(w)):(d.c.Warn("No animation group provided to stop."),this._reportError(w,"No animation group provided to stop."))}_executeOnTick(w){const p=this.animationGroup.getValue(w),e=w._getGlobalContextVariable("pendingStopAnimations",[]);for(let r=0;r<e.length;r++)if(e[r].uniqueId===p.uniqueId&&p.getCurrentFrame()>=e[r].stopAtFrame){this._stopAnimation(p,w),e.splice(r,1),w._setGlobalContextVariable("pendingStopAnimations",e),this.done._activateSignal(w),w._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(w,p){const e=p._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),r=e.indexOf(w.uniqueId);-1!==r&&(w.stop(),e.splice(r,1),p._setGlobalContextVariable("currentlyRunningAnimationGroups",e))}}(0,I.d)("FlowGraphStopAnimationBlock",q)}}]);