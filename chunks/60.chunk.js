"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[60],{14227:(s,Z,o)=>{o.r(Z),o.d(Z,{FlowGraphStopAnimationBlock:()=>O});var t=o(12775),j=o(10916),S=o(10955),a=o(12828);class O extends a.c{constructor(s){super(s),this.animationGroup=this.registerDataInput("animationGroup",t.d),this.stopAtFrame=this.registerDataInput("stopAtFrame",t.w,-1)}_preparePendingTasks(s){const Z=this.animationGroup.getValue(s),o=this.stopAtFrame.getValue(s)??-1,t=s._getGlobalContextVariable("pendingStopAnimations",[]);t.push({uniqueId:Z.uniqueId,stopAtFrame:o}),s._setGlobalContextVariable("pendingStopAnimations",t)}_cancelPendingTasks(s){const Z=this.animationGroup.getValue(s),o=s._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<o.length;t++)if(o[t].uniqueId===Z.uniqueId){o.splice(t,1),s._setGlobalContextVariable("pendingStopAnimations",o);break}}_execute(s){const Z=this.animationGroup.getValue(s),o=this.stopAtFrame.getValue(s)??-1;return Z?isNaN(o)?this._reportError(s,"Invalid stop time."):(o>0?this._startPendingTasks(s):this._stopAnimation(Z,s),void this.out._activateSignal(s)):(S.b.Warn("No animation group provided to stop."),this._reportError(s,"No animation group provided to stop."))}_executeOnTick(s){const Z=this.animationGroup.getValue(s),o=s._getGlobalContextVariable("pendingStopAnimations",[]);for(let t=0;t<o.length;t++)if(o[t].uniqueId===Z.uniqueId&&Z.getCurrentFrame()>=o[t].stopAtFrame){this._stopAnimation(Z,s),o.splice(t,1),s._setGlobalContextVariable("pendingStopAnimations",o),this.done._activateSignal(s),s._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(s,Z){const o=Z._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),t=o.indexOf(s.uniqueId);-1!==t&&(s.stop(),o.splice(t,1),Z._setGlobalContextVariable("currentlyRunningAnimationGroups",o))}}(0,j.f)("FlowGraphStopAnimationBlock",O)}}]);