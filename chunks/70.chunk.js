"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[70],{14140:(h,d,m)=>{m.r(d),m.d(d,{FlowGraphDeterminantBlock:()=>M,FlowGraphInvertMatrixBlock:()=>q,FlowGraphMatrixComposeBlock:()=>R,FlowGraphMatrixDecomposeBlock:()=>I,FlowGraphMatrixMultiplicationBlock:()=>E,FlowGraphTransposeBlock:()=>S});var j=m(12687),A=m(12671),b=m(11058),w=m(11080),a=m(14128),D=m(14121);class S extends a.b{constructor(h){super((0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.transpose?h.transpose():b.b.Transpose(h)),"FlowGraphTransposeBlock",h)}}(0,w.i)("FlowGraphTransposeBlock",S);class M extends a.b{constructor(h){super((0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),A.y,(h=>h.determinant()),"FlowGraphDeterminantBlock",h)}}(0,w.i)("FlowGraphDeterminantBlock",M);class q extends a.b{constructor(h){super((0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(h=>h.inverse?h.inverse():b.b.Invert(h)),"FlowGraphInvertMatrixBlock",h)}}(0,w.i)("FlowGraphInvertMatrixBlock",q);class E extends D.b{constructor(h){super((0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),(0,A.M)((null===h||void 0===h?void 0:h.matrixType)||"Matrix"),((h,d)=>d.multiply(h)),"FlowGraphMatrixMultiplicationBlock",h)}}(0,w.i)("FlowGraphMatrixMultiplicationBlock",E);class I extends j.d{constructor(h){super(h),this.input=this.registerDataInput("input",A.m),this.position=this.registerDataOutput("position",A.E),this.rotationQuaternion=this.registerDataOutput("rotationQuaternion",A.z),this.td=this.registerDataOutput("td",A.E),this.isValid=this.registerDataOutput("isValid",A.f,!1)}_updateOutputs(h){const d=h._getExecutionVariable(this,"executionId",-1),m=h._getExecutionVariable(this,"cachedPosition",null),j=h._getExecutionVariable(this,"cachedRotation",null),A=h._getExecutionVariable(this,"cachedScaling",null);if(d===h.executionId&&m&&j&&A)this.position.setValue(m,h),this.rotationQuaternion.setValue(j,h),this.td.setValue(A,h);else{const d=this.input.getValue(h),w=m||new b.i,a=j||new b.c,D=A||new b.i,S=Math.round(1e4*d.m[3])/1e4,M=Math.round(1e4*d.m[7])/1e4,q=Math.round(1e4*d.m[11])/1e4,E=Math.round(1e4*d.m[15])/1e4;if(0!==S||0!==M||0!==q||1!==E)return this.isValid.setValue(!1,h),this.position.setValue(b.i.Zero(),h),this.rotationQuaternion.setValue(b.c.Identity(),h),void this.td.setValue(b.i.One(),h);const I=d.decompose(D,a,w);this.isValid.setValue(I,h),this.position.setValue(w,h),this.rotationQuaternion.setValue(a,h),this.td.setValue(D,h),h._setExecutionVariable(this,"cachedPosition",w),h._setExecutionVariable(this,"cachedRotation",a),h._setExecutionVariable(this,"cachedScaling",D),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixDecompose"}}(0,w.i)("FlowGraphMatrixDecompose",I);class R extends j.d{constructor(h){super(h),this.position=this.registerDataInput("position",A.E),this.rotationQuaternion=this.registerDataInput("rotationQuaternion",A.z),this.td=this.registerDataInput("td",A.E),this.value=this.registerDataOutput("value",A.m)}_updateOutputs(h){const d=h._getExecutionVariable(this,"executionId",-1),m=h._getExecutionVariable(this,"cachedMatrix",null);if(d===h.executionId&&m)this.value.setValue(m,h);else{const d=b.b.Compose(this.td.getValue(h),this.rotationQuaternion.getValue(h),this.position.getValue(h));this.value.setValue(d,h),h._setExecutionVariable(this,"cachedMatrix",d),h._setExecutionVariable(this,"executionId",h.executionId)}}getClassName(){return"FlowGraphMatrixCompose"}}(0,w.i)("FlowGraphMatrixCompose",R)},14121:(h,d,m)=>{m.d(d,{b:()=>A});var j=m(14124);class A extends j.d{constructor(h,d,m,j,A,b){super(m,b),this._operation=j,this._className=A,this.a=this.registerDataInput("a",h),this.b=this.registerDataInput("b",d)}_doOperation(h){const d=this.a.getValue(h),m=this.b.getValue(h);return this._operation(d,m)}getClassName(){return this._className}}},14124:(h,d,m)=>{m.d(d,{d:()=>a});var j=m(12687),A=m(12671);const b="cachedOperationValue",w="cachedExecutionId";class a extends j.d{constructor(h,d){super(d),this.value=this.registerDataOutput("value",h),this.isValid=this.registerDataOutput("isValid",A.f)}_updateOutputs(h){const d=h._getExecutionVariable(this,w,-1),m=h._getExecutionVariable(this,b,null);if(void 0!==m&&null!==m&&d===h.executionId)this.isValid.setValue(!0,h),this.value.setValue(m,h);else try{const d=this._doOperation(h);if(void 0===d||null===d)return void this.isValid.setValue(!1,h);h._setExecutionVariable(this,b,d),h._setExecutionVariable(this,w,h.executionId),this.value.setValue(d,h),this.isValid.setValue(!0,h)}catch(j){this.isValid.setValue(!1,h)}}}},14128:(h,d,m)=>{m.d(d,{b:()=>A});var j=m(14124);class A extends j.d{constructor(h,d,m,j,A){super(d,A),this._operation=m,this._className=j,this.a=this.registerDataInput("a",h)}_doOperation(h){return this._operation(this.a.getValue(h))}getClassName(){return this._className}}}}]);