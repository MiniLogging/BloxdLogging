"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[55],{14087:(u,F,z)=>{z.r(F),z.d(F,{FlowGraphStopAnimationBlock:()=>I});var p=z(12952),b=z(668),R=z(541),c=z(13e3);class I extends c.e{constructor(u){super(u),this.animationGroup=this.registerDataInput("animationGroup",p.e),this.stopAtFrame=this.registerDataInput("stopAtFrame",p.t,-1)}_preparePendingTasks(u){const F=this.animationGroup.getValue(u),z=this.stopAtFrame.getValue(u)??-1,p=u._getGlobalContextVariable("pendingStopAnimations",[]);p.push({uniqueId:F.uniqueId,stopAtFrame:z}),u._setGlobalContextVariable("pendingStopAnimations",p)}_cancelPendingTasks(u){const F=this.animationGroup.getValue(u),z=u._getGlobalContextVariable("pendingStopAnimations",[]);for(let p=0;p<z.length;p++)if(z[p].uniqueId===F.uniqueId){z.splice(p,1),u._setGlobalContextVariable("pendingStopAnimations",z);break}}_execute(u){const F=this.animationGroup.getValue(u),z=this.stopAtFrame.getValue(u)??-1;return F?isNaN(z)?this._reportError(u,"Invalid stop time."):(z>0?this._startPendingTasks(u):this._stopAnimation(F,u),void this.out._activateSignal(u)):(R.b.Warn("No animation group provided to stop."),this._reportError(u,"No animation group provided to stop."))}_executeOnTick(u){const F=this.animationGroup.getValue(u),z=u._getGlobalContextVariable("pendingStopAnimations",[]);for(let p=0;p<z.length;p++)if(z[p].uniqueId===F.uniqueId&&F.getCurrentFrame()>=z[p].stopAtFrame){this._stopAnimation(F,u),z.splice(p,1),u._setGlobalContextVariable("pendingStopAnimations",z),this.done._activateSignal(u),u._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(u,F){const z=F._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),p=z.indexOf(u.uniqueId);-1!==p&&(u.stop(),z.splice(p,1),F._setGlobalContextVariable("currentlyRunningAnimationGroups",z))}}(0,b.h)("FlowGraphStopAnimationBlock",I)}}]);