"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[55],{13699:(W,F,c)=>{c.r(F),c.d(F,{FlowGraphStopAnimationBlock:()=>A});var T=c(12517),Y=c(642),Z=c(520),w=c(12563);class A extends w.c{constructor(W){super(W),this.animationGroup=this.registerDataInput("animationGroup",T.c),this.stopAtFrame=this.registerDataInput("stopAtFrame",T.n,-1)}_preparePendingTasks(W){const F=this.animationGroup.getValue(W),c=this.stopAtFrame.getValue(W)??-1,T=W._getGlobalContextVariable("pendingStopAnimations",[]);T.push({uniqueId:F.uniqueId,stopAtFrame:c}),W._setGlobalContextVariable("pendingStopAnimations",T)}_cancelPendingTasks(W){const F=this.animationGroup.getValue(W),c=W._getGlobalContextVariable("pendingStopAnimations",[]);for(let T=0;T<c.length;T++)if(c[T].uniqueId===F.uniqueId){c.splice(T,1),W._setGlobalContextVariable("pendingStopAnimations",c);break}}_execute(W){const F=this.animationGroup.getValue(W),c=this.stopAtFrame.getValue(W)??-1;return F?isNaN(c)?this._reportError(W,"Invalid stop time."):(c>0?this._startPendingTasks(W):this._stopAnimation(F,W),void this.out._activateSignal(W)):(Z.e.Warn("No animation group provided to stop."),this._reportError(W,"No animation group provided to stop."))}_executeOnTick(W){const F=this.animationGroup.getValue(W),c=W._getGlobalContextVariable("pendingStopAnimations",[]);for(let T=0;T<c.length;T++)if(c[T].uniqueId===F.uniqueId&&F.getCurrentFrame()>=c[T].stopAtFrame){this._stopAnimation(F,W),c.splice(T,1),W._setGlobalContextVariable("pendingStopAnimations",c),this.done._activateSignal(W),W._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(W,F){const c=F._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),T=c.indexOf(W.uniqueId);-1!==T&&(W.stop(),c.splice(T,1),F._setGlobalContextVariable("currentlyRunningAnimationGroups",c))}}(0,Y.h)("FlowGraphStopAnimationBlock",A)}}]);