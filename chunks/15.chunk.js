"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[15],{12331:(R,x,H)=>{H.d(x,{c:()=>C,e:()=>S,g:()=>L,i:()=>g,k:()=>q,o:()=>i,p:()=>I});var k=H(661),c=H(695),t=H(681),A=H(610),D=H(12334),U=H(683),J=H(2292),V=H(506),n=H(687);const g=Object.freeze(new k.f(0,0,0,0)),I=Object.freeze(k.o.Zero()),i=Object.freeze(k.k.Zero()),q=Object.freeze(J.d.Zero()),S=Object.freeze(c.c.Black()),L=Object.freeze(new c.d(0,0,0,0)),b={key:0,repeatCount:0,loopMode:2};class C{static _PrepareAnimation(R,x,H,t,A,D,U,V){let n;if(!isNaN(parseFloat(A))&&isFinite(A)?n=C.ANIMATIONTYPE_FLOAT:A instanceof k.f?n=C.ANIMATIONTYPE_QUATERNION:A instanceof k.o?n=C.ANIMATIONTYPE_VECTOR3:A instanceof k.k?n=C.ANIMATIONTYPE_VECTOR2:A instanceof c.c?n=C.ANIMATIONTYPE_COLOR3:A instanceof c.d?n=C.ANIMATIONTYPE_COLOR4:A instanceof J.d&&(n=C.ANIMATIONTYPE_SIZE),void 0==n)return null;const g=new C(R,x,H,n,U),I=[{frame:0,value:A},{frame:t,value:D}];return g.setKeys(I),void 0!==V&&g.setEasingFunction(V),g}static CreateAnimation(R,x,H,k){const c=new C(R+"Animation",R,H,x,C.ANIMATIONLOOPMODE_CONSTANT);return c.setEasingFunction(k),c}static CreateAndStartAnimation(R,x,H,k,c,t,A,D,U,J,V){const n=C._PrepareAnimation(R,H,k,c,t,A,D,U);return n?(x.va&&(V=x.va()),V?V.beginDirectAnimation(x,[n],0,c,n.loopMode!==C.ANIMATIONLOOPMODE_CONSTANT,1,J):null):null}static CreateAndStartHierarchyAnimation(R,x,H,k,c,t,A,D,U,J,V){const n=C._PrepareAnimation(R,k,c,t,A,D,U,J);if(!n)return null;return x.va().beginDirectHierarchyAnimation(x,H,[n],0,t,1===n.loopMode,1,V)}static CreateMergeAndStartAnimation(R,x,H,k,c,t,A,D,U,J){const V=C._PrepareAnimation(R,H,k,c,t,A,D,U);return V?(x.animations.push(V),x.va().beginAnimation(x,0,c,1===V.loopMode,1,J)):null}static MakeAnimationAdditive(R,x,H){let c;c="object"===typeof x?x:{referenceFrame:x??0,range:H,cloneOriginalAnimation:arguments.length>3&&void 0!==arguments[3]&&arguments[3],clonedAnimationName:arguments.length>4?arguments[4]:void 0};let t=R;if(c.cloneOriginalAnimation&&(t=R.clone(),t.name=c.clonedAnimationName||t.name),!t._keys.length)return t;const A=c.referenceFrame&&c.referenceFrame>=0?c.referenceFrame:0;let D=0;const U=t._keys[0];let J=t._keys.length-1;const V=t._keys[J],n={referenceValue:U.value,referencePosition:k.g.Bi[0],referenceQuaternion:k.g.Quaternion[0],referenceScaling:k.g.Bi[1],keyPosition:k.g.Bi[2],keyQuaternion:k.g.Quaternion[1],keyScaling:k.g.Bi[3]};let g=U.frame,I=V.frame;if(c.range){const R=t.getRange(c.range);R&&(g=R.from,I=R.to)}else g=c.fromFrame??g,I=c.toFrame??I;if(g!==U.frame&&(D=t.createKeyForFrame(g)),I!==V.frame&&(J=t.createKeyForFrame(I)),1===t._keys.length){const R=t._getKeyValue(t._keys[0]);n.referenceValue=R.clone?R.clone():R}else if(A<=U.frame){const R=t._getKeyValue(U.value);n.referenceValue=R.clone?R.clone():R}else if(A>=V.frame){const R=t._getKeyValue(V.value);n.referenceValue=R.clone?R.clone():R}else{b.key=0;const R=t._interpolate(A,b);n.referenceValue=R.clone?R.clone():R}t.dataType===C.ANIMATIONTYPE_QUATERNION?n.referenceValue.normalize().conjugateInPlace():t.dataType===C.ANIMATIONTYPE_MATRIX&&(n.referenceValue.decompose(n.referenceScaling,n.referenceQuaternion,n.referencePosition),n.referenceQuaternion.normalize().conjugateInPlace());let i=Number.MAX_VALUE;const q=c.clipKeys?[]:null;for(let S=D;S<=J;S++){let R=t._keys[S];if((q||c.cloneOriginalAnimation)&&(R={frame:R.frame,value:R.value.clone?R.value.clone():R.value,inTangent:R.inTangent,outTangent:R.outTangent,interpolation:R.interpolation,lockedTangent:R.lockedTangent},q&&(i===Number.MAX_VALUE&&(i=R.frame),R.frame-=i,q.push(R))),!S||t.dataType===C.ANIMATIONTYPE_FLOAT||R.value!==U.value)switch(t.dataType){case C.ANIMATIONTYPE_MATRIX:R.value.decompose(n.keyScaling,n.keyQuaternion,n.keyPosition),n.keyPosition.cj(n.referencePosition),n.keyScaling.divideInPlace(n.referenceScaling),n.referenceQuaternion.multiplyToRef(n.keyQuaternion,n.keyQuaternion),k.e.ComposeToRef(n.keyScaling,n.keyQuaternion,n.keyPosition,R.value);break;case C.ANIMATIONTYPE_QUATERNION:n.referenceValue.multiplyToRef(R.value,R.value);break;case C.ANIMATIONTYPE_VECTOR2:case C.ANIMATIONTYPE_VECTOR3:case C.ANIMATIONTYPE_COLOR3:case C.ANIMATIONTYPE_COLOR4:R.value.subtractToRef(n.referenceValue,R.value);break;case C.ANIMATIONTYPE_SIZE:R.value.width-=n.referenceValue.width,R.value.height-=n.referenceValue.height;break;default:R.value-=n.referenceValue}}return q&&t.setKeys(q,!0),t}static TransitionTo(R,x,H,k,c,t,A){let D=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(A<=0)return H[R]=x,D&&D(),null;const U=c*(A/1e3);t.setKeys([{frame:0,value:H[R].clone?H[R].clone():H[R]},{frame:U,value:x}]),H.animations||(H.animations=[]),H.animations.push(t);const J=k.beginAnimation(H,0,U,!1);return J.onAnimationEnd=D,J}get runtimeAnimations(){return this._runtimeAnimations}get hasRunningRuntimeAnimations(){for(const R of this._runtimeAnimations)if(!R.isStopped())return!0;return!1}constructor(R,x,H,k,c,t){this.name=R,this.targetProperty=x,this.framePerSecond=H,this.dataType=k,this.loopMode=c,this.enableBlending=t,this._easingFunction=null,this._runtimeAnimations=new Array,this._events=new Array,this.blendingSpeed=.01,this._ranges={},this._coreAnimation=null,this.targetPropertyPath=x.split("."),this.dataType=k,this.loopMode=void 0===c?C.ANIMATIONLOOPMODE_CYCLE:c,this.uniqueId=C._UniqueIdGenerator++}toString(R){let x="Name: "+this.name+", property: "+this.targetProperty;if(x+=", datatype: "+["Float","Bi","Quaternion","Matrix","fj","Vector2"][this.dataType],x+=", nKeys: "+(this._keys?this._keys.length:"none"),x+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),R){x+=", Ranges: {";let R=!0;for(const H in this._ranges)R&&(x+=", ",R=!1),x+=H;x+="}"}return x}addEvent(R){this._events.push(R),this._events.sort(((R,x)=>R.frame-x.frame))}removeEvents(R){for(let x=0;x<this._events.length;x++)this._events[x].frame===R&&(this._events.splice(x,1),x--)}getEvents(){return this._events}createRange(R,x,H){this._ranges[R]||(this._ranges[R]=new D.c(R,x,H))}deleteRange(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const H=this._ranges[R];if(H){if(x){const R=H.from,x=H.to;for(let H=this._keys.length-1;H>=0;H--)this._keys[H].frame>=R&&this._keys[H].frame<=x&&this._keys.splice(H,1)}this._ranges[R]=null}}getRange(R){return this._ranges[R]}getKeys(){return this._keys}getHighestFrame(){let R=0;for(let x=0,H=this._keys.length;x<H;x++)R<this._keys[x].frame&&(R=this._keys[x].frame);return R}getEasingFunction(){return this._easingFunction}setEasingFunction(R){this._easingFunction=R}floatInterpolateFunction(R,x,H){return(0,t.Lerp)(R,x,H)}floatInterpolateFunctionWithTangents(R,x,H,k,c){return(0,t.Hermite)(R,x,H,k,c)}quaternionInterpolateFunction(R,x,H){return k.f.Slerp(R,x,H)}quaternionInterpolateFunctionWithTangents(R,x,H,c,t){return k.f.Hermite(R,x,H,c,t).normalize()}vector3InterpolateFunction(R,x,H){return k.o.Lerp(R,x,H)}vector3InterpolateFunctionWithTangents(R,x,H,c,t){return k.o.Hermite(R,x,H,c,t)}vector2InterpolateFunction(R,x,H){return k.k.Lerp(R,x,H)}vector2InterpolateFunctionWithTangents(R,x,H,c,t){return k.k.Hermite(R,x,H,c,t)}sizeInterpolateFunction(R,x,H){return J.d.Lerp(R,x,H)}color3InterpolateFunction(R,x,H){return c.c.Lerp(R,x,H)}color3InterpolateFunctionWithTangents(R,x,H,k,t){return c.c.Hermite(R,x,H,k,t)}color4InterpolateFunction(R,x,H){return c.d.Lerp(R,x,H)}color4InterpolateFunctionWithTangents(R,x,H,k,t){return c.d.Hermite(R,x,H,k,t)}_getKeyValue(R){return"function"===typeof R?R():R}evaluate(R){return b.key=0,this._interpolate(R,b)}_interpolate(R,x){let H=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(x.loopMode===C.ANIMATIONLOOPMODE_CONSTANT&&x.repeatCount>0)return x.highLimitValue.clone?x.highLimitValue.clone():x.highLimitValue;const k=this._keys;let c;if(this._coreAnimation)c=this._coreAnimation._key;else{const t=k.length;for(c=x.key;c>=0&&R<k[c].frame;)--c;for(;c+1<=t-1&&R>=k[c+1].frame;)++c;if(x.key=c,c<0)return H?void 0:this._getKeyValue(k[0].value);if(c+1>t-1)return H?void 0:this._getKeyValue(k[t-1].value);this._key=c}const t=k[c],A=k[c+1];if(H&&(R===t.frame||R===A.frame))return;const D=this._getKeyValue(t.value),U=this._getKeyValue(A.value);if(1===t.interpolation)return A.frame>R?D:U;const J=void 0!==t.outTangent&&void 0!==A.inTangent,V=A.frame-t.frame;let n=(R-t.frame)/V;const b=t.easingFunction||this.getEasingFunction();switch(b&&(n=b.ease(n)),this.dataType){case C.ANIMATIONTYPE_FLOAT:{const R=J?this.floatInterpolateFunctionWithTangents(D,t.outTangent*V,U,A.inTangent*V,n):this.floatInterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return(x.offsetValue??0)*x.repeatCount+R}break}case C.ANIMATIONTYPE_QUATERNION:{const R=J?this.quaternionInterpolateFunctionWithTangents(D,t.outTangent.scale(V),U,A.inTangent.scale(V),n):this.quaternionInterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return R.addInPlace((x.offsetValue||g).scale(x.repeatCount))}return R}case C.ANIMATIONTYPE_VECTOR3:{const R=J?this.vector3InterpolateFunctionWithTangents(D,t.outTangent.scale(V),U,A.inTangent.scale(V),n):this.vector3InterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return R.add((x.offsetValue||I).scale(x.repeatCount))}break}case C.ANIMATIONTYPE_VECTOR2:{const R=J?this.vector2InterpolateFunctionWithTangents(D,t.outTangent.scale(V),U,A.inTangent.scale(V),n):this.vector2InterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return R.add((x.offsetValue||i).scale(x.repeatCount))}break}case C.ANIMATIONTYPE_SIZE:switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return this.sizeInterpolateFunction(D,U,n);case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return this.sizeInterpolateFunction(D,U,n).add((x.offsetValue||q).scale(x.repeatCount))}break;case C.ANIMATIONTYPE_COLOR3:{const R=J?this.color3InterpolateFunctionWithTangents(D,t.outTangent.scale(V),U,A.inTangent.scale(V),n):this.color3InterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return R.add((x.offsetValue||S).scale(x.repeatCount))}break}case C.ANIMATIONTYPE_COLOR4:{const R=J?this.color4InterpolateFunctionWithTangents(D,t.outTangent.scale(V),U,A.inTangent.scale(V),n):this.color4InterpolateFunction(D,U,n);switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return R;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return R.add((x.offsetValue||L).scale(x.repeatCount))}break}case C.ANIMATIONTYPE_MATRIX:switch(x.loopMode){case C.ANIMATIONLOOPMODE_CYCLE:case C.ANIMATIONLOOPMODE_CONSTANT:case C.ANIMATIONLOOPMODE_YOYO:return C.AllowMatricesInterpolation?this.matrixInterpolateFunction(D,U,n,x.workValue):D;case C.ANIMATIONLOOPMODE_RELATIVE:case C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT:return D}}return 0}matrixInterpolateFunction(R,x,H,c){return C.AllowMatrixDecomposeForInterpolation?c?(k.e.DecomposeLerpToRef(R,x,H,c),c):k.e.DecomposeLerp(R,x,H):c?(k.e.LerpToRef(R,x,H,c),c):k.e.Lerp(R,x,H)}clone(){const R=new C(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);if(R.enableBlending=this.enableBlending,R.blendingSpeed=this.blendingSpeed,this._keys&&R.setKeys(this._keys),this._ranges){R._ranges={};for(const x in this._ranges){const H=this._ranges[x];H&&(R._ranges[x]=H.clone())}}return R}setKeys(R){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._keys=x?R:R.slice(0)}createKeyForFrame(R){b.key=0;const x=this._interpolate(R,b,!0);if(!x)return this._keys[b.key].frame===R?b.key:b.key+1;const H={frame:R,value:x.clone?x.clone():x};return this._keys.splice(b.key+1,0,H),b.key+1}serialize(){const R={};R.name=this.name,R.property=this.targetProperty,R.framePerSecond=this.framePerSecond,R.dataType=this.dataType,R.loopBehavior=this.loopMode,R.enableBlending=this.enableBlending,R.blendingSpeed=this.blendingSpeed;const x=this.dataType;R.keys=[];const H=this.getKeys();for(let k=0;k<H.length;k++){const c=H[k],t={};switch(t.frame=c.frame,x){case C.ANIMATIONTYPE_FLOAT:t.values=[c.value],void 0!==c.inTangent&&t.values.push(c.inTangent),void 0!==c.outTangent&&(void 0===c.inTangent&&t.values.push(void 0),t.values.push(c.outTangent)),void 0!==c.interpolation&&(void 0===c.inTangent&&t.values.push(void 0),void 0===c.outTangent&&t.values.push(void 0),t.values.push(c.interpolation));break;case C.ANIMATIONTYPE_QUATERNION:case C.ANIMATIONTYPE_MATRIX:case C.ANIMATIONTYPE_VECTOR3:case C.ANIMATIONTYPE_COLOR3:case C.ANIMATIONTYPE_COLOR4:t.values=c.value.Li(),void 0!=c.inTangent&&t.values.push(c.inTangent.Li()),void 0!=c.outTangent&&(void 0===c.inTangent&&t.values.push(void 0),t.values.push(c.outTangent.Li())),void 0!==c.interpolation&&(void 0===c.inTangent&&t.values.push(void 0),void 0===c.outTangent&&t.values.push(void 0),t.values.push(c.interpolation))}R.keys.push(t)}R.ranges=[];for(const k in this._ranges){const x=this._ranges[k];if(!x)continue;const H={};H.name=k,H.from=x.from,H.to=x.to,R.ranges.push(H)}return R}static _UniversalLerp(R,x,H){const k=R.constructor;return k.Lerp?k.Lerp(R,x,H):k.Slerp?k.Slerp(R,x,H):R.toFixed?R*(1-H)+H*x:x}static Parse(R){const x=new C(R.name,R.property,R.framePerSecond,R.dataType,R.loopBehavior),H=R.dataType,t=[];let A,D;for(R.enableBlending&&(x.enableBlending=R.enableBlending),R.blendingSpeed&&(x.blendingSpeed=R.blendingSpeed),D=0;D<R.keys.length;D++){const x=R.keys[D];let U,J,V;switch(H){case C.ANIMATIONTYPE_FLOAT:A=x.values[0],x.values.length>=2&&(U=x.values[1]),x.values.length>=3&&(J=x.values[2]),x.values.length>=4&&(V=x.values[3]);break;case C.ANIMATIONTYPE_QUATERNION:if(A=k.f.zi(x.values),x.values.length>=8){const R=k.f.zi(x.values.slice(4,8));R.equals(k.f.Zero())||(U=R)}if(x.values.length>=12){const R=k.f.zi(x.values.slice(8,12));R.equals(k.f.Zero())||(J=R)}x.values.length>=13&&(V=x.values[12]);break;case C.ANIMATIONTYPE_MATRIX:A=k.e.zi(x.values),x.values.length>=17&&(V=x.values[16]);break;case C.ANIMATIONTYPE_COLOR3:A=c.c.zi(x.values),x.values[3]&&(U=c.c.zi(x.values[3])),x.values[4]&&(J=c.c.zi(x.values[4])),x.values[5]&&(V=x.values[5]);break;case C.ANIMATIONTYPE_COLOR4:A=c.d.zi(x.values),x.values[4]&&(U=c.d.zi(x.values[4])),x.values[5]&&(J=c.d.zi(x.values[5])),x.values[6]&&(V=c.d.zi(x.values[6]));break;case C.ANIMATIONTYPE_VECTOR3:default:A=k.o.zi(x.values),x.values[3]&&(U=k.o.zi(x.values[3])),x.values[4]&&(J=k.o.zi(x.values[4])),x.values[5]&&(V=x.values[5])}const n={};n.frame=x.frame,n.value=A,void 0!=U&&(n.inTangent=U),void 0!=J&&(n.outTangent=J),void 0!=V&&(n.interpolation=V),t.push(n)}if(x.setKeys(t),R.ranges)for(D=0;D<R.ranges.length;D++)A=R.ranges[D],x.createRange(A.name,A.from,A.to);return x}static AppendSerializedAnimations(R,x){n.d.AppendSerializedAnimations(R,x)}static async ParseFromFileAsync(R,x){return await new Promise(((H,k)=>{const c=new V.e;c.addEventListener("readystatechange",(()=>{if(4==c.readyState)if(200==c.status){let x=JSON.parse(c.responseText);if(x.animations&&(x=x.animations),x.length){const R=[];for(const H of x)R.push(this.Parse(H));H(R)}else{const k=this.Parse(x);R&&(k.name=R),H(k)}}else k("Unable to load the animation")})),c.open("GET",x),c.send()}))}static async ParseFromSnippetAsync(R){return await new Promise(((x,H)=>{const k=new V.e;k.addEventListener("readystatechange",(()=>{if(4==k.readyState)if(200==k.status){const H=JSON.parse(JSON.parse(k.responseText).jsonPayload);if(H.animations){const k=JSON.parse(H.animations),c=[];for(const x of k.animations){const H=this.Parse(x);H.snippetId=R,c.push(H)}x(c)}else{const k=JSON.parse(H.animation),c=this.Parse(k);c.snippetId=R,x(c)}}else H("Unable to load the snippet "+R)})),k.open("GET",this.SnippetUrl+"/"+R.replace(/#/g,"/")),k.send()}))}}C._UniqueIdGenerator=0,C.AllowMatricesInterpolation=!1,C.AllowMatrixDecomposeForInterpolation=!0,C.SnippetUrl="https://snippet.babylonjs.com",C.ANIMATIONTYPE_FLOAT=0,C.ANIMATIONTYPE_VECTOR3=1,C.ANIMATIONTYPE_QUATERNION=2,C.ANIMATIONTYPE_MATRIX=3,C.ANIMATIONTYPE_COLOR3=4,C.ANIMATIONTYPE_COLOR4=7,C.ANIMATIONTYPE_VECTOR2=5,C.ANIMATIONTYPE_SIZE=6,C.ANIMATIONLOOPMODE_RELATIVE=0,C.ANIMATIONLOOPMODE_CYCLE=1,C.ANIMATIONLOOPMODE_CONSTANT=2,C.ANIMATIONLOOPMODE_YOYO=4,C.ANIMATIONLOOPMODE_RELATIVE_FROM_CURRENT=5,C.CreateFromSnippetAsync=C.ParseFromSnippetAsync,(0,A.h)("BABYLON.Animation",C),U.e._AnimationRangeFactory=(R,x,H)=>new D.c(R,x,H)},12334:(R,x,H)=>{H.d(x,{c:()=>k});class k{constructor(R,x,H){this.name=R,this.from=x,this.to=H}clone(){return new k(this.name,this.from,this.to)}}},12255:(R,x,H)=>{H.d(x,{b:()=>n});var k=H(643),c=H(647),t=H(637),A=H(661),D=H(668),U=H(831);H(683).e.AddNodeConstructor("TargetCamera",((R,x)=>()=>new n(R,A.o.Zero(),x)));const J=A.e.Zero(),V=A.f.Identity();class n extends t.b{constructor(R,x,H){super(R,x,H,!(arguments.length>3&&void 0!==arguments[3])||arguments[3]),this.cameraDirection=new A.o(0,0,0),this.cameraRotation=new A.k(0,0),this.updateUpVectorFromRotation=!1,this.speed=2,this.noRotationConstraint=!1,this.invertRotation=!1,this.inverseRotationSpeed=.2,this.lockedTarget=null,this._currentTarget=A.o.Zero(),this._initialFocalDistance=1,this._viewMatrix=A.e.Zero(),this._cameraTransformMatrix=A.e.Zero(),this._cameraRotationMatrix=A.e.Zero(),this._transformedReferencePoint=A.o.Zero(),this._deferredPositionUpdate=new A.o,this._deferredRotationQuaternionUpdate=new A.f,this._deferredRotationUpdate=new A.o,this._deferredUpdated=!1,this._deferOnly=!1,this._cachedRotationZ=0,this._cachedQuaternionRotationZ=0,this._referencePoint=A.o.Forward(this.va().useRightHandedSystem),this.rotation=new A.o(0,this.va().useRightHandedSystem?Math.PI:0,0)}getFrontPosition(R){this.getWorldMatrix();const x=A.g.Bi[0],H=A.g.Bi[1];return H.set(0,0,this._scene.useRightHandedSystem?-1:1),this.getDirectionToRef(H,x),x.scaleInPlace(R),this.globalPosition.add(x)}_getLockedTargetPosition(){if(!this.lockedTarget)return null;if(this.lockedTarget.absolutePosition){const R=this.lockedTarget;R.Fi().getTranslationToRef(R.absolutePosition)}return this.lockedTarget.absolutePosition||this.lockedTarget}storeState(){return this._storedPosition=this.position.clone(),this._storedRotation=this.rotation.clone(),this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone()),super.storeState()}_restoreStateValues(){return!!super._restoreStateValues()&&(this.position=this._storedPosition.clone(),this.rotation=this._storedRotation.clone(),this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone()),this.cameraDirection.si(0,0,0),this.cameraRotation.si(0,0),!0)}_initCache(){super._initCache(),this._cache.lockedTarget=new A.o(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotation=new A.o(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotationQuaternion=new A.f(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}_updateCache(R){R||super._updateCache();const x=this._getLockedTargetPosition();x?this._cache.lockedTarget?this._cache.lockedTarget.p(x):this._cache.lockedTarget=x.clone():this._cache.lockedTarget=null,this._cache.rotation.p(this.rotation),this.rotationQuaternion&&this._cache.rotationQuaternion.p(this.rotationQuaternion)}_isSynchronizedViewMatrix(){if(!super._isSynchronizedViewMatrix())return!1;const R=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(R):!R)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))}_computeLocalCameraSpeed(){const R=this.getEngine();return this.speed*Math.sqrt(R.getDeltaTime()/(100*R.getFps()))}setTarget(R){this.upVector.normalize(),this._initialFocalDistance=R.Pg(this.position).length(),this.position.z===R.z&&(this.position.z+=D.e),this._referencePoint.normalize().scaleInPlace(this._initialFocalDistance),this.va().useRightHandedSystem?A.e.LookAtRHToRef(this.position,R,A.o.UpReadOnly,J):A.e.LookAtLHToRef(this.position,R,A.o.UpReadOnly,J),J.invert();const x=this.rotationQuaternion||V;A.f.FromRotationMatrixToRef(J,x),x.toEulerAnglesToRef(this.rotation),this.rotation.z=0}get target(){return this.getTarget()}set target(R){this.setTarget(R)}getTarget(){return this._currentTarget}_decideIfNeedsToMove(){return Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0}_updatePosition(){if(this.parent)return this.parent.getWorldMatrix().invertToRef(A.g.Matrix[0]),A.o.TransformNormalToRef(this.cameraDirection,A.g.Matrix[0],A.g.Bi[0]),this._deferredPositionUpdate.addInPlace(A.g.Bi[0]),void(this._deferOnly?this._deferredUpdated=!0:this.position.p(this._deferredPositionUpdate));this._deferredPositionUpdate.addInPlace(this.cameraDirection),this._deferOnly?this._deferredUpdated=!0:this.position.p(this._deferredPositionUpdate)}_checkInputs(){const R=this.invertRotation?-this.inverseRotationSpeed:1,x=this._decideIfNeedsToMove(),H=this.cameraRotation.x||this.cameraRotation.y;if(this._deferredUpdated=!1,this._deferredRotationUpdate.p(this.rotation),this._deferredPositionUpdate.p(this.position),this.rotationQuaternion&&this._deferredRotationQuaternionUpdate.p(this.rotationQuaternion),x&&this._updatePosition(),H){if(this.rotationQuaternion&&this.rotationQuaternion.toEulerAnglesToRef(this._deferredRotationUpdate),this._deferredRotationUpdate.x+=this.cameraRotation.x*R,this._deferredRotationUpdate.y+=this.cameraRotation.y*R,!this.noRotationConstraint){const R=1.570796;this._deferredRotationUpdate.x>R&&(this._deferredRotationUpdate.x=R),this._deferredRotationUpdate.x<-R&&(this._deferredRotationUpdate.x=-R)}if(this._deferOnly?this._deferredUpdated=!0:this.rotation.p(this._deferredRotationUpdate),this.rotationQuaternion){this._deferredRotationUpdate.lengthSquared()&&(A.f.RotationYawPitchRollToRef(this._deferredRotationUpdate.y,this._deferredRotationUpdate.x,this._deferredRotationUpdate.z,this._deferredRotationQuaternionUpdate),this._deferOnly?this._deferredUpdated=!0:this.rotationQuaternion.p(this._deferredRotationQuaternionUpdate))}}x&&(Math.abs(this.cameraDirection.x)<this.speed*D.e&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*D.e&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*D.e&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia)),H&&(Math.abs(this.cameraRotation.x)<this.speed*D.e&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*D.e&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia)),super._checkInputs()}_updateCameraRotationMatrix(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):A.e.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix)}_rotateUpVectorWithCameraRotationMatrix(){return A.o.TransformNormalToRef(A.o.UpReadOnly,this._cameraRotationMatrix,this.upVector),this}_getViewMatrix(){return this.lockedTarget&&this.setTarget(this._getLockedTargetPosition()),this._updateCameraRotationMatrix(),this.rotationQuaternion&&this._cachedQuaternionRotationZ!=this.rotationQuaternion.z?(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedQuaternionRotationZ=this.rotationQuaternion.z):this._cachedRotationZ!==this.rotation.z&&(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedRotationZ=this.rotation.z),A.o.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),this.updateUpVectorFromRotation&&(this.rotationQuaternion?U.c.Y.rotateByQuaternionToRef(this.rotationQuaternion,this.upVector):(A.f.FromEulerVectorToRef(this.rotation,V),U.c.Y.rotateByQuaternionToRef(V,this.upVector))),this._computeViewMatrix(this.position,this._currentTarget,this.upVector),this._viewMatrix}_computeViewMatrix(R,x,H){if(this.va().useRightHandedSystem?A.e.LookAtRHToRef(R,x,H,this._viewMatrix):A.e.LookAtLHToRef(R,x,H,this._viewMatrix),this.parent){const R=this.parent.getWorldMatrix();this._viewMatrix.invert(),this._viewMatrix.multiplyToRef(R,this._viewMatrix),this._viewMatrix.getTranslationToRef(this._globalPosition),this._viewMatrix.invert(),this._markSyncedWithParent()}else this._globalPosition.p(R)}createRigCamera(R,x){if(this.cameraRigMode!==t.b.RIG_MODE_NONE){const x=new n(R,this.position.clone(),this.va());return x.isRigCamera=!0,x.rigParent=this,this.cameraRigMode===t.b.RIG_MODE_VR&&(this.rotationQuaternion||(this.rotationQuaternion=new A.f),x._cameraRigParams={},x.rotationQuaternion=new A.f),x.mode=this.mode,x.orthoLeft=this.orthoLeft,x.orthoRight=this.orthoRight,x.orthoTop=this.orthoTop,x.orthoBottom=this.orthoBottom,x}return null}_updateRigCameras(){const R=this._rigCameras[0],x=this._rigCameras[1];switch(this.Fi(),this.cameraRigMode){case t.b.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case t.b.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case t.b.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case t.b.RIG_MODE_STEREOSCOPIC_OVERUNDER:case t.b.RIG_MODE_STEREOSCOPIC_INTERLACED:{const H=this.cameraRigMode===t.b.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1,k=this.cameraRigMode===t.b.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*H,R),this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*k,x);break}case t.b.RIG_MODE_VR:R.rotationQuaternion?(R.rotationQuaternion.p(this.rotationQuaternion),x.rotationQuaternion.p(this.rotationQuaternion)):(R.rotation.p(this.rotation),x.rotation.p(this.rotation)),R.position.p(this.position),x.position.p(this.position)}super._updateRigCameras()}_getRigCamPositionAndTarget(R,x){this.getTarget().subtractToRef(this.position,n._TargetFocalPoint),n._TargetFocalPoint.normalize().scaleInPlace(this._initialFocalDistance);const H=n._TargetFocalPoint.addInPlace(this.position);A.e.TranslationToRef(-H.x,-H.y,-H.z,n._TargetTransformMatrix),n._TargetTransformMatrix.multiplyToRef(A.e.RotationAxis(x.upVector,R),n._RigCamTransformMatrix),A.e.TranslationToRef(H.x,H.y,H.z,n._TargetTransformMatrix),n._RigCamTransformMatrix.multiplyToRef(n._TargetTransformMatrix,n._RigCamTransformMatrix),A.o.TransformCoordinatesToRef(this.position,n._RigCamTransformMatrix,x.position),x.setTarget(H)}getClassName(){return"TargetCamera"}}n._RigCamTransformMatrix=new A.e,n._TargetTransformMatrix=new A.e,n._TargetFocalPoint=new A.o,(0,k.d)([(0,c.Q)()],n.prototype,"updateUpVectorFromRotation",void 0),(0,k.d)([(0,c.N)()],n.prototype,"rotation",void 0),(0,k.d)([(0,c.Q)()],n.prototype,"speed",void 0),(0,k.d)([(0,c.B)("lockedTargetId")],n.prototype,"lockedTarget",void 0)},12251:(R,x,H)=>{H.d(x,{d:()=>k});class k{}k.AUTOSAMPLERSUFFIX="Sampler",k.DISABLEUA="#define DISABLE_UNIFORMITY_ANALYSIS",k.ALPHA_DISABLE=0,k.ALPHA_ADD=1,k.ALPHA_COMBINE=2,k.ALPHA_SUBTRACT=3,k.ALPHA_MULTIPLY=4,k.ALPHA_MAXIMIZED=5,k.ALPHA_ONEONE=6,k.ALPHA_PREMULTIPLIED=7,k.ALPHA_PREMULTIPLIED_PORTERDUFF=8,k.ALPHA_INTERPOLATE=9,k.ALPHA_SCREENMODE=10,k.ALPHA_ONEONE_ONEONE=11,k.ALPHA_ALPHATOCOLOR=12,k.ALPHA_REVERSEONEMINUS=13,k.ALPHA_SRC_DSTONEMINUSSRCALPHA=14,k.ALPHA_ONEONE_ONEZERO=15,k.ALPHA_EXCLUSION=16,k.ALPHA_LAYER_ACCUMULATE=17,k.ALPHA_EQUATION_ADD=0,k.ALPHA_EQUATION_SUBSTRACT=1,k.ALPHA_EQUATION_REVERSE_SUBTRACT=2,k.ALPHA_EQUATION_MAX=3,k.ALPHA_EQUATION_MIN=4,k.ALPHA_EQUATION_DARKEN=5,k.DELAYLOADSTATE_NONE=0,k.DELAYLOADSTATE_LOADED=1,k.DELAYLOADSTATE_LOADING=2,k.DELAYLOADSTATE_NOTLOADED=4,k.NEVER=512,k.ALWAYS=519,k.LESS=513,k.EQUAL=514,k.LEQUAL=515,k.GREATER=516,k.GEQUAL=518,k.NOTEQUAL=517,k.KEEP=7680,k.ZERO=0,k.REPLACE=7681,k.INCR=7682,k.DECR=7683,k.INVERT=5386,k.INCR_WRAP=34055,k.DECR_WRAP=34056,k.TEXTURE_CLAMP_ADDRESSMODE=0,k.TEXTURE_WRAP_ADDRESSMODE=1,k.TEXTURE_MIRROR_ADDRESSMODE=2,k.TEXTURE_CREATIONFLAG_STORAGE=1,k.TEXTUREFORMAT_ALPHA=0,k.TEXTUREFORMAT_LUMINANCE=1,k.TEXTUREFORMAT_LUMINANCE_ALPHA=2,k.TEXTUREFORMAT_RGB=4,k.TEXTUREFORMAT_RGBA=5,k.TEXTUREFORMAT_RED=6,k.TEXTUREFORMAT_R=6,k.TEXTUREFORMAT_R16_UNORM=33322,k.TEXTUREFORMAT_RG16_UNORM=33324,k.TEXTUREFORMAT_RGB16_UNORM=32852,k.TEXTUREFORMAT_RGBA16_UNORM=32859,k.TEXTUREFORMAT_R16_SNORM=36760,k.TEXTUREFORMAT_RG16_SNORM=36761,k.TEXTUREFORMAT_RGB16_SNORM=36762,k.TEXTUREFORMAT_RGBA16_SNORM=36763,k.TEXTUREFORMAT_RG=7,k.TEXTUREFORMAT_RED_INTEGER=8,k.TEXTUREFORMAT_R_INTEGER=8,k.TEXTUREFORMAT_RG_INTEGER=9,k.TEXTUREFORMAT_RGB_INTEGER=10,k.TEXTUREFORMAT_RGBA_INTEGER=11,k.TEXTUREFORMAT_BGRA=12,k.TEXTUREFORMAT_DEPTH24_STENCIL8=13,k.TEXTUREFORMAT_DEPTH32_FLOAT=14,k.TEXTUREFORMAT_DEPTH16=15,k.TEXTUREFORMAT_DEPTH24=16,k.TEXTUREFORMAT_DEPTH24UNORM_STENCIL8=17,k.TEXTUREFORMAT_DEPTH32FLOAT_STENCIL8=18,k.TEXTUREFORMAT_STENCIL8=19,k.TEXTUREFORMAT_UNDEFINED=4294967295,k.TEXTUREFORMAT_COMPRESSED_RGBA_BPTC_UNORM=36492,k.TEXTUREFORMAT_COMPRESSED_SRGB_ALPHA_BPTC_UNORM=36493,k.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT=36495,k.TEXTUREFORMAT_COMPRESSED_RGB_BPTC_SIGNED_FLOAT=36494,k.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT5=33779,k.TEXTUREFORMAT_COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919,k.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT3=33778,k.TEXTUREFORMAT_COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918,k.TEXTUREFORMAT_COMPRESSED_RGBA_S3TC_DXT1=33777,k.TEXTUREFORMAT_COMPRESSED_RGB_S3TC_DXT1=33776,k.TEXTUREFORMAT_COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917,k.TEXTUREFORMAT_COMPRESSED_SRGB_S3TC_DXT1_EXT=35916,k.TEXTUREFORMAT_COMPRESSED_RGBA_ASTC_4x4=37808,k.TEXTUREFORMAT_COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840,k.TEXTUREFORMAT_COMPRESSED_RGB_ETC1_WEBGL=36196,k.TEXTUREFORMAT_COMPRESSED_RGB8_ETC2=37492,k.TEXTUREFORMAT_COMPRESSED_SRGB8_ETC2=37493,k.TEXTUREFORMAT_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494,k.TEXTUREFORMAT_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495,k.TEXTUREFORMAT_COMPRESSED_RGBA8_ETC2_EAC=37496,k.TEXTUREFORMAT_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497,k.TEXTURETYPE_UNSIGNED_BYTE=0,k.TEXTURETYPE_UNSIGNED_INT=0,k.TEXTURETYPE_FLOAT=1,k.TEXTURETYPE_HALF_FLOAT=2,k.TEXTURETYPE_BYTE=3,k.TEXTURETYPE_SHORT=4,k.TEXTURETYPE_UNSIGNED_SHORT=5,k.TEXTURETYPE_INT=6,k.TEXTURETYPE_UNSIGNED_INTEGER=7,k.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=8,k.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=9,k.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=10,k.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=11,k.TEXTURETYPE_UNSIGNED_INT_24_8=12,k.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=13,k.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=14,k.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=15,k.TEXTURETYPE_UNDEFINED=16,k.TEXTURE_2D=3553,k.TEXTURE_2D_ARRAY=35866,k.TEXTURE_CUBE_MAP=34067,k.TEXTURE_CUBE_MAP_ARRAY=3735928559,k.TEXTURE_3D=32879,k.TEXTURE_NEAREST_SAMPLINGMODE=1,k.TEXTURE_NEAREST_NEAREST=1,k.TEXTURE_BILINEAR_SAMPLINGMODE=2,k.TEXTURE_LINEAR_LINEAR=2,k.TEXTURE_TRILINEAR_SAMPLINGMODE=3,k.TEXTURE_LINEAR_LINEAR_MIPLINEAR=3,k.TEXTURE_NEAREST_NEAREST_MIPNEAREST=4,k.TEXTURE_NEAREST_LINEAR_MIPNEAREST=5,k.TEXTURE_NEAREST_LINEAR_MIPLINEAR=6,k.TEXTURE_NEAREST_LINEAR=7,k.TEXTURE_NEAREST_NEAREST_MIPLINEAR=8,k.TEXTURE_LINEAR_NEAREST_MIPNEAREST=9,k.TEXTURE_LINEAR_NEAREST_MIPLINEAR=10,k.TEXTURE_LINEAR_LINEAR_MIPNEAREST=11,k.TEXTURE_LINEAR_NEAREST=12,k.TEXTURE_EXPLICIT_MODE=0,k.TEXTURE_SPHERICAL_MODE=1,k.TEXTURE_PLANAR_MODE=2,k.TEXTURE_CUBIC_MODE=3,k.TEXTURE_PROJECTION_MODE=4,k.TEXTURE_SKYBOX_MODE=5,k.TEXTURE_INVCUBIC_MODE=6,k.TEXTURE_EQUIRECTANGULAR_MODE=7,k.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=8,k.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,k.TEXTURE_FILTERING_QUALITY_OFFLINE=4096,k.TEXTURE_FILTERING_QUALITY_HIGH=64,k.TEXTURE_FILTERING_QUALITY_MEDIUM=16,k.TEXTURE_FILTERING_QUALITY_LOW=8,k.SCALEMODE_FLOOR=1,k.SCALEMODE_NEAREST=2,k.SCALEMODE_CEILING=3,k.MATERIAL_TextureDirtyFlag=1,k.MATERIAL_LightDirtyFlag=2,k.MATERIAL_FresnelDirtyFlag=4,k.MATERIAL_AttributesDirtyFlag=8,k.MATERIAL_MiscDirtyFlag=16,k.MATERIAL_PrePassDirtyFlag=32,k.MATERIAL_ImageProcessingDirtyFlag=64,k.MATERIAL_AllDirtyFlag=127,k.MATERIAL_TriangleFillMode=0,k.MATERIAL_WireFrameFillMode=1,k.MATERIAL_PointFillMode=2,k.MATERIAL_PointListDrawMode=3,k.MATERIAL_LineListDrawMode=4,k.MATERIAL_LineLoopDrawMode=5,k.MATERIAL_LineStripDrawMode=6,k.MATERIAL_TriangleStripDrawMode=7,k.MATERIAL_TriangleFanDrawMode=8,k.MATERIAL_ClockWiseSideOrientation=0,k.MATERIAL_CounterClockWiseSideOrientation=1,k.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR=0,k.MATERIAL_DIFFUSE_MODEL_BURLEY=1,k.MATERIAL_DIFFUSE_MODEL_LAMBERT=2,k.MATERIAL_DIFFUSE_MODEL_LEGACY=3,k.MATERIAL_DIELECTRIC_SPECULAR_MODEL_GLTF=0,k.MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR=1,k.MATERIAL_CONDUCTOR_SPECULAR_MODEL_GLTF=0,k.MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR=1,k.ACTION_NothingTrigger=0,k.ACTION_OnPickTrigger=1,k.ACTION_OnLeftPickTrigger=2,k.ACTION_OnRightPickTrigger=3,k.ACTION_OnCenterPickTrigger=4,k.ACTION_OnPickDownTrigger=5,k.ACTION_OnDoublePickTrigger=6,k.ACTION_OnPickUpTrigger=7,k.ACTION_OnPickOutTrigger=16,k.ACTION_OnLongPressTrigger=8,k.ACTION_OnPointerOverTrigger=9,k.ACTION_OnPointerOutTrigger=10,k.ACTION_OnEveryFrameTrigger=11,k.ACTION_OnIntersectionEnterTrigger=12,k.ACTION_OnIntersectionExitTrigger=13,k.ACTION_OnKeyDownTrigger=14,k.ACTION_OnKeyUpTrigger=15,k.PARTICLES_BILLBOARDMODE_Y=2,k.PARTICLES_BILLBOARDMODE_ALL=7,k.PARTICLES_BILLBOARDMODE_STRETCHED=8,k.PARTICLES_BILLBOARDMODE_STRETCHED_LOCAL=9,k.MESHES_CULLINGSTRATEGY_STANDARD=0,k.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,k.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,k.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,k.SCENELOADER_NO_LOGGING=0,k.SCENELOADER_MINIMAL_LOGGING=1,k.SCENELOADER_SUMMARY_LOGGING=2,k.SCENELOADER_DETAILED_LOGGING=3,k.PREPASS_IRRADIANCE_TEXTURE_TYPE=0,k.PREPASS_POSITION_TEXTURE_TYPE=1,k.PREPASS_VELOCITY_TEXTURE_TYPE=2,k.PREPASS_REFLECTIVITY_TEXTURE_TYPE=3,k.PREPASS_COLOR_TEXTURE_TYPE=4,k.PREPASS_DEPTH_TEXTURE_TYPE=5,k.PREPASS_NORMAL_TEXTURE_TYPE=6,k.PREPASS_ALBEDO_SQRT_TEXTURE_TYPE=7,k.PREPASS_WORLD_NORMAL_TEXTURE_TYPE=8,k.PREPASS_LOCAL_POSITION_TEXTURE_TYPE=9,k.PREPASS_SCREENSPACE_DEPTH_TEXTURE_TYPE=10,k.PREPASS_VELOCITY_LINEAR_TEXTURE_TYPE=11,k.PREPASS_ALBEDO_TEXTURE_TYPE=12,k.PREPASS_NORMALIZED_VIEW_DEPTH_TEXTURE_TYPE=13,k.BUFFER_CREATIONFLAG_READ=1,k.BUFFER_CREATIONFLAG_WRITE=2,k.BUFFER_CREATIONFLAG_READWRITE=3,k.BUFFER_CREATIONFLAG_UNIFORM=4,k.BUFFER_CREATIONFLAG_VERTEX=8,k.BUFFER_CREATIONFLAG_INDEX=16,k.BUFFER_CREATIONFLAG_STORAGE=32,k.BUFFER_CREATIONFLAG_INDIRECT=64,k.RENDERPASS_MAIN=0,k.INPUT_ALT_KEY=18,k.INPUT_CTRL_KEY=17,k.INPUT_META_KEY1=91,k.INPUT_META_KEY2=92,k.INPUT_META_KEY3=93,k.INPUT_SHIFT_KEY=16,k.SNAPSHOTRENDERING_STANDARD=0,k.SNAPSHOTRENDERING_FAST=1,k.PERSPECTIVE_CAMERA=0,k.ORTHOGRAPHIC_CAMERA=1,k.FOVMODE_VERTICAL_FIXED=0,k.FOVMODE_HORIZONTAL_FIXED=1,k.RIG_MODE_NONE=0,k.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,k.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,k.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,k.RIG_MODE_STEREOSCOPIC_OVERUNDER=13,k.RIG_MODE_STEREOSCOPIC_INTERLACED=14,k.RIG_MODE_VR=20,k.RIG_MODE_CUSTOM=22,k.MAX_SUPPORTED_UV_SETS=6,k.GL_ALPHA_EQUATION_ADD=32774,k.GL_ALPHA_EQUATION_MIN=32775,k.GL_ALPHA_EQUATION_MAX=32776,k.GL_ALPHA_EQUATION_SUBTRACT=32778,k.GL_ALPHA_EQUATION_REVERSE_SUBTRACT=32779,k.GL_ALPHA_FUNCTION_SRC=768,k.GL_ALPHA_FUNCTION_ONE_MINUS_SRC_COLOR=769,k.GL_ALPHA_FUNCTION_SRC_ALPHA=770,k.GL_ALPHA_FUNCTION_ONE_MINUS_SRC_ALPHA=771,k.GL_ALPHA_FUNCTION_DST_ALPHA=772,k.GL_ALPHA_FUNCTION_ONE_MINUS_DST_ALPHA=773,k.GL_ALPHA_FUNCTION_DST_COLOR=774,k.GL_ALPHA_FUNCTION_ONE_MINUS_DST_COLOR=775,k.GL_ALPHA_FUNCTION_SRC_ALPHA_SATURATED=776,k.GL_ALPHA_FUNCTION_CONSTANT_COLOR=32769,k.GL_ALPHA_FUNCTION_ONE_MINUS_CONSTANT_COLOR=32770,k.GL_ALPHA_FUNCTION_CONSTANT_ALPHA=32771,k.GL_ALPHA_FUNCTION_ONE_MINUS_CONSTANT_ALPHA=32772,k.GL_ALPHA_FUNCTION_SRC1_COLOR=35065,k.GL_ALPHA_FUNCTION_ONE_MINUS_SRC1_COLOR=35066,k.GL_ALPHA_FUNCTION_SRC1_ALPHA=34185,k.GL_ALPHA_FUNCTION_ONE_MINUS_SRC1_ALPHA=35067,k.SnippetUrl="https://snippet.babylonjs.com",k.FOGMODE_NONE=0,k.FOGMODE_EXP=1,k.FOGMODE_EXP2=2,k.FOGMODE_LINEAR=3,k.BYTE=5120,k.UNSIGNED_BYTE=5121,k.SHORT=5122,k.UNSIGNED_SHORT=5123,k.INT=5124,k.UNSIGNED_INT=5125,k.FLOAT=5126,k.PositionKind="position",k.NormalKind="dj",k.TangentKind="tangent",k.UVKind="uv",k.UV2Kind="uv2",k.UV3Kind="uv3",k.UV4Kind="uv4",k.UV5Kind="uv5",k.UV6Kind="uv6",k.ColorKind="color",k.ColorInstanceKind="instanceColor",k.MatricesIndicesKind="matricesIndices",k.MatricesWeightsKind="matricesWeights",k.MatricesIndicesExtraKind="matricesIndicesExtra",k.MatricesWeightsExtraKind="matricesWeightsExtra",k.ANIMATIONTYPE_FLOAT=0,k.ANIMATIONTYPE_VECTOR3=1,k.ANIMATIONTYPE_QUATERNION=2,k.ANIMATIONTYPE_MATRIX=3,k.ANIMATIONTYPE_COLOR3=4,k.ANIMATIONTYPE_COLOR4=7,k.ANIMATIONTYPE_VECTOR2=5,k.ANIMATIONTYPE_SIZE=6,k.ShadowMinZ=0,k.ShadowMaxZ=1e4},12348:(R,x,H)=>{H.d(x,{b:()=>g});var k=H(643),c=H(647),t=H(661),A=H(695),D=H(683),U=H(825),J=H(610),V=H(845),n=H(687);class g extends D.e{get range(){return this._range}set range(R){this._range=R,this._inverseSquaredRange=1/(this.range*this.range)}get intensityMode(){return this._intensityMode}set intensityMode(R){this._intensityMode=R,this._computePhotometricScale()}get radius(){return this._radius}set radius(R){this._radius=R,this._computePhotometricScale()}get shadowEnabled(){return this._shadowEnabled}set shadowEnabled(R){this._shadowEnabled!==R&&(this._shadowEnabled=R,this._markMeshesAsLightDirty())}get includedOnlyMeshes(){return this._includedOnlyMeshes}set includedOnlyMeshes(R){this._includedOnlyMeshes=R,this._hookArrayForIncludedOnly(R)}get excludedMeshes(){return this._excludedMeshes}set excludedMeshes(R){this._excludedMeshes=R,this._hookArrayForExcluded(R)}get excludeWithLayerMask(){return this._excludeWithLayerMask}set excludeWithLayerMask(R){this._excludeWithLayerMask=R,this._resyncMeshes()}get includeOnlyWithLayerMask(){return this._includeOnlyWithLayerMask}set includeOnlyWithLayerMask(R){this._includeOnlyWithLayerMask=R,this._resyncMeshes()}get lightmapMode(){return this._lightmapMode}set lightmapMode(R){this._lightmapMode!==R&&(this._lightmapMode=R,this._markMeshesAsLightDirty())}getViewMatrix(R){return null}getProjectionMatrix(R,x){return null}constructor(R,x){super(R,x,!1),this.cb=new A.c(1,1,1),this.pj=new A.c(1,1,1),this.falloffType=g.FALLOFF_DEFAULT,this.bb=1,this._range=Number.MAX_VALUE,this._inverseSquaredRange=0,this._photometricScale=1,this._intensityMode=g.INTENSITYMODE_AUTOMATIC,this._radius=1e-5,this.renderPriority=0,this._shadowEnabled=!0,this._excludeWithLayerMask=0,this._includeOnlyWithLayerMask=0,this._lightmapMode=0,this._shadowGenerators=null,this._excludedMeshesIds=new Array,this._includedOnlyMeshesIds=new Array,this._isLight=!0,this.va().addLight(this),this._uniformBuffer=new U.d(this.va().getEngine(),void 0,void 0,R),this._buildUniformLayout(),this.includedOnlyMeshes=[],this.excludedMeshes=[],this._resyncMeshes()}transferTexturesToEffect(R,x){return this}_bindLight(R,x,H,k){let c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const t=R.toString();let D=!1;if(this._uniformBuffer.bindToEffect(H,"Light"+t),this._renderId!==x.getRenderId()||this._lastUseSpecular!==k||!this._uniformBuffer.useUbo){this._renderId=x.getRenderId(),this._lastUseSpecular=k;const R=this.getScaledIntensity();this.transferToEffect(H,t),this.cb.scaleToRef(R,A.h.fj[0]),this._uniformBuffer.updateColor4("vLightDiffuse",A.h.fj[0],this.range,t),k&&(this.pj.scaleToRef(R,A.h.fj[1]),this._uniformBuffer.updateColor4("vLightSpecular",A.h.fj[1],this.radius,t)),D=!0}if(this.transferTexturesToEffect(H,t),x.shadowsEnabled&&this.shadowEnabled&&c){const R=this.getShadowGenerator(x.activeCamera)??this.getShadowGenerator();R&&(R.bindShadowLight(t,H),D=!0)}D?this._uniformBuffer.update():this._uniformBuffer.bindUniformBuffer()}getClassName(){return"Light"}toString(R){let x="Name: "+this.name;if(x+=", type: "+["Point","Directional","Spot","Hemispheric"][this.getTypeID()],this.animations)for(let H=0;H<this.animations.length;H++)x+=", animation[0]: "+this.animations[H].toString(R);return x}_syncParentEnabledState(){super._syncParentEnabledState(),this.u()||this._resyncMeshes()}oi(R){super.oi(R),this._resyncMeshes()}getShadowGenerator(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===this._shadowGenerators?null:this._shadowGenerators.get(R)??null}getShadowGenerators(){return this._shadowGenerators}getAbsolutePosition(){return t.o.Zero()}canAffectMesh(R){return!R||!(this.includedOnlyMeshes&&this.includedOnlyMeshes.length>0&&-1===this.includedOnlyMeshes.indexOf(R))&&(!(this.excludedMeshes&&this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(R))&&((0===this.includeOnlyWithLayerMask||0!==(this.includeOnlyWithLayerMask&R.layerMask))&&!(0!==this.excludeWithLayerMask&&this.excludeWithLayerMask&R.layerMask)))}dispose(R){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._shadowGenerators){const R=this._shadowGenerators.values();for(let x=R.next();!0!==x.done;x=R.next()){x.value.dispose()}this._shadowGenerators=null}if(this.va().stopAnimation(this),this._parentContainer){const R=this._parentContainer.lights.indexOf(this);R>-1&&this._parentContainer.lights.splice(R,1),this._parentContainer=null}for(const H of this.va().meshes)H._removeLightSource(this,!0);this._uniformBuffer.dispose(),this.va().removeLight(this),super.dispose(R,x)}getTypeID(){return 0}getScaledIntensity(){return this._photometricScale*this.bb}clone(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const H=g.GetConstructorFromName(this.getTypeID(),R,this.va());if(!H)return null;const k=n.d.Clone(H,this);return R&&(k.name=R),x&&(k.parent=x),k.oi(this.isEnabled()),this.onClonedObservable.notifyObservers(k),k}serialize(){const R=n.d.Serialize(this);if(R.uniqueId=this.uniqueId,R.type=this.getTypeID(),this.parent&&this.parent._serializeAsParent(R),this.excludedMeshes.length>0){R.excludedMeshesIds=[];for(const x of this.excludedMeshes)R.excludedMeshesIds.push(x.id)}if(this.includedOnlyMeshes.length>0){R.includedOnlyMeshesIds=[];for(const x of this.includedOnlyMeshes)R.includedOnlyMeshesIds.push(x.id)}return n.d.AppendSerializedAnimations(this,R),R.ranges=this.serializeAnimationRanges(),R.isEnabled=this.isEnabled(),R}static GetConstructorFromName(R,x,H){const k=D.e.Construct("Light_Type_"+R,x,H);return k||null}static Parse(R,x){const H=g.GetConstructorFromName(R.type,R.name,x);if(!H)return null;const k=n.d.Parse(H,R,x);if(R.excludedMeshesIds&&(k._excludedMeshesIds=R.excludedMeshesIds),R.includedOnlyMeshesIds&&(k._includedOnlyMeshesIds=R.includedOnlyMeshesIds),void 0!==R.parentId&&(k._waitingParentId=R.parentId),void 0!==R.parentInstanceIndex&&(k._waitingParentInstanceIndex=R.parentInstanceIndex),void 0!==R.falloffType&&(k.falloffType=R.falloffType),void 0!==R.lightmapMode&&(k.lightmapMode=R.lightmapMode),R.animations){for(let x=0;x<R.animations.length;x++){const H=R.animations[x],c=(0,J.e)("BABYLON.Animation");c&&k.animations.push(c.Parse(H))}D.e.ParseAnimationRanges(k,R,x)}return R.autoAnimate&&x.beginAnimation(k,R.autoAnimateFrom,R.autoAnimateTo,R.autoAnimateLoop,R.autoAnimateSpeed||1),void 0!==R.isEnabled&&k.oi(R.isEnabled),k}_hookArrayForExcluded(R){var x=this;const H=R.push;R.push=function(){for(var k=arguments.length,c=new Array(k),t=0;t<k;t++)c[t]=arguments[t];const A=H.apply(R,c);for(const R of c)R._resyncLightSource(x);return A};const k=R.splice;R.splice=(x,H)=>{const c=k.apply(R,[x,H]);for(const R of c)R._resyncLightSource(this);return c};for(const c of R)c._resyncLightSource(this)}_hookArrayForIncludedOnly(R){var x=this;const H=R.push;R.push=function(){for(var k=arguments.length,c=new Array(k),t=0;t<k;t++)c[t]=arguments[t];const A=H.apply(R,c);return x._resyncMeshes(),A};const k=R.splice;R.splice=(x,H)=>{const c=k.apply(R,[x,H]);return this._resyncMeshes(),c},this._resyncMeshes()}_resyncMeshes(){for(const R of this.va().meshes)R._resyncLightSource(this)}_markMeshesAsLightDirty(){for(const R of this.va().meshes)-1!==R.lightSources.indexOf(this)&&R._markSubMeshesAsLightDirty()}_computePhotometricScale(){this._photometricScale=this._getPhotometricScale(),this.va().resetCachedMaterial()}_getPhotometricScale(){let R=0;const x=this.getTypeID();let H=this.intensityMode;switch(H===g.INTENSITYMODE_AUTOMATIC&&(H=x===g.LIGHTTYPEID_DIRECTIONALLIGHT?g.INTENSITYMODE_ILLUMINANCE:g.INTENSITYMODE_LUMINOUSINTENSITY),x){case g.LIGHTTYPEID_POINTLIGHT:case g.LIGHTTYPEID_SPOTLIGHT:switch(H){case g.INTENSITYMODE_LUMINOUSPOWER:R=1/(4*Math.PI);break;case g.INTENSITYMODE_LUMINOUSINTENSITY:R=1;break;case g.INTENSITYMODE_LUMINANCE:R=this.radius*this.radius}break;case g.LIGHTTYPEID_DIRECTIONALLIGHT:switch(H){case g.INTENSITYMODE_ILLUMINANCE:R=1;break;case g.INTENSITYMODE_LUMINANCE:{let x=this.radius;x=Math.max(x,.001);R=2*Math.PI*(1-Math.cos(x));break}}break;case g.LIGHTTYPEID_HEMISPHERICLIGHT:R=1}return R}_reorderLightsInScene(){const R=this.va();0!=this._renderPriority&&(R.requireLightSorting=!0),this.va().sortLightsByPriority()}_isReady(){return!0}}g.FALLOFF_DEFAULT=V.b.FALLOFF_DEFAULT,g.FALLOFF_PHYSICAL=V.b.FALLOFF_PHYSICAL,g.FALLOFF_GLTF=V.b.FALLOFF_GLTF,g.FALLOFF_STANDARD=V.b.FALLOFF_STANDARD,g.LIGHTMAP_DEFAULT=V.b.LIGHTMAP_DEFAULT,g.LIGHTMAP_SPECULAR=V.b.LIGHTMAP_SPECULAR,g.LIGHTMAP_SHADOWSONLY=V.b.LIGHTMAP_SHADOWSONLY,g.INTENSITYMODE_AUTOMATIC=V.b.INTENSITYMODE_AUTOMATIC,g.INTENSITYMODE_LUMINOUSPOWER=V.b.INTENSITYMODE_LUMINOUSPOWER,g.INTENSITYMODE_LUMINOUSINTENSITY=V.b.INTENSITYMODE_LUMINOUSINTENSITY,g.INTENSITYMODE_ILLUMINANCE=V.b.INTENSITYMODE_ILLUMINANCE,g.INTENSITYMODE_LUMINANCE=V.b.INTENSITYMODE_LUMINANCE,g.LIGHTTYPEID_POINTLIGHT=V.b.LIGHTTYPEID_POINTLIGHT,g.LIGHTTYPEID_DIRECTIONALLIGHT=V.b.LIGHTTYPEID_DIRECTIONALLIGHT,g.LIGHTTYPEID_SPOTLIGHT=V.b.LIGHTTYPEID_SPOTLIGHT,g.LIGHTTYPEID_HEMISPHERICLIGHT=V.b.LIGHTTYPEID_HEMISPHERICLIGHT,g.LIGHTTYPEID_RECT_AREALIGHT=V.b.LIGHTTYPEID_RECT_AREALIGHT,(0,k.d)([(0,c.p)()],g.prototype,"diffuse",void 0),(0,k.d)([(0,c.p)()],g.prototype,"specular",void 0),(0,k.d)([(0,c.Q)()],g.prototype,"falloffType",void 0),(0,k.d)([(0,c.Q)()],g.prototype,"intensity",void 0),(0,k.d)([(0,c.Q)()],g.prototype,"range",null),(0,k.d)([(0,c.Q)()],g.prototype,"intensityMode",null),(0,k.d)([(0,c.Q)()],g.prototype,"radius",null),(0,k.d)([(0,c.Q)()],g.prototype,"_renderPriority",void 0),(0,k.d)([(0,c.e)("_reorderLightsInScene")],g.prototype,"renderPriority",void 0),(0,k.d)([(0,c.Q)("shadowEnabled")],g.prototype,"_shadowEnabled",void 0),(0,k.d)([(0,c.Q)("excludeWithLayerMask")],g.prototype,"_excludeWithLayerMask",void 0),(0,k.d)([(0,c.Q)("includeOnlyWithLayerMask")],g.prototype,"_includeOnlyWithLayerMask",void 0),(0,k.d)([(0,c.Q)("lightmapMode")],g.prototype,"_lightmapMode",void 0)},12395:(R,x,H)=>{H.d(x,{e:()=>U});var k=H(643),c=H(647),t=H(661),A=H(12348),D=H(831);class U extends A.b{constructor(){super(...arguments),this._needProjectionMatrixCompute=!0,this._viewMatrix=t.e.Identity(),this._projectionMatrix=t.e.Identity()}_setPosition(R){this._position=R}get position(){return this._position}set position(R){this._setPosition(R)}_setDirection(R){this._direction=R}get direction(){return this._direction}set direction(R){this._setDirection(R)}get shadowMinZ(){return this._shadowMinZ}set shadowMinZ(R){this._shadowMinZ=R,this.forceProjectionMatrixCompute()}get shadowMaxZ(){return this._shadowMaxZ}set shadowMaxZ(R){this._shadowMaxZ=R,this.forceProjectionMatrixCompute()}computeTransformedInformation(){return!(!this.parent||!this.parent.getWorldMatrix)&&(this.transformedPosition||(this.transformedPosition=t.o.Zero()),t.o.TransformCoordinatesToRef(this.position,this.parent.getWorldMatrix(),this.transformedPosition),this.direction&&(this.transformedDirection||(this.transformedDirection=t.o.Zero()),t.o.TransformNormalToRef(this.direction,this.parent.getWorldMatrix(),this.transformedDirection)),!0)}getDepthScale(){return 50}getShadowDirection(R){return this.transformedDirection?this.transformedDirection:this.direction}getAbsolutePosition(){return this.transformedPosition?this.transformedPosition:this.position}setDirectionToTarget(R){return this.direction=t.o.Normalize(R.Pg(this.position)),this.direction}getRotation(){this.direction.normalize();const R=t.o.Cross(this.direction,D.c.Y),x=t.o.Cross(R,this.direction);return t.o.RotationFromAxis(R,x,this.direction)}needCube(){return!1}needProjectionMatrixCompute(){return this._needProjectionMatrixCompute}forceProjectionMatrixCompute(){this._needProjectionMatrixCompute=!0}_initCache(){super._initCache(),this._cache.position=t.o.Zero()}_isSynchronized(){return!!this._cache.position.equals(this.position)}Fi(R){return!R&&this.isSynchronized()?(this._currentRenderId=this.va().getRenderId(),this._worldMatrix):(this._updateCache(),this._cache.position.p(this.position),this._worldMatrix||(this._worldMatrix=t.e.Identity()),t.e.TranslationToRef(this.position.x,this.position.y,this.position.z,this._worldMatrix),this.parent&&this.parent.getWorldMatrix&&(this._worldMatrix.multiplyToRef(this.parent.getWorldMatrix(),this._worldMatrix),this._markSyncedWithParent()),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix)}getDepthMinZ(R){return void 0!==this.shadowMinZ?this.shadowMinZ:(null===R||void 0===R?void 0:R.Hi)||0}getDepthMaxZ(R){return void 0!==this.shadowMaxZ?this.shadowMaxZ:(null===R||void 0===R?void 0:R.maxZ)||1e4}setShadowProjectionMatrix(R,x,H){return this.customProjectionMatrixBuilder?this.customProjectionMatrixBuilder(x,H,R):this._setDefaultShadowProjectionMatrix(R,x,H),this}_syncParentEnabledState(){super._syncParentEnabledState(),this.parent&&this.parent.getWorldMatrix||(this.transformedPosition=null,this.transformedDirection=null)}getViewMatrix(R){const x=t.g.Bi[0];let H=this.position;this.computeTransformedInformation()&&(H=this.transformedPosition),t.o.NormalizeToRef(this.getShadowDirection(R),x),1===Math.abs(t.o.Dot(x,t.o.Up()))&&(x.z=1e-13);const k=t.g.Bi[1];return H.addToRef(x,k),t.e.LookAtLHToRef(H,k,t.o.Up(),this._viewMatrix),this._viewMatrix}getProjectionMatrix(R,x){return this.setShadowProjectionMatrix(this._projectionMatrix,R??this._viewMatrix,x??[]),this._projectionMatrix}}(0,k.d)([(0,c.N)()],U.prototype,"position",null),(0,k.d)([(0,c.N)()],U.prototype,"direction",null),(0,k.d)([(0,c.Q)()],U.prototype,"shadowMinZ",null),(0,k.d)([(0,c.Q)()],U.prototype,"shadowMaxZ",null)},12268:(R,x,H)=>{H.d(x,{b:()=>G});var k=H(643),c=H(647),t=H(493),A=H(654),D=H(12266),U=H(2445),J=H(661),V=H(724),n=H(12276),g=H(12281);class I extends n.e{constructor(){super(...arguments),this.BRDF_V_HEIGHT_CORRELATED=!1,this.MS_BRDF_ENERGY_CONSERVATION=!1,this.SPHERICAL_HARMONICS=!1,this.SPECULAR_GLOSSINESS_ENERGY_CONSERVATION=!1,this.MIX_IBL_RADIANCE_WITH_IRRADIANCE=!0,this.LEGACY_SPECULAR_ENERGY_CONSERVATION=!1,this.BASE_DIFFUSE_MODEL=0,this.DIELECTRIC_SPECULAR_MODEL=0,this.CONDUCTOR_SPECULAR_MODEL=0}}class i extends g.e{_markAllSubMeshesAsMiscDirty(){this._internalMarkAllSubMeshesAsMiscDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"PBRBRDF",90,new I,x),this._useEnergyConservation=i.DEFAULT_USE_ENERGY_CONSERVATION,this.useEnergyConservation=i.DEFAULT_USE_ENERGY_CONSERVATION,this._useSmithVisibilityHeightCorrelated=i.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED,this.useSmithVisibilityHeightCorrelated=i.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED,this._useSphericalHarmonics=i.DEFAULT_USE_SPHERICAL_HARMONICS,this.useSphericalHarmonics=i.DEFAULT_USE_SPHERICAL_HARMONICS,this._useSpecularGlossinessInputEnergyConservation=i.DEFAULT_USE_SPECULAR_GLOSSINESS_INPUT_ENERGY_CONSERVATION,this.useSpecularGlossinessInputEnergyConservation=i.DEFAULT_USE_SPECULAR_GLOSSINESS_INPUT_ENERGY_CONSERVATION,this._mixIblRadianceWithIrradiance=i.DEFAULT_MIX_IBL_RADIANCE_WITH_IRRADIANCE,this.mixIblRadianceWithIrradiance=i.DEFAULT_MIX_IBL_RADIANCE_WITH_IRRADIANCE,this._useLegacySpecularEnergyConservation=i.DEFAULT_USE_LEGACY_SPECULAR_ENERGY_CONSERVATION,this.useLegacySpecularEnergyConservation=i.DEFAULT_USE_LEGACY_SPECULAR_ENERGY_CONSERVATION,this._baseDiffuseModel=i.DEFAULT_DIFFUSE_MODEL,this.baseDiffuseModel=i.DEFAULT_DIFFUSE_MODEL,this._dielectricSpecularModel=i.DEFAULT_DIELECTRIC_SPECULAR_MODEL,this.dielectricSpecularModel=i.DEFAULT_DIELECTRIC_SPECULAR_MODEL,this._conductorSpecularModel=i.DEFAULT_CONDUCTOR_SPECULAR_MODEL,this.conductorSpecularModel=i.DEFAULT_CONDUCTOR_SPECULAR_MODEL,this._internalMarkAllSubMeshesAsMiscDirty=R._dirtyCallbacks[16],this._enable(!0)}prepareDefines(R){R.BRDF_V_HEIGHT_CORRELATED=this._useSmithVisibilityHeightCorrelated,R.MS_BRDF_ENERGY_CONSERVATION=this._useEnergyConservation&&this._useSmithVisibilityHeightCorrelated,R.SPHERICAL_HARMONICS=this._useSphericalHarmonics,R.SPECULAR_GLOSSINESS_ENERGY_CONSERVATION=this._useSpecularGlossinessInputEnergyConservation,R.MIX_IBL_RADIANCE_WITH_IRRADIANCE=this._mixIblRadianceWithIrradiance,R.LEGACY_SPECULAR_ENERGY_CONSERVATION=this._useLegacySpecularEnergyConservation,R.BASE_DIFFUSE_MODEL=this._baseDiffuseModel,R.DIELECTRIC_SPECULAR_MODEL=this._dielectricSpecularModel,R.CONDUCTOR_SPECULAR_MODEL=this._conductorSpecularModel}getClassName(){return"PBRBRDFConfiguration"}}i.DEFAULT_USE_ENERGY_CONSERVATION=!0,i.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED=!0,i.DEFAULT_USE_SPHERICAL_HARMONICS=!0,i.DEFAULT_USE_SPECULAR_GLOSSINESS_INPUT_ENERGY_CONSERVATION=!0,i.DEFAULT_MIX_IBL_RADIANCE_WITH_IRRADIANCE=!0,i.DEFAULT_USE_LEGACY_SPECULAR_ENERGY_CONSERVATION=!0,i.DEFAULT_DIFFUSE_MODEL=0,i.DEFAULT_DIELECTRIC_SPECULAR_MODEL=0,i.DEFAULT_CONDUCTOR_SPECULAR_MODEL=0,(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"useEnergyConservation",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"useSmithVisibilityHeightCorrelated",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"useSphericalHarmonics",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"useSpecularGlossinessInputEnergyConservation",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"mixIblRadianceWithIrradiance",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"useLegacySpecularEnergyConservation",void 0),(0,k.d)([(0,c.Q)("baseDiffuseModel"),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"baseDiffuseModel",void 0),(0,k.d)([(0,c.Q)("dielectricSpecularModel"),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"dielectricSpecularModel",void 0),(0,k.d)([(0,c.Q)("conductorSpecularModel"),(0,c.e)("_markAllSubMeshesAsMiscDirty")],i.prototype,"conductorSpecularModel",void 0);var q=H(12286),S=H(695),L=H(2449),b=H(837),C=H(12292),F=H(2311),d=H(12300),P=(H(2503),H(12307)),a=H(841);class X extends n.e{constructor(){super(...arguments),this.CLEARCOAT=!1,this.CLEARCOAT_DEFAULTIOR=!1,this.CLEARCOAT_TEXTURE=!1,this.CLEARCOAT_TEXTURE_ROUGHNESS=!1,this.CLEARCOAT_TEXTUREDIRECTUV=0,this.CLEARCOAT_TEXTURE_ROUGHNESSDIRECTUV=0,this.CLEARCOAT_BUMP=!1,this.CLEARCOAT_BUMPDIRECTUV=0,this.CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE=!1,this.CLEARCOAT_REMAP_F0=!1,this.CLEARCOAT_TINT=!1,this.CLEARCOAT_TINT_TEXTURE=!1,this.CLEARCOAT_TINT_TEXTUREDIRECTUV=0,this.CLEARCOAT_TINT_GAMMATEXTURE=!1}}class M extends g.e{_markAllSubMeshesAsTexturesDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"PBRClearCoat",100,new X,x),this._isEnabled=!1,this.isEnabled=!1,this.bb=1,this.roughness=0,this._indexOfRefraction=M._DefaultIndexOfRefraction,this.indexOfRefraction=M._DefaultIndexOfRefraction,this._texture=null,this.texture=null,this._useRoughnessFromMainTexture=!0,this.useRoughnessFromMainTexture=!0,this._textureRoughness=null,this.textureRoughness=null,this._remapF0OnInterfaceChange=!0,this.remapF0OnInterfaceChange=!0,this._bumpTexture=null,this.bumpTexture=null,this._isTintEnabled=!1,this.isTintEnabled=!1,this.tintColor=S.c.White(),this.tintColorAtDistance=1,this.tintThickness=1,this._tintTexture=null,this.tintTexture=null,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1]}isReadyForSubMesh(R,x,H){if(!this._isEnabled)return!0;const k=this._material._disableBumpMap;if(R._areTexturesDirty&&x.texturesEnabled){if(this._texture&&d.e.ClearCoatTextureEnabled&&!this._texture.isReadyOrNotBlocking())return!1;if(this._textureRoughness&&d.e.ClearCoatTextureEnabled&&!this._textureRoughness.isReadyOrNotBlocking())return!1;if(H.getCaps().standardDerivatives&&this._bumpTexture&&d.e.ClearCoatBumpTextureEnabled&&!k&&!this._bumpTexture.isReady())return!1;if(this._isTintEnabled&&this._tintTexture&&d.e.ClearCoatTintTextureEnabled&&!this._tintTexture.isReadyOrNotBlocking())return!1}return!0}prepareDefinesBeforeAttributes(R,x){this._isEnabled?(R.CLEARCOAT=!0,R.CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE=this._useRoughnessFromMainTexture,R.CLEARCOAT_REMAP_F0=this._remapF0OnInterfaceChange,R._areTexturesDirty&&x.texturesEnabled&&(this._texture&&d.e.ClearCoatTextureEnabled?(0,a.U)(this._texture,R,"CLEARCOAT_TEXTURE"):R.CLEARCOAT_TEXTURE=!1,this._textureRoughness&&d.e.ClearCoatTextureEnabled?(0,a.U)(this._textureRoughness,R,"CLEARCOAT_TEXTURE_ROUGHNESS"):R.CLEARCOAT_TEXTURE_ROUGHNESS=!1,this._bumpTexture&&d.e.ClearCoatBumpTextureEnabled?(0,a.U)(this._bumpTexture,R,"CLEARCOAT_BUMP"):R.CLEARCOAT_BUMP=!1,R.CLEARCOAT_DEFAULTIOR=this._indexOfRefraction===M._DefaultIndexOfRefraction,this._isTintEnabled?(R.CLEARCOAT_TINT=!0,this._tintTexture&&d.e.ClearCoatTintTextureEnabled?((0,a.U)(this._tintTexture,R,"CLEARCOAT_TINT_TEXTURE"),R.CLEARCOAT_TINT_GAMMATEXTURE=this._tintTexture.gammaSpace):R.CLEARCOAT_TINT_TEXTURE=!1):(R.CLEARCOAT_TINT=!1,R.CLEARCOAT_TINT_TEXTURE=!1))):(R.CLEARCOAT=!1,R.CLEARCOAT_TEXTURE=!1,R.CLEARCOAT_TEXTURE_ROUGHNESS=!1,R.CLEARCOAT_BUMP=!1,R.CLEARCOAT_TINT=!1,R.CLEARCOAT_TINT_TEXTURE=!1,R.CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE=!1,R.CLEARCOAT_DEFAULTIOR=!1,R.CLEARCOAT_TEXTUREDIRECTUV=0,R.CLEARCOAT_TEXTURE_ROUGHNESSDIRECTUV=0,R.CLEARCOAT_BUMPDIRECTUV=0,R.CLEARCOAT_REMAP_F0=!1,R.CLEARCOAT_TINT_TEXTUREDIRECTUV=0,R.CLEARCOAT_TINT_GAMMATEXTURE=!1)}bindForSubMesh(R,x,H,k){if(!this._isEnabled)return;const c=k.materialDefines,t=this._material.isFrozen,A=this._material._disableBumpMap,D=this._material._invertNormalMapX,U=this._material._invertNormalMapY;if(!R.useUbo||!t||!R.isSync){var J,V,n,g;if((this._texture||this._textureRoughness)&&d.e.ClearCoatTextureEnabled)R.updateFloat4("vClearCoatInfos",(null===(J=this._texture)||void 0===J?void 0:J.coordinatesIndex)??0,(null===(V=this._texture)||void 0===V?void 0:V.level)??0,(null===(n=this._textureRoughness)||void 0===n?void 0:n.coordinatesIndex)??0,(null===(g=this._textureRoughness)||void 0===g?void 0:g.level)??0),this._texture&&(0,a.u)(this._texture,R,"clearCoat"),this._textureRoughness&&!c.CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE&&(0,a.u)(this._textureRoughness,R,"clearCoatRoughness");this._bumpTexture&&H.getCaps().standardDerivatives&&d.e.ClearCoatTextureEnabled&&!A&&(R.updateFloat2("vClearCoatBumpInfos",this._bumpTexture.coordinatesIndex,this._bumpTexture.level),(0,a.u)(this._bumpTexture,R,"clearCoatBump"),x._mirroredCameraPosition?R.updateFloat2("vClearCoatTangentSpaceParams",D?1:-1,U?1:-1):R.updateFloat2("vClearCoatTangentSpaceParams",D?-1:1,U?-1:1)),this._tintTexture&&d.e.ClearCoatTintTextureEnabled&&(R.updateFloat2("vClearCoatTintInfos",this._tintTexture.coordinatesIndex,this._tintTexture.level),(0,a.u)(this._tintTexture,R,"clearCoatTint")),R.updateFloat2("vClearCoatParams",this.bb,this.roughness);const k=1-this._indexOfRefraction,t=1+this._indexOfRefraction,I=Math.pow(-k/t,2),i=1/this._indexOfRefraction;R.updateFloat4("vClearCoatRefractionParams",I,i,k,t),this._isTintEnabled&&(R.updateFloat4("vClearCoatTintParams",this.tintColor.r,this.tintColor.g,this.tintColor.b,Math.max(1e-5,this.tintThickness)),R.updateFloat("clearCoatColorAtDistance",Math.max(1e-5,this.tintColorAtDistance)))}x.texturesEnabled&&(this._texture&&d.e.ClearCoatTextureEnabled&&R.setTexture("clearCoatSampler",this._texture),this._textureRoughness&&!c.CLEARCOAT_USE_ROUGHNESS_FROM_MAINTEXTURE&&d.e.ClearCoatTextureEnabled&&R.setTexture("clearCoatRoughnessSampler",this._textureRoughness),this._bumpTexture&&H.getCaps().standardDerivatives&&d.e.ClearCoatBumpTextureEnabled&&!A&&R.setTexture("clearCoatBumpSampler",this._bumpTexture),this._isTintEnabled&&this._tintTexture&&d.e.ClearCoatTintTextureEnabled&&R.setTexture("clearCoatTintSampler",this._tintTexture))}hasTexture(R){return this._texture===R||(this._textureRoughness===R||(this._bumpTexture===R||this._tintTexture===R))}getActiveTextures(R){this._texture&&R.push(this._texture),this._textureRoughness&&R.push(this._textureRoughness),this._bumpTexture&&R.push(this._bumpTexture),this._tintTexture&&R.push(this._tintTexture)}getAnimatables(R){this._texture&&this._texture.animations&&this._texture.animations.length>0&&R.push(this._texture),this._textureRoughness&&this._textureRoughness.animations&&this._textureRoughness.animations.length>0&&R.push(this._textureRoughness),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&R.push(this._bumpTexture),this._tintTexture&&this._tintTexture.animations&&this._tintTexture.animations.length>0&&R.push(this._tintTexture)}dispose(R){var x,H,k,c;R&&(null===(x=this._texture)||void 0===x||x.dispose(),null===(H=this._textureRoughness)||void 0===H||H.dispose(),null===(k=this._bumpTexture)||void 0===k||k.dispose(),null===(c=this._tintTexture)||void 0===c||c.dispose())}getClassName(){return"PBRClearCoatConfiguration"}addFallbacks(R,x,H){return R.CLEARCOAT_BUMP&&x.addFallback(H++,"CLEARCOAT_BUMP"),R.CLEARCOAT_TINT&&x.addFallback(H++,"CLEARCOAT_TINT"),R.CLEARCOAT&&x.addFallback(H++,"CLEARCOAT"),H}getSamplers(R){R.push("clearCoatSampler","clearCoatRoughnessSampler","clearCoatBumpSampler","clearCoatTintSampler")}getUniforms(){return{ubo:[{name:"vClearCoatParams",size:2,type:"vec2"},{name:"vClearCoatRefractionParams",size:4,type:"vec4"},{name:"vClearCoatInfos",size:4,type:"vec4"},{name:"clearCoatMatrix",size:16,type:"mat4"},{name:"clearCoatRoughnessMatrix",size:16,type:"mat4"},{name:"vClearCoatBumpInfos",size:2,type:"vec2"},{name:"vClearCoatTangentSpaceParams",size:2,type:"vec2"},{name:"clearCoatBumpMatrix",size:16,type:"mat4"},{name:"vClearCoatTintParams",size:4,type:"vec4"},{name:"clearCoatColorAtDistance",size:1,type:"float"},{name:"vClearCoatTintInfos",size:2,type:"vec2"},{name:"clearCoatTintMatrix",size:16,type:"mat4"}]}}}M._DefaultIndexOfRefraction=1.5,(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"isEnabled",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"intensity",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"roughness",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"indexOfRefraction",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"texture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useRoughnessFromMainTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"textureRoughness",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"remapF0OnInterfaceChange",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"bumpTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"isTintEnabled",void 0),(0,k.d)([(0,c.p)()],M.prototype,"tintColor",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"tintColorAtDistance",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"tintThickness",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"tintTexture",void 0);class B extends n.e{constructor(){super(...arguments),this.IRIDESCENCE=!1,this.IRIDESCENCE_TEXTURE=!1,this.IRIDESCENCE_TEXTUREDIRECTUV=0,this.IRIDESCENCE_THICKNESS_TEXTURE=!1,this.IRIDESCENCE_THICKNESS_TEXTUREDIRECTUV=0}}class o extends g.e{_markAllSubMeshesAsTexturesDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"PBRIridescence",110,new B,x),this._isEnabled=!1,this.isEnabled=!1,this.bb=1,this.minimumThickness=o._DefaultMinimumThickness,this.maximumThickness=o._DefaultMaximumThickness,this.indexOfRefraction=o._DefaultIndexOfRefraction,this._texture=null,this.texture=null,this._thicknessTexture=null,this.thicknessTexture=null,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1]}isReadyForSubMesh(R,x){if(!this._isEnabled)return!0;if(R._areTexturesDirty&&x.texturesEnabled){if(this._texture&&d.e.IridescenceTextureEnabled&&!this._texture.isReadyOrNotBlocking())return!1;if(this._thicknessTexture&&d.e.IridescenceTextureEnabled&&!this._thicknessTexture.isReadyOrNotBlocking())return!1}return!0}prepareDefinesBeforeAttributes(R,x){this._isEnabled?(R.IRIDESCENCE=!0,R._areTexturesDirty&&x.texturesEnabled&&(this._texture&&d.e.IridescenceTextureEnabled?(0,a.U)(this._texture,R,"IRIDESCENCE_TEXTURE"):R.IRIDESCENCE_TEXTURE=!1,this._thicknessTexture&&d.e.IridescenceTextureEnabled?(0,a.U)(this._thicknessTexture,R,"IRIDESCENCE_THICKNESS_TEXTURE"):R.IRIDESCENCE_THICKNESS_TEXTURE=!1)):(R.IRIDESCENCE=!1,R.IRIDESCENCE_TEXTURE=!1,R.IRIDESCENCE_THICKNESS_TEXTURE=!1,R.IRIDESCENCE_TEXTUREDIRECTUV=0,R.IRIDESCENCE_THICKNESS_TEXTUREDIRECTUV=0)}bindForSubMesh(R,x){if(!this._isEnabled)return;const H=this._material.isFrozen;if(!R.useUbo||!H||!R.isSync){var k,c,t,A;if((this._texture||this._thicknessTexture)&&d.e.IridescenceTextureEnabled)R.updateFloat4("vIridescenceInfos",(null===(k=this._texture)||void 0===k?void 0:k.coordinatesIndex)??0,(null===(c=this._texture)||void 0===c?void 0:c.level)??0,(null===(t=this._thicknessTexture)||void 0===t?void 0:t.coordinatesIndex)??0,(null===(A=this._thicknessTexture)||void 0===A?void 0:A.level)??0),this._texture&&(0,a.u)(this._texture,R,"iridescence"),this._thicknessTexture&&(0,a.u)(this._thicknessTexture,R,"iridescenceThickness");R.updateFloat4("vIridescenceParams",this.bb,this.indexOfRefraction,this.minimumThickness,this.maximumThickness)}x.texturesEnabled&&(this._texture&&d.e.IridescenceTextureEnabled&&R.setTexture("iridescenceSampler",this._texture),this._thicknessTexture&&d.e.IridescenceTextureEnabled&&R.setTexture("iridescenceThicknessSampler",this._thicknessTexture))}hasTexture(R){return this._texture===R||this._thicknessTexture===R}getActiveTextures(R){this._texture&&R.push(this._texture),this._thicknessTexture&&R.push(this._thicknessTexture)}getAnimatables(R){this._texture&&this._texture.animations&&this._texture.animations.length>0&&R.push(this._texture),this._thicknessTexture&&this._thicknessTexture.animations&&this._thicknessTexture.animations.length>0&&R.push(this._thicknessTexture)}dispose(R){var x,H;R&&(null===(x=this._texture)||void 0===x||x.dispose(),null===(H=this._thicknessTexture)||void 0===H||H.dispose())}getClassName(){return"PBRIridescenceConfiguration"}addFallbacks(R,x,H){return R.IRIDESCENCE&&x.addFallback(H++,"IRIDESCENCE"),H}getSamplers(R){R.push("iridescenceSampler","iridescenceThicknessSampler")}getUniforms(){return{ubo:[{name:"vIridescenceParams",size:4,type:"vec4"},{name:"vIridescenceInfos",size:4,type:"vec4"},{name:"iridescenceMatrix",size:16,type:"mat4"},{name:"iridescenceThicknessMatrix",size:16,type:"mat4"}]}}}o._DefaultMinimumThickness=100,o._DefaultMaximumThickness=400,o._DefaultIndexOfRefraction=1.3,(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],o.prototype,"isEnabled",void 0),(0,k.d)([(0,c.Q)()],o.prototype,"intensity",void 0),(0,k.d)([(0,c.Q)()],o.prototype,"minimumThickness",void 0),(0,k.d)([(0,c.Q)()],o.prototype,"maximumThickness",void 0),(0,k.d)([(0,c.Q)()],o.prototype,"indexOfRefraction",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],o.prototype,"texture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],o.prototype,"thicknessTexture",void 0);class Z extends n.e{constructor(){super(...arguments),this.ANISOTROPIC=!1,this.ANISOTROPIC_TEXTURE=!1,this.ANISOTROPIC_TEXTUREDIRECTUV=0,this.ANISOTROPIC_LEGACY=!1,this.MAINUV1=!1}}class y extends g.e{set angle(R){this.direction.x=Math.cos(R),this.direction.y=Math.sin(R)}get angle(){return Math.atan2(this.direction.y,this.direction.x)}_markAllSubMeshesAsTexturesDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}_markAllSubMeshesAsMiscDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsMiscDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"PBRAnisotropic",110,new Z,x),this._isEnabled=!1,this.isEnabled=!1,this.bb=1,this.direction=new J.k(1,0),this._texture=null,this.texture=null,this._legacy=!1,this.legacy=!1,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1],this._internalMarkAllSubMeshesAsMiscDirty=R._dirtyCallbacks[16]}isReadyForSubMesh(R,x){return!this._isEnabled||!(R._areTexturesDirty&&x.texturesEnabled&&this._texture&&d.e.AnisotropicTextureEnabled&&!this._texture.isReadyOrNotBlocking())}prepareDefinesBeforeAttributes(R,x,H){this._isEnabled?(R.ANISOTROPIC=this._isEnabled,this._isEnabled&&!H.isVerticesDataPresent(V.g.TangentKind)&&(R._needUVs=!0,R.MAINUV1=!0),R._areTexturesDirty&&x.texturesEnabled&&(this._texture&&d.e.AnisotropicTextureEnabled?(0,a.U)(this._texture,R,"ANISOTROPIC_TEXTURE"):R.ANISOTROPIC_TEXTURE=!1),R._areMiscDirty&&(R.ANISOTROPIC_LEGACY=this._legacy)):(R.ANISOTROPIC=!1,R.ANISOTROPIC_TEXTURE=!1,R.ANISOTROPIC_TEXTUREDIRECTUV=0,R.ANISOTROPIC_LEGACY=!1)}bindForSubMesh(R,x){if(!this._isEnabled)return;const H=this._material.isFrozen;R.useUbo&&H&&R.isSync||(this._texture&&d.e.AnisotropicTextureEnabled&&(R.updateFloat2("vAnisotropyInfos",this._texture.coordinatesIndex,this._texture.level),(0,a.u)(this._texture,R,"anisotropy")),R.updateFloat3("vAnisotropy",this.direction.x,this.direction.y,this.bb)),x.texturesEnabled&&this._texture&&d.e.AnisotropicTextureEnabled&&R.setTexture("anisotropySampler",this._texture)}hasTexture(R){return this._texture===R}getActiveTextures(R){this._texture&&R.push(this._texture)}getAnimatables(R){this._texture&&this._texture.animations&&this._texture.animations.length>0&&R.push(this._texture)}dispose(R){R&&this._texture&&this._texture.dispose()}getClassName(){return"PBRAnisotropicConfiguration"}addFallbacks(R,x,H){return R.ANISOTROPIC&&x.addFallback(H++,"ANISOTROPIC"),H}getSamplers(R){R.push("anisotropySampler")}getUniforms(){return{ubo:[{name:"vAnisotropy",size:3,type:"vec3"},{name:"vAnisotropyInfos",size:2,type:"vec2"},{name:"anisotropyMatrix",size:16,type:"mat4"}]}}parse(R,x,H){super.parse(R,x,H),void 0===R.legacy&&(this.legacy=!0)}}(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],y.prototype,"isEnabled",void 0),(0,k.d)([(0,c.Q)()],y.prototype,"intensity",void 0),(0,k.d)([(0,c.J)()],y.prototype,"direction",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],y.prototype,"texture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],y.prototype,"legacy",void 0);class s extends n.e{constructor(){super(...arguments),this.SHEEN=!1,this.SHEEN_TEXTURE=!1,this.SHEEN_GAMMATEXTURE=!1,this.SHEEN_TEXTURE_ROUGHNESS=!1,this.SHEEN_TEXTUREDIRECTUV=0,this.SHEEN_TEXTURE_ROUGHNESSDIRECTUV=0,this.SHEEN_LINKWITHALBEDO=!1,this.SHEEN_ROUGHNESS=!1,this.SHEEN_ALBEDOSCALING=!1,this.SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE=!1}}class E extends g.e{_markAllSubMeshesAsTexturesDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"Sheen",120,new s,x),this._isEnabled=!1,this.isEnabled=!1,this._linkSheenWithAlbedo=!1,this.linkSheenWithAlbedo=!1,this.bb=1,this.color=S.c.White(),this._texture=null,this.texture=null,this._useRoughnessFromMainTexture=!0,this.useRoughnessFromMainTexture=!0,this._roughness=null,this.roughness=null,this._textureRoughness=null,this.textureRoughness=null,this._albedoScaling=!1,this.albedoScaling=!1,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1]}isReadyForSubMesh(R,x){if(!this._isEnabled)return!0;if(R._areTexturesDirty&&x.texturesEnabled){if(this._texture&&d.e.SheenTextureEnabled&&!this._texture.isReadyOrNotBlocking())return!1;if(this._textureRoughness&&d.e.SheenTextureEnabled&&!this._textureRoughness.isReadyOrNotBlocking())return!1}return!0}prepareDefinesBeforeAttributes(R,x){this._isEnabled?(R.SHEEN=!0,R.SHEEN_LINKWITHALBEDO=this._linkSheenWithAlbedo,R.SHEEN_ROUGHNESS=null!==this._roughness,R.SHEEN_ALBEDOSCALING=this._albedoScaling,R.SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE=this._useRoughnessFromMainTexture,R._areTexturesDirty&&x.texturesEnabled&&(this._texture&&d.e.SheenTextureEnabled?((0,a.U)(this._texture,R,"SHEEN_TEXTURE"),R.SHEEN_GAMMATEXTURE=this._texture.gammaSpace):R.SHEEN_TEXTURE=!1,this._textureRoughness&&d.e.SheenTextureEnabled?(0,a.U)(this._textureRoughness,R,"SHEEN_TEXTURE_ROUGHNESS"):R.SHEEN_TEXTURE_ROUGHNESS=!1)):(R.SHEEN=!1,R.SHEEN_TEXTURE=!1,R.SHEEN_TEXTURE_ROUGHNESS=!1,R.SHEEN_LINKWITHALBEDO=!1,R.SHEEN_ROUGHNESS=!1,R.SHEEN_ALBEDOSCALING=!1,R.SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE=!1,R.SHEEN_GAMMATEXTURE=!1,R.SHEEN_TEXTUREDIRECTUV=0,R.SHEEN_TEXTURE_ROUGHNESSDIRECTUV=0)}bindForSubMesh(R,x,H,k){if(!this._isEnabled)return;const c=k.materialDefines,t=this._material.isFrozen;if(!R.useUbo||!t||!R.isSync){var A,D,U,J;if((this._texture||this._textureRoughness)&&d.e.SheenTextureEnabled)R.updateFloat4("vSheenInfos",(null===(A=this._texture)||void 0===A?void 0:A.coordinatesIndex)??0,(null===(D=this._texture)||void 0===D?void 0:D.level)??0,(null===(U=this._textureRoughness)||void 0===U?void 0:U.coordinatesIndex)??0,(null===(J=this._textureRoughness)||void 0===J?void 0:J.level)??0),this._texture&&(0,a.u)(this._texture,R,"sheen"),this._textureRoughness&&!c.SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE&&(0,a.u)(this._textureRoughness,R,"sheenRoughness");R.updateFloat4("vSheenColor",this.color.r,this.color.g,this.color.b,this.bb),null!==this._roughness&&R.updateFloat("vSheenRoughness",this._roughness)}x.texturesEnabled&&(this._texture&&d.e.SheenTextureEnabled&&R.setTexture("sheenSampler",this._texture),this._textureRoughness&&!c.SHEEN_USE_ROUGHNESS_FROM_MAINTEXTURE&&d.e.SheenTextureEnabled&&R.setTexture("sheenRoughnessSampler",this._textureRoughness))}hasTexture(R){return this._texture===R||this._textureRoughness===R}getActiveTextures(R){this._texture&&R.push(this._texture),this._textureRoughness&&R.push(this._textureRoughness)}getAnimatables(R){this._texture&&this._texture.animations&&this._texture.animations.length>0&&R.push(this._texture),this._textureRoughness&&this._textureRoughness.animations&&this._textureRoughness.animations.length>0&&R.push(this._textureRoughness)}dispose(R){var x,H;R&&(null===(x=this._texture)||void 0===x||x.dispose(),null===(H=this._textureRoughness)||void 0===H||H.dispose())}getClassName(){return"PBRSheenConfiguration"}addFallbacks(R,x,H){return R.SHEEN&&x.addFallback(H++,"SHEEN"),H}getSamplers(R){R.push("sheenSampler","sheenRoughnessSampler")}getUniforms(){return{ubo:[{name:"vSheenColor",size:4,type:"vec4"},{name:"vSheenRoughness",size:1,type:"float"},{name:"vSheenInfos",size:4,type:"vec4"},{name:"sheenMatrix",size:16,type:"mat4"},{name:"sheenRoughnessMatrix",size:16,type:"mat4"}]}}}(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"isEnabled",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"linkSheenWithAlbedo",void 0),(0,k.d)([(0,c.Q)()],E.prototype,"intensity",void 0),(0,k.d)([(0,c.p)()],E.prototype,"color",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"texture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"useRoughnessFromMainTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"roughness",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"textureRoughness",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],E.prototype,"albedoScaling",void 0);class w extends n.e{constructor(){super(...arguments),this.SUBSURFACE=!1,this.SS_REFRACTION=!1,this.SS_REFRACTION_USE_INTENSITY_FROM_THICKNESS=!1,this.SS_TRANSLUCENCY=!1,this.SS_TRANSLUCENCY_USE_INTENSITY_FROM_THICKNESS=!1,this.SS_SCATTERING=!1,this.SS_DISPERSION=!1,this.SS_THICKNESSANDMASK_TEXTURE=!1,this.SS_THICKNESSANDMASK_TEXTUREDIRECTUV=0,this.SS_HAS_THICKNESS=!1,this.SS_REFRACTIONINTENSITY_TEXTURE=!1,this.SS_REFRACTIONINTENSITY_TEXTUREDIRECTUV=0,this.SS_TRANSLUCENCYINTENSITY_TEXTURE=!1,this.SS_TRANSLUCENCYINTENSITY_TEXTUREDIRECTUV=0,this.SS_TRANSLUCENCYCOLOR_TEXTURE=!1,this.SS_TRANSLUCENCYCOLOR_TEXTUREDIRECTUV=0,this.SS_TRANSLUCENCYCOLOR_TEXTURE_GAMMA=!1,this.SS_REFRACTIONMAP_3D=!1,this.SS_REFRACTIONMAP_OPPOSITEZ=!1,this.SS_LODINREFRACTIONALPHA=!1,this.SS_GAMMAREFRACTION=!1,this.SS_RGBDREFRACTION=!1,this.SS_LINEARSPECULARREFRACTION=!1,this.SS_LINKREFRACTIONTOTRANSPARENCY=!1,this.SS_ALBEDOFORREFRACTIONTINT=!1,this.SS_ALBEDOFORTRANSLUCENCYTINT=!1,this.SS_USE_LOCAL_REFRACTIONMAP_CUBIC=!1,this.SS_USE_THICKNESS_AS_DEPTH=!1,this.SS_USE_GLTF_TEXTURES=!1,this.SS_APPLY_ALBEDO_AFTER_SUBSURFACE=!1,this.SS_TRANSLUCENCY_LEGACY=!1}}class h extends g.e{get scatteringDiffusionProfile(){return this._scene.subSurfaceConfiguration?this._scene.subSurfaceConfiguration.ssDiffusionProfileColors[this._scatteringDiffusionProfileIndex]:null}set scatteringDiffusionProfile(R){this._scene.enableSubSurfaceForPrePass()&&R&&(this._scatteringDiffusionProfileIndex=this._scene.subSurfaceConfiguration.addDiffusionProfile(R))}get volumeIndexOfRefraction(){return this._volumeIndexOfRefraction>=1?this._volumeIndexOfRefraction:this._indexOfRefraction}set volumeIndexOfRefraction(R){this._volumeIndexOfRefraction=R>=1?R:-1}_markAllSubMeshesAsTexturesDirty(){this._enable(this._isRefractionEnabled||this._isTranslucencyEnabled||this._isScatteringEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}_markScenePrePassDirty(){this._enable(this._isRefractionEnabled||this._isTranslucencyEnabled||this._isScatteringEnabled),this._internalMarkAllSubMeshesAsTexturesDirty(),this._internalMarkScenePrePassDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"PBRSubSurface",130,new w,x),this._isRefractionEnabled=!1,this.isRefractionEnabled=!1,this._isTranslucencyEnabled=!1,this.isTranslucencyEnabled=!1,this._isDispersionEnabled=!1,this.isDispersionEnabled=!1,this._isScatteringEnabled=!1,this.isScatteringEnabled=!1,this._scatteringDiffusionProfileIndex=0,this.refractionIntensity=1,this.translucencyIntensity=1,this.useAlbedoToTintRefraction=!1,this.useAlbedoToTintTranslucency=!1,this._thicknessTexture=null,this.thicknessTexture=null,this._refractionTexture=null,this.refractionTexture=null,this._indexOfRefraction=1.5,this.indexOfRefraction=1.5,this._volumeIndexOfRefraction=-1,this._invertRefractionY=!1,this.invertRefractionY=!1,this._linkRefractionWithTransparency=!1,this.linkRefractionWithTransparency=!1,this.minimumThickness=0,this.maximumThickness=1,this.useThicknessAsDepth=!1,this.tintColor=S.c.White(),this.tintColorAtDistance=1,this.dispersion=0,this.diffusionDistance=S.c.White(),this._useMaskFromThicknessTexture=!1,this.useMaskFromThicknessTexture=!1,this._refractionIntensityTexture=null,this.refractionIntensityTexture=null,this._translucencyIntensityTexture=null,this.translucencyIntensityTexture=null,this.translucencyColor=null,this._translucencyColorTexture=null,this.translucencyColorTexture=null,this._useGltfStyleTextures=!0,this.useGltfStyleTextures=!0,this.applyAlbedoAfterSubSurface=h.DEFAULT_APPLY_ALBEDO_AFTERSUBSURFACE,this.legacyTransluceny=h.DEFAULT_LEGACY_TRANSLUCENCY,this._scene=R.va(),this.registerForExtraEvents=!0,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1],this._internalMarkScenePrePassDirty=R._dirtyCallbacks[32]}isReadyForSubMesh(R,x){if(!this._isRefractionEnabled&&!this._isTranslucencyEnabled&&!this._isScatteringEnabled)return!0;if(R._areTexturesDirty&&x.texturesEnabled){if(this._thicknessTexture&&d.e.ThicknessTextureEnabled&&!this._thicknessTexture.isReadyOrNotBlocking())return!1;if(this._translucencyColorTexture&&d.e.TranslucencyColorTextureEnabled&&!this._translucencyColorTexture.isReadyOrNotBlocking())return!1;if(this._translucencyIntensityTexture&&d.e.TranslucencyIntensityTextureEnabled&&!this._translucencyIntensityTexture.isReadyOrNotBlocking())return!1;const R=this._getRefractionTexture(x);if(R&&d.e.RefractionTextureEnabled&&!R.isReadyOrNotBlocking())return!1}return!0}prepareDefinesBeforeAttributes(R,x){if(!this._isRefractionEnabled&&!this._isTranslucencyEnabled&&!this._isScatteringEnabled)return R.SUBSURFACE=!1,R.SS_DISPERSION=!1,R.SS_TRANSLUCENCY=!1,R.SS_SCATTERING=!1,R.SS_REFRACTION=!1,R.SS_REFRACTION_USE_INTENSITY_FROM_THICKNESS=!1,R.SS_TRANSLUCENCY_USE_INTENSITY_FROM_THICKNESS=!1,R.SS_THICKNESSANDMASK_TEXTURE=!1,R.SS_THICKNESSANDMASK_TEXTUREDIRECTUV=0,R.SS_HAS_THICKNESS=!1,R.SS_REFRACTIONINTENSITY_TEXTURE=!1,R.SS_REFRACTIONINTENSITY_TEXTUREDIRECTUV=0,R.SS_TRANSLUCENCYINTENSITY_TEXTURE=!1,R.SS_TRANSLUCENCYINTENSITY_TEXTUREDIRECTUV=0,R.SS_REFRACTIONMAP_3D=!1,R.SS_REFRACTIONMAP_OPPOSITEZ=!1,R.SS_LODINREFRACTIONALPHA=!1,R.SS_GAMMAREFRACTION=!1,R.SS_RGBDREFRACTION=!1,R.SS_LINEARSPECULARREFRACTION=!1,R.SS_LINKREFRACTIONTOTRANSPARENCY=!1,R.SS_ALBEDOFORREFRACTIONTINT=!1,R.SS_ALBEDOFORTRANSLUCENCYTINT=!1,R.SS_USE_LOCAL_REFRACTIONMAP_CUBIC=!1,R.SS_USE_THICKNESS_AS_DEPTH=!1,R.SS_USE_GLTF_TEXTURES=!1,R.SS_TRANSLUCENCYCOLOR_TEXTURE=!1,R.SS_TRANSLUCENCYCOLOR_TEXTUREDIRECTUV=0,R.SS_TRANSLUCENCYCOLOR_TEXTURE_GAMMA=!1,void(R.SS_APPLY_ALBEDO_AFTER_SUBSURFACE=!1);if(R._areTexturesDirty){if(R.SUBSURFACE=!0,R.SS_DISPERSION=this._isDispersionEnabled,R.SS_TRANSLUCENCY=this._isTranslucencyEnabled,R.SS_TRANSLUCENCY_USE_INTENSITY_FROM_THICKNESS=!1,R.SS_TRANSLUCENCY_LEGACY=this.legacyTransluceny,R.SS_SCATTERING=this._isScatteringEnabled,R.SS_THICKNESSANDMASK_TEXTURE=!1,R.SS_REFRACTIONINTENSITY_TEXTURE=!1,R.SS_TRANSLUCENCYINTENSITY_TEXTURE=!1,R.SS_HAS_THICKNESS=!1,R.SS_USE_GLTF_TEXTURES=!1,R.SS_REFRACTION=!1,R.SS_REFRACTION_USE_INTENSITY_FROM_THICKNESS=!1,R.SS_REFRACTIONMAP_3D=!1,R.SS_GAMMAREFRACTION=!1,R.SS_RGBDREFRACTION=!1,R.SS_LINEARSPECULARREFRACTION=!1,R.SS_REFRACTIONMAP_OPPOSITEZ=!1,R.SS_LODINREFRACTIONALPHA=!1,R.SS_LINKREFRACTIONTOTRANSPARENCY=!1,R.SS_ALBEDOFORREFRACTIONTINT=!1,R.SS_ALBEDOFORTRANSLUCENCYTINT=!1,R.SS_USE_LOCAL_REFRACTIONMAP_CUBIC=!1,R.SS_USE_THICKNESS_AS_DEPTH=!1,R.SS_TRANSLUCENCYCOLOR_TEXTURE=!1,R.SS_APPLY_ALBEDO_AFTER_SUBSURFACE=this.applyAlbedoAfterSubSurface,R._areTexturesDirty&&x.texturesEnabled&&(this._thicknessTexture&&d.e.ThicknessTextureEnabled&&(0,a.U)(this._thicknessTexture,R,"SS_THICKNESSANDMASK_TEXTURE"),this._refractionIntensityTexture&&d.e.RefractionIntensityTextureEnabled&&(0,a.U)(this._refractionIntensityTexture,R,"SS_REFRACTIONINTENSITY_TEXTURE"),this._translucencyIntensityTexture&&d.e.TranslucencyIntensityTextureEnabled&&(0,a.U)(this._translucencyIntensityTexture,R,"SS_TRANSLUCENCYINTENSITY_TEXTURE"),this._translucencyColorTexture&&d.e.TranslucencyColorTextureEnabled&&((0,a.U)(this._translucencyColorTexture,R,"SS_TRANSLUCENCYCOLOR_TEXTURE"),R.SS_TRANSLUCENCYCOLOR_TEXTURE_GAMMA=this._translucencyColorTexture.gammaSpace)),R.SS_HAS_THICKNESS=this.maximumThickness-this.minimumThickness!==0,R.SS_USE_GLTF_TEXTURES=this._useGltfStyleTextures,R.SS_REFRACTION_USE_INTENSITY_FROM_THICKNESS=this._useMaskFromThicknessTexture&&!this._refractionIntensityTexture,R.SS_TRANSLUCENCY_USE_INTENSITY_FROM_THICKNESS=this._useMaskFromThicknessTexture&&!this._translucencyIntensityTexture,this._isRefractionEnabled&&x.texturesEnabled){const H=this._getRefractionTexture(x);H&&d.e.RefractionTextureEnabled&&(R.SS_REFRACTION=!0,R.SS_REFRACTIONMAP_3D=H.isCube,R.SS_GAMMAREFRACTION=H.gammaSpace,R.SS_RGBDREFRACTION=H.isRGBD,R.SS_LINEARSPECULARREFRACTION=H.linearSpecularLOD,R.SS_REFRACTIONMAP_OPPOSITEZ=this._scene.useRightHandedSystem&&H.isCube?!H.invertZ:H.invertZ,R.SS_LODINREFRACTIONALPHA=H.lodLevelInAlpha,R.SS_LINKREFRACTIONTOTRANSPARENCY=this._linkRefractionWithTransparency,R.SS_ALBEDOFORREFRACTIONTINT=this.useAlbedoToTintRefraction,R.SS_USE_LOCAL_REFRACTIONMAP_CUBIC=H.isCube&&H.boundingBoxSize,R.SS_USE_THICKNESS_AS_DEPTH=this.useThicknessAsDepth)}this._isTranslucencyEnabled&&(R.SS_ALBEDOFORTRANSLUCENCYTINT=this.useAlbedoToTintTranslucency)}}hardBindForSubMesh(R,x,H,k){if(this._isRefractionEnabled||this._isTranslucencyEnabled||this._isScatteringEnabled)if(0===this.maximumThickness&&0===this.minimumThickness)R.updateFloat2("vThicknessParam",0,0);else{k.getRenderingMesh().getWorldMatrix().decompose(J.g.Bi[0]);const x=Math.max(Math.abs(J.g.Bi[0].x),Math.abs(J.g.Bi[0].y),Math.abs(J.g.Bi[0].z));R.updateFloat2("vThicknessParam",this.minimumThickness*x,(this.maximumThickness-this.minimumThickness)*x)}}bindForSubMesh(R,x,H,k){if(!this._isRefractionEnabled&&!this._isTranslucencyEnabled&&!this._isScatteringEnabled)return;const c=k.materialDefines,t=this._material.isFrozen,A=this._material.realTimeFiltering,D=c.LODBASEDMICROSFURACE,U=this._getRefractionTexture(x);if(!R.useUbo||!t||!R.isSync){if(this._thicknessTexture&&d.e.ThicknessTextureEnabled&&(R.updateFloat2("vThicknessInfos",this._thicknessTexture.coordinatesIndex,this._thicknessTexture.level),(0,a.u)(this._thicknessTexture,R,"thickness")),this._refractionIntensityTexture&&d.e.RefractionIntensityTextureEnabled&&c.SS_REFRACTIONINTENSITY_TEXTURE&&(R.updateFloat2("vRefractionIntensityInfos",this._refractionIntensityTexture.coordinatesIndex,this._refractionIntensityTexture.level),(0,a.u)(this._refractionIntensityTexture,R,"refractionIntensity")),this._translucencyColorTexture&&d.e.TranslucencyColorTextureEnabled&&c.SS_TRANSLUCENCYCOLOR_TEXTURE&&(R.updateFloat2("vTranslucencyColorInfos",this._translucencyColorTexture.coordinatesIndex,this._translucencyColorTexture.level),(0,a.u)(this._translucencyColorTexture,R,"translucencyColor")),this._translucencyIntensityTexture&&d.e.TranslucencyIntensityTextureEnabled&&c.SS_TRANSLUCENCYINTENSITY_TEXTURE&&(R.updateFloat2("vTranslucencyIntensityInfos",this._translucencyIntensityTexture.coordinatesIndex,this._translucencyIntensityTexture.level),(0,a.u)(this._translucencyIntensityTexture,R,"translucencyIntensity")),U&&d.e.RefractionTextureEnabled){R.jj("refractionMatrix",U.getRefractionTextureMatrix());let x=1;U.isCube||U.depth&&(x=U.depth);const H=U.getSize().width,k=this.volumeIndexOfRefraction;if(R.updateFloat4("vRefractionInfos",U.level,1/k,x,this._invertRefractionY?-1:1),R.updateFloat4("vRefractionMicrosurfaceInfos",H,U.lodGenerationScale,U.lodGenerationOffset,1/this.indexOfRefraction),A&&R.updateFloat2("vRefractionFilteringInfo",H,Math.log2(H)),U.boundingBoxSize){const x=U;R.updateVector3("vRefractionPosition",x.boundingBoxPosition),R.updateVector3("vRefractionSize",x.boundingBoxSize)}}this._isScatteringEnabled&&R.updateFloat("scatteringDiffusionProfile",this._scatteringDiffusionProfileIndex),R.updateColor3("vDiffusionDistance",this.diffusionDistance),R.updateFloat4("vTintColor",this.tintColor.r,this.tintColor.g,this.tintColor.b,Math.max(1e-5,this.tintColorAtDistance)),R.updateColor4("vTranslucencyColor",this.translucencyColor??this.tintColor,0),R.updateFloat3("vSubSurfaceIntensity",this.refractionIntensity,this.translucencyIntensity,0),R.updateFloat("dispersion",this.dispersion)}x.texturesEnabled&&(this._thicknessTexture&&d.e.ThicknessTextureEnabled&&R.setTexture("thicknessSampler",this._thicknessTexture),this._refractionIntensityTexture&&d.e.RefractionIntensityTextureEnabled&&c.SS_REFRACTIONINTENSITY_TEXTURE&&R.setTexture("refractionIntensitySampler",this._refractionIntensityTexture),this._translucencyIntensityTexture&&d.e.TranslucencyIntensityTextureEnabled&&c.SS_TRANSLUCENCYINTENSITY_TEXTURE&&R.setTexture("translucencyIntensitySampler",this._translucencyIntensityTexture),this._translucencyColorTexture&&d.e.TranslucencyColorTextureEnabled&&c.SS_TRANSLUCENCYCOLOR_TEXTURE&&R.setTexture("translucencyColorSampler",this._translucencyColorTexture),U&&d.e.RefractionTextureEnabled&&(D?R.setTexture("refractionSampler",U):(R.setTexture("refractionSampler",U._lodTextureMid||U),R.setTexture("refractionSamplerLow",U._lodTextureLow||U),R.setTexture("refractionSamplerHigh",U._lodTextureHigh||U))))}_getRefractionTexture(R){return this._refractionTexture?this._refractionTexture:this._isRefractionEnabled?R.environmentTexture:null}get disableAlphaBlending(){return this._isRefractionEnabled&&this._linkRefractionWithTransparency}fillRenderTargetTextures(R){d.e.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget&&R.push(this._refractionTexture)}hasTexture(R){return this._thicknessTexture===R||(this._refractionTexture===R||(this._refractionIntensityTexture===R||(this._translucencyIntensityTexture===R||this._translucencyColorTexture===R)))}hasRenderTargetTextures(){return!!(d.e.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget)}getActiveTextures(R){this._thicknessTexture&&R.push(this._thicknessTexture),this._refractionTexture&&R.push(this._refractionTexture),this._translucencyColorTexture&&R.push(this._translucencyColorTexture),this._translucencyIntensityTexture&&R.push(this._translucencyIntensityTexture)}getAnimatables(R){this._thicknessTexture&&this._thicknessTexture.animations&&this._thicknessTexture.animations.length>0&&R.push(this._thicknessTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&R.push(this._refractionTexture),this._translucencyColorTexture&&this._translucencyColorTexture.animations&&this._translucencyColorTexture.animations.length>0&&R.push(this._translucencyColorTexture),this._translucencyIntensityTexture&&this._translucencyIntensityTexture.animations&&this._translucencyIntensityTexture.animations.length>0&&R.push(this._translucencyIntensityTexture)}dispose(R){R&&(this._thicknessTexture&&this._thicknessTexture.dispose(),this._refractionTexture&&this._refractionTexture.dispose(),this._translucencyColorTexture&&this._translucencyColorTexture.dispose(),this._translucencyIntensityTexture&&this._translucencyIntensityTexture.dispose())}getClassName(){return"PBRSubSurfaceConfiguration"}addFallbacks(R,x,H){return R.SS_SCATTERING&&x.addFallback(H++,"SS_SCATTERING"),R.SS_TRANSLUCENCY&&x.addFallback(H++,"SS_TRANSLUCENCY"),H}getSamplers(R){R.push("thicknessSampler","refractionIntensitySampler","translucencyIntensitySampler","refractionSampler","refractionSamplerLow","refractionSamplerHigh","translucencyColorSampler")}getUniforms(){return{ubo:[{name:"vRefractionMicrosurfaceInfos",size:4,type:"vec4"},{name:"vRefractionFilteringInfo",size:2,type:"vec2"},{name:"vTranslucencyIntensityInfos",size:2,type:"vec2"},{name:"vRefractionInfos",size:4,type:"vec4"},{name:"refractionMatrix",size:16,type:"mat4"},{name:"vThicknessInfos",size:2,type:"vec2"},{name:"vRefractionIntensityInfos",size:2,type:"vec2"},{name:"thicknessMatrix",size:16,type:"mat4"},{name:"refractionIntensityMatrix",size:16,type:"mat4"},{name:"translucencyIntensityMatrix",size:16,type:"mat4"},{name:"vThicknessParam",size:2,type:"vec2"},{name:"vDiffusionDistance",size:3,type:"vec3"},{name:"vTintColor",size:4,type:"vec4"},{name:"vSubSurfaceIntensity",size:3,type:"vec3"},{name:"vRefractionPosition",size:3,type:"vec3"},{name:"vRefractionSize",size:3,type:"vec3"},{name:"scatteringDiffusionProfile",size:1,type:"float"},{name:"dispersion",size:1,type:"float"},{name:"vTranslucencyColor",size:4,type:"vec4"},{name:"vTranslucencyColorInfos",size:2,type:"vec2"},{name:"translucencyColorMatrix",size:16,type:"mat4"}]}}}h.DEFAULT_APPLY_ALBEDO_AFTERSUBSURFACE=!1,h.DEFAULT_LEGACY_TRANSLUCENCY=!1,(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"isRefractionEnabled",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"isTranslucencyEnabled",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"isDispersionEnabled",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markScenePrePassDirty")],h.prototype,"isScatteringEnabled",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"_scatteringDiffusionProfileIndex",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"refractionIntensity",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"translucencyIntensity",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"useAlbedoToTintRefraction",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"useAlbedoToTintTranslucency",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"thicknessTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"refractionTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"indexOfRefraction",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"_volumeIndexOfRefraction",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"volumeIndexOfRefraction",null),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"invertRefractionY",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"linkRefractionWithTransparency",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"minimumThickness",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"maximumThickness",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"useThicknessAsDepth",void 0),(0,k.d)([(0,c.p)()],h.prototype,"tintColor",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"tintColorAtDistance",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"dispersion",void 0),(0,k.d)([(0,c.p)()],h.prototype,"diffusionDistance",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"useMaskFromThicknessTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"refractionIntensityTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"translucencyIntensityTexture",void 0),(0,k.d)([(0,c.p)()],h.prototype,"translucencyColor",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"translucencyColorTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],h.prototype,"useGltfStyleTextures",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"applyAlbedoAfterSubSurface",void 0),(0,k.d)([(0,c.Q)()],h.prototype,"legacyTransluceny",void 0);var f=H(12313),N=H(849),W=H(12322);const K={effect:null,subMesh:null};class Q extends n.e{constructor(R){super(R),this.PBR=!0,this.NUM_SAMPLES="0",this.REALTIME_FILTERING=!1,this.IBL_CDF_FILTERING=!1,this.MAINUV1=!1,this.MAINUV2=!1,this.MAINUV3=!1,this.MAINUV4=!1,this.MAINUV5=!1,this.MAINUV6=!1,this.UV1=!1,this.UV2=!1,this.UV3=!1,this.UV4=!1,this.UV5=!1,this.UV6=!1,this.ALBEDO=!1,this.GAMMAALBEDO=!1,this.ALBEDODIRECTUV=0,this.VERTEXCOLOR=!1,this.BASE_WEIGHT=!1,this.BASE_WEIGHTDIRECTUV=0,this.BASE_DIFFUSE_ROUGHNESS=!1,this.BASE_DIFFUSE_ROUGHNESSDIRECTUV=0,this.BAKED_VERTEX_ANIMATION_TEXTURE=!1,this.AMBIENT=!1,this.AMBIENTDIRECTUV=0,this.AMBIENTINGRAYSCALE=!1,this.OPACITY=!1,this.VERTEXALPHA=!1,this.OPACITYDIRECTUV=0,this.OPACITYRGB=!1,this.ALPHATEST=!1,this.DEPTHPREPASS=!1,this.ALPHABLEND=!1,this.ALPHAFROMALBEDO=!1,this.ALPHATESTVALUE="0.5",this.SPECULAROVERALPHA=!1,this.RADIANCEOVERALPHA=!1,this.ALPHAFRESNEL=!1,this.LINEARALPHAFRESNEL=!1,this.PREMULTIPLYALPHA=!1,this.EMISSIVE=!1,this.EMISSIVEDIRECTUV=0,this.GAMMAEMISSIVE=!1,this.REFLECTIVITY=!1,this.REFLECTIVITY_GAMMA=!1,this.REFLECTIVITYDIRECTUV=0,this.SPECULARTERM=!1,this.MICROSURFACEFROMREFLECTIVITYMAP=!1,this.MICROSURFACEAUTOMATIC=!1,this.LODBASEDMICROSFURACE=!1,this.MICROSURFACEMAP=!1,this.MICROSURFACEMAPDIRECTUV=0,this.METALLICWORKFLOW=!1,this.ROUGHNESSSTOREINMETALMAPALPHA=!1,this.ROUGHNESSSTOREINMETALMAPGREEN=!1,this.METALLNESSSTOREINMETALMAPBLUE=!1,this.AOSTOREINMETALMAPRED=!1,this.METALLIC_REFLECTANCE=!1,this.METALLIC_REFLECTANCE_GAMMA=!1,this.METALLIC_REFLECTANCEDIRECTUV=0,this.METALLIC_REFLECTANCE_USE_ALPHA_ONLY=!1,this.REFLECTANCE=!1,this.REFLECTANCE_GAMMA=!1,this.REFLECTANCEDIRECTUV=0,this.ENVIRONMENTBRDF=!1,this.ENVIRONMENTBRDF_RGBD=!1,this.NORMAL=!1,this.TANGENT=!1,this.BUMP=!1,this.BUMPDIRECTUV=0,this.OBJECTSPACE_NORMALMAP=!1,this.PARALLAX=!1,this.PARALLAX_RHS=!1,this.PARALLAXOCCLUSION=!1,this.NORMALXYSCALE=!0,this.LIGHTMAP=!1,this.LIGHTMAPDIRECTUV=0,this.USELIGHTMAPASSHADOWMAP=!1,this.GAMMALIGHTMAP=!1,this.RGBDLIGHTMAP=!1,this.REFLECTION=!1,this.REFLECTIONMAP_3D=!1,this.REFLECTIONMAP_SPHERICAL=!1,this.REFLECTIONMAP_PLANAR=!1,this.REFLECTIONMAP_CUBIC=!1,this.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,this.REFLECTIONMAP_PROJECTION=!1,this.REFLECTIONMAP_SKYBOX=!1,this.REFLECTIONMAP_EXPLICIT=!1,this.REFLECTIONMAP_EQUIRECTANGULAR=!1,this.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,this.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,this.INVERTCUBICMAP=!1,this.USESPHERICALFROMREFLECTIONMAP=!1,this.USEIRRADIANCEMAP=!1,this.USE_IRRADIANCE_DOMINANT_DIRECTION=!1,this.USESPHERICALINVERTEX=!1,this.REFLECTIONMAP_OPPOSITEZ=!1,this.LODINREFLECTIONALPHA=!1,this.GAMMAREFLECTION=!1,this.RGBDREFLECTION=!1,this.LINEARSPECULARREFLECTION=!1,this.RADIANCEOCCLUSION=!1,this.HORIZONOCCLUSION=!1,this.INSTANCES=!1,this.THIN_INSTANCES=!1,this.INSTANCESCOLOR=!1,this.PREPASS=!1,this.PREPASS_COLOR=!1,this.PREPASS_COLOR_INDEX=-1,this.PREPASS_IRRADIANCE=!1,this.PREPASS_IRRADIANCE_INDEX=-1,this.PREPASS_ALBEDO=!1,this.PREPASS_ALBEDO_INDEX=-1,this.PREPASS_ALBEDO_SQRT=!1,this.PREPASS_ALBEDO_SQRT_INDEX=-1,this.PREPASS_DEPTH=!1,this.PREPASS_DEPTH_INDEX=-1,this.PREPASS_SCREENSPACE_DEPTH=!1,this.PREPASS_SCREENSPACE_DEPTH_INDEX=-1,this.PREPASS_NORMALIZED_VIEW_DEPTH=!1,this.PREPASS_NORMALIZED_VIEW_DEPTH_INDEX=-1,this.PREPASS_NORMAL=!1,this.PREPASS_NORMAL_INDEX=-1,this.PREPASS_NORMAL_WORLDSPACE=!1,this.PREPASS_WORLD_NORMAL=!1,this.PREPASS_WORLD_NORMAL_INDEX=-1,this.PREPASS_POSITION=!1,this.PREPASS_POSITION_INDEX=-1,this.PREPASS_LOCAL_POSITION=!1,this.PREPASS_LOCAL_POSITION_INDEX=-1,this.PREPASS_VELOCITY=!1,this.PREPASS_VELOCITY_INDEX=-1,this.PREPASS_VELOCITY_LINEAR=!1,this.PREPASS_VELOCITY_LINEAR_INDEX=-1,this.PREPASS_REFLECTIVITY=!1,this.PREPASS_REFLECTIVITY_INDEX=-1,this.SCENE_MRT_COUNT=0,this.NUM_BONE_INFLUENCERS=0,this.BonesPerMesh=0,this.BONETEXTURE=!1,this.BONES_VELOCITY_ENABLED=!1,this.NONUNIFORMSCALING=!1,this.MORPHTARGETS=!1,this.MORPHTARGETS_POSITION=!1,this.MORPHTARGETS_NORMAL=!1,this.MORPHTARGETS_TANGENT=!1,this.MORPHTARGETS_UV=!1,this.MORPHTARGETS_UV2=!1,this.MORPHTARGETS_COLOR=!1,this.MORPHTARGETTEXTURE_HASPOSITIONS=!1,this.MORPHTARGETTEXTURE_HASNORMALS=!1,this.MORPHTARGETTEXTURE_HASTANGENTS=!1,this.MORPHTARGETTEXTURE_HASUVS=!1,this.MORPHTARGETTEXTURE_HASUV2S=!1,this.MORPHTARGETTEXTURE_HASCOLORS=!1,this.NUM_MORPH_INFLUENCERS=0,this.MORPHTARGETS_TEXTURE=!1,this.IMAGEPROCESSING=!1,this.VIGNETTE=!1,this.VIGNETTEBLENDMODEMULTIPLY=!1,this.VIGNETTEBLENDMODEOPAQUE=!1,this.TONEMAPPING=0,this.CONTRAST=!1,this.COLORCURVES=!1,this.COLORGRADING=!1,this.COLORGRADING3D=!1,this.SAMPLER3DGREENDEPTH=!1,this.SAMPLER3DBGRMAP=!1,this.DITHER=!1,this.IMAGEPROCESSINGPOSTPROCESS=!1,this.SKIPFINALCOLORCLAMP=!1,this.EXPOSURE=!1,this.MULTIVIEW=!1,this.ORDER_INDEPENDENT_TRANSPARENCY=!1,this.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!1,this.USEPHYSICALLIGHTFALLOFF=!1,this.USEGLTFLIGHTFALLOFF=!1,this.TWOSIDEDLIGHTING=!1,this.MIRRORED=!1,this.SHADOWFLOAT=!1,this.CLIPPLANE=!1,this.CLIPPLANE2=!1,this.CLIPPLANE3=!1,this.CLIPPLANE4=!1,this.CLIPPLANE5=!1,this.CLIPPLANE6=!1,this.POINTSIZE=!1,this.FOG=!1,this.LOGARITHMICDEPTH=!1,this.CAMERA_ORTHOGRAPHIC=!1,this.CAMERA_PERSPECTIVE=!1,this.AREALIGHTSUPPORTED=!0,this.FORCENORMALFORWARD=!1,this.SPECULARAA=!1,this.UNLIT=!1,this.DECAL_AFTER_DETAIL=!1,this.DEBUGMODE=0,this.rebuild()}reset(){super.reset(),this.ALPHATESTVALUE="0.5",this.PBR=!0,this.NORMALXYSCALE=!0}}class G extends C.e{get realTimeFiltering(){return this._realTimeFiltering}set realTimeFiltering(R){this._realTimeFiltering=R,this._i(1)}get realTimeFilteringQuality(){return this._realTimeFilteringQuality}set realTimeFilteringQuality(R){this._realTimeFilteringQuality=R,this._i(1)}get canRenderToMRT(){return!0}_attachImageProcessingConfiguration(R){R!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=R||this.va().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((()=>{this._markAllSubMeshesAsImageProcessingDirty()}))))}constructor(R,x){super(R,x,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]||G.ForceGLSL),this._directIntensity=1,this._emissiveIntensity=1,this._environmentIntensity=1,this._specularIntensity=1,this._lightingInfos=new J.p(this._directIntensity,this._emissiveIntensity,this._environmentIntensity,this._specularIntensity),this._disableBumpMap=!1,this._albedoTexture=null,this._baseWeightTexture=null,this._baseDiffuseRoughnessTexture=null,this._ambientTexture=null,this._ambientTextureStrength=1,this._ambientTextureImpactOnAnalyticalLights=G.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,this._opacityTexture=null,this._reflectionTexture=null,this._emissiveTexture=null,this._reflectivityTexture=null,this._metallicTexture=null,this._metallic=null,this._roughness=null,this._metallicF0Factor=1,this._metallicReflectanceColor=S.c.White(),this._useOnlyMetallicFromMetallicReflectanceTexture=!1,this._metallicReflectanceTexture=null,this._reflectanceTexture=null,this._microSurfaceTexture=null,this._bumpTexture=null,this._lightmapTexture=null,this._ambientColor=new S.c(0,0,0),this._albedoColor=new S.c(1,1,1),this._baseWeight=1,this._baseDiffuseRoughness=null,this._reflectivityColor=new S.c(1,1,1),this._reflectionColor=new S.c(1,1,1),this._emissiveColor=new S.c(0,0,0),this._microSurface=.9,this._useLightmapAsShadowmap=!1,this._useHorizonOcclusion=!0,this._useRadianceOcclusion=!0,this._useAlphaFromAlbedoTexture=!1,this._useSpecularOverAlpha=!0,this._useMicroSurfaceFromReflectivityMapAlpha=!1,this._useRoughnessFromMetallicTextureAlpha=!0,this._useRoughnessFromMetallicTextureGreen=!1,this._useMetallnessFromMetallicTextureBlue=!1,this._useAmbientOcclusionFromMetallicTextureRed=!1,this._useAmbientInGrayScale=!1,this._useAutoMicroSurfaceFromReflectivityMap=!1,this._lightFalloff=G.LIGHTFALLOFF_PHYSICAL,this._useRadianceOverAlpha=!0,this._useObjectSpaceNormalMap=!1,this._useParallax=!1,this._useParallaxOcclusion=!1,this._parallaxScaleBias=.05,this._disableLighting=!1,this._maxSimultaneousLights=4,this._invertNormalMapX=!1,this._invertNormalMapY=!1,this._twoSidedLighting=!1,this._alphaCutOff=.4,this._useAlphaFresnel=!1,this._useLinearAlphaFresnel=!1,this._environmentBRDFTexture=null,this._forceIrradianceInFragment=!1,this._realTimeFiltering=!1,this._realTimeFilteringQuality=8,this._forceNormalForward=!1,this._enableSpecularAntiAliasing=!1,this._imageProcessingObserver=null,this._renderTargets=new A.f(16),this._globalAmbientColor=new S.c(0,0,0),this._unlit=!1,this._applyDecalMapAfterDetailMap=!1,this._debugMode=0,this._shadersLoaded=!1,this._breakShaderLoadedCheck=!1,this.debugMode=0,this.debugLimit=-1,this.debugFactor=1,this._cacheHasRenderTargetTextures=!1,this.brdf=new i(this),this.clearCoat=new M(this),this.iridescence=new o(this),this.anisotropy=new y(this),this.sheen=new E(this),this.subSurface=new h(this),this.detailMap=new f.c(this),this._attachImageProcessingConfiguration(null),this.getRenderTargetTextures=()=>(this._renderTargets.reset(),d.e.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._renderTargets.push(this._reflectionTexture),this._eventInfo.renderTargets=this._renderTargets,this._callbackPluginEventFillRenderTargetTextures(this._eventInfo),this._renderTargets),this._environmentBRDFTexture=(0,D.c)(this.va()),this.prePassConfiguration=new q.e}get hasRenderTargetTextures(){return!!(d.e.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget)||this._cacheHasRenderTargetTextures}get isPrePassCapable(){return!this.disableDepthWrite}getClassName(){return"PBRBaseMaterial"}get _disableAlphaBlending(){var R;return this._transparencyMode===G.PBRMATERIAL_OPAQUE||this._transparencyMode===G.PBRMATERIAL_ALPHATEST||(null===(R=this.subSurface)||void 0===R?void 0:R.disableAlphaBlending)}needAlphaBlending(){return this._hasTransparencyMode?this._transparencyModeIsBlend:!this._disableAlphaBlending&&(this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromAlbedoTexture())}needAlphaTesting(){var R;return this._hasTransparencyMode?this._transparencyModeIsTest:(null===(R=this.subSurface)||void 0===R||!R.disableAlphaBlending)&&(this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===G.PBRMATERIAL_ALPHATEST))}_shouldUseAlphaFromAlbedoTexture(){return null!=this._albedoTexture&&this._albedoTexture.Qj&&this._useAlphaFromAlbedoTexture&&this._transparencyMode!==G.PBRMATERIAL_OPAQUE}_hasAlphaChannel(){return null!=this._albedoTexture&&this._albedoTexture.Qj||null!=this._opacityTexture}getAlphaTestTexture(){return this._albedoTexture}isReadyForSubMesh(R,x,H){this._uniformBufferLayoutBuilt||this.buildUniformLayout();const k=x._drawWrapper;if(k.effect&&this.isFrozen&&k._wasPreviouslyReady&&k._wasPreviouslyUsingInstances===H)return!0;x.materialDefines||(this._callbackPluginEventGeneric(4,this._eventInfo),x.materialDefines=new Q(this._eventInfo.defineNames));const c=x.materialDefines;if(this._isReadyForSubMesh(x))return!0;const A=this.va(),D=A.getEngine();if(c._areTexturesDirty&&(this._eventInfo.hasRenderTargetTextures=!1,this._callbackPluginEventHasRenderTargetTextures(this._eventInfo),this._cacheHasRenderTargetTextures=this._eventInfo.hasRenderTargetTextures,A.texturesEnabled)){if(this._albedoTexture&&d.e.DiffuseTextureEnabled&&!this._albedoTexture.isReadyOrNotBlocking())return!1;if(this._baseWeightTexture&&d.e.BaseWeightTextureEnabled&&!this._baseWeightTexture.isReadyOrNotBlocking())return!1;if(this._baseDiffuseRoughnessTexture&&d.e.BaseDiffuseRoughnessTextureEnabled&&!this._baseDiffuseRoughnessTexture.isReadyOrNotBlocking())return!1;if(this._ambientTexture&&d.e.AmbientTextureEnabled&&!this._ambientTexture.isReadyOrNotBlocking())return!1;if(this._opacityTexture&&d.e.OpacityTextureEnabled&&!this._opacityTexture.isReadyOrNotBlocking())return!1;const R=this._getReflectionTexture();if(R&&d.e.ReflectionTextureEnabled){if(!R.isReadyOrNotBlocking())return!1;var U;if(R.irradianceTexture){if(!R.irradianceTexture.isReadyOrNotBlocking())return!1}else if(!R.sphericalPolynomial&&null!==(U=R.getInternalTexture())&&void 0!==U&&U._sphericalPolynomialPromise)return!1}if(this._lightmapTexture&&d.e.LightmapTextureEnabled&&!this._lightmapTexture.isReadyOrNotBlocking())return!1;if(this._emissiveTexture&&d.e.EmissiveTextureEnabled&&!this._emissiveTexture.isReadyOrNotBlocking())return!1;if(d.e.SpecularTextureEnabled){if(this._metallicTexture){if(!this._metallicTexture.isReadyOrNotBlocking())return!1}else if(this._reflectivityTexture&&!this._reflectivityTexture.isReadyOrNotBlocking())return!1;if(this._metallicReflectanceTexture&&!this._metallicReflectanceTexture.isReadyOrNotBlocking())return!1;if(this._reflectanceTexture&&!this._reflectanceTexture.isReadyOrNotBlocking())return!1;if(this._microSurfaceTexture&&!this._microSurfaceTexture.isReadyOrNotBlocking())return!1}if(D.getCaps().standardDerivatives&&this._bumpTexture&&d.e.BumpTextureEnabled&&!this._disableBumpMap&&!this._bumpTexture.isReady())return!1;if(this._environmentBRDFTexture&&d.e.ReflectionTextureEnabled&&!this._environmentBRDFTexture.isReady())return!1}if(this._eventInfo.isReadyForSubMesh=!0,this._eventInfo.defines=c,this._eventInfo.subMesh=x,this._callbackPluginEventIsReadyForSubMesh(this._eventInfo),!this._eventInfo.isReadyForSubMesh)return!1;if(c._areImageProcessingDirty&&this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.isReady())return!1;if(c.AREALIGHTUSED)for(let t=0;t<R.lightSources.length;t++)if(!R.lightSources[t]._isReady())return!1;D.getCaps().standardDerivatives||R.isVerticesDataPresent(V.g.NormalKind)||(R.createNormals(!0),t.c.Warn("PBRMaterial: Normals have been created for the mesh: "+R.name));const J=x.effect,n=c._areLightsDisposed;let g=this._prepareEffect(R,c,this.onCompiled,this.onError,H,null,x.getRenderingMesh().hasThinInstances),I=!1;if(g)if(this._onEffectCreatedObservable&&(K.effect=g,K.subMesh=x,this._onEffectCreatedObservable.notifyObservers(K)),this.allowShaderHotSwapping&&J&&!g.isReady()){if(g=J,c.markAsUnprocessed(),I=this.isFrozen,n)return c._areLightsDisposed=!0,!1}else A.resetCachedMaterial(),x.setEffect(g,c,this._materialContext);return!(!x.effect||!x.effect.isReady())&&(c._renderId=A.getRenderId(),k._wasPreviouslyReady=!I,k._wasPreviouslyUsingInstances=!!H,this._checkScenePerformancePriority(),!0)}isMetallicWorkflow(){return!(null==this._metallic&&null==this._roughness&&!this._metallicTexture)}_prepareEffect(R,x){let k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,D=arguments.length>6?arguments[6]:void 0;if(this._prepareDefines(R,x,t,A,D),!x.isDirty)return null;x.markAsProcessed();const U=this.va().getEngine(),J=new P.b;let n=0;x.USESPHERICALINVERTEX&&J.addFallback(n++,"USESPHERICALINVERTEX"),x.FOG&&J.addFallback(n,"FOG"),x.SPECULARAA&&J.addFallback(n,"SPECULARAA"),x.POINTSIZE&&J.addFallback(n,"POINTSIZE"),x.LOGARITHMICDEPTH&&J.addFallback(n,"LOGARITHMICDEPTH"),x.PARALLAX&&J.addFallback(n,"PARALLAX"),x.PARALLAX_RHS&&J.addFallback(n,"PARALLAX_RHS"),x.PARALLAXOCCLUSION&&J.addFallback(n++,"PARALLAXOCCLUSION"),x.ENVIRONMENTBRDF&&J.addFallback(n++,"ENVIRONMENTBRDF"),x.TANGENT&&J.addFallback(n++,"TANGENT"),x.BUMP&&J.addFallback(n++,"BUMP"),n=(0,a.w)(x,J,this._maxSimultaneousLights,n++),x.SPECULARTERM&&J.addFallback(n++,"SPECULARTERM"),x.USESPHERICALFROMREFLECTIONMAP&&J.addFallback(n++,"USESPHERICALFROMREFLECTIONMAP"),x.USEIRRADIANCEMAP&&J.addFallback(n++,"USEIRRADIANCEMAP"),x.LIGHTMAP&&J.addFallback(n++,"LIGHTMAP"),x.NORMAL&&J.addFallback(n++,"NORMAL"),x.AMBIENT&&J.addFallback(n++,"AMBIENT"),x.EMISSIVE&&J.addFallback(n++,"EMISSIVE"),x.VERTEXCOLOR&&J.addFallback(n++,"VERTEXCOLOR"),x.MORPHTARGETS&&J.addFallback(n++,"MORPHTARGETS"),x.MULTIVIEW&&J.addFallback(0,"MULTIVIEW");const g=[V.g.PositionKind];x.NORMAL&&g.push(V.g.NormalKind),x.TANGENT&&g.push(V.g.TangentKind);for(let H=1;H<=6;++H)x["UV"+H]&&g.push(`uv${1===H?"":H}`);x.VERTEXCOLOR&&g.push(V.g.ColorKind),(0,a.D)(g,R,x,J),(0,a.F)(g,x),(0,a.I)(g,R,x),(0,a.z)(g,R,x);let I="pbr";const i=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vAlbedoColor","baseWeight","baseDiffuseRoughness","vReflectivityColor","vMetallicReflectanceFactors","vEmissiveColor","visibility","vReflectionColor","vFogInfos","vFogColor","pointSize","vAlbedoInfos","vBaseWeightInfos","vBaseDiffuseRoughnessInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vReflectionPosition","vReflectionSize","vEmissiveInfos","vReflectivityInfos","vReflectionFilteringInfo","vMetallicReflectanceInfos","vReflectanceInfos","vMicroSurfaceSamplerInfos","vBumpInfos","vLightmapInfos","mBones","albedoMatrix","baseWeightMatrix","baseDiffuseRoughnessMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","reflectivityMatrix","normalMatrix","microSurfaceSamplerMatrix","bumpMatrix","lightmapMatrix","metallicReflectanceMatrix","reflectanceMatrix","vLightingIntensity","logarithmicDepthConstant","vSphericalX","vSphericalY","vSphericalZ","vSphericalXX_ZZ","vSphericalYY_ZZ","vSphericalZZ","vSphericalXY","vSphericalYZ","vSphericalZX","vSphericalL00","vSphericalL1_1","vSphericalL10","vSphericalL11","vSphericalL2_2","vSphericalL2_1","vSphericalL20","vSphericalL21","vSphericalL22","vReflectionMicrosurfaceInfos","vReflectionDominantDirection","vTangentSpaceParams","boneTextureWidth","vDebugMode","morphTargetTextureInfo","morphTargetTextureIndices","cameraInfo"],S=["albedoSampler","baseWeightSampler","baseDiffuseRoughnessSampler","reflectivitySampler","ambientSampler","emissiveSampler","bumpSampler","lightmapSampler","opacitySampler","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh","irradianceSampler","microSurfaceSampler","environmentBrdfSampler","boneSampler","metallicReflectanceSampler","reflectanceSampler","morphTargets","oitDepthSampler","oitFrontColorSampler","icdfSampler","areaLightsLTC1Sampler","areaLightsLTC2Sampler"],b=["Material","Scene","Mesh"],C={maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:x.NUM_MORPH_INFLUENCERS};this._eventInfo.fallbacks=J,this._eventInfo.fallbackRank=n,this._eventInfo.defines=x,this._eventInfo.uniforms=i,this._eventInfo.attributes=g,this._eventInfo.samplers=S,this._eventInfo.uniformBuffersNames=b,this._eventInfo.customCode=void 0,this._eventInfo.mesh=R,this._eventInfo.indexParameters=C,this._callbackPluginEventGeneric(128,this._eventInfo),W.d.AddUniformsAndSamplers(i,S),q.e.AddUniforms(i),q.e.AddSamplers(S),(0,N.e)(i),L.c&&(L.c.PrepareUniforms(i,x),L.c.PrepareSamplers(S,x)),(0,a.gb)({uniformsNames:i,uniformBuffersNames:b,samplers:S,defines:x,maxSimultaneousLights:this._maxSimultaneousLights});const F={};this.customShaderNameResolve&&(I=this.customShaderNameResolve(I,i,b,S,x,g,F));const d=x.toString(),X=U.createEffect(I,{attributes:g,uniformsNames:i,uniformBuffersNames:b,samplers:S,defines:d,fallbacks:J,onCompiled:k,onError:c,indexParameters:C,processFinalCode:F.processFinalCode,processCodeAfterIncludes:this._eventInfo.customCode,multiTarget:x.PREPASS,shaderLanguage:this._shaderLanguage,extraInitializationsAsync:this._shadersLoaded?void 0:async()=>{1===this.shaderLanguage?await Promise.all([Promise.all([H.e(35),H.e(49)]).then(H.bind(H,13848)),Promise.all([H.e(33),H.e(50)]).then(H.bind(H,14001))]):await Promise.all([Promise.all([H.e(28),H.e(52)]).then(H.bind(H,14079)),Promise.all([H.e(27),H.e(53)]).then(H.bind(H,14227))]),this._shadersLoaded=!0}},U);return this._eventInfo.customCode=void 0,X}_prepareDefines(R,x){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const t=this.va(),A=t.getEngine();(0,a.T)(t,R,x,!0,this._maxSimultaneousLights,this._disableLighting),x._needNormals=!0,(0,a._)(t,x);const D=this.needAlphaBlendingForMesh(R)&&this.va().useOrderIndependentTransparency;if((0,a.db)(t,x,this.canRenderToMRT&&!D),(0,a.bb)(t,x,D),W.d.PrepareDefines(A.currentRenderPassId,R,x),x.METALLICWORKFLOW=this.isMetallicWorkflow(),x._areTexturesDirty){x._needUVs=!1;for(let R=1;R<=6;++R)x["MAINUV"+R]=!1;if(t.texturesEnabled){x.ALBEDODIRECTUV=0,x.BASE_WEIGHTDIRECTUV=0,x.BASE_DIFFUSE_ROUGHNESSDIRECTUV=0,x.AMBIENTDIRECTUV=0,x.OPACITYDIRECTUV=0,x.EMISSIVEDIRECTUV=0,x.REFLECTIVITYDIRECTUV=0,x.MICROSURFACEMAPDIRECTUV=0,x.METALLIC_REFLECTANCEDIRECTUV=0,x.REFLECTANCEDIRECTUV=0,x.BUMPDIRECTUV=0,x.LIGHTMAPDIRECTUV=0,A.getCaps().textureLOD&&(x.LODBASEDMICROSFURACE=!0),this._albedoTexture&&d.e.DiffuseTextureEnabled?((0,a.U)(this._albedoTexture,x,"ALBEDO"),x.GAMMAALBEDO=this._albedoTexture.gammaSpace):x.ALBEDO=!1,this._baseWeightTexture&&d.e.BaseWeightTextureEnabled?(0,a.U)(this._baseWeightTexture,x,"BASE_WEIGHT"):x.BASE_WEIGHT=!1,this._baseDiffuseRoughnessTexture&&d.e.BaseDiffuseRoughnessTextureEnabled?(0,a.U)(this._baseDiffuseRoughnessTexture,x,"BASE_DIFFUSE_ROUGHNESS"):x.BASE_DIFFUSE_ROUGHNESS=!1,this._ambientTexture&&d.e.AmbientTextureEnabled?((0,a.U)(this._ambientTexture,x,"AMBIENT"),x.AMBIENTINGRAYSCALE=this._useAmbientInGrayScale):x.AMBIENT=!1,this._opacityTexture&&d.e.OpacityTextureEnabled?((0,a.U)(this._opacityTexture,x,"OPACITY"),x.OPACITYRGB=this._opacityTexture.getAlphaFromRGB):x.OPACITY=!1;const R=this._getReflectionTexture();if(R&&d.e.ReflectionTextureEnabled){switch(x.REFLECTION=!0,x.GAMMAREFLECTION=R.gammaSpace,x.RGBDREFLECTION=R.isRGBD,x.LODINREFLECTIONALPHA=R.lodLevelInAlpha,x.LINEARSPECULARREFLECTION=R.linearSpecularLOD,x.USEIRRADIANCEMAP=!1,this.realTimeFiltering&&this.realTimeFilteringQuality>0?(x.NUM_SAMPLES=""+this.realTimeFilteringQuality,A._features.needTypeSuffixInShaderConstants&&(x.NUM_SAMPLES=x.NUM_SAMPLES+"u"),x.REALTIME_FILTERING=!0,this.va().iblCdfGenerator&&(x.IBL_CDF_FILTERING=!0)):x.REALTIME_FILTERING=!1,x.INVERTCUBICMAP=R.coordinatesMode===F.d.INVCUBIC_MODE,x.REFLECTIONMAP_3D=R.isCube,x.REFLECTIONMAP_OPPOSITEZ=x.REFLECTIONMAP_3D&&this.va().useRightHandedSystem?!R.invertZ:R.invertZ,x.REFLECTIONMAP_CUBIC=!1,x.REFLECTIONMAP_EXPLICIT=!1,x.REFLECTIONMAP_PLANAR=!1,x.REFLECTIONMAP_PROJECTION=!1,x.REFLECTIONMAP_SKYBOX=!1,x.REFLECTIONMAP_SPHERICAL=!1,x.REFLECTIONMAP_EQUIRECTANGULAR=!1,x.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,x.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,R.coordinatesMode){case F.d.EXPLICIT_MODE:x.REFLECTIONMAP_EXPLICIT=!0;break;case F.d.PLANAR_MODE:x.REFLECTIONMAP_PLANAR=!0;break;case F.d.PROJECTION_MODE:x.REFLECTIONMAP_PROJECTION=!0;break;case F.d.SKYBOX_MODE:x.REFLECTIONMAP_SKYBOX=!0;break;case F.d.SPHERICAL_MODE:x.REFLECTIONMAP_SPHERICAL=!0;break;case F.d.EQUIRECTANGULAR_MODE:x.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case F.d.FIXED_EQUIRECTANGULAR_MODE:x.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case F.d.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:x.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0;break;case F.d.CUBIC_MODE:case F.d.INVCUBIC_MODE:default:x.REFLECTIONMAP_CUBIC=!0,x.USE_LOCAL_REFLECTIONMAP_CUBIC=!!R.boundingBoxSize}R.coordinatesMode!==F.d.SKYBOX_MODE&&(R.irradianceTexture?(x.USEIRRADIANCEMAP=!0,x.USESPHERICALFROMREFLECTIONMAP=!1,x.USESPHERICALINVERTEX=!1,R.irradianceTexture._dominantDirection&&(x.USE_IRRADIANCE_DOMINANT_DIRECTION=!0)):R.isCube&&(x.USESPHERICALFROMREFLECTIONMAP=!0,x.USEIRRADIANCEMAP=!1,x.USE_IRRADIANCE_DOMINANT_DIRECTION=!1,this._forceIrradianceInFragment||this.realTimeFiltering||this._twoSidedLighting||A.getCaps().maxVaryingVectors<=8||this._baseDiffuseRoughnessTexture?x.USESPHERICALINVERTEX=!1:x.USESPHERICALINVERTEX=!0))}else x.REFLECTION=!1,x.REFLECTIONMAP_3D=!1,x.REFLECTIONMAP_SPHERICAL=!1,x.REFLECTIONMAP_PLANAR=!1,x.REFLECTIONMAP_CUBIC=!1,x.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,x.REFLECTIONMAP_PROJECTION=!1,x.REFLECTIONMAP_SKYBOX=!1,x.REFLECTIONMAP_EXPLICIT=!1,x.REFLECTIONMAP_EQUIRECTANGULAR=!1,x.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,x.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,x.INVERTCUBICMAP=!1,x.USESPHERICALFROMREFLECTIONMAP=!1,x.USEIRRADIANCEMAP=!1,x.USE_IRRADIANCE_DOMINANT_DIRECTION=!1,x.USESPHERICALINVERTEX=!1,x.REFLECTIONMAP_OPPOSITEZ=!1,x.LODINREFLECTIONALPHA=!1,x.GAMMAREFLECTION=!1,x.RGBDREFLECTION=!1,x.LINEARSPECULARREFLECTION=!1;this._lightmapTexture&&d.e.LightmapTextureEnabled?((0,a.U)(this._lightmapTexture,x,"LIGHTMAP"),x.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap,x.GAMMALIGHTMAP=this._lightmapTexture.gammaSpace,x.RGBDLIGHTMAP=this._lightmapTexture.isRGBD):x.LIGHTMAP=!1,this._emissiveTexture&&d.e.EmissiveTextureEnabled?((0,a.U)(this._emissiveTexture,x,"EMISSIVE"),x.GAMMAEMISSIVE=this._emissiveTexture.gammaSpace):x.EMISSIVE=!1,d.e.SpecularTextureEnabled?(this._metallicTexture?((0,a.U)(this._metallicTexture,x,"REFLECTIVITY"),x.ROUGHNESSSTOREINMETALMAPALPHA=this._useRoughnessFromMetallicTextureAlpha,x.ROUGHNESSSTOREINMETALMAPGREEN=!this._useRoughnessFromMetallicTextureAlpha&&this._useRoughnessFromMetallicTextureGreen,x.METALLNESSSTOREINMETALMAPBLUE=this._useMetallnessFromMetallicTextureBlue,x.AOSTOREINMETALMAPRED=this._useAmbientOcclusionFromMetallicTextureRed,x.REFLECTIVITY_GAMMA=!1):this._reflectivityTexture?((0,a.U)(this._reflectivityTexture,x,"REFLECTIVITY"),x.MICROSURFACEFROMREFLECTIVITYMAP=this._useMicroSurfaceFromReflectivityMapAlpha,x.MICROSURFACEAUTOMATIC=this._useAutoMicroSurfaceFromReflectivityMap,x.REFLECTIVITY_GAMMA=this._reflectivityTexture.gammaSpace):x.REFLECTIVITY=!1,this._metallicReflectanceTexture||this._reflectanceTexture?(x.METALLIC_REFLECTANCE_USE_ALPHA_ONLY=this._useOnlyMetallicFromMetallicReflectanceTexture,this._metallicReflectanceTexture?((0,a.U)(this._metallicReflectanceTexture,x,"METALLIC_REFLECTANCE"),x.METALLIC_REFLECTANCE_GAMMA=this._metallicReflectanceTexture.gammaSpace):x.METALLIC_REFLECTANCE=!1,this._reflectanceTexture&&(!this._metallicReflectanceTexture||this._metallicReflectanceTexture&&this._useOnlyMetallicFromMetallicReflectanceTexture)?((0,a.U)(this._reflectanceTexture,x,"REFLECTANCE"),x.REFLECTANCE_GAMMA=this._reflectanceTexture.gammaSpace):x.REFLECTANCE=!1):(x.METALLIC_REFLECTANCE=!1,x.REFLECTANCE=!1),this._microSurfaceTexture?(0,a.U)(this._microSurfaceTexture,x,"MICROSURFACEMAP"):x.MICROSURFACEMAP=!1):(x.REFLECTIVITY=!1,x.MICROSURFACEMAP=!1),A.getCaps().standardDerivatives&&this._bumpTexture&&d.e.BumpTextureEnabled&&!this._disableBumpMap?((0,a.U)(this._bumpTexture,x,"BUMP"),this._useParallax&&this._albedoTexture&&d.e.DiffuseTextureEnabled?(x.PARALLAX=!0,x.PARALLAX_RHS=t.useRightHandedSystem,x.PARALLAXOCCLUSION=!!this._useParallaxOcclusion):x.PARALLAX=!1,x.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap):(x.BUMP=!1,x.PARALLAX=!1,x.PARALLAX_RHS=!1,x.PARALLAXOCCLUSION=!1,x.OBJECTSPACE_NORMALMAP=!1),this._environmentBRDFTexture&&d.e.ReflectionTextureEnabled?(x.ENVIRONMENTBRDF=!0,x.ENVIRONMENTBRDF_RGBD=this._environmentBRDFTexture.isRGBD):(x.ENVIRONMENTBRDF=!1,x.ENVIRONMENTBRDF_RGBD=!1),this._shouldUseAlphaFromAlbedoTexture()?x.ALPHAFROMALBEDO=!0:x.ALPHAFROMALBEDO=!1}x.SPECULAROVERALPHA=this._useSpecularOverAlpha,this._lightFalloff===G.LIGHTFALLOFF_STANDARD?(x.USEPHYSICALLIGHTFALLOFF=!1,x.USEGLTFLIGHTFALLOFF=!1):this._lightFalloff===G.LIGHTFALLOFF_GLTF?(x.USEPHYSICALLIGHTFALLOFF=!1,x.USEGLTFLIGHTFALLOFF=!0):(x.USEPHYSICALLIGHTFALLOFF=!0,x.USEGLTFLIGHTFALLOFF=!1),x.RADIANCEOVERALPHA=this._useRadianceOverAlpha,!this.Ki&&this._twoSidedLighting?x.TWOSIDEDLIGHTING=!0:x.TWOSIDEDLIGHTING=!1,x.MIRRORED=!!t._mirroredCameraPosition,x.SPECULARAA=A.getCaps().standardDerivatives&&this._enableSpecularAntiAliasing}(x._areTexturesDirty||x._areMiscDirty)&&(x.ALPHATESTVALUE=`${this._alphaCutOff}${this._alphaCutOff%1===0?".":""}`,x.PREMULTIPLYALPHA=7===this.alphaMode||8===this.alphaMode,x.ALPHABLEND=this.needAlphaBlendingForMesh(R),x.ALPHAFRESNEL=this._useAlphaFresnel||this._useLinearAlphaFresnel,x.LINEARALPHAFRESNEL=this._useLinearAlphaFresnel),x._areImageProcessingDirty&&this._imageProcessingConfiguration&&this._imageProcessingConfiguration.prepareDefines(x),x.FORCENORMALFORWARD=this._forceNormalForward,x.RADIANCEOCCLUSION=this._useRadianceOcclusion,x.HORIZONOCCLUSION=this._useHorizonOcclusion,x._areMiscDirty&&((0,a.W)(R,t,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this.needAlphaTestingForMesh(R),x,this._applyDecalMapAfterDetailMap),x.UNLIT=this._unlit||(this.pointsCloud||this.wireframe)&&!R.isVerticesDataPresent(V.g.NormalKind),x.DEBUGMODE=this._debugMode),(0,a.Q)(t,A,this,x,!!H,k,c),this._eventInfo.defines=x,this._eventInfo.mesh=R,this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo),(0,a.N)(R,x,!0,!0,!0,this._transparencyMode!==G.PBRMATERIAL_OPAQUE),this._callbackPluginEventPrepareDefines(this._eventInfo)}forceCompilation(R,x,H){const k={clipPlane:!1,useInstances:!1,...H};this._uniformBufferLayoutBuilt||this.buildUniformLayout(),this._callbackPluginEventGeneric(4,this._eventInfo);(()=>{if(this._breakShaderLoadedCheck)return;const H=new Q(this._eventInfo.defineNames),c=this._prepareEffect(R,H,void 0,void 0,k.useInstances,k.clipPlane,R.hasThinInstances);this._onEffectCreatedObservable&&(K.effect=c,K.subMesh=null,this._onEffectCreatedObservable.notifyObservers(K)),c.isReady()?x&&x(this):c.onCompileObservable.add((()=>{x&&x(this)}))})()}buildUniformLayout(){const R=this._uniformBuffer;R.addUniform("vAlbedoInfos",2),R.addUniform("vBaseWeightInfos",2),R.addUniform("vBaseDiffuseRoughnessInfos",2),R.addUniform("vAmbientInfos",4),R.addUniform("vOpacityInfos",2),R.addUniform("vEmissiveInfos",2),R.addUniform("vLightmapInfos",2),R.addUniform("vReflectivityInfos",3),R.addUniform("vMicroSurfaceSamplerInfos",2),R.addUniform("vReflectionInfos",2),R.addUniform("vReflectionFilteringInfo",2),R.addUniform("vReflectionPosition",3),R.addUniform("vReflectionSize",3),R.addUniform("vBumpInfos",3),R.addUniform("albedoMatrix",16),R.addUniform("baseWeightMatrix",16),R.addUniform("baseDiffuseRoughnessMatrix",16),R.addUniform("ambientMatrix",16),R.addUniform("opacityMatrix",16),R.addUniform("emissiveMatrix",16),R.addUniform("lightmapMatrix",16),R.addUniform("reflectivityMatrix",16),R.addUniform("microSurfaceSamplerMatrix",16),R.addUniform("bumpMatrix",16),R.addUniform("vTangentSpaceParams",2),R.addUniform("reflectionMatrix",16),R.addUniform("vReflectionColor",3),R.addUniform("vAlbedoColor",4),R.addUniform("baseWeight",1),R.addUniform("baseDiffuseRoughness",1),R.addUniform("vLightingIntensity",4),R.addUniform("vReflectionMicrosurfaceInfos",3),R.addUniform("vReflectionDominantDirection",3),R.addUniform("pointSize",1),R.addUniform("vReflectivityColor",4),R.addUniform("vEmissiveColor",3),R.addUniform("vAmbientColor",3),R.addUniform("vDebugMode",2),R.addUniform("vMetallicReflectanceFactors",4),R.addUniform("vMetallicReflectanceInfos",2),R.addUniform("metallicReflectanceMatrix",16),R.addUniform("vReflectanceInfos",2),R.addUniform("reflectanceMatrix",16),R.addUniform("vSphericalL00",3),R.addUniform("vSphericalL1_1",3),R.addUniform("vSphericalL10",3),R.addUniform("vSphericalL11",3),R.addUniform("vSphericalL2_2",3),R.addUniform("vSphericalL2_1",3),R.addUniform("vSphericalL20",3),R.addUniform("vSphericalL21",3),R.addUniform("vSphericalL22",3),R.addUniform("vSphericalX",3),R.addUniform("vSphericalY",3),R.addUniform("vSphericalZ",3),R.addUniform("vSphericalXX_ZZ",3),R.addUniform("vSphericalYY_ZZ",3),R.addUniform("vSphericalZZ",3),R.addUniform("vSphericalXY",3),R.addUniform("vSphericalYZ",3),R.addUniform("vSphericalZX",3),R.addUniform("cameraInfo",4),super.buildUniformLayout()}bindForSubMesh(R,x,H){const k=this.va(),c=H.materialDefines;if(!c)return;const t=H.effect;if(!t)return;this._activeEffect=t,x.getMeshUniformBuffer().bindToEffect(t,"Mesh"),x.transferToEffect(R);const A=k.getEngine();this._uniformBuffer.bindToEffect(t,"Material"),this.prePassConfiguration.bindForSubMesh(this._activeEffect,k,x,R,this.isFrozen),W.d.Bind(A.currentRenderPassId,this._activeEffect,x,R,this);const D=k.activeCamera;D?this._uniformBuffer.updateFloat4("cameraInfo",D.Hi,D.maxZ,0,0):this._uniformBuffer.updateFloat4("cameraInfo",0,0,0,0),this._eventInfo.subMesh=H,this._callbackPluginEventHardBindForSubMesh(this._eventInfo),c.OBJECTSPACE_NORMALMAP&&(R.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));const J=this._mustRebind(k,t,H,x.visibility);(0,a.e)(x,this._activeEffect,this.prePassConfiguration);let V=null;const n=this._uniformBuffer;if(J){if(this.bindViewProjection(t),V=this._getReflectionTexture(),!n.useUbo||!this.isFrozen||!n.isSync||H._drawWrapper._forceRebindOnNextCall){var g;if(k.texturesEnabled){if(this._albedoTexture&&d.e.DiffuseTextureEnabled&&(n.updateFloat2("vAlbedoInfos",this._albedoTexture.coordinatesIndex,this._albedoTexture.level),(0,a.u)(this._albedoTexture,n,"albedo")),this._baseWeightTexture&&d.e.BaseWeightTextureEnabled&&(n.updateFloat2("vBaseWeightInfos",this._baseWeightTexture.coordinatesIndex,this._baseWeightTexture.level),(0,a.u)(this._baseWeightTexture,n,"baseWeight")),this._baseDiffuseRoughnessTexture&&d.e.BaseDiffuseRoughnessTextureEnabled&&(n.updateFloat2("vBaseDiffuseRoughnessInfos",this._baseDiffuseRoughnessTexture.coordinatesIndex,this._baseDiffuseRoughnessTexture.level),(0,a.u)(this._baseDiffuseRoughnessTexture,n,"baseDiffuseRoughness")),this._ambientTexture&&d.e.AmbientTextureEnabled&&(n.updateFloat4("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level,this._ambientTextureStrength,this._ambientTextureImpactOnAnalyticalLights),(0,a.u)(this._ambientTexture,n,"ambient")),this._opacityTexture&&d.e.OpacityTextureEnabled&&(n.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),(0,a.u)(this._opacityTexture,n,"opacity")),V&&d.e.ReflectionTextureEnabled){if(n.jj("reflectionMatrix",V.getReflectionTextureMatrix()),n.updateFloat2("vReflectionInfos",V.level*k.iblIntensity,0),V.boundingBoxSize){const R=V;n.updateVector3("vReflectionPosition",R.boundingBoxPosition),n.updateVector3("vReflectionSize",R.boundingBoxSize)}if(this.realTimeFiltering){const R=V.getSize().width;n.updateFloat2("vReflectionFilteringInfo",R,Math.log2(R))}if(c.USEIRRADIANCEMAP)c.USEIRRADIANCEMAP&&c.USE_IRRADIANCE_DOMINANT_DIRECTION&&n.updateVector3("vReflectionDominantDirection",V.irradianceTexture._dominantDirection);else{const R=V.sphericalPolynomial;if(c.USESPHERICALFROMREFLECTIONMAP&&R)if(c.SPHERICAL_HARMONICS){const x=R.preScaledHarmonics;n.updateVector3("vSphericalL00",x.l00),n.updateVector3("vSphericalL1_1",x.l1_1),n.updateVector3("vSphericalL10",x.l10),n.updateVector3("vSphericalL11",x.l11),n.updateVector3("vSphericalL2_2",x.l2_2),n.updateVector3("vSphericalL2_1",x.l2_1),n.updateVector3("vSphericalL20",x.l20),n.updateVector3("vSphericalL21",x.l21),n.updateVector3("vSphericalL22",x.l22)}else n.updateFloat3("vSphericalX",R.x.x,R.x.y,R.x.z),n.updateFloat3("vSphericalY",R.y.x,R.y.y,R.y.z),n.updateFloat3("vSphericalZ",R.z.x,R.z.y,R.z.z),n.updateFloat3("vSphericalXX_ZZ",R.xx.x-R.zz.x,R.xx.y-R.zz.y,R.xx.z-R.zz.z),n.updateFloat3("vSphericalYY_ZZ",R.yy.x-R.zz.x,R.yy.y-R.zz.y,R.yy.z-R.zz.z),n.updateFloat3("vSphericalZZ",R.zz.x,R.zz.y,R.zz.z),n.updateFloat3("vSphericalXY",R.xy.x,R.xy.y,R.xy.z),n.updateFloat3("vSphericalYZ",R.yz.x,R.yz.y,R.yz.z),n.updateFloat3("vSphericalZX",R.zx.x,R.zx.y,R.zx.z)}n.updateFloat3("vReflectionMicrosurfaceInfos",V.getSize().width,V.lodGenerationScale,V.lodGenerationOffset)}this._emissiveTexture&&d.e.EmissiveTextureEnabled&&(n.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),(0,a.u)(this._emissiveTexture,n,"emissive")),this._lightmapTexture&&d.e.LightmapTextureEnabled&&(n.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),(0,a.u)(this._lightmapTexture,n,"lightmap")),d.e.SpecularTextureEnabled&&(this._metallicTexture?(n.updateFloat3("vReflectivityInfos",this._metallicTexture.coordinatesIndex,this._metallicTexture.level,this._ambientTextureStrength),(0,a.u)(this._metallicTexture,n,"reflectivity")):this._reflectivityTexture&&(n.updateFloat3("vReflectivityInfos",this._reflectivityTexture.coordinatesIndex,this._reflectivityTexture.level,1),(0,a.u)(this._reflectivityTexture,n,"reflectivity")),this._metallicReflectanceTexture&&(n.updateFloat2("vMetallicReflectanceInfos",this._metallicReflectanceTexture.coordinatesIndex,this._metallicReflectanceTexture.level),(0,a.u)(this._metallicReflectanceTexture,n,"metallicReflectance")),this._reflectanceTexture&&c.REFLECTANCE&&(n.updateFloat2("vReflectanceInfos",this._reflectanceTexture.coordinatesIndex,this._reflectanceTexture.level),(0,a.u)(this._reflectanceTexture,n,"reflectance")),this._microSurfaceTexture&&(n.updateFloat2("vMicroSurfaceSamplerInfos",this._microSurfaceTexture.coordinatesIndex,this._microSurfaceTexture.level),(0,a.u)(this._microSurfaceTexture,n,"microSurfaceSampler"))),this._bumpTexture&&A.getCaps().standardDerivatives&&d.e.BumpTextureEnabled&&!this._disableBumpMap&&(n.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,this._bumpTexture.level,this._parallaxScaleBias),(0,a.u)(this._bumpTexture,n,"bump"),k._mirroredCameraPosition?n.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):n.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1))}if(this.pointsCloud&&n.updateFloat("pointSize",this.pointSize),c.METALLICWORKFLOW){var I;S.h.gj[0].r=void 0===this._metallic||null===this._metallic?1:this._metallic,S.h.gj[0].g=void 0===this._roughness||null===this._roughness?1:this._roughness;const R=(null===(I=this.subSurface)||void 0===I?void 0:I._indexOfRefraction)??1.5,x=1;S.h.gj[0].b=R;const H=Math.pow((R-x)/(R+x),2);S.h.gj[0].a=H,n.updateDirectColor4("vReflectivityColor",S.h.gj[0]),n.updateColor4("vMetallicReflectanceFactors",this._metallicReflectanceColor,this._metallicF0Factor)}else n.updateColor4("vReflectivityColor",this._reflectivityColor,this._microSurface);n.updateColor3("vEmissiveColor",d.e.EmissiveTextureEnabled?this._emissiveColor:S.c.BlackReadOnly),n.updateColor3("vReflectionColor",this._reflectionColor),!c.SS_REFRACTION&&null!==(g=this.subSurface)&&void 0!==g&&g._linkRefractionWithTransparency?n.updateColor4("vAlbedoColor",this._albedoColor,1):n.updateColor4("vAlbedoColor",this._albedoColor,this.alpha),n.updateFloat("baseWeight",this._baseWeight),n.updateFloat("baseDiffuseRoughness",this._baseDiffuseRoughness||0),this._lightingInfos.x=this._directIntensity,this._lightingInfos.y=this._emissiveIntensity,this._lightingInfos.z=this._environmentIntensity*k.environmentIntensity,this._lightingInfos.w=this._specularIntensity,n.updateVector4("vLightingIntensity",this._lightingInfos),k.ambientColor.multiplyToRef(this._ambientColor,this._globalAmbientColor),n.updateColor3("vAmbientColor",this._globalAmbientColor),n.updateFloat2("vDebugMode",this.debugLimit,this.debugFactor)}if(k.texturesEnabled){if(this._albedoTexture&&d.e.DiffuseTextureEnabled&&n.setTexture("albedoSampler",this._albedoTexture),this._baseWeightTexture&&d.e.BaseWeightTextureEnabled&&n.setTexture("baseWeightSampler",this._baseWeightTexture),this._baseDiffuseRoughnessTexture&&d.e.BaseDiffuseRoughnessTextureEnabled&&n.setTexture("baseDiffuseRoughnessSampler",this._baseDiffuseRoughnessTexture),this._ambientTexture&&d.e.AmbientTextureEnabled&&n.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&d.e.OpacityTextureEnabled&&n.setTexture("opacitySampler",this._opacityTexture),V&&d.e.ReflectionTextureEnabled){c.LODBASEDMICROSFURACE?n.setTexture("reflectionSampler",V):(n.setTexture("reflectionSampler",V._lodTextureMid||V),n.setTexture("reflectionSamplerLow",V._lodTextureLow||V),n.setTexture("reflectionSamplerHigh",V._lodTextureHigh||V)),c.USEIRRADIANCEMAP&&n.setTexture("irradianceSampler",V.irradianceTexture);const R=this.va().iblCdfGenerator;this.realTimeFiltering&&R&&n.setTexture("icdfSampler",R.getIcdfTexture())}c.ENVIRONMENTBRDF&&n.setTexture("environmentBrdfSampler",this._environmentBRDFTexture),this._emissiveTexture&&d.e.EmissiveTextureEnabled&&n.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&d.e.LightmapTextureEnabled&&n.setTexture("lightmapSampler",this._lightmapTexture),d.e.SpecularTextureEnabled&&(this._metallicTexture?n.setTexture("reflectivitySampler",this._metallicTexture):this._reflectivityTexture&&n.setTexture("reflectivitySampler",this._reflectivityTexture),this._metallicReflectanceTexture&&n.setTexture("metallicReflectanceSampler",this._metallicReflectanceTexture),this._reflectanceTexture&&c.REFLECTANCE&&n.setTexture("reflectanceSampler",this._reflectanceTexture),this._microSurfaceTexture&&n.setTexture("microSurfaceSampler",this._microSurfaceTexture)),this._bumpTexture&&A.getCaps().standardDerivatives&&d.e.BumpTextureEnabled&&!this._disableBumpMap&&n.setTexture("bumpSampler",this._bumpTexture)}this.va().useOrderIndependentTransparency&&this.needAlphaBlendingForMesh(x)&&this.va().depthPeelingRenderer.bind(t),this._eventInfo.subMesh=H,this._callbackPluginEventBindForSubMesh(this._eventInfo),(0,N.i)(this._activeEffect,this,k),this.bindEyePosition(t)}else k.getEngine()._features.needToAlwaysBindUniformBuffers&&(this._needToBindSceneUbo=!0);if(J||!this.isFrozen){var i;if(k.lightsEnabled&&!this._disableLighting&&(0,a.k)(k,x,this._activeEffect,c,this._maxSimultaneousLights),(k.fogEnabled&&x.applyFog&&k.fogMode!==U.e.FOGMODE_NONE||V||this.subSurface.refractionTexture||x.receiveShadows||c.PREPASS)&&this.bindView(t),(0,a.g)(k,x,this._activeEffect,!0),c.NUM_MORPH_INFLUENCERS&&(0,a.q)(x,this._activeEffect),c.BAKED_VERTEX_ANIMATION_TEXTURE)null===(i=x.bakedVertexAnimationManager)||void 0===i||i.bind(t,c.INSTANCES);this._imageProcessingConfiguration.bind(this._activeEffect),(0,a.n)(c,this._activeEffect,k)}this._afterBind(x,this._activeEffect,H),n.update()}getAnimatables(){const R=super.getAnimatables();return this._albedoTexture&&this._albedoTexture.animations&&this._albedoTexture.animations.length>0&&R.push(this._albedoTexture),this._baseWeightTexture&&this._baseWeightTexture.animations&&this._baseWeightTexture.animations.length>0&&R.push(this._baseWeightTexture),this._baseDiffuseRoughnessTexture&&this._baseDiffuseRoughnessTexture.animations&&this._baseDiffuseRoughnessTexture.animations.length>0&&R.push(this._baseDiffuseRoughnessTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&R.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&R.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&R.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&R.push(this._emissiveTexture),this._metallicTexture&&this._metallicTexture.animations&&this._metallicTexture.animations.length>0?R.push(this._metallicTexture):this._reflectivityTexture&&this._reflectivityTexture.animations&&this._reflectivityTexture.animations.length>0&&R.push(this._reflectivityTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&R.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&R.push(this._lightmapTexture),this._metallicReflectanceTexture&&this._metallicReflectanceTexture.animations&&this._metallicReflectanceTexture.animations.length>0&&R.push(this._metallicReflectanceTexture),this._reflectanceTexture&&this._reflectanceTexture.animations&&this._reflectanceTexture.animations.length>0&&R.push(this._reflectanceTexture),this._microSurfaceTexture&&this._microSurfaceTexture.animations&&this._microSurfaceTexture.animations.length>0&&R.push(this._microSurfaceTexture),R}_getReflectionTexture(){return this._reflectionTexture?this._reflectionTexture:this.va().environmentTexture}getActiveTextures(){const R=super.getActiveTextures();return this._albedoTexture&&R.push(this._albedoTexture),this._baseWeightTexture&&R.push(this._baseWeightTexture),this._baseDiffuseRoughnessTexture&&R.push(this._baseDiffuseRoughnessTexture),this._ambientTexture&&R.push(this._ambientTexture),this._opacityTexture&&R.push(this._opacityTexture),this._reflectionTexture&&R.push(this._reflectionTexture),this._emissiveTexture&&R.push(this._emissiveTexture),this._reflectivityTexture&&R.push(this._reflectivityTexture),this._metallicTexture&&R.push(this._metallicTexture),this._metallicReflectanceTexture&&R.push(this._metallicReflectanceTexture),this._reflectanceTexture&&R.push(this._reflectanceTexture),this._microSurfaceTexture&&R.push(this._microSurfaceTexture),this._bumpTexture&&R.push(this._bumpTexture),this._lightmapTexture&&R.push(this._lightmapTexture),R}hasTexture(R){return!!super.hasTexture(R)||(this._albedoTexture===R||(this._baseWeightTexture===R||(this._baseDiffuseRoughnessTexture===R||(this._ambientTexture===R||(this._opacityTexture===R||(this._reflectionTexture===R||(this._emissiveTexture===R||(this._reflectivityTexture===R||(this._metallicTexture===R||(this._metallicReflectanceTexture===R||(this._reflectanceTexture===R||(this._microSurfaceTexture===R||(this._bumpTexture===R||this._lightmapTexture===R)))))))))))))}setPrePassRenderer(){var R;if(null===(R=this.subSurface)||void 0===R||!R.isScatteringEnabled)return!1;const x=this.va().enableSubSurfaceForPrePass();return x&&(x.enabled=!0),!0}dispose(R,x){var H,k,c,t,A,D,U,J,V,n,g,I,i,q;(this._breakShaderLoadedCheck=!0,x)&&(this._environmentBRDFTexture&&this.va().environmentBRDFTexture!==this._environmentBRDFTexture&&this._environmentBRDFTexture.dispose(),null===(H=this._albedoTexture)||void 0===H||H.dispose(),null===(k=this._baseWeightTexture)||void 0===k||k.dispose(),null===(c=this._baseDiffuseRoughnessTexture)||void 0===c||c.dispose(),null===(t=this._ambientTexture)||void 0===t||t.dispose(),null===(A=this._opacityTexture)||void 0===A||A.dispose(),null===(D=this._reflectionTexture)||void 0===D||D.dispose(),null===(U=this._emissiveTexture)||void 0===U||U.dispose(),null===(J=this._metallicTexture)||void 0===J||J.dispose(),null===(V=this._reflectivityTexture)||void 0===V||V.dispose(),null===(n=this._bumpTexture)||void 0===n||n.dispose(),null===(g=this._lightmapTexture)||void 0===g||g.dispose(),null===(I=this._metallicReflectanceTexture)||void 0===I||I.dispose(),null===(i=this._reflectanceTexture)||void 0===i||i.dispose(),null===(q=this._microSurfaceTexture)||void 0===q||q.dispose());this._renderTargets.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),super.dispose(R,x)}}G.PBRMATERIAL_OPAQUE=b.b.MATERIAL_OPAQUE,G.PBRMATERIAL_ALPHATEST=b.b.MATERIAL_ALPHATEST,G.PBRMATERIAL_ALPHABLEND=b.b.MATERIAL_ALPHABLEND,G.PBRMATERIAL_ALPHATESTANDBLEND=b.b.MATERIAL_ALPHATESTANDBLEND,G.DEFAULT_AO_ON_ANALYTICAL_LIGHTS=0,G.LIGHTFALLOFF_PHYSICAL=0,G.LIGHTFALLOFF_GLTF=1,G.LIGHTFALLOFF_STANDARD=2,G.ForceGLSL=!1,(0,k.d)([(0,c.w)()],G.prototype,"_imageProcessingConfiguration",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsMiscDirty")],G.prototype,"debugMode",void 0)},12264:(R,x,H)=>{H.d(x,{e:()=>n});var k=H(643),c=H(647),t=H(12266),A=H(695),D=H(12268),U=H(610),J=H(837),V=H(687);class n extends D.b{get refractionTexture(){return this.subSurface.refractionTexture}set refractionTexture(R){this.subSurface.refractionTexture=R,R?this.subSurface.isRefractionEnabled=!0:this.subSurface.linkRefractionWithTransparency||(this.subSurface.isRefractionEnabled=!1)}get indexOfRefraction(){return this.subSurface.indexOfRefraction}set indexOfRefraction(R){this.subSurface.indexOfRefraction=R}get invertRefractionY(){return this.subSurface.invertRefractionY}set invertRefractionY(R){this.subSurface.invertRefractionY=R}get linkRefractionWithTransparency(){return this.subSurface.linkRefractionWithTransparency}set linkRefractionWithTransparency(R){this.subSurface.linkRefractionWithTransparency=R,R&&(this.subSurface.isRefractionEnabled=!0)}get usePhysicalLightFalloff(){return this._lightFalloff===D.b.LIGHTFALLOFF_PHYSICAL}set usePhysicalLightFalloff(R){R!==this.usePhysicalLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),this._lightFalloff=R?D.b.LIGHTFALLOFF_PHYSICAL:D.b.LIGHTFALLOFF_STANDARD)}get useGLTFLightFalloff(){return this._lightFalloff===D.b.LIGHTFALLOFF_GLTF}set useGLTFLightFalloff(R){R!==this.useGLTFLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),this._lightFalloff=R?D.b.LIGHTFALLOFF_GLTF:D.b.LIGHTFALLOFF_STANDARD)}get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(R){this._attachImageProcessingConfiguration(R),this._markAllSubMeshesAsImageProcessingDirty()}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(R){this.imageProcessingConfiguration.colorCurvesEnabled=R}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(R){this.imageProcessingConfiguration.colorGradingEnabled=R}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(R){this._imageProcessingConfiguration.toneMappingEnabled=R}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(R){this._imageProcessingConfiguration.exposure=R}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(R){this._imageProcessingConfiguration.contrast=R}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(R){this._imageProcessingConfiguration.colorGradingTexture=R}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(R){this._imageProcessingConfiguration.colorCurves=R}constructor(R,x){super(R,x,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.directIntensity=1,this.emissiveIntensity=1,this.environmentIntensity=1,this.specularIntensity=1,this.disableBumpMap=!1,this.ambientTextureStrength=1,this.ambientTextureImpactOnAnalyticalLights=n.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,this.metallicF0Factor=1,this.metallicReflectanceColor=A.c.White(),this.useOnlyMetallicFromMetallicReflectanceTexture=!1,this.ambientColor=new A.c(0,0,0),this.albedoColor=new A.c(1,1,1),this.baseWeight=1,this.reflectivityColor=new A.c(1,1,1),this.reflectionColor=new A.c(1,1,1),this.emissiveColor=new A.c(0,0,0),this.microSurface=1,this.useLightmapAsShadowmap=!1,this.useAlphaFromAlbedoTexture=!1,this.forceAlphaTest=!1,this.alphaCutOff=.4,this.useSpecularOverAlpha=!0,this.useMicroSurfaceFromReflectivityMapAlpha=!1,this.useRoughnessFromMetallicTextureAlpha=!0,this.useRoughnessFromMetallicTextureGreen=!1,this.useMetallnessFromMetallicTextureBlue=!1,this.useAmbientOcclusionFromMetallicTextureRed=!1,this.useAmbientInGrayScale=!1,this.useAutoMicroSurfaceFromReflectivityMap=!1,this.useRadianceOverAlpha=!0,this.useObjectSpaceNormalMap=!1,this.useParallax=!1,this.useParallaxOcclusion=!1,this.parallaxScaleBias=.05,this.disableLighting=!1,this.forceIrradianceInFragment=!1,this.maxSimultaneousLights=4,this.invertNormalMapX=!1,this.invertNormalMapY=!1,this.twoSidedLighting=!1,this.useAlphaFresnel=!1,this.useLinearAlphaFresnel=!1,this.environmentBRDFTexture=null,this.forceNormalForward=!1,this.enableSpecularAntiAliasing=!1,this.useHorizonOcclusion=!0,this.useRadianceOcclusion=!0,this.unlit=!1,this.applyDecalMapAfterDetailMap=!1,this._environmentBRDFTexture=(0,t.c)(this.va())}getClassName(){return"PBRMaterial"}clone(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const k=V.d.Clone((()=>new n(R,this.va())),this,{cloneTexturesOnlyOnce:x});return k.id=R,k.name=R,this.stencil.copyTo(k.stencil),this._clonePlugins(k,H),k}serialize(){const R=super.serialize();return R.customType="BABYLON.PBRMaterial",R}static Parse(R,x,H){const k=V.d.Parse((()=>new n(R.name,x)),R,x,H);return R.stencil&&k.stencil.parse(R.stencil,x,H),J.b._ParsePlugins(R,k,x,H),R.clearCoat&&k.clearCoat.parse(R.clearCoat,x,H),R.anisotropy&&k.anisotropy.parse(R.anisotropy,x,H),R.brdf&&k.brdf.parse(R.brdf,x,H),R.sheen&&k.sheen.parse(R.sheen,x,H),R.subSurface&&k.subSurface.parse(R.subSurface,x,H),R.iridescence&&k.iridescence.parse(R.iridescence,x,H),k}}n.PBRMATERIAL_OPAQUE=D.b.PBRMATERIAL_OPAQUE,n.PBRMATERIAL_ALPHATEST=D.b.PBRMATERIAL_ALPHATEST,n.PBRMATERIAL_ALPHABLEND=D.b.PBRMATERIAL_ALPHABLEND,n.PBRMATERIAL_ALPHATESTANDBLEND=D.b.PBRMATERIAL_ALPHATESTANDBLEND,n.DEFAULT_AO_ON_ANALYTICAL_LIGHTS=D.b.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"directIntensity",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"emissiveIntensity",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"environmentIntensity",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"specularIntensity",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"disableBumpMap",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"albedoTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"baseWeightTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"baseDiffuseRoughnessTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"ambientTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"ambientTextureStrength",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"ambientTextureImpactOnAnalyticalLights",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"opacityTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"emissiveTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectivityTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"metallicTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"metallic",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"roughness",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"metallicF0Factor",void 0),(0,k.d)([(0,c.p)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"metallicReflectanceColor",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useOnlyMetallicFromMetallicReflectanceTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"metallicReflectanceTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectanceTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"microSurfaceTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"bumpTexture",void 0),(0,k.d)([(0,c.F)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty",null)],n.prototype,"lightmapTexture",void 0),(0,k.d)([(0,c.p)("ambient"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"ambientColor",void 0),(0,k.d)([(0,c.p)("albedo"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"albedoColor",void 0),(0,k.d)([(0,c.Q)("baseWeight"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"baseWeight",void 0),(0,k.d)([(0,c.Q)("baseDiffuseRoughness"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"baseDiffuseRoughness",void 0),(0,k.d)([(0,c.p)("reflectivity"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectivityColor",void 0),(0,k.d)([(0,c.p)("reflection"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"reflectionColor",void 0),(0,k.d)([(0,c.p)("emissive"),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"emissiveColor",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"microSurface",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useLightmapAsShadowmap",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"useAlphaFromAlbedoTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"forceAlphaTest",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],n.prototype,"alphaCutOff",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useSpecularOverAlpha",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useMicroSurfaceFromReflectivityMapAlpha",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useRoughnessFromMetallicTextureAlpha",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useRoughnessFromMetallicTextureGreen",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useMetallnessFromMetallicTextureBlue",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useAmbientOcclusionFromMetallicTextureRed",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useAmbientInGrayScale",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useAutoMicroSurfaceFromReflectivityMap",void 0),(0,k.d)([(0,c.Q)()],n.prototype,"usePhysicalLightFalloff",null),(0,k.d)([(0,c.Q)()],n.prototype,"useGLTFLightFalloff",null),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useRadianceOverAlpha",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useObjectSpaceNormalMap",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useParallax",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useParallaxOcclusion",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"parallaxScaleBias",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsLightsDirty")],n.prototype,"disableLighting",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"forceIrradianceInFragment",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsLightsDirty")],n.prototype,"maxSimultaneousLights",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"invertNormalMapX",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"invertNormalMapY",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"twoSidedLighting",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useAlphaFresnel",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useLinearAlphaFresnel",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"environmentBRDFTexture",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"forceNormalForward",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"enableSpecularAntiAliasing",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useHorizonOcclusion",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"useRadianceOcclusion",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],n.prototype,"unlit",void 0),(0,k.d)([(0,c.Q)(),(0,c.e)("_markAllSubMeshesAsMiscDirty")],n.prototype,"applyDecalMapAfterDetailMap",void 0),(0,U.h)("BABYLON.PBRMaterial",n)},12246:(R,x,H)=>{H.d(x,{b:()=>c});var k=H(2311);class c extends k.d{constructor(R,x,H,c,t){let A=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],D=arguments.length>6&&void 0!==arguments[6]&&arguments[6],U=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3,J=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,V=arguments.length>9?arguments[9]:void 0,n=arguments.length>10?arguments[10]:void 0,g=arguments.length>11?arguments[11]:void 0;super(null,t,!A,D,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,V),this.format=c,this._engine&&(this._engine._caps.textureFloatLinearFiltering||1!==J||(U=1),this._engine._caps.textureHalfFloatLinearFiltering||2!==J||(U=1),this._texture=this._engine.createRawTexture(R,x,H,c,A,D,U,null,J,V??0,n??!1),this.wrapU=k.d.CLAMP_ADDRESSMODE,this.wrapV=k.d.CLAMP_ADDRESSMODE,this._waitingForData=!!g&&!R)}update(R){this._getEngine().updateRawTexture(this._texture,R,this._texture.format,this._texture.invertY,null,this._texture.type,this._texture._useSRGBBuffer),this._waitingForData=!1}clone(){if(!this._texture)return super.clone();const R=new c(null,this.getSize().width,this.getSize().height,this.format,this.va(),this._texture.generateMipMaps,this._invertY,this.samplingMode,this._texture.type,this._texture._creationFlags,this._useSRGBBuffer);return R._texture=this._texture,this._texture.incrementReferences(),R}isReady(){return super.isReady()&&!this._waitingForData}static CreateLuminanceTexture(R,x,H,k){return new c(R,x,H,1,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3)}static CreateLuminanceAlphaTexture(R,x,H,k){return new c(R,x,H,2,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3)}static CreateAlphaTexture(R,x,H,k){return new c(R,x,H,0,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3)}static CreateRGBTexture(R,x,H,k){return new c(R,x,H,4,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]&&arguments[9])}static CreateRGBATexture(R,x,H,k){return new c(R,x,H,5,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,arguments.length>9&&void 0!==arguments[9]&&arguments[9],arguments.length>10&&void 0!==arguments[10]&&arguments[10])}static CreateRGBAStorageTexture(R,x,H,k){return new c(R,x,H,5,k,!(arguments.length>4&&void 0!==arguments[4])||arguments[4],arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:3,arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,1,arguments.length>8&&void 0!==arguments[8]&&arguments[8])}static CreateRTexture(R,x,H,t){let A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=arguments.length>5&&void 0!==arguments[5]&&arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:k.d.TRILINEAR_SAMPLINGMODE;return new c(R,x,H,6,t,A,D,U,arguments.length>7&&void 0!==arguments[7]?arguments[7]:1)}static CreateRStorageTexture(R,x,H,t){let A=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=arguments.length>5&&void 0!==arguments[5]&&arguments[5],U=arguments.length>6&&void 0!==arguments[6]?arguments[6]:k.d.TRILINEAR_SAMPLINGMODE;return new c(R,x,H,6,t,A,D,U,arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,1)}}},12307:(R,x,H)=>{H.d(x,{b:()=>k});class k{constructor(){this._defines={},this._currentRank=32,this._maxRank=-1,this._mesh=null}unBindMesh(){this._mesh=null}addFallback(R,x){this._defines[R]||(R<this._currentRank&&(this._currentRank=R),R>this._maxRank&&(this._maxRank=R),this._defines[R]=new Array),this._defines[R].push(x)}addCPUSkinningFallback(R,x){this._mesh=x,R<this._currentRank&&(this._currentRank=R),R>this._maxRank&&(this._maxRank=R)}get hasMoreFallbacks(){return this._currentRank<=this._maxRank}reduce(R,x){if(this._mesh&&this._mesh.computeBonesUsingShaders&&this._mesh.numBoneInfluencers>0){this._mesh.computeBonesUsingShaders=!1,R=R.replace("#define NUM_BONE_INFLUENCERS "+this._mesh.numBoneInfluencers,"#define NUM_BONE_INFLUENCERS 0"),x._bonesComputationForcedToCPU=!0;const H=this._mesh.va();for(let R=0;R<H.meshes.length;R++){const k=H.meshes[R];if(k.material){if(k.computeBonesUsingShaders&&0!==k.numBoneInfluencers)if(k.material.getEffect()===x)k.computeBonesUsingShaders=!1;else if(k.Ii)for(const R of k.Ii){if(R.effect===x){k.computeBonesUsingShaders=!1;break}}}else!this._mesh.material&&k.computeBonesUsingShaders&&k.numBoneInfluencers>0&&(k.computeBonesUsingShaders=!1)}}else{const x=this._defines[this._currentRank];if(x)for(let H=0;H<x.length;H++)R=R.replace("#define "+x[H],"");this._currentRank++}return R}}},12313:(R,x,H)=>{H.d(x,{c:()=>n});var k=H(643),c=H(837),t=H(647),A=H(12300),D=H(12276),U=H(12281),J=H(841);class V extends D.e{constructor(){super(...arguments),this.DETAIL=!1,this.DETAILDIRECTUV=0,this.DETAIL_NORMALBLENDMETHOD=0}}class n extends U.e{_markAllSubMeshesAsTexturesDirty(){this._enable(this._isEnabled),this._internalMarkAllSubMeshesAsTexturesDirty()}isCompatible(){return!0}constructor(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(R,"DetailMap",140,new V,x),this._texture=null,this.diffuseBlendLevel=1,this.roughnessBlendLevel=1,this.bumpLevel=1,this._normalBlendMethod=c.b.MATERIAL_NORMALBLENDMETHOD_WHITEOUT,this._isEnabled=!1,this.isEnabled=!1,this._internalMarkAllSubMeshesAsTexturesDirty=R._dirtyCallbacks[1]}isReadyForSubMesh(R,x,H){return!this._isEnabled||!(R._areTexturesDirty&&x.texturesEnabled&&H.getCaps().standardDerivatives&&this._texture&&A.e.DetailTextureEnabled&&!this._texture.isReady())}prepareDefines(R,x){if(this._isEnabled){R.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod;const H=x.getEngine();R._areTexturesDirty&&(H.getCaps().standardDerivatives&&this._texture&&A.e.DetailTextureEnabled&&this._isEnabled?((0,J.U)(this._texture,R,"DETAIL"),R.DETAIL_NORMALBLENDMETHOD=this._normalBlendMethod):R.DETAIL=!1)}else R.DETAIL=!1}bindForSubMesh(R,x){if(!this._isEnabled)return;const H=this._material.isFrozen;R.useUbo&&H&&R.isSync||this._texture&&A.e.DetailTextureEnabled&&(R.updateFloat4("vDetailInfos",this._texture.coordinatesIndex,this.diffuseBlendLevel,this.bumpLevel,this.roughnessBlendLevel),(0,J.u)(this._texture,R,"detail")),x.texturesEnabled&&this._texture&&A.e.DetailTextureEnabled&&R.setTexture("detailSampler",this._texture)}hasTexture(R){return this._texture===R}getActiveTextures(R){this._texture&&R.push(this._texture)}getAnimatables(R){this._texture&&this._texture.animations&&this._texture.animations.length>0&&R.push(this._texture)}dispose(R){var x;R&&(null===(x=this._texture)||void 0===x||x.dispose())}getClassName(){return"DetailMapConfiguration"}getSamplers(R){R.push("detailSampler")}getUniforms(){return{ubo:[{name:"vDetailInfos",size:4,type:"vec4"},{name:"detailMatrix",size:16,type:"mat4"}]}}}(0,k.d)([(0,t.F)("detailTexture"),(0,t.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"texture",void 0),(0,k.d)([(0,t.Q)()],n.prototype,"diffuseBlendLevel",void 0),(0,k.d)([(0,t.Q)()],n.prototype,"roughnessBlendLevel",void 0),(0,k.d)([(0,t.Q)()],n.prototype,"bumpLevel",void 0),(0,k.d)([(0,t.Q)(),(0,t.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"normalBlendMethod",void 0),(0,k.d)([(0,t.Q)(),(0,t.e)("_markAllSubMeshesAsTexturesDirty")],n.prototype,"isEnabled",void 0)},12276:(R,x,H)=>{H.d(x,{e:()=>k});class k{constructor(R){if(this._keys=[],this._isDirty=!0,this._areLightsDirty=!0,this._areLightsDisposed=!1,this._areAttributesDirty=!0,this._areTexturesDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._arePrePassDirty=!0,this._areImageProcessingDirty=!0,this._normals=!1,this._uvs=!1,this._needNormals=!1,this._needUVs=!1,this._externalProperties=R,R)for(const x in R)Object.prototype.hasOwnProperty.call(R,x)&&this._setDefaultValue(x)}get isDirty(){return this._isDirty}markAsProcessed(){this._isDirty=!1,this._areAttributesDirty=!1,this._areTexturesDirty=!1,this._areFresnelDirty=!1,this._areLightsDirty=!1,this._areLightsDisposed=!1,this._areMiscDirty=!1,this._arePrePassDirty=!1,this._areImageProcessingDirty=!1}markAsUnprocessed(){this._isDirty=!0}markAllAsDirty(){this._areTexturesDirty=!0,this._areAttributesDirty=!0,this._areLightsDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._arePrePassDirty=!0,this._areImageProcessingDirty=!0,this._isDirty=!0}markAsImageProcessingDirty(){this._areImageProcessingDirty=!0,this._isDirty=!0}markAsLightDirty(){let R=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._areLightsDirty=!0,this._areLightsDisposed=this._areLightsDisposed||R,this._isDirty=!0}markAsAttributesDirty(){this._areAttributesDirty=!0,this._isDirty=!0}markAsTexturesDirty(){this._areTexturesDirty=!0,this._isDirty=!0}markAsFresnelDirty(){this._areFresnelDirty=!0,this._isDirty=!0}markAsMiscDirty(){this._areMiscDirty=!0,this._isDirty=!0}markAsPrePassDirty(){this._arePrePassDirty=!0,this._isDirty=!0}rebuild(){this._keys.length=0;for(const R of Object.keys(this))"_"!==R[0]&&this._keys.push(R);if(this._externalProperties)for(const R in this._externalProperties)-1===this._keys.indexOf(R)&&this._keys.push(R)}isEqual(R){if(this._keys.length!==R._keys.length)return!1;for(let x=0;x<this._keys.length;x++){const H=this._keys[x];if(this[H]!==R[H])return!1}return!0}cloneTo(R){this._keys.length!==R._keys.length&&(R._keys=this._keys.slice(0));for(let x=0;x<this._keys.length;x++){const H=this._keys[x];R[H]=this[H]}}reset(){for(const R of this._keys)this._setDefaultValue(R)}_setDefaultValue(R){var x,H,k,c;const t=(null===(x=this._externalProperties)||void 0===x||null===(H=x[R])||void 0===H?void 0:H.type)??typeof this[R],A=null===(k=this._externalProperties)||void 0===k||null===(c=k[R])||void 0===c?void 0:c.default;switch(t){case"number":this[R]=A??0;break;case"string":this[R]=A??"";break;default:this[R]=A??!1}}toString(){let R="";for(let x=0;x<this._keys.length;x++){const H=this._keys[x],k=this[H];switch(typeof k){case"number":case"string":R+="#define "+H+" "+k+"\n";break;default:k&&(R+="#define "+H+"\n")}}return R}}},12300:(R,x,H)=>{H.d(x,{e:()=>c});var k=H(555);class c{static get DiffuseTextureEnabled(){return this._DiffuseTextureEnabled}static set DiffuseTextureEnabled(R){this._DiffuseTextureEnabled!==R&&(this._DiffuseTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get BaseWeightTextureEnabled(){return this._BaseWeightTextureEnabled}static set BaseWeightTextureEnabled(R){this._BaseWeightTextureEnabled!==R&&(this._BaseWeightTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get BaseDiffuseRoughnessTextureEnabled(){return this._BaseDiffuseRoughnessTextureEnabled}static set BaseDiffuseRoughnessTextureEnabled(R){this._BaseDiffuseRoughnessTextureEnabled!==R&&(this._BaseDiffuseRoughnessTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get DetailTextureEnabled(){return this._DetailTextureEnabled}static set DetailTextureEnabled(R){this._DetailTextureEnabled!==R&&(this._DetailTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get DecalMapEnabled(){return this._DecalMapEnabled}static set DecalMapEnabled(R){this._DecalMapEnabled!==R&&(this._DecalMapEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get AmbientTextureEnabled(){return this._AmbientTextureEnabled}static set AmbientTextureEnabled(R){this._AmbientTextureEnabled!==R&&(this._AmbientTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get OpacityTextureEnabled(){return this._OpacityTextureEnabled}static set OpacityTextureEnabled(R){this._OpacityTextureEnabled!==R&&(this._OpacityTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get ReflectionTextureEnabled(){return this._ReflectionTextureEnabled}static set ReflectionTextureEnabled(R){this._ReflectionTextureEnabled!==R&&(this._ReflectionTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get EmissiveTextureEnabled(){return this._EmissiveTextureEnabled}static set EmissiveTextureEnabled(R){this._EmissiveTextureEnabled!==R&&(this._EmissiveTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get SpecularTextureEnabled(){return this._SpecularTextureEnabled}static set SpecularTextureEnabled(R){this._SpecularTextureEnabled!==R&&(this._SpecularTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get BumpTextureEnabled(){return this._BumpTextureEnabled}static set BumpTextureEnabled(R){this._BumpTextureEnabled!==R&&(this._BumpTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get LightmapTextureEnabled(){return this._LightmapTextureEnabled}static set LightmapTextureEnabled(R){this._LightmapTextureEnabled!==R&&(this._LightmapTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get RefractionTextureEnabled(){return this._RefractionTextureEnabled}static set RefractionTextureEnabled(R){this._RefractionTextureEnabled!==R&&(this._RefractionTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get ColorGradingTextureEnabled(){return this._ColorGradingTextureEnabled}static set ColorGradingTextureEnabled(R){this._ColorGradingTextureEnabled!==R&&(this._ColorGradingTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get FresnelEnabled(){return this._FresnelEnabled}static set FresnelEnabled(R){this._FresnelEnabled!==R&&(this._FresnelEnabled=R,k.d.MarkAllMaterialsAsDirty(4))}static get ClearCoatTextureEnabled(){return this._ClearCoatTextureEnabled}static set ClearCoatTextureEnabled(R){this._ClearCoatTextureEnabled!==R&&(this._ClearCoatTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get ClearCoatBumpTextureEnabled(){return this._ClearCoatBumpTextureEnabled}static set ClearCoatBumpTextureEnabled(R){this._ClearCoatBumpTextureEnabled!==R&&(this._ClearCoatBumpTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get ClearCoatTintTextureEnabled(){return this._ClearCoatTintTextureEnabled}static set ClearCoatTintTextureEnabled(R){this._ClearCoatTintTextureEnabled!==R&&(this._ClearCoatTintTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get SheenTextureEnabled(){return this._SheenTextureEnabled}static set SheenTextureEnabled(R){this._SheenTextureEnabled!==R&&(this._SheenTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get AnisotropicTextureEnabled(){return this._AnisotropicTextureEnabled}static set AnisotropicTextureEnabled(R){this._AnisotropicTextureEnabled!==R&&(this._AnisotropicTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get ThicknessTextureEnabled(){return this._ThicknessTextureEnabled}static set ThicknessTextureEnabled(R){this._ThicknessTextureEnabled!==R&&(this._ThicknessTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get RefractionIntensityTextureEnabled(){return this._ThicknessTextureEnabled}static set RefractionIntensityTextureEnabled(R){this._RefractionIntensityTextureEnabled!==R&&(this._RefractionIntensityTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get TranslucencyIntensityTextureEnabled(){return this._TranslucencyIntensityTextureEnabled}static set TranslucencyIntensityTextureEnabled(R){this._TranslucencyIntensityTextureEnabled!==R&&(this._TranslucencyIntensityTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get TranslucencyColorTextureEnabled(){return this._TranslucencyColorTextureEnabled}static set TranslucencyColorTextureEnabled(R){this._TranslucencyColorTextureEnabled!==R&&(this._TranslucencyColorTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}static get IridescenceTextureEnabled(){return this._IridescenceTextureEnabled}static set IridescenceTextureEnabled(R){this._IridescenceTextureEnabled!==R&&(this._IridescenceTextureEnabled=R,k.d.MarkAllMaterialsAsDirty(1))}}c._DiffuseTextureEnabled=!0,c._BaseWeightTextureEnabled=!0,c._BaseDiffuseRoughnessTextureEnabled=!0,c._DetailTextureEnabled=!0,c._DecalMapEnabled=!0,c._AmbientTextureEnabled=!0,c._OpacityTextureEnabled=!0,c._ReflectionTextureEnabled=!0,c._EmissiveTextureEnabled=!0,c._SpecularTextureEnabled=!0,c._BumpTextureEnabled=!0,c._LightmapTextureEnabled=!0,c._RefractionTextureEnabled=!0,c._ColorGradingTextureEnabled=!0,c._FresnelEnabled=!0,c._ClearCoatTextureEnabled=!0,c._ClearCoatBumpTextureEnabled=!0,c._ClearCoatTintTextureEnabled=!0,c._SheenTextureEnabled=!0,c._AnisotropicTextureEnabled=!0,c._ThicknessTextureEnabled=!0,c._RefractionIntensityTextureEnabled=!0,c._TranslucencyIntensityTextureEnabled=!0,c._TranslucencyColorTextureEnabled=!0,c._IridescenceTextureEnabled=!0},12322:(R,x,H)=>{H.d(x,{d:()=>t});var k,c=H(661);!function(R){R[R.Zero=0]="Zero",R[R.One=1]="One",R[R.MaxViewZ=2]="MaxViewZ"}(k||(k={}));class t{static CreateConfiguration(R){return t._Configurations[R]={defines:{},previousWorldMatrices:{},previousViewProjection:c.e.Zero(),currentViewProjection:c.e.Zero(),previousBones:{},lastUpdateFrameId:-1,excludedSkinnedMesh:[],reverseCulling:!1},t._Configurations[R]}static DeleteConfiguration(R){delete t._Configurations[R]}static GetConfiguration(R){return t._Configurations[R]}static AddUniformsAndSamplers(R,x){R.push("previousWorld","previousViewProjection","mPreviousBones")}static MarkAsDirty(R,x){for(const H of x)if(H.Ii)for(const x of H.Ii)x._removeDrawWrapper(R)}static PrepareDefines(R,x,H){if(!H._arePrePassDirty)return;const k=t._Configurations[R];if(!k)return;H.PREPASS=!0,H.PREPASS_COLOR=!1,H.PREPASS_COLOR_INDEX=-1;let c=0;for(let A=0;A<t.GeometryTextureDescriptions.length;A++){const R=t.GeometryTextureDescriptions[A],x=R.define,D=R.defineIndex,U=k.defines[D];void 0!==U?(H[x]=!0,H[D]=U,c++):(H[x]=!1,delete H[D])}H.SCENE_MRT_COUNT=c,H.BONES_VELOCITY_ENABLED=x.useBones&&x.computeBonesUsingShaders&&x.skeleton&&!x.skeleton.isUsingTextureForMatrices&&-1===k.excludedSkinnedMesh.indexOf(x)}static Bind(R,x,H,k,c){const A=t._Configurations[R];if(!A)return;const D=H.va(),U=D.getEngine();if(A.reverseCulling&&U.setStateCullFaceType(D._mirroredCameraPosition?c.cullBackFaces:!c.cullBackFaces),(void 0!==A.defines.PREPASS_VELOCITY_INDEX||void 0!==A.defines.PREPASS_VELOCITY_LINEAR_INDEX)&&(A.previousWorldMatrices[H.uniqueId]||(A.previousWorldMatrices[H.uniqueId]=k.clone()),A.previousViewProjection||(A.previousViewProjection=D.getTransformMatrix().clone(),A.currentViewProjection=D.getTransformMatrix().clone()),A.currentViewProjection.updateFlag!==D.getTransformMatrix().updateFlag?(A.lastUpdateFrameId=U.frameId,A.previousViewProjection.p(A.currentViewProjection),A.currentViewProjection.p(D.getTransformMatrix())):A.lastUpdateFrameId!==U.frameId&&(A.lastUpdateFrameId=U.frameId,A.previousViewProjection.p(A.currentViewProjection)),x.setMatrix("previousWorld",A.previousWorldMatrices[H.uniqueId]),x.setMatrix("previousViewProjection",A.previousViewProjection),A.previousWorldMatrices[H.uniqueId]=k.clone(),H.useBones&&H.computeBonesUsingShaders&&H.skeleton)){const R=H.skeleton;if(!R.isUsingTextureForMatrices||-1===x.getUniformIndex("boneTextureWidth")){const k=R.getTransformMatrices(H);k&&(A.previousBones[H.uniqueId]||(A.previousBones[H.uniqueId]=k.slice()),x.setMatrices("mPreviousBones",A.previousBones[H.uniqueId]),A.previousBones[H.uniqueId].set(k))}}}}t.GeometryTextureDescriptions=[{type:0,name:"Irradiance",clearType:0,define:"PREPASS_IRRADIANCE",defineIndex:"PREPASS_IRRADIANCE_INDEX"},{type:1,name:"WorldPosition",clearType:0,define:"PREPASS_POSITION",defineIndex:"PREPASS_POSITION_INDEX"},{type:2,name:"Velocity",clearType:0,define:"PREPASS_VELOCITY",defineIndex:"PREPASS_VELOCITY_INDEX"},{type:3,name:"Reflectivity",clearType:0,define:"PREPASS_REFLECTIVITY",defineIndex:"PREPASS_REFLECTIVITY_INDEX"},{type:5,name:"ViewDepth",clearType:2,define:"PREPASS_DEPTH",defineIndex:"PREPASS_DEPTH_INDEX"},{type:6,name:"ViewNormal",clearType:0,define:"PREPASS_NORMAL",defineIndex:"PREPASS_NORMAL_INDEX"},{type:7,name:"AlbedoSqrt",clearType:0,define:"PREPASS_ALBEDO_SQRT",defineIndex:"PREPASS_ALBEDO_SQRT_INDEX"},{type:8,name:"WorldNormal",clearType:0,define:"PREPASS_WORLD_NORMAL",defineIndex:"PREPASS_WORLD_NORMAL_INDEX"},{type:9,name:"LocalPosition",clearType:0,define:"PREPASS_LOCAL_POSITION",defineIndex:"PREPASS_LOCAL_POSITION_INDEX"},{type:10,name:"ScreenDepth",clearType:1,define:"PREPASS_SCREENSPACE_DEPTH",defineIndex:"PREPASS_SCREENSPACE_DEPTH_INDEX"},{type:11,name:"LinearVelocity",clearType:0,define:"PREPASS_VELOCITY_LINEAR",defineIndex:"PREPASS_VELOCITY_LINEAR_INDEX"},{type:12,name:"Albedo",clearType:0,define:"PREPASS_ALBEDO",defineIndex:"PREPASS_ALBEDO_INDEX"},{type:13,name:"NormalizedViewDepth",clearType:1,define:"PREPASS_NORMALIZED_VIEW_DEPTH",defineIndex:"PREPASS_NORMALIZED_VIEW_DEPTH_INDEX"}],t._Configurations={}},12281:(R,x,H)=>{H.d(x,{e:()=>L});var k=H(643),c=H(647),t=H(837),A=H(513),D=H(535),U=H(565);const J=new RegExp("^([gimus]+)!");class V{constructor(R){this._plugins=[],this._activePlugins=[],this._activePluginsForExtraEvents=[],this._material=R,this._scene=R.va(),this._engine=this._scene.getEngine()}_addPlugin(R){for(let k=0;k<this._plugins.length;++k)if(this._plugins[k].name===R.name)return!1;if(this._material._uniformBufferLayoutBuilt&&(this._material.resetDrawCache(),this._material._createUniformBuffer()),!R.isCompatible(this._material.shaderLanguage))throw`The plugin "${R.name}" can't be added to the material "${this._material.name}" because the plugin is not compatible with the shader language of the material.`;const x=R.getClassName();V._MaterialPluginClassToMainDefine[x]||(V._MaterialPluginClassToMainDefine[x]="MATERIALPLUGIN_"+ ++V._MaterialPluginCounter),this._material._callbackPluginEventGeneric=(R,x)=>this._handlePluginEvent(R,x),this._plugins.push(R),this._plugins.sort(((R,x)=>R.priority-x.priority)),this._codeInjectionPoints={};const H={};H[V._MaterialPluginClassToMainDefine[x]]={type:"boolean",default:!0};for(const k of this._plugins)k.collectDefines(H),this._collectPointNames("vertex",k.getCustomCode("vertex",this._material.shaderLanguage)),this._collectPointNames("fragment",k.getCustomCode("fragment",this._material.shaderLanguage));return this._defineNamesFromPlugins=H,!0}_activatePlugin(R){-1===this._activePlugins.indexOf(R)&&(this._activePlugins.push(R),this._activePlugins.sort(((R,x)=>R.priority-x.priority)),this._material._callbackPluginEventIsReadyForSubMesh=this._handlePluginEventIsReadyForSubMesh.bind(this),this._material._callbackPluginEventPrepareDefinesBeforeAttributes=this._handlePluginEventPrepareDefinesBeforeAttributes.bind(this),this._material._callbackPluginEventPrepareDefines=this._handlePluginEventPrepareDefines.bind(this),this._material._callbackPluginEventBindForSubMesh=this._handlePluginEventBindForSubMesh.bind(this),R.registerForExtraEvents&&(this._activePluginsForExtraEvents.push(R),this._activePluginsForExtraEvents.sort(((R,x)=>R.priority-x.priority)),this._material._callbackPluginEventHasRenderTargetTextures=this._handlePluginEventHasRenderTargetTextures.bind(this),this._material._callbackPluginEventFillRenderTargetTextures=this._handlePluginEventFillRenderTargetTextures.bind(this),this._material._callbackPluginEventHardBindForSubMesh=this._handlePluginEventHardBindForSubMesh.bind(this)))}getPlugin(R){for(let x=0;x<this._plugins.length;++x)if(this._plugins[x].name===R)return this._plugins[x];return null}_handlePluginEventIsReadyForSubMesh(R){let x=!0;for(const H of this._activePlugins)x=x&&H.isReadyForSubMesh(R.defines,this._scene,this._engine,R.subMesh);R.isReadyForSubMesh=x}_handlePluginEventPrepareDefinesBeforeAttributes(R){for(const x of this._activePlugins)x.prepareDefinesBeforeAttributes(R.defines,this._scene,R.mesh)}_handlePluginEventPrepareDefines(R){for(const x of this._activePlugins)x.prepareDefines(R.defines,this._scene,R.mesh)}_handlePluginEventHardBindForSubMesh(R){for(const x of this._activePluginsForExtraEvents)x.hardBindForSubMesh(this._material._uniformBuffer,this._scene,this._engine,R.subMesh)}_handlePluginEventBindForSubMesh(R){for(const x of this._activePlugins)x.bindForSubMesh(this._material._uniformBuffer,this._scene,this._engine,R.subMesh)}_handlePluginEventHasRenderTargetTextures(R){let x=!1;for(const H of this._activePluginsForExtraEvents)if(x=H.hasRenderTargetTextures(),x)break;R.hasRenderTargetTextures=x}_handlePluginEventFillRenderTargetTextures(R){for(const x of this._activePluginsForExtraEvents)x.fillRenderTargetTextures(R.renderTargets)}_handlePluginEvent(R,x){switch(R){case 512:{const R=x;for(const x of this._activePlugins)x.getActiveTextures(R.activeTextures);break}case 256:{const R=x;for(const x of this._activePlugins)x.getAnimatables(R.animatables);break}case 1024:{const R=x;let H=!1;for(const x of this._activePlugins)if(H=x.hasTexture(R.texture),H)break;R.hasTexture=H;break}case 2:{const R=x;for(const x of this._plugins)x.dispose(R.forceDisposeTextures);break}case 4:x.defineNames=this._defineNamesFromPlugins;break;case 128:{const R=x;for(const x of this._activePlugins)R.fallbackRank=x.addFallbacks(R.defines,R.fallbacks,R.fallbackRank),x.getAttributes(R.attributes,this._scene,R.mesh);this._uniformList.length>0&&R.uniforms.push(...this._uniformList),this._samplerList.length>0&&R.samplers.push(...this._samplerList),this._uboList.length>0&&R.uniformBuffersNames.push(...this._uboList),R.customCode=this._injectCustomCode(R,R.customCode);break}case 8:{const R=x;this._uboDeclaration="",this._vertexDeclaration="",this._fragmentDeclaration="",this._uniformList=[],this._samplerList=[],this._uboList=[];const H=1===this._material.shaderLanguage;for(const x of this._plugins){const k=x.getUniforms(this._material.shaderLanguage);if(k){if(k.ubo)for(const x of k.ubo){if(x.size&&x.type){const k=x.arraySize??0;if(R.ubo.addUniform(x.name,x.size,k),H){let R;switch(x.type){case"mat4":R="mat4x4f";break;case"float":R="f32";break;default:R=`${x.type}f`}this._uboDeclaration+=k>0?`uniform ${x.name}: array<${R}, ${k}>;\n`:`uniform ${x.name}: ${R};\n`}else this._uboDeclaration+=`${x.type} ${x.name}${k>0?`[${k}]`:""};\n`}this._uniformList.push(x.name)}k.vertex&&(this._vertexDeclaration+=k.vertex+"\n"),k.fragment&&(this._fragmentDeclaration+=k.fragment+"\n")}x.getSamplers(this._samplerList),x.getUniformBuffersNames(this._uboList)}break}}}_collectPointNames(R,x){if(x)for(const H in x)this._codeInjectionPoints[R]||(this._codeInjectionPoints[R]={}),this._codeInjectionPoints[R][H]=!0}_injectCustomCode(R,x){return(H,k)=>{var c;x&&(k=x(H,k)),this._uboDeclaration&&(k=k.replace("#define ADDITIONAL_UBO_DECLARATION",this._uboDeclaration)),this._vertexDeclaration&&(k=k.replace("#define ADDITIONAL_VERTEX_DECLARATION",this._vertexDeclaration)),this._fragmentDeclaration&&(k=k.replace("#define ADDITIONAL_FRAGMENT_DECLARATION",this._fragmentDeclaration));const t=null===(c=this._codeInjectionPoints)||void 0===c?void 0:c[H];if(!t)return k;let A=null;for(let x in t){let c="";for(const k of this._activePlugins){var V;let t=null===(V=k.getCustomCode(H,this._material.shaderLanguage))||void 0===V?void 0:V[x];if(t){if(k.resolveIncludes){if(null===A){const x=0;A={defines:[],indexParameters:R.indexParameters,isFragment:!1,shouldUseHighPrecisionShader:this._engine._shouldUseHighPrecisionShader,processor:void 0,supportsUniformBuffers:this._engine.supportsUniformBuffers,shadersRepository:U.e.GetShadersRepository(x),includesShadersStore:U.e.GetIncludesShadersStore(x),version:void 0,platformName:this._engine.shaderPlatformName,processingContext:void 0,isNDCHalfZRange:this._engine.isNDCHalfZRange,useReverseDepthBuffer:this._engine.useReverseDepthBuffer,processCodeAfterIncludes:void 0}}A.isFragment="fragment"===H,(0,D.j)(t,A,(R=>t=R))}c+=t+"\n"}}if(c.length>0)if("!"===x.charAt(0)){x=x.substring(1);let R="g";if("!"===x.charAt(0))R="",x=x.substring(1);else{const H=J.exec(x);H&&H.length>=2&&(R=H[1],x=x.substring(R.length+1))}R.indexOf("g")<0&&(R+="g");const H=k,t=new RegExp(x,R);let A=t.exec(H);for(;null!==A;){let R=c;for(let x=0;x<A.length;++x)R=R.replace("$"+x,A[x]);k=k.replace(A[0],R),A=t.exec(H)}}else{const R="#define "+x;k=k.replace(R,"\n"+c+"\n"+R)}}return k}}}V._MaterialPluginClassToMainDefine={},V._MaterialPluginCounter=0,A.c.OnEnginesDisposedObservable.add((()=>{i()}));const n=[];let g=!1,I=null;function i(){n.length=0,g=!1,t.b.OnEventObservable.remove(I),I=null}var q=H(687),S=H(610);class L{isCompatible(R){return 0===R}_enable(R){R&&this._pluginManager._activatePlugin(this)}constructor(R,x,H,k){let c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],t=arguments.length>5&&void 0!==arguments[5]&&arguments[5],A=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.priority=500,this.resolveIncludes=!1,this.registerForExtraEvents=!1,this.doNotSerialize=!1,this._material=R,this.name=x,this.priority=H,this.resolveIncludes=A,R.pluginManager||(R.pluginManager=new V(R),R.Vi.add((()=>{R.pluginManager=void 0}))),this._pluginDefineNames=k,this._pluginManager=R.pluginManager,c&&this._pluginManager._addPlugin(this),t&&this._enable(!0),this.markAllDefinesAsDirty=R._dirtyCallbacks[127]}getClassName(){return"MaterialPluginBase"}isReadyForSubMesh(R,x,H,k){return!0}hardBindForSubMesh(R,x,H,k){}bindForSubMesh(R,x,H,k){}dispose(R){}getCustomCode(R){return null}collectDefines(R){if(this._pluginDefineNames)for(const x of Object.keys(this._pluginDefineNames)){if("_"===x[0])continue;const H=typeof this._pluginDefineNames[x];R[x]={type:"number"===H?"number":"string"===H?"string":"boolean"===H?"boolean":"object",default:this._pluginDefineNames[x]}}}prepareDefinesBeforeAttributes(R,x,H){}prepareDefines(R,x,H){}hasTexture(R){return!1}hasRenderTargetTextures(){return!1}fillRenderTargetTextures(R){}getActiveTextures(R){}getAnimatables(R){}addFallbacks(R,x,H){return H}getSamplers(R){}getAttributes(R,x,H){}getUniformBuffersNames(R){}getUniforms(){return{}}copyTo(R){q.d.Clone((()=>R),this)}serialize(){return q.d.Serialize(this)}parse(R,x,H){q.d.Parse((()=>this),R,x,H)}}(0,k.d)([(0,c.Q)()],L.prototype,"name",void 0),(0,k.d)([(0,c.Q)()],L.prototype,"priority",void 0),(0,k.d)([(0,c.Q)()],L.prototype,"resolveIncludes",void 0),(0,k.d)([(0,c.Q)()],L.prototype,"registerForExtraEvents",void 0),(0,S.h)("BABYLON.MaterialPluginBase",L)},12286:(R,x,H)=>{H.d(x,{e:()=>k});class k{constructor(){this.previousWorldMatrices={},this.previousBones={}}static AddUniforms(R){R.push("previousWorld","previousViewProjection","mPreviousBones")}static AddSamplers(R){}bindForSubMesh(R,x,H,k,c){if(x.prePassRenderer&&x.prePassRenderer.enabled&&x.prePassRenderer.currentRTisSceneRT&&(-1!==x.prePassRenderer.getIndex(2)||-1!==x.prePassRenderer.getIndex(11))){this.previousWorldMatrices[H.uniqueId]||(this.previousWorldMatrices[H.uniqueId]=k.clone()),this.previousViewProjection||(this.previousViewProjection=x.getTransformMatrix().clone(),this.currentViewProjection=x.getTransformMatrix().clone());const c=x.getEngine();this.currentViewProjection.updateFlag!==x.getTransformMatrix().updateFlag?(this._lastUpdateFrameId=c.frameId,this.previousViewProjection.p(this.currentViewProjection),this.currentViewProjection.p(x.getTransformMatrix())):this._lastUpdateFrameId!==c.frameId&&(this._lastUpdateFrameId=c.frameId,this.previousViewProjection.p(this.currentViewProjection)),R.setMatrix("previousWorld",this.previousWorldMatrices[H.uniqueId]),R.setMatrix("previousViewProjection",this.previousViewProjection),this.previousWorldMatrices[H.uniqueId]=k.clone()}}}},12292:(R,x,H)=>{H.d(x,{e:()=>t});var k=H(661),c=H(837);class t extends c.b{constructor(R,x){let H=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(R,x,void 0,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),this._normalMatrix=new k.e,this._storeEffectOnSubMeshes=H}getEffect(){return this._storeEffectOnSubMeshes?this._activeEffect:super.getEffect()}isReady(R,x){return!!R&&(!this._storeEffectOnSubMeshes||(!R.Ii||0===R.Ii.length||this.isReadyForSubMesh(R,R.Ii[0],x)))}_isReadyForSubMesh(R){const x=R.materialDefines;return!(this.checkReadyOnEveryCall||!R.effect||!x||x._renderId!==this.va().getRenderId())}bindOnlyWorldMatrix(R){this._activeEffect.setMatrix("world",R)}bindOnlyNormalMatrix(R){this._activeEffect.setMatrix("normalMatrix",R)}bind(R,x){x&&this.bindForSubMesh(R,x,x.Ii[0])}_afterBind(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,H=arguments.length>2?arguments[2]:void 0;super._afterBind(R,x,H),this.va()._cachedEffect=x,H?H._drawWrapper._forceRebindOnNextCall=!1:this._drawWrapper._forceRebindOnNextCall=!1}_mustRebind(R,x,H){let k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return H._drawWrapper._forceRebindOnNextCall||R.isCachedMaterialInvalid(this,x,k)}dispose(R,x,H){this._activeEffect=void 0,super.dispose(R,x,H)}}},12364:(R,x,H)=>{H.d(x,{c:()=>S});var k=H(687),c=H(2445),t=H(661),A=H(724),D=H(2311),U=H(610),J=H(12307),V=H(506),n=H(12292),g=H(513),I=H(849),i=H(841);const q={effect:null,subMesh:null};class S extends n.e{constructor(R,x,H){let k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(R,x,!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),this._textures={},this._textureArrays={},this._externalTextures={},this._floats={},this._ints={},this._uints={},this._floatsArrays={},this._colors3={},this._colors3Arrays={},this._colors4={},this._colors4Arrays={},this._vectors2={},this._vectors3={},this._vectors4={},this._quaternions={},this._quaternionsArrays={},this._matrices={},this._matrixArrays={},this._matrices3x3={},this._matrices2x2={},this._vectors2Arrays={},this._vectors3Arrays={},this._vectors4Arrays={},this._uniformBuffers={},this._textureSamplers={},this._storageBuffers={},this._cachedWorldViewMatrix=new t.e,this._cachedWorldViewProjectionMatrix=new t.e,this._multiview=!1,this._materialHelperNeedsPreviousMatrices=!1,this._shaderPath=H,this._options={needAlphaBlending:!1,needAlphaTesting:!1,attributes:["position","dj","uv"],uniforms:["worldViewProjection"],uniformBuffers:[],samplers:[],externalTextures:[],samplerObjects:[],storageBuffers:[],defines:[],useClipPlane:!1,...k}}get shaderPath(){return this._shaderPath}set shaderPath(R){this._shaderPath=R}get options(){return this._options}get isMultiview(){return this._multiview}getClassName(){return"ShaderMaterial"}needAlphaBlending(){return this.alpha<1||this._options.needAlphaBlending}needAlphaTesting(){return this._options.needAlphaTesting}_checkUniform(R){-1===this._options.uniforms.indexOf(R)&&this._options.uniforms.push(R)}setTexture(R,x){return-1===this._options.samplers.indexOf(R)&&this._options.samplers.push(R),this._textures[R]=x,this}removeTexture(R){delete this._textures[R]}setTextureArray(R,x){return-1===this._options.samplers.indexOf(R)&&this._options.samplers.push(R),this._checkUniform(R),this._textureArrays[R]=x,this}setExternalTexture(R,x){return-1===this._options.externalTextures.indexOf(R)&&this._options.externalTextures.push(R),this._externalTextures[R]=x,this}setFloat(R,x){return this._checkUniform(R),this._floats[R]=x,this}setInt(R,x){return this._checkUniform(R),this._ints[R]=x,this}setUInt(R,x){return this._checkUniform(R),this._uints[R]=x,this}setFloats(R,x){return this._checkUniform(R),this._floatsArrays[R]=x,this}setColor3(R,x){return this._checkUniform(R),this._colors3[R]=x,this}setColor3Array(R,x){return this._checkUniform(R),this._colors3Arrays[R]=x.reduce(((R,x)=>(R.push(x.r,x.g,x.b),R)),[]),this}setColor4(R,x){return this._checkUniform(R),this._colors4[R]=x,this}setColor4Array(R,x){return this._checkUniform(R),this._colors4Arrays[R]=x.reduce(((R,x)=>(R.push(x.r,x.g,x.b,x.a),R)),[]),this}setVector2(R,x){return this._checkUniform(R),this._vectors2[R]=x,this}setVector3(R,x){return this._checkUniform(R),this._vectors3[R]=x,this}setVector4(R,x){return this._checkUniform(R),this._vectors4[R]=x,this}setQuaternion(R,x){return this._checkUniform(R),this._quaternions[R]=x,this}setQuaternionArray(R,x){return this._checkUniform(R),this._quaternionsArrays[R]=x.reduce(((R,x)=>(x.toArray(R,R.length),R)),[]),this}setMatrix(R,x){return this._checkUniform(R),this._matrices[R]=x,this}setMatrices(R,x){this._checkUniform(R);const H=new Float32Array(16*x.length);for(let k=0;k<x.length;k++){x[k].copyToArray(H,16*k)}return this._matrixArrays[R]=H,this}setMatrix3x3(R,x){return this._checkUniform(R),this._matrices3x3[R]=x,this}setMatrix2x2(R,x){return this._checkUniform(R),this._matrices2x2[R]=x,this}setArray2(R,x){return this._checkUniform(R),this._vectors2Arrays[R]=x,this}setArray3(R,x){return this._checkUniform(R),this._vectors3Arrays[R]=x,this}setArray4(R,x){return this._checkUniform(R),this._vectors4Arrays[R]=x,this}setUniformBuffer(R,x){return-1===this._options.uniformBuffers.indexOf(R)&&this._options.uniformBuffers.push(R),this._uniformBuffers[R]=x,this}setTextureSampler(R,x){return-1===this._options.samplerObjects.indexOf(R)&&this._options.samplerObjects.push(R),this._textureSamplers[R]=x,this}setStorageBuffer(R,x){return-1===this._options.storageBuffers.indexOf(R)&&this._options.storageBuffers.push(R),this._storageBuffers[R]=x,this}setDefine(R,x){const H=R.trimEnd()+" ",k=this.options.defines.findIndex((x=>x===R||x.startsWith(H)));return k>=0&&this.options.defines.splice(k,1),("boolean"!==typeof x||x)&&this.options.defines.push(H+x),this}isReadyForSubMesh(R,x,H){return this.isReady(R,H,x)}isReady(R,x,H){var k;const t=H&&this._storeEffectOnSubMeshes;if(this.isFrozen){const R=t?H._drawWrapper:this._drawWrapper;if(R.effect&&R._wasPreviouslyReady&&R._wasPreviouslyUsingInstances===x)return!0}const D=this.va(),U=D.getEngine(),V=[],n=[];let g=null,S=this._shaderPath,L=this._options.uniforms,b=this._options.uniformBuffers,C=this._options.samplers;U.getCaps().multiview&&D.activeCamera&&D.activeCamera.outputRenderTarget&&D.activeCamera.outputRenderTarget.getViewCount()>1&&(this._multiview=!0,V.push("#define MULTIVIEW"),-1!==L.indexOf("viewProjection")&&-1===L.indexOf("viewProjectionR")&&L.push("viewProjectionR"));for(let c=0;c<this._options.defines.length;c++){const R=0===this._options.defines[c].indexOf("#define")?this._options.defines[c]:`#define ${this._options.defines[c]}`;V.push(R)}for(let c=0;c<this._options.attributes.length;c++)n.push(this._options.attributes[c]);if(R&&R.isVerticesDataPresent(A.g.ColorKind)&&(-1===n.indexOf(A.g.ColorKind)&&n.push(A.g.ColorKind),V.push("#define VERTEXCOLOR")),x&&(V.push("#define INSTANCES"),(0,i.kb)(n,this._materialHelperNeedsPreviousMatrices),null!==R&&void 0!==R&&R.hasThinInstances&&(V.push("#define THIN_INSTANCES"),R&&R.isVerticesDataPresent(A.g.ColorInstanceKind)&&(n.push(A.g.ColorInstanceKind),V.push("#define INSTANCESCOLOR")))),R&&R.useBones&&R.computeBonesUsingShaders&&R.skeleton){n.push(A.g.MatricesIndicesKind),n.push(A.g.MatricesWeightsKind),R.numBoneInfluencers>4&&(n.push(A.g.MatricesIndicesExtraKind),n.push(A.g.MatricesWeightsExtraKind));const x=R.skeleton;V.push("#define NUM_BONE_INFLUENCERS "+R.numBoneInfluencers),g=new J.b,g.addCPUSkinningFallback(0,R),x.isUsingTextureForMatrices?(V.push("#define BONETEXTURE"),-1===L.indexOf("boneTextureWidth")&&L.push("boneTextureWidth"),-1===this._options.samplers.indexOf("boneSampler")&&this._options.samplers.push("boneSampler")):(V.push("#define BonesPerMesh "+(x.bones.length+1)),-1===L.indexOf("mBones")&&L.push("mBones"))}else V.push("#define NUM_BONE_INFLUENCERS 0");let F=0;const d=R?R.morphTargetManager:null;if(d){const x=-1!==V.indexOf("#define UV1"),H=-1!==V.indexOf("#define UV2"),k=-1!==V.indexOf("#define TANGENT"),c=-1!==V.indexOf("#define NORMAL"),t=-1!==V.indexOf("#define VERTEXCOLOR");F=(0,i.L)(d,V,n,R,!0,c,k,x,H,t),d.isUsingTextureForTargets&&(-1===L.indexOf("morphTargetTextureIndices")&&L.push("morphTargetTextureIndices"),-1===this._options.samplers.indexOf("morphTargets")&&this._options.samplers.push("morphTargets")),F>0&&(L=L.slice(),L.push("morphTargetInfluences"),L.push("morphTargetCount"),L.push("morphTargetTextureInfo"),L.push("morphTargetTextureIndices"))}else V.push("#define NUM_MORPH_INFLUENCERS 0");if(R){const x=R.bakedVertexAnimationManager;x&&x.isEnabled&&(V.push("#define BAKED_VERTEX_ANIMATION_TEXTURE"),-1===L.indexOf("bakedVertexAnimationSettings")&&L.push("bakedVertexAnimationSettings"),-1===L.indexOf("bakedVertexAnimationTextureSizeInverted")&&L.push("bakedVertexAnimationTextureSizeInverted"),-1===L.indexOf("bakedVertexAnimationTime")&&L.push("bakedVertexAnimationTime"),-1===this._options.samplers.indexOf("bakedVertexAnimationTexture")&&this._options.samplers.push("bakedVertexAnimationTexture")),(0,i.z)(n,R,V)}for(const c in this._textures)if(!this._textures[c].isReady())return!1;R&&this.needAlphaTestingForMesh(R)&&V.push("#define ALPHATEST"),!1!==this._options.useClipPlane&&((0,I.e)(L),(0,I.k)(this,D,V)),D.fogEnabled&&null!==R&&void 0!==R&&R.applyFog&&D.fogMode!==c.e.FOGMODE_NONE&&(V.push("#define FOG"),-1===L.indexOf("view")&&L.push("view"),-1===L.indexOf("vFogInfos")&&L.push("vFogInfos"),-1===L.indexOf("vFogColor")&&L.push("vFogColor")),this._useLogarithmicDepth&&(V.push("#define LOGARITHMICDEPTH"),-1===L.indexOf("logarithmicDepthConstant")&&L.push("logarithmicDepthConstant")),this.customShaderNameResolve&&(L=L.slice(),b=b.slice(),C=C.slice(),S=this.customShaderNameResolve(this.name,L,b,C,V,n));const P=t?H._getDrawWrapper(void 0,!0):this._drawWrapper,a=(null===P||void 0===P?void 0:P.effect)??null,X=(null===P||void 0===P?void 0:P.defines)??null,M=V.join("\n");let B=a;return X!==M&&(B=U.createEffect(S,{attributes:n,uniformsNames:L,uniformBuffersNames:b,samplers:C,defines:M,fallbacks:g,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousMorphTargets:F},shaderLanguage:this._options.shaderLanguage,extraInitializationsAsync:this._options.extraInitializationsAsync},U),t?H.setEffect(B,M,this._materialContext):P&&P.setEffect(B,M),this._onEffectCreatedObservable&&(q.effect=B,q.subMesh=H??(null===R||void 0===R?void 0:R.Ii[0])??null,this._onEffectCreatedObservable.notifyObservers(q))),P._wasPreviouslyUsingInstances=!!x,!(null===(k=B)||void 0===k||!k.isReady())&&(a!==B&&D.resetCachedMaterial(),P._wasPreviouslyReady=!0,!0)}bindOnlyWorldMatrix(R,x){const H=x??this.getEffect();if(!H)return;const k=this._options.uniforms;-1!==k.indexOf("world")&&H.setMatrix("world",R);const c=this.va();-1!==k.indexOf("worldView")&&(R.multiplyToRef(c.getViewMatrix(),this._cachedWorldViewMatrix),H.setMatrix("worldView",this._cachedWorldViewMatrix)),-1!==k.indexOf("worldViewProjection")&&(R.multiplyToRef(c.getTransformMatrix(),this._cachedWorldViewProjectionMatrix),H.setMatrix("worldViewProjection",this._cachedWorldViewProjectionMatrix)),-1!==k.indexOf("view")&&H.setMatrix("view",c.getViewMatrix())}bindForSubMesh(R,x,H){var k;this.bind(R,x,null===(k=H._drawWrapperOverride)||void 0===k?void 0:k.effect,H)}bind(R,x,H,k){const c=k&&this._storeEffectOnSubMeshes,t=H??(c?k.effect:this.getEffect());if(!t)return;const A=this.va();this._activeEffect=t,this.bindOnlyWorldMatrix(R,H);const D=this._options.uniformBuffers;let U=!1;if(t&&D&&D.length>0&&A.getEngine().supportsUniformBuffers)for(let n=0;n<D.length;++n){switch(D[n]){case"Mesh":x&&(x.getMeshUniformBuffer().bindToEffect(t,"Mesh"),x.transferToEffect(R));break;case"Scene":(0,i.r)(t,A.getSceneUniformBuffer()),A.finalizeSceneUbo(),U=!0}}const J=x&&c?this._mustRebind(A,t,k,x.visibility):A.getCachedMaterial()!==this;if(t&&J){let R;for(R in U||-1===this._options.uniforms.indexOf("view")||t.setMatrix("view",A.getViewMatrix()),U||-1===this._options.uniforms.indexOf("projection")||t.setMatrix("projection",A.getProjectionMatrix()),U||-1===this._options.uniforms.indexOf("viewProjection")||(t.setMatrix("viewProjection",A.getTransformMatrix()),this._multiview&&t.setMatrix("viewProjectionR",A._transformMatrixR)),A.activeCamera&&-1!==this._options.uniforms.indexOf("cameraPosition")&&t.setVector3("cameraPosition",A.activeCamera.globalPosition),(0,i.e)(x,t),(0,I.i)(t,this,A),this._useLogarithmicDepth&&(0,i.n)(c?k.materialDefines:t.defines,t,A),x&&(0,i.g)(A,x,t),this._textures)t.setTexture(R,this._textures[R]);for(R in this._textureArrays)t.setTextureArray(R,this._textureArrays[R]);for(R in this._ints)t.setInt(R,this._ints[R]);for(R in this._uints)t.setUInt(R,this._uints[R]);for(R in this._floats)t.setFloat(R,this._floats[R]);for(R in this._floatsArrays)t.setArray(R,this._floatsArrays[R]);for(R in this._colors3)t.setColor3(R,this._colors3[R]);for(R in this._colors3Arrays)t.setArray3(R,this._colors3Arrays[R]);for(R in this._colors4){const x=this._colors4[R];t.setFloat4(R,x.r,x.g,x.b,x.a)}for(R in this._colors4Arrays)t.setArray4(R,this._colors4Arrays[R]);for(R in this._vectors2)t.setVector2(R,this._vectors2[R]);for(R in this._vectors3)t.setVector3(R,this._vectors3[R]);for(R in this._vectors4)t.setVector4(R,this._vectors4[R]);for(R in this._quaternions)t.setQuaternion(R,this._quaternions[R]);for(R in this._matrices)t.setMatrix(R,this._matrices[R]);for(R in this._matrixArrays)t.setMatrices(R,this._matrixArrays[R]);for(R in this._matrices3x3)t.setMatrix3x3(R,this._matrices3x3[R]);for(R in this._matrices2x2)t.setMatrix2x2(R,this._matrices2x2[R]);for(R in this._vectors2Arrays)t.setArray2(R,this._vectors2Arrays[R]);for(R in this._vectors3Arrays)t.setArray3(R,this._vectors3Arrays[R]);for(R in this._vectors4Arrays)t.setArray4(R,this._vectors4Arrays[R]);for(R in this._quaternionsArrays)t.setArray4(R,this._quaternionsArrays[R]);for(R in this._uniformBuffers){const x=this._uniformBuffers[R].getBuffer();x&&t.bindUniformBuffer(x,R)}const H=A.getEngine(),D=H.setExternalTexture;if(D)for(R in this._externalTextures)D.call(H,R,this._externalTextures[R]);const J=H.setTextureSampler;if(J)for(R in this._textureSamplers)J.call(H,R,this._textureSamplers[R]);const V=H.setStorageBuffer;if(V)for(R in this._storageBuffers)V.call(H,R,this._storageBuffers[R])}if(t&&x&&(J||!this.isFrozen)){(0,i.q)(x,t),x.morphTargetManager&&x.morphTargetManager.isUsingTextureForTargets&&x.morphTargetManager._bind(t);const R=x.bakedVertexAnimationManager;if(R&&R.isEnabled){var V;const R=c?k._drawWrapper:this._drawWrapper;null===(V=x.bakedVertexAnimationManager)||void 0===V||V.bind(t,!!R._wasPreviouslyUsingInstances)}}this._afterBind(x,t,k)}getActiveTextures(){const R=super.getActiveTextures();for(const x in this._textures)R.push(this._textures[x]);for(const x in this._textureArrays){const H=this._textureArrays[x];for(let x=0;x<H.length;x++)R.push(H[x])}return R}hasTexture(R){if(super.hasTexture(R))return!0;for(const x in this._textures)if(this._textures[x]===R)return!0;for(const x in this._textureArrays){const H=this._textureArrays[x];for(let x=0;x<H.length;x++)if(H[x]===R)return!0}return!1}clone(R){const x=k.d.Clone((()=>new S(R,this.va(),this._shaderPath,this._options,this._storeEffectOnSubMeshes)),this);x.name=R,x.id=R,"object"===typeof x._shaderPath&&(x._shaderPath={...x._shaderPath}),this._options={...this._options};const H=Object.keys(this._options);for(const k of H){const R=this._options[k];Array.isArray(R)&&(this._options[k]=R.slice(0))}this.stencil.copyTo(x.stencil);for(const k in this._textures)x.setTexture(k,this._textures[k]);for(const k in this._textureArrays)x.setTextureArray(k,this._textureArrays[k]);for(const k in this._externalTextures)x.setExternalTexture(k,this._externalTextures[k]);for(const k in this._ints)x.setInt(k,this._ints[k]);for(const k in this._uints)x.setUInt(k,this._uints[k]);for(const k in this._floats)x.setFloat(k,this._floats[k]);for(const k in this._floatsArrays)x.setFloats(k,this._floatsArrays[k]);for(const k in this._colors3)x.setColor3(k,this._colors3[k]);for(const k in this._colors3Arrays)x._colors3Arrays[k]=this._colors3Arrays[k];for(const k in this._colors4)x.setColor4(k,this._colors4[k]);for(const k in this._colors4Arrays)x._colors4Arrays[k]=this._colors4Arrays[k];for(const k in this._vectors2)x.setVector2(k,this._vectors2[k]);for(const k in this._vectors3)x.setVector3(k,this._vectors3[k]);for(const k in this._vectors4)x.setVector4(k,this._vectors4[k]);for(const k in this._quaternions)x.setQuaternion(k,this._quaternions[k]);for(const k in this._quaternionsArrays)x._quaternionsArrays[k]=this._quaternionsArrays[k];for(const k in this._matrices)x.setMatrix(k,this._matrices[k]);for(const k in this._matrixArrays)x._matrixArrays[k]=this._matrixArrays[k].slice();for(const k in this._matrices3x3)x.setMatrix3x3(k,this._matrices3x3[k]);for(const k in this._matrices2x2)x.setMatrix2x2(k,this._matrices2x2[k]);for(const k in this._vectors2Arrays)x.setArray2(k,this._vectors2Arrays[k]);for(const k in this._vectors3Arrays)x.setArray3(k,this._vectors3Arrays[k]);for(const k in this._vectors4Arrays)x.setArray4(k,this._vectors4Arrays[k]);for(const k in this._uniformBuffers)x.setUniformBuffer(k,this._uniformBuffers[k]);for(const k in this._textureSamplers)x.setTextureSampler(k,this._textureSamplers[k]);for(const k in this._storageBuffers)x.setStorageBuffer(k,this._storageBuffers[k]);return x}dispose(R,x,H){if(x){let R;for(R in this._textures)this._textures[R].dispose();for(R in this._textureArrays){const x=this._textureArrays[R];for(let R=0;R<x.length;R++)x[R].dispose()}}this._textures={},super.dispose(R,x,H)}serialize(){const R=k.d.Serialize(this);let x;for(x in R.customType="BABYLON.ShaderMaterial",R.uniqueId=this.uniqueId,R.options=this._options,R.shaderPath=this._shaderPath,R.storeEffectOnSubMeshes=this._storeEffectOnSubMeshes,R.stencil=this.stencil.serialize(),R.textures={},this._textures)R.textures[x]=this._textures[x].serialize();for(x in R.textureArrays={},this._textureArrays){R.textureArrays[x]=[];const H=this._textureArrays[x];for(let k=0;k<H.length;k++)R.textureArrays[x].push(H[k].serialize())}for(x in R.ints={},this._ints)R.ints[x]=this._ints[x];for(x in R.uints={},this._uints)R.uints[x]=this._uints[x];for(x in R.floats={},this._floats)R.floats[x]=this._floats[x];for(x in R.floatsArrays={},this._floatsArrays)R.floatsArrays[x]=this._floatsArrays[x];for(x in R.colors3={},this._colors3){const H=this._colors3[x];R.colors3[x]=[H.r,H.g,H.b]}for(x in R.colors3Arrays={},this._colors3Arrays)R.colors3Arrays[x]=this._colors3Arrays[x];for(x in R.colors4={},this._colors4){const H=this._colors4[x];R.colors4[x]=[H.r,H.g,H.b,H.a]}for(x in R.colors4Arrays={},this._colors4Arrays)R.colors4Arrays[x]=this._colors4Arrays[x];for(x in R.vectors2={},this._vectors2){const H=this._vectors2[x];R.vectors2[x]=[H.x,H.y]}for(x in R.vectors3={},this._vectors3){const H=this._vectors3[x];R.vectors3[x]=[H.x,H.y,H.z]}for(x in R.vectors4={},this._vectors4){const H=this._vectors4[x];R.vectors4[x]=[H.x,H.y,H.z,H.w]}for(x in R.quaternions={},this._quaternions)R.quaternions[x]=this._quaternions[x].Li();for(x in R.matrices={},this._matrices)R.matrices[x]=this._matrices[x].Li();for(x in R.matrixArray={},this._matrixArrays)R.matrixArray[x]=this._matrixArrays[x];for(x in R.matrices3x3={},this._matrices3x3)R.matrices3x3[x]=this._matrices3x3[x];for(x in R.matrices2x2={},this._matrices2x2)R.matrices2x2[x]=this._matrices2x2[x];for(x in R.vectors2Arrays={},this._vectors2Arrays)R.vectors2Arrays[x]=this._vectors2Arrays[x];for(x in R.vectors3Arrays={},this._vectors3Arrays)R.vectors3Arrays[x]=this._vectors3Arrays[x];for(x in R.vectors4Arrays={},this._vectors4Arrays)R.vectors4Arrays[x]=this._vectors4Arrays[x];for(x in R.quaternionsArrays={},this._quaternionsArrays)R.quaternionsArrays[x]=this._quaternionsArrays[x];return R}static Parse(R,x,H){const c=k.d.Parse((()=>new S(R.name,x,R.shaderPath,R.options,R.storeEffectOnSubMeshes)),R,x,H);let A;for(A in R.stencil&&c.stencil.parse(R.stencil,x,H),R.textures)c.setTexture(A,D.d.Parse(R.textures[A],x,H));for(A in R.textureArrays){const k=R.textureArrays[A],t=[];for(let R=0;R<k.length;R++)t.push(D.d.Parse(k[R],x,H));c.setTextureArray(A,t)}for(A in R.ints)c.setInt(A,R.ints[A]);for(A in R.uints)c.setUInt(A,R.uints[A]);for(A in R.floats)c.setFloat(A,R.floats[A]);for(A in R.floatsArrays)c.setFloats(A,R.floatsArrays[A]);for(A in R.colors3){const x=R.colors3[A];c.setColor3(A,{r:x[0],g:x[1],b:x[2]})}for(A in R.colors3Arrays){const x=R.colors3Arrays[A].reduce(((R,x,H)=>(H%3===0?R.push([x]):R[R.length-1].push(x),R)),[]).map((R=>({r:R[0],g:R[1],b:R[2]})));c.setColor3Array(A,x)}for(A in R.colors4){const x=R.colors4[A];c.setColor4(A,{r:x[0],g:x[1],b:x[2],a:x[3]})}for(A in R.colors4Arrays){const x=R.colors4Arrays[A].reduce(((R,x,H)=>(H%4===0?R.push([x]):R[R.length-1].push(x),R)),[]).map((R=>({r:R[0],g:R[1],b:R[2],a:R[3]})));c.setColor4Array(A,x)}for(A in R.vectors2){const x=R.vectors2[A];c.setVector2(A,{x:x[0],y:x[1]})}for(A in R.vectors3){const x=R.vectors3[A];c.setVector3(A,{x:x[0],y:x[1],z:x[2]})}for(A in R.vectors4){const x=R.vectors4[A];c.setVector4(A,{x:x[0],y:x[1],z:x[2],w:x[3]})}for(A in R.quaternions)c.setQuaternion(A,t.f.zi(R.quaternions[A]));for(A in R.matrices)c.setMatrix(A,t.e.zi(R.matrices[A]));for(A in R.matrixArray)c._matrixArrays[A]=new Float32Array(R.matrixArray[A]);for(A in R.matrices3x3)c.setMatrix3x3(A,R.matrices3x3[A]);for(A in R.matrices2x2)c.setMatrix2x2(A,R.matrices2x2[A]);for(A in R.vectors2Arrays)c.setArray2(A,R.vectors2Arrays[A]);for(A in R.vectors3Arrays)c.setArray3(A,R.vectors3Arrays[A]);for(A in R.vectors4Arrays)c.setArray4(A,R.vectors4Arrays[A]);for(A in R.quaternionsArrays)c.setArray4(A,R.quaternionsArrays[A]);return c}static async ParseFromFileAsync(R,x,H){let k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return await new Promise(((c,t)=>{const A=new V.e;A.addEventListener("readystatechange",(()=>{if(4==A.readyState)if(200==A.status){const x=JSON.parse(A.responseText),t=this.Parse(x,H||g.c.LastCreatedScene,k);R&&(t.name=R),c(t)}else t("Unable to load the ShaderMaterial")})),A.open("GET",x),A.send()}))}static async ParseFromSnippetAsync(R,x){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return await new Promise(((k,c)=>{const t=new V.e;t.addEventListener("readystatechange",(()=>{if(4==t.readyState)if(200==t.status){const c=JSON.parse(JSON.parse(t.responseText).jsonPayload),A=JSON.parse(c.shaderMaterial),D=this.Parse(A,x||g.c.LastCreatedScene,H);D.snippetId=R,k(D)}else c("Unable to load the snippet "+R)})),t.open("GET",this.SnippetUrl+"/"+R.replace(/#/g,"/")),t.send()}))}}S.SnippetUrl="https://snippet.babylonjs.com",S.CreateFromSnippetAsync=S.ParseFromSnippetAsync,(0,U.h)("BABYLON.ShaderMaterial",S)},12328:(R,x,H)=>{H.d(x,{d:()=>M});var k=H(643),c=H(647),t=H(654),A=H(2445),D=H(695),U=H(724),J=H(12286),V=H(2449),n=H(837),g=H(12276),I=H(12292),i=H(2311),q=H(610),S=H(12300),L=H(12307),b=H(12313),C=H(849),F=H(841),d=H(687),P=H(12322);const a={effect:null,subMesh:null};class X extends g.e{constructor(R){super(R),this.MAINUV1=!1,this.MAINUV2=!1,this.MAINUV3=!1,this.MAINUV4=!1,this.MAINUV5=!1,this.MAINUV6=!1,this.DIFFUSE=!1,this.DIFFUSEDIRECTUV=0,this.BAKED_VERTEX_ANIMATION_TEXTURE=!1,this.AMBIENT=!1,this.AMBIENTDIRECTUV=0,this.OPACITY=!1,this.OPACITYDIRECTUV=0,this.OPACITYRGB=!1,this.REFLECTION=!1,this.EMISSIVE=!1,this.EMISSIVEDIRECTUV=0,this.SPECULAR=!1,this.SPECULARDIRECTUV=0,this.BUMP=!1,this.BUMPDIRECTUV=0,this.PARALLAX=!1,this.PARALLAX_RHS=!1,this.PARALLAXOCCLUSION=!1,this.SPECULAROVERALPHA=!1,this.CLIPPLANE=!1,this.CLIPPLANE2=!1,this.CLIPPLANE3=!1,this.CLIPPLANE4=!1,this.CLIPPLANE5=!1,this.CLIPPLANE6=!1,this.ALPHATEST=!1,this.DEPTHPREPASS=!1,this.ALPHAFROMDIFFUSE=!1,this.POINTSIZE=!1,this.FOG=!1,this.SPECULARTERM=!1,this.DIFFUSEFRESNEL=!1,this.OPACITYFRESNEL=!1,this.REFLECTIONFRESNEL=!1,this.REFRACTIONFRESNEL=!1,this.EMISSIVEFRESNEL=!1,this.FRESNEL=!1,this.NORMAL=!1,this.TANGENT=!1,this.UV1=!1,this.UV2=!1,this.UV3=!1,this.UV4=!1,this.UV5=!1,this.UV6=!1,this.VERTEXCOLOR=!1,this.VERTEXALPHA=!1,this.NUM_BONE_INFLUENCERS=0,this.BonesPerMesh=0,this.BONETEXTURE=!1,this.BONES_VELOCITY_ENABLED=!1,this.INSTANCES=!1,this.THIN_INSTANCES=!1,this.INSTANCESCOLOR=!1,this.GLOSSINESS=!1,this.ROUGHNESS=!1,this.EMISSIVEASILLUMINATION=!1,this.LINKEMISSIVEWITHDIFFUSE=!1,this.REFLECTIONFRESNELFROMSPECULAR=!1,this.LIGHTMAP=!1,this.LIGHTMAPDIRECTUV=0,this.OBJECTSPACE_NORMALMAP=!1,this.USELIGHTMAPASSHADOWMAP=!1,this.REFLECTIONMAP_3D=!1,this.REFLECTIONMAP_SPHERICAL=!1,this.REFLECTIONMAP_PLANAR=!1,this.REFLECTIONMAP_CUBIC=!1,this.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,this.USE_LOCAL_REFRACTIONMAP_CUBIC=!1,this.REFLECTIONMAP_PROJECTION=!1,this.REFLECTIONMAP_SKYBOX=!1,this.REFLECTIONMAP_EXPLICIT=!1,this.REFLECTIONMAP_EQUIRECTANGULAR=!1,this.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,this.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,this.REFLECTIONMAP_OPPOSITEZ=!1,this.INVERTCUBICMAP=!1,this.LOGARITHMICDEPTH=!1,this.REFRACTION=!1,this.REFRACTIONMAP_3D=!1,this.REFLECTIONOVERALPHA=!1,this.TWOSIDEDLIGHTING=!1,this.SHADOWFLOAT=!1,this.MORPHTARGETS=!1,this.MORPHTARGETS_POSITION=!1,this.MORPHTARGETS_NORMAL=!1,this.MORPHTARGETS_TANGENT=!1,this.MORPHTARGETS_UV=!1,this.MORPHTARGETS_UV2=!1,this.MORPHTARGETS_COLOR=!1,this.MORPHTARGETTEXTURE_HASPOSITIONS=!1,this.MORPHTARGETTEXTURE_HASNORMALS=!1,this.MORPHTARGETTEXTURE_HASTANGENTS=!1,this.MORPHTARGETTEXTURE_HASUVS=!1,this.MORPHTARGETTEXTURE_HASUV2S=!1,this.MORPHTARGETTEXTURE_HASCOLORS=!1,this.NUM_MORPH_INFLUENCERS=0,this.MORPHTARGETS_TEXTURE=!1,this.NONUNIFORMSCALING=!1,this.PREMULTIPLYALPHA=!1,this.ALPHATEST_AFTERALLALPHACOMPUTATIONS=!1,this.ALPHABLEND=!0,this.PREPASS=!1,this.PREPASS_COLOR=!1,this.PREPASS_COLOR_INDEX=-1,this.PREPASS_IRRADIANCE=!1,this.PREPASS_IRRADIANCE_INDEX=-1,this.PREPASS_ALBEDO=!1,this.PREPASS_ALBEDO_INDEX=-1,this.PREPASS_ALBEDO_SQRT=!1,this.PREPASS_ALBEDO_SQRT_INDEX=-1,this.PREPASS_DEPTH=!1,this.PREPASS_DEPTH_INDEX=-1,this.PREPASS_SCREENSPACE_DEPTH=!1,this.PREPASS_SCREENSPACE_DEPTH_INDEX=-1,this.PREPASS_NORMALIZED_VIEW_DEPTH=!1,this.PREPASS_NORMALIZED_VIEW_DEPTH_INDEX=-1,this.PREPASS_NORMAL=!1,this.PREPASS_NORMAL_INDEX=-1,this.PREPASS_NORMAL_WORLDSPACE=!1,this.PREPASS_WORLD_NORMAL=!1,this.PREPASS_WORLD_NORMAL_INDEX=-1,this.PREPASS_POSITION=!1,this.PREPASS_POSITION_INDEX=-1,this.PREPASS_LOCAL_POSITION=!1,this.PREPASS_LOCAL_POSITION_INDEX=-1,this.PREPASS_VELOCITY=!1,this.PREPASS_VELOCITY_INDEX=-1,this.PREPASS_VELOCITY_LINEAR=!1,this.PREPASS_VELOCITY_LINEAR_INDEX=-1,this.PREPASS_REFLECTIVITY=!1,this.PREPASS_REFLECTIVITY_INDEX=-1,this.SCENE_MRT_COUNT=0,this.RGBDLIGHTMAP=!1,this.RGBDREFLECTION=!1,this.RGBDREFRACTION=!1,this.IMAGEPROCESSING=!1,this.VIGNETTE=!1,this.VIGNETTEBLENDMODEMULTIPLY=!1,this.VIGNETTEBLENDMODEOPAQUE=!1,this.TONEMAPPING=0,this.CONTRAST=!1,this.COLORCURVES=!1,this.COLORGRADING=!1,this.COLORGRADING3D=!1,this.SAMPLER3DGREENDEPTH=!1,this.SAMPLER3DBGRMAP=!1,this.DITHER=!1,this.IMAGEPROCESSINGPOSTPROCESS=!1,this.SKIPFINALCOLORCLAMP=!1,this.MULTIVIEW=!1,this.ORDER_INDEPENDENT_TRANSPARENCY=!1,this.ORDER_INDEPENDENT_TRANSPARENCY_16BITS=!1,this.CAMERA_ORTHOGRAPHIC=!1,this.CAMERA_PERSPECTIVE=!1,this.AREALIGHTSUPPORTED=!0,this.IS_REFLECTION_LINEAR=!1,this.IS_REFRACTION_LINEAR=!1,this.EXPOSURE=!1,this.DECAL_AFTER_DETAIL=!1,this.rebuild()}setReflectionMode(R){const x=["REFLECTIONMAP_CUBIC","REFLECTIONMAP_EXPLICIT","REFLECTIONMAP_PLANAR","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_SKYBOX","REFLECTIONMAP_SPHERICAL","REFLECTIONMAP_EQUIRECTANGULAR","REFLECTIONMAP_EQUIRECTANGULAR_FIXED","REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED"];for(const H of x)this[H]=H===R}}class M extends I.e{get imageProcessingConfiguration(){return this._imageProcessingConfiguration}set imageProcessingConfiguration(R){this._attachImageProcessingConfiguration(R),this._markAllSubMeshesAsImageProcessingDirty()}_attachImageProcessingConfiguration(R){R!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=R||this.va().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add((()=>{this._markAllSubMeshesAsImageProcessingDirty()}))))}get isPrePassCapable(){return!this.disableDepthWrite}get cameraColorCurvesEnabled(){return this.imageProcessingConfiguration.colorCurvesEnabled}set cameraColorCurvesEnabled(R){this.imageProcessingConfiguration.colorCurvesEnabled=R}get cameraColorGradingEnabled(){return this.imageProcessingConfiguration.colorGradingEnabled}set cameraColorGradingEnabled(R){this.imageProcessingConfiguration.colorGradingEnabled=R}get cameraToneMappingEnabled(){return this._imageProcessingConfiguration.toneMappingEnabled}set cameraToneMappingEnabled(R){this._imageProcessingConfiguration.toneMappingEnabled=R}get cameraExposure(){return this._imageProcessingConfiguration.exposure}set cameraExposure(R){this._imageProcessingConfiguration.exposure=R}get cameraContrast(){return this._imageProcessingConfiguration.contrast}set cameraContrast(R){this._imageProcessingConfiguration.contrast=R}get cameraColorGradingTexture(){return this._imageProcessingConfiguration.colorGradingTexture}set cameraColorGradingTexture(R){this._imageProcessingConfiguration.colorGradingTexture=R}get cameraColorCurves(){return this._imageProcessingConfiguration.colorCurves}set cameraColorCurves(R){this._imageProcessingConfiguration.colorCurves=R}get canRenderToMRT(){return!0}constructor(R,x){super(R,x,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]||M.ForceGLSL),this._diffuseTexture=null,this._ambientTexture=null,this._opacityTexture=null,this._reflectionTexture=null,this._emissiveTexture=null,this._specularTexture=null,this._bumpTexture=null,this._lightmapTexture=null,this._refractionTexture=null,this.ambientColor=new D.c(0,0,0),this.diffuseColor=new D.c(1,1,1),this.specularColor=new D.c(1,1,1),this.emissiveColor=new D.c(0,0,0),this.specularPower=64,this._useAlphaFromDiffuseTexture=!1,this._useEmissiveAsIllumination=!1,this._linkEmissiveWithDiffuse=!1,this._useSpecularOverAlpha=!1,this._useReflectionOverAlpha=!1,this._disableLighting=!1,this._useObjectSpaceNormalMap=!1,this._useParallax=!1,this._useParallaxOcclusion=!1,this.parallaxScaleBias=.05,this._roughness=0,this.indexOfRefraction=.98,this.invertRefractionY=!0,this.alphaCutOff=.4,this._useLightmapAsShadowmap=!1,this._useReflectionFresnelFromSpecular=!1,this._useGlossinessFromSpecularMapAlpha=!1,this._maxSimultaneousLights=4,this._invertNormalMapX=!1,this._invertNormalMapY=!1,this._twoSidedLighting=!1,this._applyDecalMapAfterDetailMap=!1,this._shadersLoaded=!1,this._renderTargets=new t.f(16),this._globalAmbientColor=new D.c(0,0,0),this._cacheHasRenderTargetTextures=!1,this.detailMap=new b.c(this),this._attachImageProcessingConfiguration(null),this.prePassConfiguration=new J.e,this.getRenderTargetTextures=()=>(this._renderTargets.reset(),M.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._renderTargets.push(this._reflectionTexture),M.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget&&this._renderTargets.push(this._refractionTexture),this._eventInfo.renderTargets=this._renderTargets,this._callbackPluginEventFillRenderTargetTextures(this._eventInfo),this._renderTargets)}get hasRenderTargetTextures(){return!!(M.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget)||(!!(M.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget)||this._cacheHasRenderTargetTextures)}getClassName(){return"eb"}needAlphaBlending(){return this._hasTransparencyMode?this._transparencyModeIsBlend:!this._disableAlphaBlending&&(this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromDiffuseTexture()||this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled)}needAlphaTesting(){return this._hasTransparencyMode?this._transparencyModeIsTest:this._hasAlphaChannel()&&(null==this._transparencyMode||this._transparencyMode===n.b.MATERIAL_ALPHATEST)}_shouldUseAlphaFromDiffuseTexture(){return null!=this._diffuseTexture&&this._diffuseTexture.Qj&&this._useAlphaFromDiffuseTexture&&this._transparencyMode!==n.b.MATERIAL_OPAQUE}_hasAlphaChannel(){return null!=this._diffuseTexture&&this._diffuseTexture.Qj||null!=this._opacityTexture}getAlphaTestTexture(){return this._diffuseTexture}isReadyForSubMesh(R,x){let k=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._uniformBufferLayoutBuilt||this.buildUniformLayout();const c=x._drawWrapper;if(c.effect&&this.isFrozen&&c._wasPreviouslyReady&&c._wasPreviouslyUsingInstances===k)return!0;x.materialDefines||(this._callbackPluginEventGeneric(4,this._eventInfo),x.materialDefines=new X(this._eventInfo.defineNames));const t=this.va(),A=x.materialDefines;if(this._isReadyForSubMesh(x))return!0;const D=t.getEngine();A._needNormals=(0,F.T)(t,R,A,!0,this._maxSimultaneousLights,this._disableLighting),(0,F._)(t,A);const n=this.needAlphaBlendingForMesh(R)&&this.va().useOrderIndependentTransparency;if((0,F.db)(t,A,this.canRenderToMRT&&!n),(0,F.bb)(t,A,n),P.d.PrepareDefines(D.currentRenderPassId,R,A),A._areTexturesDirty){this._eventInfo.hasRenderTargetTextures=!1,this._callbackPluginEventHasRenderTargetTextures(this._eventInfo),this._cacheHasRenderTargetTextures=this._eventInfo.hasRenderTargetTextures,A._needUVs=!1;for(let R=1;R<=6;++R)A["MAINUV"+R]=!1;if(t.texturesEnabled){if(A.DIFFUSEDIRECTUV=0,A.BUMPDIRECTUV=0,A.AMBIENTDIRECTUV=0,A.OPACITYDIRECTUV=0,A.EMISSIVEDIRECTUV=0,A.SPECULARDIRECTUV=0,A.LIGHTMAPDIRECTUV=0,this._diffuseTexture&&M.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._diffuseTexture,A,"DIFFUSE")}else A.DIFFUSE=!1;if(this._ambientTexture&&M.AmbientTextureEnabled){if(!this._ambientTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._ambientTexture,A,"AMBIENT")}else A.AMBIENT=!1;if(this._opacityTexture&&M.OpacityTextureEnabled){if(!this._opacityTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._opacityTexture,A,"OPACITY"),A.OPACITYRGB=this._opacityTexture.getAlphaFromRGB}else A.OPACITY=!1;if(this._reflectionTexture&&M.ReflectionTextureEnabled){if(!this._reflectionTexture.isReadyOrNotBlocking())return!1;switch(A._needNormals=!0,A.REFLECTION=!0,A.ROUGHNESS=this._roughness>0,A.REFLECTIONOVERALPHA=this._useReflectionOverAlpha,A.INVERTCUBICMAP=this._reflectionTexture.coordinatesMode===i.d.INVCUBIC_MODE,A.REFLECTIONMAP_3D=this._reflectionTexture.isCube,A.REFLECTIONMAP_OPPOSITEZ=A.REFLECTIONMAP_3D&&this.va().useRightHandedSystem?!this._reflectionTexture.invertZ:this._reflectionTexture.invertZ,A.RGBDREFLECTION=this._reflectionTexture.isRGBD,this._reflectionTexture.coordinatesMode){case i.d.EXPLICIT_MODE:A.setReflectionMode("REFLECTIONMAP_EXPLICIT");break;case i.d.PLANAR_MODE:A.setReflectionMode("REFLECTIONMAP_PLANAR");break;case i.d.PROJECTION_MODE:A.setReflectionMode("REFLECTIONMAP_PROJECTION");break;case i.d.SKYBOX_MODE:A.setReflectionMode("REFLECTIONMAP_SKYBOX");break;case i.d.SPHERICAL_MODE:A.setReflectionMode("REFLECTIONMAP_SPHERICAL");break;case i.d.EQUIRECTANGULAR_MODE:A.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");break;case i.d.FIXED_EQUIRECTANGULAR_MODE:A.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");break;case i.d.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:A.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED");break;case i.d.CUBIC_MODE:case i.d.INVCUBIC_MODE:default:A.setReflectionMode("REFLECTIONMAP_CUBIC")}A.USE_LOCAL_REFLECTIONMAP_CUBIC=!!this._reflectionTexture.boundingBoxSize}else A.REFLECTION=!1,A.REFLECTIONMAP_OPPOSITEZ=!1;if(this._emissiveTexture&&M.EmissiveTextureEnabled){if(!this._emissiveTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._emissiveTexture,A,"EMISSIVE")}else A.EMISSIVE=!1;if(this._lightmapTexture&&M.LightmapTextureEnabled){if(!this._lightmapTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._lightmapTexture,A,"LIGHTMAP"),A.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap,A.RGBDLIGHTMAP=this._lightmapTexture.isRGBD}else A.LIGHTMAP=!1;if(this._specularTexture&&M.SpecularTextureEnabled){if(!this._specularTexture.isReadyOrNotBlocking())return!1;(0,F.U)(this._specularTexture,A,"SPECULAR"),A.GLOSSINESS=this._useGlossinessFromSpecularMapAlpha}else A.SPECULAR=!1;if(t.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&M.BumpTextureEnabled){if(!this._bumpTexture.isReady())return!1;(0,F.U)(this._bumpTexture,A,"BUMP"),A.PARALLAX=this._useParallax,A.PARALLAX_RHS=t.useRightHandedSystem,A.PARALLAXOCCLUSION=this._useParallaxOcclusion,A.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap}else A.BUMP=!1,A.PARALLAX=!1,A.PARALLAX_RHS=!1,A.PARALLAXOCCLUSION=!1;if(this._refractionTexture&&M.RefractionTextureEnabled){if(!this._refractionTexture.isReadyOrNotBlocking())return!1;A._needUVs=!0,A.REFRACTION=!0,A.REFRACTIONMAP_3D=this._refractionTexture.isCube,A.RGBDREFRACTION=this._refractionTexture.isRGBD,A.USE_LOCAL_REFRACTIONMAP_CUBIC=!!this._refractionTexture.boundingBoxSize}else A.REFRACTION=!1;A.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else A.DIFFUSE=!1,A.AMBIENT=!1,A.OPACITY=!1,A.REFLECTION=!1,A.EMISSIVE=!1,A.LIGHTMAP=!1,A.BUMP=!1,A.REFRACTION=!1;A.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),A.EMISSIVEASILLUMINATION=this._useEmissiveAsIllumination,A.LINKEMISSIVEWITHDIFFUSE=this._linkEmissiveWithDiffuse,A.SPECULAROVERALPHA=this._useSpecularOverAlpha,A.PREMULTIPLYALPHA=7===this.alphaMode||8===this.alphaMode,A.ALPHATEST_AFTERALLALPHACOMPUTATIONS=null!==this.transparencyMode,A.ALPHABLEND=null===this.transparencyMode||this.needAlphaBlendingForMesh(R)}if(this._eventInfo.isReadyForSubMesh=!0,this._eventInfo.defines=A,this._eventInfo.subMesh=x,this._callbackPluginEventIsReadyForSubMesh(this._eventInfo),!this._eventInfo.isReadyForSubMesh)return!1;if(A._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(A),A.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace,A.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}if(A._areFresnelDirty&&(M.FresnelEnabled?(this._diffuseFresnelParameters||this._opacityFresnelParameters||this._emissiveFresnelParameters||this._refractionFresnelParameters||this._reflectionFresnelParameters)&&(A.DIFFUSEFRESNEL=this._diffuseFresnelParameters&&this._diffuseFresnelParameters.isEnabled,A.OPACITYFRESNEL=this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled,A.REFLECTIONFRESNEL=this._reflectionFresnelParameters&&this._reflectionFresnelParameters.isEnabled,A.REFLECTIONFRESNELFROMSPECULAR=this._useReflectionFresnelFromSpecular,A.REFRACTIONFRESNEL=this._refractionFresnelParameters&&this._refractionFresnelParameters.isEnabled,A.EMISSIVEFRESNEL=this._emissiveFresnelParameters&&this._emissiveFresnelParameters.isEnabled,A._needNormals=!0,A.FRESNEL=!0):A.FRESNEL=!1),A.AREALIGHTUSED)for(let H=0;H<R.lightSources.length;H++)if(!R.lightSources[H]._isReady())return!1;(0,F.W)(R,t,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this.needAlphaTestingForMesh(R),A,this._applyDecalMapAfterDetailMap),(0,F.Q)(t,D,this,A,k,null,x.getRenderingMesh().hasThinInstances),this._eventInfo.defines=A,this._eventInfo.mesh=R,this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo),(0,F.N)(R,A,!0,!0,!0),this._callbackPluginEventPrepareDefines(this._eventInfo);let g=!1;if(A.isDirty){const k=A._areLightsDisposed;A.markAsProcessed();const c=new L.b;A.REFLECTION&&c.addFallback(0,"REFLECTION"),A.SPECULAR&&c.addFallback(0,"SPECULAR"),A.BUMP&&c.addFallback(0,"BUMP"),A.PARALLAX&&c.addFallback(1,"PARALLAX"),A.PARALLAX_RHS&&c.addFallback(1,"PARALLAX_RHS"),A.PARALLAXOCCLUSION&&c.addFallback(0,"PARALLAXOCCLUSION"),A.SPECULAROVERALPHA&&c.addFallback(0,"SPECULAROVERALPHA"),A.FOG&&c.addFallback(1,"FOG"),A.POINTSIZE&&c.addFallback(0,"POINTSIZE"),A.LOGARITHMICDEPTH&&c.addFallback(0,"LOGARITHMICDEPTH"),(0,F.w)(A,c,this._maxSimultaneousLights),A.SPECULARTERM&&c.addFallback(0,"SPECULARTERM"),A.DIFFUSEFRESNEL&&c.addFallback(1,"DIFFUSEFRESNEL"),A.OPACITYFRESNEL&&c.addFallback(2,"OPACITYFRESNEL"),A.REFLECTIONFRESNEL&&c.addFallback(3,"REFLECTIONFRESNEL"),A.EMISSIVEFRESNEL&&c.addFallback(4,"EMISSIVEFRESNEL"),A.FRESNEL&&c.addFallback(4,"FRESNEL"),A.MULTIVIEW&&c.addFallback(0,"MULTIVIEW");const n=[U.g.PositionKind];A.NORMAL&&n.push(U.g.NormalKind),A.TANGENT&&n.push(U.g.TangentKind);for(let R=1;R<=6;++R)A["UV"+R]&&n.push(`uv${1===R?"":R}`);A.VERTEXCOLOR&&n.push(U.g.ColorKind),(0,F.D)(n,R,A,c),(0,F.F)(n,A),(0,F.I)(n,R,A),(0,F.z)(n,R,A);let I="default";const i=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vDiffuseColor","vSpecularColor","vEmissiveColor","visibility","vFogInfos","vFogColor","pointSize","vDiffuseInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vEmissiveInfos","vSpecularInfos","vBumpInfos","vLightmapInfos","vRefractionInfos","mBones","diffuseMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","specularMatrix","bumpMatrix","normalMatrix","lightmapMatrix","refractionMatrix","diffuseLeftColor","diffuseRightColor","opacityParts","reflectionLeftColor","reflectionRightColor","emissiveLeftColor","emissiveRightColor","refractionLeftColor","refractionRightColor","vReflectionPosition","vReflectionSize","vRefractionPosition","vRefractionSize","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth","morphTargetTextureInfo","morphTargetTextureIndices","cameraInfo"],q=["diffuseSampler","ambientSampler","opacitySampler","reflectionCubeSampler","reflection2DSampler","emissiveSampler","specularSampler","bumpSampler","lightmapSampler","refractionCubeSampler","refraction2DSampler","boneSampler","morphTargets","oitDepthSampler","oitFrontColorSampler","areaLightsLTC1Sampler","areaLightsLTC2Sampler"],S=["Material","Scene","Mesh"],b={maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:A.NUM_MORPH_INFLUENCERS};this._eventInfo.fallbacks=c,this._eventInfo.fallbackRank=0,this._eventInfo.defines=A,this._eventInfo.uniforms=i,this._eventInfo.attributes=n,this._eventInfo.samplers=q,this._eventInfo.uniformBuffersNames=S,this._eventInfo.customCode=void 0,this._eventInfo.mesh=R,this._eventInfo.indexParameters=b,this._callbackPluginEventGeneric(128,this._eventInfo),P.d.AddUniformsAndSamplers(i,q),J.e.AddUniforms(i),J.e.AddSamplers(q),V.c&&(V.c.PrepareUniforms(i,A),V.c.PrepareSamplers(q,A)),(0,F.gb)({uniformsNames:i,uniformBuffersNames:S,samplers:q,defines:A,maxSimultaneousLights:this._maxSimultaneousLights}),(0,C.e)(i);const d={};this.customShaderNameResolve&&(I=this.customShaderNameResolve(I,i,S,q,A,n,d));const X=A.toString(),M=x.effect;let B=t.getEngine().createEffect(I,{attributes:n,uniformsNames:i,uniformBuffersNames:S,samplers:q,defines:X,fallbacks:c,onCompiled:this.onCompiled,onError:this.onError,indexParameters:b,processFinalCode:d.processFinalCode,processCodeAfterIncludes:this._eventInfo.customCode,multiTarget:A.PREPASS,shaderLanguage:this._shaderLanguage,extraInitializationsAsync:this._shadersLoaded?void 0:async()=>{1===this._shaderLanguage?await Promise.all([Promise.all([H.e(35),H.e(55)]).then(H.bind(H,14312)),Promise.all([H.e(33),H.e(56)]).then(H.bind(H,14324))]):await Promise.all([Promise.all([H.e(28),H.e(57)]).then(H.bind(H,14330)),Promise.all([H.e(27),H.e(58)]).then(H.bind(H,14343))]),this._shadersLoaded=!0}},D);if(this._eventInfo.customCode=void 0,B)if(this._onEffectCreatedObservable&&(a.effect=B,a.subMesh=x,this._onEffectCreatedObservable.notifyObservers(a)),this.allowShaderHotSwapping&&M&&!B.isReady()){if(B=M,A.markAsUnprocessed(),g=this.isFrozen,k)return A._areLightsDisposed=!0,!1}else t.resetCachedMaterial(),x.setEffect(B,A,this._materialContext)}return!(!x.effect||!x.effect.isReady())&&(A._renderId=t.getRenderId(),c._wasPreviouslyReady=!g,c._wasPreviouslyUsingInstances=k,this._checkScenePerformancePriority(),!0)}buildUniformLayout(){const R=this._uniformBuffer;R.addUniform("diffuseLeftColor",4),R.addUniform("diffuseRightColor",4),R.addUniform("opacityParts",4),R.addUniform("reflectionLeftColor",4),R.addUniform("reflectionRightColor",4),R.addUniform("refractionLeftColor",4),R.addUniform("refractionRightColor",4),R.addUniform("emissiveLeftColor",4),R.addUniform("emissiveRightColor",4),R.addUniform("vDiffuseInfos",2),R.addUniform("vAmbientInfos",2),R.addUniform("vOpacityInfos",2),R.addUniform("vReflectionInfos",2),R.addUniform("vReflectionPosition",3),R.addUniform("vReflectionSize",3),R.addUniform("vEmissiveInfos",2),R.addUniform("vLightmapInfos",2),R.addUniform("vSpecularInfos",2),R.addUniform("vBumpInfos",3),R.addUniform("diffuseMatrix",16),R.addUniform("ambientMatrix",16),R.addUniform("opacityMatrix",16),R.addUniform("reflectionMatrix",16),R.addUniform("emissiveMatrix",16),R.addUniform("lightmapMatrix",16),R.addUniform("specularMatrix",16),R.addUniform("bumpMatrix",16),R.addUniform("vTangentSpaceParams",2),R.addUniform("pointSize",1),R.addUniform("alphaCutOff",1),R.addUniform("refractionMatrix",16),R.addUniform("vRefractionInfos",4),R.addUniform("vRefractionPosition",3),R.addUniform("vRefractionSize",3),R.addUniform("vSpecularColor",4),R.addUniform("vEmissiveColor",3),R.addUniform("vDiffuseColor",4),R.addUniform("vAmbientColor",3),R.addUniform("cameraInfo",4),super.buildUniformLayout()}bindForSubMesh(R,x,H){const k=this.va(),c=H.materialDefines;if(!c)return;const t=H.effect;if(!t)return;this._activeEffect=t,x.getMeshUniformBuffer().bindToEffect(t,"Mesh"),x.transferToEffect(R),this._uniformBuffer.bindToEffect(t,"Material"),this.prePassConfiguration.bindForSubMesh(this._activeEffect,k,x,R,this.isFrozen),P.d.Bind(k.getEngine().currentRenderPassId,this._activeEffect,x,R,this);const U=k.activeCamera;U?this._uniformBuffer.updateFloat4("cameraInfo",U.Hi,U.maxZ,0,0):this._uniformBuffer.updateFloat4("cameraInfo",0,0,0,0),this._eventInfo.subMesh=H,this._callbackPluginEventHardBindForSubMesh(this._eventInfo),c.OBJECTSPACE_NORMALMAP&&(R.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));const J=this._mustRebind(k,t,H,x.visibility);(0,F.e)(x,t);const V=this._uniformBuffer;if(J){if(this.bindViewProjection(t),!V.useUbo||!this.isFrozen||!V.isSync||H._drawWrapper._forceRebindOnNextCall){if(M.FresnelEnabled&&c.FRESNEL&&(this.diffuseFresnelParameters&&this.diffuseFresnelParameters.isEnabled&&(V.updateColor4("diffuseLeftColor",this.diffuseFresnelParameters.leftColor,this.diffuseFresnelParameters.power),V.updateColor4("diffuseRightColor",this.diffuseFresnelParameters.rightColor,this.diffuseFresnelParameters.bias)),this.opacityFresnelParameters&&this.opacityFresnelParameters.isEnabled&&V.updateColor4("opacityParts",new D.c(this.opacityFresnelParameters.leftColor.toLuminance(),this.opacityFresnelParameters.rightColor.toLuminance(),this.opacityFresnelParameters.bias),this.opacityFresnelParameters.power),this.reflectionFresnelParameters&&this.reflectionFresnelParameters.isEnabled&&(V.updateColor4("reflectionLeftColor",this.reflectionFresnelParameters.leftColor,this.reflectionFresnelParameters.power),V.updateColor4("reflectionRightColor",this.reflectionFresnelParameters.rightColor,this.reflectionFresnelParameters.bias)),this.refractionFresnelParameters&&this.refractionFresnelParameters.isEnabled&&(V.updateColor4("refractionLeftColor",this.refractionFresnelParameters.leftColor,this.refractionFresnelParameters.power),V.updateColor4("refractionRightColor",this.refractionFresnelParameters.rightColor,this.refractionFresnelParameters.bias)),this.emissiveFresnelParameters&&this.emissiveFresnelParameters.isEnabled&&(V.updateColor4("emissiveLeftColor",this.emissiveFresnelParameters.leftColor,this.emissiveFresnelParameters.power),V.updateColor4("emissiveRightColor",this.emissiveFresnelParameters.rightColor,this.emissiveFresnelParameters.bias))),k.texturesEnabled){if(this._diffuseTexture&&M.DiffuseTextureEnabled&&(V.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),(0,F.u)(this._diffuseTexture,V,"diffuse")),this._ambientTexture&&M.AmbientTextureEnabled&&(V.updateFloat2("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level),(0,F.u)(this._ambientTexture,V,"ambient")),this._opacityTexture&&M.OpacityTextureEnabled&&(V.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),(0,F.u)(this._opacityTexture,V,"opacity")),this._hasAlphaChannel()&&V.updateFloat("alphaCutOff",this.alphaCutOff),this._reflectionTexture&&M.ReflectionTextureEnabled){if(V.updateFloat2("vReflectionInfos",this._reflectionTexture.level,this.roughness),V.jj("reflectionMatrix",this._reflectionTexture.getReflectionTextureMatrix()),this._reflectionTexture.boundingBoxSize){const R=this._reflectionTexture;V.updateVector3("vReflectionPosition",R.boundingBoxPosition),V.updateVector3("vReflectionSize",R.boundingBoxSize)}}else V.updateFloat2("vReflectionInfos",0,this.roughness);if(this._emissiveTexture&&M.EmissiveTextureEnabled&&(V.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),(0,F.u)(this._emissiveTexture,V,"emissive")),this._lightmapTexture&&M.LightmapTextureEnabled&&(V.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),(0,F.u)(this._lightmapTexture,V,"lightmap")),this._specularTexture&&M.SpecularTextureEnabled&&(V.updateFloat2("vSpecularInfos",this._specularTexture.coordinatesIndex,this._specularTexture.level),(0,F.u)(this._specularTexture,V,"specular")),this._bumpTexture&&k.getEngine().getCaps().standardDerivatives&&M.BumpTextureEnabled&&(V.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this.parallaxScaleBias),(0,F.u)(this._bumpTexture,V,"bump"),k._mirroredCameraPosition?V.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):V.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this._refractionTexture&&M.RefractionTextureEnabled){let R=1;if(this._refractionTexture.isCube||(V.jj("refractionMatrix",this._refractionTexture.getReflectionTextureMatrix()),this._refractionTexture.depth&&(R=this._refractionTexture.depth)),V.updateFloat4("vRefractionInfos",this._refractionTexture.level,this.indexOfRefraction,R,this.invertRefractionY?-1:1),this._refractionTexture.boundingBoxSize){const R=this._refractionTexture;V.updateVector3("vRefractionPosition",R.boundingBoxPosition),V.updateVector3("vRefractionSize",R.boundingBoxSize)}}}this.pointsCloud&&V.updateFloat("pointSize",this.pointSize),V.updateColor4("vSpecularColor",this.specularColor,this.specularPower),V.updateColor3("vEmissiveColor",M.EmissiveTextureEnabled?this.emissiveColor:D.c.BlackReadOnly),V.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha),k.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),V.updateColor3("vAmbientColor",this._globalAmbientColor)}k.texturesEnabled&&(this._diffuseTexture&&M.DiffuseTextureEnabled&&t.setTexture("diffuseSampler",this._diffuseTexture),this._ambientTexture&&M.AmbientTextureEnabled&&t.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&M.OpacityTextureEnabled&&t.setTexture("opacitySampler",this._opacityTexture),this._reflectionTexture&&M.ReflectionTextureEnabled&&(this._reflectionTexture.isCube?t.setTexture("reflectionCubeSampler",this._reflectionTexture):t.setTexture("reflection2DSampler",this._reflectionTexture)),this._emissiveTexture&&M.EmissiveTextureEnabled&&t.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&M.LightmapTextureEnabled&&t.setTexture("lightmapSampler",this._lightmapTexture),this._specularTexture&&M.SpecularTextureEnabled&&t.setTexture("specularSampler",this._specularTexture),this._bumpTexture&&k.getEngine().getCaps().standardDerivatives&&M.BumpTextureEnabled&&t.setTexture("bumpSampler",this._bumpTexture),this._refractionTexture&&M.RefractionTextureEnabled&&(this._refractionTexture.isCube?t.setTexture("refractionCubeSampler",this._refractionTexture):t.setTexture("refraction2DSampler",this._refractionTexture))),this.va().useOrderIndependentTransparency&&this.needAlphaBlendingForMesh(x)&&this.va().depthPeelingRenderer.bind(t),this._eventInfo.subMesh=H,this._callbackPluginEventBindForSubMesh(this._eventInfo),(0,C.i)(t,this,k),this.bindEyePosition(t)}else k.getEngine()._features.needToAlwaysBindUniformBuffers&&(this._needToBindSceneUbo=!0);if(J||!this.isFrozen){var n;if(k.lightsEnabled&&!this._disableLighting&&(0,F.k)(k,x,t,c,this._maxSimultaneousLights),(k.fogEnabled&&x.applyFog&&k.fogMode!==A.e.FOGMODE_NONE||this._reflectionTexture||this._refractionTexture||x.receiveShadows||c.PREPASS)&&this.bindView(t),(0,F.g)(k,x,t),c.NUM_MORPH_INFLUENCERS&&(0,F.q)(x,t),c.BAKED_VERTEX_ANIMATION_TEXTURE)null===(n=x.bakedVertexAnimationManager)||void 0===n||n.bind(t,c.INSTANCES);this.useLogarithmicDepth&&(0,F.n)(c,t,k),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect)}this._afterBind(x,this._activeEffect,H),V.update()}getAnimatables(){const R=super.getAnimatables();return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&R.push(this._diffuseTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&R.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&R.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&R.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&R.push(this._emissiveTexture),this._specularTexture&&this._specularTexture.animations&&this._specularTexture.animations.length>0&&R.push(this._specularTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&R.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&R.push(this._lightmapTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&R.push(this._refractionTexture),R}getActiveTextures(){const R=super.getActiveTextures();return this._diffuseTexture&&R.push(this._diffuseTexture),this._ambientTexture&&R.push(this._ambientTexture),this._opacityTexture&&R.push(this._opacityTexture),this._reflectionTexture&&R.push(this._reflectionTexture),this._emissiveTexture&&R.push(this._emissiveTexture),this._specularTexture&&R.push(this._specularTexture),this._bumpTexture&&R.push(this._bumpTexture),this._lightmapTexture&&R.push(this._lightmapTexture),this._refractionTexture&&R.push(this._refractionTexture),R}hasTexture(R){return!!super.hasTexture(R)||(this._diffuseTexture===R||(this._ambientTexture===R||(this._opacityTexture===R||(this._reflectionTexture===R||(this._emissiveTexture===R||(this._specularTexture===R||(this._bumpTexture===R||(this._lightmapTexture===R||this._refractionTexture===R))))))))}dispose(R,x){var H,k,c,t,A,D,U,J,V;x&&(null===(H=this._diffuseTexture)||void 0===H||H.dispose(),null===(k=this._ambientTexture)||void 0===k||k.dispose(),null===(c=this._opacityTexture)||void 0===c||c.dispose(),null===(t=this._reflectionTexture)||void 0===t||t.dispose(),null===(A=this._emissiveTexture)||void 0===A||A.dispose(),null===(D=this._specularTexture)||void 0===D||D.dispose(),null===(U=this._bumpTexture)||void 0===U||U.dispose(),null===(J=this._lightmapTexture)||void 0===J||J.dispose(),null===(V=this._refractionTexture)||void 0===V||V.dispose());this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),super.dispose(R,x)}clone(R){let x=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const k=d.d.Clone((()=>new M(R,this.va())),this,{cloneTexturesOnlyOnce:x});return k.name=R,k.id=R,this.stencil.copyTo(k.stencil),this._clonePlugins(k,H),k}static Parse(R,x,H){const k=d.d.Parse((()=>new M(R.name,x)),R,x,H);return R.stencil&&k.stencil.parse(R.stencil,x,H),n.b._ParsePlugins(R,k,x,H),k}static get DiffuseTextureEnabled(){return S.e.DiffuseTextureEnabled}static set DiffuseTextureEnabled(R){S.e.DiffuseTextureEnabled=R}static get DetailTextureEnabled(){return S.e.DetailTextureEnabled}static set DetailTextureEnabled(R){S.e.DetailTextureEnabled=R}static get AmbientTextureEnabled(){return S.e.AmbientTextureEnabled}static set AmbientTextureEnabled(R){S.e.AmbientTextureEnabled=R}static get OpacityTextureEnabled(){return S.e.OpacityTextureEnabled}static set OpacityTextureEnabled(R){S.e.OpacityTextureEnabled=R}static get ReflectionTextureEnabled(){return S.e.ReflectionTextureEnabled}static set ReflectionTextureEnabled(R){S.e.ReflectionTextureEnabled=R}static get EmissiveTextureEnabled(){return S.e.EmissiveTextureEnabled}static set EmissiveTextureEnabled(R){S.e.EmissiveTextureEnabled=R}static get SpecularTextureEnabled(){return S.e.SpecularTextureEnabled}static set SpecularTextureEnabled(R){S.e.SpecularTextureEnabled=R}static get BumpTextureEnabled(){return S.e.BumpTextureEnabled}static set BumpTextureEnabled(R){S.e.BumpTextureEnabled=R}static get LightmapTextureEnabled(){return S.e.LightmapTextureEnabled}static set LightmapTextureEnabled(R){S.e.LightmapTextureEnabled=R}static get RefractionTextureEnabled(){return S.e.RefractionTextureEnabled}static set RefractionTextureEnabled(R){S.e.RefractionTextureEnabled=R}static get ColorGradingTextureEnabled(){return S.e.ColorGradingTextureEnabled}static set ColorGradingTextureEnabled(R){S.e.ColorGradingTextureEnabled=R}static get FresnelEnabled(){return S.e.FresnelEnabled}static set FresnelEnabled(R){S.e.FresnelEnabled=R}}M.ForceGLSL=!1,(0,k.d)([(0,c.F)("diffuseTexture")],M.prototype,"_diffuseTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],M.prototype,"diffuseTexture",void 0),(0,k.d)([(0,c.F)("ambientTexture")],M.prototype,"_ambientTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"ambientTexture",void 0),(0,k.d)([(0,c.F)("opacityTexture")],M.prototype,"_opacityTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],M.prototype,"opacityTexture",void 0),(0,k.d)([(0,c.F)("reflectionTexture")],M.prototype,"_reflectionTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"reflectionTexture",void 0),(0,k.d)([(0,c.F)("emissiveTexture")],M.prototype,"_emissiveTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"emissiveTexture",void 0),(0,k.d)([(0,c.F)("specularTexture")],M.prototype,"_specularTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"specularTexture",void 0),(0,k.d)([(0,c.F)("bumpTexture")],M.prototype,"_bumpTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"bumpTexture",void 0),(0,k.d)([(0,c.F)("lightmapTexture")],M.prototype,"_lightmapTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"lightmapTexture",void 0),(0,k.d)([(0,c.F)("refractionTexture")],M.prototype,"_refractionTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"refractionTexture",void 0),(0,k.d)([(0,c.p)("ambient")],M.prototype,"ambientColor",void 0),(0,k.d)([(0,c.p)("diffuse")],M.prototype,"diffuseColor",void 0),(0,k.d)([(0,c.p)("specular")],M.prototype,"specularColor",void 0),(0,k.d)([(0,c.p)("emissive")],M.prototype,"emissiveColor",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"specularPower",void 0),(0,k.d)([(0,c.Q)("useAlphaFromDiffuseTexture")],M.prototype,"_useAlphaFromDiffuseTexture",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesAndMiscDirty")],M.prototype,"useAlphaFromDiffuseTexture",void 0),(0,k.d)([(0,c.Q)("useEmissiveAsIllumination")],M.prototype,"_useEmissiveAsIllumination",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useEmissiveAsIllumination",void 0),(0,k.d)([(0,c.Q)("linkEmissiveWithDiffuse")],M.prototype,"_linkEmissiveWithDiffuse",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"linkEmissiveWithDiffuse",void 0),(0,k.d)([(0,c.Q)("useSpecularOverAlpha")],M.prototype,"_useSpecularOverAlpha",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useSpecularOverAlpha",void 0),(0,k.d)([(0,c.Q)("useReflectionOverAlpha")],M.prototype,"_useReflectionOverAlpha",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useReflectionOverAlpha",void 0),(0,k.d)([(0,c.Q)("disableLighting")],M.prototype,"_disableLighting",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsLightsDirty")],M.prototype,"disableLighting",void 0),(0,k.d)([(0,c.Q)("useObjectSpaceNormalMap")],M.prototype,"_useObjectSpaceNormalMap",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useObjectSpaceNormalMap",void 0),(0,k.d)([(0,c.Q)("useParallax")],M.prototype,"_useParallax",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useParallax",void 0),(0,k.d)([(0,c.Q)("useParallaxOcclusion")],M.prototype,"_useParallaxOcclusion",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useParallaxOcclusion",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"parallaxScaleBias",void 0),(0,k.d)([(0,c.Q)("roughness")],M.prototype,"_roughness",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"roughness",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"indexOfRefraction",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"invertRefractionY",void 0),(0,k.d)([(0,c.Q)()],M.prototype,"alphaCutOff",void 0),(0,k.d)([(0,c.Q)("useLightmapAsShadowmap")],M.prototype,"_useLightmapAsShadowmap",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useLightmapAsShadowmap",void 0),(0,k.d)([(0,c.v)("diffuseFresnelParameters")],M.prototype,"_diffuseFresnelParameters",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelDirty")],M.prototype,"diffuseFresnelParameters",void 0),(0,k.d)([(0,c.v)("opacityFresnelParameters")],M.prototype,"_opacityFresnelParameters",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelAndMiscDirty")],M.prototype,"opacityFresnelParameters",void 0),(0,k.d)([(0,c.v)("reflectionFresnelParameters")],M.prototype,"_reflectionFresnelParameters",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelDirty")],M.prototype,"reflectionFresnelParameters",void 0),(0,k.d)([(0,c.v)("refractionFresnelParameters")],M.prototype,"_refractionFresnelParameters",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelDirty")],M.prototype,"refractionFresnelParameters",void 0),(0,k.d)([(0,c.v)("emissiveFresnelParameters")],M.prototype,"_emissiveFresnelParameters",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelDirty")],M.prototype,"emissiveFresnelParameters",void 0),(0,k.d)([(0,c.Q)("useReflectionFresnelFromSpecular")],M.prototype,"_useReflectionFresnelFromSpecular",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsFresnelDirty")],M.prototype,"useReflectionFresnelFromSpecular",void 0),(0,k.d)([(0,c.Q)("useGlossinessFromSpecularMapAlpha")],M.prototype,"_useGlossinessFromSpecularMapAlpha",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"useGlossinessFromSpecularMapAlpha",void 0),(0,k.d)([(0,c.Q)("maxSimultaneousLights")],M.prototype,"_maxSimultaneousLights",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsLightsDirty")],M.prototype,"maxSimultaneousLights",void 0),(0,k.d)([(0,c.Q)("invertNormalMapX")],M.prototype,"_invertNormalMapX",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"invertNormalMapX",void 0),(0,k.d)([(0,c.Q)("invertNormalMapY")],M.prototype,"_invertNormalMapY",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"invertNormalMapY",void 0),(0,k.d)([(0,c.Q)("twoSidedLighting")],M.prototype,"_twoSidedLighting",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsTexturesDirty")],M.prototype,"twoSidedLighting",void 0),(0,k.d)([(0,c.Q)("applyDecalMapAfterDetailMap")],M.prototype,"_applyDecalMapAfterDetailMap",void 0),(0,k.d)([(0,c.e)("_markAllSubMeshesAsMiscDirty")],M.prototype,"applyDecalMapAfterDetailMap",void 0),(0,q.h)("BABYLON.StandardMaterial",M),A.e.DefaultMaterialFactory=R=>new M("default material",R)},12372:(R,x,H)=>{H.d(x,{c:()=>L,e:()=>b});var k=H(661),c=H(695),t=H(471),A=H(744),D=H(493),U=H(724),J=H(2288),V=H(668),n=H(513);class g extends k.k{constructor(R,x){super(R.x,R.y),this.index=x}}class I{constructor(){this.elements=[]}add(R){const x=[];for(const H of R){const R=new g(H,this.elements.length);x.push(R),this.elements.push(R)}return x}computeBounds(){const R=new k.k(this.elements[0].x,this.elements[0].y),x=new k.k(this.elements[0].x,this.elements[0].y);for(const H of this.elements)H.x<R.x?R.x=H.x:H.x>x.x&&(x.x=H.x),H.y<R.y?R.y=H.y:H.y>x.y&&(x.y=H.y);return{min:R,max:x,width:x.x-R.x,height:x.y-R.y}}}class i{_addToepoint(R){for(const x of R)this._epoints.push(x.x,x.y)}constructor(R,x,H){let k,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:earcut;this._points=new I,this._outlinepoints=new I,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=c,this._name=R,this._scene=H||n.c.LastCreatedScene,k=x instanceof J.f?x.getPoints():x,this._addToepoint(k),this._points.add(k),this._outlinepoints.add(k),"undefined"===typeof this.bjsEarcut&&D.c.Warn("Earcut was not found, the polygon will not be built.")}addHole(R){this._points.add(R);const x=new I;return x.add(R),this._holes.push(x),this._eholes.push(this._epoints.length/2),this._addToepoint(R),this}build(){let R=arguments.length>0&&void 0!==arguments[0]&&arguments[0],x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const k=new t.d(this._name,this._scene),c=this.buildVertexData(x,H);return k.Ga(U.g.PositionKind,c.xa,R),k.Ga(U.g.NormalKind,c.ya,R),k.Ga(U.g.UVKind,c.Aa,R),k.setIndices(c.indices),k}buildVertexData(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const H=new A.d,k=[],c=[],t=[],D=this._points.computeBounds();for(const A of this._points.elements)k.push(0,1,0),c.push(A.x,0,A.y),t.push((A.x-D.min.x)/D.width,(A.y-D.min.y)/D.height);const U=[],J=this.bjsEarcut(this._epoints,this._eholes,2);for(let A=0;A<J.length;A++)U.push(J[A]);if(R>0){const H=c.length/3;for(const x of this._points.elements)k.push(0,-1,0),c.push(x.x,-R,x.y),t.push(1-(x.x-D.min.x)/D.width,1-(x.y-D.min.y)/D.height);const A=U.length;for(let R=0;R<A;R+=3){const x=U[R+0],k=U[R+1],c=U[R+2];U.push(c+H),U.push(k+H),U.push(x+H)}this._addSide(c,k,t,U,D,this._outlinepoints,R,!1,x);for(const J of this._holes)this._addSide(c,k,t,U,D,J,R,!0,x)}return H.indices=U,H.xa=c,H.ya=k,H.Aa=t,H}_addSide(R,x,H,c,t,A,D,U,J){let n=R.length/3,g=0;for(let I=0;I<A.elements.length;I++){const i=A.elements[I],q=A.elements[(I+1)%A.elements.length];R.push(i.x,0,i.y),R.push(i.x,-D,i.y),R.push(q.x,0,q.y),R.push(q.x,-D,q.y);const S=A.elements[(I+A.elements.length-1)%A.elements.length],L=A.elements[(I+2)%A.elements.length];let b=new k.o(-(q.y-i.y),0,q.x-i.x),C=new k.o(-(i.y-S.y),0,i.x-S.x),F=new k.o(-(L.y-q.y),0,L.x-q.x);U||(b=b.scale(-1),C=C.scale(-1),F=F.scale(-1));const d=b.normalizeToNew();let P=C.normalizeToNew(),a=F.normalizeToNew();const X=k.o.Dot(P,d);P=X>J?X<V.e-1?new k.o(i.x,0,i.y).Pg(new k.o(q.x,0,q.y)).normalize():C.add(b).normalize():d;const M=k.o.Dot(F,b);a=M>J?M<V.e-1?new k.o(q.x,0,q.y).Pg(new k.o(i.x,0,i.y)).normalize():F.add(b).normalize():d,H.push(g/t.width,0),H.push(g/t.width,1),g+=b.length(),H.push(g/t.width,0),H.push(g/t.width,1),x.push(P.x,P.y,P.z),x.push(P.x,P.y,P.z),x.push(a.x,a.y,a.z),x.push(a.x,a.y,a.z),U?(c.push(n),c.push(n+2),c.push(n+1),c.push(n+1),c.push(n+2),c.push(n+3)):(c.push(n),c.push(n+1),c.push(n+2),c.push(n+1),c.push(n+3),c.push(n+2)),n+=4}}}var q=H(809);function S(R,x,H,t,D,J,V){const n=H||new Array(3),g=t,I=[],i=V||!1;for(let A=0;A<3;A++)void 0===n[A]&&(n[A]=new k.p(0,0,1,1)),g&&void 0===g[A]&&(g[A]=new c.d(1,1,1,1));const S=R.getVerticesData(U.g.PositionKind),L=R.getVerticesData(U.g.NormalKind),b=R.getVerticesData(U.g.UVKind),C=R.Gi(),F=S.length/9;let d=0,P=0,a=0,X=0,M=0;const B=[0];if(i)for(let k=F;k<S.length/3;k+=4)P=S[3*(k+2)]-S[3*k],a=S[3*(k+2)+2]-S[3*k+2],X=Math.sqrt(P*P+a*a),M+=X,B.push(M);let o=0,Z=0;for(let k=0;k<L.length;k+=3)Math.abs(L[k+1])<.001&&(Z=1),Math.abs(L[k+1]-1)<.001&&(Z=0),Math.abs(L[k+1]+1)<.001&&(Z=2),o=k/3,1===Z?(d=o-F,b[2*o]=d%4<1.5?i?n[Z].x+(n[Z].z-n[Z].x)*B[Math.floor(d/4)]/M:n[Z].x:i?n[Z].x+(n[Z].z-n[Z].x)*B[Math.floor(d/4)+1]/M:n[Z].z,b[2*o+1]=d%2===0?q.e?1-n[Z].w:n[Z].w:q.e?1-n[Z].y:n[Z].y):(b[2*o]=(1-b[2*o])*n[Z].x+b[2*o]*n[Z].z,b[2*o+1]=(1-b[2*o+1])*n[Z].y+b[2*o+1]*n[Z].w,q.e&&(b[2*o+1]=1-b[2*o+1])),g&&I.push(g[Z].r,g[Z].g,g[Z].b,g[Z].a);A.d._ComputeSides(x,S,C,L,b,D,J);const y=new A.d;if(y.indices=C,y.xa=S,y.ya=L,y.Aa=b,g){const R=x===A.d.DOUBLESIDE?I.concat(I):I;y.za=R}return y}function L(R,x){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:earcut;x.sideOrientation=t.d._GetDefaultSideOrientation(x.sideOrientation);const A=x.shape,D=x.holes||[],U=x.depth||0,J=x.smoothingThreshold||2,V=[];let g=[];for(let t=0;t<A.length;t++)V[t]=new k.k(A[t].x,A[t].z);V[0].equalsWithEpsilon(V[V.length-1],1e-8)&&V.pop();const I=new i(R,V,H||n.c.LastCreatedScene,c);for(let t=0;t<D.length;t++){g=[];for(let R=0;R<D[t].length;R++)g.push(new k.k(D[t][R].x,D[t][R].z));I.addHole(g)}const q=I.build(!1,U,J);q._originalBuilderSideOrientation=x.sideOrientation;return S(q,x.sideOrientation,x.faceUV,x.faceColors,x.frontUVs,x.backUVs,x.wrap).Ca(q,x.updatable),q}function b(R,x){return L(R,x,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:earcut)}A.d.CreatePolygon=S,t.d.CreatePolygon=function(R,x,H,k,c,t){return L(R,{shape:x,holes:k,updatable:c,sideOrientation:t},H,arguments.length>6&&void 0!==arguments[6]?arguments[6]:earcut)},t.d.ExtrudePolygon=function(R,x,H,k,c,t,A){return b(R,{shape:x,holes:c,depth:H,updatable:t,sideOrientation:A},k,arguments.length>7&&void 0!==arguments[7]?arguments[7]:earcut)}},12370:(R,x,H)=>{H.d(x,{d:()=>V,h:()=>n});var k=H(2288),c=H(661),t=H(471),A=H(819),D=H(12372);class U{constructor(R){this._paths=[],this._tempPaths=[],this._holes=[],this._resolution=R}moveTo(R,x){this._currentPath=new k.f(R,x),this._tempPaths.push(this._currentPath)}lineTo(R,x){this._currentPath.addLineTo(R,x)}quadraticCurveTo(R,x,H,k){this._currentPath.addQuadraticCurveTo(R,x,H,k,this._resolution)}bezierCurveTo(R,x,H,k,c,t){this._currentPath.addBezierCurveTo(R,x,H,k,c,t,this._resolution)}extractHoles(){for(const R of this._tempPaths)R.area()>0?this._holes.push(R):this._paths.push(R);if(!this._paths.length&&this._holes.length){const R=this._holes;this._holes=this._paths,this._paths=R}this._tempPaths.length=0}get paths(){return this._paths}get holes(){return this._holes}}function J(R,x,H,k,c,t){const A=t.glyphs[R]||t.glyphs["?"];if(!A)return null;const D=new U(c);if(A.o){const R=A.o.split(" ");for(let c=0,t=R.length;c<t;){switch(R[c++]){case"m":{const t=parseInt(R[c++])*x+H,A=parseInt(R[c++])*x+k;D.moveTo(t,A);break}case"l":{const t=parseInt(R[c++])*x+H,A=parseInt(R[c++])*x+k;D.lineTo(t,A);break}case"q":{const t=parseInt(R[c++])*x+H,A=parseInt(R[c++])*x+k,U=parseInt(R[c++])*x+H,J=parseInt(R[c++])*x+k;D.quadraticCurveTo(U,J,t,A);break}case"b":{const t=parseInt(R[c++])*x+H,A=parseInt(R[c++])*x+k,U=parseInt(R[c++])*x+H,J=parseInt(R[c++])*x+k,V=parseInt(R[c++])*x+H,n=parseInt(R[c++])*x+k;D.bezierCurveTo(U,J,V,n,t,A);break}}}}return D.extractHoles(),{offsetX:A.ha*x,shapePath:D}}function V(R,x,H,k){const c=Array.from(R),t=x/k.resolution,A=(k.boundingBox.yMax-k.boundingBox.yMin+k.underlineThickness)*t,D=[];let U=0,V=0;for(let n=0;n<c.length;n++){const R=c[n];if("\n"===R)U=0,V-=A;else{const x=J(R,t,U,V,H,k);x&&(U+=x.offsetX,D.push(x.shapePath))}}return D}function n(R,x,H){let k=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:50,resolution:8,depth:1},U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,J=arguments.length>5&&void 0!==arguments[5]?arguments[5]:earcut;const n=V(x,k.size||50,k.resolution||8,H),g=[];let I=0;for(const A of n){if(!A.paths.length)continue;const x=A.holes.slice();for(const H of A.paths){var i,q;const A=[],V=[],n=H.getPoints();for(const R of n)V.push(new c.o(R.x,0,R.y));const S=x.slice();for(const R of S){const k=R.getPoints();let t=!1;for(const R of k)if(H.isPointInside(R)){t=!0;break}if(!t)continue;const D=[];for(const R of k)D.push(new c.o(R.x,0,R.y));A.push(D),x.splice(x.indexOf(R),1)}if(!A.length&&x.length)for(const R of x){const x=R.getPoints(),H=[];for(const R of x)H.push(new c.o(R.x,0,R.y));A.push(H)}const L=(0,D.e)(R,{shape:V,holes:A.length?A:void 0,depth:k.depth||1,faceUV:k.faceUV||(null===(i=k.perLetterFaceUV)||void 0===i?void 0:i.call(k,I)),faceColors:k.faceColors||(null===(q=k.perLetterFaceColors)||void 0===q?void 0:q.call(k,I)),sideOrientation:t.d._GetDefaultSideOrientation(k.sideOrientation||t.d.DOUBLESIDE)},U,J);g.push(L),I++}}const S=t.d.MergeMeshes(g,!0,!0);if(S){const x=S.getBoundingInfo().boundingBox;S.position.x+=-(x.minimumWorld.x+x.maximumWorld.x)/2,S.position.y+=-(x.minimumWorld.y+x.maximumWorld.y)/2,S.position.z+=-(x.minimumWorld.z+x.maximumWorld.z)/2+x.extendSize.z,S.name=R;const H=new A.e("pivot",U);H.rotation.x=-Math.PI/2,S.parent=H,S.bakeCurrentTransformIntoVertices(),S.parent=null,H.dispose()}return S}},12380:(R,x,H)=>{H.d(x,{b:()=>U,c:()=>A,g:()=>D});var k=H(485),c=H(2523),t=H(12385);function A(){return"object"===typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),4):1}function D(R){return!!(R.wasmUrl&&(R.wasmBinary||R.wasmBinaryUrl)&&"object"===typeof WebAssembly||R.fallbackUrl)}class U{constructor(R){if(R.workerPool)return void(this._workerPoolPromise=Promise.resolve(R.workerPool));const x=R.wasmBinary,H=R.numWorkers??A(),D=H&&"function"===typeof Worker&&"function"===typeof URL,U=D||!R.jsModule,J=R.wasmUrl&&R.wasmBinaryUrl&&"object"===typeof WebAssembly?{url:U?k.e.GetBabylonScriptURL(R.wasmUrl,!0):"",wasmBinaryPromise:x?Promise.resolve(x):k.e.LoadFileAsync(k.e.GetBabylonScriptURL(R.wasmBinaryUrl,!0))}:{url:U?k.e.GetBabylonScriptURL(R.fallbackUrl):"",wasmBinaryPromise:Promise.resolve(void 0)};D?this._workerPoolPromise=J.wasmBinaryPromise.then((R=>{const x=this._getWorkerContent(),k=URL.createObjectURL(new Blob([x],{type:"application/javascript"}));return new c.e(H,(()=>{const x=new Worker(k);return(0,t.l)(x,R,J.url)}))})):this._modulePromise=J.wasmBinaryPromise.then((async x=>{if(!this._isModuleAvailable()&&!R.jsModule){if(!J.url)throw new Error("Draco codec module is not available");await k.e.LoadBabylonScriptAsync(J.url)}return await this._createModuleAsync(x,R.jsModule)}))}async whenReadyAsync(){this._workerPoolPromise?await this._workerPoolPromise:this._modulePromise&&await this._modulePromise}dispose(){this._workerPoolPromise&&this._workerPoolPromise.then((R=>{R.dispose()})),delete this._workerPoolPromise,delete this._modulePromise}}},12385:(R,x,H)=>{function k(R,x,H,k){const c=R;let t=null,A=null,D=null,U=null;const J={},V=x.find((R=>"POSITION"===R.dracoName));if(!V)throw new Error("Position attribute is required for Draco encoding");if(!H){const R=V.data.length/V.size;H=new(R>65535?Uint32Array:Uint16Array)(R);for(let x=0;x<R;x++)H[x]=x}try{t=new c.Encoder,A=new c.MeshBuilder,D=new c.Mesh,A.AddFacesToMesh(D,H.length/3,H);const R=new Map([[Float32Array,(R,x,H,k,c,t)=>R.AddFloatAttribute(x,H,k,c,t)],[Uint32Array,(R,x,H,k,c,t)=>R.AddUInt32Attribute(x,H,k,c,t)],[Uint16Array,(R,x,H,k,c,t)=>R.AddUInt16Attribute(x,H,k,c,t)],[Uint8Array,(R,x,H,k,c,t)=>R.AddUInt8Attribute(x,H,k,c,t)],[Int32Array,(R,x,H,k,c,t)=>R.AddInt32Attribute(x,H,k,c,t)],[Int16Array,(R,x,H,k,c,t)=>R.AddInt16Attribute(x,H,k,c,t)],[Int8Array,(R,x,H,k,c,t)=>R.AddInt8Attribute(x,H,k,c,t)]]);for(const H of x){H.data instanceof Uint8ClampedArray&&(H.data=new Uint8Array(H.data));const x=R.get(H.data.constructor),U=H.data.length/H.size;J[H.kind]=x(A,D,c[H.dracoName],U,H.size,H.data),k.quantizationBits&&k.quantizationBits[H.dracoName]&&t.SetAttributeQuantization(c[H.dracoName],k.quantizationBits[H.dracoName])}k.method&&t.SetEncodingMethod(c[k.method]),void 0!==k.encodeSpeed&&void 0!==k.decodeSpeed&&t.SetSpeedOptions(k.encodeSpeed,k.decodeSpeed),U=new c.DracoInt8Array;const V=t.EncodeMeshToDracoBuffer(D,U);if(V<=0)throw new Error("Draco encoding failed.");const n=new Int8Array(V);for(let x=0;x<V;x++)n[x]=U.GetValue(x);return{data:n,attributeIds:J}}finally{D&&c.destroy(D),A&&c.destroy(A),t&&c.destroy(t),U&&c.destroy(U)}}function c(){let R;onmessage=x=>{const H=x.data;switch(H.id){case"init":{H.url&&importScripts(H.url);const x=H.wasmBinary?{wasmBinary:H.wasmBinary}:{};R=DracoEncoderModule(x),postMessage({id:"initDone"});break}case"encodeMesh":if(!R)throw new Error("Draco encoder module is not available");R.then((R=>{const x=k(R,H.attributes,H.indices,H.options);postMessage({id:"encodeMeshDone",encodedMeshData:x},x?[x.data.buffer]:void 0)}))}}}function t(R,x,H,k,c){const t=R;let A=null,D=null,U=null;try{let R;A=new t.Decoder,D=new t.DecoderBuffer,D.Init(x,x.byteLength);const J=A.GetEncodedGeometryType(D);switch(J){case t.TRIANGULAR_MESH:{const x=new t.Mesh;if(R=A.DecodeBufferToMesh(D,x),!R.ok()||0===x.ptr)throw new Error(R.error_msg());const H=3*x.num_faces(),c=4*H,J=t._malloc(c);try{A.GetTrianglesUInt32Array(x,c,J);const R=new Uint32Array(H);R.set(new Uint32Array(t.HEAPF32.buffer,J,H)),k(R)}finally{t._free(J)}U=x;break}case t.POINT_CLOUD:{const x=new t.PointCloud;if(R=A.DecodeBufferToPointCloud(D,x),!R.ok()||!x.ptr)throw new Error(R.error_msg());U=x;break}default:throw new Error(`Invalid geometry type ${J}`)}const V=U.num_points(),n=(R,x,H,k)=>{const A=k.data_type(),D=k.num_components(),U=k.normalized(),J=k.byte_stride(),n=k.byte_offset(),g={[t.DT_FLOAT32]:{typedArrayConstructor:Float32Array,heap:t.HEAPF32},[t.DT_INT8]:{typedArrayConstructor:Int8Array,heap:t.HEAP8},[t.DT_INT16]:{typedArrayConstructor:Int16Array,heap:t.HEAP16},[t.DT_INT32]:{typedArrayConstructor:Int32Array,heap:t.HEAP32},[t.DT_UINT8]:{typedArrayConstructor:Uint8Array,heap:t.HEAPU8},[t.DT_UINT16]:{typedArrayConstructor:Uint16Array,heap:t.HEAPU16},[t.DT_UINT32]:{typedArrayConstructor:Uint32Array,heap:t.HEAPU32}}[A];if(!g)throw new Error(`Invalid data type ${A}`);const I=V*D,i=I*g.typedArrayConstructor.BYTES_PER_ELEMENT,q=t._malloc(i);try{R.GetAttributeDataArrayForAllPoints(x,k,A,i,q);const t=new g.typedArrayConstructor(g.heap.buffer,q,I);c(H,t.slice(),D,n,J,U)}finally{t._free(q)}};if(H)for(const x in H){const R=H[x],k=A.GetAttributeByUniqueId(U,R);n(A,U,x,k)}else{const R={position:t.POSITION,dj:t.NORMAL,color:t.COLOR,uv:t.TEX_COORD};for(const x in R){const H=A.GetAttributeId(U,R[x]);if(-1!==H){const R=A.GetAttribute(U,H);n(A,U,x,R)}}}return V}finally{U&&t.destroy(U),D&&t.destroy(D),A&&t.destroy(A)}}function A(){let R;onmessage=x=>{const H=x.data;switch(H.id){case"init":{H.url&&importScripts(H.url);const x=H.wasmBinary?{wasmBinary:H.wasmBinary}:{};R=DracoDecoderModule(x),postMessage({id:"initDone"});break}case"decodeMesh":if(!R)throw new Error("Draco decoder module is not available");R.then((R=>{const x=t(R,H.dataView,H.attributes,(R=>{postMessage({id:"indices",data:R},[R.buffer])}),((R,x,H,k,c,t)=>{postMessage({id:"attribute",kind:R,data:x,size:H,byteOffset:k,byteStride:c,normalized:t},[x.buffer])}));postMessage({id:"decodeMeshDone",totalVertices:x})}))}}}async function D(R,x,H){return await new Promise(((k,c)=>{const t=x=>{R.removeEventListener("error",t),R.removeEventListener("message",A),c(x)},A=x=>{"initDone"===x.data.id&&(R.removeEventListener("error",t),R.removeEventListener("message",A),k(R))};if(R.addEventListener("error",t),R.addEventListener("message",A),x){const k=x.slice(0);R.postMessage({id:"init",url:H,wasmBinary:k},[k])}else R.postMessage({id:"init",url:H})}))}H.d(x,{c:()=>t,g:()=>A,j:()=>k,k:()=>c,l:()=>D})},12391:(R,x,H)=>{H.d(x,{e:()=>k.g});var k=H(724)},12238:(R,x,H)=>{H.d(x,{d:()=>g});var k=H(661),c=H(493),t=H(813),A=H(471),D=H(497),U=H(819),J=H(724),V=H(485),n=H(610);A.d._instancedMeshFactory=(R,x)=>{const H=new g(R,x);if(x.instancedBuffers){H.instancedBuffers={};for(const R in x.instancedBuffers)H.instancedBuffers[R]=x.instancedBuffers[R]}return H};class g extends t.b{constructor(R,x){super(R,x.va()),this._indexInSourceMeshInstanceArray=-1,this._distanceToCamera=0,x.Oi(this),this._sourceMesh=x,this._unIndexed=x._unIndexed,this.position.p(x.position),this.rotation.p(x.rotation),this.ti.p(x.ti),x.rotationQuaternion&&(this.rotationQuaternion=x.rotationQuaternion.clone()),this.animations=x.animations.slice();for(const H of x.getAnimationRanges())null!=H&&this.createAnimationRange(H.name,H.from,H.to);if(this.infiniteDistance=x.infiniteDistance,this.setPivotMatrix(x.getPivotMatrix()),x.skeleton||x.morphTargetManager||!x.hasBoundingInfo)this.refreshBoundingInfo(!0,!0);else{const R=x.getBoundingInfo();this.buildBoundingInfo(R.minimum,R.maximum)}this._syncSubMeshes()}getClassName(){return"InstancedMesh"}get lightSources(){return this._sourceMesh._lightSources}_resyncLightSources(){}_resyncLightSource(){}_removeLightSource(){}get receiveShadows(){return this._sourceMesh.receiveShadows}set receiveShadows(R){var x;(null===(x=this._sourceMesh)||void 0===x?void 0:x.receiveShadows)!==R&&V.e.Warn("Setting receiveShadows on an instanced mesh has no effect")}get material(){return this._sourceMesh.material}set material(R){var x;(null===(x=this._sourceMesh)||void 0===x?void 0:x.material)!==R&&V.e.Warn("Setting material on an instanced mesh has no effect")}get visibility(){return this._sourceMesh.visibility}set visibility(R){var x;(null===(x=this._sourceMesh)||void 0===x?void 0:x.visibility)!==R&&V.e.Warn("Setting visibility on an instanced mesh has no effect")}get skeleton(){return this._sourceMesh.skeleton}set skeleton(R){var x;(null===(x=this._sourceMesh)||void 0===x?void 0:x.skeleton)!==R&&V.e.Warn("Setting skeleton on an instanced mesh has no effect")}get renderingGroupId(){return this._sourceMesh.renderingGroupId}set renderingGroupId(R){this._sourceMesh&&R!==this._sourceMesh.renderingGroupId&&c.c.Warn("Note - setting renderingGroupId of an instanced mesh has no effect on the scene")}getTotalVertices(){return this._sourceMesh?this._sourceMesh.getTotalVertices():0}getTotalIndices(){return this._sourceMesh.getTotalIndices()}get sourceMesh(){return this._sourceMesh}get Ci(){return this._sourceMesh._geometry}createInstance(R){return this._sourceMesh.createInstance(R)}isReady(){let R=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sourceMesh.isReady(R,!0)}getVerticesData(R,x,H){return this._sourceMesh.getVerticesData(R,x,H)}copyVerticesData(R,x){this._sourceMesh.copyVerticesData(R,x)}Ga(R,x,H,k){return this.sourceMesh&&this.sourceMesh.Ga(R,x,H,k),this.sourceMesh}updateVerticesData(R,x,H,k){return this.sourceMesh&&this.sourceMesh.updateVerticesData(R,x,H,k),this.sourceMesh}setIndices(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.sourceMesh&&this.sourceMesh.setIndices(R,x),this.sourceMesh}isVerticesDataPresent(R){return this._sourceMesh.isVerticesDataPresent(R)}Gi(){return this._sourceMesh.Gi()}get _positions(){return this._sourceMesh._positions}refreshBoundingInfo(){let R,x=arguments.length>0&&void 0!==arguments[0]&&arguments[0],H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.hasBoundingInfo&&this.getBoundingInfo().isLocked)return this;R="object"===typeof x?x:{applySkeleton:x,applyMorph:H};const k=this._sourceMesh.Ci?this._sourceMesh.Ci.boundingBias:null;return this.Fa(this._sourceMesh._getData(R,null,J.g.PositionKind),k),this}_preActivate(){return this._currentLOD&&this._currentLOD._preActivate(),this}_activate(R,x){if(super._activate(R,x),this._sourceMesh.Ii||c.c.Warn("Instances should only be created for meshes with geometry."),this._currentLOD){if(this._currentLOD._getWorldMatrixDeterminant()>=0!==this._getWorldMatrixDeterminant()>=0)return this._internalAbstractMeshDataInfo._actAsRegularMesh=!0,!0;if(this._internalAbstractMeshDataInfo._actAsRegularMesh=!1,this._currentLOD._registerInstanceForRenderId(this,R),x){if(!this._currentLOD._internalAbstractMeshDataInfo._isActiveIntermediate)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!0,!0}else if(!this._currentLOD._internalAbstractMeshDataInfo._isActive)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstances=!0,!0}return!1}_postActivate(){this._sourceMesh.edgesShareWithInstances&&this._sourceMesh._edgesRenderer&&this._sourceMesh._edgesRenderer.isEnabled&&this._sourceMesh._renderingGroup?(this._sourceMesh._renderingGroup._edgesRenderers.pushNoDuplicate(this._sourceMesh._edgesRenderer),this._sourceMesh._edgesRenderer.customInstances.push(this.getWorldMatrix())):this._edgesRenderer&&this._edgesRenderer.isEnabled&&this._sourceMesh._renderingGroup&&this._sourceMesh._renderingGroup._edgesRenderers.push(this._edgesRenderer)}getWorldMatrix(){if(this._currentLOD&&this._currentLOD!==this._sourceMesh&&this._currentLOD.billboardMode!==U.e.BILLBOARDMODE_NONE&&this._currentLOD._masterMesh!==this){this._billboardWorldMatrix||(this._billboardWorldMatrix=new k.e);const R=this._currentLOD._masterMesh;return this._currentLOD._masterMesh=this,k.g.Bi[7].p(this._currentLOD.position),this._currentLOD.position.set(0,0,0),this._billboardWorldMatrix.p(this._currentLOD.Fi(!0)),this._currentLOD.position.p(k.g.Bi[7]),this._currentLOD._masterMesh=R,this._billboardWorldMatrix}return super.getWorldMatrix()}get isAnInstance(){return!0}getLOD(R){if(!R)return this;const x=this.sourceMesh.getLODLevels();if(x&&0!==x.length){const x=this.getBoundingInfo();this._currentLOD=this.sourceMesh.getLOD(R,x.boundingSphere)}else this._currentLOD=this.sourceMesh;return this._currentLOD}_preActivateForIntermediateRendering(R){return this.sourceMesh._preActivateForIntermediateRendering(R)}_syncSubMeshes(){if(this.releaseSubMeshes(),this._sourceMesh.Ii)for(let R=0;R<this._sourceMesh.Ii.length;R++)this._sourceMesh.Ii[R].clone(this,this._sourceMesh);return this}_generatePointsArray(){return this._sourceMesh._generatePointsArray()}Ea(){return this.hasBoundingInfo?this.getBoundingInfo().update(this.worldMatrixFromCache):this.buildBoundingInfo(this.absolutePosition,this.absolutePosition,this.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(this.worldMatrixFromCache),this}clone(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,H=arguments.length>2?arguments[2]:void 0;const k=((arguments.length>3?arguments[3]:void 0)||this._sourceMesh).createInstance(R);if(D.b.DeepCopy(this,k,["name","Ii","uniqueId","parent","lightSources","receiveShadows","material","visibility","skeleton","sourceMesh","isAnInstance","facetNb","isFacetDataEnabled","isBlocked","useBones","hasInstances","collider","edgesRenderer","forward","up","right","absolutePosition","absoluteScaling","absoluteRotationQuaternion","Di","nonUniformScaling","behaviors","worldMatrixFromCache","hasThinInstances","hasBoundingInfo","Ci"],[]),this.refreshBoundingInfo(),x&&(k.parent=x),!H)for(let c=0;c<this.va().meshes.length;c++){const R=this.va().meshes[c];R.parent===this&&R.clone(R.name,k)}return k.Fi(!0),this.onClonedObservable.notifyObservers(k),k}dispose(R){let x=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._sourceMesh.Pi(this),super.dispose(R,x)}_serializeAsParent(R){super._serializeAsParent(R),R.parentId=this._sourceMesh.uniqueId,R.parentInstanceIndex=this._indexInSourceMeshInstanceArray}instantiateHierarchy(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,x=arguments.length>1?arguments[1]:void 0,H=arguments.length>2?arguments[2]:void 0;const k=this.clone("Clone of "+(this.name||this.id),R||this.parent,!0,x&&x.newSourcedMesh);k&&H&&H(this,k);for(const c of this.getChildTransformNodes(!0))c.instantiateHierarchy(k,x,H);return k}}A.d.prototype.registerInstancedBuffer=function(R,x){var H,k;if(null===(H=this._userInstancedBuffersStorage)||void 0===H||null===(k=H.vertexBuffers[R])||void 0===k||k.dispose(),!this.instancedBuffers){this.instancedBuffers={};for(const R of this.instances)R.instancedBuffers={}}this._userInstancedBuffersStorage||(this._userInstancedBuffersStorage={data:{},vertexBuffers:{},strides:{},sizes:{},vertexArrayObjects:this.getEngine().getCaps().vertexArrayObject?{}:void 0}),this.instancedBuffers[R]=null,this._userInstancedBuffersStorage.strides[R]=x,this._userInstancedBuffersStorage.sizes[R]=32*x,this._userInstancedBuffersStorage.data[R]=new Float32Array(this._userInstancedBuffersStorage.sizes[R]),this._userInstancedBuffersStorage.vertexBuffers[R]=new J.g(this.getEngine(),this._userInstancedBuffersStorage.data[R],R,!0,!1,x,!0);for(const c of this.instances)c.instancedBuffers[R]=null;this._invalidateInstanceVertexArrayObject(),this._markSubMeshesAsAttributesDirty()},A.d.prototype._processInstancedBuffers=function(R,x){const H=R?R.length:0;for(const k in this.instancedBuffers){let c=this._userInstancedBuffersStorage.sizes[k];const t=this._userInstancedBuffersStorage.strides[k],A=(H+1)*t;for(;c<A;)c*=2;this._userInstancedBuffersStorage.data[k].length!=c&&(this._userInstancedBuffersStorage.data[k]=new Float32Array(c),this._userInstancedBuffersStorage.sizes[k]=c,this._userInstancedBuffersStorage.vertexBuffers[k]&&(this._userInstancedBuffersStorage.vertexBuffers[k].dispose(),this._userInstancedBuffersStorage.vertexBuffers[k]=null));const D=this._userInstancedBuffersStorage.data[k];let U=0;if(x){const R=this.instancedBuffers[k];R.toArray?R.toArray(D,U):R.copyToArray?R.copyToArray(D,U):D[U]=R,U+=t}for(let x=0;x<H;x++){const H=R[x].instancedBuffers[k];H.toArray?H.toArray(D,U):H.copyToArray?H.copyToArray(D,U):D[U]=H,U+=t}this._userInstancedBuffersStorage.vertexBuffers[k]?this._userInstancedBuffersStorage.vertexBuffers[k].updateDirectly(D,0):(this._userInstancedBuffersStorage.vertexBuffers[k]=new J.g(this.getEngine(),this._userInstancedBuffersStorage.data[k],k,!0,!1,t,!0),this._invalidateInstanceVertexArrayObject())}},A.d.prototype._invalidateInstanceVertexArrayObject=function(){if(this._userInstancedBuffersStorage&&void 0!==this._userInstancedBuffersStorage.vertexArrayObjects){for(const R in this._userInstancedBuffersStorage.vertexArrayObjects)this.getEngine().releaseVertexArrayObject(this._userInstancedBuffersStorage.vertexArrayObjects[R]);this._userInstancedBuffersStorage.vertexArrayObjects={}}},A.d.prototype._disposeInstanceSpecificData=function(){for(this._instanceDataStorage.instancesBuffer&&(this._instanceDataStorage.instancesBuffer.dispose(),this._instanceDataStorage.instancesBuffer=null);this.instances.length;)this.instances[0].dispose();for(const R in this.instancedBuffers)this._userInstancedBuffersStorage.vertexBuffers[R]&&this._userInstancedBuffersStorage.vertexBuffers[R].dispose();this._invalidateInstanceVertexArrayObject(),this.instancedBuffers={}},(0,n.h)("BABYLON.InstancedMesh",g)},12356:(R,x,H)=>{H.d(x,{e:()=>J});var k=H(695),c=H(724),t=H(471),A=H(12238),D=H(837),U=H(12364);t.d._LinesMeshParser=(R,x)=>J.Parse(R,x);class J extends t.d{_isShaderMaterial(R){return"ShaderMaterial"===R.getClassName()}constructor(R){let x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>5?arguments[5]:void 0,A=arguments.length>6?arguments[6]:void 0,D=arguments.length>7?arguments[7]:void 0;super(R,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,x,arguments.length>4?arguments[4]:void 0),this.useVertexColor=t,this.useVertexAlpha=A,this.color=new k.c(1,1,1),this.alpha=1,this._shaderLanguage=0,x&&(this.color=x.color.clone(),this.alpha=x.alpha,this.useVertexColor=x.useVertexColor,this.useVertexAlpha=x.useVertexAlpha),this.intersectionThreshold=.1;const V={attributes:[c.g.PositionKind],uniforms:["world","viewProjection"],needAlphaBlending:!0,defines:[],useClipPlane:null,shaderLanguage:0};if(this.useVertexAlpha?V.defines.push("#define VERTEXALPHA"):V.needAlphaBlending=!1,this.useVertexColor?(V.defines.push("#define VERTEXCOLOR"),V.attributes.push(c.g.ColorKind)):(V.uniforms.push("color"),this._color4=new k.d),D)this.material=D;else{this.va().getEngine().isWebGPU&&!J.ForceGLSL&&(this._shaderLanguage=1),V.shaderLanguage=this._shaderLanguage,V.extraInitializationsAsync=async()=>{1===this._shaderLanguage?await Promise.all([H.e(38).then(H.bind(H,14350)),H.e(34).then(H.bind(H,14359))]):await Promise.all([H.e(32).then(H.bind(H,14363)),H.e(31).then(H.bind(H,14367))])},this.material=new U.c("colorShader",this.va(),"color",V,!1),this.material.doNotSerialize=!0}}isReady(){return!!this._lineMaterial.isReady(this,!!this._userInstancedBuffersStorage||this.hasThinInstances)&&super.isReady()}getClassName(){return"LinesMesh"}get material(){return this._lineMaterial}set material(R){this._lineMaterial=R,this._lineMaterial.fillMode=D.b.LineListDrawMode}get checkCollisions(){return!1}set checkCollisions(R){}_bind(R,x){if(!this._geometry)return this;const H=this.isUnIndexed?null:this._geometry.getIndexBuffer();if(!this._userInstancedBuffersStorage||this.hasThinInstances?this._geometry._bind(x,H):this._geometry._bind(x,H,this._userInstancedBuffersStorage.vertexBuffers,this._userInstancedBuffersStorage.vertexArrayObjects),!this.useVertexColor&&this._isShaderMaterial(this._lineMaterial)){const{r:R,g:x,b:H}=this.color;this._color4.set(R,x,H,this.alpha),this._lineMaterial.setColor4("color",this._color4)}return this}_draw(R,x,H){if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;const k=this.va().getEngine();return this._unIndexed?k.drawArraysType(D.b.LineListDrawMode,R.verticesStart,R.verticesCount,H):k.drawElementsType(D.b.LineListDrawMode,R.indexStart,R.indexCount,H),this}dispose(R){(arguments.length>2?arguments[2]:void 0)||this._lineMaterial.dispose(!1,!1,!0),super.dispose(R)}clone(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,H=arguments.length>2?arguments[2]:void 0;if(x&&void 0===x._addToSceneRootNodes){const H=x;return H.source=this,new J(R,this.va(),H.parent,H.source,H.doNotCloneChildren)}return new J(R,this.va(),x,this,H)}createInstance(R){const x=new V(R,this);if(this.instancedBuffers){x.instancedBuffers={};for(const R in this.instancedBuffers)x.instancedBuffers[R]=this.instancedBuffers[R]}return x}serialize(R){super.serialize(R),R.color=this.color.Li(),R.alpha=this.alpha}static Parse(R,x){const H=new J(R.name,x);return H.color=k.c.zi(R.color),H.alpha=R.alpha,H}}J.ForceGLSL=!1;class V extends A.d{constructor(R,x){super(R,x),this.intersectionThreshold=x.intersectionThreshold}getClassName(){return"InstancedLinesMesh"}}},12266:(R,x,H)=>{H.d(x,{c:()=>A});var k=H(2311),c=H(2489);let t=0;const A=R=>{if(!R.environmentBRDFTexture){const x=R.useDelayedTextureLoading;R.useDelayedTextureLoading=!1;const H=R._blockEntityCollection;R._blockEntityCollection=!1;const A=k.d.CreateFromBase64String("data:image/png;base64,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","EnvironmentBRDFTexture"+t++,R,!0,!1,k.d.BILINEAR_SAMPLINGMODE);R._blockEntityCollection=H;const D=R.getEngine().getLoadedTexturesCache(),U=D.indexOf(A.getInternalTexture());-1!==U&&D.splice(U,1),A.isRGBD=!0,A.wrapU=k.d.CLAMP_ADDRESSMODE,A.wrapV=k.d.CLAMP_ADDRESSMODE,R.environmentBRDFTexture=A,R.useDelayedTextureLoading=x,c.d.ExpandRGBDTexture(A);const J=R.getEngine().onContextRestoredObservable.add((()=>{A.isRGBD=!0;const x=R.onBeforeRenderObservable.add((()=>{A.isReady()&&(R.onBeforeRenderObservable.remove(x),c.d.ExpandRGBDTexture(A))}))}));R.Vi.add((()=>{R.getEngine().onContextRestoredObservable.remove(J)}))}return R.environmentBRDFTexture}},12393:(R,x,H)=>{function k(){const R=R=>!!R&&"object"===typeof R;for(var x=arguments.length,H=new Array(x),c=0;c<x;c++)H[c]=arguments[c];return H.reduce(((x,H)=>{const c=Object.keys(H);for(const t of c){const c=x[t],A=H[t];Array.isArray(c)&&Array.isArray(A)?x[t]=c.concat(...A):R(c)&&R(A)?x[t]=k(c,A):x[t]=A}return x}),{})}H.d(x,{e:()=>k})},2523:(R,x,H)=>{H.d(x,{e:()=>c});class k{constructor(R){this._pendingActions=new Array,this._workerInfos=R.map((R=>({workerPromise:Promise.resolve(R),idle:!0})))}dispose(){for(const R of this._workerInfos)R.workerPromise.then((R=>{R.terminate()}));this._workerInfos.length=0,this._pendingActions.length=0}push(R){this._executeOnIdleWorker(R)||this._pendingActions.push(R)}_executeOnIdleWorker(R){for(const x of this._workerInfos)if(x.idle)return this._execute(x,R),!0;return!1}_execute(R,x){R.idle=!1,R.workerPromise.then((H=>{x(H,(()=>{const x=this._pendingActions.shift();x?this._execute(R,x):R.idle=!0}))}))}}class c extends k{constructor(R,x){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.DefaultOptions;super([]),this._maxWorkers=R,this._createWorkerAsync=x,this._options=H}push(R){if(!this._executeOnIdleWorker(R))if(this._workerInfos.length<this._maxWorkers){const x={workerPromise:this._createWorkerAsync(),idle:!1};this._workerInfos.push(x),this._execute(x,R)}else this._pendingActions.push(R)}_execute(R,x){R.timeoutId&&(clearTimeout(R.timeoutId),delete R.timeoutId),super._execute(R,((H,k)=>{x(H,(()=>{k(),R.idle&&(R.timeoutId=setTimeout((()=>{R.workerPromise.then((R=>{R.terminate()}));const x=this._workerInfos.indexOf(R);-1!==x&&this._workerInfos.splice(x,1)}),this._options.idleTimeElapsedBeforeRelease))}))}))}}c.DefaultOptions={idleTimeElapsedBeforeRelease:1e3}},12340:(R,x,H)=>{H.d(x,{e:()=>V});var k=H(643),c=H(476),t=H(513),A=H(724),D=H(647),U=H(687),J=H(610);class V{get influence(){return this._influence}set influence(R){if(this._influence===R)return;const x=this._influence;this._influence=R,this.onInfluenceChanged.hasObservers()&&this.onInfluenceChanged.notifyObservers(0===x||0===R)}get animationPropertiesOverride(){return!this._animationPropertiesOverride&&this._scene?this._scene.animationPropertiesOverride:this._animationPropertiesOverride}set animationPropertiesOverride(R){this._animationPropertiesOverride=R}constructor(R){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.name=R,this.animations=[],this._positions=null,this._normals=null,this._tangents=null,this._uvs=null,this._uv2s=null,this._colors=null,this._uniqueId=0,this.onInfluenceChanged=new c.d,this._onDataLayoutChanged=new c.d,this._animationPropertiesOverride=null,this.id=R,this._scene=H||t.c.LastCreatedScene,this.influence=x,this._scene&&(this._uniqueId=this._scene.getUniqueId())}get uniqueId(){return this._uniqueId}get hasPositions(){return!!this._positions}get hasNormals(){return!!this._normals}get hasTangents(){return!!this._tangents}get hasUVs(){return!!this._uvs}get hasUV2s(){return!!this._uv2s}get hasColors(){return!!this._colors}get vertexCount(){return this._positions?this._positions.length/3:this._normals?this._normals.length/3:this._tangents?this._tangents.length/3:this._uvs?this._uvs.length/2:this._uv2s?this._uv2s.length/2:this._colors?this._colors.length/4:0}setPositions(R){const x=this.hasPositions;this._positions=R,x!==this.hasPositions&&this._onDataLayoutChanged.notifyObservers(void 0)}getPositions(){return this._positions}setNormals(R){const x=this.hasNormals;this._normals=R,x!==this.hasNormals&&this._onDataLayoutChanged.notifyObservers(void 0)}getNormals(){return this._normals}setTangents(R){const x=this.hasTangents;this._tangents=R,x!==this.hasTangents&&this._onDataLayoutChanged.notifyObservers(void 0)}getTangents(){return this._tangents}setUVs(R){const x=this.hasUVs;this._uvs=R,x!==this.hasUVs&&this._onDataLayoutChanged.notifyObservers(void 0)}getUVs(){return this._uvs}setUV2s(R){const x=this.hasUV2s;this._uv2s=R,x!==this.hasUV2s&&this._onDataLayoutChanged.notifyObservers(void 0)}getUV2s(){return this._uv2s}setColors(R){const x=this.hasColors;this._colors=R,x!==this.hasColors&&this._onDataLayoutChanged.notifyObservers(void 0)}getColors(){return this._colors}clone(){const R=U.d.Clone((()=>new V(this.name,this.influence,this._scene)),this);return R._positions=this._positions,R._normals=this._normals,R._tangents=this._tangents,R._uvs=this._uvs,R._uv2s=this._uv2s,R._colors=this._colors,R}serialize(){const R={};return R.name=this.name,R.influence=this.influence,R.xa=Array.prototype.slice.call(this.getPositions()),null!=this.id&&(R.id=this.id),this.hasNormals&&(R.ya=Array.prototype.slice.call(this.getNormals())),this.hasTangents&&(R.tangents=Array.prototype.slice.call(this.getTangents())),this.hasUVs&&(R.Aa=Array.prototype.slice.call(this.getUVs())),this.hasUV2s&&(R.uv2s=Array.prototype.slice.call(this.getUV2s())),this.hasColors&&(R.za=Array.prototype.slice.call(this.getColors())),U.d.AppendSerializedAnimations(this,R),R}getClassName(){return"MorphTarget"}static Parse(R,x){const H=new V(R.name,R.influence);if(H.setPositions(R.xa),null!=R.id&&(H.id=R.id),R.ya&&H.setNormals(R.ya),R.tangents&&H.setTangents(R.tangents),R.Aa&&H.setUVs(R.Aa),R.uv2s&&H.setUV2s(R.uv2s),R.za&&H.setColors(R.za),R.animations){for(let x=0;x<R.animations.length;x++){const k=R.animations[x],c=(0,J.e)("BABYLON.Animation");c&&H.animations.push(c.Parse(k))}R.autoAnimate&&x&&x.beginAnimation(H,R.autoAnimateFrom,R.autoAnimateTo,R.autoAnimateLoop,R.autoAnimateSpeed||1)}return H}static FromMesh(R,x,H){x||(x=R.name);const k=new V(x,H,R.va());return k.setPositions(R.getVerticesData(A.g.PositionKind)),R.isVerticesDataPresent(A.g.NormalKind)&&k.setNormals(R.getVerticesData(A.g.NormalKind)),R.isVerticesDataPresent(A.g.TangentKind)&&k.setTangents(R.getVerticesData(A.g.TangentKind)),R.isVerticesDataPresent(A.g.UVKind)&&k.setUVs(R.getVerticesData(A.g.UVKind)),R.isVerticesDataPresent(A.g.UV2Kind)&&k.setUV2s(R.getVerticesData(A.g.UV2Kind)),R.isVerticesDataPresent(A.g.ColorKind)&&k.setColors(R.getVerticesData(A.g.ColorKind)),k}}(0,k.d)([(0,D.Q)()],V.prototype,"id",void 0)}}]);