"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[15],{15197:(p,b,M)=>{M.r(b),M.d(b,{_IESTextureLoader:()=>P});var h=M(12789);function Q(p){return p.split(" ").filter((p=>""!==p)).map((p=>parseFloat(p)))}function mp(p,b,M){for(;M.length!==b;){const b=Q(p.lines[p.index++]);M.push(...b)}}function y(p,b,M){let Q=0,mp=0,y=0,P=0,w=0,t=0;for(let h=0;h<p.numberOfHorizontalAngles-1;h++)if(M<p.horizontalAngles[h+1]||h===p.numberOfHorizontalAngles-2){mp=h,y=p.horizontalAngles[h],P=p.horizontalAngles[h+1];break}for(let h=0;h<p.numberOfVerticalAngles-1;h++)if(b<p.verticalAngles[h+1]||h===p.numberOfVerticalAngles-2){Q=h,w=p.verticalAngles[h],t=p.verticalAngles[h+1];break}const z=P-y,x=t-w;if(0===x)return 0;const S=0===z?0:(M-y)/z,X=(b-w)/x,c=0===z?mp:mp+1,J=(0,h.Lerp)(p.candelaValues[mp][Q],p.candelaValues[c][Q],S),g=(0,h.Lerp)(p.candelaValues[mp][Q+1],p.candelaValues[c][Q+1],S);return(0,h.Lerp)(J,g,X)}class P{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(p,b,M){const h=function(p){const b={lines:new TextDecoder("utf-8").decode(p).split("\n"),index:0},M={version:b.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(b.index=1;b.lines.length>0&&!b.lines[b.index].includes("TILT=");)b.index++;b.lines[b.index].includes("INCLUDE"),b.index++;const h=Q(b.lines[b.index++]);M.numberOfLights=h[0],M.lumensPerLamp=h[1],M.candelaMultiplier=h[2],M.numberOfVerticalAngles=h[3],M.numberOfHorizontalAngles=h[4],M.photometricType=h[5],M.unitsType=h[6],M.width=h[7],M.length=h[8],M.height=h[9];const P=Q(b.lines[b.index++]);M.ballastFactor=P[0],M.fileGenerationType=P[1],M.inputWatts=P[2];for(let Q=0;Q<M.numberOfHorizontalAngles;Q++)M.candelaValues[Q]=[];mp(b,M.numberOfVerticalAngles,M.verticalAngles),mp(b,M.numberOfHorizontalAngles,M.horizontalAngles);for(let Q=0;Q<M.numberOfHorizontalAngles;Q++)mp(b,M.numberOfVerticalAngles,M.candelaValues[Q]);let w=-1;for(let Q=0;Q<M.numberOfHorizontalAngles;Q++)for(let p=0;p<M.numberOfVerticalAngles;p++)M.candelaValues[Q][p]*=M.candelaValues[Q][p]*M.candelaMultiplier*M.ballastFactor*M.fileGenerationType,w=Math.max(w,M.candelaValues[Q][p]);if(w>0)for(let Q=0;Q<M.numberOfHorizontalAngles;Q++)for(let p=0;p<M.numberOfVerticalAngles;p++)M.candelaValues[Q][p]/=w;const t=180,z=360,x=new Float32Array(64800),S=M.horizontalAngles[0],X=M.horizontalAngles[M.numberOfHorizontalAngles-1];for(let Q=0;Q<64800;Q++){let p=Q%z;const b=Math.floor(Q/z);X-S!==0&&(p<S||p>=X)&&(p%=2*X,p>X&&(p=2*X-p)),x[b+p*t]=y(M,b,p)}return{width:180,height:1,data:x}}(new Uint8Array(p.buffer,p.byteOffset,p.byteLength));M(h.width,h.height,!1,!1,(()=>{const p=b.getEngine();b.type=1,b.format=6,b._gammaSpace=!1,p._uploadDataToTextureDirectly(b,h.data)}))}}},12789:(p,b,M)=>{function h(p){return parseInt(p.toString().replace(/\W/g,""))}function Q(p,b){let M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1401298e-51;return Math.abs(p-b)<=M}function mp(p,b,M){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1401298e-51;return p<b-h||p>M+h}function y(p,b){return p===b?p:Math.random()*(b-p)+p}function P(p,b,M){return p+(b-p)*M}function w(p,b,M){let h=g(b-p,360);return h>180&&(h-=360),p+h*S(M)}function t(p,b,M){let h=0;return h=p!=b?S((M-p)/(b-p)):0,h}function z(p,b,M,h,Q){const mp=Q*Q,y=Q*mp;return p*(2*y-3*mp+1)+M*(-2*y+3*mp)+b*(y-2*mp+Q)+h*(y-mp)}function x(p,b,M,h,Q){const mp=Q*Q;return 6*(mp-Q)*p+(3*mp-4*Q+1)*b+6*(-mp+Q)*M+(3*mp-2*Q)*h}function S(p){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(M,Math.max(b,p))}function X(p){return p-=2*Math.PI*Math.floor((p+Math.PI)/(2*Math.PI))}function c(p){const b=p.toString(16);return p<=15?("0"+b).toUpperCase():b.toUpperCase()}function J(p){if(Math.log2)return Math.floor(Math.log2(p));if(p<0)return NaN;if(0===p)return-1/0;let b=0;if(p<1){for(;p<1;)b++,p*=2;b=-b}else if(p>1)for(;p>1;)b++,p=Math.floor(p/2);return b}function g(p,b){return p-Math.floor(p/b)*b}function f(p,b,M){return(p-b)/(M-b)}function Y(p,b,M){return p*(M-b)+b}function a(p,b){let M=g(b-p,360);return M>180&&(M-=360),M}function o(p,b){const M=g(p,2*b);return b-Math.abs(M-b)}function l(p,b,M){let h=S(M);return h=-2*h*h*h+3*h*h,b*h+p*(1-h)}function L(p,b,M){let h=0;return h=Math.abs(b-p)<=M?b:p+Math.sign(b-p)*M,h}function u(p,b,M){const h=a(p,b);let Q=0;return Q=-M<h&&h<M?b:L(p,b=p+h,M),Q}function e(p,b,M){return(p-b)/(M-b)}function d(p,b,M){return(M-b)*p+b}function I(p,b){const M=p%b;return 0===M?b:I(b,M)}M.r(b),M.d(b,{Clamp:()=>S,DeltaAngle:()=>a,Denormalize:()=>Y,ExtractAsInt:()=>h,Hermite:()=>z,Hermite1stDerivative:()=>x,HighestCommonFactor:()=>I,ILog2:()=>J,InverseLerp:()=>t,Lerp:()=>P,LerpAngle:()=>w,MoveTowards:()=>L,MoveTowardsAngle:()=>u,Normalize:()=>f,NormalizeRadians:()=>X,OutsideRange:()=>mp,PercentToRange:()=>d,PingPong:()=>o,RandomRange:()=>y,RangeToPercent:()=>e,Repeat:()=>g,SmoothStep:()=>l,ToHex:()=>c,WithinEpsilon:()=>Q})}}]);