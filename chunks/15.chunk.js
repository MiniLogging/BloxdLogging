"use strict";(self.ipz2em9uj1g=self.ipz2em9uj1g||[]).push([[15],{15049:(r,O,W)=>{W.r(O),W.d(O,{_IESTextureLoader:()=>h});var q=W(12602);function Q(r){return r.split(" ").filter((r=>""!==r)).map((r=>parseFloat(r)))}function C(r,O,W){for(;W.length!==O;){const O=Q(r.lines[r.index++]);W.push(...O)}}function T(r,O,W){let Q=0,C=0,T=0,h=0,J=0,mr=0;for(let q=0;q<r.numberOfHorizontalAngles-1;q++)if(W<r.horizontalAngles[q+1]||q===r.numberOfHorizontalAngles-2){C=q,T=r.horizontalAngles[q],h=r.horizontalAngles[q+1];break}for(let q=0;q<r.numberOfVerticalAngles-1;q++)if(O<r.verticalAngles[q+1]||q===r.numberOfVerticalAngles-2){Q=q,J=r.verticalAngles[q],mr=r.verticalAngles[q+1];break}const d=h-T,v=mr-J;if(0===v)return 0;const g=0===d?0:(W-T)/d,K=(O-J)/v,U=0===d?C:C+1,P=(0,q.Lerp)(r.candelaValues[C][Q],r.candelaValues[U][Q],g),b=(0,q.Lerp)(r.candelaValues[C][Q+1],r.candelaValues[U][Q+1],g);return(0,q.Lerp)(P,b,K)}class h{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(r,O,W){const q=function(r){const O={lines:new TextDecoder("utf-8").decode(r).split("\n"),index:0},W={version:O.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(O.index=1;O.lines.length>0&&!O.lines[O.index].includes("TILT=");)O.index++;O.lines[O.index].includes("INCLUDE"),O.index++;const q=Q(O.lines[O.index++]);W.numberOfLights=q[0],W.lumensPerLamp=q[1],W.candelaMultiplier=q[2],W.numberOfVerticalAngles=q[3],W.numberOfHorizontalAngles=q[4],W.photometricType=q[5],W.unitsType=q[6],W.width=q[7],W.length=q[8],W.height=q[9];const h=Q(O.lines[O.index++]);W.ballastFactor=h[0],W.fileGenerationType=h[1],W.inputWatts=h[2];for(let Q=0;Q<W.numberOfHorizontalAngles;Q++)W.candelaValues[Q]=[];C(O,W.numberOfVerticalAngles,W.verticalAngles),C(O,W.numberOfHorizontalAngles,W.horizontalAngles);for(let Q=0;Q<W.numberOfHorizontalAngles;Q++)C(O,W.numberOfVerticalAngles,W.candelaValues[Q]);let J=-1;for(let Q=0;Q<W.numberOfHorizontalAngles;Q++)for(let r=0;r<W.numberOfVerticalAngles;r++)W.candelaValues[Q][r]*=W.candelaValues[Q][r]*W.candelaMultiplier*W.ballastFactor*W.fileGenerationType,J=Math.max(J,W.candelaValues[Q][r]);if(J>0)for(let Q=0;Q<W.numberOfHorizontalAngles;Q++)for(let r=0;r<W.numberOfVerticalAngles;r++)W.candelaValues[Q][r]/=J;const mr=180,d=360,v=new Float32Array(64800),g=W.horizontalAngles[0],K=W.horizontalAngles[W.numberOfHorizontalAngles-1];for(let Q=0;Q<64800;Q++){let r=Q%d;const O=Math.floor(Q/d);K-g!==0&&(r<g||r>=K)&&(r%=2*K,r>K&&(r=2*K-r)),v[O+r*mr]=T(W,O,r)}return{width:180,height:1,data:v}}(new Uint8Array(r.buffer,r.byteOffset,r.byteLength));W(q.width,q.height,!1,!1,(()=>{const r=O.getEngine();O.type=1,O.format=6,O._gammaSpace=!1,r._uploadDataToTextureDirectly(O,q.data)}))}}},12602:(r,O,W)=>{function q(r){return parseInt(r.toString().replace(/\W/g,""))}function Q(r,O){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1401298e-51;return Math.abs(r-O)<=W}function C(r,O,W){let q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1401298e-51;return r<O-q||r>W+q}function T(r,O){return r===O?r:Math.random()*(O-r)+r}function h(r,O,W){return r+(O-r)*W}function J(r,O,W){let q=b(O-r,360);return q>180&&(q-=360),r+q*g(W)}function mr(r,O,W){let q=0;return q=r!=O?g((W-r)/(O-r)):0,q}function d(r,O,W,q,Q){const C=Q*Q,T=Q*C;return r*(2*T-3*C+1)+W*(-2*T+3*C)+O*(T-2*C+Q)+q*(T-C)}function v(r,O,W,q,Q){const C=Q*Q;return 6*(C-Q)*r+(3*C-4*Q+1)*O+6*(-C+Q)*W+(3*C-2*Q)*q}function g(r){let O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(W,Math.max(O,r))}function K(r){return r-=2*Math.PI*Math.floor((r+Math.PI)/(2*Math.PI))}function U(r){const O=r.toString(16);return r<=15?("0"+O).toUpperCase():O.toUpperCase()}function P(r){if(Math.log2)return Math.floor(Math.log2(r));if(r<0)return NaN;if(0===r)return-1/0;let O=0;if(r<1){for(;r<1;)O++,r*=2;O=-O}else if(r>1)for(;r>1;)O++,r=Math.floor(r/2);return O}function b(r,O){return r-Math.floor(r/O)*O}function e(r,O,W){return(r-O)/(W-O)}function Y(r,O,W){return r*(W-O)+O}function G(r,O){let W=b(O-r,360);return W>180&&(W-=360),W}function X(r,O){const W=b(r,2*O);return O-Math.abs(W-O)}function S(r,O,W){let q=g(W);return q=-2*q*q*q+3*q*q,O*q+r*(1-q)}function o(r,O,W){let q=0;return q=Math.abs(O-r)<=W?O:r+Math.sign(O-r)*W,q}function N(r,O,W){const q=G(r,O);let Q=0;return Q=-W<q&&q<W?O:o(r,O=r+q,W),Q}function D(r,O,W){return(r-O)/(W-O)}function p(r,O,W){return(W-O)*r+O}function z(r,O){const W=r%O;return 0===W?O:z(O,W)}W.r(O),W.d(O,{Clamp:()=>g,DeltaAngle:()=>G,Denormalize:()=>Y,ExtractAsInt:()=>q,Hermite:()=>d,Hermite1stDerivative:()=>v,HighestCommonFactor:()=>z,ILog2:()=>P,InverseLerp:()=>mr,Lerp:()=>h,LerpAngle:()=>J,MoveTowards:()=>o,MoveTowardsAngle:()=>N,Normalize:()=>e,NormalizeRadians:()=>K,OutsideRange:()=>C,PercentToRange:()=>p,PingPong:()=>X,RandomRange:()=>T,RangeToPercent:()=>D,Repeat:()=>b,SmoothStep:()=>S,ToHex:()=>U,WithinEpsilon:()=>Q})}}]);