"use strict";(self.wj3aziuz228=self.wj3aziuz228||[]).push([[104],{15756:(u,R,I)=>{I.r(R),I.d(R,{FlowGraphMultiGateBlock:()=>D});var B=I(12433),U=I(14173),K=I(14160),C=I(14157);class D extends U.b{constructor(u){super(u),this.config=u,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",K.j,new C.d(-1)),this.setNumberOfOutputSignals(null===u||void 0===u?void 0:u.outputSignalCount)}_getNextIndex(u){if(u.includes(!1)||this.config.isLoop&&u.fill(!1),this.config.isRandom){const R=u.map(((u,R)=>u?-1:R)).filter((u=>-1!==u));return R.length?R[Math.floor(Math.random()*R.length)]:-1}return u.indexOf(!1)}setNumberOfOutputSignals(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>u;){const u=this.outputSignals.pop();u&&(u.disconnectFromAll(),this._unregisterSignalOutput(u.name))}for(;this.outputSignals.length<u;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(u,R){if(u._hasExecutionVariable(this,"indexesUsed")||u._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),R===this.reset)return u._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new C.d(-1),u);const I=u._getExecutionVariable(this,"indexesUsed",[]),B=this._getNextIndex(I);B>-1&&(this.lastIndex.setValue(new C.d(B),u),I[B]=!0,u._setExecutionVariable(this,"indexesUsed",I),this.outputSignals[B]._activateSignal(u))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(u){super.serialize(u),u.config.outputSignalCount=this.config.outputSignalCount,u.config.isRandom=this.config.isRandom,u.config.loop=this.config.isLoop,u.config.startIndex=this.config.startIndex}}(0,B.e)("FlowGraphMultiGateBlock",D)}}]);