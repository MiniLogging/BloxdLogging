"use strict";(self["9jl1vn4ei5r"]=self["9jl1vn4ei5r"]||[]).push([[104],{15055:(M,p,b)=>{b.r(p),b.d(p,{FlowGraphMultiGateBlock:()=>u});var Q=b(11757),q=b(13488),B=b(13477),k=b(13468);class u extends q.e{constructor(M){super(M),this.config=M,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",B.e,new k.e(-1)),this.setNumberOfOutputSignals(null===M||void 0===M?void 0:M.outputSignalCount)}_getNextIndex(M){if(M.includes(!1)||this.config.isLoop&&M.fill(!1),this.config.isRandom){const p=M.map(((M,p)=>M?-1:p)).filter((M=>-1!==M));return p.length?p[Math.floor(Math.random()*p.length)]:-1}return M.indexOf(!1)}setNumberOfOutputSignals(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>M;){const M=this.outputSignals.pop();M&&(M.disconnectFromAll(),this._unregisterSignalOutput(M.name))}for(;this.outputSignals.length<M;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(M,p){if(M._hasExecutionVariable(this,"indexesUsed")||M._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),p===this.reset)return M._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new k.e(-1),M);const b=M._getExecutionVariable(this,"indexesUsed",[]),Q=this._getNextIndex(b);Q>-1&&(this.lastIndex.setValue(new k.e(Q),M),b[Q]=!0,M._setExecutionVariable(this,"indexesUsed",b),this.outputSignals[Q]._activateSignal(M))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(M){super.serialize(M),M.config.outputSignalCount=this.config.outputSignalCount,M.config.isRandom=this.config.isRandom,M.config.loop=this.config.isLoop,M.config.startIndex=this.config.startIndex}}(0,Q.g)("FlowGraphMultiGateBlock",u)}}]);