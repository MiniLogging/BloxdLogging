"use strict";(self.nyfa010khv=self.nyfa010khv||[]).push([[104],{15414:(L,r,p)=>{p.r(r),p.d(r,{FlowGraphMultiGateBlock:()=>z});var J=p(12087),i=p(13879),n=p(13868),j=p(13864);class z extends i.b{constructor(L){super(L),this.config=L,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",n.k,new j.b(-1)),this.setNumberOfOutputSignals(null===L||void 0===L?void 0:L.outputSignalCount)}_getNextIndex(L){if(L.includes(!1)||this.config.isLoop&&L.fill(!1),this.config.isRandom){const r=L.map(((L,r)=>L?-1:r)).filter((L=>-1!==L));return r.length?r[Math.floor(Math.random()*r.length)]:-1}return L.indexOf(!1)}setNumberOfOutputSignals(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>L;){const L=this.outputSignals.pop();L&&(L.disconnectFromAll(),this._unregisterSignalOutput(L.name))}for(;this.outputSignals.length<L;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(L,r){if(L._hasExecutionVariable(this,"indexesUsed")||L._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),r===this.reset)return L._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new j.b(-1),L);const p=L._getExecutionVariable(this,"indexesUsed",[]),J=this._getNextIndex(p);J>-1&&(this.lastIndex.setValue(new j.b(J),L),p[J]=!0,L._setExecutionVariable(this,"indexesUsed",p),this.outputSignals[J]._activateSignal(L))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(L){super.serialize(L),L.config.outputSignalCount=this.config.outputSignalCount,L.config.isRandom=this.config.isRandom,L.config.loop=this.config.isLoop,L.config.startIndex=this.config.startIndex}}(0,J.e)("FlowGraphMultiGateBlock",z)}}]);