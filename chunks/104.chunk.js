"use strict";(self.mo7o6813fhb=self.mo7o6813fhb||[]).push([[104],{15481:(t,U,y)=>{y.r(U),y.d(U,{FlowGraphMultiGateBlock:()=>X});var I=y(12338),r=y(13863),Y=y(13845),mt=y(13842);class X extends r.d{constructor(t){super(t),this.config=t,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",Y.j,new mt.c(-1)),this.setNumberOfOutputSignals(null===t||void 0===t?void 0:t.outputSignalCount)}_getNextIndex(t){if(t.includes(!1)||this.config.isLoop&&t.fill(!1),this.config.isRandom){const U=t.map(((t,U)=>t?-1:U)).filter((t=>-1!==t));return U.length?U[Math.floor(Math.random()*U.length)]:-1}return t.indexOf(!1)}setNumberOfOutputSignals(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>t;){const t=this.outputSignals.pop();t&&(t.disconnectFromAll(),this._unregisterSignalOutput(t.name))}for(;this.outputSignals.length<t;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(t,U){if(t._hasExecutionVariable(this,"indexesUsed")||t._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),U===this.reset)return t._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new mt.c(-1),t);const y=t._getExecutionVariable(this,"indexesUsed",[]),I=this._getNextIndex(y);I>-1&&(this.lastIndex.setValue(new mt.c(I),t),y[I]=!0,t._setExecutionVariable(this,"indexesUsed",y),this.outputSignals[I]._activateSignal(t))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(t){super.serialize(t),t.config.outputSignalCount=this.config.outputSignalCount,t.config.isRandom=this.config.isRandom,t.config.loop=this.config.isLoop,t.config.startIndex=this.config.startIndex}}(0,I.f)("FlowGraphMultiGateBlock",X)}}]);