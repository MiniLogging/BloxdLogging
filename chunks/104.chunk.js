"use strict";(self.zy41qorie9=self.zy41qorie9||[]).push([[104],{15446:(Z,l,C)=>{C.r(l),C.d(l,{FlowGraphMultiGateBlock:()=>f});var B=C(12400),x=C(13844),b=C(13830),K=C(13828);class f extends x.e{constructor(Z){super(Z),this.config=Z,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",b.i,new K.b(-1)),this.setNumberOfOutputSignals(null===Z||void 0===Z?void 0:Z.outputSignalCount)}_getNextIndex(Z){if(Z.includes(!1)||this.config.isLoop&&Z.fill(!1),this.config.isRandom){const l=Z.map(((Z,l)=>Z?-1:l)).filter((Z=>-1!==Z));return l.length?l[Math.floor(Math.random()*l.length)]:-1}return Z.indexOf(!1)}setNumberOfOutputSignals(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>Z;){const Z=this.outputSignals.pop();Z&&(Z.disconnectFromAll(),this._unregisterSignalOutput(Z.name))}for(;this.outputSignals.length<Z;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(Z,l){if(Z._hasExecutionVariable(this,"indexesUsed")||Z._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),l===this.reset)return Z._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new K.b(-1),Z);const C=Z._getExecutionVariable(this,"indexesUsed",[]),B=this._getNextIndex(C);B>-1&&(this.lastIndex.setValue(new K.b(B),Z),C[B]=!0,Z._setExecutionVariable(this,"indexesUsed",C),this.outputSignals[B]._activateSignal(Z))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(Z){super.serialize(Z),Z.config.outputSignalCount=this.config.outputSignalCount,Z.config.isRandom=this.config.isRandom,Z.config.loop=this.config.isLoop,Z.config.startIndex=this.config.startIndex}}(0,B.c)("FlowGraphMultiGateBlock",f)}}]);