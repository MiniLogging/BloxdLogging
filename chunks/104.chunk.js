"use strict";(self.i6szn8jgzh=self.i6szn8jgzh||[]).push([[104],{15158:(b,n,i)=>{i.r(n),i.d(n,{FlowGraphMultiGateBlock:()=>Y});var e=i(11734),V=i(13544),Q=i(13522),U=i(13513);class Y extends V.d{constructor(b){super(b),this.config=b,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",Q.h,new U.b(-1)),this.setNumberOfOutputSignals(null===b||void 0===b?void 0:b.outputSignalCount)}_getNextIndex(b){if(b.includes(!1)||this.config.isLoop&&b.fill(!1),this.config.isRandom){const n=b.map(((b,n)=>b?-1:n)).filter((b=>-1!==b));return n.length?n[Math.floor(Math.random()*n.length)]:-1}return b.indexOf(!1)}setNumberOfOutputSignals(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>b;){const b=this.outputSignals.pop();b&&(b.disconnectFromAll(),this._unregisterSignalOutput(b.name))}for(;this.outputSignals.length<b;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(b,n){if(b._hasExecutionVariable(this,"indexesUsed")||b._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),n===this.reset)return b._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new U.b(-1),b);const i=b._getExecutionVariable(this,"indexesUsed",[]),e=this._getNextIndex(i);e>-1&&(this.lastIndex.setValue(new U.b(e),b),i[e]=!0,b._setExecutionVariable(this,"indexesUsed",i),this.outputSignals[e]._activateSignal(b))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(b){super.serialize(b),b.config.outputSignalCount=this.config.outputSignalCount,b.config.isRandom=this.config.isRandom,b.config.loop=this.config.isLoop,b.config.startIndex=this.config.startIndex}}(0,e.i)("FlowGraphMultiGateBlock",Y)}}]);