"use strict";(self["9x1utqq1axc"]=self["9x1utqq1axc"]||[]).push([[104],{15596:(y,c,A)=>{A.r(c),A.d(c,{FlowGraphMultiGateBlock:()=>W});var l=A(12283),w=A(14003),N=A(13993),p=A(13986);class W extends w.c{constructor(y){super(y),this.config=y,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",N.j,new p.b(-1)),this.setNumberOfOutputSignals(null===y||void 0===y?void 0:y.outputSignalCount)}_getNextIndex(y){if(y.includes(!1)||this.config.isLoop&&y.fill(!1),this.config.isRandom){const c=y.map(((y,c)=>y?-1:c)).filter((y=>-1!==y));return c.length?c[Math.floor(Math.random()*c.length)]:-1}return y.indexOf(!1)}setNumberOfOutputSignals(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>y;){const y=this.outputSignals.pop();y&&(y.disconnectFromAll(),this._unregisterSignalOutput(y.name))}for(;this.outputSignals.length<y;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(y,c){if(y._hasExecutionVariable(this,"indexesUsed")||y._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),c===this.reset)return y._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new p.b(-1),y);const A=y._getExecutionVariable(this,"indexesUsed",[]),l=this._getNextIndex(A);l>-1&&(this.lastIndex.setValue(new p.b(l),y),A[l]=!0,y._setExecutionVariable(this,"indexesUsed",A),this.outputSignals[l]._activateSignal(y))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(y){super.serialize(y),y.config.outputSignalCount=this.config.outputSignalCount,y.config.isRandom=this.config.isRandom,y.config.loop=this.config.isLoop,y.config.startIndex=this.config.startIndex}}(0,l.f)("FlowGraphMultiGateBlock",W)}}]);