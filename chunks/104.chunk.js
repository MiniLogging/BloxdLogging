"use strict";(self["80dd64vgxnn"]=self["80dd64vgxnn"]||[]).push([[104],{15885:(mm,o,u)=>{u.r(o),u.d(o,{FlowGraphMultiGateBlock:()=>w});var f=u(12702),B=u(14274),O=u(14257),r=u(14255);class w extends B.d{constructor(mm){super(mm),this.config=mm,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",O.j,new r.d(-1)),this.setNumberOfOutputSignals(null===mm||void 0===mm?void 0:mm.outputSignalCount)}_getNextIndex(mm){if(mm.includes(!1)||this.config.isLoop&&mm.fill(!1),this.config.isRandom){const o=mm.map(((mm,o)=>mm?-1:o)).filter((mm=>-1!==mm));return o.length?o[Math.floor(Math.random()*o.length)]:-1}return mm.indexOf(!1)}setNumberOfOutputSignals(){let mm=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>mm;){const mm=this.outputSignals.pop();mm&&(mm.disconnectFromAll(),this._unregisterSignalOutput(mm.name))}for(;this.outputSignals.length<mm;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(mm,o){if(mm._hasExecutionVariable(this,"indexesUsed")||mm._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),o===this.reset)return mm._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new r.d(-1),mm);const u=mm._getExecutionVariable(this,"indexesUsed",[]),f=this._getNextIndex(u);f>-1&&(this.lastIndex.setValue(new r.d(f),mm),u[f]=!0,mm._setExecutionVariable(this,"indexesUsed",u),this.outputSignals[f]._activateSignal(mm))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(mm){super.serialize(mm),mm.config.outputSignalCount=this.config.outputSignalCount,mm.config.isRandom=this.config.isRandom,mm.config.loop=this.config.isLoop,mm.config.startIndex=this.config.startIndex}}(0,f.c)("FlowGraphMultiGateBlock",w)}}]);