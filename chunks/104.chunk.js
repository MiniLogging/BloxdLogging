"use strict";(self.fjf2z1c8il8=self.fjf2z1c8il8||[]).push([[104],{15859:(g,i,a)=>{a.r(i),a.d(i,{FlowGraphMultiGateBlock:()=>k});var n=a(12415),L=a(14231),d=a(14214),b=a(14209);class k extends L.b{constructor(g){super(g),this.config=g,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",d.f,new b.e(-1)),this.setNumberOfOutputSignals(null===g||void 0===g?void 0:g.outputSignalCount)}_getNextIndex(g){if(g.includes(!1)||this.config.isLoop&&g.fill(!1),this.config.isRandom){const i=g.map(((g,i)=>g?-1:i)).filter((g=>-1!==g));return i.length?i[Math.floor(Math.random()*i.length)]:-1}return g.indexOf(!1)}setNumberOfOutputSignals(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>g;){const g=this.outputSignals.pop();g&&(g.disconnectFromAll(),this._unregisterSignalOutput(g.name))}for(;this.outputSignals.length<g;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(g,i){if(g._hasExecutionVariable(this,"indexesUsed")||g._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),i===this.reset)return g._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new b.e(-1),g);const a=g._getExecutionVariable(this,"indexesUsed",[]),n=this._getNextIndex(a);n>-1&&(this.lastIndex.setValue(new b.e(n),g),a[n]=!0,g._setExecutionVariable(this,"indexesUsed",a),this.outputSignals[n]._activateSignal(g))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(g){super.serialize(g),g.config.outputSignalCount=this.config.outputSignalCount,g.config.isRandom=this.config.isRandom,g.config.loop=this.config.isLoop,g.config.startIndex=this.config.startIndex}}(0,n.e)("FlowGraphMultiGateBlock",k)}}]);