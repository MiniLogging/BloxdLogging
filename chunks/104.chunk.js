"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[104],{16101:(a,c,o)=>{o.r(c),o.d(c,{FlowGraphMultiGateBlock:()=>p});var s=o(12776),q=o(14414),t=o(14394),i=o(14386);class p extends q.e{constructor(a){super(a),this.config=a,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",t.g,new i.c(-1)),this.setNumberOfOutputSignals(null===a||void 0===a?void 0:a.outputSignalCount)}_getNextIndex(a){if(a.includes(!1)||this.config.isLoop&&a.fill(!1),this.config.isRandom){const c=a.map(((a,c)=>a?-1:c)).filter((a=>-1!==a));return c.length?c[Math.floor(Math.random()*c.length)]:-1}return a.indexOf(!1)}setNumberOfOutputSignals(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>a;){const a=this.outputSignals.pop();a&&(a.disconnectFromAll(),this._unregisterSignalOutput(a.name))}for(;this.outputSignals.length<a;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(a,c){if(a._hasExecutionVariable(this,"indexesUsed")||a._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),c===this.reset)return a._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new i.c(-1),a);const o=a._getExecutionVariable(this,"indexesUsed",[]),s=this._getNextIndex(o);s>-1&&(this.lastIndex.setValue(new i.c(s),a),o[s]=!0,a._setExecutionVariable(this,"indexesUsed",o),this.outputSignals[s]._activateSignal(a))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(a){super.serialize(a),a.config.outputSignalCount=this.config.outputSignalCount,a.config.isRandom=this.config.isRandom,a.config.loop=this.config.isLoop,a.config.startIndex=this.config.startIndex}}(0,s.d)("FlowGraphMultiGateBlock",p)}}]);