"use strict";(self["1xyrlsr8vb9"]=self["1xyrlsr8vb9"]||[]).push([[104],{15436:(I,O,C)=>{C.r(O),C.d(O,{FlowGraphMultiGateBlock:()=>S});var j=C(12226),K=C(13901),i=C(13886),y=C(13878);class S extends K.b{constructor(I){super(I),this.config=I,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",i.h,new y.e(-1)),this.setNumberOfOutputSignals(null===I||void 0===I?void 0:I.outputSignalCount)}_getNextIndex(I){if(I.includes(!1)||this.config.isLoop&&I.fill(!1),this.config.isRandom){const O=I.map(((I,O)=>I?-1:O)).filter((I=>-1!==I));return O.length?O[Math.floor(Math.random()*O.length)]:-1}return I.indexOf(!1)}setNumberOfOutputSignals(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>I;){const I=this.outputSignals.pop();I&&(I.disconnectFromAll(),this._unregisterSignalOutput(I.name))}for(;this.outputSignals.length<I;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(I,O){if(I._hasExecutionVariable(this,"indexesUsed")||I._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),O===this.reset)return I._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new y.e(-1),I);const C=I._getExecutionVariable(this,"indexesUsed",[]),j=this._getNextIndex(C);j>-1&&(this.lastIndex.setValue(new y.e(j),I),C[j]=!0,I._setExecutionVariable(this,"indexesUsed",C),this.outputSignals[j]._activateSignal(I))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(I){super.serialize(I),I.config.outputSignalCount=this.config.outputSignalCount,I.config.isRandom=this.config.isRandom,I.config.loop=this.config.isLoop,I.config.startIndex=this.config.startIndex}}(0,j.e)("FlowGraphMultiGateBlock",S)}}]);