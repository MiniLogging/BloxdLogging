"use strict";(self.hwpa2z1pqte=self.hwpa2z1pqte||[]).push([[104],{16236:(h,R,l)=>{l.r(R),l.d(R,{FlowGraphMultiGateBlock:()=>F});var j=l(12852),a=l(14615),D=l(14597),U=l(14591);class F extends a.e{constructor(h){super(h),this.config=h,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",D.i,new U.c(-1)),this.setNumberOfOutputSignals(null===h||void 0===h?void 0:h.outputSignalCount)}_getNextIndex(h){if(h.includes(!1)||this.config.isLoop&&h.fill(!1),this.config.isRandom){const R=h.map(((h,R)=>h?-1:R)).filter((h=>-1!==h));return R.length?R[Math.floor(Math.random()*R.length)]:-1}return h.indexOf(!1)}setNumberOfOutputSignals(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>h;){const h=this.outputSignals.pop();h&&(h.disconnectFromAll(),this._unregisterSignalOutput(h.name))}for(;this.outputSignals.length<h;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(h,R){if(h._hasExecutionVariable(this,"indexesUsed")||h._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),R===this.reset)return h._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new U.c(-1),h);const l=h._getExecutionVariable(this,"indexesUsed",[]),j=this._getNextIndex(l);j>-1&&(this.lastIndex.setValue(new U.c(j),h),l[j]=!0,h._setExecutionVariable(this,"indexesUsed",l),this.outputSignals[j]._activateSignal(h))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(h){super.serialize(h),h.config.outputSignalCount=this.config.outputSignalCount,h.config.isRandom=this.config.isRandom,h.config.loop=this.config.isLoop,h.config.startIndex=this.config.startIndex}}(0,j.f)("FlowGraphMultiGateBlock",F)}}]);