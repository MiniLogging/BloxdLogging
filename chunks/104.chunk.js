"use strict";(self.vfdo5lmva5i=self.vfdo5lmva5i||[]).push([[104],{15139:(w,o,H)=>{H.r(o),H.d(o,{FlowGraphMultiGateBlock:()=>t});var h=H(11666),E=H(13469),e=H(13455),D=H(13446);class t extends E.d{constructor(w){super(w),this.config=w,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",e.g,new D.d(-1)),this.setNumberOfOutputSignals(null===w||void 0===w?void 0:w.outputSignalCount)}_getNextIndex(w){if(w.includes(!1)||this.config.isLoop&&w.fill(!1),this.config.isRandom){const o=w.map(((w,o)=>w?-1:o)).filter((w=>-1!==w));return o.length?o[Math.floor(Math.random()*o.length)]:-1}return w.indexOf(!1)}setNumberOfOutputSignals(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>w;){const w=this.outputSignals.pop();w&&(w.disconnectFromAll(),this._unregisterSignalOutput(w.name))}for(;this.outputSignals.length<w;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(w,o){if(w._hasExecutionVariable(this,"indexesUsed")||w._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),o===this.reset)return w._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new D.d(-1),w);const H=w._getExecutionVariable(this,"indexesUsed",[]),h=this._getNextIndex(H);h>-1&&(this.lastIndex.setValue(new D.d(h),w),H[h]=!0,w._setExecutionVariable(this,"indexesUsed",H),this.outputSignals[h]._activateSignal(w))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(w){super.serialize(w),w.config.outputSignalCount=this.config.outputSignalCount,w.config.isRandom=this.config.isRandom,w.config.loop=this.config.isLoop,w.config.startIndex=this.config.startIndex}}(0,h.g)("FlowGraphMultiGateBlock",t)}}]);