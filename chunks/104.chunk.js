"use strict";(self.ksd6jhs1yr=self.ksd6jhs1yr||[]).push([[104],{15684:(C,c,d)=>{d.r(c),d.d(c,{FlowGraphMultiGateBlock:()=>R});var b=d(12345),X=d(14150),P=d(14126),V=d(14120);class R extends X.d{constructor(C){super(C),this.config=C,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",P.h,new V.c(-1)),this.setNumberOfOutputSignals(null===C||void 0===C?void 0:C.outputSignalCount)}_getNextIndex(C){if(C.includes(!1)||this.config.isLoop&&C.fill(!1),this.config.isRandom){const c=C.map(((C,c)=>C?-1:c)).filter((C=>-1!==C));return c.length?c[Math.floor(Math.random()*c.length)]:-1}return C.indexOf(!1)}setNumberOfOutputSignals(){let C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>C;){const C=this.outputSignals.pop();C&&(C.disconnectFromAll(),this._unregisterSignalOutput(C.name))}for(;this.outputSignals.length<C;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(C,c){if(C._hasExecutionVariable(this,"indexesUsed")||C._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),c===this.reset)return C._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new V.c(-1),C);const d=C._getExecutionVariable(this,"indexesUsed",[]),b=this._getNextIndex(d);b>-1&&(this.lastIndex.setValue(new V.c(b),C),d[b]=!0,C._setExecutionVariable(this,"indexesUsed",d),this.outputSignals[b]._activateSignal(C))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(C){super.serialize(C),C.config.outputSignalCount=this.config.outputSignalCount,C.config.isRandom=this.config.isRandom,C.config.loop=this.config.isLoop,C.config.startIndex=this.config.startIndex}}(0,b.e)("FlowGraphMultiGateBlock",R)}}]);