"use strict";(self.fwuvyyymhp8=self.fwuvyyymhp8||[]).push([[104],{15662:(N,U,V)=>{V.r(U),V.d(U,{FlowGraphMultiGateBlock:()=>i});var A=V(12344),t=V(14051),n=V(14036),q=V(14031);class i extends t.b{constructor(N){super(N),this.config=N,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",n.g,new q.b(-1)),this.setNumberOfOutputSignals(null===N||void 0===N?void 0:N.outputSignalCount)}_getNextIndex(N){if(N.includes(!1)||this.config.isLoop&&N.fill(!1),this.config.isRandom){const U=N.map(((N,U)=>N?-1:U)).filter((N=>-1!==N));return U.length?U[Math.floor(Math.random()*U.length)]:-1}return N.indexOf(!1)}setNumberOfOutputSignals(){let N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>N;){const N=this.outputSignals.pop();N&&(N.disconnectFromAll(),this._unregisterSignalOutput(N.name))}for(;this.outputSignals.length<N;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(N,U){if(N._hasExecutionVariable(this,"indexesUsed")||N._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),U===this.reset)return N._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new q.b(-1),N);const V=N._getExecutionVariable(this,"indexesUsed",[]),A=this._getNextIndex(V);A>-1&&(this.lastIndex.setValue(new q.b(A),N),V[A]=!0,N._setExecutionVariable(this,"indexesUsed",V),this.outputSignals[A]._activateSignal(N))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(N){super.serialize(N),N.config.outputSignalCount=this.config.outputSignalCount,N.config.isRandom=this.config.isRandom,N.config.loop=this.config.isLoop,N.config.startIndex=this.config.startIndex}}(0,A.e)("FlowGraphMultiGateBlock",i)}}]);