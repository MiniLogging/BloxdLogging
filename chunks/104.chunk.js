"use strict";(self["3b8bnhi4gzj"]=self["3b8bnhi4gzj"]||[]).push([[104],{15094:(Z,h,V)=>{V.r(h),V.d(h,{FlowGraphMultiGateBlock:()=>d});var v=V(11691),A=V(13474),H=V(13459),K=V(13450);class d extends A.b{constructor(Z){super(Z),this.config=Z,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",H.h,new K.b(-1)),this.setNumberOfOutputSignals(null===Z||void 0===Z?void 0:Z.outputSignalCount)}_getNextIndex(Z){if(Z.includes(!1)||this.config.isLoop&&Z.fill(!1),this.config.isRandom){const h=Z.map(((Z,h)=>Z?-1:h)).filter((Z=>-1!==Z));return h.length?h[Math.floor(Math.random()*h.length)]:-1}return Z.indexOf(!1)}setNumberOfOutputSignals(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>Z;){const Z=this.outputSignals.pop();Z&&(Z.disconnectFromAll(),this._unregisterSignalOutput(Z.name))}for(;this.outputSignals.length<Z;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(Z,h){if(Z._hasExecutionVariable(this,"indexesUsed")||Z._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),h===this.reset)return Z._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new K.b(-1),Z);const V=Z._getExecutionVariable(this,"indexesUsed",[]),v=this._getNextIndex(V);v>-1&&(this.lastIndex.setValue(new K.b(v),Z),V[v]=!0,Z._setExecutionVariable(this,"indexesUsed",V),this.outputSignals[v]._activateSignal(Z))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(Z){super.serialize(Z),Z.config.outputSignalCount=this.config.outputSignalCount,Z.config.isRandom=this.config.isRandom,Z.config.loop=this.config.isLoop,Z.config.startIndex=this.config.startIndex}}(0,v.i)("FlowGraphMultiGateBlock",d)}}]);