"use strict";(self.n52dyox90qa=self.n52dyox90qa||[]).push([[104],{15061:(E,t,z)=>{z.r(t),z.d(t,{FlowGraphMultiGateBlock:()=>p});var A=z(11766),X=z(13476),R=z(13458),u=z(13456);class p extends X.b{constructor(E){super(E),this.config=E,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",R.e,new u.e(-1)),this.setNumberOfOutputSignals(null===E||void 0===E?void 0:E.outputSignalCount)}_getNextIndex(E){if(E.includes(!1)||this.config.isLoop&&E.fill(!1),this.config.isRandom){const t=E.map(((E,t)=>E?-1:t)).filter((E=>-1!==E));return t.length?t[Math.floor(Math.random()*t.length)]:-1}return E.indexOf(!1)}setNumberOfOutputSignals(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>E;){const E=this.outputSignals.pop();E&&(E.disconnectFromAll(),this._unregisterSignalOutput(E.name))}for(;this.outputSignals.length<E;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(E,t){if(E._hasExecutionVariable(this,"indexesUsed")||E._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),t===this.reset)return E._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new u.e(-1),E);const z=E._getExecutionVariable(this,"indexesUsed",[]),A=this._getNextIndex(z);A>-1&&(this.lastIndex.setValue(new u.e(A),E),z[A]=!0,E._setExecutionVariable(this,"indexesUsed",z),this.outputSignals[A]._activateSignal(E))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(E){super.serialize(E),E.config.outputSignalCount=this.config.outputSignalCount,E.config.isRandom=this.config.isRandom,E.config.loop=this.config.isLoop,E.config.startIndex=this.config.startIndex}}(0,A.f)("FlowGraphMultiGateBlock",p)}}]);