"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[104],{16334:(B,u,F)=>{F.r(u),F.d(u,{FlowGraphMultiGateBlock:()=>R});var Z=F(12949),V=F(14715),p=F(14701),G=F(14694);class R extends V.b{constructor(B){super(B),this.config=B,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",p.h,new G.d(-1)),this.setNumberOfOutputSignals(null===B||void 0===B?void 0:B.outputSignalCount)}_getNextIndex(B){if(B.includes(!1)||this.config.isLoop&&B.fill(!1),this.config.isRandom){const u=B.map(((B,u)=>B?-1:u)).filter((B=>-1!==B));return u.length?u[Math.floor(Math.random()*u.length)]:-1}return B.indexOf(!1)}setNumberOfOutputSignals(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>B;){const B=this.outputSignals.pop();B&&(B.disconnectFromAll(),this._unregisterSignalOutput(B.name))}for(;this.outputSignals.length<B;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(B,u){if(B._hasExecutionVariable(this,"indexesUsed")||B._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),u===this.reset)return B._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new G.d(-1),B);const F=B._getExecutionVariable(this,"indexesUsed",[]),Z=this._getNextIndex(F);Z>-1&&(this.lastIndex.setValue(new G.d(Z),B),F[Z]=!0,B._setExecutionVariable(this,"indexesUsed",F),this.outputSignals[Z]._activateSignal(B))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(B){super.serialize(B),B.config.outputSignalCount=this.config.outputSignalCount,B.config.isRandom=this.config.isRandom,B.config.loop=this.config.isLoop,B.config.startIndex=this.config.startIndex}}(0,Z.f)("FlowGraphMultiGateBlock",R)}}]);