"use strict";(self["9d4d30r2sf"]=self["9d4d30r2sf"]||[]).push([[104],{15792:(o,v,V)=>{V.r(v),V.d(v,{FlowGraphMultiGateBlock:()=>U});var g=V(12449),E=V(14250),I=V(14241),Q=V(14236);class U extends E.b{constructor(o){super(o),this.config=o,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",I.i,new Q.c(-1)),this.setNumberOfOutputSignals(null===o||void 0===o?void 0:o.outputSignalCount)}_getNextIndex(o){if(o.includes(!1)||this.config.isLoop&&o.fill(!1),this.config.isRandom){const v=o.map(((o,v)=>o?-1:v)).filter((o=>-1!==o));return v.length?v[Math.floor(Math.random()*v.length)]:-1}return o.indexOf(!1)}setNumberOfOutputSignals(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>o;){const o=this.outputSignals.pop();o&&(o.disconnectFromAll(),this._unregisterSignalOutput(o.name))}for(;this.outputSignals.length<o;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(o,v){if(o._hasExecutionVariable(this,"indexesUsed")||o._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),v===this.reset)return o._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new Q.c(-1),o);const V=o._getExecutionVariable(this,"indexesUsed",[]),g=this._getNextIndex(V);g>-1&&(this.lastIndex.setValue(new Q.c(g),o),V[g]=!0,o._setExecutionVariable(this,"indexesUsed",V),this.outputSignals[g]._activateSignal(o))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(o){super.serialize(o),o.config.outputSignalCount=this.config.outputSignalCount,o.config.isRandom=this.config.isRandom,o.config.loop=this.config.isLoop,o.config.startIndex=this.config.startIndex}}(0,g.h)("FlowGraphMultiGateBlock",U)}}]);