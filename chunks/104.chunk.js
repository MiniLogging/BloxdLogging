"use strict";(self["5dou0t7wntc"]=self["5dou0t7wntc"]||[]).push([[104],{15045:(K,O,F)=>{F.r(O),F.d(O,{FlowGraphMultiGateBlock:()=>J});var f=F(11661),r=F(13465),l=F(13441),q=F(13435);class J extends r.c{constructor(K){super(K),this.config=K,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",l.i,new q.d(-1)),this.setNumberOfOutputSignals(null===K||void 0===K?void 0:K.outputSignalCount)}_getNextIndex(K){if(K.includes(!1)||this.config.isLoop&&K.fill(!1),this.config.isRandom){const O=K.map(((K,O)=>K?-1:O)).filter((K=>-1!==K));return O.length?O[Math.floor(Math.random()*O.length)]:-1}return K.indexOf(!1)}setNumberOfOutputSignals(){let K=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>K;){const K=this.outputSignals.pop();K&&(K.disconnectFromAll(),this._unregisterSignalOutput(K.name))}for(;this.outputSignals.length<K;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(K,O){if(K._hasExecutionVariable(this,"indexesUsed")||K._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),O===this.reset)return K._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new q.d(-1),K);const F=K._getExecutionVariable(this,"indexesUsed",[]),f=this._getNextIndex(F);f>-1&&(this.lastIndex.setValue(new q.d(f),K),F[f]=!0,K._setExecutionVariable(this,"indexesUsed",F),this.outputSignals[f]._activateSignal(K))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(K){super.serialize(K),K.config.outputSignalCount=this.config.outputSignalCount,K.config.isRandom=this.config.isRandom,K.config.loop=this.config.isLoop,K.config.startIndex=this.config.startIndex}}(0,f.g)("FlowGraphMultiGateBlock",J)}}]);