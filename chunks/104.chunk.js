"use strict";(self["1kjc9ee3uyt"]=self["1kjc9ee3uyt"]||[]).push([[104],{14858:(w,E,G)=>{G.r(E),G.d(E,{FlowGraphMultiGateBlock:()=>x});var P=G(11646),h=G(13296),B=G(13281),y=G(13274);class x extends h.e{constructor(w){super(w),this.config=w,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",B.h,new y.d(-1)),this.setNumberOfOutputSignals(null===w||void 0===w?void 0:w.outputSignalCount)}_getNextIndex(w){if(w.includes(!1)||this.config.isLoop&&w.fill(!1),this.config.isRandom){const E=w.map(((w,E)=>w?-1:E)).filter((w=>-1!==w));return E.length?E[Math.floor(Math.random()*E.length)]:-1}return w.indexOf(!1)}setNumberOfOutputSignals(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>w;){const w=this.outputSignals.pop();w&&(w.disconnectFromAll(),this._unregisterSignalOutput(w.name))}for(;this.outputSignals.length<w;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(w,E){if(w._hasExecutionVariable(this,"indexesUsed")||w._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),E===this.reset)return w._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new y.d(-1),w);const G=w._getExecutionVariable(this,"indexesUsed",[]),P=this._getNextIndex(G);P>-1&&(this.lastIndex.setValue(new y.d(P),w),G[P]=!0,w._setExecutionVariable(this,"indexesUsed",G),this.outputSignals[P]._activateSignal(w))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(w){super.serialize(w),w.config.outputSignalCount=this.config.outputSignalCount,w.config.isRandom=this.config.isRandom,w.config.loop=this.config.isLoop,w.config.startIndex=this.config.startIndex}}(0,P.g)("FlowGraphMultiGateBlock",x)}}]);