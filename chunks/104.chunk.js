"use strict";(self.wy695la1oic=self.wy695la1oic||[]).push([[104],{14714:(S,v,D)=>{D.r(v),D.d(v,{FlowGraphMultiGateBlock:()=>B});var z=D(11329),e=D(13119),N=D(13108),m=D(13103);class B extends e.e{constructor(S){super(S),this.config=S,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",N.i,new m.b(-1)),this.setNumberOfOutputSignals(null===S||void 0===S?void 0:S.outputSignalCount)}_getNextIndex(S){if(S.includes(!1)||this.config.isLoop&&S.fill(!1),this.config.isRandom){const v=S.map(((S,v)=>S?-1:v)).filter((S=>-1!==S));return v.length?v[Math.floor(Math.random()*v.length)]:-1}return S.indexOf(!1)}setNumberOfOutputSignals(){let S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>S;){const S=this.outputSignals.pop();S&&(S.disconnectFromAll(),this._unregisterSignalOutput(S.name))}for(;this.outputSignals.length<S;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(S,v){if(S._hasExecutionVariable(this,"indexesUsed")||S._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),v===this.reset)return S._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new m.b(-1),S);const D=S._getExecutionVariable(this,"indexesUsed",[]),z=this._getNextIndex(D);z>-1&&(this.lastIndex.setValue(new m.b(z),S),D[z]=!0,S._setExecutionVariable(this,"indexesUsed",D),this.outputSignals[z]._activateSignal(S))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(S){super.serialize(S),S.config.outputSignalCount=this.config.outputSignalCount,S.config.isRandom=this.config.isRandom,S.config.loop=this.config.isLoop,S.config.startIndex=this.config.startIndex}}(0,z.f)("FlowGraphMultiGateBlock",B)}}]);