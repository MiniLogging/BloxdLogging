"use strict";(self.kdlk57exiqh=self.kdlk57exiqh||[]).push([[104],{15438:(i,x,e)=>{e.r(x),e.d(x,{FlowGraphMultiGateBlock:()=>J});var j=e(12204),E=e(13895),a=e(13874),Y=e(13868);class J extends E.d{constructor(i){super(i),this.config=i,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",a.h,new Y.d(-1)),this.setNumberOfOutputSignals(null===i||void 0===i?void 0:i.outputSignalCount)}_getNextIndex(i){if(i.includes(!1)||this.config.isLoop&&i.fill(!1),this.config.isRandom){const x=i.map(((i,x)=>i?-1:x)).filter((i=>-1!==i));return x.length?x[Math.floor(Math.random()*x.length)]:-1}return i.indexOf(!1)}setNumberOfOutputSignals(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>i;){const i=this.outputSignals.pop();i&&(i.disconnectFromAll(),this._unregisterSignalOutput(i.name))}for(;this.outputSignals.length<i;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(i,x){if(i._hasExecutionVariable(this,"indexesUsed")||i._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),x===this.reset)return i._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new Y.d(-1),i);const e=i._getExecutionVariable(this,"indexesUsed",[]),j=this._getNextIndex(e);j>-1&&(this.lastIndex.setValue(new Y.d(j),i),e[j]=!0,i._setExecutionVariable(this,"indexesUsed",e),this.outputSignals[j]._activateSignal(i))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(i){super.serialize(i),i.config.outputSignalCount=this.config.outputSignalCount,i.config.isRandom=this.config.isRandom,i.config.loop=this.config.isLoop,i.config.startIndex=this.config.startIndex}}(0,j.f)("FlowGraphMultiGateBlock",J)}}]);