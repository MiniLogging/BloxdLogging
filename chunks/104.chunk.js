"use strict";(self.v2pspxy442l=self.v2pspxy442l||[]).push([[104],{15724:(l,a,N)=>{N.r(a),N.d(a,{FlowGraphMultiGateBlock:()=>w});var U=N(12394),c=N(14167),K=N(14145),Z=N(14138);class w extends c.b{constructor(l){super(l),this.config=l,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",K.l,new Z.d(-1)),this.setNumberOfOutputSignals(null===l||void 0===l?void 0:l.outputSignalCount)}_getNextIndex(l){if(l.includes(!1)||this.config.isLoop&&l.fill(!1),this.config.isRandom){const a=l.map(((l,a)=>l?-1:a)).filter((l=>-1!==l));return a.length?a[Math.floor(Math.random()*a.length)]:-1}return l.indexOf(!1)}setNumberOfOutputSignals(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>l;){const l=this.outputSignals.pop();l&&(l.disconnectFromAll(),this._unregisterSignalOutput(l.name))}for(;this.outputSignals.length<l;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(l,a){if(l._hasExecutionVariable(this,"indexesUsed")||l._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),a===this.reset)return l._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new Z.d(-1),l);const N=l._getExecutionVariable(this,"indexesUsed",[]),U=this._getNextIndex(N);U>-1&&(this.lastIndex.setValue(new Z.d(U),l),N[U]=!0,l._setExecutionVariable(this,"indexesUsed",N),this.outputSignals[U]._activateSignal(l))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(l){super.serialize(l),l.config.outputSignalCount=this.config.outputSignalCount,l.config.isRandom=this.config.isRandom,l.config.loop=this.config.isLoop,l.config.startIndex=this.config.startIndex}}(0,U.g)("FlowGraphMultiGateBlock",w)}}]);