"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[104],{15741:(e,d,v)=>{v.r(d),v.d(d,{FlowGraphMultiGateBlock:()=>X});var P=v(12381),p=v(14192),L=v(14181),B=v(14179);class X extends p.c{constructor(e){super(e),this.config=e,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",L.f,new B.d(-1)),this.setNumberOfOutputSignals(null===e||void 0===e?void 0:e.outputSignalCount)}_getNextIndex(e){if(e.includes(!1)||this.config.isLoop&&e.fill(!1),this.config.isRandom){const d=e.map(((e,d)=>e?-1:d)).filter((e=>-1!==e));return d.length?d[Math.floor(Math.random()*d.length)]:-1}return e.indexOf(!1)}setNumberOfOutputSignals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>e;){const e=this.outputSignals.pop();e&&(e.disconnectFromAll(),this._unregisterSignalOutput(e.name))}for(;this.outputSignals.length<e;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(e,d){if(e._hasExecutionVariable(this,"indexesUsed")||e._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),d===this.reset)return e._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new B.d(-1),e);const v=e._getExecutionVariable(this,"indexesUsed",[]),P=this._getNextIndex(v);P>-1&&(this.lastIndex.setValue(new B.d(P),e),v[P]=!0,e._setExecutionVariable(this,"indexesUsed",v),this.outputSignals[P]._activateSignal(e))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(e){super.serialize(e),e.config.outputSignalCount=this.config.outputSignalCount,e.config.isRandom=this.config.isRandom,e.config.loop=this.config.isLoop,e.config.startIndex=this.config.startIndex}}(0,P.h)("FlowGraphMultiGateBlock",X)}}]);