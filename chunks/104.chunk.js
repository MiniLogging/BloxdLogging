"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[104],{16086:(p,b,M)=>{M.r(b),M.d(b,{FlowGraphMultiGateBlock:()=>P});var h=M(12730),Q=M(14337),mp=M(14316),y=M(14311);class P extends Q.e{constructor(p){super(p),this.config=p,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",mp.k,new y.e(-1)),this.setNumberOfOutputSignals(null===p||void 0===p?void 0:p.outputSignalCount)}_getNextIndex(p){if(p.includes(!1)||this.config.isLoop&&p.fill(!1),this.config.isRandom){const b=p.map(((p,b)=>p?-1:b)).filter((p=>-1!==p));return b.length?b[Math.floor(Math.random()*b.length)]:-1}return p.indexOf(!1)}setNumberOfOutputSignals(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>p;){const p=this.outputSignals.pop();p&&(p.disconnectFromAll(),this._unregisterSignalOutput(p.name))}for(;this.outputSignals.length<p;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(p,b){if(p._hasExecutionVariable(this,"indexesUsed")||p._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),b===this.reset)return p._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new y.e(-1),p);const M=p._getExecutionVariable(this,"indexesUsed",[]),h=this._getNextIndex(M);h>-1&&(this.lastIndex.setValue(new y.e(h),p),M[h]=!0,p._setExecutionVariable(this,"indexesUsed",M),this.outputSignals[h]._activateSignal(p))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(p){super.serialize(p),p.config.outputSignalCount=this.config.outputSignalCount,p.config.isRandom=this.config.isRandom,p.config.loop=this.config.isLoop,p.config.startIndex=this.config.startIndex}}(0,h.c)("FlowGraphMultiGateBlock",P)}}]);