"use strict";(self.uw9p3pwwsje=self.uw9p3pwwsje||[]).push([[82],{15863:(D,h,o)=>{o.r(h),o.d(h,{FlowGraphInterpolationBlock:()=>R});var H=o(14386),g=o(14362),j=o(13377),M=o(12793);class R extends H.e{constructor(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(D),this.keyFrames=[];const h="string"===typeof(null===D||void 0===D?void 0:D.animationType)?(0,g.D)(D.animationType):(0,g.A)((null===D||void 0===D?void 0:D.animationType)??0),o=(null===D||void 0===D?void 0:D.keyFramesCount)??1,H=this.registerDataInput("duration_0",g.q,0),j=this.registerDataInput("value_0",h);this.keyFrames.push({duration:H,value:j});for(let M=1;M<o+1;M++){const H=this.registerDataInput(`duration_${M}`,g.q,M===o?D.duration:void 0),j=this.registerDataInput(`value_${M}`,h);this.keyFrames.push({duration:H,value:j})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[o].value,this.easingFunction=this.registerDataInput("easingFunction",g.c),this.animation=this.registerDataOutput("animation",g.c),this.propertyName=this.registerDataInput("propertyName",g.c,null===D||void 0===D?void 0:D.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",g.c)}_updateOutputs(D){const h=D._getGlobalContextVariable("interpolationAnimations",[]),o=this.propertyName.getValue(D),H=this.easingFunction.getValue(D),g=this._createAnimation(D,o,H);if(this.animation.setValue(g,D),Array.isArray(g))for(const j of g)h.push(j.uniqueId);else h.push(g.uniqueId);D._setGlobalContextVariable("interpolationAnimations",h)}_createAnimation(D,h,o){var H;const g=this.initialValue.richType,M=[],R=this.initialValue.getValue(D)||g.defaultValue;M.push({frame:0,value:R});const t=(null===(H=this.config)||void 0===H?void 0:H.numberOfKeyFrames)??1;for(let j=1;j<t+1;j++){var S,k;const h=null===(S=this.keyFrames[j].duration)||void 0===S?void 0:S.getValue(D);let o=null===(k=this.keyFrames[j].value)||void 0===k?void 0:k.getValue(D);j===t-1&&(o=o||g.defaultValue),void 0!==h&&o&&M.push({frame:60*h,value:o})}const K=this.customBuildAnimation.getValue(D);if(K)return K(null,null,D)(M,60,g.animationType,o);if("string"===typeof h){const D=j.e.CreateAnimation(h,g.animationType,60,o);return D.setKeys(M),[D]}return h.map((D=>{const h=j.e.CreateAnimation(D,g.animationType,60,o);return h.setKeys(M),h}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,M.g)("FlowGraphInterpolationBlock",R)}}]);