"use strict";(self.k9ivgwsw3f=self.k9ivgwsw3f||[]).push([[82],{16063:(Y,b,C)=>{C.r(b),C.d(b,{FlowGraphInterpolationBlock:()=>B});var R=C(14437),q=C(14424),A=C(13351),E=C(12790);class B extends R.e{constructor(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Y),this.keyFrames=[];const b="string"===typeof(null===Y||void 0===Y?void 0:Y.animationType)?(0,q.J)(Y.animationType):(0,q.I)((null===Y||void 0===Y?void 0:Y.animationType)??0),C=(null===Y||void 0===Y?void 0:Y.keyFramesCount)??1,R=this.registerDataInput("duration_0",q.q,0),A=this.registerDataInput("value_0",b);this.keyFrames.push({duration:R,value:A});for(let E=1;E<C+1;E++){const R=this.registerDataInput(`duration_${E}`,q.q,E===C?Y.duration:void 0),A=this.registerDataInput(`value_${E}`,b);this.keyFrames.push({duration:R,value:A})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[C].value,this.easingFunction=this.registerDataInput("easingFunction",q.b),this.animation=this.registerDataOutput("animation",q.b),this.propertyName=this.registerDataInput("propertyName",q.b,null===Y||void 0===Y?void 0:Y.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",q.b)}_updateOutputs(Y){const b=Y._getGlobalContextVariable("interpolationAnimations",[]),C=this.propertyName.getValue(Y),R=this.easingFunction.getValue(Y),q=this._createAnimation(Y,C,R);if(this.animation.setValue(q,Y),Array.isArray(q))for(const A of q)b.push(A.uniqueId);else b.push(q.uniqueId);Y._setGlobalContextVariable("interpolationAnimations",b)}_createAnimation(Y,b,C){var R;const q=this.initialValue.richType,E=[],B=this.initialValue.getValue(Y)||q.defaultValue;E.push({frame:0,value:B});const g=(null===(R=this.config)||void 0===R?void 0:R.numberOfKeyFrames)??1;for(let A=1;A<g+1;A++){var r,O;const b=null===(r=this.keyFrames[A].duration)||void 0===r?void 0:r.getValue(Y);let C=null===(O=this.keyFrames[A].value)||void 0===O?void 0:O.getValue(Y);A===g-1&&(C=C||q.defaultValue),void 0!==b&&C&&E.push({frame:60*b,value:C})}const F=this.customBuildAnimation.getValue(Y);if(F)return F(null,null,Y)(E,60,q.animationType,C);if("string"===typeof b){const Y=A.e.CreateAnimation(b,q.animationType,60,C);return Y.setKeys(E),[Y]}return b.map((Y=>{const b=A.e.CreateAnimation(Y,q.animationType,60,C);return b.setKeys(E),b}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,E.g)("FlowGraphInterpolationBlock",B)}}]);