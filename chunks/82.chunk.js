"use strict";(self.ksd6jhs1yr=self.ksd6jhs1yr||[]).push([[82],{15579:(C,c,d)=>{d.r(c),d.d(c,{FlowGraphInterpolationBlock:()=>R});var b=d(14158),X=d(14126),P=d(12924),V=d(12345);class R extends b.e{constructor(){let C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(C),this.keyFrames=[];const c="string"===typeof(null===C||void 0===C?void 0:C.animationType)?(0,X.H)(C.animationType):(0,X.D)((null===C||void 0===C?void 0:C.animationType)??0),d=(null===C||void 0===C?void 0:C.keyFramesCount)??1,b=this.registerDataInput("duration_0",X.q,0),P=this.registerDataInput("value_0",c);this.keyFrames.push({duration:b,value:P});for(let V=1;V<d+1;V++){const b=this.registerDataInput(`duration_${V}`,X.q,V===d?C.duration:void 0),P=this.registerDataInput(`value_${V}`,c);this.keyFrames.push({duration:b,value:P})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[d].value,this.easingFunction=this.registerDataInput("easingFunction",X.b),this.animation=this.registerDataOutput("animation",X.b),this.propertyName=this.registerDataInput("propertyName",X.b,null===C||void 0===C?void 0:C.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",X.b)}_updateOutputs(C){const c=C._getGlobalContextVariable("interpolationAnimations",[]),d=this.propertyName.getValue(C),b=this.easingFunction.getValue(C),X=this._createAnimation(C,d,b);if(this.animation.setValue(X,C),Array.isArray(X))for(const P of X)c.push(P.uniqueId);else c.push(X.uniqueId);C._setGlobalContextVariable("interpolationAnimations",c)}_createAnimation(C,c,d){var b;const X=this.initialValue.richType,V=[],R=this.initialValue.getValue(C)||X.defaultValue;V.push({frame:0,value:R});const p=(null===(b=this.config)||void 0===b?void 0:b.numberOfKeyFrames)??1;for(let P=1;P<p+1;P++){var j,g;const c=null===(j=this.keyFrames[P].duration)||void 0===j?void 0:j.getValue(C);let d=null===(g=this.keyFrames[P].value)||void 0===g?void 0:g.getValue(C);P===p-1&&(d=d||X.defaultValue),void 0!==c&&d&&V.push({frame:60*c,value:d})}const k=this.customBuildAnimation.getValue(C);if(k)return k(null,null,C)(V,60,X.animationType,d);if("string"===typeof c){const C=P.b.CreateAnimation(c,X.animationType,60,d);return C.setKeys(V),[C]}return c.map((C=>{const c=P.b.CreateAnimation(C,X.animationType,60,d);return c.setKeys(V),c}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,V.e)("FlowGraphInterpolationBlock",R)}}]);