"use strict";(self["9x1utqq1axc"]=self["9x1utqq1axc"]||[]).push([[82],{15477:(y,c,A)=>{A.r(c),A.d(c,{FlowGraphInterpolationBlock:()=>W});var l=A(14010),w=A(13993),N=A(12845),p=A(12283);class W extends l.e{constructor(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(y),this.keyFrames=[];const c="string"===typeof(null===y||void 0===y?void 0:y.animationType)?(0,w.S)(y.animationType):(0,w.R)((null===y||void 0===y?void 0:y.animationType)??0),A=(null===y||void 0===y?void 0:y.keyFramesCount)??1,l=this.registerDataInput("duration_0",w.s,0),N=this.registerDataInput("value_0",c);this.keyFrames.push({duration:l,value:N});for(let p=1;p<A+1;p++){const l=this.registerDataInput(`duration_${p}`,w.s,p===A?y.duration:void 0),N=this.registerDataInput(`value_${p}`,c);this.keyFrames.push({duration:l,value:N})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[A].value,this.easingFunction=this.registerDataInput("easingFunction",w.e),this.animation=this.registerDataOutput("animation",w.e),this.propertyName=this.registerDataInput("propertyName",w.e,null===y||void 0===y?void 0:y.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",w.e)}_updateOutputs(y){const c=y._getGlobalContextVariable("interpolationAnimations",[]),A=this.propertyName.getValue(y),l=this.easingFunction.getValue(y),w=this._createAnimation(y,A,l);if(this.animation.setValue(w,y),Array.isArray(w))for(const N of w)c.push(N.uniqueId);else c.push(w.uniqueId);y._setGlobalContextVariable("interpolationAnimations",c)}_createAnimation(y,c,A){var l;const w=this.initialValue.richType,p=[],W=this.initialValue.getValue(y)||w.defaultValue;p.push({frame:0,value:W});const h=(null===(l=this.config)||void 0===l?void 0:l.numberOfKeyFrames)??1;for(let N=1;N<h+1;N++){var I,q;const c=null===(I=this.keyFrames[N].duration)||void 0===I?void 0:I.getValue(y);let A=null===(q=this.keyFrames[N].value)||void 0===q?void 0:q.getValue(y);N===h-1&&(A=A||w.defaultValue),void 0!==c&&A&&p.push({frame:60*c,value:A})}const o=this.customBuildAnimation.getValue(y);if(o)return o(null,null,y)(p,60,w.animationType,A);if("string"===typeof c){const y=N.b.CreateAnimation(c,w.animationType,60,A);return y.setKeys(p),[y]}return c.map((y=>{const c=N.b.CreateAnimation(y,w.animationType,60,A);return c.setKeys(p),c}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,p.f)("FlowGraphInterpolationBlock",W)}}]);