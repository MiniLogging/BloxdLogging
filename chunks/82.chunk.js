"use strict";(self["3nlrbof8msu"]=self["3nlrbof8msu"]||[]).push([[82],{15921:(t,b,Z)=>{Z.r(b),Z.d(b,{FlowGraphInterpolationBlock:()=>h});var J=Z(14432),S=Z(14405),P=Z(13261),v=Z(12688);class h extends J.e{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.keyFrames=[];const b="string"===typeof(null===t||void 0===t?void 0:t.animationType)?(0,S.O)(t.animationType):(0,S.K)((null===t||void 0===t?void 0:t.animationType)??0),Z=(null===t||void 0===t?void 0:t.keyFramesCount)??1,J=this.registerDataInput("duration_0",S.q,0),P=this.registerDataInput("value_0",b);this.keyFrames.push({duration:J,value:P});for(let v=1;v<Z+1;v++){const J=this.registerDataInput(`duration_${v}`,S.q,v===Z?t.duration:void 0),P=this.registerDataInput(`value_${v}`,b);this.keyFrames.push({duration:J,value:P})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[Z].value,this.easingFunction=this.registerDataInput("easingFunction",S.c),this.animation=this.registerDataOutput("animation",S.c),this.propertyName=this.registerDataInput("propertyName",S.c,null===t||void 0===t?void 0:t.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",S.c)}_updateOutputs(t){const b=t._getGlobalContextVariable("interpolationAnimations",[]),Z=this.propertyName.getValue(t),J=this.easingFunction.getValue(t),S=this._createAnimation(t,Z,J);if(this.animation.setValue(S,t),Array.isArray(S))for(const P of S)b.push(P.uniqueId);else b.push(S.uniqueId);t._setGlobalContextVariable("interpolationAnimations",b)}_createAnimation(t,b,Z){var J;const S=this.initialValue.richType,v=[],h=this.initialValue.getValue(t)||S.defaultValue;v.push({frame:0,value:h});const C=(null===(J=this.config)||void 0===J?void 0:J.numberOfKeyFrames)??1;for(let P=1;P<C+1;P++){var Y,g;const b=null===(Y=this.keyFrames[P].duration)||void 0===Y?void 0:Y.getValue(t);let Z=null===(g=this.keyFrames[P].value)||void 0===g?void 0:g.getValue(t);P===C-1&&(Z=Z||S.defaultValue),void 0!==b&&Z&&v.push({frame:60*b,value:Z})}const I=this.customBuildAnimation.getValue(t);if(I)return I(null,null,t)(v,60,S.animationType,Z);if("string"===typeof b){const t=P.d.CreateAnimation(b,S.animationType,60,Z);return t.setKeys(v),[t]}return b.map((t=>{const b=P.d.CreateAnimation(t,S.animationType,60,Z);return b.setKeys(v),b}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,v.f)("FlowGraphInterpolationBlock",h)}}]);