"use strict";(self["686i8587bmi"]=self["686i8587bmi"]||[]).push([[82],{16023:(h,d,T)=>{T.r(d),T.d(d,{FlowGraphInterpolationBlock:()=>X});var Y=T(14548),y=T(14528),C=T(13301),n=T(12714);class X extends Y.e{constructor(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(h),this.keyFrames=[];const d="string"===typeof(null===h||void 0===h?void 0:h.animationType)?(0,y.K)(h.animationType):(0,y.J)((null===h||void 0===h?void 0:h.animationType)??0),T=(null===h||void 0===h?void 0:h.keyFramesCount)??1,Y=this.registerDataInput("duration_0",y.s,0),C=this.registerDataInput("value_0",d);this.keyFrames.push({duration:Y,value:C});for(let n=1;n<T+1;n++){const Y=this.registerDataInput(`duration_${n}`,y.s,n===T?h.duration:void 0),C=this.registerDataInput(`value_${n}`,d);this.keyFrames.push({duration:Y,value:C})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[T].value,this.easingFunction=this.registerDataInput("easingFunction",y.b),this.animation=this.registerDataOutput("animation",y.b),this.propertyName=this.registerDataInput("propertyName",y.b,null===h||void 0===h?void 0:h.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",y.b)}_updateOutputs(h){const d=h._getGlobalContextVariable("interpolationAnimations",[]),T=this.propertyName.getValue(h),Y=this.easingFunction.getValue(h),y=this._createAnimation(h,T,Y);if(this.animation.setValue(y,h),Array.isArray(y))for(const C of y)d.push(C.uniqueId);else d.push(y.uniqueId);h._setGlobalContextVariable("interpolationAnimations",d)}_createAnimation(h,d,T){var Y;const y=this.initialValue.richType,n=[],X=this.initialValue.getValue(h)||y.defaultValue;n.push({frame:0,value:X});const F=(null===(Y=this.config)||void 0===Y?void 0:Y.numberOfKeyFrames)??1;for(let C=1;C<F+1;C++){var U,Z;const d=null===(U=this.keyFrames[C].duration)||void 0===U?void 0:U.getValue(h);let T=null===(Z=this.keyFrames[C].value)||void 0===Z?void 0:Z.getValue(h);C===F-1&&(T=T||y.defaultValue),void 0!==d&&T&&n.push({frame:60*d,value:T})}const S=this.customBuildAnimation.getValue(h);if(S)return S(null,null,h)(n,60,y.animationType,T);if("string"===typeof d){const h=C.c.CreateAnimation(d,y.animationType,60,T);return h.setKeys(n),[h]}return d.map((h=>{const d=C.c.CreateAnimation(h,y.animationType,60,T);return d.setKeys(n),d}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,n.e)("FlowGraphInterpolationBlock",X)}}]);