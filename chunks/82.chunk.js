"use strict";(self.b15p7b72fr8=self.b15p7b72fr8||[]).push([[82],{15813:(s,k,h)=>{h.r(k),h.d(k,{FlowGraphInterpolationBlock:()=>K});var A=h(14325),g=h(14315),ms=h(13128),i=h(12543);class K extends A.e{constructor(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(s),this.keyFrames=[];const k="string"===typeof(null===s||void 0===s?void 0:s.animationType)?(0,g.G)(s.animationType):(0,g.F)((null===s||void 0===s?void 0:s.animationType)??0),h=(null===s||void 0===s?void 0:s.keyFramesCount)??1,A=this.registerDataInput("duration_0",g.m,0),ms=this.registerDataInput("value_0",k);this.keyFrames.push({duration:A,value:ms});for(let i=1;i<h+1;i++){const A=this.registerDataInput(`duration_${i}`,g.m,i===h?s.duration:void 0),ms=this.registerDataInput(`value_${i}`,k);this.keyFrames.push({duration:A,value:ms})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[h].value,this.easingFunction=this.registerDataInput("easingFunction",g.c),this.animation=this.registerDataOutput("animation",g.c),this.propertyName=this.registerDataInput("propertyName",g.c,null===s||void 0===s?void 0:s.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",g.c)}_updateOutputs(s){const k=s._getGlobalContextVariable("interpolationAnimations",[]),h=this.propertyName.getValue(s),A=this.easingFunction.getValue(s),g=this._createAnimation(s,h,A);if(this.animation.setValue(g,s),Array.isArray(g))for(const ms of g)k.push(ms.uniqueId);else k.push(g.uniqueId);s._setGlobalContextVariable("interpolationAnimations",k)}_createAnimation(s,k,h){var A;const g=this.initialValue.richType,i=[],K=this.initialValue.getValue(s)||g.defaultValue;i.push({frame:0,value:K});const H=(null===(A=this.config)||void 0===A?void 0:A.numberOfKeyFrames)??1;for(let ms=1;ms<H+1;ms++){var O,c;const k=null===(O=this.keyFrames[ms].duration)||void 0===O?void 0:O.getValue(s);let h=null===(c=this.keyFrames[ms].value)||void 0===c?void 0:c.getValue(s);ms===H-1&&(h=h||g.defaultValue),void 0!==k&&h&&i.push({frame:60*k,value:h})}const S=this.customBuildAnimation.getValue(s);if(S)return S(null,null,s)(i,60,g.animationType,h);if("string"===typeof k){const s=ms.c.CreateAnimation(k,g.animationType,60,h);return s.setKeys(i),[s]}return k.map((s=>{const k=ms.c.CreateAnimation(s,g.animationType,60,h);return k.setKeys(i),k}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,i.f)("FlowGraphInterpolationBlock",K)}}]);