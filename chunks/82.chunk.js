"use strict";(self.ipz2em9uj1g=self.ipz2em9uj1g||[]).push([[82],{15832:(r,O,W)=>{W.r(O),W.d(O,{FlowGraphInterpolationBlock:()=>h});var q=W(14297),Q=W(14274),C=W(13058),T=W(12560);class h extends q.d{constructor(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(r),this.keyFrames=[];const O="string"===typeof(null===r||void 0===r?void 0:r.animationType)?(0,Q.K)(r.animationType):(0,Q.I)((null===r||void 0===r?void 0:r.animationType)??0),W=(null===r||void 0===r?void 0:r.keyFramesCount)??1,q=this.registerDataInput("duration_0",Q.r,0),C=this.registerDataInput("value_0",O);this.keyFrames.push({duration:q,value:C});for(let T=1;T<W+1;T++){const q=this.registerDataInput(`duration_${T}`,Q.r,T===W?r.duration:void 0),C=this.registerDataInput(`value_${T}`,O);this.keyFrames.push({duration:q,value:C})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[W].value,this.easingFunction=this.registerDataInput("easingFunction",Q.c),this.animation=this.registerDataOutput("animation",Q.c),this.propertyName=this.registerDataInput("propertyName",Q.c,null===r||void 0===r?void 0:r.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",Q.c)}_updateOutputs(r){const O=r._getGlobalContextVariable("interpolationAnimations",[]),W=this.propertyName.getValue(r),q=this.easingFunction.getValue(r),Q=this._createAnimation(r,W,q);if(this.animation.setValue(Q,r),Array.isArray(Q))for(const C of Q)O.push(C.uniqueId);else O.push(Q.uniqueId);r._setGlobalContextVariable("interpolationAnimations",O)}_createAnimation(r,O,W){var q;const Q=this.initialValue.richType,T=[],h=this.initialValue.getValue(r)||Q.defaultValue;T.push({frame:0,value:h});const J=(null===(q=this.config)||void 0===q?void 0:q.numberOfKeyFrames)??1;for(let C=1;C<J+1;C++){var mr,d;const O=null===(mr=this.keyFrames[C].duration)||void 0===mr?void 0:mr.getValue(r);let W=null===(d=this.keyFrames[C].value)||void 0===d?void 0:d.getValue(r);C===J-1&&(W=W||Q.defaultValue),void 0!==O&&W&&T.push({frame:60*O,value:W})}const v=this.customBuildAnimation.getValue(r);if(v)return v(null,null,r)(T,60,Q.animationType,W);if("string"===typeof O){const r=C.b.CreateAnimation(O,Q.animationType,60,W);return r.setKeys(T),[r]}return O.map((r=>{const O=C.b.CreateAnimation(r,Q.animationType,60,W);return O.setKeys(T),O}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,T.e)("FlowGraphInterpolationBlock",h)}}]);