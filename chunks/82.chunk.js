"use strict";(self.a14qw1h7fq=self.a14qw1h7fq||[]).push([[82],{14347:(R,J,B)=>{B.r(J),B.d(J,{FlowGraphInterpolationBlock:()=>r});var Q=B(12922),h=B(12894),y=B(11718),N=B(11142);class r extends Q.c{constructor(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(R),this.keyFrames=[];const J="string"===typeof(null===R||void 0===R?void 0:R.animationType)?(0,h.O)(R.animationType):(0,h.M)((null===R||void 0===R?void 0:R.animationType)??0),B=(null===R||void 0===R?void 0:R.keyFramesCount)??1,Q=this.registerDataInput("duration_0",h.t,0),y=this.registerDataInput("value_0",J);this.keyFrames.push({duration:Q,value:y});for(let N=1;N<B+1;N++){const Q=this.registerDataInput(`duration_${N}`,h.t,N===B?R.duration:void 0),y=this.registerDataInput(`value_${N}`,J);this.keyFrames.push({duration:Q,value:y})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[B].value,this.easingFunction=this.registerDataInput("easingFunction",h.e),this.animation=this.registerDataOutput("animation",h.e),this.propertyName=this.registerDataInput("propertyName",h.e,null===R||void 0===R?void 0:R.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",h.e)}_updateOutputs(R){const J=R._getGlobalContextVariable("interpolationAnimations",[]),B=this.propertyName.getValue(R),Q=this.easingFunction.getValue(R),h=this._createAnimation(R,B,Q);if(this.animation.setValue(h,R),Array.isArray(h))for(const y of h)J.push(y.uniqueId);else J.push(h.uniqueId);R._setGlobalContextVariable("interpolationAnimations",J)}_createAnimation(R,J,B){var Q;const h=this.initialValue.richType,N=[],r=this.initialValue.getValue(R)||h.defaultValue;N.push({frame:0,value:r});const q=(null===(Q=this.config)||void 0===Q?void 0:Q.numberOfKeyFrames)??1;for(let y=1;y<q+1;y++){var e,D;const J=null===(e=this.keyFrames[y].duration)||void 0===e?void 0:e.getValue(R);let B=null===(D=this.keyFrames[y].value)||void 0===D?void 0:D.getValue(R);y===q-1&&(B=B||h.defaultValue),void 0!==J&&B&&N.push({frame:60*J,value:B})}const l=this.customBuildAnimation.getValue(R);if(l)return l(null,null,R)(N,60,h.animationType,B);if("string"===typeof J){const R=y.c.CreateAnimation(J,h.animationType,60,B);return R.setKeys(N),[R]}return J.map((R=>{const J=y.c.CreateAnimation(R,h.animationType,60,B);return J.setKeys(N),J}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,N.h)("FlowGraphInterpolationBlock",r)}}]);