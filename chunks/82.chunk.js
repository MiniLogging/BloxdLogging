"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[82],{15621:(e,d,v)=>{v.r(d),v.d(d,{FlowGraphInterpolationBlock:()=>X});var P=v(14195),p=v(14181),L=v(12948),B=v(12381);class X extends P.e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.keyFrames=[];const d="string"===typeof(null===e||void 0===e?void 0:e.animationType)?(0,p.F)(e.animationType):(0,p.B)((null===e||void 0===e?void 0:e.animationType)??0),v=(null===e||void 0===e?void 0:e.keyFramesCount)??1,P=this.registerDataInput("duration_0",p.n,0),L=this.registerDataInput("value_0",d);this.keyFrames.push({duration:P,value:L});for(let B=1;B<v+1;B++){const P=this.registerDataInput(`duration_${B}`,p.n,B===v?e.duration:void 0),L=this.registerDataInput(`value_${B}`,d);this.keyFrames.push({duration:P,value:L})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[v].value,this.easingFunction=this.registerDataInput("easingFunction",p.b),this.animation=this.registerDataOutput("animation",p.b),this.propertyName=this.registerDataInput("propertyName",p.b,null===e||void 0===e?void 0:e.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",p.b)}_updateOutputs(e){const d=e._getGlobalContextVariable("interpolationAnimations",[]),v=this.propertyName.getValue(e),P=this.easingFunction.getValue(e),p=this._createAnimation(e,v,P);if(this.animation.setValue(p,e),Array.isArray(p))for(const L of p)d.push(L.uniqueId);else d.push(p.uniqueId);e._setGlobalContextVariable("interpolationAnimations",d)}_createAnimation(e,d,v){var P;const p=this.initialValue.richType,B=[],X=this.initialValue.getValue(e)||p.defaultValue;B.push({frame:0,value:X});const z=(null===(P=this.config)||void 0===P?void 0:P.numberOfKeyFrames)??1;for(let L=1;L<z+1;L++){var W,V;const d=null===(W=this.keyFrames[L].duration)||void 0===W?void 0:W.getValue(e);let v=null===(V=this.keyFrames[L].value)||void 0===V?void 0:V.getValue(e);L===z-1&&(v=v||p.defaultValue),void 0!==d&&v&&B.push({frame:60*d,value:v})}const k=this.customBuildAnimation.getValue(e);if(k)return k(null,null,e)(B,60,p.animationType,v);if("string"===typeof d){const e=L.e.CreateAnimation(d,p.animationType,60,v);return e.setKeys(B),[e]}return d.map((e=>{const d=L.e.CreateAnimation(e,p.animationType,60,v);return d.setKeys(B),d}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,B.h)("FlowGraphInterpolationBlock",X)}}]);