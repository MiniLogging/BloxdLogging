"use strict";(self.vb3rpbgyozo=self.vb3rpbgyozo||[]).push([[82],{15959:(q,I,l)=>{l.r(I),l.d(I,{FlowGraphInterpolationBlock:()=>a});var w=l(14457),t=l(14441),O=l(13247),c=l(12711);class a extends w.c{constructor(){let q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(q),this.keyFrames=[];const I="string"===typeof(null===q||void 0===q?void 0:q.animationType)?(0,t.P)(q.animationType):(0,t.M)((null===q||void 0===q?void 0:q.animationType)??0),l=(null===q||void 0===q?void 0:q.keyFramesCount)??1,w=this.registerDataInput("duration_0",t.v,0),O=this.registerDataInput("value_0",I);this.keyFrames.push({duration:w,value:O});for(let c=1;c<l+1;c++){const w=this.registerDataInput(`duration_${c}`,t.v,c===l?q.duration:void 0),O=this.registerDataInput(`value_${c}`,I);this.keyFrames.push({duration:w,value:O})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[l].value,this.easingFunction=this.registerDataInput("easingFunction",t.e),this.animation=this.registerDataOutput("animation",t.e),this.propertyName=this.registerDataInput("propertyName",t.e,null===q||void 0===q?void 0:q.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",t.e)}_updateOutputs(q){const I=q._getGlobalContextVariable("interpolationAnimations",[]),l=this.propertyName.getValue(q),w=this.easingFunction.getValue(q),t=this._createAnimation(q,l,w);if(this.animation.setValue(t,q),Array.isArray(t))for(const O of t)I.push(O.uniqueId);else I.push(t.uniqueId);q._setGlobalContextVariable("interpolationAnimations",I)}_createAnimation(q,I,l){var w;const t=this.initialValue.richType,c=[],a=this.initialValue.getValue(q)||t.defaultValue;c.push({frame:0,value:a});const F=(null===(w=this.config)||void 0===w?void 0:w.numberOfKeyFrames)??1;for(let O=1;O<F+1;O++){var s,Z;const I=null===(s=this.keyFrames[O].duration)||void 0===s?void 0:s.getValue(q);let l=null===(Z=this.keyFrames[O].value)||void 0===Z?void 0:Z.getValue(q);O===F-1&&(l=l||t.defaultValue),void 0!==I&&l&&c.push({frame:60*I,value:l})}const r=this.customBuildAnimation.getValue(q);if(r)return r(null,null,q)(c,60,t.animationType,l);if("string"===typeof I){const q=O.d.CreateAnimation(I,t.animationType,60,l);return q.setKeys(c),[q]}return I.map((q=>{const I=O.d.CreateAnimation(q,t.animationType,60,l);return I.setKeys(c),I}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,c.e)("FlowGraphInterpolationBlock",a)}}]);