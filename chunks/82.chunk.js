"use strict";(self["269hv5nclphh"]=self["269hv5nclphh"]||[]).push([[82],{15564:(E,H,d)=>{d.r(H),d.d(H,{FlowGraphInterpolationBlock:()=>l});var n=d(14125),Z=d(14103),I=d(12910),g=d(12344);class l extends n.c{constructor(){let E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(E),this.keyFrames=[];const H="string"===typeof(null===E||void 0===E?void 0:E.animationType)?(0,Z.M)(E.animationType):(0,Z.L)((null===E||void 0===E?void 0:E.animationType)??0),d=(null===E||void 0===E?void 0:E.keyFramesCount)??1,n=this.registerDataInput("duration_0",Z.r,0),I=this.registerDataInput("value_0",H);this.keyFrames.push({duration:n,value:I});for(let g=1;g<d+1;g++){const n=this.registerDataInput(`duration_${g}`,Z.r,g===d?E.duration:void 0),I=this.registerDataInput(`value_${g}`,H);this.keyFrames.push({duration:n,value:I})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[d].value,this.easingFunction=this.registerDataInput("easingFunction",Z.e),this.animation=this.registerDataOutput("animation",Z.e),this.propertyName=this.registerDataInput("propertyName",Z.e,null===E||void 0===E?void 0:E.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",Z.e)}_updateOutputs(E){const H=E._getGlobalContextVariable("interpolationAnimations",[]),d=this.propertyName.getValue(E),n=this.easingFunction.getValue(E),Z=this._createAnimation(E,d,n);if(this.animation.setValue(Z,E),Array.isArray(Z))for(const I of Z)H.push(I.uniqueId);else H.push(Z.uniqueId);E._setGlobalContextVariable("interpolationAnimations",H)}_createAnimation(E,H,d){var n;const Z=this.initialValue.richType,g=[],l=this.initialValue.getValue(E)||Z.defaultValue;g.push({frame:0,value:l});const r=(null===(n=this.config)||void 0===n?void 0:n.numberOfKeyFrames)??1;for(let I=1;I<r+1;I++){var t,S;const H=null===(t=this.keyFrames[I].duration)||void 0===t?void 0:t.getValue(E);let d=null===(S=this.keyFrames[I].value)||void 0===S?void 0:S.getValue(E);I===r-1&&(d=d||Z.defaultValue),void 0!==H&&d&&g.push({frame:60*H,value:d})}const M=this.customBuildAnimation.getValue(E);if(M)return M(null,null,E)(g,60,Z.animationType,d);if("string"===typeof H){const E=I.b.CreateAnimation(H,Z.animationType,60,d);return E.setKeys(g),[E]}return H.map((E=>{const H=I.b.CreateAnimation(E,Z.animationType,60,d);return H.setKeys(g),H}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,g.e)("FlowGraphInterpolationBlock",l)}}]);