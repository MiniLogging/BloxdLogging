"use strict";(self.ra6kpa9z1sg=self.ra6kpa9z1sg||[]).push([[82],{15970:(p,b,M)=>{M.r(b),M.d(b,{FlowGraphInterpolationBlock:()=>P});var h=M(14341),Q=M(14316),mp=M(13311),y=M(12730);class P extends h.d{constructor(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(p),this.keyFrames=[];const b="string"===typeof(null===p||void 0===p?void 0:p.animationType)?(0,Q.L)(p.animationType):(0,Q.I)((null===p||void 0===p?void 0:p.animationType)??0),M=(null===p||void 0===p?void 0:p.keyFramesCount)??1,h=this.registerDataInput("duration_0",Q.t,0),mp=this.registerDataInput("value_0",b);this.keyFrames.push({duration:h,value:mp});for(let y=1;y<M+1;y++){const h=this.registerDataInput(`duration_${y}`,Q.t,y===M?p.duration:void 0),mp=this.registerDataInput(`value_${y}`,b);this.keyFrames.push({duration:h,value:mp})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[M].value,this.easingFunction=this.registerDataInput("easingFunction",Q.e),this.animation=this.registerDataOutput("animation",Q.e),this.propertyName=this.registerDataInput("propertyName",Q.e,null===p||void 0===p?void 0:p.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",Q.e)}_updateOutputs(p){const b=p._getGlobalContextVariable("interpolationAnimations",[]),M=this.propertyName.getValue(p),h=this.easingFunction.getValue(p),Q=this._createAnimation(p,M,h);if(this.animation.setValue(Q,p),Array.isArray(Q))for(const mp of Q)b.push(mp.uniqueId);else b.push(Q.uniqueId);p._setGlobalContextVariable("interpolationAnimations",b)}_createAnimation(p,b,M){var h;const Q=this.initialValue.richType,y=[],P=this.initialValue.getValue(p)||Q.defaultValue;y.push({frame:0,value:P});const w=(null===(h=this.config)||void 0===h?void 0:h.numberOfKeyFrames)??1;for(let mp=1;mp<w+1;mp++){var t,z;const b=null===(t=this.keyFrames[mp].duration)||void 0===t?void 0:t.getValue(p);let M=null===(z=this.keyFrames[mp].value)||void 0===z?void 0:z.getValue(p);mp===w-1&&(M=M||Q.defaultValue),void 0!==b&&M&&y.push({frame:60*b,value:M})}const x=this.customBuildAnimation.getValue(p);if(x)return x(null,null,p)(y,60,Q.animationType,M);if("string"===typeof b){const p=mp.d.CreateAnimation(b,Q.animationType,60,M);return p.setKeys(y),[p]}return b.map((p=>{const b=mp.d.CreateAnimation(p,Q.animationType,60,M);return b.setKeys(y),b}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,y.c)("FlowGraphInterpolationBlock",P)}}]);