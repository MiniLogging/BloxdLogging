"use strict";(self.fkqm0epoq5=self.fkqm0epoq5||[]).push([[82],{14828:(D,l,G)=>{G.r(l),G.d(l,{FlowGraphInterpolationBlock:()=>X});var V=G(13442),N=G(13423),M=G(12247),b=G(11667);class X extends V.c{constructor(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(D),this.keyFrames=[];const l="string"===typeof(null===D||void 0===D?void 0:D.animationType)?(0,N.A)(D.animationType):(0,N.y)((null===D||void 0===D?void 0:D.animationType)??0),G=(null===D||void 0===D?void 0:D.keyFramesCount)??1,V=this.registerDataInput("duration_0",N.o,0),M=this.registerDataInput("value_0",l);this.keyFrames.push({duration:V,value:M});for(let b=1;b<G+1;b++){const V=this.registerDataInput(`duration_${b}`,N.o,b===G?D.duration:void 0),M=this.registerDataInput(`value_${b}`,l);this.keyFrames.push({duration:V,value:M})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[G].value,this.easingFunction=this.registerDataInput("easingFunction",N.d),this.animation=this.registerDataOutput("animation",N.d),this.propertyName=this.registerDataInput("propertyName",N.d,null===D||void 0===D?void 0:D.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",N.d)}_updateOutputs(D){const l=D._getGlobalContextVariable("interpolationAnimations",[]),G=this.propertyName.getValue(D),V=this.easingFunction.getValue(D),N=this._createAnimation(D,G,V);if(this.animation.setValue(N,D),Array.isArray(N))for(const M of N)l.push(M.uniqueId);else l.push(N.uniqueId);D._setGlobalContextVariable("interpolationAnimations",l)}_createAnimation(D,l,G){var V;const N=this.initialValue.richType,b=[],X=this.initialValue.getValue(D)||N.defaultValue;b.push({frame:0,value:X});const t=(null===(V=this.config)||void 0===V?void 0:V.numberOfKeyFrames)??1;for(let M=1;M<t+1;M++){var R,n;const l=null===(R=this.keyFrames[M].duration)||void 0===R?void 0:R.getValue(D);let G=null===(n=this.keyFrames[M].value)||void 0===n?void 0:n.getValue(D);M===t-1&&(G=G||N.defaultValue),void 0!==l&&G&&b.push({frame:60*l,value:G})}const g=this.customBuildAnimation.getValue(D);if(g)return g(null,null,D)(b,60,N.animationType,G);if("string"===typeof l){const D=M.b.CreateAnimation(l,N.animationType,60,G);return D.setKeys(b),[D]}return l.map((D=>{const l=M.b.CreateAnimation(D,N.animationType,60,G);return l.setKeys(b),l}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,b.c)("FlowGraphInterpolationBlock",X)}}]);