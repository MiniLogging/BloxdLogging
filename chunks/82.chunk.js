"use strict";(self.u4k1rqylno=self.u4k1rqylno||[]).push([[82],{14855:(e,E,H)=>{H.r(E),H.d(E,{FlowGraphInterpolationBlock:()=>M});var N=H(13441),u=H(13415),z=H(12235),P=H(11690);class M extends N.b{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.keyFrames=[];const E="string"===typeof(null===e||void 0===e?void 0:e.animationType)?(0,u.N)(e.animationType):(0,u.K)((null===e||void 0===e?void 0:e.animationType)??0),H=(null===e||void 0===e?void 0:e.keyFramesCount)??1,N=this.registerDataInput("duration_0",u.t,0),z=this.registerDataInput("value_0",E);this.keyFrames.push({duration:N,value:z});for(let P=1;P<H+1;P++){const N=this.registerDataInput(`duration_${P}`,u.t,P===H?e.duration:void 0),z=this.registerDataInput(`value_${P}`,E);this.keyFrames.push({duration:N,value:z})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[H].value,this.easingFunction=this.registerDataInput("easingFunction",u.b),this.animation=this.registerDataOutput("animation",u.b),this.propertyName=this.registerDataInput("propertyName",u.b,null===e||void 0===e?void 0:e.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",u.b)}_updateOutputs(e){const E=e._getGlobalContextVariable("interpolationAnimations",[]),H=this.propertyName.getValue(e),N=this.easingFunction.getValue(e),u=this._createAnimation(e,H,N);if(this.animation.setValue(u,e),Array.isArray(u))for(const z of u)E.push(z.uniqueId);else E.push(u.uniqueId);e._setGlobalContextVariable("interpolationAnimations",E)}_createAnimation(e,E,H){var N;const u=this.initialValue.richType,P=[],M=this.initialValue.getValue(e)||u.defaultValue;P.push({frame:0,value:M});const D=(null===(N=this.config)||void 0===N?void 0:N.numberOfKeyFrames)??1;for(let z=1;z<D+1;z++){var A,C;const E=null===(A=this.keyFrames[z].duration)||void 0===A?void 0:A.getValue(e);let H=null===(C=this.keyFrames[z].value)||void 0===C?void 0:C.getValue(e);z===D-1&&(H=H||u.defaultValue),void 0!==E&&H&&P.push({frame:60*E,value:H})}const i=this.customBuildAnimation.getValue(e);if(i)return i(null,null,e)(P,60,u.animationType,H);if("string"===typeof E){const e=z.b.CreateAnimation(E,u.animationType,60,H);return e.setKeys(P),[e]}return E.map((e=>{const E=z.b.CreateAnimation(e,u.animationType,60,H);return E.setKeys(P),E}))}getClassName(){return"FlowGraphInterpolationBlock"}}(0,P.g)("FlowGraphInterpolationBlock",M)}}]);