/*! For license information please see m38qeq.5.ccc172d3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10631:(h,b,I)=>{I.d(b,{$:()=>j,A:()=>k,E:()=>e,F:()=>q,H:()=>P,I:()=>d,J:()=>o,M:()=>L,P:()=>C,T:()=>w,U:()=>z,W:()=>R,Z:()=>i,ab:()=>t,c:()=>K,cb:()=>F,g:()=>A,i:()=>l,j:()=>v,l:()=>V,n:()=>N,p:()=>U,s:()=>X,w:()=>G});const g=function(h){const b=[];let I=0;for(let g=0;g<h.length;g++){let O=h.charCodeAt(g);O<128?b[I++]=O:O<2048?(b[I++]=O>>6|192,b[I++]=63&O|128):55296===(64512&O)&&g+1<h.length&&56320===(64512&h.charCodeAt(g+1))?(O=65536+((1023&O)<<10)+(1023&h.charCodeAt(++g)),b[I++]=O>>18|240,b[I++]=O>>12&63|128,b[I++]=O>>6&63|128,b[I++]=63&O|128):(b[I++]=O>>12|224,b[I++]=O>>6&63|128,b[I++]=63&O|128)}return b},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(h,b){if(!Array.isArray(h))throw Error("encodeByteArray takes an array as a parameter");this.init_();const I=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,g=[];for(let O=0;O<h.length;O+=3){const b=h[O],T=O+1<h.length,N=T?h[O+1]:0,V=O+2<h.length,M=V?h[O+2]:0,y=b>>2,q=(3&b)<<4|N>>4;let e=(15&N)<<2|M>>6,P=63&M;V||(P=64,T||(e=64)),g.push(I[y],I[q],I[e],I[P])}return g.join("")},encodeString(h,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(h):this.encodeByteArray(g(h),b)},decodeString(h,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(h):function(h){const b=[];let I=0,g=0;for(;I<h.length;){const O=h[I++];if(O<128)b[g++]=String.fromCharCode(O);else if(O>191&&O<224){const T=h[I++];b[g++]=String.fromCharCode((31&O)<<6|63&T)}else if(O>239&&O<365){const T=((7&O)<<18|(63&h[I++])<<12|(63&h[I++])<<6|63&h[I++])-65536;b[g++]=String.fromCharCode(55296+(T>>10)),b[g++]=String.fromCharCode(56320+(1023&T))}else{const T=h[I++],N=h[I++];b[g++]=String.fromCharCode((15&O)<<12|(63&T)<<6|63&N)}}return b.join("")}(this.decodeStringToByteArray(h,b))},decodeStringToByteArray(h,b){this.init_();const I=b?this.charToByteMapWebSafe_:this.charToByteMap_,g=[];for(let O=0;O<h.length;){const b=I[h.charAt(O++)],N=O<h.length?I[h.charAt(O)]:0;++O;const V=O<h.length?I[h.charAt(O)]:64;++O;const M=O<h.length?I[h.charAt(O)]:64;if(++O,null==b||null==N||null==V||null==M)throw new T;const y=b<<2|N>>4;if(g.push(y),64!==V){const h=N<<4&240|V>>2;if(g.push(h),64!==M){const h=V<<6&192|M;g.push(h)}}}return g},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let h=0;h<this.ENCODED_VALS.length;h++)this.byteToCharMap_[h]=this.ENCODED_VALS.charAt(h),this.charToByteMap_[this.byteToCharMap_[h]]=h,this.byteToCharMapWebSafe_[h]=this.ENCODED_VALS_WEBSAFE.charAt(h),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[h]]=h,h>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(h)]=h,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(h)]=h)}}};class T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N=function(h){return function(h){const b=g(h);return O.encodeByteArray(b,!0)}(h).replace(/\./g,"")},V=function(h){try{return O.decodeString(h,!0)}catch(b){console.error("base64Decode failed: ",b)}return null};const M=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof I.g)return I.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,y=()=>{try{return M()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let h;try{h=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(I){return}const b=h&&V(h[1]);return b&&JSON.parse(b)})()}catch(h){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${h}`)}},q=h=>{var b,I;return null===(I=null===(b=y())||void 0===b?void 0:b.emulatorHosts)||void 0===I?void 0:I[h]},e=()=>{var h;return null===(h=y())||void 0===h?void 0:h.config},P=h=>{var b;return null===(b=y())||void 0===b?void 0:b[`_${h}`]};class K{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((h,b)=>{this.resolve=h,this.reject=b}))}wrapCallback(h){return(b,I)=>{b?this.reject(b):this.resolve(I),"function"===typeof h&&(this.promise.catch((()=>{})),1===h.length?h(b):h(b,I))}}}function o(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function R(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(o())}function L(){const h="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof h&&void 0!==h.id}function i(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){const h=o();return h.indexOf("MSIE ")>=0||h.indexOf("Trident/")>=0}function z(){try{return"object"===typeof indexedDB}catch(h){return!1}}function F(){return new Promise(((h,b)=>{try{let I=!0;const g="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(g);O.onsuccess=()=>{O.result.close(),I||self.indexedDB.deleteDatabase(g),h(!0)},O.onupgradeneeded=()=>{I=!1},O.onerror=()=>{var h;b((null===(h=O.error)||void 0===h?void 0:h.message)||"")}}catch(I){b(I)}}))}function v(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class l extends Error{constructor(h,b,I){super(b),this.code=h,this.customData=I,this.name="FirebaseError",Object.setPrototypeOf(this,l.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(h,b,I){this.service=h,this.serviceName=b,this.errors=I}create(h){const b=(arguments.length<=1?void 0:arguments[1])||{},I=`${this.service}/${h}`,g=this.errors[h],O=g?function(h,b){return h.replace(J,((h,I)=>{const g=b[I];return null!=g?String(g):`<${I}?>`}))}(g,b):"Error",T=`${this.serviceName}: ${O} (${I}).`;return new l(I,T,b)}}const J=/\{\$([^}]+)}/g;function C(h){for(const b in h)if(Object.prototype.hasOwnProperty.call(h,b))return!1;return!0}function G(h,b){if(h===b)return!0;const I=Object.keys(h),g=Object.keys(b);for(const O of I){if(!g.includes(O))return!1;const I=h[O],T=b[O];if(a(I)&&a(T)){if(!G(I,T))return!1}else if(I!==T)return!1}for(const O of g)if(!I.includes(O))return!1;return!0}function a(h){return null!==h&&"object"===typeof h}function t(h){const b=[];for(const[I,g]of Object.entries(h))Array.isArray(g)?g.forEach((h=>{b.push(encodeURIComponent(I)+"="+encodeURIComponent(h))})):b.push(encodeURIComponent(I)+"="+encodeURIComponent(g));return b.length?"&"+b.join("&"):""}function j(h){const b={};return h.replace(/^\?/,"").split("&").forEach((h=>{if(h){const[I,g]=h.split("=");b[decodeURIComponent(I)]=decodeURIComponent(g)}})),b}function k(h){const b=h.indexOf("?");if(!b)return"";const I=h.indexOf("#",b);return h.substring(b,I>0?I:void 0)}function X(h,b){const I=new D(h,b);return I.subscribe.bind(I)}class D{constructor(h,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then((()=>{h(this)})).catch((h=>{this.error(h)}))}next(h){this.forEachObserver((b=>{b.next(h)}))}error(h){this.forEachObserver((b=>{b.error(h)})),this.close(h)}complete(){this.forEachObserver((h=>{h.complete()})),this.close()}subscribe(h,b,I){let g;if(void 0===h&&void 0===b&&void 0===I)throw new Error("Missing Observer.");g=function(h,b){if("object"!==typeof h||null===h)return!1;for(const I of b)if(I in h&&"function"===typeof h[I])return!0;return!1}(h,["next","error","complete"])?h:{next:h,error:b,complete:I},void 0===g.next&&(g.next=n),void 0===g.error&&(g.error=n),void 0===g.complete&&(g.complete=n);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?g.error(this.finalError):g.complete()}catch(h){}})),this.observers.push(g),O}unsubscribeOne(h){void 0!==this.observers&&void 0!==this.observers[h]&&(delete this.observers[h],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(h){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,h)}sendOne(h,b){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[h])try{b(this.observers[h])}catch(I){"undefined"!==typeof console&&console.error&&console.error(I)}}))}close(h){this.finalized||(this.finalized=!0,void 0!==h&&(this.finalError=h),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function n(){}const f=1e3,r=2,B=144e5,m=.5;function U(h){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const I=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f)*Math.pow(b,h),g=Math.round(m*I*(Math.random()-.5)*2);return Math.min(B,I+g)}function d(h){return h&&h._delegate?h._delegate:h}},10622:(h,b,I)=>{I.d(b,{c:()=>T.i,f:()=>eh,j:()=>H,k:()=>Ih,l:()=>gh,n:()=>hh,o:()=>Vh,q:()=>bh,t:()=>Th,w:()=>Oh,y:()=>Nh,A:()=>Rh,H:()=>Kh,E:()=>oh,L:()=>Ph,N:()=>ih,O:()=>Lh,P:()=>wh});var g=I(10627),O=I(10637),T=I(10631);let N,V;const M=new WeakMap,y=new WeakMap,q=new WeakMap,e=new WeakMap,P=new WeakMap;let K={get(h,b,I){if(h instanceof IDBTransaction){if("done"===b)return y.get(h);if("objectStoreNames"===b)return h.objectStoreNames||q.get(h);if("store"===b)return I.objectStoreNames[1]?void 0:I.objectStore(I.objectStoreNames[0])}return L(h[b])},set:(h,b,I)=>(h[b]=I,!0),has:(h,b)=>h instanceof IDBTransaction&&("done"===b||"store"===b)||b in h};function o(h){return h!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(h)?function(){for(var b=arguments.length,I=new Array(b),g=0;g<b;g++)I[g]=arguments[g];return h.apply(i(this),I),L(M.get(this))}:function(){for(var b=arguments.length,I=new Array(b),g=0;g<b;g++)I[g]=arguments[g];return L(h.apply(i(this),I))}:function(b){for(var I=arguments.length,g=new Array(I>1?I-1:0),O=1;O<I;O++)g[O-1]=arguments[O];const T=h.call(i(this),b,...g);return q.set(T,b.sort?b.sort():[b]),L(T)}}function R(h){return"function"===typeof h?o(h):(h instanceof IDBTransaction&&function(h){if(y.has(h))return;const b=new Promise(((b,I)=>{const g=()=>{h.removeEventListener("complete",O),h.removeEventListener("error",T),h.removeEventListener("abort",T)},O=()=>{b(),g()},T=()=>{I(h.error||new DOMException("AbortError","AbortError")),g()};h.addEventListener("complete",O),h.addEventListener("error",T),h.addEventListener("abort",T)}));y.set(h,b)}(h),b=h,(N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((h=>b instanceof h))?new Proxy(h,K):h);var b}function L(h){if(h instanceof IDBRequest)return function(h){const b=new Promise(((b,I)=>{const g=()=>{h.removeEventListener("success",O),h.removeEventListener("error",T)},O=()=>{b(L(h.result)),g()},T=()=>{I(h.error),g()};h.addEventListener("success",O),h.addEventListener("error",T)}));return b.then((b=>{b instanceof IDBCursor&&M.set(b,h)})).catch((()=>{})),P.set(b,h),b}(h);if(e.has(h))return e.get(h);const b=R(h);return b!==h&&(e.set(h,b),P.set(b,h)),b}const i=h=>P.get(h);const w=["get","getKey","getAll","getAllKeys","count"],z=["put","add","delete","clear"],F=new Map;function v(h,b){if(!(h instanceof IDBDatabase)||b in h||"string"!==typeof b)return;if(F.get(b))return F.get(b);const I=b.replace(/FromIndex$/,""),g=b!==I,O=z.includes(I);if(!(I in(g?IDBIndex:IDBObjectStore).prototype)||!O&&!w.includes(I))return;const T=async function(h){const b=this.transaction(h,O?"readwrite":"readonly");let T=b.store;for(var N=arguments.length,V=new Array(N>1?N-1:0),M=1;M<N;M++)V[M-1]=arguments[M];return g&&(T=T.index(V.shift())),(await Promise.all([T[I](...V),O&&b.done]))[0]};return F.set(b,T),T}K=(h=>({...h,get:(b,I,g)=>v(b,I)||h.get(b,I,g),has:(b,I)=>!!v(b,I)||h.has(b,I)}))(K);class l{constructor(h){this.container=h}getPlatformInfoString(){return this.container.getProviders().map((h=>{if(function(h){const b=h.getComponent();return"VERSION"===(null===b||void 0===b?void 0:b.type)}(h)){const b=h.getImmediate();return`${b.library}/${b.version}`}return null})).filter((h=>h)).join(" ")}}const A="@firebase/app",J="0.9.13",C=new O.g("@firebase/app"),G="@firebase/app-compat",a="@firebase/analytics-compat",t="@firebase/analytics",j="@firebase/app-check-compat",k="@firebase/app-check",X="@firebase/auth",D="@firebase/auth-compat",n="@firebase/database",f="@firebase/database-compat",r="@firebase/functions",B="@firebase/functions-compat",m="@firebase/installations",U="@firebase/installations-compat",d="@firebase/messaging",s="@firebase/messaging-compat",c="@firebase/performance",E="@firebase/performance-compat",p="@firebase/remote-config",W="@firebase/remote-config-compat",S="@firebase/storage",x="@firebase/storage-compat",Y="@firebase/firestore",Q="@firebase/firestore-compat",Z="firebase",H="[DEFAULT]",u={[A]:"fire-core",[G]:"fire-core-compat",[t]:"fire-analytics",[a]:"fire-analytics-compat",[k]:"fire-app-check",[j]:"fire-app-check-compat",[X]:"fire-auth",[D]:"fire-auth-compat",[n]:"fire-rtdb",[f]:"fire-rtdb-compat",[r]:"fire-fn",[B]:"fire-fn-compat",[m]:"fire-iid",[U]:"fire-iid-compat",[d]:"fire-fcm",[s]:"fire-fcm-compat",[c]:"fire-perf",[E]:"fire-perf-compat",[p]:"fire-rc",[W]:"fire-rc-compat",[S]:"fire-gcs",[x]:"fire-gcs-compat",[Y]:"fire-fst",[Q]:"fire-fst-compat","fire-js":"fire-js",[Z]:"fire-js-all"},hh=new Map,bh=new Map;function Ih(h,b){try{h.container.cf(b)}catch(I){C.debug(`Component ${b.name} failed to register with FirebaseApp ${h.name}`,I)}}function gh(h,b){h.container.addOrOverwriteComponent(b)}function Oh(h){const b=h.name;if(bh.has(b))return C.debug(`There were multiple attempts to register component ${b}.`),!1;bh.set(b,h);for(const I of hh.values())Ih(I,h);return!0}function Th(h,b){const I=h.container.getProvider("heartbeat").getImmediate({optional:!0});return I&&I.triggerHeartbeat(),h.container.getProvider(b)}function Nh(h,b){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H;Th(h,b).clearInstance(I)}function Vh(){bh.clear()}const Mh={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},yh=new T.g("app","Firebase",Mh);class qh{constructor(h,b,I){this._isDeleted=!1,this._options=Object.assign({},h),this._config=Object.assign({},b),this._name=b.name,this._automaticDataCollectionEnabled=b.automaticDataCollectionEnabled,this._container=I,this.container.cf(new g.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(h){this.checkDestroyed(),this._automaticDataCollectionEnabled=h}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(h){this._isDeleted=h}checkDestroyed(){if(this.isDeleted)throw yh.create("app-deleted",{appName:this._name})}}const eh="9.23.0";function Ph(h){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=h;if("object"!==typeof b){b={name:b}}const O=Object.assign({name:H,automaticDataCollectionEnabled:!1},b),N=O.name;if("string"!==typeof N||!N)throw yh.create("bad-app-name",{appName:String(N)});if(I||(I=(0,T.E)()),!I)throw yh.create("no-options");const V=hh.get(N);if(V){if((0,T.w)(I,V.options)&&(0,T.w)(O,V.config))return V;throw yh.create("duplicate-app",{appName:N})}const M=new g.c(N);for(const g of bh.values())M.cf(g);const y=new qh(I,O,M);return hh.set(N,y),y}function Kh(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;const b=hh.get(h);if(!b&&h===H&&(0,T.E)())return Ph();if(!b)throw yh.create("no-app",{appName:h});return b}function oh(){return Array.from(hh.values())}async function Rh(h){const b=h.name;hh.has(b)&&(hh.delete(b),await Promise.all(h.container.getProviders().map((h=>h.delete()))),h.isDeleted=!0)}function Lh(h,b,I){var O;let T=null!==(O=u[h])&&void 0!==O?O:h;I&&(T+=`-${I}`);const N=T.match(/\s|\//),V=b.match(/\s|\//);if(N||V){const h=[`Unable to register library "${T}" with version "${b}":`];return N&&h.push(`library name "${T}" contains illegal characters (whitespace or "/")`),N&&V&&h.push("and"),V&&h.push(`version name "${b}" contains illegal characters (whitespace or "/")`),void C.warn(h.join(" "))}Oh(new g.g(`${T}-version`,(()=>({library:T,version:b})),"VERSION"))}function ih(h,b){if(null!==h&&"function"!==typeof h)throw yh.create("invalid-log-argument");(0,O.j)(h,b)}function wh(h){(0,O.h)(h)}const zh="firebase-heartbeat-store";let Fh=null;function vh(){return Fh||(Fh=function(h,b){let{blocked:I,upgrade:g,blocking:O,terminated:T}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const N=indexedDB.open(h,b),V=L(N);return g&&N.addEventListener("upgradeneeded",(h=>{g(L(N.result),h.oldVersion,h.newVersion,L(N.transaction),h)})),I&&N.addEventListener("blocked",(h=>I(h.oldVersion,h.newVersion,h))),V.then((h=>{T&&h.addEventListener("close",(()=>T())),O&&h.addEventListener("versionchange",(h=>O(h.oldVersion,h.newVersion,h)))})).catch((()=>{})),V}("firebase-heartbeat-database",1,{upgrade:(h,b)=>{if(0===b)h.createObjectStore(zh)}}).catch((h=>{throw yh.create("idb-open",{originalErrorMessage:h.message})}))),Fh}async function lh(h,b){try{const I=(await vh()).transaction(zh,"readwrite"),g=I.objectStore(zh);await g.put(b,Ah(h)),await I.done}catch(I){if(I instanceof T.i)C.warn(I.message);else{const h=yh.create("idb-set",{originalErrorMessage:null===I||void 0===I?void 0:I.message});C.warn(h.message)}}}function Ah(h){return`${h.name}!${h.options.appId}`}class Jh{constructor(h){this.container=h,this._heartbeatsCache=null;const b=this.container.getProvider("app").getImmediate();this.yi=new Gh(b),this._heartbeatsCachePromise=this.yi.read().then((h=>(this._heartbeatsCache=h,h)))}async triggerHeartbeat(){const h=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),b=Ch();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==b&&!this._heartbeatsCache.heartbeats.some((h=>h.date===b)))return this._heartbeatsCache.heartbeats.push({date:b,agent:h}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((h=>{const b=new Date(h.date).valueOf();return Date.now()-b<=2592e6})),this.yi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const h=Ch(),{heartbeatsToSend:b,unsentEntries:I}=function(h){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const I=[];let g=h.slice();for(const O of h){const h=I.find((h=>h.agent===O.agent));if(h){if(h.dates.push(O.date),ah(I)>b){h.dates.pop();break}}else if(I.push({agent:O.agent,dates:[O.date]}),ah(I)>b){I.pop();break}g=g.slice(1)}return{heartbeatsToSend:I,unsentEntries:g}}(this._heartbeatsCache.heartbeats),g=(0,T.n)(JSON.stringify({version:2,heartbeats:b}));return this._heartbeatsCache.lastSentHeartbeatDate=h,I.length>0?(this._heartbeatsCache.heartbeats=I,await this.yi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.yi.overwrite(this._heartbeatsCache)),g}}function Ch(){return(new Date).toISOString().substring(0,10)}class Gh{constructor(h){this.app=h,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,T.U)()&&(0,T.cb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(h){try{const b=await vh();return await b.transaction(zh).objectStore(zh).get(Ah(h))}catch(b){if(b instanceof T.i)C.warn(b.message);else{const h=yh.create("idb-get",{originalErrorMessage:null===b||void 0===b?void 0:b.message});C.warn(h.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(h){var b;if(await this._canUseIndexedDBPromise){const I=await this.read();return lh(this.app,{lastSentHeartbeatDate:null!==(b=h.lastSentHeartbeatDate)&&void 0!==b?b:I.lastSentHeartbeatDate,heartbeats:h.heartbeats})}}async add(h){var b;if(await this._canUseIndexedDBPromise){const I=await this.read();return lh(this.app,{lastSentHeartbeatDate:null!==(b=h.lastSentHeartbeatDate)&&void 0!==b?b:I.lastSentHeartbeatDate,heartbeats:[...I.heartbeats,...h.heartbeats]})}}}function ah(h){return(0,T.n)(JSON.stringify({version:2,heartbeats:h})).length}var th;th="",Oh(new g.g("platform-logger",(h=>new l(h)),"PRIVATE")),Oh(new g.g("heartbeat",(h=>new Jh(h)),"PRIVATE")),Lh(A,J,th),Lh(A,J,"esm2017"),Lh("fire-js","")},10627:(h,b,I)=>{I.d(b,{c:()=>V,g:()=>O});var g=I(10631);class O{constructor(h,b,I){this.name=h,this.instanceFactory=b,this.type=I,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(h){return this.instantiationMode=h,this}setMultipleInstances(h){return this.multipleInstances=h,this}setServiceProps(h){return this.serviceProps=h,this}setInstanceCreatedCallback(h){return this.onInstanceCreated=h,this}}const T="[DEFAULT]";class N{constructor(h,b){this.name=h,this.container=b,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(h){const b=this.normalizeInstanceIdentifier(h);if(!this.instancesDeferred.has(b)){const h=new g.c;if(this.instancesDeferred.set(b,h),this.isInitialized(b)||this.shouldAutoInitialize())try{const I=this.getOrInitializeService({instanceIdentifier:b});I&&h.resolve(I)}catch(I){}}return this.instancesDeferred.get(b).promise}getImmediate(h){var b;const I=this.normalizeInstanceIdentifier(null===h||void 0===h?void 0:h.identifier),g=null!==(b=null===h||void 0===h?void 0:h.optional)&&void 0!==b&&b;if(!this.isInitialized(I)&&!this.shouldAutoInitialize()){if(g)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:I})}catch(O){if(g)return null;throw O}}getComponent(){return this.component}setComponent(h){if(h.name!==this.name)throw Error(`Mismatching Component ${h.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=h,this.shouldAutoInitialize()){if(function(h){return"EAGER"===h.instantiationMode}(h))try{this.getOrInitializeService({instanceIdentifier:T})}catch(b){}for(const[h,I]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);try{const h=this.getOrInitializeService({instanceIdentifier:g});I.resolve(h)}catch(b){}}}}clearInstance(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;this.instancesDeferred.delete(h),this.instancesOptions.delete(h),this.instances.delete(h)}async delete(){const h=Array.from(this.instances.values());await Promise.all([...h.filter((h=>"INTERNAL"in h)).map((h=>h.INTERNAL.delete())),...h.filter((h=>"_delete"in h)).map((h=>h._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return this.instances.has(h)}getOptions(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return this.instancesOptions.get(h)||{}}initialize(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:b={}}=h,I=this.normalizeInstanceIdentifier(h.instanceIdentifier);if(this.isInitialized(I))throw Error(`${this.name}(${I}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const g=this.getOrInitializeService({instanceIdentifier:I,options:b});for(const[O,T]of this.instancesDeferred.entries()){I===this.normalizeInstanceIdentifier(O)&&T.resolve(g)}return g}ci(h,b){var I;const g=this.normalizeInstanceIdentifier(b),O=null!==(I=this.onInitCallbacks.get(g))&&void 0!==I?I:new Set;O.add(h),this.onInitCallbacks.set(g,O);const T=this.instances.get(g);return T&&h(T,g),()=>{O.delete(h)}}invokeOnInitCallbacks(h,b){const I=this.onInitCallbacks.get(b);if(I)for(const O of I)try{O(h,b)}catch(g){}}getOrInitializeService(h){let{instanceIdentifier:b,options:I={}}=h,g=this.instances.get(b);if(!g&&this.component&&(g=this.component.instanceFactory(this.container,{instanceIdentifier:(O=b,O===T?void 0:O),options:I}),this.instances.set(b,g),this.instancesOptions.set(b,I),this.invokeOnInitCallbacks(g,b),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,b,g)}catch(N){}var O;return g||null}normalizeInstanceIdentifier(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return this.component?this.component.multipleInstances?h:T:h}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(h){this.name=h,this.providers=new Map}cf(h){const b=this.getProvider(h.name);if(b.isComponentSet())throw new Error(`Component ${h.name} has already been registered with ${this.name}`);b.setComponent(h)}addOrOverwriteComponent(h){this.getProvider(h.name).isComponentSet()&&this.providers.delete(h.name),this.cf(h)}getProvider(h){if(this.providers.has(h))return this.providers.get(h);const b=new N(h,this);return this.providers.set(h,b),b}getProviders(){return Array.from(this.providers.values())}}},10637:(h,b,I)=>{I.d(b,{c:()=>O,g:()=>y,h:()=>q,j:()=>e});const g=[];var O;!function(h){h[h.DEBUG=0]="DEBUG",h[h.VERBOSE=1]="VERBOSE",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.SILENT=5]="SILENT"}(O||(O={}));const T={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},N=O.INFO,V={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},M=function(h,b){if(b<h.logLevel)return;const I=(new Date).toISOString(),g=V[b];if(!g)throw new Error(`Attempted to log a message with an invalid logType (value: ${b})`);for(var O=arguments.length,T=new Array(O>2?O-2:0),N=2;N<O;N++)T[N-2]=arguments[N];console[g](`[${I}]  ${h.name}:`,...T)};class y{constructor(h){this.name=h,this._logLevel=N,this._logHandler=M,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(h){if(!(h in O))throw new TypeError(`Invalid value "${h}" assigned to \`logLevel\``);this._logLevel=h}setLogLevel(h){this._logLevel="string"===typeof h?T[h]:h}get logHandler(){return this._logHandler}set logHandler(h){if("function"!==typeof h)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=h}get userLogHandler(){return this._userLogHandler}set userLogHandler(h){this._userLogHandler=h}debug(){for(var h=arguments.length,b=new Array(h),I=0;I<h;I++)b[I]=arguments[I];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...b),this._logHandler(this,O.DEBUG,...b)}log(){for(var h=arguments.length,b=new Array(h),I=0;I<h;I++)b[I]=arguments[I];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...b),this._logHandler(this,O.VERBOSE,...b)}info(){for(var h=arguments.length,b=new Array(h),I=0;I<h;I++)b[I]=arguments[I];this._userLogHandler&&this._userLogHandler(this,O.INFO,...b),this._logHandler(this,O.INFO,...b)}warn(){for(var h=arguments.length,b=new Array(h),I=0;I<h;I++)b[I]=arguments[I];this._userLogHandler&&this._userLogHandler(this,O.WARN,...b),this._logHandler(this,O.WARN,...b)}error(){for(var h=arguments.length,b=new Array(h),I=0;I<h;I++)b[I]=arguments[I];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...b),this._logHandler(this,O.ERROR,...b)}}function q(h){g.forEach((b=>{b.setLogLevel(h)}))}function e(h,b){for(const I of g){let g=null;b&&b.level&&(g=T[b.level]),I.userLogHandler=null===h?null:function(b,I){for(var T=arguments.length,N=new Array(T>2?T-2:0),V=2;V<T;V++)N[V-2]=arguments[V];const M=N.map((h=>{if(null==h)return null;if("string"===typeof h)return h;if("number"===typeof h||"boolean"===typeof h)return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch(b){return null}})).filter((h=>h)).join(" ");I>=(null!==g&&void 0!==g?g:b.logLevel)&&h({level:O[I].toLowerCase(),message:M,args:N,type:b.name})}}}}}]);