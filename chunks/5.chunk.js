/*! For license information please see m580om.5.97be9548.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10541:(Y,j,X)=>{X.d(j,{D:()=>N,G:()=>g,H:()=>i,J:()=>R,N:()=>m,Q:()=>O,S:()=>P,V:()=>M,Z:()=>C,ab:()=>V,bb:()=>D,c:()=>d,d:()=>z,eb:()=>Q,h:()=>r,k:()=>W,l:()=>y,n:()=>I,q:()=>o,r:()=>b,u:()=>L,x:()=>p,y:()=>a,z:()=>e});const u=function(Y){const j=[];let X=0;for(let u=0;u<Y.length;u++){let K=Y.charCodeAt(u);K<128?j[X++]=K:K<2048?(j[X++]=K>>6|192,j[X++]=63&K|128):55296===(64512&K)&&u+1<Y.length&&56320===(64512&Y.charCodeAt(u+1))?(K=65536+((1023&K)<<10)+(1023&Y.charCodeAt(++u)),j[X++]=K>>18|240,j[X++]=K>>12&63|128,j[X++]=K>>6&63|128,j[X++]=63&K|128):(j[X++]=K>>12|224,j[X++]=K>>6&63|128,j[X++]=63&K|128)}return j},K={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(Y,j){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,u=[];for(let K=0;K<Y.length;K+=3){const j=Y[K],U=K+1<Y.length,I=U?Y[K+1]:0,y=K+2<Y.length,T=y?Y[K+2]:0,E=j>>2,e=(3&j)<<4|I>>4;let a=(15&I)<<2|T>>6,N=63&T;y||(N=64,U||(a=64)),u.push(X[E],X[e],X[a],X[N])}return u.join("")},encodeString(Y,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(Y):this.encodeByteArray(u(Y),j)},decodeString(Y,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(Y):function(Y){const j=[];let X=0,u=0;for(;X<Y.length;){const K=Y[X++];if(K<128)j[u++]=String.fromCharCode(K);else if(K>191&&K<224){const U=Y[X++];j[u++]=String.fromCharCode((31&K)<<6|63&U)}else if(K>239&&K<365){const U=((7&K)<<18|(63&Y[X++])<<12|(63&Y[X++])<<6|63&Y[X++])-65536;j[u++]=String.fromCharCode(55296+(U>>10)),j[u++]=String.fromCharCode(56320+(1023&U))}else{const U=Y[X++],I=Y[X++];j[u++]=String.fromCharCode((15&K)<<12|(63&U)<<6|63&I)}}return j.join("")}(this.decodeStringToByteArray(Y,j))},decodeStringToByteArray(Y,j){this.init_();const X=j?this.charToByteMapWebSafe_:this.charToByteMap_,u=[];for(let K=0;K<Y.length;){const j=X[Y.charAt(K++)],I=K<Y.length?X[Y.charAt(K)]:0;++K;const y=K<Y.length?X[Y.charAt(K)]:64;++K;const T=K<Y.length?X[Y.charAt(K)]:64;if(++K,null==j||null==I||null==y||null==T)throw new U;const E=j<<2|I>>4;if(u.push(E),64!==y){const Y=I<<4&240|y>>2;if(u.push(Y),64!==T){const Y=y<<6&192|T;u.push(Y)}}}return u},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}};class U extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I=function(Y){return function(Y){const j=u(Y);return K.encodeByteArray(j,!0)}(Y).replace(/\./g,"")},y=function(Y){try{return K.decodeString(Y,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};const T=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof X.g)return X.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,E=()=>{try{return T()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let Y;try{Y=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(X){return}const j=Y&&y(Y[1]);return j&&JSON.parse(j)})()}catch(Y){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Y}`)}},e=Y=>{var j,X;return null===(X=null===(j=E())||void 0===j?void 0:j.emulatorHosts)||void 0===X?void 0:X[Y]},a=()=>{var Y;return null===(Y=E())||void 0===Y?void 0:Y.config},N=Y=>{var j;return null===(j=E())||void 0===j?void 0:j[`_${Y}`]};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((Y,j)=>{this.resolve=Y,this.reject=j}))}wrapCallback(Y){return(j,X)=>{j?this.reject(j):this.resolve(X),"function"===typeof Y&&(this.promise.catch((()=>{})),1===Y.length?Y(j):Y(j,X))}}}function i(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i())}function R(){const Y="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof Y&&void 0!==Y.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function O(){const Y=i();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function P(){try{return"object"===typeof indexedDB}catch(Y){return!1}}function Q(){return new Promise(((Y,j)=>{try{let X=!0;const u="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(u);K.onsuccess=()=>{K.result.close(),X||self.indexedDB.deleteDatabase(u),Y(!0)},K.onupgradeneeded=()=>{X=!1},K.onerror=()=>{var Y;j((null===(Y=K.error)||void 0===Y?void 0:Y.message)||"")}}catch(X){j(X)}}))}function W(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class r extends Error{constructor(Y,j,X){super(j),this.code=Y,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z.prototype.create)}}class z{constructor(Y,j,X){this.service=Y,this.serviceName=j,this.errors=X}create(Y){const j=(arguments.length<=1?void 0:arguments[1])||{},X=`${this.service}/${Y}`,u=this.errors[Y],K=u?function(Y,j){return Y.replace(k,((Y,X)=>{const u=j[X];return null!=u?String(u):`<${X}?>`}))}(u,j):"Error",U=`${this.serviceName}: ${K} (${X}).`;return new r(X,U,j)}}const k=/\{\$([^}]+)}/g;function m(Y){for(const j in Y)if(Object.prototype.hasOwnProperty.call(Y,j))return!1;return!0}function L(Y,j){if(Y===j)return!0;const X=Object.keys(Y),u=Object.keys(j);for(const K of X){if(!u.includes(K))return!1;const X=Y[K],U=j[K];if(J(X)&&J(U)){if(!L(X,U))return!1}else if(X!==U)return!1}for(const K of u)if(!X.includes(K))return!1;return!0}function J(Y){return null!==Y&&"object"===typeof Y}function D(Y){const j=[];for(const[X,u]of Object.entries(Y))Array.isArray(u)?u.forEach((Y=>{j.push(encodeURIComponent(X)+"="+encodeURIComponent(Y))})):j.push(encodeURIComponent(X)+"="+encodeURIComponent(u));return j.length?"&"+j.join("&"):""}function V(Y){const j={};return Y.replace(/^\?/,"").split("&").forEach((Y=>{if(Y){const[X,u]=Y.split("=");j[decodeURIComponent(X)]=decodeURIComponent(u)}})),j}function p(Y){const j=Y.indexOf("?");if(!j)return"";const X=Y.indexOf("#",j);return Y.substring(j,X>0?X:void 0)}function b(Y,j){const X=new B(Y,j);return X.subscribe.bind(X)}class B{constructor(Y,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then((()=>{Y(this)})).catch((Y=>{this.error(Y)}))}next(Y){this.forEachObserver((j=>{j.next(Y)}))}error(Y){this.forEachObserver((j=>{j.error(Y)})),this.close(Y)}complete(){this.forEachObserver((Y=>{Y.complete()})),this.close()}subscribe(Y,j,X){let u;if(void 0===Y&&void 0===j&&void 0===X)throw new Error("Missing Observer.");u=function(Y,j){if("object"!==typeof Y||null===Y)return!1;for(const X of j)if(X in Y&&"function"===typeof Y[X])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:j,complete:X},void 0===u.next&&(u.next=w),void 0===u.error&&(u.error=w),void 0===u.complete&&(u.complete=w);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?u.error(this.finalError):u.complete()}catch(Y){}})),this.observers.push(u),K}unsubscribeOne(Y){void 0!==this.observers&&void 0!==this.observers[Y]&&(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,Y)}sendOne(Y,j){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{j(this.observers[Y])}catch(X){"undefined"!==typeof console&&console.error&&console.error(X)}}))}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}const H=1e3,G=2,l=144e5,h=.5;function o(Y){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;const X=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:H)*Math.pow(j,Y),u=Math.round(h*X*(Math.random()-.5)*2);return Math.min(l,X+u)}function g(Y){return Y&&Y._delegate?Y._delegate:Y}},10530:(Y,j,X)=>{X.d(j,{d:()=>U.h,e:()=>aY,i:()=>v,l:()=>XY,p:()=>uY,t:()=>YY,u:()=>yY,y:()=>jY,z:()=>UY,A:()=>KY,E:()=>IY,G:()=>MY,L:()=>dY,J:()=>iY,N:()=>NY,R:()=>CY,V:()=>RY,W:()=>OY});var u=X(10533),K=X(10548),U=X(10541);let I,y;const T=new WeakMap,E=new WeakMap,e=new WeakMap,a=new WeakMap,N=new WeakMap;let d={get(Y,j,X){if(Y instanceof IDBTransaction){if("done"===j)return E.get(Y);if("objectStoreNames"===j)return Y.objectStoreNames||e.get(Y);if("store"===j)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return R(Y[j])},set:(Y,j,X)=>(Y[j]=X,!0),has:(Y,j)=>Y instanceof IDBTransaction&&("done"===j||"store"===j)||j in Y};function i(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(y||(y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Y)?function(){for(var j=arguments.length,X=new Array(j),u=0;u<j;u++)X[u]=arguments[u];return Y.apply(C(this),X),R(T.get(this))}:function(){for(var j=arguments.length,X=new Array(j),u=0;u<j;u++)X[u]=arguments[u];return R(Y.apply(C(this),X))}:function(j){for(var X=arguments.length,u=new Array(X>1?X-1:0),K=1;K<X;K++)u[K-1]=arguments[K];const U=Y.call(C(this),j,...u);return e.set(U,j.sort?j.sort():[j]),R(U)}}function M(Y){return"function"===typeof Y?i(Y):(Y instanceof IDBTransaction&&function(Y){if(E.has(Y))return;const j=new Promise(((j,X)=>{const u=()=>{Y.removeEventListener("complete",K),Y.removeEventListener("error",U),Y.removeEventListener("abort",U)},K=()=>{j(),u()},U=()=>{X(Y.error||new DOMException("AbortError","AbortError")),u()};Y.addEventListener("complete",K),Y.addEventListener("error",U),Y.addEventListener("abort",U)}));E.set(Y,j)}(Y),j=Y,(I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((Y=>j instanceof Y))?new Proxy(Y,d):Y);var j}function R(Y){if(Y instanceof IDBRequest)return function(Y){const j=new Promise(((j,X)=>{const u=()=>{Y.removeEventListener("success",K),Y.removeEventListener("error",U)},K=()=>{j(R(Y.result)),u()},U=()=>{X(Y.error),u()};Y.addEventListener("success",K),Y.addEventListener("error",U)}));return j.then((j=>{j instanceof IDBCursor&&T.set(j,Y)})).catch((()=>{})),N.set(j,Y),j}(Y);if(a.has(Y))return a.get(Y);const j=M(Y);return j!==Y&&(a.set(Y,j),N.set(j,Y)),j}const C=Y=>N.get(Y);const O=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],Q=new Map;function W(Y,j){if(!(Y instanceof IDBDatabase)||j in Y||"string"!==typeof j)return;if(Q.get(j))return Q.get(j);const X=j.replace(/FromIndex$/,""),u=j!==X,K=P.includes(X);if(!(X in(u?IDBIndex:IDBObjectStore).prototype)||!K&&!O.includes(X))return;const U=async function(Y){const j=this.transaction(Y,K?"readwrite":"readonly");let U=j.store;for(var I=arguments.length,y=new Array(I>1?I-1:0),T=1;T<I;T++)y[T-1]=arguments[T];return u&&(U=U.index(y.shift())),(await Promise.all([U[X](...y),K&&j.done]))[0]};return Q.set(j,U),U}d=(Y=>({...Y,get:(j,X,u)=>W(j,X)||Y.get(j,X,u),has:(j,X)=>!!W(j,X)||Y.has(j,X)}))(d);class r{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map((Y=>{if(function(Y){const j=Y.getComponent();return"VERSION"===(null===j||void 0===j?void 0:j.type)}(Y)){const j=Y.getImmediate();return`${j.library}/${j.version}`}return null})).filter((Y=>Y)).join(" ")}}const z="@firebase/app",k="0.9.13",m=new K.e("@firebase/app"),L="@firebase/app-compat",J="@firebase/analytics-compat",D="@firebase/analytics",V="@firebase/app-check-compat",p="@firebase/app-check",b="@firebase/auth",B="@firebase/auth-compat",w="@firebase/database",H="@firebase/database-compat",G="@firebase/functions",l="@firebase/functions-compat",h="@firebase/installations",o="@firebase/installations-compat",g="@firebase/messaging",n="@firebase/messaging-compat",f="@firebase/performance",q="@firebase/performance-compat",F="@firebase/remote-config",S="@firebase/remote-config-compat",A="@firebase/storage",c="@firebase/storage-compat",x="@firebase/firestore",t="@firebase/firestore-compat",Z="firebase",v="[DEFAULT]",s={[z]:"fire-core",[L]:"fire-core-compat",[D]:"fire-analytics",[J]:"fire-analytics-compat",[p]:"fire-app-check",[V]:"fire-app-check-compat",[b]:"fire-auth",[B]:"fire-auth-compat",[w]:"fire-rtdb",[H]:"fire-rtdb-compat",[G]:"fire-fn",[l]:"fire-fn-compat",[h]:"fire-iid",[o]:"fire-iid-compat",[g]:"fire-fcm",[n]:"fire-fcm-compat",[f]:"fire-perf",[q]:"fire-perf-compat",[F]:"fire-rc",[S]:"fire-rc-compat",[A]:"fire-gcs",[c]:"fire-gcs-compat",[x]:"fire-fst",[t]:"fire-fst-compat","fire-js":"fire-js",[Z]:"fire-js-all"},YY=new Map,jY=new Map;function XY(Y,j){try{Y.container.qe(j)}catch(X){m.debug(`Component ${j.name} failed to register with FirebaseApp ${Y.name}`,X)}}function uY(Y,j){Y.container.addOrOverwriteComponent(j)}function KY(Y){const j=Y.name;if(jY.has(j))return m.debug(`There were multiple attempts to register component ${j}.`),!1;jY.set(j,Y);for(const X of YY.values())XY(X,Y);return!0}function UY(Y,j){const X=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),Y.container.getProvider(j)}function IY(Y,j){let X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;UY(Y,j).clearInstance(X)}function yY(){jY.clear()}const TY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},EY=new U.d("app","Firebase",TY);class eY{constructor(Y,j,X){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},j),this._name=j.name,this._automaticDataCollectionEnabled=j.automaticDataCollectionEnabled,this._container=X,this.container.qe(new u.c("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw EY.create("app-deleted",{appName:this._name})}}const aY="9.23.0";function NY(Y){let j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},X=Y;if("object"!==typeof j){j={name:j}}const K=Object.assign({name:v,automaticDataCollectionEnabled:!1},j),I=K.name;if("string"!==typeof I||!I)throw EY.create("bad-app-name",{appName:String(I)});if(X||(X=(0,U.y)()),!X)throw EY.create("no-options");const y=YY.get(I);if(y){if((0,U.u)(X,y.options)&&(0,U.u)(K,y.config))return y;throw EY.create("duplicate-app",{appName:I})}const T=new u.b(I);for(const u of jY.values())T.qe(u);const E=new eY(X,K,T);return YY.set(I,E),E}function dY(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const j=YY.get(Y);if(!j&&Y===v&&(0,U.y)())return NY();if(!j)throw EY.create("no-app",{appName:Y});return j}function iY(){return Array.from(YY.values())}async function MY(Y){const j=Y.name;YY.has(j)&&(YY.delete(j),await Promise.all(Y.container.getProviders().map((Y=>Y.delete()))),Y.isDeleted=!0)}function RY(Y,j,X){var K;let U=null!==(K=s[Y])&&void 0!==K?K:Y;X&&(U+=`-${X}`);const I=U.match(/\s|\//),y=j.match(/\s|\//);if(I||y){const Y=[`Unable to register library "${U}" with version "${j}":`];return I&&Y.push(`library name "${U}" contains illegal characters (whitespace or "/")`),I&&y&&Y.push("and"),y&&Y.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void m.warn(Y.join(" "))}KY(new u.c(`${U}-version`,(()=>({library:U,version:j})),"VERSION"))}function CY(Y,j){if(null!==Y&&"function"!==typeof Y)throw EY.create("invalid-log-argument");(0,K.i)(Y,j)}function OY(Y){(0,K.h)(Y)}const PY="firebase-heartbeat-store";let QY=null;function WY(){return QY||(QY=function(Y,j){let{blocked:X,upgrade:u,blocking:K,terminated:U}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const I=indexedDB.open(Y,j),y=R(I);return u&&I.addEventListener("upgradeneeded",(Y=>{u(R(I.result),Y.oldVersion,Y.newVersion,R(I.transaction),Y)})),X&&I.addEventListener("blocked",(Y=>X(Y.oldVersion,Y.newVersion,Y))),y.then((Y=>{U&&Y.addEventListener("close",(()=>U())),K&&Y.addEventListener("versionchange",(Y=>K(Y.oldVersion,Y.newVersion,Y)))})).catch((()=>{})),y}("firebase-heartbeat-database",1,{upgrade:(Y,j)=>{if(0===j)Y.createObjectStore(PY)}}).catch((Y=>{throw EY.create("idb-open",{originalErrorMessage:Y.message})}))),QY}async function rY(Y,j){try{const X=(await WY()).transaction(PY,"readwrite"),u=X.objectStore(PY);await u.put(j,zY(Y)),await X.done}catch(X){if(X instanceof U.h)m.warn(X.message);else{const Y=EY.create("idb-set",{originalErrorMessage:null===X||void 0===X?void 0:X.message});m.warn(Y.message)}}}function zY(Y){return`${Y.name}!${Y.options.appId}`}class kY{constructor(Y){this.container=Y,this._heartbeatsCache=null;const j=this.container.getProvider("app").getImmediate();this.xi=new LY(j),this._heartbeatsCachePromise=this.xi.read().then((Y=>(this._heartbeatsCache=Y,Y)))}async triggerHeartbeat(){const Y=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=mY();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==j&&!this._heartbeatsCache.heartbeats.some((Y=>Y.date===j)))return this._heartbeatsCache.heartbeats.push({date:j,agent:Y}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((Y=>{const j=new Date(Y.date).valueOf();return Date.now()-j<=2592e6})),this.xi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const Y=mY(),{heartbeatsToSend:j,unsentEntries:X}=function(Y){let j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const X=[];let u=Y.slice();for(const K of Y){const Y=X.find((Y=>Y.agent===K.agent));if(Y){if(Y.dates.push(K.date),JY(X)>j){Y.dates.pop();break}}else if(X.push({agent:K.agent,dates:[K.date]}),JY(X)>j){X.pop();break}u=u.slice(1)}return{heartbeatsToSend:X,unsentEntries:u}}(this._heartbeatsCache.heartbeats),u=(0,U.n)(JSON.stringify({version:2,heartbeats:j}));return this._heartbeatsCache.lastSentHeartbeatDate=Y,X.length>0?(this._heartbeatsCache.heartbeats=X,await this.xi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.xi.overwrite(this._heartbeatsCache)),u}}function mY(){return(new Date).toISOString().substring(0,10)}class LY{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,U.S)()&&(0,U.eb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(Y){try{const j=await WY();return await j.transaction(PY).objectStore(PY).get(zY(Y))}catch(j){if(j instanceof U.h)m.warn(j.message);else{const Y=EY.create("idb-get",{originalErrorMessage:null===j||void 0===j?void 0:j.message});m.warn(Y.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(Y){var j;if(await this._canUseIndexedDBPromise){const X=await this.read();return rY(this.app,{lastSentHeartbeatDate:null!==(j=Y.lastSentHeartbeatDate)&&void 0!==j?j:X.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}}async add(Y){var j;if(await this._canUseIndexedDBPromise){const X=await this.read();return rY(this.app,{lastSentHeartbeatDate:null!==(j=Y.lastSentHeartbeatDate)&&void 0!==j?j:X.lastSentHeartbeatDate,heartbeats:[...X.heartbeats,...Y.heartbeats]})}}}function JY(Y){return(0,U.n)(JSON.stringify({version:2,heartbeats:Y})).length}var DY;DY="",KY(new u.c("platform-logger",(Y=>new r(Y)),"PRIVATE")),KY(new u.c("heartbeat",(Y=>new kY(Y)),"PRIVATE")),RY(z,k,DY),RY(z,k,"esm2017"),RY("fire-js","")},10533:(Y,j,X)=>{X.d(j,{b:()=>y,c:()=>K});var u=X(10541);class K{constructor(Y,j,X){this.name=Y,this.instanceFactory=j,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const U="[DEFAULT]";class I{constructor(Y,j){this.name=Y,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const j=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(j)){const Y=new u.c;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const X=this.getOrInitializeService({instanceIdentifier:j});X&&Y.resolve(X)}catch(X){}}return this.instancesDeferred.get(j).promise}getImmediate(Y){var j;const X=this.normalizeInstanceIdentifier(null===Y||void 0===Y?void 0:Y.identifier),u=null!==(j=null===Y||void 0===Y?void 0:Y.optional)&&void 0!==j&&j;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(u)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(K){if(u)return null;throw K}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function(Y){return"EAGER"===Y.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:U})}catch(j){}for(const[Y,X]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(Y);try{const Y=this.getOrInitializeService({instanceIdentifier:u});X.resolve(Y)}catch(j){}}}}clearInstance(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}async delete(){const Y=Array.from(this.instances.values());await Promise.all([...Y.filter((Y=>"INTERNAL"in Y)).map((Y=>Y.INTERNAL.delete())),...Y.filter((Y=>"_delete"in Y)).map((Y=>Y._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instances.has(Y)}getOptions(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instancesOptions.get(Y)||{}}initialize(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:j={}}=Y,X=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:X,options:j});for(const[K,U]of this.instancesDeferred.entries()){X===this.normalizeInstanceIdentifier(K)&&U.resolve(u)}return u}ai(Y,j){var X;const u=this.normalizeInstanceIdentifier(j),K=null!==(X=this.onInitCallbacks.get(u))&&void 0!==X?X:new Set;K.add(Y),this.onInitCallbacks.set(u,K);const U=this.instances.get(u);return U&&Y(U,u),()=>{K.delete(Y)}}invokeOnInitCallbacks(Y,j){const X=this.onInitCallbacks.get(j);if(X)for(const K of X)try{K(Y,j)}catch(u){}}getOrInitializeService(Y){let{instanceIdentifier:j,options:X={}}=Y,u=this.instances.get(j);if(!u&&this.component&&(u=this.component.instanceFactory(this.container,{instanceIdentifier:(K=j,K===U?void 0:K),options:X}),this.instances.set(j,u),this.instancesOptions.set(j,X),this.invokeOnInitCallbacks(u,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,u)}catch(I){}var K;return u||null}normalizeInstanceIdentifier(){let Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.component?this.component.multipleInstances?Y:U:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class y{constructor(Y){this.name=Y,this.providers=new Map}qe(Y){const j=this.getProvider(Y.name);if(j.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);j.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.qe(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const j=new I(Y,this);return this.providers.set(Y,j),j}getProviders(){return Array.from(this.providers.values())}}},10548:(Y,j,X)=>{X.d(j,{c:()=>K,e:()=>E,h:()=>e,i:()=>a});const u=[];var K;!function(Y){Y[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT"}(K||(K={}));const U={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},I=K.INFO,y={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},T=function(Y,j){if(j<Y.logLevel)return;const X=(new Date).toISOString(),u=y[j];if(!u)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);for(var K=arguments.length,U=new Array(K>2?K-2:0),I=2;I<K;I++)U[I-2]=arguments[I];console[u](`[${X}]  ${Y.name}:`,...U)};class E{constructor(Y){this.name=Y,this._logLevel=I,this._logHandler=T,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in K))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"===typeof Y?U[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!==typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(){for(var Y=arguments.length,j=new Array(Y),X=0;X<Y;X++)j[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(){for(var Y=arguments.length,j=new Array(Y),X=0;X<Y;X++)j[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(){for(var Y=arguments.length,j=new Array(Y),X=0;X<Y;X++)j[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(){for(var Y=arguments.length,j=new Array(Y),X=0;X<Y;X++)j[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(){for(var Y=arguments.length,j=new Array(Y),X=0;X<Y;X++)j[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function e(Y){u.forEach((j=>{j.setLogLevel(Y)}))}function a(Y,j){for(const X of u){let u=null;j&&j.level&&(u=U[j.level]),X.userLogHandler=null===Y?null:function(j,X){for(var U=arguments.length,I=new Array(U>2?U-2:0),y=2;y<U;y++)I[y-2]=arguments[y];const T=I.map((Y=>{if(null==Y)return null;if("string"===typeof Y)return Y;if("number"===typeof Y||"boolean"===typeof Y)return Y.toString();if(Y instanceof Error)return Y.message;try{return JSON.stringify(Y)}catch(j){return null}})).filter((Y=>Y)).join(" ");X>=(null!==u&&void 0!==u?u:j.logLevel)&&Y({level:K[X].toLowerCase(),message:T,args:I,type:j.name})}}}}}]);