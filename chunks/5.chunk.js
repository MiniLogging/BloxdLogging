/*! For license information please see xkeybl.5.79c426b8.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10872:(z,u,Y)=>{Y.d(u,{C:()=>Q,F:()=>G,H:()=>g,K:()=>D,L:()=>M,N:()=>p,P:()=>C,S:()=>h,U:()=>X,Y:()=>d,_:()=>t,bb:()=>K,cb:()=>o,e:()=>q,fb:()=>x,i:()=>v,jb:()=>A,k:()=>s,mb:()=>W,n:()=>Z,r:()=>T,t:()=>l,x:()=>m,z:()=>F});const H=function(z){const u=[];let Y=0;for(let H=0;H<z.length;H++){let E=z.charCodeAt(H);E<128?u[Y++]=E:E<2048?(u[Y++]=E>>6|192,u[Y++]=63&E|128):55296===(64512&E)&&H+1<z.length&&56320===(64512&z.charCodeAt(H+1))?(E=65536+((1023&E)<<10)+(1023&z.charCodeAt(++H)),u[Y++]=E>>18|240,u[Y++]=E>>12&63|128,u[Y++]=E>>6&63|128,u[Y++]=63&E|128):(u[Y++]=E>>12|224,u[Y++]=E>>6&63|128,u[Y++]=63&E|128)}return u},E={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(z,u){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=u?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let E=0;E<z.length;E+=3){const u=z[E],J=E+1<z.length,l=J?z[E+1]:0,T=E+2<z.length,b=T?z[E+2]:0,L=u>>2,D=(3&u)<<4|l>>4;let g=(15&l)<<2|b>>6,M=63&b;T||(M=64,J||(g=64)),H.push(Y[L],Y[D],Y[g],Y[M])}return H.join("")},encodeString(z,u){return this.HAS_NATIVE_SUPPORT&&!u?btoa(z):this.encodeByteArray(H(z),u)},decodeString(z,u){return this.HAS_NATIVE_SUPPORT&&!u?atob(z):function(z){const u=[];let Y=0,H=0;for(;Y<z.length;){const E=z[Y++];if(E<128)u[H++]=String.fromCharCode(E);else if(E>191&&E<224){const J=z[Y++];u[H++]=String.fromCharCode((31&E)<<6|63&J)}else if(E>239&&E<365){const J=((7&E)<<18|(63&z[Y++])<<12|(63&z[Y++])<<6|63&z[Y++])-65536;u[H++]=String.fromCharCode(55296+(J>>10)),u[H++]=String.fromCharCode(56320+(1023&J))}else{const J=z[Y++],l=z[Y++];u[H++]=String.fromCharCode((15&E)<<12|(63&J)<<6|63&l)}}return u.join("")}(this.decodeStringToByteArray(z,u))},decodeStringToByteArray(z,u){this.init_();const Y=u?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let E=0;E<z.length;){const u=Y[z.charAt(E++)],l=E<z.length?Y[z.charAt(E)]:0;++E;const T=E<z.length?Y[z.charAt(E)]:64;++E;const b=E<z.length?Y[z.charAt(E)]:64;if(++E,null==u||null==l||null==T||null==b)throw new J;const L=u<<2|l>>4;if(H.push(L),64!==T){const z=l<<4&240|T>>2;if(H.push(z),64!==b){const z=T<<6&192|b;H.push(z)}}}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}};class J extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(z){return function(z){const u=H(z);return E.encodeByteArray(u,!0)}(z).replace(/\./g,"")},T=function(z){try{return E.decodeString(z,!0)}catch(u){console.error("base64Decode failed: ",u)}return null};const b=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof Y.g)return Y.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,L=()=>{try{return b()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Y){return}const u=z&&T(z[1]);return u&&JSON.parse(u)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},D=z=>{var u,Y;return null===(Y=null===(u=L())||void 0===u?void 0:u.emulatorHosts)||void 0===Y?void 0:Y[z]},g=()=>{var z;return null===(z=L())||void 0===z?void 0:z.config},M=z=>{var u;return null===(u=L())||void 0===u?void 0:u[`_${z}`]};class q{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((z,u)=>{this.resolve=z,this.reject=u}))}wrapCallback(z){return(u,Y)=>{u?this.reject(u):this.resolve(Y),"function"===typeof z&&(this.promise.catch((()=>{})),1===z.length?z(u):z(u,Y))}}}function C(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function K(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(C())}function h(){const z="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof z&&void 0!==z.id}function o(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function d(){const z=C();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function t(){try{return"object"===typeof indexedDB}catch(z){return!1}}function W(){return new Promise(((z,u)=>{try{let Y=!0;const H="validate-browser-context-for-indexeddb-analytics-module",E=self.indexedDB.open(H);E.onsuccess=()=>{E.result.close(),Y||self.indexedDB.deleteDatabase(H),z(!0)},E.onupgradeneeded=()=>{Y=!1},E.onerror=()=>{var z;u((null===(z=E.error)||void 0===z?void 0:z.message)||"")}}catch(Y){u(Y)}}))}function Z(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class s extends Error{constructor(z,u,Y){super(u),this.code=z,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(z,u,Y){this.service=z,this.serviceName=u,this.errors=Y}create(z){const u=(arguments.length<=1?void 0:arguments[1])||{},Y=`${this.service}/${z}`,H=this.errors[z],E=H?function(z,u){return z.replace(i,((z,Y)=>{const H=u[Y];return null!=H?String(H):`<${Y}?>`}))}(H,u):"Error",J=`${this.serviceName}: ${E} (${Y}).`;return new s(Y,J,u)}}const i=/\{\$([^}]+)}/g;function X(z){for(const u in z)if(Object.prototype.hasOwnProperty.call(z,u))return!1;return!0}function Q(z,u){if(z===u)return!0;const Y=Object.keys(z),H=Object.keys(u);for(const E of Y){if(!H.includes(E))return!1;const Y=z[E],J=u[E];if(V(Y)&&V(J)){if(!Q(Y,J))return!1}else if(Y!==J)return!1}for(const E of H)if(!Y.includes(E))return!1;return!0}function V(z){return null!==z&&"object"===typeof z}function A(z){const u=[];for(const[Y,H]of Object.entries(z))Array.isArray(H)?H.forEach((z=>{u.push(encodeURIComponent(Y)+"="+encodeURIComponent(z))})):u.push(encodeURIComponent(Y)+"="+encodeURIComponent(H));return u.length?"&"+u.join("&"):""}function x(z){const u={};return z.replace(/^\?/,"").split("&").forEach((z=>{if(z){const[Y,H]=z.split("=");u[decodeURIComponent(Y)]=decodeURIComponent(H)}})),u}function G(z){const u=z.indexOf("?");if(!u)return"";const Y=z.indexOf("#",u);return z.substring(u,Y>0?Y:void 0)}function F(z,u){const Y=new R(z,u);return Y.subscribe.bind(Y)}class R{constructor(z,u){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=u,this.task.then((()=>{z(this)})).catch((z=>{this.error(z)}))}next(z){this.forEachObserver((u=>{u.next(z)}))}error(z){this.forEachObserver((u=>{u.error(z)})),this.close(z)}complete(){this.forEachObserver((z=>{z.complete()})),this.close()}subscribe(z,u,Y){let H;if(void 0===z&&void 0===u&&void 0===Y)throw new Error("Missing Observer.");H=function(z,u){if("object"!==typeof z||null===z)return!1;for(const Y of u)if(Y in z&&"function"===typeof z[Y])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:u,complete:Y},void 0===H.next&&(H.next=w),void 0===H.error&&(H.error=w),void 0===H.complete&&(H.complete=w);const E=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(z){}})),this.observers.push(H),E}unsubscribeOne(z){void 0!==this.observers&&void 0!==this.observers[z]&&(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let u=0;u<this.observers.length;u++)this.sendOne(u,z)}sendOne(z,u){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{u(this.observers[z])}catch(Y){"undefined"!==typeof console&&console.error&&console.error(Y)}}))}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}const c=1e3,U=2,O=144e5,n=.5;function m(z){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;const Y=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c)*Math.pow(u,z),H=Math.round(n*Y*(Math.random()-.5)*2);return Math.min(O,Y+H)}function p(z){return z&&z._delegate?z._delegate:z}},10855:(z,u,Y)=>{Y.d(u,{d:()=>J.k,h:()=>gz,l:()=>f,o:()=>Yz,q:()=>Hz,r:()=>zz,s:()=>Tz,w:()=>uz,x:()=>Jz,A:()=>Ez,B:()=>lz,D:()=>Kz,H:()=>qz,F:()=>Cz,I:()=>Mz,K:()=>oz,L:()=>hz,P:()=>dz});var H=Y(10864),E=Y(10881),J=Y(10872);let l,T;const b=new WeakMap,L=new WeakMap,D=new WeakMap,g=new WeakMap,M=new WeakMap;let q={get(z,u,Y){if(z instanceof IDBTransaction){if("done"===u)return L.get(z);if("objectStoreNames"===u)return z.objectStoreNames||D.get(z);if("store"===u)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return h(z[u])},set:(z,u,Y)=>(z[u]=Y,!0),has:(z,u)=>z instanceof IDBTransaction&&("done"===u||"store"===u)||u in z};function C(z){return z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(T||(T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(z)?function(){for(var u=arguments.length,Y=new Array(u),H=0;H<u;H++)Y[H]=arguments[H];return z.apply(o(this),Y),h(b.get(this))}:function(){for(var u=arguments.length,Y=new Array(u),H=0;H<u;H++)Y[H]=arguments[H];return h(z.apply(o(this),Y))}:function(u){for(var Y=arguments.length,H=new Array(Y>1?Y-1:0),E=1;E<Y;E++)H[E-1]=arguments[E];const J=z.call(o(this),u,...H);return D.set(J,u.sort?u.sort():[u]),h(J)}}function K(z){return"function"===typeof z?C(z):(z instanceof IDBTransaction&&function(z){if(L.has(z))return;const u=new Promise(((u,Y)=>{const H=()=>{z.removeEventListener("complete",E),z.removeEventListener("error",J),z.removeEventListener("abort",J)},E=()=>{u(),H()},J=()=>{Y(z.error||new DOMException("AbortError","AbortError")),H()};z.addEventListener("complete",E),z.addEventListener("error",J),z.addEventListener("abort",J)}));L.set(z,u)}(z),u=z,(l||(l=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((z=>u instanceof z))?new Proxy(z,q):z);var u}function h(z){if(z instanceof IDBRequest)return function(z){const u=new Promise(((u,Y)=>{const H=()=>{z.removeEventListener("success",E),z.removeEventListener("error",J)},E=()=>{u(h(z.result)),H()},J=()=>{Y(z.error),H()};z.addEventListener("success",E),z.addEventListener("error",J)}));return u.then((u=>{u instanceof IDBCursor&&b.set(u,z)})).catch((()=>{})),M.set(u,z),u}(z);if(g.has(z))return g.get(z);const u=K(z);return u!==z&&(g.set(z,u),M.set(u,z)),u}const o=z=>M.get(z);const d=["get","getKey","getAll","getAllKeys","count"],t=["put","add","delete","clear"],W=new Map;function Z(z,u){if(!(z instanceof IDBDatabase)||u in z||"string"!==typeof u)return;if(W.get(u))return W.get(u);const Y=u.replace(/FromIndex$/,""),H=u!==Y,E=t.includes(Y);if(!(Y in(H?IDBIndex:IDBObjectStore).prototype)||!E&&!d.includes(Y))return;const J=async function(z){const u=this.transaction(z,E?"readwrite":"readonly");let J=u.store;for(var l=arguments.length,T=new Array(l>1?l-1:0),b=1;b<l;b++)T[b-1]=arguments[b];return H&&(J=J.index(T.shift())),(await Promise.all([J[Y](...T),E&&u.done]))[0]};return W.set(u,J),J}q=(z=>({...z,get:(u,Y,H)=>Z(u,Y)||z.get(u,Y,H),has:(u,Y)=>!!Z(u,Y)||z.has(u,Y)}))(q);class s{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map((z=>{if(function(z){const u=z.getComponent();return"VERSION"===(null===u||void 0===u?void 0:u.type)}(z)){const u=z.getImmediate();return`${u.library}/${u.version}`}return null})).filter((z=>z)).join(" ")}}const v="@firebase/app",i="0.9.13",X=new E.g("@firebase/app"),Q="@firebase/app-compat",V="@firebase/analytics-compat",A="@firebase/analytics",x="@firebase/app-check-compat",G="@firebase/app-check",F="@firebase/auth",R="@firebase/auth-compat",w="@firebase/database",c="@firebase/database-compat",U="@firebase/functions",O="@firebase/functions-compat",n="@firebase/installations",m="@firebase/installations-compat",p="@firebase/messaging",S="@firebase/messaging-compat",I="@firebase/performance",y="@firebase/performance-compat",a="@firebase/remote-config",j="@firebase/remote-config-compat",k="@firebase/storage",P="@firebase/storage-compat",e="@firebase/firestore",N="@firebase/firestore-compat",B="firebase",f="[DEFAULT]",r={[v]:"fire-core",[Q]:"fire-core-compat",[A]:"fire-analytics",[V]:"fire-analytics-compat",[G]:"fire-app-check",[x]:"fire-app-check-compat",[F]:"fire-auth",[R]:"fire-auth-compat",[w]:"fire-rtdb",[c]:"fire-rtdb-compat",[U]:"fire-fn",[O]:"fire-fn-compat",[n]:"fire-iid",[m]:"fire-iid-compat",[p]:"fire-fcm",[S]:"fire-fcm-compat",[I]:"fire-perf",[y]:"fire-perf-compat",[a]:"fire-rc",[j]:"fire-rc-compat",[k]:"fire-gcs",[P]:"fire-gcs-compat",[e]:"fire-fst",[N]:"fire-fst-compat","fire-js":"fire-js",[B]:"fire-js-all"},zz=new Map,uz=new Map;function Yz(z,u){try{z.container.zL(u)}catch(Y){X.debug(`Component ${u.name} failed to register with FirebaseApp ${z.name}`,Y)}}function Hz(z,u){z.container.addOrOverwriteComponent(u)}function Ez(z){const u=z.name;if(uz.has(u))return X.debug(`There were multiple attempts to register component ${u}.`),!1;uz.set(u,z);for(const Y of zz.values())Yz(Y,z);return!0}function Jz(z,u){const Y=z.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),z.container.getProvider(u)}function lz(z,u){let Y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;Jz(z,u).clearInstance(Y)}function Tz(){uz.clear()}const bz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Lz=new J.i("app","Firebase",bz);class Dz{constructor(z,u,Y){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},u),this._name=u.name,this._automaticDataCollectionEnabled=u.automaticDataCollectionEnabled,this._container=Y,this.container.zL(new H.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw Lz.create("app-deleted",{appName:this._name})}}const gz="9.23.0";function Mz(z){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Y=z;if("object"!==typeof u){u={name:u}}const E=Object.assign({name:f,automaticDataCollectionEnabled:!1},u),l=E.name;if("string"!==typeof l||!l)throw Lz.create("bad-app-name",{appName:String(l)});if(Y||(Y=(0,J.H)()),!Y)throw Lz.create("no-options");const T=zz.get(l);if(T){if((0,J.C)(Y,T.options)&&(0,J.C)(E,T.config))return T;throw Lz.create("duplicate-app",{appName:l})}const b=new H.c(l);for(const H of uz.values())b.zL(H);const L=new Dz(Y,E,b);return zz.set(l,L),L}function qz(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;const u=zz.get(z);if(!u&&z===f&&(0,J.H)())return Mz();if(!u)throw Lz.create("no-app",{appName:z});return u}function Cz(){return Array.from(zz.values())}async function Kz(z){const u=z.name;zz.has(u)&&(zz.delete(u),await Promise.all(z.container.getProviders().map((z=>z.delete()))),z.isDeleted=!0)}function hz(z,u,Y){var E;let J=null!==(E=r[z])&&void 0!==E?E:z;Y&&(J+=`-${Y}`);const l=J.match(/\s|\//),T=u.match(/\s|\//);if(l||T){const z=[`Unable to register library "${J}" with version "${u}":`];return l&&z.push(`library name "${J}" contains illegal characters (whitespace or "/")`),l&&T&&z.push("and"),T&&z.push(`version name "${u}" contains illegal characters (whitespace or "/")`),void X.warn(z.join(" "))}Ez(new H.e(`${J}-version`,(()=>({library:J,version:u})),"VERSION"))}function oz(z,u){if(null!==z&&"function"!==typeof z)throw Lz.create("invalid-log-argument");(0,E.n)(z,u)}function dz(z){(0,E.j)(z)}const tz="firebase-heartbeat-store";let Wz=null;function Zz(){return Wz||(Wz=function(z,u){let{blocked:Y,upgrade:H,blocking:E,terminated:J}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=indexedDB.open(z,u),T=h(l);return H&&l.addEventListener("upgradeneeded",(z=>{H(h(l.result),z.oldVersion,z.newVersion,h(l.transaction),z)})),Y&&l.addEventListener("blocked",(z=>Y(z.oldVersion,z.newVersion,z))),T.then((z=>{J&&z.addEventListener("close",(()=>J())),E&&z.addEventListener("versionchange",(z=>E(z.oldVersion,z.newVersion,z)))})).catch((()=>{})),T}("firebase-heartbeat-database",1,{upgrade:(z,u)=>{if(0===u)z.createObjectStore(tz)}}).catch((z=>{throw Lz.create("idb-open",{originalErrorMessage:z.message})}))),Wz}async function sz(z,u){try{const Y=(await Zz()).transaction(tz,"readwrite"),H=Y.objectStore(tz);await H.put(u,vz(z)),await Y.done}catch(Y){if(Y instanceof J.k)X.warn(Y.message);else{const z=Lz.create("idb-set",{originalErrorMessage:null===Y||void 0===Y?void 0:Y.message});X.warn(z.message)}}}function vz(z){return`${z.name}!${z.options.appId}`}class iz{constructor(z){this.container=z,this._heartbeatsCache=null;const u=this.container.getProvider("app").getImmediate();this.cg=new Qz(u),this._heartbeatsCachePromise=this.cg.read().then((z=>(this._heartbeatsCache=z,z)))}async triggerHeartbeat(){const z=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Xz();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==u&&!this._heartbeatsCache.heartbeats.some((z=>z.date===u)))return this._heartbeatsCache.heartbeats.push({date:u,agent:z}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((z=>{const u=new Date(z.date).valueOf();return Date.now()-u<=2592e6})),this.cg.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const z=Xz(),{heartbeatsToSend:u,unsentEntries:Y}=function(z){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const Y=[];let H=z.slice();for(const E of z){const z=Y.find((z=>z.agent===E.agent));if(z){if(z.dates.push(E.date),Vz(Y)>u){z.dates.pop();break}}else if(Y.push({agent:E.agent,dates:[E.date]}),Vz(Y)>u){Y.pop();break}H=H.slice(1)}return{heartbeatsToSend:Y,unsentEntries:H}}(this._heartbeatsCache.heartbeats),H=(0,J.t)(JSON.stringify({version:2,heartbeats:u}));return this._heartbeatsCache.lastSentHeartbeatDate=z,Y.length>0?(this._heartbeatsCache.heartbeats=Y,await this.cg.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.cg.overwrite(this._heartbeatsCache)),H}}function Xz(){return(new Date).toISOString().substring(0,10)}class Qz{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,J._)()&&(0,J.mb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(z){try{const u=await Zz();return await u.transaction(tz).objectStore(tz).get(vz(z))}catch(u){if(u instanceof J.k)X.warn(u.message);else{const z=Lz.create("idb-get",{originalErrorMessage:null===u||void 0===u?void 0:u.message});X.warn(z.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(z){var u;if(await this._canUseIndexedDBPromise){const Y=await this.read();return sz(this.app,{lastSentHeartbeatDate:null!==(u=z.lastSentHeartbeatDate)&&void 0!==u?u:Y.lastSentHeartbeatDate,heartbeats:z.heartbeats})}}async add(z){var u;if(await this._canUseIndexedDBPromise){const Y=await this.read();return sz(this.app,{lastSentHeartbeatDate:null!==(u=z.lastSentHeartbeatDate)&&void 0!==u?u:Y.lastSentHeartbeatDate,heartbeats:[...Y.heartbeats,...z.heartbeats]})}}}function Vz(z){return(0,J.t)(JSON.stringify({version:2,heartbeats:z})).length}var Az;Az="",Ez(new H.e("platform-logger",(z=>new s(z)),"PRIVATE")),Ez(new H.e("heartbeat",(z=>new iz(z)),"PRIVATE")),hz(v,i,Az),hz(v,i,"esm2017"),hz("fire-js","")},10864:(z,u,Y)=>{Y.d(u,{c:()=>T,e:()=>E});var H=Y(10872);class E{constructor(z,u,Y){this.name=z,this.instanceFactory=u,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const J="[DEFAULT]";class l{constructor(z,u){this.name=z,this.container=u,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const u=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(u)){const z=new H.e;if(this.instancesDeferred.set(u,z),this.isInitialized(u)||this.shouldAutoInitialize())try{const Y=this.getOrInitializeService({instanceIdentifier:u});Y&&z.resolve(Y)}catch(Y){}}return this.instancesDeferred.get(u).promise}getImmediate(z){var u;const Y=this.normalizeInstanceIdentifier(null===z||void 0===z?void 0:z.identifier),H=null!==(u=null===z||void 0===z?void 0:z.optional)&&void 0!==u&&u;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(H)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(E){if(H)return null;throw E}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function(z){return"EAGER"===z.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:J})}catch(u){}for(const[z,Y]of this.instancesDeferred.entries()){const H=this.normalizeInstanceIdentifier(z);try{const z=this.getOrInitializeService({instanceIdentifier:H});Y.resolve(z)}catch(u){}}}}clearInstance(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}async delete(){const z=Array.from(this.instances.values());await Promise.all([...z.filter((z=>"INTERNAL"in z)).map((z=>z.INTERNAL.delete())),...z.filter((z=>"_delete"in z)).map((z=>z._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.instances.has(z)}getOptions(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.instancesOptions.get(z)||{}}initialize(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:u={}}=z,Y=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const H=this.getOrInitializeService({instanceIdentifier:Y,options:u});for(const[E,J]of this.instancesDeferred.entries()){Y===this.normalizeInstanceIdentifier(E)&&J.resolve(H)}return H}lg(z,u){var Y;const H=this.normalizeInstanceIdentifier(u),E=null!==(Y=this.onInitCallbacks.get(H))&&void 0!==Y?Y:new Set;E.add(z),this.onInitCallbacks.set(H,E);const J=this.instances.get(H);return J&&z(J,H),()=>{E.delete(z)}}invokeOnInitCallbacks(z,u){const Y=this.onInitCallbacks.get(u);if(Y)for(const E of Y)try{E(z,u)}catch(H){}}getOrInitializeService(z){let{instanceIdentifier:u,options:Y={}}=z,H=this.instances.get(u);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(E=u,E===J?void 0:E),options:Y}),this.instances.set(u,H),this.instancesOptions.set(u,Y),this.invokeOnInitCallbacks(H,u),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,u,H)}catch(l){}var E;return H||null}normalizeInstanceIdentifier(){let z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;return this.component?this.component.multipleInstances?z:J:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class T{constructor(z){this.name=z,this.providers=new Map}zL(z){const u=this.getProvider(z.name);if(u.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);u.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.zL(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const u=new l(z,this);return this.providers.set(z,u),u}getProviders(){return Array.from(this.providers.values())}}},10881:(z,u,Y)=>{Y.d(u,{d:()=>E,g:()=>L,j:()=>D,n:()=>g});const H=[];var E;!function(z){z[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT"}(E||(E={}));const J={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},l=E.INFO,T={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},b=function(z,u){if(u<z.logLevel)return;const Y=(new Date).toISOString(),H=T[u];if(!H)throw new Error(`Attempted to log a message with an invalid logType (value: ${u})`);for(var E=arguments.length,J=new Array(E>2?E-2:0),l=2;l<E;l++)J[l-2]=arguments[l];console[H](`[${Y}]  ${z.name}:`,...J)};class L{constructor(z){this.name=z,this._logLevel=l,this._logHandler=b,this._userLogHandler=null,H.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in E))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"===typeof z?J[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!==typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(){for(var z=arguments.length,u=new Array(z),Y=0;Y<z;Y++)u[Y]=arguments[Y];this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...u),this._logHandler(this,E.DEBUG,...u)}log(){for(var z=arguments.length,u=new Array(z),Y=0;Y<z;Y++)u[Y]=arguments[Y];this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...u),this._logHandler(this,E.VERBOSE,...u)}info(){for(var z=arguments.length,u=new Array(z),Y=0;Y<z;Y++)u[Y]=arguments[Y];this._userLogHandler&&this._userLogHandler(this,E.INFO,...u),this._logHandler(this,E.INFO,...u)}warn(){for(var z=arguments.length,u=new Array(z),Y=0;Y<z;Y++)u[Y]=arguments[Y];this._userLogHandler&&this._userLogHandler(this,E.WARN,...u),this._logHandler(this,E.WARN,...u)}error(){for(var z=arguments.length,u=new Array(z),Y=0;Y<z;Y++)u[Y]=arguments[Y];this._userLogHandler&&this._userLogHandler(this,E.ERROR,...u),this._logHandler(this,E.ERROR,...u)}}function D(z){H.forEach((u=>{u.setLogLevel(z)}))}function g(z,u){for(const Y of H){let H=null;u&&u.level&&(H=J[u.level]),Y.userLogHandler=null===z?null:function(u,Y){for(var J=arguments.length,l=new Array(J>2?J-2:0),T=2;T<J;T++)l[T-2]=arguments[T];const b=l.map((z=>{if(null==z)return null;if("string"===typeof z)return z;if("number"===typeof z||"boolean"===typeof z)return z.toString();if(z instanceof Error)return z.message;try{return JSON.stringify(z)}catch(u){return null}})).filter((z=>z)).join(" ");Y>=(null!==H&&void 0!==H?H:u.logLevel)&&z({level:E[Y].toLowerCase(),message:b,args:l,type:u.name})}}}}}]);