/*! For license information please see jlq0um.5.91f82a53.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{11004:(o,H,n)=>{n.d(H,{B:()=>f,D:()=>c,G:()=>G,I:()=>A,M:()=>X,P:()=>x,Q:()=>V,R:()=>b,U:()=>N,V:()=>h,X:()=>z,Y:()=>J,_:()=>K,cb:()=>M,e:()=>l,fb:()=>Q,i:()=>m,k:()=>j,m:()=>p,q:()=>Y,t:()=>O,u:()=>t,w:()=>B,z:()=>e});const E=function(o){const H=[];let n=0;for(let E=0;E<o.length;E++){let k=o.charCodeAt(E);k<128?H[n++]=k:k<2048?(H[n++]=k>>6|192,H[n++]=63&k|128):55296===(64512&k)&&E+1<o.length&&56320===(64512&o.charCodeAt(E+1))?(k=65536+((1023&k)<<10)+(1023&o.charCodeAt(++E)),H[n++]=k>>18|240,H[n++]=k>>12&63|128,H[n++]=k>>6&63|128,H[n++]=63&k|128):(H[n++]=k>>12|224,H[n++]=k>>6&63|128,H[n++]=63&k|128)}return H},k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(o,H){if(!Array.isArray(o))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,E=[];for(let k=0;k<o.length;k+=3){const H=o[k],g=k+1<o.length,O=g?o[k+1]:0,Y=k+2<o.length,y=Y?o[k+2]:0,S=H>>2,G=(3&H)<<4|O>>4;let c=(15&O)<<2|y>>6,A=63&y;Y||(A=64,g||(c=64)),E.push(n[S],n[G],n[c],n[A])}return E.join("")},encodeString(o,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(o):this.encodeByteArray(E(o),H)},decodeString(o,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(o):function(o){const H=[];let n=0,E=0;for(;n<o.length;){const k=o[n++];if(k<128)H[E++]=String.fromCharCode(k);else if(k>191&&k<224){const g=o[n++];H[E++]=String.fromCharCode((31&k)<<6|63&g)}else if(k>239&&k<365){const g=((7&k)<<18|(63&o[n++])<<12|(63&o[n++])<<6|63&o[n++])-65536;H[E++]=String.fromCharCode(55296+(g>>10)),H[E++]=String.fromCharCode(56320+(1023&g))}else{const g=o[n++],O=o[n++];H[E++]=String.fromCharCode((15&k)<<12|(63&g)<<6|63&O)}}return H.join("")}(this.decodeStringToByteArray(o,H))},decodeStringToByteArray(o,H){this.init_();const n=H?this.charToByteMapWebSafe_:this.charToByteMap_,E=[];for(let k=0;k<o.length;){const H=n[o.charAt(k++)],O=k<o.length?n[o.charAt(k)]:0;++k;const Y=k<o.length?n[o.charAt(k)]:64;++k;const y=k<o.length?n[o.charAt(k)]:64;if(++k,null==H||null==O||null==Y||null==y)throw new g;const S=H<<2|O>>4;if(E.push(S),64!==Y){const o=O<<4&240|Y>>2;if(E.push(o),64!==y){const o=Y<<6&192|y;E.push(o)}}}return E},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let o=0;o<this.ENCODED_VALS.length;o++)this.byteToCharMap_[o]=this.ENCODED_VALS.charAt(o),this.charToByteMap_[this.byteToCharMap_[o]]=o,this.byteToCharMapWebSafe_[o]=this.ENCODED_VALS_WEBSAFE.charAt(o),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[o]]=o,o>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(o)]=o,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(o)]=o)}}};class g extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const O=function(o){return function(o){const H=E(o);return k.encodeByteArray(H,!0)}(o).replace(/\./g,"")},Y=function(o){try{return k.decodeString(o,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};const y=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,S=()=>{try{return y()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let o;try{o=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const H=o&&Y(o[1]);return H&&JSON.parse(H)})()}catch(o){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${o}`)}},G=o=>{var H,n;return null===(n=null===(H=S())||void 0===H?void 0:H.emulatorHosts)||void 0===n?void 0:n[o]},c=()=>{var o;return null===(o=S())||void 0===o?void 0:o.config},A=o=>{var H;return null===(H=S())||void 0===H?void 0:H[`_${o}`]};class l{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((o,H)=>{this.resolve=o,this.reject=H}))}wrapCallback(o){return(H,n)=>{H?this.reject(H):this.resolve(n),"function"===typeof o&&(this.promise.catch((()=>{})),1===o.length?o(H):o(H,n))}}}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function z(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function V(){const o="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof o&&void 0!==o.id}function J(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function N(){const o=x();return o.indexOf("MSIE ")>=0||o.indexOf("Trident/")>=0}function h(){try{return"object"===typeof indexedDB}catch(o){return!1}}function Q(){return new Promise(((o,H)=>{try{let n=!0;const E="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(E);k.onsuccess=()=>{k.result.close(),n||self.indexedDB.deleteDatabase(E),o(!0)},k.onupgradeneeded=()=>{n=!1},k.onerror=()=>{var o;H((null===(o=k.error)||void 0===o?void 0:o.message)||"")}}catch(n){H(n)}}))}function p(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class j extends Error{constructor(o,H,n){super(H),this.code=o,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m.prototype.create)}}class m{constructor(o,H,n){this.service=o,this.serviceName=H,this.errors=n}create(o){const H=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${o}`,E=this.errors[o],k=E?function(o,H){return o.replace(P,((o,n)=>{const E=H[n];return null!=E?String(E):`<${n}?>`}))}(E,H):"Error",g=`${this.serviceName}: ${k} (${n}).`;return new j(n,g,H)}}const P=/\{\$([^}]+)}/g;function b(o){for(const H in o)if(Object.prototype.hasOwnProperty.call(o,H))return!1;return!0}function e(o,H){if(o===H)return!0;const n=Object.keys(o),E=Object.keys(H);for(const k of n){if(!E.includes(k))return!1;const n=o[k],g=H[k];if(Z(n)&&Z(g)){if(!e(n,g))return!1}else if(n!==g)return!1}for(const k of E)if(!n.includes(k))return!1;return!0}function Z(o){return null!==o&&"object"===typeof o}function M(o){const H=[];for(const[n,E]of Object.entries(o))Array.isArray(E)?E.forEach((o=>{H.push(encodeURIComponent(n)+"="+encodeURIComponent(o))})):H.push(encodeURIComponent(n)+"="+encodeURIComponent(E));return H.length?"&"+H.join("&"):""}function K(o){const H={};return o.replace(/^\?/,"").split("&").forEach((o=>{if(o){const[n,E]=o.split("=");H[decodeURIComponent(n)]=decodeURIComponent(E)}})),H}function f(o){const H=o.indexOf("?");if(!H)return"";const n=o.indexOf("#",H);return o.substring(H,n>0?n:void 0)}function B(o,H){const n=new q(o,H);return n.subscribe.bind(n)}class q{constructor(o,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then((()=>{o(this)})).catch((o=>{this.error(o)}))}next(o){this.forEachObserver((H=>{H.next(o)}))}error(o){this.forEachObserver((H=>{H.error(o)})),this.close(o)}complete(){this.forEachObserver((o=>{o.complete()})),this.close()}subscribe(o,H,n){let E;if(void 0===o&&void 0===H&&void 0===n)throw new Error("Missing Observer.");E=function(o,H){if("object"!==typeof o||null===o)return!1;for(const n of H)if(n in o&&"function"===typeof o[n])return!0;return!1}(o,["next","error","complete"])?o:{next:o,error:H,complete:n},void 0===E.next&&(E.next=D),void 0===E.error&&(E.error=D),void 0===E.complete&&(E.complete=D);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?E.error(this.finalError):E.complete()}catch(o){}})),this.observers.push(E),k}unsubscribeOne(o){void 0!==this.observers&&void 0!==this.observers[o]&&(delete this.observers[o],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(o){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,o)}sendOne(o,H){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[o])try{H(this.observers[o])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(o){this.finalized||(this.finalized=!0,void 0!==o&&(this.finalError=o),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function D(){}const T=1e3,a=2,F=144e5,C=.5;function t(o){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:T)*Math.pow(H,o),E=Math.round(C*n*(Math.random()-.5)*2);return Math.min(F,n+E)}function X(o){return o&&o._delegate?o._delegate:o}},10996:(o,H,n)=>{n.d(H,{b:()=>g.k,f:()=>co,h:()=>i,l:()=>no,m:()=>Eo,q:()=>oo,r:()=>Yo,t:()=>Ho,u:()=>go,y:()=>ko,A:()=>Oo,C:()=>zo,F:()=>lo,E:()=>xo,G:()=>Ao,I:()=>Jo,L:()=>Vo,N:()=>No});var E=n(11e3),k=n(11010),g=n(11004);let O,Y;const y=new WeakMap,S=new WeakMap,G=new WeakMap,c=new WeakMap,A=new WeakMap;let l={get(o,H,n){if(o instanceof IDBTransaction){if("done"===H)return S.get(o);if("objectStoreNames"===H)return o.objectStoreNames||G.get(o);if("store"===H)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(o[H])},set:(o,H,n)=>(o[H]=n,!0),has:(o,H)=>o instanceof IDBTransaction&&("done"===H||"store"===H)||H in o};function x(o){return o!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(o)?function(){for(var H=arguments.length,n=new Array(H),E=0;E<H;E++)n[E]=arguments[E];return o.apply(J(this),n),V(y.get(this))}:function(){for(var H=arguments.length,n=new Array(H),E=0;E<H;E++)n[E]=arguments[E];return V(o.apply(J(this),n))}:function(H){for(var n=arguments.length,E=new Array(n>1?n-1:0),k=1;k<n;k++)E[k-1]=arguments[k];const g=o.call(J(this),H,...E);return G.set(g,H.sort?H.sort():[H]),V(g)}}function z(o){return"function"===typeof o?x(o):(o instanceof IDBTransaction&&function(o){if(S.has(o))return;const H=new Promise(((H,n)=>{const E=()=>{o.removeEventListener("complete",k),o.removeEventListener("error",g),o.removeEventListener("abort",g)},k=()=>{H(),E()},g=()=>{n(o.error||new DOMException("AbortError","AbortError")),E()};o.addEventListener("complete",k),o.addEventListener("error",g),o.addEventListener("abort",g)}));S.set(o,H)}(o),H=o,(O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((o=>H instanceof o))?new Proxy(o,l):o);var H}function V(o){if(o instanceof IDBRequest)return function(o){const H=new Promise(((H,n)=>{const E=()=>{o.removeEventListener("success",k),o.removeEventListener("error",g)},k=()=>{H(V(o.result)),E()},g=()=>{n(o.error),E()};o.addEventListener("success",k),o.addEventListener("error",g)}));return H.then((H=>{H instanceof IDBCursor&&y.set(H,o)})).catch((()=>{})),A.set(H,o),H}(o);if(c.has(o))return c.get(o);const H=z(o);return H!==o&&(c.set(o,H),A.set(H,o)),H}const J=o=>A.get(o);const N=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],Q=new Map;function p(o,H){if(!(o instanceof IDBDatabase)||H in o||"string"!==typeof H)return;if(Q.get(H))return Q.get(H);const n=H.replace(/FromIndex$/,""),E=H!==n,k=h.includes(n);if(!(n in(E?IDBIndex:IDBObjectStore).prototype)||!k&&!N.includes(n))return;const g=async function(o){const H=this.transaction(o,k?"readwrite":"readonly");let g=H.store;for(var O=arguments.length,Y=new Array(O>1?O-1:0),y=1;y<O;y++)Y[y-1]=arguments[y];return E&&(g=g.index(Y.shift())),(await Promise.all([g[n](...Y),k&&H.done]))[0]};return Q.set(H,g),g}l=(o=>({...o,get:(H,n,E)=>p(H,n)||o.get(H,n,E),has:(H,n)=>!!p(H,n)||o.has(H,n)}))(l);class j{constructor(o){this.container=o}getPlatformInfoString(){return this.container.getProviders().map((o=>{if(function(o){const H=o.getComponent();return"VERSION"===(null===H||void 0===H?void 0:H.type)}(o)){const H=o.getImmediate();return`${H.library}/${H.version}`}return null})).filter((o=>o)).join(" ")}}const m="@firebase/app",P="0.9.13",b=new k.e("@firebase/app"),e="@firebase/app-compat",Z="@firebase/analytics-compat",M="@firebase/analytics",K="@firebase/app-check-compat",f="@firebase/app-check",B="@firebase/auth",q="@firebase/auth-compat",D="@firebase/database",T="@firebase/database-compat",a="@firebase/functions",F="@firebase/functions-compat",C="@firebase/installations",t="@firebase/installations-compat",X="@firebase/messaging",s="@firebase/messaging-compat",U="@firebase/performance",I="@firebase/performance-compat",v="@firebase/remote-config",w="@firebase/remote-config-compat",r="@firebase/storage",u="@firebase/storage-compat",d="@firebase/firestore",R="@firebase/firestore-compat",W="firebase",i="[DEFAULT]",L={[m]:"fire-core",[e]:"fire-core-compat",[M]:"fire-analytics",[Z]:"fire-analytics-compat",[f]:"fire-app-check",[K]:"fire-app-check-compat",[B]:"fire-auth",[q]:"fire-auth-compat",[D]:"fire-rtdb",[T]:"fire-rtdb-compat",[a]:"fire-fn",[F]:"fire-fn-compat",[C]:"fire-iid",[t]:"fire-iid-compat",[X]:"fire-fcm",[s]:"fire-fcm-compat",[U]:"fire-perf",[I]:"fire-perf-compat",[v]:"fire-rc",[w]:"fire-rc-compat",[r]:"fire-gcs",[u]:"fire-gcs-compat",[d]:"fire-fst",[R]:"fire-fst-compat","fire-js":"fire-js",[W]:"fire-js-all"},oo=new Map,Ho=new Map;function no(o,H){try{o.container.Py(H)}catch(n){b.debug(`Component ${H.name} failed to register with FirebaseApp ${o.name}`,n)}}function Eo(o,H){o.container.addOrOverwriteComponent(H)}function ko(o){const H=o.name;if(Ho.has(H))return b.debug(`There were multiple attempts to register component ${H}.`),!1;Ho.set(H,o);for(const n of oo.values())no(n,o);return!0}function go(o,H){const n=o.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),o.container.getProvider(H)}function Oo(o,H){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;go(o,H).clearInstance(n)}function Yo(){Ho.clear()}const yo={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},So=new g.i("app","Firebase",yo);class Go{constructor(o,H,n){this._isDeleted=!1,this._options=Object.assign({},o),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=n,this.container.Py(new E.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(o){this.checkDestroyed(),this._automaticDataCollectionEnabled=o}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(o){this._isDeleted=o}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}const co="9.23.0";function Ao(o){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o;if("object"!==typeof H){H={name:H}}const k=Object.assign({name:i,automaticDataCollectionEnabled:!1},H),O=k.name;if("string"!==typeof O||!O)throw So.create("bad-app-name",{appName:String(O)});if(n||(n=(0,g.D)()),!n)throw So.create("no-options");const Y=oo.get(O);if(Y){if((0,g.z)(n,Y.options)&&(0,g.z)(k,Y.config))return Y;throw So.create("duplicate-app",{appName:O})}const y=new E.e(O);for(const E of Ho.values())y.Py(E);const S=new Go(n,k,y);return oo.set(O,S),S}function lo(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;const H=oo.get(o);if(!H&&o===i&&(0,g.D)())return Ao();if(!H)throw So.create("no-app",{appName:o});return H}function xo(){return Array.from(oo.values())}async function zo(o){const H=o.name;oo.has(H)&&(oo.delete(H),await Promise.all(o.container.getProviders().map((o=>o.delete()))),o.isDeleted=!0)}function Vo(o,H,n){var k;let g=null!==(k=L[o])&&void 0!==k?k:o;n&&(g+=`-${n}`);const O=g.match(/\s|\//),Y=H.match(/\s|\//);if(O||Y){const o=[`Unable to register library "${g}" with version "${H}":`];return O&&o.push(`library name "${g}" contains illegal characters (whitespace or "/")`),O&&Y&&o.push("and"),Y&&o.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void b.warn(o.join(" "))}ko(new E.h(`${g}-version`,(()=>({library:g,version:H})),"VERSION"))}function Jo(o,H){if(null!==o&&"function"!==typeof o)throw So.create("invalid-log-argument");(0,k.k)(o,H)}function No(o){(0,k.h)(o)}const ho="firebase-heartbeat-store";let Qo=null;function po(){return Qo||(Qo=function(o,H){let{blocked:n,upgrade:E,blocking:k,terminated:g}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const O=indexedDB.open(o,H),Y=V(O);return E&&O.addEventListener("upgradeneeded",(o=>{E(V(O.result),o.oldVersion,o.newVersion,V(O.transaction),o)})),n&&O.addEventListener("blocked",(o=>n(o.oldVersion,o.newVersion,o))),Y.then((o=>{g&&o.addEventListener("close",(()=>g())),k&&o.addEventListener("versionchange",(o=>k(o.oldVersion,o.newVersion,o)))})).catch((()=>{})),Y}("firebase-heartbeat-database",1,{upgrade:(o,H)=>{if(0===H)o.createObjectStore(ho)}}).catch((o=>{throw So.create("idb-open",{originalErrorMessage:o.message})}))),Qo}async function jo(o,H){try{const n=(await po()).transaction(ho,"readwrite"),E=n.objectStore(ho);await E.put(H,mo(o)),await n.done}catch(n){if(n instanceof g.k)b.warn(n.message);else{const o=So.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});b.warn(o.message)}}}function mo(o){return`${o.name}!${o.options.appId}`}class Po{constructor(o){this.container=o,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this.LG=new eo(H),this._heartbeatsCachePromise=this.LG.read().then((o=>(this._heartbeatsCache=o,o)))}async triggerHeartbeat(){const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=bo();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==H&&!this._heartbeatsCache.heartbeats.some((o=>o.date===H)))return this._heartbeatsCache.heartbeats.push({date:H,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((o=>{const H=new Date(o.date).valueOf();return Date.now()-H<=2592e6})),this.LG.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const o=bo(),{heartbeatsToSend:H,unsentEntries:n}=function(o){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let E=o.slice();for(const k of o){const o=n.find((o=>o.agent===k.agent));if(o){if(o.dates.push(k.date),Zo(n)>H){o.dates.pop();break}}else if(n.push({agent:k.agent,dates:[k.date]}),Zo(n)>H){n.pop();break}E=E.slice(1)}return{heartbeatsToSend:n,unsentEntries:E}}(this._heartbeatsCache.heartbeats),E=(0,g.t)(JSON.stringify({version:2,heartbeats:H}));return this._heartbeatsCache.lastSentHeartbeatDate=o,n.length>0?(this._heartbeatsCache.heartbeats=n,await this.LG.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.LG.overwrite(this._heartbeatsCache)),E}}function bo(){return(new Date).toISOString().substring(0,10)}class eo{constructor(o){this.app=o,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,g.V)()&&(0,g.fb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(o){try{const H=await po();return await H.transaction(ho).objectStore(ho).get(mo(o))}catch(H){if(H instanceof g.k)b.warn(H.message);else{const o=So.create("idb-get",{originalErrorMessage:null===H||void 0===H?void 0:H.message});b.warn(o.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(o){var H;if(await this._canUseIndexedDBPromise){const n=await this.read();return jo(this.app,{lastSentHeartbeatDate:null!==(H=o.lastSentHeartbeatDate)&&void 0!==H?H:n.lastSentHeartbeatDate,heartbeats:o.heartbeats})}}async add(o){var H;if(await this._canUseIndexedDBPromise){const n=await this.read();return jo(this.app,{lastSentHeartbeatDate:null!==(H=o.lastSentHeartbeatDate)&&void 0!==H?H:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...o.heartbeats]})}}}function Zo(o){return(0,g.t)(JSON.stringify({version:2,heartbeats:o})).length}var Mo;Mo="",ko(new E.h("platform-logger",(o=>new j(o)),"PRIVATE")),ko(new E.h("heartbeat",(o=>new Po(o)),"PRIVATE")),Vo(m,P,Mo),Vo(m,P,"esm2017"),Vo("fire-js","")},11e3:(o,H,n)=>{n.d(H,{e:()=>Y,h:()=>k});var E=n(11004);class k{constructor(o,H,n){this.name=o,this.instanceFactory=H,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(o){return this.instantiationMode=o,this}setMultipleInstances(o){return this.multipleInstances=o,this}setServiceProps(o){return this.serviceProps=o,this}setInstanceCreatedCallback(o){return this.onInstanceCreated=o,this}}const g="[DEFAULT]";class O{constructor(o,H){this.name=o,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(o){const H=this.normalizeInstanceIdentifier(o);if(!this.instancesDeferred.has(H)){const o=new E.e;if(this.instancesDeferred.set(H,o),this.isInitialized(H)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:H});n&&o.resolve(n)}catch(n){}}return this.instancesDeferred.get(H).promise}getImmediate(o){var H;const n=this.normalizeInstanceIdentifier(null===o||void 0===o?void 0:o.identifier),E=null!==(H=null===o||void 0===o?void 0:o.optional)&&void 0!==H&&H;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(E)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(k){if(E)return null;throw k}}getComponent(){return this.component}setComponent(o){if(o.name!==this.name)throw Error(`Mismatching Component ${o.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=o,this.shouldAutoInitialize()){if(function(o){return"EAGER"===o.instantiationMode}(o))try{this.getOrInitializeService({instanceIdentifier:g})}catch(H){}for(const[o,n]of this.instancesDeferred.entries()){const E=this.normalizeInstanceIdentifier(o);try{const o=this.getOrInitializeService({instanceIdentifier:E});n.resolve(o)}catch(H){}}}}clearInstance(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;this.instancesDeferred.delete(o),this.instancesOptions.delete(o),this.instances.delete(o)}async delete(){const o=Array.from(this.instances.values());await Promise.all([...o.filter((o=>"INTERNAL"in o)).map((o=>o.INTERNAL.delete())),...o.filter((o=>"_delete"in o)).map((o=>o._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.instances.has(o)}getOptions(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.instancesOptions.get(o)||{}}initialize(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:H={}}=o,n=this.normalizeInstanceIdentifier(o.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const E=this.getOrInitializeService({instanceIdentifier:n,options:H});for(const[k,g]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(k)&&g.resolve(E)}return E}fG(o,H){var n;const E=this.normalizeInstanceIdentifier(H),k=null!==(n=this.onInitCallbacks.get(E))&&void 0!==n?n:new Set;k.add(o),this.onInitCallbacks.set(E,k);const g=this.instances.get(E);return g&&o(g,E),()=>{k.delete(o)}}invokeOnInitCallbacks(o,H){const n=this.onInitCallbacks.get(H);if(n)for(const k of n)try{k(o,H)}catch(E){}}getOrInitializeService(o){let{instanceIdentifier:H,options:n={}}=o,E=this.instances.get(H);if(!E&&this.component&&(E=this.component.instanceFactory(this.container,{instanceIdentifier:(k=H,k===g?void 0:k),options:n}),this.instances.set(H,E),this.instancesOptions.set(H,n),this.invokeOnInitCallbacks(E,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,E)}catch(O){}var k;return E||null}normalizeInstanceIdentifier(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.component?this.component.multipleInstances?o:g:o}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(o){this.name=o,this.providers=new Map}Py(o){const H=this.getProvider(o.name);if(H.isComponentSet())throw new Error(`Component ${o.name} has already been registered with ${this.name}`);H.setComponent(o)}addOrOverwriteComponent(o){this.getProvider(o.name).isComponentSet()&&this.providers.delete(o.name),this.Py(o)}getProvider(o){if(this.providers.has(o))return this.providers.get(o);const H=new O(o,this);return this.providers.set(o,H),H}getProviders(){return Array.from(this.providers.values())}}},11010:(o,H,n)=>{n.d(H,{d:()=>k,e:()=>S,h:()=>G,k:()=>c});const E=[];var k;!function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"}(k||(k={}));const g={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},O=k.INFO,Y={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},y=function(o,H){if(H<o.logLevel)return;const n=(new Date).toISOString(),E=Y[H];if(!E)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);for(var k=arguments.length,g=new Array(k>2?k-2:0),O=2;O<k;O++)g[O-2]=arguments[O];console[E](`[${n}]  ${o.name}:`,...g)};class S{constructor(o){this.name=o,this._logLevel=O,this._logHandler=y,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(o){if(!(o in k))throw new TypeError(`Invalid value "${o}" assigned to \`logLevel\``);this._logLevel=o}setLogLevel(o){this._logLevel="string"===typeof o?g[o]:o}get logHandler(){return this._logHandler}set logHandler(o){if("function"!==typeof o)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=o}get userLogHandler(){return this._userLogHandler}set userLogHandler(o){this._userLogHandler=o}debug(){for(var o=arguments.length,H=new Array(o),n=0;n<o;n++)H[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...H),this._logHandler(this,k.DEBUG,...H)}log(){for(var o=arguments.length,H=new Array(o),n=0;n<o;n++)H[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...H),this._logHandler(this,k.VERBOSE,...H)}info(){for(var o=arguments.length,H=new Array(o),n=0;n<o;n++)H[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.INFO,...H),this._logHandler(this,k.INFO,...H)}warn(){for(var o=arguments.length,H=new Array(o),n=0;n<o;n++)H[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.WARN,...H),this._logHandler(this,k.WARN,...H)}error(){for(var o=arguments.length,H=new Array(o),n=0;n<o;n++)H[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,k.ERROR,...H),this._logHandler(this,k.ERROR,...H)}}function G(o){E.forEach((H=>{H.setLogLevel(o)}))}function c(o,H){for(const n of E){let E=null;H&&H.level&&(E=g[H.level]),n.userLogHandler=null===o?null:function(H,n){for(var g=arguments.length,O=new Array(g>2?g-2:0),Y=2;Y<g;Y++)O[Y-2]=arguments[Y];const y=O.map((o=>{if(null==o)return null;if("string"===typeof o)return o;if("number"===typeof o||"boolean"===typeof o)return o.toString();if(o instanceof Error)return o.message;try{return JSON.stringify(o)}catch(H){return null}})).filter((o=>o)).join(" ");n>=(null!==E&&void 0!==E?E:H.logLevel)&&o({level:k[n].toLowerCase(),message:y,args:O,type:H.name})}}}}}]);