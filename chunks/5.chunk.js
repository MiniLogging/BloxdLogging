/*! For license information please see 0j3gk8j.5.5748b837.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10930:(h,V,i)=>{i.d(V,{A:()=>v,B:()=>I,F:()=>s,G:()=>z,J:()=>T,L:()=>n,P:()=>o,T:()=>f,W:()=>P,Y:()=>e,_:()=>c,ab:()=>H,bb:()=>E,c:()=>t,cb:()=>L,d:()=>D,e:()=>X,i:()=>U,j:()=>q,n:()=>g,o:()=>Z,s:()=>m,u:()=>M,w:()=>j});const S=function(h){const V=[];let i=0;for(let S=0;S<h.length;S++){let l=h.charCodeAt(S);l<128?V[i++]=l:l<2048?(V[i++]=l>>6|192,V[i++]=63&l|128):55296===(64512&l)&&S+1<h.length&&56320===(64512&h.charCodeAt(S+1))?(l=65536+((1023&l)<<10)+(1023&h.charCodeAt(++S)),V[i++]=l>>18|240,V[i++]=l>>12&63|128,V[i++]=l>>6&63|128,V[i++]=63&l|128):(V[i++]=l>>12|224,V[i++]=l>>6&63|128,V[i++]=63&l|128)}return V},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(h,V){if(!Array.isArray(h))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,S=[];for(let l=0;l<h.length;l+=3){const V=h[l],Y=l+1<h.length,g=Y?h[l+1]:0,q=l+2<h.length,B=q?h[l+2]:0,J=V>>2,I=(3&V)<<4|g>>4;let v=(15&g)<<2|B>>6,s=63&B;q||(s=64,Y||(v=64)),S.push(i[J],i[I],i[v],i[s])}return S.join("")},encodeString(h,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(h):this.encodeByteArray(S(h),V)},decodeString(h,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(h):function(h){const V=[];let i=0,S=0;for(;i<h.length;){const l=h[i++];if(l<128)V[S++]=String.fromCharCode(l);else if(l>191&&l<224){const Y=h[i++];V[S++]=String.fromCharCode((31&l)<<6|63&Y)}else if(l>239&&l<365){const Y=((7&l)<<18|(63&h[i++])<<12|(63&h[i++])<<6|63&h[i++])-65536;V[S++]=String.fromCharCode(55296+(Y>>10)),V[S++]=String.fromCharCode(56320+(1023&Y))}else{const Y=h[i++],g=h[i++];V[S++]=String.fromCharCode((15&l)<<12|(63&Y)<<6|63&g)}}return V.join("")}(this.decodeStringToByteArray(h,V))},decodeStringToByteArray(h,V){this.init_();const i=V?this.charToByteMapWebSafe_:this.charToByteMap_,S=[];for(let l=0;l<h.length;){const V=i[h.charAt(l++)],g=l<h.length?i[h.charAt(l)]:0;++l;const q=l<h.length?i[h.charAt(l)]:64;++l;const B=l<h.length?i[h.charAt(l)]:64;if(++l,null==V||null==g||null==q||null==B)throw new Y;const J=V<<2|g>>4;if(S.push(J),64!==q){const h=g<<4&240|q>>2;if(S.push(h),64!==B){const h=q<<6&192|B;S.push(h)}}}return S},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let h=0;h<this.ENCODED_VALS.length;h++)this.byteToCharMap_[h]=this.ENCODED_VALS.charAt(h),this.charToByteMap_[this.byteToCharMap_[h]]=h,this.byteToCharMapWebSafe_[h]=this.ENCODED_VALS_WEBSAFE.charAt(h),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[h]]=h,h>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(h)]=h,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(h)]=h)}}};class Y extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g=function(h){return function(h){const V=S(h);return l.encodeByteArray(V,!0)}(h).replace(/\./g,"")},q=function(h){try{return l.decodeString(h,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};const B=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,J=()=>{try{return B()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let h;try{h=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(i){return}const V=h&&q(h[1]);return V&&JSON.parse(V)})()}catch(h){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${h}`)}},I=h=>{var V,i;return null===(i=null===(V=J())||void 0===V?void 0:V.emulatorHosts)||void 0===i?void 0:i[h]},v=()=>{var h;return null===(h=J())||void 0===h?void 0:h.config},s=h=>{var V;return null===(V=J())||void 0===V?void 0:V[`_${h}`]};class t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((h,V)=>{this.resolve=h,this.reject=V}))}wrapCallback(h){return(V,i)=>{V?this.reject(V):this.resolve(i),"function"===typeof h&&(this.promise.catch((()=>{})),1===h.length?h(V):h(V,i))}}}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function e(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function n(){const h="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof h&&void 0!==h.id}function c(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function f(){const h=T();return h.indexOf("MSIE ")>=0||h.indexOf("Trident/")>=0}function P(){try{return"object"===typeof indexedDB}catch(h){return!1}}function L(){return new Promise(((h,V)=>{try{let i=!0;const S="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(S);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(S),h(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var h;V((null===(h=l.error)||void 0===h?void 0:h.message)||"")}}catch(i){V(i)}}))}function U(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class X extends Error{constructor(h,V,i){super(V),this.code=h,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,X.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(h,V,i){this.service=h,this.serviceName=V,this.errors=i}create(h){const V=(arguments.length<=1?void 0:arguments[1])||{},i=`${this.service}/${h}`,S=this.errors[h],l=S?function(h,V){return h.replace(O,((h,i)=>{const S=V[i];return null!=S?String(S):`<${i}?>`}))}(S,V):"Error",Y=`${this.serviceName}: ${l} (${i}).`;return new X(i,Y,V)}}const O=/\{\$([^}]+)}/g;function o(h){for(const V in h)if(Object.prototype.hasOwnProperty.call(h,V))return!1;return!0}function M(h,V){if(h===V)return!0;const i=Object.keys(h),S=Object.keys(V);for(const l of i){if(!S.includes(l))return!1;const i=h[l],Y=V[l];if(F(i)&&F(Y)){if(!M(i,Y))return!1}else if(i!==Y)return!1}for(const l of S)if(!i.includes(l))return!1;return!0}function F(h){return null!==h&&"object"===typeof h}function E(h){const V=[];for(const[i,S]of Object.entries(h))Array.isArray(S)?S.forEach((h=>{V.push(encodeURIComponent(i)+"="+encodeURIComponent(h))})):V.push(encodeURIComponent(i)+"="+encodeURIComponent(S));return V.length?"&"+V.join("&"):""}function H(h){const V={};return h.replace(/^\?/,"").split("&").forEach((h=>{if(h){const[i,S]=h.split("=");V[decodeURIComponent(i)]=decodeURIComponent(S)}})),V}function j(h){const V=h.indexOf("?");if(!V)return"";const i=h.indexOf("#",V);return h.substring(V,i>0?i:void 0)}function m(h,V){const i=new G(h,V);return i.subscribe.bind(i)}class G{constructor(h,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then((()=>{h(this)})).catch((h=>{this.error(h)}))}next(h){this.forEachObserver((V=>{V.next(h)}))}error(h){this.forEachObserver((V=>{V.error(h)})),this.close(h)}complete(){this.forEachObserver((h=>{h.complete()})),this.close()}subscribe(h,V,i){let S;if(void 0===h&&void 0===V&&void 0===i)throw new Error("Missing Observer.");S=function(h,V){if("object"!==typeof h||null===h)return!1;for(const i of V)if(i in h&&"function"===typeof h[i])return!0;return!1}(h,["next","error","complete"])?h:{next:h,error:V,complete:i},void 0===S.next&&(S.next=w),void 0===S.error&&(S.error=w),void 0===S.complete&&(S.complete=w);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch(h){}})),this.observers.push(S),l}unsubscribeOne(h){void 0!==this.observers&&void 0!==this.observers[h]&&(delete this.observers[h],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(h){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,h)}sendOne(h,V){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[h])try{V(this.observers[h])}catch(i){"undefined"!==typeof console&&console.error&&console.error(i)}}))}close(h){this.finalized||(this.finalized=!0,void 0!==h&&(this.finalError=h),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}const N=1e3,r=2,k=144e5,R=.5;function Z(h){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:N)*Math.pow(V,h),S=Math.round(R*i*(Math.random()-.5)*2);return Math.min(k,i+S)}function z(h){return h&&h._delegate?h._delegate:h}},10922:(h,V,i)=>{i.d(V,{d:()=>Y.e,h:()=>vh,j:()=>a,l:()=>ih,p:()=>Sh,s:()=>hh,t:()=>qh,u:()=>Vh,w:()=>Yh,x:()=>lh,z:()=>gh,C:()=>eh,J:()=>th,F:()=>Th,M:()=>sh,Q:()=>ch,R:()=>nh,U:()=>fh});var S=i(10924),l=i(10936),Y=i(10930);let g,q;const B=new WeakMap,J=new WeakMap,I=new WeakMap,v=new WeakMap,s=new WeakMap;let t={get(h,V,i){if(h instanceof IDBTransaction){if("done"===V)return J.get(h);if("objectStoreNames"===V)return h.objectStoreNames||I.get(h);if("store"===V)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return n(h[V])},set:(h,V,i)=>(h[V]=i,!0),has:(h,V)=>h instanceof IDBTransaction&&("done"===V||"store"===V)||V in h};function T(h){return h!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(h)?function(){for(var V=arguments.length,i=new Array(V),S=0;S<V;S++)i[S]=arguments[S];return h.apply(c(this),i),n(B.get(this))}:function(){for(var V=arguments.length,i=new Array(V),S=0;S<V;S++)i[S]=arguments[S];return n(h.apply(c(this),i))}:function(V){for(var i=arguments.length,S=new Array(i>1?i-1:0),l=1;l<i;l++)S[l-1]=arguments[l];const Y=h.call(c(this),V,...S);return I.set(Y,V.sort?V.sort():[V]),n(Y)}}function e(h){return"function"===typeof h?T(h):(h instanceof IDBTransaction&&function(h){if(J.has(h))return;const V=new Promise(((V,i)=>{const S=()=>{h.removeEventListener("complete",l),h.removeEventListener("error",Y),h.removeEventListener("abort",Y)},l=()=>{V(),S()},Y=()=>{i(h.error||new DOMException("AbortError","AbortError")),S()};h.addEventListener("complete",l),h.addEventListener("error",Y),h.addEventListener("abort",Y)}));J.set(h,V)}(h),V=h,(g||(g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((h=>V instanceof h))?new Proxy(h,t):h);var V}function n(h){if(h instanceof IDBRequest)return function(h){const V=new Promise(((V,i)=>{const S=()=>{h.removeEventListener("success",l),h.removeEventListener("error",Y)},l=()=>{V(n(h.result)),S()},Y=()=>{i(h.error),S()};h.addEventListener("success",l),h.addEventListener("error",Y)}));return V.then((V=>{V instanceof IDBCursor&&B.set(V,h)})).catch((()=>{})),s.set(V,h),V}(h);if(v.has(h))return v.get(h);const V=e(h);return V!==h&&(v.set(h,V),s.set(V,h)),V}const c=h=>s.get(h);const f=["get","getKey","getAll","getAllKeys","count"],P=["put","add","delete","clear"],L=new Map;function U(h,V){if(!(h instanceof IDBDatabase)||V in h||"string"!==typeof V)return;if(L.get(V))return L.get(V);const i=V.replace(/FromIndex$/,""),S=V!==i,l=P.includes(i);if(!(i in(S?IDBIndex:IDBObjectStore).prototype)||!l&&!f.includes(i))return;const Y=async function(h){const V=this.transaction(h,l?"readwrite":"readonly");let Y=V.store;for(var g=arguments.length,q=new Array(g>1?g-1:0),B=1;B<g;B++)q[B-1]=arguments[B];return S&&(Y=Y.index(q.shift())),(await Promise.all([Y[i](...q),l&&V.done]))[0]};return L.set(V,Y),Y}t=(h=>({...h,get:(V,i,S)=>U(V,i)||h.get(V,i,S),has:(V,i)=>!!U(V,i)||h.has(V,i)}))(t);class X{constructor(h){this.container=h}getPlatformInfoString(){return this.container.getProviders().map((h=>{if(function(h){const V=h.getComponent();return"VERSION"===(null===V||void 0===V?void 0:V.type)}(h)){const V=h.getImmediate();return`${V.library}/${V.version}`}return null})).filter((h=>h)).join(" ")}}const D="@firebase/app",O="0.9.13",o=new l.e("@firebase/app"),M="@firebase/app-compat",F="@firebase/analytics-compat",E="@firebase/analytics",H="@firebase/app-check-compat",j="@firebase/app-check",m="@firebase/auth",G="@firebase/auth-compat",w="@firebase/database",N="@firebase/database-compat",r="@firebase/functions",k="@firebase/functions-compat",R="@firebase/installations",Z="@firebase/installations-compat",z="@firebase/messaging",d="@firebase/messaging-compat",x="@firebase/performance",y="@firebase/performance-compat",Q="@firebase/remote-config",A="@firebase/remote-config-compat",b="@firebase/storage",C="@firebase/storage-compat",u="@firebase/firestore",p="@firebase/firestore-compat",W="firebase",a="[DEFAULT]",K={[D]:"fire-core",[M]:"fire-core-compat",[E]:"fire-analytics",[F]:"fire-analytics-compat",[j]:"fire-app-check",[H]:"fire-app-check-compat",[m]:"fire-auth",[G]:"fire-auth-compat",[w]:"fire-rtdb",[N]:"fire-rtdb-compat",[r]:"fire-fn",[k]:"fire-fn-compat",[R]:"fire-iid",[Z]:"fire-iid-compat",[z]:"fire-fcm",[d]:"fire-fcm-compat",[x]:"fire-perf",[y]:"fire-perf-compat",[Q]:"fire-rc",[A]:"fire-rc-compat",[b]:"fire-gcs",[C]:"fire-gcs-compat",[u]:"fire-fst",[p]:"fire-fst-compat","fire-js":"fire-js",[W]:"fire-js-all"},hh=new Map,Vh=new Map;function ih(h,V){try{h.container.nB(V)}catch(i){o.debug(`Component ${V.name} failed to register with FirebaseApp ${h.name}`,i)}}function Sh(h,V){h.container.addOrOverwriteComponent(V)}function lh(h){const V=h.name;if(Vh.has(V))return o.debug(`There were multiple attempts to register component ${V}.`),!1;Vh.set(V,h);for(const i of hh.values())ih(i,h);return!0}function Yh(h,V){const i=h.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),h.container.getProvider(V)}function gh(h,V){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;Yh(h,V).clearInstance(i)}function qh(){Vh.clear()}const Bh={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Jh=new Y.d("app","Firebase",Bh);class Ih{constructor(h,V,i){this._isDeleted=!1,this._options=Object.assign({},h),this._config=Object.assign({},V),this._name=V.name,this._automaticDataCollectionEnabled=V.automaticDataCollectionEnabled,this._container=i,this.container.nB(new S.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(h){this.checkDestroyed(),this._automaticDataCollectionEnabled=h}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(h){this._isDeleted=h}checkDestroyed(){if(this.isDeleted)throw Jh.create("app-deleted",{appName:this._name})}}const vh="9.23.0";function sh(h){let V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=h;if("object"!==typeof V){V={name:V}}const l=Object.assign({name:a,automaticDataCollectionEnabled:!1},V),g=l.name;if("string"!==typeof g||!g)throw Jh.create("bad-app-name",{appName:String(g)});if(i||(i=(0,Y.A)()),!i)throw Jh.create("no-options");const q=hh.get(g);if(q){if((0,Y.u)(i,q.options)&&(0,Y.u)(l,q.config))return q;throw Jh.create("duplicate-app",{appName:g})}const B=new S.c(g);for(const S of Vh.values())B.nB(S);const J=new Ih(i,l,B);return hh.set(g,J),J}function th(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const V=hh.get(h);if(!V&&h===a&&(0,Y.A)())return sh();if(!V)throw Jh.create("no-app",{appName:h});return V}function Th(){return Array.from(hh.values())}async function eh(h){const V=h.name;hh.has(V)&&(hh.delete(V),await Promise.all(h.container.getProviders().map((h=>h.delete()))),h.isDeleted=!0)}function nh(h,V,i){var l;let Y=null!==(l=K[h])&&void 0!==l?l:h;i&&(Y+=`-${i}`);const g=Y.match(/\s|\//),q=V.match(/\s|\//);if(g||q){const h=[`Unable to register library "${Y}" with version "${V}":`];return g&&h.push(`library name "${Y}" contains illegal characters (whitespace or "/")`),g&&q&&h.push("and"),q&&h.push(`version name "${V}" contains illegal characters (whitespace or "/")`),void o.warn(h.join(" "))}lh(new S.d(`${Y}-version`,(()=>({library:Y,version:V})),"VERSION"))}function ch(h,V){if(null!==h&&"function"!==typeof h)throw Jh.create("invalid-log-argument");(0,l.h)(h,V)}function fh(h){(0,l.g)(h)}const Ph="firebase-heartbeat-store";let Lh=null;function Uh(){return Lh||(Lh=function(h,V){let{blocked:i,upgrade:S,blocking:l,terminated:Y}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const g=indexedDB.open(h,V),q=n(g);return S&&g.addEventListener("upgradeneeded",(h=>{S(n(g.result),h.oldVersion,h.newVersion,n(g.transaction),h)})),i&&g.addEventListener("blocked",(h=>i(h.oldVersion,h.newVersion,h))),q.then((h=>{Y&&h.addEventListener("close",(()=>Y())),l&&h.addEventListener("versionchange",(h=>l(h.oldVersion,h.newVersion,h)))})).catch((()=>{})),q}("firebase-heartbeat-database",1,{upgrade:(h,V)=>{if(0===V)h.createObjectStore(Ph)}}).catch((h=>{throw Jh.create("idb-open",{originalErrorMessage:h.message})}))),Lh}async function Xh(h,V){try{const i=(await Uh()).transaction(Ph,"readwrite"),S=i.objectStore(Ph);await S.put(V,Dh(h)),await i.done}catch(i){if(i instanceof Y.e)o.warn(i.message);else{const h=Jh.create("idb-set",{originalErrorMessage:null===i||void 0===i?void 0:i.message});o.warn(h.message)}}}function Dh(h){return`${h.name}!${h.options.appId}`}class Oh{constructor(h){this.container=h,this._heartbeatsCache=null;const V=this.container.getProvider("app").getImmediate();this.QI=new Mh(V),this._heartbeatsCachePromise=this.QI.read().then((h=>(this._heartbeatsCache=h,h)))}async triggerHeartbeat(){const h=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),V=oh();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==V&&!this._heartbeatsCache.heartbeats.some((h=>h.date===V)))return this._heartbeatsCache.heartbeats.push({date:V,agent:h}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((h=>{const V=new Date(h.date).valueOf();return Date.now()-V<=2592e6})),this.QI.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const h=oh(),{heartbeatsToSend:V,unsentEntries:i}=function(h){let V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const i=[];let S=h.slice();for(const l of h){const h=i.find((h=>h.agent===l.agent));if(h){if(h.dates.push(l.date),Fh(i)>V){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),Fh(i)>V){i.pop();break}S=S.slice(1)}return{heartbeatsToSend:i,unsentEntries:S}}(this._heartbeatsCache.heartbeats),S=(0,Y.n)(JSON.stringify({version:2,heartbeats:V}));return this._heartbeatsCache.lastSentHeartbeatDate=h,i.length>0?(this._heartbeatsCache.heartbeats=i,await this.QI.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.QI.overwrite(this._heartbeatsCache)),S}}function oh(){return(new Date).toISOString().substring(0,10)}class Mh{constructor(h){this.app=h,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,Y.W)()&&(0,Y.cb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(h){try{const V=await Uh();return await V.transaction(Ph).objectStore(Ph).get(Dh(h))}catch(V){if(V instanceof Y.e)o.warn(V.message);else{const h=Jh.create("idb-get",{originalErrorMessage:null===V||void 0===V?void 0:V.message});o.warn(h.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(h){var V;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xh(this.app,{lastSentHeartbeatDate:null!==(V=h.lastSentHeartbeatDate)&&void 0!==V?V:i.lastSentHeartbeatDate,heartbeats:h.heartbeats})}}async add(h){var V;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xh(this.app,{lastSentHeartbeatDate:null!==(V=h.lastSentHeartbeatDate)&&void 0!==V?V:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...h.heartbeats]})}}}function Fh(h){return(0,Y.n)(JSON.stringify({version:2,heartbeats:h})).length}var Eh;Eh="",lh(new S.d("platform-logger",(h=>new X(h)),"PRIVATE")),lh(new S.d("heartbeat",(h=>new Oh(h)),"PRIVATE")),nh(D,O,Eh),nh(D,O,"esm2017"),nh("fire-js","")},10924:(h,V,i)=>{i.d(V,{c:()=>q,d:()=>l});var S=i(10930);class l{constructor(h,V,i){this.name=h,this.instanceFactory=V,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(h){return this.instantiationMode=h,this}setMultipleInstances(h){return this.multipleInstances=h,this}setServiceProps(h){return this.serviceProps=h,this}setInstanceCreatedCallback(h){return this.onInstanceCreated=h,this}}const Y="[DEFAULT]";class g{constructor(h,V){this.name=h,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(h){const V=this.normalizeInstanceIdentifier(h);if(!this.instancesDeferred.has(V)){const h=new S.c;if(this.instancesDeferred.set(V,h),this.isInitialized(V)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:V});i&&h.resolve(i)}catch(i){}}return this.instancesDeferred.get(V).promise}getImmediate(h){var V;const i=this.normalizeInstanceIdentifier(null===h||void 0===h?void 0:h.identifier),S=null!==(V=null===h||void 0===h?void 0:h.optional)&&void 0!==V&&V;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(S)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(S)return null;throw l}}getComponent(){return this.component}setComponent(h){if(h.name!==this.name)throw Error(`Mismatching Component ${h.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=h,this.shouldAutoInitialize()){if(function(h){return"EAGER"===h.instantiationMode}(h))try{this.getOrInitializeService({instanceIdentifier:Y})}catch(V){}for(const[h,i]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(h);try{const h=this.getOrInitializeService({instanceIdentifier:S});i.resolve(h)}catch(V){}}}}clearInstance(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;this.instancesDeferred.delete(h),this.instancesOptions.delete(h),this.instances.delete(h)}async delete(){const h=Array.from(this.instances.values());await Promise.all([...h.filter((h=>"INTERNAL"in h)).map((h=>h.INTERNAL.delete())),...h.filter((h=>"_delete"in h)).map((h=>h._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instances.has(h)}getOptions(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instancesOptions.get(h)||{}}initialize(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:V={}}=h,i=this.normalizeInstanceIdentifier(h.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const S=this.getOrInitializeService({instanceIdentifier:i,options:V});for(const[l,Y]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(l)&&Y.resolve(S)}return S}XI(h,V){var i;const S=this.normalizeInstanceIdentifier(V),l=null!==(i=this.onInitCallbacks.get(S))&&void 0!==i?i:new Set;l.add(h),this.onInitCallbacks.set(S,l);const Y=this.instances.get(S);return Y&&h(Y,S),()=>{l.delete(h)}}invokeOnInitCallbacks(h,V){const i=this.onInitCallbacks.get(V);if(i)for(const l of i)try{l(h,V)}catch(S){}}getOrInitializeService(h){let{instanceIdentifier:V,options:i={}}=h,S=this.instances.get(V);if(!S&&this.component&&(S=this.component.instanceFactory(this.container,{instanceIdentifier:(l=V,l===Y?void 0:l),options:i}),this.instances.set(V,S),this.instancesOptions.set(V,i),this.invokeOnInitCallbacks(S,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,S)}catch(g){}var l;return S||null}normalizeInstanceIdentifier(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.component?this.component.multipleInstances?h:Y:h}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class q{constructor(h){this.name=h,this.providers=new Map}nB(h){const V=this.getProvider(h.name);if(V.isComponentSet())throw new Error(`Component ${h.name} has already been registered with ${this.name}`);V.setComponent(h)}addOrOverwriteComponent(h){this.getProvider(h.name).isComponentSet()&&this.providers.delete(h.name),this.nB(h)}getProvider(h){if(this.providers.has(h))return this.providers.get(h);const V=new g(h,this);return this.providers.set(h,V),V}getProviders(){return Array.from(this.providers.values())}}},10936:(h,V,i)=>{i.d(V,{c:()=>l,e:()=>J,g:()=>I,h:()=>v});const S=[];var l;!function(h){h[h.DEBUG=0]="DEBUG",h[h.VERBOSE=1]="VERBOSE",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.SILENT=5]="SILENT"}(l||(l={}));const Y={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},g=l.INFO,q={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},B=function(h,V){if(V<h.logLevel)return;const i=(new Date).toISOString(),S=q[V];if(!S)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);for(var l=arguments.length,Y=new Array(l>2?l-2:0),g=2;g<l;g++)Y[g-2]=arguments[g];console[S](`[${i}]  ${h.name}:`,...Y)};class J{constructor(h){this.name=h,this._logLevel=g,this._logHandler=B,this._userLogHandler=null,S.push(this)}get logLevel(){return this._logLevel}set logLevel(h){if(!(h in l))throw new TypeError(`Invalid value "${h}" assigned to \`logLevel\``);this._logLevel=h}setLogLevel(h){this._logLevel="string"===typeof h?Y[h]:h}get logHandler(){return this._logHandler}set logHandler(h){if("function"!==typeof h)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=h}get userLogHandler(){return this._userLogHandler}set userLogHandler(h){this._userLogHandler=h}debug(){for(var h=arguments.length,V=new Array(h),i=0;i<h;i++)V[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...V),this._logHandler(this,l.DEBUG,...V)}log(){for(var h=arguments.length,V=new Array(h),i=0;i<h;i++)V[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...V),this._logHandler(this,l.VERBOSE,...V)}info(){for(var h=arguments.length,V=new Array(h),i=0;i<h;i++)V[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,l.INFO,...V),this._logHandler(this,l.INFO,...V)}warn(){for(var h=arguments.length,V=new Array(h),i=0;i<h;i++)V[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,l.WARN,...V),this._logHandler(this,l.WARN,...V)}error(){for(var h=arguments.length,V=new Array(h),i=0;i<h;i++)V[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,l.ERROR,...V),this._logHandler(this,l.ERROR,...V)}}function I(h){S.forEach((V=>{V.setLogLevel(h)}))}function v(h,V){for(const i of S){let S=null;V&&V.level&&(S=Y[V.level]),i.userLogHandler=null===h?null:function(V,i){for(var Y=arguments.length,g=new Array(Y>2?Y-2:0),q=2;q<Y;q++)g[q-2]=arguments[q];const B=g.map((h=>{if(null==h)return null;if("string"===typeof h)return h;if("number"===typeof h||"boolean"===typeof h)return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch(V){return null}})).filter((h=>h)).join(" ");i>=(null!==S&&void 0!==S?S:V.logLevel)&&h({level:l[i].toLowerCase(),message:B,args:g,type:V.name})}}}}}]);