/*! For license information please see 86dvjm.5.02e9ccd1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10599:(v,y,n)=>{n.d(y,{B:()=>Z,C:()=>f,D:()=>p,F:()=>i,G:()=>c,H:()=>d,L:()=>E,M:()=>W,N:()=>g,O:()=>h,Q:()=>G,S:()=>t,U:()=>s,b:()=>N,f:()=>u,g:()=>r,h:()=>C,j:()=>Y,m:()=>b,q:()=>V,u:()=>F,v:()=>q,x:()=>R,z:()=>x});const B=function(v){const y=[];let n=0;for(let B=0;B<v.length;B++){let J=v.charCodeAt(B);J<128?y[n++]=J:J<2048?(y[n++]=J>>6|192,y[n++]=63&J|128):55296===(64512&J)&&B+1<v.length&&56320===(64512&v.charCodeAt(B+1))?(J=65536+((1023&J)<<10)+(1023&v.charCodeAt(++B)),y[n++]=J>>18|240,y[n++]=J>>12&63|128,y[n++]=J>>6&63|128,y[n++]=63&J|128):(y[n++]=J>>12|224,y[n++]=J>>6&63|128,y[n++]=63&J|128)}return y},J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(v,y){if(!Array.isArray(v))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=y?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let J=0;J<v.length;J+=3){const y=v[J],P=J+1<v.length,b=P?v[J+1]:0,Y=J+2<v.length,l=Y?v[J+2]:0,a=y>>2,Z=(3&y)<<4|b>>4;let x=(15&b)<<2|l>>6,f=63&l;Y||(f=64,P||(x=64)),B.push(n[a],n[Z],n[x],n[f])}return B.join("")},encodeString(v,y){return this.HAS_NATIVE_SUPPORT&&!y?btoa(v):this.encodeByteArray(B(v),y)},decodeString(v,y){return this.HAS_NATIVE_SUPPORT&&!y?atob(v):function(v){const y=[];let n=0,B=0;for(;n<v.length;){const J=v[n++];if(J<128)y[B++]=String.fromCharCode(J);else if(J>191&&J<224){const P=v[n++];y[B++]=String.fromCharCode((31&J)<<6|63&P)}else if(J>239&&J<365){const P=((7&J)<<18|(63&v[n++])<<12|(63&v[n++])<<6|63&v[n++])-65536;y[B++]=String.fromCharCode(55296+(P>>10)),y[B++]=String.fromCharCode(56320+(1023&P))}else{const P=v[n++],b=v[n++];y[B++]=String.fromCharCode((15&J)<<12|(63&P)<<6|63&b)}}return y.join("")}(this.decodeStringToByteArray(v,y))},decodeStringToByteArray(v,y){this.init_();const n=y?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let J=0;J<v.length;){const y=n[v.charAt(J++)],b=J<v.length?n[v.charAt(J)]:0;++J;const Y=J<v.length?n[v.charAt(J)]:64;++J;const l=J<v.length?n[v.charAt(J)]:64;if(++J,null==y||null==b||null==Y||null==l)throw new P;const a=y<<2|b>>4;if(B.push(a),64!==Y){const v=b<<4&240|Y>>2;if(B.push(v),64!==l){const v=Y<<6&192|l;B.push(v)}}}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let v=0;v<this.ENCODED_VALS.length;v++)this.byteToCharMap_[v]=this.ENCODED_VALS.charAt(v),this.charToByteMap_[this.byteToCharMap_[v]]=v,this.byteToCharMapWebSafe_[v]=this.ENCODED_VALS_WEBSAFE.charAt(v),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[v]]=v,v>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(v)]=v,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(v)]=v)}}};class P extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b=function(v){return function(v){const y=B(v);return J.encodeByteArray(y,!0)}(v).replace(/\./g,"")},Y=function(v){try{return J.decodeString(v,!0)}catch(y){console.error("base64Decode failed: ",y)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,a=()=>{try{return l()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let v;try{v=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const y=v&&Y(v[1]);return y&&JSON.parse(y)})()}catch(v){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${v}`)}},Z=v=>{var y,n;return null===(n=null===(y=a())||void 0===y?void 0:y.emulatorHosts)||void 0===n?void 0:n[v]},x=()=>{var v;return null===(v=a())||void 0===v?void 0:v.config},f=v=>{var y;return null===(y=a())||void 0===y?void 0:y[`_${v}`]};class N{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((v,y)=>{this.resolve=v,this.reject=y}))}wrapCallback(v){return(y,n)=>{y?this.reject(y):this.resolve(n),"function"===typeof v&&(this.promise.catch((()=>{})),1===v.length?v(y):v(y,n))}}}function i(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(i())}function c(){const v="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof v&&void 0!==v.id}function h(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){const v=i();return v.indexOf("MSIE ")>=0||v.indexOf("Trident/")>=0}function W(){try{return"object"===typeof indexedDB}catch(v){return!1}}function s(){return new Promise(((v,y)=>{try{let n=!0;const B="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(B);J.onsuccess=()=>{J.result.close(),n||self.indexedDB.deleteDatabase(B),v(!0)},J.onupgradeneeded=()=>{n=!1},J.onerror=()=>{var v;y((null===(v=J.error)||void 0===v?void 0:v.message)||"")}}catch(n){y(n)}}))}function C(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class r extends Error{constructor(v,y,n){super(y),this.code=v,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,u.prototype.create)}}class u{constructor(v,y,n){this.service=v,this.serviceName=y,this.errors=n}create(v){const y=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${v}`,B=this.errors[v],J=B?function(v,y){return v.replace(O,((v,n)=>{const B=y[n];return null!=B?String(B):`<${n}?>`}))}(B,y):"Error",P=`${this.serviceName}: ${J} (${n}).`;return new r(n,P,y)}}const O=/\{\$([^}]+)}/g;function d(v){for(const y in v)if(Object.prototype.hasOwnProperty.call(v,y))return!1;return!0}function q(v,y){if(v===y)return!0;const n=Object.keys(v),B=Object.keys(y);for(const J of n){if(!B.includes(J))return!1;const n=v[J],P=y[J];if(L(n)&&L(P)){if(!q(n,P))return!1}else if(n!==P)return!1}for(const J of B)if(!n.includes(J))return!1;return!0}function L(v){return null!==v&&"object"===typeof v}function t(v){const y=[];for(const[n,B]of Object.entries(v))Array.isArray(B)?B.forEach((v=>{y.push(encodeURIComponent(n)+"="+encodeURIComponent(v))})):y.push(encodeURIComponent(n)+"="+encodeURIComponent(B));return y.length?"&"+y.join("&"):""}function G(v){const y={};return v.replace(/^\?/,"").split("&").forEach((v=>{if(v){const[n,B]=v.split("=");y[decodeURIComponent(n)]=decodeURIComponent(B)}})),y}function R(v){const y=v.indexOf("?");if(!y)return"";const n=v.indexOf("#",y);return v.substring(y,n>0?n:void 0)}function F(v,y){const n=new S(v,y);return n.subscribe.bind(n)}class S{constructor(v,y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=y,this.task.then((()=>{v(this)})).catch((v=>{this.error(v)}))}next(v){this.forEachObserver((y=>{y.next(v)}))}error(v){this.forEachObserver((y=>{y.error(v)})),this.close(v)}complete(){this.forEachObserver((v=>{v.complete()})),this.close()}subscribe(v,y,n){let B;if(void 0===v&&void 0===y&&void 0===n)throw new Error("Missing Observer.");B=function(v,y){if("object"!==typeof v||null===v)return!1;for(const n of y)if(n in v&&"function"===typeof v[n])return!0;return!1}(v,["next","error","complete"])?v:{next:v,error:y,complete:n},void 0===B.next&&(B.next=w),void 0===B.error&&(B.error=w),void 0===B.complete&&(B.complete=w);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch(v){}})),this.observers.push(B),J}unsubscribeOne(v){void 0!==this.observers&&void 0!==this.observers[v]&&(delete this.observers[v],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(v){if(!this.finalized)for(let y=0;y<this.observers.length;y++)this.sendOne(y,v)}sendOne(v,y){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[v])try{y(this.observers[v])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(v){this.finalized||(this.finalized=!0,void 0!==v&&(this.finalError=v),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function w(){}const k=1e3,M=2,I=144e5,j=.5;function V(v){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:k)*Math.pow(y,v),B=Math.round(j*n*(Math.random()-.5)*2);return Math.min(I,n+B)}function p(v){return v&&v._delegate?v._delegate:v}},10587:(v,y,n)=>{n.d(y,{b:()=>P.g,e:()=>xv,i:()=>T,l:()=>nv,n:()=>Bv,o:()=>vv,r:()=>Yv,s:()=>yv,v:()=>Pv,y:()=>Jv,C:()=>bv,D:()=>gv,G:()=>Nv,F:()=>iv,I:()=>fv,L:()=>hv,O:()=>cv,P:()=>Ev});var B=n(10592),J=n(10604),P=n(10599);let b,Y;const l=new WeakMap,a=new WeakMap,Z=new WeakMap,x=new WeakMap,f=new WeakMap;let N={get(v,y,n){if(v instanceof IDBTransaction){if("done"===y)return a.get(v);if("objectStoreNames"===y)return v.objectStoreNames||Z.get(v);if("store"===y)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return c(v[y])},set:(v,y,n)=>(v[y]=n,!0),has:(v,y)=>v instanceof IDBTransaction&&("done"===y||"store"===y)||y in v};function i(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Y||(Y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(v)?function(){for(var y=arguments.length,n=new Array(y),B=0;B<y;B++)n[B]=arguments[B];return v.apply(h(this),n),c(l.get(this))}:function(){for(var y=arguments.length,n=new Array(y),B=0;B<y;B++)n[B]=arguments[B];return c(v.apply(h(this),n))}:function(y){for(var n=arguments.length,B=new Array(n>1?n-1:0),J=1;J<n;J++)B[J-1]=arguments[J];const P=v.call(h(this),y,...B);return Z.set(P,y.sort?y.sort():[y]),c(P)}}function g(v){return"function"===typeof v?i(v):(v instanceof IDBTransaction&&function(v){if(a.has(v))return;const y=new Promise(((y,n)=>{const B=()=>{v.removeEventListener("complete",J),v.removeEventListener("error",P),v.removeEventListener("abort",P)},J=()=>{y(),B()},P=()=>{n(v.error||new DOMException("AbortError","AbortError")),B()};v.addEventListener("complete",J),v.addEventListener("error",P),v.addEventListener("abort",P)}));a.set(v,y)}(v),y=v,(b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((v=>y instanceof v))?new Proxy(v,N):v);var y}function c(v){if(v instanceof IDBRequest)return function(v){const y=new Promise(((y,n)=>{const B=()=>{v.removeEventListener("success",J),v.removeEventListener("error",P)},J=()=>{y(c(v.result)),B()},P=()=>{n(v.error),B()};v.addEventListener("success",J),v.addEventListener("error",P)}));return y.then((y=>{y instanceof IDBCursor&&l.set(y,v)})).catch((()=>{})),f.set(y,v),y}(v);if(x.has(v))return x.get(v);const y=g(v);return y!==v&&(x.set(v,y),f.set(y,v)),y}const h=v=>f.get(v);const E=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],s=new Map;function C(v,y){if(!(v instanceof IDBDatabase)||y in v||"string"!==typeof y)return;if(s.get(y))return s.get(y);const n=y.replace(/FromIndex$/,""),B=y!==n,J=W.includes(n);if(!(n in(B?IDBIndex:IDBObjectStore).prototype)||!J&&!E.includes(n))return;const P=async function(v){const y=this.transaction(v,J?"readwrite":"readonly");let P=y.store;for(var b=arguments.length,Y=new Array(b>1?b-1:0),l=1;l<b;l++)Y[l-1]=arguments[l];return B&&(P=P.index(Y.shift())),(await Promise.all([P[n](...Y),J&&y.done]))[0]};return s.set(y,P),P}N=(v=>({...v,get:(y,n,B)=>C(y,n)||v.get(y,n,B),has:(y,n)=>!!C(y,n)||v.has(y,n)}))(N);class r{constructor(v){this.container=v}getPlatformInfoString(){return this.container.getProviders().map((v=>{if(function(v){const y=v.getComponent();return"VERSION"===(null===y||void 0===y?void 0:y.type)}(v)){const y=v.getImmediate();return`${y.library}/${y.version}`}return null})).filter((v=>v)).join(" ")}}const u="@firebase/app",O="0.9.13",d=new J.e("@firebase/app"),q="@firebase/app-compat",L="@firebase/analytics-compat",t="@firebase/analytics",G="@firebase/app-check-compat",R="@firebase/app-check",F="@firebase/auth",S="@firebase/auth-compat",w="@firebase/database",k="@firebase/database-compat",M="@firebase/functions",I="@firebase/functions-compat",j="@firebase/installations",V="@firebase/installations-compat",p="@firebase/messaging",H="@firebase/messaging-compat",A="@firebase/performance",X="@firebase/performance-compat",U="@firebase/remote-config",z="@firebase/remote-config-compat",e="@firebase/storage",K="@firebase/storage-compat",D="@firebase/firestore",Q="@firebase/firestore-compat",o="firebase",T="[DEFAULT]",m={[u]:"fire-core",[q]:"fire-core-compat",[t]:"fire-analytics",[L]:"fire-analytics-compat",[R]:"fire-app-check",[G]:"fire-app-check-compat",[F]:"fire-auth",[S]:"fire-auth-compat",[w]:"fire-rtdb",[k]:"fire-rtdb-compat",[M]:"fire-fn",[I]:"fire-fn-compat",[j]:"fire-iid",[V]:"fire-iid-compat",[p]:"fire-fcm",[H]:"fire-fcm-compat",[A]:"fire-perf",[X]:"fire-perf-compat",[U]:"fire-rc",[z]:"fire-rc-compat",[e]:"fire-gcs",[K]:"fire-gcs-compat",[D]:"fire-fst",[Q]:"fire-fst-compat","fire-js":"fire-js",[o]:"fire-js-all"},vv=new Map,yv=new Map;function nv(v,y){try{v.container.Ff(y)}catch(n){d.debug(`Component ${y.name} failed to register with FirebaseApp ${v.name}`,n)}}function Bv(v,y){v.container.addOrOverwriteComponent(y)}function Jv(v){const y=v.name;if(yv.has(y))return d.debug(`There were multiple attempts to register component ${y}.`),!1;yv.set(y,v);for(const n of vv.values())nv(n,v);return!0}function Pv(v,y){const n=v.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),v.container.getProvider(y)}function bv(v,y){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;Pv(v,y).clearInstance(n)}function Yv(){yv.clear()}const lv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},av=new P.f("app","Firebase",lv);class Zv{constructor(v,y,n){this._isDeleted=!1,this._options=Object.assign({},v),this._config=Object.assign({},y),this._name=y.name,this._automaticDataCollectionEnabled=y.automaticDataCollectionEnabled,this._container=n,this.container.Ff(new B.f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(v){this.checkDestroyed(),this._automaticDataCollectionEnabled=v}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(v){this._isDeleted=v}checkDestroyed(){if(this.isDeleted)throw av.create("app-deleted",{appName:this._name})}}const xv="9.23.0";function fv(v){let y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v;if("object"!==typeof y){y={name:y}}const J=Object.assign({name:T,automaticDataCollectionEnabled:!1},y),b=J.name;if("string"!==typeof b||!b)throw av.create("bad-app-name",{appName:String(b)});if(n||(n=(0,P.z)()),!n)throw av.create("no-options");const Y=vv.get(b);if(Y){if((0,P.v)(n,Y.options)&&(0,P.v)(J,Y.config))return Y;throw av.create("duplicate-app",{appName:b})}const l=new B.b(b);for(const B of yv.values())l.Ff(B);const a=new Zv(n,J,l);return vv.set(b,a),a}function Nv(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;const y=vv.get(v);if(!y&&v===T&&(0,P.z)())return fv();if(!y)throw av.create("no-app",{appName:v});return y}function iv(){return Array.from(vv.values())}async function gv(v){const y=v.name;vv.has(y)&&(vv.delete(y),await Promise.all(v.container.getProviders().map((v=>v.delete()))),v.isDeleted=!0)}function cv(v,y,n){var J;let P=null!==(J=m[v])&&void 0!==J?J:v;n&&(P+=`-${n}`);const b=P.match(/\s|\//),Y=y.match(/\s|\//);if(b||Y){const v=[`Unable to register library "${P}" with version "${y}":`];return b&&v.push(`library name "${P}" contains illegal characters (whitespace or "/")`),b&&Y&&v.push("and"),Y&&v.push(`version name "${y}" contains illegal characters (whitespace or "/")`),void d.warn(v.join(" "))}Jv(new B.f(`${P}-version`,(()=>({library:P,version:y})),"VERSION"))}function hv(v,y){if(null!==v&&"function"!==typeof v)throw av.create("invalid-log-argument");(0,J.i)(v,y)}function Ev(v){(0,J.f)(v)}const Wv="firebase-heartbeat-store";let sv=null;function Cv(){return sv||(sv=function(v,y){let{blocked:n,upgrade:B,blocking:J,terminated:P}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const b=indexedDB.open(v,y),Y=c(b);return B&&b.addEventListener("upgradeneeded",(v=>{B(c(b.result),v.oldVersion,v.newVersion,c(b.transaction),v)})),n&&b.addEventListener("blocked",(v=>n(v.oldVersion,v.newVersion,v))),Y.then((v=>{P&&v.addEventListener("close",(()=>P())),J&&v.addEventListener("versionchange",(v=>J(v.oldVersion,v.newVersion,v)))})).catch((()=>{})),Y}("firebase-heartbeat-database",1,{upgrade:(v,y)=>{if(0===y)v.createObjectStore(Wv)}}).catch((v=>{throw av.create("idb-open",{originalErrorMessage:v.message})}))),sv}async function rv(v,y){try{const n=(await Cv()).transaction(Wv,"readwrite"),B=n.objectStore(Wv);await B.put(y,uv(v)),await n.done}catch(n){if(n instanceof P.g)d.warn(n.message);else{const v=av.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});d.warn(v.message)}}}function uv(v){return`${v.name}!${v.options.appId}`}class Ov{constructor(v){this.container=v,this._heartbeatsCache=null;const y=this.container.getProvider("app").getImmediate();this.Qi=new qv(y),this._heartbeatsCachePromise=this.Qi.read().then((v=>(this._heartbeatsCache=v,v)))}async triggerHeartbeat(){const v=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),y=dv();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==y&&!this._heartbeatsCache.heartbeats.some((v=>v.date===y)))return this._heartbeatsCache.heartbeats.push({date:y,agent:v}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((v=>{const y=new Date(v.date).valueOf();return Date.now()-y<=2592e6})),this.Qi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const v=dv(),{heartbeatsToSend:y,unsentEntries:n}=function(v){let y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let B=v.slice();for(const J of v){const v=n.find((v=>v.agent===J.agent));if(v){if(v.dates.push(J.date),Lv(n)>y){v.dates.pop();break}}else if(n.push({agent:J.agent,dates:[J.date]}),Lv(n)>y){n.pop();break}B=B.slice(1)}return{heartbeatsToSend:n,unsentEntries:B}}(this._heartbeatsCache.heartbeats),B=(0,P.m)(JSON.stringify({version:2,heartbeats:y}));return this._heartbeatsCache.lastSentHeartbeatDate=v,n.length>0?(this._heartbeatsCache.heartbeats=n,await this.Qi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Qi.overwrite(this._heartbeatsCache)),B}}function dv(){return(new Date).toISOString().substring(0,10)}class qv{constructor(v){this.app=v,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,P.M)()&&(0,P.U)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(v){try{const y=await Cv();return await y.transaction(Wv).objectStore(Wv).get(uv(v))}catch(y){if(y instanceof P.g)d.warn(y.message);else{const v=av.create("idb-get",{originalErrorMessage:null===y||void 0===y?void 0:y.message});d.warn(v.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(v){var y;if(await this._canUseIndexedDBPromise){const n=await this.read();return rv(this.app,{lastSentHeartbeatDate:null!==(y=v.lastSentHeartbeatDate)&&void 0!==y?y:n.lastSentHeartbeatDate,heartbeats:v.heartbeats})}}async add(v){var y;if(await this._canUseIndexedDBPromise){const n=await this.read();return rv(this.app,{lastSentHeartbeatDate:null!==(y=v.lastSentHeartbeatDate)&&void 0!==y?y:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...v.heartbeats]})}}}function Lv(v){return(0,P.m)(JSON.stringify({version:2,heartbeats:v})).length}var tv;tv="",Jv(new B.f("platform-logger",(v=>new r(v)),"PRIVATE")),Jv(new B.f("heartbeat",(v=>new Ov(v)),"PRIVATE")),cv(u,O,tv),cv(u,O,"esm2017"),cv("fire-js","")},10592:(v,y,n)=>{n.d(y,{b:()=>Y,f:()=>J});var B=n(10599);class J{constructor(v,y,n){this.name=v,this.instanceFactory=y,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(v){return this.instantiationMode=v,this}setMultipleInstances(v){return this.multipleInstances=v,this}setServiceProps(v){return this.serviceProps=v,this}setInstanceCreatedCallback(v){return this.onInstanceCreated=v,this}}const P="[DEFAULT]";class b{constructor(v,y){this.name=v,this.container=y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(v){const y=this.normalizeInstanceIdentifier(v);if(!this.instancesDeferred.has(y)){const v=new B.b;if(this.instancesDeferred.set(y,v),this.isInitialized(y)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:y});n&&v.resolve(n)}catch(n){}}return this.instancesDeferred.get(y).promise}getImmediate(v){var y;const n=this.normalizeInstanceIdentifier(null===v||void 0===v?void 0:v.identifier),B=null!==(y=null===v||void 0===v?void 0:v.optional)&&void 0!==y&&y;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(B)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(J){if(B)return null;throw J}}getComponent(){return this.component}setComponent(v){if(v.name!==this.name)throw Error(`Mismatching Component ${v.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=v,this.shouldAutoInitialize()){if(function(v){return"EAGER"===v.instantiationMode}(v))try{this.getOrInitializeService({instanceIdentifier:P})}catch(y){}for(const[v,n]of this.instancesDeferred.entries()){const B=this.normalizeInstanceIdentifier(v);try{const v=this.getOrInitializeService({instanceIdentifier:B});n.resolve(v)}catch(y){}}}}clearInstance(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;this.instancesDeferred.delete(v),this.instancesOptions.delete(v),this.instances.delete(v)}async delete(){const v=Array.from(this.instances.values());await Promise.all([...v.filter((v=>"INTERNAL"in v)).map((v=>v.INTERNAL.delete())),...v.filter((v=>"_delete"in v)).map((v=>v._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instances.has(v)}getOptions(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instancesOptions.get(v)||{}}initialize(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:y={}}=v,n=this.normalizeInstanceIdentifier(v.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const B=this.getOrInitializeService({instanceIdentifier:n,options:y});for(const[J,P]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(J)&&P.resolve(B)}return B}ui(v,y){var n;const B=this.normalizeInstanceIdentifier(y),J=null!==(n=this.onInitCallbacks.get(B))&&void 0!==n?n:new Set;J.add(v),this.onInitCallbacks.set(B,J);const P=this.instances.get(B);return P&&v(P,B),()=>{J.delete(v)}}invokeOnInitCallbacks(v,y){const n=this.onInitCallbacks.get(y);if(n)for(const J of n)try{J(v,y)}catch(B){}}getOrInitializeService(v){let{instanceIdentifier:y,options:n={}}=v,B=this.instances.get(y);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(J=y,J===P?void 0:J),options:n}),this.instances.set(y,B),this.instancesOptions.set(y,n),this.invokeOnInitCallbacks(B,y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,y,B)}catch(b){}var J;return B||null}normalizeInstanceIdentifier(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.component?this.component.multipleInstances?v:P:v}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(v){this.name=v,this.providers=new Map}Ff(v){const y=this.getProvider(v.name);if(y.isComponentSet())throw new Error(`Component ${v.name} has already been registered with ${this.name}`);y.setComponent(v)}addOrOverwriteComponent(v){this.getProvider(v.name).isComponentSet()&&this.providers.delete(v.name),this.Ff(v)}getProvider(v){if(this.providers.has(v))return this.providers.get(v);const y=new b(v,this);return this.providers.set(v,y),y}getProviders(){return Array.from(this.providers.values())}}},10604:(v,y,n)=>{n.d(y,{b:()=>J,e:()=>a,f:()=>Z,i:()=>x});const B=[];var J;!function(v){v[v.DEBUG=0]="DEBUG",v[v.VERBOSE=1]="VERBOSE",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.SILENT=5]="SILENT"}(J||(J={}));const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},b=J.INFO,Y={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},l=function(v,y){if(y<v.logLevel)return;const n=(new Date).toISOString(),B=Y[y];if(!B)throw new Error(`Attempted to log a message with an invalid logType (value: ${y})`);for(var J=arguments.length,P=new Array(J>2?J-2:0),b=2;b<J;b++)P[b-2]=arguments[b];console[B](`[${n}]  ${v.name}:`,...P)};class a{constructor(v){this.name=v,this._logLevel=b,this._logHandler=l,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(v){if(!(v in J))throw new TypeError(`Invalid value "${v}" assigned to \`logLevel\``);this._logLevel=v}setLogLevel(v){this._logLevel="string"===typeof v?P[v]:v}get logHandler(){return this._logHandler}set logHandler(v){if("function"!==typeof v)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=v}get userLogHandler(){return this._userLogHandler}set userLogHandler(v){this._userLogHandler=v}debug(){for(var v=arguments.length,y=new Array(v),n=0;n<v;n++)y[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...y),this._logHandler(this,J.DEBUG,...y)}log(){for(var v=arguments.length,y=new Array(v),n=0;n<v;n++)y[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...y),this._logHandler(this,J.VERBOSE,...y)}info(){for(var v=arguments.length,y=new Array(v),n=0;n<v;n++)y[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,J.INFO,...y),this._logHandler(this,J.INFO,...y)}warn(){for(var v=arguments.length,y=new Array(v),n=0;n<v;n++)y[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,J.WARN,...y),this._logHandler(this,J.WARN,...y)}error(){for(var v=arguments.length,y=new Array(v),n=0;n<v;n++)y[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,J.ERROR,...y),this._logHandler(this,J.ERROR,...y)}}function Z(v){B.forEach((y=>{y.setLogLevel(v)}))}function x(v,y){for(const n of B){let B=null;y&&y.level&&(B=P[y.level]),n.userLogHandler=null===v?null:function(y,n){for(var P=arguments.length,b=new Array(P>2?P-2:0),Y=2;Y<P;Y++)b[Y-2]=arguments[Y];const l=b.map((v=>{if(null==v)return null;if("string"===typeof v)return v;if("number"===typeof v||"boolean"===typeof v)return v.toString();if(v instanceof Error)return v.message;try{return JSON.stringify(v)}catch(y){return null}})).filter((v=>v)).join(" ");n>=(null!==B&&void 0!==B?B:y.logLevel)&&v({level:J[n].toLowerCase(),message:l,args:b,type:y.name})}}}}}]);