/*! For license information please see nrkk14.5.75a29fe9.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10549:(d,t,A)=>{A.d(t,{$:()=>Z,B:()=>D,D:()=>k,F:()=>K,H:()=>Q,J:()=>J,L:()=>j,N:()=>T,O:()=>F,P:()=>P,T:()=>U,X:()=>L,b:()=>b,c:()=>v,cb:()=>q,g:()=>f,h:()=>H,i:()=>X,k:()=>B,n:()=>r,o:()=>u,p:()=>n,t:()=>I,x:()=>i});const w=function(d){const t=[];let A=0;for(let w=0;w<d.length;w++){let N=d.charCodeAt(w);N<128?t[A++]=N:N<2048?(t[A++]=N>>6|192,t[A++]=63&N|128):55296===(64512&N)&&w+1<d.length&&56320===(64512&d.charCodeAt(w+1))?(N=65536+((1023&N)<<10)+(1023&d.charCodeAt(++w)),t[A++]=N>>18|240,t[A++]=N>>12&63|128,t[A++]=N>>6&63|128,t[A++]=63&N|128):(t[A++]=N>>12|224,t[A++]=N>>6&63|128,t[A++]=63&N|128)}return t},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(d,t){if(!Array.isArray(d))throw Error("encodeByteArray takes an array as a parameter");this.init_();const A=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let N=0;N<d.length;N+=3){const t=d[N],p=N+1<d.length,B=p?d[N+1]:0,X=N+2<d.length,W=X?d[N+2]:0,a=t>>2,D=(3&t)<<4|B>>4;let i=(15&B)<<2|W>>6,k=63&W;X||(k=64,p||(i=64)),w.push(A[a],A[D],A[i],A[k])}return w.join("")},encodeString(d,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(d):this.encodeByteArray(w(d),t)},decodeString(d,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(d):function(d){const t=[];let A=0,w=0;for(;A<d.length;){const N=d[A++];if(N<128)t[w++]=String.fromCharCode(N);else if(N>191&&N<224){const p=d[A++];t[w++]=String.fromCharCode((31&N)<<6|63&p)}else if(N>239&&N<365){const p=((7&N)<<18|(63&d[A++])<<12|(63&d[A++])<<6|63&d[A++])-65536;t[w++]=String.fromCharCode(55296+(p>>10)),t[w++]=String.fromCharCode(56320+(1023&p))}else{const p=d[A++],B=d[A++];t[w++]=String.fromCharCode((15&N)<<12|(63&p)<<6|63&B)}}return t.join("")}(this.decodeStringToByteArray(d,t))},decodeStringToByteArray(d,t){this.init_();const A=t?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let N=0;N<d.length;){const t=A[d.charAt(N++)],B=N<d.length?A[d.charAt(N)]:0;++N;const X=N<d.length?A[d.charAt(N)]:64;++N;const W=N<d.length?A[d.charAt(N)]:64;if(++N,null==t||null==B||null==X||null==W)throw new p;const a=t<<2|B>>4;if(w.push(a),64!==X){const d=B<<4&240|X>>2;if(w.push(d),64!==W){const d=X<<6&192|W;w.push(d)}}}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let d=0;d<this.ENCODED_VALS.length;d++)this.byteToCharMap_[d]=this.ENCODED_VALS.charAt(d),this.charToByteMap_[this.byteToCharMap_[d]]=d,this.byteToCharMapWebSafe_[d]=this.ENCODED_VALS_WEBSAFE.charAt(d),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[d]]=d,d>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(d)]=d,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(d)]=d)}}};class p extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B=function(d){return function(d){const t=w(d);return N.encodeByteArray(t,!0)}(d).replace(/\./g,"")},X=function(d){try{return N.decodeString(d,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const W=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof A.g)return A.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,a=()=>{try{return W()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let d;try{d=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(A){return}const t=d&&X(d[1]);return t&&JSON.parse(t)})()}catch(d){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${d}`)}},D=d=>{var t,A;return null===(A=null===(t=a())||void 0===t?void 0:t.emulatorHosts)||void 0===A?void 0:A[d]},i=()=>{var d;return null===(d=a())||void 0===d?void 0:d.config},k=d=>{var t;return null===(t=a())||void 0===t?void 0:t[`_${d}`]};class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((d,t)=>{this.resolve=d,this.reject=t}))}wrapCallback(d){return(t,A)=>{t?this.reject(t):this.resolve(A),"function"===typeof d&&(this.promise.catch((()=>{})),1===d.length?d(t):d(t,A))}}}function Q(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function P(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function J(){const d="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof d&&void 0!==d.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const d=Q();return d.indexOf("MSIE ")>=0||d.indexOf("Trident/")>=0}function F(){try{return"object"===typeof indexedDB}catch(d){return!1}}function q(){return new Promise(((d,t)=>{try{let A=!0;const w="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(w);N.onsuccess=()=>{N.result.close(),A||self.indexedDB.deleteDatabase(w),d(!0)},N.onupgradeneeded=()=>{A=!1},N.onerror=()=>{var d;t((null===(d=N.error)||void 0===d?void 0:d.message)||"")}}catch(A){t(A)}}))}function H(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class f extends Error{constructor(d,t,A){super(t),this.code=d,this.customData=A,this.name="FirebaseError",Object.setPrototypeOf(this,f.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(d,t,A){this.service=d,this.serviceName=t,this.errors=A}create(d){const t=(arguments.length<=1?void 0:arguments[1])||{},A=`${this.service}/${d}`,w=this.errors[d],N=w?function(d,t){return d.replace(m,((d,A)=>{const w=t[A];return null!=w?String(w):`<${A}?>`}))}(w,t):"Error",p=`${this.serviceName}: ${N} (${A}).`;return new f(A,p,t)}}const m=/\{\$([^}]+)}/g;function j(d){for(const t in d)if(Object.prototype.hasOwnProperty.call(d,t))return!1;return!0}function n(d,t){if(d===t)return!0;const A=Object.keys(d),w=Object.keys(t);for(const N of A){if(!w.includes(N))return!1;const A=d[N],p=t[N];if(R(A)&&R(p)){if(!n(A,p))return!1}else if(A!==p)return!1}for(const N of w)if(!A.includes(N))return!1;return!0}function R(d){return null!==d&&"object"===typeof d}function Z(d){const t=[];for(const[A,w]of Object.entries(d))Array.isArray(w)?w.forEach((d=>{t.push(encodeURIComponent(A)+"="+encodeURIComponent(d))})):t.push(encodeURIComponent(A)+"="+encodeURIComponent(w));return t.length?"&"+t.join("&"):""}function L(d){const t={};return d.replace(/^\?/,"").split("&").forEach((d=>{if(d){const[A,w]=d.split("=");t[decodeURIComponent(A)]=decodeURIComponent(w)}})),t}function I(d){const t=d.indexOf("?");if(!t)return"";const A=d.indexOf("#",t);return d.substring(t,A>0?A:void 0)}function u(d,t){const A=new V(d,t);return A.subscribe.bind(A)}class V{constructor(d,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{d(this)})).catch((d=>{this.error(d)}))}next(d){this.forEachObserver((t=>{t.next(d)}))}error(d){this.forEachObserver((t=>{t.error(d)})),this.close(d)}complete(){this.forEachObserver((d=>{d.complete()})),this.close()}subscribe(d,t,A){let w;if(void 0===d&&void 0===t&&void 0===A)throw new Error("Missing Observer.");w=function(d,t){if("object"!==typeof d||null===d)return!1;for(const A of t)if(A in d&&"function"===typeof d[A])return!0;return!1}(d,["next","error","complete"])?d:{next:d,error:t,complete:A},void 0===w.next&&(w.next=h),void 0===w.error&&(w.error=h),void 0===w.complete&&(w.complete=h);const N=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch(d){}})),this.observers.push(w),N}unsubscribeOne(d){void 0!==this.observers&&void 0!==this.observers[d]&&(delete this.observers[d],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(d){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,d)}sendOne(d,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[d])try{t(this.observers[d])}catch(A){"undefined"!==typeof console&&console.error&&console.error(A)}}))}close(d){this.finalized||(this.finalized=!0,void 0!==d&&(this.finalError=d),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function h(){}const l=1e3,y=2,s=144e5,Y=.5;function r(d){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;const A=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)*Math.pow(t,d),w=Math.round(Y*A*(Math.random()-.5)*2);return Math.min(s,A+w)}function K(d){return d&&d._delegate?d._delegate:d}},10542:(d,t,A)=>{A.d(t,{d:()=>p.g,g:()=>id,j:()=>g,m:()=>Ad,n:()=>wd,p:()=>dd,r:()=>Xd,s:()=>td,u:()=>pd,w:()=>Nd,A:()=>Bd,D:()=>Pd,F:()=>bd,E:()=>Qd,G:()=>kd,H:()=>Ud,J:()=>Jd,N:()=>Td});var w=A(10547),N=A(10552),p=A(10549);let B,X;const W=new WeakMap,a=new WeakMap,D=new WeakMap,i=new WeakMap,k=new WeakMap;let b={get(d,t,A){if(d instanceof IDBTransaction){if("done"===t)return a.get(d);if("objectStoreNames"===t)return d.objectStoreNames||D.get(d);if("store"===t)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return J(d[t])},set:(d,t,A)=>(d[t]=A,!0),has:(d,t)=>d instanceof IDBTransaction&&("done"===t||"store"===t)||t in d};function Q(d){return d!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(X||(X=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(d)?function(){for(var t=arguments.length,A=new Array(t),w=0;w<t;w++)A[w]=arguments[w];return d.apply(U(this),A),J(W.get(this))}:function(){for(var t=arguments.length,A=new Array(t),w=0;w<t;w++)A[w]=arguments[w];return J(d.apply(U(this),A))}:function(t){for(var A=arguments.length,w=new Array(A>1?A-1:0),N=1;N<A;N++)w[N-1]=arguments[N];const p=d.call(U(this),t,...w);return D.set(p,t.sort?t.sort():[t]),J(p)}}function P(d){return"function"===typeof d?Q(d):(d instanceof IDBTransaction&&function(d){if(a.has(d))return;const t=new Promise(((t,A)=>{const w=()=>{d.removeEventListener("complete",N),d.removeEventListener("error",p),d.removeEventListener("abort",p)},N=()=>{t(),w()},p=()=>{A(d.error||new DOMException("AbortError","AbortError")),w()};d.addEventListener("complete",N),d.addEventListener("error",p),d.addEventListener("abort",p)}));a.set(d,t)}(d),t=d,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((d=>t instanceof d))?new Proxy(d,b):d);var t}function J(d){if(d instanceof IDBRequest)return function(d){const t=new Promise(((t,A)=>{const w=()=>{d.removeEventListener("success",N),d.removeEventListener("error",p)},N=()=>{t(J(d.result)),w()},p=()=>{A(d.error),w()};d.addEventListener("success",N),d.addEventListener("error",p)}));return t.then((t=>{t instanceof IDBCursor&&W.set(t,d)})).catch((()=>{})),k.set(t,d),t}(d);if(i.has(d))return i.get(d);const t=P(d);return t!==d&&(i.set(d,t),k.set(t,d)),t}const U=d=>k.get(d);const T=["get","getKey","getAll","getAllKeys","count"],F=["put","add","delete","clear"],q=new Map;function H(d,t){if(!(d instanceof IDBDatabase)||t in d||"string"!==typeof t)return;if(q.get(t))return q.get(t);const A=t.replace(/FromIndex$/,""),w=t!==A,N=F.includes(A);if(!(A in(w?IDBIndex:IDBObjectStore).prototype)||!N&&!T.includes(A))return;const p=async function(d){const t=this.transaction(d,N?"readwrite":"readonly");let p=t.store;for(var B=arguments.length,X=new Array(B>1?B-1:0),W=1;W<B;W++)X[W-1]=arguments[W];return w&&(p=p.index(X.shift())),(await Promise.all([p[A](...X),N&&t.done]))[0]};return q.set(t,p),p}b=(d=>({...d,get:(t,A,w)=>H(t,A)||d.get(t,A,w),has:(t,A)=>!!H(t,A)||d.has(t,A)}))(b);class f{constructor(d){this.container=d}getPlatformInfoString(){return this.container.getProviders().map((d=>{if(function(d){const t=d.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(d)){const t=d.getImmediate();return`${t.library}/${t.version}`}return null})).filter((d=>d)).join(" ")}}const v="@firebase/app",m="0.9.13",j=new N.f("@firebase/app"),n="@firebase/app-compat",R="@firebase/analytics-compat",Z="@firebase/analytics",L="@firebase/app-check-compat",I="@firebase/app-check",u="@firebase/auth",V="@firebase/auth-compat",h="@firebase/database",l="@firebase/database-compat",y="@firebase/functions",s="@firebase/functions-compat",Y="@firebase/installations",r="@firebase/installations-compat",K="@firebase/messaging",G="@firebase/messaging-compat",O="@firebase/performance",z="@firebase/performance-compat",c="@firebase/remote-config",e="@firebase/remote-config-compat",M="@firebase/storage",x="@firebase/storage-compat",o="@firebase/firestore",C="@firebase/firestore-compat",E="firebase",g="[DEFAULT]",S={[v]:"fire-core",[n]:"fire-core-compat",[Z]:"fire-analytics",[R]:"fire-analytics-compat",[I]:"fire-app-check",[L]:"fire-app-check-compat",[u]:"fire-auth",[V]:"fire-auth-compat",[h]:"fire-rtdb",[l]:"fire-rtdb-compat",[y]:"fire-fn",[s]:"fire-fn-compat",[Y]:"fire-iid",[r]:"fire-iid-compat",[K]:"fire-fcm",[G]:"fire-fcm-compat",[O]:"fire-perf",[z]:"fire-perf-compat",[c]:"fire-rc",[e]:"fire-rc-compat",[M]:"fire-gcs",[x]:"fire-gcs-compat",[o]:"fire-fst",[C]:"fire-fst-compat","fire-js":"fire-js",[E]:"fire-js-all"},dd=new Map,td=new Map;function Ad(d,t){try{d.container.ye(t)}catch(A){j.debug(`Component ${t.name} failed to register with FirebaseApp ${d.name}`,A)}}function wd(d,t){d.container.addOrOverwriteComponent(t)}function Nd(d){const t=d.name;if(td.has(t))return j.debug(`There were multiple attempts to register component ${t}.`),!1;td.set(t,d);for(const A of dd.values())Ad(A,d);return!0}function pd(d,t){const A=d.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),d.container.getProvider(t)}function Bd(d,t){let A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;pd(d,t).clearInstance(A)}function Xd(){td.clear()}const Wd={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ad=new p.c("app","Firebase",Wd);class Dd{constructor(d,t,A){this._isDeleted=!1,this._options=Object.assign({},d),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=A,this.container.ye(new w.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(d){this.checkDestroyed(),this._automaticDataCollectionEnabled=d}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(d){this._isDeleted=d}checkDestroyed(){if(this.isDeleted)throw ad.create("app-deleted",{appName:this._name})}}const id="9.23.0";function kd(d){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=d;if("object"!==typeof t){t={name:t}}const N=Object.assign({name:g,automaticDataCollectionEnabled:!1},t),B=N.name;if("string"!==typeof B||!B)throw ad.create("bad-app-name",{appName:String(B)});if(A||(A=(0,p.x)()),!A)throw ad.create("no-options");const X=dd.get(B);if(X){if((0,p.p)(A,X.options)&&(0,p.p)(N,X.config))return X;throw ad.create("duplicate-app",{appName:B})}const W=new w.c(B);for(const w of td.values())W.ye(w);const a=new Dd(A,N,W);return dd.set(B,a),a}function bd(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;const t=dd.get(d);if(!t&&d===g&&(0,p.x)())return kd();if(!t)throw ad.create("no-app",{appName:d});return t}function Qd(){return Array.from(dd.values())}async function Pd(d){const t=d.name;dd.has(t)&&(dd.delete(t),await Promise.all(d.container.getProviders().map((d=>d.delete()))),d.isDeleted=!0)}function Jd(d,t,A){var N;let p=null!==(N=S[d])&&void 0!==N?N:d;A&&(p+=`-${A}`);const B=p.match(/\s|\//),X=t.match(/\s|\//);if(B||X){const d=[`Unable to register library "${p}" with version "${t}":`];return B&&d.push(`library name "${p}" contains illegal characters (whitespace or "/")`),B&&X&&d.push("and"),X&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void j.warn(d.join(" "))}Nd(new w.e(`${p}-version`,(()=>({library:p,version:t})),"VERSION"))}function Ud(d,t){if(null!==d&&"function"!==typeof d)throw ad.create("invalid-log-argument");(0,N.l)(d,t)}function Td(d){(0,N.j)(d)}const Fd="firebase-heartbeat-store";let qd=null;function Hd(){return qd||(qd=function(d,t){let{blocked:A,upgrade:w,blocking:N,terminated:p}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const B=indexedDB.open(d,t),X=J(B);return w&&B.addEventListener("upgradeneeded",(d=>{w(J(B.result),d.oldVersion,d.newVersion,J(B.transaction),d)})),A&&B.addEventListener("blocked",(d=>A(d.oldVersion,d.newVersion,d))),X.then((d=>{p&&d.addEventListener("close",(()=>p())),N&&d.addEventListener("versionchange",(d=>N(d.oldVersion,d.newVersion,d)))})).catch((()=>{})),X}("firebase-heartbeat-database",1,{upgrade:(d,t)=>{if(0===t)d.createObjectStore(Fd)}}).catch((d=>{throw ad.create("idb-open",{originalErrorMessage:d.message})}))),qd}async function fd(d,t){try{const A=(await Hd()).transaction(Fd,"readwrite"),w=A.objectStore(Fd);await w.put(t,vd(d)),await A.done}catch(A){if(A instanceof p.g)j.warn(A.message);else{const d=ad.create("idb-set",{originalErrorMessage:null===A||void 0===A?void 0:A.message});j.warn(d.message)}}}function vd(d){return`${d.name}!${d.options.appId}`}class md{constructor(d){this.container=d,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this.Ai=new nd(t),this._heartbeatsCachePromise=this.Ai.read().then((d=>(this._heartbeatsCache=d,d)))}async triggerHeartbeat(){const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=jd();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((d=>d.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:d}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((d=>{const t=new Date(d.date).valueOf();return Date.now()-t<=2592e6})),this.Ai.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const d=jd(),{heartbeatsToSend:t,unsentEntries:A}=function(d){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const A=[];let w=d.slice();for(const N of d){const d=A.find((d=>d.agent===N.agent));if(d){if(d.dates.push(N.date),Rd(A)>t){d.dates.pop();break}}else if(A.push({agent:N.agent,dates:[N.date]}),Rd(A)>t){A.pop();break}w=w.slice(1)}return{heartbeatsToSend:A,unsentEntries:w}}(this._heartbeatsCache.heartbeats),w=(0,p.k)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=d,A.length>0?(this._heartbeatsCache.heartbeats=A,await this.Ai.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ai.overwrite(this._heartbeatsCache)),w}}function jd(){return(new Date).toISOString().substring(0,10)}class nd{constructor(d){this.app=d,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,p.O)()&&(0,p.cb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(d){try{const t=await Hd();return await t.transaction(Fd).objectStore(Fd).get(vd(d))}catch(t){if(t instanceof p.g)j.warn(t.message);else{const d=ad.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});j.warn(d.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(d){var t;if(await this._canUseIndexedDBPromise){const A=await this.read();return fd(this.app,{lastSentHeartbeatDate:null!==(t=d.lastSentHeartbeatDate)&&void 0!==t?t:A.lastSentHeartbeatDate,heartbeats:d.heartbeats})}}async add(d){var t;if(await this._canUseIndexedDBPromise){const A=await this.read();return fd(this.app,{lastSentHeartbeatDate:null!==(t=d.lastSentHeartbeatDate)&&void 0!==t?t:A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...d.heartbeats]})}}}function Rd(d){return(0,p.k)(JSON.stringify({version:2,heartbeats:d})).length}var Zd;Zd="",Nd(new w.e("platform-logger",(d=>new f(d)),"PRIVATE")),Nd(new w.e("heartbeat",(d=>new md(d)),"PRIVATE")),Jd(v,m,Zd),Jd(v,m,"esm2017"),Jd("fire-js","")},10547:(d,t,A)=>{A.d(t,{c:()=>X,e:()=>N});var w=A(10549);class N{constructor(d,t,A){this.name=d,this.instanceFactory=t,this.type=A,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(d){return this.instantiationMode=d,this}setMultipleInstances(d){return this.multipleInstances=d,this}setServiceProps(d){return this.serviceProps=d,this}setInstanceCreatedCallback(d){return this.onInstanceCreated=d,this}}const p="[DEFAULT]";class B{constructor(d,t){this.name=d,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(d){const t=this.normalizeInstanceIdentifier(d);if(!this.instancesDeferred.has(t)){const d=new w.b;if(this.instancesDeferred.set(t,d),this.isInitialized(t)||this.shouldAutoInitialize())try{const A=this.getOrInitializeService({instanceIdentifier:t});A&&d.resolve(A)}catch(A){}}return this.instancesDeferred.get(t).promise}getImmediate(d){var t;const A=this.normalizeInstanceIdentifier(null===d||void 0===d?void 0:d.identifier),w=null!==(t=null===d||void 0===d?void 0:d.optional)&&void 0!==t&&t;if(!this.isInitialized(A)&&!this.shouldAutoInitialize()){if(w)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:A})}catch(N){if(w)return null;throw N}}getComponent(){return this.component}setComponent(d){if(d.name!==this.name)throw Error(`Mismatching Component ${d.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=d,this.shouldAutoInitialize()){if(function(d){return"EAGER"===d.instantiationMode}(d))try{this.getOrInitializeService({instanceIdentifier:p})}catch(t){}for(const[d,A]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(d);try{const d=this.getOrInitializeService({instanceIdentifier:w});A.resolve(d)}catch(t){}}}}clearInstance(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;this.instancesDeferred.delete(d),this.instancesOptions.delete(d),this.instances.delete(d)}async delete(){const d=Array.from(this.instances.values());await Promise.all([...d.filter((d=>"INTERNAL"in d)).map((d=>d.INTERNAL.delete())),...d.filter((d=>"_delete"in d)).map((d=>d._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.instances.has(d)}getOptions(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.instancesOptions.get(d)||{}}initialize(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=d,A=this.normalizeInstanceIdentifier(d.instanceIdentifier);if(this.isInitialized(A))throw Error(`${this.name}(${A}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const w=this.getOrInitializeService({instanceIdentifier:A,options:t});for(const[N,p]of this.instancesDeferred.entries()){A===this.normalizeInstanceIdentifier(N)&&p.resolve(w)}return w}di(d,t){var A;const w=this.normalizeInstanceIdentifier(t),N=null!==(A=this.onInitCallbacks.get(w))&&void 0!==A?A:new Set;N.add(d),this.onInitCallbacks.set(w,N);const p=this.instances.get(w);return p&&d(p,w),()=>{N.delete(d)}}invokeOnInitCallbacks(d,t){const A=this.onInitCallbacks.get(t);if(A)for(const N of A)try{N(d,t)}catch(w){}}getOrInitializeService(d){let{instanceIdentifier:t,options:A={}}=d,w=this.instances.get(t);if(!w&&this.component&&(w=this.component.instanceFactory(this.container,{instanceIdentifier:(N=t,N===p?void 0:N),options:A}),this.instances.set(t,w),this.instancesOptions.set(t,A),this.invokeOnInitCallbacks(w,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,w)}catch(B){}var N;return w||null}normalizeInstanceIdentifier(){let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.component?this.component.multipleInstances?d:p:d}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(d){this.name=d,this.providers=new Map}ye(d){const t=this.getProvider(d.name);if(t.isComponentSet())throw new Error(`Component ${d.name} has already been registered with ${this.name}`);t.setComponent(d)}addOrOverwriteComponent(d){this.getProvider(d.name).isComponentSet()&&this.providers.delete(d.name),this.ye(d)}getProvider(d){if(this.providers.has(d))return this.providers.get(d);const t=new B(d,this);return this.providers.set(d,t),t}getProviders(){return Array.from(this.providers.values())}}},10552:(d,t,A)=>{A.d(t,{d:()=>N,f:()=>a,j:()=>D,l:()=>i});const w=[];var N;!function(d){d[d.DEBUG=0]="DEBUG",d[d.VERBOSE=1]="VERBOSE",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.SILENT=5]="SILENT"}(N||(N={}));const p={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},B=N.INFO,X={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},W=function(d,t){if(t<d.logLevel)return;const A=(new Date).toISOString(),w=X[t];if(!w)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var N=arguments.length,p=new Array(N>2?N-2:0),B=2;B<N;B++)p[B-2]=arguments[B];console[w](`[${A}]  ${d.name}:`,...p)};class a{constructor(d){this.name=d,this._logLevel=B,this._logHandler=W,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(d){if(!(d in N))throw new TypeError(`Invalid value "${d}" assigned to \`logLevel\``);this._logLevel=d}setLogLevel(d){this._logLevel="string"===typeof d?p[d]:d}get logHandler(){return this._logHandler}set logHandler(d){if("function"!==typeof d)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=d}get userLogHandler(){return this._userLogHandler}set userLogHandler(d){this._userLogHandler=d}debug(){for(var d=arguments.length,t=new Array(d),A=0;A<d;A++)t[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...t),this._logHandler(this,N.DEBUG,...t)}log(){for(var d=arguments.length,t=new Array(d),A=0;A<d;A++)t[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...t),this._logHandler(this,N.VERBOSE,...t)}info(){for(var d=arguments.length,t=new Array(d),A=0;A<d;A++)t[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,N.INFO,...t),this._logHandler(this,N.INFO,...t)}warn(){for(var d=arguments.length,t=new Array(d),A=0;A<d;A++)t[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,N.WARN,...t),this._logHandler(this,N.WARN,...t)}error(){for(var d=arguments.length,t=new Array(d),A=0;A<d;A++)t[A]=arguments[A];this._userLogHandler&&this._userLogHandler(this,N.ERROR,...t),this._logHandler(this,N.ERROR,...t)}}function D(d){w.forEach((t=>{t.setLogLevel(d)}))}function i(d,t){for(const A of w){let w=null;t&&t.level&&(w=p[t.level]),A.userLogHandler=null===d?null:function(t,A){for(var p=arguments.length,B=new Array(p>2?p-2:0),X=2;X<p;X++)B[X-2]=arguments[X];const W=B.map((d=>{if(null==d)return null;if("string"===typeof d)return d;if("number"===typeof d||"boolean"===typeof d)return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch(t){return null}})).filter((d=>d)).join(" ");A>=(null!==w&&void 0!==w?w:t.logLevel)&&d({level:N[A].toLowerCase(),message:W,args:B,type:t.name})}}}}}]);