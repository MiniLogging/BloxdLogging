/*! For license information please see bf8vo.5.96273810.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10372:(u,G,s)=>{s.d(G,{$:()=>j,A:()=>d,B:()=>o,E:()=>b,G:()=>g,J:()=>Q,K:()=>h,O:()=>n,S:()=>F,W:()=>q,X:()=>c,cb:()=>V,d:()=>Y,db:()=>r,eb:()=>M,g:()=>X,ib:()=>W,j:()=>H,jb:()=>l,m:()=>P,q:()=>f,s:()=>m,t:()=>e,w:()=>R});const T=function(u){const G=[];let s=0;for(let T=0;T<u.length;T++){let z=u.charCodeAt(T);z<128?G[s++]=z:z<2048?(G[s++]=z>>6|192,G[s++]=63&z|128):55296===(64512&z)&&T+1<u.length&&56320===(64512&u.charCodeAt(T+1))?(z=65536+((1023&z)<<10)+(1023&u.charCodeAt(++T)),G[s++]=z>>18|240,G[s++]=z>>12&63|128,G[s++]=z>>6&63|128,G[s++]=63&z|128):(G[s++]=z>>12|224,G[s++]=z>>6&63|128,G[s++]=63&z|128)}return G},z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(u,G){if(!Array.isArray(u))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,T=[];for(let z=0;z<u.length;z+=3){const G=u[z],O=z+1<u.length,m=O?u[z+1]:0,f=z+2<u.length,C=f?u[z+2]:0,x=G>>2,g=(3&G)<<4|m>>4;let b=(15&m)<<2|C>>6,Q=63&C;f||(Q=64,O||(b=64)),T.push(s[x],s[g],s[b],s[Q])}return T.join("")},encodeString(u,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(u):this.encodeByteArray(T(u),G)},decodeString(u,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(u):function(u){const G=[];let s=0,T=0;for(;s<u.length;){const z=u[s++];if(z<128)G[T++]=String.fromCharCode(z);else if(z>191&&z<224){const O=u[s++];G[T++]=String.fromCharCode((31&z)<<6|63&O)}else if(z>239&&z<365){const O=((7&z)<<18|(63&u[s++])<<12|(63&u[s++])<<6|63&u[s++])-65536;G[T++]=String.fromCharCode(55296+(O>>10)),G[T++]=String.fromCharCode(56320+(1023&O))}else{const O=u[s++],m=u[s++];G[T++]=String.fromCharCode((15&z)<<12|(63&O)<<6|63&m)}}return G.join("")}(this.decodeStringToByteArray(u,G))},decodeStringToByteArray(u,G){this.init_();const s=G?this.charToByteMapWebSafe_:this.charToByteMap_,T=[];for(let z=0;z<u.length;){const G=s[u.charAt(z++)],m=z<u.length?s[u.charAt(z)]:0;++z;const f=z<u.length?s[u.charAt(z)]:64;++z;const C=z<u.length?s[u.charAt(z)]:64;if(++z,null==G||null==m||null==f||null==C)throw new O;const x=G<<2|m>>4;if(T.push(x),64!==f){const u=m<<4&240|f>>2;if(T.push(u),64!==C){const u=f<<6&192|C;T.push(u)}}}return T},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let u=0;u<this.ENCODED_VALS.length;u++)this.byteToCharMap_[u]=this.ENCODED_VALS.charAt(u),this.charToByteMap_[this.byteToCharMap_[u]]=u,this.byteToCharMapWebSafe_[u]=this.ENCODED_VALS_WEBSAFE.charAt(u),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[u]]=u,u>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(u)]=u,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(u)]=u)}}};class O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(u){return function(u){const G=T(u);return z.encodeByteArray(G,!0)}(u).replace(/\./g,"")},f=function(u){try{return z.decodeString(u,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};const C=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,x=()=>{try{return C()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let u;try{u=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(s){return}const G=u&&f(u[1]);return G&&JSON.parse(G)})()}catch(u){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${u}`)}},g=u=>{var G,s;return null===(s=null===(G=x())||void 0===G?void 0:G.emulatorHosts)||void 0===s?void 0:s[u]},b=()=>{var u;return null===(u=x())||void 0===u?void 0:u.config},Q=u=>{var G;return null===(G=x())||void 0===G?void 0:G[`_${u}`]};class Y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((u,G)=>{this.resolve=u,this.reject=G}))}wrapCallback(u){return(G,s)=>{G?this.reject(G):this.resolve(s),"function"===typeof u&&(this.promise.catch((()=>{})),1===u.length?u(G):u(G,s))}}}function n(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(n())}function F(){const u="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof u&&void 0!==u.id}function r(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function c(){const u=n();return u.indexOf("MSIE ")>=0||u.indexOf("Trident/")>=0}function j(){try{return"object"===typeof indexedDB}catch(u){return!1}}function l(){return new Promise(((u,G)=>{try{let s=!0;const T="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(T);z.onsuccess=()=>{z.result.close(),s||self.indexedDB.deleteDatabase(T),u(!0)},z.onupgradeneeded=()=>{s=!1},z.onerror=()=>{var u;G((null===(u=z.error)||void 0===u?void 0:u.message)||"")}}catch(s){G(s)}}))}function P(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class H extends Error{constructor(u,G,s){super(G),this.code=u,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,H.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,X.prototype.create)}}class X{constructor(u,G,s){this.service=u,this.serviceName=G,this.errors=s}create(u){const G=(arguments.length<=1?void 0:arguments[1])||{},s=`${this.service}/${u}`,T=this.errors[u],z=T?function(u,G){return u.replace(p,((u,s)=>{const T=G[s];return null!=T?String(T):`<${s}?>`}))}(T,G):"Error",O=`${this.serviceName}: ${z} (${s}).`;return new H(s,O,G)}}const p=/\{\$([^}]+)}/g;function q(u){for(const G in u)if(Object.prototype.hasOwnProperty.call(u,G))return!1;return!0}function d(u,G){if(u===G)return!0;const s=Object.keys(u),T=Object.keys(G);for(const z of s){if(!T.includes(z))return!1;const s=u[z],O=G[z];if(v(s)&&v(O)){if(!d(s,O))return!1}else if(s!==O)return!1}for(const z of T)if(!s.includes(z))return!1;return!0}function v(u){return null!==u&&"object"===typeof u}function W(u){const G=[];for(const[s,T]of Object.entries(u))Array.isArray(T)?T.forEach((u=>{G.push(encodeURIComponent(s)+"="+encodeURIComponent(u))})):G.push(encodeURIComponent(s)+"="+encodeURIComponent(T));return G.length?"&"+G.join("&"):""}function M(u){const G={};return u.replace(/^\?/,"").split("&").forEach((u=>{if(u){const[s,T]=u.split("=");G[decodeURIComponent(s)]=decodeURIComponent(T)}})),G}function o(u){const G=u.indexOf("?");if(!G)return"";const s=u.indexOf("#",G);return u.substring(G,s>0?s:void 0)}function R(u,G){const s=new B(u,G);return s.subscribe.bind(s)}class B{constructor(u,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then((()=>{u(this)})).catch((u=>{this.error(u)}))}next(u){this.forEachObserver((G=>{G.next(u)}))}error(u){this.forEachObserver((G=>{G.error(u)})),this.close(u)}complete(){this.forEachObserver((u=>{u.complete()})),this.close()}subscribe(u,G,s){let T;if(void 0===u&&void 0===G&&void 0===s)throw new Error("Missing Observer.");T=function(u,G){if("object"!==typeof u||null===u)return!1;for(const s of G)if(s in u&&"function"===typeof u[s])return!0;return!1}(u,["next","error","complete"])?u:{next:u,error:G,complete:s},void 0===T.next&&(T.next=D),void 0===T.error&&(T.error=D),void 0===T.complete&&(T.complete=D);const z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?T.error(this.finalError):T.complete()}catch(u){}})),this.observers.push(T),z}unsubscribeOne(u){void 0!==this.observers&&void 0!==this.observers[u]&&(delete this.observers[u],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(u){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,u)}sendOne(u,G){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[u])try{G(this.observers[u])}catch(s){"undefined"!==typeof console&&console.error&&console.error(s)}}))}close(u){this.finalized||(this.finalized=!0,void 0!==u&&(this.finalError=u),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function D(){}const k=1e3,w=2,L=144e5,S=.5;function e(u){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w;const s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:k)*Math.pow(G,u),T=Math.round(S*s*(Math.random()-.5)*2);return Math.min(L,s+T)}function h(u){return u&&u._delegate?u._delegate:u}},10363:(u,G,s)=>{s.d(G,{c:()=>O.j,e:()=>bu,f:()=>E,j:()=>su,l:()=>Tu,m:()=>uu,p:()=>fu,r:()=>Gu,u:()=>Ou,w:()=>zu,x:()=>mu,B:()=>Vu,F:()=>Yu,D:()=>nu,G:()=>Qu,J:()=>ru,L:()=>Fu,N:()=>cu});var T=s(10370),z=s(10380),O=s(10372);let m,f;const C=new WeakMap,x=new WeakMap,g=new WeakMap,b=new WeakMap,Q=new WeakMap;let Y={get(u,G,s){if(u instanceof IDBTransaction){if("done"===G)return x.get(u);if("objectStoreNames"===G)return u.objectStoreNames||g.get(u);if("store"===G)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return F(u[G])},set:(u,G,s)=>(u[G]=s,!0),has:(u,G)=>u instanceof IDBTransaction&&("done"===G||"store"===G)||G in u};function n(u){return u!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f||(f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(u)?function(){for(var G=arguments.length,s=new Array(G),T=0;T<G;T++)s[T]=arguments[T];return u.apply(r(this),s),F(C.get(this))}:function(){for(var G=arguments.length,s=new Array(G),T=0;T<G;T++)s[T]=arguments[T];return F(u.apply(r(this),s))}:function(G){for(var s=arguments.length,T=new Array(s>1?s-1:0),z=1;z<s;z++)T[z-1]=arguments[z];const O=u.call(r(this),G,...T);return g.set(O,G.sort?G.sort():[G]),F(O)}}function V(u){return"function"===typeof u?n(u):(u instanceof IDBTransaction&&function(u){if(x.has(u))return;const G=new Promise(((G,s)=>{const T=()=>{u.removeEventListener("complete",z),u.removeEventListener("error",O),u.removeEventListener("abort",O)},z=()=>{G(),T()},O=()=>{s(u.error||new DOMException("AbortError","AbortError")),T()};u.addEventListener("complete",z),u.addEventListener("error",O),u.addEventListener("abort",O)}));x.set(u,G)}(u),G=u,(m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((u=>G instanceof u))?new Proxy(u,Y):u);var G}function F(u){if(u instanceof IDBRequest)return function(u){const G=new Promise(((G,s)=>{const T=()=>{u.removeEventListener("success",z),u.removeEventListener("error",O)},z=()=>{G(F(u.result)),T()},O=()=>{s(u.error),T()};u.addEventListener("success",z),u.addEventListener("error",O)}));return G.then((G=>{G instanceof IDBCursor&&C.set(G,u)})).catch((()=>{})),Q.set(G,u),G}(u);if(b.has(u))return b.get(u);const G=V(u);return G!==u&&(b.set(u,G),Q.set(G,u)),G}const r=u=>Q.get(u);const c=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],l=new Map;function P(u,G){if(!(u instanceof IDBDatabase)||G in u||"string"!==typeof G)return;if(l.get(G))return l.get(G);const s=G.replace(/FromIndex$/,""),T=G!==s,z=j.includes(s);if(!(s in(T?IDBIndex:IDBObjectStore).prototype)||!z&&!c.includes(s))return;const O=async function(u){const G=this.transaction(u,z?"readwrite":"readonly");let O=G.store;for(var m=arguments.length,f=new Array(m>1?m-1:0),C=1;C<m;C++)f[C-1]=arguments[C];return T&&(O=O.index(f.shift())),(await Promise.all([O[s](...f),z&&G.done]))[0]};return l.set(G,O),O}Y=(u=>({...u,get:(G,s,T)=>P(G,s)||u.get(G,s,T),has:(G,s)=>!!P(G,s)||u.has(G,s)}))(Y);class H{constructor(u){this.container=u}getPlatformInfoString(){return this.container.getProviders().map((u=>{if(function(u){const G=u.getComponent();return"VERSION"===(null===G||void 0===G?void 0:G.type)}(u)){const G=u.getImmediate();return`${G.library}/${G.version}`}return null})).filter((u=>u)).join(" ")}}const X="@firebase/app",p="0.9.13",q=new z.i("@firebase/app"),d="@firebase/app-compat",v="@firebase/analytics-compat",W="@firebase/analytics",M="@firebase/app-check-compat",o="@firebase/app-check",R="@firebase/auth",B="@firebase/auth-compat",D="@firebase/database",k="@firebase/database-compat",w="@firebase/functions",L="@firebase/functions-compat",S="@firebase/installations",e="@firebase/installations-compat",h="@firebase/messaging",I="@firebase/messaging-compat",i="@firebase/performance",J="@firebase/performance-compat",A="@firebase/remote-config",N="@firebase/remote-config-compat",y="@firebase/storage",a="@firebase/storage-compat",K="@firebase/firestore",Z="@firebase/firestore-compat",t="firebase",E="[DEFAULT]",U={[X]:"fire-core",[d]:"fire-core-compat",[W]:"fire-analytics",[v]:"fire-analytics-compat",[o]:"fire-app-check",[M]:"fire-app-check-compat",[R]:"fire-auth",[B]:"fire-auth-compat",[D]:"fire-rtdb",[k]:"fire-rtdb-compat",[w]:"fire-fn",[L]:"fire-fn-compat",[S]:"fire-iid",[e]:"fire-iid-compat",[h]:"fire-fcm",[I]:"fire-fcm-compat",[i]:"fire-perf",[J]:"fire-perf-compat",[A]:"fire-rc",[N]:"fire-rc-compat",[y]:"fire-gcs",[a]:"fire-gcs-compat",[K]:"fire-fst",[Z]:"fire-fst-compat","fire-js":"fire-js",[t]:"fire-js-all"},uu=new Map,Gu=new Map;function su(u,G){try{u.container.je(G)}catch(s){q.debug(`Component ${G.name} failed to register with FirebaseApp ${u.name}`,s)}}function Tu(u,G){u.container.addOrOverwriteComponent(G)}function zu(u){const G=u.name;if(Gu.has(G))return q.debug(`There were multiple attempts to register component ${G}.`),!1;Gu.set(G,u);for(const s of uu.values())su(s,u);return!0}function Ou(u,G){const s=u.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),u.container.getProvider(G)}function mu(u,G){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;Ou(u,G).clearInstance(s)}function fu(){Gu.clear()}const Cu={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},xu=new O.g("app","Firebase",Cu);class gu{constructor(u,G,s){this._isDeleted=!1,this._options=Object.assign({},u),this._config=Object.assign({},G),this._name=G.name,this._automaticDataCollectionEnabled=G.automaticDataCollectionEnabled,this._container=s,this.container.je(new T.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(u){this.checkDestroyed(),this._automaticDataCollectionEnabled=u}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(u){this._isDeleted=u}checkDestroyed(){if(this.isDeleted)throw xu.create("app-deleted",{appName:this._name})}}const bu="9.23.0";function Qu(u){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=u;if("object"!==typeof G){G={name:G}}const z=Object.assign({name:E,automaticDataCollectionEnabled:!1},G),m=z.name;if("string"!==typeof m||!m)throw xu.create("bad-app-name",{appName:String(m)});if(s||(s=(0,O.E)()),!s)throw xu.create("no-options");const f=uu.get(m);if(f){if((0,O.A)(s,f.options)&&(0,O.A)(z,f.config))return f;throw xu.create("duplicate-app",{appName:m})}const C=new T.b(m);for(const T of Gu.values())C.je(T);const x=new gu(s,z,C);return uu.set(m,x),x}function Yu(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;const G=uu.get(u);if(!G&&u===E&&(0,O.E)())return Qu();if(!G)throw xu.create("no-app",{appName:u});return G}function nu(){return Array.from(uu.values())}async function Vu(u){const G=u.name;uu.has(G)&&(uu.delete(G),await Promise.all(u.container.getProviders().map((u=>u.delete()))),u.isDeleted=!0)}function Fu(u,G,s){var z;let O=null!==(z=U[u])&&void 0!==z?z:u;s&&(O+=`-${s}`);const m=O.match(/\s|\//),f=G.match(/\s|\//);if(m||f){const u=[`Unable to register library "${O}" with version "${G}":`];return m&&u.push(`library name "${O}" contains illegal characters (whitespace or "/")`),m&&f&&u.push("and"),f&&u.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void q.warn(u.join(" "))}zu(new T.d(`${O}-version`,(()=>({library:O,version:G})),"VERSION"))}function ru(u,G){if(null!==u&&"function"!==typeof u)throw xu.create("invalid-log-argument");(0,z.p)(u,G)}function cu(u){(0,z.m)(u)}const ju="firebase-heartbeat-store";let lu=null;function Pu(){return lu||(lu=function(u,G){let{blocked:s,upgrade:T,blocking:z,terminated:O}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const m=indexedDB.open(u,G),f=F(m);return T&&m.addEventListener("upgradeneeded",(u=>{T(F(m.result),u.oldVersion,u.newVersion,F(m.transaction),u)})),s&&m.addEventListener("blocked",(u=>s(u.oldVersion,u.newVersion,u))),f.then((u=>{O&&u.addEventListener("close",(()=>O())),z&&u.addEventListener("versionchange",(u=>z(u.oldVersion,u.newVersion,u)))})).catch((()=>{})),f}("firebase-heartbeat-database",1,{upgrade:(u,G)=>{if(0===G)u.createObjectStore(ju)}}).catch((u=>{throw xu.create("idb-open",{originalErrorMessage:u.message})}))),lu}async function Hu(u,G){try{const s=(await Pu()).transaction(ju,"readwrite"),T=s.objectStore(ju);await T.put(G,Xu(u)),await s.done}catch(s){if(s instanceof O.j)q.warn(s.message);else{const u=xu.create("idb-set",{originalErrorMessage:null===s||void 0===s?void 0:s.message});q.warn(u.message)}}}function Xu(u){return`${u.name}!${u.options.appId}`}class pu{constructor(u){this.container=u,this._heartbeatsCache=null;const G=this.container.getProvider("app").getImmediate();this.ri=new du(G),this._heartbeatsCachePromise=this.ri.read().then((u=>(this._heartbeatsCache=u,u)))}async triggerHeartbeat(){const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),G=qu();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==G&&!this._heartbeatsCache.heartbeats.some((u=>u.date===G)))return this._heartbeatsCache.heartbeats.push({date:G,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((u=>{const G=new Date(u.date).valueOf();return Date.now()-G<=2592e6})),this.ri.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const u=qu(),{heartbeatsToSend:G,unsentEntries:s}=function(u){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const s=[];let T=u.slice();for(const z of u){const u=s.find((u=>u.agent===z.agent));if(u){if(u.dates.push(z.date),vu(s)>G){u.dates.pop();break}}else if(s.push({agent:z.agent,dates:[z.date]}),vu(s)>G){s.pop();break}T=T.slice(1)}return{heartbeatsToSend:s,unsentEntries:T}}(this._heartbeatsCache.heartbeats),T=(0,O.s)(JSON.stringify({version:2,heartbeats:G}));return this._heartbeatsCache.lastSentHeartbeatDate=u,s.length>0?(this._heartbeatsCache.heartbeats=s,await this.ri.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.ri.overwrite(this._heartbeatsCache)),T}}function qu(){return(new Date).toISOString().substring(0,10)}class du{constructor(u){this.app=u,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,O.$)()&&(0,O.jb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(u){try{const G=await Pu();return await G.transaction(ju).objectStore(ju).get(Xu(u))}catch(G){if(G instanceof O.j)q.warn(G.message);else{const u=xu.create("idb-get",{originalErrorMessage:null===G||void 0===G?void 0:G.message});q.warn(u.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(u){var G;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hu(this.app,{lastSentHeartbeatDate:null!==(G=u.lastSentHeartbeatDate)&&void 0!==G?G:s.lastSentHeartbeatDate,heartbeats:u.heartbeats})}}async add(u){var G;if(await this._canUseIndexedDBPromise){const s=await this.read();return Hu(this.app,{lastSentHeartbeatDate:null!==(G=u.lastSentHeartbeatDate)&&void 0!==G?G:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...u.heartbeats]})}}}function vu(u){return(0,O.s)(JSON.stringify({version:2,heartbeats:u})).length}var Wu;Wu="",zu(new T.d("platform-logger",(u=>new H(u)),"PRIVATE")),zu(new T.d("heartbeat",(u=>new pu(u)),"PRIVATE")),Fu(X,p,Wu),Fu(X,p,"esm2017"),Fu("fire-js","")},10370:(u,G,s)=>{s.d(G,{b:()=>f,d:()=>z});var T=s(10372);class z{constructor(u,G,s){this.name=u,this.instanceFactory=G,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(u){return this.instantiationMode=u,this}setMultipleInstances(u){return this.multipleInstances=u,this}setServiceProps(u){return this.serviceProps=u,this}setInstanceCreatedCallback(u){return this.onInstanceCreated=u,this}}const O="[DEFAULT]";class m{constructor(u,G){this.name=u,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(u){const G=this.normalizeInstanceIdentifier(u);if(!this.instancesDeferred.has(G)){const u=new T.d;if(this.instancesDeferred.set(G,u),this.isInitialized(G)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:G});s&&u.resolve(s)}catch(s){}}return this.instancesDeferred.get(G).promise}getImmediate(u){var G;const s=this.normalizeInstanceIdentifier(null===u||void 0===u?void 0:u.identifier),T=null!==(G=null===u||void 0===u?void 0:u.optional)&&void 0!==G&&G;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(T)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(z){if(T)return null;throw z}}getComponent(){return this.component}setComponent(u){if(u.name!==this.name)throw Error(`Mismatching Component ${u.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=u,this.shouldAutoInitialize()){if(function(u){return"EAGER"===u.instantiationMode}(u))try{this.getOrInitializeService({instanceIdentifier:O})}catch(G){}for(const[u,s]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(u);try{const u=this.getOrInitializeService({instanceIdentifier:T});s.resolve(u)}catch(G){}}}}clearInstance(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;this.instancesDeferred.delete(u),this.instancesOptions.delete(u),this.instances.delete(u)}async delete(){const u=Array.from(this.instances.values());await Promise.all([...u.filter((u=>"INTERNAL"in u)).map((u=>u.INTERNAL.delete())),...u.filter((u=>"_delete"in u)).map((u=>u._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instances.has(u)}getOptions(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instancesOptions.get(u)||{}}initialize(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:G={}}=u,s=this.normalizeInstanceIdentifier(u.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const T=this.getOrInitializeService({instanceIdentifier:s,options:G});for(const[z,O]of this.instancesDeferred.entries()){s===this.normalizeInstanceIdentifier(z)&&O.resolve(T)}return T}Xh(u,G){var s;const T=this.normalizeInstanceIdentifier(G),z=null!==(s=this.onInitCallbacks.get(T))&&void 0!==s?s:new Set;z.add(u),this.onInitCallbacks.set(T,z);const O=this.instances.get(T);return O&&u(O,T),()=>{z.delete(u)}}invokeOnInitCallbacks(u,G){const s=this.onInitCallbacks.get(G);if(s)for(const z of s)try{z(u,G)}catch(T){}}getOrInitializeService(u){let{instanceIdentifier:G,options:s={}}=u,T=this.instances.get(G);if(!T&&this.component&&(T=this.component.instanceFactory(this.container,{instanceIdentifier:(z=G,z===O?void 0:z),options:s}),this.instances.set(G,T),this.instancesOptions.set(G,s),this.invokeOnInitCallbacks(T,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,T)}catch(m){}var z;return T||null}normalizeInstanceIdentifier(){let u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.component?this.component.multipleInstances?u:O:u}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class f{constructor(u){this.name=u,this.providers=new Map}je(u){const G=this.getProvider(u.name);if(G.isComponentSet())throw new Error(`Component ${u.name} has already been registered with ${this.name}`);G.setComponent(u)}addOrOverwriteComponent(u){this.getProvider(u.name).isComponentSet()&&this.providers.delete(u.name),this.je(u)}getProvider(u){if(this.providers.has(u))return this.providers.get(u);const G=new m(u,this);return this.providers.set(u,G),G}getProviders(){return Array.from(this.providers.values())}}},10380:(u,G,s)=>{s.d(G,{e:()=>z,i:()=>x,m:()=>g,p:()=>b});const T=[];var z;!function(u){u[u.DEBUG=0]="DEBUG",u[u.VERBOSE=1]="VERBOSE",u[u.INFO=2]="INFO",u[u.WARN=3]="WARN",u[u.ERROR=4]="ERROR",u[u.SILENT=5]="SILENT"}(z||(z={}));const O={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},m=z.INFO,f={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},C=function(u,G){if(G<u.logLevel)return;const s=(new Date).toISOString(),T=f[G];if(!T)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);for(var z=arguments.length,O=new Array(z>2?z-2:0),m=2;m<z;m++)O[m-2]=arguments[m];console[T](`[${s}]  ${u.name}:`,...O)};class x{constructor(u){this.name=u,this._logLevel=m,this._logHandler=C,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(u){if(!(u in z))throw new TypeError(`Invalid value "${u}" assigned to \`logLevel\``);this._logLevel=u}setLogLevel(u){this._logLevel="string"===typeof u?O[u]:u}get logHandler(){return this._logHandler}set logHandler(u){if("function"!==typeof u)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=u}get userLogHandler(){return this._userLogHandler}set userLogHandler(u){this._userLogHandler=u}debug(){for(var u=arguments.length,G=new Array(u),s=0;s<u;s++)G[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...G),this._logHandler(this,z.DEBUG,...G)}log(){for(var u=arguments.length,G=new Array(u),s=0;s<u;s++)G[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...G),this._logHandler(this,z.VERBOSE,...G)}info(){for(var u=arguments.length,G=new Array(u),s=0;s<u;s++)G[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,z.INFO,...G),this._logHandler(this,z.INFO,...G)}warn(){for(var u=arguments.length,G=new Array(u),s=0;s<u;s++)G[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,z.WARN,...G),this._logHandler(this,z.WARN,...G)}error(){for(var u=arguments.length,G=new Array(u),s=0;s<u;s++)G[s]=arguments[s];this._userLogHandler&&this._userLogHandler(this,z.ERROR,...G),this._logHandler(this,z.ERROR,...G)}}function g(u){T.forEach((G=>{G.setLogLevel(u)}))}function b(u,G){for(const s of T){let T=null;G&&G.level&&(T=O[G.level]),s.userLogHandler=null===u?null:function(G,s){for(var O=arguments.length,m=new Array(O>2?O-2:0),f=2;f<O;f++)m[f-2]=arguments[f];const C=m.map((u=>{if(null==u)return null;if("string"===typeof u)return u;if("number"===typeof u||"boolean"===typeof u)return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch(G){return null}})).filter((u=>u)).join(" ");s>=(null!==T&&void 0!==T?T:G.logLevel)&&u({level:z[s].toLowerCase(),message:C,args:m,type:G.name})}}}}}]);