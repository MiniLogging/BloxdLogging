/*! For license information please see zm1be.5.f07918c4.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10675:(a,v,p)=>{p.d(v,{B:()=>F,F:()=>c,J:()=>l,M:()=>H,P:()=>h,S:()=>S,T:()=>X,V:()=>Q,Z:()=>A,ab:()=>R,c:()=>f,cb:()=>j,e:()=>Z,fb:()=>T,h:()=>y,jb:()=>s,l:()=>D,m:()=>V,q:()=>t,r:()=>Y,s:()=>J,u:()=>n,x:()=>w,y:()=>u});const P=function(a){const v=[];let p=0;for(let P=0;P<a.length;P++){let b=a.charCodeAt(P);b<128?v[p++]=b:b<2048?(v[p++]=b>>6|192,v[p++]=63&b|128):55296===(64512&b)&&P+1<a.length&&56320===(64512&a.charCodeAt(P+1))?(b=65536+((1023&b)<<10)+(1023&a.charCodeAt(++P)),v[p++]=b>>18|240,v[p++]=b>>12&63|128,v[p++]=b>>6&63|128,v[p++]=63&b|128):(v[p++]=b>>12|224,v[p++]=b>>6&63|128,v[p++]=63&b|128)}return v},b={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(a,v){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const p=v?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let b=0;b<a.length;b+=3){const v=a[b],L=b+1<a.length,t=L?a[b+1]:0,V=b+2<a.length,K=V?a[b+2]:0,C=v>>2,F=(3&v)<<4|t>>4;let u=(15&t)<<2|K>>6,c=63&K;V||(c=64,L||(u=64)),P.push(p[C],p[F],p[u],p[c])}return P.join("")},encodeString(a,v){return this.HAS_NATIVE_SUPPORT&&!v?btoa(a):this.encodeByteArray(P(a),v)},decodeString(a,v){return this.HAS_NATIVE_SUPPORT&&!v?atob(a):function(a){const v=[];let p=0,P=0;for(;p<a.length;){const b=a[p++];if(b<128)v[P++]=String.fromCharCode(b);else if(b>191&&b<224){const L=a[p++];v[P++]=String.fromCharCode((31&b)<<6|63&L)}else if(b>239&&b<365){const L=((7&b)<<18|(63&a[p++])<<12|(63&a[p++])<<6|63&a[p++])-65536;v[P++]=String.fromCharCode(55296+(L>>10)),v[P++]=String.fromCharCode(56320+(1023&L))}else{const L=a[p++],t=a[p++];v[P++]=String.fromCharCode((15&b)<<12|(63&L)<<6|63&t)}}return v.join("")}(this.decodeStringToByteArray(a,v))},decodeStringToByteArray(a,v){this.init_();const p=v?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let b=0;b<a.length;){const v=p[a.charAt(b++)],t=b<a.length?p[a.charAt(b)]:0;++b;const V=b<a.length?p[a.charAt(b)]:64;++b;const K=b<a.length?p[a.charAt(b)]:64;if(++b,null==v||null==t||null==V||null==K)throw new L;const C=v<<2|t>>4;if(P.push(C),64!==V){const a=t<<4&240|V>>2;if(P.push(a),64!==K){const a=V<<6&192|K;P.push(a)}}}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t=function(a){return function(a){const v=P(a);return b.encodeByteArray(v,!0)}(a).replace(/\./g,"")},V=function(a){try{return b.decodeString(a,!0)}catch(v){console.error("base64Decode failed: ",v)}return null};const K=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof p.g)return p.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,C=()=>{try{return K()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(p){return}const v=a&&V(a[1]);return v&&JSON.parse(v)})()}catch(a){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`)}},F=a=>{var v,p;return null===(p=null===(v=C())||void 0===v?void 0:v.emulatorHosts)||void 0===p?void 0:p[a]},u=()=>{var a;return null===(a=C())||void 0===a?void 0:a.config},c=a=>{var v;return null===(v=C())||void 0===v?void 0:v[`_${a}`]};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((a,v)=>{this.resolve=a,this.reject=v}))}wrapCallback(a){return(v,p)=>{v?this.reject(v):this.resolve(p),"function"===typeof a&&(this.promise.catch((()=>{})),1===a.length?a(v):a(v,p))}}}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function A(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())}function h(){const a="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof a&&void 0!==a.id}function R(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function X(){const a=H();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function Q(){try{return"object"===typeof indexedDB}catch(a){return!1}}function s(){return new Promise(((a,v)=>{try{let p=!0;const P="validate-browser-context-for-indexeddb-analytics-module",b=self.indexedDB.open(P);b.onsuccess=()=>{b.result.close(),p||self.indexedDB.deleteDatabase(P),a(!0)},b.onupgradeneeded=()=>{p=!1},b.onerror=()=>{var a;v((null===(a=b.error)||void 0===a?void 0:a.message)||"")}}catch(p){v(p)}}))}function D(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class y extends Error{constructor(a,v,p){super(v),this.code=a,this.customData=p,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(a,v,p){this.service=a,this.serviceName=v,this.errors=p}create(a){const v=(arguments.length<=1?void 0:arguments[1])||{},p=`${this.service}/${a}`,P=this.errors[a],b=P?function(a,v){return a.replace(M,((a,p)=>{const P=v[p];return null!=P?String(P):`<${p}?>`}))}(P,v):"Error",L=`${this.serviceName}: ${b} (${p}).`;return new y(p,L,v)}}const M=/\{\$([^}]+)}/g;function S(a){for(const v in a)if(Object.prototype.hasOwnProperty.call(a,v))return!1;return!0}function n(a,v){if(a===v)return!0;const p=Object.keys(a),P=Object.keys(v);for(const b of p){if(!P.includes(b))return!1;const p=a[b],L=v[b];if(q(p)&&q(L)){if(!n(p,L))return!1}else if(p!==L)return!1}for(const b of P)if(!p.includes(b))return!1;return!0}function q(a){return null!==a&&"object"===typeof a}function T(a){const v=[];for(const[p,P]of Object.entries(a))Array.isArray(P)?P.forEach((a=>{v.push(encodeURIComponent(p)+"="+encodeURIComponent(a))})):v.push(encodeURIComponent(p)+"="+encodeURIComponent(P));return v.length?"&"+v.join("&"):""}function j(a){const v={};return a.replace(/^\?/,"").split("&").forEach((a=>{if(a){const[p,P]=a.split("=");v[decodeURIComponent(p)]=decodeURIComponent(P)}})),v}function w(a){const v=a.indexOf("?");if(!v)return"";const p=a.indexOf("#",v);return a.substring(v,p>0?p:void 0)}function J(a,v){const p=new B(a,v);return p.subscribe.bind(p)}class B{constructor(a,v){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=v,this.task.then((()=>{a(this)})).catch((a=>{this.error(a)}))}next(a){this.forEachObserver((v=>{v.next(a)}))}error(a){this.forEachObserver((v=>{v.error(a)})),this.close(a)}complete(){this.forEachObserver((a=>{a.complete()})),this.close()}subscribe(a,v,p){let P;if(void 0===a&&void 0===v&&void 0===p)throw new Error("Missing Observer.");P=function(a,v){if("object"!==typeof a||null===a)return!1;for(const p of v)if(p in a&&"function"===typeof a[p])return!0;return!1}(a,["next","error","complete"])?a:{next:a,error:v,complete:p},void 0===P.next&&(P.next=x),void 0===P.error&&(P.error=x),void 0===P.complete&&(P.complete=x);const b=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch(a){}})),this.observers.push(P),b}unsubscribeOne(a){void 0!==this.observers&&void 0!==this.observers[a]&&(delete this.observers[a],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(a){if(!this.finalized)for(let v=0;v<this.observers.length;v++)this.sendOne(v,a)}sendOne(a,v){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[a])try{v(this.observers[a])}catch(p){"undefined"!==typeof console&&console.error&&console.error(p)}}))}close(a){this.finalized||(this.finalized=!0,void 0!==a&&(this.finalError=a),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function x(){}const r=1e3,o=2,m=144e5,O=.5;function Y(a){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;const p=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r)*Math.pow(v,a),P=Math.round(O*p*(Math.random()-.5)*2);return Math.min(m,p+P)}function l(a){return a&&a._delegate?a._delegate:a}},10665:(a,v,p)=>{p.d(v,{c:()=>L.h,f:()=>ua,g:()=>i,j:()=>pa,m:()=>Pa,p:()=>aa,t:()=>Va,w:()=>va,A:()=>La,D:()=>ba,E:()=>ta,G:()=>Aa,L:()=>fa,I:()=>Ha,N:()=>ca,R:()=>Ra,T:()=>ha,U:()=>Xa});var P=p(10673),b=p(10682),L=p(10675);let t,V;const K=new WeakMap,C=new WeakMap,F=new WeakMap,u=new WeakMap,c=new WeakMap;let f={get(a,v,p){if(a instanceof IDBTransaction){if("done"===v)return C.get(a);if("objectStoreNames"===v)return a.objectStoreNames||F.get(a);if("store"===v)return p.objectStoreNames[1]?void 0:p.objectStore(p.objectStoreNames[0])}return h(a[v])},set:(a,v,p)=>(a[v]=p,!0),has:(a,v)=>a instanceof IDBTransaction&&("done"===v||"store"===v)||v in a};function H(a){return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(){for(var v=arguments.length,p=new Array(v),P=0;P<v;P++)p[P]=arguments[P];return a.apply(R(this),p),h(K.get(this))}:function(){for(var v=arguments.length,p=new Array(v),P=0;P<v;P++)p[P]=arguments[P];return h(a.apply(R(this),p))}:function(v){for(var p=arguments.length,P=new Array(p>1?p-1:0),b=1;b<p;b++)P[b-1]=arguments[b];const L=a.call(R(this),v,...P);return F.set(L,v.sort?v.sort():[v]),h(L)}}function A(a){return"function"===typeof a?H(a):(a instanceof IDBTransaction&&function(a){if(C.has(a))return;const v=new Promise(((v,p)=>{const P=()=>{a.removeEventListener("complete",b),a.removeEventListener("error",L),a.removeEventListener("abort",L)},b=()=>{v(),P()},L=()=>{p(a.error||new DOMException("AbortError","AbortError")),P()};a.addEventListener("complete",b),a.addEventListener("error",L),a.addEventListener("abort",L)}));C.set(a,v)}(a),v=a,(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((a=>v instanceof a))?new Proxy(a,f):a);var v}function h(a){if(a instanceof IDBRequest)return function(a){const v=new Promise(((v,p)=>{const P=()=>{a.removeEventListener("success",b),a.removeEventListener("error",L)},b=()=>{v(h(a.result)),P()},L=()=>{p(a.error),P()};a.addEventListener("success",b),a.addEventListener("error",L)}));return v.then((v=>{v instanceof IDBCursor&&K.set(v,a)})).catch((()=>{})),c.set(v,a),v}(a);if(u.has(a))return u.get(a);const v=A(a);return v!==a&&(u.set(a,v),c.set(v,a)),v}const R=a=>c.get(a);const X=["get","getKey","getAll","getAllKeys","count"],Q=["put","add","delete","clear"],s=new Map;function D(a,v){if(!(a instanceof IDBDatabase)||v in a||"string"!==typeof v)return;if(s.get(v))return s.get(v);const p=v.replace(/FromIndex$/,""),P=v!==p,b=Q.includes(p);if(!(p in(P?IDBIndex:IDBObjectStore).prototype)||!b&&!X.includes(p))return;const L=async function(a){const v=this.transaction(a,b?"readwrite":"readonly");let L=v.store;for(var t=arguments.length,V=new Array(t>1?t-1:0),K=1;K<t;K++)V[K-1]=arguments[K];return P&&(L=L.index(V.shift())),(await Promise.all([L[p](...V),b&&v.done]))[0]};return s.set(v,L),L}f=(a=>({...a,get:(v,p,P)=>D(v,p)||a.get(v,p,P),has:(v,p)=>!!D(v,p)||a.has(v,p)}))(f);class y{constructor(a){this.container=a}getPlatformInfoString(){return this.container.getProviders().map((a=>{if(function(a){const v=a.getComponent();return"VERSION"===(null===v||void 0===v?void 0:v.type)}(a)){const v=a.getImmediate();return`${v.library}/${v.version}`}return null})).filter((a=>a)).join(" ")}}const Z="@firebase/app",M="0.9.13",S=new b.h("@firebase/app"),n="@firebase/app-compat",q="@firebase/analytics-compat",T="@firebase/analytics",j="@firebase/app-check-compat",w="@firebase/app-check",J="@firebase/auth",B="@firebase/auth-compat",x="@firebase/database",r="@firebase/database-compat",o="@firebase/functions",m="@firebase/functions-compat",O="@firebase/installations",Y="@firebase/installations-compat",l="@firebase/messaging",z="@firebase/messaging-compat",g="@firebase/performance",G="@firebase/performance-compat",e="@firebase/remote-config",k="@firebase/remote-config-compat",d="@firebase/storage",E="@firebase/storage-compat",W="@firebase/firestore",U="@firebase/firestore-compat",N="firebase",i="[DEFAULT]",I={[Z]:"fire-core",[n]:"fire-core-compat",[T]:"fire-analytics",[q]:"fire-analytics-compat",[w]:"fire-app-check",[j]:"fire-app-check-compat",[J]:"fire-auth",[B]:"fire-auth-compat",[x]:"fire-rtdb",[r]:"fire-rtdb-compat",[o]:"fire-fn",[m]:"fire-fn-compat",[O]:"fire-iid",[Y]:"fire-iid-compat",[l]:"fire-fcm",[z]:"fire-fcm-compat",[g]:"fire-perf",[G]:"fire-perf-compat",[e]:"fire-rc",[k]:"fire-rc-compat",[d]:"fire-gcs",[E]:"fire-gcs-compat",[W]:"fire-fst",[U]:"fire-fst-compat","fire-js":"fire-js",[N]:"fire-js-all"},aa=new Map,va=new Map;function pa(a,v){try{a.container.qf(v)}catch(p){S.debug(`Component ${v.name} failed to register with FirebaseApp ${a.name}`,p)}}function Pa(a,v){a.container.addOrOverwriteComponent(v)}function ba(a){const v=a.name;if(va.has(v))return S.debug(`There were multiple attempts to register component ${v}.`),!1;va.set(v,a);for(const p of aa.values())pa(p,a);return!0}function La(a,v){const p=a.container.getProvider("heartbeat").getImmediate({optional:!0});return p&&p.triggerHeartbeat(),a.container.getProvider(v)}function ta(a,v){let p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;La(a,v).clearInstance(p)}function Va(){va.clear()}const Ka={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ca=new L.e("app","Firebase",Ka);class Fa{constructor(a,v,p){this._isDeleted=!1,this._options=Object.assign({},a),this._config=Object.assign({},v),this._name=v.name,this._automaticDataCollectionEnabled=v.automaticDataCollectionEnabled,this._container=p,this.container.qf(new P.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(a){this.checkDestroyed(),this._automaticDataCollectionEnabled=a}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(a){this._isDeleted=a}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}const ua="9.23.0";function ca(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=a;if("object"!==typeof v){v={name:v}}const b=Object.assign({name:i,automaticDataCollectionEnabled:!1},v),t=b.name;if("string"!==typeof t||!t)throw Ca.create("bad-app-name",{appName:String(t)});if(p||(p=(0,L.y)()),!p)throw Ca.create("no-options");const V=aa.get(t);if(V){if((0,L.u)(p,V.options)&&(0,L.u)(b,V.config))return V;throw Ca.create("duplicate-app",{appName:t})}const K=new P.b(t);for(const P of va.values())K.qf(P);const C=new Fa(p,b,K);return aa.set(t,C),C}function fa(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;const v=aa.get(a);if(!v&&a===i&&(0,L.y)())return ca();if(!v)throw Ca.create("no-app",{appName:a});return v}function Ha(){return Array.from(aa.values())}async function Aa(a){const v=a.name;aa.has(v)&&(aa.delete(v),await Promise.all(a.container.getProviders().map((a=>a.delete()))),a.isDeleted=!0)}function ha(a,v,p){var b;let L=null!==(b=I[a])&&void 0!==b?b:a;p&&(L+=`-${p}`);const t=L.match(/\s|\//),V=v.match(/\s|\//);if(t||V){const a=[`Unable to register library "${L}" with version "${v}":`];return t&&a.push(`library name "${L}" contains illegal characters (whitespace or "/")`),t&&V&&a.push("and"),V&&a.push(`version name "${v}" contains illegal characters (whitespace or "/")`),void S.warn(a.join(" "))}ba(new P.e(`${L}-version`,(()=>({library:L,version:v})),"VERSION"))}function Ra(a,v){if(null!==a&&"function"!==typeof a)throw Ca.create("invalid-log-argument");(0,b.o)(a,v)}function Xa(a){(0,b.l)(a)}const Qa="firebase-heartbeat-store";let sa=null;function Da(){return sa||(sa=function(a,v){let{blocked:p,upgrade:P,blocking:b,terminated:L}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const t=indexedDB.open(a,v),V=h(t);return P&&t.addEventListener("upgradeneeded",(a=>{P(h(t.result),a.oldVersion,a.newVersion,h(t.transaction),a)})),p&&t.addEventListener("blocked",(a=>p(a.oldVersion,a.newVersion,a))),V.then((a=>{L&&a.addEventListener("close",(()=>L())),b&&a.addEventListener("versionchange",(a=>b(a.oldVersion,a.newVersion,a)))})).catch((()=>{})),V}("firebase-heartbeat-database",1,{upgrade:(a,v)=>{if(0===v)a.createObjectStore(Qa)}}).catch((a=>{throw Ca.create("idb-open",{originalErrorMessage:a.message})}))),sa}async function ya(a,v){try{const p=(await Da()).transaction(Qa,"readwrite"),P=p.objectStore(Qa);await P.put(v,Za(a)),await p.done}catch(p){if(p instanceof L.h)S.warn(p.message);else{const a=Ca.create("idb-set",{originalErrorMessage:null===p||void 0===p?void 0:p.message});S.warn(a.message)}}}function Za(a){return`${a.name}!${a.options.appId}`}class Ma{constructor(a){this.container=a,this._heartbeatsCache=null;const v=this.container.getProvider("app").getImmediate();this.Ni=new na(v),this._heartbeatsCachePromise=this.Ni.read().then((a=>(this._heartbeatsCache=a,a)))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),v=Sa();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==v&&!this._heartbeatsCache.heartbeats.some((a=>a.date===v)))return this._heartbeatsCache.heartbeats.push({date:v,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((a=>{const v=new Date(a.date).valueOf();return Date.now()-v<=2592e6})),this.Ni.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const a=Sa(),{heartbeatsToSend:v,unsentEntries:p}=function(a){let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const p=[];let P=a.slice();for(const b of a){const a=p.find((a=>a.agent===b.agent));if(a){if(a.dates.push(b.date),qa(p)>v){a.dates.pop();break}}else if(p.push({agent:b.agent,dates:[b.date]}),qa(p)>v){p.pop();break}P=P.slice(1)}return{heartbeatsToSend:p,unsentEntries:P}}(this._heartbeatsCache.heartbeats),P=(0,L.q)(JSON.stringify({version:2,heartbeats:v}));return this._heartbeatsCache.lastSentHeartbeatDate=a,p.length>0?(this._heartbeatsCache.heartbeats=p,await this.Ni.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ni.overwrite(this._heartbeatsCache)),P}}function Sa(){return(new Date).toISOString().substring(0,10)}class na{constructor(a){this.app=a,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,L.V)()&&(0,L.jb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(a){try{const v=await Da();return await v.transaction(Qa).objectStore(Qa).get(Za(a))}catch(v){if(v instanceof L.h)S.warn(v.message);else{const a=Ca.create("idb-get",{originalErrorMessage:null===v||void 0===v?void 0:v.message});S.warn(a.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(a){var v;if(await this._canUseIndexedDBPromise){const p=await this.read();return ya(this.app,{lastSentHeartbeatDate:null!==(v=a.lastSentHeartbeatDate)&&void 0!==v?v:p.lastSentHeartbeatDate,heartbeats:a.heartbeats})}}async add(a){var v;if(await this._canUseIndexedDBPromise){const p=await this.read();return ya(this.app,{lastSentHeartbeatDate:null!==(v=a.lastSentHeartbeatDate)&&void 0!==v?v:p.lastSentHeartbeatDate,heartbeats:[...p.heartbeats,...a.heartbeats]})}}}function qa(a){return(0,L.q)(JSON.stringify({version:2,heartbeats:a})).length}var Ta;Ta="",ba(new P.e("platform-logger",(a=>new y(a)),"PRIVATE")),ba(new P.e("heartbeat",(a=>new Ma(a)),"PRIVATE")),ha(Z,M,Ta),ha(Z,M,"esm2017"),ha("fire-js","")},10673:(a,v,p)=>{p.d(v,{b:()=>V,e:()=>b});var P=p(10675);class b{constructor(a,v,p){this.name=a,this.instanceFactory=v,this.type=p,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}const L="[DEFAULT]";class t{constructor(a,v){this.name=a,this.container=v,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(a){const v=this.normalizeInstanceIdentifier(a);if(!this.instancesDeferred.has(v)){const a=new P.c;if(this.instancesDeferred.set(v,a),this.isInitialized(v)||this.shouldAutoInitialize())try{const p=this.getOrInitializeService({instanceIdentifier:v});p&&a.resolve(p)}catch(p){}}return this.instancesDeferred.get(v).promise}getImmediate(a){var v;const p=this.normalizeInstanceIdentifier(null===a||void 0===a?void 0:a.identifier),P=null!==(v=null===a||void 0===a?void 0:a.optional)&&void 0!==v&&v;if(!this.isInitialized(p)&&!this.shouldAutoInitialize()){if(P)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:p})}catch(b){if(P)return null;throw b}}getComponent(){return this.component}setComponent(a){if(a.name!==this.name)throw Error(`Mismatching Component ${a.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=a,this.shouldAutoInitialize()){if(function(a){return"EAGER"===a.instantiationMode}(a))try{this.getOrInitializeService({instanceIdentifier:L})}catch(v){}for(const[a,p]of this.instancesDeferred.entries()){const P=this.normalizeInstanceIdentifier(a);try{const a=this.getOrInitializeService({instanceIdentifier:P});p.resolve(a)}catch(v){}}}}clearInstance(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;this.instancesDeferred.delete(a),this.instancesOptions.delete(a),this.instances.delete(a)}async delete(){const a=Array.from(this.instances.values());await Promise.all([...a.filter((a=>"INTERNAL"in a)).map((a=>a.INTERNAL.delete())),...a.filter((a=>"_delete"in a)).map((a=>a._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instances.has(a)}getOptions(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instancesOptions.get(a)||{}}initialize(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:v={}}=a,p=this.normalizeInstanceIdentifier(a.instanceIdentifier);if(this.isInitialized(p))throw Error(`${this.name}(${p}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const P=this.getOrInitializeService({instanceIdentifier:p,options:v});for(const[b,L]of this.instancesDeferred.entries()){p===this.normalizeInstanceIdentifier(b)&&L.resolve(P)}return P}ri(a,v){var p;const P=this.normalizeInstanceIdentifier(v),b=null!==(p=this.onInitCallbacks.get(P))&&void 0!==p?p:new Set;b.add(a),this.onInitCallbacks.set(P,b);const L=this.instances.get(P);return L&&a(L,P),()=>{b.delete(a)}}invokeOnInitCallbacks(a,v){const p=this.onInitCallbacks.get(v);if(p)for(const b of p)try{b(a,v)}catch(P){}}getOrInitializeService(a){let{instanceIdentifier:v,options:p={}}=a,P=this.instances.get(v);if(!P&&this.component&&(P=this.component.instanceFactory(this.container,{instanceIdentifier:(b=v,b===L?void 0:b),options:p}),this.instances.set(v,P),this.instancesOptions.set(v,p),this.invokeOnInitCallbacks(P,v),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,v,P)}catch(t){}var b;return P||null}normalizeInstanceIdentifier(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.component?this.component.multipleInstances?a:L:a}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(a){this.name=a,this.providers=new Map}qf(a){const v=this.getProvider(a.name);if(v.isComponentSet())throw new Error(`Component ${a.name} has already been registered with ${this.name}`);v.setComponent(a)}addOrOverwriteComponent(a){this.getProvider(a.name).isComponentSet()&&this.providers.delete(a.name),this.qf(a)}getProvider(a){if(this.providers.has(a))return this.providers.get(a);const v=new t(a,this);return this.providers.set(a,v),v}getProviders(){return Array.from(this.providers.values())}}},10682:(a,v,p)=>{p.d(v,{e:()=>b,h:()=>C,l:()=>F,o:()=>u});const P=[];var b;!function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"}(b||(b={}));const L={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},t=b.INFO,V={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},K=function(a,v){if(v<a.logLevel)return;const p=(new Date).toISOString(),P=V[v];if(!P)throw new Error(`Attempted to log a message with an invalid logType (value: ${v})`);for(var b=arguments.length,L=new Array(b>2?b-2:0),t=2;t<b;t++)L[t-2]=arguments[t];console[P](`[${p}]  ${a.name}:`,...L)};class C{constructor(a){this.name=a,this._logLevel=t,this._logHandler=K,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(a){if(!(a in b))throw new TypeError(`Invalid value "${a}" assigned to \`logLevel\``);this._logLevel=a}setLogLevel(a){this._logLevel="string"===typeof a?L[a]:a}get logHandler(){return this._logHandler}set logHandler(a){if("function"!==typeof a)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=a}get userLogHandler(){return this._userLogHandler}set userLogHandler(a){this._userLogHandler=a}debug(){for(var a=arguments.length,v=new Array(a),p=0;p<a;p++)v[p]=arguments[p];this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...v),this._logHandler(this,b.DEBUG,...v)}log(){for(var a=arguments.length,v=new Array(a),p=0;p<a;p++)v[p]=arguments[p];this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...v),this._logHandler(this,b.VERBOSE,...v)}info(){for(var a=arguments.length,v=new Array(a),p=0;p<a;p++)v[p]=arguments[p];this._userLogHandler&&this._userLogHandler(this,b.INFO,...v),this._logHandler(this,b.INFO,...v)}warn(){for(var a=arguments.length,v=new Array(a),p=0;p<a;p++)v[p]=arguments[p];this._userLogHandler&&this._userLogHandler(this,b.WARN,...v),this._logHandler(this,b.WARN,...v)}error(){for(var a=arguments.length,v=new Array(a),p=0;p<a;p++)v[p]=arguments[p];this._userLogHandler&&this._userLogHandler(this,b.ERROR,...v),this._logHandler(this,b.ERROR,...v)}}function F(a){P.forEach((v=>{v.setLogLevel(a)}))}function u(a,v){for(const p of P){let P=null;v&&v.level&&(P=L[v.level]),p.userLogHandler=null===a?null:function(v,p){for(var L=arguments.length,t=new Array(L>2?L-2:0),V=2;V<L;V++)t[V-2]=arguments[V];const K=t.map((a=>{if(null==a)return null;if("string"===typeof a)return a;if("number"===typeof a||"boolean"===typeof a)return a.toString();if(a instanceof Error)return a.message;try{return JSON.stringify(a)}catch(v){return null}})).filter((a=>a)).join(" ");p>=(null!==P&&void 0!==P?P:v.logLevel)&&a({level:b[p].toLowerCase(),message:K,args:t,type:v.name})}}}}}]);