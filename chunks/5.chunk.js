/*! For license information please see 09wkk.5.e171771a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10580:(R,q,L)=>{L.d(q,{A:()=>e,B:()=>C,E:()=>y,F:()=>i,H:()=>n,I:()=>p,L:()=>I,P:()=>d,R:()=>f,T:()=>r,W:()=>c,_:()=>l,ab:()=>o,d:()=>U,e:()=>D,eb:()=>v,i:()=>t,l:()=>T,n:()=>z,q:()=>Z,s:()=>Q,v:()=>W,w:()=>K,x:()=>G});const B=function(R){const q=[];let L=0;for(let B=0;B<R.length;B++){let N=R.charCodeAt(B);N<128?q[L++]=N:N<2048?(q[L++]=N>>6|192,q[L++]=63&N|128):55296===(64512&N)&&B+1<R.length&&56320===(64512&R.charCodeAt(B+1))?(N=65536+((1023&N)<<10)+(1023&R.charCodeAt(++B)),q[L++]=N>>18|240,q[L++]=N>>12&63|128,q[L++]=N>>6&63|128,q[L++]=63&N|128):(q[L++]=N>>12|224,q[L++]=N>>6&63|128,q[L++]=63&N|128)}return q},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(R,q){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let N=0;N<R.length;N+=3){const q=R[N],h=N+1<R.length,Z=h?R[N+1]:0,z=N+2<R.length,Y=z?R[N+2]:0,F=q>>2,C=(3&q)<<4|Z>>4;let e=(15&Z)<<2|Y>>6,y=63&Y;z||(y=64,h||(e=64)),B.push(L[F],L[C],L[e],L[y])}return B.join("")},encodeString(R,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(R):this.encodeByteArray(B(R),q)},decodeString(R,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(R):function(R){const q=[];let L=0,B=0;for(;L<R.length;){const N=R[L++];if(N<128)q[B++]=String.fromCharCode(N);else if(N>191&&N<224){const h=R[L++];q[B++]=String.fromCharCode((31&N)<<6|63&h)}else if(N>239&&N<365){const h=((7&N)<<18|(63&R[L++])<<12|(63&R[L++])<<6|63&R[L++])-65536;q[B++]=String.fromCharCode(55296+(h>>10)),q[B++]=String.fromCharCode(56320+(1023&h))}else{const h=R[L++],Z=R[L++];q[B++]=String.fromCharCode((15&N)<<12|(63&h)<<6|63&Z)}}return q.join("")}(this.decodeStringToByteArray(R,q))},decodeStringToByteArray(R,q){this.init_();const L=q?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let N=0;N<R.length;){const q=L[R.charAt(N++)],Z=N<R.length?L[R.charAt(N)]:0;++N;const z=N<R.length?L[R.charAt(N)]:64;++N;const Y=N<R.length?L[R.charAt(N)]:64;if(++N,null==q||null==Z||null==z||null==Y)throw new h;const F=q<<2|Z>>4;if(B.push(F),64!==z){const R=Z<<4&240|z>>2;if(B.push(R),64!==Y){const R=z<<6&192|Y;B.push(R)}}}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Z=function(R){return function(R){const q=B(R);return N.encodeByteArray(q,!0)}(R).replace(/\./g,"")},z=function(R){try{return N.decodeString(R,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};const Y=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof L.g)return L.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,F=()=>{try{return Y()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(L){return}const q=R&&z(R[1]);return q&&JSON.parse(q)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},C=R=>{var q,L;return null===(L=null===(q=F())||void 0===q?void 0:q.emulatorHosts)||void 0===L?void 0:L[R]},e=()=>{var R;return null===(R=F())||void 0===R?void 0:R.config},y=R=>{var q;return null===(q=F())||void 0===q?void 0:q[`_${R}`]};class U{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((R,q)=>{this.resolve=R,this.reject=q}))}wrapCallback(R){return(q,L)=>{q?this.reject(q):this.resolve(L),"function"===typeof R&&(this.promise.catch((()=>{})),1===R.length?R(q):R(q,L))}}}function n(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function r(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(n())}function p(){const R="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof R&&void 0!==R.id}function c(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function d(){const R=n();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function f(){try{return"object"===typeof indexedDB}catch(R){return!1}}function v(){return new Promise(((R,q)=>{try{let L=!0;const B="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(B);N.onsuccess=()=>{N.result.close(),L||self.indexedDB.deleteDatabase(B),R(!0)},N.onupgradeneeded=()=>{L=!1},N.onerror=()=>{var R;q((null===(R=N.error)||void 0===R?void 0:R.message)||"")}}catch(L){q(L)}}))}function T(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class t extends Error{constructor(R,q,L){super(q),this.code=R,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,D.prototype.create)}}class D{constructor(R,q,L){this.service=R,this.serviceName=q,this.errors=L}create(R){const q=(arguments.length<=1?void 0:arguments[1])||{},L=`${this.service}/${R}`,B=this.errors[R],N=B?function(R,q){return R.replace(S,((R,L)=>{const B=q[L];return null!=B?String(B):`<${L}?>`}))}(B,q):"Error",h=`${this.serviceName}: ${N} (${L}).`;return new t(L,h,q)}}const S=/\{\$([^}]+)}/g;function I(R){for(const q in R)if(Object.prototype.hasOwnProperty.call(R,q))return!1;return!0}function K(R,q){if(R===q)return!0;const L=Object.keys(R),B=Object.keys(q);for(const N of L){if(!B.includes(N))return!1;const L=R[N],h=q[N];if(m(L)&&m(h)){if(!K(L,h))return!1}else if(L!==h)return!1}for(const N of B)if(!L.includes(N))return!1;return!0}function m(R){return null!==R&&"object"===typeof R}function o(R){const q=[];for(const[L,B]of Object.entries(R))Array.isArray(B)?B.forEach((R=>{q.push(encodeURIComponent(L)+"="+encodeURIComponent(R))})):q.push(encodeURIComponent(L)+"="+encodeURIComponent(B));return q.length?"&"+q.join("&"):""}function l(R){const q={};return R.replace(/^\?/,"").split("&").forEach((R=>{if(R){const[L,B]=R.split("=");q[decodeURIComponent(L)]=decodeURIComponent(B)}})),q}function G(R){const q=R.indexOf("?");if(!q)return"";const L=R.indexOf("#",q);return R.substring(q,L>0?L:void 0)}function W(R,q){const L=new H(R,q);return L.subscribe.bind(L)}class H{constructor(R,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then((()=>{R(this)})).catch((R=>{this.error(R)}))}next(R){this.forEachObserver((q=>{q.next(R)}))}error(R){this.forEachObserver((q=>{q.error(R)})),this.close(R)}complete(){this.forEachObserver((R=>{R.complete()})),this.close()}subscribe(R,q,L){let B;if(void 0===R&&void 0===q&&void 0===L)throw new Error("Missing Observer.");B=function(R,q){if("object"!==typeof R||null===R)return!1;for(const L of q)if(L in R&&"function"===typeof R[L])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:q,complete:L},void 0===B.next&&(B.next=P),void 0===B.error&&(B.error=P),void 0===B.complete&&(B.complete=P);const N=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch(R){}})),this.observers.push(B),N}unsubscribeOne(R){void 0!==this.observers&&void 0!==this.observers[R]&&(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,R)}sendOne(R,q){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{q(this.observers[R])}catch(L){"undefined"!==typeof console&&console.error&&console.error(L)}}))}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function P(){}const O=1e3,E=2,a=144e5,g=.5;function Q(R){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const L=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:O)*Math.pow(q,R),B=Math.round(g*L*(Math.random()-.5)*2);return Math.min(a,L+B)}function i(R){return R&&R._delegate?R._delegate:R}},10570:(R,q,L)=>{L.d(q,{d:()=>h.i,f:()=>eR,i:()=>X,l:()=>LR,n:()=>BR,o:()=>RR,s:()=>zR,t:()=>qR,u:()=>hR,x:()=>NR,z:()=>ZR,A:()=>rR,E:()=>UR,C:()=>nR,H:()=>yR,J:()=>cR,K:()=>pR,M:()=>dR});var B=L(10572),N=L(10588),h=L(10580);let Z,z;const Y=new WeakMap,F=new WeakMap,C=new WeakMap,e=new WeakMap,y=new WeakMap;let U={get(R,q,L){if(R instanceof IDBTransaction){if("done"===q)return F.get(R);if("objectStoreNames"===q)return R.objectStoreNames||C.get(R);if("store"===q)return L.objectStoreNames[1]?void 0:L.objectStore(L.objectStoreNames[0])}return p(R[q])},set:(R,q,L)=>(R[q]=L,!0),has:(R,q)=>R instanceof IDBTransaction&&("done"===q||"store"===q)||q in R};function n(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(R)?function(){for(var q=arguments.length,L=new Array(q),B=0;B<q;B++)L[B]=arguments[B];return R.apply(c(this),L),p(Y.get(this))}:function(){for(var q=arguments.length,L=new Array(q),B=0;B<q;B++)L[B]=arguments[B];return p(R.apply(c(this),L))}:function(q){for(var L=arguments.length,B=new Array(L>1?L-1:0),N=1;N<L;N++)B[N-1]=arguments[N];const h=R.call(c(this),q,...B);return C.set(h,q.sort?q.sort():[q]),p(h)}}function r(R){return"function"===typeof R?n(R):(R instanceof IDBTransaction&&function(R){if(F.has(R))return;const q=new Promise(((q,L)=>{const B=()=>{R.removeEventListener("complete",N),R.removeEventListener("error",h),R.removeEventListener("abort",h)},N=()=>{q(),B()},h=()=>{L(R.error||new DOMException("AbortError","AbortError")),B()};R.addEventListener("complete",N),R.addEventListener("error",h),R.addEventListener("abort",h)}));F.set(R,q)}(R),q=R,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((R=>q instanceof R))?new Proxy(R,U):R);var q}function p(R){if(R instanceof IDBRequest)return function(R){const q=new Promise(((q,L)=>{const B=()=>{R.removeEventListener("success",N),R.removeEventListener("error",h)},N=()=>{q(p(R.result)),B()},h=()=>{L(R.error),B()};R.addEventListener("success",N),R.addEventListener("error",h)}));return q.then((q=>{q instanceof IDBCursor&&Y.set(q,R)})).catch((()=>{})),y.set(q,R),q}(R);if(e.has(R))return e.get(R);const q=r(R);return q!==R&&(e.set(R,q),y.set(q,R)),q}const c=R=>y.get(R);const d=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],v=new Map;function T(R,q){if(!(R instanceof IDBDatabase)||q in R||"string"!==typeof q)return;if(v.get(q))return v.get(q);const L=q.replace(/FromIndex$/,""),B=q!==L,N=f.includes(L);if(!(L in(B?IDBIndex:IDBObjectStore).prototype)||!N&&!d.includes(L))return;const h=async function(R){const q=this.transaction(R,N?"readwrite":"readonly");let h=q.store;for(var Z=arguments.length,z=new Array(Z>1?Z-1:0),Y=1;Y<Z;Y++)z[Y-1]=arguments[Y];return B&&(h=h.index(z.shift())),(await Promise.all([h[L](...z),N&&q.done]))[0]};return v.set(q,h),h}U=(R=>({...R,get:(q,L,B)=>T(q,L)||R.get(q,L,B),has:(q,L)=>!!T(q,L)||R.has(q,L)}))(U);class t{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map((R=>{if(function(R){const q=R.getComponent();return"VERSION"===(null===q||void 0===q?void 0:q.type)}(R)){const q=R.getImmediate();return`${q.library}/${q.version}`}return null})).filter((R=>R)).join(" ")}}const D="@firebase/app",S="0.9.13",I=new N.g("@firebase/app"),K="@firebase/app-compat",m="@firebase/analytics-compat",o="@firebase/analytics",l="@firebase/app-check-compat",G="@firebase/app-check",W="@firebase/auth",H="@firebase/auth-compat",P="@firebase/database",O="@firebase/database-compat",E="@firebase/functions",a="@firebase/functions-compat",g="@firebase/installations",Q="@firebase/installations-compat",i="@firebase/messaging",k="@firebase/messaging-compat",V="@firebase/performance",x="@firebase/performance-compat",w="@firebase/remote-config",j="@firebase/remote-config-compat",J="@firebase/storage",s="@firebase/storage-compat",A="@firebase/firestore",M="@firebase/firestore-compat",b="firebase",X="[DEFAULT]",u={[D]:"fire-core",[K]:"fire-core-compat",[o]:"fire-analytics",[m]:"fire-analytics-compat",[G]:"fire-app-check",[l]:"fire-app-check-compat",[W]:"fire-auth",[H]:"fire-auth-compat",[P]:"fire-rtdb",[O]:"fire-rtdb-compat",[E]:"fire-fn",[a]:"fire-fn-compat",[g]:"fire-iid",[Q]:"fire-iid-compat",[i]:"fire-fcm",[k]:"fire-fcm-compat",[V]:"fire-perf",[x]:"fire-perf-compat",[w]:"fire-rc",[j]:"fire-rc-compat",[J]:"fire-gcs",[s]:"fire-gcs-compat",[A]:"fire-fst",[M]:"fire-fst-compat","fire-js":"fire-js",[b]:"fire-js-all"},RR=new Map,qR=new Map;function LR(R,q){try{R.container.Ve(q)}catch(L){I.debug(`Component ${q.name} failed to register with FirebaseApp ${R.name}`,L)}}function BR(R,q){R.container.addOrOverwriteComponent(q)}function NR(R){const q=R.name;if(qR.has(q))return I.debug(`There were multiple attempts to register component ${q}.`),!1;qR.set(q,R);for(const L of RR.values())LR(L,R);return!0}function hR(R,q){const L=R.container.getProvider("heartbeat").getImmediate({optional:!0});return L&&L.triggerHeartbeat(),R.container.getProvider(q)}function ZR(R,q){let L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X;hR(R,q).clearInstance(L)}function zR(){qR.clear()}const YR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},FR=new h.e("app","Firebase",YR);class CR{constructor(R,q,L){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=L,this.container.Ve(new B.f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw FR.create("app-deleted",{appName:this._name})}}const eR="9.23.0";function yR(R){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},L=R;if("object"!==typeof q){q={name:q}}const N=Object.assign({name:X,automaticDataCollectionEnabled:!1},q),Z=N.name;if("string"!==typeof Z||!Z)throw FR.create("bad-app-name",{appName:String(Z)});if(L||(L=(0,h.A)()),!L)throw FR.create("no-options");const z=RR.get(Z);if(z){if((0,h.w)(L,z.options)&&(0,h.w)(N,z.config))return z;throw FR.create("duplicate-app",{appName:Z})}const Y=new B.d(Z);for(const B of qR.values())Y.Ve(B);const F=new CR(L,N,Y);return RR.set(Z,F),F}function UR(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X;const q=RR.get(R);if(!q&&R===X&&(0,h.A)())return yR();if(!q)throw FR.create("no-app",{appName:R});return q}function nR(){return Array.from(RR.values())}async function rR(R){const q=R.name;RR.has(q)&&(RR.delete(q),await Promise.all(R.container.getProviders().map((R=>R.delete()))),R.isDeleted=!0)}function pR(R,q,L){var N;let h=null!==(N=u[R])&&void 0!==N?N:R;L&&(h+=`-${L}`);const Z=h.match(/\s|\//),z=q.match(/\s|\//);if(Z||z){const R=[`Unable to register library "${h}" with version "${q}":`];return Z&&R.push(`library name "${h}" contains illegal characters (whitespace or "/")`),Z&&z&&R.push("and"),z&&R.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void I.warn(R.join(" "))}NR(new B.f(`${h}-version`,(()=>({library:h,version:q})),"VERSION"))}function cR(R,q){if(null!==R&&"function"!==typeof R)throw FR.create("invalid-log-argument");(0,N.n)(R,q)}function dR(R){(0,N.k)(R)}const fR="firebase-heartbeat-store";let vR=null;function TR(){return vR||(vR=function(R,q){let{blocked:L,upgrade:B,blocking:N,terminated:h}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const Z=indexedDB.open(R,q),z=p(Z);return B&&Z.addEventListener("upgradeneeded",(R=>{B(p(Z.result),R.oldVersion,R.newVersion,p(Z.transaction),R)})),L&&Z.addEventListener("blocked",(R=>L(R.oldVersion,R.newVersion,R))),z.then((R=>{h&&R.addEventListener("close",(()=>h())),N&&R.addEventListener("versionchange",(R=>N(R.oldVersion,R.newVersion,R)))})).catch((()=>{})),z}("firebase-heartbeat-database",1,{upgrade:(R,q)=>{if(0===q)R.createObjectStore(fR)}}).catch((R=>{throw FR.create("idb-open",{originalErrorMessage:R.message})}))),vR}async function tR(R,q){try{const L=(await TR()).transaction(fR,"readwrite"),B=L.objectStore(fR);await B.put(q,DR(R)),await L.done}catch(L){if(L instanceof h.i)I.warn(L.message);else{const R=FR.create("idb-set",{originalErrorMessage:null===L||void 0===L?void 0:L.message});I.warn(R.message)}}}function DR(R){return`${R.name}!${R.options.appId}`}class SR{constructor(R){this.container=R,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this.xi=new KR(q),this._heartbeatsCachePromise=this.xi.read().then((R=>(this._heartbeatsCache=R,R)))}async triggerHeartbeat(){const R=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),q=IR();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==q&&!this._heartbeatsCache.heartbeats.some((R=>R.date===q)))return this._heartbeatsCache.heartbeats.push({date:q,agent:R}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((R=>{const q=new Date(R.date).valueOf();return Date.now()-q<=2592e6})),this.xi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const R=IR(),{heartbeatsToSend:q,unsentEntries:L}=function(R){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const L=[];let B=R.slice();for(const N of R){const R=L.find((R=>R.agent===N.agent));if(R){if(R.dates.push(N.date),mR(L)>q){R.dates.pop();break}}else if(L.push({agent:N.agent,dates:[N.date]}),mR(L)>q){L.pop();break}B=B.slice(1)}return{heartbeatsToSend:L,unsentEntries:B}}(this._heartbeatsCache.heartbeats),B=(0,h.q)(JSON.stringify({version:2,heartbeats:q}));return this._heartbeatsCache.lastSentHeartbeatDate=R,L.length>0?(this._heartbeatsCache.heartbeats=L,await this.xi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.xi.overwrite(this._heartbeatsCache)),B}}function IR(){return(new Date).toISOString().substring(0,10)}class KR{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,h.R)()&&(0,h.eb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(R){try{const q=await TR();return await q.transaction(fR).objectStore(fR).get(DR(R))}catch(q){if(q instanceof h.i)I.warn(q.message);else{const R=FR.create("idb-get",{originalErrorMessage:null===q||void 0===q?void 0:q.message});I.warn(R.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(R){var q;if(await this._canUseIndexedDBPromise){const L=await this.read();return tR(this.app,{lastSentHeartbeatDate:null!==(q=R.lastSentHeartbeatDate)&&void 0!==q?q:L.lastSentHeartbeatDate,heartbeats:R.heartbeats})}}async add(R){var q;if(await this._canUseIndexedDBPromise){const L=await this.read();return tR(this.app,{lastSentHeartbeatDate:null!==(q=R.lastSentHeartbeatDate)&&void 0!==q?q:L.lastSentHeartbeatDate,heartbeats:[...L.heartbeats,...R.heartbeats]})}}}function mR(R){return(0,h.q)(JSON.stringify({version:2,heartbeats:R})).length}var oR;oR="",NR(new B.f("platform-logger",(R=>new t(R)),"PRIVATE")),NR(new B.f("heartbeat",(R=>new SR(R)),"PRIVATE")),pR(D,S,oR),pR(D,S,"esm2017"),pR("fire-js","")},10572:(R,q,L)=>{L.d(q,{d:()=>z,f:()=>N});var B=L(10580);class N{constructor(R,q,L){this.name=R,this.instanceFactory=q,this.type=L,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(R){return this.instantiationMode=R,this}setMultipleInstances(R){return this.multipleInstances=R,this}setServiceProps(R){return this.serviceProps=R,this}setInstanceCreatedCallback(R){return this.onInstanceCreated=R,this}}const h="[DEFAULT]";class Z{constructor(R,q){this.name=R,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(R){const q=this.normalizeInstanceIdentifier(R);if(!this.instancesDeferred.has(q)){const R=new B.d;if(this.instancesDeferred.set(q,R),this.isInitialized(q)||this.shouldAutoInitialize())try{const L=this.getOrInitializeService({instanceIdentifier:q});L&&R.resolve(L)}catch(L){}}return this.instancesDeferred.get(q).promise}getImmediate(R){var q;const L=this.normalizeInstanceIdentifier(null===R||void 0===R?void 0:R.identifier),B=null!==(q=null===R||void 0===R?void 0:R.optional)&&void 0!==q&&q;if(!this.isInitialized(L)&&!this.shouldAutoInitialize()){if(B)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:L})}catch(N){if(B)return null;throw N}}getComponent(){return this.component}setComponent(R){if(R.name!==this.name)throw Error(`Mismatching Component ${R.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=R,this.shouldAutoInitialize()){if(function(R){return"EAGER"===R.instantiationMode}(R))try{this.getOrInitializeService({instanceIdentifier:h})}catch(q){}for(const[R,L]of this.instancesDeferred.entries()){const B=this.normalizeInstanceIdentifier(R);try{const R=this.getOrInitializeService({instanceIdentifier:B});L.resolve(R)}catch(q){}}}}clearInstance(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;this.instancesDeferred.delete(R),this.instancesOptions.delete(R),this.instances.delete(R)}async delete(){const R=Array.from(this.instances.values());await Promise.all([...R.filter((R=>"INTERNAL"in R)).map((R=>R.INTERNAL.delete())),...R.filter((R=>"_delete"in R)).map((R=>R._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instances.has(R)}getOptions(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instancesOptions.get(R)||{}}initialize(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:q={}}=R,L=this.normalizeInstanceIdentifier(R.instanceIdentifier);if(this.isInitialized(L))throw Error(`${this.name}(${L}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const B=this.getOrInitializeService({instanceIdentifier:L,options:q});for(const[N,h]of this.instancesDeferred.entries()){L===this.normalizeInstanceIdentifier(N)&&h.resolve(B)}return B}bi(R,q){var L;const B=this.normalizeInstanceIdentifier(q),N=null!==(L=this.onInitCallbacks.get(B))&&void 0!==L?L:new Set;N.add(R),this.onInitCallbacks.set(B,N);const h=this.instances.get(B);return h&&R(h,B),()=>{N.delete(R)}}invokeOnInitCallbacks(R,q){const L=this.onInitCallbacks.get(q);if(L)for(const N of L)try{N(R,q)}catch(B){}}getOrInitializeService(R){let{instanceIdentifier:q,options:L={}}=R,B=this.instances.get(q);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(N=q,N===h?void 0:N),options:L}),this.instances.set(q,B),this.instancesOptions.set(q,L),this.invokeOnInitCallbacks(B,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,B)}catch(Z){}var N;return B||null}normalizeInstanceIdentifier(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.component?this.component.multipleInstances?R:h:R}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class z{constructor(R){this.name=R,this.providers=new Map}Ve(R){const q=this.getProvider(R.name);if(q.isComponentSet())throw new Error(`Component ${R.name} has already been registered with ${this.name}`);q.setComponent(R)}addOrOverwriteComponent(R){this.getProvider(R.name).isComponentSet()&&this.providers.delete(R.name),this.Ve(R)}getProvider(R){if(this.providers.has(R))return this.providers.get(R);const q=new Z(R,this);return this.providers.set(R,q),q}getProviders(){return Array.from(this.providers.values())}}},10588:(R,q,L)=>{L.d(q,{c:()=>N,g:()=>F,k:()=>C,n:()=>e});const B=[];var N;!function(R){R[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT"}(N||(N={}));const h={debug:N.DEBUG,verbose:N.VERBOSE,info:N.INFO,warn:N.WARN,error:N.ERROR,silent:N.SILENT},Z=N.INFO,z={[N.DEBUG]:"log",[N.VERBOSE]:"log",[N.INFO]:"info",[N.WARN]:"warn",[N.ERROR]:"error"},Y=function(R,q){if(q<R.logLevel)return;const L=(new Date).toISOString(),B=z[q];if(!B)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);for(var N=arguments.length,h=new Array(N>2?N-2:0),Z=2;Z<N;Z++)h[Z-2]=arguments[Z];console[B](`[${L}]  ${R.name}:`,...h)};class F{constructor(R){this.name=R,this._logLevel=Z,this._logHandler=Y,this._userLogHandler=null,B.push(this)}get logLevel(){return this._logLevel}set logLevel(R){if(!(R in N))throw new TypeError(`Invalid value "${R}" assigned to \`logLevel\``);this._logLevel=R}setLogLevel(R){this._logLevel="string"===typeof R?h[R]:R}get logHandler(){return this._logHandler}set logHandler(R){if("function"!==typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R}get userLogHandler(){return this._userLogHandler}set userLogHandler(R){this._userLogHandler=R}debug(){for(var R=arguments.length,q=new Array(R),L=0;L<R;L++)q[L]=arguments[L];this._userLogHandler&&this._userLogHandler(this,N.DEBUG,...q),this._logHandler(this,N.DEBUG,...q)}log(){for(var R=arguments.length,q=new Array(R),L=0;L<R;L++)q[L]=arguments[L];this._userLogHandler&&this._userLogHandler(this,N.VERBOSE,...q),this._logHandler(this,N.VERBOSE,...q)}info(){for(var R=arguments.length,q=new Array(R),L=0;L<R;L++)q[L]=arguments[L];this._userLogHandler&&this._userLogHandler(this,N.INFO,...q),this._logHandler(this,N.INFO,...q)}warn(){for(var R=arguments.length,q=new Array(R),L=0;L<R;L++)q[L]=arguments[L];this._userLogHandler&&this._userLogHandler(this,N.WARN,...q),this._logHandler(this,N.WARN,...q)}error(){for(var R=arguments.length,q=new Array(R),L=0;L<R;L++)q[L]=arguments[L];this._userLogHandler&&this._userLogHandler(this,N.ERROR,...q),this._logHandler(this,N.ERROR,...q)}}function C(R){B.forEach((q=>{q.setLogLevel(R)}))}function e(R,q){for(const L of B){let B=null;q&&q.level&&(B=h[q.level]),L.userLogHandler=null===R?null:function(q,L){for(var h=arguments.length,Z=new Array(h>2?h-2:0),z=2;z<h;z++)Z[z-2]=arguments[z];const Y=Z.map((R=>{if(null==R)return null;if("string"===typeof R)return R;if("number"===typeof R||"boolean"===typeof R)return R.toString();if(R instanceof Error)return R.message;try{return JSON.stringify(R)}catch(q){return null}})).filter((R=>R)).join(" ");L>=(null!==B&&void 0!==B?B:q.logLevel)&&R({level:N[L].toLowerCase(),message:Y,args:Z,type:q.name})}}}}}]);