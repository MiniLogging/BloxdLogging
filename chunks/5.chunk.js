/*! For license information please see 8sk687.5.643fff55.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[5],{10875:(s,Z,o)=>{o.d(Z,{A:()=>e,B:()=>Q,F:()=>B,H:()=>D,K:()=>k,L:()=>Y,P:()=>f,T:()=>L,U:()=>d,X:()=>U,Z:()=>b,ab:()=>A,d:()=>z,e:()=>i,eb:()=>R,g:()=>F,i:()=>H,ib:()=>l,jb:()=>u,l:()=>O,p:()=>a,t:()=>x,u:()=>c,x:()=>V});const t=function(s){const Z=[];let o=0;for(let t=0;t<s.length;t++){let j=s.charCodeAt(t);j<128?Z[o++]=j:j<2048?(Z[o++]=j>>6|192,Z[o++]=63&j|128):55296===(64512&j)&&t+1<s.length&&56320===(64512&s.charCodeAt(t+1))?(j=65536+((1023&j)<<10)+(1023&s.charCodeAt(++t)),Z[o++]=j>>18|240,Z[o++]=j>>12&63|128,Z[o++]=j>>6&63|128,Z[o++]=63&j|128):(Z[o++]=j>>12|224,Z[o++]=j>>6&63|128,Z[o++]=63&j|128)}return Z},j={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(s,Z){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,t=[];for(let j=0;j<s.length;j+=3){const Z=s[j],S=j+1<s.length,a=S?s[j+1]:0,O=j+2<s.length,v=O?s[j+2]:0,G=Z>>2,B=(3&Z)<<4|a>>4;let Q=(15&a)<<2|v>>6,D=63&v;O||(D=64,S||(Q=64)),t.push(o[G],o[B],o[Q],o[D])}return t.join("")},encodeString(s,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(s):this.encodeByteArray(t(s),Z)},decodeString(s,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(s):function(s){const Z=[];let o=0,t=0;for(;o<s.length;){const j=s[o++];if(j<128)Z[t++]=String.fromCharCode(j);else if(j>191&&j<224){const S=s[o++];Z[t++]=String.fromCharCode((31&j)<<6|63&S)}else if(j>239&&j<365){const S=((7&j)<<18|(63&s[o++])<<12|(63&s[o++])<<6|63&s[o++])-65536;Z[t++]=String.fromCharCode(55296+(S>>10)),Z[t++]=String.fromCharCode(56320+(1023&S))}else{const S=s[o++],a=s[o++];Z[t++]=String.fromCharCode((15&j)<<12|(63&S)<<6|63&a)}}return Z.join("")}(this.decodeStringToByteArray(s,Z))},decodeStringToByteArray(s,Z){this.init_();const o=Z?this.charToByteMapWebSafe_:this.charToByteMap_,t=[];for(let j=0;j<s.length;){const Z=o[s.charAt(j++)],a=j<s.length?o[s.charAt(j)]:0;++j;const O=j<s.length?o[s.charAt(j)]:64;++j;const v=j<s.length?o[s.charAt(j)]:64;if(++j,null==Z||null==a||null==O||null==v)throw new S;const G=Z<<2|a>>4;if(t.push(G),64!==O){const s=a<<4&240|O>>2;if(t.push(s),64!==v){const s=O<<6&192|v;t.push(s)}}}return t},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class S extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(s){return function(s){const Z=t(s);return j.encodeByteArray(Z,!0)}(s).replace(/\./g,"")},O=function(s){try{return j.decodeString(s,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};const v=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof o.g)return o.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,G=()=>{try{return v()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(o){return}const Z=s&&O(s[1]);return Z&&JSON.parse(Z)})()}catch(s){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`)}},B=s=>{var Z,o;return null===(o=null===(Z=G())||void 0===Z?void 0:Z.emulatorHosts)||void 0===o?void 0:o[s]},Q=()=>{var s;return null===(s=G())||void 0===s?void 0:s.config},D=s=>{var Z;return null===(Z=G())||void 0===Z?void 0:Z[`_${s}`]};class z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((s,Z)=>{this.resolve=s,this.reject=Z}))}wrapCallback(s){return(Z,o)=>{Z?this.reject(Z):this.resolve(o),"function"===typeof s&&(this.promise.catch((()=>{})),1===s.length?s(Z):s(Z,o))}}}function Y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function b(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())}function f(){const s="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof s&&void 0!==s.id}function A(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function d(){const s=Y();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function U(){try{return"object"===typeof indexedDB}catch(s){return!1}}function u(){return new Promise(((s,Z)=>{try{let o=!0;const t="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(t);j.onsuccess=()=>{j.result.close(),o||self.indexedDB.deleteDatabase(t),s(!0)},j.onupgradeneeded=()=>{o=!1},j.onerror=()=>{var s;Z((null===(s=j.error)||void 0===s?void 0:s.message)||"")}}catch(o){Z(o)}}))}function H(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class F extends Error{constructor(s,Z,o){super(Z),this.code=s,this.customData=o,this.name="FirebaseError",Object.setPrototypeOf(this,F.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,i.prototype.create)}}class i{constructor(s,Z,o){this.service=s,this.serviceName=Z,this.errors=o}create(s){const Z=(arguments.length<=1?void 0:arguments[1])||{},o=`${this.service}/${s}`,t=this.errors[s],j=t?function(s,Z){return s.replace(N,((s,o)=>{const t=Z[o];return null!=t?String(t):`<${o}?>`}))}(t,Z):"Error",S=`${this.serviceName}: ${j} (${o}).`;return new F(o,S,Z)}}const N=/\{\$([^}]+)}/g;function L(s){for(const Z in s)if(Object.prototype.hasOwnProperty.call(s,Z))return!1;return!0}function V(s,Z){if(s===Z)return!0;const o=Object.keys(s),t=Object.keys(Z);for(const j of o){if(!t.includes(j))return!1;const o=s[j],S=Z[j];if(g(o)&&g(S)){if(!V(o,S))return!1}else if(o!==S)return!1}for(const j of t)if(!o.includes(j))return!1;return!0}function g(s){return null!==s&&"object"===typeof s}function l(s){const Z=[];for(const[o,t]of Object.entries(s))Array.isArray(t)?t.forEach((s=>{Z.push(encodeURIComponent(o)+"="+encodeURIComponent(s))})):Z.push(encodeURIComponent(o)+"="+encodeURIComponent(t));return Z.length?"&"+Z.join("&"):""}function R(s){const Z={};return s.replace(/^\?/,"").split("&").forEach((s=>{if(s){const[o,t]=s.split("=");Z[decodeURIComponent(o)]=decodeURIComponent(t)}})),Z}function e(s){const Z=s.indexOf("?");if(!Z)return"";const o=s.indexOf("#",Z);return s.substring(Z,o>0?o:void 0)}function c(s,Z){const o=new w(s,Z);return o.subscribe.bind(o)}class w{constructor(s,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then((()=>{s(this)})).catch((s=>{this.error(s)}))}next(s){this.forEachObserver((Z=>{Z.next(s)}))}error(s){this.forEachObserver((Z=>{Z.error(s)})),this.close(s)}complete(){this.forEachObserver((s=>{s.complete()})),this.close()}subscribe(s,Z,o){let t;if(void 0===s&&void 0===Z&&void 0===o)throw new Error("Missing Observer.");t=function(s,Z){if("object"!==typeof s||null===s)return!1;for(const o of Z)if(o in s&&"function"===typeof s[o])return!0;return!1}(s,["next","error","complete"])?s:{next:s,error:Z,complete:o},void 0===t.next&&(t.next=X),void 0===t.error&&(t.error=X),void 0===t.complete&&(t.complete=X);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?t.error(this.finalError):t.complete()}catch(s){}})),this.observers.push(t),j}unsubscribeOne(s){void 0!==this.observers&&void 0!==this.observers[s]&&(delete this.observers[s],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(s){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,s)}sendOne(s,Z){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[s])try{Z(this.observers[s])}catch(o){"undefined"!==typeof console&&console.error&&console.error(o)}}))}close(s){this.finalized||(this.finalized=!0,void 0!==s&&(this.finalError=s),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function X(){}const W=1e3,q=2,h=144e5,M=.5;function x(s){let Z=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;const o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:W)*Math.pow(Z,s),t=Math.round(M*o*(Math.random()-.5)*2);return Math.min(h,o+t)}function k(s){return s&&s._delegate?s._delegate:s}},10860:(s,Z,o)=>{o.d(Z,{c:()=>S.g,g:()=>Qs,i:()=>n,j:()=>os,l:()=>ts,n:()=>ss,r:()=>Os,t:()=>Zs,w:()=>Ss,z:()=>js,C:()=>as,F:()=>bs,L:()=>zs,I:()=>Ys,P:()=>Ds,Q:()=>As,R:()=>fs,V:()=>ds});var t=o(10867),j=o(10877),S=o(10875);let a,O;const v=new WeakMap,G=new WeakMap,B=new WeakMap,Q=new WeakMap,D=new WeakMap;let z={get(s,Z,o){if(s instanceof IDBTransaction){if("done"===Z)return G.get(s);if("objectStoreNames"===Z)return s.objectStoreNames||B.get(s);if("store"===Z)return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return f(s[Z])},set:(s,Z,o)=>(s[Z]=o,!0),has:(s,Z)=>s instanceof IDBTransaction&&("done"===Z||"store"===Z)||Z in s};function Y(s){return s!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(s)?function(){for(var Z=arguments.length,o=new Array(Z),t=0;t<Z;t++)o[t]=arguments[t];return s.apply(A(this),o),f(v.get(this))}:function(){for(var Z=arguments.length,o=new Array(Z),t=0;t<Z;t++)o[t]=arguments[t];return f(s.apply(A(this),o))}:function(Z){for(var o=arguments.length,t=new Array(o>1?o-1:0),j=1;j<o;j++)t[j-1]=arguments[j];const S=s.call(A(this),Z,...t);return B.set(S,Z.sort?Z.sort():[Z]),f(S)}}function b(s){return"function"===typeof s?Y(s):(s instanceof IDBTransaction&&function(s){if(G.has(s))return;const Z=new Promise(((Z,o)=>{const t=()=>{s.removeEventListener("complete",j),s.removeEventListener("error",S),s.removeEventListener("abort",S)},j=()=>{Z(),t()},S=()=>{o(s.error||new DOMException("AbortError","AbortError")),t()};s.addEventListener("complete",j),s.addEventListener("error",S),s.addEventListener("abort",S)}));G.set(s,Z)}(s),Z=s,(a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((s=>Z instanceof s))?new Proxy(s,z):s);var Z}function f(s){if(s instanceof IDBRequest)return function(s){const Z=new Promise(((Z,o)=>{const t=()=>{s.removeEventListener("success",j),s.removeEventListener("error",S)},j=()=>{Z(f(s.result)),t()},S=()=>{o(s.error),t()};s.addEventListener("success",j),s.addEventListener("error",S)}));return Z.then((Z=>{Z instanceof IDBCursor&&v.set(Z,s)})).catch((()=>{})),D.set(Z,s),Z}(s);if(Q.has(s))return Q.get(s);const Z=b(s);return Z!==s&&(Q.set(s,Z),D.set(Z,s)),Z}const A=s=>D.get(s);const d=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],u=new Map;function H(s,Z){if(!(s instanceof IDBDatabase)||Z in s||"string"!==typeof Z)return;if(u.get(Z))return u.get(Z);const o=Z.replace(/FromIndex$/,""),t=Z!==o,j=U.includes(o);if(!(o in(t?IDBIndex:IDBObjectStore).prototype)||!j&&!d.includes(o))return;const S=async function(s){const Z=this.transaction(s,j?"readwrite":"readonly");let S=Z.store;for(var a=arguments.length,O=new Array(a>1?a-1:0),v=1;v<a;v++)O[v-1]=arguments[v];return t&&(S=S.index(O.shift())),(await Promise.all([S[o](...O),j&&Z.done]))[0]};return u.set(Z,S),S}z=(s=>({...s,get:(Z,o,t)=>H(Z,o)||s.get(Z,o,t),has:(Z,o)=>!!H(Z,o)||s.has(Z,o)}))(z);class F{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map((s=>{if(function(s){const Z=s.getComponent();return"VERSION"===(null===Z||void 0===Z?void 0:Z.type)}(s)){const Z=s.getImmediate();return`${Z.library}/${Z.version}`}return null})).filter((s=>s)).join(" ")}}const i="@firebase/app",N="0.9.13",L=new j.e("@firebase/app"),V="@firebase/app-compat",g="@firebase/analytics-compat",l="@firebase/analytics",R="@firebase/app-check-compat",e="@firebase/app-check",c="@firebase/auth",w="@firebase/auth-compat",X="@firebase/database",W="@firebase/database-compat",q="@firebase/functions",h="@firebase/functions-compat",M="@firebase/installations",x="@firebase/installations-compat",k="@firebase/messaging",y="@firebase/messaging-compat",I="@firebase/performance",C="@firebase/performance-compat",K="@firebase/remote-config",p="@firebase/remote-config-compat",E="@firebase/storage",P="@firebase/storage-compat",r="@firebase/firestore",T="@firebase/firestore-compat",m="firebase",n="[DEFAULT]",J={[i]:"fire-core",[V]:"fire-core-compat",[l]:"fire-analytics",[g]:"fire-analytics-compat",[e]:"fire-app-check",[R]:"fire-app-check-compat",[c]:"fire-auth",[w]:"fire-auth-compat",[X]:"fire-rtdb",[W]:"fire-rtdb-compat",[q]:"fire-fn",[h]:"fire-fn-compat",[M]:"fire-iid",[x]:"fire-iid-compat",[k]:"fire-fcm",[y]:"fire-fcm-compat",[I]:"fire-perf",[C]:"fire-perf-compat",[K]:"fire-rc",[p]:"fire-rc-compat",[E]:"fire-gcs",[P]:"fire-gcs-compat",[r]:"fire-fst",[T]:"fire-fst-compat","fire-js":"fire-js",[m]:"fire-js-all"},ss=new Map,Zs=new Map;function os(s,Z){try{s.container.Av(Z)}catch(o){L.debug(`Component ${Z.name} failed to register with FirebaseApp ${s.name}`,o)}}function ts(s,Z){s.container.addOrOverwriteComponent(Z)}function js(s){const Z=s.name;if(Zs.has(Z))return L.debug(`There were multiple attempts to register component ${Z}.`),!1;Zs.set(Z,s);for(const o of ss.values())os(o,s);return!0}function Ss(s,Z){const o=s.container.getProvider("heartbeat").getImmediate({optional:!0});return o&&o.triggerHeartbeat(),s.container.getProvider(Z)}function as(s,Z){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;Ss(s,Z).clearInstance(o)}function Os(){Zs.clear()}const vs={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Gs=new S.e("app","Firebase",vs);class Bs{constructor(s,Z,o){this._isDeleted=!1,this._options=Object.assign({},s),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=o,this.container.Av(new t.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw Gs.create("app-deleted",{appName:this._name})}}const Qs="9.23.0";function Ds(s){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s;if("object"!==typeof Z){Z={name:Z}}const j=Object.assign({name:n,automaticDataCollectionEnabled:!1},Z),a=j.name;if("string"!==typeof a||!a)throw Gs.create("bad-app-name",{appName:String(a)});if(o||(o=(0,S.B)()),!o)throw Gs.create("no-options");const O=ss.get(a);if(O){if((0,S.x)(o,O.options)&&(0,S.x)(j,O.config))return O;throw Gs.create("duplicate-app",{appName:a})}const v=new t.b(a);for(const t of Zs.values())v.Av(t);const G=new Bs(o,j,v);return ss.set(a,G),G}function zs(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;const Z=ss.get(s);if(!Z&&s===n&&(0,S.B)())return Ds();if(!Z)throw Gs.create("no-app",{appName:s});return Z}function Ys(){return Array.from(ss.values())}async function bs(s){const Z=s.name;ss.has(Z)&&(ss.delete(Z),await Promise.all(s.container.getProviders().map((s=>s.delete()))),s.isDeleted=!0)}function fs(s,Z,o){var j;let S=null!==(j=J[s])&&void 0!==j?j:s;o&&(S+=`-${o}`);const a=S.match(/\s|\//),O=Z.match(/\s|\//);if(a||O){const s=[`Unable to register library "${S}" with version "${Z}":`];return a&&s.push(`library name "${S}" contains illegal characters (whitespace or "/")`),a&&O&&s.push("and"),O&&s.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void L.warn(s.join(" "))}js(new t.d(`${S}-version`,(()=>({library:S,version:Z})),"VERSION"))}function As(s,Z){if(null!==s&&"function"!==typeof s)throw Gs.create("invalid-log-argument");(0,j.j)(s,Z)}function ds(s){(0,j.h)(s)}const Us="firebase-heartbeat-store";let us=null;function Hs(){return us||(us=function(s,Z){let{blocked:o,upgrade:t,blocking:j,terminated:S}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(s,Z),O=f(a);return t&&a.addEventListener("upgradeneeded",(s=>{t(f(a.result),s.oldVersion,s.newVersion,f(a.transaction),s)})),o&&a.addEventListener("blocked",(s=>o(s.oldVersion,s.newVersion,s))),O.then((s=>{S&&s.addEventListener("close",(()=>S())),j&&s.addEventListener("versionchange",(s=>j(s.oldVersion,s.newVersion,s)))})).catch((()=>{})),O}("firebase-heartbeat-database",1,{upgrade:(s,Z)=>{if(0===Z)s.createObjectStore(Us)}}).catch((s=>{throw Gs.create("idb-open",{originalErrorMessage:s.message})}))),us}async function Fs(s,Z){try{const o=(await Hs()).transaction(Us,"readwrite"),t=o.objectStore(Us);await t.put(Z,is(s)),await o.done}catch(o){if(o instanceof S.g)L.warn(o.message);else{const s=Gs.create("idb-set",{originalErrorMessage:null===o||void 0===o?void 0:o.message});L.warn(s.message)}}}function is(s){return`${s.name}!${s.options.appId}`}class Ns{constructor(s){this.container=s,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this.IB=new Vs(Z),this._heartbeatsCachePromise=this.IB.read().then((s=>(this._heartbeatsCache=s,s)))}async triggerHeartbeat(){const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Z=Ls();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==Z&&!this._heartbeatsCache.heartbeats.some((s=>s.date===Z)))return this._heartbeatsCache.heartbeats.push({date:Z,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((s=>{const Z=new Date(s.date).valueOf();return Date.now()-Z<=2592e6})),this.IB.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const s=Ls(),{heartbeatsToSend:Z,unsentEntries:o}=function(s){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const o=[];let t=s.slice();for(const j of s){const s=o.find((s=>s.agent===j.agent));if(s){if(s.dates.push(j.date),gs(o)>Z){s.dates.pop();break}}else if(o.push({agent:j.agent,dates:[j.date]}),gs(o)>Z){o.pop();break}t=t.slice(1)}return{heartbeatsToSend:o,unsentEntries:t}}(this._heartbeatsCache.heartbeats),t=(0,S.p)(JSON.stringify({version:2,heartbeats:Z}));return this._heartbeatsCache.lastSentHeartbeatDate=s,o.length>0?(this._heartbeatsCache.heartbeats=o,await this.IB.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.IB.overwrite(this._heartbeatsCache)),t}}function Ls(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,S.X)()&&(0,S.jb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(s){try{const Z=await Hs();return await Z.transaction(Us).objectStore(Us).get(is(s))}catch(Z){if(Z instanceof S.g)L.warn(Z.message);else{const s=Gs.create("idb-get",{originalErrorMessage:null===Z||void 0===Z?void 0:Z.message});L.warn(s.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(s){var Z;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fs(this.app,{lastSentHeartbeatDate:null!==(Z=s.lastSentHeartbeatDate)&&void 0!==Z?Z:o.lastSentHeartbeatDate,heartbeats:s.heartbeats})}}async add(s){var Z;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fs(this.app,{lastSentHeartbeatDate:null!==(Z=s.lastSentHeartbeatDate)&&void 0!==Z?Z:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...s.heartbeats]})}}}function gs(s){return(0,S.p)(JSON.stringify({version:2,heartbeats:s})).length}var ls;ls="",js(new t.d("platform-logger",(s=>new F(s)),"PRIVATE")),js(new t.d("heartbeat",(s=>new Ns(s)),"PRIVATE")),fs(i,N,ls),fs(i,N,"esm2017"),fs("fire-js","")},10867:(s,Z,o)=>{o.d(Z,{b:()=>O,d:()=>j});var t=o(10875);class j{constructor(s,Z,o){this.name=s,this.instanceFactory=Z,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}const S="[DEFAULT]";class a{constructor(s,Z){this.name=s,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const Z=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(Z)){const s=new t.d;if(this.instancesDeferred.set(Z,s),this.isInitialized(Z)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:Z});o&&s.resolve(o)}catch(o){}}return this.instancesDeferred.get(Z).promise}getImmediate(s){var Z;const o=this.normalizeInstanceIdentifier(null===s||void 0===s?void 0:s.identifier),t=null!==(Z=null===s||void 0===s?void 0:s.optional)&&void 0!==Z&&Z;if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(j){if(t)return null;throw j}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,this.shouldAutoInitialize()){if(function(s){return"EAGER"===s.instantiationMode}(s))try{this.getOrInitializeService({instanceIdentifier:S})}catch(Z){}for(const[s,o]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(s);try{const s=this.getOrInitializeService({instanceIdentifier:t});o.resolve(s)}catch(Z){}}}}clearInstance(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}async delete(){const s=Array.from(this.instances.values());await Promise.all([...s.filter((s=>"INTERNAL"in s)).map((s=>s.INTERNAL.delete())),...s.filter((s=>"_delete"in s)).map((s=>s._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return this.instances.has(s)}getOptions(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return this.instancesOptions.get(s)||{}}initialize(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:Z={}}=s,o=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const t=this.getOrInitializeService({instanceIdentifier:o,options:Z});for(const[j,S]of this.instancesDeferred.entries()){o===this.normalizeInstanceIdentifier(j)&&S.resolve(t)}return t}HB(s,Z){var o;const t=this.normalizeInstanceIdentifier(Z),j=null!==(o=this.onInitCallbacks.get(t))&&void 0!==o?o:new Set;j.add(s),this.onInitCallbacks.set(t,j);const S=this.instances.get(t);return S&&s(S,t),()=>{j.delete(s)}}invokeOnInitCallbacks(s,Z){const o=this.onInitCallbacks.get(Z);if(o)for(const j of o)try{j(s,Z)}catch(t){}}getOrInitializeService(s){let{instanceIdentifier:Z,options:o={}}=s,t=this.instances.get(Z);if(!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(j=Z,j===S?void 0:j),options:o}),this.instances.set(Z,t),this.instancesOptions.set(Z,o),this.invokeOnInitCallbacks(t,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,t)}catch(a){}var j;return t||null}normalizeInstanceIdentifier(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;return this.component?this.component.multipleInstances?s:S:s}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(s){this.name=s,this.providers=new Map}Av(s){const Z=this.getProvider(s.name);if(Z.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);Z.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.Av(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const Z=new a(s,this);return this.providers.set(s,Z),Z}getProviders(){return Array.from(this.providers.values())}}},10877:(s,Z,o)=>{o.d(Z,{d:()=>j,e:()=>G,h:()=>B,j:()=>Q});const t=[];var j;!function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"}(j||(j={}));const S={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},a=j.INFO,O={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},v=function(s,Z){if(Z<s.logLevel)return;const o=(new Date).toISOString(),t=O[Z];if(!t)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);for(var j=arguments.length,S=new Array(j>2?j-2:0),a=2;a<j;a++)S[a-2]=arguments[a];console[t](`[${o}]  ${s.name}:`,...S)};class G{constructor(s){this.name=s,this._logLevel=a,this._logHandler=v,this._userLogHandler=null,t.push(this)}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in j))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel="string"===typeof s?S[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if("function"!==typeof s)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(){for(var s=arguments.length,Z=new Array(s),o=0;o<s;o++)Z[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...Z),this._logHandler(this,j.DEBUG,...Z)}log(){for(var s=arguments.length,Z=new Array(s),o=0;o<s;o++)Z[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...Z),this._logHandler(this,j.VERBOSE,...Z)}info(){for(var s=arguments.length,Z=new Array(s),o=0;o<s;o++)Z[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,j.INFO,...Z),this._logHandler(this,j.INFO,...Z)}warn(){for(var s=arguments.length,Z=new Array(s),o=0;o<s;o++)Z[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,j.WARN,...Z),this._logHandler(this,j.WARN,...Z)}error(){for(var s=arguments.length,Z=new Array(s),o=0;o<s;o++)Z[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,j.ERROR,...Z),this._logHandler(this,j.ERROR,...Z)}}function B(s){t.forEach((Z=>{Z.setLogLevel(s)}))}function Q(s,Z){for(const o of t){let t=null;Z&&Z.level&&(t=S[Z.level]),o.userLogHandler=null===s?null:function(Z,o){for(var S=arguments.length,a=new Array(S>2?S-2:0),O=2;O<S;O++)a[O-2]=arguments[O];const v=a.map((s=>{if(null==s)return null;if("string"===typeof s)return s;if("number"===typeof s||"boolean"===typeof s)return s.toString();if(s instanceof Error)return s.message;try{return JSON.stringify(s)}catch(Z){return null}})).filter((s=>s)).join(" ");o>=(null!==t&&void 0!==t?t:Z.logLevel)&&s({level:j[o].toLowerCase(),message:v,args:a,type:Z.name})}}}}}]);