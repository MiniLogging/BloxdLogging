"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[88],{14135:(Z,U,n)=>{n.r(U),n.d(U,{FlowGraphMultiGateBlock:()=>V});var i=n(633),B=n(12834),l=n(12826),H=n(12817);class V extends B.b{constructor(Z){super(Z),this.config=Z,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",l.g,new H.d(-1)),this.setNumberOfOutputSignals(null===Z||void 0===Z?void 0:Z.outputSignalCount)}_getNextIndex(Z){if(Z.includes(!1)||this.config.isLoop&&Z.fill(!1),this.config.isRandom){const U=Z.map(((Z,U)=>Z?-1:U)).filter((Z=>-1!==Z));return U.length?U[Math.floor(Math.random()*U.length)]:-1}return Z.indexOf(!1)}setNumberOfOutputSignals(){let Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>Z;){const Z=this.outputSignals.pop();Z&&(Z.disconnectFromAll(),this._unregisterSignalOutput(Z.name))}for(;this.outputSignals.length<Z;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(Z,U){if(Z._hasExecutionVariable(this,"indexesUsed")||Z._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),U===this.reset)return Z._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new H.d(-1),Z);const n=Z._getExecutionVariable(this,"indexesUsed",[]),i=this._getNextIndex(n);i>-1&&(this.lastIndex.setValue(new H.d(i),Z),n[i]=!0,Z._setExecutionVariable(this,"indexesUsed",n),this.outputSignals[i]._activateSignal(Z))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(Z){super.serialize(Z),Z.config.outputSignalCount=this.config.outputSignalCount,Z.config.isRandom=this.config.isRandom,Z.config.loop=this.config.isLoop,Z.config.startIndex=this.config.startIndex}}(0,i.g)("FlowGraphMultiGateBlock",V)}}]);