"use strict";(self["269hv5nclphh"]=self["269hv5nclphh"]||[]).push([[93],{15756:(E,H,d)=>{d.r(H),d.d(H,{FlowGraphJsonPointerParserBlock:()=>M});var n=d(14095),Z=d(14103);const I=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class g{constructor(E,H){this.path=E,this.ownerBlock=H,this.templatedInputs=[];let d=I.exec(E);const g=new Set;for(;d;){const[,l]=d;if(g.has(l))throw new Error("Duplicate template variable detected.");g.add(l),this.templatedInputs.push(H.registerDataInput(l,Z.j,new n.c(0))),d=I.exec(E)}}getAccessor(E,H){let d=this.path;for(const n of this.templatedInputs){const E=n.getValue(H).value;if("number"!==typeof E||E<0)throw new Error("Invalid value for templated input.");d=d.replace(`{${n.name}}`,E.toString())}return E.convert(d)}}var l=d(12344),r=d(12384),t=d(12437),S=d(15610);class M extends S.e{constructor(E){super(Z.e,E),this.config=E,this.object=this.registerDataOutput("object",Z.e),this.propertyName=this.registerDataOutput("propertyName",Z.e),this.setterFunction=this.registerDataOutput("setFunction",Z.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",Z.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",Z.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new g(E.jsonPointer,this)}_doOperation(E){var H,d,n;const Z=this.templateComponent.getAccessor(this.config.pathConverter,E),I=Z.info.get(Z.object),g=null===(H=(d=Z.info).getTarget)||void 0===H?void 0:H.call(d,Z.object),l=null===(n=Z.info.getPropertyName)||void 0===n?void 0:n[0](Z.object);if(!g)throw new Error("Object is undefined");return this.object.setValue(g,E),l&&this.propertyName.setValue(l,E),I}_setPropertyValue(E,H,d,n){var Z,I;const g=this.templateComponent.getAccessor(this.config.pathConverter,n),l=g.info.type;l.startsWith("Color")&&(d=V(d,l)),null===(Z=(I=g.info).set)||void 0===Z||Z.call(I,d,g.object)}_getPropertyValue(E,H,d){const n=this.templateComponent.getAccessor(this.config.pathConverter,d),Z=n.info.type,I=n.info.get(n.object);return Z.startsWith("Color")?function(E){if(E instanceof t.DH)return new r.wH(E.r,E.g,E.b);if(E instanceof t.gg)return new r.Vector4(E.r,E.g,E.b,E.a);throw new Error("Invalid color type")}(I):I}_getInterpolationAnimationPropertyInfo(E,H,d){const n=this.templateComponent.getAccessor(this.config.pathConverter,d);return(E,H,d,Z)=>{var I;const g=[],l=n.info.type;return l.startsWith("Color")&&(E=E.map((E=>({frame:E.frame,value:V(E.value,l)})))),null===(I=n.info.interpolation)||void 0===I||I.forEach(((H,I)=>{var l;const r=(null===(l=n.info.getPropertyName)||void 0===l?void 0:l[I](n.object))||"Animation-interpolation-"+I;let t=E;d!==H.type&&(t=E.map((E=>({frame:E.frame,value:H.getValue(void 0,E.value.kd?E.value.kd():[E.value],0,1)}))));const S=H.buildAnimations(n.object,r,60,t);for(const E of S)Z&&E.babylonAnimation.setEasingFunction(Z),g.push(E.babylonAnimation)})),g}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function V(E,H){return E.getClassName().startsWith("Color")?E:"DH"===H?new t.DH(E.x,E.y,E.z):"gg"===H?new t.gg(E.x,E.y,E.z,E.w):E}(0,l.e)("FlowGraphJsonPointerParserBlock",M)},15610:(E,H,d)=>{d.d(H,{e:()=>l});var n=d(14125),Z=d(14103);const I="cachedOperationValue",g="cachedExecutionId";class l extends n.c{constructor(E,H){super(H),this.value=this.registerDataOutput("value",E),this.isValid=this.registerDataOutput("isValid",Z.h)}_updateOutputs(E){const H=E._getExecutionVariable(this,g,-1),d=E._getExecutionVariable(this,I,null);if(void 0!==d&&null!==d&&H===E.executionId)this.isValid.setValue(!0,E),this.value.setValue(d,E);else try{const H=this._doOperation(E);if(void 0===H||null===H)return void this.isValid.setValue(!1,E);E._setExecutionVariable(this,I,H),E._setExecutionVariable(this,g,E.executionId),this.value.setValue(H,E),this.isValid.setValue(!0,E)}catch(n){this.isValid.setValue(!1,E)}}}}}]);