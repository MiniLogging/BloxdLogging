"use strict";(self.c2c3ycupenc=self.c2c3ycupenc||[]).push([[93],{15089:(c,r,D)=>{D.r(r),D.d(r,{FlowGraphJsonPointerParserBlock:()=>E});var W=D(13390),B=D(13392);const t=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class u{constructor(c,r){this.path=c,this.ownerBlock=r,this.templatedInputs=[];let D=t.exec(c);const u=new Set;for(;D;){const[,a]=D;if(u.has(a))throw new Error("Duplicate template variable detected.");u.add(a),this.templatedInputs.push(r.registerDataInput(a,B.h,new W.d(0))),D=t.exec(c)}}getAccessor(c,r){let D=this.path;for(const W of this.templatedInputs){const c=W.getValue(r).value;if("number"!==typeof c||c<0)throw new Error("Invalid value for templated input.");D=D.replace(`{${W.name}}`,c.toString())}return c.convert(D)}}var a=D(11637),H=D(11683),x=D(11722),M=D(14938);class E extends M.c{constructor(c){super(B.c,c),this.config=c,this.object=this.registerDataOutput("object",B.c),this.propertyName=this.registerDataOutput("propertyName",B.c),this.setterFunction=this.registerDataOutput("setFunction",B.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",B.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",B.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new u(c.jsonPointer,this)}_doOperation(c){var r,D,W;const B=this.templateComponent.getAccessor(this.config.pathConverter,c),t=B.info.get(B.object),u=null===(r=(D=B.info).getTarget)||void 0===r?void 0:r.call(D,B.object),a=null===(W=B.info.getPropertyName)||void 0===W?void 0:W[0](B.object);if(!u)throw new Error("Object is undefined");return this.object.setValue(u,c),a&&this.propertyName.setValue(a,c),t}_setPropertyValue(c,r,D,W){var B,t;const u=this.templateComponent.getAccessor(this.config.pathConverter,W),a=u.info.type;a.startsWith("Color")&&(D=m(D,a)),null===(B=(t=u.info).set)||void 0===B||B.call(t,D,u.object)}_getPropertyValue(c,r,D){const W=this.templateComponent.getAccessor(this.config.pathConverter,D),B=W.info.type,t=W.info.get(W.object);return B.startsWith("Color")?function(c){if(c instanceof x.Xr)return new H.Zr(c.r,c.g,c.b);if(c instanceof x.Xa)return new H.Vector4(c.r,c.g,c.b,c.a);throw new Error("Invalid color type")}(t):t}_getInterpolationAnimationPropertyInfo(c,r,D){const W=this.templateComponent.getAccessor(this.config.pathConverter,D);return(c,r,D,B)=>{var t;const u=[],a=W.info.type;return a.startsWith("Color")&&(c=c.map((c=>({frame:c.frame,value:m(c.value,a)})))),null===(t=W.info.interpolation)||void 0===t||t.forEach(((r,t)=>{var a;const H=(null===(a=W.info.getPropertyName)||void 0===a?void 0:a[t](W.object))||"Animation-interpolation-"+t;let x=c;D!==r.type&&(x=c.map((c=>({frame:c.frame,value:r.getValue(void 0,c.value.Ma?c.value.Ma():[c.value],0,1)}))));const M=r.buildAnimations(W.object,H,60,x);for(const c of M)B&&c.babylonAnimation.setEasingFunction(B),u.push(c.babylonAnimation)})),u}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function m(c,r){return c.getClassName().startsWith("Color")?c:"Xr"===r?new x.Xr(c.x,c.y,c.z):"Xa"===r?new x.Xa(c.x,c.y,c.z,c.w):c}(0,a.e)("FlowGraphJsonPointerParserBlock",E)},14938:(c,r,D)=>{D.d(r,{c:()=>a});var W=D(13408),B=D(13392);const t="cachedOperationValue",u="cachedExecutionId";class a extends W.d{constructor(c,r){super(r),this.value=this.registerDataOutput("value",c),this.isValid=this.registerDataOutput("isValid",B.e)}_updateOutputs(c){const r=c._getExecutionVariable(this,u,-1),D=c._getExecutionVariable(this,t,null);if(void 0!==D&&null!==D&&r===c.executionId)this.isValid.setValue(!0,c),this.value.setValue(D,c);else try{const r=this._doOperation(c);if(void 0===r||null===r)return void this.isValid.setValue(!1,c);c._setExecutionVariable(this,t,r),c._setExecutionVariable(this,u,c.executionId),this.value.setValue(r,c),this.isValid.setValue(!0,c)}catch(W){this.isValid.setValue(!1,c)}}}}}]);