"use strict";(self.agop5zpabxv=self.agop5zpabxv||[]).push([[93],{15680:(H,u,J)=>{J.r(u),J.d(u,{FlowGraphJsonPointerParserBlock:()=>G});var O=J(14011),U=J(14018);const h=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class w{constructor(H,u){this.path=H,this.ownerBlock=u,this.templatedInputs=[];let J=h.exec(H);const w=new Set;for(;J;){const[,g]=J;if(w.has(g))throw new Error("Duplicate template variable detected.");w.add(g),this.templatedInputs.push(u.registerDataInput(g,U.j,new O.d(0))),J=h.exec(H)}}getAccessor(H,u){let J=this.path;for(const O of this.templatedInputs){const H=O.getValue(u).value;if("number"!==typeof H||H<0)throw new Error("Invalid value for templated input.");J=J.replace(`{${O.name}}`,H.toString())}return H.convert(J)}}var g=J(12304),B=J(12338),b=J(12379),d=J(15515);class G extends d.b{constructor(H){super(U.d,H),this.config=H,this.object=this.registerDataOutput("object",U.d),this.propertyName=this.registerDataOutput("propertyName",U.d),this.setterFunction=this.registerDataOutput("setFunction",U.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",U.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",U.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new w(H.jsonPointer,this)}_doOperation(H){var u,J,O;const U=this.templateComponent.getAccessor(this.config.pathConverter,H),h=U.info.get(U.object),w=null===(u=(J=U.info).getTarget)||void 0===u?void 0:u.call(J,U.object),g=null===(O=U.info.getPropertyName)||void 0===O?void 0:O[0](U.object);if(!w)throw new Error("Object is undefined");return this.object.setValue(w,H),g&&this.propertyName.setValue(g,H),h}_setPropertyValue(H,u,J,O){var U,h;const w=this.templateComponent.getAccessor(this.config.pathConverter,O),g=w.info.type;g.startsWith("Color")&&(J=P(J,g)),null===(U=(h=w.info).set)||void 0===U||U.call(h,J,w.object)}_getPropertyValue(H,u,J){const O=this.templateComponent.getAccessor(this.config.pathConverter,J),U=O.info.type,h=O.info.get(O.object);return U.startsWith("Color")?function(H){if(H instanceof b.ku)return new B.lu(H.r,H.g,H.b);if(H instanceof b.Mg)return new B.Vector4(H.r,H.g,H.b,H.a);throw new Error("Invalid color type")}(h):h}_getInterpolationAnimationPropertyInfo(H,u,J){const O=this.templateComponent.getAccessor(this.config.pathConverter,J);return(H,u,J,U)=>{var h;const w=[],g=O.info.type;return g.startsWith("Color")&&(H=H.map((H=>({frame:H.frame,value:P(H.value,g)})))),null===(h=O.info.interpolation)||void 0===h||h.forEach(((u,h)=>{var g;const B=(null===(g=O.info.getPropertyName)||void 0===g?void 0:g[h](O.object))||"Animation-interpolation-"+h;let b=H;J!==u.type&&(b=H.map((H=>({frame:H.frame,value:u.getValue(void 0,H.value.Hg?H.value.Hg():[H.value],0,1)}))));const d=u.buildAnimations(O.object,B,60,b);for(const H of d)U&&H.babylonAnimation.setEasingFunction(U),w.push(H.babylonAnimation)})),w}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function P(H,u){return H.getClassName().startsWith("Color")?H:"ku"===u?new b.ku(H.x,H.y,H.z):"Mg"===u?new b.Mg(H.x,H.y,H.z,H.w):H}(0,g.f)("FlowGraphJsonPointerParserBlock",G)},15515:(H,u,J)=>{J.d(u,{b:()=>g});var O=J(14041),U=J(14018);const h="cachedOperationValue",w="cachedExecutionId";class g extends O.b{constructor(H,u){super(u),this.value=this.registerDataOutput("value",H),this.isValid=this.registerDataOutput("isValid",U.f)}_updateOutputs(H){const u=H._getExecutionVariable(this,w,-1),J=H._getExecutionVariable(this,h,null);if(void 0!==J&&null!==J&&u===H.executionId)this.isValid.setValue(!0,H),this.value.setValue(J,H);else try{const u=this._doOperation(H);if(void 0===u||null===u)return void this.isValid.setValue(!1,H);H._setExecutionVariable(this,h,u),H._setExecutionVariable(this,w,H.executionId),this.value.setValue(u,H),this.isValid.setValue(!0,H)}catch(O){this.isValid.setValue(!1,H)}}}}}]);