"use strict";(self["5dou0t7wntc"]=self["5dou0t7wntc"]||[]).push([[93],{15119:(K,O,F)=>{F.r(O),F.d(O,{FlowGraphJsonPointerParserBlock:()=>t});var f=F(13435),r=F(13441);const l=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class q{constructor(K,O){this.path=K,this.ownerBlock=O,this.templatedInputs=[];let F=l.exec(K);const q=new Set;for(;F;){const[,J]=F;if(q.has(J))throw new Error("Duplicate template variable detected.");q.add(J),this.templatedInputs.push(O.registerDataInput(J,r.i,new f.d(0))),F=l.exec(K)}}getAccessor(K,O){let F=this.path;for(const f of this.templatedInputs){const K=f.getValue(O).value;if("number"!==typeof K||K<0)throw new Error("Invalid value for templated input.");F=F.replace(`{${f.name}}`,K.toString())}return K.convert(F)}}var J=F(11661),c=F(11713),E=F(11764),M=F(14970);class t extends M.d{constructor(K){super(r.d,K),this.config=K,this.object=this.registerDataOutput("object",r.d),this.propertyName=this.registerDataOutput("propertyName",r.d),this.setterFunction=this.registerDataOutput("setFunction",r.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",r.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",r.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new q(K.jsonPointer,this)}_doOperation(K){var O,F,f;const r=this.templateComponent.getAccessor(this.config.pathConverter,K),l=r.info.get(r.object),q=null===(O=(F=r.info).getTarget)||void 0===O?void 0:O.call(F,r.object),J=null===(f=r.info.getPropertyName)||void 0===f?void 0:f[0](r.object);if(!q)throw new Error("Object is undefined");return this.object.setValue(q,K),J&&this.propertyName.setValue(J,K),l}_setPropertyValue(K,O,F,f){var r,l;const q=this.templateComponent.getAccessor(this.config.pathConverter,f),J=q.info.type;J.startsWith("Color")&&(F=j(F,J)),null===(r=(l=q.info).set)||void 0===r||r.call(l,F,q.object)}_getPropertyValue(K,O,F){const f=this.templateComponent.getAccessor(this.config.pathConverter,F),r=f.info.type,l=f.info.get(f.object);return r.startsWith("Color")?function(K){if(K instanceof E.ZO)return new c.TO(K.r,K.g,K.b);if(K instanceof E.kJ)return new c.Vector4(K.r,K.g,K.b,K.a);throw new Error("Invalid color type")}(l):l}_getInterpolationAnimationPropertyInfo(K,O,F){const f=this.templateComponent.getAccessor(this.config.pathConverter,F);return(K,O,F,r)=>{var l;const q=[],J=f.info.type;return J.startsWith("Color")&&(K=K.map((K=>({frame:K.frame,value:j(K.value,J)})))),null===(l=f.info.interpolation)||void 0===l||l.forEach(((O,l)=>{var J;const c=(null===(J=f.info.getPropertyName)||void 0===J?void 0:J[l](f.object))||"Animation-interpolation-"+l;let E=K;F!==O.type&&(E=K.map((K=>({frame:K.frame,value:O.getValue(void 0,K.value.hf?K.value.hf():[K.value],0,1)}))));const M=O.buildAnimations(f.object,c,60,E);for(const K of M)r&&K.babylonAnimation.setEasingFunction(r),q.push(K.babylonAnimation)})),q}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function j(K,O){return K.getClassName().startsWith("Color")?K:"ZO"===O?new E.ZO(K.x,K.y,K.z):"kJ"===O?new E.kJ(K.x,K.y,K.z,K.w):K}(0,J.g)("FlowGraphJsonPointerParserBlock",t)},14970:(K,O,F)=>{F.d(O,{d:()=>J});var f=F(13471),r=F(13441);const l="cachedOperationValue",q="cachedExecutionId";class J extends f.e{constructor(K,O){super(O),this.value=this.registerDataOutput("value",K),this.isValid=this.registerDataOutput("isValid",r.e)}_updateOutputs(K){const O=K._getExecutionVariable(this,q,-1),F=K._getExecutionVariable(this,l,null);if(void 0!==F&&null!==F&&O===K.executionId)this.isValid.setValue(!0,K),this.value.setValue(F,K);else try{const O=this._doOperation(K);if(void 0===O||null===O)return void this.isValid.setValue(!1,K);K._setExecutionVariable(this,l,O),K._setExecutionVariable(this,q,K.executionId),this.value.setValue(O,K),this.isValid.setValue(!0,K)}catch(f){this.isValid.setValue(!1,K)}}}}}]);