"use strict";(self.mo7o6813fhb=self.mo7o6813fhb||[]).push([[93],{15527:(t,U,y)=>{y.r(U),y.d(U,{FlowGraphJsonPointerParserBlock:()=>L});var I=y(13842),r=y(13845);const Y=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class mt{constructor(t,U){this.path=t,this.ownerBlock=U,this.templatedInputs=[];let y=Y.exec(t);const mt=new Set;for(;y;){const[,X]=y;if(mt.has(X))throw new Error("Duplicate template variable detected.");mt.add(X),this.templatedInputs.push(U.registerDataInput(X,r.j,new I.c(0))),y=Y.exec(t)}}getAccessor(t,U){let y=this.path;for(const I of this.templatedInputs){const t=I.getValue(U).value;if("number"!==typeof t||t<0)throw new Error("Invalid value for templated input.");y=y.replace(`{${I.name}}`,t.toString())}return t.convert(y)}}var X=y(12338),P=y(12386),G=y(12442),M=y(15392);class L extends M.d{constructor(t){super(r.e,t),this.config=t,this.object=this.registerDataOutput("object",r.e),this.propertyName=this.registerDataOutput("propertyName",r.e),this.setterFunction=this.registerDataOutput("setFunction",r.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",r.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",r.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new mt(t.jsonPointer,this)}_doOperation(t){var U,y,I;const r=this.templateComponent.getAccessor(this.config.pathConverter,t),Y=r.info.get(r.object),mt=null===(U=(y=r.info).getTarget)||void 0===U?void 0:U.call(y,r.object),X=null===(I=r.info.getPropertyName)||void 0===I?void 0:I[0](r.object);if(!mt)throw new Error("Object is undefined");return this.object.setValue(mt,t),X&&this.propertyName.setValue(X,t),Y}_setPropertyValue(t,U,y,I){var r,Y;const mt=this.templateComponent.getAccessor(this.config.pathConverter,I),X=mt.info.type;X.startsWith("Color")&&(y=h(y,X)),null===(r=(Y=mt.info).set)||void 0===r||r.call(Y,y,mt.object)}_getPropertyValue(t,U,y){const I=this.templateComponent.getAccessor(this.config.pathConverter,y),r=I.info.type,Y=I.info.get(I.object);return r.startsWith("Color")?function(t){if(t instanceof G.bU)return new P.DU(t.r,t.g,t.b);if(t instanceof G.HX)return new P.Vector4(t.r,t.g,t.b,t.a);throw new Error("Invalid color type")}(Y):Y}_getInterpolationAnimationPropertyInfo(t,U,y){const I=this.templateComponent.getAccessor(this.config.pathConverter,y);return(t,U,y,r)=>{var Y;const mt=[],X=I.info.type;return X.startsWith("Color")&&(t=t.map((t=>({frame:t.frame,value:h(t.value,X)})))),null===(Y=I.info.interpolation)||void 0===Y||Y.forEach(((U,Y)=>{var X;const P=(null===(X=I.info.getPropertyName)||void 0===X?void 0:X[Y](I.object))||"Animation-interpolation-"+Y;let G=t;y!==U.type&&(G=t.map((t=>({frame:t.frame,value:U.getValue(void 0,t.value.bX?t.value.bX():[t.value],0,1)}))));const M=U.buildAnimations(I.object,P,60,G);for(const t of M)r&&t.babylonAnimation.setEasingFunction(r),mt.push(t.babylonAnimation)})),mt}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function h(t,U){return t.getClassName().startsWith("Color")?t:"bU"===U?new G.bU(t.x,t.y,t.z):"HX"===U?new G.HX(t.x,t.y,t.z,t.w):t}(0,X.f)("FlowGraphJsonPointerParserBlock",L)},15392:(t,U,y)=>{y.d(U,{d:()=>X});var I=y(13865),r=y(13845);const Y="cachedOperationValue",mt="cachedExecutionId";class X extends I.c{constructor(t,U){super(U),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",r.i)}_updateOutputs(t){const U=t._getExecutionVariable(this,mt,-1),y=t._getExecutionVariable(this,Y,null);if(void 0!==y&&null!==y&&U===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(y,t);else try{const U=this._doOperation(t);if(void 0===U||null===U)return void this.isValid.setValue(!1,t);t._setExecutionVariable(this,Y,U),t._setExecutionVariable(this,mt,t.executionId),this.value.setValue(U,t),this.isValid.setValue(!0,t)}catch(I){this.isValid.setValue(!1,t)}}}}}]);