"use strict";(self.rvold1i0ywi=self.rvold1i0ywi||[]).push([[93],{14617:(F,b,Q)=>{Q.r(b),Q.d(b,{FlowGraphJsonPointerParserBlock:()=>K});var C=Q(12948),z=Q(12951);const t=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class g{constructor(F,b){this.path=F,this.ownerBlock=b,this.templatedInputs=[];let Q=t.exec(F);const g=new Set;for(;Q;){const[,W]=Q;if(g.has(W))throw new Error("Duplicate template variable detected.");g.add(W),this.templatedInputs.push(b.registerDataInput(W,z.g,new C.b(0))),Q=t.exec(F)}}getAccessor(F,b){let Q=this.path;for(const C of this.templatedInputs){const F=C.getValue(b).value;if("number"!==typeof F||F<0)throw new Error("Invalid value for templated input.");Q=Q.replace(`{${C.name}}`,F.toString())}return F.convert(Q)}}var W=Q(11265),Z=Q(11309),q=Q(11359),G=Q(14472);class K extends G.b{constructor(F){super(z.b,F),this.config=F,this.object=this.registerDataOutput("object",z.b),this.propertyName=this.registerDataOutput("propertyName",z.b),this.setterFunction=this.registerDataOutput("setFunction",z.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",z.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",z.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new g(F.jsonPointer,this)}_doOperation(F){var b,Q,C;const z=this.templateComponent.getAccessor(this.config.pathConverter,F),t=z.info.get(z.object),g=null===(b=(Q=z.info).getTarget)||void 0===b?void 0:b.call(Q,z.object),W=null===(C=z.info.getPropertyName)||void 0===C?void 0:C[0](z.object);if(!g)throw new Error("Object is undefined");return this.object.setValue(g,F),W&&this.propertyName.setValue(W,F),t}_setPropertyValue(F,b,Q,C){var z,t;const g=this.templateComponent.getAccessor(this.config.pathConverter,C),W=g.info.type;W.startsWith("Color")&&(Q=e(Q,W)),null===(z=(t=g.info).set)||void 0===z||z.call(t,Q,g.object)}_getPropertyValue(F,b,Q){const C=this.templateComponent.getAccessor(this.config.pathConverter,Q),z=C.info.type,t=C.info.get(C.object);return z.startsWith("Color")?function(F){if(F instanceof q.GQ)return new Z.gQ(F.r,F.g,F.b);if(F instanceof q.sb)return new Z.Vector4(F.r,F.g,F.b,F.a);throw new Error("Invalid color type")}(t):t}_getInterpolationAnimationPropertyInfo(F,b,Q){const C=this.templateComponent.getAccessor(this.config.pathConverter,Q);return(F,b,Q,z)=>{var t;const g=[],W=C.info.type;return W.startsWith("Color")&&(F=F.map((F=>({frame:F.frame,value:e(F.value,W)})))),null===(t=C.info.interpolation)||void 0===t||t.forEach(((b,t)=>{var W;const Z=(null===(W=C.info.getPropertyName)||void 0===W?void 0:W[t](C.object))||"Animation-interpolation-"+t;let q=F;Q!==b.type&&(q=F.map((F=>({frame:F.frame,value:b.getValue(void 0,F.value.Lb?F.value.Lb():[F.value],0,1)}))));const G=b.buildAnimations(C.object,Z,60,q);for(const F of G)z&&F.babylonAnimation.setEasingFunction(z),g.push(F.babylonAnimation)})),g}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function e(F,b){return F.getClassName().startsWith("Color")?F:"GQ"===b?new q.GQ(F.x,F.y,F.z):"sb"===b?new q.sb(F.x,F.y,F.z,F.w):F}(0,W.g)("FlowGraphJsonPointerParserBlock",K)},14472:(F,b,Q)=>{Q.d(b,{b:()=>W});var C=Q(12972),z=Q(12951);const t="cachedOperationValue",g="cachedExecutionId";class W extends C.b{constructor(F,b){super(b),this.value=this.registerDataOutput("value",F),this.isValid=this.registerDataOutput("isValid",z.e)}_updateOutputs(F){const b=F._getExecutionVariable(this,g,-1),Q=F._getExecutionVariable(this,t,null);if(void 0!==Q&&null!==Q&&b===F.executionId)this.isValid.setValue(!0,F),this.value.setValue(Q,F);else try{const b=this._doOperation(F);if(void 0===b||null===b)return void this.isValid.setValue(!1,F);F._setExecutionVariable(this,t,b),F._setExecutionVariable(this,g,F.executionId),this.value.setValue(b,F),this.isValid.setValue(!0,F)}catch(C){this.isValid.setValue(!1,F)}}}}}]);