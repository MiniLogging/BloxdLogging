"use strict";(self.uji65st81d=self.uji65st81d||[]).push([[93],{15755:(V,h,mV)=>{mV.r(h),mV.d(h,{FlowGraphJsonPointerParserBlock:()=>n});var t=mV(14102),L=mV(14109);const N=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class A{constructor(V,h){this.path=V,this.ownerBlock=h,this.templatedInputs=[];let mV=N.exec(V);const A=new Set;for(;mV;){const[,k]=mV;if(A.has(k))throw new Error("Duplicate template variable detected.");A.add(k),this.templatedInputs.push(h.registerDataInput(k,L.j,new t.d(0))),mV=N.exec(V)}}getAccessor(V,h){let mV=this.path;for(const t of this.templatedInputs){const V=t.getValue(h).value;if("number"!==typeof V||V<0)throw new Error("Invalid value for templated input.");mV=mV.replace(`{${t.name}}`,V.toString())}return V.convert(mV)}}var k=mV(12388),C=mV(12422),K=mV(12453),o=mV(15611);class n extends o.b{constructor(V){super(L.e,V),this.config=V,this.object=this.registerDataOutput("object",L.e),this.propertyName=this.registerDataOutput("propertyName",L.e),this.setterFunction=this.registerDataOutput("setFunction",L.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",L.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",L.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new A(V.jsonPointer,this)}_doOperation(V){var h,mV,t;const L=this.templateComponent.getAccessor(this.config.pathConverter,V),N=L.info.get(L.object),A=null===(h=(mV=L.info).getTarget)||void 0===h?void 0:h.call(mV,L.object),k=null===(t=L.info.getPropertyName)||void 0===t?void 0:t[0](L.object);if(!A)throw new Error("Object is undefined");return this.object.setValue(A,V),k&&this.propertyName.setValue(k,V),N}_setPropertyValue(V,h,mV,t){var L,N;const A=this.templateComponent.getAccessor(this.config.pathConverter,t),k=A.info.type;k.startsWith("Color")&&(mV=q(mV,k)),null===(L=(N=A.info).set)||void 0===L||L.call(N,mV,A.object)}_getPropertyValue(V,h,mV){const t=this.templateComponent.getAccessor(this.config.pathConverter,mV),L=t.info.type,N=t.info.get(t.object);return L.startsWith("Color")?function(V){if(V instanceof K.Jh)return new C.sh(V.r,V.g,V.b);if(V instanceof K.Gk)return new C.Vector4(V.r,V.g,V.b,V.a);throw new Error("Invalid color type")}(N):N}_getInterpolationAnimationPropertyInfo(V,h,mV){const t=this.templateComponent.getAccessor(this.config.pathConverter,mV);return(V,h,mV,L)=>{var N;const A=[],k=t.info.type;return k.startsWith("Color")&&(V=V.map((V=>({frame:V.frame,value:q(V.value,k)})))),null===(N=t.info.interpolation)||void 0===N||N.forEach(((h,N)=>{var k;const C=(null===(k=t.info.getPropertyName)||void 0===k?void 0:k[N](t.object))||"Animation-interpolation-"+N;let K=V;mV!==h.type&&(K=V.map((V=>({frame:V.frame,value:h.getValue(void 0,V.value.sk?V.value.sk():[V.value],0,1)}))));const o=h.buildAnimations(t.object,C,60,K);for(const V of o)L&&V.babylonAnimation.setEasingFunction(L),A.push(V.babylonAnimation)})),A}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function q(V,h){return V.getClassName().startsWith("Color")?V:"Jh"===h?new K.Jh(V.x,V.y,V.z):"Gk"===h?new K.Gk(V.x,V.y,V.z,V.w):V}(0,k.i)("FlowGraphJsonPointerParserBlock",n)},15611:(V,h,mV)=>{mV.d(h,{b:()=>k});var t=mV(14123),L=mV(14109);const N="cachedOperationValue",A="cachedExecutionId";class k extends t.e{constructor(V,h){super(h),this.value=this.registerDataOutput("value",V),this.isValid=this.registerDataOutput("isValid",L.h)}_updateOutputs(V){const h=V._getExecutionVariable(this,A,-1),mV=V._getExecutionVariable(this,N,null);if(void 0!==mV&&null!==mV&&h===V.executionId)this.isValid.setValue(!0,V),this.value.setValue(mV,V);else try{const h=this._doOperation(V);if(void 0===h||null===h)return void this.isValid.setValue(!1,V);V._setExecutionVariable(this,N,h),V._setExecutionVariable(this,A,V.executionId),this.value.setValue(h,V),this.isValid.setValue(!0,V)}catch(t){this.isValid.setValue(!1,V)}}}}}]);