"use strict";(self.wj3aziuz228=self.wj3aziuz228||[]).push([[93],{15837:(u,R,I)=>{I.r(R),I.d(R,{FlowGraphJsonPointerParserBlock:()=>S});var B=I(14157),U=I(14160);const K=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class C{constructor(u,R){this.path=u,this.ownerBlock=R,this.templatedInputs=[];let I=K.exec(u);const C=new Set;for(;I;){const[,D]=I;if(C.has(D))throw new Error("Duplicate template variable detected.");C.add(D),this.templatedInputs.push(R.registerDataInput(D,U.j,new B.d(0))),I=K.exec(u)}}getAccessor(u,R){let I=this.path;for(const B of this.templatedInputs){const u=B.getValue(R).value;if("number"!==typeof u||u<0)throw new Error("Invalid value for templated input.");I=I.replace(`{${B.name}}`,u.toString())}return u.convert(I)}}var D=I(12433),s=I(12481),t=I(12518),G=I(15694);class S extends G.e{constructor(u){super(U.c,u),this.config=u,this.object=this.registerDataOutput("object",U.c),this.propertyName=this.registerDataOutput("propertyName",U.c),this.setterFunction=this.registerDataOutput("setFunction",U.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",U.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",U.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new C(u.jsonPointer,this)}_doOperation(u){var R,I,B;const U=this.templateComponent.getAccessor(this.config.pathConverter,u),K=U.info.get(U.object),C=null===(R=(I=U.info).getTarget)||void 0===R?void 0:R.call(I,U.object),D=null===(B=U.info.getPropertyName)||void 0===B?void 0:B[0](U.object);if(!C)throw new Error("Object is undefined");return this.object.setValue(C,u),D&&this.propertyName.setValue(D,u),K}_setPropertyValue(u,R,I,B){var U,K;const C=this.templateComponent.getAccessor(this.config.pathConverter,B),D=C.info.type;D.startsWith("Color")&&(I=b(I,D)),null===(U=(K=C.info).set)||void 0===U||U.call(K,I,C.object)}_getPropertyValue(u,R,I){const B=this.templateComponent.getAccessor(this.config.pathConverter,I),U=B.info.type,K=B.info.get(B.object);return U.startsWith("Color")?function(u){if(u instanceof t.fR)return new s.PR(u.r,u.g,u.b);if(u instanceof t.TD)return new s.Vector4(u.r,u.g,u.b,u.a);throw new Error("Invalid color type")}(K):K}_getInterpolationAnimationPropertyInfo(u,R,I){const B=this.templateComponent.getAccessor(this.config.pathConverter,I);return(u,R,I,U)=>{var K;const C=[],D=B.info.type;return D.startsWith("Color")&&(u=u.map((u=>({frame:u.frame,value:b(u.value,D)})))),null===(K=B.info.interpolation)||void 0===K||K.forEach(((R,K)=>{var D;const s=(null===(D=B.info.getPropertyName)||void 0===D?void 0:D[K](B.object))||"Animation-interpolation-"+K;let t=u;I!==R.type&&(t=u.map((u=>({frame:u.frame,value:R.getValue(void 0,u.value.sD?u.value.sD():[u.value],0,1)}))));const G=R.buildAnimations(B.object,s,60,t);for(const u of G)U&&u.babylonAnimation.setEasingFunction(U),C.push(u.babylonAnimation)})),C}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function b(u,R){return u.getClassName().startsWith("Color")?u:"fR"===R?new t.fR(u.x,u.y,u.z):"TD"===R?new t.TD(u.x,u.y,u.z,u.w):u}(0,D.e)("FlowGraphJsonPointerParserBlock",S)},15694:(u,R,I)=>{I.d(R,{e:()=>D});var B=I(14181),U=I(14160);const K="cachedOperationValue",C="cachedExecutionId";class D extends B.d{constructor(u,R){super(R),this.value=this.registerDataOutput("value",u),this.isValid=this.registerDataOutput("isValid",U.g)}_updateOutputs(u){const R=u._getExecutionVariable(this,C,-1),I=u._getExecutionVariable(this,K,null);if(void 0!==I&&null!==I&&R===u.executionId)this.isValid.setValue(!0,u),this.value.setValue(I,u);else try{const R=this._doOperation(u);if(void 0===R||null===R)return void this.isValid.setValue(!1,u);u._setExecutionVariable(this,K,R),u._setExecutionVariable(this,C,u.executionId),this.value.setValue(R,u),this.isValid.setValue(!0,u)}catch(B){this.isValid.setValue(!1,u)}}}}}]);