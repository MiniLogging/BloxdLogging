"use strict";(self.k9ivgwsw3f=self.k9ivgwsw3f||[]).push([[93],{16272:(Y,b,C)=>{C.r(b),C.d(b,{FlowGraphJsonPointerParserBlock:()=>F});var R=C(14420),q=C(14424);const A=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class E{constructor(Y,b){this.path=Y,this.ownerBlock=b,this.templatedInputs=[];let C=A.exec(Y);const E=new Set;for(;C;){const[,B]=C;if(E.has(B))throw new Error("Duplicate template variable detected.");E.add(B),this.templatedInputs.push(b.registerDataInput(B,q.i,new R.d(0))),C=A.exec(Y)}}getAccessor(Y,b){let C=this.path;for(const R of this.templatedInputs){const Y=R.getValue(b).value;if("number"!==typeof Y||Y<0)throw new Error("Invalid value for templated input.");C=C.replace(`{${R.name}}`,Y.toString())}return Y.convert(C)}}var B=C(12790),g=C(12831),r=C(12880),O=C(16111);class F extends O.d{constructor(Y){super(q.b,Y),this.config=Y,this.object=this.registerDataOutput("object",q.b),this.propertyName=this.registerDataOutput("propertyName",q.b),this.setterFunction=this.registerDataOutput("setFunction",q.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",q.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",q.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new E(Y.jsonPointer,this)}_doOperation(Y){var b,C,R;const q=this.templateComponent.getAccessor(this.config.pathConverter,Y),A=q.info.get(q.object),E=null===(b=(C=q.info).getTarget)||void 0===b?void 0:b.call(C,q.object),B=null===(R=q.info.getPropertyName)||void 0===R?void 0:R[0](q.object);if(!E)throw new Error("Object is undefined");return this.object.setValue(E,Y),B&&this.propertyName.setValue(B,Y),A}_setPropertyValue(Y,b,C,R){var q,A;const E=this.templateComponent.getAccessor(this.config.pathConverter,R),B=E.info.type;B.startsWith("Color")&&(C=y(C,B)),null===(q=(A=E.info).set)||void 0===q||q.call(A,C,E.object)}_getPropertyValue(Y,b,C){const R=this.templateComponent.getAccessor(this.config.pathConverter,C),q=R.info.type,A=R.info.get(R.object);return q.startsWith("Color")?function(Y){if(Y instanceof r.rC)return new g.AC(Y.r,Y.g,Y.b);if(Y instanceof r.hb)return new g.Vector4(Y.r,Y.g,Y.b,Y.a);throw new Error("Invalid color type")}(A):A}_getInterpolationAnimationPropertyInfo(Y,b,C){const R=this.templateComponent.getAccessor(this.config.pathConverter,C);return(Y,b,C,q)=>{var A;const E=[],B=R.info.type;return B.startsWith("Color")&&(Y=Y.map((Y=>({frame:Y.frame,value:y(Y.value,B)})))),null===(A=R.info.interpolation)||void 0===A||A.forEach(((b,A)=>{var B;const g=(null===(B=R.info.getPropertyName)||void 0===B?void 0:B[A](R.object))||"Animation-interpolation-"+A;let r=Y;C!==b.type&&(r=Y.map((Y=>({frame:Y.frame,value:b.getValue(void 0,Y.value.cb?Y.value.cb():[Y.value],0,1)}))));const O=b.buildAnimations(R.object,g,60,r);for(const Y of O)q&&Y.babylonAnimation.setEasingFunction(q),E.push(Y.babylonAnimation)})),E}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function y(Y,b){return Y.getClassName().startsWith("Color")?Y:"rC"===b?new r.rC(Y.x,Y.y,Y.z):"hb"===b?new r.hb(Y.x,Y.y,Y.z,Y.w):Y}(0,B.g)("FlowGraphJsonPointerParserBlock",F)},16111:(Y,b,C)=>{C.d(b,{d:()=>B});var R=C(14437),q=C(14424);const A="cachedOperationValue",E="cachedExecutionId";class B extends R.e{constructor(Y,b){super(b),this.value=this.registerDataOutput("value",Y),this.isValid=this.registerDataOutput("isValid",q.f)}_updateOutputs(Y){const b=Y._getExecutionVariable(this,E,-1),C=Y._getExecutionVariable(this,A,null);if(void 0!==C&&null!==C&&b===Y.executionId)this.isValid.setValue(!0,Y),this.value.setValue(C,Y);else try{const b=this._doOperation(Y);if(void 0===b||null===b)return void this.isValid.setValue(!1,Y);Y._setExecutionVariable(this,A,b),Y._setExecutionVariable(this,E,Y.executionId),this.value.setValue(b,Y),this.isValid.setValue(!0,Y)}catch(R){this.isValid.setValue(!1,Y)}}}}}]);