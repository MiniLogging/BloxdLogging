"use strict";(self.nyfa010khv=self.nyfa010khv||[]).push([[93],{15490:(L,r,p)=>{p.r(r),p.d(r,{FlowGraphJsonPointerParserBlock:()=>E});var J=p(13864),i=p(13868);const n=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class j{constructor(L,r){this.path=L,this.ownerBlock=r,this.templatedInputs=[];let p=n.exec(L);const j=new Set;for(;p;){const[,z]=p;if(j.has(z))throw new Error("Duplicate template variable detected.");j.add(z),this.templatedInputs.push(r.registerDataInput(z,i.k,new J.b(0))),p=n.exec(L)}}getAccessor(L,r){let p=this.path;for(const J of this.templatedInputs){const L=J.getValue(r).value;if("number"!==typeof L||L<0)throw new Error("Invalid value for templated input.");p=p.replace(`{${J.name}}`,L.toString())}return L.convert(p)}}var z=p(12087),G=p(12136),C=p(12170),t=p(15339);class E extends t.c{constructor(L){super(i.d,L),this.config=L,this.object=this.registerDataOutput("object",i.d),this.propertyName=this.registerDataOutput("propertyName",i.d),this.setterFunction=this.registerDataOutput("setFunction",i.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",i.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",i.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new j(L.jsonPointer,this)}_doOperation(L){var r,p,J;const i=this.templateComponent.getAccessor(this.config.pathConverter,L),n=i.info.get(i.object),j=null===(r=(p=i.info).getTarget)||void 0===r?void 0:r.call(p,i.object),z=null===(J=i.info.getPropertyName)||void 0===J?void 0:J[0](i.object);if(!j)throw new Error("Object is undefined");return this.object.setValue(j,L),z&&this.propertyName.setValue(z,L),n}_setPropertyValue(L,r,p,J){var i,n;const j=this.templateComponent.getAccessor(this.config.pathConverter,J),z=j.info.type;z.startsWith("Color")&&(p=x(p,z)),null===(i=(n=j.info).set)||void 0===i||i.call(n,p,j.object)}_getPropertyValue(L,r,p){const J=this.templateComponent.getAccessor(this.config.pathConverter,p),i=J.info.type,n=J.info.get(J.object);return i.startsWith("Color")?function(L){if(L instanceof C.Wr)return new G.cr(L.r,L.g,L.b);if(L instanceof C.Fz)return new G.Vector4(L.r,L.g,L.b,L.a);throw new Error("Invalid color type")}(n):n}_getInterpolationAnimationPropertyInfo(L,r,p){const J=this.templateComponent.getAccessor(this.config.pathConverter,p);return(L,r,p,i)=>{var n;const j=[],z=J.info.type;return z.startsWith("Color")&&(L=L.map((L=>({frame:L.frame,value:x(L.value,z)})))),null===(n=J.info.interpolation)||void 0===n||n.forEach(((r,n)=>{var z;const G=(null===(z=J.info.getPropertyName)||void 0===z?void 0:z[n](J.object))||"Animation-interpolation-"+n;let C=L;p!==r.type&&(C=L.map((L=>({frame:L.frame,value:r.getValue(void 0,L.value.mz?L.value.mz():[L.value],0,1)}))));const t=r.buildAnimations(J.object,G,60,C);for(const L of t)i&&L.babylonAnimation.setEasingFunction(i),j.push(L.babylonAnimation)})),j}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function x(L,r){return L.getClassName().startsWith("Color")?L:"Wr"===r?new C.Wr(L.x,L.y,L.z):"Fz"===r?new C.Fz(L.x,L.y,L.z,L.w):L}(0,z.e)("FlowGraphJsonPointerParserBlock",E)},15339:(L,r,p)=>{p.d(r,{c:()=>z});var J=p(13882),i=p(13868);const n="cachedOperationValue",j="cachedExecutionId";class z extends J.b{constructor(L,r){super(r),this.value=this.registerDataOutput("value",L),this.isValid=this.registerDataOutput("isValid",i.h)}_updateOutputs(L){const r=L._getExecutionVariable(this,j,-1),p=L._getExecutionVariable(this,n,null);if(void 0!==p&&null!==p&&r===L.executionId)this.isValid.setValue(!0,L),this.value.setValue(p,L);else try{const r=this._doOperation(L);if(void 0===r||null===r)return void this.isValid.setValue(!1,L);L._setExecutionVariable(this,n,r),L._setExecutionVariable(this,j,L.executionId),this.value.setValue(r,L),this.isValid.setValue(!0,L)}catch(J){this.isValid.setValue(!1,L)}}}}}]);