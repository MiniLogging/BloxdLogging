"use strict";(self.u4k1rqylno=self.u4k1rqylno||[]).push([[93],{15049:(e,E,H)=>{H.r(E),H.d(E,{FlowGraphJsonPointerParserBlock:()=>i});var N=H(13407),u=H(13415);const z=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class P{constructor(e,E){this.path=e,this.ownerBlock=E,this.templatedInputs=[];let H=z.exec(e);const P=new Set;for(;H;){const[,M]=H;if(P.has(M))throw new Error("Duplicate template variable detected.");P.add(M),this.templatedInputs.push(E.registerDataInput(M,u.h,new N.b(0))),H=z.exec(e)}}getAccessor(e,E){let H=this.path;for(const N of this.templatedInputs){const e=N.getValue(E).value;if("number"!==typeof e||e<0)throw new Error("Invalid value for templated input.");H=H.replace(`{${N.name}}`,e.toString())}return e.convert(H)}}var M=H(11690),D=H(11738),A=H(11789),C=H(14894);class i extends C.c{constructor(e){super(u.b,e),this.config=e,this.object=this.registerDataOutput("object",u.b),this.propertyName=this.registerDataOutput("propertyName",u.b),this.setterFunction=this.registerDataOutput("setFunction",u.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",u.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",u.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new P(e.jsonPointer,this)}_doOperation(e){var E,H,N;const u=this.templateComponent.getAccessor(this.config.pathConverter,e),z=u.info.get(u.object),P=null===(E=(H=u.info).getTarget)||void 0===E?void 0:E.call(H,u.object),M=null===(N=u.info.getPropertyName)||void 0===N?void 0:N[0](u.object);if(!P)throw new Error("Object is undefined");return this.object.setValue(P,e),M&&this.propertyName.setValue(M,e),z}_setPropertyValue(e,E,H,N){var u,z;const P=this.templateComponent.getAccessor(this.config.pathConverter,N),M=P.info.type;M.startsWith("Color")&&(H=V(H,M)),null===(u=(z=P.info).set)||void 0===u||u.call(z,H,P.object)}_getPropertyValue(e,E,H){const N=this.templateComponent.getAccessor(this.config.pathConverter,H),u=N.info.type,z=N.info.get(N.object);return u.startsWith("Color")?function(e){if(e instanceof A.XE)return new D.jE(e.r,e.g,e.b);if(e instanceof A.FM)return new D.Vector4(e.r,e.g,e.b,e.a);throw new Error("Invalid color type")}(z):z}_getInterpolationAnimationPropertyInfo(e,E,H){const N=this.templateComponent.getAccessor(this.config.pathConverter,H);return(e,E,H,u)=>{var z;const P=[],M=N.info.type;return M.startsWith("Color")&&(e=e.map((e=>({frame:e.frame,value:V(e.value,M)})))),null===(z=N.info.interpolation)||void 0===z||z.forEach(((E,z)=>{var M;const D=(null===(M=N.info.getPropertyName)||void 0===M?void 0:M[z](N.object))||"Animation-interpolation-"+z;let A=e;H!==E.type&&(A=e.map((e=>({frame:e.frame,value:E.getValue(void 0,e.value.uM?e.value.uM():[e.value],0,1)}))));const C=E.buildAnimations(N.object,D,60,A);for(const e of C)u&&e.babylonAnimation.setEasingFunction(u),P.push(e.babylonAnimation)})),P}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function V(e,E){return e.getClassName().startsWith("Color")?e:"XE"===E?new A.XE(e.x,e.y,e.z):"FM"===E?new A.FM(e.x,e.y,e.z,e.w):e}(0,M.g)("FlowGraphJsonPointerParserBlock",i)},14894:(e,E,H)=>{H.d(E,{c:()=>M});var N=H(13441),u=H(13415);const z="cachedOperationValue",P="cachedExecutionId";class M extends N.b{constructor(e,E){super(E),this.value=this.registerDataOutput("value",e),this.isValid=this.registerDataOutput("isValid",u.f)}_updateOutputs(e){const E=e._getExecutionVariable(this,P,-1),H=e._getExecutionVariable(this,z,null);if(void 0!==H&&null!==H&&E===e.executionId)this.isValid.setValue(!0,e),this.value.setValue(H,e);else try{const E=this._doOperation(e);if(void 0===E||null===E)return void this.isValid.setValue(!1,e);e._setExecutionVariable(this,z,E),e._setExecutionVariable(this,P,e.executionId),this.value.setValue(E,e),this.isValid.setValue(!0,e)}catch(N){this.isValid.setValue(!1,e)}}}}}]);