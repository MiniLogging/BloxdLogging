"use strict";(self.bjbkv7h3qsd=self.bjbkv7h3qsd||[]).push([[93],{14612:(G,A,j)=>{j.r(A),j.d(A,{FlowGraphJsonPointerParserBlock:()=>H});var u=j(12873),k=j(12880);const B=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class x{constructor(G,A){this.path=G,this.ownerBlock=A,this.templatedInputs=[];let j=B.exec(G);const x=new Set;for(;j;){const[,s]=j;if(x.has(s))throw new Error("Duplicate template variable detected.");x.add(s),this.templatedInputs.push(A.registerDataInput(s,k.f,new u.d(0))),j=B.exec(G)}}getAccessor(G,A){let j=this.path;for(const u of this.templatedInputs){const G=u.getValue(A).value;if("number"!==typeof G||G<0)throw new Error("Invalid value for templated input.");j=j.replace(`{${u.name}}`,G.toString())}return G.convert(j)}}var s=j(11181),O=j(11218),d=j(11262),h=j(14465);class H extends h.c{constructor(G){super(k.c,G),this.config=G,this.object=this.registerDataOutput("object",k.c),this.propertyName=this.registerDataOutput("propertyName",k.c),this.setterFunction=this.registerDataOutput("setFunction",k.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",k.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",k.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new x(G.jsonPointer,this)}_doOperation(G){var A,j,u;const k=this.templateComponent.getAccessor(this.config.pathConverter,G),B=k.info.get(k.object),x=null===(A=(j=k.info).getTarget)||void 0===A?void 0:A.call(j,k.object),s=null===(u=k.info.getPropertyName)||void 0===u?void 0:u[0](k.object);if(!x)throw new Error("Object is undefined");return this.object.setValue(x,G),s&&this.propertyName.setValue(s,G),B}_setPropertyValue(G,A,j,u){var k,B;const x=this.templateComponent.getAccessor(this.config.pathConverter,u),s=x.info.type;s.startsWith("Color")&&(j=F(j,s)),null===(k=(B=x.info).set)||void 0===k||k.call(B,j,x.object)}_getPropertyValue(G,A,j){const u=this.templateComponent.getAccessor(this.config.pathConverter,j),k=u.info.type,B=u.info.get(u.object);return k.startsWith("Color")?function(G){if(G instanceof d.nA)return new O.SA(G.r,G.g,G.b);if(G instanceof d.Xs)return new O.Vector4(G.r,G.g,G.b,G.a);throw new Error("Invalid color type")}(B):B}_getInterpolationAnimationPropertyInfo(G,A,j){const u=this.templateComponent.getAccessor(this.config.pathConverter,j);return(G,A,j,k)=>{var B;const x=[],s=u.info.type;return s.startsWith("Color")&&(G=G.map((G=>({frame:G.frame,value:F(G.value,s)})))),null===(B=u.info.interpolation)||void 0===B||B.forEach(((A,B)=>{var s;const O=(null===(s=u.info.getPropertyName)||void 0===s?void 0:s[B](u.object))||"Animation-interpolation-"+B;let d=G;j!==A.type&&(d=G.map((G=>({frame:G.frame,value:A.getValue(void 0,G.value.hs?G.value.hs():[G.value],0,1)}))));const h=A.buildAnimations(u.object,O,60,d);for(const G of h)k&&G.babylonAnimation.setEasingFunction(k),x.push(G.babylonAnimation)})),x}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function F(G,A){return G.getClassName().startsWith("Color")?G:"nA"===A?new d.nA(G.x,G.y,G.z):"Xs"===A?new d.Xs(G.x,G.y,G.z,G.w):G}(0,s.h)("FlowGraphJsonPointerParserBlock",H)},14465:(G,A,j)=>{j.d(A,{c:()=>s});var u=j(12905),k=j(12880);const B="cachedOperationValue",x="cachedExecutionId";class s extends u.c{constructor(G,A){super(A),this.value=this.registerDataOutput("value",G),this.isValid=this.registerDataOutput("isValid",k.e)}_updateOutputs(G){const A=G._getExecutionVariable(this,x,-1),j=G._getExecutionVariable(this,B,null);if(void 0!==j&&null!==j&&A===G.executionId)this.isValid.setValue(!0,G),this.value.setValue(j,G);else try{const A=this._doOperation(G);if(void 0===A||null===A)return void this.isValid.setValue(!1,G);G._setExecutionVariable(this,B,A),G._setExecutionVariable(this,x,G.executionId),this.value.setValue(A,G),this.isValid.setValue(!0,G)}catch(u){this.isValid.setValue(!1,G)}}}}}]);