"use strict";(self.n4ygn1cq9vg=self.n4ygn1cq9vg||[]).push([[93],{15818:(e,d,v)=>{v.r(d),v.d(d,{FlowGraphJsonPointerParserBlock:()=>k});var P=v(14179),p=v(14181);const L=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class B{constructor(e,d){this.path=e,this.ownerBlock=d,this.templatedInputs=[];let v=L.exec(e);const B=new Set;for(;v;){const[,X]=v;if(B.has(X))throw new Error("Duplicate template variable detected.");B.add(X),this.templatedInputs.push(d.registerDataInput(X,p.f,new P.d(0))),v=L.exec(e)}}getAccessor(e,d){let v=this.path;for(const P of this.templatedInputs){const e=P.getValue(d).value;if("number"!==typeof e||e<0)throw new Error("Invalid value for templated input.");v=v.replace(`{${P.name}}`,e.toString())}return e.convert(v)}}var X=v(12381),z=v(12420),W=v(12463),V=v(15670);class k extends V.c{constructor(e){super(p.b,e),this.config=e,this.object=this.registerDataOutput("object",p.b),this.propertyName=this.registerDataOutput("propertyName",p.b),this.setterFunction=this.registerDataOutput("setFunction",p.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",p.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",p.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new B(e.jsonPointer,this)}_doOperation(e){var d,v,P;const p=this.templateComponent.getAccessor(this.config.pathConverter,e),L=p.info.get(p.object),B=null===(d=(v=p.info).getTarget)||void 0===d?void 0:d.call(v,p.object),X=null===(P=p.info.getPropertyName)||void 0===P?void 0:P[0](p.object);if(!B)throw new Error("Object is undefined");return this.object.setValue(B,e),X&&this.propertyName.setValue(X,e),L}_setPropertyValue(e,d,v,P){var p,L;const B=this.templateComponent.getAccessor(this.config.pathConverter,P),X=B.info.type;X.startsWith("Color")&&(v=g(v,X)),null===(p=(L=B.info).set)||void 0===p||p.call(L,v,B.object)}_getPropertyValue(e,d,v){const P=this.templateComponent.getAccessor(this.config.pathConverter,v),p=P.info.type,L=P.info.get(P.object);return p.startsWith("Color")?function(e){if(e instanceof W.Kd)return new z.mv(e.r,e.g,e.b);if(e instanceof W.Up)return new z.Vector4(e.r,e.g,e.b,e.a);throw new Error("Invalid color type")}(L):L}_getInterpolationAnimationPropertyInfo(e,d,v){const P=this.templateComponent.getAccessor(this.config.pathConverter,v);return(e,d,v,p)=>{var L;const B=[],X=P.info.type;return X.startsWith("Color")&&(e=e.map((e=>({frame:e.frame,value:g(e.value,X)})))),null===(L=P.info.interpolation)||void 0===L||L.forEach(((d,L)=>{var X;const z=(null===(X=P.info.getPropertyName)||void 0===X?void 0:X[L](P.object))||"Animation-interpolation-"+L;let W=e;v!==d.type&&(W=e.map((e=>({frame:e.frame,value:d.getValue(void 0,e.value.Yd?e.value.Yd():[e.value],0,1)}))));const V=d.buildAnimations(P.object,z,60,W);for(const e of V)p&&e.babylonAnimation.setEasingFunction(p),B.push(e.babylonAnimation)})),B}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function g(e,d){return e.getClassName().startsWith("Color")?e:"Kd"===d?new W.Kd(e.x,e.y,e.z):"Up"===d?new W.Up(e.x,e.y,e.z,e.w):e}(0,X.h)("FlowGraphJsonPointerParserBlock",k)},15670:(e,d,v)=>{v.d(d,{c:()=>X});var P=v(14195),p=v(14181);const L="cachedOperationValue",B="cachedExecutionId";class X extends P.e{constructor(e,d){super(d),this.value=this.registerDataOutput("value",e),this.isValid=this.registerDataOutput("isValid",p.d)}_updateOutputs(e){const d=e._getExecutionVariable(this,B,-1),v=e._getExecutionVariable(this,L,null);if(void 0!==v&&null!==v&&d===e.executionId)this.isValid.setValue(!0,e),this.value.setValue(v,e);else try{const d=this._doOperation(e);if(void 0===d||null===d)return void this.isValid.setValue(!1,e);e._setExecutionVariable(this,L,d),e._setExecutionVariable(this,B,e.executionId),this.value.setValue(d,e),this.isValid.setValue(!0,e)}catch(P){this.isValid.setValue(!1,e)}}}}}]);