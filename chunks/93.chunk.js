"use strict";(self["9x1utqq1axc"]=self["9x1utqq1axc"]||[]).push([[93],{15674:(y,c,A)=>{A.r(c),A.d(c,{FlowGraphJsonPointerParserBlock:()=>o});var l=A(13986),w=A(13993);const N=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class p{constructor(y,c){this.path=y,this.ownerBlock=c,this.templatedInputs=[];let A=N.exec(y);const p=new Set;for(;A;){const[,W]=A;if(p.has(W))throw new Error("Duplicate template variable detected.");p.add(W),this.templatedInputs.push(c.registerDataInput(W,w.j,new l.b(0))),A=N.exec(y)}}getAccessor(y,c){let A=this.path;for(const l of this.templatedInputs){const y=l.getValue(c).value;if("number"!==typeof y||y<0)throw new Error("Invalid value for templated input.");A=A.replace(`{${l.name}}`,y.toString())}return y.convert(A)}}var W=A(12283),h=A(12325),I=A(12375),q=A(15507);class o extends q.d{constructor(y){super(w.e,y),this.config=y,this.object=this.registerDataOutput("object",w.e),this.propertyName=this.registerDataOutput("propertyName",w.e),this.setterFunction=this.registerDataOutput("setFunction",w.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",w.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",w.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new p(y.jsonPointer,this)}_doOperation(y){var c,A,l;const w=this.templateComponent.getAccessor(this.config.pathConverter,y),N=w.info.get(w.object),p=null===(c=(A=w.info).getTarget)||void 0===c?void 0:c.call(A,w.object),W=null===(l=w.info.getPropertyName)||void 0===l?void 0:l[0](w.object);if(!p)throw new Error("Object is undefined");return this.object.setValue(p,y),W&&this.propertyName.setValue(W,y),N}_setPropertyValue(y,c,A,l){var w,N;const p=this.templateComponent.getAccessor(this.config.pathConverter,l),W=p.info.type;W.startsWith("Color")&&(A=O(A,W)),null===(w=(N=p.info).set)||void 0===w||w.call(N,A,p.object)}_getPropertyValue(y,c,A){const l=this.templateComponent.getAccessor(this.config.pathConverter,A),w=l.info.type,N=l.info.get(l.object);return w.startsWith("Color")?function(y){if(y instanceof I.dc)return new h.gc(y.r,y.g,y.b);if(y instanceof I.ip)return new h.Vector4(y.r,y.g,y.b,y.a);throw new Error("Invalid color type")}(N):N}_getInterpolationAnimationPropertyInfo(y,c,A){const l=this.templateComponent.getAccessor(this.config.pathConverter,A);return(y,c,A,w)=>{var N;const p=[],W=l.info.type;return W.startsWith("Color")&&(y=y.map((y=>({frame:y.frame,value:O(y.value,W)})))),null===(N=l.info.interpolation)||void 0===N||N.forEach(((c,N)=>{var W;const h=(null===(W=l.info.getPropertyName)||void 0===W?void 0:W[N](l.object))||"Animation-interpolation-"+N;let I=y;A!==c.type&&(I=y.map((y=>({frame:y.frame,value:c.getValue(void 0,y.value.fc?y.value.fc():[y.value],0,1)}))));const q=c.buildAnimations(l.object,h,60,I);for(const y of q)w&&y.babylonAnimation.setEasingFunction(w),p.push(y.babylonAnimation)})),p}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function O(y,c){return y.getClassName().startsWith("Color")?y:"dc"===c?new I.dc(y.x,y.y,y.z):"ip"===c?new I.ip(y.x,y.y,y.z,y.w):y}(0,W.f)("FlowGraphJsonPointerParserBlock",o)},15507:(y,c,A)=>{A.d(c,{d:()=>W});var l=A(14010),w=A(13993);const N="cachedOperationValue",p="cachedExecutionId";class W extends l.e{constructor(y,c){super(c),this.value=this.registerDataOutput("value",y),this.isValid=this.registerDataOutput("isValid",w.f)}_updateOutputs(y){const c=y._getExecutionVariable(this,p,-1),A=y._getExecutionVariable(this,N,null);if(void 0!==A&&null!==A&&c===y.executionId)this.isValid.setValue(!0,y),this.value.setValue(A,y);else try{const c=this._doOperation(y);if(void 0===c||null===c)return void this.isValid.setValue(!1,y);y._setExecutionVariable(this,N,c),y._setExecutionVariable(this,p,y.executionId),this.value.setValue(c,y),this.isValid.setValue(!0,y)}catch(l){this.isValid.setValue(!1,y)}}}}}]);