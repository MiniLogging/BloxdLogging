"use strict";(self.ynu1yiqvs98=self.ynu1yiqvs98||[]).push([[93],{14501:(I,E,j)=>{j.r(E),j.d(E,{FlowGraphJsonPointerParserBlock:()=>o});var e=j(12812),w=j(12819);const z=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class h{constructor(I,E){this.path=I,this.ownerBlock=E,this.templatedInputs=[];let j=z.exec(I);const h=new Set;for(;j;){const[,t]=j;if(h.has(t))throw new Error("Duplicate template variable detected.");h.add(t),this.templatedInputs.push(E.registerDataInput(t,w.i,new e.b(0))),j=z.exec(I)}}getAccessor(I,E){let j=this.path;for(const e of this.templatedInputs){const I=e.getValue(E).value;if("number"!==typeof I||I<0)throw new Error("Invalid value for templated input.");j=j.replace(`{${e.name}}`,I.toString())}return I.convert(j)}}var t=j(11073),U=j(11117),R=j(11165),P=j(14351);class o extends P.d{constructor(I){super(w.e,I),this.config=I,this.object=this.registerDataOutput("object",w.e),this.propertyName=this.registerDataOutput("propertyName",w.e),this.setterFunction=this.registerDataOutput("setFunction",w.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",w.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",w.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new h(I.jsonPointer,this)}_doOperation(I){var E,j,e;const w=this.templateComponent.getAccessor(this.config.pathConverter,I),z=w.info.get(w.object),h=null===(E=(j=w.info).getTarget)||void 0===E?void 0:E.call(j,w.object),t=null===(e=w.info.getPropertyName)||void 0===e?void 0:e[0](w.object);if(!h)throw new Error("Object is undefined");return this.object.setValue(h,I),t&&this.propertyName.setValue(t,I),z}_setPropertyValue(I,E,j,e){var w,z;const h=this.templateComponent.getAccessor(this.config.pathConverter,e),t=h.info.type;t.startsWith("Color")&&(j=Z(j,t)),null===(w=(z=h.info).set)||void 0===w||w.call(z,j,h.object)}_getPropertyValue(I,E,j){const e=this.templateComponent.getAccessor(this.config.pathConverter,j),w=e.info.type,z=e.info.get(e.object);return w.startsWith("Color")?function(I){if(I instanceof R.qE)return new U.LE(I.r,I.g,I.b);if(I instanceof R.hh)return new U.Vector4(I.r,I.g,I.b,I.a);throw new Error("Invalid color type")}(z):z}_getInterpolationAnimationPropertyInfo(I,E,j){const e=this.templateComponent.getAccessor(this.config.pathConverter,j);return(I,E,j,w)=>{var z;const h=[],t=e.info.type;return t.startsWith("Color")&&(I=I.map((I=>({frame:I.frame,value:Z(I.value,t)})))),null===(z=e.info.interpolation)||void 0===z||z.forEach(((E,z)=>{var t;const U=(null===(t=e.info.getPropertyName)||void 0===t?void 0:t[z](e.object))||"Animation-interpolation-"+z;let R=I;j!==E.type&&(R=I.map((I=>({frame:I.frame,value:E.getValue(void 0,I.value.re?I.value.re():[I.value],0,1)}))));const P=E.buildAnimations(e.object,U,60,R);for(const I of P)w&&I.babylonAnimation.setEasingFunction(w),h.push(I.babylonAnimation)})),h}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function Z(I,E){return I.getClassName().startsWith("Color")?I:"qE"===E?new R.qE(I.x,I.y,I.z):"hh"===E?new R.hh(I.x,I.y,I.z,I.w):I}(0,t.h)("FlowGraphJsonPointerParserBlock",o)},14351:(I,E,j)=>{j.d(E,{d:()=>t});var e=j(12834),w=j(12819);const z="cachedOperationValue",h="cachedExecutionId";class t extends e.e{constructor(I,E){super(E),this.value=this.registerDataOutput("value",I),this.isValid=this.registerDataOutput("isValid",w.g)}_updateOutputs(I){const E=I._getExecutionVariable(this,h,-1),j=I._getExecutionVariable(this,z,null);if(void 0!==j&&null!==j&&E===I.executionId)this.isValid.setValue(!0,I),this.value.setValue(j,I);else try{const E=this._doOperation(I);if(void 0===E||null===E)return void this.isValid.setValue(!1,I);I._setExecutionVariable(this,z,E),I._setExecutionVariable(this,h,I.executionId),this.value.setValue(E,I),this.isValid.setValue(!0,I)}catch(e){this.isValid.setValue(!1,I)}}}}}]);