"use strict";(self["9d4d30r2sf"]=self["9d4d30r2sf"]||[]).push([[93],{15863:(o,v,V)=>{V.r(v),V.d(v,{FlowGraphJsonPointerParserBlock:()=>x});var g=V(14236),E=V(14241);const I=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class Q{constructor(o,v){this.path=o,this.ownerBlock=v,this.templatedInputs=[];let V=I.exec(o);const Q=new Set;for(;V;){const[,U]=V;if(Q.has(U))throw new Error("Duplicate template variable detected.");Q.add(U),this.templatedInputs.push(v.registerDataInput(U,E.i,new g.c(0))),V=I.exec(o)}}getAccessor(o,v){let V=this.path;for(const g of this.templatedInputs){const o=g.getValue(v).value;if("number"!==typeof o||o<0)throw new Error("Invalid value for templated input.");V=V.replace(`{${g.name}}`,o.toString())}return o.convert(V)}}var U=V(12449),n=V(12488),O=V(12547),h=V(15726);class x extends h.b{constructor(o){super(E.e,o),this.config=o,this.object=this.registerDataOutput("object",E.e),this.propertyName=this.registerDataOutput("propertyName",E.e),this.setterFunction=this.registerDataOutput("setFunction",E.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",E.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",E.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new Q(o.jsonPointer,this)}_doOperation(o){var v,V,g;const E=this.templateComponent.getAccessor(this.config.pathConverter,o),I=E.info.get(E.object),Q=null===(v=(V=E.info).getTarget)||void 0===v?void 0:v.call(V,E.object),U=null===(g=E.info.getPropertyName)||void 0===g?void 0:g[0](E.object);if(!Q)throw new Error("Object is undefined");return this.object.setValue(Q,o),U&&this.propertyName.setValue(U,o),I}_setPropertyValue(o,v,V,g){var E,I;const Q=this.templateComponent.getAccessor(this.config.pathConverter,g),U=Q.info.type;U.startsWith("Color")&&(V=f(V,U)),null===(E=(I=Q.info).set)||void 0===E||E.call(I,V,Q.object)}_getPropertyValue(o,v,V){const g=this.templateComponent.getAccessor(this.config.pathConverter,V),E=g.info.type,I=g.info.get(g.object);return E.startsWith("Color")?function(o){if(o instanceof O.Lv)return new n.cv(o.r,o.g,o.b);if(o instanceof O.sU)return new n.Vector4(o.r,o.g,o.b,o.a);throw new Error("Invalid color type")}(I):I}_getInterpolationAnimationPropertyInfo(o,v,V){const g=this.templateComponent.getAccessor(this.config.pathConverter,V);return(o,v,V,E)=>{var I;const Q=[],U=g.info.type;return U.startsWith("Color")&&(o=o.map((o=>({frame:o.frame,value:f(o.value,U)})))),null===(I=g.info.interpolation)||void 0===I||I.forEach(((v,I)=>{var U;const n=(null===(U=g.info.getPropertyName)||void 0===U?void 0:U[I](g.object))||"Animation-interpolation-"+I;let O=o;V!==v.type&&(O=o.map((o=>({frame:o.frame,value:v.getValue(void 0,o.value.Dg?o.value.Dg():[o.value],0,1)}))));const h=v.buildAnimations(g.object,n,60,O);for(const o of h)E&&o.babylonAnimation.setEasingFunction(E),Q.push(o.babylonAnimation)})),Q}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function f(o,v){return o.getClassName().startsWith("Color")?o:"Lv"===v?new O.Lv(o.x,o.y,o.z):"sU"===v?new O.sU(o.x,o.y,o.z,o.w):o}(0,U.h)("FlowGraphJsonPointerParserBlock",x)},15726:(o,v,V)=>{V.d(v,{b:()=>U});var g=V(14259),E=V(14241);const I="cachedOperationValue",Q="cachedExecutionId";class U extends g.b{constructor(o,v){super(v),this.value=this.registerDataOutput("value",o),this.isValid=this.registerDataOutput("isValid",E.f)}_updateOutputs(o){const v=o._getExecutionVariable(this,Q,-1),V=o._getExecutionVariable(this,I,null);if(void 0!==V&&null!==V&&v===o.executionId)this.isValid.setValue(!0,o),this.value.setValue(V,o);else try{const v=this._doOperation(o);if(void 0===v||null===v)return void this.isValid.setValue(!1,o);o._setExecutionVariable(this,I,v),o._setExecutionVariable(this,Q,o.executionId),this.value.setValue(v,o),this.isValid.setValue(!0,o)}catch(g){this.isValid.setValue(!1,o)}}}}}]);