"use strict";(self.h66iwo8dvgq=self.h66iwo8dvgq||[]).push([[93],{15364:(b,X,P)=>{P.r(X),P.d(X,{FlowGraphJsonPointerParserBlock:()=>O});var Q=P(13623),S=P(13631);const d=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class N{constructor(b,X){this.path=b,this.ownerBlock=X,this.templatedInputs=[];let P=d.exec(b);const N=new Set;for(;P;){const[,a]=P;if(N.has(a))throw new Error("Duplicate template variable detected.");N.add(a),this.templatedInputs.push(X.registerDataInput(a,S.i,new Q.c(0))),P=d.exec(b)}}getAccessor(b,X){let P=this.path;for(const Q of this.templatedInputs){const b=Q.getValue(X).value;if("number"!==typeof b||b<0)throw new Error("Invalid value for templated input.");P=P.replace(`{${Q.name}}`,b.toString())}return b.convert(P)}}var a=P(11802),u=P(11834),w=P(11878),f=P(15207);class O extends f.d{constructor(b){super(S.e,b),this.config=b,this.object=this.registerDataOutput("object",S.e),this.propertyName=this.registerDataOutput("propertyName",S.e),this.setterFunction=this.registerDataOutput("setFunction",S.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",S.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",S.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new N(b.jsonPointer,this)}_doOperation(b){var X,P,Q;const S=this.templateComponent.getAccessor(this.config.pathConverter,b),d=S.info.get(S.object),N=null===(X=(P=S.info).getTarget)||void 0===X?void 0:X.call(P,S.object),a=null===(Q=S.info.getPropertyName)||void 0===Q?void 0:Q[0](S.object);if(!N)throw new Error("Object is undefined");return this.object.setValue(N,b),a&&this.propertyName.setValue(a,b),d}_setPropertyValue(b,X,P,Q){var S,d;const N=this.templateComponent.getAccessor(this.config.pathConverter,Q),a=N.info.type;a.startsWith("Color")&&(P=e(P,a)),null===(S=(d=N.info).set)||void 0===S||S.call(d,P,N.object)}_getPropertyValue(b,X,P){const Q=this.templateComponent.getAccessor(this.config.pathConverter,P),S=Q.info.type,d=Q.info.get(Q.object);return S.startsWith("Color")?function(b){if(b instanceof w.yX)return new u.tX(b.r,b.g,b.b);if(b instanceof w.Ba)return new u.Vector4(b.r,b.g,b.b,b.a);throw new Error("Invalid color type")}(d):d}_getInterpolationAnimationPropertyInfo(b,X,P){const Q=this.templateComponent.getAccessor(this.config.pathConverter,P);return(b,X,P,S)=>{var d;const N=[],a=Q.info.type;return a.startsWith("Color")&&(b=b.map((b=>({frame:b.frame,value:e(b.value,a)})))),null===(d=Q.info.interpolation)||void 0===d||d.forEach(((X,d)=>{var a;const u=(null===(a=Q.info.getPropertyName)||void 0===a?void 0:a[d](Q.object))||"Animation-interpolation-"+d;let w=b;P!==X.type&&(w=b.map((b=>({frame:b.frame,value:X.getValue(void 0,b.value.Zd?b.value.Zd():[b.value],0,1)}))));const f=X.buildAnimations(Q.object,u,60,w);for(const b of f)S&&b.babylonAnimation.setEasingFunction(S),N.push(b.babylonAnimation)})),N}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function e(b,X){return b.getClassName().startsWith("Color")?b:"yX"===X?new w.yX(b.x,b.y,b.z):"Ba"===X?new w.Ba(b.x,b.y,b.z,b.w):b}(0,a.h)("FlowGraphJsonPointerParserBlock",O)},15207:(b,X,P)=>{P.d(X,{d:()=>a});var Q=P(13647),S=P(13631);const d="cachedOperationValue",N="cachedExecutionId";class a extends Q.c{constructor(b,X){super(X),this.value=this.registerDataOutput("value",b),this.isValid=this.registerDataOutput("isValid",S.h)}_updateOutputs(b){const X=b._getExecutionVariable(this,N,-1),P=b._getExecutionVariable(this,d,null);if(void 0!==P&&null!==P&&X===b.executionId)this.isValid.setValue(!0,b),this.value.setValue(P,b);else try{const X=this._doOperation(b);if(void 0===X||null===X)return void this.isValid.setValue(!1,b);b._setExecutionVariable(this,d,X),b._setExecutionVariable(this,N,b.executionId),this.value.setValue(X,b),this.isValid.setValue(!0,b)}catch(Q){this.isValid.setValue(!1,b)}}}}}]);