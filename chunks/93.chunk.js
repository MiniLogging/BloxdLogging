"use strict";(self.ufnpnb83drd=self.ufnpnb83drd||[]).push([[93],{15759:(E,U,g)=>{g.r(U),g.d(U,{FlowGraphJsonPointerParserBlock:()=>P});var N=g(14050),L=g(14058);const D=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class S{constructor(E,U){this.path=E,this.ownerBlock=U,this.templatedInputs=[];let g=D.exec(E);const S=new Set;for(;g;){const[,u]=g;if(S.has(u))throw new Error("Duplicate template variable detected.");S.add(u),this.templatedInputs.push(U.registerDataInput(u,L.j,new N.c(0))),g=D.exec(E)}}getAccessor(E,U){let g=this.path;for(const N of this.templatedInputs){const E=N.getValue(U).value;if("number"!==typeof E||E<0)throw new Error("Invalid value for templated input.");g=g.replace(`{${N.name}}`,E.toString())}return E.convert(g)}}var u=g(12292),s=g(12334),C=g(12379),B=g(15596);class P extends B.b{constructor(E){super(L.e,E),this.config=E,this.object=this.registerDataOutput("object",L.e),this.propertyName=this.registerDataOutput("propertyName",L.e),this.setterFunction=this.registerDataOutput("setFunction",L.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",L.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",L.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new S(E.jsonPointer,this)}_doOperation(E){var U,g,N;const L=this.templateComponent.getAccessor(this.config.pathConverter,E),D=L.info.get(L.object),S=null===(U=(g=L.info).getTarget)||void 0===U?void 0:U.call(g,L.object),u=null===(N=L.info.getPropertyName)||void 0===N?void 0:N[0](L.object);if(!S)throw new Error("Object is undefined");return this.object.setValue(S,E),u&&this.propertyName.setValue(u,E),D}_setPropertyValue(E,U,g,N){var L,D;const S=this.templateComponent.getAccessor(this.config.pathConverter,N),u=S.info.type;u.startsWith("Color")&&(g=F(g,u)),null===(L=(D=S.info).set)||void 0===L||L.call(D,g,S.object)}_getPropertyValue(E,U,g){const N=this.templateComponent.getAccessor(this.config.pathConverter,g),L=N.info.type,D=N.info.get(N.object);return L.startsWith("Color")?function(E){if(E instanceof C.VU)return new s.dU(E.r,E.g,E.b);if(E instanceof C.hu)return new s.Vector4(E.r,E.g,E.b,E.a);throw new Error("Invalid color type")}(D):D}_getInterpolationAnimationPropertyInfo(E,U,g){const N=this.templateComponent.getAccessor(this.config.pathConverter,g);return(E,U,g,L)=>{var D;const S=[],u=N.info.type;return u.startsWith("Color")&&(E=E.map((E=>({frame:E.frame,value:F(E.value,u)})))),null===(D=N.info.interpolation)||void 0===D||D.forEach(((U,D)=>{var u;const s=(null===(u=N.info.getPropertyName)||void 0===u?void 0:u[D](N.object))||"Animation-interpolation-"+D;let C=E;g!==U.type&&(C=E.map((E=>({frame:E.frame,value:U.getValue(void 0,E.value.Og?E.value.Og():[E.value],0,1)}))));const B=U.buildAnimations(N.object,s,60,C);for(const E of B)L&&E.babylonAnimation.setEasingFunction(L),S.push(E.babylonAnimation)})),S}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function F(E,U){return E.getClassName().startsWith("Color")?E:"VU"===U?new C.VU(E.x,E.y,E.z):"hu"===U?new C.hu(E.x,E.y,E.z,E.w):E}(0,u.f)("FlowGraphJsonPointerParserBlock",P)},15596:(E,U,g)=>{g.d(U,{b:()=>u});var N=g(14077),L=g(14058);const D="cachedOperationValue",S="cachedExecutionId";class u extends N.b{constructor(E,U){super(U),this.value=this.registerDataOutput("value",E),this.isValid=this.registerDataOutput("isValid",L.g)}_updateOutputs(E){const U=E._getExecutionVariable(this,S,-1),g=E._getExecutionVariable(this,D,null);if(void 0!==g&&null!==g&&U===E.executionId)this.isValid.setValue(!0,E),this.value.setValue(g,E);else try{const U=this._doOperation(E);if(void 0===U||null===U)return void this.isValid.setValue(!1,E);E._setExecutionVariable(this,D,U),E._setExecutionVariable(this,S,E.executionId),this.value.setValue(U,E),this.isValid.setValue(!0,E)}catch(N){this.isValid.setValue(!1,E)}}}}}]);