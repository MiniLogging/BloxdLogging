"use strict";(self.ozi0exxand9=self.ozi0exxand9||[]).push([[93],{14696:(f,v,Z)=>{Z.r(v),Z.d(v,{FlowGraphJsonPointerParserBlock:()=>u});var V=Z(13115),h=Z(13123);const J=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class l{constructor(f,v){this.path=f,this.ownerBlock=v,this.templatedInputs=[];let Z=J.exec(f);const l=new Set;for(;Z;){const[,e]=Z;if(l.has(e))throw new Error("Duplicate template variable detected.");l.add(e),this.templatedInputs.push(v.registerDataInput(e,h.k,new V.b(0))),Z=J.exec(f)}}getAccessor(f,v){let Z=this.path;for(const V of this.templatedInputs){const f=V.getValue(v).value;if("number"!==typeof f||f<0)throw new Error("Invalid value for templated input.");Z=Z.replace(`{${V.name}}`,f.toString())}return f.convert(Z)}}var e=Z(11372),C=Z(11421),H=Z(11472),O=Z(14573);class u extends O.b{constructor(f){super(h.d,f),this.config=f,this.object=this.registerDataOutput("object",h.d),this.propertyName=this.registerDataOutput("propertyName",h.d),this.setterFunction=this.registerDataOutput("setFunction",h.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",h.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",h.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new l(f.jsonPointer,this)}_doOperation(f){var v,Z,V;const h=this.templateComponent.getAccessor(this.config.pathConverter,f),J=h.info.get(h.object),l=null===(v=(Z=h.info).getTarget)||void 0===v?void 0:v.call(Z,h.object),e=null===(V=h.info.getPropertyName)||void 0===V?void 0:V[0](h.object);if(!l)throw new Error("Object is undefined");return this.object.setValue(l,f),e&&this.propertyName.setValue(e,f),J}_setPropertyValue(f,v,Z,V){var h,J;const l=this.templateComponent.getAccessor(this.config.pathConverter,V),e=l.info.type;e.startsWith("Color")&&(Z=W(Z,e)),null===(h=(J=l.info).set)||void 0===h||h.call(J,Z,l.object)}_getPropertyValue(f,v,Z){const V=this.templateComponent.getAccessor(this.config.pathConverter,Z),h=V.info.type,J=V.info.get(V.object);return h.startsWith("Color")?function(f){if(f instanceof H.Mv)return new C.Xv(f.r,f.g,f.b);if(f instanceof H.he)return new C.Vector4(f.r,f.g,f.b,f.a);throw new Error("Invalid color type")}(J):J}_getInterpolationAnimationPropertyInfo(f,v,Z){const V=this.templateComponent.getAccessor(this.config.pathConverter,Z);return(f,v,Z,h)=>{var J;const l=[],e=V.info.type;return e.startsWith("Color")&&(f=f.map((f=>({frame:f.frame,value:W(f.value,e)})))),null===(J=V.info.interpolation)||void 0===J||J.forEach(((v,J)=>{var e;const C=(null===(e=V.info.getPropertyName)||void 0===e?void 0:e[J](V.object))||"Animation-interpolation-"+J;let H=f;Z!==v.type&&(H=f.map((f=>({frame:f.frame,value:v.getValue(void 0,f.value.Ph?f.value.Ph():[f.value],0,1)}))));const O=v.buildAnimations(V.object,C,60,H);for(const f of O)h&&f.babylonAnimation.setEasingFunction(h),l.push(f.babylonAnimation)})),l}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function W(f,v){return f.getClassName().startsWith("Color")?f:"Mv"===v?new H.Mv(f.x,f.y,f.z):"he"===v?new H.he(f.x,f.y,f.z,f.w):f}(0,e.h)("FlowGraphJsonPointerParserBlock",u)},14573:(f,v,Z)=>{Z.d(v,{b:()=>e});var V=Z(13149),h=Z(13123);const J="cachedOperationValue",l="cachedExecutionId";class e extends V.c{constructor(f,v){super(v),this.value=this.registerDataOutput("value",f),this.isValid=this.registerDataOutput("isValid",h.g)}_updateOutputs(f){const v=f._getExecutionVariable(this,l,-1),Z=f._getExecutionVariable(this,J,null);if(void 0!==Z&&null!==Z&&v===f.executionId)this.isValid.setValue(!0,f),this.value.setValue(Z,f);else try{const v=this._doOperation(f);if(void 0===v||null===v)return void this.isValid.setValue(!1,f);f._setExecutionVariable(this,J,v),f._setExecutionVariable(this,l,f.executionId),this.value.setValue(v,f),this.isValid.setValue(!0,f)}catch(V){this.isValid.setValue(!1,f)}}}}}]);