"use strict";(self["1xyrlsr8vb9"]=self["1xyrlsr8vb9"]||[]).push([[93],{15516:(I,O,C)=>{C.r(O),C.d(O,{FlowGraphJsonPointerParserBlock:()=>Q});var j=C(13878),K=C(13886);const i=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class y{constructor(I,O){this.path=I,this.ownerBlock=O,this.templatedInputs=[];let C=i.exec(I);const y=new Set;for(;C;){const[,S]=C;if(y.has(S))throw new Error("Duplicate template variable detected.");y.add(S),this.templatedInputs.push(O.registerDataInput(S,K.h,new j.e(0))),C=i.exec(I)}}getAccessor(I,O){let C=this.path;for(const j of this.templatedInputs){const I=j.getValue(O).value;if("number"!==typeof I||I<0)throw new Error("Invalid value for templated input.");C=C.replace(`{${j.name}}`,I.toString())}return I.convert(C)}}var S=C(12226),U=C(12272),p=C(12307),N=C(15369);class Q extends N.e{constructor(I){super(K.d,I),this.config=I,this.object=this.registerDataOutput("object",K.d),this.propertyName=this.registerDataOutput("propertyName",K.d),this.setterFunction=this.registerDataOutput("setFunction",K.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",K.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",K.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new y(I.jsonPointer,this)}_doOperation(I){var O,C,j;const K=this.templateComponent.getAccessor(this.config.pathConverter,I),i=K.info.get(K.object),y=null===(O=(C=K.info).getTarget)||void 0===O?void 0:O.call(C,K.object),S=null===(j=K.info.getPropertyName)||void 0===j?void 0:j[0](K.object);if(!y)throw new Error("Object is undefined");return this.object.setValue(y,I),S&&this.propertyName.setValue(S,I),i}_setPropertyValue(I,O,C,j){var K,i;const y=this.templateComponent.getAccessor(this.config.pathConverter,j),S=y.info.type;S.startsWith("Color")&&(C=s(C,S)),null===(K=(i=y.info).set)||void 0===K||K.call(i,C,y.object)}_getPropertyValue(I,O,C){const j=this.templateComponent.getAccessor(this.config.pathConverter,C),K=j.info.type,i=j.info.get(j.object);return K.startsWith("Color")?function(I){if(I instanceof p.WO)return new U.mC(I.r,I.g,I.b);if(I instanceof p.TS)return new U.Vector4(I.r,I.g,I.b,I.a);throw new Error("Invalid color type")}(i):i}_getInterpolationAnimationPropertyInfo(I,O,C){const j=this.templateComponent.getAccessor(this.config.pathConverter,C);return(I,O,C,K)=>{var i;const y=[],S=j.info.type;return S.startsWith("Color")&&(I=I.map((I=>({frame:I.frame,value:s(I.value,S)})))),null===(i=j.info.interpolation)||void 0===i||i.forEach(((O,i)=>{var S;const U=(null===(S=j.info.getPropertyName)||void 0===S?void 0:S[i](j.object))||"Animation-interpolation-"+i;let p=I;C!==O.type&&(p=I.map((I=>({frame:I.frame,value:O.getValue(void 0,I.value.qS?I.value.qS():[I.value],0,1)}))));const N=O.buildAnimations(j.object,U,60,p);for(const I of N)K&&I.babylonAnimation.setEasingFunction(K),y.push(I.babylonAnimation)})),y}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function s(I,O){return I.getClassName().startsWith("Color")?I:"WO"===O?new p.WO(I.x,I.y,I.z):"TS"===O?new p.TS(I.x,I.y,I.z,I.w):I}(0,S.e)("FlowGraphJsonPointerParserBlock",Q)},15369:(I,O,C)=>{C.d(O,{e:()=>S});var j=C(13906),K=C(13886);const i="cachedOperationValue",y="cachedExecutionId";class S extends j.d{constructor(I,O){super(O),this.value=this.registerDataOutput("value",I),this.isValid=this.registerDataOutput("isValid",K.g)}_updateOutputs(I){const O=I._getExecutionVariable(this,y,-1),C=I._getExecutionVariable(this,i,null);if(void 0!==C&&null!==C&&O===I.executionId)this.isValid.setValue(!0,I),this.value.setValue(C,I);else try{const O=this._doOperation(I);if(void 0===O||null===O)return void this.isValid.setValue(!1,I);I._setExecutionVariable(this,i,O),I._setExecutionVariable(this,y,I.executionId),this.value.setValue(O,I),this.isValid.setValue(!0,I)}catch(j){this.isValid.setValue(!1,I)}}}}}]);