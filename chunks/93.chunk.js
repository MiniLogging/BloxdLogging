"use strict";(self.h6ljd275xwr=self.h6ljd275xwr||[]).push([[93],{14732:(n,y,H)=>{H.r(y),H.d(y,{FlowGraphJsonPointerParserBlock:()=>b});var o=H(13112),G=H(13117);const h=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class k{constructor(n,y){this.path=n,this.ownerBlock=y,this.templatedInputs=[];let H=h.exec(n);const k=new Set;for(;H;){const[,i]=H;if(k.has(i))throw new Error("Duplicate template variable detected.");k.add(i),this.templatedInputs.push(y.registerDataInput(i,G.f,new o.c(0))),H=h.exec(n)}}getAccessor(n,y){let H=this.path;for(const o of this.templatedInputs){const n=o.getValue(y).value;if("number"!==typeof n||n<0)throw new Error("Invalid value for templated input.");H=H.replace(`{${o.name}}`,n.toString())}return n.convert(H)}}var i=H(11248),B=H(11288),V=H(11335),q=H(14592);class b extends q.b{constructor(n){super(G.c,n),this.config=n,this.object=this.registerDataOutput("object",G.c),this.propertyName=this.registerDataOutput("propertyName",G.c),this.setterFunction=this.registerDataOutput("setFunction",G.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",G.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",G.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new k(n.jsonPointer,this)}_doOperation(n){var y,H,o;const G=this.templateComponent.getAccessor(this.config.pathConverter,n),h=G.info.get(G.object),k=null===(y=(H=G.info).getTarget)||void 0===y?void 0:y.call(H,G.object),i=null===(o=G.info.getPropertyName)||void 0===o?void 0:o[0](G.object);if(!k)throw new Error("Object is undefined");return this.object.setValue(k,n),i&&this.propertyName.setValue(i,n),h}_setPropertyValue(n,y,H,o){var G,h;const k=this.templateComponent.getAccessor(this.config.pathConverter,o),i=k.info.type;i.startsWith("Color")&&(H=A(H,i)),null===(G=(h=k.info).set)||void 0===G||G.call(h,H,k.object)}_getPropertyValue(n,y,H){const o=this.templateComponent.getAccessor(this.config.pathConverter,H),G=o.info.type,h=o.info.get(o.object);return G.startsWith("Color")?function(n){if(n instanceof V.Fy)return new B.zy(n.r,n.g,n.b);if(n instanceof V.pi)return new B.Vector4(n.r,n.g,n.b,n.a);throw new Error("Invalid color type")}(h):h}_getInterpolationAnimationPropertyInfo(n,y,H){const o=this.templateComponent.getAccessor(this.config.pathConverter,H);return(n,y,H,G)=>{var h;const k=[],i=o.info.type;return i.startsWith("Color")&&(n=n.map((n=>({frame:n.frame,value:A(n.value,i)})))),null===(h=o.info.interpolation)||void 0===h||h.forEach(((y,h)=>{var i;const B=(null===(i=o.info.getPropertyName)||void 0===i?void 0:i[h](o.object))||"Animation-interpolation-"+h;let V=n;H!==y.type&&(V=n.map((n=>({frame:n.frame,value:y.getValue(void 0,n.value.Ui?n.value.Ui():[n.value],0,1)}))));const q=y.buildAnimations(o.object,B,60,V);for(const n of q)G&&n.babylonAnimation.setEasingFunction(G),k.push(n.babylonAnimation)})),k}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function A(n,y){return n.getClassName().startsWith("Color")?n:"Fy"===y?new V.Fy(n.x,n.y,n.z):"pi"===y?new V.pi(n.x,n.y,n.z,n.w):n}(0,i.h)("FlowGraphJsonPointerParserBlock",b)},14592:(n,y,H)=>{H.d(y,{b:()=>i});var o=H(13146),G=H(13117);const h="cachedOperationValue",k="cachedExecutionId";class i extends o.c{constructor(n,y){super(y),this.value=this.registerDataOutput("value",n),this.isValid=this.registerDataOutput("isValid",G.e)}_updateOutputs(n){const y=n._getExecutionVariable(this,k,-1),H=n._getExecutionVariable(this,h,null);if(void 0!==H&&null!==H&&y===n.executionId)this.isValid.setValue(!0,n),this.value.setValue(H,n);else try{const y=this._doOperation(n);if(void 0===y||null===y)return void this.isValid.setValue(!1,n);n._setExecutionVariable(this,h,y),n._setExecutionVariable(this,k,n.executionId),this.value.setValue(y,n),this.isValid.setValue(!0,n)}catch(o){this.isValid.setValue(!1,n)}}}}}]);