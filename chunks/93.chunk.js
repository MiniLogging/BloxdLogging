"use strict";(self["9s4i8ue3jq"]=self["9s4i8ue3jq"]||[]).push([[93],{16168:(a,c,o)=>{o.r(c),o.d(c,{FlowGraphJsonPointerParserBlock:()=>j});var s=o(14386),q=o(14394);const t=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class i{constructor(a,c){this.path=a,this.ownerBlock=c,this.templatedInputs=[];let o=t.exec(a);const i=new Set;for(;o;){const[,p]=o;if(i.has(p))throw new Error("Duplicate template variable detected.");i.add(p),this.templatedInputs.push(c.registerDataInput(p,q.g,new s.c(0))),o=t.exec(a)}}getAccessor(a,c){let o=this.path;for(const s of this.templatedInputs){const a=s.getValue(c).value;if("number"!==typeof a||a<0)throw new Error("Invalid value for templated input.");o=o.replace(`{${s.name}}`,a.toString())}return a.convert(o)}}var p=o(12776),G=o(12810),T=o(12858),C=o(16018);class j extends C.c{constructor(a){super(q.c,a),this.config=a,this.object=this.registerDataOutput("object",q.c),this.propertyName=this.registerDataOutput("propertyName",q.c),this.setterFunction=this.registerDataOutput("setFunction",q.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",q.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",q.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new i(a.jsonPointer,this)}_doOperation(a){var c,o,s;const q=this.templateComponent.getAccessor(this.config.pathConverter,a),t=q.info.get(q.object),i=null===(c=(o=q.info).getTarget)||void 0===c?void 0:c.call(o,q.object),p=null===(s=q.info.getPropertyName)||void 0===s?void 0:s[0](q.object);if(!i)throw new Error("Object is undefined");return this.object.setValue(i,a),p&&this.propertyName.setValue(p,a),t}_setPropertyValue(a,c,o,s){var q,t;const i=this.templateComponent.getAccessor(this.config.pathConverter,s),p=i.info.type;p.startsWith("Color")&&(o=L(o,p)),null===(q=(t=i.info).set)||void 0===q||q.call(t,o,i.object)}_getPropertyValue(a,c,o){const s=this.templateComponent.getAccessor(this.config.pathConverter,o),q=s.info.type,t=s.info.get(s.object);return q.startsWith("Color")?function(a){if(a instanceof T.oo)return new G.Hc(a.r,a.g,a.b);if(a instanceof T.Yc)return new G.Vector4(a.r,a.g,a.b,a.a);throw new Error("Invalid color type")}(t):t}_getInterpolationAnimationPropertyInfo(a,c,o){const s=this.templateComponent.getAccessor(this.config.pathConverter,o);return(a,c,o,q)=>{var t;const i=[],p=s.info.type;return p.startsWith("Color")&&(a=a.map((a=>({frame:a.frame,value:L(a.value,p)})))),null===(t=s.info.interpolation)||void 0===t||t.forEach(((c,t)=>{var p;const G=(null===(p=s.info.getPropertyName)||void 0===p?void 0:p[t](s.object))||"Animation-interpolation-"+t;let T=a;o!==c.type&&(T=a.map((a=>({frame:a.frame,value:c.getValue(void 0,a.value.hc?a.value.hc():[a.value],0,1)}))));const C=c.buildAnimations(s.object,G,60,T);for(const a of C)q&&a.babylonAnimation.setEasingFunction(q),i.push(a.babylonAnimation)})),i}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function L(a,c){return a.getClassName().startsWith("Color")?a:"oo"===c?new T.oo(a.x,a.y,a.z):"Yc"===c?new T.Yc(a.x,a.y,a.z,a.w):a}(0,p.d)("FlowGraphJsonPointerParserBlock",j)},16018:(a,c,o)=>{o.d(c,{c:()=>p});var s=o(14423),q=o(14394);const t="cachedOperationValue",i="cachedExecutionId";class p extends s.e{constructor(a,c){super(c),this.value=this.registerDataOutput("value",a),this.isValid=this.registerDataOutput("isValid",q.f)}_updateOutputs(a){const c=a._getExecutionVariable(this,i,-1),o=a._getExecutionVariable(this,t,null);if(void 0!==o&&null!==o&&c===a.executionId)this.isValid.setValue(!0,a),this.value.setValue(o,a);else try{const c=this._doOperation(a);if(void 0===c||null===c)return void this.isValid.setValue(!1,a);a._setExecutionVariable(this,t,c),a._setExecutionVariable(this,i,a.executionId),this.value.setValue(c,a),this.isValid.setValue(!0,a)}catch(s){this.isValid.setValue(!1,a)}}}}}]);