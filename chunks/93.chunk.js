"use strict";(self.i6szn8jgzh=self.i6szn8jgzh||[]).push([[93],{15253:(b,n,i)=>{i.r(n),i.d(n,{FlowGraphJsonPointerParserBlock:()=>N});var e=i(13513),V=i(13522);const Q=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class U{constructor(b,n){this.path=b,this.ownerBlock=n,this.templatedInputs=[];let i=Q.exec(b);const U=new Set;for(;i;){const[,Y]=i;if(U.has(Y))throw new Error("Duplicate template variable detected.");U.add(Y),this.templatedInputs.push(n.registerDataInput(Y,V.h,new e.b(0))),i=Q.exec(b)}}getAccessor(b,n){let i=this.path;for(const e of this.templatedInputs){const b=e.getValue(n).value;if("number"!==typeof b||b<0)throw new Error("Invalid value for templated input.");i=i.replace(`{${e.name}}`,b.toString())}return b.convert(i)}}var Y=i(11734),L=i(11778),B=i(11822),mb=i(15083);class N extends mb.b{constructor(b){super(V.c,b),this.config=b,this.object=this.registerDataOutput("object",V.c),this.propertyName=this.registerDataOutput("propertyName",V.c),this.setterFunction=this.registerDataOutput("setFunction",V.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",V.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",V.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new U(b.jsonPointer,this)}_doOperation(b){var n,i,e;const V=this.templateComponent.getAccessor(this.config.pathConverter,b),Q=V.info.get(V.object),U=null===(n=(i=V.info).getTarget)||void 0===n?void 0:n.call(i,V.object),Y=null===(e=V.info.getPropertyName)||void 0===e?void 0:e[0](V.object);if(!U)throw new Error("Object is undefined");return this.object.setValue(U,b),Y&&this.propertyName.setValue(Y,b),Q}_setPropertyValue(b,n,i,e){var V,Q;const U=this.templateComponent.getAccessor(this.config.pathConverter,e),Y=U.info.type;Y.startsWith("Color")&&(i=Z(i,Y)),null===(V=(Q=U.info).set)||void 0===V||V.call(Q,i,U.object)}_getPropertyValue(b,n,i){const e=this.templateComponent.getAccessor(this.config.pathConverter,i),V=e.info.type,Q=e.info.get(e.object);return V.startsWith("Color")?function(b){if(b instanceof B.Mn)return new L.On(b.r,b.g,b.b);if(b instanceof B.IV)return new L.Vector4(b.r,b.g,b.b,b.a);throw new Error("Invalid color type")}(Q):Q}_getInterpolationAnimationPropertyInfo(b,n,i){const e=this.templateComponent.getAccessor(this.config.pathConverter,i);return(b,n,i,V)=>{var Q;const U=[],Y=e.info.type;return Y.startsWith("Color")&&(b=b.map((b=>({frame:b.frame,value:Z(b.value,Y)})))),null===(Q=e.info.interpolation)||void 0===Q||Q.forEach(((n,Q)=>{var Y;const L=(null===(Y=e.info.getPropertyName)||void 0===Y?void 0:Y[Q](e.object))||"Animation-interpolation-"+Q;let B=b;i!==n.type&&(B=b.map((b=>({frame:b.frame,value:n.getValue(void 0,b.value.ye?b.value.ye():[b.value],0,1)}))));const mb=n.buildAnimations(e.object,L,60,B);for(const b of mb)V&&b.babylonAnimation.setEasingFunction(V),U.push(b.babylonAnimation)})),U}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function Z(b,n){return b.getClassName().startsWith("Color")?b:"Mn"===n?new B.Mn(b.x,b.y,b.z):"IV"===n?new B.IV(b.x,b.y,b.z,b.w):b}(0,Y.i)("FlowGraphJsonPointerParserBlock",N)},15083:(b,n,i)=>{i.d(n,{b:()=>Y});var e=i(13547),V=i(13522);const Q="cachedOperationValue",U="cachedExecutionId";class Y extends e.c{constructor(b,n){super(n),this.value=this.registerDataOutput("value",b),this.isValid=this.registerDataOutput("isValid",V.f)}_updateOutputs(b){const n=b._getExecutionVariable(this,U,-1),i=b._getExecutionVariable(this,Q,null);if(void 0!==i&&null!==i&&n===b.executionId)this.isValid.setValue(!0,b),this.value.setValue(i,b);else try{const n=this._doOperation(b);if(void 0===n||null===n)return void this.isValid.setValue(!1,b);b._setExecutionVariable(this,Q,n),b._setExecutionVariable(this,U,b.executionId),this.value.setValue(n,b),this.isValid.setValue(!0,b)}catch(e){this.isValid.setValue(!1,b)}}}}}]);