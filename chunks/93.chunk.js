"use strict";(self.fyqbdzs5tyo=self.fyqbdzs5tyo||[]).push([[93],{14525:(V,I,A)=>{A.r(I),A.d(I,{FlowGraphJsonPointerParserBlock:()=>P});var B=A(12948),F=A(12954);const E=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class Y{constructor(V,I){this.path=V,this.ownerBlock=I,this.templatedInputs=[];let A=E.exec(V);const Y=new Set;for(;A;){const[,H]=A;if(Y.has(H))throw new Error("Duplicate template variable detected.");Y.add(H),this.templatedInputs.push(I.registerDataInput(H,F.i,new B.e(0))),A=E.exec(V)}}getAccessor(V,I){let A=this.path;for(const B of this.templatedInputs){const V=B.getValue(I).value;if("number"!==typeof V||V<0)throw new Error("Invalid value for templated input.");A=A.replace(`{${B.name}}`,V.toString())}return V.convert(A)}}var H=A(11189),c=A(11231),b=A(11276),X=A(14369);class P extends X.d{constructor(V){super(F.e,V),this.config=V,this.object=this.registerDataOutput("object",F.e),this.propertyName=this.registerDataOutput("propertyName",F.e),this.setterFunction=this.registerDataOutput("setFunction",F.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",F.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",F.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new Y(V.jsonPointer,this)}_doOperation(V){var I,A,B;const F=this.templateComponent.getAccessor(this.config.pathConverter,V),E=F.info.get(F.object),Y=null===(I=(A=F.info).getTarget)||void 0===I?void 0:I.call(A,F.object),H=null===(B=F.info.getPropertyName)||void 0===B?void 0:B[0](F.object);if(!Y)throw new Error("Object is undefined");return this.object.setValue(Y,V),H&&this.propertyName.setValue(H,V),E}_setPropertyValue(V,I,A,B){var F,E;const Y=this.templateComponent.getAccessor(this.config.pathConverter,B),H=Y.info.type;H.startsWith("Color")&&(A=J(A,H)),null===(F=(E=Y.info).set)||void 0===F||F.call(E,A,Y.object)}_getPropertyValue(V,I,A){const B=this.templateComponent.getAccessor(this.config.pathConverter,A),F=B.info.type,E=B.info.get(B.object);return F.startsWith("Color")?function(V){if(V instanceof b.oI)return new c.tI(V.r,V.g,V.b);if(V instanceof b.GH)return new c.Vector4(V.r,V.g,V.b,V.a);throw new Error("Invalid color type")}(E):E}_getInterpolationAnimationPropertyInfo(V,I,A){const B=this.templateComponent.getAccessor(this.config.pathConverter,A);return(V,I,A,F)=>{var E;const Y=[],H=B.info.type;return H.startsWith("Color")&&(V=V.map((V=>({frame:V.frame,value:J(V.value,H)})))),null===(E=B.info.interpolation)||void 0===E||E.forEach(((I,E)=>{var H;const c=(null===(H=B.info.getPropertyName)||void 0===H?void 0:H[E](B.object))||"Animation-interpolation-"+E;let b=V;A!==I.type&&(b=V.map((V=>({frame:V.frame,value:I.getValue(void 0,V.value.AH?V.value.AH():[V.value],0,1)}))));const X=I.buildAnimations(B.object,c,60,b);for(const V of X)F&&V.babylonAnimation.setEasingFunction(F),Y.push(V.babylonAnimation)})),Y}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function J(V,I){return V.getClassName().startsWith("Color")?V:"oI"===I?new b.oI(V.x,V.y,V.z):"GH"===I?new b.GH(V.x,V.y,V.z,V.w):V}(0,H.e)("FlowGraphJsonPointerParserBlock",P)},14369:(V,I,A)=>{A.d(I,{d:()=>H});var B=A(12979),F=A(12954);const E="cachedOperationValue",Y="cachedExecutionId";class H extends B.d{constructor(V,I){super(I),this.value=this.registerDataOutput("value",V),this.isValid=this.registerDataOutput("isValid",F.g)}_updateOutputs(V){const I=V._getExecutionVariable(this,Y,-1),A=V._getExecutionVariable(this,E,null);if(void 0!==A&&null!==A&&I===V.executionId)this.isValid.setValue(!0,V),this.value.setValue(A,V);else try{const I=this._doOperation(V);if(void 0===I||null===I)return void this.isValid.setValue(!1,V);V._setExecutionVariable(this,E,I),V._setExecutionVariable(this,Y,V.executionId),this.value.setValue(I,V),this.isValid.setValue(!0,V)}catch(B){this.isValid.setValue(!1,V)}}}}}]);