"use strict";(self["80dd64vgxnn"]=self["80dd64vgxnn"]||[]).push([[93],{15951:(mm,o,u)=>{u.r(o),u.d(o,{FlowGraphJsonPointerParserBlock:()=>Y});var f=u(14255),B=u(14257);const O=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class r{constructor(mm,o){this.path=mm,this.ownerBlock=o,this.templatedInputs=[];let u=O.exec(mm);const r=new Set;for(;u;){const[,w]=u;if(r.has(w))throw new Error("Duplicate template variable detected.");r.add(w),this.templatedInputs.push(o.registerDataInput(w,B.j,new f.d(0))),u=O.exec(mm)}}getAccessor(mm,o){let u=this.path;for(const f of this.templatedInputs){const mm=f.getValue(o).value;if("number"!==typeof mm||mm<0)throw new Error("Invalid value for templated input.");u=u.replace(`{${f.name}}`,mm.toString())}return mm.convert(u)}}var w=u(12702),p=u(12740),K=u(12780),z=u(15821);class Y extends z.d{constructor(mm){super(B.b,mm),this.config=mm,this.object=this.registerDataOutput("object",B.b),this.propertyName=this.registerDataOutput("propertyName",B.b),this.setterFunction=this.registerDataOutput("setFunction",B.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",B.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",B.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new r(mm.jsonPointer,this)}_doOperation(mm){var o,u,f;const B=this.templateComponent.getAccessor(this.config.pathConverter,mm),O=B.info.get(B.object),r=null===(o=(u=B.info).getTarget)||void 0===o?void 0:o.call(u,B.object),w=null===(f=B.info.getPropertyName)||void 0===f?void 0:f[0](B.object);if(!r)throw new Error("Object is undefined");return this.object.setValue(r,mm),w&&this.propertyName.setValue(w,mm),O}_setPropertyValue(mm,o,u,f){var B,O;const r=this.templateComponent.getAccessor(this.config.pathConverter,f),w=r.info.type;w.startsWith("Color")&&(u=q(u,w)),null===(B=(O=r.info).set)||void 0===B||B.call(O,u,r.object)}_getPropertyValue(mm,o,u){const f=this.templateComponent.getAccessor(this.config.pathConverter,u),B=f.info.type,O=f.info.get(f.object);return B.startsWith("Color")?function(mm){if(mm instanceof K.No)return new p.lo(mm.r,mm.g,mm.b);if(mm instanceof K.pp)return new p.Vector4(mm.r,mm.g,mm.b,mm.a);throw new Error("Invalid color type")}(O):O}_getInterpolationAnimationPropertyInfo(mm,o,u){const f=this.templateComponent.getAccessor(this.config.pathConverter,u);return(mm,o,u,B)=>{var O;const r=[],w=f.info.type;return w.startsWith("Color")&&(mm=mm.map((mm=>({frame:mm.frame,value:q(mm.value,w)})))),null===(O=f.info.interpolation)||void 0===O||O.forEach(((o,O)=>{var w;const p=(null===(w=f.info.getPropertyName)||void 0===w?void 0:w[O](f.object))||"Animation-interpolation-"+O;let K=mm;u!==o.type&&(K=mm.map((mm=>({frame:mm.frame,value:o.getValue(void 0,mm.value.df?mm.value.df():[mm.value],0,1)}))));const z=o.buildAnimations(f.object,p,60,K);for(const mm of z)B&&mm.babylonAnimation.setEasingFunction(B),r.push(mm.babylonAnimation)})),r}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function q(mm,o){return mm.getClassName().startsWith("Color")?mm:"No"===o?new K.No(mm.x,mm.y,mm.z):"pp"===o?new K.pp(mm.x,mm.y,mm.z,mm.w):mm}(0,w.c)("FlowGraphJsonPointerParserBlock",Y)},15821:(mm,o,u)=>{u.d(o,{d:()=>w});var f=u(14280),B=u(14257);const O="cachedOperationValue",r="cachedExecutionId";class w extends f.e{constructor(mm,o){super(o),this.value=this.registerDataOutput("value",mm),this.isValid=this.registerDataOutput("isValid",B.f)}_updateOutputs(mm){const o=mm._getExecutionVariable(this,r,-1),u=mm._getExecutionVariable(this,O,null);if(void 0!==u&&null!==u&&o===mm.executionId)this.isValid.setValue(!0,mm),this.value.setValue(u,mm);else try{const o=this._doOperation(mm);if(void 0===o||null===o)return void this.isValid.setValue(!1,mm);mm._setExecutionVariable(this,O,o),mm._setExecutionVariable(this,r,mm.executionId),this.value.setValue(o,mm),this.isValid.setValue(!0,mm)}catch(f){this.isValid.setValue(!1,mm)}}}}}]);