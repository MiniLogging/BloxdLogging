"use strict";(self.hmihoa2fs98=self.hmihoa2fs98||[]).push([[93],{15025:(b,d,P)=>{P.r(d),P.d(d,{FlowGraphJsonPointerParserBlock:()=>Y});var G=P(13360),W=P(13365);const i=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class q{constructor(b,d){this.path=b,this.ownerBlock=d,this.templatedInputs=[];let P=i.exec(b);const q=new Set;for(;P;){const[,C]=P;if(q.has(C))throw new Error("Duplicate template variable detected.");q.add(C),this.templatedInputs.push(d.registerDataInput(C,W.d,new G.b(0))),P=i.exec(b)}}getAccessor(b,d){let P=this.path;for(const G of this.templatedInputs){const b=G.getValue(d).value;if("number"!==typeof b||b<0)throw new Error("Invalid value for templated input.");P=P.replace(`{${G.name}}`,b.toString())}return b.convert(P)}}var C=P(11639),J=P(11681),L=P(11725),x=P(14890);class Y extends x.e{constructor(b){super(W.b,b),this.config=b,this.object=this.registerDataOutput("object",W.b),this.propertyName=this.registerDataOutput("propertyName",W.b),this.setterFunction=this.registerDataOutput("setFunction",W.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",W.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",W.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new q(b.jsonPointer,this)}_doOperation(b){var d,P,G;const W=this.templateComponent.getAccessor(this.config.pathConverter,b),i=W.info.get(W.object),q=null===(d=(P=W.info).getTarget)||void 0===d?void 0:d.call(P,W.object),C=null===(G=W.info.getPropertyName)||void 0===G?void 0:G[0](W.object);if(!q)throw new Error("Object is undefined");return this.object.setValue(q,b),C&&this.propertyName.setValue(C,b),i}_setPropertyValue(b,d,P,G){var W,i;const q=this.templateComponent.getAccessor(this.config.pathConverter,G),C=q.info.type;C.startsWith("Color")&&(P=s(P,C)),null===(W=(i=q.info).set)||void 0===W||W.call(i,P,q.object)}_getPropertyValue(b,d,P){const G=this.templateComponent.getAccessor(this.config.pathConverter,P),W=G.info.type,i=G.info.get(G.object);return W.startsWith("Color")?function(b){if(b instanceof L.Nd)return new J.ed(b.r,b.g,b.b);if(b instanceof L.ci)return new J.Vector4(b.r,b.g,b.b,b.a);throw new Error("Invalid color type")}(i):i}_getInterpolationAnimationPropertyInfo(b,d,P){const G=this.templateComponent.getAccessor(this.config.pathConverter,P);return(b,d,P,W)=>{var i;const q=[],C=G.info.type;return C.startsWith("Color")&&(b=b.map((b=>({frame:b.frame,value:s(b.value,C)})))),null===(i=G.info.interpolation)||void 0===i||i.forEach(((d,i)=>{var C;const J=(null===(C=G.info.getPropertyName)||void 0===C?void 0:C[i](G.object))||"Animation-interpolation-"+i;let L=b;P!==d.type&&(L=b.map((b=>({frame:b.frame,value:d.getValue(void 0,b.value.jd?b.value.jd():[b.value],0,1)}))));const x=d.buildAnimations(G.object,J,60,L);for(const b of x)W&&b.babylonAnimation.setEasingFunction(W),q.push(b.babylonAnimation)})),q}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function s(b,d){return b.getClassName().startsWith("Color")?b:"Nd"===d?new L.Nd(b.x,b.y,b.z):"ci"===d?new L.ci(b.x,b.y,b.z,b.w):b}(0,C.f)("FlowGraphJsonPointerParserBlock",Y)},14890:(b,d,P)=>{P.d(d,{e:()=>C});var G=P(13386),W=P(13365);const i="cachedOperationValue",q="cachedExecutionId";class C extends G.b{constructor(b,d){super(d),this.value=this.registerDataOutput("value",b),this.isValid=this.registerDataOutput("isValid",W.c)}_updateOutputs(b){const d=b._getExecutionVariable(this,q,-1),P=b._getExecutionVariable(this,i,null);if(void 0!==P&&null!==P&&d===b.executionId)this.isValid.setValue(!0,b),this.value.setValue(P,b);else try{const d=this._doOperation(b);if(void 0===d||null===d)return void this.isValid.setValue(!1,b);b._setExecutionVariable(this,i,d),b._setExecutionVariable(this,q,b.executionId),this.value.setValue(d,b),this.isValid.setValue(!0,b)}catch(G){this.isValid.setValue(!1,b)}}}}}]);