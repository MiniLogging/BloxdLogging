"use strict";(self["1kjc9ee3uyt"]=self["1kjc9ee3uyt"]||[]).push([[93],{14938:(w,E,G)=>{G.r(E),G.d(E,{FlowGraphJsonPointerParserBlock:()=>O});var P=G(13274),h=G(13281);const B=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class y{constructor(w,E){this.path=w,this.ownerBlock=E,this.templatedInputs=[];let G=B.exec(w);const y=new Set;for(;G;){const[,x]=G;if(y.has(x))throw new Error("Duplicate template variable detected.");y.add(x),this.templatedInputs.push(E.registerDataInput(x,h.h,new P.d(0))),G=B.exec(w)}}getAccessor(w,E){let G=this.path;for(const P of this.templatedInputs){const w=P.getValue(E).value;if("number"!==typeof w||w<0)throw new Error("Invalid value for templated input.");G=G.replace(`{${P.name}}`,w.toString())}return w.convert(G)}}var x=G(11646),U=G(11679),l=G(11716),i=G(14776);class O extends i.e{constructor(w){super(h.c,w),this.config=w,this.object=this.registerDataOutput("object",h.c),this.propertyName=this.registerDataOutput("propertyName",h.c),this.setterFunction=this.registerDataOutput("setFunction",h.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",h.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",h.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new y(w.jsonPointer,this)}_doOperation(w){var E,G,P;const h=this.templateComponent.getAccessor(this.config.pathConverter,w),B=h.info.get(h.object),y=null===(E=(G=h.info).getTarget)||void 0===E?void 0:E.call(G,h.object),x=null===(P=h.info.getPropertyName)||void 0===P?void 0:P[0](h.object);if(!y)throw new Error("Object is undefined");return this.object.setValue(y,w),x&&this.propertyName.setValue(x,w),B}_setPropertyValue(w,E,G,P){var h,B;const y=this.templateComponent.getAccessor(this.config.pathConverter,P),x=y.info.type;x.startsWith("Color")&&(G=u(G,x)),null===(h=(B=y.info).set)||void 0===h||h.call(B,G,y.object)}_getPropertyValue(w,E,G){const P=this.templateComponent.getAccessor(this.config.pathConverter,G),h=P.info.type,B=P.info.get(P.object);return h.startsWith("Color")?function(w){if(w instanceof l.dE)return new U.QE(w.r,w.g,w.b);if(w instanceof l.Tx)return new U.Vector4(w.r,w.g,w.b,w.a);throw new Error("Invalid color type")}(B):B}_getInterpolationAnimationPropertyInfo(w,E,G){const P=this.templateComponent.getAccessor(this.config.pathConverter,G);return(w,E,G,h)=>{var B;const y=[],x=P.info.type;return x.startsWith("Color")&&(w=w.map((w=>({frame:w.frame,value:u(w.value,x)})))),null===(B=P.info.interpolation)||void 0===B||B.forEach(((E,B)=>{var x;const U=(null===(x=P.info.getPropertyName)||void 0===x?void 0:x[B](P.object))||"Animation-interpolation-"+B;let l=w;G!==E.type&&(l=w.map((w=>({frame:w.frame,value:E.getValue(void 0,w.value.Lh?w.value.Lh():[w.value],0,1)}))));const i=E.buildAnimations(P.object,U,60,l);for(const w of i)h&&w.babylonAnimation.setEasingFunction(h),y.push(w.babylonAnimation)})),y}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function u(w,E){return w.getClassName().startsWith("Color")?w:"dE"===E?new l.dE(w.x,w.y,w.z):"Tx"===E?new l.Tx(w.x,w.y,w.z,w.w):w}(0,x.g)("FlowGraphJsonPointerParserBlock",O)},14776:(w,E,G)=>{G.d(E,{e:()=>x});var P=G(13298),h=G(13281);const B="cachedOperationValue",y="cachedExecutionId";class x extends P.d{constructor(w,E){super(E),this.value=this.registerDataOutput("value",w),this.isValid=this.registerDataOutput("isValid",h.g)}_updateOutputs(w){const E=w._getExecutionVariable(this,y,-1),G=w._getExecutionVariable(this,B,null);if(void 0!==G&&null!==G&&E===w.executionId)this.isValid.setValue(!0,w),this.value.setValue(G,w);else try{const E=this._doOperation(w);if(void 0===E||null===E)return void this.isValid.setValue(!1,w);w._setExecutionVariable(this,B,E),w._setExecutionVariable(this,y,w.executionId),this.value.setValue(E,w),this.isValid.setValue(!0,w)}catch(P){this.isValid.setValue(!1,w)}}}}}]);