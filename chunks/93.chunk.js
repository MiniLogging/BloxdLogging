"use strict";(self.rsqbdnwe5e=self.rsqbdnwe5e||[]).push([[93],{15686:(N,p,T)=>{T.r(p),T.d(p,{FlowGraphJsonPointerParserBlock:()=>M});var A=T(14079),a=T(14082);const C=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class U{constructor(N,p){this.path=N,this.ownerBlock=p,this.templatedInputs=[];let T=C.exec(N);const U=new Set;for(;T;){const[,X]=T;if(U.has(X))throw new Error("Duplicate template variable detected.");U.add(X),this.templatedInputs.push(p.registerDataInput(X,a.h,new A.c(0))),T=C.exec(N)}}getAccessor(N,p){let T=this.path;for(const A of this.templatedInputs){const N=A.getValue(p).value;if("number"!==typeof N||N<0)throw new Error("Invalid value for templated input.");T=T.replace(`{${A.name}}`,N.toString())}return N.convert(T)}}var X=T(12331),y=T(12371),e=T(12421),H=T(15541);class M extends H.d{constructor(N){super(a.d,N),this.config=N,this.object=this.registerDataOutput("object",a.d),this.propertyName=this.registerDataOutput("propertyName",a.d),this.setterFunction=this.registerDataOutput("setFunction",a.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",a.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",a.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new U(N.jsonPointer,this)}_doOperation(N){var p,T,A;const a=this.templateComponent.getAccessor(this.config.pathConverter,N),C=a.info.get(a.object),U=null===(p=(T=a.info).getTarget)||void 0===p?void 0:p.call(T,a.object),X=null===(A=a.info.getPropertyName)||void 0===A?void 0:A[0](a.object);if(!U)throw new Error("Object is undefined");return this.object.setValue(U,N),X&&this.propertyName.setValue(X,N),C}_setPropertyValue(N,p,T,A){var a,C;const U=this.templateComponent.getAccessor(this.config.pathConverter,A),X=U.info.type;X.startsWith("Color")&&(T=b(T,X)),null===(a=(C=U.info).set)||void 0===a||a.call(C,T,U.object)}_getPropertyValue(N,p,T){const A=this.templateComponent.getAccessor(this.config.pathConverter,T),a=A.info.type,C=A.info.get(A.object);return a.startsWith("Color")?function(N){if(N instanceof e.wp)return new y.xp(N.r,N.g,N.b);if(N instanceof e.LX)return new y.Vector4(N.r,N.g,N.b,N.a);throw new Error("Invalid color type")}(C):C}_getInterpolationAnimationPropertyInfo(N,p,T){const A=this.templateComponent.getAccessor(this.config.pathConverter,T);return(N,p,T,a)=>{var C;const U=[],X=A.info.type;return X.startsWith("Color")&&(N=N.map((N=>({frame:N.frame,value:b(N.value,X)})))),null===(C=A.info.interpolation)||void 0===C||C.forEach(((p,C)=>{var X;const y=(null===(X=A.info.getPropertyName)||void 0===X?void 0:X[C](A.object))||"Animation-interpolation-"+C;let e=N;T!==p.type&&(e=N.map((N=>({frame:N.frame,value:p.getValue(void 0,N.value.UX?N.value.UX():[N.value],0,1)}))));const H=p.buildAnimations(A.object,y,60,e);for(const N of H)a&&N.babylonAnimation.setEasingFunction(a),U.push(N.babylonAnimation)})),U}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function b(N,p){return N.getClassName().startsWith("Color")?N:"wp"===p?new e.wp(N.x,N.y,N.z):"LX"===p?new e.LX(N.x,N.y,N.z,N.w):N}(0,X.d)("FlowGraphJsonPointerParserBlock",M)},15541:(N,p,T)=>{T.d(p,{d:()=>X});var A=T(14108),a=T(14082);const C="cachedOperationValue",U="cachedExecutionId";class X extends A.c{constructor(N,p){super(p),this.value=this.registerDataOutput("value",N),this.isValid=this.registerDataOutput("isValid",a.g)}_updateOutputs(N){const p=N._getExecutionVariable(this,U,-1),T=N._getExecutionVariable(this,C,null);if(void 0!==T&&null!==T&&p===N.executionId)this.isValid.setValue(!0,N),this.value.setValue(T,N);else try{const p=this._doOperation(N);if(void 0===p||null===p)return void this.isValid.setValue(!1,N);N._setExecutionVariable(this,C,p),N._setExecutionVariable(this,U,N.executionId),this.value.setValue(p,N),this.isValid.setValue(!0,N)}catch(A){this.isValid.setValue(!1,N)}}}}}]);