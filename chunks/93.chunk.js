"use strict";(self["2fwzcez286e"]=self["2fwzcez286e"]||[]).push([[93],{16405:(B,u,F)=>{F.r(u),F.d(u,{FlowGraphJsonPointerParserBlock:()=>Q});var Z=F(14694),V=F(14701);const p=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class G{constructor(B,u){this.path=B,this.ownerBlock=u,this.templatedInputs=[];let F=p.exec(B);const G=new Set;for(;F;){const[,R]=F;if(G.has(R))throw new Error("Duplicate template variable detected.");G.add(R),this.templatedInputs.push(u.registerDataInput(R,V.h,new Z.d(0))),F=p.exec(B)}}getAccessor(B,u){let F=this.path;for(const Z of this.templatedInputs){const B=Z.getValue(u).value;if("number"!==typeof B||B<0)throw new Error("Invalid value for templated input.");F=F.replace(`{${Z.name}}`,B.toString())}return B.convert(F)}}var R=F(12949),e=F(12979),s=F(13023),Y=F(16250);class Q extends Y.c{constructor(B){super(V.c,B),this.config=B,this.object=this.registerDataOutput("object",V.c),this.propertyName=this.registerDataOutput("propertyName",V.c),this.setterFunction=this.registerDataOutput("setFunction",V.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",V.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",V.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new G(B.jsonPointer,this)}_doOperation(B){var u,F,Z;const V=this.templateComponent.getAccessor(this.config.pathConverter,B),p=V.info.get(V.object),G=null===(u=(F=V.info).getTarget)||void 0===u?void 0:u.call(F,V.object),R=null===(Z=V.info.getPropertyName)||void 0===Z?void 0:Z[0](V.object);if(!G)throw new Error("Object is undefined");return this.object.setValue(G,B),R&&this.propertyName.setValue(R,B),p}_setPropertyValue(B,u,F,Z){var V,p;const G=this.templateComponent.getAccessor(this.config.pathConverter,Z),R=G.info.type;R.startsWith("Color")&&(F=t(F,R)),null===(V=(p=G.info).set)||void 0===V||V.call(p,F,G.object)}_getPropertyValue(B,u,F){const Z=this.templateComponent.getAccessor(this.config.pathConverter,F),V=Z.info.type,p=Z.info.get(Z.object);return V.startsWith("Color")?function(B){if(B instanceof s.Xu)return new e.Du(B.r,B.g,B.b);if(B instanceof s.gR)return new e.Vector4(B.r,B.g,B.b,B.a);throw new Error("Invalid color type")}(p):p}_getInterpolationAnimationPropertyInfo(B,u,F){const Z=this.templateComponent.getAccessor(this.config.pathConverter,F);return(B,u,F,V)=>{var p;const G=[],R=Z.info.type;return R.startsWith("Color")&&(B=B.map((B=>({frame:B.frame,value:t(B.value,R)})))),null===(p=Z.info.interpolation)||void 0===p||p.forEach(((u,p)=>{var R;const e=(null===(R=Z.info.getPropertyName)||void 0===R?void 0:R[p](Z.object))||"Animation-interpolation-"+p;let s=B;F!==u.type&&(s=B.map((B=>({frame:B.frame,value:u.getValue(void 0,B.value.DR?B.value.DR():[B.value],0,1)}))));const Y=u.buildAnimations(Z.object,e,60,s);for(const B of Y)V&&B.babylonAnimation.setEasingFunction(V),G.push(B.babylonAnimation)})),G}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function t(B,u){return B.getClassName().startsWith("Color")?B:"Xu"===u?new s.Xu(B.x,B.y,B.z):"gR"===u?new s.gR(B.x,B.y,B.z,B.w):B}(0,R.f)("FlowGraphJsonPointerParserBlock",Q)},16250:(B,u,F)=>{F.d(u,{c:()=>R});var Z=F(14720),V=F(14701);const p="cachedOperationValue",G="cachedExecutionId";class R extends Z.e{constructor(B,u){super(u),this.value=this.registerDataOutput("value",B),this.isValid=this.registerDataOutput("isValid",V.f)}_updateOutputs(B){const u=B._getExecutionVariable(this,G,-1),F=B._getExecutionVariable(this,p,null);if(void 0!==F&&null!==F&&u===B.executionId)this.isValid.setValue(!0,B),this.value.setValue(F,B);else try{const u=this._doOperation(B);if(void 0===u||null===u)return void this.isValid.setValue(!1,B);B._setExecutionVariable(this,p,u),B._setExecutionVariable(this,G,B.executionId),this.value.setValue(u,B),this.isValid.setValue(!0,B)}catch(Z){this.isValid.setValue(!1,B)}}}}}]);