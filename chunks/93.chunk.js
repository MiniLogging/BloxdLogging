"use strict";(self.zy41qorie9=self.zy41qorie9||[]).push([[93],{15515:(Z,l,C)=>{C.r(l),C.d(l,{FlowGraphJsonPointerParserBlock:()=>E});var B=C(13828),x=C(13830);const b=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class K{constructor(Z,l){this.path=Z,this.ownerBlock=l,this.templatedInputs=[];let C=b.exec(Z);const K=new Set;for(;C;){const[,f]=C;if(K.has(f))throw new Error("Duplicate template variable detected.");K.add(f),this.templatedInputs.push(l.registerDataInput(f,x.i,new B.b(0))),C=b.exec(Z)}}getAccessor(Z,l){let C=this.path;for(const B of this.templatedInputs){const Z=B.getValue(l).value;if("number"!==typeof Z||Z<0)throw new Error("Invalid value for templated input.");C=C.replace(`{${B.name}}`,Z.toString())}return Z.convert(C)}}var f=C(12400),W=C(12442),J=C(12494),d=C(15377);class E extends d.b{constructor(Z){super(x.c,Z),this.config=Z,this.object=this.registerDataOutput("object",x.c),this.propertyName=this.registerDataOutput("propertyName",x.c),this.setterFunction=this.registerDataOutput("setFunction",x.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",x.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",x.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new K(Z.jsonPointer,this)}_doOperation(Z){var l,C,B;const x=this.templateComponent.getAccessor(this.config.pathConverter,Z),b=x.info.get(x.object),K=null===(l=(C=x.info).getTarget)||void 0===l?void 0:l.call(C,x.object),f=null===(B=x.info.getPropertyName)||void 0===B?void 0:B[0](x.object);if(!K)throw new Error("Object is undefined");return this.object.setValue(K,Z),f&&this.propertyName.setValue(f,Z),b}_setPropertyValue(Z,l,C,B){var x,b;const K=this.templateComponent.getAccessor(this.config.pathConverter,B),f=K.info.type;f.startsWith("Color")&&(C=G(C,f)),null===(x=(b=K.info).set)||void 0===x||x.call(b,C,K.object)}_getPropertyValue(Z,l,C){const B=this.templateComponent.getAccessor(this.config.pathConverter,C),x=B.info.type,b=B.info.get(B.object);return x.startsWith("Color")?function(Z){if(Z instanceof J.Sl)return new W.ql(Z.r,Z.g,Z.b);if(Z instanceof J.Rb)return new W.Vector4(Z.r,Z.g,Z.b,Z.a);throw new Error("Invalid color type")}(b):b}_getInterpolationAnimationPropertyInfo(Z,l,C){const B=this.templateComponent.getAccessor(this.config.pathConverter,C);return(Z,l,C,x)=>{var b;const K=[],f=B.info.type;return f.startsWith("Color")&&(Z=Z.map((Z=>({frame:Z.frame,value:G(Z.value,f)})))),null===(b=B.info.interpolation)||void 0===b||b.forEach(((l,b)=>{var f;const W=(null===(f=B.info.getPropertyName)||void 0===f?void 0:f[b](B.object))||"Animation-interpolation-"+b;let J=Z;C!==l.type&&(J=Z.map((Z=>({frame:Z.frame,value:l.getValue(void 0,Z.value.Yb?Z.value.Yb():[Z.value],0,1)}))));const d=l.buildAnimations(B.object,W,60,J);for(const Z of d)x&&Z.babylonAnimation.setEasingFunction(x),K.push(Z.babylonAnimation)})),K}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function G(Z,l){return Z.getClassName().startsWith("Color")?Z:"Sl"===l?new J.Sl(Z.x,Z.y,Z.z):"Rb"===l?new J.Rb(Z.x,Z.y,Z.z,Z.w):Z}(0,f.c)("FlowGraphJsonPointerParserBlock",E)},15377:(Z,l,C)=>{C.d(l,{b:()=>f});var B=C(13853),x=C(13830);const b="cachedOperationValue",K="cachedExecutionId";class f extends B.d{constructor(Z,l){super(l),this.value=this.registerDataOutput("value",Z),this.isValid=this.registerDataOutput("isValid",x.e)}_updateOutputs(Z){const l=Z._getExecutionVariable(this,K,-1),C=Z._getExecutionVariable(this,b,null);if(void 0!==C&&null!==C&&l===Z.executionId)this.isValid.setValue(!0,Z),this.value.setValue(C,Z);else try{const l=this._doOperation(Z);if(void 0===l||null===l)return void this.isValid.setValue(!1,Z);Z._setExecutionVariable(this,b,l),Z._setExecutionVariable(this,K,Z.executionId),this.value.setValue(l,Z),this.isValid.setValue(!0,Z)}catch(B){this.isValid.setValue(!1,Z)}}}}}]);