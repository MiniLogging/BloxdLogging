"use strict";(self.n52dyox90qa=self.n52dyox90qa||[]).push([[93],{15124:(E,t,z)=>{z.r(t),z.d(t,{FlowGraphJsonPointerParserBlock:()=>h});var A=z(13456),X=z(13458);const R=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class u{constructor(E,t){this.path=E,this.ownerBlock=t,this.templatedInputs=[];let z=R.exec(E);const u=new Set;for(;z;){const[,p]=z;if(u.has(p))throw new Error("Duplicate template variable detected.");u.add(p),this.templatedInputs.push(t.registerDataInput(p,X.e,new A.e(0))),z=R.exec(E)}}getAccessor(E,t){let z=this.path;for(const A of this.templatedInputs){const E=A.getValue(t).value;if("number"!==typeof E||E<0)throw new Error("Invalid value for templated input.");z=z.replace(`{${A.name}}`,E.toString())}return E.convert(z)}}var p=z(11766),C=z(11812),Z=z(11856),H=z(14978);class h extends H.b{constructor(E){super(X.c,E),this.config=E,this.object=this.registerDataOutput("object",X.c),this.propertyName=this.registerDataOutput("propertyName",X.c),this.setterFunction=this.registerDataOutput("setFunction",X.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",X.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",X.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new u(E.jsonPointer,this)}_doOperation(E){var t,z,A;const X=this.templateComponent.getAccessor(this.config.pathConverter,E),R=X.info.get(X.object),u=null===(t=(z=X.info).getTarget)||void 0===t?void 0:t.call(z,X.object),p=null===(A=X.info.getPropertyName)||void 0===A?void 0:A[0](X.object);if(!u)throw new Error("Object is undefined");return this.object.setValue(u,E),p&&this.propertyName.setValue(p,E),R}_setPropertyValue(E,t,z,A){var X,R;const u=this.templateComponent.getAccessor(this.config.pathConverter,A),p=u.info.type;p.startsWith("Color")&&(z=d(z,p)),null===(X=(R=u.info).set)||void 0===X||X.call(R,z,u.object)}_getPropertyValue(E,t,z){const A=this.templateComponent.getAccessor(this.config.pathConverter,z),X=A.info.type,R=A.info.get(A.object);return X.startsWith("Color")?function(E){if(E instanceof Z.Dt)return new C.Lt(E.r,E.g,E.b);if(E instanceof Z.Lp)return new C.Vector4(E.r,E.g,E.b,E.a);throw new Error("Invalid color type")}(R):R}_getInterpolationAnimationPropertyInfo(E,t,z){const A=this.templateComponent.getAccessor(this.config.pathConverter,z);return(E,t,z,X)=>{var R;const u=[],p=A.info.type;return p.startsWith("Color")&&(E=E.map((E=>({frame:E.frame,value:d(E.value,p)})))),null===(R=A.info.interpolation)||void 0===R||R.forEach(((t,R)=>{var p;const C=(null===(p=A.info.getPropertyName)||void 0===p?void 0:p[R](A.object))||"Animation-interpolation-"+R;let Z=E;z!==t.type&&(Z=E.map((E=>({frame:E.frame,value:t.getValue(void 0,E.value.upE?E.value.upE():[E.value],0,1)}))));const H=t.buildAnimations(A.object,C,60,Z);for(const E of H)X&&E.babylonAnimation.setEasingFunction(X),u.push(E.babylonAnimation)})),u}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function d(E,t){return E.getClassName().startsWith("Color")?E:"Dt"===t?new Z.Dt(E.x,E.y,E.z):"Lp"===t?new Z.Lp(E.x,E.y,E.z,E.w):E}(0,p.f)("FlowGraphJsonPointerParserBlock",h)},14978:(E,t,z)=>{z.d(t,{b:()=>p});var A=z(13480),X=z(13458);const R="cachedOperationValue",u="cachedExecutionId";class p extends A.c{constructor(E,t){super(t),this.value=this.registerDataOutput("value",E),this.isValid=this.registerDataOutput("isValid",X.d)}_updateOutputs(E){const t=E._getExecutionVariable(this,u,-1),z=E._getExecutionVariable(this,R,null);if(void 0!==z&&null!==z&&t===E.executionId)this.isValid.setValue(!0,E),this.value.setValue(z,E);else try{const t=this._doOperation(E);if(void 0===t||null===t)return void this.isValid.setValue(!1,E);E._setExecutionVariable(this,R,t),E._setExecutionVariable(this,u,E.executionId),this.value.setValue(t,E),this.isValid.setValue(!0,E)}catch(A){this.isValid.setValue(!1,E)}}}}}]);