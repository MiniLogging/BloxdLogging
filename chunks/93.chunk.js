"use strict";(self.v2pspxy442l=self.v2pspxy442l||[]).push([[93],{15799:(l,a,N)=>{N.r(a),N.d(a,{FlowGraphJsonPointerParserBlock:()=>n});var U=N(14138),c=N(14145);const K=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class Z{constructor(l,a){this.path=l,this.ownerBlock=a,this.templatedInputs=[];let N=K.exec(l);const Z=new Set;for(;N;){const[,w]=N;if(Z.has(w))throw new Error("Duplicate template variable detected.");Z.add(w),this.templatedInputs.push(a.registerDataInput(w,c.l,new U.d(0))),N=K.exec(l)}}getAccessor(l,a){let N=this.path;for(const U of this.templatedInputs){const l=U.getValue(a).value;if("number"!==typeof l||l<0)throw new Error("Invalid value for templated input.");N=N.replace(`{${U.name}}`,l.toString())}return l.convert(N)}}var w=N(12394),S=N(12447),T=N(12479),J=N(15648);class n extends J.e{constructor(l){super(c.d,l),this.config=l,this.object=this.registerDataOutput("object",c.d),this.propertyName=this.registerDataOutput("propertyName",c.d),this.setterFunction=this.registerDataOutput("setFunction",c.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",c.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",c.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new Z(l.jsonPointer,this)}_doOperation(l){var a,N,U;const c=this.templateComponent.getAccessor(this.config.pathConverter,l),K=c.info.get(c.object),Z=null===(a=(N=c.info).getTarget)||void 0===a?void 0:a.call(N,c.object),w=null===(U=c.info.getPropertyName)||void 0===U?void 0:U[0](c.object);if(!Z)throw new Error("Object is undefined");return this.object.setValue(Z,l),w&&this.propertyName.setValue(w,l),K}_setPropertyValue(l,a,N,U){var c,K;const Z=this.templateComponent.getAccessor(this.config.pathConverter,U),w=Z.info.type;w.startsWith("Color")&&(N=y(N,w)),null===(c=(K=Z.info).set)||void 0===c||c.call(K,N,Z.object)}_getPropertyValue(l,a,N){const U=this.templateComponent.getAccessor(this.config.pathConverter,N),c=U.info.type,K=U.info.get(U.object);return c.startsWith("Color")?function(l){if(l instanceof T.Ca)return new S.ua(l.r,l.g,l.b);if(l instanceof T.Qc)return new S.Vector4(l.r,l.g,l.b,l.a);throw new Error("Invalid color type")}(K):K}_getInterpolationAnimationPropertyInfo(l,a,N){const U=this.templateComponent.getAccessor(this.config.pathConverter,N);return(l,a,N,c)=>{var K;const Z=[],w=U.info.type;return w.startsWith("Color")&&(l=l.map((l=>({frame:l.frame,value:y(l.value,w)})))),null===(K=U.info.interpolation)||void 0===K||K.forEach(((a,K)=>{var w;const S=(null===(w=U.info.getPropertyName)||void 0===w?void 0:w[K](U.object))||"Animation-interpolation-"+K;let T=l;N!==a.type&&(T=l.map((l=>({frame:l.frame,value:a.getValue(void 0,l.value.Bc?l.value.Bc():[l.value],0,1)}))));const J=a.buildAnimations(U.object,S,60,T);for(const l of J)c&&l.babylonAnimation.setEasingFunction(c),Z.push(l.babylonAnimation)})),Z}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function y(l,a){return l.getClassName().startsWith("Color")?l:"Ca"===a?new T.Ca(l.x,l.y,l.z):"Qc"===a?new T.Qc(l.x,l.y,l.z,l.w):l}(0,w.g)("FlowGraphJsonPointerParserBlock",n)},15648:(l,a,N)=>{N.d(a,{e:()=>w});var U=N(14171),c=N(14145);const K="cachedOperationValue",Z="cachedExecutionId";class w extends U.e{constructor(l,a){super(a),this.value=this.registerDataOutput("value",l),this.isValid=this.registerDataOutput("isValid",c.h)}_updateOutputs(l){const a=l._getExecutionVariable(this,Z,-1),N=l._getExecutionVariable(this,K,null);if(void 0!==N&&null!==N&&a===l.executionId)this.isValid.setValue(!0,l),this.value.setValue(N,l);else try{const a=this._doOperation(l);if(void 0===a||null===a)return void this.isValid.setValue(!1,l);l._setExecutionVariable(this,K,a),l._setExecutionVariable(this,Z,l.executionId),this.value.setValue(a,l),this.isValid.setValue(!0,l)}catch(U){this.isValid.setValue(!1,l)}}}}}]);