"use strict";(self.uw9p3pwwsje=self.uw9p3pwwsje||[]).push([[93],{16044:(D,h,o)=>{o.r(h),o.d(h,{FlowGraphJsonPointerParserBlock:()=>K});var H=o(14360),g=o(14362);const j=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class M{constructor(D,h){this.path=D,this.ownerBlock=h,this.templatedInputs=[];let o=j.exec(D);const M=new Set;for(;o;){const[,R]=o;if(M.has(R))throw new Error("Duplicate template variable detected.");M.add(R),this.templatedInputs.push(h.registerDataInput(R,g.h,new H.b(0))),o=j.exec(D)}}getAccessor(D,h){let o=this.path;for(const H of this.templatedInputs){const D=H.getValue(h).value;if("number"!==typeof D||D<0)throw new Error("Invalid value for templated input.");o=o.replace(`{${H.name}}`,D.toString())}return D.convert(o)}}var R=o(12793),t=o(12831),S=o(12870),k=o(15909);class K extends k.b{constructor(D){super(g.c,D),this.config=D,this.object=this.registerDataOutput("object",g.c),this.propertyName=this.registerDataOutput("propertyName",g.c),this.setterFunction=this.registerDataOutput("setFunction",g.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",g.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",g.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new M(D.jsonPointer,this)}_doOperation(D){var h,o,H;const g=this.templateComponent.getAccessor(this.config.pathConverter,D),j=g.info.get(g.object),M=null===(h=(o=g.info).getTarget)||void 0===h?void 0:h.call(o,g.object),R=null===(H=g.info.getPropertyName)||void 0===H?void 0:H[0](g.object);if(!M)throw new Error("Object is undefined");return this.object.setValue(M,D),R&&this.propertyName.setValue(R,D),j}_setPropertyValue(D,h,o,H){var g,j;const M=this.templateComponent.getAccessor(this.config.pathConverter,H),R=M.info.type;R.startsWith("Color")&&(o=Q(o,R)),null===(g=(j=M.info).set)||void 0===g||g.call(j,o,M.object)}_getPropertyValue(D,h,o){const H=this.templateComponent.getAccessor(this.config.pathConverter,o),g=H.info.type,j=H.info.get(H.object);return g.startsWith("Color")?function(D){if(D instanceof S.mo)return new t.Gh(D.r,D.g,D.b);if(D instanceof S.yg)return new t.Vector4(D.r,D.g,D.b,D.a);throw new Error("Invalid color type")}(j):j}_getInterpolationAnimationPropertyInfo(D,h,o){const H=this.templateComponent.getAccessor(this.config.pathConverter,o);return(D,h,o,g)=>{var j;const M=[],R=H.info.type;return R.startsWith("Color")&&(D=D.map((D=>({frame:D.frame,value:Q(D.value,R)})))),null===(j=H.info.interpolation)||void 0===j||j.forEach(((h,j)=>{var R;const t=(null===(R=H.info.getPropertyName)||void 0===R?void 0:R[j](H.object))||"Animation-interpolation-"+j;let S=D;o!==h.type&&(S=D.map((D=>({frame:D.frame,value:h.getValue(void 0,D.value.Fh?D.value.Fh():[D.value],0,1)}))));const k=h.buildAnimations(H.object,t,60,S);for(const D of k)g&&D.babylonAnimation.setEasingFunction(g),M.push(D.babylonAnimation)})),M}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function Q(D,h){return D.getClassName().startsWith("Color")?D:"mo"===h?new S.mo(D.x,D.y,D.z):"yg"===h?new S.yg(D.x,D.y,D.z,D.w):D}(0,R.g)("FlowGraphJsonPointerParserBlock",K)},15909:(D,h,o)=>{o.d(h,{b:()=>R});var H=o(14386),g=o(14362);const j="cachedOperationValue",M="cachedExecutionId";class R extends H.e{constructor(D,h){super(h),this.value=this.registerDataOutput("value",D),this.isValid=this.registerDataOutput("isValid",g.f)}_updateOutputs(D){const h=D._getExecutionVariable(this,M,-1),o=D._getExecutionVariable(this,j,null);if(void 0!==o&&null!==o&&h===D.executionId)this.isValid.setValue(!0,D),this.value.setValue(o,D);else try{const h=this._doOperation(D);if(void 0===h||null===h)return void this.isValid.setValue(!1,D);D._setExecutionVariable(this,j,h),D._setExecutionVariable(this,M,D.executionId),this.value.setValue(h,D),this.isValid.setValue(!0,D)}catch(H){this.isValid.setValue(!1,D)}}}}}]);