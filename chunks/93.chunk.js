"use strict";(self.fkqm0epoq5=self.fkqm0epoq5||[]).push([[93],{14995:(D,l,G)=>{G.r(l),G.d(l,{FlowGraphJsonPointerParserBlock:()=>g});var V=G(13418),N=G(13423);const M=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class b{constructor(D,l){this.path=D,this.ownerBlock=l,this.templatedInputs=[];let G=M.exec(D);const b=new Set;for(;G;){const[,X]=G;if(b.has(X))throw new Error("Duplicate template variable detected.");b.add(X),this.templatedInputs.push(l.registerDataInput(X,N.i,new V.d(0))),G=M.exec(D)}}getAccessor(D,l){let G=this.path;for(const V of this.templatedInputs){const D=V.getValue(l).value;if("number"!==typeof D||D<0)throw new Error("Invalid value for templated input.");G=G.replace(`{${V.name}}`,D.toString())}return D.convert(G)}}var X=G(11667),t=G(11710),R=G(11755),n=G(14869);class g extends n.d{constructor(D){super(N.d,D),this.config=D,this.object=this.registerDataOutput("object",N.d),this.propertyName=this.registerDataOutput("propertyName",N.d),this.setterFunction=this.registerDataOutput("setFunction",N.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",N.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",N.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new b(D.jsonPointer,this)}_doOperation(D){var l,G,V;const N=this.templateComponent.getAccessor(this.config.pathConverter,D),M=N.info.get(N.object),b=null===(l=(G=N.info).getTarget)||void 0===l?void 0:l.call(G,N.object),X=null===(V=N.info.getPropertyName)||void 0===V?void 0:V[0](N.object);if(!b)throw new Error("Object is undefined");return this.object.setValue(b,D),X&&this.propertyName.setValue(X,D),M}_setPropertyValue(D,l,G,V){var N,M;const b=this.templateComponent.getAccessor(this.config.pathConverter,V),X=b.info.type;X.startsWith("Color")&&(G=j(G,X)),null===(N=(M=b.info).set)||void 0===N||N.call(M,G,b.object)}_getPropertyValue(D,l,G){const V=this.templateComponent.getAccessor(this.config.pathConverter,G),N=V.info.type,M=V.info.get(V.object);return N.startsWith("Color")?function(D){if(D instanceof R.hl)return new t.Kl(D.r,D.g,D.b);if(D instanceof R.Wb)return new t.Vector4(D.r,D.g,D.b,D.a);throw new Error("Invalid color type")}(M):M}_getInterpolationAnimationPropertyInfo(D,l,G){const V=this.templateComponent.getAccessor(this.config.pathConverter,G);return(D,l,G,N)=>{var M;const b=[],X=V.info.type;return X.startsWith("Color")&&(D=D.map((D=>({frame:D.frame,value:j(D.value,X)})))),null===(M=V.info.interpolation)||void 0===M||M.forEach(((l,M)=>{var X;const t=(null===(X=V.info.getPropertyName)||void 0===X?void 0:X[M](V.object))||"Animation-interpolation-"+M;let R=D;G!==l.type&&(R=D.map((D=>({frame:D.frame,value:l.getValue(void 0,D.value.gb?D.value.gb():[D.value],0,1)}))));const n=l.buildAnimations(V.object,t,60,R);for(const D of n)N&&D.babylonAnimation.setEasingFunction(N),b.push(D.babylonAnimation)})),b}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function j(D,l){return D.getClassName().startsWith("Color")?D:"hl"===l?new R.hl(D.x,D.y,D.z):"Wb"===l?new R.Wb(D.x,D.y,D.z,D.w):D}(0,X.c)("FlowGraphJsonPointerParserBlock",g)},14869:(D,l,G)=>{G.d(l,{d:()=>X});var V=G(13442),N=G(13423);const M="cachedOperationValue",b="cachedExecutionId";class X extends V.c{constructor(D,l){super(l),this.value=this.registerDataOutput("value",D),this.isValid=this.registerDataOutput("isValid",N.g)}_updateOutputs(D){const l=D._getExecutionVariable(this,b,-1),G=D._getExecutionVariable(this,M,null);if(void 0!==G&&null!==G&&l===D.executionId)this.isValid.setValue(!0,D),this.value.setValue(G,D);else try{const l=this._doOperation(D);if(void 0===l||null===l)return void this.isValid.setValue(!1,D);D._setExecutionVariable(this,M,l),D._setExecutionVariable(this,b,D.executionId),this.value.setValue(l,D),this.isValid.setValue(!0,D)}catch(V){this.isValid.setValue(!1,D)}}}}}]);