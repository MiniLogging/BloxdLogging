"use strict";(self.qbp2s7qydk=self.qbp2s7qydk||[]).push([[93],{15991:(M,A,O)=>{O.r(A),O.d(A,{FlowGraphJsonPointerParserBlock:()=>e});var S=O(14236),z=O(14238);const Q=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class X{constructor(M,A){this.path=M,this.ownerBlock=A,this.templatedInputs=[];let O=Q.exec(M);const X=new Set;for(;O;){const[,c]=O;if(X.has(c))throw new Error("Duplicate template variable detected.");X.add(c),this.templatedInputs.push(A.registerDataInput(c,z.h,new S.b(0))),O=Q.exec(M)}}getAccessor(M,A){let O=this.path;for(const S of this.templatedInputs){const M=S.getValue(A).value;if("number"!==typeof M||M<0)throw new Error("Invalid value for templated input.");O=O.replace("{".concat(S.name,"}"),M.toString())}return M.convert(O)}}var c=O(12919),j=O(12970),B=O(13010),g=O(15851);class e extends g.c{constructor(M){super(z.b,M),this.config=M,this.object=this.registerDataOutput("object",z.b),this.propertyName=this.registerDataOutput("propertyName",z.b),this.setterFunction=this.registerDataOutput("setFunction",z.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",z.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",z.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new X(M.jsonPointer,this)}_doOperation(M){var A,O,S;const z=this.templateComponent.getAccessor(this.config.pathConverter,M),Q=z.info.get(z.object),X=null===(A=(O=z.info).getTarget)||void 0===A?void 0:A.call(O,z.object),c=null===(S=z.info.getPropertyName)||void 0===S?void 0:S[0](z.object);if(!X)throw new Error("Object is undefined");return this.object.setValue(X,M),c&&this.propertyName.setValue(c,M),Q}_setPropertyValue(M,A,O,S){var z,Q;const X=this.templateComponent.getAccessor(this.config.pathConverter,S),c=X.info.type;c.startsWith("Color")&&(O=T(O,c)),null===(z=(Q=X.info).set)||void 0===z||z.call(Q,O,X.object)}_getPropertyValue(M,A,O){const S=this.templateComponent.getAccessor(this.config.pathConverter,O),z=S.info.type,Q=S.info.get(S.object);return z.startsWith("Color")?function(M){if(M instanceof B.bA)return new j.GA(M.r,M.g,M.b);if(M instanceof B.Cc)return new j.Vector4(M.r,M.g,M.b,M.a);throw new Error("Invalid color type")}(Q):Q}_getInterpolationAnimationPropertyInfo(M,A,O){const S=this.templateComponent.getAccessor(this.config.pathConverter,O);return(M,A,O,z)=>{var Q;const X=[],c=S.info.type;return c.startsWith("Color")&&(M=M.map((M=>({frame:M.frame,value:T(M.value,c)})))),null===(Q=S.info.interpolation)||void 0===Q||Q.forEach(((A,Q)=>{var c;const j=(null===(c=S.info.getPropertyName)||void 0===c?void 0:c[Q](S.object))||"Animation-interpolation-"+Q;let B=M;O!==A.type&&(B=M.map((M=>({frame:M.frame,value:A.getValue(void 0,M.value.gc?M.value.gc():[M.value],0,1)}))));const g=A.buildAnimations(S.object,j,60,B);for(const M of g)z&&M.babylonAnimation.setEasingFunction(z),X.push(M.babylonAnimation)})),X}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function T(M,A){return M.getClassName().startsWith("Color")?M:"bA"===A?new B.bA(M.x,M.y,M.z):"Cc"===A?new B.Cc(M.x,M.y,M.z,M.w):M}(0,c.g)("FlowGraphJsonPointerParserBlock",e)},15851:(M,A,O)=>{O.d(A,{c:()=>c});var S=O(14255),z=O(14238);const Q="cachedOperationValue",X="cachedExecutionId";class c extends S.c{constructor(M,A){super(A),this.value=this.registerDataOutput("value",M),this.isValid=this.registerDataOutput("isValid",z.f)}_updateOutputs(M){const A=M._getExecutionVariable(this,X,-1),O=M._getExecutionVariable(this,Q,null);if(void 0!==O&&null!==O&&A===M.executionId)this.isValid.setValue(!0,M),this.value.setValue(O,M);else try{const A=this._doOperation(M);if(void 0===A||null===A)return void this.isValid.setValue(!1,M);M._setExecutionVariable(this,Q,A),M._setExecutionVariable(this,X,M.executionId),this.value.setValue(A,M),this.isValid.setValue(!0,M)}catch(S){this.isValid.setValue(!1,M)}}}}}]);