"use strict";(self.vb3rpbgyozo=self.vb3rpbgyozo||[]).push([[93],{16150:(q,I,l)=>{l.r(I),l.d(I,{FlowGraphJsonPointerParserBlock:()=>r});var w=l(14437),t=l(14441);const O=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class c{constructor(q,I){this.path=q,this.ownerBlock=I,this.templatedInputs=[];let l=O.exec(q);const c=new Set;for(;l;){const[,a]=l;if(c.has(a))throw new Error("Duplicate template variable detected.");c.add(a),this.templatedInputs.push(I.registerDataInput(a,t.k,new w.d(0))),l=O.exec(q)}}getAccessor(q,I){let l=this.path;for(const w of this.templatedInputs){const q=w.getValue(I).value;if("number"!==typeof q||q<0)throw new Error("Invalid value for templated input.");l=l.replace(`{${w.name}}`,q.toString())}return q.convert(l)}}var a=l(12711),F=l(12747),s=l(12789),Z=l(16008);class r extends Z.d{constructor(q){super(t.e,q),this.config=q,this.object=this.registerDataOutput("object",t.e),this.propertyName=this.registerDataOutput("propertyName",t.e),this.setterFunction=this.registerDataOutput("setFunction",t.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",t.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",t.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new c(q.jsonPointer,this)}_doOperation(q){var I,l,w;const t=this.templateComponent.getAccessor(this.config.pathConverter,q),O=t.info.get(t.object),c=null===(I=(l=t.info).getTarget)||void 0===I?void 0:I.call(l,t.object),a=null===(w=t.info.getPropertyName)||void 0===w?void 0:w[0](t.object);if(!c)throw new Error("Object is undefined");return this.object.setValue(c,q),a&&this.propertyName.setValue(a,q),O}_setPropertyValue(q,I,l,w){var t,O;const c=this.templateComponent.getAccessor(this.config.pathConverter,w),a=c.info.type;a.startsWith("Color")&&(l=x(l,a)),null===(t=(O=c.info).set)||void 0===t||t.call(O,l,c.object)}_getPropertyValue(q,I,l){const w=this.templateComponent.getAccessor(this.config.pathConverter,l),t=w.info.type,O=w.info.get(w.object);return t.startsWith("Color")?function(q){if(q instanceof s.BI)return new F.dI(q.r,q.g,q.b);if(q instanceof s.Dc)return new F.Vector4(q.r,q.g,q.b,q.a);throw new Error("Invalid color type")}(O):O}_getInterpolationAnimationPropertyInfo(q,I,l){const w=this.templateComponent.getAccessor(this.config.pathConverter,l);return(q,I,l,t)=>{var O;const c=[],a=w.info.type;return a.startsWith("Color")&&(q=q.map((q=>({frame:q.frame,value:x(q.value,a)})))),null===(O=w.info.interpolation)||void 0===O||O.forEach(((I,O)=>{var a;const F=(null===(a=w.info.getPropertyName)||void 0===a?void 0:a[O](w.object))||"Animation-interpolation-"+O;let s=q;l!==I.type&&(s=q.map((q=>({frame:q.frame,value:I.getValue(void 0,q.value.Uc?q.value.Uc():[q.value],0,1)}))));const Z=I.buildAnimations(w.object,F,60,s);for(const q of Z)t&&q.babylonAnimation.setEasingFunction(t),c.push(q.babylonAnimation)})),c}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function x(q,I){return q.getClassName().startsWith("Color")?q:"BI"===I?new s.BI(q.x,q.y,q.z):"Dc"===I?new s.Dc(q.x,q.y,q.z,q.w):q}(0,a.e)("FlowGraphJsonPointerParserBlock",r)},16008:(q,I,l)=>{l.d(I,{d:()=>a});var w=l(14457),t=l(14441);const O="cachedOperationValue",c="cachedExecutionId";class a extends w.c{constructor(q,I){super(I),this.value=this.registerDataOutput("value",q),this.isValid=this.registerDataOutput("isValid",t.g)}_updateOutputs(q){const I=q._getExecutionVariable(this,c,-1),l=q._getExecutionVariable(this,O,null);if(void 0!==l&&null!==l&&I===q.executionId)this.isValid.setValue(!0,q),this.value.setValue(l,q);else try{const I=this._doOperation(q);if(void 0===I||null===I)return void this.isValid.setValue(!1,q);q._setExecutionVariable(this,O,I),q._setExecutionVariable(this,c,q.executionId),this.value.setValue(I,q),this.isValid.setValue(!0,q)}catch(w){this.isValid.setValue(!1,q)}}}}}]);