"use strict";(self.fjf2z1c8il8=self.fjf2z1c8il8||[]).push([[93],{15930:(g,i,a)=>{a.r(i),a.d(i,{FlowGraphJsonPointerParserBlock:()=>I});var n=a(14209),L=a(14214);const d=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class b{constructor(g,i){this.path=g,this.ownerBlock=i,this.templatedInputs=[];let a=d.exec(g);const b=new Set;for(;a;){const[,k]=a;if(b.has(k))throw new Error("Duplicate template variable detected.");b.add(k),this.templatedInputs.push(i.registerDataInput(k,L.f,new n.e(0))),a=d.exec(g)}}getAccessor(g,i){let a=this.path;for(const n of this.templatedInputs){const g=n.getValue(i).value;if("number"!==typeof g||g<0)throw new Error("Invalid value for templated input.");a=a.replace(`{${n.name}}`,g.toString())}return g.convert(a)}}var k=a(12415),e=a(12452),N=a(12496),F=a(15780);class I extends F.d{constructor(g){super(L.d,g),this.config=g,this.object=this.registerDataOutput("object",L.d),this.propertyName=this.registerDataOutput("propertyName",L.d),this.setterFunction=this.registerDataOutput("setFunction",L.d,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",L.d,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",L.d,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new b(g.jsonPointer,this)}_doOperation(g){var i,a,n;const L=this.templateComponent.getAccessor(this.config.pathConverter,g),d=L.info.get(L.object),b=null===(i=(a=L.info).getTarget)||void 0===i?void 0:i.call(a,L.object),k=null===(n=L.info.getPropertyName)||void 0===n?void 0:n[0](L.object);if(!b)throw new Error("Object is undefined");return this.object.setValue(b,g),k&&this.propertyName.setValue(k,g),d}_setPropertyValue(g,i,a,n){var L,d;const b=this.templateComponent.getAccessor(this.config.pathConverter,n),k=b.info.type;k.startsWith("Color")&&(a=j(a,k)),null===(L=(d=b.info).set)||void 0===L||L.call(d,a,b.object)}_getPropertyValue(g,i,a){const n=this.templateComponent.getAccessor(this.config.pathConverter,a),L=n.info.type,d=n.info.get(n.object);return L.startsWith("Color")?function(g){if(g instanceof N.Ri)return new e.Bi(g.r,g.g,g.b);if(g instanceof N.Hd)return new e.Vector4(g.r,g.g,g.b,g.a);throw new Error("Invalid color type")}(d):d}_getInterpolationAnimationPropertyInfo(g,i,a){const n=this.templateComponent.getAccessor(this.config.pathConverter,a);return(g,i,a,L)=>{var d;const b=[],k=n.info.type;return k.startsWith("Color")&&(g=g.map((g=>({frame:g.frame,value:j(g.value,k)})))),null===(d=n.info.interpolation)||void 0===d||d.forEach(((i,d)=>{var k;const e=(null===(k=n.info.getPropertyName)||void 0===k?void 0:k[d](n.object))||"Animation-interpolation-"+d;let N=g;a!==i.type&&(N=g.map((g=>({frame:g.frame,value:i.getValue(void 0,g.value.fd?g.value.fd():[g.value],0,1)}))));const F=i.buildAnimations(n.object,e,60,N);for(const g of F)L&&g.babylonAnimation.setEasingFunction(L),b.push(g.babylonAnimation)})),b}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function j(g,i){return g.getClassName().startsWith("Color")?g:"Ri"===i?new N.Ri(g.x,g.y,g.z):"Hd"===i?new N.Hd(g.x,g.y,g.z,g.w):g}(0,k.e)("FlowGraphJsonPointerParserBlock",I)},15780:(g,i,a)=>{a.d(i,{d:()=>k});var n=a(14234),L=a(14214);const d="cachedOperationValue",b="cachedExecutionId";class k extends n.c{constructor(g,i){super(i),this.value=this.registerDataOutput("value",g),this.isValid=this.registerDataOutput("isValid",L.e)}_updateOutputs(g){const i=g._getExecutionVariable(this,b,-1),a=g._getExecutionVariable(this,d,null);if(void 0!==a&&null!==a&&i===g.executionId)this.isValid.setValue(!0,g),this.value.setValue(a,g);else try{const i=this._doOperation(g);if(void 0===i||null===i)return void this.isValid.setValue(!1,g);g._setExecutionVariable(this,d,i),g._setExecutionVariable(this,b,g.executionId),this.value.setValue(i,g),this.isValid.setValue(!0,g)}catch(n){this.isValid.setValue(!1,g)}}}}}]);