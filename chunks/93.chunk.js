"use strict";(self.vfdo5lmva5i=self.vfdo5lmva5i||[]).push([[93],{15219:(w,o,H)=>{H.r(o),H.d(o,{FlowGraphJsonPointerParserBlock:()=>y});var h=H(13446),E=H(13455);const e=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class D{constructor(w,o){this.path=w,this.ownerBlock=o,this.templatedInputs=[];let H=e.exec(w);const D=new Set;for(;H;){const[,t]=H;if(D.has(t))throw new Error("Duplicate template variable detected.");D.add(t),this.templatedInputs.push(o.registerDataInput(t,E.g,new h.d(0))),H=e.exec(w)}}getAccessor(w,o){let H=this.path;for(const h of this.templatedInputs){const w=h.getValue(o).value;if("number"!==typeof w||w<0)throw new Error("Invalid value for templated input.");H=H.replace(`{${h.name}}`,w.toString())}return w.convert(H)}}var t=H(11666),X=H(11720),L=H(11757),A=H(15051);class y extends A.c{constructor(w){super(E.e,w),this.config=w,this.object=this.registerDataOutput("object",E.e),this.propertyName=this.registerDataOutput("propertyName",E.e),this.setterFunction=this.registerDataOutput("setFunction",E.e,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",E.e,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",E.e,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new D(w.jsonPointer,this)}_doOperation(w){var o,H,h;const E=this.templateComponent.getAccessor(this.config.pathConverter,w),e=E.info.get(E.object),D=null===(o=(H=E.info).getTarget)||void 0===o?void 0:o.call(H,E.object),t=null===(h=E.info.getPropertyName)||void 0===h?void 0:h[0](E.object);if(!D)throw new Error("Object is undefined");return this.object.setValue(D,w),t&&this.propertyName.setValue(t,w),e}_setPropertyValue(w,o,H,h){var E,e;const D=this.templateComponent.getAccessor(this.config.pathConverter,h),t=D.info.type;t.startsWith("Color")&&(H=z(H,t)),null===(E=(e=D.info).set)||void 0===E||E.call(e,H,D.object)}_getPropertyValue(w,o,H){const h=this.templateComponent.getAccessor(this.config.pathConverter,H),E=h.info.type,e=h.info.get(h.object);return E.startsWith("Color")?function(w){if(w instanceof L.ko)return new X.io(w.r,w.g,w.b);if(w instanceof L.ae)return new X.Vector4(w.r,w.g,w.b,w.a);throw new Error("Invalid color type")}(e):e}_getInterpolationAnimationPropertyInfo(w,o,H){const h=this.templateComponent.getAccessor(this.config.pathConverter,H);return(w,o,H,E)=>{var e;const D=[],t=h.info.type;return t.startsWith("Color")&&(w=w.map((w=>({frame:w.frame,value:z(w.value,t)})))),null===(e=h.info.interpolation)||void 0===e||e.forEach(((o,e)=>{var t;const X=(null===(t=h.info.getPropertyName)||void 0===t?void 0:t[e](h.object))||"Animation-interpolation-"+e;let L=w;H!==o.type&&(L=w.map((w=>({frame:w.frame,value:o.getValue(void 0,w.value.Ae?w.value.Ae():[w.value],0,1)}))));const A=o.buildAnimations(h.object,X,60,L);for(const w of A)E&&w.babylonAnimation.setEasingFunction(E),D.push(w.babylonAnimation)})),D}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function z(w,o){return w.getClassName().startsWith("Color")?w:"ko"===o?new L.ko(w.x,w.y,w.z):"ae"===o?new L.ae(w.x,w.y,w.z,w.w):w}(0,t.g)("FlowGraphJsonPointerParserBlock",y)},15051:(w,o,H)=>{H.d(o,{c:()=>t});var h=H(13475),E=H(13455);const e="cachedOperationValue",D="cachedExecutionId";class t extends h.c{constructor(w,o){super(o),this.value=this.registerDataOutput("value",w),this.isValid=this.registerDataOutput("isValid",E.f)}_updateOutputs(w){const o=w._getExecutionVariable(this,D,-1),H=w._getExecutionVariable(this,e,null);if(void 0!==H&&null!==H&&o===w.executionId)this.isValid.setValue(!0,w),this.value.setValue(H,w);else try{const o=this._doOperation(w);if(void 0===o||null===o)return void this.isValid.setValue(!1,w);w._setExecutionVariable(this,e,o),w._setExecutionVariable(this,D,w.executionId),this.value.setValue(o,w),this.isValid.setValue(!0,w)}catch(h){this.isValid.setValue(!1,w)}}}}}]);