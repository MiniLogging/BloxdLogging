"use strict";(self.ipz2em9uj1g=self.ipz2em9uj1g||[]).push([[93],{16006:(r,O,W)=>{W.r(O),W.d(O,{FlowGraphJsonPointerParserBlock:()=>v});var q=W(14266),Q=W(14274);const C=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class T{constructor(r,O){this.path=r,this.ownerBlock=O,this.templatedInputs=[];let W=C.exec(r);const T=new Set;for(;W;){const[,h]=W;if(T.has(h))throw new Error("Duplicate template variable detected.");T.add(h),this.templatedInputs.push(O.registerDataInput(h,Q.e,new q.d(0))),W=C.exec(r)}}getAccessor(r,O){let W=this.path;for(const q of this.templatedInputs){const r=q.getValue(O).value;if("number"!==typeof r||r<0)throw new Error("Invalid value for templated input.");W=W.replace(`{${q.name}}`,r.toString())}return r.convert(W)}}var h=W(12560),J=W(12591),mr=W(12631),d=W(15876);class v extends d.c{constructor(r){super(Q.c,r),this.config=r,this.object=this.registerDataOutput("object",Q.c),this.propertyName=this.registerDataOutput("propertyName",Q.c),this.setterFunction=this.registerDataOutput("setFunction",Q.c,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",Q.c,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",Q.c,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new T(r.jsonPointer,this)}_doOperation(r){var O,W,q;const Q=this.templateComponent.getAccessor(this.config.pathConverter,r),C=Q.info.get(Q.object),T=null===(O=(W=Q.info).getTarget)||void 0===O?void 0:O.call(W,Q.object),h=null===(q=Q.info.getPropertyName)||void 0===q?void 0:q[0](Q.object);if(!T)throw new Error("Object is undefined");return this.object.setValue(T,r),h&&this.propertyName.setValue(h,r),C}_setPropertyValue(r,O,W,q){var Q,C;const T=this.templateComponent.getAccessor(this.config.pathConverter,q),h=T.info.type;h.startsWith("Color")&&(W=g(W,h)),null===(Q=(C=T.info).set)||void 0===Q||Q.call(C,W,T.object)}_getPropertyValue(r,O,W){const q=this.templateComponent.getAccessor(this.config.pathConverter,W),Q=q.info.type,C=q.info.get(q.object);return Q.startsWith("Color")?function(r){if(r instanceof mr.SO)return new J.eO(r.r,r.g,r.b);if(r instanceof mr.kh)return new J.Vector4(r.r,r.g,r.b,r.a);throw new Error("Invalid color type")}(C):C}_getInterpolationAnimationPropertyInfo(r,O,W){const q=this.templateComponent.getAccessor(this.config.pathConverter,W);return(r,O,W,Q)=>{var C;const T=[],h=q.info.type;return h.startsWith("Color")&&(r=r.map((r=>({frame:r.frame,value:g(r.value,h)})))),null===(C=q.info.interpolation)||void 0===C||C.forEach(((O,C)=>{var h;const J=(null===(h=q.info.getPropertyName)||void 0===h?void 0:h[C](q.object))||"Animation-interpolation-"+C;let mr=r;W!==O.type&&(mr=r.map((r=>({frame:r.frame,value:O.getValue(void 0,r.value.Yh?r.value.Yh():[r.value],0,1)}))));const d=O.buildAnimations(q.object,J,60,mr);for(const r of d)Q&&r.babylonAnimation.setEasingFunction(Q),T.push(r.babylonAnimation)})),T}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function g(r,O){return r.getClassName().startsWith("Color")?r:"SO"===O?new mr.SO(r.x,r.y,r.z):"kh"===O?new mr.kh(r.x,r.y,r.z,r.w):r}(0,h.e)("FlowGraphJsonPointerParserBlock",v)},15876:(r,O,W)=>{W.d(O,{c:()=>h});var q=W(14297),Q=W(14274);const C="cachedOperationValue",T="cachedExecutionId";class h extends q.d{constructor(r,O){super(O),this.value=this.registerDataOutput("value",r),this.isValid=this.registerDataOutput("isValid",Q.d)}_updateOutputs(r){const O=r._getExecutionVariable(this,T,-1),W=r._getExecutionVariable(this,C,null);if(void 0!==W&&null!==W&&O===r.executionId)this.isValid.setValue(!0,r),this.value.setValue(W,r);else try{const O=this._doOperation(r);if(void 0===O||null===O)return void this.isValid.setValue(!1,r);r._setExecutionVariable(this,C,O),r._setExecutionVariable(this,T,r.executionId),this.value.setValue(O,r),this.isValid.setValue(!0,r)}catch(q){this.isValid.setValue(!1,r)}}}}}]);