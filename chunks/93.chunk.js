"use strict";(self["686i8587bmi"]=self["686i8587bmi"]||[]).push([[93],{16215:(h,d,T)=>{T.r(d),T.d(d,{FlowGraphJsonPointerParserBlock:()=>S});var Y=T(14519),y=T(14528);const C=new RegExp(/\/\{(\w+)\}(?=\/|$)/g);class n{constructor(h,d){this.path=h,this.ownerBlock=d,this.templatedInputs=[];let T=C.exec(h);const n=new Set;for(;T;){const[,X]=T;if(n.has(X))throw new Error("Duplicate template variable detected.");n.add(X),this.templatedInputs.push(d.registerDataInput(X,y.h,new Y.e(0))),T=C.exec(h)}}getAccessor(h,d){let T=this.path;for(const Y of this.templatedInputs){const h=Y.getValue(d).value;if("number"!==typeof h||h<0)throw new Error("Invalid value for templated input.");T=T.replace(`{${Y.name}}`,h.toString())}return h.convert(T)}}var X=T(12714),F=T(12765),U=T(12812),Z=T(16064);class S extends Z.c{constructor(h){super(y.b,h),this.config=h,this.object=this.registerDataOutput("object",y.b),this.propertyName=this.registerDataOutput("propertyName",y.b),this.setterFunction=this.registerDataOutput("setFunction",y.b,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",y.b,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",y.b,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new n(h.jsonPointer,this)}_doOperation(h){var d,T,Y;const y=this.templateComponent.getAccessor(this.config.pathConverter,h),C=y.info.get(y.object),n=null===(d=(T=y.info).getTarget)||void 0===d?void 0:d.call(T,y.object),X=null===(Y=y.info.getPropertyName)||void 0===Y?void 0:Y[0](y.object);if(!n)throw new Error("Object is undefined");return this.object.setValue(n,h),X&&this.propertyName.setValue(X,h),C}_setPropertyValue(h,d,T,Y){var y,C;const n=this.templateComponent.getAccessor(this.config.pathConverter,Y),X=n.info.type;X.startsWith("Color")&&(T=r(T,X)),null===(y=(C=n.info).set)||void 0===y||y.call(C,T,n.object)}_getPropertyValue(h,d,T){const Y=this.templateComponent.getAccessor(this.config.pathConverter,T),y=Y.info.type,C=Y.info.get(Y.object);return y.startsWith("Color")?function(h){if(h instanceof U.ed)return new F.pd(h.r,h.g,h.b);if(h instanceof U.ln)return new F.Vector4(h.r,h.g,h.b,h.a);throw new Error("Invalid color type")}(C):C}_getInterpolationAnimationPropertyInfo(h,d,T){const Y=this.templateComponent.getAccessor(this.config.pathConverter,T);return(h,d,T,y)=>{var C;const n=[],X=Y.info.type;return X.startsWith("Color")&&(h=h.map((h=>({frame:h.frame,value:r(h.value,X)})))),null===(C=Y.info.interpolation)||void 0===C||C.forEach(((d,C)=>{var X;const F=(null===(X=Y.info.getPropertyName)||void 0===X?void 0:X[C](Y.object))||"Animation-interpolation-"+C;let U=h;T!==d.type&&(U=h.map((h=>({frame:h.frame,value:d.getValue(void 0,h.value.ad?h.value.ad():[h.value],0,1)}))));const Z=d.buildAnimations(Y.object,F,60,U);for(const h of Z)y&&h.babylonAnimation.setEasingFunction(y),n.push(h.babylonAnimation)})),n}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function r(h,d){return h.getClassName().startsWith("Color")?h:"ed"===d?new U.ed(h.x,h.y,h.z):"ln"===d?new U.ln(h.x,h.y,h.z,h.w):h}(0,X.e)("FlowGraphJsonPointerParserBlock",S)},16064:(h,d,T)=>{T.d(d,{c:()=>X});var Y=T(14548),y=T(14528);const C="cachedOperationValue",n="cachedExecutionId";class X extends Y.e{constructor(h,d){super(d),this.value=this.registerDataOutput("value",h),this.isValid=this.registerDataOutput("isValid",y.e)}_updateOutputs(h){const d=h._getExecutionVariable(this,n,-1),T=h._getExecutionVariable(this,C,null);if(void 0!==T&&null!==T&&d===h.executionId)this.isValid.setValue(!0,h),this.value.setValue(T,h);else try{const d=this._doOperation(h);if(void 0===d||null===d)return void this.isValid.setValue(!1,h);h._setExecutionVariable(this,C,d),h._setExecutionVariable(this,n,h.executionId),this.value.setValue(d,h),this.isValid.setValue(!0,h)}catch(Y){this.isValid.setValue(!1,h)}}}}}]);