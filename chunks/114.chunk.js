"use strict";(self["6xhfpmwgjr5"]=self["6xhfpmwgjr5"]||[]).push([[114],{16589:(P,a,R)=>{R.r(a),R.d(a,{FlowGraphMultiGateBlock:()=>j});var S=R(12376),A=R(14541),Z=R(14524),p=R(14516);class j extends A.b{constructor(P){super(P),this.config=P,this.outputSignals=[],this.reset=this._registerSignalInput("reset"),this.lastIndex=this.registerDataOutput("lastIndex",Z.e,new p.c(-1)),this.setNumberOfOutputSignals(null===P||void 0===P?void 0:P.outputSignalCount)}_getNextIndex(P){if(P.includes(!1)||this.config.isLoop&&P.fill(!1),this.config.isRandom){const a=P.map(((P,a)=>P?-1:a)).filter((P=>-1!==P));return a.length?a[Math.floor(Math.random()*a.length)]:-1}return P.indexOf(!1)}setNumberOfOutputSignals(){let P=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(;this.outputSignals.length>P;){const P=this.outputSignals.pop();P&&(P.disconnectFromAll(),this._unregisterSignalOutput(P.name))}for(;this.outputSignals.length<P;)this.outputSignals.push(this._registerSignalOutput(`out_${this.outputSignals.length}`))}_execute(P,a){if(P._hasExecutionVariable(this,"indexesUsed")||P._setExecutionVariable(this,"indexesUsed",this.outputSignals.map((()=>!1))),a===this.reset)return P._deleteExecutionVariable(this,"indexesUsed"),void this.lastIndex.setValue(new p.c(-1),P);const R=P._getExecutionVariable(this,"indexesUsed",[]),S=this._getNextIndex(R);S>-1&&(this.lastIndex.setValue(new p.c(S),P),R[S]=!0,P._setExecutionVariable(this,"indexesUsed",R),this.outputSignals[S]._activateSignal(P))}getClassName(){return"FlowGraphMultiGateBlock"}serialize(P){super.serialize(P),P.config.outputSignalCount=this.config.outputSignalCount,P.config.isRandom=this.config.isRandom,P.config.loop=this.config.isLoop,P.config.startIndex=this.config.startIndex}}(0,S.d)("FlowGraphMultiGateBlock",j)}}]);