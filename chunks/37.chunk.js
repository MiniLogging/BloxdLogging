/*! For license information please see rbuop8.37.be40e6cc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{10856:(V,H,t)=>{t.d(H,{$:()=>s,C:()=>d,F:()=>J,I:()=>b,J:()=>C,N:()=>v,Q:()=>L,R:()=>e,U:()=>W,V:()=>S,X:()=>Q,Y:()=>A,ab:()=>c,b:()=>O,e:()=>U,f:()=>i,j:()=>o,l:()=>m,o:()=>f,s:()=>F,v:()=>M,w:()=>N,x:()=>q,z:()=>a});const I=function(V){const H=[];let t=0;for(let I=0;I<V.length;I++){let Z=V.charCodeAt(I);Z<128?H[t++]=Z:Z<2048?(H[t++]=Z>>6|192,H[t++]=63&Z|128):55296===(64512&Z)&&I+1<V.length&&56320===(64512&V.charCodeAt(I+1))?(Z=65536+((1023&Z)<<10)+(1023&V.charCodeAt(++I)),H[t++]=Z>>18|240,H[t++]=Z>>12&63|128,H[t++]=Z>>6&63|128,H[t++]=63&Z|128):(H[t++]=Z>>12|224,H[t++]=Z>>6&63|128,H[t++]=63&Z|128)}return H},Z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(V,H){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,I=[];for(let Z=0;Z<V.length;Z+=3){const H=V[Z],h=Z+1<V.length,f=h?V[Z+1]:0,m=Z+2<V.length,K=m?V[Z+2]:0,E=H>>2,d=(3&H)<<4|f>>4;let a=(15&f)<<2|K>>6,J=63&K;m||(J=64,h||(a=64)),I.push(t[E],t[d],t[a],t[J])}return I.join("")},encodeString(V,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(V):this.encodeByteArray(I(V),H)},decodeString(V,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(V):function(V){const H=[];let t=0,I=0;for(;t<V.length;){const Z=V[t++];if(Z<128)H[I++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const h=V[t++];H[I++]=String.fromCharCode((31&Z)<<6|63&h)}else if(Z>239&&Z<365){const h=((7&Z)<<18|(63&V[t++])<<12|(63&V[t++])<<6|63&V[t++])-65536;H[I++]=String.fromCharCode(55296+(h>>10)),H[I++]=String.fromCharCode(56320+(1023&h))}else{const h=V[t++],f=V[t++];H[I++]=String.fromCharCode((15&Z)<<12|(63&h)<<6|63&f)}}return H.join("")}(this.decodeStringToByteArray(V,H))},decodeStringToByteArray(V,H){this.init_();const t=H?this.charToByteMapWebSafe_:this.charToByteMap_,I=[];for(let Z=0;Z<V.length;){const H=t[V.charAt(Z++)],f=Z<V.length?t[V.charAt(Z)]:0;++Z;const m=Z<V.length?t[V.charAt(Z)]:64;++Z;const K=Z<V.length?t[V.charAt(Z)]:64;if(++Z,null==H||null==f||null==m||null==K)throw new h;const E=H<<2|f>>4;if(I.push(E),64!==m){const V=f<<4&240|m>>2;if(I.push(V),64!==K){const V=m<<6&192|K;I.push(V)}}}return I},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class h extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f=function(V){return function(V){const H=I(V);return Z.encodeByteArray(H,!0)}(V).replace(/\./g,"")},m=function(V){try{return Z.decodeString(V,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};const K=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t.g)return t.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,E=()=>{try{return K()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const H=V&&m(V[1]);return H&&JSON.parse(H)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},d=V=>{var H,t;return null===(t=null===(H=E())||void 0===H?void 0:H.emulatorHosts)||void 0===t?void 0:t[V]},a=()=>{var V;return null===(V=E())||void 0===V?void 0:V.config},J=V=>{var H;return null===(H=E())||void 0===H?void 0:H[`_${V}`]};class O{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((V,H)=>{this.resolve=V,this.reject=H}))}wrapCallback(V){return(H,t)=>{H?this.reject(H):this.resolve(t),"function"===typeof V&&(this.promise.catch((()=>{})),1===V.length?V(H):V(H,t))}}}function C(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(C())}function v(){const V="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof V&&void 0!==V.id}function Q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function e(){const V=C();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function W(){try{return"object"===typeof indexedDB}catch(V){return!1}}function c(){return new Promise(((V,H)=>{try{let t=!0;const I="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(I);Z.onsuccess=()=>{Z.result.close(),t||self.indexedDB.deleteDatabase(I),V(!0)},Z.onupgradeneeded=()=>{t=!1},Z.onerror=()=>{var V;H((null===(V=Z.error)||void 0===V?void 0:V.message)||"")}}catch(t){H(t)}}))}function o(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class i extends Error{constructor(V,H,t){super(H),this.code=V,this.customData=t,this.name="FirebaseError",Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(V,H,t){this.service=V,this.serviceName=H,this.errors=t}create(V){const H=(arguments.length<=1?void 0:arguments[1])||{},t=`${this.service}/${V}`,I=this.errors[V],Z=I?function(V,H){return V.replace(D,((V,t)=>{const I=H[t];return null!=I?String(I):`<${t}?>`}))}(I,H):"Error",h=`${this.serviceName}: ${Z} (${t}).`;return new i(t,h,H)}}const D=/\{\$([^}]+)}/g;function L(V){for(const H in V)if(Object.prototype.hasOwnProperty.call(V,H))return!1;return!0}function N(V,H){if(V===H)return!0;const t=Object.keys(V),I=Object.keys(H);for(const Z of t){if(!I.includes(Z))return!1;const t=V[Z],h=H[Z];if(j(t)&&j(h)){if(!N(t,h))return!1}else if(t!==h)return!1}for(const Z of I)if(!t.includes(Z))return!1;return!0}function j(V){return null!==V&&"object"===typeof V}function s(V){const H=[];for(const[t,I]of Object.entries(V))Array.isArray(I)?I.forEach((V=>{H.push(encodeURIComponent(t)+"="+encodeURIComponent(V))})):H.push(encodeURIComponent(t)+"="+encodeURIComponent(I));return H.length?"&"+H.join("&"):""}function A(V){const H={};return V.replace(/^\?/,"").split("&").forEach((V=>{if(V){const[t,I]=V.split("=");H[decodeURIComponent(t)]=decodeURIComponent(I)}})),H}function q(V){const H=V.indexOf("?");if(!H)return"";const t=V.indexOf("#",H);return V.substring(H,t>0?t:void 0)}function M(V,H){const t=new g(V,H);return t.subscribe.bind(t)}class g{constructor(V,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then((()=>{V(this)})).catch((V=>{this.error(V)}))}next(V){this.forEachObserver((H=>{H.next(V)}))}error(V){this.forEachObserver((H=>{H.error(V)})),this.close(V)}complete(){this.forEachObserver((V=>{V.complete()})),this.close()}subscribe(V,H,t){let I;if(void 0===V&&void 0===H&&void 0===t)throw new Error("Missing Observer.");I=function(V,H){if("object"!==typeof V||null===V)return!1;for(const t of H)if(t in V&&"function"===typeof V[t])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:H,complete:t},void 0===I.next&&(I.next=z),void 0===I.error&&(I.error=z),void 0===I.complete&&(I.complete=z);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?I.error(this.finalError):I.complete()}catch(V){}})),this.observers.push(I),Z}unsubscribeOne(V){void 0!==this.observers&&void 0!==this.observers[V]&&(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,V)}sendOne(V,H){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{H(this.observers[V])}catch(t){"undefined"!==typeof console&&console.error&&console.error(t)}}))}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function z(){}const G=1e3,r=2,p=144e5,B=.5;function F(V){let H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:G)*Math.pow(H,V),I=Math.round(B*t*(Math.random()-.5)*2);return Math.min(p,t+I)}function b(V){return V&&V._delegate?V._delegate:V}},10839:(V,H,t)=>{t.d(H,{b:()=>h.f,c:()=>aV,g:()=>y,k:()=>tV,l:()=>IV,m:()=>VV,n:()=>mV,p:()=>HV,q:()=>hV,s:()=>ZV,u:()=>fV,v:()=>SV,C:()=>OV,y:()=>CV,G:()=>JV,I:()=>QV,K:()=>vV,N:()=>eV});var I=t(10847),Z=t(10863),h=t(10856);let f,m;const K=new WeakMap,E=new WeakMap,d=new WeakMap,a=new WeakMap,J=new WeakMap;let O={get(V,H,t){if(V instanceof IDBTransaction){if("done"===H)return E.get(V);if("objectStoreNames"===H)return V.objectStoreNames||d.get(V);if("store"===H)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return v(V[H])},set:(V,H,t)=>(V[H]=t,!0),has:(V,H)=>V instanceof IDBTransaction&&("done"===H||"store"===H)||H in V};function C(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(m||(m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(V)?function(){for(var H=arguments.length,t=new Array(H),I=0;I<H;I++)t[I]=arguments[I];return V.apply(Q(this),t),v(K.get(this))}:function(){for(var H=arguments.length,t=new Array(H),I=0;I<H;I++)t[I]=arguments[I];return v(V.apply(Q(this),t))}:function(H){for(var t=arguments.length,I=new Array(t>1?t-1:0),Z=1;Z<t;Z++)I[Z-1]=arguments[Z];const h=V.call(Q(this),H,...I);return d.set(h,H.sort?H.sort():[H]),v(h)}}function S(V){return"function"===typeof V?C(V):(V instanceof IDBTransaction&&function(V){if(E.has(V))return;const H=new Promise(((H,t)=>{const I=()=>{V.removeEventListener("complete",Z),V.removeEventListener("error",h),V.removeEventListener("abort",h)},Z=()=>{H(),I()},h=()=>{t(V.error||new DOMException("AbortError","AbortError")),I()};V.addEventListener("complete",Z),V.addEventListener("error",h),V.addEventListener("abort",h)}));E.set(V,H)}(V),H=V,(f||(f=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((V=>H instanceof V))?new Proxy(V,O):V);var H}function v(V){if(V instanceof IDBRequest)return function(V){const H=new Promise(((H,t)=>{const I=()=>{V.removeEventListener("success",Z),V.removeEventListener("error",h)},Z=()=>{H(v(V.result)),I()},h=()=>{t(V.error),I()};V.addEventListener("success",Z),V.addEventListener("error",h)}));return H.then((H=>{H instanceof IDBCursor&&K.set(H,V)})).catch((()=>{})),J.set(H,V),H}(V);if(a.has(V))return a.get(V);const H=S(V);return H!==V&&(a.set(V,H),J.set(H,V)),H}const Q=V=>J.get(V);const e=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],c=new Map;function o(V,H){if(!(V instanceof IDBDatabase)||H in V||"string"!==typeof H)return;if(c.get(H))return c.get(H);const t=H.replace(/FromIndex$/,""),I=H!==t,Z=W.includes(t);if(!(t in(I?IDBIndex:IDBObjectStore).prototype)||!Z&&!e.includes(t))return;const h=async function(V){const H=this.transaction(V,Z?"readwrite":"readonly");let h=H.store;for(var f=arguments.length,m=new Array(f>1?f-1:0),K=1;K<f;K++)m[K-1]=arguments[K];return I&&(h=h.index(m.shift())),(await Promise.all([h[t](...m),Z&&H.done]))[0]};return c.set(H,h),h}O=(V=>({...V,get:(H,t,I)=>o(H,t)||V.get(H,t,I),has:(H,t)=>!!o(H,t)||V.has(H,t)}))(O);class i{constructor(V){this.container=V}getPlatformInfoString(){return this.container.getProviders().map((V=>{if(function(V){const H=V.getComponent();return"VERSION"===(null===H||void 0===H?void 0:H.type)}(V)){const H=V.getImmediate();return`${H.library}/${H.version}`}return null})).filter((V=>V)).join(" ")}}const U="@firebase/app",D="0.9.13",L=new Z.f("@firebase/app"),N="@firebase/app-compat",j="@firebase/analytics-compat",s="@firebase/analytics",A="@firebase/app-check-compat",q="@firebase/app-check",M="@firebase/auth",g="@firebase/auth-compat",z="@firebase/database",G="@firebase/database-compat",r="@firebase/functions",p="@firebase/functions-compat",B="@firebase/installations",F="@firebase/installations-compat",b="@firebase/messaging",X="@firebase/messaging-compat",R="@firebase/performance",u="@firebase/performance-compat",P="@firebase/remote-config",n="@firebase/remote-config-compat",l="@firebase/storage",w="@firebase/storage-compat",k="@firebase/firestore",Y="@firebase/firestore-compat",T="firebase",y="[DEFAULT]",x={[U]:"fire-core",[N]:"fire-core-compat",[s]:"fire-analytics",[j]:"fire-analytics-compat",[q]:"fire-app-check",[A]:"fire-app-check-compat",[M]:"fire-auth",[g]:"fire-auth-compat",[z]:"fire-rtdb",[G]:"fire-rtdb-compat",[r]:"fire-fn",[p]:"fire-fn-compat",[B]:"fire-iid",[F]:"fire-iid-compat",[b]:"fire-fcm",[X]:"fire-fcm-compat",[R]:"fire-perf",[u]:"fire-perf-compat",[P]:"fire-rc",[n]:"fire-rc-compat",[l]:"fire-gcs",[w]:"fire-gcs-compat",[k]:"fire-fst",[Y]:"fire-fst-compat","fire-js":"fire-js",[T]:"fire-js-all"},VV=new Map,HV=new Map;function tV(V,H){try{V.container.tf(H)}catch(t){L.debug(`Component ${H.name} failed to register with FirebaseApp ${V.name}`,t)}}function IV(V,H){V.container.addOrOverwriteComponent(H)}function ZV(V){const H=V.name;if(HV.has(H))return L.debug(`There were multiple attempts to register component ${H}.`),!1;HV.set(H,V);for(const t of VV.values())tV(t,V);return!0}function hV(V,H){const t=V.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),V.container.getProvider(H)}function fV(V,H){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;hV(V,H).clearInstance(t)}function mV(){HV.clear()}const KV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},EV=new h.e("app","Firebase",KV);class dV{constructor(V,H,t){this._isDeleted=!1,this._options=Object.assign({},V),this._config=Object.assign({},H),this._name=H.name,this._automaticDataCollectionEnabled=H.automaticDataCollectionEnabled,this._container=t,this.container.tf(new I.c("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(V){this.checkDestroyed(),this._automaticDataCollectionEnabled=V}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(V){this._isDeleted=V}checkDestroyed(){if(this.isDeleted)throw EV.create("app-deleted",{appName:this._name})}}const aV="9.23.0";function JV(V){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=V;if("object"!==typeof H){H={name:H}}const Z=Object.assign({name:y,automaticDataCollectionEnabled:!1},H),f=Z.name;if("string"!==typeof f||!f)throw EV.create("bad-app-name",{appName:String(f)});if(t||(t=(0,h.z)()),!t)throw EV.create("no-options");const m=VV.get(f);if(m){if((0,h.w)(t,m.options)&&(0,h.w)(Z,m.config))return m;throw EV.create("duplicate-app",{appName:f})}const K=new I.b(f);for(const I of HV.values())K.tf(I);const E=new dV(t,Z,K);return VV.set(f,E),E}function OV(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;const H=VV.get(V);if(!H&&V===y&&(0,h.z)())return JV();if(!H)throw EV.create("no-app",{appName:V});return H}function CV(){return Array.from(VV.values())}async function SV(V){const H=V.name;VV.has(H)&&(VV.delete(H),await Promise.all(V.container.getProviders().map((V=>V.delete()))),V.isDeleted=!0)}function vV(V,H,t){var Z;let h=null!==(Z=x[V])&&void 0!==Z?Z:V;t&&(h+=`-${t}`);const f=h.match(/\s|\//),m=H.match(/\s|\//);if(f||m){const V=[`Unable to register library "${h}" with version "${H}":`];return f&&V.push(`library name "${h}" contains illegal characters (whitespace or "/")`),f&&m&&V.push("and"),m&&V.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void L.warn(V.join(" "))}ZV(new I.c(`${h}-version`,(()=>({library:h,version:H})),"VERSION"))}function QV(V,H){if(null!==V&&"function"!==typeof V)throw EV.create("invalid-log-argument");(0,Z.j)(V,H)}function eV(V){(0,Z.g)(V)}const WV="firebase-heartbeat-store";let cV=null;function oV(){return cV||(cV=function(V,H){let{blocked:t,upgrade:I,blocking:Z,terminated:h}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const f=indexedDB.open(V,H),m=v(f);return I&&f.addEventListener("upgradeneeded",(V=>{I(v(f.result),V.oldVersion,V.newVersion,v(f.transaction),V)})),t&&f.addEventListener("blocked",(V=>t(V.oldVersion,V.newVersion,V))),m.then((V=>{h&&V.addEventListener("close",(()=>h())),Z&&V.addEventListener("versionchange",(V=>Z(V.oldVersion,V.newVersion,V)))})).catch((()=>{})),m}("firebase-heartbeat-database",1,{upgrade:(V,H)=>{if(0===H)V.createObjectStore(WV)}}).catch((V=>{throw EV.create("idb-open",{originalErrorMessage:V.message})}))),cV}async function iV(V,H){try{const t=(await oV()).transaction(WV,"readwrite"),I=t.objectStore(WV);await I.put(H,UV(V)),await t.done}catch(t){if(t instanceof h.f)L.warn(t.message);else{const V=EV.create("idb-set",{originalErrorMessage:null===t||void 0===t?void 0:t.message});L.warn(V.message)}}}function UV(V){return`${V.name}!${V.options.appId}`}class DV{constructor(V){this.container=V,this._heartbeatsCache=null;const H=this.container.getProvider("app").getImmediate();this.Oi=new NV(H),this._heartbeatsCachePromise=this.Oi.read().then((V=>(this._heartbeatsCache=V,V)))}async triggerHeartbeat(){const V=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),H=LV();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==H&&!this._heartbeatsCache.heartbeats.some((V=>V.date===H)))return this._heartbeatsCache.heartbeats.push({date:H,agent:V}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((V=>{const H=new Date(V.date).valueOf();return Date.now()-H<=2592e6})),this.Oi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const V=LV(),{heartbeatsToSend:H,unsentEntries:t}=function(V){let H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const t=[];let I=V.slice();for(const Z of V){const V=t.find((V=>V.agent===Z.agent));if(V){if(V.dates.push(Z.date),jV(t)>H){V.dates.pop();break}}else if(t.push({agent:Z.agent,dates:[Z.date]}),jV(t)>H){t.pop();break}I=I.slice(1)}return{heartbeatsToSend:t,unsentEntries:I}}(this._heartbeatsCache.heartbeats),I=(0,h.o)(JSON.stringify({version:2,heartbeats:H}));return this._heartbeatsCache.lastSentHeartbeatDate=V,t.length>0?(this._heartbeatsCache.heartbeats=t,await this.Oi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Oi.overwrite(this._heartbeatsCache)),I}}function LV(){return(new Date).toISOString().substring(0,10)}class NV{constructor(V){this.app=V,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,h.U)()&&(0,h.ab)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(V){try{const H=await oV();return await H.transaction(WV).objectStore(WV).get(UV(V))}catch(H){if(H instanceof h.f)L.warn(H.message);else{const V=EV.create("idb-get",{originalErrorMessage:null===H||void 0===H?void 0:H.message});L.warn(V.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(V){var H;if(await this._canUseIndexedDBPromise){const t=await this.read();return iV(this.app,{lastSentHeartbeatDate:null!==(H=V.lastSentHeartbeatDate)&&void 0!==H?H:t.lastSentHeartbeatDate,heartbeats:V.heartbeats})}}async add(V){var H;if(await this._canUseIndexedDBPromise){const t=await this.read();return iV(this.app,{lastSentHeartbeatDate:null!==(H=V.lastSentHeartbeatDate)&&void 0!==H?H:t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...V.heartbeats]})}}}function jV(V){return(0,h.o)(JSON.stringify({version:2,heartbeats:V})).length}var sV;sV="",ZV(new I.c("platform-logger",(V=>new i(V)),"PRIVATE")),ZV(new I.c("heartbeat",(V=>new DV(V)),"PRIVATE")),vV(U,D,sV),vV(U,D,"esm2017"),vV("fire-js","")},10847:(V,H,t)=>{t.d(H,{b:()=>m,c:()=>Z});var I=t(10856);class Z{constructor(V,H,t){this.name=V,this.instanceFactory=H,this.type=t,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const h="[DEFAULT]";class f{constructor(V,H){this.name=V,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const H=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(H)){const V=new I.b;if(this.instancesDeferred.set(H,V),this.isInitialized(H)||this.shouldAutoInitialize())try{const t=this.getOrInitializeService({instanceIdentifier:H});t&&V.resolve(t)}catch(t){}}return this.instancesDeferred.get(H).promise}getImmediate(V){var H;const t=this.normalizeInstanceIdentifier(null===V||void 0===V?void 0:V.identifier),I=null!==(H=null===V||void 0===V?void 0:V.optional)&&void 0!==H&&H;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(I)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(Z){if(I)return null;throw Z}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function(V){return"EAGER"===V.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:h})}catch(H){}for(const[V,t]of this.instancesDeferred.entries()){const I=this.normalizeInstanceIdentifier(V);try{const V=this.getOrInitializeService({instanceIdentifier:I});t.resolve(V)}catch(H){}}}}clearInstance(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}async delete(){const V=Array.from(this.instances.values());await Promise.all([...V.filter((V=>"INTERNAL"in V)).map((V=>V.INTERNAL.delete())),...V.filter((V=>"_delete"in V)).map((V=>V._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instances.has(V)}getOptions(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.instancesOptions.get(V)||{}}initialize(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:H={}}=V,t=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(t))throw Error(`${this.name}(${t}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const I=this.getOrInitializeService({instanceIdentifier:t,options:H});for(const[Z,h]of this.instancesDeferred.entries()){t===this.normalizeInstanceIdentifier(Z)&&h.resolve(I)}return I}ui(V,H){var t;const I=this.normalizeInstanceIdentifier(H),Z=null!==(t=this.onInitCallbacks.get(I))&&void 0!==t?t:new Set;Z.add(V),this.onInitCallbacks.set(I,Z);const h=this.instances.get(I);return h&&V(h,I),()=>{Z.delete(V)}}invokeOnInitCallbacks(V,H){const t=this.onInitCallbacks.get(H);if(t)for(const Z of t)try{Z(V,H)}catch(I){}}getOrInitializeService(V){let{instanceIdentifier:H,options:t={}}=V,I=this.instances.get(H);if(!I&&this.component&&(I=this.component.instanceFactory(this.container,{instanceIdentifier:(Z=H,Z===h?void 0:Z),options:t}),this.instances.set(H,I),this.instancesOptions.set(H,t),this.invokeOnInitCallbacks(I,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,I)}catch(f){}var Z;return I||null}normalizeInstanceIdentifier(){let V=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return this.component?this.component.multipleInstances?V:h:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class m{constructor(V){this.name=V,this.providers=new Map}tf(V){const H=this.getProvider(V.name);if(H.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);H.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.tf(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const H=new f(V,this);return this.providers.set(V,H),H}getProviders(){return Array.from(this.providers.values())}}},10863:(V,H,t)=>{t.d(H,{c:()=>Z,f:()=>E,g:()=>d,j:()=>a});const I=[];var Z;!function(V){V[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT"}(Z||(Z={}));const h={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},f=Z.INFO,m={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},K=function(V,H){if(H<V.logLevel)return;const t=(new Date).toISOString(),I=m[H];if(!I)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);for(var Z=arguments.length,h=new Array(Z>2?Z-2:0),f=2;f<Z;f++)h[f-2]=arguments[f];console[I](`[${t}]  ${V.name}:`,...h)};class E{constructor(V){this.name=V,this._logLevel=f,this._logHandler=K,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in Z))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"===typeof V?h[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!==typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(){for(var V=arguments.length,H=new Array(V),t=0;t<V;t++)H[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...H),this._logHandler(this,Z.DEBUG,...H)}log(){for(var V=arguments.length,H=new Array(V),t=0;t<V;t++)H[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...H),this._logHandler(this,Z.VERBOSE,...H)}info(){for(var V=arguments.length,H=new Array(V),t=0;t<V;t++)H[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,Z.INFO,...H),this._logHandler(this,Z.INFO,...H)}warn(){for(var V=arguments.length,H=new Array(V),t=0;t<V;t++)H[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,Z.WARN,...H),this._logHandler(this,Z.WARN,...H)}error(){for(var V=arguments.length,H=new Array(V),t=0;t<V;t++)H[t]=arguments[t];this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...H),this._logHandler(this,Z.ERROR,...H)}}function d(V){I.forEach((H=>{H.setLogLevel(V)}))}function a(V,H){for(const t of I){let I=null;H&&H.level&&(I=h[H.level]),t.userLogHandler=null===V?null:function(H,t){for(var h=arguments.length,f=new Array(h>2?h-2:0),m=2;m<h;m++)f[m-2]=arguments[m];const K=f.map((V=>{if(null==V)return null;if("string"===typeof V)return V;if("number"===typeof V||"boolean"===typeof V)return V.toString();if(V instanceof Error)return V.message;try{return JSON.stringify(V)}catch(H){return null}})).filter((V=>V)).join(" ");t>=(null!==I&&void 0!==I?I:H.logLevel)&&V({level:Z[t].toLowerCase(),message:K,args:f,type:H.name})}}}}}]);