/*! For license information please see 1kv4fg.37.64f40222.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11676:(D,j,W)=>{W.d(j,{$:()=>U,A:()=>I,B:()=>Z,E:()=>F,I:()=>P,J:()=>T,M:()=>x,P:()=>V,T:()=>b,V:()=>g,Y:()=>N,Z:()=>R,d:()=>X,db:()=>l,e:()=>e,gb:()=>c,h:()=>L,ib:()=>G,j:()=>K,m:()=>O,p:()=>M,r:()=>p,u:()=>y,w:()=>Y});const Q=function(D){const j=[];let W=0;for(let Q=0;Q<D.length;Q++){let C=D.charCodeAt(Q);C<128?j[W++]=C:C<2048?(j[W++]=C>>6|192,j[W++]=63&C|128):55296===(64512&C)&&Q+1<D.length&&56320===(64512&D.charCodeAt(Q+1))?(C=65536+((1023&C)<<10)+(1023&D.charCodeAt(++Q)),j[W++]=C>>18|240,j[W++]=C>>12&63|128,j[W++]=C>>6&63|128,j[W++]=63&C|128):(j[W++]=C>>12|224,j[W++]=C>>6&63|128,j[W++]=63&C|128)}return j},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(D,j){if(!Array.isArray(D))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,Q=[];for(let C=0;C<D.length;C+=3){const j=D[C],k=C+1<D.length,M=k?D[C+1]:0,O=C+2<D.length,E=O?D[C+2]:0,f=j>>2,F=(3&j)<<4|M>>4;let Z=(15&M)<<2|E>>6,P=63&E;O||(P=64,k||(Z=64)),Q.push(W[f],W[F],W[Z],W[P])}return Q.join("")},encodeString(D,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(D):this.encodeByteArray(Q(D),j)},decodeString(D,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(D):function(D){const j=[];let W=0,Q=0;for(;W<D.length;){const C=D[W++];if(C<128)j[Q++]=String.fromCharCode(C);else if(C>191&&C<224){const k=D[W++];j[Q++]=String.fromCharCode((31&C)<<6|63&k)}else if(C>239&&C<365){const k=((7&C)<<18|(63&D[W++])<<12|(63&D[W++])<<6|63&D[W++])-65536;j[Q++]=String.fromCharCode(55296+(k>>10)),j[Q++]=String.fromCharCode(56320+(1023&k))}else{const k=D[W++],M=D[W++];j[Q++]=String.fromCharCode((15&C)<<12|(63&k)<<6|63&M)}}return j.join("")}(this.decodeStringToByteArray(D,j))},decodeStringToByteArray(D,j){this.init_();const W=j?this.charToByteMapWebSafe_:this.charToByteMap_,Q=[];for(let C=0;C<D.length;){const j=W[D.charAt(C++)],M=C<D.length?W[D.charAt(C)]:0;++C;const O=C<D.length?W[D.charAt(C)]:64;++C;const E=C<D.length?W[D.charAt(C)]:64;if(++C,null==j||null==M||null==O||null==E)throw new k;const f=j<<2|M>>4;if(Q.push(f),64!==O){const D=M<<4&240|O>>2;if(Q.push(D),64!==E){const D=O<<6&192|E;Q.push(D)}}}return Q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let D=0;D<this.ENCODED_VALS.length;D++)this.byteToCharMap_[D]=this.ENCODED_VALS.charAt(D),this.charToByteMap_[this.byteToCharMap_[D]]=D,this.byteToCharMapWebSafe_[D]=this.ENCODED_VALS_WEBSAFE.charAt(D),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[D]]=D,D>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(D)]=D,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(D)]=D)}}};class k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const M=function(D){return function(D){const j=Q(D);return C.encodeByteArray(j,!0)}(D).replace(/\./g,"")},O=function(D){try{return C.decodeString(D,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};const E=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof W.g)return W.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return E()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let D;try{D=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(W){return}const j=D&&O(D[1]);return j&&JSON.parse(j)})()}catch(D){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${D}`)}},F=D=>{var j,W;return null===(W=null===(j=f())||void 0===j?void 0:j.emulatorHosts)||void 0===W?void 0:W[D]},Z=()=>{var D;return null===(D=f())||void 0===D?void 0:D.config},P=D=>{var j;return null===(j=f())||void 0===j?void 0:j[`_${D}`]};class X{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((D,j)=>{this.resolve=D,this.reject=j}))}wrapCallback(D){return(j,W)=>{j?this.reject(j):this.resolve(W),"function"===typeof D&&(this.promise.catch((()=>{})),1===D.length?D(j):D(j,W))}}}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function R(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function V(){const D="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof D&&void 0!==D.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function g(){const D=x();return D.indexOf("MSIE ")>=0||D.indexOf("Trident/")>=0}function N(){try{return"object"===typeof indexedDB}catch(D){return!1}}function G(){return new Promise(((D,j)=>{try{let W=!0;const Q="validate-browser-context-for-indexeddb-analytics-module",C=self.indexedDB.open(Q);C.onsuccess=()=>{C.result.close(),W||self.indexedDB.deleteDatabase(Q),D(!0)},C.onupgradeneeded=()=>{W=!1},C.onerror=()=>{var D;j((null===(D=C.error)||void 0===D?void 0:D.message)||"")}}catch(W){j(W)}}))}function K(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class L extends Error{constructor(D,j,W){super(j),this.code=D,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e.prototype.create)}}class e{constructor(D,j,W){this.service=D,this.serviceName=j,this.errors=W}create(D){const j=(arguments.length<=1?void 0:arguments[1])||{},W=`${this.service}/${D}`,Q=this.errors[D],C=Q?function(D,j){return D.replace(s,((D,W)=>{const Q=j[W];return null!=Q?String(Q):`<${W}?>`}))}(Q,j):"Error",k=`${this.serviceName}: ${C} (${W}).`;return new L(W,k,j)}}const s=/\{\$([^}]+)}/g;function b(D){for(const j in D)if(Object.prototype.hasOwnProperty.call(D,j))return!1;return!0}function Y(D,j){if(D===j)return!0;const W=Object.keys(D),Q=Object.keys(j);for(const C of W){if(!Q.includes(C))return!1;const W=D[C],k=j[C];if(t(W)&&t(k)){if(!Y(W,k))return!1}else if(W!==k)return!1}for(const C of Q)if(!W.includes(C))return!1;return!0}function t(D){return null!==D&&"object"===typeof D}function c(D){const j=[];for(const[W,Q]of Object.entries(D))Array.isArray(Q)?Q.forEach((D=>{j.push(encodeURIComponent(W)+"="+encodeURIComponent(D))})):j.push(encodeURIComponent(W)+"="+encodeURIComponent(Q));return j.length?"&"+j.join("&"):""}function l(D){const j={};return D.replace(/^\?/,"").split("&").forEach((D=>{if(D){const[W,Q]=D.split("=");j[decodeURIComponent(W)]=decodeURIComponent(Q)}})),j}function I(D){const j=D.indexOf("?");if(!j)return"";const W=D.indexOf("#",j);return D.substring(j,W>0?W:void 0)}function y(D,j){const W=new m(D,j);return W.subscribe.bind(W)}class m{constructor(D,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then((()=>{D(this)})).catch((D=>{this.error(D)}))}next(D){this.forEachObserver((j=>{j.next(D)}))}error(D){this.forEachObserver((j=>{j.error(D)})),this.close(D)}complete(){this.forEachObserver((D=>{D.complete()})),this.close()}subscribe(D,j,W){let Q;if(void 0===D&&void 0===j&&void 0===W)throw new Error("Missing Observer.");Q=function(D,j){if("object"!==typeof D||null===D)return!1;for(const W of j)if(W in D&&"function"===typeof D[W])return!0;return!1}(D,["next","error","complete"])?D:{next:D,error:j,complete:W},void 0===Q.next&&(Q.next=a),void 0===Q.error&&(Q.error=a),void 0===Q.complete&&(Q.complete=a);const C=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch(D){}})),this.observers.push(Q),C}unsubscribeOne(D){void 0!==this.observers&&void 0!==this.observers[D]&&(delete this.observers[D],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(D){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,D)}sendOne(D,j){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[D])try{j(this.observers[D])}catch(W){"undefined"!==typeof console&&console.error&&console.error(W)}}))}close(D){this.finalized||(this.finalized=!0,void 0!==D&&(this.finalError=D),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function a(){}const S=1e3,H=2,z=144e5,i=.5;function p(D){let j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H;const W=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:S)*Math.pow(j,D),Q=Math.round(i*W*(Math.random()-.5)*2);return Math.min(z,W+Q)}function T(D){return D&&D._delegate?D._delegate:D}},11665:(D,j,W)=>{W.d(j,{d:()=>k.h,e:()=>ZD,g:()=>B,i:()=>WD,k:()=>QD,o:()=>DD,q:()=>OD,u:()=>jD,v:()=>kD,w:()=>CD,x:()=>MD,B:()=>RD,I:()=>XD,F:()=>xD,J:()=>PD,K:()=>UD,L:()=>VD,P:()=>gD});var Q=W(11669),C=W(11683),k=W(11676);let M,O;const E=new WeakMap,f=new WeakMap,F=new WeakMap,Z=new WeakMap,P=new WeakMap;let X={get(D,j,W){if(D instanceof IDBTransaction){if("done"===j)return f.get(D);if("objectStoreNames"===j)return D.objectStoreNames||F.get(D);if("store"===j)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return V(D[j])},set:(D,j,W)=>(D[j]=W,!0),has:(D,j)=>D instanceof IDBTransaction&&("done"===j||"store"===j)||j in D};function x(D){return D!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(D)?function(){for(var j=arguments.length,W=new Array(j),Q=0;Q<j;Q++)W[Q]=arguments[Q];return D.apply(U(this),W),V(E.get(this))}:function(){for(var j=arguments.length,W=new Array(j),Q=0;Q<j;Q++)W[Q]=arguments[Q];return V(D.apply(U(this),W))}:function(j){for(var W=arguments.length,Q=new Array(W>1?W-1:0),C=1;C<W;C++)Q[C-1]=arguments[C];const k=D.call(U(this),j,...Q);return F.set(k,j.sort?j.sort():[j]),V(k)}}function R(D){return"function"===typeof D?x(D):(D instanceof IDBTransaction&&function(D){if(f.has(D))return;const j=new Promise(((j,W)=>{const Q=()=>{D.removeEventListener("complete",C),D.removeEventListener("error",k),D.removeEventListener("abort",k)},C=()=>{j(),Q()},k=()=>{W(D.error||new DOMException("AbortError","AbortError")),Q()};D.addEventListener("complete",C),D.addEventListener("error",k),D.addEventListener("abort",k)}));f.set(D,j)}(D),j=D,(M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((D=>j instanceof D))?new Proxy(D,X):D);var j}function V(D){if(D instanceof IDBRequest)return function(D){const j=new Promise(((j,W)=>{const Q=()=>{D.removeEventListener("success",C),D.removeEventListener("error",k)},C=()=>{j(V(D.result)),Q()},k=()=>{W(D.error),Q()};D.addEventListener("success",C),D.addEventListener("error",k)}));return j.then((j=>{j instanceof IDBCursor&&E.set(j,D)})).catch((()=>{})),P.set(j,D),j}(D);if(Z.has(D))return Z.get(D);const j=R(D);return j!==D&&(Z.set(D,j),P.set(j,D)),j}const U=D=>P.get(D);const g=["get","getKey","getAll","getAllKeys","count"],N=["put","add","delete","clear"],G=new Map;function K(D,j){if(!(D instanceof IDBDatabase)||j in D||"string"!==typeof j)return;if(G.get(j))return G.get(j);const W=j.replace(/FromIndex$/,""),Q=j!==W,C=N.includes(W);if(!(W in(Q?IDBIndex:IDBObjectStore).prototype)||!C&&!g.includes(W))return;const k=async function(D){const j=this.transaction(D,C?"readwrite":"readonly");let k=j.store;for(var M=arguments.length,O=new Array(M>1?M-1:0),E=1;E<M;E++)O[E-1]=arguments[E];return Q&&(k=k.index(O.shift())),(await Promise.all([k[W](...O),C&&j.done]))[0]};return G.set(j,k),k}X=(D=>({...D,get:(j,W,Q)=>K(j,W)||D.get(j,W,Q),has:(j,W)=>!!K(j,W)||D.has(j,W)}))(X);class L{constructor(D){this.container=D}getPlatformInfoString(){return this.container.getProviders().map((D=>{if(function(D){const j=D.getComponent();return"VERSION"===(null===j||void 0===j?void 0:j.type)}(D)){const j=D.getImmediate();return`${j.library}/${j.version}`}return null})).filter((D=>D)).join(" ")}}const e="@firebase/app",s="0.9.13",b=new C.c("@firebase/app"),Y="@firebase/app-compat",t="@firebase/analytics-compat",c="@firebase/analytics",l="@firebase/app-check-compat",I="@firebase/app-check",y="@firebase/auth",m="@firebase/auth-compat",a="@firebase/database",S="@firebase/database-compat",H="@firebase/functions",z="@firebase/functions-compat",i="@firebase/installations",p="@firebase/installations-compat",T="@firebase/messaging",A="@firebase/messaging-compat",w="@firebase/performance",n="@firebase/performance-compat",u="@firebase/remote-config",q="@firebase/remote-config-compat",o="@firebase/storage",J="@firebase/storage-compat",h="@firebase/firestore",d="@firebase/firestore-compat",v="firebase",B="[DEFAULT]",r={[e]:"fire-core",[Y]:"fire-core-compat",[c]:"fire-analytics",[t]:"fire-analytics-compat",[I]:"fire-app-check",[l]:"fire-app-check-compat",[y]:"fire-auth",[m]:"fire-auth-compat",[a]:"fire-rtdb",[S]:"fire-rtdb-compat",[H]:"fire-fn",[z]:"fire-fn-compat",[i]:"fire-iid",[p]:"fire-iid-compat",[T]:"fire-fcm",[A]:"fire-fcm-compat",[w]:"fire-perf",[n]:"fire-perf-compat",[u]:"fire-rc",[q]:"fire-rc-compat",[o]:"fire-gcs",[J]:"fire-gcs-compat",[h]:"fire-fst",[d]:"fire-fst-compat","fire-js":"fire-js",[v]:"fire-js-all"},DD=new Map,jD=new Map;function WD(D,j){try{D.container.Hf(j)}catch(W){b.debug(`Component ${j.name} failed to register with FirebaseApp ${D.name}`,W)}}function QD(D,j){D.container.addOrOverwriteComponent(j)}function CD(D){const j=D.name;if(jD.has(j))return b.debug(`There were multiple attempts to register component ${j}.`),!1;jD.set(j,D);for(const W of DD.values())WD(W,D);return!0}function kD(D,j){const W=D.container.getProvider("heartbeat").getImmediate({optional:!0});return W&&W.triggerHeartbeat(),D.container.getProvider(j)}function MD(D,j){let W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;kD(D,j).clearInstance(W)}function OD(){jD.clear()}const ED={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fD=new k.e("app","Firebase",ED);class FD{constructor(D,j,W){this._isDeleted=!1,this._options=Object.assign({},D),this._config=Object.assign({},j),this._name=j.name,this._automaticDataCollectionEnabled=j.automaticDataCollectionEnabled,this._container=W,this.container.Hf(new Q.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(D){this.checkDestroyed(),this._automaticDataCollectionEnabled=D}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(D){this._isDeleted=D}checkDestroyed(){if(this.isDeleted)throw fD.create("app-deleted",{appName:this._name})}}const ZD="9.23.0";function PD(D){let j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},W=D;if("object"!==typeof j){j={name:j}}const C=Object.assign({name:B,automaticDataCollectionEnabled:!1},j),M=C.name;if("string"!==typeof M||!M)throw fD.create("bad-app-name",{appName:String(M)});if(W||(W=(0,k.B)()),!W)throw fD.create("no-options");const O=DD.get(M);if(O){if((0,k.w)(W,O.options)&&(0,k.w)(C,O.config))return O;throw fD.create("duplicate-app",{appName:M})}const E=new Q.d(M);for(const Q of jD.values())E.Hf(Q);const f=new FD(W,C,E);return DD.set(M,f),f}function XD(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;const j=DD.get(D);if(!j&&D===B&&(0,k.B)())return PD();if(!j)throw fD.create("no-app",{appName:D});return j}function xD(){return Array.from(DD.values())}async function RD(D){const j=D.name;DD.has(j)&&(DD.delete(j),await Promise.all(D.container.getProviders().map((D=>D.delete()))),D.isDeleted=!0)}function VD(D,j,W){var C;let k=null!==(C=r[D])&&void 0!==C?C:D;W&&(k+=`-${W}`);const M=k.match(/\s|\//),O=j.match(/\s|\//);if(M||O){const D=[`Unable to register library "${k}" with version "${j}":`];return M&&D.push(`library name "${k}" contains illegal characters (whitespace or "/")`),M&&O&&D.push("and"),O&&D.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void b.warn(D.join(" "))}CD(new Q.h(`${k}-version`,(()=>({library:k,version:j})),"VERSION"))}function UD(D,j){if(null!==D&&"function"!==typeof D)throw fD.create("invalid-log-argument");(0,C.h)(D,j)}function gD(D){(0,C.d)(D)}const ND="firebase-heartbeat-store";let GD=null;function KD(){return GD||(GD=function(D,j){let{blocked:W,upgrade:Q,blocking:C,terminated:k}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const M=indexedDB.open(D,j),O=V(M);return Q&&M.addEventListener("upgradeneeded",(D=>{Q(V(M.result),D.oldVersion,D.newVersion,V(M.transaction),D)})),W&&M.addEventListener("blocked",(D=>W(D.oldVersion,D.newVersion,D))),O.then((D=>{k&&D.addEventListener("close",(()=>k())),C&&D.addEventListener("versionchange",(D=>C(D.oldVersion,D.newVersion,D)))})).catch((()=>{})),O}("firebase-heartbeat-database",1,{upgrade:(D,j)=>{if(0===j)D.createObjectStore(ND)}}).catch((D=>{throw fD.create("idb-open",{originalErrorMessage:D.message})}))),GD}async function LD(D,j){try{const W=(await KD()).transaction(ND,"readwrite"),Q=W.objectStore(ND);await Q.put(j,eD(D)),await W.done}catch(W){if(W instanceof k.h)b.warn(W.message);else{const D=fD.create("idb-set",{originalErrorMessage:null===W||void 0===W?void 0:W.message});b.warn(D.message)}}}function eD(D){return`${D.name}!${D.options.appId}`}class sD{constructor(D){this.container=D,this._heartbeatsCache=null;const j=this.container.getProvider("app").getImmediate();this._i=new YD(j),this._heartbeatsCachePromise=this._i.read().then((D=>(this._heartbeatsCache=D,D)))}async triggerHeartbeat(){const D=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),j=bD();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==j&&!this._heartbeatsCache.heartbeats.some((D=>D.date===j)))return this._heartbeatsCache.heartbeats.push({date:j,agent:D}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((D=>{const j=new Date(D.date).valueOf();return Date.now()-j<=2592e6})),this._i.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const D=bD(),{heartbeatsToSend:j,unsentEntries:W}=function(D){let j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const W=[];let Q=D.slice();for(const C of D){const D=W.find((D=>D.agent===C.agent));if(D){if(D.dates.push(C.date),tD(W)>j){D.dates.pop();break}}else if(W.push({agent:C.agent,dates:[C.date]}),tD(W)>j){W.pop();break}Q=Q.slice(1)}return{heartbeatsToSend:W,unsentEntries:Q}}(this._heartbeatsCache.heartbeats),Q=(0,k.p)(JSON.stringify({version:2,heartbeats:j}));return this._heartbeatsCache.lastSentHeartbeatDate=D,W.length>0?(this._heartbeatsCache.heartbeats=W,await this._i.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._i.overwrite(this._heartbeatsCache)),Q}}function bD(){return(new Date).toISOString().substring(0,10)}class YD{constructor(D){this.app=D,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,k.Y)()&&(0,k.ib)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(D){try{const j=await KD();return await j.transaction(ND).objectStore(ND).get(eD(D))}catch(j){if(j instanceof k.h)b.warn(j.message);else{const D=fD.create("idb-get",{originalErrorMessage:null===j||void 0===j?void 0:j.message});b.warn(D.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(D){var j;if(await this._canUseIndexedDBPromise){const W=await this.read();return LD(this.app,{lastSentHeartbeatDate:null!==(j=D.lastSentHeartbeatDate)&&void 0!==j?j:W.lastSentHeartbeatDate,heartbeats:D.heartbeats})}}async add(D){var j;if(await this._canUseIndexedDBPromise){const W=await this.read();return LD(this.app,{lastSentHeartbeatDate:null!==(j=D.lastSentHeartbeatDate)&&void 0!==j?j:W.lastSentHeartbeatDate,heartbeats:[...W.heartbeats,...D.heartbeats]})}}}function tD(D){return(0,k.p)(JSON.stringify({version:2,heartbeats:D})).length}var cD;cD="",CD(new Q.h("platform-logger",(D=>new L(D)),"PRIVATE")),CD(new Q.h("heartbeat",(D=>new sD(D)),"PRIVATE")),VD(e,s,cD),VD(e,s,"esm2017"),VD("fire-js","")},11669:(D,j,W)=>{W.d(j,{d:()=>O,h:()=>C});var Q=W(11676);class C{constructor(D,j,W){this.name=D,this.instanceFactory=j,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(D){return this.instantiationMode=D,this}setMultipleInstances(D){return this.multipleInstances=D,this}setServiceProps(D){return this.serviceProps=D,this}setInstanceCreatedCallback(D){return this.onInstanceCreated=D,this}}const k="[DEFAULT]";class M{constructor(D,j){this.name=D,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(D){const j=this.normalizeInstanceIdentifier(D);if(!this.instancesDeferred.has(j)){const D=new Q.d;if(this.instancesDeferred.set(j,D),this.isInitialized(j)||this.shouldAutoInitialize())try{const W=this.getOrInitializeService({instanceIdentifier:j});W&&D.resolve(W)}catch(W){}}return this.instancesDeferred.get(j).promise}getImmediate(D){var j;const W=this.normalizeInstanceIdentifier(null===D||void 0===D?void 0:D.identifier),Q=null!==(j=null===D||void 0===D?void 0:D.optional)&&void 0!==j&&j;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(Q)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(C){if(Q)return null;throw C}}getComponent(){return this.component}setComponent(D){if(D.name!==this.name)throw Error(`Mismatching Component ${D.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=D,this.shouldAutoInitialize()){if(function(D){return"EAGER"===D.instantiationMode}(D))try{this.getOrInitializeService({instanceIdentifier:k})}catch(j){}for(const[D,W]of this.instancesDeferred.entries()){const Q=this.normalizeInstanceIdentifier(D);try{const D=this.getOrInitializeService({instanceIdentifier:Q});W.resolve(D)}catch(j){}}}}clearInstance(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;this.instancesDeferred.delete(D),this.instancesOptions.delete(D),this.instances.delete(D)}async delete(){const D=Array.from(this.instances.values());await Promise.all([...D.filter((D=>"INTERNAL"in D)).map((D=>D.INTERNAL.delete())),...D.filter((D=>"_delete"in D)).map((D=>D._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;return this.instances.has(D)}getOptions(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;return this.instancesOptions.get(D)||{}}initialize(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:j={}}=D,W=this.normalizeInstanceIdentifier(D.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Q=this.getOrInitializeService({instanceIdentifier:W,options:j});for(const[C,k]of this.instancesDeferred.entries()){W===this.normalizeInstanceIdentifier(C)&&k.resolve(Q)}return Q}Ii(D,j){var W;const Q=this.normalizeInstanceIdentifier(j),C=null!==(W=this.onInitCallbacks.get(Q))&&void 0!==W?W:new Set;C.add(D),this.onInitCallbacks.set(Q,C);const k=this.instances.get(Q);return k&&D(k,Q),()=>{C.delete(D)}}invokeOnInitCallbacks(D,j){const W=this.onInitCallbacks.get(j);if(W)for(const C of W)try{C(D,j)}catch(Q){}}getOrInitializeService(D){let{instanceIdentifier:j,options:W={}}=D,Q=this.instances.get(j);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(C=j,C===k?void 0:C),options:W}),this.instances.set(j,Q),this.instancesOptions.set(j,W),this.invokeOnInitCallbacks(Q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Q)}catch(M){}var C;return Q||null}normalizeInstanceIdentifier(){let D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;return this.component?this.component.multipleInstances?D:k:D}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(D){this.name=D,this.providers=new Map}Hf(D){const j=this.getProvider(D.name);if(j.isComponentSet())throw new Error(`Component ${D.name} has already been registered with ${this.name}`);j.setComponent(D)}addOrOverwriteComponent(D){this.getProvider(D.name).isComponentSet()&&this.providers.delete(D.name),this.Hf(D)}getProvider(D){if(this.providers.has(D))return this.providers.get(D);const j=new M(D,this);return this.providers.set(D,j),j}getProviders(){return Array.from(this.providers.values())}}},11683:(D,j,W)=>{W.d(j,{b:()=>C,c:()=>f,d:()=>F,h:()=>Z});const Q=[];var C;!function(D){D[D.DEBUG=0]="DEBUG",D[D.VERBOSE=1]="VERBOSE",D[D.INFO=2]="INFO",D[D.WARN=3]="WARN",D[D.ERROR=4]="ERROR",D[D.SILENT=5]="SILENT"}(C||(C={}));const k={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},M=C.INFO,O={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},E=function(D,j){if(j<D.logLevel)return;const W=(new Date).toISOString(),Q=O[j];if(!Q)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);for(var C=arguments.length,k=new Array(C>2?C-2:0),M=2;M<C;M++)k[M-2]=arguments[M];console[Q](`[${W}]  ${D.name}:`,...k)};class f{constructor(D){this.name=D,this._logLevel=M,this._logHandler=E,this._userLogHandler=null,Q.push(this)}get logLevel(){return this._logLevel}set logLevel(D){if(!(D in C))throw new TypeError(`Invalid value "${D}" assigned to \`logLevel\``);this._logLevel=D}setLogLevel(D){this._logLevel="string"===typeof D?k[D]:D}get logHandler(){return this._logHandler}set logHandler(D){if("function"!==typeof D)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=D}get userLogHandler(){return this._userLogHandler}set userLogHandler(D){this._userLogHandler=D}debug(){for(var D=arguments.length,j=new Array(D),W=0;W<D;W++)j[W]=arguments[W];this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...j),this._logHandler(this,C.DEBUG,...j)}log(){for(var D=arguments.length,j=new Array(D),W=0;W<D;W++)j[W]=arguments[W];this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...j),this._logHandler(this,C.VERBOSE,...j)}info(){for(var D=arguments.length,j=new Array(D),W=0;W<D;W++)j[W]=arguments[W];this._userLogHandler&&this._userLogHandler(this,C.INFO,...j),this._logHandler(this,C.INFO,...j)}warn(){for(var D=arguments.length,j=new Array(D),W=0;W<D;W++)j[W]=arguments[W];this._userLogHandler&&this._userLogHandler(this,C.WARN,...j),this._logHandler(this,C.WARN,...j)}error(){for(var D=arguments.length,j=new Array(D),W=0;W<D;W++)j[W]=arguments[W];this._userLogHandler&&this._userLogHandler(this,C.ERROR,...j),this._logHandler(this,C.ERROR,...j)}}function F(D){Q.forEach((j=>{j.setLogLevel(D)}))}function Z(D,j){for(const W of Q){let Q=null;j&&j.level&&(Q=k[j.level]),W.userLogHandler=null===D?null:function(j,W){for(var k=arguments.length,M=new Array(k>2?k-2:0),O=2;O<k;O++)M[O-2]=arguments[O];const E=M.map((D=>{if(null==D)return null;if("string"===typeof D)return D;if("number"===typeof D||"boolean"===typeof D)return D.toString();if(D instanceof Error)return D.message;try{return JSON.stringify(D)}catch(j){return null}})).filter((D=>D)).join(" ");W>=(null!==Q&&void 0!==Q?Q:j.logLevel)&&D({level:C[W].toLowerCase(),message:E,args:M,type:j.name})}}}}}]);