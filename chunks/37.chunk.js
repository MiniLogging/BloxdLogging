/*! For license information please see 038r0g.37.05fe3939.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{10947:(B,q,C)=>{C.d(q,{$:()=>y,B:()=>z,E:()=>l,H:()=>W,J:()=>p,N:()=>G,Q:()=>e,S:()=>Q,V:()=>s,Z:()=>A,b:()=>Z,bb:()=>U,c:()=>I,d:()=>V,f:()=>X,fb:()=>k,j:()=>D,jb:()=>u,l:()=>S,lb:()=>r,n:()=>P,r:()=>K,v:()=>a,z:()=>h});const v=function(B){const q=[];let C=0;for(let v=0;v<B.length;v++){let m=B.charCodeAt(v);m<128?q[C++]=m:m<2048?(q[C++]=m>>6|192,q[C++]=63&m|128):55296===(64512&m)&&v+1<B.length&&56320===(64512&B.charCodeAt(v+1))?(m=65536+((1023&m)<<10)+(1023&B.charCodeAt(++v)),q[C++]=m>>18|240,q[C++]=m>>12&63|128,q[C++]=m>>6&63|128,q[C++]=63&m|128):(q[C++]=m>>12|224,q[C++]=m>>6&63|128,q[C++]=63&m|128)}return q},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(B,q){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const C=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,v=[];for(let m=0;m<B.length;m+=3){const q=B[m],O=m+1<B.length,S=O?B[m+1]:0,D=m+2<B.length,R=D?B[m+2]:0,T=q>>2,l=(3&q)<<4|S>>4;let z=(15&S)<<2|R>>6,W=63&R;D||(W=64,O||(z=64)),v.push(C[T],C[l],C[z],C[W])}return v.join("")},encodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(B):this.encodeByteArray(v(B),q)},decodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(B):function(B){const q=[];let C=0,v=0;for(;C<B.length;){const m=B[C++];if(m<128)q[v++]=String.fromCharCode(m);else if(m>191&&m<224){const O=B[C++];q[v++]=String.fromCharCode((31&m)<<6|63&O)}else if(m>239&&m<365){const O=((7&m)<<18|(63&B[C++])<<12|(63&B[C++])<<6|63&B[C++])-65536;q[v++]=String.fromCharCode(55296+(O>>10)),q[v++]=String.fromCharCode(56320+(1023&O))}else{const O=B[C++],S=B[C++];q[v++]=String.fromCharCode((15&m)<<12|(63&O)<<6|63&S)}}return q.join("")}(this.decodeStringToByteArray(B,q))},decodeStringToByteArray(B,q){this.init_();const C=q?this.charToByteMapWebSafe_:this.charToByteMap_,v=[];for(let m=0;m<B.length;){const q=C[B.charAt(m++)],S=m<B.length?C[B.charAt(m)]:0;++m;const D=m<B.length?C[B.charAt(m)]:64;++m;const R=m<B.length?C[B.charAt(m)]:64;if(++m,null==q||null==S||null==D||null==R)throw new O;const T=q<<2|S>>4;if(v.push(T),64!==D){const B=S<<4&240|D>>2;if(v.push(B),64!==R){const B=D<<6&192|R;v.push(B)}}}return v},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}};class O extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const S=function(B){return function(B){const q=v(B);return m.encodeByteArray(q,!0)}(B).replace(/\./g,"")},D=function(B){try{return m.decodeString(B,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};const R=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof C.g)return C.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,T=()=>{try{return R()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(C){return}const q=B&&D(B[1]);return q&&JSON.parse(q)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},l=B=>{var q,C;return null===(C=null===(q=T())||void 0===q?void 0:q.emulatorHosts)||void 0===C?void 0:C[B]},z=()=>{var B;return null===(B=T())||void 0===B?void 0:B.config},W=B=>{var q;return null===(q=T())||void 0===q?void 0:q[`_${B}`]};class Z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((B,q)=>{this.resolve=B,this.reject=q}))}wrapCallback(B){return(q,C)=>{q?this.reject(q):this.resolve(C),"function"===typeof B&&(this.promise.catch((()=>{})),1===B.length?B(q):B(q,C))}}}function G(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(G())}function e(){const B="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof B&&void 0!==B.id}function U(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function s(){const B=G();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function A(){try{return"object"===typeof indexedDB}catch(B){return!1}}function r(){return new Promise(((B,q)=>{try{let C=!0;const v="validate-browser-context-for-indexeddb-analytics-module",m=self.indexedDB.open(v);m.onsuccess=()=>{m.result.close(),C||self.indexedDB.deleteDatabase(v),B(!0)},m.onupgradeneeded=()=>{C=!1},m.onerror=()=>{var B;q((null===(B=m.error)||void 0===B?void 0:B.message)||"")}}catch(C){q(C)}}))}function X(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class V extends Error{constructor(B,q,C){super(q),this.code=B,this.customData=C,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(B,q,C){this.service=B,this.serviceName=q,this.errors=C}create(B){const q=(arguments.length<=1?void 0:arguments[1])||{},C=`${this.service}/${B}`,v=this.errors[B],m=v?function(B,q){return B.replace(o,((B,C)=>{const v=q[C];return null!=v?String(v):`<${C}?>`}))}(v,q):"Error",O=`${this.serviceName}: ${m} (${C}).`;return new V(C,O,q)}}const o=/\{\$([^}]+)}/g;function Q(B){for(const q in B)if(Object.prototype.hasOwnProperty.call(B,q))return!1;return!0}function a(B,q){if(B===q)return!0;const C=Object.keys(B),v=Object.keys(q);for(const m of C){if(!v.includes(m))return!1;const C=B[m],O=q[m];if(i(C)&&i(O)){if(!a(C,O))return!1}else if(C!==O)return!1}for(const m of v)if(!C.includes(m))return!1;return!0}function i(B){return null!==B&&"object"===typeof B}function u(B){const q=[];for(const[C,v]of Object.entries(B))Array.isArray(v)?v.forEach((B=>{q.push(encodeURIComponent(C)+"="+encodeURIComponent(B))})):q.push(encodeURIComponent(C)+"="+encodeURIComponent(v));return q.length?"&"+q.join("&"):""}function k(B){const q={};return B.replace(/^\?/,"").split("&").forEach((B=>{if(B){const[C,v]=B.split("=");q[decodeURIComponent(C)]=decodeURIComponent(v)}})),q}function h(B){const q=B.indexOf("?");if(!q)return"";const C=B.indexOf("#",q);return B.substring(q,C>0?C:void 0)}function K(B,q){const C=new d(B,q);return C.subscribe.bind(C)}class d{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then((()=>{B(this)})).catch((B=>{this.error(B)}))}next(B){this.forEachObserver((q=>{q.next(B)}))}error(B){this.forEachObserver((q=>{q.error(B)})),this.close(B)}complete(){this.forEachObserver((B=>{B.complete()})),this.close()}subscribe(B,q,C){let v;if(void 0===B&&void 0===q&&void 0===C)throw new Error("Missing Observer.");v=function(B,q){if("object"!==typeof B||null===B)return!1;for(const C of q)if(C in B&&"function"===typeof B[C])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:C},void 0===v.next&&(v.next=g),void 0===v.error&&(v.error=g),void 0===v.complete&&(v.complete=g);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?v.error(this.finalError):v.complete()}catch(B){}})),this.observers.push(v),m}unsubscribeOne(B){void 0!==this.observers&&void 0!==this.observers[B]&&(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(C){"undefined"!==typeof console&&console.error&&console.error(C)}}))}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function g(){}const x=1e3,j=2,Y=144e5,J=.5;function P(B){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;const C=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:x)*Math.pow(q,B),v=Math.round(J*C*(Math.random()-.5)*2);return Math.min(Y,C+v)}function p(B){return B&&B._delegate?B._delegate:B}},10941:(B,q,C)=>{C.d(q,{b:()=>O.d,e:()=>zB,f:()=>H,i:()=>CB,l:()=>vB,m:()=>BB,q:()=>DB,t:()=>qB,v:()=>OB,w:()=>mB,z:()=>SB,D:()=>yB,L:()=>ZB,H:()=>GB,N:()=>WB,R:()=>UB,V:()=>eB,Y:()=>sB});var v=C(10944),m=C(10953),O=C(10947);let S,D;const R=new WeakMap,T=new WeakMap,l=new WeakMap,z=new WeakMap,W=new WeakMap;let Z={get(B,q,C){if(B instanceof IDBTransaction){if("done"===q)return T.get(B);if("objectStoreNames"===q)return B.objectStoreNames||l.get(B);if("store"===q)return C.objectStoreNames[1]?void 0:C.objectStore(C.objectStoreNames[0])}return e(B[q])},set:(B,q,C)=>(B[q]=C,!0),has:(B,q)=>B instanceof IDBTransaction&&("done"===q||"store"===q)||q in B};function G(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(B)?function(){for(var q=arguments.length,C=new Array(q),v=0;v<q;v++)C[v]=arguments[v];return B.apply(U(this),C),e(R.get(this))}:function(){for(var q=arguments.length,C=new Array(q),v=0;v<q;v++)C[v]=arguments[v];return e(B.apply(U(this),C))}:function(q){for(var C=arguments.length,v=new Array(C>1?C-1:0),m=1;m<C;m++)v[m-1]=arguments[m];const O=B.call(U(this),q,...v);return l.set(O,q.sort?q.sort():[q]),e(O)}}function y(B){return"function"===typeof B?G(B):(B instanceof IDBTransaction&&function(B){if(T.has(B))return;const q=new Promise(((q,C)=>{const v=()=>{B.removeEventListener("complete",m),B.removeEventListener("error",O),B.removeEventListener("abort",O)},m=()=>{q(),v()},O=()=>{C(B.error||new DOMException("AbortError","AbortError")),v()};B.addEventListener("complete",m),B.addEventListener("error",O),B.addEventListener("abort",O)}));T.set(B,q)}(B),q=B,(S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((B=>q instanceof B))?new Proxy(B,Z):B);var q}function e(B){if(B instanceof IDBRequest)return function(B){const q=new Promise(((q,C)=>{const v=()=>{B.removeEventListener("success",m),B.removeEventListener("error",O)},m=()=>{q(e(B.result)),v()},O=()=>{C(B.error),v()};B.addEventListener("success",m),B.addEventListener("error",O)}));return q.then((q=>{q instanceof IDBCursor&&R.set(q,B)})).catch((()=>{})),W.set(q,B),q}(B);if(z.has(B))return z.get(B);const q=y(B);return q!==B&&(z.set(B,q),W.set(q,B)),q}const U=B=>W.get(B);const s=["get","getKey","getAll","getAllKeys","count"],A=["put","add","delete","clear"],r=new Map;function X(B,q){if(!(B instanceof IDBDatabase)||q in B||"string"!==typeof q)return;if(r.get(q))return r.get(q);const C=q.replace(/FromIndex$/,""),v=q!==C,m=A.includes(C);if(!(C in(v?IDBIndex:IDBObjectStore).prototype)||!m&&!s.includes(C))return;const O=async function(B){const q=this.transaction(B,m?"readwrite":"readonly");let O=q.store;for(var S=arguments.length,D=new Array(S>1?S-1:0),R=1;R<S;R++)D[R-1]=arguments[R];return v&&(O=O.index(D.shift())),(await Promise.all([O[C](...D),m&&q.done]))[0]};return r.set(q,O),O}Z=(B=>({...B,get:(q,C,v)=>X(q,C)||B.get(q,C,v),has:(q,C)=>!!X(q,C)||B.has(q,C)}))(Z);class V{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map((B=>{if(function(B){const q=B.getComponent();return"VERSION"===(null===q||void 0===q?void 0:q.type)}(B)){const q=B.getImmediate();return`${q.library}/${q.version}`}return null})).filter((B=>B)).join(" ")}}const I="@firebase/app",o="0.9.13",Q=new m.f("@firebase/app"),a="@firebase/app-compat",i="@firebase/analytics-compat",u="@firebase/analytics",k="@firebase/app-check-compat",h="@firebase/app-check",K="@firebase/auth",d="@firebase/auth-compat",g="@firebase/database",x="@firebase/database-compat",j="@firebase/functions",Y="@firebase/functions-compat",J="@firebase/installations",P="@firebase/installations-compat",p="@firebase/messaging",w="@firebase/messaging-compat",t="@firebase/performance",c="@firebase/performance-compat",f="@firebase/remote-config",b="@firebase/remote-config-compat",L="@firebase/storage",E="@firebase/storage-compat",N="@firebase/firestore",n="@firebase/firestore-compat",F="firebase",H="[DEFAULT]",M={[I]:"fire-core",[a]:"fire-core-compat",[u]:"fire-analytics",[i]:"fire-analytics-compat",[h]:"fire-app-check",[k]:"fire-app-check-compat",[K]:"fire-auth",[d]:"fire-auth-compat",[g]:"fire-rtdb",[x]:"fire-rtdb-compat",[j]:"fire-fn",[Y]:"fire-fn-compat",[J]:"fire-iid",[P]:"fire-iid-compat",[p]:"fire-fcm",[w]:"fire-fcm-compat",[t]:"fire-perf",[c]:"fire-perf-compat",[f]:"fire-rc",[b]:"fire-rc-compat",[L]:"fire-gcs",[E]:"fire-gcs-compat",[N]:"fire-fst",[n]:"fire-fst-compat","fire-js":"fire-js",[F]:"fire-js-all"},BB=new Map,qB=new Map;function CB(B,q){try{B.container.Af(q)}catch(C){Q.debug(`Component ${q.name} failed to register with FirebaseApp ${B.name}`,C)}}function vB(B,q){B.container.addOrOverwriteComponent(q)}function mB(B){const q=B.name;if(qB.has(q))return Q.debug(`There were multiple attempts to register component ${q}.`),!1;qB.set(q,B);for(const C of BB.values())CB(C,B);return!0}function OB(B,q){const C=B.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),B.container.getProvider(q)}function SB(B,q){let C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H;OB(B,q).clearInstance(C)}function DB(){qB.clear()}const RB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},TB=new O.c("app","Firebase",RB);class lB{constructor(B,q,C){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=C,this.container.Af(new v.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw TB.create("app-deleted",{appName:this._name})}}const zB="9.23.0";function WB(B){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=B;if("object"!==typeof q){q={name:q}}const m=Object.assign({name:H,automaticDataCollectionEnabled:!1},q),S=m.name;if("string"!==typeof S||!S)throw TB.create("bad-app-name",{appName:String(S)});if(C||(C=(0,O.B)()),!C)throw TB.create("no-options");const D=BB.get(S);if(D){if((0,O.v)(C,D.options)&&(0,O.v)(m,D.config))return D;throw TB.create("duplicate-app",{appName:S})}const R=new v.c(S);for(const v of qB.values())R.Af(v);const T=new lB(C,m,R);return BB.set(S,T),T}function ZB(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H;const q=BB.get(B);if(!q&&B===H&&(0,O.B)())return WB();if(!q)throw TB.create("no-app",{appName:B});return q}function GB(){return Array.from(BB.values())}async function yB(B){const q=B.name;BB.has(q)&&(BB.delete(q),await Promise.all(B.container.getProviders().map((B=>B.delete()))),B.isDeleted=!0)}function eB(B,q,C){var m;let O=null!==(m=M[B])&&void 0!==m?m:B;C&&(O+=`-${C}`);const S=O.match(/\s|\//),D=q.match(/\s|\//);if(S||D){const B=[`Unable to register library "${O}" with version "${q}":`];return S&&B.push(`library name "${O}" contains illegal characters (whitespace or "/")`),S&&D&&B.push("and"),D&&B.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void Q.warn(B.join(" "))}mB(new v.e(`${O}-version`,(()=>({library:O,version:q})),"VERSION"))}function UB(B,q){if(null!==B&&"function"!==typeof B)throw TB.create("invalid-log-argument");(0,m.k)(B,q)}function sB(B){(0,m.j)(B)}const AB="firebase-heartbeat-store";let rB=null;function XB(){return rB||(rB=function(B,q){let{blocked:C,upgrade:v,blocking:m,terminated:O}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const S=indexedDB.open(B,q),D=e(S);return v&&S.addEventListener("upgradeneeded",(B=>{v(e(S.result),B.oldVersion,B.newVersion,e(S.transaction),B)})),C&&S.addEventListener("blocked",(B=>C(B.oldVersion,B.newVersion,B))),D.then((B=>{O&&B.addEventListener("close",(()=>O())),m&&B.addEventListener("versionchange",(B=>m(B.oldVersion,B.newVersion,B)))})).catch((()=>{})),D}("firebase-heartbeat-database",1,{upgrade:(B,q)=>{if(0===q)B.createObjectStore(AB)}}).catch((B=>{throw TB.create("idb-open",{originalErrorMessage:B.message})}))),rB}async function VB(B,q){try{const C=(await XB()).transaction(AB,"readwrite"),v=C.objectStore(AB);await v.put(q,IB(B)),await C.done}catch(C){if(C instanceof O.d)Q.warn(C.message);else{const B=TB.create("idb-set",{originalErrorMessage:null===C||void 0===C?void 0:C.message});Q.warn(B.message)}}}function IB(B){return`${B.name}!${B.options.appId}`}class oB{constructor(B){this.container=B,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this.Li=new aB(q),this._heartbeatsCachePromise=this.Li.read().then((B=>(this._heartbeatsCache=B,B)))}async triggerHeartbeat(){const B=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),q=QB();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==q&&!this._heartbeatsCache.heartbeats.some((B=>B.date===q)))return this._heartbeatsCache.heartbeats.push({date:q,agent:B}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((B=>{const q=new Date(B.date).valueOf();return Date.now()-q<=2592e6})),this.Li.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const B=QB(),{heartbeatsToSend:q,unsentEntries:C}=function(B){let q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const C=[];let v=B.slice();for(const m of B){const B=C.find((B=>B.agent===m.agent));if(B){if(B.dates.push(m.date),iB(C)>q){B.dates.pop();break}}else if(C.push({agent:m.agent,dates:[m.date]}),iB(C)>q){C.pop();break}v=v.slice(1)}return{heartbeatsToSend:C,unsentEntries:v}}(this._heartbeatsCache.heartbeats),v=(0,O.l)(JSON.stringify({version:2,heartbeats:q}));return this._heartbeatsCache.lastSentHeartbeatDate=B,C.length>0?(this._heartbeatsCache.heartbeats=C,await this.Li.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Li.overwrite(this._heartbeatsCache)),v}}function QB(){return(new Date).toISOString().substring(0,10)}class aB{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,O.Z)()&&(0,O.lb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(B){try{const q=await XB();return await q.transaction(AB).objectStore(AB).get(IB(B))}catch(q){if(q instanceof O.d)Q.warn(q.message);else{const B=TB.create("idb-get",{originalErrorMessage:null===q||void 0===q?void 0:q.message});Q.warn(B.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(B){var q;if(await this._canUseIndexedDBPromise){const C=await this.read();return VB(this.app,{lastSentHeartbeatDate:null!==(q=B.lastSentHeartbeatDate)&&void 0!==q?q:C.lastSentHeartbeatDate,heartbeats:B.heartbeats})}}async add(B){var q;if(await this._canUseIndexedDBPromise){const C=await this.read();return VB(this.app,{lastSentHeartbeatDate:null!==(q=B.lastSentHeartbeatDate)&&void 0!==q?q:C.lastSentHeartbeatDate,heartbeats:[...C.heartbeats,...B.heartbeats]})}}}function iB(B){return(0,O.l)(JSON.stringify({version:2,heartbeats:B})).length}var uB;uB="",mB(new v.e("platform-logger",(B=>new V(B)),"PRIVATE")),mB(new v.e("heartbeat",(B=>new oB(B)),"PRIVATE")),eB(I,o,uB),eB(I,o,"esm2017"),eB("fire-js","")},10944:(B,q,C)=>{C.d(q,{c:()=>D,e:()=>m});var v=C(10947);class m{constructor(B,q,C){this.name=B,this.instanceFactory=q,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const O="[DEFAULT]";class S{constructor(B,q){this.name=B,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const q=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(q)){const B=new v.b;if(this.instancesDeferred.set(q,B),this.isInitialized(q)||this.shouldAutoInitialize())try{const C=this.getOrInitializeService({instanceIdentifier:q});C&&B.resolve(C)}catch(C){}}return this.instancesDeferred.get(q).promise}getImmediate(B){var q;const C=this.normalizeInstanceIdentifier(null===B||void 0===B?void 0:B.identifier),v=null!==(q=null===B||void 0===B?void 0:B.optional)&&void 0!==q&&q;if(!this.isInitialized(C)&&!this.shouldAutoInitialize()){if(v)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:C})}catch(m){if(v)return null;throw m}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function(B){return"EAGER"===B.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:O})}catch(q){}for(const[B,C]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(B);try{const B=this.getOrInitializeService({instanceIdentifier:v});C.resolve(B)}catch(q){}}}}clearInstance(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}async delete(){const B=Array.from(this.instances.values());await Promise.all([...B.filter((B=>"INTERNAL"in B)).map((B=>B.INTERNAL.delete())),...B.filter((B=>"_delete"in B)).map((B=>B._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instances.has(B)}getOptions(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instancesOptions.get(B)||{}}initialize(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:q={}}=B,C=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const v=this.getOrInitializeService({instanceIdentifier:C,options:q});for(const[m,O]of this.instancesDeferred.entries()){C===this.normalizeInstanceIdentifier(m)&&O.resolve(v)}return v}ri(B,q){var C;const v=this.normalizeInstanceIdentifier(q),m=null!==(C=this.onInitCallbacks.get(v))&&void 0!==C?C:new Set;m.add(B),this.onInitCallbacks.set(v,m);const O=this.instances.get(v);return O&&B(O,v),()=>{m.delete(B)}}invokeOnInitCallbacks(B,q){const C=this.onInitCallbacks.get(q);if(C)for(const m of C)try{m(B,q)}catch(v){}}getOrInitializeService(B){let{instanceIdentifier:q,options:C={}}=B,v=this.instances.get(q);if(!v&&this.component&&(v=this.component.instanceFactory(this.container,{instanceIdentifier:(m=q,m===O?void 0:m),options:C}),this.instances.set(q,v),this.instancesOptions.set(q,C),this.invokeOnInitCallbacks(v,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,v)}catch(S){}var m;return v||null}normalizeInstanceIdentifier(){let B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.component?this.component.multipleInstances?B:O:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class D{constructor(B){this.name=B,this.providers=new Map}Af(B){const q=this.getProvider(B.name);if(q.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);q.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.Af(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const q=new S(B,this);return this.providers.set(B,q),q}getProviders(){return Array.from(this.providers.values())}}},10953:(B,q,C)=>{C.d(q,{e:()=>m,f:()=>T,j:()=>l,k:()=>z});const v=[];var m;!function(B){B[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT"}(m||(m={}));const O={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},S=m.INFO,D={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},R=function(B,q){if(q<B.logLevel)return;const C=(new Date).toISOString(),v=D[q];if(!v)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);for(var m=arguments.length,O=new Array(m>2?m-2:0),S=2;S<m;S++)O[S-2]=arguments[S];console[v](`[${C}]  ${B.name}:`,...O)};class T{constructor(B){this.name=B,this._logLevel=S,this._logHandler=R,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in m))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"===typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!==typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(){for(var B=arguments.length,q=new Array(B),C=0;C<B;C++)q[C]=arguments[C];this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...q),this._logHandler(this,m.DEBUG,...q)}log(){for(var B=arguments.length,q=new Array(B),C=0;C<B;C++)q[C]=arguments[C];this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...q),this._logHandler(this,m.VERBOSE,...q)}info(){for(var B=arguments.length,q=new Array(B),C=0;C<B;C++)q[C]=arguments[C];this._userLogHandler&&this._userLogHandler(this,m.INFO,...q),this._logHandler(this,m.INFO,...q)}warn(){for(var B=arguments.length,q=new Array(B),C=0;C<B;C++)q[C]=arguments[C];this._userLogHandler&&this._userLogHandler(this,m.WARN,...q),this._logHandler(this,m.WARN,...q)}error(){for(var B=arguments.length,q=new Array(B),C=0;C<B;C++)q[C]=arguments[C];this._userLogHandler&&this._userLogHandler(this,m.ERROR,...q),this._logHandler(this,m.ERROR,...q)}}function l(B){v.forEach((q=>{q.setLogLevel(B)}))}function z(B,q){for(const C of v){let v=null;q&&q.level&&(v=O[q.level]),C.userLogHandler=null===B?null:function(q,C){for(var O=arguments.length,S=new Array(O>2?O-2:0),D=2;D<O;D++)S[D-2]=arguments[D];const R=S.map((B=>{if(null==B)return null;if("string"===typeof B)return B;if("number"===typeof B||"boolean"===typeof B)return B.toString();if(B instanceof Error)return B.message;try{return JSON.stringify(B)}catch(q){return null}})).filter((B=>B)).join(" ");C>=(null!==v&&void 0!==v?v:q.logLevel)&&B({level:m[C].toLowerCase(),message:R,args:S,type:q.name})}}}}}]);