/*! For license information please see 45ed7d.37.2898bad3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11470:(j,S,h)=>{h.d(S,{A:()=>O,C:()=>M,F:()=>p,I:()=>J,K:()=>w,O:()=>P,P:()=>k,Q:()=>o,U:()=>R,Y:()=>l,_:()=>v,c:()=>e,cb:()=>b,db:()=>D,f:()=>x,gb:()=>i,h:()=>u,k:()=>N,m:()=>f,o:()=>U,q:()=>B,t:()=>s,u:()=>q,w:()=>n});const m=function(j){const S=[];let h=0;for(let m=0;m<j.length;m++){let I=j.charCodeAt(m);I<128?S[h++]=I:I<2048?(S[h++]=I>>6|192,S[h++]=63&I|128):55296===(64512&I)&&m+1<j.length&&56320===(64512&j.charCodeAt(m+1))?(I=65536+((1023&I)<<10)+(1023&j.charCodeAt(++m)),S[h++]=I>>18|240,S[h++]=I>>12&63|128,S[h++]=I>>6&63|128,S[h++]=63&I|128):(S[h++]=I>>12|224,S[h++]=I>>6&63|128,S[h++]=63&I|128)}return S},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(j,S){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const h=S?this.byteToCharMapWebSafe_:this.byteToCharMap_,m=[];for(let I=0;I<j.length;I+=3){const S=j[I],d=I+1<j.length,U=d?j[I+1]:0,f=I+2<j.length,r=f?j[I+2]:0,a=S>>2,M=(3&S)<<4|U>>4;let O=(15&U)<<2|r>>6,p=63&r;f||(p=64,d||(O=64)),m.push(h[a],h[M],h[O],h[p])}return m.join("")},encodeString(j,S){return this.HAS_NATIVE_SUPPORT&&!S?btoa(j):this.encodeByteArray(m(j),S)},decodeString(j,S){return this.HAS_NATIVE_SUPPORT&&!S?atob(j):function(j){const S=[];let h=0,m=0;for(;h<j.length;){const I=j[h++];if(I<128)S[m++]=String.fromCharCode(I);else if(I>191&&I<224){const d=j[h++];S[m++]=String.fromCharCode((31&I)<<6|63&d)}else if(I>239&&I<365){const d=((7&I)<<18|(63&j[h++])<<12|(63&j[h++])<<6|63&j[h++])-65536;S[m++]=String.fromCharCode(55296+(d>>10)),S[m++]=String.fromCharCode(56320+(1023&d))}else{const d=j[h++],U=j[h++];S[m++]=String.fromCharCode((15&I)<<12|(63&d)<<6|63&U)}}return S.join("")}(this.decodeStringToByteArray(j,S))},decodeStringToByteArray(j,S){this.init_();const h=S?this.charToByteMapWebSafe_:this.charToByteMap_,m=[];for(let I=0;I<j.length;){const S=h[j.charAt(I++)],U=I<j.length?h[j.charAt(I)]:0;++I;const f=I<j.length?h[j.charAt(I)]:64;++I;const r=I<j.length?h[j.charAt(I)]:64;if(++I,null==S||null==U||null==f||null==r)throw new d;const a=S<<2|U>>4;if(m.push(a),64!==f){const j=U<<4&240|f>>2;if(m.push(j),64!==r){const j=f<<6&192|r;m.push(j)}}}return m},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class d extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U=function(j){return function(j){const S=m(j);return I.encodeByteArray(S,!0)}(j).replace(/\./g,"")},f=function(j){try{return I.decodeString(j,!0)}catch(S){console.error("base64Decode failed: ",S)}return null};const r=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof h.g)return h.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,a=()=>{try{return r()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(h){return}const S=j&&f(j[1]);return S&&JSON.parse(S)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},M=j=>{var S,h;return null===(h=null===(S=a())||void 0===S?void 0:S.emulatorHosts)||void 0===h?void 0:h[j]},O=()=>{var j;return null===(j=a())||void 0===j?void 0:j.config},p=j=>{var S;return null===(S=a())||void 0===S?void 0:S[`_${j}`]};class e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((j,S)=>{this.resolve=j,this.reject=S}))}wrapCallback(j){return(S,h)=>{S?this.reject(S):this.resolve(h),"function"===typeof j&&(this.promise.catch((()=>{})),1===j.length?j(S):j(S,h))}}}function w(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function P(){const j="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof j&&void 0!==j.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function o(){const j=w();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function R(){try{return"object"===typeof indexedDB}catch(j){return!1}}function i(){return new Promise(((j,S)=>{try{let h=!0;const m="validate-browser-context-for-indexeddb-analytics-module",I=self.indexedDB.open(m);I.onsuccess=()=>{I.result.close(),h||self.indexedDB.deleteDatabase(m),j(!0)},I.onupgradeneeded=()=>{h=!1},I.onerror=()=>{var j;S((null===(j=I.error)||void 0===j?void 0:j.message)||"")}}catch(h){S(h)}}))}function N(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class u extends Error{constructor(j,S,h){super(S),this.code=j,this.customData=h,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(j,S,h){this.service=j,this.serviceName=S,this.errors=h}create(j){const S=(arguments.length<=1?void 0:arguments[1])||{},h=`${this.service}/${j}`,m=this.errors[j],I=m?function(j,S){return j.replace(K,((j,h)=>{const m=S[h];return null!=m?String(m):`<${h}?>`}))}(m,S):"Error",d=`${this.serviceName}: ${I} (${h}).`;return new u(h,d,S)}}const K=/\{\$([^}]+)}/g;function k(j){for(const S in j)if(Object.prototype.hasOwnProperty.call(j,S))return!1;return!0}function q(j,S){if(j===S)return!0;const h=Object.keys(j),m=Object.keys(S);for(const I of h){if(!m.includes(I))return!1;const h=j[I],d=S[I];if(g(h)&&g(d)){if(!q(h,d))return!1}else if(h!==d)return!1}for(const I of m)if(!h.includes(I))return!1;return!0}function g(j){return null!==j&&"object"===typeof j}function D(j){const S=[];for(const[h,m]of Object.entries(j))Array.isArray(m)?m.forEach((j=>{S.push(encodeURIComponent(h)+"="+encodeURIComponent(j))})):S.push(encodeURIComponent(h)+"="+encodeURIComponent(m));return S.length?"&"+S.join("&"):""}function b(j){const S={};return j.replace(/^\?/,"").split("&").forEach((j=>{if(j){const[h,m]=j.split("=");S[decodeURIComponent(h)]=decodeURIComponent(m)}})),S}function n(j){const S=j.indexOf("?");if(!S)return"";const h=j.indexOf("#",S);return j.substring(S,h>0?h:void 0)}function s(j,S){const h=new Z(j,S);return h.subscribe.bind(h)}class Z{constructor(j,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then((()=>{j(this)})).catch((j=>{this.error(j)}))}next(j){this.forEachObserver((S=>{S.next(j)}))}error(j){this.forEachObserver((S=>{S.error(j)})),this.close(j)}complete(){this.forEachObserver((j=>{j.complete()})),this.close()}subscribe(j,S,h){let m;if(void 0===j&&void 0===S&&void 0===h)throw new Error("Missing Observer.");m=function(j,S){if("object"!==typeof j||null===j)return!1;for(const h of S)if(h in j&&"function"===typeof j[h])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:S,complete:h},void 0===m.next&&(m.next=X),void 0===m.error&&(m.error=X),void 0===m.complete&&(m.complete=X);const I=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?m.error(this.finalError):m.complete()}catch(j){}})),this.observers.push(m),I}unsubscribeOne(j){void 0!==this.observers&&void 0!==this.observers[j]&&(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,j)}sendOne(j,S){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{S(this.observers[j])}catch(h){"undefined"!==typeof console&&console.error&&console.error(h)}}))}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function X(){}const C=1e3,E=2,G=144e5,c=.5;function B(j){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const h=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:C)*Math.pow(S,j),m=Math.round(c*h*(Math.random()-.5)*2);return Math.min(G,h+m)}function J(j){return j&&j._delegate?j._delegate:j}},11457:(j,S,h)=>{h.d(S,{d:()=>d.h,g:()=>Oj,k:()=>t,m:()=>hj,o:()=>mj,p:()=>jj,t:()=>fj,v:()=>Sj,w:()=>dj,y:()=>Ij,A:()=>Uj,B:()=>lj,F:()=>ej,C:()=>wj,I:()=>pj,M:()=>vj,P:()=>Pj,R:()=>oj});var m=h(11462),I=h(11477),d=h(11470);let U,f;const r=new WeakMap,a=new WeakMap,M=new WeakMap,O=new WeakMap,p=new WeakMap;let e={get(j,S,h){if(j instanceof IDBTransaction){if("done"===S)return a.get(j);if("objectStoreNames"===S)return j.objectStoreNames||M.get(j);if("store"===S)return h.objectStoreNames[1]?void 0:h.objectStore(h.objectStoreNames[0])}return P(j[S])},set:(j,S,h)=>(j[S]=h,!0),has:(j,S)=>j instanceof IDBTransaction&&("done"===S||"store"===S)||S in j};function w(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f||(f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(j)?function(){for(var S=arguments.length,h=new Array(S),m=0;m<S;m++)h[m]=arguments[m];return j.apply(v(this),h),P(r.get(this))}:function(){for(var S=arguments.length,h=new Array(S),m=0;m<S;m++)h[m]=arguments[m];return P(j.apply(v(this),h))}:function(S){for(var h=arguments.length,m=new Array(h>1?h-1:0),I=1;I<h;I++)m[I-1]=arguments[I];const d=j.call(v(this),S,...m);return M.set(d,S.sort?S.sort():[S]),P(d)}}function l(j){return"function"===typeof j?w(j):(j instanceof IDBTransaction&&function(j){if(a.has(j))return;const S=new Promise(((S,h)=>{const m=()=>{j.removeEventListener("complete",I),j.removeEventListener("error",d),j.removeEventListener("abort",d)},I=()=>{S(),m()},d=()=>{h(j.error||new DOMException("AbortError","AbortError")),m()};j.addEventListener("complete",I),j.addEventListener("error",d),j.addEventListener("abort",d)}));a.set(j,S)}(j),S=j,(U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((j=>S instanceof j))?new Proxy(j,e):j);var S}function P(j){if(j instanceof IDBRequest)return function(j){const S=new Promise(((S,h)=>{const m=()=>{j.removeEventListener("success",I),j.removeEventListener("error",d)},I=()=>{S(P(j.result)),m()},d=()=>{h(j.error),m()};j.addEventListener("success",I),j.addEventListener("error",d)}));return S.then((S=>{S instanceof IDBCursor&&r.set(S,j)})).catch((()=>{})),p.set(S,j),S}(j);if(O.has(j))return O.get(j);const S=l(j);return S!==j&&(O.set(j,S),p.set(S,j)),S}const v=j=>p.get(j);const o=["get","getKey","getAll","getAllKeys","count"],R=["put","add","delete","clear"],i=new Map;function N(j,S){if(!(j instanceof IDBDatabase)||S in j||"string"!==typeof S)return;if(i.get(S))return i.get(S);const h=S.replace(/FromIndex$/,""),m=S!==h,I=R.includes(h);if(!(h in(m?IDBIndex:IDBObjectStore).prototype)||!I&&!o.includes(h))return;const d=async function(j){const S=this.transaction(j,I?"readwrite":"readonly");let d=S.store;for(var U=arguments.length,f=new Array(U>1?U-1:0),r=1;r<U;r++)f[r-1]=arguments[r];return m&&(d=d.index(f.shift())),(await Promise.all([d[h](...f),I&&S.done]))[0]};return i.set(S,d),d}e=(j=>({...j,get:(S,h,m)=>N(S,h)||j.get(S,h,m),has:(S,h)=>!!N(S,h)||j.has(S,h)}))(e);class u{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map((j=>{if(function(j){const S=j.getComponent();return"VERSION"===(null===S||void 0===S?void 0:S.type)}(j)){const S=j.getImmediate();return`${S.library}/${S.version}`}return null})).filter((j=>j)).join(" ")}}const x="@firebase/app",K="0.9.13",k=new I.e("@firebase/app"),q="@firebase/app-compat",g="@firebase/analytics-compat",D="@firebase/analytics",b="@firebase/app-check-compat",n="@firebase/app-check",s="@firebase/auth",Z="@firebase/auth-compat",X="@firebase/database",C="@firebase/database-compat",E="@firebase/functions",G="@firebase/functions-compat",c="@firebase/installations",B="@firebase/installations-compat",J="@firebase/messaging",H="@firebase/messaging-compat",T="@firebase/performance",Q="@firebase/performance-compat",Y="@firebase/remote-config",F="@firebase/remote-config-compat",L="@firebase/storage",y="@firebase/storage-compat",A="@firebase/firestore",W="@firebase/firestore-compat",V="firebase",t="[DEFAULT]",z={[x]:"fire-core",[q]:"fire-core-compat",[D]:"fire-analytics",[g]:"fire-analytics-compat",[n]:"fire-app-check",[b]:"fire-app-check-compat",[s]:"fire-auth",[Z]:"fire-auth-compat",[X]:"fire-rtdb",[C]:"fire-rtdb-compat",[E]:"fire-fn",[G]:"fire-fn-compat",[c]:"fire-iid",[B]:"fire-iid-compat",[J]:"fire-fcm",[H]:"fire-fcm-compat",[T]:"fire-perf",[Q]:"fire-perf-compat",[Y]:"fire-rc",[F]:"fire-rc-compat",[L]:"fire-gcs",[y]:"fire-gcs-compat",[A]:"fire-fst",[W]:"fire-fst-compat","fire-js":"fire-js",[V]:"fire-js-all"},jj=new Map,Sj=new Map;function hj(j,S){try{j.container.qf(S)}catch(h){k.debug(`Component ${S.name} failed to register with FirebaseApp ${j.name}`,h)}}function mj(j,S){j.container.addOrOverwriteComponent(S)}function Ij(j){const S=j.name;if(Sj.has(S))return k.debug(`There were multiple attempts to register component ${S}.`),!1;Sj.set(S,j);for(const h of jj.values())hj(h,j);return!0}function dj(j,S){const h=j.container.getProvider("heartbeat").getImmediate({optional:!0});return h&&h.triggerHeartbeat(),j.container.getProvider(S)}function Uj(j,S){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;dj(j,S).clearInstance(h)}function fj(){Sj.clear()}const rj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},aj=new d.f("app","Firebase",rj);class Mj{constructor(j,S,h){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},S),this._name=S.name,this._automaticDataCollectionEnabled=S.automaticDataCollectionEnabled,this._container=h,this.container.qf(new m.c("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw aj.create("app-deleted",{appName:this._name})}}const Oj="9.23.0";function pj(j){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=j;if("object"!==typeof S){S={name:S}}const I=Object.assign({name:t,automaticDataCollectionEnabled:!1},S),U=I.name;if("string"!==typeof U||!U)throw aj.create("bad-app-name",{appName:String(U)});if(h||(h=(0,d.A)()),!h)throw aj.create("no-options");const f=jj.get(U);if(f){if((0,d.u)(h,f.options)&&(0,d.u)(I,f.config))return f;throw aj.create("duplicate-app",{appName:U})}const r=new m.b(U);for(const m of Sj.values())r.qf(m);const a=new Mj(h,I,r);return jj.set(U,a),a}function ej(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;const S=jj.get(j);if(!S&&j===t&&(0,d.A)())return pj();if(!S)throw aj.create("no-app",{appName:j});return S}function wj(){return Array.from(jj.values())}async function lj(j){const S=j.name;jj.has(S)&&(jj.delete(S),await Promise.all(j.container.getProviders().map((j=>j.delete()))),j.isDeleted=!0)}function Pj(j,S,h){var I;let d=null!==(I=z[j])&&void 0!==I?I:j;h&&(d+=`-${h}`);const U=d.match(/\s|\//),f=S.match(/\s|\//);if(U||f){const j=[`Unable to register library "${d}" with version "${S}":`];return U&&j.push(`library name "${d}" contains illegal characters (whitespace or "/")`),U&&f&&j.push("and"),f&&j.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void k.warn(j.join(" "))}Ij(new m.c(`${d}-version`,(()=>({library:d,version:S})),"VERSION"))}function vj(j,S){if(null!==j&&"function"!==typeof j)throw aj.create("invalid-log-argument");(0,I.i)(j,S)}function oj(j){(0,I.h)(j)}const Rj="firebase-heartbeat-store";let ij=null;function Nj(){return ij||(ij=function(j,S){let{blocked:h,upgrade:m,blocking:I,terminated:d}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const U=indexedDB.open(j,S),f=P(U);return m&&U.addEventListener("upgradeneeded",(j=>{m(P(U.result),j.oldVersion,j.newVersion,P(U.transaction),j)})),h&&U.addEventListener("blocked",(j=>h(j.oldVersion,j.newVersion,j))),f.then((j=>{d&&j.addEventListener("close",(()=>d())),I&&j.addEventListener("versionchange",(j=>I(j.oldVersion,j.newVersion,j)))})).catch((()=>{})),f}("firebase-heartbeat-database",1,{upgrade:(j,S)=>{if(0===S)j.createObjectStore(Rj)}}).catch((j=>{throw aj.create("idb-open",{originalErrorMessage:j.message})}))),ij}async function uj(j,S){try{const h=(await Nj()).transaction(Rj,"readwrite"),m=h.objectStore(Rj);await m.put(S,xj(j)),await h.done}catch(h){if(h instanceof d.h)k.warn(h.message);else{const j=aj.create("idb-set",{originalErrorMessage:null===h||void 0===h?void 0:h.message});k.warn(j.message)}}}function xj(j){return`${j.name}!${j.options.appId}`}class Kj{constructor(j){this.container=j,this._heartbeatsCache=null;const S=this.container.getProvider("app").getImmediate();this.Ti=new qj(S),this._heartbeatsCachePromise=this.Ti.read().then((j=>(this._heartbeatsCache=j,j)))}async triggerHeartbeat(){const j=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),S=kj();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==S&&!this._heartbeatsCache.heartbeats.some((j=>j.date===S)))return this._heartbeatsCache.heartbeats.push({date:S,agent:j}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((j=>{const S=new Date(j.date).valueOf();return Date.now()-S<=2592e6})),this.Ti.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const j=kj(),{heartbeatsToSend:S,unsentEntries:h}=function(j){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const h=[];let m=j.slice();for(const I of j){const j=h.find((j=>j.agent===I.agent));if(j){if(j.dates.push(I.date),gj(h)>S){j.dates.pop();break}}else if(h.push({agent:I.agent,dates:[I.date]}),gj(h)>S){h.pop();break}m=m.slice(1)}return{heartbeatsToSend:h,unsentEntries:m}}(this._heartbeatsCache.heartbeats),m=(0,d.o)(JSON.stringify({version:2,heartbeats:S}));return this._heartbeatsCache.lastSentHeartbeatDate=j,h.length>0?(this._heartbeatsCache.heartbeats=h,await this.Ti.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ti.overwrite(this._heartbeatsCache)),m}}function kj(){return(new Date).toISOString().substring(0,10)}class qj{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,d.U)()&&(0,d.gb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(j){try{const S=await Nj();return await S.transaction(Rj).objectStore(Rj).get(xj(j))}catch(S){if(S instanceof d.h)k.warn(S.message);else{const j=aj.create("idb-get",{originalErrorMessage:null===S||void 0===S?void 0:S.message});k.warn(j.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(j){var S;if(await this._canUseIndexedDBPromise){const h=await this.read();return uj(this.app,{lastSentHeartbeatDate:null!==(S=j.lastSentHeartbeatDate)&&void 0!==S?S:h.lastSentHeartbeatDate,heartbeats:j.heartbeats})}}async add(j){var S;if(await this._canUseIndexedDBPromise){const h=await this.read();return uj(this.app,{lastSentHeartbeatDate:null!==(S=j.lastSentHeartbeatDate)&&void 0!==S?S:h.lastSentHeartbeatDate,heartbeats:[...h.heartbeats,...j.heartbeats]})}}}function gj(j){return(0,d.o)(JSON.stringify({version:2,heartbeats:j})).length}var Dj;Dj="",Ij(new m.c("platform-logger",(j=>new u(j)),"PRIVATE")),Ij(new m.c("heartbeat",(j=>new Kj(j)),"PRIVATE")),Pj(x,K,Dj),Pj(x,K,"esm2017"),Pj("fire-js","")},11462:(j,S,h)=>{h.d(S,{b:()=>f,c:()=>I});var m=h(11470);class I{constructor(j,S,h){this.name=j,this.instanceFactory=S,this.type=h,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const d="[DEFAULT]";class U{constructor(j,S){this.name=j,this.container=S,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const S=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(S)){const j=new m.c;if(this.instancesDeferred.set(S,j),this.isInitialized(S)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:S});h&&j.resolve(h)}catch(h){}}return this.instancesDeferred.get(S).promise}getImmediate(j){var S;const h=this.normalizeInstanceIdentifier(null===j||void 0===j?void 0:j.identifier),m=null!==(S=null===j||void 0===j?void 0:j.optional)&&void 0!==S&&S;if(!this.isInitialized(h)&&!this.shouldAutoInitialize()){if(m)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:h})}catch(I){if(m)return null;throw I}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function(j){return"EAGER"===j.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:d})}catch(S){}for(const[j,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(j);try{const j=this.getOrInitializeService({instanceIdentifier:m});h.resolve(j)}catch(S){}}}}clearInstance(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}async delete(){const j=Array.from(this.instances.values());await Promise.all([...j.filter((j=>"INTERNAL"in j)).map((j=>j.INTERNAL.delete())),...j.filter((j=>"_delete"in j)).map((j=>j._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instances.has(j)}getOptions(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instancesOptions.get(j)||{}}initialize(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:S={}}=j,h=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(h))throw Error(`${this.name}(${h}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const m=this.getOrInitializeService({instanceIdentifier:h,options:S});for(const[I,d]of this.instancesDeferred.entries()){h===this.normalizeInstanceIdentifier(I)&&d.resolve(m)}return m}Ai(j,S){var h;const m=this.normalizeInstanceIdentifier(S),I=null!==(h=this.onInitCallbacks.get(m))&&void 0!==h?h:new Set;I.add(j),this.onInitCallbacks.set(m,I);const d=this.instances.get(m);return d&&j(d,m),()=>{I.delete(j)}}invokeOnInitCallbacks(j,S){const h=this.onInitCallbacks.get(S);if(h)for(const I of h)try{I(j,S)}catch(m){}}getOrInitializeService(j){let{instanceIdentifier:S,options:h={}}=j,m=this.instances.get(S);if(!m&&this.component&&(m=this.component.instanceFactory(this.container,{instanceIdentifier:(I=S,I===d?void 0:I),options:h}),this.instances.set(S,m),this.instancesOptions.set(S,h),this.invokeOnInitCallbacks(m,S),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,S,m)}catch(U){}var I;return m||null}normalizeInstanceIdentifier(){let j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.component?this.component.multipleInstances?j:d:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class f{constructor(j){this.name=j,this.providers=new Map}qf(j){const S=this.getProvider(j.name);if(S.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);S.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.qf(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const S=new U(j,this);return this.providers.set(j,S),S}getProviders(){return Array.from(this.providers.values())}}},11477:(j,S,h)=>{h.d(S,{c:()=>I,e:()=>a,h:()=>M,i:()=>O});const m=[];var I;!function(j){j[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT"}(I||(I={}));const d={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},U=I.INFO,f={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},r=function(j,S){if(S<j.logLevel)return;const h=(new Date).toISOString(),m=f[S];if(!m)throw new Error(`Attempted to log a message with an invalid logType (value: ${S})`);for(var I=arguments.length,d=new Array(I>2?I-2:0),U=2;U<I;U++)d[U-2]=arguments[U];console[m](`[${h}]  ${j.name}:`,...d)};class a{constructor(j){this.name=j,this._logLevel=U,this._logHandler=r,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in I))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"===typeof j?d[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!==typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(){for(var j=arguments.length,S=new Array(j),h=0;h<j;h++)S[h]=arguments[h];this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...S),this._logHandler(this,I.DEBUG,...S)}log(){for(var j=arguments.length,S=new Array(j),h=0;h<j;h++)S[h]=arguments[h];this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...S),this._logHandler(this,I.VERBOSE,...S)}info(){for(var j=arguments.length,S=new Array(j),h=0;h<j;h++)S[h]=arguments[h];this._userLogHandler&&this._userLogHandler(this,I.INFO,...S),this._logHandler(this,I.INFO,...S)}warn(){for(var j=arguments.length,S=new Array(j),h=0;h<j;h++)S[h]=arguments[h];this._userLogHandler&&this._userLogHandler(this,I.WARN,...S),this._logHandler(this,I.WARN,...S)}error(){for(var j=arguments.length,S=new Array(j),h=0;h<j;h++)S[h]=arguments[h];this._userLogHandler&&this._userLogHandler(this,I.ERROR,...S),this._logHandler(this,I.ERROR,...S)}}function M(j){m.forEach((S=>{S.setLogLevel(j)}))}function O(j,S){for(const h of m){let m=null;S&&S.level&&(m=d[S.level]),h.userLogHandler=null===j?null:function(S,h){for(var d=arguments.length,U=new Array(d>2?d-2:0),f=2;f<d;f++)U[f-2]=arguments[f];const r=U.map((j=>{if(null==j)return null;if("string"===typeof j)return j;if("number"===typeof j||"boolean"===typeof j)return j.toString();if(j instanceof Error)return j.message;try{return JSON.stringify(j)}catch(S){return null}})).filter((j=>j)).join(" ");h>=(null!==m&&void 0!==m?m:S.logLevel)&&j({level:I[h].toLowerCase(),message:r,args:U,type:S.name})}}}}}]);