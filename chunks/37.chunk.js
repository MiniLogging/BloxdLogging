/*! For license information please see y2yh1e.37.2bf8ddbb.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11608:(v,T,X)=>{X.d(T,{A:()=>y,E:()=>H,I:()=>M,K:()=>n,M:()=>d,N:()=>D,O:()=>F,R:()=>r,S:()=>b,V:()=>l,Z:()=>s,b:()=>V,bb:()=>k,cb:()=>J,d:()=>G,f:()=>p,fb:()=>U,h:()=>K,hb:()=>Q,k:()=>A,o:()=>m,s:()=>N,w:()=>P,z:()=>o});const O=function(v){const T=[];let X=0;for(let O=0;O<v.length;O++){let u=v.charCodeAt(O);u<128?T[X++]=u:u<2048?(T[X++]=u>>6|192,T[X++]=63&u|128):55296===(64512&u)&&O+1<v.length&&56320===(64512&v.charCodeAt(O+1))?(u=65536+((1023&u)<<10)+(1023&v.charCodeAt(++O)),T[X++]=u>>18|240,T[X++]=u>>12&63|128,T[X++]=u>>6&63|128,T[X++]=63&u|128):(T[X++]=u>>12|224,T[X++]=u>>6&63|128,T[X++]=63&u|128)}return T},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(v,T){if(!Array.isArray(v))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[];for(let u=0;u<v.length;u+=3){const T=v[u],B=u+1<v.length,m=B?v[u+1]:0,A=u+2<v.length,x=A?v[u+2]:0,f=T>>2,M=(3&T)<<4|m>>4;let H=(15&m)<<2|x>>6,n=63&x;A||(n=64,B||(H=64)),O.push(X[f],X[M],X[H],X[n])}return O.join("")},encodeString(v,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(v):this.encodeByteArray(O(v),T)},decodeString(v,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(v):function(v){const T=[];let X=0,O=0;for(;X<v.length;){const u=v[X++];if(u<128)T[O++]=String.fromCharCode(u);else if(u>191&&u<224){const B=v[X++];T[O++]=String.fromCharCode((31&u)<<6|63&B)}else if(u>239&&u<365){const B=((7&u)<<18|(63&v[X++])<<12|(63&v[X++])<<6|63&v[X++])-65536;T[O++]=String.fromCharCode(55296+(B>>10)),T[O++]=String.fromCharCode(56320+(1023&B))}else{const B=v[X++],m=v[X++];T[O++]=String.fromCharCode((15&u)<<12|(63&B)<<6|63&m)}}return T.join("")}(this.decodeStringToByteArray(v,T))},decodeStringToByteArray(v,T){this.init_();const X=T?this.charToByteMapWebSafe_:this.charToByteMap_,O=[];for(let u=0;u<v.length;){const T=X[v.charAt(u++)],m=u<v.length?X[v.charAt(u)]:0;++u;const A=u<v.length?X[v.charAt(u)]:64;++u;const x=u<v.length?X[v.charAt(u)]:64;if(++u,null==T||null==m||null==A||null==x)throw new B;const f=T<<2|m>>4;if(O.push(f),64!==A){const v=m<<4&240|A>>2;if(O.push(v),64!==x){const v=A<<6&192|x;O.push(v)}}}return O},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let v=0;v<this.ENCODED_VALS.length;v++)this.byteToCharMap_[v]=this.ENCODED_VALS.charAt(v),this.charToByteMap_[this.byteToCharMap_[v]]=v,this.byteToCharMapWebSafe_[v]=this.ENCODED_VALS_WEBSAFE.charAt(v),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[v]]=v,v>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(v)]=v,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(v)]=v)}}};class B extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(v){return function(v){const T=O(v);return u.encodeByteArray(T,!0)}(v).replace(/\./g,"")},A=function(v){try{return u.decodeString(v,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};const x=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof X.g)return X.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return x()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let v;try{v=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(X){return}const T=v&&A(v[1]);return T&&JSON.parse(T)})()}catch(v){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${v}`)}},M=v=>{var T,X;return null===(X=null===(T=f())||void 0===T?void 0:T.emulatorHosts)||void 0===X?void 0:X[v]},H=()=>{var v;return null===(v=f())||void 0===v?void 0:v.config},n=v=>{var T;return null===(T=f())||void 0===T?void 0:T[`_${v}`]};class V{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((v,T)=>{this.resolve=v,this.reject=T}))}wrapCallback(v){return(T,X)=>{T?this.reject(T):this.resolve(X),"function"===typeof v&&(this.promise.catch((()=>{})),1===v.length?v(T):v(T,X))}}}function D(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function s(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())}function F(){const v="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof v&&void 0!==v.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function b(){const v=D();return v.indexOf("MSIE ")>=0||v.indexOf("Trident/")>=0}function l(){try{return"object"===typeof indexedDB}catch(v){return!1}}function Q(){return new Promise(((v,T)=>{try{let X=!0;const O="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(O);u.onsuccess=()=>{u.result.close(),X||self.indexedDB.deleteDatabase(O),v(!0)},u.onupgradeneeded=()=>{X=!1},u.onerror=()=>{var v;T((null===(v=u.error)||void 0===v?void 0:v.message)||"")}}catch(X){T(X)}}))}function K(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class p extends Error{constructor(v,T,X){super(T),this.code=v,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,p.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,G.prototype.create)}}class G{constructor(v,T,X){this.service=v,this.serviceName=T,this.errors=X}create(v){const T=(arguments.length<=1?void 0:arguments[1])||{},X=`${this.service}/${v}`,O=this.errors[v],u=O?function(v,T){return v.replace(L,((v,X)=>{const O=T[X];return null!=O?String(O):`<${X}?>`}))}(O,T):"Error",B=`${this.serviceName}: ${u} (${X}).`;return new p(X,B,T)}}const L=/\{\$([^}]+)}/g;function r(v){for(const T in v)if(Object.prototype.hasOwnProperty.call(v,T))return!1;return!0}function o(v,T){if(v===T)return!0;const X=Object.keys(v),O=Object.keys(T);for(const u of X){if(!O.includes(u))return!1;const X=v[u],B=T[u];if(Z(X)&&Z(B)){if(!o(X,B))return!1}else if(X!==B)return!1}for(const u of O)if(!X.includes(u))return!1;return!0}function Z(v){return null!==v&&"object"===typeof v}function U(v){const T=[];for(const[X,O]of Object.entries(v))Array.isArray(O)?O.forEach((v=>{T.push(encodeURIComponent(X)+"="+encodeURIComponent(v))})):T.push(encodeURIComponent(X)+"="+encodeURIComponent(O));return T.length?"&"+T.join("&"):""}function J(v){const T={};return v.replace(/^\?/,"").split("&").forEach((v=>{if(v){const[X,O]=v.split("=");T[decodeURIComponent(X)]=decodeURIComponent(O)}})),T}function y(v){const T=v.indexOf("?");if(!T)return"";const X=v.indexOf("#",T);return v.substring(T,X>0?X:void 0)}function P(v,T){const X=new a(v,T);return X.subscribe.bind(X)}class a{constructor(v,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then((()=>{v(this)})).catch((v=>{this.error(v)}))}next(v){this.forEachObserver((T=>{T.next(v)}))}error(v){this.forEachObserver((T=>{T.error(v)})),this.close(v)}complete(){this.forEachObserver((v=>{v.complete()})),this.close()}subscribe(v,T,X){let O;if(void 0===v&&void 0===T&&void 0===X)throw new Error("Missing Observer.");O=function(v,T){if("object"!==typeof v||null===v)return!1;for(const X of T)if(X in v&&"function"===typeof v[X])return!0;return!1}(v,["next","error","complete"])?v:{next:v,error:T,complete:X},void 0===O.next&&(O.next=E),void 0===O.error&&(O.error=E),void 0===O.complete&&(O.complete=E);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch(v){}})),this.observers.push(O),u}unsubscribeOne(v){void 0!==this.observers&&void 0!==this.observers[v]&&(delete this.observers[v],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(v){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,v)}sendOne(v,T){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[v])try{T(this.observers[v])}catch(X){"undefined"!==typeof console&&console.error&&console.error(X)}}))}close(v){this.finalized||(this.finalized=!0,void 0!==v&&(this.finalError=v),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function E(){}const i=1e3,t=2,C=144e5,c=.5;function N(v){let T=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;const X=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:i)*Math.pow(T,v),O=Math.round(c*X*(Math.random()-.5)*2);return Math.min(C,X+O)}function d(v){return v&&v._delegate?v._delegate:v}},11595:(v,T,X)=>{X.d(T,{e:()=>B.f,g:()=>Hv,j:()=>Y,m:()=>Xv,n:()=>Ov,q:()=>vv,t:()=>Av,u:()=>Tv,y:()=>Bv,B:()=>uv,E:()=>mv,H:()=>sv,J:()=>Vv,I:()=>Dv,M:()=>nv,P:()=>kv,Q:()=>Fv,T:()=>bv});var O=X(11603),u=X(11615),B=X(11608);let m,A;const x=new WeakMap,f=new WeakMap,M=new WeakMap,H=new WeakMap,n=new WeakMap;let V={get(v,T,X){if(v instanceof IDBTransaction){if("done"===T)return f.get(v);if("objectStoreNames"===T)return v.objectStoreNames||M.get(v);if("store"===T)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return F(v[T])},set:(v,T,X)=>(v[T]=X,!0),has:(v,T)=>v instanceof IDBTransaction&&("done"===T||"store"===T)||T in v};function D(v){return v!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(A||(A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(v)?function(){for(var T=arguments.length,X=new Array(T),O=0;O<T;O++)X[O]=arguments[O];return v.apply(k(this),X),F(x.get(this))}:function(){for(var T=arguments.length,X=new Array(T),O=0;O<T;O++)X[O]=arguments[O];return F(v.apply(k(this),X))}:function(T){for(var X=arguments.length,O=new Array(X>1?X-1:0),u=1;u<X;u++)O[u-1]=arguments[u];const B=v.call(k(this),T,...O);return M.set(B,T.sort?T.sort():[T]),F(B)}}function s(v){return"function"===typeof v?D(v):(v instanceof IDBTransaction&&function(v){if(f.has(v))return;const T=new Promise(((T,X)=>{const O=()=>{v.removeEventListener("complete",u),v.removeEventListener("error",B),v.removeEventListener("abort",B)},u=()=>{T(),O()},B=()=>{X(v.error||new DOMException("AbortError","AbortError")),O()};v.addEventListener("complete",u),v.addEventListener("error",B),v.addEventListener("abort",B)}));f.set(v,T)}(v),T=v,(m||(m=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((v=>T instanceof v))?new Proxy(v,V):v);var T}function F(v){if(v instanceof IDBRequest)return function(v){const T=new Promise(((T,X)=>{const O=()=>{v.removeEventListener("success",u),v.removeEventListener("error",B)},u=()=>{T(F(v.result)),O()},B=()=>{X(v.error),O()};v.addEventListener("success",u),v.addEventListener("error",B)}));return T.then((T=>{T instanceof IDBCursor&&x.set(T,v)})).catch((()=>{})),n.set(T,v),T}(v);if(H.has(v))return H.get(v);const T=s(v);return T!==v&&(H.set(v,T),n.set(T,v)),T}const k=v=>n.get(v);const b=["get","getKey","getAll","getAllKeys","count"],l=["put","add","delete","clear"],Q=new Map;function K(v,T){if(!(v instanceof IDBDatabase)||T in v||"string"!==typeof T)return;if(Q.get(T))return Q.get(T);const X=T.replace(/FromIndex$/,""),O=T!==X,u=l.includes(X);if(!(X in(O?IDBIndex:IDBObjectStore).prototype)||!u&&!b.includes(X))return;const B=async function(v){const T=this.transaction(v,u?"readwrite":"readonly");let B=T.store;for(var m=arguments.length,A=new Array(m>1?m-1:0),x=1;x<m;x++)A[x-1]=arguments[x];return O&&(B=B.index(A.shift())),(await Promise.all([B[X](...A),u&&T.done]))[0]};return Q.set(T,B),B}V=(v=>({...v,get:(T,X,O)=>K(T,X)||v.get(T,X,O),has:(T,X)=>!!K(T,X)||v.has(T,X)}))(V);class p{constructor(v){this.container=v}getPlatformInfoString(){return this.container.getProviders().map((v=>{if(function(v){const T=v.getComponent();return"VERSION"===(null===T||void 0===T?void 0:T.type)}(v)){const T=v.getImmediate();return`${T.library}/${T.version}`}return null})).filter((v=>v)).join(" ")}}const G="@firebase/app",L="0.9.13",r=new u.f("@firebase/app"),o="@firebase/app-compat",Z="@firebase/analytics-compat",U="@firebase/analytics",J="@firebase/app-check-compat",y="@firebase/app-check",P="@firebase/auth",a="@firebase/auth-compat",E="@firebase/database",i="@firebase/database-compat",t="@firebase/functions",C="@firebase/functions-compat",c="@firebase/installations",N="@firebase/installations-compat",d="@firebase/messaging",I="@firebase/messaging-compat",W="@firebase/performance",g="@firebase/performance-compat",j="@firebase/remote-config",e="@firebase/remote-config-compat",h="@firebase/storage",S="@firebase/storage-compat",w="@firebase/firestore",z="@firebase/firestore-compat",R="firebase",Y="[DEFAULT]",q={[G]:"fire-core",[o]:"fire-core-compat",[U]:"fire-analytics",[Z]:"fire-analytics-compat",[y]:"fire-app-check",[J]:"fire-app-check-compat",[P]:"fire-auth",[a]:"fire-auth-compat",[E]:"fire-rtdb",[i]:"fire-rtdb-compat",[t]:"fire-fn",[C]:"fire-fn-compat",[c]:"fire-iid",[N]:"fire-iid-compat",[d]:"fire-fcm",[I]:"fire-fcm-compat",[W]:"fire-perf",[g]:"fire-perf-compat",[j]:"fire-rc",[e]:"fire-rc-compat",[h]:"fire-gcs",[S]:"fire-gcs-compat",[w]:"fire-fst",[z]:"fire-fst-compat","fire-js":"fire-js",[R]:"fire-js-all"},vv=new Map,Tv=new Map;function Xv(v,T){try{v.container.lf(T)}catch(X){r.debug(`Component ${T.name} failed to register with FirebaseApp ${v.name}`,X)}}function Ov(v,T){v.container.addOrOverwriteComponent(T)}function uv(v){const T=v.name;if(Tv.has(T))return r.debug(`There were multiple attempts to register component ${T}.`),!1;Tv.set(T,v);for(const X of vv.values())Xv(X,v);return!0}function Bv(v,T){const X=v.container.getProvider("heartbeat").getImmediate({optional:!0});return X&&X.triggerHeartbeat(),v.container.getProvider(T)}function mv(v,T){let X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;Bv(v,T).clearInstance(X)}function Av(){Tv.clear()}const xv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fv=new B.d("app","Firebase",xv);class Mv{constructor(v,T,X){this._isDeleted=!1,this._options=Object.assign({},v),this._config=Object.assign({},T),this._name=T.name,this._automaticDataCollectionEnabled=T.automaticDataCollectionEnabled,this._container=X,this.container.lf(new O.f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(v){this.checkDestroyed(),this._automaticDataCollectionEnabled=v}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(v){this._isDeleted=v}checkDestroyed(){if(this.isDeleted)throw fv.create("app-deleted",{appName:this._name})}}const Hv="9.23.0";function nv(v){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},X=v;if("object"!==typeof T){T={name:T}}const u=Object.assign({name:Y,automaticDataCollectionEnabled:!1},T),m=u.name;if("string"!==typeof m||!m)throw fv.create("bad-app-name",{appName:String(m)});if(X||(X=(0,B.E)()),!X)throw fv.create("no-options");const A=vv.get(m);if(A){if((0,B.z)(X,A.options)&&(0,B.z)(u,A.config))return A;throw fv.create("duplicate-app",{appName:m})}const x=new O.b(m);for(const O of Tv.values())x.lf(O);const f=new Mv(X,u,x);return vv.set(m,f),f}function Vv(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;const T=vv.get(v);if(!T&&v===Y&&(0,B.E)())return nv();if(!T)throw fv.create("no-app",{appName:v});return T}function Dv(){return Array.from(vv.values())}async function sv(v){const T=v.name;vv.has(T)&&(vv.delete(T),await Promise.all(v.container.getProviders().map((v=>v.delete()))),v.isDeleted=!0)}function Fv(v,T,X){var u;let B=null!==(u=q[v])&&void 0!==u?u:v;X&&(B+=`-${X}`);const m=B.match(/\s|\//),A=T.match(/\s|\//);if(m||A){const v=[`Unable to register library "${B}" with version "${T}":`];return m&&v.push(`library name "${B}" contains illegal characters (whitespace or "/")`),m&&A&&v.push("and"),A&&v.push(`version name "${T}" contains illegal characters (whitespace or "/")`),void r.warn(v.join(" "))}uv(new O.f(`${B}-version`,(()=>({library:B,version:T})),"VERSION"))}function kv(v,T){if(null!==v&&"function"!==typeof v)throw fv.create("invalid-log-argument");(0,u.m)(v,T)}function bv(v){(0,u.j)(v)}const lv="firebase-heartbeat-store";let Qv=null;function Kv(){return Qv||(Qv=function(v,T){let{blocked:X,upgrade:O,blocking:u,terminated:B}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const m=indexedDB.open(v,T),A=F(m);return O&&m.addEventListener("upgradeneeded",(v=>{O(F(m.result),v.oldVersion,v.newVersion,F(m.transaction),v)})),X&&m.addEventListener("blocked",(v=>X(v.oldVersion,v.newVersion,v))),A.then((v=>{B&&v.addEventListener("close",(()=>B())),u&&v.addEventListener("versionchange",(v=>u(v.oldVersion,v.newVersion,v)))})).catch((()=>{})),A}("firebase-heartbeat-database",1,{upgrade:(v,T)=>{if(0===T)v.createObjectStore(lv)}}).catch((v=>{throw fv.create("idb-open",{originalErrorMessage:v.message})}))),Qv}async function pv(v,T){try{const X=(await Kv()).transaction(lv,"readwrite"),O=X.objectStore(lv);await O.put(T,Gv(v)),await X.done}catch(X){if(X instanceof B.f)r.warn(X.message);else{const v=fv.create("idb-set",{originalErrorMessage:null===X||void 0===X?void 0:X.message});r.warn(v.message)}}}function Gv(v){return`${v.name}!${v.options.appId}`}class Lv{constructor(v){this.container=v,this._heartbeatsCache=null;const T=this.container.getProvider("app").getImmediate();this.Ti=new ov(T),this._heartbeatsCachePromise=this.Ti.read().then((v=>(this._heartbeatsCache=v,v)))}async triggerHeartbeat(){const v=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),T=rv();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==T&&!this._heartbeatsCache.heartbeats.some((v=>v.date===T)))return this._heartbeatsCache.heartbeats.push({date:T,agent:v}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((v=>{const T=new Date(v.date).valueOf();return Date.now()-T<=2592e6})),this.Ti.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const v=rv(),{heartbeatsToSend:T,unsentEntries:X}=function(v){let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const X=[];let O=v.slice();for(const u of v){const v=X.find((v=>v.agent===u.agent));if(v){if(v.dates.push(u.date),Zv(X)>T){v.dates.pop();break}}else if(X.push({agent:u.agent,dates:[u.date]}),Zv(X)>T){X.pop();break}O=O.slice(1)}return{heartbeatsToSend:X,unsentEntries:O}}(this._heartbeatsCache.heartbeats),O=(0,B.o)(JSON.stringify({version:2,heartbeats:T}));return this._heartbeatsCache.lastSentHeartbeatDate=v,X.length>0?(this._heartbeatsCache.heartbeats=X,await this.Ti.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ti.overwrite(this._heartbeatsCache)),O}}function rv(){return(new Date).toISOString().substring(0,10)}class ov{constructor(v){this.app=v,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,B.V)()&&(0,B.hb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(v){try{const T=await Kv();return await T.transaction(lv).objectStore(lv).get(Gv(v))}catch(T){if(T instanceof B.f)r.warn(T.message);else{const v=fv.create("idb-get",{originalErrorMessage:null===T||void 0===T?void 0:T.message});r.warn(v.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(v){var T;if(await this._canUseIndexedDBPromise){const X=await this.read();return pv(this.app,{lastSentHeartbeatDate:null!==(T=v.lastSentHeartbeatDate)&&void 0!==T?T:X.lastSentHeartbeatDate,heartbeats:v.heartbeats})}}async add(v){var T;if(await this._canUseIndexedDBPromise){const X=await this.read();return pv(this.app,{lastSentHeartbeatDate:null!==(T=v.lastSentHeartbeatDate)&&void 0!==T?T:X.lastSentHeartbeatDate,heartbeats:[...X.heartbeats,...v.heartbeats]})}}}function Zv(v){return(0,B.o)(JSON.stringify({version:2,heartbeats:v})).length}var Uv;Uv="",uv(new O.f("platform-logger",(v=>new p(v)),"PRIVATE")),uv(new O.f("heartbeat",(v=>new Lv(v)),"PRIVATE")),Fv(G,L,Uv),Fv(G,L,"esm2017"),Fv("fire-js","")},11603:(v,T,X)=>{X.d(T,{b:()=>A,f:()=>u});var O=X(11608);class u{constructor(v,T,X){this.name=v,this.instanceFactory=T,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(v){return this.instantiationMode=v,this}setMultipleInstances(v){return this.multipleInstances=v,this}setServiceProps(v){return this.serviceProps=v,this}setInstanceCreatedCallback(v){return this.onInstanceCreated=v,this}}const B="[DEFAULT]";class m{constructor(v,T){this.name=v,this.container=T,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(v){const T=this.normalizeInstanceIdentifier(v);if(!this.instancesDeferred.has(T)){const v=new O.b;if(this.instancesDeferred.set(T,v),this.isInitialized(T)||this.shouldAutoInitialize())try{const X=this.getOrInitializeService({instanceIdentifier:T});X&&v.resolve(X)}catch(X){}}return this.instancesDeferred.get(T).promise}getImmediate(v){var T;const X=this.normalizeInstanceIdentifier(null===v||void 0===v?void 0:v.identifier),O=null!==(T=null===v||void 0===v?void 0:v.optional)&&void 0!==T&&T;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(O)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(u){if(O)return null;throw u}}getComponent(){return this.component}setComponent(v){if(v.name!==this.name)throw Error(`Mismatching Component ${v.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=v,this.shouldAutoInitialize()){if(function(v){return"EAGER"===v.instantiationMode}(v))try{this.getOrInitializeService({instanceIdentifier:B})}catch(T){}for(const[v,X]of this.instancesDeferred.entries()){const O=this.normalizeInstanceIdentifier(v);try{const v=this.getOrInitializeService({instanceIdentifier:O});X.resolve(v)}catch(T){}}}}clearInstance(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.instancesDeferred.delete(v),this.instancesOptions.delete(v),this.instances.delete(v)}async delete(){const v=Array.from(this.instances.values());await Promise.all([...v.filter((v=>"INTERNAL"in v)).map((v=>v.INTERNAL.delete())),...v.filter((v=>"_delete"in v)).map((v=>v._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instances.has(v)}getOptions(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instancesOptions.get(v)||{}}initialize(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:T={}}=v,X=this.normalizeInstanceIdentifier(v.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const O=this.getOrInitializeService({instanceIdentifier:X,options:T});for(const[u,B]of this.instancesDeferred.entries()){X===this.normalizeInstanceIdentifier(u)&&B.resolve(O)}return O}Ai(v,T){var X;const O=this.normalizeInstanceIdentifier(T),u=null!==(X=this.onInitCallbacks.get(O))&&void 0!==X?X:new Set;u.add(v),this.onInitCallbacks.set(O,u);const B=this.instances.get(O);return B&&v(B,O),()=>{u.delete(v)}}invokeOnInitCallbacks(v,T){const X=this.onInitCallbacks.get(T);if(X)for(const u of X)try{u(v,T)}catch(O){}}getOrInitializeService(v){let{instanceIdentifier:T,options:X={}}=v,O=this.instances.get(T);if(!O&&this.component&&(O=this.component.instanceFactory(this.container,{instanceIdentifier:(u=T,u===B?void 0:u),options:X}),this.instances.set(T,O),this.instancesOptions.set(T,X),this.invokeOnInitCallbacks(O,T),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,T,O)}catch(m){}var u;return O||null}normalizeInstanceIdentifier(){let v=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.component?this.component.multipleInstances?v:B:v}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class A{constructor(v){this.name=v,this.providers=new Map}lf(v){const T=this.getProvider(v.name);if(T.isComponentSet())throw new Error(`Component ${v.name} has already been registered with ${this.name}`);T.setComponent(v)}addOrOverwriteComponent(v){this.getProvider(v.name).isComponentSet()&&this.providers.delete(v.name),this.lf(v)}getProvider(v){if(this.providers.has(v))return this.providers.get(v);const T=new m(v,this);return this.providers.set(v,T),T}getProviders(){return Array.from(this.providers.values())}}},11615:(v,T,X)=>{X.d(T,{e:()=>u,f:()=>f,j:()=>M,m:()=>H});const O=[];var u;!function(v){v[v.DEBUG=0]="DEBUG",v[v.VERBOSE=1]="VERBOSE",v[v.INFO=2]="INFO",v[v.WARN=3]="WARN",v[v.ERROR=4]="ERROR",v[v.SILENT=5]="SILENT"}(u||(u={}));const B={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},m=u.INFO,A={[u.DEBUG]:"log",[u.VERBOSE]:"log",[u.INFO]:"info",[u.WARN]:"warn",[u.ERROR]:"error"},x=function(v,T){if(T<v.logLevel)return;const X=(new Date).toISOString(),O=A[T];if(!O)throw new Error(`Attempted to log a message with an invalid logType (value: ${T})`);for(var u=arguments.length,B=new Array(u>2?u-2:0),m=2;m<u;m++)B[m-2]=arguments[m];console[O](`[${X}]  ${v.name}:`,...B)};class f{constructor(v){this.name=v,this._logLevel=m,this._logHandler=x,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(v){if(!(v in u))throw new TypeError(`Invalid value "${v}" assigned to \`logLevel\``);this._logLevel=v}setLogLevel(v){this._logLevel="string"===typeof v?B[v]:v}get logHandler(){return this._logHandler}set logHandler(v){if("function"!==typeof v)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=v}get userLogHandler(){return this._userLogHandler}set userLogHandler(v){this._userLogHandler=v}debug(){for(var v=arguments.length,T=new Array(v),X=0;X<v;X++)T[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,u.DEBUG,...T),this._logHandler(this,u.DEBUG,...T)}log(){for(var v=arguments.length,T=new Array(v),X=0;X<v;X++)T[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,u.VERBOSE,...T),this._logHandler(this,u.VERBOSE,...T)}info(){for(var v=arguments.length,T=new Array(v),X=0;X<v;X++)T[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,u.INFO,...T),this._logHandler(this,u.INFO,...T)}warn(){for(var v=arguments.length,T=new Array(v),X=0;X<v;X++)T[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,u.WARN,...T),this._logHandler(this,u.WARN,...T)}error(){for(var v=arguments.length,T=new Array(v),X=0;X<v;X++)T[X]=arguments[X];this._userLogHandler&&this._userLogHandler(this,u.ERROR,...T),this._logHandler(this,u.ERROR,...T)}}function M(v){O.forEach((T=>{T.setLogLevel(v)}))}function H(v,T){for(const X of O){let O=null;T&&T.level&&(O=B[T.level]),X.userLogHandler=null===v?null:function(T,X){for(var B=arguments.length,m=new Array(B>2?B-2:0),A=2;A<B;A++)m[A-2]=arguments[A];const x=m.map((v=>{if(null==v)return null;if("string"===typeof v)return v;if("number"===typeof v||"boolean"===typeof v)return v.toString();if(v instanceof Error)return v.message;try{return JSON.stringify(v)}catch(T){return null}})).filter((v=>v)).join(" ");X>=(null!==O&&void 0!==O?O:T.logLevel)&&v({level:u[X].toLowerCase(),message:x,args:m,type:T.name})}}}}}]);