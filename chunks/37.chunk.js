/*! For license information please see yjotl.37.94c41ea2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11071:(R,N,q)=>{q.d(N,{A:()=>F,C:()=>b,E:()=>H,F:()=>k,J:()=>E,L:()=>e,N:()=>K,R:()=>W,V:()=>C,Z:()=>L,ab:()=>O,e:()=>S,eb:()=>r,f:()=>d,h:()=>z,i:()=>Z,k:()=>G,m:()=>v,q:()=>c,r:()=>o,s:()=>P,t:()=>m,v:()=>j,x:()=>a});const w=function(R){const N=[];let q=0;for(let w=0;w<R.length;w++){let u=R.charCodeAt(w);u<128?N[q++]=u:u<2048?(N[q++]=u>>6|192,N[q++]=63&u|128):55296===(64512&u)&&w+1<R.length&&56320===(64512&R.charCodeAt(w+1))?(u=65536+((1023&u)<<10)+(1023&R.charCodeAt(++w)),N[q++]=u>>18|240,N[q++]=u>>12&63|128,N[q++]=u>>6&63|128,N[q++]=63&u|128):(N[q++]=u>>12|224,N[q++]=u>>6&63|128,N[q++]=63&u|128)}return N},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(R,N){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,w=[];for(let u=0;u<R.length;u+=3){const N=R[u],M=u+1<R.length,v=M?R[u+1]:0,G=u+2<R.length,J=G?R[u+2]:0,y=N>>2,a=(3&N)<<4|v>>4;let j=(15&v)<<2|J>>6,F=63&J;G||(F=64,M||(j=64)),w.push(q[y],q[a],q[j],q[F])}return w.join("")},encodeString(R,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(R):this.encodeByteArray(w(R),N)},decodeString(R,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(R):function(R){const N=[];let q=0,w=0;for(;q<R.length;){const u=R[q++];if(u<128)N[w++]=String.fromCharCode(u);else if(u>191&&u<224){const M=R[q++];N[w++]=String.fromCharCode((31&u)<<6|63&M)}else if(u>239&&u<365){const M=((7&u)<<18|(63&R[q++])<<12|(63&R[q++])<<6|63&R[q++])-65536;N[w++]=String.fromCharCode(55296+(M>>10)),N[w++]=String.fromCharCode(56320+(1023&M))}else{const M=R[q++],v=R[q++];N[w++]=String.fromCharCode((15&u)<<12|(63&M)<<6|63&v)}}return N.join("")}(this.decodeStringToByteArray(R,N))},decodeStringToByteArray(R,N){this.init_();const q=N?this.charToByteMapWebSafe_:this.charToByteMap_,w=[];for(let u=0;u<R.length;){const N=q[R.charAt(u++)],v=u<R.length?q[R.charAt(u)]:0;++u;const G=u<R.length?q[R.charAt(u)]:64;++u;const J=u<R.length?q[R.charAt(u)]:64;if(++u,null==N||null==v||null==G||null==J)throw new M;const y=N<<2|v>>4;if(w.push(y),64!==G){const R=v<<4&240|G>>2;if(w.push(R),64!==J){const R=G<<6&192|J;w.push(R)}}}return w},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class M extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v=function(R){return function(R){const N=w(R);return u.encodeByteArray(N,!0)}(R).replace(/\./g,"")},G=function(R){try{return u.decodeString(R,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};const J=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof q.g)return q.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,y=()=>{try{return J()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(q){return}const N=R&&G(R[1]);return N&&JSON.parse(N)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},a=R=>{var N,q;return null===(q=null===(N=y())||void 0===N?void 0:N.emulatorHosts)||void 0===q?void 0:q[R]},j=()=>{var R;return null===(R=y())||void 0===R?void 0:R.config},F=R=>{var N;return null===(N=y())||void 0===N?void 0:N[`_${R}`]};class S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((R,N)=>{this.resolve=R,this.reject=N}))}wrapCallback(R){return(N,q)=>{N?this.reject(N):this.resolve(q),"function"===typeof R&&(this.promise.catch((()=>{})),1===R.length?R(N):R(N,q))}}}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function W(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())}function k(){const R="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof R&&void 0!==R.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function e(){const R=H();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function K(){try{return"object"===typeof indexedDB}catch(R){return!1}}function r(){return new Promise(((R,N)=>{try{let q=!0;const w="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(w);u.onsuccess=()=>{u.result.close(),q||self.indexedDB.deleteDatabase(w),R(!0)},u.onupgradeneeded=()=>{q=!1},u.onerror=()=>{var R;N((null===(R=u.error)||void 0===R?void 0:R.message)||"")}}catch(q){N(q)}}))}function Z(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class z extends Error{constructor(R,N,q){super(N),this.code=R,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d.prototype.create)}}class d{constructor(R,N,q){this.service=R,this.serviceName=N,this.errors=q}create(R){const N=(arguments.length<=1?void 0:arguments[1])||{},q=`${this.service}/${R}`,w=this.errors[R],u=w?function(R,N){return R.replace(x,((R,q)=>{const w=N[q];return null!=w?String(w):`<${q}?>`}))}(w,N):"Error",M=`${this.serviceName}: ${u} (${q}).`;return new z(q,M,N)}}const x=/\{\$([^}]+)}/g;function E(R){for(const N in R)if(Object.prototype.hasOwnProperty.call(R,N))return!1;return!0}function P(R,N){if(R===N)return!0;const q=Object.keys(R),w=Object.keys(N);for(const u of q){if(!w.includes(u))return!1;const q=R[u],M=N[u];if(s(q)&&s(M)){if(!P(q,M))return!1}else if(q!==M)return!1}for(const u of w)if(!q.includes(u))return!1;return!0}function s(R){return null!==R&&"object"===typeof R}function O(R){const N=[];for(const[q,w]of Object.entries(R))Array.isArray(w)?w.forEach((R=>{N.push(encodeURIComponent(q)+"="+encodeURIComponent(R))})):N.push(encodeURIComponent(q)+"="+encodeURIComponent(w));return N.length?"&"+N.join("&"):""}function L(R){const N={};return R.replace(/^\?/,"").split("&").forEach((R=>{if(R){const[q,w]=R.split("=");N[decodeURIComponent(q)]=decodeURIComponent(w)}})),N}function m(R){const N=R.indexOf("?");if(!N)return"";const q=R.indexOf("#",N);return R.substring(N,q>0?q:void 0)}function o(R,N){const q=new A(R,N);return q.subscribe.bind(q)}class A{constructor(R,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then((()=>{R(this)})).catch((R=>{this.error(R)}))}next(R){this.forEachObserver((N=>{N.next(R)}))}error(R){this.forEachObserver((N=>{N.error(R)})),this.close(R)}complete(){this.forEachObserver((R=>{R.complete()})),this.close()}subscribe(R,N,q){let w;if(void 0===R&&void 0===N&&void 0===q)throw new Error("Missing Observer.");w=function(R,N){if("object"!==typeof R||null===R)return!1;for(const q of N)if(q in R&&"function"===typeof R[q])return!0;return!1}(R,["next","error","complete"])?R:{next:R,error:N,complete:q},void 0===w.next&&(w.next=n),void 0===w.error&&(w.error=n),void 0===w.complete&&(w.complete=n);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?w.error(this.finalError):w.complete()}catch(R){}})),this.observers.push(w),u}unsubscribeOne(R){void 0!==this.observers&&void 0!==this.observers[R]&&(delete this.observers[R],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(R){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,R)}sendOne(R,N){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[R])try{N(this.observers[R])}catch(q){"undefined"!==typeof console&&console.error&&console.error(q)}}))}close(R){this.finalized||(this.finalized=!0,void 0!==R&&(this.finalError=R),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function n(){}const Q=1e3,Y=2,T=144e5,f=.5;function c(R){let N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y;const q=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q)*Math.pow(N,R),w=Math.round(f*q*(Math.random()-.5)*2);return Math.min(T,q+w)}function b(R){return R&&R._delegate?R._delegate:R}},11055:(R,N,q)=>{q.d(N,{b:()=>M.h,c:()=>jR,f:()=>D,g:()=>qR,i:()=>wR,k:()=>RR,o:()=>GR,q:()=>NR,s:()=>MR,u:()=>uR,y:()=>vR,B:()=>WR,G:()=>SR,D:()=>HR,J:()=>FR,M:()=>CR,O:()=>kR,S:()=>eR});var w=q(11062),u=q(11076),M=q(11071);let v,G;const J=new WeakMap,y=new WeakMap,a=new WeakMap,j=new WeakMap,F=new WeakMap;let S={get(R,N,q){if(R instanceof IDBTransaction){if("done"===N)return y.get(R);if("objectStoreNames"===N)return R.objectStoreNames||a.get(R);if("store"===N)return q.objectStoreNames[1]?void 0:q.objectStore(q.objectStoreNames[0])}return k(R[N])},set:(R,N,q)=>(R[N]=q,!0),has:(R,N)=>R instanceof IDBTransaction&&("done"===N||"store"===N)||N in R};function H(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(R)?function(){for(var N=arguments.length,q=new Array(N),w=0;w<N;w++)q[w]=arguments[w];return R.apply(C(this),q),k(J.get(this))}:function(){for(var N=arguments.length,q=new Array(N),w=0;w<N;w++)q[w]=arguments[w];return k(R.apply(C(this),q))}:function(N){for(var q=arguments.length,w=new Array(q>1?q-1:0),u=1;u<q;u++)w[u-1]=arguments[u];const M=R.call(C(this),N,...w);return a.set(M,N.sort?N.sort():[N]),k(M)}}function W(R){return"function"===typeof R?H(R):(R instanceof IDBTransaction&&function(R){if(y.has(R))return;const N=new Promise(((N,q)=>{const w=()=>{R.removeEventListener("complete",u),R.removeEventListener("error",M),R.removeEventListener("abort",M)},u=()=>{N(),w()},M=()=>{q(R.error||new DOMException("AbortError","AbortError")),w()};R.addEventListener("complete",u),R.addEventListener("error",M),R.addEventListener("abort",M)}));y.set(R,N)}(R),N=R,(v||(v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((R=>N instanceof R))?new Proxy(R,S):R);var N}function k(R){if(R instanceof IDBRequest)return function(R){const N=new Promise(((N,q)=>{const w=()=>{R.removeEventListener("success",u),R.removeEventListener("error",M)},u=()=>{N(k(R.result)),w()},M=()=>{q(R.error),w()};R.addEventListener("success",u),R.addEventListener("error",M)}));return N.then((N=>{N instanceof IDBCursor&&J.set(N,R)})).catch((()=>{})),F.set(N,R),N}(R);if(j.has(R))return j.get(R);const N=W(R);return N!==R&&(j.set(R,N),F.set(N,R)),N}const C=R=>F.get(R);const e=["get","getKey","getAll","getAllKeys","count"],K=["put","add","delete","clear"],r=new Map;function Z(R,N){if(!(R instanceof IDBDatabase)||N in R||"string"!==typeof N)return;if(r.get(N))return r.get(N);const q=N.replace(/FromIndex$/,""),w=N!==q,u=K.includes(q);if(!(q in(w?IDBIndex:IDBObjectStore).prototype)||!u&&!e.includes(q))return;const M=async function(R){const N=this.transaction(R,u?"readwrite":"readonly");let M=N.store;for(var v=arguments.length,G=new Array(v>1?v-1:0),J=1;J<v;J++)G[J-1]=arguments[J];return w&&(M=M.index(G.shift())),(await Promise.all([M[q](...G),u&&N.done]))[0]};return r.set(N,M),M}S=(R=>({...R,get:(N,q,w)=>Z(N,q)||R.get(N,q,w),has:(N,q)=>!!Z(N,q)||R.has(N,q)}))(S);class z{constructor(R){this.container=R}getPlatformInfoString(){return this.container.getProviders().map((R=>{if(function(R){const N=R.getComponent();return"VERSION"===(null===N||void 0===N?void 0:N.type)}(R)){const N=R.getImmediate();return`${N.library}/${N.version}`}return null})).filter((R=>R)).join(" ")}}const d="@firebase/app",x="0.9.13",E=new u.f("@firebase/app"),P="@firebase/app-compat",s="@firebase/analytics-compat",O="@firebase/analytics",L="@firebase/app-check-compat",m="@firebase/app-check",o="@firebase/auth",A="@firebase/auth-compat",n="@firebase/database",Q="@firebase/database-compat",Y="@firebase/functions",T="@firebase/functions-compat",f="@firebase/installations",c="@firebase/installations-compat",b="@firebase/messaging",I="@firebase/messaging-compat",V="@firebase/performance",t="@firebase/performance-compat",i="@firebase/remote-config",g="@firebase/remote-config-compat",U="@firebase/storage",B="@firebase/storage-compat",l="@firebase/firestore",X="@firebase/firestore-compat",h="firebase",D="[DEFAULT]",p={[d]:"fire-core",[P]:"fire-core-compat",[O]:"fire-analytics",[s]:"fire-analytics-compat",[m]:"fire-app-check",[L]:"fire-app-check-compat",[o]:"fire-auth",[A]:"fire-auth-compat",[n]:"fire-rtdb",[Q]:"fire-rtdb-compat",[Y]:"fire-fn",[T]:"fire-fn-compat",[f]:"fire-iid",[c]:"fire-iid-compat",[b]:"fire-fcm",[I]:"fire-fcm-compat",[V]:"fire-perf",[t]:"fire-perf-compat",[i]:"fire-rc",[g]:"fire-rc-compat",[U]:"fire-gcs",[B]:"fire-gcs-compat",[l]:"fire-fst",[X]:"fire-fst-compat","fire-js":"fire-js",[h]:"fire-js-all"},RR=new Map,NR=new Map;function qR(R,N){try{R.container.yf(N)}catch(q){E.debug(`Component ${N.name} failed to register with FirebaseApp ${R.name}`,q)}}function wR(R,N){R.container.addOrOverwriteComponent(N)}function uR(R){const N=R.name;if(NR.has(N))return E.debug(`There were multiple attempts to register component ${N}.`),!1;NR.set(N,R);for(const q of RR.values())qR(q,R);return!0}function MR(R,N){const q=R.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),R.container.getProvider(N)}function vR(R,N){let q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D;MR(R,N).clearInstance(q)}function GR(){NR.clear()}const JR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},yR=new M.f("app","Firebase",JR);class aR{constructor(R,N,q){this._isDeleted=!1,this._options=Object.assign({},R),this._config=Object.assign({},N),this._name=N.name,this._automaticDataCollectionEnabled=N.automaticDataCollectionEnabled,this._container=q,this.container.yf(new w.f("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(R){this.checkDestroyed(),this._automaticDataCollectionEnabled=R}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(R){this._isDeleted=R}checkDestroyed(){if(this.isDeleted)throw yR.create("app-deleted",{appName:this._name})}}const jR="9.23.0";function FR(R){let N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},q=R;if("object"!==typeof N){N={name:N}}const u=Object.assign({name:D,automaticDataCollectionEnabled:!1},N),v=u.name;if("string"!==typeof v||!v)throw yR.create("bad-app-name",{appName:String(v)});if(q||(q=(0,M.v)()),!q)throw yR.create("no-options");const G=RR.get(v);if(G){if((0,M.s)(q,G.options)&&(0,M.s)(u,G.config))return G;throw yR.create("duplicate-app",{appName:v})}const J=new w.c(v);for(const w of NR.values())J.yf(w);const y=new aR(q,u,J);return RR.set(v,y),y}function SR(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;const N=RR.get(R);if(!N&&R===D&&(0,M.v)())return FR();if(!N)throw yR.create("no-app",{appName:R});return N}function HR(){return Array.from(RR.values())}async function WR(R){const N=R.name;RR.has(N)&&(RR.delete(N),await Promise.all(R.container.getProviders().map((R=>R.delete()))),R.isDeleted=!0)}function kR(R,N,q){var u;let M=null!==(u=p[R])&&void 0!==u?u:R;q&&(M+=`-${q}`);const v=M.match(/\s|\//),G=N.match(/\s|\//);if(v||G){const R=[`Unable to register library "${M}" with version "${N}":`];return v&&R.push(`library name "${M}" contains illegal characters (whitespace or "/")`),v&&G&&R.push("and"),G&&R.push(`version name "${N}" contains illegal characters (whitespace or "/")`),void E.warn(R.join(" "))}uR(new w.f(`${M}-version`,(()=>({library:M,version:N})),"VERSION"))}function CR(R,N){if(null!==R&&"function"!==typeof R)throw yR.create("invalid-log-argument");(0,u.n)(R,N)}function eR(R){(0,u.j)(R)}const KR="firebase-heartbeat-store";let rR=null;function ZR(){return rR||(rR=function(R,N){let{blocked:q,upgrade:w,blocking:u,terminated:M}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const v=indexedDB.open(R,N),G=k(v);return w&&v.addEventListener("upgradeneeded",(R=>{w(k(v.result),R.oldVersion,R.newVersion,k(v.transaction),R)})),q&&v.addEventListener("blocked",(R=>q(R.oldVersion,R.newVersion,R))),G.then((R=>{M&&R.addEventListener("close",(()=>M())),u&&R.addEventListener("versionchange",(R=>u(R.oldVersion,R.newVersion,R)))})).catch((()=>{})),G}("firebase-heartbeat-database",1,{upgrade:(R,N)=>{if(0===N)R.createObjectStore(KR)}}).catch((R=>{throw yR.create("idb-open",{originalErrorMessage:R.message})}))),rR}async function zR(R,N){try{const q=(await ZR()).transaction(KR,"readwrite"),w=q.objectStore(KR);await w.put(N,dR(R)),await q.done}catch(q){if(q instanceof M.h)E.warn(q.message);else{const R=yR.create("idb-set",{originalErrorMessage:null===q||void 0===q?void 0:q.message});E.warn(R.message)}}}function dR(R){return`${R.name}!${R.options.appId}`}class xR{constructor(R){this.container=R,this._heartbeatsCache=null;const N=this.container.getProvider("app").getImmediate();this.Pi=new PR(N),this._heartbeatsCachePromise=this.Pi.read().then((R=>(this._heartbeatsCache=R,R)))}async triggerHeartbeat(){const R=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),N=ER();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==N&&!this._heartbeatsCache.heartbeats.some((R=>R.date===N)))return this._heartbeatsCache.heartbeats.push({date:N,agent:R}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((R=>{const N=new Date(R.date).valueOf();return Date.now()-N<=2592e6})),this.Pi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const R=ER(),{heartbeatsToSend:N,unsentEntries:q}=function(R){let N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const q=[];let w=R.slice();for(const u of R){const R=q.find((R=>R.agent===u.agent));if(R){if(R.dates.push(u.date),sR(q)>N){R.dates.pop();break}}else if(q.push({agent:u.agent,dates:[u.date]}),sR(q)>N){q.pop();break}w=w.slice(1)}return{heartbeatsToSend:q,unsentEntries:w}}(this._heartbeatsCache.heartbeats),w=(0,M.m)(JSON.stringify({version:2,heartbeats:N}));return this._heartbeatsCache.lastSentHeartbeatDate=R,q.length>0?(this._heartbeatsCache.heartbeats=q,await this.Pi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Pi.overwrite(this._heartbeatsCache)),w}}function ER(){return(new Date).toISOString().substring(0,10)}class PR{constructor(R){this.app=R,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,M.N)()&&(0,M.eb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(R){try{const N=await ZR();return await N.transaction(KR).objectStore(KR).get(dR(R))}catch(N){if(N instanceof M.h)E.warn(N.message);else{const R=yR.create("idb-get",{originalErrorMessage:null===N||void 0===N?void 0:N.message});E.warn(R.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(R){var N;if(await this._canUseIndexedDBPromise){const q=await this.read();return zR(this.app,{lastSentHeartbeatDate:null!==(N=R.lastSentHeartbeatDate)&&void 0!==N?N:q.lastSentHeartbeatDate,heartbeats:R.heartbeats})}}async add(R){var N;if(await this._canUseIndexedDBPromise){const q=await this.read();return zR(this.app,{lastSentHeartbeatDate:null!==(N=R.lastSentHeartbeatDate)&&void 0!==N?N:q.lastSentHeartbeatDate,heartbeats:[...q.heartbeats,...R.heartbeats]})}}}function sR(R){return(0,M.m)(JSON.stringify({version:2,heartbeats:R})).length}var OR;OR="",uR(new w.f("platform-logger",(R=>new z(R)),"PRIVATE")),uR(new w.f("heartbeat",(R=>new xR(R)),"PRIVATE")),kR(d,x,OR),kR(d,x,"esm2017"),kR("fire-js","")},11062:(R,N,q)=>{q.d(N,{c:()=>G,f:()=>u});var w=q(11071);class u{constructor(R,N,q){this.name=R,this.instanceFactory=N,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(R){return this.instantiationMode=R,this}setMultipleInstances(R){return this.multipleInstances=R,this}setServiceProps(R){return this.serviceProps=R,this}setInstanceCreatedCallback(R){return this.onInstanceCreated=R,this}}const M="[DEFAULT]";class v{constructor(R,N){this.name=R,this.container=N,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(R){const N=this.normalizeInstanceIdentifier(R);if(!this.instancesDeferred.has(N)){const R=new w.e;if(this.instancesDeferred.set(N,R),this.isInitialized(N)||this.shouldAutoInitialize())try{const q=this.getOrInitializeService({instanceIdentifier:N});q&&R.resolve(q)}catch(q){}}return this.instancesDeferred.get(N).promise}getImmediate(R){var N;const q=this.normalizeInstanceIdentifier(null===R||void 0===R?void 0:R.identifier),w=null!==(N=null===R||void 0===R?void 0:R.optional)&&void 0!==N&&N;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(w)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(u){if(w)return null;throw u}}getComponent(){return this.component}setComponent(R){if(R.name!==this.name)throw Error(`Mismatching Component ${R.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=R,this.shouldAutoInitialize()){if(function(R){return"EAGER"===R.instantiationMode}(R))try{this.getOrInitializeService({instanceIdentifier:M})}catch(N){}for(const[R,q]of this.instancesDeferred.entries()){const w=this.normalizeInstanceIdentifier(R);try{const R=this.getOrInitializeService({instanceIdentifier:w});q.resolve(R)}catch(N){}}}}clearInstance(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(R),this.instancesOptions.delete(R),this.instances.delete(R)}async delete(){const R=Array.from(this.instances.values());await Promise.all([...R.filter((R=>"INTERNAL"in R)).map((R=>R.INTERNAL.delete())),...R.filter((R=>"_delete"in R)).map((R=>R._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(R)}getOptions(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(R)||{}}initialize(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:N={}}=R,q=this.normalizeInstanceIdentifier(R.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const w=this.getOrInitializeService({instanceIdentifier:q,options:N});for(const[u,M]of this.instancesDeferred.entries()){q===this.normalizeInstanceIdentifier(u)&&M.resolve(w)}return w}wi(R,N){var q;const w=this.normalizeInstanceIdentifier(N),u=null!==(q=this.onInitCallbacks.get(w))&&void 0!==q?q:new Set;u.add(R),this.onInitCallbacks.set(w,u);const M=this.instances.get(w);return M&&R(M,w),()=>{u.delete(R)}}invokeOnInitCallbacks(R,N){const q=this.onInitCallbacks.get(N);if(q)for(const u of q)try{u(R,N)}catch(w){}}getOrInitializeService(R){let{instanceIdentifier:N,options:q={}}=R,w=this.instances.get(N);if(!w&&this.component&&(w=this.component.instanceFactory(this.container,{instanceIdentifier:(u=N,u===M?void 0:u),options:q}),this.instances.set(N,w),this.instancesOptions.set(N,q),this.invokeOnInitCallbacks(w,N),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,N,w)}catch(v){}var u;return w||null}normalizeInstanceIdentifier(){let R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?R:M:R}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(R){this.name=R,this.providers=new Map}yf(R){const N=this.getProvider(R.name);if(N.isComponentSet())throw new Error(`Component ${R.name} has already been registered with ${this.name}`);N.setComponent(R)}addOrOverwriteComponent(R){this.getProvider(R.name).isComponentSet()&&this.providers.delete(R.name),this.yf(R)}getProvider(R){if(this.providers.has(R))return this.providers.get(R);const N=new v(R,this);return this.providers.set(R,N),N}getProviders(){return Array.from(this.providers.values())}}},11076:(R,N,q)=>{q.d(N,{c:()=>u,f:()=>y,j:()=>a,n:()=>j});const w=[];var u;!function(R){R[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT"}(u||(u={}));const M={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},v=u.INFO,G={[u.DEBUG]:"log",[u.VERBOSE]:"log",[u.INFO]:"info",[u.WARN]:"warn",[u.ERROR]:"error"},J=function(R,N){if(N<R.logLevel)return;const q=(new Date).toISOString(),w=G[N];if(!w)throw new Error(`Attempted to log a message with an invalid logType (value: ${N})`);for(var u=arguments.length,M=new Array(u>2?u-2:0),v=2;v<u;v++)M[v-2]=arguments[v];console[w](`[${q}]  ${R.name}:`,...M)};class y{constructor(R){this.name=R,this._logLevel=v,this._logHandler=J,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(R){if(!(R in u))throw new TypeError(`Invalid value "${R}" assigned to \`logLevel\``);this._logLevel=R}setLogLevel(R){this._logLevel="string"===typeof R?M[R]:R}get logHandler(){return this._logHandler}set logHandler(R){if("function"!==typeof R)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=R}get userLogHandler(){return this._userLogHandler}set userLogHandler(R){this._userLogHandler=R}debug(){for(var R=arguments.length,N=new Array(R),q=0;q<R;q++)N[q]=arguments[q];this._userLogHandler&&this._userLogHandler(this,u.DEBUG,...N),this._logHandler(this,u.DEBUG,...N)}log(){for(var R=arguments.length,N=new Array(R),q=0;q<R;q++)N[q]=arguments[q];this._userLogHandler&&this._userLogHandler(this,u.VERBOSE,...N),this._logHandler(this,u.VERBOSE,...N)}info(){for(var R=arguments.length,N=new Array(R),q=0;q<R;q++)N[q]=arguments[q];this._userLogHandler&&this._userLogHandler(this,u.INFO,...N),this._logHandler(this,u.INFO,...N)}warn(){for(var R=arguments.length,N=new Array(R),q=0;q<R;q++)N[q]=arguments[q];this._userLogHandler&&this._userLogHandler(this,u.WARN,...N),this._logHandler(this,u.WARN,...N)}error(){for(var R=arguments.length,N=new Array(R),q=0;q<R;q++)N[q]=arguments[q];this._userLogHandler&&this._userLogHandler(this,u.ERROR,...N),this._logHandler(this,u.ERROR,...N)}}function a(R){w.forEach((N=>{N.setLogLevel(R)}))}function j(R,N){for(const q of w){let w=null;N&&N.level&&(w=M[N.level]),q.userLogHandler=null===R?null:function(N,q){for(var M=arguments.length,v=new Array(M>2?M-2:0),G=2;G<M;G++)v[G-2]=arguments[G];const J=v.map((R=>{if(null==R)return null;if("string"===typeof R)return R;if("number"===typeof R||"boolean"===typeof R)return R.toString();if(R instanceof Error)return R.message;try{return JSON.stringify(R)}catch(N){return null}})).filter((R=>R)).join(" ");q>=(null!==w&&void 0!==w?w:N.logLevel)&&R({level:u[q].toLowerCase(),message:J,args:v,type:N.name})}}}}}]);