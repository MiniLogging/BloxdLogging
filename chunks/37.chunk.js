/*! For license information please see ksnnup.37.57d5e9f7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11022:(L,J,o)=>{o.d(J,{$:()=>O,C:()=>C,G:()=>U,J:()=>W,N:()=>H,O:()=>T,Q:()=>Y,S:()=>l,W:()=>a,Y:()=>e,d:()=>k,db:()=>m,e:()=>j,eb:()=>c,gb:()=>S,h:()=>u,l:()=>y,n:()=>b,p:()=>I,t:()=>X,u:()=>B,w:()=>r,x:()=>p,z:()=>v});const g=function(L){const J=[];let o=0;for(let g=0;g<L.length;g++){let V=L.charCodeAt(g);V<128?J[o++]=V:V<2048?(J[o++]=V>>6|192,J[o++]=63&V|128):55296===(64512&V)&&g+1<L.length&&56320===(64512&L.charCodeAt(g+1))?(V=65536+((1023&V)<<10)+(1023&L.charCodeAt(++g)),J[o++]=V>>18|240,J[o++]=V>>12&63|128,J[o++]=V>>6&63|128,J[o++]=63&V|128):(J[o++]=V>>12|224,J[o++]=V>>6&63|128,J[o++]=63&V|128)}return J},V={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(L,J){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=J?this.byteToCharMapWebSafe_:this.byteToCharMap_,g=[];for(let V=0;V<L.length;V+=3){const J=L[V],q=V+1<L.length,I=q?L[V+1]:0,b=V+2<L.length,D=b?L[V+2]:0,Z=J>>2,C=(3&J)<<4|I>>4;let v=(15&I)<<2|D>>6,U=63&D;b||(U=64,q||(v=64)),g.push(o[Z],o[C],o[v],o[U])}return g.join("")},encodeString(L,J){return this.HAS_NATIVE_SUPPORT&&!J?btoa(L):this.encodeByteArray(g(L),J)},decodeString(L,J){return this.HAS_NATIVE_SUPPORT&&!J?atob(L):function(L){const J=[];let o=0,g=0;for(;o<L.length;){const V=L[o++];if(V<128)J[g++]=String.fromCharCode(V);else if(V>191&&V<224){const q=L[o++];J[g++]=String.fromCharCode((31&V)<<6|63&q)}else if(V>239&&V<365){const q=((7&V)<<18|(63&L[o++])<<12|(63&L[o++])<<6|63&L[o++])-65536;J[g++]=String.fromCharCode(55296+(q>>10)),J[g++]=String.fromCharCode(56320+(1023&q))}else{const q=L[o++],I=L[o++];J[g++]=String.fromCharCode((15&V)<<12|(63&q)<<6|63&I)}}return J.join("")}(this.decodeStringToByteArray(L,J))},decodeStringToByteArray(L,J){this.init_();const o=J?this.charToByteMapWebSafe_:this.charToByteMap_,g=[];for(let V=0;V<L.length;){const J=o[L.charAt(V++)],I=V<L.length?o[L.charAt(V)]:0;++V;const b=V<L.length?o[L.charAt(V)]:64;++V;const D=V<L.length?o[L.charAt(V)]:64;if(++V,null==J||null==I||null==b||null==D)throw new q;const Z=J<<2|I>>4;if(g.push(Z),64!==b){const L=I<<4&240|b>>2;if(g.push(L),64!==D){const L=b<<6&192|D;g.push(L)}}}return g},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}};class q extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I=function(L){return function(L){const J=g(L);return V.encodeByteArray(J,!0)}(L).replace(/\./g,"")},b=function(L){try{return V.decodeString(L,!0)}catch(J){console.error("base64Decode failed: ",J)}return null};const D=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof o.g)return o.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Z=()=>{try{return D()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let L;try{L=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(o){return}const J=L&&b(L[1]);return J&&JSON.parse(J)})()}catch(L){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${L}`)}},C=L=>{var J,o;return null===(o=null===(J=Z())||void 0===J?void 0:J.emulatorHosts)||void 0===o?void 0:o[L]},v=()=>{var L;return null===(L=Z())||void 0===L?void 0:L.config},U=L=>{var J;return null===(J=Z())||void 0===J?void 0:J[`_${L}`]};class k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((L,J)=>{this.resolve=L,this.reject=J}))}wrapCallback(L){return(J,o)=>{J?this.reject(J):this.resolve(o),"function"===typeof L&&(this.promise.catch((()=>{})),1===L.length?L(J):L(J,o))}}}function H(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function e(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(H())}function T(){const L="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof L&&void 0!==L.id}function O(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function l(){const L=H();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function a(){try{return"object"===typeof indexedDB}catch(L){return!1}}function S(){return new Promise(((L,J)=>{try{let o=!0;const g="validate-browser-context-for-indexeddb-analytics-module",V=self.indexedDB.open(g);V.onsuccess=()=>{V.result.close(),o||self.indexedDB.deleteDatabase(g),L(!0)},V.onupgradeneeded=()=>{o=!1},V.onerror=()=>{var L;J((null===(L=V.error)||void 0===L?void 0:L.message)||"")}}catch(o){J(o)}}))}function y(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class u extends Error{constructor(L,J,o){super(J),this.code=L,this.customData=o,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(L,J,o){this.service=L,this.serviceName=J,this.errors=o}create(L){const J=(arguments.length<=1?void 0:arguments[1])||{},o=`${this.service}/${L}`,g=this.errors[L],V=g?function(L,J){return L.replace(x,((L,o)=>{const g=J[o];return null!=g?String(g):`<${o}?>`}))}(g,J):"Error",q=`${this.serviceName}: ${V} (${o}).`;return new u(o,q,J)}}const x=/\{\$([^}]+)}/g;function Y(L){for(const J in L)if(Object.prototype.hasOwnProperty.call(L,J))return!1;return!0}function r(L,J){if(L===J)return!0;const o=Object.keys(L),g=Object.keys(J);for(const V of o){if(!g.includes(V))return!1;const o=L[V],q=J[V];if(h(o)&&h(q)){if(!r(o,q))return!1}else if(o!==q)return!1}for(const V of g)if(!o.includes(V))return!1;return!0}function h(L){return null!==L&&"object"===typeof L}function c(L){const J=[];for(const[o,g]of Object.entries(L))Array.isArray(g)?g.forEach((L=>{J.push(encodeURIComponent(o)+"="+encodeURIComponent(L))})):J.push(encodeURIComponent(o)+"="+encodeURIComponent(g));return J.length?"&"+J.join("&"):""}function m(L){const J={};return L.replace(/^\?/,"").split("&").forEach((L=>{if(L){const[o,g]=L.split("=");J[decodeURIComponent(o)]=decodeURIComponent(g)}})),J}function p(L){const J=L.indexOf("?");if(!J)return"";const o=L.indexOf("#",J);return L.substring(J,o>0?o:void 0)}function B(L,J){const o=new N(L,J);return o.subscribe.bind(o)}class N{constructor(L,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then((()=>{L(this)})).catch((L=>{this.error(L)}))}next(L){this.forEachObserver((J=>{J.next(L)}))}error(L){this.forEachObserver((J=>{J.error(L)})),this.close(L)}complete(){this.forEachObserver((L=>{L.complete()})),this.close()}subscribe(L,J,o){let g;if(void 0===L&&void 0===J&&void 0===o)throw new Error("Missing Observer.");g=function(L,J){if("object"!==typeof L||null===L)return!1;for(const o of J)if(o in L&&"function"===typeof L[o])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:J,complete:o},void 0===g.next&&(g.next=z),void 0===g.error&&(g.error=z),void 0===g.complete&&(g.complete=z);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?g.error(this.finalError):g.complete()}catch(L){}})),this.observers.push(g),V}unsubscribeOne(L){void 0!==this.observers&&void 0!==this.observers[L]&&(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,L)}sendOne(L,J){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{J(this.observers[L])}catch(o){"undefined"!==typeof console&&console.error&&console.error(o)}}))}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function z(){}const P=1e3,d=2,w=144e5,K=.5;function X(L){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;const o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:P)*Math.pow(J,L),g=Math.round(K*o*(Math.random()-.5)*2);return Math.min(w,o+g)}function W(L){return L&&L._delegate?L._delegate:L}},11016:(L,J,o)=>{o.d(J,{e:()=>q.h,h:()=>vL,k:()=>A,l:()=>oL,m:()=>gL,n:()=>LL,r:()=>bL,u:()=>JL,x:()=>qL,z:()=>VL,A:()=>IL,D:()=>eL,I:()=>kL,H:()=>HL,M:()=>UL,O:()=>OL,P:()=>TL,S:()=>lL});var g=o(11018),V=o(11030),q=o(11022);let I,b;const D=new WeakMap,Z=new WeakMap,C=new WeakMap,v=new WeakMap,U=new WeakMap;let k={get(L,J,o){if(L instanceof IDBTransaction){if("done"===J)return Z.get(L);if("objectStoreNames"===J)return L.objectStoreNames||C.get(L);if("store"===J)return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return T(L[J])},set:(L,J,o)=>(L[J]=o,!0),has:(L,J)=>L instanceof IDBTransaction&&("done"===J||"store"===J)||J in L};function H(L){return L!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(b||(b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(L)?function(){for(var J=arguments.length,o=new Array(J),g=0;g<J;g++)o[g]=arguments[g];return L.apply(O(this),o),T(D.get(this))}:function(){for(var J=arguments.length,o=new Array(J),g=0;g<J;g++)o[g]=arguments[g];return T(L.apply(O(this),o))}:function(J){for(var o=arguments.length,g=new Array(o>1?o-1:0),V=1;V<o;V++)g[V-1]=arguments[V];const q=L.call(O(this),J,...g);return C.set(q,J.sort?J.sort():[J]),T(q)}}function e(L){return"function"===typeof L?H(L):(L instanceof IDBTransaction&&function(L){if(Z.has(L))return;const J=new Promise(((J,o)=>{const g=()=>{L.removeEventListener("complete",V),L.removeEventListener("error",q),L.removeEventListener("abort",q)},V=()=>{J(),g()},q=()=>{o(L.error||new DOMException("AbortError","AbortError")),g()};L.addEventListener("complete",V),L.addEventListener("error",q),L.addEventListener("abort",q)}));Z.set(L,J)}(L),J=L,(I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((L=>J instanceof L))?new Proxy(L,k):L);var J}function T(L){if(L instanceof IDBRequest)return function(L){const J=new Promise(((J,o)=>{const g=()=>{L.removeEventListener("success",V),L.removeEventListener("error",q)},V=()=>{J(T(L.result)),g()},q=()=>{o(L.error),g()};L.addEventListener("success",V),L.addEventListener("error",q)}));return J.then((J=>{J instanceof IDBCursor&&D.set(J,L)})).catch((()=>{})),U.set(J,L),J}(L);if(v.has(L))return v.get(L);const J=e(L);return J!==L&&(v.set(L,J),U.set(J,L)),J}const O=L=>U.get(L);const l=["get","getKey","getAll","getAllKeys","count"],a=["put","add","delete","clear"],S=new Map;function y(L,J){if(!(L instanceof IDBDatabase)||J in L||"string"!==typeof J)return;if(S.get(J))return S.get(J);const o=J.replace(/FromIndex$/,""),g=J!==o,V=a.includes(o);if(!(o in(g?IDBIndex:IDBObjectStore).prototype)||!V&&!l.includes(o))return;const q=async function(L){const J=this.transaction(L,V?"readwrite":"readonly");let q=J.store;for(var I=arguments.length,b=new Array(I>1?I-1:0),D=1;D<I;D++)b[D-1]=arguments[D];return g&&(q=q.index(b.shift())),(await Promise.all([q[o](...b),V&&J.done]))[0]};return S.set(J,q),q}k=(L=>({...L,get:(J,o,g)=>y(J,o)||L.get(J,o,g),has:(J,o)=>!!y(J,o)||L.has(J,o)}))(k);class u{constructor(L){this.container=L}getPlatformInfoString(){return this.container.getProviders().map((L=>{if(function(L){const J=L.getComponent();return"VERSION"===(null===J||void 0===J?void 0:J.type)}(L)){const J=L.getImmediate();return`${J.library}/${J.version}`}return null})).filter((L=>L)).join(" ")}}const j="@firebase/app",x="0.9.13",Y=new V.e("@firebase/app"),r="@firebase/app-compat",h="@firebase/analytics-compat",c="@firebase/analytics",m="@firebase/app-check-compat",p="@firebase/app-check",B="@firebase/auth",N="@firebase/auth-compat",z="@firebase/database",P="@firebase/database-compat",d="@firebase/functions",w="@firebase/functions-compat",K="@firebase/installations",X="@firebase/installations-compat",W="@firebase/messaging",Q="@firebase/messaging-compat",E="@firebase/performance",F="@firebase/performance-compat",n="@firebase/remote-config",f="@firebase/remote-config-compat",R="@firebase/storage",s="@firebase/storage-compat",i="@firebase/firestore",t="@firebase/firestore-compat",M="firebase",A="[DEFAULT]",G={[j]:"fire-core",[r]:"fire-core-compat",[c]:"fire-analytics",[h]:"fire-analytics-compat",[p]:"fire-app-check",[m]:"fire-app-check-compat",[B]:"fire-auth",[N]:"fire-auth-compat",[z]:"fire-rtdb",[P]:"fire-rtdb-compat",[d]:"fire-fn",[w]:"fire-fn-compat",[K]:"fire-iid",[X]:"fire-iid-compat",[W]:"fire-fcm",[Q]:"fire-fcm-compat",[E]:"fire-perf",[F]:"fire-perf-compat",[n]:"fire-rc",[f]:"fire-rc-compat",[R]:"fire-gcs",[s]:"fire-gcs-compat",[i]:"fire-fst",[t]:"fire-fst-compat","fire-js":"fire-js",[M]:"fire-js-all"},LL=new Map,JL=new Map;function oL(L,J){try{L.container.Cf(J)}catch(o){Y.debug(`Component ${J.name} failed to register with FirebaseApp ${L.name}`,o)}}function gL(L,J){L.container.addOrOverwriteComponent(J)}function VL(L){const J=L.name;if(JL.has(J))return Y.debug(`There were multiple attempts to register component ${J}.`),!1;JL.set(J,L);for(const o of LL.values())oL(o,L);return!0}function qL(L,J){const o=L.container.getProvider("heartbeat").getImmediate({optional:!0});return o&&o.triggerHeartbeat(),L.container.getProvider(J)}function IL(L,J){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;qL(L,J).clearInstance(o)}function bL(){JL.clear()}const DL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ZL=new q.e("app","Firebase",DL);class CL{constructor(L,J,o){this._isDeleted=!1,this._options=Object.assign({},L),this._config=Object.assign({},J),this._name=J.name,this._automaticDataCollectionEnabled=J.automaticDataCollectionEnabled,this._container=o,this.container.Cf(new g.d("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(L){this.checkDestroyed(),this._automaticDataCollectionEnabled=L}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(L){this._isDeleted=L}checkDestroyed(){if(this.isDeleted)throw ZL.create("app-deleted",{appName:this._name})}}const vL="9.23.0";function UL(L){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=L;if("object"!==typeof J){J={name:J}}const V=Object.assign({name:A,automaticDataCollectionEnabled:!1},J),I=V.name;if("string"!==typeof I||!I)throw ZL.create("bad-app-name",{appName:String(I)});if(o||(o=(0,q.z)()),!o)throw ZL.create("no-options");const b=LL.get(I);if(b){if((0,q.w)(o,b.options)&&(0,q.w)(V,b.config))return b;throw ZL.create("duplicate-app",{appName:I})}const D=new g.c(I);for(const g of JL.values())D.Cf(g);const Z=new CL(o,V,D);return LL.set(I,Z),Z}function kL(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;const J=LL.get(L);if(!J&&L===A&&(0,q.z)())return UL();if(!J)throw ZL.create("no-app",{appName:L});return J}function HL(){return Array.from(LL.values())}async function eL(L){const J=L.name;LL.has(J)&&(LL.delete(J),await Promise.all(L.container.getProviders().map((L=>L.delete()))),L.isDeleted=!0)}function TL(L,J,o){var V;let q=null!==(V=G[L])&&void 0!==V?V:L;o&&(q+=`-${o}`);const I=q.match(/\s|\//),b=J.match(/\s|\//);if(I||b){const L=[`Unable to register library "${q}" with version "${J}":`];return I&&L.push(`library name "${q}" contains illegal characters (whitespace or "/")`),I&&b&&L.push("and"),b&&L.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void Y.warn(L.join(" "))}VL(new g.d(`${q}-version`,(()=>({library:q,version:J})),"VERSION"))}function OL(L,J){if(null!==L&&"function"!==typeof L)throw ZL.create("invalid-log-argument");(0,V.h)(L,J)}function lL(L){(0,V.g)(L)}const aL="firebase-heartbeat-store";let SL=null;function yL(){return SL||(SL=function(L,J){let{blocked:o,upgrade:g,blocking:V,terminated:q}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const I=indexedDB.open(L,J),b=T(I);return g&&I.addEventListener("upgradeneeded",(L=>{g(T(I.result),L.oldVersion,L.newVersion,T(I.transaction),L)})),o&&I.addEventListener("blocked",(L=>o(L.oldVersion,L.newVersion,L))),b.then((L=>{q&&L.addEventListener("close",(()=>q())),V&&L.addEventListener("versionchange",(L=>V(L.oldVersion,L.newVersion,L)))})).catch((()=>{})),b}("firebase-heartbeat-database",1,{upgrade:(L,J)=>{if(0===J)L.createObjectStore(aL)}}).catch((L=>{throw ZL.create("idb-open",{originalErrorMessage:L.message})}))),SL}async function uL(L,J){try{const o=(await yL()).transaction(aL,"readwrite"),g=o.objectStore(aL);await g.put(J,jL(L)),await o.done}catch(o){if(o instanceof q.h)Y.warn(o.message);else{const L=ZL.create("idb-set",{originalErrorMessage:null===o||void 0===o?void 0:o.message});Y.warn(L.message)}}}function jL(L){return`${L.name}!${L.options.appId}`}class xL{constructor(L){this.container=L,this._heartbeatsCache=null;const J=this.container.getProvider("app").getImmediate();this.Oi=new rL(J),this._heartbeatsCachePromise=this.Oi.read().then((L=>(this._heartbeatsCache=L,L)))}async triggerHeartbeat(){const L=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),J=YL();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==J&&!this._heartbeatsCache.heartbeats.some((L=>L.date===J)))return this._heartbeatsCache.heartbeats.push({date:J,agent:L}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((L=>{const J=new Date(L.date).valueOf();return Date.now()-J<=2592e6})),this.Oi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const L=YL(),{heartbeatsToSend:J,unsentEntries:o}=function(L){let J=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const o=[];let g=L.slice();for(const V of L){const L=o.find((L=>L.agent===V.agent));if(L){if(L.dates.push(V.date),hL(o)>J){L.dates.pop();break}}else if(o.push({agent:V.agent,dates:[V.date]}),hL(o)>J){o.pop();break}g=g.slice(1)}return{heartbeatsToSend:o,unsentEntries:g}}(this._heartbeatsCache.heartbeats),g=(0,q.p)(JSON.stringify({version:2,heartbeats:J}));return this._heartbeatsCache.lastSentHeartbeatDate=L,o.length>0?(this._heartbeatsCache.heartbeats=o,await this.Oi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Oi.overwrite(this._heartbeatsCache)),g}}function YL(){return(new Date).toISOString().substring(0,10)}class rL{constructor(L){this.app=L,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,q.W)()&&(0,q.gb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(L){try{const J=await yL();return await J.transaction(aL).objectStore(aL).get(jL(L))}catch(J){if(J instanceof q.h)Y.warn(J.message);else{const L=ZL.create("idb-get",{originalErrorMessage:null===J||void 0===J?void 0:J.message});Y.warn(L.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(L){var J;if(await this._canUseIndexedDBPromise){const o=await this.read();return uL(this.app,{lastSentHeartbeatDate:null!==(J=L.lastSentHeartbeatDate)&&void 0!==J?J:o.lastSentHeartbeatDate,heartbeats:L.heartbeats})}}async add(L){var J;if(await this._canUseIndexedDBPromise){const o=await this.read();return uL(this.app,{lastSentHeartbeatDate:null!==(J=L.lastSentHeartbeatDate)&&void 0!==J?J:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...L.heartbeats]})}}}function hL(L){return(0,q.p)(JSON.stringify({version:2,heartbeats:L})).length}var cL;cL="",VL(new g.d("platform-logger",(L=>new u(L)),"PRIVATE")),VL(new g.d("heartbeat",(L=>new xL(L)),"PRIVATE")),TL(j,x,cL),TL(j,x,"esm2017"),TL("fire-js","")},11018:(L,J,o)=>{o.d(J,{c:()=>b,d:()=>V});var g=o(11022);class V{constructor(L,J,o){this.name=L,this.instanceFactory=J,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(L){return this.instantiationMode=L,this}setMultipleInstances(L){return this.multipleInstances=L,this}setServiceProps(L){return this.serviceProps=L,this}setInstanceCreatedCallback(L){return this.onInstanceCreated=L,this}}const q="[DEFAULT]";class I{constructor(L,J){this.name=L,this.container=J,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(L){const J=this.normalizeInstanceIdentifier(L);if(!this.instancesDeferred.has(J)){const L=new g.d;if(this.instancesDeferred.set(J,L),this.isInitialized(J)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:J});o&&L.resolve(o)}catch(o){}}return this.instancesDeferred.get(J).promise}getImmediate(L){var J;const o=this.normalizeInstanceIdentifier(null===L||void 0===L?void 0:L.identifier),g=null!==(J=null===L||void 0===L?void 0:L.optional)&&void 0!==J&&J;if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(g)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(V){if(g)return null;throw V}}getComponent(){return this.component}setComponent(L){if(L.name!==this.name)throw Error(`Mismatching Component ${L.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=L,this.shouldAutoInitialize()){if(function(L){return"EAGER"===L.instantiationMode}(L))try{this.getOrInitializeService({instanceIdentifier:q})}catch(J){}for(const[L,o]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(L);try{const L=this.getOrInitializeService({instanceIdentifier:g});o.resolve(L)}catch(J){}}}}clearInstance(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;this.instancesDeferred.delete(L),this.instancesOptions.delete(L),this.instances.delete(L)}async delete(){const L=Array.from(this.instances.values());await Promise.all([...L.filter((L=>"INTERNAL"in L)).map((L=>L.INTERNAL.delete())),...L.filter((L=>"_delete"in L)).map((L=>L._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instances.has(L)}getOptions(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.instancesOptions.get(L)||{}}initialize(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:J={}}=L,o=this.normalizeInstanceIdentifier(L.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const g=this.getOrInitializeService({instanceIdentifier:o,options:J});for(const[V,q]of this.instancesDeferred.entries()){o===this.normalizeInstanceIdentifier(V)&&q.resolve(g)}return g}ui(L,J){var o;const g=this.normalizeInstanceIdentifier(J),V=null!==(o=this.onInitCallbacks.get(g))&&void 0!==o?o:new Set;V.add(L),this.onInitCallbacks.set(g,V);const q=this.instances.get(g);return q&&L(q,g),()=>{V.delete(L)}}invokeOnInitCallbacks(L,J){const o=this.onInitCallbacks.get(J);if(o)for(const V of o)try{V(L,J)}catch(g){}}getOrInitializeService(L){let{instanceIdentifier:J,options:o={}}=L,g=this.instances.get(J);if(!g&&this.component&&(g=this.component.instanceFactory(this.container,{instanceIdentifier:(V=J,V===q?void 0:V),options:o}),this.instances.set(J,g),this.instancesOptions.set(J,o),this.invokeOnInitCallbacks(g,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,g)}catch(I){}var V;return g||null}normalizeInstanceIdentifier(){let L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q;return this.component?this.component.multipleInstances?L:q:L}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class b{constructor(L){this.name=L,this.providers=new Map}Cf(L){const J=this.getProvider(L.name);if(J.isComponentSet())throw new Error(`Component ${L.name} has already been registered with ${this.name}`);J.setComponent(L)}addOrOverwriteComponent(L){this.getProvider(L.name).isComponentSet()&&this.providers.delete(L.name),this.Cf(L)}getProvider(L){if(this.providers.has(L))return this.providers.get(L);const J=new I(L,this);return this.providers.set(L,J),J}getProviders(){return Array.from(this.providers.values())}}},11030:(L,J,o)=>{o.d(J,{d:()=>V,e:()=>Z,g:()=>C,h:()=>v});const g=[];var V;!function(L){L[L.DEBUG=0]="DEBUG",L[L.VERBOSE=1]="VERBOSE",L[L.INFO=2]="INFO",L[L.WARN=3]="WARN",L[L.ERROR=4]="ERROR",L[L.SILENT=5]="SILENT"}(V||(V={}));const q={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},I=V.INFO,b={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},D=function(L,J){if(J<L.logLevel)return;const o=(new Date).toISOString(),g=b[J];if(!g)throw new Error(`Attempted to log a message with an invalid logType (value: ${J})`);for(var V=arguments.length,q=new Array(V>2?V-2:0),I=2;I<V;I++)q[I-2]=arguments[I];console[g](`[${o}]  ${L.name}:`,...q)};class Z{constructor(L){this.name=L,this._logLevel=I,this._logHandler=D,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in V))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"===typeof L?q[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!==typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(){for(var L=arguments.length,J=new Array(L),o=0;o<L;o++)J[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...J),this._logHandler(this,V.DEBUG,...J)}log(){for(var L=arguments.length,J=new Array(L),o=0;o<L;o++)J[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...J),this._logHandler(this,V.VERBOSE,...J)}info(){for(var L=arguments.length,J=new Array(L),o=0;o<L;o++)J[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,V.INFO,...J),this._logHandler(this,V.INFO,...J)}warn(){for(var L=arguments.length,J=new Array(L),o=0;o<L;o++)J[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,V.WARN,...J),this._logHandler(this,V.WARN,...J)}error(){for(var L=arguments.length,J=new Array(L),o=0;o<L;o++)J[o]=arguments[o];this._userLogHandler&&this._userLogHandler(this,V.ERROR,...J),this._logHandler(this,V.ERROR,...J)}}function C(L){g.forEach((J=>{J.setLogLevel(L)}))}function v(L,J){for(const o of g){let g=null;J&&J.level&&(g=q[J.level]),o.userLogHandler=null===L?null:function(J,o){for(var q=arguments.length,I=new Array(q>2?q-2:0),b=2;b<q;b++)I[b-2]=arguments[b];const D=I.map((L=>{if(null==L)return null;if("string"===typeof L)return L;if("number"===typeof L||"boolean"===typeof L)return L.toString();if(L instanceof Error)return L.message;try{return JSON.stringify(L)}catch(J){return null}})).filter((L=>L)).join(" ");o>=(null!==g&&void 0!==g?g:J.logLevel)&&L({level:V[o].toLowerCase(),message:D,args:I,type:J.name})}}}}}]);