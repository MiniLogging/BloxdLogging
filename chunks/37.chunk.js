/*! For license information please see aes0t8.37.8a459e30.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{10947:(b,G,i)=>{i.d(G,{$:()=>d,A:()=>q,C:()=>J,F:()=>o,H:()=>e,J:()=>F,K:()=>v,M:()=>y,N:()=>W,Q:()=>x,R:()=>l,U:()=>u,Y:()=>L,ab:()=>M,c:()=>s,e:()=>j,f:()=>H,j:()=>A,n:()=>E,p:()=>z,q:()=>X,u:()=>r,w:()=>f,z:()=>D});const g=function(b){const G=[];let i=0;for(let g=0;g<b.length;g++){let c=b.charCodeAt(g);c<128?G[i++]=c:c<2048?(G[i++]=c>>6|192,G[i++]=63&c|128):55296===(64512&c)&&g+1<b.length&&56320===(64512&b.charCodeAt(g+1))?(c=65536+((1023&c)<<10)+(1023&b.charCodeAt(++g)),G[i++]=c>>18|240,G[i++]=c>>12&63|128,G[i++]=c>>6&63|128,G[i++]=63&c|128):(G[i++]=c>>12|224,G[i++]=c>>6&63|128,G[i++]=63&c|128)}return G},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(b,G){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,g=[];for(let c=0;c<b.length;c+=3){const G=b[c],V=c+1<b.length,z=V?b[c+1]:0,E=c+2<b.length,Z=E?b[c+2]:0,Y=G>>2,J=(3&G)<<4|z>>4;let q=(15&z)<<2|Z>>6,o=63&Z;E||(o=64,V||(q=64)),g.push(i[Y],i[J],i[q],i[o])}return g.join("")},encodeString(b,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(b):this.encodeByteArray(g(b),G)},decodeString(b,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(b):function(b){const G=[];let i=0,g=0;for(;i<b.length;){const c=b[i++];if(c<128)G[g++]=String.fromCharCode(c);else if(c>191&&c<224){const V=b[i++];G[g++]=String.fromCharCode((31&c)<<6|63&V)}else if(c>239&&c<365){const V=((7&c)<<18|(63&b[i++])<<12|(63&b[i++])<<6|63&b[i++])-65536;G[g++]=String.fromCharCode(55296+(V>>10)),G[g++]=String.fromCharCode(56320+(1023&V))}else{const V=b[i++],z=b[i++];G[g++]=String.fromCharCode((15&c)<<12|(63&V)<<6|63&z)}}return G.join("")}(this.decodeStringToByteArray(b,G))},decodeStringToByteArray(b,G){this.init_();const i=G?this.charToByteMapWebSafe_:this.charToByteMap_,g=[];for(let c=0;c<b.length;){const G=i[b.charAt(c++)],z=c<b.length?i[b.charAt(c)]:0;++c;const E=c<b.length?i[b.charAt(c)]:64;++c;const Z=c<b.length?i[b.charAt(c)]:64;if(++c,null==G||null==z||null==E||null==Z)throw new V;const Y=G<<2|z>>4;if(g.push(Y),64!==E){const b=z<<4&240|E>>2;if(g.push(b),64!==Z){const b=E<<6&192|Z;g.push(b)}}}return g},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class V extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z=function(b){return function(b){const G=g(b);return c.encodeByteArray(G,!0)}(b).replace(/\./g,"")},E=function(b){try{return c.decodeString(b,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};const Z=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof i.g)return i.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Y=()=>{try{return Z()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(i){return}const G=b&&E(b[1]);return G&&JSON.parse(G)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},J=b=>{var G,i;return null===(i=null===(G=Y())||void 0===G?void 0:G.emulatorHosts)||void 0===i?void 0:i[b]},q=()=>{var b;return null===(b=Y())||void 0===b?void 0:b.config},o=b=>{var G;return null===(G=Y())||void 0===G?void 0:G[`_${b}`]};class s{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((b,G)=>{this.resolve=b,this.reject=G}))}wrapCallback(b){return(G,i)=>{G?this.reject(G):this.resolve(i),"function"===typeof b&&(this.promise.catch((()=>{})),1===b.length?b(G):b(G,i))}}}function F(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(F())}function v(){const b="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof b&&void 0!==b.id}function u(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function W(){const b=F();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function x(){try{return"object"===typeof indexedDB}catch(b){return!1}}function M(){return new Promise(((b,G)=>{try{let i=!0;const g="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(g);c.onsuccess=()=>{c.result.close(),i||self.indexedDB.deleteDatabase(g),b(!0)},c.onupgradeneeded=()=>{i=!1},c.onerror=()=>{var b;G((null===(b=c.error)||void 0===b?void 0:b.message)||"")}}catch(i){G(i)}}))}function A(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class H extends Error{constructor(b,G,i){super(G),this.code=b,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,H.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j.prototype.create)}}class j{constructor(b,G,i){this.service=b,this.serviceName=G,this.errors=i}create(b){const G=(arguments.length<=1?void 0:arguments[1])||{},i=`${this.service}/${b}`,g=this.errors[b],c=g?function(b,G){return b.replace(R,((b,i)=>{const g=G[i];return null!=g?String(g):`<${i}?>`}))}(g,G):"Error",V=`${this.serviceName}: ${c} (${i}).`;return new H(i,V,G)}}const R=/\{\$([^}]+)}/g;function y(b){for(const G in b)if(Object.prototype.hasOwnProperty.call(b,G))return!1;return!0}function f(b,G){if(b===G)return!0;const i=Object.keys(b),g=Object.keys(G);for(const c of i){if(!g.includes(c))return!1;const i=b[c],V=G[c];if(C(i)&&C(V)){if(!f(i,V))return!1}else if(i!==V)return!1}for(const c of g)if(!i.includes(c))return!1;return!0}function C(b){return null!==b&&"object"===typeof b}function d(b){const G=[];for(const[i,g]of Object.entries(b))Array.isArray(g)?g.forEach((b=>{G.push(encodeURIComponent(i)+"="+encodeURIComponent(b))})):G.push(encodeURIComponent(i)+"="+encodeURIComponent(g));return G.length?"&"+G.join("&"):""}function L(b){const G={};return b.replace(/^\?/,"").split("&").forEach((b=>{if(b){const[i,g]=b.split("=");G[decodeURIComponent(i)]=decodeURIComponent(g)}})),G}function D(b){const G=b.indexOf("?");if(!G)return"";const i=b.indexOf("#",G);return b.substring(G,i>0?i:void 0)}function r(b,G){const i=new N(b,G);return i.subscribe.bind(i)}class N{constructor(b,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then((()=>{b(this)})).catch((b=>{this.error(b)}))}next(b){this.forEachObserver((G=>{G.next(b)}))}error(b){this.forEachObserver((G=>{G.error(b)})),this.close(b)}complete(){this.forEachObserver((b=>{b.complete()})),this.close()}subscribe(b,G,i){let g;if(void 0===b&&void 0===G&&void 0===i)throw new Error("Missing Observer.");g=function(b,G){if("object"!==typeof b||null===b)return!1;for(const i of G)if(i in b&&"function"===typeof b[i])return!0;return!1}(b,["next","error","complete"])?b:{next:b,error:G,complete:i},void 0===g.next&&(g.next=K),void 0===g.error&&(g.error=K),void 0===g.complete&&(g.complete=K);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?g.error(this.finalError):g.complete()}catch(b){}})),this.observers.push(g),c}unsubscribeOne(b){void 0!==this.observers&&void 0!==this.observers[b]&&(delete this.observers[b],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(b){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,b)}sendOne(b,G){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[b])try{G(this.observers[b])}catch(i){"undefined"!==typeof console&&console.error&&console.error(i)}}))}close(b){this.finalized||(this.finalized=!0,void 0!==b&&(this.finalError=b),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function K(){}const w=1e3,n=2,U=144e5,t=.5;function X(b){let G=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:w)*Math.pow(G,b),g=Math.round(t*i*(Math.random()-.5)*2);return Math.min(U,i+g)}function e(b){return b&&b._delegate?b._delegate:b}},10935:(b,G,i)=>{i.d(G,{c:()=>V.f,e:()=>qb,i:()=>k,j:()=>ib,n:()=>gb,q:()=>bb,u:()=>Eb,v:()=>Gb,w:()=>Vb,x:()=>cb,B:()=>zb,E:()=>lb,H:()=>sb,F:()=>Fb,L:()=>ob,M:()=>ub,P:()=>vb,R:()=>Wb});var g=i(10943),c=i(10950),V=i(10947);let z,E;const Z=new WeakMap,Y=new WeakMap,J=new WeakMap,q=new WeakMap,o=new WeakMap;let s={get(b,G,i){if(b instanceof IDBTransaction){if("done"===G)return Y.get(b);if("objectStoreNames"===G)return b.objectStoreNames||J.get(b);if("store"===G)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return v(b[G])},set:(b,G,i)=>(b[G]=i,!0),has:(b,G)=>b instanceof IDBTransaction&&("done"===G||"store"===G)||G in b};function F(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(E||(E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(b)?function(){for(var G=arguments.length,i=new Array(G),g=0;g<G;g++)i[g]=arguments[g];return b.apply(u(this),i),v(Z.get(this))}:function(){for(var G=arguments.length,i=new Array(G),g=0;g<G;g++)i[g]=arguments[g];return v(b.apply(u(this),i))}:function(G){for(var i=arguments.length,g=new Array(i>1?i-1:0),c=1;c<i;c++)g[c-1]=arguments[c];const V=b.call(u(this),G,...g);return J.set(V,G.sort?G.sort():[G]),v(V)}}function l(b){return"function"===typeof b?F(b):(b instanceof IDBTransaction&&function(b){if(Y.has(b))return;const G=new Promise(((G,i)=>{const g=()=>{b.removeEventListener("complete",c),b.removeEventListener("error",V),b.removeEventListener("abort",V)},c=()=>{G(),g()},V=()=>{i(b.error||new DOMException("AbortError","AbortError")),g()};b.addEventListener("complete",c),b.addEventListener("error",V),b.addEventListener("abort",V)}));Y.set(b,G)}(b),G=b,(z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((b=>G instanceof b))?new Proxy(b,s):b);var G}function v(b){if(b instanceof IDBRequest)return function(b){const G=new Promise(((G,i)=>{const g=()=>{b.removeEventListener("success",c),b.removeEventListener("error",V)},c=()=>{G(v(b.result)),g()},V=()=>{i(b.error),g()};b.addEventListener("success",c),b.addEventListener("error",V)}));return G.then((G=>{G instanceof IDBCursor&&Z.set(G,b)})).catch((()=>{})),o.set(G,b),G}(b);if(q.has(b))return q.get(b);const G=l(b);return G!==b&&(q.set(b,G),o.set(G,b)),G}const u=b=>o.get(b);const W=["get","getKey","getAll","getAllKeys","count"],x=["put","add","delete","clear"],M=new Map;function A(b,G){if(!(b instanceof IDBDatabase)||G in b||"string"!==typeof G)return;if(M.get(G))return M.get(G);const i=G.replace(/FromIndex$/,""),g=G!==i,c=x.includes(i);if(!(i in(g?IDBIndex:IDBObjectStore).prototype)||!c&&!W.includes(i))return;const V=async function(b){const G=this.transaction(b,c?"readwrite":"readonly");let V=G.store;for(var z=arguments.length,E=new Array(z>1?z-1:0),Z=1;Z<z;Z++)E[Z-1]=arguments[Z];return g&&(V=V.index(E.shift())),(await Promise.all([V[i](...E),c&&G.done]))[0]};return M.set(G,V),V}s=(b=>({...b,get:(G,i,g)=>A(G,i)||b.get(G,i,g),has:(G,i)=>!!A(G,i)||b.has(G,i)}))(s);class H{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map((b=>{if(function(b){const G=b.getComponent();return"VERSION"===(null===G||void 0===G?void 0:G.type)}(b)){const G=b.getImmediate();return`${G.library}/${G.version}`}return null})).filter((b=>b)).join(" ")}}const j="@firebase/app",R="0.9.13",y=new c.f("@firebase/app"),f="@firebase/app-compat",C="@firebase/analytics-compat",d="@firebase/analytics",L="@firebase/app-check-compat",D="@firebase/app-check",r="@firebase/auth",N="@firebase/auth-compat",K="@firebase/database",w="@firebase/database-compat",n="@firebase/functions",U="@firebase/functions-compat",t="@firebase/installations",X="@firebase/installations-compat",e="@firebase/messaging",O="@firebase/messaging-compat",p="@firebase/performance",S="@firebase/performance-compat",P="@firebase/remote-config",m="@firebase/remote-config-compat",Q="@firebase/storage",I="@firebase/storage-compat",h="@firebase/firestore",a="@firebase/firestore-compat",B="firebase",k="[DEFAULT]",T={[j]:"fire-core",[f]:"fire-core-compat",[d]:"fire-analytics",[C]:"fire-analytics-compat",[D]:"fire-app-check",[L]:"fire-app-check-compat",[r]:"fire-auth",[N]:"fire-auth-compat",[K]:"fire-rtdb",[w]:"fire-rtdb-compat",[n]:"fire-fn",[U]:"fire-fn-compat",[t]:"fire-iid",[X]:"fire-iid-compat",[e]:"fire-fcm",[O]:"fire-fcm-compat",[p]:"fire-perf",[S]:"fire-perf-compat",[P]:"fire-rc",[m]:"fire-rc-compat",[Q]:"fire-gcs",[I]:"fire-gcs-compat",[h]:"fire-fst",[a]:"fire-fst-compat","fire-js":"fire-js",[B]:"fire-js-all"},bb=new Map,Gb=new Map;function ib(b,G){try{b.container.uf(G)}catch(i){y.debug(`Component ${G.name} failed to register with FirebaseApp ${b.name}`,i)}}function gb(b,G){b.container.addOrOverwriteComponent(G)}function cb(b){const G=b.name;if(Gb.has(G))return y.debug(`There were multiple attempts to register component ${G}.`),!1;Gb.set(G,b);for(const i of bb.values())ib(i,b);return!0}function Vb(b,G){const i=b.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),b.container.getProvider(G)}function zb(b,G){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;Vb(b,G).clearInstance(i)}function Eb(){Gb.clear()}const Zb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Yb=new V.e("app","Firebase",Zb);class Jb{constructor(b,G,i){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},G),this._name=G.name,this._automaticDataCollectionEnabled=G.automaticDataCollectionEnabled,this._container=i,this.container.uf(new g.e("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw Yb.create("app-deleted",{appName:this._name})}}const qb="9.23.0";function ob(b){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=b;if("object"!==typeof G){G={name:G}}const c=Object.assign({name:k,automaticDataCollectionEnabled:!1},G),z=c.name;if("string"!==typeof z||!z)throw Yb.create("bad-app-name",{appName:String(z)});if(i||(i=(0,V.A)()),!i)throw Yb.create("no-options");const E=bb.get(z);if(E){if((0,V.w)(i,E.options)&&(0,V.w)(c,E.config))return E;throw Yb.create("duplicate-app",{appName:z})}const Z=new g.b(z);for(const g of Gb.values())Z.uf(g);const Y=new Jb(i,c,Z);return bb.set(z,Y),Y}function sb(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;const G=bb.get(b);if(!G&&b===k&&(0,V.A)())return ob();if(!G)throw Yb.create("no-app",{appName:b});return G}function Fb(){return Array.from(bb.values())}async function lb(b){const G=b.name;bb.has(G)&&(bb.delete(G),await Promise.all(b.container.getProviders().map((b=>b.delete()))),b.isDeleted=!0)}function vb(b,G,i){var c;let V=null!==(c=T[b])&&void 0!==c?c:b;i&&(V+=`-${i}`);const z=V.match(/\s|\//),E=G.match(/\s|\//);if(z||E){const b=[`Unable to register library "${V}" with version "${G}":`];return z&&b.push(`library name "${V}" contains illegal characters (whitespace or "/")`),z&&E&&b.push("and"),E&&b.push(`version name "${G}" contains illegal characters (whitespace or "/")`),void y.warn(b.join(" "))}cb(new g.e(`${V}-version`,(()=>({library:V,version:G})),"VERSION"))}function ub(b,G){if(null!==b&&"function"!==typeof b)throw Yb.create("invalid-log-argument");(0,c.i)(b,G)}function Wb(b){(0,c.h)(b)}const xb="firebase-heartbeat-store";let Mb=null;function Ab(){return Mb||(Mb=function(b,G){let{blocked:i,upgrade:g,blocking:c,terminated:V}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const z=indexedDB.open(b,G),E=v(z);return g&&z.addEventListener("upgradeneeded",(b=>{g(v(z.result),b.oldVersion,b.newVersion,v(z.transaction),b)})),i&&z.addEventListener("blocked",(b=>i(b.oldVersion,b.newVersion,b))),E.then((b=>{V&&b.addEventListener("close",(()=>V())),c&&b.addEventListener("versionchange",(b=>c(b.oldVersion,b.newVersion,b)))})).catch((()=>{})),E}("firebase-heartbeat-database",1,{upgrade:(b,G)=>{if(0===G)b.createObjectStore(xb)}}).catch((b=>{throw Yb.create("idb-open",{originalErrorMessage:b.message})}))),Mb}async function Hb(b,G){try{const i=(await Ab()).transaction(xb,"readwrite"),g=i.objectStore(xb);await g.put(G,jb(b)),await i.done}catch(i){if(i instanceof V.f)y.warn(i.message);else{const b=Yb.create("idb-set",{originalErrorMessage:null===i||void 0===i?void 0:i.message});y.warn(b.message)}}}function jb(b){return`${b.name}!${b.options.appId}`}class Rb{constructor(b){this.container=b,this._heartbeatsCache=null;const G=this.container.getProvider("app").getImmediate();this.Ji=new fb(G),this._heartbeatsCachePromise=this.Ji.read().then((b=>(this._heartbeatsCache=b,b)))}async triggerHeartbeat(){const b=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),G=yb();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==G&&!this._heartbeatsCache.heartbeats.some((b=>b.date===G)))return this._heartbeatsCache.heartbeats.push({date:G,agent:b}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((b=>{const G=new Date(b.date).valueOf();return Date.now()-G<=2592e6})),this.Ji.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const b=yb(),{heartbeatsToSend:G,unsentEntries:i}=function(b){let G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const i=[];let g=b.slice();for(const c of b){const b=i.find((b=>b.agent===c.agent));if(b){if(b.dates.push(c.date),Cb(i)>G){b.dates.pop();break}}else if(i.push({agent:c.agent,dates:[c.date]}),Cb(i)>G){i.pop();break}g=g.slice(1)}return{heartbeatsToSend:i,unsentEntries:g}}(this._heartbeatsCache.heartbeats),g=(0,V.p)(JSON.stringify({version:2,heartbeats:G}));return this._heartbeatsCache.lastSentHeartbeatDate=b,i.length>0?(this._heartbeatsCache.heartbeats=i,await this.Ji.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ji.overwrite(this._heartbeatsCache)),g}}function yb(){return(new Date).toISOString().substring(0,10)}class fb{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,V.Q)()&&(0,V.ab)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(b){try{const G=await Ab();return await G.transaction(xb).objectStore(xb).get(jb(b))}catch(G){if(G instanceof V.f)y.warn(G.message);else{const b=Yb.create("idb-get",{originalErrorMessage:null===G||void 0===G?void 0:G.message});y.warn(b.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(b){var G;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:null!==(G=b.lastSentHeartbeatDate)&&void 0!==G?G:i.lastSentHeartbeatDate,heartbeats:b.heartbeats})}}async add(b){var G;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hb(this.app,{lastSentHeartbeatDate:null!==(G=b.lastSentHeartbeatDate)&&void 0!==G?G:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...b.heartbeats]})}}}function Cb(b){return(0,V.p)(JSON.stringify({version:2,heartbeats:b})).length}var db;db="",cb(new g.e("platform-logger",(b=>new H(b)),"PRIVATE")),cb(new g.e("heartbeat",(b=>new Rb(b)),"PRIVATE")),vb(j,R,db),vb(j,R,"esm2017"),vb("fire-js","")},10943:(b,G,i)=>{i.d(G,{b:()=>E,e:()=>c});var g=i(10947);class c{constructor(b,G,i){this.name=b,this.instanceFactory=G,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(b){return this.instantiationMode=b,this}setMultipleInstances(b){return this.multipleInstances=b,this}setServiceProps(b){return this.serviceProps=b,this}setInstanceCreatedCallback(b){return this.onInstanceCreated=b,this}}const V="[DEFAULT]";class z{constructor(b,G){this.name=b,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(b){const G=this.normalizeInstanceIdentifier(b);if(!this.instancesDeferred.has(G)){const b=new g.c;if(this.instancesDeferred.set(G,b),this.isInitialized(G)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:G});i&&b.resolve(i)}catch(i){}}return this.instancesDeferred.get(G).promise}getImmediate(b){var G;const i=this.normalizeInstanceIdentifier(null===b||void 0===b?void 0:b.identifier),g=null!==(G=null===b||void 0===b?void 0:b.optional)&&void 0!==G&&G;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(g)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(g)return null;throw c}}getComponent(){return this.component}setComponent(b){if(b.name!==this.name)throw Error(`Mismatching Component ${b.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=b,this.shouldAutoInitialize()){if(function(b){return"EAGER"===b.instantiationMode}(b))try{this.getOrInitializeService({instanceIdentifier:V})}catch(G){}for(const[b,i]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(b);try{const b=this.getOrInitializeService({instanceIdentifier:g});i.resolve(b)}catch(G){}}}}clearInstance(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;this.instancesDeferred.delete(b),this.instancesOptions.delete(b),this.instances.delete(b)}async delete(){const b=Array.from(this.instances.values());await Promise.all([...b.filter((b=>"INTERNAL"in b)).map((b=>b.INTERNAL.delete())),...b.filter((b=>"_delete"in b)).map((b=>b._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.instances.has(b)}getOptions(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.instancesOptions.get(b)||{}}initialize(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:G={}}=b,i=this.normalizeInstanceIdentifier(b.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const g=this.getOrInitializeService({instanceIdentifier:i,options:G});for(const[c,V]of this.instancesDeferred.entries()){i===this.normalizeInstanceIdentifier(c)&&V.resolve(g)}return g}pi(b,G){var i;const g=this.normalizeInstanceIdentifier(G),c=null!==(i=this.onInitCallbacks.get(g))&&void 0!==i?i:new Set;c.add(b),this.onInitCallbacks.set(g,c);const V=this.instances.get(g);return V&&b(V,g),()=>{c.delete(b)}}invokeOnInitCallbacks(b,G){const i=this.onInitCallbacks.get(G);if(i)for(const c of i)try{c(b,G)}catch(g){}}getOrInitializeService(b){let{instanceIdentifier:G,options:i={}}=b,g=this.instances.get(G);if(!g&&this.component&&(g=this.component.instanceFactory(this.container,{instanceIdentifier:(c=G,c===V?void 0:c),options:i}),this.instances.set(G,g),this.instancesOptions.set(G,i),this.invokeOnInitCallbacks(g,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,g)}catch(z){}var c;return g||null}normalizeInstanceIdentifier(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return this.component?this.component.multipleInstances?b:V:b}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class E{constructor(b){this.name=b,this.providers=new Map}uf(b){const G=this.getProvider(b.name);if(G.isComponentSet())throw new Error(`Component ${b.name} has already been registered with ${this.name}`);G.setComponent(b)}addOrOverwriteComponent(b){this.getProvider(b.name).isComponentSet()&&this.providers.delete(b.name),this.uf(b)}getProvider(b){if(this.providers.has(b))return this.providers.get(b);const G=new z(b,this);return this.providers.set(b,G),G}getProviders(){return Array.from(this.providers.values())}}},10950:(b,G,i)=>{i.d(G,{d:()=>c,f:()=>Y,h:()=>J,i:()=>q});const g=[];var c;!function(b){b[b.DEBUG=0]="DEBUG",b[b.VERBOSE=1]="VERBOSE",b[b.INFO=2]="INFO",b[b.WARN=3]="WARN",b[b.ERROR=4]="ERROR",b[b.SILENT=5]="SILENT"}(c||(c={}));const V={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},z=c.INFO,E={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},Z=function(b,G){if(G<b.logLevel)return;const i=(new Date).toISOString(),g=E[G];if(!g)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);for(var c=arguments.length,V=new Array(c>2?c-2:0),z=2;z<c;z++)V[z-2]=arguments[z];console[g](`[${i}]  ${b.name}:`,...V)};class Y{constructor(b){this.name=b,this._logLevel=z,this._logHandler=Z,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(b){if(!(b in c))throw new TypeError(`Invalid value "${b}" assigned to \`logLevel\``);this._logLevel=b}setLogLevel(b){this._logLevel="string"===typeof b?V[b]:b}get logHandler(){return this._logHandler}set logHandler(b){if("function"!==typeof b)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=b}get userLogHandler(){return this._userLogHandler}set userLogHandler(b){this._userLogHandler=b}debug(){for(var b=arguments.length,G=new Array(b),i=0;i<b;i++)G[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...G),this._logHandler(this,c.DEBUG,...G)}log(){for(var b=arguments.length,G=new Array(b),i=0;i<b;i++)G[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...G),this._logHandler(this,c.VERBOSE,...G)}info(){for(var b=arguments.length,G=new Array(b),i=0;i<b;i++)G[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,c.INFO,...G),this._logHandler(this,c.INFO,...G)}warn(){for(var b=arguments.length,G=new Array(b),i=0;i<b;i++)G[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,c.WARN,...G),this._logHandler(this,c.WARN,...G)}error(){for(var b=arguments.length,G=new Array(b),i=0;i<b;i++)G[i]=arguments[i];this._userLogHandler&&this._userLogHandler(this,c.ERROR,...G),this._logHandler(this,c.ERROR,...G)}}function J(b){g.forEach((G=>{G.setLogLevel(b)}))}function q(b,G){for(const i of g){let g=null;G&&G.level&&(g=V[G.level]),i.userLogHandler=null===b?null:function(G,i){for(var V=arguments.length,z=new Array(V>2?V-2:0),E=2;E<V;E++)z[E-2]=arguments[E];const Z=z.map((b=>{if(null==b)return null;if("string"===typeof b)return b;if("number"===typeof b||"boolean"===typeof b)return b.toString();if(b instanceof Error)return b.message;try{return JSON.stringify(b)}catch(G){return null}})).filter((b=>b)).join(" ");i>=(null!==g&&void 0!==g?g:G.logLevel)&&b({level:c[i].toLowerCase(),message:Z,args:z,type:G.name})}}}}}]);