/*! For license information please see 127us.37.526d9988.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11765:(b,o,l)=>{l.d(o,{$:()=>N,C:()=>X,E:()=>R,G:()=>u,H:()=>w,L:()=>A,N:()=>C,P:()=>L,Q:()=>m,S:()=>x,V:()=>J,Z:()=>D,_:()=>a,bb:()=>k,cb:()=>r,db:()=>S,e:()=>U,hb:()=>c,i:()=>d,l:()=>E,m:()=>G,q:()=>n,u:()=>W,y:()=>i});const g=function(b){const o=[];let l=0;for(let g=0;g<b.length;g++){let I=b.charCodeAt(g);I<128?o[l++]=I:I<2048?(o[l++]=I>>6|192,o[l++]=63&I|128):55296===(64512&I)&&g+1<b.length&&56320===(64512&b.charCodeAt(g+1))?(I=65536+((1023&I)<<10)+(1023&b.charCodeAt(++g)),o[l++]=I>>18|240,o[l++]=I>>12&63|128,o[l++]=I>>6&63|128,o[l++]=63&I|128):(o[l++]=I>>12|224,o[l++]=I>>6&63|128,o[l++]=63&I|128)}return o},I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(b,o){if(!Array.isArray(b))throw Error("encodeByteArray takes an array as a parameter");this.init_();const l=o?this.byteToCharMapWebSafe_:this.byteToCharMap_,g=[];for(let I=0;I<b.length;I+=3){const o=b[I],v=I+1<b.length,W=v?b[I+1]:0,n=I+2<b.length,T=n?b[I+2]:0,t=o>>2,A=(3&o)<<4|W>>4;let w=(15&W)<<2|T>>6,C=63&T;n||(C=64,v||(w=64)),g.push(l[t],l[A],l[w],l[C])}return g.join("")},encodeString(b,o){return this.HAS_NATIVE_SUPPORT&&!o?btoa(b):this.encodeByteArray(g(b),o)},decodeString(b,o){return this.HAS_NATIVE_SUPPORT&&!o?atob(b):function(b){const o=[];let l=0,g=0;for(;l<b.length;){const I=b[l++];if(I<128)o[g++]=String.fromCharCode(I);else if(I>191&&I<224){const v=b[l++];o[g++]=String.fromCharCode((31&I)<<6|63&v)}else if(I>239&&I<365){const v=((7&I)<<18|(63&b[l++])<<12|(63&b[l++])<<6|63&b[l++])-65536;o[g++]=String.fromCharCode(55296+(v>>10)),o[g++]=String.fromCharCode(56320+(1023&v))}else{const v=b[l++],W=b[l++];o[g++]=String.fromCharCode((15&I)<<12|(63&v)<<6|63&W)}}return o.join("")}(this.decodeStringToByteArray(b,o))},decodeStringToByteArray(b,o){this.init_();const l=o?this.charToByteMapWebSafe_:this.charToByteMap_,g=[];for(let I=0;I<b.length;){const o=l[b.charAt(I++)],W=I<b.length?l[b.charAt(I)]:0;++I;const n=I<b.length?l[b.charAt(I)]:64;++I;const T=I<b.length?l[b.charAt(I)]:64;if(++I,null==o||null==W||null==n||null==T)throw new v;const t=o<<2|W>>4;if(g.push(t),64!==n){const b=W<<4&240|n>>2;if(g.push(b),64!==T){const b=n<<6&192|T;g.push(b)}}}return g},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let b=0;b<this.ENCODED_VALS.length;b++)this.byteToCharMap_[b]=this.ENCODED_VALS.charAt(b),this.charToByteMap_[this.byteToCharMap_[b]]=b,this.byteToCharMapWebSafe_[b]=this.ENCODED_VALS_WEBSAFE.charAt(b),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[b]]=b,b>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(b)]=b,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(b)]=b)}}};class v extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W=function(b){return function(b){const o=g(b);return I.encodeByteArray(o,!0)}(b).replace(/\./g,"")},n=function(b){try{return I.decodeString(b,!0)}catch(o){console.error("base64Decode failed: ",o)}return null};const T=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof l.g)return l.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,t=()=>{try{return T()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let b;try{b=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(l){return}const o=b&&n(b[1]);return o&&JSON.parse(o)})()}catch(b){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${b}`)}},A=b=>{var o,l;return null===(l=null===(o=t())||void 0===o?void 0:o.emulatorHosts)||void 0===l?void 0:l[b]},w=()=>{var b;return null===(b=t())||void 0===b?void 0:b.config},C=b=>{var o;return null===(o=t())||void 0===o?void 0:o[`_${b}`]};class U{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((b,o)=>{this.resolve=b,this.reject=o}))}wrapCallback(b){return(o,l)=>{o?this.reject(o):this.resolve(l),"function"===typeof b&&(this.promise.catch((()=>{})),1===b.length?b(o):b(o,l))}}}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function N(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function x(){const b="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof b&&void 0!==b.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function D(){const b=m();return b.indexOf("MSIE ")>=0||b.indexOf("Trident/")>=0}function a(){try{return"object"===typeof indexedDB}catch(b){return!1}}function c(){return new Promise(((b,o)=>{try{let l=!0;const g="validate-browser-context-for-indexeddb-analytics-module",I=self.indexedDB.open(g);I.onsuccess=()=>{I.result.close(),l||self.indexedDB.deleteDatabase(g),b(!0)},I.onupgradeneeded=()=>{l=!1},I.onerror=()=>{var b;o((null===(b=I.error)||void 0===b?void 0:b.message)||"")}}catch(l){o(l)}}))}function G(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class E extends Error{constructor(b,o,l){super(o),this.code=b,this.customData=l,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,d.prototype.create)}}class d{constructor(b,o,l){this.service=b,this.serviceName=o,this.errors=l}create(b){const o=(arguments.length<=1?void 0:arguments[1])||{},l=`${this.service}/${b}`,g=this.errors[b],I=g?function(b,o){return b.replace(F,((b,l)=>{const g=o[l];return null!=g?String(g):`<${l}?>`}))}(g,o):"Error",v=`${this.serviceName}: ${I} (${l}).`;return new E(l,v,o)}}const F=/\{\$([^}]+)}/g;function J(b){for(const o in b)if(Object.prototype.hasOwnProperty.call(b,o))return!1;return!0}function R(b,o){if(b===o)return!0;const l=Object.keys(b),g=Object.keys(o);for(const I of l){if(!g.includes(I))return!1;const l=b[I],v=o[I];if(j(l)&&j(v)){if(!R(l,v))return!1}else if(l!==v)return!1}for(const I of g)if(!l.includes(I))return!1;return!0}function j(b){return null!==b&&"object"===typeof b}function S(b){const o=[];for(const[l,g]of Object.entries(b))Array.isArray(g)?g.forEach((b=>{o.push(encodeURIComponent(l)+"="+encodeURIComponent(b))})):o.push(encodeURIComponent(l)+"="+encodeURIComponent(g));return o.length?"&"+o.join("&"):""}function r(b){const o={};return b.replace(/^\?/,"").split("&").forEach((b=>{if(b){const[l,g]=b.split("=");o[decodeURIComponent(l)]=decodeURIComponent(g)}})),o}function u(b){const o=b.indexOf("?");if(!o)return"";const l=b.indexOf("#",o);return b.substring(o,l>0?l:void 0)}function X(b,o){const l=new e(b,o);return l.subscribe.bind(l)}class e{constructor(b,o){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=o,this.task.then((()=>{b(this)})).catch((b=>{this.error(b)}))}next(b){this.forEachObserver((o=>{o.next(b)}))}error(b){this.forEachObserver((o=>{o.error(b)})),this.close(b)}complete(){this.forEachObserver((b=>{b.complete()})),this.close()}subscribe(b,o,l){let g;if(void 0===b&&void 0===o&&void 0===l)throw new Error("Missing Observer.");g=function(b,o){if("object"!==typeof b||null===b)return!1;for(const l of o)if(l in b&&"function"===typeof b[l])return!0;return!1}(b,["next","error","complete"])?b:{next:b,error:o,complete:l},void 0===g.next&&(g.next=q),void 0===g.error&&(g.error=q),void 0===g.complete&&(g.complete=q);const I=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?g.error(this.finalError):g.complete()}catch(b){}})),this.observers.push(g),I}unsubscribeOne(b){void 0!==this.observers&&void 0!==this.observers[b]&&(delete this.observers[b],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(b){if(!this.finalized)for(let o=0;o<this.observers.length;o++)this.sendOne(o,b)}sendOne(b,o){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[b])try{o(this.observers[b])}catch(l){"undefined"!==typeof console&&console.error&&console.error(l)}}))}close(b){this.finalized||(this.finalized=!0,void 0!==b&&(this.finalError=b),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function q(){}const Z=1e3,f=2,h=144e5,y=.5;function i(b){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;const l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z)*Math.pow(o,b),g=Math.round(y*l*(Math.random()-.5)*2);return Math.min(h,l+g)}function L(b){return b&&b._delegate?b._delegate:b}},11754:(b,o,l)=>{l.d(o,{b:()=>v.l,d:()=>wb,e:()=>p,f:()=>lb,h:()=>gb,l:()=>bb,o:()=>nb,q:()=>ob,r:()=>vb,v:()=>Ib,y:()=>Wb,C:()=>Nb,I:()=>Ub,G:()=>mb,J:()=>Cb,L:()=>kb,P:()=>xb,R:()=>Db});var g=l(11760),I=l(11771),v=l(11765);let W,n;const T=new WeakMap,t=new WeakMap,A=new WeakMap,w=new WeakMap,C=new WeakMap;let U={get(b,o,l){if(b instanceof IDBTransaction){if("done"===o)return t.get(b);if("objectStoreNames"===o)return b.objectStoreNames||A.get(b);if("store"===o)return l.objectStoreNames[1]?void 0:l.objectStore(l.objectStoreNames[0])}return x(b[o])},set:(b,o,l)=>(b[o]=l,!0),has:(b,o)=>b instanceof IDBTransaction&&("done"===o||"store"===o)||o in b};function m(b){return b!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(b)?function(){for(var o=arguments.length,l=new Array(o),g=0;g<o;g++)l[g]=arguments[g];return b.apply(k(this),l),x(T.get(this))}:function(){for(var o=arguments.length,l=new Array(o),g=0;g<o;g++)l[g]=arguments[g];return x(b.apply(k(this),l))}:function(o){for(var l=arguments.length,g=new Array(l>1?l-1:0),I=1;I<l;I++)g[I-1]=arguments[I];const v=b.call(k(this),o,...g);return A.set(v,o.sort?o.sort():[o]),x(v)}}function N(b){return"function"===typeof b?m(b):(b instanceof IDBTransaction&&function(b){if(t.has(b))return;const o=new Promise(((o,l)=>{const g=()=>{b.removeEventListener("complete",I),b.removeEventListener("error",v),b.removeEventListener("abort",v)},I=()=>{o(),g()},v=()=>{l(b.error||new DOMException("AbortError","AbortError")),g()};b.addEventListener("complete",I),b.addEventListener("error",v),b.addEventListener("abort",v)}));t.set(b,o)}(b),o=b,(W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((b=>o instanceof b))?new Proxy(b,U):b);var o}function x(b){if(b instanceof IDBRequest)return function(b){const o=new Promise(((o,l)=>{const g=()=>{b.removeEventListener("success",I),b.removeEventListener("error",v)},I=()=>{o(x(b.result)),g()},v=()=>{l(b.error),g()};b.addEventListener("success",I),b.addEventListener("error",v)}));return o.then((o=>{o instanceof IDBCursor&&T.set(o,b)})).catch((()=>{})),C.set(o,b),o}(b);if(w.has(b))return w.get(b);const o=N(b);return o!==b&&(w.set(b,o),C.set(o,b)),o}const k=b=>C.get(b);const D=["get","getKey","getAll","getAllKeys","count"],a=["put","add","delete","clear"],c=new Map;function G(b,o){if(!(b instanceof IDBDatabase)||o in b||"string"!==typeof o)return;if(c.get(o))return c.get(o);const l=o.replace(/FromIndex$/,""),g=o!==l,I=a.includes(l);if(!(l in(g?IDBIndex:IDBObjectStore).prototype)||!I&&!D.includes(l))return;const v=async function(b){const o=this.transaction(b,I?"readwrite":"readonly");let v=o.store;for(var W=arguments.length,n=new Array(W>1?W-1:0),T=1;T<W;T++)n[T-1]=arguments[T];return g&&(v=v.index(n.shift())),(await Promise.all([v[l](...n),I&&o.done]))[0]};return c.set(o,v),v}U=(b=>({...b,get:(o,l,g)=>G(o,l)||b.get(o,l,g),has:(o,l)=>!!G(o,l)||b.has(o,l)}))(U);class E{constructor(b){this.container=b}getPlatformInfoString(){return this.container.getProviders().map((b=>{if(function(b){const o=b.getComponent();return"VERSION"===(null===o||void 0===o?void 0:o.type)}(b)){const o=b.getImmediate();return`${o.library}/${o.version}`}return null})).filter((b=>b)).join(" ")}}const d="@firebase/app",F="0.9.13",J=new I.d("@firebase/app"),R="@firebase/app-compat",j="@firebase/analytics-compat",S="@firebase/analytics",r="@firebase/app-check-compat",u="@firebase/app-check",X="@firebase/auth",e="@firebase/auth-compat",q="@firebase/database",Z="@firebase/database-compat",f="@firebase/functions",h="@firebase/functions-compat",y="@firebase/installations",i="@firebase/installations-compat",L="@firebase/messaging",s="@firebase/messaging-compat",M="@firebase/performance",P="@firebase/performance-compat",Y="@firebase/remote-config",Q="@firebase/remote-config-compat",V="@firebase/storage",z="@firebase/storage-compat",O="@firebase/firestore",B="@firebase/firestore-compat",H="firebase",p="[DEFAULT]",K={[d]:"fire-core",[R]:"fire-core-compat",[S]:"fire-analytics",[j]:"fire-analytics-compat",[u]:"fire-app-check",[r]:"fire-app-check-compat",[X]:"fire-auth",[e]:"fire-auth-compat",[q]:"fire-rtdb",[Z]:"fire-rtdb-compat",[f]:"fire-fn",[h]:"fire-fn-compat",[y]:"fire-iid",[i]:"fire-iid-compat",[L]:"fire-fcm",[s]:"fire-fcm-compat",[M]:"fire-perf",[P]:"fire-perf-compat",[Y]:"fire-rc",[Q]:"fire-rc-compat",[V]:"fire-gcs",[z]:"fire-gcs-compat",[O]:"fire-fst",[B]:"fire-fst-compat","fire-js":"fire-js",[H]:"fire-js-all"},bb=new Map,ob=new Map;function lb(b,o){try{b.container.wf(o)}catch(l){J.debug(`Component ${o.name} failed to register with FirebaseApp ${b.name}`,l)}}function gb(b,o){b.container.addOrOverwriteComponent(o)}function Ib(b){const o=b.name;if(ob.has(o))return J.debug(`There were multiple attempts to register component ${o}.`),!1;ob.set(o,b);for(const l of bb.values())lb(l,b);return!0}function vb(b,o){const l=b.container.getProvider("heartbeat").getImmediate({optional:!0});return l&&l.triggerHeartbeat(),b.container.getProvider(o)}function Wb(b,o){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p;vb(b,o).clearInstance(l)}function nb(){ob.clear()}const Tb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},tb=new v.i("app","Firebase",Tb);class Ab{constructor(b,o,l){this._isDeleted=!1,this._options=Object.assign({},b),this._config=Object.assign({},o),this._name=o.name,this._automaticDataCollectionEnabled=o.automaticDataCollectionEnabled,this._container=l,this.container.wf(new g.i("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(b){this.checkDestroyed(),this._automaticDataCollectionEnabled=b}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(b){this._isDeleted=b}checkDestroyed(){if(this.isDeleted)throw tb.create("app-deleted",{appName:this._name})}}const wb="9.23.0";function Cb(b){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=b;if("object"!==typeof o){o={name:o}}const I=Object.assign({name:p,automaticDataCollectionEnabled:!1},o),W=I.name;if("string"!==typeof W||!W)throw tb.create("bad-app-name",{appName:String(W)});if(l||(l=(0,v.H)()),!l)throw tb.create("no-options");const n=bb.get(W);if(n){if((0,v.E)(l,n.options)&&(0,v.E)(I,n.config))return n;throw tb.create("duplicate-app",{appName:W})}const T=new g.e(W);for(const g of ob.values())T.wf(g);const t=new Ab(l,I,T);return bb.set(W,t),t}function Ub(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;const o=bb.get(b);if(!o&&b===p&&(0,v.H)())return Cb();if(!o)throw tb.create("no-app",{appName:b});return o}function mb(){return Array.from(bb.values())}async function Nb(b){const o=b.name;bb.has(o)&&(bb.delete(o),await Promise.all(b.container.getProviders().map((b=>b.delete()))),b.isDeleted=!0)}function xb(b,o,l){var I;let v=null!==(I=K[b])&&void 0!==I?I:b;l&&(v+=`-${l}`);const W=v.match(/\s|\//),n=o.match(/\s|\//);if(W||n){const b=[`Unable to register library "${v}" with version "${o}":`];return W&&b.push(`library name "${v}" contains illegal characters (whitespace or "/")`),W&&n&&b.push("and"),n&&b.push(`version name "${o}" contains illegal characters (whitespace or "/")`),void J.warn(b.join(" "))}Ib(new g.i(`${v}-version`,(()=>({library:v,version:o})),"VERSION"))}function kb(b,o){if(null!==b&&"function"!==typeof b)throw tb.create("invalid-log-argument");(0,I.h)(b,o)}function Db(b){(0,I.f)(b)}const ab="firebase-heartbeat-store";let cb=null;function Gb(){return cb||(cb=function(b,o){let{blocked:l,upgrade:g,blocking:I,terminated:v}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const W=indexedDB.open(b,o),n=x(W);return g&&W.addEventListener("upgradeneeded",(b=>{g(x(W.result),b.oldVersion,b.newVersion,x(W.transaction),b)})),l&&W.addEventListener("blocked",(b=>l(b.oldVersion,b.newVersion,b))),n.then((b=>{v&&b.addEventListener("close",(()=>v())),I&&b.addEventListener("versionchange",(b=>I(b.oldVersion,b.newVersion,b)))})).catch((()=>{})),n}("firebase-heartbeat-database",1,{upgrade:(b,o)=>{if(0===o)b.createObjectStore(ab)}}).catch((b=>{throw tb.create("idb-open",{originalErrorMessage:b.message})}))),cb}async function Eb(b,o){try{const l=(await Gb()).transaction(ab,"readwrite"),g=l.objectStore(ab);await g.put(o,db(b)),await l.done}catch(l){if(l instanceof v.l)J.warn(l.message);else{const b=tb.create("idb-set",{originalErrorMessage:null===l||void 0===l?void 0:l.message});J.warn(b.message)}}}function db(b){return`${b.name}!${b.options.appId}`}class Fb{constructor(b){this.container=b,this._heartbeatsCache=null;const o=this.container.getProvider("app").getImmediate();this.Pi=new Rb(o),this._heartbeatsCachePromise=this.Pi.read().then((b=>(this._heartbeatsCache=b,b)))}async triggerHeartbeat(){const b=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Jb();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==o&&!this._heartbeatsCache.heartbeats.some((b=>b.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:b}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((b=>{const o=new Date(b.date).valueOf();return Date.now()-o<=2592e6})),this.Pi.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const b=Jb(),{heartbeatsToSend:o,unsentEntries:l}=function(b){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const l=[];let g=b.slice();for(const I of b){const b=l.find((b=>b.agent===I.agent));if(b){if(b.dates.push(I.date),jb(l)>o){b.dates.pop();break}}else if(l.push({agent:I.agent,dates:[I.date]}),jb(l)>o){l.pop();break}g=g.slice(1)}return{heartbeatsToSend:l,unsentEntries:g}}(this._heartbeatsCache.heartbeats),g=(0,v.u)(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=b,l.length>0?(this._heartbeatsCache.heartbeats=l,await this.Pi.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Pi.overwrite(this._heartbeatsCache)),g}}function Jb(){return(new Date).toISOString().substring(0,10)}class Rb{constructor(b){this.app=b,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,v._)()&&(0,v.hb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(b){try{const o=await Gb();return await o.transaction(ab).objectStore(ab).get(db(b))}catch(o){if(o instanceof v.l)J.warn(o.message);else{const b=tb.create("idb-get",{originalErrorMessage:null===o||void 0===o?void 0:o.message});J.warn(b.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(b){var o;if(await this._canUseIndexedDBPromise){const l=await this.read();return Eb(this.app,{lastSentHeartbeatDate:null!==(o=b.lastSentHeartbeatDate)&&void 0!==o?o:l.lastSentHeartbeatDate,heartbeats:b.heartbeats})}}async add(b){var o;if(await this._canUseIndexedDBPromise){const l=await this.read();return Eb(this.app,{lastSentHeartbeatDate:null!==(o=b.lastSentHeartbeatDate)&&void 0!==o?o:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...b.heartbeats]})}}}function jb(b){return(0,v.u)(JSON.stringify({version:2,heartbeats:b})).length}var Sb;Sb="",Ib(new g.i("platform-logger",(b=>new E(b)),"PRIVATE")),Ib(new g.i("heartbeat",(b=>new Fb(b)),"PRIVATE")),xb(d,F,Sb),xb(d,F,"esm2017"),xb("fire-js","")},11760:(b,o,l)=>{l.d(o,{e:()=>n,i:()=>I});var g=l(11765);class I{constructor(b,o,l){this.name=b,this.instanceFactory=o,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(b){return this.instantiationMode=b,this}setMultipleInstances(b){return this.multipleInstances=b,this}setServiceProps(b){return this.serviceProps=b,this}setInstanceCreatedCallback(b){return this.onInstanceCreated=b,this}}const v="[DEFAULT]";class W{constructor(b,o){this.name=b,this.container=o,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(b){const o=this.normalizeInstanceIdentifier(b);if(!this.instancesDeferred.has(o)){const b=new g.e;if(this.instancesDeferred.set(o,b),this.isInitialized(o)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:o});l&&b.resolve(l)}catch(l){}}return this.instancesDeferred.get(o).promise}getImmediate(b){var o;const l=this.normalizeInstanceIdentifier(null===b||void 0===b?void 0:b.identifier),g=null!==(o=null===b||void 0===b?void 0:b.optional)&&void 0!==o&&o;if(!this.isInitialized(l)&&!this.shouldAutoInitialize()){if(g)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:l})}catch(I){if(g)return null;throw I}}getComponent(){return this.component}setComponent(b){if(b.name!==this.name)throw Error(`Mismatching Component ${b.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=b,this.shouldAutoInitialize()){if(function(b){return"EAGER"===b.instantiationMode}(b))try{this.getOrInitializeService({instanceIdentifier:v})}catch(o){}for(const[b,l]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(b);try{const b=this.getOrInitializeService({instanceIdentifier:g});l.resolve(b)}catch(o){}}}}clearInstance(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;this.instancesDeferred.delete(b),this.instancesOptions.delete(b),this.instances.delete(b)}async delete(){const b=Array.from(this.instances.values());await Promise.all([...b.filter((b=>"INTERNAL"in b)).map((b=>b.INTERNAL.delete())),...b.filter((b=>"_delete"in b)).map((b=>b._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return this.instances.has(b)}getOptions(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return this.instancesOptions.get(b)||{}}initialize(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:o={}}=b,l=this.normalizeInstanceIdentifier(b.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const g=this.getOrInitializeService({instanceIdentifier:l,options:o});for(const[I,v]of this.instancesDeferred.entries()){l===this.normalizeInstanceIdentifier(I)&&v.resolve(g)}return g}wi(b,o){var l;const g=this.normalizeInstanceIdentifier(o),I=null!==(l=this.onInitCallbacks.get(g))&&void 0!==l?l:new Set;I.add(b),this.onInitCallbacks.set(g,I);const v=this.instances.get(g);return v&&b(v,g),()=>{I.delete(b)}}invokeOnInitCallbacks(b,o){const l=this.onInitCallbacks.get(o);if(l)for(const I of l)try{I(b,o)}catch(g){}}getOrInitializeService(b){let{instanceIdentifier:o,options:l={}}=b,g=this.instances.get(o);if(!g&&this.component&&(g=this.component.instanceFactory(this.container,{instanceIdentifier:(I=o,I===v?void 0:I),options:l}),this.instances.set(o,g),this.instancesOptions.set(o,l),this.invokeOnInitCallbacks(g,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,o,g)}catch(W){}var I;return g||null}normalizeInstanceIdentifier(){let b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;return this.component?this.component.multipleInstances?b:v:b}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class n{constructor(b){this.name=b,this.providers=new Map}wf(b){const o=this.getProvider(b.name);if(o.isComponentSet())throw new Error(`Component ${b.name} has already been registered with ${this.name}`);o.setComponent(b)}addOrOverwriteComponent(b){this.getProvider(b.name).isComponentSet()&&this.providers.delete(b.name),this.wf(b)}getProvider(b){if(this.providers.has(b))return this.providers.get(b);const o=new W(b,this);return this.providers.set(b,o),o}getProviders(){return Array.from(this.providers.values())}}},11771:(b,o,l)=>{l.d(o,{b:()=>I,d:()=>t,f:()=>A,h:()=>w});const g=[];var I;!function(b){b[b.DEBUG=0]="DEBUG",b[b.VERBOSE=1]="VERBOSE",b[b.INFO=2]="INFO",b[b.WARN=3]="WARN",b[b.ERROR=4]="ERROR",b[b.SILENT=5]="SILENT"}(I||(I={}));const v={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},W=I.INFO,n={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},T=function(b,o){if(o<b.logLevel)return;const l=(new Date).toISOString(),g=n[o];if(!g)throw new Error(`Attempted to log a message with an invalid logType (value: ${o})`);for(var I=arguments.length,v=new Array(I>2?I-2:0),W=2;W<I;W++)v[W-2]=arguments[W];console[g](`[${l}]  ${b.name}:`,...v)};class t{constructor(b){this.name=b,this._logLevel=W,this._logHandler=T,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(b){if(!(b in I))throw new TypeError(`Invalid value "${b}" assigned to \`logLevel\``);this._logLevel=b}setLogLevel(b){this._logLevel="string"===typeof b?v[b]:b}get logHandler(){return this._logHandler}set logHandler(b){if("function"!==typeof b)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=b}get userLogHandler(){return this._userLogHandler}set userLogHandler(b){this._userLogHandler=b}debug(){for(var b=arguments.length,o=new Array(b),l=0;l<b;l++)o[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...o),this._logHandler(this,I.DEBUG,...o)}log(){for(var b=arguments.length,o=new Array(b),l=0;l<b;l++)o[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...o),this._logHandler(this,I.VERBOSE,...o)}info(){for(var b=arguments.length,o=new Array(b),l=0;l<b;l++)o[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,I.INFO,...o),this._logHandler(this,I.INFO,...o)}warn(){for(var b=arguments.length,o=new Array(b),l=0;l<b;l++)o[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,I.WARN,...o),this._logHandler(this,I.WARN,...o)}error(){for(var b=arguments.length,o=new Array(b),l=0;l<b;l++)o[l]=arguments[l];this._userLogHandler&&this._userLogHandler(this,I.ERROR,...o),this._logHandler(this,I.ERROR,...o)}}function A(b){g.forEach((o=>{o.setLogLevel(b)}))}function w(b,o){for(const l of g){let g=null;o&&o.level&&(g=v[o.level]),l.userLogHandler=null===b?null:function(o,l){for(var v=arguments.length,W=new Array(v>2?v-2:0),n=2;n<v;n++)W[n-2]=arguments[n];const T=W.map((b=>{if(null==b)return null;if("string"===typeof b)return b;if("number"===typeof b||"boolean"===typeof b)return b.toString();if(b instanceof Error)return b.message;try{return JSON.stringify(b)}catch(o){return null}})).filter((b=>b)).join(" ");l>=(null!==g&&void 0!==g?g:o.logLevel)&&b({level:I[l].toLowerCase(),message:T,args:W,type:o.name})}}}}}]);