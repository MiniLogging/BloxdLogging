/*! For license information please see q6li2m.37.4116b400.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11180:(M,E,b)=>{b.d(E,{$:()=>O,B:()=>V,C:()=>T,G:()=>I,H:()=>s,L:()=>y,N:()=>r,O:()=>N,S:()=>C,V:()=>R,Z:()=>B,_:()=>c,cb:()=>Z,db:()=>w,e:()=>t,h:()=>U,i:()=>X,j:()=>S,k:()=>n,o:()=>g,q:()=>j,t:()=>P,v:()=>K,x:()=>p});const x=function(M){const E=[];let b=0;for(let x=0;x<M.length;x++){let k=M.charCodeAt(x);k<128?E[b++]=k:k<2048?(E[b++]=k>>6|192,E[b++]=63&k|128):55296===(64512&k)&&x+1<M.length&&56320===(64512&M.charCodeAt(x+1))?(k=65536+((1023&k)<<10)+(1023&M.charCodeAt(++x)),E[b++]=k>>18|240,E[b++]=k>>12&63|128,E[b++]=k>>6&63|128,E[b++]=63&k|128):(E[b++]=k>>12|224,E[b++]=k>>6&63|128,E[b++]=63&k|128)}return E},k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(M,E){if(!Array.isArray(M))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let k=0;k<M.length;k+=3){const E=M[k],a=k+1<M.length,g=a?M[k+1]:0,n=k+2<M.length,J=n?M[k+2]:0,u=E>>2,T=(3&E)<<4|g>>4;let V=(15&g)<<2|J>>6,I=63&J;n||(I=64,a||(V=64)),x.push(b[u],b[T],b[V],b[I])}return x.join("")},encodeString(M,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(M):this.encodeByteArray(x(M),E)},decodeString(M,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(M):function(M){const E=[];let b=0,x=0;for(;b<M.length;){const k=M[b++];if(k<128)E[x++]=String.fromCharCode(k);else if(k>191&&k<224){const a=M[b++];E[x++]=String.fromCharCode((31&k)<<6|63&a)}else if(k>239&&k<365){const a=((7&k)<<18|(63&M[b++])<<12|(63&M[b++])<<6|63&M[b++])-65536;E[x++]=String.fromCharCode(55296+(a>>10)),E[x++]=String.fromCharCode(56320+(1023&a))}else{const a=M[b++],g=M[b++];E[x++]=String.fromCharCode((15&k)<<12|(63&a)<<6|63&g)}}return E.join("")}(this.decodeStringToByteArray(M,E))},decodeStringToByteArray(M,E){this.init_();const b=E?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let k=0;k<M.length;){const E=b[M.charAt(k++)],g=k<M.length?b[M.charAt(k)]:0;++k;const n=k<M.length?b[M.charAt(k)]:64;++k;const J=k<M.length?b[M.charAt(k)]:64;if(++k,null==E||null==g||null==n||null==J)throw new a;const u=E<<2|g>>4;if(x.push(u),64!==n){const M=g<<4&240|n>>2;if(x.push(M),64!==J){const M=n<<6&192|J;x.push(M)}}}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let M=0;M<this.ENCODED_VALS.length;M++)this.byteToCharMap_[M]=this.ENCODED_VALS.charAt(M),this.charToByteMap_[this.byteToCharMap_[M]]=M,this.byteToCharMapWebSafe_[M]=this.ENCODED_VALS_WEBSAFE.charAt(M),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[M]]=M,M>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(M)]=M,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(M)]=M)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const g=function(M){return function(M){const E=x(M);return k.encodeByteArray(E,!0)}(M).replace(/\./g,"")},n=function(M){try{return k.decodeString(M,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};const J=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof b.g)return b.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,u=()=>{try{return J()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let M;try{M=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(b){return}const E=M&&n(M[1]);return E&&JSON.parse(E)})()}catch(M){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${M}`)}},T=M=>{var E,b;return null===(b=null===(E=u())||void 0===E?void 0:E.emulatorHosts)||void 0===b?void 0:b[M]},V=()=>{var M;return null===(M=u())||void 0===M?void 0:M.config},I=M=>{var E;return null===(E=u())||void 0===E?void 0:E[`_${M}`]};class t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((M,E)=>{this.resolve=M,this.reject=E}))}wrapCallback(M){return(E,b)=>{E?this.reject(E):this.resolve(b),"function"===typeof M&&(this.promise.catch((()=>{})),1===M.length?M(E):M(E,b))}}}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function B(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function r(){const M="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof M&&void 0!==M.id}function c(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function C(){const M=y();return M.indexOf("MSIE ")>=0||M.indexOf("Trident/")>=0}function R(){try{return"object"===typeof indexedDB}catch(M){return!1}}function w(){return new Promise(((M,E)=>{try{let b=!0;const x="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(x);k.onsuccess=()=>{k.result.close(),b||self.indexedDB.deleteDatabase(x),M(!0)},k.onupgradeneeded=()=>{b=!1},k.onerror=()=>{var M;E((null===(M=k.error)||void 0===M?void 0:M.message)||"")}}catch(b){E(b)}}))}function S(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class X extends Error{constructor(M,E,b){super(E),this.code=M,this.customData=b,this.name="FirebaseError",Object.setPrototypeOf(this,X.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(M,E,b){this.service=M,this.serviceName=E,this.errors=b}create(M){const E=(arguments.length<=1?void 0:arguments[1])||{},b=`${this.service}/${M}`,x=this.errors[M],k=x?function(M,E){return M.replace(v,((M,b)=>{const x=E[b];return null!=x?String(x):`<${b}?>`}))}(x,E):"Error",a=`${this.serviceName}: ${k} (${b}).`;return new X(b,a,E)}}const v=/\{\$([^}]+)}/g;function N(M){for(const E in M)if(Object.prototype.hasOwnProperty.call(M,E))return!1;return!0}function K(M,E){if(M===E)return!0;const b=Object.keys(M),x=Object.keys(E);for(const k of b){if(!x.includes(k))return!1;const b=M[k],a=E[k];if(h(b)&&h(a)){if(!K(b,a))return!1}else if(b!==a)return!1}for(const k of x)if(!b.includes(k))return!1;return!0}function h(M){return null!==M&&"object"===typeof M}function Z(M){const E=[];for(const[b,x]of Object.entries(M))Array.isArray(x)?x.forEach((M=>{E.push(encodeURIComponent(b)+"="+encodeURIComponent(M))})):E.push(encodeURIComponent(b)+"="+encodeURIComponent(x));return E.length?"&"+E.join("&"):""}function O(M){const E={};return M.replace(/^\?/,"").split("&").forEach((M=>{if(M){const[b,x]=M.split("=");E[decodeURIComponent(b)]=decodeURIComponent(x)}})),E}function p(M){const E=M.indexOf("?");if(!E)return"";const b=M.indexOf("#",E);return M.substring(E,b>0?b:void 0)}function P(M,E){const b=new F(M,E);return b.subscribe.bind(b)}class F{constructor(M,E){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=E,this.task.then((()=>{M(this)})).catch((M=>{this.error(M)}))}next(M){this.forEachObserver((E=>{E.next(M)}))}error(M){this.forEachObserver((E=>{E.error(M)})),this.close(M)}complete(){this.forEachObserver((M=>{M.complete()})),this.close()}subscribe(M,E,b){let x;if(void 0===M&&void 0===E&&void 0===b)throw new Error("Missing Observer.");x=function(M,E){if("object"!==typeof M||null===M)return!1;for(const b of E)if(b in M&&"function"===typeof M[b])return!0;return!1}(M,["next","error","complete"])?M:{next:M,error:E,complete:b},void 0===x.next&&(x.next=l),void 0===x.error&&(x.error=l),void 0===x.complete&&(x.complete=l);const k=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch(M){}})),this.observers.push(x),k}unsubscribeOne(M){void 0!==this.observers&&void 0!==this.observers[M]&&(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(M){if(!this.finalized)for(let E=0;E<this.observers.length;E++)this.sendOne(E,M)}sendOne(M,E){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[M])try{E(this.observers[M])}catch(b){"undefined"!==typeof console&&console.error&&console.error(b)}}))}close(M){this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function l(){}const d=1e3,W=2,m=144e5,o=.5;function j(M){let E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:W;const b=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:d)*Math.pow(E,M),x=Math.round(o*b*(Math.random()-.5)*2);return Math.min(m,b+x)}function s(M){return M&&M._delegate?M._delegate:M}},11163:(M,E,b)=>{b.d(E,{c:()=>a.i,g:()=>VM,h:()=>L,j:()=>bM,k:()=>xM,m:()=>MM,n:()=>nM,r:()=>EM,u:()=>aM,y:()=>kM,C:()=>gM,E:()=>BM,H:()=>tM,G:()=>yM,K:()=>IM,O:()=>cM,Q:()=>rM,T:()=>CM});var x=b(11171),k=b(11185),a=b(11180);let g,n;const J=new WeakMap,u=new WeakMap,T=new WeakMap,V=new WeakMap,I=new WeakMap;let t={get(M,E,b){if(M instanceof IDBTransaction){if("done"===E)return u.get(M);if("objectStoreNames"===E)return M.objectStoreNames||T.get(M);if("store"===E)return b.objectStoreNames[1]?void 0:b.objectStore(b.objectStoreNames[0])}return r(M[E])},set:(M,E,b)=>(M[E]=b,!0),has:(M,E)=>M instanceof IDBTransaction&&("done"===E||"store"===E)||E in M};function y(M){return M!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(M)?function(){for(var E=arguments.length,b=new Array(E),x=0;x<E;x++)b[x]=arguments[x];return M.apply(c(this),b),r(J.get(this))}:function(){for(var E=arguments.length,b=new Array(E),x=0;x<E;x++)b[x]=arguments[x];return r(M.apply(c(this),b))}:function(E){for(var b=arguments.length,x=new Array(b>1?b-1:0),k=1;k<b;k++)x[k-1]=arguments[k];const a=M.call(c(this),E,...x);return T.set(a,E.sort?E.sort():[E]),r(a)}}function B(M){return"function"===typeof M?y(M):(M instanceof IDBTransaction&&function(M){if(u.has(M))return;const E=new Promise(((E,b)=>{const x=()=>{M.removeEventListener("complete",k),M.removeEventListener("error",a),M.removeEventListener("abort",a)},k=()=>{E(),x()},a=()=>{b(M.error||new DOMException("AbortError","AbortError")),x()};M.addEventListener("complete",k),M.addEventListener("error",a),M.addEventListener("abort",a)}));u.set(M,E)}(M),E=M,(g||(g=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((M=>E instanceof M))?new Proxy(M,t):M);var E}function r(M){if(M instanceof IDBRequest)return function(M){const E=new Promise(((E,b)=>{const x=()=>{M.removeEventListener("success",k),M.removeEventListener("error",a)},k=()=>{E(r(M.result)),x()},a=()=>{b(M.error),x()};M.addEventListener("success",k),M.addEventListener("error",a)}));return E.then((E=>{E instanceof IDBCursor&&J.set(E,M)})).catch((()=>{})),I.set(E,M),E}(M);if(V.has(M))return V.get(M);const E=B(M);return E!==M&&(V.set(M,E),I.set(E,M)),E}const c=M=>I.get(M);const C=["get","getKey","getAll","getAllKeys","count"],R=["put","add","delete","clear"],w=new Map;function S(M,E){if(!(M instanceof IDBDatabase)||E in M||"string"!==typeof E)return;if(w.get(E))return w.get(E);const b=E.replace(/FromIndex$/,""),x=E!==b,k=R.includes(b);if(!(b in(x?IDBIndex:IDBObjectStore).prototype)||!k&&!C.includes(b))return;const a=async function(M){const E=this.transaction(M,k?"readwrite":"readonly");let a=E.store;for(var g=arguments.length,n=new Array(g>1?g-1:0),J=1;J<g;J++)n[J-1]=arguments[J];return x&&(a=a.index(n.shift())),(await Promise.all([a[b](...n),k&&E.done]))[0]};return w.set(E,a),a}t=(M=>({...M,get:(E,b,x)=>S(E,b)||M.get(E,b,x),has:(E,b)=>!!S(E,b)||M.has(E,b)}))(t);class X{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map((M=>{if(function(M){const E=M.getComponent();return"VERSION"===(null===E||void 0===E?void 0:E.type)}(M)){const E=M.getImmediate();return`${E.library}/${E.version}`}return null})).filter((M=>M)).join(" ")}}const U="@firebase/app",v="0.9.13",N=new k.d("@firebase/app"),K="@firebase/app-compat",h="@firebase/analytics-compat",Z="@firebase/analytics",O="@firebase/app-check-compat",p="@firebase/app-check",P="@firebase/auth",F="@firebase/auth-compat",l="@firebase/database",d="@firebase/database-compat",W="@firebase/functions",m="@firebase/functions-compat",o="@firebase/installations",j="@firebase/installations-compat",s="@firebase/messaging",q="@firebase/messaging-compat",D="@firebase/performance",z="@firebase/performance-compat",A="@firebase/remote-config",Y="@firebase/remote-config-compat",i="@firebase/storage",G="@firebase/storage-compat",H="@firebase/firestore",e="@firebase/firestore-compat",Q="firebase",L="[DEFAULT]",f={[U]:"fire-core",[K]:"fire-core-compat",[Z]:"fire-analytics",[h]:"fire-analytics-compat",[p]:"fire-app-check",[O]:"fire-app-check-compat",[P]:"fire-auth",[F]:"fire-auth-compat",[l]:"fire-rtdb",[d]:"fire-rtdb-compat",[W]:"fire-fn",[m]:"fire-fn-compat",[o]:"fire-iid",[j]:"fire-iid-compat",[s]:"fire-fcm",[q]:"fire-fcm-compat",[D]:"fire-perf",[z]:"fire-perf-compat",[A]:"fire-rc",[Y]:"fire-rc-compat",[i]:"fire-gcs",[G]:"fire-gcs-compat",[H]:"fire-fst",[e]:"fire-fst-compat","fire-js":"fire-js",[Q]:"fire-js-all"},MM=new Map,EM=new Map;function bM(M,E){try{M.container.uf(E)}catch(b){N.debug(`Component ${E.name} failed to register with FirebaseApp ${M.name}`,b)}}function xM(M,E){M.container.addOrOverwriteComponent(E)}function kM(M){const E=M.name;if(EM.has(E))return N.debug(`There were multiple attempts to register component ${E}.`),!1;EM.set(E,M);for(const b of MM.values())bM(b,M);return!0}function aM(M,E){const b=M.container.getProvider("heartbeat").getImmediate({optional:!0});return b&&b.triggerHeartbeat(),M.container.getProvider(E)}function gM(M,E){let b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;aM(M,E).clearInstance(b)}function nM(){EM.clear()}const JM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},uM=new a.h("app","Firebase",JM);class TM{constructor(M,E,b){this._isDeleted=!1,this._options=Object.assign({},M),this._config=Object.assign({},E),this._name=E.name,this._automaticDataCollectionEnabled=E.automaticDataCollectionEnabled,this._container=b,this.container.uf(new x.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(M){this.checkDestroyed(),this._automaticDataCollectionEnabled=M}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(M){this._isDeleted=M}checkDestroyed(){if(this.isDeleted)throw uM.create("app-deleted",{appName:this._name})}}const VM="9.23.0";function IM(M){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=M;if("object"!==typeof E){E={name:E}}const k=Object.assign({name:L,automaticDataCollectionEnabled:!1},E),g=k.name;if("string"!==typeof g||!g)throw uM.create("bad-app-name",{appName:String(g)});if(b||(b=(0,a.B)()),!b)throw uM.create("no-options");const n=MM.get(g);if(n){if((0,a.v)(b,n.options)&&(0,a.v)(k,n.config))return n;throw uM.create("duplicate-app",{appName:g})}const J=new x.e(g);for(const x of EM.values())J.uf(x);const u=new TM(b,k,J);return MM.set(g,u),u}function tM(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;const E=MM.get(M);if(!E&&M===L&&(0,a.B)())return IM();if(!E)throw uM.create("no-app",{appName:M});return E}function yM(){return Array.from(MM.values())}async function BM(M){const E=M.name;MM.has(E)&&(MM.delete(E),await Promise.all(M.container.getProviders().map((M=>M.delete()))),M.isDeleted=!0)}function rM(M,E,b){var k;let a=null!==(k=f[M])&&void 0!==k?k:M;b&&(a+=`-${b}`);const g=a.match(/\s|\//),n=E.match(/\s|\//);if(g||n){const M=[`Unable to register library "${a}" with version "${E}":`];return g&&M.push(`library name "${a}" contains illegal characters (whitespace or "/")`),g&&n&&M.push("and"),n&&M.push(`version name "${E}" contains illegal characters (whitespace or "/")`),void N.warn(M.join(" "))}kM(new x.h(`${a}-version`,(()=>({library:a,version:E})),"VERSION"))}function cM(M,E){if(null!==M&&"function"!==typeof M)throw uM.create("invalid-log-argument");(0,k.k)(M,E)}function CM(M){(0,k.h)(M)}const RM="firebase-heartbeat-store";let wM=null;function SM(){return wM||(wM=function(M,E){let{blocked:b,upgrade:x,blocking:k,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const g=indexedDB.open(M,E),n=r(g);return x&&g.addEventListener("upgradeneeded",(M=>{x(r(g.result),M.oldVersion,M.newVersion,r(g.transaction),M)})),b&&g.addEventListener("blocked",(M=>b(M.oldVersion,M.newVersion,M))),n.then((M=>{a&&M.addEventListener("close",(()=>a())),k&&M.addEventListener("versionchange",(M=>k(M.oldVersion,M.newVersion,M)))})).catch((()=>{})),n}("firebase-heartbeat-database",1,{upgrade:(M,E)=>{if(0===E)M.createObjectStore(RM)}}).catch((M=>{throw uM.create("idb-open",{originalErrorMessage:M.message})}))),wM}async function XM(M,E){try{const b=(await SM()).transaction(RM,"readwrite"),x=b.objectStore(RM);await x.put(E,UM(M)),await b.done}catch(b){if(b instanceof a.i)N.warn(b.message);else{const M=uM.create("idb-set",{originalErrorMessage:null===b||void 0===b?void 0:b.message});N.warn(M.message)}}}function UM(M){return`${M.name}!${M.options.appId}`}class vM{constructor(M){this.container=M,this._heartbeatsCache=null;const E=this.container.getProvider("app").getImmediate();this.Ni=new KM(E),this._heartbeatsCachePromise=this.Ni.read().then((M=>(this._heartbeatsCache=M,M)))}async triggerHeartbeat(){const M=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),E=NM();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==E&&!this._heartbeatsCache.heartbeats.some((M=>M.date===E)))return this._heartbeatsCache.heartbeats.push({date:E,agent:M}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((M=>{const E=new Date(M.date).valueOf();return Date.now()-E<=2592e6})),this.Ni.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const M=NM(),{heartbeatsToSend:E,unsentEntries:b}=function(M){let E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const b=[];let x=M.slice();for(const k of M){const M=b.find((M=>M.agent===k.agent));if(M){if(M.dates.push(k.date),hM(b)>E){M.dates.pop();break}}else if(b.push({agent:k.agent,dates:[k.date]}),hM(b)>E){b.pop();break}x=x.slice(1)}return{heartbeatsToSend:b,unsentEntries:x}}(this._heartbeatsCache.heartbeats),x=(0,a.o)(JSON.stringify({version:2,heartbeats:E}));return this._heartbeatsCache.lastSentHeartbeatDate=M,b.length>0?(this._heartbeatsCache.heartbeats=b,await this.Ni.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ni.overwrite(this._heartbeatsCache)),x}}function NM(){return(new Date).toISOString().substring(0,10)}class KM{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.V)()&&(0,a.db)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(M){try{const E=await SM();return await E.transaction(RM).objectStore(RM).get(UM(M))}catch(E){if(E instanceof a.i)N.warn(E.message);else{const M=uM.create("idb-get",{originalErrorMessage:null===E||void 0===E?void 0:E.message});N.warn(M.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(M){var E;if(await this._canUseIndexedDBPromise){const b=await this.read();return XM(this.app,{lastSentHeartbeatDate:null!==(E=M.lastSentHeartbeatDate)&&void 0!==E?E:b.lastSentHeartbeatDate,heartbeats:M.heartbeats})}}async add(M){var E;if(await this._canUseIndexedDBPromise){const b=await this.read();return XM(this.app,{lastSentHeartbeatDate:null!==(E=M.lastSentHeartbeatDate)&&void 0!==E?E:b.lastSentHeartbeatDate,heartbeats:[...b.heartbeats,...M.heartbeats]})}}}function hM(M){return(0,a.o)(JSON.stringify({version:2,heartbeats:M})).length}var ZM;ZM="",kM(new x.h("platform-logger",(M=>new X(M)),"PRIVATE")),kM(new x.h("heartbeat",(M=>new vM(M)),"PRIVATE")),rM(U,v,ZM),rM(U,v,"esm2017"),rM("fire-js","")},11171:(M,E,b)=>{b.d(E,{e:()=>n,h:()=>k});var x=b(11180);class k{constructor(M,E,b){this.name=M,this.instanceFactory=E,this.type=b,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(M){return this.instantiationMode=M,this}setMultipleInstances(M){return this.multipleInstances=M,this}setServiceProps(M){return this.serviceProps=M,this}setInstanceCreatedCallback(M){return this.onInstanceCreated=M,this}}const a="[DEFAULT]";class g{constructor(M,E){this.name=M,this.container=E,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(M){const E=this.normalizeInstanceIdentifier(M);if(!this.instancesDeferred.has(E)){const M=new x.e;if(this.instancesDeferred.set(E,M),this.isInitialized(E)||this.shouldAutoInitialize())try{const b=this.getOrInitializeService({instanceIdentifier:E});b&&M.resolve(b)}catch(b){}}return this.instancesDeferred.get(E).promise}getImmediate(M){var E;const b=this.normalizeInstanceIdentifier(null===M||void 0===M?void 0:M.identifier),x=null!==(E=null===M||void 0===M?void 0:M.optional)&&void 0!==E&&E;if(!this.isInitialized(b)&&!this.shouldAutoInitialize()){if(x)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:b})}catch(k){if(x)return null;throw k}}getComponent(){return this.component}setComponent(M){if(M.name!==this.name)throw Error(`Mismatching Component ${M.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=M,this.shouldAutoInitialize()){if(function(M){return"EAGER"===M.instantiationMode}(M))try{this.getOrInitializeService({instanceIdentifier:a})}catch(E){}for(const[M,b]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(M);try{const M=this.getOrInitializeService({instanceIdentifier:x});b.resolve(M)}catch(E){}}}}clearInstance(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;this.instancesDeferred.delete(M),this.instancesOptions.delete(M),this.instances.delete(M)}async delete(){const M=Array.from(this.instances.values());await Promise.all([...M.filter((M=>"INTERNAL"in M)).map((M=>M.INTERNAL.delete())),...M.filter((M=>"_delete"in M)).map((M=>M._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return this.instances.has(M)}getOptions(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return this.instancesOptions.get(M)||{}}initialize(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:E={}}=M,b=this.normalizeInstanceIdentifier(M.instanceIdentifier);if(this.isInitialized(b))throw Error(`${this.name}(${b}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const x=this.getOrInitializeService({instanceIdentifier:b,options:E});for(const[k,a]of this.instancesDeferred.entries()){b===this.normalizeInstanceIdentifier(k)&&a.resolve(x)}return x}ti(M,E){var b;const x=this.normalizeInstanceIdentifier(E),k=null!==(b=this.onInitCallbacks.get(x))&&void 0!==b?b:new Set;k.add(M),this.onInitCallbacks.set(x,k);const a=this.instances.get(x);return a&&M(a,x),()=>{k.delete(M)}}invokeOnInitCallbacks(M,E){const b=this.onInitCallbacks.get(E);if(b)for(const k of b)try{k(M,E)}catch(x){}}getOrInitializeService(M){let{instanceIdentifier:E,options:b={}}=M,x=this.instances.get(E);if(!x&&this.component&&(x=this.component.instanceFactory(this.container,{instanceIdentifier:(k=E,k===a?void 0:k),options:b}),this.instances.set(E,x),this.instancesOptions.set(E,b),this.invokeOnInitCallbacks(x,E),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,E,x)}catch(g){}var k;return x||null}normalizeInstanceIdentifier(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return this.component?this.component.multipleInstances?M:a:M}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class n{constructor(M){this.name=M,this.providers=new Map}uf(M){const E=this.getProvider(M.name);if(E.isComponentSet())throw new Error(`Component ${M.name} has already been registered with ${this.name}`);E.setComponent(M)}addOrOverwriteComponent(M){this.getProvider(M.name).isComponentSet()&&this.providers.delete(M.name),this.uf(M)}getProvider(M){if(this.providers.has(M))return this.providers.get(M);const E=new g(M,this);return this.providers.set(M,E),E}getProviders(){return Array.from(this.providers.values())}}},11185:(M,E,b)=>{b.d(E,{c:()=>k,d:()=>u,h:()=>T,k:()=>V});const x=[];var k;!function(M){M[M.DEBUG=0]="DEBUG",M[M.VERBOSE=1]="VERBOSE",M[M.INFO=2]="INFO",M[M.WARN=3]="WARN",M[M.ERROR=4]="ERROR",M[M.SILENT=5]="SILENT"}(k||(k={}));const a={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},g=k.INFO,n={[k.DEBUG]:"log",[k.VERBOSE]:"log",[k.INFO]:"info",[k.WARN]:"warn",[k.ERROR]:"error"},J=function(M,E){if(E<M.logLevel)return;const b=(new Date).toISOString(),x=n[E];if(!x)throw new Error(`Attempted to log a message with an invalid logType (value: ${E})`);for(var k=arguments.length,a=new Array(k>2?k-2:0),g=2;g<k;g++)a[g-2]=arguments[g];console[x](`[${b}]  ${M.name}:`,...a)};class u{constructor(M){this.name=M,this._logLevel=g,this._logHandler=J,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(M){if(!(M in k))throw new TypeError(`Invalid value "${M}" assigned to \`logLevel\``);this._logLevel=M}setLogLevel(M){this._logLevel="string"===typeof M?a[M]:M}get logHandler(){return this._logHandler}set logHandler(M){if("function"!==typeof M)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=M}get userLogHandler(){return this._userLogHandler}set userLogHandler(M){this._userLogHandler=M}debug(){for(var M=arguments.length,E=new Array(M),b=0;b<M;b++)E[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,k.DEBUG,...E),this._logHandler(this,k.DEBUG,...E)}log(){for(var M=arguments.length,E=new Array(M),b=0;b<M;b++)E[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,k.VERBOSE,...E),this._logHandler(this,k.VERBOSE,...E)}info(){for(var M=arguments.length,E=new Array(M),b=0;b<M;b++)E[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,k.INFO,...E),this._logHandler(this,k.INFO,...E)}warn(){for(var M=arguments.length,E=new Array(M),b=0;b<M;b++)E[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,k.WARN,...E),this._logHandler(this,k.WARN,...E)}error(){for(var M=arguments.length,E=new Array(M),b=0;b<M;b++)E[b]=arguments[b];this._userLogHandler&&this._userLogHandler(this,k.ERROR,...E),this._logHandler(this,k.ERROR,...E)}}function T(M){x.forEach((E=>{E.setLogLevel(M)}))}function V(M,E){for(const b of x){let x=null;E&&E.level&&(x=a[E.level]),b.userLogHandler=null===M?null:function(E,b){for(var a=arguments.length,g=new Array(a>2?a-2:0),n=2;n<a;n++)g[n-2]=arguments[n];const J=g.map((M=>{if(null==M)return null;if("string"===typeof M)return M;if("number"===typeof M||"boolean"===typeof M)return M.toString();if(M instanceof Error)return M.message;try{return JSON.stringify(M)}catch(E){return null}})).filter((M=>M)).join(" ");b>=(null!==x&&void 0!==x?x:E.logLevel)&&M({level:k[b].toLowerCase(),message:J,args:g,type:E.name})}}}}}]);