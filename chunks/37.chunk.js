/*! For license information please see p1zbu.37.4af11389.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[37],{11721:(I,S,d)=>{d.d(S,{A:()=>p,B:()=>Y,C:()=>E,G:()=>M,I:()=>k,J:()=>i,K:()=>u,N:()=>t,R:()=>j,S:()=>U,U:()=>G,W:()=>h,_:()=>H,bb:()=>C,e:()=>o,h:()=>e,i:()=>R,k:()=>n,o:()=>q,r:()=>T,u:()=>L,v:()=>W,w:()=>F,y:()=>s});const N=function(I){const S=[];let d=0;for(let N=0;N<I.length;N++){let O=I.charCodeAt(N);O<128?S[d++]=O:O<2048?(S[d++]=O>>6|192,S[d++]=63&O|128):55296===(64512&O)&&N+1<I.length&&56320===(64512&I.charCodeAt(N+1))?(O=65536+((1023&O)<<10)+(1023&I.charCodeAt(++N)),S[d++]=O>>18|240,S[d++]=O>>12&63|128,S[d++]=O>>6&63|128,S[d++]=63&O|128):(S[d++]=O>>12|224,S[d++]=O>>6&63|128,S[d++]=63&O|128)}return S},O={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(I,S){if(!Array.isArray(I))throw Error("encodeByteArray takes an array as a parameter");this.init_();const d=S?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let O=0;O<I.length;O+=3){const S=I[O],g=O+1<I.length,T=g?I[O+1]:0,q=O+2<I.length,a=q?I[O+2]:0,f=S>>2,Y=(3&S)<<4|T>>4;let p=(15&T)<<2|a>>6,E=63&a;q||(E=64,g||(p=64)),N.push(d[f],d[Y],d[p],d[E])}return N.join("")},encodeString(I,S){return this.HAS_NATIVE_SUPPORT&&!S?btoa(I):this.encodeByteArray(N(I),S)},decodeString(I,S){return this.HAS_NATIVE_SUPPORT&&!S?atob(I):function(I){const S=[];let d=0,N=0;for(;d<I.length;){const O=I[d++];if(O<128)S[N++]=String.fromCharCode(O);else if(O>191&&O<224){const g=I[d++];S[N++]=String.fromCharCode((31&O)<<6|63&g)}else if(O>239&&O<365){const g=((7&O)<<18|(63&I[d++])<<12|(63&I[d++])<<6|63&I[d++])-65536;S[N++]=String.fromCharCode(55296+(g>>10)),S[N++]=String.fromCharCode(56320+(1023&g))}else{const g=I[d++],T=I[d++];S[N++]=String.fromCharCode((15&O)<<12|(63&g)<<6|63&T)}}return S.join("")}(this.decodeStringToByteArray(I,S))},decodeStringToByteArray(I,S){this.init_();const d=S?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let O=0;O<I.length;){const S=d[I.charAt(O++)],T=O<I.length?d[I.charAt(O)]:0;++O;const q=O<I.length?d[I.charAt(O)]:64;++O;const a=O<I.length?d[I.charAt(O)]:64;if(++O,null==S||null==T||null==q||null==a)throw new g;const f=S<<2|T>>4;if(N.push(f),64!==q){const I=T<<4&240|q>>2;if(N.push(I),64!==a){const I=q<<6&192|a;N.push(I)}}}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let I=0;I<this.ENCODED_VALS.length;I++)this.byteToCharMap_[I]=this.ENCODED_VALS.charAt(I),this.charToByteMap_[this.byteToCharMap_[I]]=I,this.byteToCharMapWebSafe_[I]=this.ENCODED_VALS_WEBSAFE.charAt(I),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[I]]=I,I>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(I)]=I,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(I)]=I)}}};class g extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T=function(I){return function(I){const S=N(I);return O.encodeByteArray(S,!0)}(I).replace(/\./g,"")},q=function(I){try{return O.decodeString(I,!0)}catch(S){console.error("base64Decode failed: ",S)}return null};const a=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof d.g)return d.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,f=()=>{try{return a()||(()=>{if("undefined"===typeof process)return})()||(()=>{if("undefined"===typeof document)return;let I;try{I=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(d){return}const S=I&&q(I[1]);return S&&JSON.parse(S)})()}catch(I){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${I}`)}},Y=I=>{var S,d;return null===(d=null===(S=f())||void 0===S?void 0:S.emulatorHosts)||void 0===d?void 0:d[I]},p=()=>{var I;return null===(I=f())||void 0===I?void 0:I.config},E=I=>{var S;return null===(S=f())||void 0===S?void 0:S[`_${I}`]};class o{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((I,S)=>{this.resolve=I,this.reject=S}))}wrapCallback(I){return(S,d)=>{S?this.reject(S):this.resolve(d),"function"===typeof I&&(this.promise.catch((()=>{})),1===I.length?I(S):I(S,d))}}}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function U(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function i(){const I="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof I&&void 0!==I.id}function G(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function t(){const I=k();return I.indexOf("MSIE ")>=0||I.indexOf("Trident/")>=0}function j(){try{return"object"===typeof indexedDB}catch(I){return!1}}function C(){return new Promise(((I,S)=>{try{let d=!0;const N="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(N);O.onsuccess=()=>{O.result.close(),d||self.indexedDB.deleteDatabase(N),I(!0)},O.onupgradeneeded=()=>{d=!1},O.onerror=()=>{var I;S((null===(I=O.error)||void 0===I?void 0:I.message)||"")}}catch(d){S(d)}}))}function n(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class R extends Error{constructor(I,S,d){super(S),this.code=I,this.customData=d,this.name="FirebaseError",Object.setPrototypeOf(this,R.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,e.prototype.create)}}class e{constructor(I,S,d){this.service=I,this.serviceName=S,this.errors=d}create(I){const S=(arguments.length<=1?void 0:arguments[1])||{},d=`${this.service}/${I}`,N=this.errors[I],O=N?function(I,S){return I.replace(z,((I,d)=>{const N=S[d];return null!=N?String(N):`<${d}?>`}))}(N,S):"Error",g=`${this.serviceName}: ${O} (${d}).`;return new R(d,g,S)}}const z=/\{\$([^}]+)}/g;function u(I){for(const S in I)if(Object.prototype.hasOwnProperty.call(I,S))return!1;return!0}function F(I,S){if(I===S)return!0;const d=Object.keys(I),N=Object.keys(S);for(const O of d){if(!N.includes(O))return!1;const d=I[O],g=S[O];if(x(d)&&x(g)){if(!F(d,g))return!1}else if(d!==g)return!1}for(const O of N)if(!d.includes(O))return!1;return!0}function x(I){return null!==I&&"object"===typeof I}function H(I){const S=[];for(const[d,N]of Object.entries(I))Array.isArray(N)?N.forEach((I=>{S.push(encodeURIComponent(d)+"="+encodeURIComponent(I))})):S.push(encodeURIComponent(d)+"="+encodeURIComponent(N));return S.length?"&"+S.join("&"):""}function h(I){const S={};return I.replace(/^\?/,"").split("&").forEach((I=>{if(I){const[d,N]=I.split("=");S[decodeURIComponent(d)]=decodeURIComponent(N)}})),S}function s(I){const S=I.indexOf("?");if(!S)return"";const d=I.indexOf("#",S);return I.substring(S,d>0?d:void 0)}function W(I,S){const d=new m(I,S);return d.subscribe.bind(d)}class m{constructor(I,S){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=S,this.task.then((()=>{I(this)})).catch((I=>{this.error(I)}))}next(I){this.forEachObserver((S=>{S.next(I)}))}error(I){this.forEachObserver((S=>{S.error(I)})),this.close(I)}complete(){this.forEachObserver((I=>{I.complete()})),this.close()}subscribe(I,S,d){let N;if(void 0===I&&void 0===S&&void 0===d)throw new Error("Missing Observer.");N=function(I,S){if("object"!==typeof I||null===I)return!1;for(const d of S)if(d in I&&"function"===typeof I[d])return!0;return!1}(I,["next","error","complete"])?I:{next:I,error:S,complete:d},void 0===N.next&&(N.next=c),void 0===N.error&&(N.error=c),void 0===N.complete&&(N.complete=c);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch(I){}})),this.observers.push(N),O}unsubscribeOne(I){void 0!==this.observers&&void 0!==this.observers[I]&&(delete this.observers[I],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(I){if(!this.finalized)for(let S=0;S<this.observers.length;S++)this.sendOne(S,I)}sendOne(I,S){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[I])try{S(this.observers[I])}catch(d){"undefined"!==typeof console&&console.error&&console.error(d)}}))}close(I){this.finalized||(this.finalized=!0,void 0!==I&&(this.finalError=I),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function c(){}const B=1e3,A=2,V=144e5,y=.5;function L(I){let S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;const d=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:B)*Math.pow(S,I),N=Math.round(y*d*(Math.random()-.5)*2);return Math.min(V,d+N)}function M(I){return I&&I._delegate?I._delegate:I}},11711:(I,S,d)=>{d.d(S,{c:()=>g.i,e:()=>pI,g:()=>v,h:()=>dI,j:()=>NI,n:()=>II,r:()=>qI,t:()=>SI,v:()=>gI,z:()=>OI,D:()=>TI,F:()=>UI,I:()=>oI,G:()=>kI,K:()=>EI,O:()=>GI,R:()=>iI,S:()=>tI});var N=d(11717),O=d(11726),g=d(11721);let T,q;const a=new WeakMap,f=new WeakMap,Y=new WeakMap,p=new WeakMap,E=new WeakMap;let o={get(I,S,d){if(I instanceof IDBTransaction){if("done"===S)return f.get(I);if("objectStoreNames"===S)return I.objectStoreNames||Y.get(I);if("store"===S)return d.objectStoreNames[1]?void 0:d.objectStore(d.objectStoreNames[0])}return i(I[S])},set:(I,S,d)=>(I[S]=d,!0),has:(I,S)=>I instanceof IDBTransaction&&("done"===S||"store"===S)||S in I};function k(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(I)?function(){for(var S=arguments.length,d=new Array(S),N=0;N<S;N++)d[N]=arguments[N];return I.apply(G(this),d),i(a.get(this))}:function(){for(var S=arguments.length,d=new Array(S),N=0;N<S;N++)d[N]=arguments[N];return i(I.apply(G(this),d))}:function(S){for(var d=arguments.length,N=new Array(d>1?d-1:0),O=1;O<d;O++)N[O-1]=arguments[O];const g=I.call(G(this),S,...N);return Y.set(g,S.sort?S.sort():[S]),i(g)}}function U(I){return"function"===typeof I?k(I):(I instanceof IDBTransaction&&function(I){if(f.has(I))return;const S=new Promise(((S,d)=>{const N=()=>{I.removeEventListener("complete",O),I.removeEventListener("error",g),I.removeEventListener("abort",g)},O=()=>{S(),N()},g=()=>{d(I.error||new DOMException("AbortError","AbortError")),N()};I.addEventListener("complete",O),I.addEventListener("error",g),I.addEventListener("abort",g)}));f.set(I,S)}(I),S=I,(T||(T=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((I=>S instanceof I))?new Proxy(I,o):I);var S}function i(I){if(I instanceof IDBRequest)return function(I){const S=new Promise(((S,d)=>{const N=()=>{I.removeEventListener("success",O),I.removeEventListener("error",g)},O=()=>{S(i(I.result)),N()},g=()=>{d(I.error),N()};I.addEventListener("success",O),I.addEventListener("error",g)}));return S.then((S=>{S instanceof IDBCursor&&a.set(S,I)})).catch((()=>{})),E.set(S,I),S}(I);if(p.has(I))return p.get(I);const S=U(I);return S!==I&&(p.set(I,S),E.set(S,I)),S}const G=I=>E.get(I);const t=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],C=new Map;function n(I,S){if(!(I instanceof IDBDatabase)||S in I||"string"!==typeof S)return;if(C.get(S))return C.get(S);const d=S.replace(/FromIndex$/,""),N=S!==d,O=j.includes(d);if(!(d in(N?IDBIndex:IDBObjectStore).prototype)||!O&&!t.includes(d))return;const g=async function(I){const S=this.transaction(I,O?"readwrite":"readonly");let g=S.store;for(var T=arguments.length,q=new Array(T>1?T-1:0),a=1;a<T;a++)q[a-1]=arguments[a];return N&&(g=g.index(q.shift())),(await Promise.all([g[d](...q),O&&S.done]))[0]};return C.set(S,g),g}o=(I=>({...I,get:(S,d,N)=>n(S,d)||I.get(S,d,N),has:(S,d)=>!!n(S,d)||I.has(S,d)}))(o);class R{constructor(I){this.container=I}getPlatformInfoString(){return this.container.getProviders().map((I=>{if(function(I){const S=I.getComponent();return"VERSION"===(null===S||void 0===S?void 0:S.type)}(I)){const S=I.getImmediate();return`${S.library}/${S.version}`}return null})).filter((I=>I)).join(" ")}}const e="@firebase/app",z="0.9.13",u=new O.h("@firebase/app"),F="@firebase/app-compat",x="@firebase/analytics-compat",H="@firebase/analytics",h="@firebase/app-check-compat",s="@firebase/app-check",W="@firebase/auth",m="@firebase/auth-compat",c="@firebase/database",B="@firebase/database-compat",A="@firebase/functions",V="@firebase/functions-compat",y="@firebase/installations",L="@firebase/installations-compat",M="@firebase/messaging",Q="@firebase/messaging-compat",w="@firebase/performance",D="@firebase/performance-compat",P="@firebase/remote-config",J="@firebase/remote-config-compat",b="@firebase/storage",X="@firebase/storage-compat",Z="@firebase/firestore",l="@firebase/firestore-compat",r="firebase",v="[DEFAULT]",K={[e]:"fire-core",[F]:"fire-core-compat",[H]:"fire-analytics",[x]:"fire-analytics-compat",[s]:"fire-app-check",[h]:"fire-app-check-compat",[W]:"fire-auth",[m]:"fire-auth-compat",[c]:"fire-rtdb",[B]:"fire-rtdb-compat",[A]:"fire-fn",[V]:"fire-fn-compat",[y]:"fire-iid",[L]:"fire-iid-compat",[M]:"fire-fcm",[Q]:"fire-fcm-compat",[w]:"fire-perf",[D]:"fire-perf-compat",[P]:"fire-rc",[J]:"fire-rc-compat",[b]:"fire-gcs",[X]:"fire-gcs-compat",[Z]:"fire-fst",[l]:"fire-fst-compat","fire-js":"fire-js",[r]:"fire-js-all"},II=new Map,SI=new Map;function dI(I,S){try{I.container.vf(S)}catch(d){u.debug(`Component ${S.name} failed to register with FirebaseApp ${I.name}`,d)}}function NI(I,S){I.container.addOrOverwriteComponent(S)}function OI(I){const S=I.name;if(SI.has(S))return u.debug(`There were multiple attempts to register component ${S}.`),!1;SI.set(S,I);for(const d of II.values())dI(d,I);return!0}function gI(I,S){const d=I.container.getProvider("heartbeat").getImmediate({optional:!0});return d&&d.triggerHeartbeat(),I.container.getProvider(S)}function TI(I,S){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;gI(I,S).clearInstance(d)}function qI(){SI.clear()}const aI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},fI=new g.h("app","Firebase",aI);class YI{constructor(I,S,d){this._isDeleted=!1,this._options=Object.assign({},I),this._config=Object.assign({},S),this._name=S.name,this._automaticDataCollectionEnabled=S.automaticDataCollectionEnabled,this._container=d,this.container.vf(new N.h("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(I){this.checkDestroyed(),this._automaticDataCollectionEnabled=I}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(I){this._isDeleted=I}checkDestroyed(){if(this.isDeleted)throw fI.create("app-deleted",{appName:this._name})}}const pI="9.23.0";function EI(I){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=I;if("object"!==typeof S){S={name:S}}const O=Object.assign({name:v,automaticDataCollectionEnabled:!1},S),T=O.name;if("string"!==typeof T||!T)throw fI.create("bad-app-name",{appName:String(T)});if(d||(d=(0,g.A)()),!d)throw fI.create("no-options");const q=II.get(T);if(q){if((0,g.w)(d,q.options)&&(0,g.w)(O,q.config))return q;throw fI.create("duplicate-app",{appName:T})}const a=new N.d(T);for(const N of SI.values())a.vf(N);const f=new YI(d,O,a);return II.set(T,f),f}function oI(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;const S=II.get(I);if(!S&&I===v&&(0,g.A)())return EI();if(!S)throw fI.create("no-app",{appName:I});return S}function kI(){return Array.from(II.values())}async function UI(I){const S=I.name;II.has(S)&&(II.delete(S),await Promise.all(I.container.getProviders().map((I=>I.delete()))),I.isDeleted=!0)}function iI(I,S,d){var O;let g=null!==(O=K[I])&&void 0!==O?O:I;d&&(g+=`-${d}`);const T=g.match(/\s|\//),q=S.match(/\s|\//);if(T||q){const I=[`Unable to register library "${g}" with version "${S}":`];return T&&I.push(`library name "${g}" contains illegal characters (whitespace or "/")`),T&&q&&I.push("and"),q&&I.push(`version name "${S}" contains illegal characters (whitespace or "/")`),void u.warn(I.join(" "))}OI(new N.h(`${g}-version`,(()=>({library:g,version:S})),"VERSION"))}function GI(I,S){if(null!==I&&"function"!==typeof I)throw fI.create("invalid-log-argument");(0,O.n)(I,S)}function tI(I){(0,O.j)(I)}const jI="firebase-heartbeat-store";let CI=null;function nI(){return CI||(CI=function(I,S){let{blocked:d,upgrade:N,blocking:O,terminated:g}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const T=indexedDB.open(I,S),q=i(T);return N&&T.addEventListener("upgradeneeded",(I=>{N(i(T.result),I.oldVersion,I.newVersion,i(T.transaction),I)})),d&&T.addEventListener("blocked",(I=>d(I.oldVersion,I.newVersion,I))),q.then((I=>{g&&I.addEventListener("close",(()=>g())),O&&I.addEventListener("versionchange",(I=>O(I.oldVersion,I.newVersion,I)))})).catch((()=>{})),q}("firebase-heartbeat-database",1,{upgrade:(I,S)=>{if(0===S)I.createObjectStore(jI)}}).catch((I=>{throw fI.create("idb-open",{originalErrorMessage:I.message})}))),CI}async function RI(I,S){try{const d=(await nI()).transaction(jI,"readwrite"),N=d.objectStore(jI);await N.put(S,eI(I)),await d.done}catch(d){if(d instanceof g.i)u.warn(d.message);else{const I=fI.create("idb-set",{originalErrorMessage:null===d||void 0===d?void 0:d.message});u.warn(I.message)}}}function eI(I){return`${I.name}!${I.options.appId}`}class zI{constructor(I){this.container=I,this._heartbeatsCache=null;const S=this.container.getProvider("app").getImmediate();this.Ti=new FI(S),this._heartbeatsCachePromise=this.Ti.read().then((I=>(this._heartbeatsCache=I,I)))}async triggerHeartbeat(){const I=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),S=uI();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==S&&!this._heartbeatsCache.heartbeats.some((I=>I.date===S)))return this._heartbeatsCache.heartbeats.push({date:S,agent:I}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((I=>{const S=new Date(I.date).valueOf();return Date.now()-S<=2592e6})),this.Ti.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const I=uI(),{heartbeatsToSend:S,unsentEntries:d}=function(I){let S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const d=[];let N=I.slice();for(const O of I){const I=d.find((I=>I.agent===O.agent));if(I){if(I.dates.push(O.date),xI(d)>S){I.dates.pop();break}}else if(d.push({agent:O.agent,dates:[O.date]}),xI(d)>S){d.pop();break}N=N.slice(1)}return{heartbeatsToSend:d,unsentEntries:N}}(this._heartbeatsCache.heartbeats),N=(0,g.r)(JSON.stringify({version:2,heartbeats:S}));return this._heartbeatsCache.lastSentHeartbeatDate=I,d.length>0?(this._heartbeatsCache.heartbeats=d,await this.Ti.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this.Ti.overwrite(this._heartbeatsCache)),N}}function uI(){return(new Date).toISOString().substring(0,10)}class FI{constructor(I){this.app=I,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,g.R)()&&(0,g.bb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(I){try{const S=await nI();return await S.transaction(jI).objectStore(jI).get(eI(I))}catch(S){if(S instanceof g.i)u.warn(S.message);else{const I=fI.create("idb-get",{originalErrorMessage:null===S||void 0===S?void 0:S.message});u.warn(I.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(I){var S;if(await this._canUseIndexedDBPromise){const d=await this.read();return RI(this.app,{lastSentHeartbeatDate:null!==(S=I.lastSentHeartbeatDate)&&void 0!==S?S:d.lastSentHeartbeatDate,heartbeats:I.heartbeats})}}async add(I){var S;if(await this._canUseIndexedDBPromise){const d=await this.read();return RI(this.app,{lastSentHeartbeatDate:null!==(S=I.lastSentHeartbeatDate)&&void 0!==S?S:d.lastSentHeartbeatDate,heartbeats:[...d.heartbeats,...I.heartbeats]})}}}function xI(I){return(0,g.r)(JSON.stringify({version:2,heartbeats:I})).length}var HI;HI="",OI(new N.h("platform-logger",(I=>new R(I)),"PRIVATE")),OI(new N.h("heartbeat",(I=>new zI(I)),"PRIVATE")),iI(e,z,HI),iI(e,z,"esm2017"),iI("fire-js","")},11717:(I,S,d)=>{d.d(S,{d:()=>q,h:()=>O});var N=d(11721);class O{constructor(I,S,d){this.name=I,this.instanceFactory=S,this.type=d,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(I){return this.instantiationMode=I,this}setMultipleInstances(I){return this.multipleInstances=I,this}setServiceProps(I){return this.serviceProps=I,this}setInstanceCreatedCallback(I){return this.onInstanceCreated=I,this}}const g="[DEFAULT]";class T{constructor(I,S){this.name=I,this.container=S,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(I){const S=this.normalizeInstanceIdentifier(I);if(!this.instancesDeferred.has(S)){const I=new N.e;if(this.instancesDeferred.set(S,I),this.isInitialized(S)||this.shouldAutoInitialize())try{const d=this.getOrInitializeService({instanceIdentifier:S});d&&I.resolve(d)}catch(d){}}return this.instancesDeferred.get(S).promise}getImmediate(I){var S;const d=this.normalizeInstanceIdentifier(null===I||void 0===I?void 0:I.identifier),N=null!==(S=null===I||void 0===I?void 0:I.optional)&&void 0!==S&&S;if(!this.isInitialized(d)&&!this.shouldAutoInitialize()){if(N)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:d})}catch(O){if(N)return null;throw O}}getComponent(){return this.component}setComponent(I){if(I.name!==this.name)throw Error(`Mismatching Component ${I.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=I,this.shouldAutoInitialize()){if(function(I){return"EAGER"===I.instantiationMode}(I))try{this.getOrInitializeService({instanceIdentifier:g})}catch(S){}for(const[I,d]of this.instancesDeferred.entries()){const N=this.normalizeInstanceIdentifier(I);try{const I=this.getOrInitializeService({instanceIdentifier:N});d.resolve(I)}catch(S){}}}}clearInstance(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;this.instancesDeferred.delete(I),this.instancesOptions.delete(I),this.instances.delete(I)}async delete(){const I=Array.from(this.instances.values());await Promise.all([...I.filter((I=>"INTERNAL"in I)).map((I=>I.INTERNAL.delete())),...I.filter((I=>"_delete"in I)).map((I=>I._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.instances.has(I)}getOptions(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.instancesOptions.get(I)||{}}initialize(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:S={}}=I,d=this.normalizeInstanceIdentifier(I.instanceIdentifier);if(this.isInitialized(d))throw Error(`${this.name}(${d}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const N=this.getOrInitializeService({instanceIdentifier:d,options:S});for(const[O,g]of this.instancesDeferred.entries()){d===this.normalizeInstanceIdentifier(O)&&g.resolve(N)}return N}Ai(I,S){var d;const N=this.normalizeInstanceIdentifier(S),O=null!==(d=this.onInitCallbacks.get(N))&&void 0!==d?d:new Set;O.add(I),this.onInitCallbacks.set(N,O);const g=this.instances.get(N);return g&&I(g,N),()=>{O.delete(I)}}invokeOnInitCallbacks(I,S){const d=this.onInitCallbacks.get(S);if(d)for(const O of d)try{O(I,S)}catch(N){}}getOrInitializeService(I){let{instanceIdentifier:S,options:d={}}=I,N=this.instances.get(S);if(!N&&this.component&&(N=this.component.instanceFactory(this.container,{instanceIdentifier:(O=S,O===g?void 0:O),options:d}),this.instances.set(S,N),this.instancesOptions.set(S,d),this.invokeOnInitCallbacks(N,S),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,S,N)}catch(T){}var O;return N||null}normalizeInstanceIdentifier(){let I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;return this.component?this.component.multipleInstances?I:g:I}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class q{constructor(I){this.name=I,this.providers=new Map}vf(I){const S=this.getProvider(I.name);if(S.isComponentSet())throw new Error(`Component ${I.name} has already been registered with ${this.name}`);S.setComponent(I)}addOrOverwriteComponent(I){this.getProvider(I.name).isComponentSet()&&this.providers.delete(I.name),this.vf(I)}getProvider(I){if(this.providers.has(I))return this.providers.get(I);const S=new T(I,this);return this.providers.set(I,S),S}getProviders(){return Array.from(this.providers.values())}}},11726:(I,S,d)=>{d.d(S,{d:()=>O,h:()=>f,j:()=>Y,n:()=>p});const N=[];var O;!function(I){I[I.DEBUG=0]="DEBUG",I[I.VERBOSE=1]="VERBOSE",I[I.INFO=2]="INFO",I[I.WARN=3]="WARN",I[I.ERROR=4]="ERROR",I[I.SILENT=5]="SILENT"}(O||(O={}));const g={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},T=O.INFO,q={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},a=function(I,S){if(S<I.logLevel)return;const d=(new Date).toISOString(),N=q[S];if(!N)throw new Error(`Attempted to log a message with an invalid logType (value: ${S})`);for(var O=arguments.length,g=new Array(O>2?O-2:0),T=2;T<O;T++)g[T-2]=arguments[T];console[N](`[${d}]  ${I.name}:`,...g)};class f{constructor(I){this.name=I,this._logLevel=T,this._logHandler=a,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(I){if(!(I in O))throw new TypeError(`Invalid value "${I}" assigned to \`logLevel\``);this._logLevel=I}setLogLevel(I){this._logLevel="string"===typeof I?g[I]:I}get logHandler(){return this._logHandler}set logHandler(I){if("function"!==typeof I)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=I}get userLogHandler(){return this._userLogHandler}set userLogHandler(I){this._userLogHandler=I}debug(){for(var I=arguments.length,S=new Array(I),d=0;d<I;d++)S[d]=arguments[d];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...S),this._logHandler(this,O.DEBUG,...S)}log(){for(var I=arguments.length,S=new Array(I),d=0;d<I;d++)S[d]=arguments[d];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...S),this._logHandler(this,O.VERBOSE,...S)}info(){for(var I=arguments.length,S=new Array(I),d=0;d<I;d++)S[d]=arguments[d];this._userLogHandler&&this._userLogHandler(this,O.INFO,...S),this._logHandler(this,O.INFO,...S)}warn(){for(var I=arguments.length,S=new Array(I),d=0;d<I;d++)S[d]=arguments[d];this._userLogHandler&&this._userLogHandler(this,O.WARN,...S),this._logHandler(this,O.WARN,...S)}error(){for(var I=arguments.length,S=new Array(I),d=0;d<I;d++)S[d]=arguments[d];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...S),this._logHandler(this,O.ERROR,...S)}}function Y(I){N.forEach((S=>{S.setLogLevel(I)}))}function p(I,S){for(const d of N){let N=null;S&&S.level&&(N=g[S.level]),d.userLogHandler=null===I?null:function(S,d){for(var g=arguments.length,T=new Array(g>2?g-2:0),q=2;q<g;q++)T[q-2]=arguments[q];const a=T.map((I=>{if(null==I)return null;if("string"===typeof I)return I;if("number"===typeof I||"boolean"===typeof I)return I.toString();if(I instanceof Error)return I.message;try{return JSON.stringify(I)}catch(S){return null}})).filter((I=>I)).join(" ");d>=(null!==N&&void 0!==N?N:S.logLevel)&&I({level:O[d].toLowerCase(),message:a,args:T,type:S.name})}}}}}]);