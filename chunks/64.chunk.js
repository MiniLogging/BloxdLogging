"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[64],{14028:(Z,U,n)=>{n.r(U),n.d(U,{FlowGraphStopAnimationBlock:()=>V});var i=n(12826),B=n(633),l=n(513),H=n(12859);class V extends H.c{constructor(Z){super(Z),this.animationGroup=this.registerDataInput("animationGroup",i.b),this.stopAtFrame=this.registerDataInput("stopAtFrame",i.s,-1)}_preparePendingTasks(Z){const U=this.animationGroup.getValue(Z),n=this.stopAtFrame.getValue(Z)??-1,i=Z._getGlobalContextVariable("pendingStopAnimations",[]);i.push({uniqueId:U.uniqueId,stopAtFrame:n}),Z._setGlobalContextVariable("pendingStopAnimations",i)}_cancelPendingTasks(Z){const U=this.animationGroup.getValue(Z),n=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let i=0;i<n.length;i++)if(n[i].uniqueId===U.uniqueId){n.splice(i,1),Z._setGlobalContextVariable("pendingStopAnimations",n);break}}_execute(Z){const U=this.animationGroup.getValue(Z),n=this.stopAtFrame.getValue(Z)??-1;return U?isNaN(n)?this._reportError(Z,"Invalid stop time."):(n>0?this._startPendingTasks(Z):this._stopAnimation(U,Z),void this.out._activateSignal(Z)):(l.c.Warn("No animation group provided to stop."),this._reportError(Z,"No animation group provided to stop."))}_executeOnTick(Z){const U=this.animationGroup.getValue(Z),n=Z._getGlobalContextVariable("pendingStopAnimations",[]);for(let i=0;i<n.length;i++)if(n[i].uniqueId===U.uniqueId&&U.getCurrentFrame()>=n[i].stopAtFrame){this._stopAnimation(U,Z),n.splice(i,1),Z._setGlobalContextVariable("pendingStopAnimations",n),this.done._activateSignal(Z),Z._removePendingBlock(this);break}}getClassName(){return"FlowGraphStopAnimationBlock"}_stopAnimation(Z,U){const n=U._getGlobalContextVariable("currentlyRunningAnimationGroups",[]),i=n.indexOf(Z.uniqueId);-1!==i&&(Z.stop(),n.splice(i,1),U._setGlobalContextVariable("currentlyRunningAnimationGroups",n))}}(0,B.g)("FlowGraphStopAnimationBlock",V)}}]);